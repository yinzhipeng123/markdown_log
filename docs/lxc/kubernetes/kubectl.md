kubectl å‘½ä»¤



```
[root@maas1-zwlt bf3_init]# kubectl --help
kubectl æ§åˆ¶ Kubernetes é›†ç¾¤ç®¡ç†å™¨ã€‚

  æ›´å¤šä¿¡æ¯è¯·å‚è§ï¼šhttps://kubernetes.io/zh/docs/reference/kubectl/overview/

åŸºæœ¬å‘½ä»¤ï¼ˆåˆå­¦è€…ï¼‰:
  create          ä»æ–‡ä»¶æˆ–æ ‡å‡†è¾“å…¥åˆ›å»ºèµ„æº
  expose          å°†å‰¯æœ¬æ§åˆ¶å™¨ã€æœåŠ¡ã€éƒ¨ç½²æˆ– Pod æš´éœ²ä¸ºä¸€ä¸ªæ–°çš„ Kubernetes æœåŠ¡
  run             åœ¨é›†ç¾¤ä¸­è¿è¡Œä¸€ä¸ªç‰¹å®šçš„é•œåƒ
  set             åœ¨å¯¹è±¡ä¸Šè®¾ç½®ç‰¹å®šçš„åŠŸèƒ½

åŸºæœ¬å‘½ä»¤ï¼ˆä¸­çº§ï¼‰:
  explain         è·å–èµ„æºçš„æ–‡æ¡£è¯´æ˜
  get             æ˜¾ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªèµ„æº
  edit            åœ¨æœåŠ¡å™¨ä¸Šç¼–è¾‘ä¸€ä¸ªèµ„æº
  delete          é€šè¿‡æ–‡ä»¶åã€æ ‡å‡†è¾“å…¥ã€èµ„æºåç§°æˆ–æ ‡ç­¾é€‰æ‹©å™¨åˆ é™¤èµ„æº

éƒ¨ç½²å‘½ä»¤:
  rollout         ç®¡ç†èµ„æºçš„å‘å¸ƒ
  scale           ä¸ºéƒ¨ç½²ã€ReplicaSet æˆ–å‰¯æœ¬æ§åˆ¶å™¨è®¾ç½®æ–°å‰¯æœ¬æ•°
  autoscale       ä¸ºéƒ¨ç½²ã€ReplicaSetã€StatefulSet æˆ–å‰¯æœ¬æ§åˆ¶å™¨è‡ªåŠ¨æ‰©ç¼©å®¹

é›†ç¾¤ç®¡ç†å‘½ä»¤:
  certificate     ä¿®æ”¹è¯ä¹¦èµ„æº
  cluster-info    æ˜¾ç¤ºé›†ç¾¤ä¿¡æ¯
  top             æ˜¾ç¤ºèµ„æºï¼ˆCPU/å†…å­˜ï¼‰ä½¿ç”¨æƒ…å†µ
  cordon          æ ‡è®°èŠ‚ç‚¹ä¸ºä¸å¯è°ƒåº¦
  uncordon        æ ‡è®°èŠ‚ç‚¹ä¸ºå¯è°ƒåº¦
  drain           ä¸ºç»´æŠ¤å‡†å¤‡èŠ‚ç‚¹ï¼ˆé©±é€å…¶ä¸Šçš„ Podï¼‰
  taint           æ›´æ–°ä¸€ä¸ªæˆ–å¤šä¸ªèŠ‚ç‚¹ä¸Šçš„æ±¡ç‚¹

æ•…éšœæ’æŸ¥ä¸è°ƒè¯•å‘½ä»¤:
  describe        æ˜¾ç¤ºç‰¹å®šèµ„æºæˆ–èµ„æºç»„çš„è¯¦ç»†ä¿¡æ¯
  logs            æ‰“å° Pod ä¸­å®¹å™¨çš„æ—¥å¿—
  attach          é™„åŠ åˆ°æ­£åœ¨è¿è¡Œçš„å®¹å™¨
  exec            åœ¨å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤
  port-forward    å°†ä¸€ä¸ªæˆ–å¤šä¸ªæœ¬åœ°ç«¯å£è½¬å‘åˆ° Pod
  proxy           è¿è¡Œåˆ° Kubernetes API æœåŠ¡å™¨çš„ä»£ç†
  cp              åœ¨å®¹å™¨ä¸æœ¬åœ°ä¹‹é—´å¤åˆ¶æ–‡ä»¶å’Œç›®å½•
  auth            æ£€æŸ¥æˆæƒæƒ…å†µ
  debug           ä¸ºå·¥ä½œè´Ÿè½½å’ŒèŠ‚ç‚¹åˆ›å»ºè°ƒè¯•ä¼šè¯

é«˜çº§å‘½ä»¤:
  diff            å¯¹æ¯”å®é™…ç‰ˆæœ¬ä¸å°†è¦åº”ç”¨çš„ç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚
  apply           é€šè¿‡æ–‡ä»¶åæˆ–æ ‡å‡†è¾“å…¥åº”ç”¨é…ç½®åˆ°èµ„æº
  patch           æ›´æ–°èµ„æºçš„å­—æ®µ
  replace         é€šè¿‡æ–‡ä»¶åæˆ–æ ‡å‡†è¾“å…¥æ›¿æ¢èµ„æº
  wait            å®éªŒæ€§ï¼šç­‰å¾…ä¸€ä¸ªæˆ–å¤šä¸ªèµ„æºè¾¾åˆ°ç‰¹å®šæ¡ä»¶
  kustomize       ä»ç›®å½•æˆ– URL æ„å»ºä¸€ä¸ª Kustomization ç›®æ ‡

è®¾ç½®å‘½ä»¤:
  label           æ›´æ–°èµ„æºä¸Šçš„æ ‡ç­¾
  annotate        æ›´æ–°èµ„æºä¸Šçš„æ³¨è§£
  completion      ä¸ºæŒ‡å®šçš„ shellï¼ˆbashã€zsh æˆ– fishï¼‰è¾“å‡ºå‘½ä»¤è¡¥å…¨ä»£ç 

å…¶ä»–å‘½ä»¤:
  alpha           Alpha é˜¶æ®µåŠŸèƒ½çš„å‘½ä»¤
  api-resources   æ‰“å°æœåŠ¡å™¨æ”¯æŒçš„ API èµ„æº
  api-versions    æ‰“å°æœåŠ¡å™¨æ”¯æŒçš„ API ç‰ˆæœ¬ï¼Œæ ¼å¼ä¸º "group/version"
  config          ä¿®æ”¹ kubeconfig æ–‡ä»¶
  plugin          æä¾›ä¸æ’ä»¶äº¤äº’çš„å®ç”¨å·¥å…·
  version         æ‰“å°å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„ç‰ˆæœ¬ä¿¡æ¯

ç”¨æ³•:
  kubectl [flags] [options]

ä½¿ç”¨ "kubectl <command> --help" è·å–æŸä¸ªå‘½ä»¤çš„è¯¦ç»†ä¿¡æ¯ã€‚
ä½¿ç”¨ "kubectl options" æŸ¥çœ‹é€‚ç”¨äºæ‰€æœ‰å‘½ä»¤çš„å…¨å±€å‘½ä»¤è¡Œé€‰é¡¹ã€‚
```



`kubectl` æ˜¯ Kubernetes çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºä¸é›†ç¾¤äº¤äº’ã€‚ä¸‹é¢æ˜¯ä¸€äº›æœ€å¸¸ç”¨çš„ `kubectl` å‘½ä»¤ï¼Œåˆ†ä¸ºå‡ ç±»ï¼Œé€‚åˆæ—¥å¸¸è¿ç»´ã€å¼€å‘è°ƒè¯•å’Œé›†ç¾¤ç®¡ç†ã€‚



------

### ğŸŸ¢ åŸºç¡€æ“ä½œå‘½ä»¤

| å‘½ä»¤                                       | è¯´æ˜                                 |
| ------------------------------------------ | ------------------------------------ |
| `kubectl get pods`                         | æŸ¥çœ‹æ‰€æœ‰ Pod                         |
| `kubectl get svc`                          | æŸ¥çœ‹æ‰€æœ‰ Service                     |
| `kubectl get nodes`                        | æŸ¥çœ‹æ‰€æœ‰ Node                        |
| `kubectl get deployments`                  | æŸ¥çœ‹æ‰€æœ‰ Deployment                  |
| `kubectl get all`                          | æŸ¥çœ‹æ‰€æœ‰èµ„æº                         |
| `kubectl describe pod <pod-name>`          | æŸ¥çœ‹ Pod è¯¦æƒ…                        |
| `kubectl logs <pod-name>`                  | æŸ¥çœ‹ Pod æ—¥å¿—                        |
| `kubectl exec -it <pod-name> -- /bin/bash` | è¿›å…¥ Pod å®¹å™¨å†…éƒ¨ï¼ˆéœ€è¦å®¹å™¨æœ‰ bashï¼‰ |

------

### ğŸŸ¡ èµ„æºç®¡ç†

| å‘½ä»¤                                           | è¯´æ˜                         |
| ---------------------------------------------- | ---------------------------- |
| `kubectl apply -f <file>.yaml`                 | åº”ç”¨é…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºæˆ–æ›´æ–°èµ„æº |
| `kubectl create -f <file>.yaml`                | åˆ›å»ºèµ„æº                     |
| `kubectl delete -f <file>.yaml`                | åˆ é™¤èµ„æº                     |
| `kubectl delete pod <pod-name>`                | åˆ é™¤æŸä¸ª Pod                 |
| `kubectl scale deployment <name> --replicas=3` | æ‰©ç¼©å®¹ Deployment            |

------

### ğŸ”µ å‘½åç©ºé—´ç›¸å…³

| å‘½ä»¤                                                         | è¯´æ˜                  |
| ------------------------------------------------------------ | --------------------- |
| `kubectl get ns`                                             | æŸ¥çœ‹æ‰€æœ‰å‘½åç©ºé—´      |
| `kubectl get pods -n <namespace>`                            | æŸ¥çœ‹æŸå‘½åç©ºé—´çš„ Pods |
| `kubectl config set-context --current --namespace=<namespace>` | è®¾ç½®é»˜è®¤å‘½åç©ºé—´      |

------

### ğŸŸ£ è°ƒè¯•ä¸æ’é”™

| å‘½ä»¤                                          | è¯´æ˜                                           |
| --------------------------------------------- | ---------------------------------------------- |
| `kubectl describe node <node-name>`           | æŸ¥çœ‹èŠ‚ç‚¹è¯¦ç»†ä¿¡æ¯                               |
| `kubectl top pod`                             | æŸ¥çœ‹ Pod èµ„æºä½¿ç”¨æƒ…å†µï¼ˆéœ€å®‰è£… metrics-serverï¼‰ |
| `kubectl get events`                          | æŸ¥çœ‹äº‹ä»¶ï¼Œæ’æŸ¥é”™è¯¯                             |
| `kubectl port-forward pod/<pod-name> 8080:80` | æœ¬åœ°ç«¯å£è½¬å‘åˆ° Pod                             |

------

### âš™ï¸ é…ç½®ç›¸å…³

| å‘½ä»¤                                        | è¯´æ˜           |
| ------------------------------------------- | -------------- |
| `kubectl config get-contexts`               | æŸ¥çœ‹æ‰€æœ‰ä¸Šä¸‹æ–‡ |
| `kubectl config use-context <context-name>` | åˆ‡æ¢ä¸Šä¸‹æ–‡     |
| `kubectl version`                           | æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯   |
| `kubectl cluster-info`                      | æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯   |

