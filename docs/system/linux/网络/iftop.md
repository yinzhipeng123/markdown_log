# iftop命令



## 常见用法



`iftop` 是一个非常强大的工具，用于监控网络接口的实时流量。以下是一些 `iftop` 的常用用法和命令选项：

1. **基本用法**：
   
   - 直接运行 `iftop` 来观察所有网络接口的流量：
     ```bash
     sudo iftop
     ```
   
2. **指定网络接口**：
   - 通过 `-i` 选项指定要监控的特定网络接口：
     ```bash
     sudo iftop -i eth0
     ```

3. **显示数字IP地址而非主机名**：
   - 使用 `-n` 选项来阻止 `iftop` 将 IP 地址解析为主机名：
     ```bash
     sudo iftop -n
     ```

4. **显示端口号**：
   - 使用 `-P` 选项显示源和目的端口号：
     ```bash
     sudo iftop -P
     ```

5. **设置流量过滤规则**：
   - 使用 `-f` 选项来应用过滤规则，只显示符合特定条件的流量。例如，只显示目的端口为 80 的流量：
     ```bash
     sudo iftop -f "dst port 80"
     ```

6. **限制显示的行数**：
   - 使用 `-L` 选项来限制显示的行数。例如，只显示前 10 行数据：
     ```bash
     sudo iftop -L 10
     ```

7. **使用非特权用户运行**：
   - 如果你已经对 `iftop` 设置了适当的权限，可以无需 `sudo` 运行：
     ```bash
     iftop
     ```

8. **显示两个指定主机间的流量**：
   - 使用 `-F` 选项来过滤并显示两个特定网络地址之间的流量。例如：
     ```bash
     sudo iftop -F 192.168.1.1/24
     ```

9. **帮助信息**：
   - 显示 `iftop` 的帮助信息，了解更多选项和用法：
     ```bash
     iftop -h
     ```



## 命令结果解释

![image-20241127205629360](https://s2.loli.net/2024/11/27/9vdZj7g2VFSDXNW.png)

这张 `iftop` 的截图显示了通过 `eth0` 网络接口的实时网络流量，并且使用 `-P` 参数来展示端口信息。下面是对屏幕的解释：

- **每一行**：代表一个活动的网络连接。每个连接由三部分组成：源地址（左侧）、目的地址（中间）和流量统计（右侧）。

- **源地址和目的地址**：左侧和中间的列显示了每个网络连接的两端。地址后面可能跟有端口号，如 `ssh` 或 `http` 等，表示对应的服务。

- **流量统计**：右侧的三组数字分别代表过去 2 秒、10 秒和 40 秒内的平均流量速率。这些数值通常有三种：`<=` 表示流入的流量，`=>` 表示流出的流量，`<=>` 表示双向的流量。

- **TX 和 RX**：底部的 `TX` 表示传输（发送）的数据总量，`RX` 表示接收的数据总量。

- **cum、peak 和 rates**：
  - [ ] `cum`：表示自 `iftop` 启动以来的累积流量。
  - [ ] `peak`：显示观察期间的最高流量峰值。
  - [ ] `rates`：展示当前的平均流量速率，分别对应过去 2 秒、10 秒和 40 秒的平均值。

- **TOTAL**：底部的 `TOTAL` 行显示了传输和接收数据的总和。

- **箭头**：流量的方向由箭头指示，`<=` 表示接收，`=>` 表示发送。

在实际情况中，这些信息可以帮助你监控网络流量的大小、流向以及随时间的变化情况，从而对网络使用情况有一个直观的理解。

在 `iftop` 截图中，流量的单位通常是按字节计算的，并且根据数量级使用适当的前缀。常见的单位包括：

- `b`：代表字节（Bytes）
- `Kb`：代表千字节（Kilobytes）
- `Mb`：代表兆字节（Megabytes）
- `Gb`：代表吉字节（Gigabytes）

截图上显示的单位是 `Kb`，表示千字节。这意味着数值后面带有 `Kb` 的流量数据是以千字节为单位的。例如，`5.41Kb` 表示 5.41 千字节。这些数据通常是按照每秒的速率显示的，即 `Kbps`（千字节每秒）。在网络术语中，速率通常指的是每秒可以传输的数据量。

https://yinzhipeng123.github.io/markdown_log/system/centos7/%E5%90%84%E7%A7%8D%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%98%E5%82%A8%E5%8D%95%E4%BD%8D%E5%92%8C%E7%BD%91%E9%80%9F%E5%8D%95%E4%BD%8D/



https://wangchujiang.com/linux-command/c/iftop.html